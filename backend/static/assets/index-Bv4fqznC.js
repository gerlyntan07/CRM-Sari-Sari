function jJ(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var OC={exports:{}},Dh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5;function CJ(){if(p5)return Dh;p5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,i){var l=null;if(i!==void 0&&(l=""+i),r.key!==void 0&&(l=""+r.key),"key"in r){i={};for(var o in r)o!=="key"&&(i[o]=r[o])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:l,ref:r!==void 0?r:null,props:i}}return Dh.Fragment=t,Dh.jsx=n,Dh.jsxs=n,Dh}var x5;function SJ(){return x5||(x5=1,OC.exports=CJ()),OC.exports}var a=SJ(),MC={exports:{}},Ft={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5;function _J(){if(y5)return Ft;y5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=p&&V[p]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,v={};function j(V,ee,me){this.props=V,this.context=ee,this.refs=v,this.updater=me||w}j.prototype.isReactComponent={},j.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},j.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function C(){}C.prototype=j.prototype;function S(V,ee,me){this.props=V,this.context=ee,this.refs=v,this.updater=me||w}var _=S.prototype=new C;_.constructor=S,x(_,j.prototype),_.isPureReactComponent=!0;var A=Array.isArray;function T(){}var E={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function z(V,ee,me){var we=me.ref;return{$$typeof:e,type:V,key:ee,ref:we!==void 0?we:null,props:me}}function K(V,ee){return z(V.type,ee,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===e}function O(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return ee[me]})}var L=/\/+/g;function H(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?O(""+V.key):ee.toString(36)}function ae(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(T,T):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function W(V,ee,me,we,ve){var Ae=typeof V;(Ae==="undefined"||Ae==="boolean")&&(V=null);var be=!1;if(V===null)be=!0;else switch(Ae){case"bigint":case"string":case"number":be=!0;break;case"object":switch(V.$$typeof){case e:case t:be=!0;break;case m:return be=V._init,W(be(V._payload),ee,me,we,ve)}}if(be)return ve=ve(V),be=we===""?"."+H(V,0):we,A(ve)?(me="",be!=null&&(me=be.replace(L,"$&/")+"/"),W(ve,ee,me,"",function(Ce){return Ce})):ve!=null&&(B(ve)&&(ve=K(ve,me+(ve.key==null||V&&V.key===ve.key?"":(""+ve.key).replace(L,"$&/")+"/")+be)),ee.push(ve)),1;be=0;var Ie=we===""?".":we+":";if(A(V))for(var G=0;G<V.length;G++)we=V[G],Ae=Ie+H(we,G),be+=W(we,ee,me,Ae,ve);else if(G=b(V),typeof G=="function")for(V=G.call(V),G=0;!(we=V.next()).done;)we=we.value,Ae=Ie+H(we,G++),be+=W(we,ee,me,Ae,ve);else if(Ae==="object"){if(typeof V.then=="function")return W(ae(V),ee,me,we,ve);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return be}function q(V,ee,me){if(V==null)return V;var we=[],ve=0;return W(V,we,"","",function(Ae){return ee.call(me,Ae,ve++)}),we}function le(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var Q=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},te={map:q,forEach:function(V,ee,me){q(V,function(){ee.apply(this,arguments)},me)},count:function(V){var ee=0;return q(V,function(){ee++}),ee},toArray:function(V){return q(V,function(ee){return ee})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ft.Activity=h,Ft.Children=te,Ft.Component=j,Ft.Fragment=n,Ft.Profiler=r,Ft.PureComponent=S,Ft.StrictMode=s,Ft.Suspense=d,Ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Ft.__COMPILER_RUNTIME={__proto__:null,c:function(V){return E.H.useMemoCache(V)}},Ft.cache=function(V){return function(){return V.apply(null,arguments)}},Ft.cacheSignal=function(){return null},Ft.cloneElement=function(V,ee,me){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var we=x({},V.props),ve=V.key;if(ee!=null)for(Ae in ee.key!==void 0&&(ve=""+ee.key),ee)!D.call(ee,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ee.ref===void 0||(we[Ae]=ee[Ae]);var Ae=arguments.length-2;if(Ae===1)we.children=me;else if(1<Ae){for(var be=Array(Ae),Ie=0;Ie<Ae;Ie++)be[Ie]=arguments[Ie+2];we.children=be}return z(V.type,ve,we)},Ft.createContext=function(V){return V={$$typeof:l,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:i,_context:V},V},Ft.createElement=function(V,ee,me){var we,ve={},Ae=null;if(ee!=null)for(we in ee.key!==void 0&&(Ae=""+ee.key),ee)D.call(ee,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(ve[we]=ee[we]);var be=arguments.length-2;if(be===1)ve.children=me;else if(1<be){for(var Ie=Array(be),G=0;G<be;G++)Ie[G]=arguments[G+2];ve.children=Ie}if(V&&V.defaultProps)for(we in be=V.defaultProps,be)ve[we]===void 0&&(ve[we]=be[we]);return z(V,Ae,ve)},Ft.createRef=function(){return{current:null}},Ft.forwardRef=function(V){return{$$typeof:o,render:V}},Ft.isValidElement=B,Ft.lazy=function(V){return{$$typeof:m,_payload:{_status:-1,_result:V},_init:le}},Ft.memo=function(V,ee){return{$$typeof:c,type:V,compare:ee===void 0?null:ee}},Ft.startTransition=function(V){var ee=E.T,me={};E.T=me;try{var we=V(),ve=E.S;ve!==null&&ve(me,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(T,Q)}catch(Ae){Q(Ae)}finally{ee!==null&&me.types!==null&&(ee.types=me.types),E.T=ee}},Ft.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Ft.use=function(V){return E.H.use(V)},Ft.useActionState=function(V,ee,me){return E.H.useActionState(V,ee,me)},Ft.useCallback=function(V,ee){return E.H.useCallback(V,ee)},Ft.useContext=function(V){return E.H.useContext(V)},Ft.useDebugValue=function(){},Ft.useDeferredValue=function(V,ee){return E.H.useDeferredValue(V,ee)},Ft.useEffect=function(V,ee){return E.H.useEffect(V,ee)},Ft.useEffectEvent=function(V){return E.H.useEffectEvent(V)},Ft.useId=function(){return E.H.useId()},Ft.useImperativeHandle=function(V,ee,me){return E.H.useImperativeHandle(V,ee,me)},Ft.useInsertionEffect=function(V,ee){return E.H.useInsertionEffect(V,ee)},Ft.useLayoutEffect=function(V,ee){return E.H.useLayoutEffect(V,ee)},Ft.useMemo=function(V,ee){return E.H.useMemo(V,ee)},Ft.useOptimistic=function(V,ee){return E.H.useOptimistic(V,ee)},Ft.useReducer=function(V,ee,me){return E.H.useReducer(V,ee,me)},Ft.useRef=function(V){return E.H.useRef(V)},Ft.useState=function(V){return E.H.useState(V)},Ft.useSyncExternalStore=function(V,ee,me){return E.H.useSyncExternalStore(V,ee,me)},Ft.useTransition=function(){return E.H.useTransition()},Ft.version="19.2.0",Ft}var b5;function Nf(){return b5||(b5=1,MC.exports=_J()),MC.exports}var g=Nf();const pt=Di(g),Zd=jJ({__proto__:null,default:pt},[g]);var IC={exports:{}},Oh={},$C={exports:{}},RC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v5;function AJ(){return v5||(v5=1,(function(e){function t(W,q){var le=W.length;W.push(q);e:for(;0<le;){var Q=le-1>>>1,te=W[Q];if(0<r(te,q))W[Q]=q,W[le]=te,le=Q;else break e}}function n(W){return W.length===0?null:W[0]}function s(W){if(W.length===0)return null;var q=W[0],le=W.pop();if(le!==q){W[0]=le;e:for(var Q=0,te=W.length,V=te>>>1;Q<V;){var ee=2*(Q+1)-1,me=W[ee],we=ee+1,ve=W[we];if(0>r(me,le))we<te&&0>r(ve,me)?(W[Q]=ve,W[we]=le,Q=we):(W[Q]=me,W[ee]=le,Q=ee);else if(we<te&&0>r(ve,le))W[Q]=ve,W[we]=le,Q=we;else break e}}return q}function r(W,q){var le=W.sortIndex-q.sortIndex;return le!==0?le:W.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var d=[],c=[],m=1,h=null,p=3,b=!1,w=!1,x=!1,v=!1,j=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(W){for(var q=n(c);q!==null;){if(q.callback===null)s(c);else if(q.startTime<=W)s(c),q.sortIndex=q.expirationTime,t(d,q);else break;q=n(c)}}function A(W){if(x=!1,_(W),!w)if(n(d)!==null)w=!0,T||(T=!0,O());else{var q=n(c);q!==null&&ae(A,q.startTime-W)}}var T=!1,E=-1,D=5,z=-1;function K(){return v?!0:!(e.unstable_now()-z<D)}function B(){if(v=!1,T){var W=e.unstable_now();z=W;var q=!0;try{e:{w=!1,x&&(x=!1,C(E),E=-1),b=!0;var le=p;try{t:{for(_(W),h=n(d);h!==null&&!(h.expirationTime>W&&K());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var te=Q(h.expirationTime<=W);if(W=e.unstable_now(),typeof te=="function"){h.callback=te,_(W),q=!0;break t}h===n(d)&&s(d),_(W)}else s(d);h=n(d)}if(h!==null)q=!0;else{var V=n(c);V!==null&&ae(A,V.startTime-W),q=!1}}break e}finally{h=null,p=le,b=!1}q=void 0}}finally{q?O():T=!1}}}var O;if(typeof S=="function")O=function(){S(B)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=B,O=function(){H.postMessage(null)}}else O=function(){j(B,0)};function ae(W,q){E=j(function(){W(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(W){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var le=p;p=q;try{return W()}finally{p=le}},e.unstable_requestPaint=function(){v=!0},e.unstable_runWithPriority=function(W,q){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=p;p=W;try{return q()}finally{p=le}},e.unstable_scheduleCallback=function(W,q,le){var Q=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Q+le:Q):le=Q,W){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=le+te,W={id:m++,callback:q,priorityLevel:W,startTime:le,expirationTime:te,sortIndex:-1},le>Q?(W.sortIndex=le,t(c,W),n(d)===null&&W===n(c)&&(x?(C(E),E=-1):x=!0,ae(A,le-Q))):(W.sortIndex=te,t(d,W),w||b||(w=!0,T||(T=!0,O()))),W},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(W){var q=p;return function(){var le=p;p=q;try{return W.apply(this,arguments)}finally{p=le}}}})(RC)),RC}var w5;function TJ(){return w5||(w5=1,$C.exports=AJ()),$C.exports}var zC={exports:{}},ms={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N5;function EJ(){if(N5)return ms;N5=1;var e=Nf();function t(d){var c="https://react.dev/errors/"+d;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(d,c,m){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:d,containerInfo:c,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(d,c){if(d==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ms.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,ms.createPortal=function(d,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(d,c,null,m)},ms.flushSync=function(d){var c=l.T,m=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=c,s.p=m,s.d.f()}},ms.preconnect=function(d,c){typeof d=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,s.d.C(d,c))},ms.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},ms.preinit=function(d,c){if(typeof d=="string"&&c&&typeof c.as=="string"){var m=c.as,h=o(m,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,b=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;m==="style"?s.d.S(d,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:b}):m==="script"&&s.d.X(d,{crossOrigin:h,integrity:p,fetchPriority:b,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ms.preinitModule=function(d,c){if(typeof d=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var m=o(c.as,c.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&s.d.M(d)},ms.preload=function(d,c){if(typeof d=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var m=c.as,h=o(m,c.crossOrigin);s.d.L(d,m,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ms.preloadModule=function(d,c){if(typeof d=="string")if(c){var m=o(c.as,c.crossOrigin);s.d.m(d,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:m,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else s.d.m(d)},ms.requestFormReset=function(d){s.d.r(d)},ms.unstable_batchedUpdates=function(d,c){return d(c)},ms.useFormState=function(d,c,m){return l.H.useFormState(d,c,m)},ms.useFormStatus=function(){return l.H.useHostTransitionStatus()},ms.version="19.2.0",ms}var j5;function ZF(){if(j5)return zC.exports;j5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zC.exports=EJ(),zC.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5;function kJ(){if(C5)return Oh;C5=1;var e=TJ(),t=Nf(),n=ZF();function s(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function l(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(u.tag===31){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function d(u){if(i(u)!==u)throw Error(s(188))}function c(u){var f=u.alternate;if(!f){if(f=i(u),f===null)throw Error(s(188));return f!==u?null:u}for(var y=u,N=f;;){var k=y.return;if(k===null)break;var P=k.alternate;if(P===null){if(N=k.return,N!==null){y=N;continue}break}if(k.child===P.child){for(P=k.child;P;){if(P===y)return d(k),u;if(P===N)return d(k),f;P=P.sibling}throw Error(s(188))}if(y.return!==N.return)y=k,N=P;else{for(var Z=!1,fe=k.child;fe;){if(fe===y){Z=!0,y=k,N=P;break}if(fe===N){Z=!0,N=k,y=P;break}fe=fe.sibling}if(!Z){for(fe=P.child;fe;){if(fe===y){Z=!0,y=P,N=k;break}if(fe===N){Z=!0,N=P,y=k;break}fe=fe.sibling}if(!Z)throw Error(s(189))}}if(y.alternate!==N)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?u:f}function m(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=m(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function O(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var L=Symbol.for("react.client.reference");function H(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===L?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case x:return"Fragment";case j:return"Profiler";case v:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case w:return"Portal";case S:return u.displayName||"Context";case C:return(u._context.displayName||"Context")+".Consumer";case _:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case E:return f=u.displayName||null,f!==null?f:H(u.type)||"Memo";case D:f=u._payload,u=u._init;try{return H(u(f))}catch{}}return null}var ae=Array.isArray,W=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Q=[],te=-1;function V(u){return{current:u}}function ee(u){0>te||(u.current=Q[te],Q[te]=null,te--)}function me(u,f){te++,Q[te]=u.current,u.current=f}var we=V(null),ve=V(null),Ae=V(null),be=V(null);function Ie(u,f){switch(me(Ae,f),me(ve,u),me(we,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?zO(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=zO(f),u=UO(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ee(we),me(we,u)}function G(){ee(we),ee(ve),ee(Ae)}function Ce(u){u.memoizedState!==null&&me(be,u);var f=we.current,y=UO(f,u.type);f!==y&&(me(ve,u),me(we,y))}function ce(u){ve.current===u&&(ee(we),ee(ve)),be.current===u&&(ee(be),Eh._currentValue=le)}var F,ie;function he(u){if(F===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);F=f&&f[1]||"",ie=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F+u+ie}var Le=!1;function xe(u,f){if(!u||Le)return"";Le=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(f){var ut=function(){throw Error()};if(Object.defineProperty(ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ut,[])}catch(rt){var Ze=rt}Reflect.construct(u,[],ut)}else{try{ut.call()}catch(rt){Ze=rt}u.call(ut.prototype)}}else{try{throw Error()}catch(rt){Ze=rt}(ut=u())&&typeof ut.catch=="function"&&ut.catch(function(){})}}catch(rt){if(rt&&Ze&&typeof rt.stack=="string")return[rt.stack,Ze.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=N.DetermineComponentFrameRoot(),Z=P[0],fe=P[1];if(Z&&fe){var Pe=Z.split(`
`),Qe=fe.split(`
`);for(k=N=0;N<Pe.length&&!Pe[N].includes("DetermineComponentFrameRoot");)N++;for(;k<Qe.length&&!Qe[k].includes("DetermineComponentFrameRoot");)k++;if(N===Pe.length||k===Qe.length)for(N=Pe.length-1,k=Qe.length-1;1<=N&&0<=k&&Pe[N]!==Qe[k];)k--;for(;1<=N&&0<=k;N--,k--)if(Pe[N]!==Qe[k]){if(N!==1||k!==1)do if(N--,k--,0>k||Pe[N]!==Qe[k]){var it=`
`+Pe[N].replace(" at new "," at ");return u.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",u.displayName)),it}while(1<=N&&0<=k);break}}}finally{Le=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?he(y):""}function Ve(u,f){switch(u.tag){case 26:case 27:case 5:return he(u.type);case 16:return he("Lazy");case 13:return u.child!==f&&f!==null?he("Suspense Fallback"):he("Suspense");case 19:return he("SuspenseList");case 0:case 15:return xe(u.type,!1);case 11:return xe(u.type.render,!1);case 1:return xe(u.type,!0);case 31:return he("Activity");default:return""}}function ke(u){try{var f="",y=null;do f+=Ve(u,y),y=u,u=u.return;while(u);return f}catch(N){return`
Error generating stack: `+N.message+`
`+N.stack}}var ye=Object.prototype.hasOwnProperty,Me=e.unstable_scheduleCallback,He=e.unstable_cancelCallback,Be=e.unstable_shouldYield,dt=e.unstable_requestPaint,M=e.unstable_now,pe=e.unstable_getCurrentPriorityLevel,se=e.unstable_ImmediatePriority,je=e.unstable_UserBlockingPriority,We=e.unstable_NormalPriority,Ne=e.unstable_LowPriority,qe=e.unstable_IdlePriority,De=e.log,Je=e.unstable_setDisableYieldValue,at=null,ot=null;function R(u){if(typeof De=="function"&&Je(u),ot&&typeof ot.setStrictMode=="function")try{ot.setStrictMode(at,u)}catch{}}var $=Math.clz32?Math.clz32:de,I=Math.log,U=Math.LN2;function de(u){return u>>>=0,u===0?32:31-(I(u)/U|0)|0}var ge=256,ue=262144,Se=4194304;function Fe(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ft(u,f,y){var N=u.pendingLanes;if(N===0)return 0;var k=0,P=u.suspendedLanes,Z=u.pingedLanes;u=u.warmLanes;var fe=N&134217727;return fe!==0?(N=fe&~P,N!==0?k=Fe(N):(Z&=fe,Z!==0?k=Fe(Z):y||(y=fe&~u,y!==0&&(k=Fe(y))))):(fe=N&~P,fe!==0?k=Fe(fe):Z!==0?k=Fe(Z):y||(y=N&~u,y!==0&&(k=Fe(y)))),k===0?0:f!==0&&f!==k&&(f&P)===0&&(P=k&-k,y=f&-f,P>=y||P===32&&(y&4194048)!==0)?f:k}function vt(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function ze(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var u=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),u}function Te(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function st(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function X(u,f,y,N,k,P){var Z=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var fe=u.entanglements,Pe=u.expirationTimes,Qe=u.hiddenUpdates;for(y=Z&~y;0<y;){var it=31-$(y),ut=1<<it;fe[it]=0,Pe[it]=-1;var Ze=Qe[it];if(Ze!==null)for(Qe[it]=null,it=0;it<Ze.length;it++){var rt=Ze[it];rt!==null&&(rt.lane&=-536870913)}y&=~ut}N!==0&&Ee(u,N,0),P!==0&&k===0&&u.tag!==0&&(u.suspendedLanes|=P&~(Z&~f))}function Ee(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var N=31-$(f);u.entangledLanes|=f,u.entanglements[N]=u.entanglements[N]|1073741824|y&261930}function $e(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var N=31-$(y),k=1<<N;k&f|u[N]&f&&(u[N]|=f),y&=~k}}function Ye(u,f){var y=f&-f;return y=(y&42)!==0?1:J(y),(y&(u.suspendedLanes|f))!==0?0:y}function J(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function ne(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function oe(){var u=q.p;return u!==0?u:(u=window.event,u===void 0?32:c5(u.type))}function Oe(u,f){var y=q.p;try{return q.p=u,f()}finally{q.p=y}}var et=Math.random().toString(36).slice(2),nt="__reactFiber$"+et,ht="__reactProps$"+et,_e="__reactContainer$"+et,gt="__reactEvents$"+et,Wt="__reactListeners$"+et,sa="__reactHandles$"+et,Ja="__reactResources$"+et,rr="__reactMarker$"+et;function ts(u){delete u[nt],delete u[ht],delete u[gt],delete u[Wt],delete u[sa]}function ir(u){var f=u[nt];if(f)return f;for(var y=u.parentNode;y;){if(f=y[_e]||y[nt]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(u=qO(u);u!==null;){if(y=u[nt])return y;u=qO(u)}return f}u=y,y=u.parentNode}return null}function Ro(u){if(u=u[nt]||u[_e]){var f=u.tag;if(f===5||f===6||f===13||f===31||f===26||f===27||f===3)return u}return null}function Vf(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(s(33))}function Mu(u){var f=u[Ja];return f||(f=u[Ja]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Vn(u){u[rr]=!0}var AP=new Set,TP={};function qc(u,f){Iu(u,f),Iu(u+"Capture",f)}function Iu(u,f){for(TP[u]=f,u=0;u<f.length;u++)AP.add(f[u])}var hX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),EP={},kP={};function gX(u){return ye.call(kP,u)?!0:ye.call(EP,u)?!1:hX.test(u)?kP[u]=!0:(EP[u]=!0,!1)}function Wx(u,f,y){if(gX(f))if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var N=f.toLowerCase().slice(0,5);if(N!=="data-"&&N!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+y)}}function qx(u,f,y){if(y===null)u.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+y)}}function wl(u,f,y,N){if(N===null)u.removeAttribute(y);else{switch(typeof N){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(y);return}u.setAttributeNS(f,y,""+N)}}function kr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function LP(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function pX(u,f,y){var N=Object.getOwnPropertyDescriptor(u.constructor.prototype,f);if(!u.hasOwnProperty(f)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var k=N.get,P=N.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return k.call(this)},set:function(Z){y=""+Z,P.call(this,Z)}}),Object.defineProperty(u,f,{enumerable:N.enumerable}),{getValue:function(){return y},setValue:function(Z){y=""+Z},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Aj(u){if(!u._valueTracker){var f=LP(u)?"checked":"value";u._valueTracker=pX(u,f,""+u[f])}}function PP(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var y=f.getValue(),N="";return u&&(N=LP(u)?u.checked?"true":"false":u.value),u=N,u!==y?(f.setValue(u),!0):!1}function Yx(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var xX=/[\n"\\]/g;function Lr(u){return u.replace(xX,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Tj(u,f,y,N,k,P,Z,fe){u.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?u.type=Z:u.removeAttribute("type"),f!=null?Z==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+kr(f)):u.value!==""+kr(f)&&(u.value=""+kr(f)):Z!=="submit"&&Z!=="reset"||u.removeAttribute("value"),f!=null?Ej(u,Z,kr(f)):y!=null?Ej(u,Z,kr(y)):N!=null&&u.removeAttribute("value"),k==null&&P!=null&&(u.defaultChecked=!!P),k!=null&&(u.checked=k&&typeof k!="function"&&typeof k!="symbol"),fe!=null&&typeof fe!="function"&&typeof fe!="symbol"&&typeof fe!="boolean"?u.name=""+kr(fe):u.removeAttribute("name")}function DP(u,f,y,N,k,P,Z,fe){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(u.type=P),f!=null||y!=null){if(!(P!=="submit"&&P!=="reset"||f!=null)){Aj(u);return}y=y!=null?""+kr(y):"",f=f!=null?""+kr(f):y,fe||f===u.value||(u.value=f),u.defaultValue=f}N=N??k,N=typeof N!="function"&&typeof N!="symbol"&&!!N,u.checked=fe?u.checked:!!N,u.defaultChecked=!!N,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(u.name=Z),Aj(u)}function Ej(u,f,y){f==="number"&&Yx(u.ownerDocument)===u||u.defaultValue===""+y||(u.defaultValue=""+y)}function $u(u,f,y,N){if(u=u.options,f){f={};for(var k=0;k<y.length;k++)f["$"+y[k]]=!0;for(y=0;y<u.length;y++)k=f.hasOwnProperty("$"+u[y].value),u[y].selected!==k&&(u[y].selected=k),k&&N&&(u[y].defaultSelected=!0)}else{for(y=""+kr(y),f=null,k=0;k<u.length;k++){if(u[k].value===y){u[k].selected=!0,N&&(u[k].defaultSelected=!0);return}f!==null||u[k].disabled||(f=u[k])}f!==null&&(f.selected=!0)}}function OP(u,f,y){if(f!=null&&(f=""+kr(f),f!==u.value&&(u.value=f),y==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=y!=null?""+kr(y):""}function MP(u,f,y,N){if(f==null){if(N!=null){if(y!=null)throw Error(s(92));if(ae(N)){if(1<N.length)throw Error(s(93));N=N[0]}y=N}y==null&&(y=""),f=y}y=kr(f),u.defaultValue=y,N=u.textContent,N===y&&N!==""&&N!==null&&(u.value=N),Aj(u)}function Ru(u,f){if(f){var y=u.firstChild;if(y&&y===u.lastChild&&y.nodeType===3){y.nodeValue=f;return}}u.textContent=f}var yX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function IP(u,f,y){var N=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?N?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":N?u.setProperty(f,y):typeof y!="number"||y===0||yX.has(f)?f==="float"?u.cssFloat=y:u[f]=(""+y).trim():u[f]=y+"px"}function $P(u,f,y){if(f!=null&&typeof f!="object")throw Error(s(62));if(u=u.style,y!=null){for(var N in y)!y.hasOwnProperty(N)||f!=null&&f.hasOwnProperty(N)||(N.indexOf("--")===0?u.setProperty(N,""):N==="float"?u.cssFloat="":u[N]="");for(var k in f)N=f[k],f.hasOwnProperty(k)&&y[k]!==N&&IP(u,k,N)}else for(var P in f)f.hasOwnProperty(P)&&IP(u,P,f[P])}function kj(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kx(u){return vX.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function Nl(){}var Lj=null;function Pj(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var zu=null,Uu=null;function RP(u){var f=Ro(u);if(f&&(u=f.stateNode)){var y=u[ht]||null;e:switch(u=f.stateNode,f.type){case"input":if(Tj(u,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=u;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Lr(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var N=y[f];if(N!==u&&N.form===u.form){var k=N[ht]||null;if(!k)throw Error(s(90));Tj(N,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(f=0;f<y.length;f++)N=y[f],N.form===u.form&&PP(N)}break e;case"textarea":OP(u,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&$u(u,!!y.multiple,f,!1)}}}var Dj=!1;function zP(u,f,y){if(Dj)return u(f,y);Dj=!0;try{var N=u(f);return N}finally{if(Dj=!1,(zu!==null||Uu!==null)&&(I0(),zu&&(f=zu,u=Uu,Uu=zu=null,RP(f),u)))for(f=0;f<u.length;f++)RP(u[f])}}function Wf(u,f){var y=u.stateNode;if(y===null)return null;var N=y[ht]||null;if(N===null)return null;y=N[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(u=u.type,N=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!N;break e;default:u=!1}if(u)return null;if(y&&typeof y!="function")throw Error(s(231,f,typeof y));return y}var jl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oj=!1;if(jl)try{var qf={};Object.defineProperty(qf,"passive",{get:function(){Oj=!0}}),window.addEventListener("test",qf,qf),window.removeEventListener("test",qf,qf)}catch{Oj=!1}var zo=null,Mj=null,Qx=null;function UP(){if(Qx)return Qx;var u,f=Mj,y=f.length,N,k="value"in zo?zo.value:zo.textContent,P=k.length;for(u=0;u<y&&f[u]===k[u];u++);var Z=y-u;for(N=1;N<=Z&&f[y-N]===k[P-N];N++);return Qx=k.slice(u,1<N?1-N:void 0)}function Xx(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function Zx(){return!0}function FP(){return!1}function Ms(u){function f(y,N,k,P,Z){this._reactName=y,this._targetInst=k,this.type=N,this.nativeEvent=P,this.target=Z,this.currentTarget=null;for(var fe in u)u.hasOwnProperty(fe)&&(y=u[fe],this[fe]=y?y(P):P[fe]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Zx:FP,this.isPropagationStopped=FP,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Zx)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Zx)},persist:function(){},isPersistent:Zx}),f}var Yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jx=Ms(Yc),Yf=h({},Yc,{view:0,detail:0}),wX=Ms(Yf),Ij,$j,Kf,e0=h({},Yf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zj,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Kf&&(Kf&&u.type==="mousemove"?(Ij=u.screenX-Kf.screenX,$j=u.screenY-Kf.screenY):$j=Ij=0,Kf=u),Ij)},movementY:function(u){return"movementY"in u?u.movementY:$j}}),BP=Ms(e0),NX=h({},e0,{dataTransfer:0}),jX=Ms(NX),CX=h({},Yf,{relatedTarget:0}),Rj=Ms(CX),SX=h({},Yc,{animationName:0,elapsedTime:0,pseudoElement:0}),_X=Ms(SX),AX=h({},Yc,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),TX=Ms(AX),EX=h({},Yc,{data:0}),HP=Ms(EX),kX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DX(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=PX[u])?!!f[u]:!1}function zj(){return DX}var OX=h({},Yf,{key:function(u){if(u.key){var f=kX[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=Xx(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?LX[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zj,charCode:function(u){return u.type==="keypress"?Xx(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Xx(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),MX=Ms(OX),IX=h({},e0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GP=Ms(IX),$X=h({},Yf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zj}),RX=Ms($X),zX=h({},Yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),UX=Ms(zX),FX=h({},e0,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),BX=Ms(FX),HX=h({},Yc,{newState:0,oldState:0}),GX=Ms(HX),VX=[9,13,27,32],Uj=jl&&"CompositionEvent"in window,Qf=null;jl&&"documentMode"in document&&(Qf=document.documentMode);var WX=jl&&"TextEvent"in window&&!Qf,VP=jl&&(!Uj||Qf&&8<Qf&&11>=Qf),WP=" ",qP=!1;function YP(u,f){switch(u){case"keyup":return VX.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KP(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Fu=!1;function qX(u,f){switch(u){case"compositionend":return KP(f);case"keypress":return f.which!==32?null:(qP=!0,WP);case"textInput":return u=f.data,u===WP&&qP?null:u;default:return null}}function YX(u,f){if(Fu)return u==="compositionend"||!Uj&&YP(u,f)?(u=UP(),Qx=Mj=zo=null,Fu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return VP&&f.locale!=="ko"?null:f.data;default:return null}}var KX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function QP(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!KX[u.type]:f==="textarea"}function XP(u,f,y,N){zu?Uu?Uu.push(N):Uu=[N]:zu=N,f=H0(f,"onChange"),0<f.length&&(y=new Jx("onChange","change",null,y,N),u.push({event:y,listeners:f}))}var Xf=null,Zf=null;function QX(u){DO(u,0)}function t0(u){var f=Vf(u);if(PP(f))return u}function ZP(u,f){if(u==="change")return f}var JP=!1;if(jl){var Fj;if(jl){var Bj="oninput"in document;if(!Bj){var eD=document.createElement("div");eD.setAttribute("oninput","return;"),Bj=typeof eD.oninput=="function"}Fj=Bj}else Fj=!1;JP=Fj&&(!document.documentMode||9<document.documentMode)}function tD(){Xf&&(Xf.detachEvent("onpropertychange",aD),Zf=Xf=null)}function aD(u){if(u.propertyName==="value"&&t0(Zf)){var f=[];XP(f,Zf,u,Pj(u)),zP(QX,f)}}function XX(u,f,y){u==="focusin"?(tD(),Xf=f,Zf=y,Xf.attachEvent("onpropertychange",aD)):u==="focusout"&&tD()}function ZX(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return t0(Zf)}function JX(u,f){if(u==="click")return t0(f)}function eZ(u,f){if(u==="input"||u==="change")return t0(f)}function tZ(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var lr=typeof Object.is=="function"?Object.is:tZ;function Jf(u,f){if(lr(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),N=Object.keys(f);if(y.length!==N.length)return!1;for(N=0;N<y.length;N++){var k=y[N];if(!ye.call(f,k)||!lr(u[k],f[k]))return!1}return!0}function nD(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function sD(u,f){var y=nD(u);u=0;for(var N;y;){if(y.nodeType===3){if(N=u+y.textContent.length,u<=f&&N>=f)return{node:y,offset:f-u};u=N}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=nD(y)}}function rD(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?rD(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function iD(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Yx(u.document);f instanceof u.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)u=f.contentWindow;else break;f=Yx(u.document)}return f}function Hj(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var aZ=jl&&"documentMode"in document&&11>=document.documentMode,Bu=null,Gj=null,eh=null,Vj=!1;function lD(u,f,y){var N=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;Vj||Bu==null||Bu!==Yx(N)||(N=Bu,"selectionStart"in N&&Hj(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),eh&&Jf(eh,N)||(eh=N,N=H0(Gj,"onSelect"),0<N.length&&(f=new Jx("onSelect","select",null,f,y),u.push({event:f,listeners:N}),f.target=Bu)))}function Kc(u,f){var y={};return y[u.toLowerCase()]=f.toLowerCase(),y["Webkit"+u]="webkit"+f,y["Moz"+u]="moz"+f,y}var Hu={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionrun:Kc("Transition","TransitionRun"),transitionstart:Kc("Transition","TransitionStart"),transitioncancel:Kc("Transition","TransitionCancel"),transitionend:Kc("Transition","TransitionEnd")},Wj={},oD={};jl&&(oD=document.createElement("div").style,"AnimationEvent"in window||(delete Hu.animationend.animation,delete Hu.animationiteration.animation,delete Hu.animationstart.animation),"TransitionEvent"in window||delete Hu.transitionend.transition);function Qc(u){if(Wj[u])return Wj[u];if(!Hu[u])return u;var f=Hu[u],y;for(y in f)if(f.hasOwnProperty(y)&&y in oD)return Wj[u]=f[y];return u}var cD=Qc("animationend"),dD=Qc("animationiteration"),uD=Qc("animationstart"),nZ=Qc("transitionrun"),sZ=Qc("transitionstart"),rZ=Qc("transitioncancel"),mD=Qc("transitionend"),fD=new Map,qj="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qj.push("scrollEnd");function mi(u,f){fD.set(u,f),qc(f,[u])}var a0=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Pr=[],Gu=0,Yj=0;function n0(){for(var u=Gu,f=Yj=Gu=0;f<u;){var y=Pr[f];Pr[f++]=null;var N=Pr[f];Pr[f++]=null;var k=Pr[f];Pr[f++]=null;var P=Pr[f];if(Pr[f++]=null,N!==null&&k!==null){var Z=N.pending;Z===null?k.next=k:(k.next=Z.next,Z.next=k),N.pending=k}P!==0&&hD(y,k,P)}}function s0(u,f,y,N){Pr[Gu++]=u,Pr[Gu++]=f,Pr[Gu++]=y,Pr[Gu++]=N,Yj|=N,u.lanes|=N,u=u.alternate,u!==null&&(u.lanes|=N)}function Kj(u,f,y,N){return s0(u,f,y,N),r0(u)}function Xc(u,f){return s0(u,null,null,f),r0(u)}function hD(u,f,y){u.lanes|=y;var N=u.alternate;N!==null&&(N.lanes|=y);for(var k=!1,P=u.return;P!==null;)P.childLanes|=y,N=P.alternate,N!==null&&(N.childLanes|=y),P.tag===22&&(u=P.stateNode,u===null||u._visibility&1||(k=!0)),u=P,P=P.return;return u.tag===3?(P=u.stateNode,k&&f!==null&&(k=31-$(y),u=P.hiddenUpdates,N=u[k],N===null?u[k]=[f]:N.push(f),f.lane=y|536870912),P):null}function r0(u){if(50<Nh)throw Nh=0,sC=null,Error(s(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Vu={};function iZ(u,f,y,N){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(u,f,y,N){return new iZ(u,f,y,N)}function Qj(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Cl(u,f){var y=u.alternate;return y===null?(y=or(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&65011712,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function gD(u,f){u.flags&=65011714;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function i0(u,f,y,N,k,P){var Z=0;if(N=u,typeof u=="function")Qj(u)&&(Z=1);else if(typeof u=="string")Z=uJ(u,y,we.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=or(31,y,f,k),u.elementType=z,u.lanes=P,u;case x:return Zc(y.children,k,P,f);case v:Z=8,k|=24;break;case j:return u=or(12,y,f,k|2),u.elementType=j,u.lanes=P,u;case A:return u=or(13,y,f,k),u.elementType=A,u.lanes=P,u;case T:return u=or(19,y,f,k),u.elementType=T,u.lanes=P,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case S:Z=10;break e;case C:Z=9;break e;case _:Z=11;break e;case E:Z=14;break e;case D:Z=16,N=null;break e}Z=29,y=Error(s(130,u===null?"null":typeof u,"")),N=null}return f=or(Z,y,f,k),f.elementType=u,f.type=N,f.lanes=P,f}function Zc(u,f,y,N){return u=or(7,u,N,f),u.lanes=y,u}function Xj(u,f,y){return u=or(6,u,null,f),u.lanes=y,u}function pD(u){var f=or(18,null,null,0);return f.stateNode=u,f}function Zj(u,f,y){return f=or(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var xD=new WeakMap;function Dr(u,f){if(typeof u=="object"&&u!==null){var y=xD.get(u);return y!==void 0?y:(f={value:u,source:f,stack:ke(f)},xD.set(u,f),f)}return{value:u,source:f,stack:ke(f)}}var Wu=[],qu=0,l0=null,th=0,Or=[],Mr=0,Uo=null,Ri=1,zi="";function Sl(u,f){Wu[qu++]=th,Wu[qu++]=l0,l0=u,th=f}function yD(u,f,y){Or[Mr++]=Ri,Or[Mr++]=zi,Or[Mr++]=Uo,Uo=u;var N=Ri;u=zi;var k=32-$(N)-1;N&=~(1<<k),y+=1;var P=32-$(f)+k;if(30<P){var Z=k-k%5;P=(N&(1<<Z)-1).toString(32),N>>=Z,k-=Z,Ri=1<<32-$(f)+k|y<<k|N,zi=P+u}else Ri=1<<P|y<<k|N,zi=u}function Jj(u){u.return!==null&&(Sl(u,1),yD(u,1,0))}function e1(u){for(;u===l0;)l0=Wu[--qu],Wu[qu]=null,th=Wu[--qu],Wu[qu]=null;for(;u===Uo;)Uo=Or[--Mr],Or[Mr]=null,zi=Or[--Mr],Or[Mr]=null,Ri=Or[--Mr],Or[Mr]=null}function bD(u,f){Or[Mr++]=Ri,Or[Mr++]=zi,Or[Mr++]=Uo,Ri=f.id,zi=f.overflow,Uo=u}var as=null,Ra=null,ra=!1,Fo=null,Ir=!1,t1=Error(s(519));function Bo(u){var f=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ah(Dr(f,u)),t1}function vD(u){var f=u.stateNode,y=u.type,N=u.memoizedProps;switch(f[nt]=u,f[ht]=N,y){case"dialog":Jt("cancel",f),Jt("close",f);break;case"iframe":case"object":case"embed":Jt("load",f);break;case"video":case"audio":for(y=0;y<Ch.length;y++)Jt(Ch[y],f);break;case"source":Jt("error",f);break;case"img":case"image":case"link":Jt("error",f),Jt("load",f);break;case"details":Jt("toggle",f);break;case"input":Jt("invalid",f),DP(f,N.value,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name,!0);break;case"select":Jt("invalid",f);break;case"textarea":Jt("invalid",f),MP(f,N.value,N.defaultValue,N.children)}y=N.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||N.suppressHydrationWarning===!0||$O(f.textContent,y)?(N.popover!=null&&(Jt("beforetoggle",f),Jt("toggle",f)),N.onScroll!=null&&Jt("scroll",f),N.onScrollEnd!=null&&Jt("scrollend",f),N.onClick!=null&&(f.onclick=Nl),f=!0):f=!1,f||Bo(u,!0)}function wD(u){for(as=u.return;as;)switch(as.tag){case 5:case 31:case 13:Ir=!1;return;case 27:case 3:Ir=!0;return;default:as=as.return}}function Yu(u){if(u!==as)return!1;if(!ra)return wD(u),ra=!0,!1;var f=u.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=u.type,y=!(y!=="form"&&y!=="button")||bC(u.type,u.memoizedProps)),y=!y),y&&Ra&&Bo(u),wD(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));Ra=WO(u)}else if(f===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));Ra=WO(u)}else f===27?(f=Ra,ac(u.type)?(u=CC,CC=null,Ra=u):Ra=f):Ra=as?Rr(u.stateNode.nextSibling):null;return!0}function Jc(){Ra=as=null,ra=!1}function a1(){var u=Fo;return u!==null&&(zs===null?zs=u:zs.push.apply(zs,u),Fo=null),u}function ah(u){Fo===null?Fo=[u]:Fo.push(u)}var n1=V(null),ed=null,_l=null;function Ho(u,f,y){me(n1,f._currentValue),f._currentValue=y}function Al(u){u._currentValue=n1.current,ee(n1)}function s1(u,f,y){for(;u!==null;){var N=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,N!==null&&(N.childLanes|=f)):N!==null&&(N.childLanes&f)!==f&&(N.childLanes|=f),u===y)break;u=u.return}}function r1(u,f,y,N){var k=u.child;for(k!==null&&(k.return=u);k!==null;){var P=k.dependencies;if(P!==null){var Z=k.child;P=P.firstContext;e:for(;P!==null;){var fe=P;P=k;for(var Pe=0;Pe<f.length;Pe++)if(fe.context===f[Pe]){P.lanes|=y,fe=P.alternate,fe!==null&&(fe.lanes|=y),s1(P.return,y,u),N||(Z=null);break e}P=fe.next}}else if(k.tag===18){if(Z=k.return,Z===null)throw Error(s(341));Z.lanes|=y,P=Z.alternate,P!==null&&(P.lanes|=y),s1(Z,y,u),Z=null}else Z=k.child;if(Z!==null)Z.return=k;else for(Z=k;Z!==null;){if(Z===u){Z=null;break}if(k=Z.sibling,k!==null){k.return=Z.return,Z=k;break}Z=Z.return}k=Z}}function Ku(u,f,y,N){u=null;for(var k=f,P=!1;k!==null;){if(!P){if((k.flags&524288)!==0)P=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var Z=k.alternate;if(Z===null)throw Error(s(387));if(Z=Z.memoizedProps,Z!==null){var fe=k.type;lr(k.pendingProps.value,Z.value)||(u!==null?u.push(fe):u=[fe])}}else if(k===be.current){if(Z=k.alternate,Z===null)throw Error(s(387));Z.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(u!==null?u.push(Eh):u=[Eh])}k=k.return}u!==null&&r1(f,u,y,N),f.flags|=262144}function o0(u){for(u=u.firstContext;u!==null;){if(!lr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function td(u){ed=u,_l=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function ns(u){return ND(ed,u)}function c0(u,f){return ed===null&&td(u),ND(u,f)}function ND(u,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},_l===null){if(u===null)throw Error(s(308));_l=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else _l=_l.next=f;return y}var lZ=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,N){u.push(N)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},oZ=e.unstable_scheduleCallback,cZ=e.unstable_NormalPriority,vn={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function i1(){return{controller:new lZ,data:new Map,refCount:0}}function nh(u){u.refCount--,u.refCount===0&&oZ(cZ,function(){u.controller.abort()})}var sh=null,l1=0,Qu=0,Xu=null;function dZ(u,f){if(sh===null){var y=sh=[];l1=0,Qu=dC(),Xu={status:"pending",value:void 0,then:function(N){y.push(N)}}}return l1++,f.then(jD,jD),f}function jD(){if(--l1===0&&sh!==null){Xu!==null&&(Xu.status="fulfilled");var u=sh;sh=null,Qu=0,Xu=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function uZ(u,f){var y=[],N={status:"pending",value:null,reason:null,then:function(k){y.push(k)}};return u.then(function(){N.status="fulfilled",N.value=f;for(var k=0;k<y.length;k++)(0,y[k])(f)},function(k){for(N.status="rejected",N.reason=k,k=0;k<y.length;k++)(0,y[k])(void 0)}),N}var CD=W.S;W.S=function(u,f){lO=M(),typeof f=="object"&&f!==null&&typeof f.then=="function"&&dZ(u,f),CD!==null&&CD(u,f)};var ad=V(null);function o1(){var u=ad.current;return u!==null?u:La.pooledCache}function d0(u,f){f===null?me(ad,ad.current):me(ad,f.pool)}function SD(){var u=o1();return u===null?null:{parent:vn._currentValue,pool:u}}var Zu=Error(s(460)),c1=Error(s(474)),u0=Error(s(542)),m0={then:function(){}};function _D(u){return u=u.status,u==="fulfilled"||u==="rejected"}function AD(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(Nl,Nl),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ED(u),u;default:if(typeof f.status=="string")f.then(Nl,Nl);else{if(u=La,u!==null&&100<u.shellSuspendCounter)throw Error(s(482));u=f,u.status="pending",u.then(function(N){if(f.status==="pending"){var k=f;k.status="fulfilled",k.value=N}},function(N){if(f.status==="pending"){var k=f;k.status="rejected",k.reason=N}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,ED(u),u}throw sd=f,Zu}}function nd(u){try{var f=u._init;return f(u._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(sd=y,Zu):y}}var sd=null;function TD(){if(sd===null)throw Error(s(459));var u=sd;return sd=null,u}function ED(u){if(u===Zu||u===u0)throw Error(s(483))}var Ju=null,rh=0;function f0(u){var f=rh;return rh+=1,Ju===null&&(Ju=[]),AD(Ju,u,f)}function ih(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function h0(u,f){throw f.$$typeof===p?Error(s(525)):(u=Object.prototype.toString.call(f),Error(s(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function kD(u){function f(Ge,Re){if(u){var Ke=Ge.deletions;Ke===null?(Ge.deletions=[Re],Ge.flags|=16):Ke.push(Re)}}function y(Ge,Re){if(!u)return null;for(;Re!==null;)f(Ge,Re),Re=Re.sibling;return null}function N(Ge){for(var Re=new Map;Ge!==null;)Ge.key!==null?Re.set(Ge.key,Ge):Re.set(Ge.index,Ge),Ge=Ge.sibling;return Re}function k(Ge,Re){return Ge=Cl(Ge,Re),Ge.index=0,Ge.sibling=null,Ge}function P(Ge,Re,Ke){return Ge.index=Ke,u?(Ke=Ge.alternate,Ke!==null?(Ke=Ke.index,Ke<Re?(Ge.flags|=67108866,Re):Ke):(Ge.flags|=67108866,Re)):(Ge.flags|=1048576,Re)}function Z(Ge){return u&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function fe(Ge,Re,Ke,ct){return Re===null||Re.tag!==6?(Re=Xj(Ke,Ge.mode,ct),Re.return=Ge,Re):(Re=k(Re,Ke),Re.return=Ge,Re)}function Pe(Ge,Re,Ke,ct){var Mt=Ke.type;return Mt===x?it(Ge,Re,Ke.props.children,ct,Ke.key):Re!==null&&(Re.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===D&&nd(Mt)===Re.type)?(Re=k(Re,Ke.props),ih(Re,Ke),Re.return=Ge,Re):(Re=i0(Ke.type,Ke.key,Ke.props,null,Ge.mode,ct),ih(Re,Ke),Re.return=Ge,Re)}function Qe(Ge,Re,Ke,ct){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Ke.containerInfo||Re.stateNode.implementation!==Ke.implementation?(Re=Zj(Ke,Ge.mode,ct),Re.return=Ge,Re):(Re=k(Re,Ke.children||[]),Re.return=Ge,Re)}function it(Ge,Re,Ke,ct,Mt){return Re===null||Re.tag!==7?(Re=Zc(Ke,Ge.mode,ct,Mt),Re.return=Ge,Re):(Re=k(Re,Ke),Re.return=Ge,Re)}function ut(Ge,Re,Ke){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Re=Xj(""+Re,Ge.mode,Ke),Re.return=Ge,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case b:return Ke=i0(Re.type,Re.key,Re.props,null,Ge.mode,Ke),ih(Ke,Re),Ke.return=Ge,Ke;case w:return Re=Zj(Re,Ge.mode,Ke),Re.return=Ge,Re;case D:return Re=nd(Re),ut(Ge,Re,Ke)}if(ae(Re)||O(Re))return Re=Zc(Re,Ge.mode,Ke,null),Re.return=Ge,Re;if(typeof Re.then=="function")return ut(Ge,f0(Re),Ke);if(Re.$$typeof===S)return ut(Ge,c0(Ge,Re),Ke);h0(Ge,Re)}return null}function Ze(Ge,Re,Ke,ct){var Mt=Re!==null?Re.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Mt!==null?null:fe(Ge,Re,""+Ke,ct);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:return Ke.key===Mt?Pe(Ge,Re,Ke,ct):null;case w:return Ke.key===Mt?Qe(Ge,Re,Ke,ct):null;case D:return Ke=nd(Ke),Ze(Ge,Re,Ke,ct)}if(ae(Ke)||O(Ke))return Mt!==null?null:it(Ge,Re,Ke,ct,null);if(typeof Ke.then=="function")return Ze(Ge,Re,f0(Ke),ct);if(Ke.$$typeof===S)return Ze(Ge,Re,c0(Ge,Ke),ct);h0(Ge,Ke)}return null}function rt(Ge,Re,Ke,ct,Mt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Ge=Ge.get(Ke)||null,fe(Re,Ge,""+ct,Mt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case b:return Ge=Ge.get(ct.key===null?Ke:ct.key)||null,Pe(Re,Ge,ct,Mt);case w:return Ge=Ge.get(ct.key===null?Ke:ct.key)||null,Qe(Re,Ge,ct,Mt);case D:return ct=nd(ct),rt(Ge,Re,Ke,ct,Mt)}if(ae(ct)||O(ct))return Ge=Ge.get(Ke)||null,it(Re,Ge,ct,Mt,null);if(typeof ct.then=="function")return rt(Ge,Re,Ke,f0(ct),Mt);if(ct.$$typeof===S)return rt(Ge,Re,Ke,c0(Re,ct),Mt);h0(Re,ct)}return null}function At(Ge,Re,Ke,ct){for(var Mt=null,oa=null,kt=Re,qt=Re=0,ta=null;kt!==null&&qt<Ke.length;qt++){kt.index>qt?(ta=kt,kt=null):ta=kt.sibling;var ca=Ze(Ge,kt,Ke[qt],ct);if(ca===null){kt===null&&(kt=ta);break}u&&kt&&ca.alternate===null&&f(Ge,kt),Re=P(ca,Re,qt),oa===null?Mt=ca:oa.sibling=ca,oa=ca,kt=ta}if(qt===Ke.length)return y(Ge,kt),ra&&Sl(Ge,qt),Mt;if(kt===null){for(;qt<Ke.length;qt++)kt=ut(Ge,Ke[qt],ct),kt!==null&&(Re=P(kt,Re,qt),oa===null?Mt=kt:oa.sibling=kt,oa=kt);return ra&&Sl(Ge,qt),Mt}for(kt=N(kt);qt<Ke.length;qt++)ta=rt(kt,Ge,qt,Ke[qt],ct),ta!==null&&(u&&ta.alternate!==null&&kt.delete(ta.key===null?qt:ta.key),Re=P(ta,Re,qt),oa===null?Mt=ta:oa.sibling=ta,oa=ta);return u&&kt.forEach(function(lc){return f(Ge,lc)}),ra&&Sl(Ge,qt),Mt}function Rt(Ge,Re,Ke,ct){if(Ke==null)throw Error(s(151));for(var Mt=null,oa=null,kt=Re,qt=Re=0,ta=null,ca=Ke.next();kt!==null&&!ca.done;qt++,ca=Ke.next()){kt.index>qt?(ta=kt,kt=null):ta=kt.sibling;var lc=Ze(Ge,kt,ca.value,ct);if(lc===null){kt===null&&(kt=ta);break}u&&kt&&lc.alternate===null&&f(Ge,kt),Re=P(lc,Re,qt),oa===null?Mt=lc:oa.sibling=lc,oa=lc,kt=ta}if(ca.done)return y(Ge,kt),ra&&Sl(Ge,qt),Mt;if(kt===null){for(;!ca.done;qt++,ca=Ke.next())ca=ut(Ge,ca.value,ct),ca!==null&&(Re=P(ca,Re,qt),oa===null?Mt=ca:oa.sibling=ca,oa=ca);return ra&&Sl(Ge,qt),Mt}for(kt=N(kt);!ca.done;qt++,ca=Ke.next())ca=rt(kt,Ge,qt,ca.value,ct),ca!==null&&(u&&ca.alternate!==null&&kt.delete(ca.key===null?qt:ca.key),Re=P(ca,Re,qt),oa===null?Mt=ca:oa.sibling=ca,oa=ca);return u&&kt.forEach(function(NJ){return f(Ge,NJ)}),ra&&Sl(Ge,qt),Mt}function Ea(Ge,Re,Ke,ct){if(typeof Ke=="object"&&Ke!==null&&Ke.type===x&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case b:e:{for(var Mt=Ke.key;Re!==null;){if(Re.key===Mt){if(Mt=Ke.type,Mt===x){if(Re.tag===7){y(Ge,Re.sibling),ct=k(Re,Ke.props.children),ct.return=Ge,Ge=ct;break e}}else if(Re.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===D&&nd(Mt)===Re.type){y(Ge,Re.sibling),ct=k(Re,Ke.props),ih(ct,Ke),ct.return=Ge,Ge=ct;break e}y(Ge,Re);break}else f(Ge,Re);Re=Re.sibling}Ke.type===x?(ct=Zc(Ke.props.children,Ge.mode,ct,Ke.key),ct.return=Ge,Ge=ct):(ct=i0(Ke.type,Ke.key,Ke.props,null,Ge.mode,ct),ih(ct,Ke),ct.return=Ge,Ge=ct)}return Z(Ge);case w:e:{for(Mt=Ke.key;Re!==null;){if(Re.key===Mt)if(Re.tag===4&&Re.stateNode.containerInfo===Ke.containerInfo&&Re.stateNode.implementation===Ke.implementation){y(Ge,Re.sibling),ct=k(Re,Ke.children||[]),ct.return=Ge,Ge=ct;break e}else{y(Ge,Re);break}else f(Ge,Re);Re=Re.sibling}ct=Zj(Ke,Ge.mode,ct),ct.return=Ge,Ge=ct}return Z(Ge);case D:return Ke=nd(Ke),Ea(Ge,Re,Ke,ct)}if(ae(Ke))return At(Ge,Re,Ke,ct);if(O(Ke)){if(Mt=O(Ke),typeof Mt!="function")throw Error(s(150));return Ke=Mt.call(Ke),Rt(Ge,Re,Ke,ct)}if(typeof Ke.then=="function")return Ea(Ge,Re,f0(Ke),ct);if(Ke.$$typeof===S)return Ea(Ge,Re,c0(Ge,Ke),ct);h0(Ge,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Re!==null&&Re.tag===6?(y(Ge,Re.sibling),ct=k(Re,Ke),ct.return=Ge,Ge=ct):(y(Ge,Re),ct=Xj(Ke,Ge.mode,ct),ct.return=Ge,Ge=ct),Z(Ge)):y(Ge,Re)}return function(Ge,Re,Ke,ct){try{rh=0;var Mt=Ea(Ge,Re,Ke,ct);return Ju=null,Mt}catch(kt){if(kt===Zu||kt===u0)throw kt;var oa=or(29,kt,null,Ge.mode);return oa.lanes=ct,oa.return=Ge,oa}finally{}}}var rd=kD(!0),LD=kD(!1),Go=!1;function d1(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function u1(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Vo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Wo(u,f,y){var N=u.updateQueue;if(N===null)return null;if(N=N.shared,(fa&2)!==0){var k=N.pending;return k===null?f.next=f:(f.next=k.next,k.next=f),N.pending=f,f=r0(u),hD(u,null,y),f}return s0(u,N,f,y),r0(u)}function lh(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var N=f.lanes;N&=u.pendingLanes,y|=N,f.lanes=y,$e(u,y)}}function m1(u,f){var y=u.updateQueue,N=u.alternate;if(N!==null&&(N=N.updateQueue,y===N)){var k=null,P=null;if(y=y.firstBaseUpdate,y!==null){do{var Z={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};P===null?k=P=Z:P=P.next=Z,y=y.next}while(y!==null);P===null?k=P=f:P=P.next=f}else k=P=f;y={baseState:N.baseState,firstBaseUpdate:k,lastBaseUpdate:P,shared:N.shared,callbacks:N.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}var f1=!1;function oh(){if(f1){var u=Xu;if(u!==null)throw u}}function ch(u,f,y,N){f1=!1;var k=u.updateQueue;Go=!1;var P=k.firstBaseUpdate,Z=k.lastBaseUpdate,fe=k.shared.pending;if(fe!==null){k.shared.pending=null;var Pe=fe,Qe=Pe.next;Pe.next=null,Z===null?P=Qe:Z.next=Qe,Z=Pe;var it=u.alternate;it!==null&&(it=it.updateQueue,fe=it.lastBaseUpdate,fe!==Z&&(fe===null?it.firstBaseUpdate=Qe:fe.next=Qe,it.lastBaseUpdate=Pe))}if(P!==null){var ut=k.baseState;Z=0,it=Qe=Pe=null,fe=P;do{var Ze=fe.lane&-536870913,rt=Ze!==fe.lane;if(rt?(ea&Ze)===Ze:(N&Ze)===Ze){Ze!==0&&Ze===Qu&&(f1=!0),it!==null&&(it=it.next={lane:0,tag:fe.tag,payload:fe.payload,callback:null,next:null});e:{var At=u,Rt=fe;Ze=f;var Ea=y;switch(Rt.tag){case 1:if(At=Rt.payload,typeof At=="function"){ut=At.call(Ea,ut,Ze);break e}ut=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=Rt.payload,Ze=typeof At=="function"?At.call(Ea,ut,Ze):At,Ze==null)break e;ut=h({},ut,Ze);break e;case 2:Go=!0}}Ze=fe.callback,Ze!==null&&(u.flags|=64,rt&&(u.flags|=8192),rt=k.callbacks,rt===null?k.callbacks=[Ze]:rt.push(Ze))}else rt={lane:Ze,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},it===null?(Qe=it=rt,Pe=ut):it=it.next=rt,Z|=Ze;if(fe=fe.next,fe===null){if(fe=k.shared.pending,fe===null)break;rt=fe,fe=rt.next,rt.next=null,k.lastBaseUpdate=rt,k.shared.pending=null}}while(!0);it===null&&(Pe=ut),k.baseState=Pe,k.firstBaseUpdate=Qe,k.lastBaseUpdate=it,P===null&&(k.shared.lanes=0),Xo|=Z,u.lanes=Z,u.memoizedState=ut}}function PD(u,f){if(typeof u!="function")throw Error(s(191,u));u.call(f)}function DD(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)PD(y[u],f)}var em=V(null),g0=V(0);function OD(u,f){u=Il,me(g0,u),me(em,f),Il=u|f.baseLanes}function h1(){me(g0,Il),me(em,em.current)}function g1(){Il=g0.current,ee(em),ee(g0)}var cr=V(null),$r=null;function qo(u){var f=u.alternate;me(fn,fn.current&1),me(cr,u),$r===null&&(f===null||em.current!==null||f.memoizedState!==null)&&($r=u)}function p1(u){me(fn,fn.current),me(cr,u),$r===null&&($r=u)}function MD(u){u.tag===22?(me(fn,fn.current),me(cr,u),$r===null&&($r=u)):Yo()}function Yo(){me(fn,fn.current),me(cr,cr.current)}function dr(u){ee(cr),$r===u&&($r=null),ee(fn)}var fn=V(0);function p0(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||NC(y)||jC(y)))return f}else if(f.tag===19&&(f.memoizedProps.revealOrder==="forwards"||f.memoizedProps.revealOrder==="backwards"||f.memoizedProps.revealOrder==="unstable_legacy-backwards"||f.memoizedProps.revealOrder==="together")){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Tl=0,Ht=null,Aa=null,wn=null,x0=!1,tm=!1,id=!1,y0=0,dh=0,am=null,mZ=0;function sn(){throw Error(s(321))}function x1(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!lr(u[y],f[y]))return!1;return!0}function y1(u,f,y,N,k,P){return Tl=P,Ht=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,W.H=u===null||u.memoizedState===null?y3:D1,id=!1,P=y(N,k),id=!1,tm&&(P=$D(f,y,N,k)),ID(u),P}function ID(u){W.H=fh;var f=Aa!==null&&Aa.next!==null;if(Tl=0,wn=Aa=Ht=null,x0=!1,dh=0,am=null,f)throw Error(s(300));u===null||Nn||(u=u.dependencies,u!==null&&o0(u)&&(Nn=!0))}function $D(u,f,y,N){Ht=u;var k=0;do{if(tm&&(am=null),dh=0,tm=!1,25<=k)throw Error(s(301));if(k+=1,wn=Aa=null,u.updateQueue!=null){var P=u.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}W.H=b3,P=f(y,N)}while(tm);return P}function fZ(){var u=W.H,f=u.useState()[0];return f=typeof f.then=="function"?uh(f):f,u=u.useState()[0],(Aa!==null?Aa.memoizedState:null)!==u&&(Ht.flags|=1024),f}function b1(){var u=y0!==0;return y0=0,u}function v1(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function w1(u){if(x0){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}x0=!1}Tl=0,wn=Aa=Ht=null,tm=!1,dh=y0=0,am=null}function As(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Ht.memoizedState=wn=u:wn=wn.next=u,wn}function hn(){if(Aa===null){var u=Ht.alternate;u=u!==null?u.memoizedState:null}else u=Aa.next;var f=wn===null?Ht.memoizedState:wn.next;if(f!==null)wn=f,Aa=u;else{if(u===null)throw Ht.alternate===null?Error(s(467)):Error(s(310));Aa=u,u={memoizedState:Aa.memoizedState,baseState:Aa.baseState,baseQueue:Aa.baseQueue,queue:Aa.queue,next:null},wn===null?Ht.memoizedState=wn=u:wn=wn.next=u}return wn}function b0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uh(u){var f=dh;return dh+=1,am===null&&(am=[]),u=AD(am,u,f),f=Ht,(wn===null?f.memoizedState:wn.next)===null&&(f=f.alternate,W.H=f===null||f.memoizedState===null?y3:D1),u}function v0(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return uh(u);if(u.$$typeof===S)return ns(u)}throw Error(s(438,String(u)))}function N1(u){var f=null,y=Ht.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var N=Ht.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(f={data:N.data.map(function(k){return k.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=b0(),Ht.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),N=0;N<u;N++)y[N]=K;return f.index++,y}function El(u,f){return typeof f=="function"?f(u):f}function w0(u){var f=hn();return j1(f,Aa,u)}function j1(u,f,y){var N=u.queue;if(N===null)throw Error(s(311));N.lastRenderedReducer=y;var k=u.baseQueue,P=N.pending;if(P!==null){if(k!==null){var Z=k.next;k.next=P.next,P.next=Z}f.baseQueue=k=P,N.pending=null}if(P=u.baseState,k===null)u.memoizedState=P;else{f=k.next;var fe=Z=null,Pe=null,Qe=f,it=!1;do{var ut=Qe.lane&-536870913;if(ut!==Qe.lane?(ea&ut)===ut:(Tl&ut)===ut){var Ze=Qe.revertLane;if(Ze===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),ut===Qu&&(it=!0);else if((Tl&Ze)===Ze){Qe=Qe.next,Ze===Qu&&(it=!0);continue}else ut={lane:0,revertLane:Qe.revertLane,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Pe===null?(fe=Pe=ut,Z=P):Pe=Pe.next=ut,Ht.lanes|=Ze,Xo|=Ze;ut=Qe.action,id&&y(P,ut),P=Qe.hasEagerState?Qe.eagerState:y(P,ut)}else Ze={lane:ut,revertLane:Qe.revertLane,gesture:Qe.gesture,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},Pe===null?(fe=Pe=Ze,Z=P):Pe=Pe.next=Ze,Ht.lanes|=ut,Xo|=ut;Qe=Qe.next}while(Qe!==null&&Qe!==f);if(Pe===null?Z=P:Pe.next=fe,!lr(P,u.memoizedState)&&(Nn=!0,it&&(y=Xu,y!==null)))throw y;u.memoizedState=P,u.baseState=Z,u.baseQueue=Pe,N.lastRenderedState=P}return k===null&&(N.lanes=0),[u.memoizedState,N.dispatch]}function C1(u){var f=hn(),y=f.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=u;var N=y.dispatch,k=y.pending,P=f.memoizedState;if(k!==null){y.pending=null;var Z=k=k.next;do P=u(P,Z.action),Z=Z.next;while(Z!==k);lr(P,f.memoizedState)||(Nn=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),y.lastRenderedState=P}return[P,N]}function RD(u,f,y){var N=Ht,k=hn(),P=ra;if(P){if(y===void 0)throw Error(s(407));y=y()}else y=f();var Z=!lr((Aa||k).memoizedState,y);if(Z&&(k.memoizedState=y,Nn=!0),k=k.queue,A1(FD.bind(null,N,k,u),[u]),k.getSnapshot!==f||Z||wn!==null&&wn.memoizedState.tag&1){if(N.flags|=2048,nm(9,{destroy:void 0},UD.bind(null,N,k,y,f),null),La===null)throw Error(s(349));P||(Tl&127)!==0||zD(N,f,y)}return y}function zD(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=Ht.updateQueue,f===null?(f=b0(),Ht.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function UD(u,f,y,N){f.value=y,f.getSnapshot=N,BD(f)&&HD(u)}function FD(u,f,y){return y(function(){BD(f)&&HD(u)})}function BD(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!lr(u,y)}catch{return!0}}function HD(u){var f=Xc(u,2);f!==null&&Us(f,u,2)}function S1(u){var f=As();if(typeof u=="function"){var y=u;if(u=y(),id){R(!0);try{y()}finally{R(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:u},f}function GD(u,f,y,N){return u.baseState=y,j1(u,Aa,typeof N=="function"?N:El)}function hZ(u,f,y,N,k){if(C0(u))throw Error(s(485));if(u=f.action,u!==null){var P={payload:k,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){P.listeners.push(Z)}};W.T!==null?y(!0):P.isTransition=!1,N(P),y=f.pending,y===null?(P.next=f.pending=P,VD(f,P)):(P.next=y.next,f.pending=y.next=P)}}function VD(u,f){var y=f.action,N=f.payload,k=u.state;if(f.isTransition){var P=W.T,Z={};W.T=Z;try{var fe=y(k,N),Pe=W.S;Pe!==null&&Pe(Z,fe),WD(u,f,fe)}catch(Qe){_1(u,f,Qe)}finally{P!==null&&Z.types!==null&&(P.types=Z.types),W.T=P}}else try{P=y(k,N),WD(u,f,P)}catch(Qe){_1(u,f,Qe)}}function WD(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(N){qD(u,f,N)},function(N){return _1(u,f,N)}):qD(u,f,y)}function qD(u,f,y){f.status="fulfilled",f.value=y,YD(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,VD(u,y)))}function _1(u,f,y){var N=u.pending;if(u.pending=null,N!==null){N=N.next;do f.status="rejected",f.reason=y,YD(f),f=f.next;while(f!==N)}u.action=null}function YD(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function KD(u,f){return f}function QD(u,f){if(ra){var y=La.formState;if(y!==null){e:{var N=Ht;if(ra){if(Ra){t:{for(var k=Ra,P=Ir;k.nodeType!==8;){if(!P){k=null;break t}if(k=Rr(k.nextSibling),k===null){k=null;break t}}P=k.data,k=P==="F!"||P==="F"?k:null}if(k){Ra=Rr(k.nextSibling),N=k.data==="F!";break e}}Bo(N)}N=!1}N&&(f=y[0])}}return y=As(),y.memoizedState=y.baseState=f,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:KD,lastRenderedState:f},y.queue=N,y=g3.bind(null,Ht,N),N.dispatch=y,N=S1(!1),P=P1.bind(null,Ht,!1,N.queue),N=As(),k={state:f,dispatch:null,action:u,pending:null},N.queue=k,y=hZ.bind(null,Ht,k,P,y),k.dispatch=y,N.memoizedState=u,[f,y,!1]}function XD(u){var f=hn();return ZD(f,Aa,u)}function ZD(u,f,y){if(f=j1(u,f,KD)[0],u=w0(El)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var N=uh(f)}catch(Z){throw Z===Zu?u0:Z}else N=f;f=hn();var k=f.queue,P=k.dispatch;return y!==f.memoizedState&&(Ht.flags|=2048,nm(9,{destroy:void 0},gZ.bind(null,k,y),null)),[N,P,u]}function gZ(u,f){u.action=f}function JD(u){var f=hn(),y=Aa;if(y!==null)return ZD(f,y,u);hn(),f=f.memoizedState,y=hn();var N=y.queue.dispatch;return y.memoizedState=u,[f,N,!1]}function nm(u,f,y,N){return u={tag:u,create:y,deps:N,inst:f,next:null},f=Ht.updateQueue,f===null&&(f=b0(),Ht.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(N=y.next,y.next=u,u.next=N,f.lastEffect=u),u}function e3(){return hn().memoizedState}function N0(u,f,y,N){var k=As();Ht.flags|=u,k.memoizedState=nm(1|f,{destroy:void 0},y,N===void 0?null:N)}function j0(u,f,y,N){var k=hn();N=N===void 0?null:N;var P=k.memoizedState.inst;Aa!==null&&N!==null&&x1(N,Aa.memoizedState.deps)?k.memoizedState=nm(f,P,y,N):(Ht.flags|=u,k.memoizedState=nm(1|f,P,y,N))}function t3(u,f){N0(8390656,8,u,f)}function A1(u,f){j0(2048,8,u,f)}function pZ(u){Ht.flags|=4;var f=Ht.updateQueue;if(f===null)f=b0(),Ht.updateQueue=f,f.events=[u];else{var y=f.events;y===null?f.events=[u]:y.push(u)}}function a3(u){var f=hn().memoizedState;return pZ({ref:f,nextImpl:u}),function(){if((fa&2)!==0)throw Error(s(440));return f.impl.apply(void 0,arguments)}}function n3(u,f){return j0(4,2,u,f)}function s3(u,f){return j0(4,4,u,f)}function r3(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function i3(u,f,y){y=y!=null?y.concat([u]):null,j0(4,4,r3.bind(null,f,u),y)}function T1(){}function l3(u,f){var y=hn();f=f===void 0?null:f;var N=y.memoizedState;return f!==null&&x1(f,N[1])?N[0]:(y.memoizedState=[u,f],u)}function o3(u,f){var y=hn();f=f===void 0?null:f;var N=y.memoizedState;if(f!==null&&x1(f,N[1]))return N[0];if(N=u(),id){R(!0);try{u()}finally{R(!1)}}return y.memoizedState=[N,f],N}function E1(u,f,y){return y===void 0||(Tl&1073741824)!==0&&(ea&261930)===0?u.memoizedState=f:(u.memoizedState=y,u=cO(),Ht.lanes|=u,Xo|=u,y)}function c3(u,f,y,N){return lr(y,f)?y:em.current!==null?(u=E1(u,y,N),lr(u,f)||(Nn=!0),u):(Tl&42)===0||(Tl&1073741824)!==0&&(ea&261930)===0?(Nn=!0,u.memoizedState=y):(u=cO(),Ht.lanes|=u,Xo|=u,f)}function d3(u,f,y,N,k){var P=q.p;q.p=P!==0&&8>P?P:8;var Z=W.T,fe={};W.T=fe,P1(u,!1,f,y);try{var Pe=k(),Qe=W.S;if(Qe!==null&&Qe(fe,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var it=uZ(Pe,N);mh(u,f,it,fr(u))}else mh(u,f,N,fr(u))}catch(ut){mh(u,f,{then:function(){},status:"rejected",reason:ut},fr())}finally{q.p=P,Z!==null&&fe.types!==null&&(Z.types=fe.types),W.T=Z}}function xZ(){}function k1(u,f,y,N){if(u.tag!==5)throw Error(s(476));var k=u3(u).queue;d3(u,k,f,le,y===null?xZ:function(){return m3(u),y(N)})}function u3(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:le},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:El,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function m3(u){var f=u3(u);f.next===null&&(f=u.alternate.memoizedState),mh(u,f.next.queue,{},fr())}function L1(){return ns(Eh)}function f3(){return hn().memoizedState}function h3(){return hn().memoizedState}function yZ(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=fr();u=Vo(y);var N=Wo(f,u,y);N!==null&&(Us(N,f,y),lh(N,f,y)),f={cache:i1()},u.payload=f;return}f=f.return}}function bZ(u,f,y){var N=fr();y={lane:N,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},C0(u)?p3(f,y):(y=Kj(u,f,y,N),y!==null&&(Us(y,u,N),x3(y,f,N)))}function g3(u,f,y){var N=fr();mh(u,f,y,N)}function mh(u,f,y,N){var k={lane:N,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(C0(u))p3(f,k);else{var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var Z=f.lastRenderedState,fe=P(Z,y);if(k.hasEagerState=!0,k.eagerState=fe,lr(fe,Z))return s0(u,f,k,0),La===null&&n0(),!1}catch{}finally{}if(y=Kj(u,f,k,N),y!==null)return Us(y,u,N),x3(y,f,N),!0}return!1}function P1(u,f,y,N){if(N={lane:2,revertLane:dC(),gesture:null,action:N,hasEagerState:!1,eagerState:null,next:null},C0(u)){if(f)throw Error(s(479))}else f=Kj(u,y,N,2),f!==null&&Us(f,u,2)}function C0(u){var f=u.alternate;return u===Ht||f!==null&&f===Ht}function p3(u,f){tm=x0=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function x3(u,f,y){if((y&4194048)!==0){var N=f.lanes;N&=u.pendingLanes,y|=N,f.lanes=y,$e(u,y)}}var fh={readContext:ns,use:v0,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};fh.useEffectEvent=sn;var y3={readContext:ns,use:v0,useCallback:function(u,f){return As().memoizedState=[u,f===void 0?null:f],u},useContext:ns,useEffect:t3,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,N0(4194308,4,r3.bind(null,f,u),y)},useLayoutEffect:function(u,f){return N0(4194308,4,u,f)},useInsertionEffect:function(u,f){N0(4,2,u,f)},useMemo:function(u,f){var y=As();f=f===void 0?null:f;var N=u();if(id){R(!0);try{u()}finally{R(!1)}}return y.memoizedState=[N,f],N},useReducer:function(u,f,y){var N=As();if(y!==void 0){var k=y(f);if(id){R(!0);try{y(f)}finally{R(!1)}}}else k=f;return N.memoizedState=N.baseState=k,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:k},N.queue=u,u=u.dispatch=bZ.bind(null,Ht,u),[N.memoizedState,u]},useRef:function(u){var f=As();return u={current:u},f.memoizedState=u},useState:function(u){u=S1(u);var f=u.queue,y=g3.bind(null,Ht,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:T1,useDeferredValue:function(u,f){var y=As();return E1(y,u,f)},useTransition:function(){var u=S1(!1);return u=d3.bind(null,Ht,u.queue,!0,!1),As().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var N=Ht,k=As();if(ra){if(y===void 0)throw Error(s(407));y=y()}else{if(y=f(),La===null)throw Error(s(349));(ea&127)!==0||zD(N,f,y)}k.memoizedState=y;var P={value:y,getSnapshot:f};return k.queue=P,t3(FD.bind(null,N,P,u),[u]),N.flags|=2048,nm(9,{destroy:void 0},UD.bind(null,N,P,y,f),null),y},useId:function(){var u=As(),f=La.identifierPrefix;if(ra){var y=zi,N=Ri;y=(N&~(1<<32-$(N)-1)).toString(32)+y,f="_"+f+"R_"+y,y=y0++,0<y&&(f+="H"+y.toString(32)),f+="_"}else y=mZ++,f="_"+f+"r_"+y.toString(32)+"_";return u.memoizedState=f},useHostTransitionStatus:L1,useFormState:QD,useActionState:QD,useOptimistic:function(u){var f=As();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=P1.bind(null,Ht,!0,y),y.dispatch=f,[u,f]},useMemoCache:N1,useCacheRefresh:function(){return As().memoizedState=yZ.bind(null,Ht)},useEffectEvent:function(u){var f=As(),y={impl:u};return f.memoizedState=y,function(){if((fa&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},D1={readContext:ns,use:v0,useCallback:l3,useContext:ns,useEffect:A1,useImperativeHandle:i3,useInsertionEffect:n3,useLayoutEffect:s3,useMemo:o3,useReducer:w0,useRef:e3,useState:function(){return w0(El)},useDebugValue:T1,useDeferredValue:function(u,f){var y=hn();return c3(y,Aa.memoizedState,u,f)},useTransition:function(){var u=w0(El)[0],f=hn().memoizedState;return[typeof u=="boolean"?u:uh(u),f]},useSyncExternalStore:RD,useId:f3,useHostTransitionStatus:L1,useFormState:XD,useActionState:XD,useOptimistic:function(u,f){var y=hn();return GD(y,Aa,u,f)},useMemoCache:N1,useCacheRefresh:h3};D1.useEffectEvent=a3;var b3={readContext:ns,use:v0,useCallback:l3,useContext:ns,useEffect:A1,useImperativeHandle:i3,useInsertionEffect:n3,useLayoutEffect:s3,useMemo:o3,useReducer:C1,useRef:e3,useState:function(){return C1(El)},useDebugValue:T1,useDeferredValue:function(u,f){var y=hn();return Aa===null?E1(y,u,f):c3(y,Aa.memoizedState,u,f)},useTransition:function(){var u=C1(El)[0],f=hn().memoizedState;return[typeof u=="boolean"?u:uh(u),f]},useSyncExternalStore:RD,useId:f3,useHostTransitionStatus:L1,useFormState:JD,useActionState:JD,useOptimistic:function(u,f){var y=hn();return Aa!==null?GD(y,Aa,u,f):(y.baseState=u,[u,y.queue.dispatch])},useMemoCache:N1,useCacheRefresh:h3};b3.useEffectEvent=a3;function O1(u,f,y,N){f=u.memoizedState,y=y(N,f),y=y==null?f:h({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}var M1={enqueueSetState:function(u,f,y){u=u._reactInternals;var N=fr(),k=Vo(N);k.payload=f,y!=null&&(k.callback=y),f=Wo(u,k,N),f!==null&&(Us(f,u,N),lh(f,u,N))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var N=fr(),k=Vo(N);k.tag=1,k.payload=f,y!=null&&(k.callback=y),f=Wo(u,k,N),f!==null&&(Us(f,u,N),lh(f,u,N))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=fr(),N=Vo(y);N.tag=2,f!=null&&(N.callback=f),f=Wo(u,N,y),f!==null&&(Us(f,u,y),lh(f,u,y))}};function v3(u,f,y,N,k,P,Z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(N,P,Z):f.prototype&&f.prototype.isPureReactComponent?!Jf(y,N)||!Jf(k,P):!0}function w3(u,f,y,N){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,N),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,N),f.state!==u&&M1.enqueueReplaceState(f,f.state,null)}function ld(u,f){var y=f;if("ref"in f){y={};for(var N in f)N!=="ref"&&(y[N]=f[N])}if(u=u.defaultProps){y===f&&(y=h({},y));for(var k in u)y[k]===void 0&&(y[k]=u[k])}return y}function N3(u){a0(u)}function j3(u){console.error(u)}function C3(u){a0(u)}function S0(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(N){setTimeout(function(){throw N})}}function S3(u,f,y){try{var N=u.onCaughtError;N(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function I1(u,f,y){return y=Vo(y),y.tag=3,y.payload={element:null},y.callback=function(){S0(u,f)},y}function _3(u){return u=Vo(u),u.tag=3,u}function A3(u,f,y,N){var k=y.type.getDerivedStateFromError;if(typeof k=="function"){var P=N.value;u.payload=function(){return k(P)},u.callback=function(){S3(f,y,N)}}var Z=y.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(u.callback=function(){S3(f,y,N),typeof k!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var fe=N.stack;this.componentDidCatch(N.value,{componentStack:fe!==null?fe:""})})}function vZ(u,f,y,N,k){if(y.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(f=y.alternate,f!==null&&Ku(f,y,k,!0),y=cr.current,y!==null){switch(y.tag){case 31:case 13:return $r===null?$0():y.alternate===null&&rn===0&&(rn=3),y.flags&=-257,y.flags|=65536,y.lanes=k,N===m0?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([N]):f.add(N),lC(u,N,k)),!1;case 22:return y.flags|=65536,N===m0?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([N])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([N]):y.add(N)),lC(u,N,k)),!1}throw Error(s(435,y.tag))}return lC(u,N,k),$0(),!1}if(ra)return f=cr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=k,N!==t1&&(u=Error(s(422),{cause:N}),ah(Dr(u,y)))):(N!==t1&&(f=Error(s(423),{cause:N}),ah(Dr(f,y))),u=u.current.alternate,u.flags|=65536,k&=-k,u.lanes|=k,N=Dr(N,y),k=I1(u.stateNode,N,k),m1(u,k),rn!==4&&(rn=2)),!1;var P=Error(s(520),{cause:N});if(P=Dr(P,y),wh===null?wh=[P]:wh.push(P),rn!==4&&(rn=2),f===null)return!0;N=Dr(N,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=k&-k,y.lanes|=u,u=I1(y.stateNode,N,u),m1(y,u),!1;case 1:if(f=y.type,P=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Zo===null||!Zo.has(P))))return y.flags|=65536,k&=-k,y.lanes|=k,k=_3(k),A3(k,u,y,N),m1(y,k),!1}y=y.return}while(y!==null);return!1}var $1=Error(s(461)),Nn=!1;function ss(u,f,y,N){f.child=u===null?LD(f,null,y,N):rd(f,u.child,y,N)}function T3(u,f,y,N,k){y=y.render;var P=f.ref;if("ref"in N){var Z={};for(var fe in N)fe!=="ref"&&(Z[fe]=N[fe])}else Z=N;return td(f),N=y1(u,f,y,Z,P,k),fe=b1(),u!==null&&!Nn?(v1(u,f,k),kl(u,f,k)):(ra&&fe&&Jj(f),f.flags|=1,ss(u,f,N,k),f.child)}function E3(u,f,y,N,k){if(u===null){var P=y.type;return typeof P=="function"&&!Qj(P)&&P.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=P,k3(u,f,P,N,k)):(u=i0(y.type,null,N,f,f.mode,k),u.ref=f.ref,u.return=f,f.child=u)}if(P=u.child,!V1(u,k)){var Z=P.memoizedProps;if(y=y.compare,y=y!==null?y:Jf,y(Z,N)&&u.ref===f.ref)return kl(u,f,k)}return f.flags|=1,u=Cl(P,N),u.ref=f.ref,u.return=f,f.child=u}function k3(u,f,y,N,k){if(u!==null){var P=u.memoizedProps;if(Jf(P,N)&&u.ref===f.ref)if(Nn=!1,f.pendingProps=N=P,V1(u,k))(u.flags&131072)!==0&&(Nn=!0);else return f.lanes=u.lanes,kl(u,f,k)}return R1(u,f,y,N,k)}function L3(u,f,y,N){var k=N.children,P=u!==null?u.memoizedState:null;if(u===null&&f.stateNode===null&&(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),N.mode==="hidden"){if((f.flags&128)!==0){if(P=P!==null?P.baseLanes|y:y,u!==null){for(N=f.child=u.child,k=0;N!==null;)k=k|N.lanes|N.childLanes,N=N.sibling;N=k&~P}else N=0,f.child=null;return P3(u,f,P,y,N)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&d0(f,P!==null?P.cachePool:null),P!==null?OD(f,P):h1(),MD(f);else return N=f.lanes=536870912,P3(u,f,P!==null?P.baseLanes|y:y,y,N)}else P!==null?(d0(f,P.cachePool),OD(f,P),Yo(),f.memoizedState=null):(u!==null&&d0(f,null),h1(),Yo());return ss(u,f,k,y),f.child}function hh(u,f){return u!==null&&u.tag===22||f.stateNode!==null||(f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.sibling}function P3(u,f,y,N,k){var P=o1();return P=P===null?null:{parent:vn._currentValue,pool:P},f.memoizedState={baseLanes:y,cachePool:P},u!==null&&d0(f,null),h1(),MD(f),u!==null&&Ku(u,f,N,!0),f.childLanes=k,null}function _0(u,f){return f=T0({mode:f.mode,children:f.children},u.mode),f.ref=u.ref,u.child=f,f.return=u,f}function D3(u,f,y){return rd(f,u.child,null,y),u=_0(f,f.pendingProps),u.flags|=2,dr(f),f.memoizedState=null,u}function wZ(u,f,y){var N=f.pendingProps,k=(f.flags&128)!==0;if(f.flags&=-129,u===null){if(ra){if(N.mode==="hidden")return u=_0(f,N),f.lanes=536870912,hh(null,u);if(p1(f),(u=Ra)?(u=VO(u,Ir),u=u!==null&&u.data==="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:Uo!==null?{id:Ri,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},y=pD(u),y.return=f,f.child=y,as=f,Ra=null)):u=null,u===null)throw Bo(f);return f.lanes=536870912,null}return _0(f,N)}var P=u.memoizedState;if(P!==null){var Z=P.dehydrated;if(p1(f),k)if(f.flags&256)f.flags&=-257,f=D3(u,f,y);else if(f.memoizedState!==null)f.child=u.child,f.flags|=128,f=null;else throw Error(s(558));else if(Nn||Ku(u,f,y,!1),k=(y&u.childLanes)!==0,Nn||k){if(N=La,N!==null&&(Z=Ye(N,y),Z!==0&&Z!==P.retryLane))throw P.retryLane=Z,Xc(u,Z),Us(N,u,Z),$1;$0(),f=D3(u,f,y)}else u=P.treeContext,Ra=Rr(Z.nextSibling),as=f,ra=!0,Fo=null,Ir=!1,u!==null&&bD(f,u),f=_0(f,N),f.flags|=4096;return f}return u=Cl(u.child,{mode:N.mode,children:N.children}),u.ref=f.ref,f.child=u,u.return=f,u}function A0(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(u===null||u.ref!==y)&&(f.flags|=4194816)}}function R1(u,f,y,N,k){return td(f),y=y1(u,f,y,N,void 0,k),N=b1(),u!==null&&!Nn?(v1(u,f,k),kl(u,f,k)):(ra&&N&&Jj(f),f.flags|=1,ss(u,f,y,k),f.child)}function O3(u,f,y,N,k,P){return td(f),f.updateQueue=null,y=$D(f,N,y,k),ID(u),N=b1(),u!==null&&!Nn?(v1(u,f,P),kl(u,f,P)):(ra&&N&&Jj(f),f.flags|=1,ss(u,f,y,P),f.child)}function M3(u,f,y,N,k){if(td(f),f.stateNode===null){var P=Vu,Z=y.contextType;typeof Z=="object"&&Z!==null&&(P=ns(Z)),P=new y(N,P),f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=M1,f.stateNode=P,P._reactInternals=f,P=f.stateNode,P.props=N,P.state=f.memoizedState,P.refs={},d1(f),Z=y.contextType,P.context=typeof Z=="object"&&Z!==null?ns(Z):Vu,P.state=f.memoizedState,Z=y.getDerivedStateFromProps,typeof Z=="function"&&(O1(f,y,Z,N),P.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(Z=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),Z!==P.state&&M1.enqueueReplaceState(P,P.state,null),ch(f,N,P,k),oh(),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308),N=!0}else if(u===null){P=f.stateNode;var fe=f.memoizedProps,Pe=ld(y,fe);P.props=Pe;var Qe=P.context,it=y.contextType;Z=Vu,typeof it=="object"&&it!==null&&(Z=ns(it));var ut=y.getDerivedStateFromProps;it=typeof ut=="function"||typeof P.getSnapshotBeforeUpdate=="function",fe=f.pendingProps!==fe,it||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(fe||Qe!==Z)&&w3(f,P,N,Z),Go=!1;var Ze=f.memoizedState;P.state=Ze,ch(f,N,P,k),oh(),Qe=f.memoizedState,fe||Ze!==Qe||Go?(typeof ut=="function"&&(O1(f,y,ut,N),Qe=f.memoizedState),(Pe=Go||v3(f,y,Pe,N,Ze,Qe,Z))?(it||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(f.flags|=4194308)):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=N,f.memoizedState=Qe),P.props=N,P.state=Qe,P.context=Z,N=Pe):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),N=!1)}else{P=f.stateNode,u1(u,f),Z=f.memoizedProps,it=ld(y,Z),P.props=it,ut=f.pendingProps,Ze=P.context,Qe=y.contextType,Pe=Vu,typeof Qe=="object"&&Qe!==null&&(Pe=ns(Qe)),fe=y.getDerivedStateFromProps,(Qe=typeof fe=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Z!==ut||Ze!==Pe)&&w3(f,P,N,Pe),Go=!1,Ze=f.memoizedState,P.state=Ze,ch(f,N,P,k),oh();var rt=f.memoizedState;Z!==ut||Ze!==rt||Go||u!==null&&u.dependencies!==null&&o0(u.dependencies)?(typeof fe=="function"&&(O1(f,y,fe,N),rt=f.memoizedState),(it=Go||v3(f,y,it,N,Ze,rt,Pe)||u!==null&&u.dependencies!==null&&o0(u.dependencies))?(Qe||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(N,rt,Pe),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(N,rt,Pe)),typeof P.componentDidUpdate=="function"&&(f.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof P.componentDidUpdate!="function"||Z===u.memoizedProps&&Ze===u.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&Ze===u.memoizedState||(f.flags|=1024),f.memoizedProps=N,f.memoizedState=rt),P.props=N,P.state=rt,P.context=Pe,N=it):(typeof P.componentDidUpdate!="function"||Z===u.memoizedProps&&Ze===u.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||Z===u.memoizedProps&&Ze===u.memoizedState||(f.flags|=1024),N=!1)}return P=N,A0(u,f),N=(f.flags&128)!==0,P||N?(P=f.stateNode,y=N&&typeof y.getDerivedStateFromError!="function"?null:P.render(),f.flags|=1,u!==null&&N?(f.child=rd(f,u.child,null,k),f.child=rd(f,null,y,k)):ss(u,f,y,k),f.memoizedState=P.state,u=f.child):u=kl(u,f,k),u}function I3(u,f,y,N){return Jc(),f.flags|=256,ss(u,f,y,N),f.child}var z1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function U1(u){return{baseLanes:u,cachePool:SD()}}function F1(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=mr),u}function $3(u,f,y){var N=f.pendingProps,k=!1,P=(f.flags&128)!==0,Z;if((Z=P)||(Z=u!==null&&u.memoizedState===null?!1:(fn.current&2)!==0),Z&&(k=!0,f.flags&=-129),Z=(f.flags&32)!==0,f.flags&=-33,u===null){if(ra){if(k?qo(f):Yo(),(u=Ra)?(u=VO(u,Ir),u=u!==null&&u.data!=="&"?u:null,u!==null&&(f.memoizedState={dehydrated:u,treeContext:Uo!==null?{id:Ri,overflow:zi}:null,retryLane:536870912,hydrationErrors:null},y=pD(u),y.return=f,f.child=y,as=f,Ra=null)):u=null,u===null)throw Bo(f);return jC(u)?f.lanes=32:f.lanes=536870912,null}var fe=N.children;return N=N.fallback,k?(Yo(),k=f.mode,fe=T0({mode:"hidden",children:fe},k),N=Zc(N,k,y,null),fe.return=f,N.return=f,fe.sibling=N,f.child=fe,N=f.child,N.memoizedState=U1(y),N.childLanes=F1(u,Z,y),f.memoizedState=z1,hh(null,N)):(qo(f),B1(f,fe))}var Pe=u.memoizedState;if(Pe!==null&&(fe=Pe.dehydrated,fe!==null)){if(P)f.flags&256?(qo(f),f.flags&=-257,f=H1(u,f,y)):f.memoizedState!==null?(Yo(),f.child=u.child,f.flags|=128,f=null):(Yo(),fe=N.fallback,k=f.mode,N=T0({mode:"visible",children:N.children},k),fe=Zc(fe,k,y,null),fe.flags|=2,N.return=f,fe.return=f,N.sibling=fe,f.child=N,rd(f,u.child,null,y),N=f.child,N.memoizedState=U1(y),N.childLanes=F1(u,Z,y),f.memoizedState=z1,f=hh(null,N));else if(qo(f),jC(fe)){if(Z=fe.nextSibling&&fe.nextSibling.dataset,Z)var Qe=Z.dgst;Z=Qe,N=Error(s(419)),N.stack="",N.digest=Z,ah({value:N,source:null,stack:null}),f=H1(u,f,y)}else if(Nn||Ku(u,f,y,!1),Z=(y&u.childLanes)!==0,Nn||Z){if(Z=La,Z!==null&&(N=Ye(Z,y),N!==0&&N!==Pe.retryLane))throw Pe.retryLane=N,Xc(u,N),Us(Z,u,N),$1;NC(fe)||$0(),f=H1(u,f,y)}else NC(fe)?(f.flags|=192,f.child=u.child,f=null):(u=Pe.treeContext,Ra=Rr(fe.nextSibling),as=f,ra=!0,Fo=null,Ir=!1,u!==null&&bD(f,u),f=B1(f,N.children),f.flags|=4096);return f}return k?(Yo(),fe=N.fallback,k=f.mode,Pe=u.child,Qe=Pe.sibling,N=Cl(Pe,{mode:"hidden",children:N.children}),N.subtreeFlags=Pe.subtreeFlags&65011712,Qe!==null?fe=Cl(Qe,fe):(fe=Zc(fe,k,y,null),fe.flags|=2),fe.return=f,N.return=f,N.sibling=fe,f.child=N,hh(null,N),N=f.child,fe=u.child.memoizedState,fe===null?fe=U1(y):(k=fe.cachePool,k!==null?(Pe=vn._currentValue,k=k.parent!==Pe?{parent:Pe,pool:Pe}:k):k=SD(),fe={baseLanes:fe.baseLanes|y,cachePool:k}),N.memoizedState=fe,N.childLanes=F1(u,Z,y),f.memoizedState=z1,hh(u.child,N)):(qo(f),y=u.child,u=y.sibling,y=Cl(y,{mode:"visible",children:N.children}),y.return=f,y.sibling=null,u!==null&&(Z=f.deletions,Z===null?(f.deletions=[u],f.flags|=16):Z.push(u)),f.child=y,f.memoizedState=null,y)}function B1(u,f){return f=T0({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function T0(u,f){return u=or(22,u,null,f),u.lanes=0,u}function H1(u,f,y){return rd(f,u.child,null,y),u=B1(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function R3(u,f,y){u.lanes|=f;var N=u.alternate;N!==null&&(N.lanes|=f),s1(u.return,f,y)}function G1(u,f,y,N,k,P){var Z=u.memoizedState;Z===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:N,tail:y,tailMode:k,treeForkCount:P}:(Z.isBackwards=f,Z.rendering=null,Z.renderingStartTime=0,Z.last=N,Z.tail=y,Z.tailMode=k,Z.treeForkCount=P)}function z3(u,f,y){var N=f.pendingProps,k=N.revealOrder,P=N.tail;N=N.children;var Z=fn.current,fe=(Z&2)!==0;if(fe?(Z=Z&1|2,f.flags|=128):Z&=1,me(fn,Z),ss(u,f,N,y),N=ra?th:0,!fe&&u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&R3(u,y,f);else if(u.tag===19)R3(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(k){case"forwards":for(y=f.child,k=null;y!==null;)u=y.alternate,u!==null&&p0(u)===null&&(k=y),y=y.sibling;y=k,y===null?(k=f.child,f.child=null):(k=y.sibling,y.sibling=null),G1(f,!1,k,y,P,N);break;case"backwards":case"unstable_legacy-backwards":for(y=null,k=f.child,f.child=null;k!==null;){if(u=k.alternate,u!==null&&p0(u)===null){f.child=k;break}u=k.sibling,k.sibling=y,y=k,k=u}G1(f,!0,y,null,P,N);break;case"together":G1(f,!1,null,null,void 0,N);break;default:f.memoizedState=null}return f.child}function kl(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Xo|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(Ku(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(s(153));if(f.child!==null){for(u=f.child,y=Cl(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=Cl(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function V1(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&o0(u)))}function NZ(u,f,y){switch(f.tag){case 3:Ie(f,f.stateNode.containerInfo),Ho(f,vn,u.memoizedState.cache),Jc();break;case 27:case 5:Ce(f);break;case 4:Ie(f,f.stateNode.containerInfo);break;case 10:Ho(f,f.type,f.memoizedProps.value);break;case 31:if(f.memoizedState!==null)return f.flags|=128,p1(f),null;break;case 13:var N=f.memoizedState;if(N!==null)return N.dehydrated!==null?(qo(f),f.flags|=128,null):(y&f.child.childLanes)!==0?$3(u,f,y):(qo(f),u=kl(u,f,y),u!==null?u.sibling:null);qo(f);break;case 19:var k=(u.flags&128)!==0;if(N=(y&f.childLanes)!==0,N||(Ku(u,f,y,!1),N=(y&f.childLanes)!==0),k){if(N)return z3(u,f,y);f.flags|=128}if(k=f.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),me(fn,fn.current),N)break;return null;case 22:return f.lanes=0,L3(u,f,y,f.pendingProps);case 24:Ho(f,vn,u.memoizedState.cache)}return kl(u,f,y)}function U3(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Nn=!0;else{if(!V1(u,y)&&(f.flags&128)===0)return Nn=!1,NZ(u,f,y);Nn=(u.flags&131072)!==0}else Nn=!1,ra&&(f.flags&1048576)!==0&&yD(f,th,f.index);switch(f.lanes=0,f.tag){case 16:e:{var N=f.pendingProps;if(u=nd(f.elementType),f.type=u,typeof u=="function")Qj(u)?(N=ld(u,N),f.tag=1,f=M3(null,f,u,N,y)):(f.tag=0,f=R1(null,f,u,N,y));else{if(u!=null){var k=u.$$typeof;if(k===_){f.tag=11,f=T3(null,f,u,N,y);break e}else if(k===E){f.tag=14,f=E3(null,f,u,N,y);break e}}throw f=H(u)||u,Error(s(306,f,""))}}return f;case 0:return R1(u,f,f.type,f.pendingProps,y);case 1:return N=f.type,k=ld(N,f.pendingProps),M3(u,f,N,k,y);case 3:e:{if(Ie(f,f.stateNode.containerInfo),u===null)throw Error(s(387));N=f.pendingProps;var P=f.memoizedState;k=P.element,u1(u,f),ch(f,N,null,y);var Z=f.memoizedState;if(N=Z.cache,Ho(f,vn,N),N!==P.cache&&r1(f,[vn],y,!0),oh(),N=Z.element,P.isDehydrated)if(P={element:N,isDehydrated:!1,cache:Z.cache},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){f=I3(u,f,N,y);break e}else if(N!==k){k=Dr(Error(s(424)),f),ah(k),f=I3(u,f,N,y);break e}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Ra=Rr(u.firstChild),as=f,ra=!0,Fo=null,Ir=!0,y=LD(f,null,N,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Jc(),N===k){f=kl(u,f,y);break e}ss(u,f,N,y)}f=f.child}return f;case 26:return A0(u,f),u===null?(y=XO(f.type,null,f.pendingProps,null))?f.memoizedState=y:ra||(y=f.type,u=f.pendingProps,N=G0(Ae.current).createElement(y),N[nt]=f,N[ht]=u,rs(N,y,u),Vn(N),f.stateNode=N):f.memoizedState=XO(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return Ce(f),u===null&&ra&&(N=f.stateNode=YO(f.type,f.pendingProps,Ae.current),as=f,Ir=!0,k=Ra,ac(f.type)?(CC=k,Ra=Rr(N.firstChild)):Ra=k),ss(u,f,f.pendingProps.children,y),A0(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&ra&&((k=N=Ra)&&(N=ZZ(N,f.type,f.pendingProps,Ir),N!==null?(f.stateNode=N,as=f,Ra=Rr(N.firstChild),Ir=!1,k=!0):k=!1),k||Bo(f)),Ce(f),k=f.type,P=f.pendingProps,Z=u!==null?u.memoizedProps:null,N=P.children,bC(k,P)?N=null:Z!==null&&bC(k,Z)&&(f.flags|=32),f.memoizedState!==null&&(k=y1(u,f,fZ,null,null,y),Eh._currentValue=k),A0(u,f),ss(u,f,N,y),f.child;case 6:return u===null&&ra&&((u=y=Ra)&&(y=JZ(y,f.pendingProps,Ir),y!==null?(f.stateNode=y,as=f,Ra=null,u=!0):u=!1),u||Bo(f)),null;case 13:return $3(u,f,y);case 4:return Ie(f,f.stateNode.containerInfo),N=f.pendingProps,u===null?f.child=rd(f,null,N,y):ss(u,f,N,y),f.child;case 11:return T3(u,f,f.type,f.pendingProps,y);case 7:return ss(u,f,f.pendingProps,y),f.child;case 8:return ss(u,f,f.pendingProps.children,y),f.child;case 12:return ss(u,f,f.pendingProps.children,y),f.child;case 10:return N=f.pendingProps,Ho(f,f.type,N.value),ss(u,f,N.children,y),f.child;case 9:return k=f.type._context,N=f.pendingProps.children,td(f),k=ns(k),N=N(k),f.flags|=1,ss(u,f,N,y),f.child;case 14:return E3(u,f,f.type,f.pendingProps,y);case 15:return k3(u,f,f.type,f.pendingProps,y);case 19:return z3(u,f,y);case 31:return wZ(u,f,y);case 22:return L3(u,f,y,f.pendingProps);case 24:return td(f),N=ns(vn),u===null?(k=o1(),k===null&&(k=La,P=i1(),k.pooledCache=P,P.refCount++,P!==null&&(k.pooledCacheLanes|=y),k=P),f.memoizedState={parent:N,cache:k},d1(f),Ho(f,vn,k)):((u.lanes&y)!==0&&(u1(u,f),ch(f,null,null,y),oh()),k=u.memoizedState,P=f.memoizedState,k.parent!==N?(k={parent:N,cache:N},f.memoizedState=k,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=k),Ho(f,vn,N)):(N=P.cache,Ho(f,vn,N),N!==k.cache&&r1(f,[vn],y,!0))),ss(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(s(156,f.tag))}function Ll(u){u.flags|=4}function W1(u,f,y,N,k){if((f=(u.mode&32)!==0)&&(f=!1),f){if(u.flags|=16777216,(k&335544128)===k)if(u.stateNode.complete)u.flags|=8192;else if(fO())u.flags|=8192;else throw sd=m0,c1}else u.flags&=-16777217}function F3(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!a5(f))if(fO())u.flags|=8192;else throw sd=m0,c1}function E0(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?yt():536870912,u.lanes|=f,lm|=f)}function gh(u,f){if(!ra)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var N=null;y!==null;)y.alternate!==null&&(N=y),y=y.sibling;N===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:N.sibling=null}}function za(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,N=0;if(f)for(var k=u.child;k!==null;)y|=k.lanes|k.childLanes,N|=k.subtreeFlags&65011712,N|=k.flags&65011712,k.return=u,k=k.sibling;else for(k=u.child;k!==null;)y|=k.lanes|k.childLanes,N|=k.subtreeFlags,N|=k.flags,k.return=u,k=k.sibling;return u.subtreeFlags|=N,u.childLanes=y,f}function jZ(u,f,y){var N=f.pendingProps;switch(e1(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return za(f),null;case 1:return za(f),null;case 3:return y=f.stateNode,N=null,u!==null&&(N=u.memoizedState.cache),f.memoizedState.cache!==N&&(f.flags|=2048),Al(vn),G(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Yu(f)?Ll(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,a1())),za(f),null;case 26:var k=f.type,P=f.memoizedState;return u===null?(Ll(f),P!==null?(za(f),F3(f,P)):(za(f),W1(f,k,null,N,y))):P?P!==u.memoizedState?(Ll(f),za(f),F3(f,P)):(za(f),f.flags&=-16777217):(u=u.memoizedProps,u!==N&&Ll(f),za(f),W1(f,k,u,N,y)),null;case 27:if(ce(f),y=Ae.current,k=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==N&&Ll(f);else{if(!N){if(f.stateNode===null)throw Error(s(166));return za(f),null}u=we.current,Yu(f)?vD(f):(u=YO(k,N,y),f.stateNode=u,Ll(f))}return za(f),null;case 5:if(ce(f),k=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==N&&Ll(f);else{if(!N){if(f.stateNode===null)throw Error(s(166));return za(f),null}if(P=we.current,Yu(f))vD(f);else{var Z=G0(Ae.current);switch(P){case 1:P=Z.createElementNS("http://www.w3.org/2000/svg",k);break;case 2:P=Z.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;default:switch(k){case"svg":P=Z.createElementNS("http://www.w3.org/2000/svg",k);break;case"math":P=Z.createElementNS("http://www.w3.org/1998/Math/MathML",k);break;case"script":P=Z.createElement("div"),P.innerHTML="<script><\/script>",P=P.removeChild(P.firstChild);break;case"select":P=typeof N.is=="string"?Z.createElement("select",{is:N.is}):Z.createElement("select"),N.multiple?P.multiple=!0:N.size&&(P.size=N.size);break;default:P=typeof N.is=="string"?Z.createElement(k,{is:N.is}):Z.createElement(k)}}P[nt]=f,P[ht]=N;e:for(Z=f.child;Z!==null;){if(Z.tag===5||Z.tag===6)P.appendChild(Z.stateNode);else if(Z.tag!==4&&Z.tag!==27&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===f)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===f)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}f.stateNode=P;e:switch(rs(P,k,N),k){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}N&&Ll(f)}}return za(f),W1(f,f.type,u===null?null:u.memoizedProps,f.pendingProps,y),null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==N&&Ll(f);else{if(typeof N!="string"&&f.stateNode===null)throw Error(s(166));if(u=Ae.current,Yu(f)){if(u=f.stateNode,y=f.memoizedProps,N=null,k=as,k!==null)switch(k.tag){case 27:case 5:N=k.memoizedProps}u[nt]=f,u=!!(u.nodeValue===y||N!==null&&N.suppressHydrationWarning===!0||$O(u.nodeValue,y)),u||Bo(f,!0)}else u=G0(u).createTextNode(N),u[nt]=f,f.stateNode=u}return za(f),null;case 31:if(y=f.memoizedState,u===null||u.memoizedState!==null){if(N=Yu(f),y!==null){if(u===null){if(!N)throw Error(s(318));if(u=f.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(557));u[nt]=f}else Jc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;za(f),u=!1}else y=a1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=y),u=!0;if(!u)return f.flags&256?(dr(f),f):(dr(f),null);if((f.flags&128)!==0)throw Error(s(558))}return za(f),null;case 13:if(N=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(k=Yu(f),N!==null&&N.dehydrated!==null){if(u===null){if(!k)throw Error(s(318));if(k=f.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(s(317));k[nt]=f}else Jc(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;za(f),k=!1}else k=a1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=k),k=!0;if(!k)return f.flags&256?(dr(f),f):(dr(f),null)}return dr(f),(f.flags&128)!==0?(f.lanes=y,f):(y=N!==null,u=u!==null&&u.memoizedState!==null,y&&(N=f.child,k=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(k=N.alternate.memoizedState.cachePool.pool),P=null,N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(P=N.memoizedState.cachePool.pool),P!==k&&(N.flags|=2048)),y!==u&&y&&(f.child.flags|=8192),E0(f,f.updateQueue),za(f),null);case 4:return G(),u===null&&hC(f.stateNode.containerInfo),za(f),null;case 10:return Al(f.type),za(f),null;case 19:if(ee(fn),N=f.memoizedState,N===null)return za(f),null;if(k=(f.flags&128)!==0,P=N.rendering,P===null)if(k)gh(N,!1);else{if(rn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(P=p0(u),P!==null){for(f.flags|=128,gh(N,!1),u=P.updateQueue,f.updateQueue=u,E0(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)gD(y,u),y=y.sibling;return me(fn,fn.current&1|2),ra&&Sl(f,N.treeForkCount),f.child}u=u.sibling}N.tail!==null&&M()>O0&&(f.flags|=128,k=!0,gh(N,!1),f.lanes=4194304)}else{if(!k)if(u=p0(P),u!==null){if(f.flags|=128,k=!0,u=u.updateQueue,f.updateQueue=u,E0(f,u),gh(N,!0),N.tail===null&&N.tailMode==="hidden"&&!P.alternate&&!ra)return za(f),null}else 2*M()-N.renderingStartTime>O0&&y!==536870912&&(f.flags|=128,k=!0,gh(N,!1),f.lanes=4194304);N.isBackwards?(P.sibling=f.child,f.child=P):(u=N.last,u!==null?u.sibling=P:f.child=P,N.last=P)}return N.tail!==null?(u=N.tail,N.rendering=u,N.tail=u.sibling,N.renderingStartTime=M(),u.sibling=null,y=fn.current,me(fn,k?y&1|2:y&1),ra&&Sl(f,N.treeForkCount),u):(za(f),null);case 22:case 23:return dr(f),g1(),N=f.memoizedState!==null,u!==null?u.memoizedState!==null!==N&&(f.flags|=8192):N&&(f.flags|=8192),N?(y&536870912)!==0&&(f.flags&128)===0&&(za(f),f.subtreeFlags&6&&(f.flags|=8192)):za(f),y=f.updateQueue,y!==null&&E0(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),N=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(N=f.memoizedState.cachePool.pool),N!==y&&(f.flags|=2048),u!==null&&ee(ad),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Al(vn),za(f),null;case 25:return null;case 30:return null}throw Error(s(156,f.tag))}function CZ(u,f){switch(e1(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Al(vn),G(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return ce(f),null;case 31:if(f.memoizedState!==null){if(dr(f),f.alternate===null)throw Error(s(340));Jc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 13:if(dr(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(s(340));Jc()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return ee(fn),null;case 4:return G(),null;case 10:return Al(f.type),null;case 22:case 23:return dr(f),g1(),u!==null&&ee(ad),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Al(vn),null;case 25:return null;default:return null}}function B3(u,f){switch(e1(f),f.tag){case 3:Al(vn),G();break;case 26:case 27:case 5:ce(f);break;case 4:G();break;case 31:f.memoizedState!==null&&dr(f);break;case 13:dr(f);break;case 19:ee(fn);break;case 10:Al(f.type);break;case 22:case 23:dr(f),g1(),u!==null&&ee(ad);break;case 24:Al(vn)}}function ph(u,f){try{var y=f.updateQueue,N=y!==null?y.lastEffect:null;if(N!==null){var k=N.next;y=k;do{if((y.tag&u)===u){N=void 0;var P=y.create,Z=y.inst;N=P(),Z.destroy=N}y=y.next}while(y!==k)}}catch(fe){wa(f,f.return,fe)}}function Ko(u,f,y){try{var N=f.updateQueue,k=N!==null?N.lastEffect:null;if(k!==null){var P=k.next;N=P;do{if((N.tag&u)===u){var Z=N.inst,fe=Z.destroy;if(fe!==void 0){Z.destroy=void 0,k=f;var Pe=y,Qe=fe;try{Qe()}catch(it){wa(k,Pe,it)}}}N=N.next}while(N!==P)}}catch(it){wa(f,f.return,it)}}function H3(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{DD(f,y)}catch(N){wa(u,u.return,N)}}}function G3(u,f,y){y.props=ld(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(N){wa(u,f,N)}}function xh(u,f){try{var y=u.ref;if(y!==null){switch(u.tag){case 26:case 27:case 5:var N=u.stateNode;break;case 30:N=u.stateNode;break;default:N=u.stateNode}typeof y=="function"?u.refCleanup=y(N):y.current=N}}catch(k){wa(u,f,k)}}function Ui(u,f){var y=u.ref,N=u.refCleanup;if(y!==null)if(typeof N=="function")try{N()}catch(k){wa(u,f,k)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(k){wa(u,f,k)}else y.current=null}function V3(u){var f=u.type,y=u.memoizedProps,N=u.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&N.focus();break e;case"img":y.src?N.src=y.src:y.srcSet&&(N.srcset=y.srcSet)}}catch(k){wa(u,u.return,k)}}function q1(u,f,y){try{var N=u.stateNode;WZ(N,u.type,y,f),N[ht]=f}catch(k){wa(u,u.return,k)}}function W3(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ac(u.type)||u.tag===4}function Y1(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||W3(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ac(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function K1(u,f,y){var N=u.tag;if(N===5||N===6)u=u.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(u,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(u),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=Nl));else if(N!==4&&(N===27&&ac(u.type)&&(y=u.stateNode,f=null),u=u.child,u!==null))for(K1(u,f,y),u=u.sibling;u!==null;)K1(u,f,y),u=u.sibling}function k0(u,f,y){var N=u.tag;if(N===5||N===6)u=u.stateNode,f?y.insertBefore(u,f):y.appendChild(u);else if(N!==4&&(N===27&&ac(u.type)&&(y=u.stateNode),u=u.child,u!==null))for(k0(u,f,y),u=u.sibling;u!==null;)k0(u,f,y),u=u.sibling}function q3(u){var f=u.stateNode,y=u.memoizedProps;try{for(var N=u.type,k=f.attributes;k.length;)f.removeAttributeNode(k[0]);rs(f,N,y),f[nt]=u,f[ht]=y}catch(P){wa(u,u.return,P)}}var Pl=!1,jn=!1,Q1=!1,Y3=typeof WeakSet=="function"?WeakSet:Set,Wn=null;function SZ(u,f){if(u=u.containerInfo,xC=X0,u=iD(u),Hj(u)){if("selectionStart"in u)var y={start:u.selectionStart,end:u.selectionEnd};else e:{y=(y=u.ownerDocument)&&y.defaultView||window;var N=y.getSelection&&y.getSelection();if(N&&N.rangeCount!==0){y=N.anchorNode;var k=N.anchorOffset,P=N.focusNode;N=N.focusOffset;try{y.nodeType,P.nodeType}catch{y=null;break e}var Z=0,fe=-1,Pe=-1,Qe=0,it=0,ut=u,Ze=null;t:for(;;){for(var rt;ut!==y||k!==0&&ut.nodeType!==3||(fe=Z+k),ut!==P||N!==0&&ut.nodeType!==3||(Pe=Z+N),ut.nodeType===3&&(Z+=ut.nodeValue.length),(rt=ut.firstChild)!==null;)Ze=ut,ut=rt;for(;;){if(ut===u)break t;if(Ze===y&&++Qe===k&&(fe=Z),Ze===P&&++it===N&&(Pe=Z),(rt=ut.nextSibling)!==null)break;ut=Ze,Ze=ut.parentNode}ut=rt}y=fe===-1||Pe===-1?null:{start:fe,end:Pe}}else y=null}y=y||{start:0,end:0}}else y=null;for(yC={focusedElem:u,selectionRange:y},X0=!1,Wn=f;Wn!==null;)if(f=Wn,u=f.child,(f.subtreeFlags&1028)!==0&&u!==null)u.return=f,Wn=u;else for(;Wn!==null;){switch(f=Wn,P=f.alternate,u=f.flags,f.tag){case 0:if((u&4)!==0&&(u=f.updateQueue,u=u!==null?u.events:null,u!==null))for(y=0;y<u.length;y++)k=u[y],k.ref.impl=k.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&P!==null){u=void 0,y=f,k=P.memoizedProps,P=P.memoizedState,N=y.stateNode;try{var At=ld(y.type,k);u=N.getSnapshotBeforeUpdate(At,P),N.__reactInternalSnapshotBeforeUpdate=u}catch(Rt){wa(y,y.return,Rt)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,y=u.nodeType,y===9)wC(u);else if(y===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":wC(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=f.sibling,u!==null){u.return=f.return,Wn=u;break}Wn=f.return}}function K3(u,f,y){var N=y.flags;switch(y.tag){case 0:case 11:case 15:Ol(u,y),N&4&&ph(5,y);break;case 1:if(Ol(u,y),N&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(Z){wa(y,y.return,Z)}else{var k=ld(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(k,f,u.__reactInternalSnapshotBeforeUpdate)}catch(Z){wa(y,y.return,Z)}}N&64&&H3(y),N&512&&xh(y,y.return);break;case 3:if(Ol(u,y),N&64&&(u=y.updateQueue,u!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{DD(u,f)}catch(Z){wa(y,y.return,Z)}}break;case 27:f===null&&N&4&&q3(y);case 26:case 5:Ol(u,y),f===null&&N&4&&V3(y),N&512&&xh(y,y.return);break;case 12:Ol(u,y);break;case 31:Ol(u,y),N&4&&Z3(u,y);break;case 13:Ol(u,y),N&4&&J3(u,y),N&64&&(u=y.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(y=OZ.bind(null,y),eJ(u,y))));break;case 22:if(N=y.memoizedState!==null||Pl,!N){f=f!==null&&f.memoizedState!==null||jn,k=Pl;var P=jn;Pl=N,(jn=f)&&!P?Ml(u,y,(y.subtreeFlags&8772)!==0):Ol(u,y),Pl=k,jn=P}break;case 30:break;default:Ol(u,y)}}function Q3(u){var f=u.alternate;f!==null&&(u.alternate=null,Q3(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&ts(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Va=null,Is=!1;function Dl(u,f,y){for(y=y.child;y!==null;)X3(u,f,y),y=y.sibling}function X3(u,f,y){if(ot&&typeof ot.onCommitFiberUnmount=="function")try{ot.onCommitFiberUnmount(at,y)}catch{}switch(y.tag){case 26:jn||Ui(y,f),Dl(u,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:jn||Ui(y,f);var N=Va,k=Is;ac(y.type)&&(Va=y.stateNode,Is=!1),Dl(u,f,y),_h(y.stateNode),Va=N,Is=k;break;case 5:jn||Ui(y,f);case 6:if(N=Va,k=Is,Va=null,Dl(u,f,y),Va=N,Is=k,Va!==null)if(Is)try{(Va.nodeType===9?Va.body:Va.nodeName==="HTML"?Va.ownerDocument.body:Va).removeChild(y.stateNode)}catch(P){wa(y,f,P)}else try{Va.removeChild(y.stateNode)}catch(P){wa(y,f,P)}break;case 18:Va!==null&&(Is?(u=Va,HO(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,y.stateNode),gm(u)):HO(Va,y.stateNode));break;case 4:N=Va,k=Is,Va=y.stateNode.containerInfo,Is=!0,Dl(u,f,y),Va=N,Is=k;break;case 0:case 11:case 14:case 15:Ko(2,y,f),jn||Ko(4,y,f),Dl(u,f,y);break;case 1:jn||(Ui(y,f),N=y.stateNode,typeof N.componentWillUnmount=="function"&&G3(y,f,N)),Dl(u,f,y);break;case 21:Dl(u,f,y);break;case 22:jn=(N=jn)||y.memoizedState!==null,Dl(u,f,y),jn=N;break;default:Dl(u,f,y)}}function Z3(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{gm(u)}catch(y){wa(f,f.return,y)}}}function J3(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{gm(u)}catch(y){wa(f,f.return,y)}}function _Z(u){switch(u.tag){case 31:case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new Y3),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new Y3),f;default:throw Error(s(435,u.tag))}}function L0(u,f){var y=_Z(u);f.forEach(function(N){if(!y.has(N)){y.add(N);var k=MZ.bind(null,u,N);N.then(k,k)}})}function $s(u,f){var y=f.deletions;if(y!==null)for(var N=0;N<y.length;N++){var k=y[N],P=u,Z=f,fe=Z;e:for(;fe!==null;){switch(fe.tag){case 27:if(ac(fe.type)){Va=fe.stateNode,Is=!1;break e}break;case 5:Va=fe.stateNode,Is=!1;break e;case 3:case 4:Va=fe.stateNode.containerInfo,Is=!0;break e}fe=fe.return}if(Va===null)throw Error(s(160));X3(P,Z,k),Va=null,Is=!1,P=k.alternate,P!==null&&(P.return=null),k.return=null}if(f.subtreeFlags&13886)for(f=f.child;f!==null;)eO(f,u),f=f.sibling}var fi=null;function eO(u,f){var y=u.alternate,N=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:$s(f,u),Rs(u),N&4&&(Ko(3,u,u.return),ph(3,u),Ko(5,u,u.return));break;case 1:$s(f,u),Rs(u),N&512&&(jn||y===null||Ui(y,y.return)),N&64&&Pl&&(u=u.updateQueue,u!==null&&(N=u.callbacks,N!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?N:y.concat(N))));break;case 26:var k=fi;if($s(f,u),Rs(u),N&512&&(jn||y===null||Ui(y,y.return)),N&4){var P=y!==null?y.memoizedState:null;if(N=u.memoizedState,y===null)if(N===null)if(u.stateNode===null){e:{N=u.type,y=u.memoizedProps,k=k.ownerDocument||k;t:switch(N){case"title":P=k.getElementsByTagName("title")[0],(!P||P[rr]||P[nt]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=k.createElement(N),k.head.insertBefore(P,k.querySelector("head > title"))),rs(P,N,y),P[nt]=u,Vn(P),N=P;break e;case"link":var Z=e5("link","href",k).get(N+(y.href||""));if(Z){for(var fe=0;fe<Z.length;fe++)if(P=Z[fe],P.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&P.getAttribute("rel")===(y.rel==null?null:y.rel)&&P.getAttribute("title")===(y.title==null?null:y.title)&&P.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Z.splice(fe,1);break t}}P=k.createElement(N),rs(P,N,y),k.head.appendChild(P);break;case"meta":if(Z=e5("meta","content",k).get(N+(y.content||""))){for(fe=0;fe<Z.length;fe++)if(P=Z[fe],P.getAttribute("content")===(y.content==null?null:""+y.content)&&P.getAttribute("name")===(y.name==null?null:y.name)&&P.getAttribute("property")===(y.property==null?null:y.property)&&P.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&P.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Z.splice(fe,1);break t}}P=k.createElement(N),rs(P,N,y),k.head.appendChild(P);break;default:throw Error(s(468,N))}P[nt]=u,Vn(P),N=P}u.stateNode=N}else t5(k,u.type,u.stateNode);else u.stateNode=JO(k,N,u.memoizedProps);else P!==N?(P===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):P.count--,N===null?t5(k,u.type,u.stateNode):JO(k,N,u.memoizedProps)):N===null&&u.stateNode!==null&&q1(u,u.memoizedProps,y.memoizedProps)}break;case 27:$s(f,u),Rs(u),N&512&&(jn||y===null||Ui(y,y.return)),y!==null&&N&4&&q1(u,u.memoizedProps,y.memoizedProps);break;case 5:if($s(f,u),Rs(u),N&512&&(jn||y===null||Ui(y,y.return)),u.flags&32){k=u.stateNode;try{Ru(k,"")}catch(At){wa(u,u.return,At)}}N&4&&u.stateNode!=null&&(k=u.memoizedProps,q1(u,k,y!==null?y.memoizedProps:k)),N&1024&&(Q1=!0);break;case 6:if($s(f,u),Rs(u),N&4){if(u.stateNode===null)throw Error(s(162));N=u.memoizedProps,y=u.stateNode;try{y.nodeValue=N}catch(At){wa(u,u.return,At)}}break;case 3:if(q0=null,k=fi,fi=V0(f.containerInfo),$s(f,u),fi=k,Rs(u),N&4&&y!==null&&y.memoizedState.isDehydrated)try{gm(f.containerInfo)}catch(At){wa(u,u.return,At)}Q1&&(Q1=!1,tO(u));break;case 4:N=fi,fi=V0(u.stateNode.containerInfo),$s(f,u),Rs(u),fi=N;break;case 12:$s(f,u),Rs(u);break;case 31:$s(f,u),Rs(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,L0(u,N)));break;case 13:$s(f,u),Rs(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(D0=M()),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,L0(u,N)));break;case 22:k=u.memoizedState!==null;var Pe=y!==null&&y.memoizedState!==null,Qe=Pl,it=jn;if(Pl=Qe||k,jn=it||Pe,$s(f,u),jn=it,Pl=Qe,Rs(u),N&8192)e:for(f=u.stateNode,f._visibility=k?f._visibility&-2:f._visibility|1,k&&(y===null||Pe||Pl||jn||od(u)),y=null,f=u;;){if(f.tag===5||f.tag===26){if(y===null){Pe=y=f;try{if(P=Pe.stateNode,k)Z=P.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{fe=Pe.stateNode;var ut=Pe.memoizedProps.style,Ze=ut!=null&&ut.hasOwnProperty("display")?ut.display:null;fe.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(At){wa(Pe,Pe.return,At)}}}else if(f.tag===6){if(y===null){Pe=f;try{Pe.stateNode.nodeValue=k?"":Pe.memoizedProps}catch(At){wa(Pe,Pe.return,At)}}}else if(f.tag===18){if(y===null){Pe=f;try{var rt=Pe.stateNode;k?GO(rt,!0):GO(Pe.stateNode,!1)}catch(At){wa(Pe,Pe.return,At)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}N&4&&(N=u.updateQueue,N!==null&&(y=N.retryQueue,y!==null&&(N.retryQueue=null,L0(u,y))));break;case 19:$s(f,u),Rs(u),N&4&&(N=u.updateQueue,N!==null&&(u.updateQueue=null,L0(u,N)));break;case 30:break;case 21:break;default:$s(f,u),Rs(u)}}function Rs(u){var f=u.flags;if(f&2){try{for(var y,N=u.return;N!==null;){if(W3(N)){y=N;break}N=N.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var k=y.stateNode,P=Y1(u);k0(u,P,k);break;case 5:var Z=y.stateNode;y.flags&32&&(Ru(Z,""),y.flags&=-33);var fe=Y1(u);k0(u,fe,Z);break;case 3:case 4:var Pe=y.stateNode.containerInfo,Qe=Y1(u);K1(u,Qe,Pe);break;default:throw Error(s(161))}}catch(it){wa(u,u.return,it)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function tO(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;tO(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function Ol(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)K3(u,f.alternate,f),f=f.sibling}function od(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Ko(4,f,f.return),od(f);break;case 1:Ui(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&G3(f,f.return,y),od(f);break;case 27:_h(f.stateNode);case 26:case 5:Ui(f,f.return),od(f);break;case 22:f.memoizedState===null&&od(f);break;case 30:od(f);break;default:od(f)}u=u.sibling}}function Ml(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var N=f.alternate,k=u,P=f,Z=P.flags;switch(P.tag){case 0:case 11:case 15:Ml(k,P,y),ph(4,P);break;case 1:if(Ml(k,P,y),N=P,k=N.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(Qe){wa(N,N.return,Qe)}if(N=P,k=N.updateQueue,k!==null){var fe=N.stateNode;try{var Pe=k.shared.hiddenCallbacks;if(Pe!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Pe.length;k++)PD(Pe[k],fe)}catch(Qe){wa(N,N.return,Qe)}}y&&Z&64&&H3(P),xh(P,P.return);break;case 27:q3(P);case 26:case 5:Ml(k,P,y),y&&N===null&&Z&4&&V3(P),xh(P,P.return);break;case 12:Ml(k,P,y);break;case 31:Ml(k,P,y),y&&Z&4&&Z3(k,P);break;case 13:Ml(k,P,y),y&&Z&4&&J3(k,P);break;case 22:P.memoizedState===null&&Ml(k,P,y),xh(P,P.return);break;case 30:break;default:Ml(k,P,y)}f=f.sibling}}function X1(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&nh(y))}function Z1(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&nh(u))}function hi(u,f,y,N){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)aO(u,f,y,N),f=f.sibling}function aO(u,f,y,N){var k=f.flags;switch(f.tag){case 0:case 11:case 15:hi(u,f,y,N),k&2048&&ph(9,f);break;case 1:hi(u,f,y,N);break;case 3:hi(u,f,y,N),k&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&nh(u)));break;case 12:if(k&2048){hi(u,f,y,N),u=f.stateNode;try{var P=f.memoizedProps,Z=P.id,fe=P.onPostCommit;typeof fe=="function"&&fe(Z,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Pe){wa(f,f.return,Pe)}}else hi(u,f,y,N);break;case 31:hi(u,f,y,N);break;case 13:hi(u,f,y,N);break;case 23:break;case 22:P=f.stateNode,Z=f.alternate,f.memoizedState!==null?P._visibility&2?hi(u,f,y,N):yh(u,f):P._visibility&2?hi(u,f,y,N):(P._visibility|=2,sm(u,f,y,N,(f.subtreeFlags&10256)!==0||!1)),k&2048&&X1(Z,f);break;case 24:hi(u,f,y,N),k&2048&&Z1(f.alternate,f);break;default:hi(u,f,y,N)}}function sm(u,f,y,N,k){for(k=k&&((f.subtreeFlags&10256)!==0||!1),f=f.child;f!==null;){var P=u,Z=f,fe=y,Pe=N,Qe=Z.flags;switch(Z.tag){case 0:case 11:case 15:sm(P,Z,fe,Pe,k),ph(8,Z);break;case 23:break;case 22:var it=Z.stateNode;Z.memoizedState!==null?it._visibility&2?sm(P,Z,fe,Pe,k):yh(P,Z):(it._visibility|=2,sm(P,Z,fe,Pe,k)),k&&Qe&2048&&X1(Z.alternate,Z);break;case 24:sm(P,Z,fe,Pe,k),k&&Qe&2048&&Z1(Z.alternate,Z);break;default:sm(P,Z,fe,Pe,k)}f=f.sibling}}function yh(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,N=f,k=N.flags;switch(N.tag){case 22:yh(y,N),k&2048&&X1(N.alternate,N);break;case 24:yh(y,N),k&2048&&Z1(N.alternate,N);break;default:yh(y,N)}f=f.sibling}}var bh=8192;function rm(u,f,y){if(u.subtreeFlags&bh)for(u=u.child;u!==null;)nO(u,f,y),u=u.sibling}function nO(u,f,y){switch(u.tag){case 26:rm(u,f,y),u.flags&bh&&u.memoizedState!==null&&mJ(y,fi,u.memoizedState,u.memoizedProps);break;case 5:rm(u,f,y);break;case 3:case 4:var N=fi;fi=V0(u.stateNode.containerInfo),rm(u,f,y),fi=N;break;case 22:u.memoizedState===null&&(N=u.alternate,N!==null&&N.memoizedState!==null?(N=bh,bh=16777216,rm(u,f,y),bh=N):rm(u,f,y));break;default:rm(u,f,y)}}function sO(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function vh(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var N=f[y];Wn=N,iO(N,u)}sO(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)rO(u),u=u.sibling}function rO(u){switch(u.tag){case 0:case 11:case 15:vh(u),u.flags&2048&&Ko(9,u,u.return);break;case 3:vh(u);break;case 12:vh(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,P0(u)):vh(u);break;default:vh(u)}}function P0(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var N=f[y];Wn=N,iO(N,u)}sO(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Ko(8,f,f.return),P0(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,P0(f));break;default:P0(f)}u=u.sibling}}function iO(u,f){for(;Wn!==null;){var y=Wn;switch(y.tag){case 0:case 11:case 15:Ko(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var N=y.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:nh(y.memoizedState.cache)}if(N=y.child,N!==null)N.return=y,Wn=N;else e:for(y=u;Wn!==null;){N=Wn;var k=N.sibling,P=N.return;if(Q3(N),N===y){Wn=null;break e}if(k!==null){k.return=P,Wn=k;break e}Wn=P}}}var AZ={getCacheForType:function(u){var f=ns(vn),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y},cacheSignal:function(){return ns(vn).controller.signal}},TZ=typeof WeakMap=="function"?WeakMap:Map,fa=0,La=null,Zt=null,ea=0,va=0,ur=null,Qo=!1,im=!1,J1=!1,Il=0,rn=0,Xo=0,cd=0,eC=0,mr=0,lm=0,wh=null,zs=null,tC=!1,D0=0,lO=0,O0=1/0,M0=null,Zo=null,kn=0,Jo=null,om=null,$l=0,aC=0,nC=null,oO=null,Nh=0,sC=null;function fr(){return(fa&2)!==0&&ea!==0?ea&-ea:W.T!==null?dC():oe()}function cO(){if(mr===0)if((ea&536870912)===0||ra){var u=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),mr=u}else mr=536870912;return u=cr.current,u!==null&&(u.flags|=32),mr}function Us(u,f,y){(u===La&&(va===2||va===9)||u.cancelPendingCommit!==null)&&(cm(u,0),ec(u,ea,mr,!1)),st(u,y),((fa&2)===0||u!==La)&&(u===La&&((fa&2)===0&&(cd|=y),rn===4&&ec(u,ea,mr,!1)),Fi(u))}function dO(u,f,y){if((fa&6)!==0)throw Error(s(327));var N=!y&&(f&127)===0&&(f&u.expiredLanes)===0||vt(u,f),k=N?LZ(u,f):iC(u,f,!0),P=N;do{if(k===0){im&&!N&&ec(u,f,0,!1);break}else{if(y=u.current.alternate,P&&!EZ(y)){k=iC(u,f,!1),P=!1;continue}if(k===2){if(P=f,u.errorRecoveryDisabledLanes&P)var Z=0;else Z=u.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){f=Z;e:{var fe=u;k=wh;var Pe=fe.current.memoizedState.isDehydrated;if(Pe&&(cm(fe,Z).flags|=256),Z=iC(fe,Z,!1),Z!==2){if(J1&&!Pe){fe.errorRecoveryDisabledLanes|=P,cd|=P,k=4;break e}P=zs,zs=k,P!==null&&(zs===null?zs=P:zs.push.apply(zs,P))}k=Z}if(P=!1,k!==2)continue}}if(k===1){cm(u,0),ec(u,f,0,!0);break}e:{switch(N=u,P=k,P){case 0:case 1:throw Error(s(345));case 4:if((f&4194048)!==f)break;case 6:ec(N,f,mr,!Qo);break e;case 2:zs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((f&62914560)===f&&(k=D0+300-M(),10<k)){if(ec(N,f,mr,!Qo),ft(N,0,!0)!==0)break e;$l=f,N.timeoutHandle=FO(uO.bind(null,N,y,zs,M0,tC,f,mr,cd,lm,Qo,P,"Throttled",-0,0),k);break e}uO(N,y,zs,M0,tC,f,mr,cd,lm,Qo,P,null,-0,0)}}break}while(!0);Fi(u)}function uO(u,f,y,N,k,P,Z,fe,Pe,Qe,it,ut,Ze,rt){if(u.timeoutHandle=-1,ut=f.subtreeFlags,ut&8192||(ut&16785408)===16785408){ut={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Nl},nO(f,P,ut);var At=(P&62914560)===P?D0-M():(P&4194048)===P?lO-M():0;if(At=fJ(ut,At),At!==null){$l=P,u.cancelPendingCommit=At(bO.bind(null,u,f,P,y,N,k,Z,fe,Pe,it,ut,null,Ze,rt)),ec(u,P,Z,!Qe);return}}bO(u,f,P,y,N,k,Z,fe,Pe)}function EZ(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var N=0;N<y.length;N++){var k=y[N],P=k.getSnapshot;k=k.value;try{if(!lr(P(),k))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ec(u,f,y,N){f&=~eC,f&=~cd,u.suspendedLanes|=f,u.pingedLanes&=~f,N&&(u.warmLanes|=f),N=u.expirationTimes;for(var k=f;0<k;){var P=31-$(k),Z=1<<P;N[P]=-1,k&=~Z}y!==0&&Ee(u,y,f)}function I0(){return(fa&6)===0?(jh(0),!1):!0}function rC(){if(Zt!==null){if(va===0)var u=Zt.return;else u=Zt,_l=ed=null,w1(u),Ju=null,rh=0,u=Zt;for(;u!==null;)B3(u.alternate,u),u=u.return;Zt=null}}function cm(u,f){var y=u.timeoutHandle;y!==-1&&(u.timeoutHandle=-1,KZ(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),$l=0,rC(),La=u,Zt=y=Cl(u.current,null),ea=f,va=0,ur=null,Qo=!1,im=vt(u,f),J1=!1,lm=mr=eC=cd=Xo=rn=0,zs=wh=null,tC=!1,(f&8)!==0&&(f|=f&32);var N=u.entangledLanes;if(N!==0)for(u=u.entanglements,N&=f;0<N;){var k=31-$(N),P=1<<k;f|=u[k],N&=~P}return Il=f,n0(),y}function mO(u,f){Ht=null,W.H=fh,f===Zu||f===u0?(f=TD(),va=3):f===c1?(f=TD(),va=4):va=f===$1?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ur=f,Zt===null&&(rn=1,S0(u,Dr(f,u.current)))}function fO(){var u=cr.current;return u===null?!0:(ea&4194048)===ea?$r===null:(ea&62914560)===ea||(ea&536870912)!==0?u===$r:!1}function hO(){var u=W.H;return W.H=fh,u===null?fh:u}function gO(){var u=W.A;return W.A=AZ,u}function $0(){rn=4,Qo||(ea&4194048)!==ea&&cr.current!==null||(im=!0),(Xo&134217727)===0&&(cd&134217727)===0||La===null||ec(La,ea,mr,!1)}function iC(u,f,y){var N=fa;fa|=2;var k=hO(),P=gO();(La!==u||ea!==f)&&(M0=null,cm(u,f)),f=!1;var Z=rn;e:do try{if(va!==0&&Zt!==null){var fe=Zt,Pe=ur;switch(va){case 8:rC(),Z=6;break e;case 3:case 2:case 9:case 6:cr.current===null&&(f=!0);var Qe=va;if(va=0,ur=null,dm(u,fe,Pe,Qe),y&&im){Z=0;break e}break;default:Qe=va,va=0,ur=null,dm(u,fe,Pe,Qe)}}kZ(),Z=rn;break}catch(it){mO(u,it)}while(!0);return f&&u.shellSuspendCounter++,_l=ed=null,fa=N,W.H=k,W.A=P,Zt===null&&(La=null,ea=0,n0()),Z}function kZ(){for(;Zt!==null;)pO(Zt)}function LZ(u,f){var y=fa;fa|=2;var N=hO(),k=gO();La!==u||ea!==f?(M0=null,O0=M()+500,cm(u,f)):im=vt(u,f);e:do try{if(va!==0&&Zt!==null){f=Zt;var P=ur;t:switch(va){case 1:va=0,ur=null,dm(u,f,P,1);break;case 2:case 9:if(_D(P)){va=0,ur=null,xO(f);break}f=function(){va!==2&&va!==9||La!==u||(va=7),Fi(u)},P.then(f,f);break e;case 3:va=7;break e;case 4:va=5;break e;case 7:_D(P)?(va=0,ur=null,xO(f)):(va=0,ur=null,dm(u,f,P,7));break;case 5:var Z=null;switch(Zt.tag){case 26:Z=Zt.memoizedState;case 5:case 27:var fe=Zt;if(Z?a5(Z):fe.stateNode.complete){va=0,ur=null;var Pe=fe.sibling;if(Pe!==null)Zt=Pe;else{var Qe=fe.return;Qe!==null?(Zt=Qe,R0(Qe)):Zt=null}break t}}va=0,ur=null,dm(u,f,P,5);break;case 6:va=0,ur=null,dm(u,f,P,6);break;case 8:rC(),rn=6;break e;default:throw Error(s(462))}}PZ();break}catch(it){mO(u,it)}while(!0);return _l=ed=null,W.H=N,W.A=k,fa=y,Zt!==null?0:(La=null,ea=0,n0(),rn)}function PZ(){for(;Zt!==null&&!Be();)pO(Zt)}function pO(u){var f=U3(u.alternate,u,Il);u.memoizedProps=u.pendingProps,f===null?R0(u):Zt=f}function xO(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=O3(y,f,f.pendingProps,f.type,void 0,ea);break;case 11:f=O3(y,f,f.pendingProps,f.type.render,f.ref,ea);break;case 5:w1(f);default:B3(y,f),f=Zt=gD(f,Il),f=U3(y,f,Il)}u.memoizedProps=u.pendingProps,f===null?R0(u):Zt=f}function dm(u,f,y,N){_l=ed=null,w1(f),Ju=null,rh=0;var k=f.return;try{if(vZ(u,k,f,y,ea)){rn=1,S0(u,Dr(y,u.current)),Zt=null;return}}catch(P){if(k!==null)throw Zt=k,P;rn=1,S0(u,Dr(y,u.current)),Zt=null;return}f.flags&32768?(ra||N===1?u=!0:im||(ea&536870912)!==0?u=!1:(Qo=u=!0,(N===2||N===9||N===3||N===6)&&(N=cr.current,N!==null&&N.tag===13&&(N.flags|=16384))),yO(f,u)):R0(f)}function R0(u){var f=u;do{if((f.flags&32768)!==0){yO(f,Qo);return}u=f.return;var y=jZ(f.alternate,f,Il);if(y!==null){Zt=y;return}if(f=f.sibling,f!==null){Zt=f;return}Zt=f=u}while(f!==null);rn===0&&(rn=5)}function yO(u,f){do{var y=CZ(u.alternate,u);if(y!==null){y.flags&=32767,Zt=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Zt=u;return}Zt=u=y}while(u!==null);rn=6,Zt=null}function bO(u,f,y,N,k,P,Z,fe,Pe){u.cancelPendingCommit=null;do z0();while(kn!==0);if((fa&6)!==0)throw Error(s(327));if(f!==null){if(f===u.current)throw Error(s(177));if(P=f.lanes|f.childLanes,P|=Yj,X(u,y,P,Z,fe,Pe),u===La&&(Zt=La=null,ea=0),om=f,Jo=u,$l=y,aC=P,nC=k,oO=N,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,IZ(We,function(){return CO(),null})):(u.callbackNode=null,u.callbackPriority=0),N=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||N){N=W.T,W.T=null,k=q.p,q.p=2,Z=fa,fa|=4;try{SZ(u,f,y)}finally{fa=Z,q.p=k,W.T=N}}kn=1,vO(),wO(),NO()}}function vO(){if(kn===1){kn=0;var u=Jo,f=om,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=W.T,W.T=null;var N=q.p;q.p=2;var k=fa;fa|=4;try{eO(f,u);var P=yC,Z=iD(u.containerInfo),fe=P.focusedElem,Pe=P.selectionRange;if(Z!==fe&&fe&&fe.ownerDocument&&rD(fe.ownerDocument.documentElement,fe)){if(Pe!==null&&Hj(fe)){var Qe=Pe.start,it=Pe.end;if(it===void 0&&(it=Qe),"selectionStart"in fe)fe.selectionStart=Qe,fe.selectionEnd=Math.min(it,fe.value.length);else{var ut=fe.ownerDocument||document,Ze=ut&&ut.defaultView||window;if(Ze.getSelection){var rt=Ze.getSelection(),At=fe.textContent.length,Rt=Math.min(Pe.start,At),Ea=Pe.end===void 0?Rt:Math.min(Pe.end,At);!rt.extend&&Rt>Ea&&(Z=Ea,Ea=Rt,Rt=Z);var Ge=sD(fe,Rt),Re=sD(fe,Ea);if(Ge&&Re&&(rt.rangeCount!==1||rt.anchorNode!==Ge.node||rt.anchorOffset!==Ge.offset||rt.focusNode!==Re.node||rt.focusOffset!==Re.offset)){var Ke=ut.createRange();Ke.setStart(Ge.node,Ge.offset),rt.removeAllRanges(),Rt>Ea?(rt.addRange(Ke),rt.extend(Re.node,Re.offset)):(Ke.setEnd(Re.node,Re.offset),rt.addRange(Ke))}}}}for(ut=[],rt=fe;rt=rt.parentNode;)rt.nodeType===1&&ut.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof fe.focus=="function"&&fe.focus(),fe=0;fe<ut.length;fe++){var ct=ut[fe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}X0=!!xC,yC=xC=null}finally{fa=k,q.p=N,W.T=y}}u.current=f,kn=2}}function wO(){if(kn===2){kn=0;var u=Jo,f=om,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=W.T,W.T=null;var N=q.p;q.p=2;var k=fa;fa|=4;try{K3(u,f.alternate,f)}finally{fa=k,q.p=N,W.T=y}}kn=3}}function NO(){if(kn===4||kn===3){kn=0,dt();var u=Jo,f=om,y=$l,N=oO;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?kn=5:(kn=0,om=Jo=null,jO(u,u.pendingLanes));var k=u.pendingLanes;if(k===0&&(Zo=null),ne(y),f=f.stateNode,ot&&typeof ot.onCommitFiberRoot=="function")try{ot.onCommitFiberRoot(at,f,void 0,(f.current.flags&128)===128)}catch{}if(N!==null){f=W.T,k=q.p,q.p=2,W.T=null;try{for(var P=u.onRecoverableError,Z=0;Z<N.length;Z++){var fe=N[Z];P(fe.value,{componentStack:fe.stack})}}finally{W.T=f,q.p=k}}($l&3)!==0&&z0(),Fi(u),k=u.pendingLanes,(y&261930)!==0&&(k&42)!==0?u===sC?Nh++:(Nh=0,sC=u):Nh=0,jh(0)}}function jO(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,nh(f)))}function z0(){return vO(),wO(),NO(),CO()}function CO(){if(kn!==5)return!1;var u=Jo,f=aC;aC=0;var y=ne($l),N=W.T,k=q.p;try{q.p=32>y?32:y,W.T=null,y=nC,nC=null;var P=Jo,Z=$l;if(kn=0,om=Jo=null,$l=0,(fa&6)!==0)throw Error(s(331));var fe=fa;if(fa|=4,rO(P.current),aO(P,P.current,Z,y),fa=fe,jh(0,!1),ot&&typeof ot.onPostCommitFiberRoot=="function")try{ot.onPostCommitFiberRoot(at,P)}catch{}return!0}finally{q.p=k,W.T=N,jO(u,f)}}function SO(u,f,y){f=Dr(y,f),f=I1(u.stateNode,f,2),u=Wo(u,f,2),u!==null&&(st(u,2),Fi(u))}function wa(u,f,y){if(u.tag===3)SO(u,u,y);else for(;f!==null;){if(f.tag===3){SO(f,u,y);break}else if(f.tag===1){var N=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Zo===null||!Zo.has(N))){u=Dr(y,u),y=_3(2),N=Wo(f,y,2),N!==null&&(A3(y,N,f,u),st(N,2),Fi(N));break}}f=f.return}}function lC(u,f,y){var N=u.pingCache;if(N===null){N=u.pingCache=new TZ;var k=new Set;N.set(f,k)}else k=N.get(f),k===void 0&&(k=new Set,N.set(f,k));k.has(y)||(J1=!0,k.add(y),u=DZ.bind(null,u,f,y),f.then(u,u))}function DZ(u,f,y){var N=u.pingCache;N!==null&&N.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,La===u&&(ea&y)===y&&(rn===4||rn===3&&(ea&62914560)===ea&&300>M()-D0?(fa&2)===0&&cm(u,0):eC|=y,lm===ea&&(lm=0)),Fi(u)}function _O(u,f){f===0&&(f=yt()),u=Xc(u,f),u!==null&&(st(u,f),Fi(u))}function OZ(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),_O(u,y)}function MZ(u,f){var y=0;switch(u.tag){case 31:case 13:var N=u.stateNode,k=u.memoizedState;k!==null&&(y=k.retryLane);break;case 19:N=u.stateNode;break;case 22:N=u.stateNode._retryCache;break;default:throw Error(s(314))}N!==null&&N.delete(f),_O(u,y)}function IZ(u,f){return Me(u,f)}var U0=null,um=null,oC=!1,F0=!1,cC=!1,tc=0;function Fi(u){u!==um&&u.next===null&&(um===null?U0=um=u:um=um.next=u),F0=!0,oC||(oC=!0,RZ())}function jh(u,f){if(!cC&&F0){cC=!0;do for(var y=!1,N=U0;N!==null;){if(u!==0){var k=N.pendingLanes;if(k===0)var P=0;else{var Z=N.suspendedLanes,fe=N.pingedLanes;P=(1<<31-$(42|u)+1)-1,P&=k&~(Z&~fe),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(y=!0,kO(N,P))}else P=ea,P=ft(N,N===La?P:0,N.cancelPendingCommit!==null||N.timeoutHandle!==-1),(P&3)===0||vt(N,P)||(y=!0,kO(N,P));N=N.next}while(y);cC=!1}}function $Z(){AO()}function AO(){F0=oC=!1;var u=0;tc!==0&&YZ()&&(u=tc);for(var f=M(),y=null,N=U0;N!==null;){var k=N.next,P=TO(N,f);P===0?(N.next=null,y===null?U0=k:y.next=k,k===null&&(um=y)):(y=N,(u!==0||(P&3)!==0)&&(F0=!0)),N=k}kn!==0&&kn!==5||jh(u),tc!==0&&(tc=0)}function TO(u,f){for(var y=u.suspendedLanes,N=u.pingedLanes,k=u.expirationTimes,P=u.pendingLanes&-62914561;0<P;){var Z=31-$(P),fe=1<<Z,Pe=k[Z];Pe===-1?((fe&y)===0||(fe&N)!==0)&&(k[Z]=ze(fe,f)):Pe<=f&&(u.expiredLanes|=fe),P&=~fe}if(f=La,y=ea,y=ft(u,u===f?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N=u.callbackNode,y===0||u===f&&(va===2||va===9)||u.cancelPendingCommit!==null)return N!==null&&N!==null&&He(N),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||vt(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(N!==null&&He(N),ne(y)){case 2:case 8:y=je;break;case 32:y=We;break;case 268435456:y=qe;break;default:y=We}return N=EO.bind(null,u),y=Me(y,N),u.callbackPriority=f,u.callbackNode=y,f}return N!==null&&N!==null&&He(N),u.callbackPriority=2,u.callbackNode=null,2}function EO(u,f){if(kn!==0&&kn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var y=u.callbackNode;if(z0()&&u.callbackNode!==y)return null;var N=ea;return N=ft(u,u===La?N:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),N===0?null:(dO(u,N,f),TO(u,M()),u.callbackNode!=null&&u.callbackNode===y?EO.bind(null,u):null)}function kO(u,f){if(z0())return null;dO(u,f,!0)}function RZ(){QZ(function(){(fa&6)!==0?Me(se,$Z):AO()})}function dC(){if(tc===0){var u=Qu;u===0&&(u=ge,ge<<=1,(ge&261888)===0&&(ge=256)),tc=u}return tc}function LO(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Kx(""+u)}function PO(u,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,u.id&&y.setAttribute("form",u.id),f.parentNode.insertBefore(y,f),u=new FormData(u),y.parentNode.removeChild(y),u}function zZ(u,f,y,N,k){if(f==="submit"&&y&&y.stateNode===k){var P=LO((k[ht]||null).action),Z=N.submitter;Z&&(f=(f=Z[ht]||null)?LO(f.formAction):Z.getAttribute("formAction"),f!==null&&(P=f,Z=null));var fe=new Jx("action","action",null,N,k);u.push({event:fe,listeners:[{instance:null,listener:function(){if(N.defaultPrevented){if(tc!==0){var Pe=Z?PO(k,Z):new FormData(k);k1(y,{pending:!0,data:Pe,method:k.method,action:P},null,Pe)}}else typeof P=="function"&&(fe.preventDefault(),Pe=Z?PO(k,Z):new FormData(k),k1(y,{pending:!0,data:Pe,method:k.method,action:P},P,Pe))},currentTarget:k}]})}}for(var uC=0;uC<qj.length;uC++){var mC=qj[uC],UZ=mC.toLowerCase(),FZ=mC[0].toUpperCase()+mC.slice(1);mi(UZ,"on"+FZ)}mi(cD,"onAnimationEnd"),mi(dD,"onAnimationIteration"),mi(uD,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(nZ,"onTransitionRun"),mi(sZ,"onTransitionStart"),mi(rZ,"onTransitionCancel"),mi(mD,"onTransitionEnd"),Iu("onMouseEnter",["mouseout","mouseover"]),Iu("onMouseLeave",["mouseout","mouseover"]),Iu("onPointerEnter",["pointerout","pointerover"]),Iu("onPointerLeave",["pointerout","pointerover"]),qc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qc("onBeforeInput",["compositionend","keypress","textInput","paste"]),qc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BZ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ch));function DO(u,f){f=(f&4)!==0;for(var y=0;y<u.length;y++){var N=u[y],k=N.event;N=N.listeners;e:{var P=void 0;if(f)for(var Z=N.length-1;0<=Z;Z--){var fe=N[Z],Pe=fe.instance,Qe=fe.currentTarget;if(fe=fe.listener,Pe!==P&&k.isPropagationStopped())break e;P=fe,k.currentTarget=Qe;try{P(k)}catch(it){a0(it)}k.currentTarget=null,P=Pe}else for(Z=0;Z<N.length;Z++){if(fe=N[Z],Pe=fe.instance,Qe=fe.currentTarget,fe=fe.listener,Pe!==P&&k.isPropagationStopped())break e;P=fe,k.currentTarget=Qe;try{P(k)}catch(it){a0(it)}k.currentTarget=null,P=Pe}}}}function Jt(u,f){var y=f[gt];y===void 0&&(y=f[gt]=new Set);var N=u+"__bubble";y.has(N)||(OO(f,u,2,!1),y.add(N))}function fC(u,f,y){var N=0;f&&(N|=4),OO(y,u,N,f)}var B0="_reactListening"+Math.random().toString(36).slice(2);function hC(u){if(!u[B0]){u[B0]=!0,AP.forEach(function(y){y!=="selectionchange"&&(BZ.has(y)||fC(y,!1,u),fC(y,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[B0]||(f[B0]=!0,fC("selectionchange",!1,f))}}function OO(u,f,y,N){switch(c5(f)){case 2:var k=pJ;break;case 8:k=xJ;break;default:k=EC}y=k.bind(null,f,y,u),k=void 0,!Oj||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(k=!0),N?k!==void 0?u.addEventListener(f,y,{capture:!0,passive:k}):u.addEventListener(f,y,!0):k!==void 0?u.addEventListener(f,y,{passive:k}):u.addEventListener(f,y,!1)}function gC(u,f,y,N,k){var P=N;if((f&1)===0&&(f&2)===0&&N!==null)e:for(;;){if(N===null)return;var Z=N.tag;if(Z===3||Z===4){var fe=N.stateNode.containerInfo;if(fe===k)break;if(Z===4)for(Z=N.return;Z!==null;){var Pe=Z.tag;if((Pe===3||Pe===4)&&Z.stateNode.containerInfo===k)return;Z=Z.return}for(;fe!==null;){if(Z=ir(fe),Z===null)return;if(Pe=Z.tag,Pe===5||Pe===6||Pe===26||Pe===27){N=P=Z;continue e}fe=fe.parentNode}}N=N.return}zP(function(){var Qe=P,it=Pj(y),ut=[];e:{var Ze=fD.get(u);if(Ze!==void 0){var rt=Jx,At=u;switch(u){case"keypress":if(Xx(y)===0)break e;case"keydown":case"keyup":rt=MX;break;case"focusin":At="focus",rt=Rj;break;case"focusout":At="blur",rt=Rj;break;case"beforeblur":case"afterblur":rt=Rj;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=BP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=jX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=RX;break;case cD:case dD:case uD:rt=_X;break;case mD:rt=UX;break;case"scroll":case"scrollend":rt=wX;break;case"wheel":rt=BX;break;case"copy":case"cut":case"paste":rt=TX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=GP;break;case"toggle":case"beforetoggle":rt=GX}var Rt=(f&4)!==0,Ea=!Rt&&(u==="scroll"||u==="scrollend"),Ge=Rt?Ze!==null?Ze+"Capture":null:Ze;Rt=[];for(var Re=Qe,Ke;Re!==null;){var ct=Re;if(Ke=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ke===null||Ge===null||(ct=Wf(Re,Ge),ct!=null&&Rt.push(Sh(Re,ct,Ke))),Ea)break;Re=Re.return}0<Rt.length&&(Ze=new rt(Ze,At,null,y,it),ut.push({event:Ze,listeners:Rt}))}}if((f&7)===0){e:{if(Ze=u==="mouseover"||u==="pointerover",rt=u==="mouseout"||u==="pointerout",Ze&&y!==Lj&&(At=y.relatedTarget||y.fromElement)&&(ir(At)||At[_e]))break e;if((rt||Ze)&&(Ze=it.window===it?it:(Ze=it.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,rt?(At=y.relatedTarget||y.toElement,rt=Qe,At=At?ir(At):null,At!==null&&(Ea=i(At),Rt=At.tag,At!==Ea||Rt!==5&&Rt!==27&&Rt!==6)&&(At=null)):(rt=null,At=Qe),rt!==At)){if(Rt=BP,ct="onMouseLeave",Ge="onMouseEnter",Re="mouse",(u==="pointerout"||u==="pointerover")&&(Rt=GP,ct="onPointerLeave",Ge="onPointerEnter",Re="pointer"),Ea=rt==null?Ze:Vf(rt),Ke=At==null?Ze:Vf(At),Ze=new Rt(ct,Re+"leave",rt,y,it),Ze.target=Ea,Ze.relatedTarget=Ke,ct=null,ir(it)===Qe&&(Rt=new Rt(Ge,Re+"enter",At,y,it),Rt.target=Ke,Rt.relatedTarget=Ea,ct=Rt),Ea=ct,rt&&At)t:{for(Rt=HZ,Ge=rt,Re=At,Ke=0,ct=Ge;ct;ct=Rt(ct))Ke++;ct=0;for(var Mt=Re;Mt;Mt=Rt(Mt))ct++;for(;0<Ke-ct;)Ge=Rt(Ge),Ke--;for(;0<ct-Ke;)Re=Rt(Re),ct--;for(;Ke--;){if(Ge===Re||Re!==null&&Ge===Re.alternate){Rt=Ge;break t}Ge=Rt(Ge),Re=Rt(Re)}Rt=null}else Rt=null;rt!==null&&MO(ut,Ze,rt,Rt,!1),At!==null&&Ea!==null&&MO(ut,Ea,At,Rt,!0)}}e:{if(Ze=Qe?Vf(Qe):window,rt=Ze.nodeName&&Ze.nodeName.toLowerCase(),rt==="select"||rt==="input"&&Ze.type==="file")var oa=ZP;else if(QP(Ze))if(JP)oa=eZ;else{oa=ZX;var kt=XX}else rt=Ze.nodeName,!rt||rt.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?Qe&&kj(Qe.elementType)&&(oa=ZP):oa=JX;if(oa&&(oa=oa(u,Qe))){XP(ut,oa,y,it);break e}kt&&kt(u,Ze,Qe),u==="focusout"&&Qe&&Ze.type==="number"&&Qe.memoizedProps.value!=null&&Ej(Ze,"number",Ze.value)}switch(kt=Qe?Vf(Qe):window,u){case"focusin":(QP(kt)||kt.contentEditable==="true")&&(Bu=kt,Gj=Qe,eh=null);break;case"focusout":eh=Gj=Bu=null;break;case"mousedown":Vj=!0;break;case"contextmenu":case"mouseup":case"dragend":Vj=!1,lD(ut,y,it);break;case"selectionchange":if(aZ)break;case"keydown":case"keyup":lD(ut,y,it)}var qt;if(Uj)e:{switch(u){case"compositionstart":var ta="onCompositionStart";break e;case"compositionend":ta="onCompositionEnd";break e;case"compositionupdate":ta="onCompositionUpdate";break e}ta=void 0}else Fu?YP(u,y)&&(ta="onCompositionEnd"):u==="keydown"&&y.keyCode===229&&(ta="onCompositionStart");ta&&(VP&&y.locale!=="ko"&&(Fu||ta!=="onCompositionStart"?ta==="onCompositionEnd"&&Fu&&(qt=UP()):(zo=it,Mj="value"in zo?zo.value:zo.textContent,Fu=!0)),kt=H0(Qe,ta),0<kt.length&&(ta=new HP(ta,u,null,y,it),ut.push({event:ta,listeners:kt}),qt?ta.data=qt:(qt=KP(y),qt!==null&&(ta.data=qt)))),(qt=WX?qX(u,y):YX(u,y))&&(ta=H0(Qe,"onBeforeInput"),0<ta.length&&(kt=new HP("onBeforeInput","beforeinput",null,y,it),ut.push({event:kt,listeners:ta}),kt.data=qt)),zZ(ut,u,Qe,y,it)}DO(ut,f)})}function Sh(u,f,y){return{instance:u,listener:f,currentTarget:y}}function H0(u,f){for(var y=f+"Capture",N=[];u!==null;){var k=u,P=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||P===null||(k=Wf(u,y),k!=null&&N.unshift(Sh(u,k,P)),k=Wf(u,f),k!=null&&N.push(Sh(u,k,P))),u.tag===3)return N;u=u.return}return[]}function HZ(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function MO(u,f,y,N,k){for(var P=f._reactName,Z=[];y!==null&&y!==N;){var fe=y,Pe=fe.alternate,Qe=fe.stateNode;if(fe=fe.tag,Pe!==null&&Pe===N)break;fe!==5&&fe!==26&&fe!==27||Qe===null||(Pe=Qe,k?(Qe=Wf(y,P),Qe!=null&&Z.unshift(Sh(y,Qe,Pe))):k||(Qe=Wf(y,P),Qe!=null&&Z.push(Sh(y,Qe,Pe)))),y=y.return}Z.length!==0&&u.push({event:f,listeners:Z})}var GZ=/\r\n?/g,VZ=/\u0000|\uFFFD/g;function IO(u){return(typeof u=="string"?u:""+u).replace(GZ,`
`).replace(VZ,"")}function $O(u,f){return f=IO(f),IO(u)===f}function Ta(u,f,y,N,k,P){switch(y){case"children":typeof N=="string"?f==="body"||f==="textarea"&&N===""||Ru(u,N):(typeof N=="number"||typeof N=="bigint")&&f!=="body"&&Ru(u,""+N);break;case"className":qx(u,"class",N);break;case"tabIndex":qx(u,"tabindex",N);break;case"dir":case"role":case"viewBox":case"width":case"height":qx(u,y,N);break;case"style":$P(u,N,P);break;case"data":if(f!=="object"){qx(u,"data",N);break}case"src":case"href":if(N===""&&(f!=="a"||y!=="href")){u.removeAttribute(y);break}if(N==null||typeof N=="function"||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(y);break}N=Kx(""+N),u.setAttribute(y,N);break;case"action":case"formAction":if(typeof N=="function"){u.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(y==="formAction"?(f!=="input"&&Ta(u,f,"name",k.name,k,null),Ta(u,f,"formEncType",k.formEncType,k,null),Ta(u,f,"formMethod",k.formMethod,k,null),Ta(u,f,"formTarget",k.formTarget,k,null)):(Ta(u,f,"encType",k.encType,k,null),Ta(u,f,"method",k.method,k,null),Ta(u,f,"target",k.target,k,null)));if(N==null||typeof N=="symbol"||typeof N=="boolean"){u.removeAttribute(y);break}N=Kx(""+N),u.setAttribute(y,N);break;case"onClick":N!=null&&(u.onclick=Nl);break;case"onScroll":N!=null&&Jt("scroll",u);break;case"onScrollEnd":N!=null&&Jt("scrollend",u);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(s(61));if(y=N.__html,y!=null){if(k.children!=null)throw Error(s(60));u.innerHTML=y}}break;case"multiple":u.multiple=N&&typeof N!="function"&&typeof N!="symbol";break;case"muted":u.muted=N&&typeof N!="function"&&typeof N!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(N==null||typeof N=="function"||typeof N=="boolean"||typeof N=="symbol"){u.removeAttribute("xlink:href");break}y=Kx(""+N),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,""+N):u.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":N&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,""):u.removeAttribute(y);break;case"capture":case"download":N===!0?u.setAttribute(y,""):N!==!1&&N!=null&&typeof N!="function"&&typeof N!="symbol"?u.setAttribute(y,N):u.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":N!=null&&typeof N!="function"&&typeof N!="symbol"&&!isNaN(N)&&1<=N?u.setAttribute(y,N):u.removeAttribute(y);break;case"rowSpan":case"start":N==null||typeof N=="function"||typeof N=="symbol"||isNaN(N)?u.removeAttribute(y):u.setAttribute(y,N);break;case"popover":Jt("beforetoggle",u),Jt("toggle",u),Wx(u,"popover",N);break;case"xlinkActuate":wl(u,"http://www.w3.org/1999/xlink","xlink:actuate",N);break;case"xlinkArcrole":wl(u,"http://www.w3.org/1999/xlink","xlink:arcrole",N);break;case"xlinkRole":wl(u,"http://www.w3.org/1999/xlink","xlink:role",N);break;case"xlinkShow":wl(u,"http://www.w3.org/1999/xlink","xlink:show",N);break;case"xlinkTitle":wl(u,"http://www.w3.org/1999/xlink","xlink:title",N);break;case"xlinkType":wl(u,"http://www.w3.org/1999/xlink","xlink:type",N);break;case"xmlBase":wl(u,"http://www.w3.org/XML/1998/namespace","xml:base",N);break;case"xmlLang":wl(u,"http://www.w3.org/XML/1998/namespace","xml:lang",N);break;case"xmlSpace":wl(u,"http://www.w3.org/XML/1998/namespace","xml:space",N);break;case"is":Wx(u,"is",N);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=bX.get(y)||y,Wx(u,y,N))}}function pC(u,f,y,N,k,P){switch(y){case"style":$P(u,N,P);break;case"dangerouslySetInnerHTML":if(N!=null){if(typeof N!="object"||!("__html"in N))throw Error(s(61));if(y=N.__html,y!=null){if(k.children!=null)throw Error(s(60));u.innerHTML=y}}break;case"children":typeof N=="string"?Ru(u,N):(typeof N=="number"||typeof N=="bigint")&&Ru(u,""+N);break;case"onScroll":N!=null&&Jt("scroll",u);break;case"onScrollEnd":N!=null&&Jt("scrollend",u);break;case"onClick":N!=null&&(u.onclick=Nl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!TP.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(k=y.endsWith("Capture"),f=y.slice(2,k?y.length-7:void 0),P=u[ht]||null,P=P!=null?P[y]:null,typeof P=="function"&&u.removeEventListener(f,P,k),typeof N=="function")){typeof P!="function"&&P!==null&&(y in u?u[y]=null:u.hasAttribute(y)&&u.removeAttribute(y)),u.addEventListener(f,N,k);break e}y in u?u[y]=N:N===!0?u.setAttribute(y,""):Wx(u,y,N)}}}function rs(u,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Jt("error",u),Jt("load",u);var N=!1,k=!1,P;for(P in y)if(y.hasOwnProperty(P)){var Z=y[P];if(Z!=null)switch(P){case"src":N=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,f));default:Ta(u,f,P,Z,y,null)}}k&&Ta(u,f,"srcSet",y.srcSet,y,null),N&&Ta(u,f,"src",y.src,y,null);return;case"input":Jt("invalid",u);var fe=P=Z=k=null,Pe=null,Qe=null;for(N in y)if(y.hasOwnProperty(N)){var it=y[N];if(it!=null)switch(N){case"name":k=it;break;case"type":Z=it;break;case"checked":Pe=it;break;case"defaultChecked":Qe=it;break;case"value":P=it;break;case"defaultValue":fe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(s(137,f));break;default:Ta(u,f,N,it,y,null)}}DP(u,P,fe,Pe,Qe,Z,k,!1);return;case"select":Jt("invalid",u),N=Z=P=null;for(k in y)if(y.hasOwnProperty(k)&&(fe=y[k],fe!=null))switch(k){case"value":P=fe;break;case"defaultValue":Z=fe;break;case"multiple":N=fe;default:Ta(u,f,k,fe,y,null)}f=P,y=Z,u.multiple=!!N,f!=null?$u(u,!!N,f,!1):y!=null&&$u(u,!!N,y,!0);return;case"textarea":Jt("invalid",u),P=k=N=null;for(Z in y)if(y.hasOwnProperty(Z)&&(fe=y[Z],fe!=null))switch(Z){case"value":N=fe;break;case"defaultValue":k=fe;break;case"children":P=fe;break;case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(91));break;default:Ta(u,f,Z,fe,y,null)}MP(u,N,k,P);return;case"option":for(Pe in y)if(y.hasOwnProperty(Pe)&&(N=y[Pe],N!=null))switch(Pe){case"selected":u.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Ta(u,f,Pe,N,y,null)}return;case"dialog":Jt("beforetoggle",u),Jt("toggle",u),Jt("cancel",u),Jt("close",u);break;case"iframe":case"object":Jt("load",u);break;case"video":case"audio":for(N=0;N<Ch.length;N++)Jt(Ch[N],u);break;case"image":Jt("error",u),Jt("load",u);break;case"details":Jt("toggle",u);break;case"embed":case"source":case"link":Jt("error",u),Jt("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Qe in y)if(y.hasOwnProperty(Qe)&&(N=y[Qe],N!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,f));default:Ta(u,f,Qe,N,y,null)}return;default:if(kj(f)){for(it in y)y.hasOwnProperty(it)&&(N=y[it],N!==void 0&&pC(u,f,it,N,y,void 0));return}}for(fe in y)y.hasOwnProperty(fe)&&(N=y[fe],N!=null&&Ta(u,f,fe,N,y,null))}function WZ(u,f,y,N){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,P=null,Z=null,fe=null,Pe=null,Qe=null,it=null;for(rt in y){var ut=y[rt];if(y.hasOwnProperty(rt)&&ut!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Pe=ut;default:N.hasOwnProperty(rt)||Ta(u,f,rt,null,N,ut)}}for(var Ze in N){var rt=N[Ze];if(ut=y[Ze],N.hasOwnProperty(Ze)&&(rt!=null||ut!=null))switch(Ze){case"type":P=rt;break;case"name":k=rt;break;case"checked":Qe=rt;break;case"defaultChecked":it=rt;break;case"value":Z=rt;break;case"defaultValue":fe=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,f));break;default:rt!==ut&&Ta(u,f,Ze,rt,N,ut)}}Tj(u,Z,fe,Pe,Qe,it,P,k);return;case"select":rt=Z=fe=Ze=null;for(P in y)if(Pe=y[P],y.hasOwnProperty(P)&&Pe!=null)switch(P){case"value":break;case"multiple":rt=Pe;default:N.hasOwnProperty(P)||Ta(u,f,P,null,N,Pe)}for(k in N)if(P=N[k],Pe=y[k],N.hasOwnProperty(k)&&(P!=null||Pe!=null))switch(k){case"value":Ze=P;break;case"defaultValue":fe=P;break;case"multiple":Z=P;default:P!==Pe&&Ta(u,f,k,P,N,Pe)}f=fe,y=Z,N=rt,Ze!=null?$u(u,!!y,Ze,!1):!!N!=!!y&&(f!=null?$u(u,!!y,f,!0):$u(u,!!y,y?[]:"",!1));return;case"textarea":rt=Ze=null;for(fe in y)if(k=y[fe],y.hasOwnProperty(fe)&&k!=null&&!N.hasOwnProperty(fe))switch(fe){case"value":break;case"children":break;default:Ta(u,f,fe,null,N,k)}for(Z in N)if(k=N[Z],P=y[Z],N.hasOwnProperty(Z)&&(k!=null||P!=null))switch(Z){case"value":Ze=k;break;case"defaultValue":rt=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:k!==P&&Ta(u,f,Z,k,N,P)}OP(u,Ze,rt);return;case"option":for(var At in y)if(Ze=y[At],y.hasOwnProperty(At)&&Ze!=null&&!N.hasOwnProperty(At))switch(At){case"selected":u.selected=!1;break;default:Ta(u,f,At,null,N,Ze)}for(Pe in N)if(Ze=N[Pe],rt=y[Pe],N.hasOwnProperty(Pe)&&Ze!==rt&&(Ze!=null||rt!=null))switch(Pe){case"selected":u.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:Ta(u,f,Pe,Ze,N,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in y)Ze=y[Rt],y.hasOwnProperty(Rt)&&Ze!=null&&!N.hasOwnProperty(Rt)&&Ta(u,f,Rt,null,N,Ze);for(Qe in N)if(Ze=N[Qe],rt=y[Qe],N.hasOwnProperty(Qe)&&Ze!==rt&&(Ze!=null||rt!=null))switch(Qe){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(s(137,f));break;default:Ta(u,f,Qe,Ze,N,rt)}return;default:if(kj(f)){for(var Ea in y)Ze=y[Ea],y.hasOwnProperty(Ea)&&Ze!==void 0&&!N.hasOwnProperty(Ea)&&pC(u,f,Ea,void 0,N,Ze);for(it in N)Ze=N[it],rt=y[it],!N.hasOwnProperty(it)||Ze===rt||Ze===void 0&&rt===void 0||pC(u,f,it,Ze,N,rt);return}}for(var Ge in y)Ze=y[Ge],y.hasOwnProperty(Ge)&&Ze!=null&&!N.hasOwnProperty(Ge)&&Ta(u,f,Ge,null,N,Ze);for(ut in N)Ze=N[ut],rt=y[ut],!N.hasOwnProperty(ut)||Ze===rt||Ze==null&&rt==null||Ta(u,f,ut,Ze,N,rt)}function RO(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qZ(){if(typeof performance.getEntriesByType=="function"){for(var u=0,f=0,y=performance.getEntriesByType("resource"),N=0;N<y.length;N++){var k=y[N],P=k.transferSize,Z=k.initiatorType,fe=k.duration;if(P&&fe&&RO(Z)){for(Z=0,fe=k.responseEnd,N+=1;N<y.length;N++){var Pe=y[N],Qe=Pe.startTime;if(Qe>fe)break;var it=Pe.transferSize,ut=Pe.initiatorType;it&&RO(ut)&&(Pe=Pe.responseEnd,Z+=it*(Pe<fe?1:(fe-Qe)/(Pe-Qe)))}if(--N,f+=8*(P+Z)/(k.duration/1e3),u++,10<u)break}}if(0<u)return f/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var xC=null,yC=null;function G0(u){return u.nodeType===9?u:u.ownerDocument}function zO(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function UO(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function bC(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var vC=null;function YZ(){var u=window.event;return u&&u.type==="popstate"?u===vC?!1:(vC=u,!0):(vC=null,!1)}var FO=typeof setTimeout=="function"?setTimeout:void 0,KZ=typeof clearTimeout=="function"?clearTimeout:void 0,BO=typeof Promise=="function"?Promise:void 0,QZ=typeof queueMicrotask=="function"?queueMicrotask:typeof BO<"u"?function(u){return BO.resolve(null).then(u).catch(XZ)}:FO;function XZ(u){setTimeout(function(){throw u})}function ac(u){return u==="head"}function HO(u,f){var y=f,N=0;do{var k=y.nextSibling;if(u.removeChild(y),k&&k.nodeType===8)if(y=k.data,y==="/$"||y==="/&"){if(N===0){u.removeChild(k),gm(f);return}N--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")N++;else if(y==="html")_h(u.ownerDocument.documentElement);else if(y==="head"){y=u.ownerDocument.head,_h(y);for(var P=y.firstChild;P;){var Z=P.nextSibling,fe=P.nodeName;P[rr]||fe==="SCRIPT"||fe==="STYLE"||fe==="LINK"&&P.rel.toLowerCase()==="stylesheet"||y.removeChild(P),P=Z}}else y==="body"&&_h(u.ownerDocument.body);y=k}while(y);gm(f)}function GO(u,f){var y=u;u=0;do{var N=y.nextSibling;if(y.nodeType===1?f?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(f?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),N&&N.nodeType===8)if(y=N.data,y==="/$"){if(u===0)break;u--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||u++;y=N}while(y)}function wC(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":wC(y),ts(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}u.removeChild(y)}}function ZZ(u,f,y,N){for(;u.nodeType===1;){var k=y;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!N&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(N){if(!u[rr])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(P=u.getAttribute("rel"),P==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(P!==k.rel||u.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||u.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||u.getAttribute("title")!==(k.title==null?null:k.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(P=u.getAttribute("src"),(P!==(k.src==null?null:k.src)||u.getAttribute("type")!==(k.type==null?null:k.type)||u.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&P&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var P=k.name==null?null:""+k.name;if(k.type==="hidden"&&u.getAttribute("name")===P)return u}else return u;if(u=Rr(u.nextSibling),u===null)break}return null}function JZ(u,f,y){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!y||(u=Rr(u.nextSibling),u===null))return null;return u}function VO(u,f){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!f||(u=Rr(u.nextSibling),u===null))return null;return u}function NC(u){return u.data==="$?"||u.data==="$~"}function jC(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function eJ(u,f){var y=u.ownerDocument;if(u.data==="$~")u._reactRetry=f;else if(u.data!=="$?"||y.readyState!=="loading")f();else{var N=function(){f(),y.removeEventListener("DOMContentLoaded",N)};y.addEventListener("DOMContentLoaded",N),u._reactRetry=N}}function Rr(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"||f==="F!"||f==="F")break;if(f==="/$"||f==="/&")return null}}return u}var CC=null;function WO(u){u=u.nextSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="/$"||y==="/&"){if(f===0)return Rr(u.nextSibling);f--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||f++}u=u.nextSibling}return null}function qO(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var y=u.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(f===0)return u;f--}else y!=="/$"&&y!=="/&"||f++}u=u.previousSibling}return null}function YO(u,f,y){switch(f=G0(y),u){case"html":if(u=f.documentElement,!u)throw Error(s(452));return u;case"head":if(u=f.head,!u)throw Error(s(453));return u;case"body":if(u=f.body,!u)throw Error(s(454));return u;default:throw Error(s(451))}}function _h(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);ts(u)}var zr=new Map,KO=new Set;function V0(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Rl=q.d;q.d={f:tJ,r:aJ,D:nJ,C:sJ,L:rJ,m:iJ,X:oJ,S:lJ,M:cJ};function tJ(){var u=Rl.f(),f=I0();return u||f}function aJ(u){var f=Ro(u);f!==null&&f.tag===5&&f.type==="form"?m3(f):Rl.r(u)}var mm=typeof document>"u"?null:document;function QO(u,f,y){var N=mm;if(N&&typeof f=="string"&&f){var k=Lr(f);k='link[rel="'+u+'"][href="'+k+'"]',typeof y=="string"&&(k+='[crossorigin="'+y+'"]'),KO.has(k)||(KO.add(k),u={rel:u,crossOrigin:y,href:f},N.querySelector(k)===null&&(f=N.createElement("link"),rs(f,"link",u),Vn(f),N.head.appendChild(f)))}}function nJ(u){Rl.D(u),QO("dns-prefetch",u,null)}function sJ(u,f){Rl.C(u,f),QO("preconnect",u,f)}function rJ(u,f,y){Rl.L(u,f,y);var N=mm;if(N&&u&&f){var k='link[rel="preload"][as="'+Lr(f)+'"]';f==="image"&&y&&y.imageSrcSet?(k+='[imagesrcset="'+Lr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(k+='[imagesizes="'+Lr(y.imageSizes)+'"]')):k+='[href="'+Lr(u)+'"]';var P=k;switch(f){case"style":P=fm(u);break;case"script":P=hm(u)}zr.has(P)||(u=h({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:u,as:f},y),zr.set(P,u),N.querySelector(k)!==null||f==="style"&&N.querySelector(Ah(P))||f==="script"&&N.querySelector(Th(P))||(f=N.createElement("link"),rs(f,"link",u),Vn(f),N.head.appendChild(f)))}}function iJ(u,f){Rl.m(u,f);var y=mm;if(y&&u){var N=f&&typeof f.as=="string"?f.as:"script",k='link[rel="modulepreload"][as="'+Lr(N)+'"][href="'+Lr(u)+'"]',P=k;switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=hm(u)}if(!zr.has(P)&&(u=h({rel:"modulepreload",href:u},f),zr.set(P,u),y.querySelector(k)===null)){switch(N){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Th(P)))return}N=y.createElement("link"),rs(N,"link",u),Vn(N),y.head.appendChild(N)}}}function lJ(u,f,y){Rl.S(u,f,y);var N=mm;if(N&&u){var k=Mu(N).hoistableStyles,P=fm(u);f=f||"default";var Z=k.get(P);if(!Z){var fe={loading:0,preload:null};if(Z=N.querySelector(Ah(P)))fe.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},y),(y=zr.get(P))&&SC(u,y);var Pe=Z=N.createElement("link");Vn(Pe),rs(Pe,"link",u),Pe._p=new Promise(function(Qe,it){Pe.onload=Qe,Pe.onerror=it}),Pe.addEventListener("load",function(){fe.loading|=1}),Pe.addEventListener("error",function(){fe.loading|=2}),fe.loading|=4,W0(Z,f,N)}Z={type:"stylesheet",instance:Z,count:1,state:fe},k.set(P,Z)}}}function oJ(u,f){Rl.X(u,f);var y=mm;if(y&&u){var N=Mu(y).hoistableScripts,k=hm(u),P=N.get(k);P||(P=y.querySelector(Th(k)),P||(u=h({src:u,async:!0},f),(f=zr.get(k))&&_C(u,f),P=y.createElement("script"),Vn(P),rs(P,"link",u),y.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},N.set(k,P))}}function cJ(u,f){Rl.M(u,f);var y=mm;if(y&&u){var N=Mu(y).hoistableScripts,k=hm(u),P=N.get(k);P||(P=y.querySelector(Th(k)),P||(u=h({src:u,async:!0,type:"module"},f),(f=zr.get(k))&&_C(u,f),P=y.createElement("script"),Vn(P),rs(P,"link",u),y.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},N.set(k,P))}}function XO(u,f,y,N){var k=(k=Ae.current)?V0(k):null;if(!k)throw Error(s(446));switch(u){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=fm(y.href),y=Mu(k).hoistableStyles,N=y.get(f),N||(N={type:"style",instance:null,count:0,state:null},y.set(f,N)),N):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){u=fm(y.href);var P=Mu(k).hoistableStyles,Z=P.get(u);if(Z||(k=k.ownerDocument||k,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(u,Z),(P=k.querySelector(Ah(u)))&&!P._p&&(Z.instance=P,Z.state.loading=5),zr.has(u)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},zr.set(u,y),P||dJ(k,u,y,Z.state))),f&&N===null)throw Error(s(528,""));return Z}if(f&&N!==null)throw Error(s(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=hm(y),y=Mu(k).hoistableScripts,N=y.get(f),N||(N={type:"script",instance:null,count:0,state:null},y.set(f,N)),N):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,u))}}function fm(u){return'href="'+Lr(u)+'"'}function Ah(u){return'link[rel="stylesheet"]['+u+"]"}function ZO(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function dJ(u,f,y,N){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?N.loading=1:(f=u.createElement("link"),N.preload=f,f.addEventListener("load",function(){return N.loading|=1}),f.addEventListener("error",function(){return N.loading|=2}),rs(f,"link",y),Vn(f),u.head.appendChild(f))}function hm(u){return'[src="'+Lr(u)+'"]'}function Th(u){return"script[async]"+u}function JO(u,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var N=u.querySelector('style[data-href~="'+Lr(y.href)+'"]');if(N)return f.instance=N,Vn(N),N;var k=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return N=(u.ownerDocument||u).createElement("style"),Vn(N),rs(N,"style",k),W0(N,y.precedence,u),f.instance=N;case"stylesheet":k=fm(y.href);var P=u.querySelector(Ah(k));if(P)return f.state.loading|=4,f.instance=P,Vn(P),P;N=ZO(y),(k=zr.get(k))&&SC(N,k),P=(u.ownerDocument||u).createElement("link"),Vn(P);var Z=P;return Z._p=new Promise(function(fe,Pe){Z.onload=fe,Z.onerror=Pe}),rs(P,"link",N),f.state.loading|=4,W0(P,y.precedence,u),f.instance=P;case"script":return P=hm(y.src),(k=u.querySelector(Th(P)))?(f.instance=k,Vn(k),k):(N=y,(k=zr.get(P))&&(N=h({},y),_C(N,k)),u=u.ownerDocument||u,k=u.createElement("script"),Vn(k),rs(k,"link",N),u.head.appendChild(k),f.instance=k);case"void":return null;default:throw Error(s(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(N=f.instance,f.state.loading|=4,W0(N,y.precedence,u));return f.instance}function W0(u,f,y){for(var N=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=N.length?N[N.length-1]:null,P=k,Z=0;Z<N.length;Z++){var fe=N[Z];if(fe.dataset.precedence===f)P=fe;else if(P!==k)break}P?P.parentNode.insertBefore(u,P.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(u,f.firstChild))}function SC(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function _C(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var q0=null;function e5(u,f,y){if(q0===null){var N=new Map,k=q0=new Map;k.set(y,N)}else k=q0,N=k.get(y),N||(N=new Map,k.set(y,N));if(N.has(u))return N;for(N.set(u,null),y=y.getElementsByTagName(u),k=0;k<y.length;k++){var P=y[k];if(!(P[rr]||P[nt]||u==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=P.getAttribute(f)||"";Z=u+Z;var fe=N.get(Z);fe?fe.push(P):N.set(Z,[P])}}return N}function t5(u,f,y){u=u.ownerDocument||u,u.head.insertBefore(y,f==="title"?u.querySelector("head > title"):null)}function uJ(u,f,y){if(y===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function a5(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function mJ(u,f,y,N){if(y.type==="stylesheet"&&(typeof N.media!="string"||matchMedia(N.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var k=fm(N.href),P=f.querySelector(Ah(k));if(P){f=P._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(u.count++,u=Y0.bind(u),f.then(u,u)),y.state.loading|=4,y.instance=P,Vn(P);return}P=f.ownerDocument||f,N=ZO(N),(k=zr.get(k))&&SC(N,k),P=P.createElement("link"),Vn(P);var Z=P;Z._p=new Promise(function(fe,Pe){Z.onload=fe,Z.onerror=Pe}),rs(P,"link",N),y.instance=P}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(y,f),(f=y.state.preload)&&(y.state.loading&3)===0&&(u.count++,y=Y0.bind(u),f.addEventListener("load",y),f.addEventListener("error",y))}}var AC=0;function fJ(u,f){return u.stylesheets&&u.count===0&&Q0(u,u.stylesheets),0<u.count||0<u.imgCount?function(y){var N=setTimeout(function(){if(u.stylesheets&&Q0(u,u.stylesheets),u.unsuspend){var P=u.unsuspend;u.unsuspend=null,P()}},6e4+f);0<u.imgBytes&&AC===0&&(AC=62500*qZ());var k=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Q0(u,u.stylesheets),u.unsuspend)){var P=u.unsuspend;u.unsuspend=null,P()}},(u.imgBytes>AC?50:800)+f);return u.unsuspend=y,function(){u.unsuspend=null,clearTimeout(N),clearTimeout(k)}}:null}function Y0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Q0(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var K0=null;function Q0(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,K0=new Map,f.forEach(hJ,u),K0=null,Y0.call(u))}function hJ(u,f){if(!(f.state.loading&4)){var y=K0.get(u);if(y)var N=y.get(null);else{y=new Map,K0.set(u,y);for(var k=u.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<k.length;P++){var Z=k[P];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(y.set(Z.dataset.precedence,Z),N=Z)}N&&y.set(null,N)}k=f.instance,Z=k.getAttribute("data-precedence"),P=y.get(Z)||N,P===N&&y.set(null,k),y.set(Z,k),this.count++,N=Y0.bind(this),k.addEventListener("load",N),k.addEventListener("error",N),P?P.parentNode.insertBefore(k,P.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(k,u.firstChild)),f.state.loading|=4}}var Eh={$$typeof:S,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function gJ(u,f,y,N,k,P,Z,fe,Pe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=N,this.onUncaughtError=k,this.onCaughtError=P,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Pe,this.incompleteTransitions=new Map}function n5(u,f,y,N,k,P,Z,fe,Pe,Qe,it,ut){return u=new gJ(u,f,y,Z,Pe,Qe,it,ut,fe),f=1,P===!0&&(f|=24),P=or(3,null,null,f),u.current=P,P.stateNode=u,f=i1(),f.refCount++,u.pooledCache=f,f.refCount++,P.memoizedState={element:N,isDehydrated:y,cache:f},d1(P),u}function s5(u){return u?(u=Vu,u):Vu}function r5(u,f,y,N,k,P){k=s5(k),N.context===null?N.context=k:N.pendingContext=k,N=Vo(f),N.payload={element:y},P=P===void 0?null:P,P!==null&&(N.callback=P),y=Wo(u,N,f),y!==null&&(Us(y,u,f),lh(y,u,f))}function i5(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function TC(u,f){i5(u,f),(u=u.alternate)&&i5(u,f)}function l5(u){if(u.tag===13||u.tag===31){var f=Xc(u,67108864);f!==null&&Us(f,u,67108864),TC(u,67108864)}}function o5(u){if(u.tag===13||u.tag===31){var f=fr();f=J(f);var y=Xc(u,f);y!==null&&Us(y,u,f),TC(u,f)}}var X0=!0;function pJ(u,f,y,N){var k=W.T;W.T=null;var P=q.p;try{q.p=2,EC(u,f,y,N)}finally{q.p=P,W.T=k}}function xJ(u,f,y,N){var k=W.T;W.T=null;var P=q.p;try{q.p=8,EC(u,f,y,N)}finally{q.p=P,W.T=k}}function EC(u,f,y,N){if(X0){var k=kC(N);if(k===null)gC(u,f,N,Z0,y),d5(u,N);else if(bJ(k,u,f,y,N))N.stopPropagation();else if(d5(u,N),f&4&&-1<yJ.indexOf(u)){for(;k!==null;){var P=Ro(k);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var Z=Fe(P.pendingLanes);if(Z!==0){var fe=P;for(fe.pendingLanes|=2,fe.entangledLanes|=2;Z;){var Pe=1<<31-$(Z);fe.entanglements[1]|=Pe,Z&=~Pe}Fi(P),(fa&6)===0&&(O0=M()+500,jh(0))}}break;case 31:case 13:fe=Xc(P,2),fe!==null&&Us(fe,P,2),I0(),TC(P,2)}if(P=kC(N),P===null&&gC(u,f,N,Z0,y),P===k)break;k=P}k!==null&&N.stopPropagation()}else gC(u,f,N,null,y)}}function kC(u){return u=Pj(u),LC(u)}var Z0=null;function LC(u){if(Z0=null,u=ir(u),u!==null){var f=i(u);if(f===null)u=null;else{var y=f.tag;if(y===13){if(u=l(f),u!==null)return u;u=null}else if(y===31){if(u=o(f),u!==null)return u;u=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Z0=u,null}function c5(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case se:return 2;case je:return 8;case We:case Ne:return 32;case qe:return 268435456;default:return 32}default:return 32}}var PC=!1,nc=null,sc=null,rc=null,kh=new Map,Lh=new Map,ic=[],yJ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d5(u,f){switch(u){case"focusin":case"focusout":nc=null;break;case"dragenter":case"dragleave":sc=null;break;case"mouseover":case"mouseout":rc=null;break;case"pointerover":case"pointerout":kh.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lh.delete(f.pointerId)}}function Ph(u,f,y,N,k,P){return u===null||u.nativeEvent!==P?(u={blockedOn:f,domEventName:y,eventSystemFlags:N,nativeEvent:P,targetContainers:[k]},f!==null&&(f=Ro(f),f!==null&&l5(f)),u):(u.eventSystemFlags|=N,f=u.targetContainers,k!==null&&f.indexOf(k)===-1&&f.push(k),u)}function bJ(u,f,y,N,k){switch(f){case"focusin":return nc=Ph(nc,u,f,y,N,k),!0;case"dragenter":return sc=Ph(sc,u,f,y,N,k),!0;case"mouseover":return rc=Ph(rc,u,f,y,N,k),!0;case"pointerover":var P=k.pointerId;return kh.set(P,Ph(kh.get(P)||null,u,f,y,N,k)),!0;case"gotpointercapture":return P=k.pointerId,Lh.set(P,Ph(Lh.get(P)||null,u,f,y,N,k)),!0}return!1}function u5(u){var f=ir(u.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=l(y),f!==null){u.blockedOn=f,Oe(u.priority,function(){o5(y)});return}}else if(f===31){if(f=o(y),f!==null){u.blockedOn=f,Oe(u.priority,function(){o5(y)});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){u.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}u.blockedOn=null}function J0(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var y=kC(u.nativeEvent);if(y===null){y=u.nativeEvent;var N=new y.constructor(y.type,y);Lj=N,y.target.dispatchEvent(N),Lj=null}else return f=Ro(y),f!==null&&l5(f),u.blockedOn=y,!1;f.shift()}return!0}function m5(u,f,y){J0(u)&&y.delete(f)}function vJ(){PC=!1,nc!==null&&J0(nc)&&(nc=null),sc!==null&&J0(sc)&&(sc=null),rc!==null&&J0(rc)&&(rc=null),kh.forEach(m5),Lh.forEach(m5)}function ey(u,f){u.blockedOn===f&&(u.blockedOn=null,PC||(PC=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vJ)))}var ty=null;function f5(u){ty!==u&&(ty=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ty===u&&(ty=null);for(var f=0;f<u.length;f+=3){var y=u[f],N=u[f+1],k=u[f+2];if(typeof N!="function"){if(LC(N||y)===null)continue;break}var P=Ro(y);P!==null&&(u.splice(f,3),f-=3,k1(P,{pending:!0,data:k,method:y.method,action:N},N,k))}}))}function gm(u){function f(Pe){return ey(Pe,u)}nc!==null&&ey(nc,u),sc!==null&&ey(sc,u),rc!==null&&ey(rc,u),kh.forEach(f),Lh.forEach(f);for(var y=0;y<ic.length;y++){var N=ic[y];N.blockedOn===u&&(N.blockedOn=null)}for(;0<ic.length&&(y=ic[0],y.blockedOn===null);)u5(y),y.blockedOn===null&&ic.shift();if(y=(u.ownerDocument||u).$$reactFormReplay,y!=null)for(N=0;N<y.length;N+=3){var k=y[N],P=y[N+1],Z=k[ht]||null;if(typeof P=="function")Z||f5(y);else if(Z){var fe=null;if(P&&P.hasAttribute("formAction")){if(k=P,Z=P[ht]||null)fe=Z.formAction;else if(LC(k)!==null)continue}else fe=Z.action;typeof fe=="function"?y[N+1]=fe:(y.splice(N,3),N-=3),f5(y)}}}function h5(){function u(P){P.canIntercept&&P.info==="react-transition"&&P.intercept({handler:function(){return new Promise(function(Z){return k=Z})},focusReset:"manual",scroll:"manual"})}function f(){k!==null&&(k(),k=null),N||setTimeout(y,20)}function y(){if(!N&&!navigation.transition){var P=navigation.currentEntry;P&&P.url!=null&&navigation.navigate(P.url,{state:P.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var N=!1,k=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",f),navigation.addEventListener("navigateerror",f),setTimeout(y,100),function(){N=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",f),navigation.removeEventListener("navigateerror",f),k!==null&&(k(),k=null)}}}function DC(u){this._internalRoot=u}ay.prototype.render=DC.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(s(409));var y=f.current,N=fr();r5(y,N,u,f,null,null)},ay.prototype.unmount=DC.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;r5(u.current,2,null,u,null,null),I0(),f[_e]=null}};function ay(u){this._internalRoot=u}ay.prototype.unstable_scheduleHydration=function(u){if(u){var f=oe();u={blockedOn:null,target:u,priority:f};for(var y=0;y<ic.length&&f!==0&&f<ic[y].priority;y++);ic.splice(y,0,u),y===0&&u5(u)}};var g5=t.version;if(g5!=="19.2.0")throw Error(s(527,g5,"19.2.0"));q.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(s(188)):(u=Object.keys(u).join(","),Error(s(268,u)));return u=c(f),u=u!==null?m(u):null,u=u===null?null:u.stateNode,u};var wJ={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ny.isDisabled&&ny.supportsFiber)try{at=ny.inject(wJ),ot=ny}catch{}}return Oh.createRoot=function(u,f){if(!r(u))throw Error(s(299));var y=!1,N="",k=N3,P=j3,Z=C3;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onUncaughtError!==void 0&&(k=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(Z=f.onRecoverableError)),f=n5(u,1,!1,null,null,y,N,null,k,P,Z,h5),u[_e]=f.current,hC(u),new DC(f)},Oh.hydrateRoot=function(u,f,y){if(!r(u))throw Error(s(299));var N=!1,k="",P=N3,Z=j3,fe=C3,Pe=null;return y!=null&&(y.unstable_strictMode===!0&&(N=!0),y.identifierPrefix!==void 0&&(k=y.identifierPrefix),y.onUncaughtError!==void 0&&(P=y.onUncaughtError),y.onCaughtError!==void 0&&(Z=y.onCaughtError),y.onRecoverableError!==void 0&&(fe=y.onRecoverableError),y.formState!==void 0&&(Pe=y.formState)),f=n5(u,1,!0,f,y??null,N,k,Pe,P,Z,fe,h5),f.context=s5(null),y=f.current,N=fr(),N=J(N),k=Vo(N),k.callback=null,Wo(y,k,N),y=N,f.current.lanes=y,st(f,y),Fi(f),u[_e]=f.current,hC(u),new ay(f)},Oh.version="19.2.0",Oh}var S5;function LJ(){if(S5)return IC.exports;S5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),IC.exports=kJ(),IC.exports}var PJ=LJ();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _5="popstate";function DJ(e={}){function t(s,r){let{pathname:i,search:l,hash:o}=s.location;return AA("",{pathname:i,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:Xg(r)}return MJ(t,n,null,e)}function Ka(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OJ(){return Math.random().toString(36).substring(2,10)}function A5(e,t){return{usr:e.state,key:e.key,idx:t}}function AA(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?jf(t):t,state:n,key:t&&t.key||s||OJ()}}function Xg({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function jf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function MJ(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,l=r.history,o="POP",d=null,c=m();c==null&&(c=0,l.replaceState({...l.state,idx:c},""));function m(){return(l.state||{idx:null}).idx}function h(){o="POP";let v=m(),j=v==null?null:v-c;c=v,d&&d({action:o,location:x.location,delta:j})}function p(v,j){o="PUSH";let C=AA(x.location,v,j);c=m()+1;let S=A5(C,c),_=x.createHref(C);try{l.pushState(S,"",_)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(_)}i&&d&&d({action:o,location:x.location,delta:1})}function b(v,j){o="REPLACE";let C=AA(x.location,v,j);c=m();let S=A5(C,c),_=x.createHref(C);l.replaceState(S,"",_),i&&d&&d({action:o,location:x.location,delta:0})}function w(v){return IJ(v)}let x={get action(){return o},get location(){return e(r,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(_5,h),d=v,()=>{r.removeEventListener(_5,h),d=null}},createHref(v){return t(r,v)},createURL:w,encodeLocation(v){let j=w(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:p,replace:b,go(v){return l.go(v)}};return x}function IJ(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ka(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Xg(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function JF(e,t,n="/"){return $J(e,t,n,!1)}function $J(e,t,n,s){let r=typeof t=="string"?jf(t):t,i=oo(r.pathname||"/",n);if(i==null)return null;let l=e8(e);RJ(l);let o=null;for(let d=0;o==null&&d<l.length;++d){let c=KJ(i);o=qJ(l[d],c,s)}return o}function e8(e,t=[],n=[],s="",r=!1){let i=(l,o,d=r,c)=>{let m={relativePath:c===void 0?l.path||"":c,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&d)return;Ka(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let h=so([s,m.relativePath]),p=n.concat(m);l.children&&l.children.length>0&&(Ka(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),e8(l.children,t,p,h,d)),!(l.path==null&&!l.index)&&t.push({path:h,score:VJ(h,l.index),routesMeta:p})};return e.forEach((l,o)=>{if(l.path===""||!l.path?.includes("?"))i(l,o);else for(let d of t8(l.path))i(l,o,!0,d)}),t}function t8(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let l=t8(s.join("/")),o=[];return o.push(...l.map(d=>d===""?i:[i,d].join("/"))),r&&o.push(...l),o.map(d=>e.startsWith("/")&&d===""?"/":d)}function RJ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WJ(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var zJ=/^:[\w-]+$/,UJ=3,FJ=2,BJ=1,HJ=10,GJ=-2,T5=e=>e==="*";function VJ(e,t){let n=e.split("/"),s=n.length;return n.some(T5)&&(s+=GJ),t&&(s+=FJ),n.filter(r=>!T5(r)).reduce((r,i)=>r+(zJ.test(i)?UJ:i===""?BJ:HJ),s)}function WJ(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function qJ(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",l=[];for(let o=0;o<s.length;++o){let d=s[o],c=o===s.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Ob({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},m),p=d.route;if(!h&&c&&n&&!s[s.length-1].route.index&&(h=Ob({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!h)return null;Object.assign(r,h.params),l.push({params:r,pathname:so([i,h.pathname]),pathnameBase:JJ(so([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=so([i,h.pathnameBase]))}return l}function Ob(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=YJ(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],l=i.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:s.reduce((c,{paramName:m,isOptional:h},p)=>{if(m==="*"){let w=o[p]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const b=o[p];return h&&!b?c[m]=void 0:c[m]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:l,pattern:e}}function YJ(e,t=!1,n=!0){Xr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,d)=>(s.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function KJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function oo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function QJ(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?jf(e):e;return{pathname:n?n.startsWith("/")?n:XJ(n,t):t,search:eee(s),hash:tee(r)}}function XJ(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function UC(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZJ(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function $E(e){let t=ZJ(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function RE(e,t,n,s=!1){let r;typeof e=="string"?r=jf(e):(r={...e},Ka(!r.pathname||!r.pathname.includes("?"),UC("?","pathname","search",r)),Ka(!r.pathname||!r.pathname.includes("#"),UC("#","pathname","hash",r)),Ka(!r.search||!r.search.includes("#"),UC("#","search","hash",r)));let i=e===""||r.pathname==="",l=i?"/":r.pathname,o;if(l==null)o=n;else{let h=t.length-1;if(!s&&l.startsWith("..")){let p=l.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}o=h>=0?t[h]:"/"}let d=QJ(r,o),c=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(c||m)&&(d.pathname+="/"),d}var so=e=>e.join("/").replace(/\/\/+/g,"/"),JJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eee=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tee=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function aee(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var a8=["POST","PUT","PATCH","DELETE"];new Set(a8);var nee=["GET",...a8];new Set(nee);var Cf=g.createContext(null);Cf.displayName="DataRouter";var aw=g.createContext(null);aw.displayName="DataRouterState";g.createContext(!1);var n8=g.createContext({isTransitioning:!1});n8.displayName="ViewTransition";var see=g.createContext(new Map);see.displayName="Fetchers";var ree=g.createContext(null);ree.displayName="Await";var Oi=g.createContext(null);Oi.displayName="Navigation";var Mp=g.createContext(null);Mp.displayName="Location";var ii=g.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var zE=g.createContext(null);zE.displayName="RouteError";function iee(e,{relative:t}={}){Ka(Sf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=g.useContext(Oi),{hash:r,pathname:i,search:l}=Ip(e,{relative:t}),o=i;return n!=="/"&&(o=i==="/"?n:so([n,i])),s.createHref({pathname:o,search:l,hash:r})}function Sf(){return g.useContext(Mp)!=null}function pa(){return Ka(Sf(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Mp).location}var s8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r8(e){g.useContext(Oi).static||g.useLayoutEffect(e)}function bt(){let{isDataRoute:e}=g.useContext(ii);return e?wee():lee()}function lee(){Ka(Sf(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Cf),{basename:t,navigator:n}=g.useContext(Oi),{matches:s}=g.useContext(ii),{pathname:r}=pa(),i=JSON.stringify($E(s)),l=g.useRef(!1);return r8(()=>{l.current=!0}),g.useCallback((d,c={})=>{if(Xr(l.current,s8),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=RE(d,JSON.parse(i),r,c.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:so([t,m.pathname])),(c.replace?n.replace:n.push)(m,c.state,c)},[t,n,i,r,e])}var oee=g.createContext(null);function cee(e){let t=g.useContext(ii).outlet;return g.useMemo(()=>t&&g.createElement(oee.Provider,{value:e},t),[t,e])}function Co(){let{matches:e}=g.useContext(ii),t=e[e.length-1];return t?t.params:{}}function Ip(e,{relative:t}={}){let{matches:n}=g.useContext(ii),{pathname:s}=pa(),r=JSON.stringify($E(n));return g.useMemo(()=>RE(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function dee(e,t){return i8(e,t)}function i8(e,t,n,s,r){Ka(Sf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=g.useContext(Oi),{matches:l}=g.useContext(ii),o=l[l.length-1],d=o?o.params:{},c=o?o.pathname:"/",m=o?o.pathnameBase:"/",h=o&&o.route;{let C=h&&h.path||"";l8(c,!h||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=pa(),b;if(t){let C=typeof t=="string"?jf(t):t;Ka(m==="/"||C.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),b=C}else b=p;let w=b.pathname||"/",x=w;if(m!=="/"){let C=m.replace(/^\//,"").split("/");x="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let v=JF(e,{pathname:x});Xr(h||v!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Xr(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=gee(v&&v.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:so([m,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:so([m,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,n,s,r);return t&&j?g.createElement(Mp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},j):j}function uee(){let e=vee(),t=aee(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:i},"ErrorBoundary")," or"," ",g.createElement("code",{style:i},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:r},n):null,l)}var mee=g.createElement(uee,null),fee=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(ii.Provider,{value:this.props.routeContext},g.createElement(zE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function hee({routeContext:e,match:t,children:n}){let s=g.useContext(Cf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(ii.Provider,{value:e},n)}function gee(e,t=[],n=null,s=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=n?.errors;if(l!=null){let c=i.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);Ka(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,d=-1;if(n)for(let c=0;c<i.length;c++){let m=i[c];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=c),m.route.id){let{loaderData:h,errors:p}=n,b=m.route.loader&&!h.hasOwnProperty(m.route.id)&&(!p||p[m.route.id]===void 0);if(m.route.lazy||b){o=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((c,m,h)=>{let p,b=!1,w=null,x=null;n&&(p=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||mee,o&&(d<0&&h===0?(l8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):d===h&&(b=!0,x=m.route.hydrateFallbackElement||null)));let v=t.concat(i.slice(0,h+1)),j=()=>{let C;return p?C=w:b?C=x:m.route.Component?C=g.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=c,g.createElement(hee,{match:m,routeContext:{outlet:c,matches:v,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?g.createElement(fee,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:j(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:s}):j()},null)}function UE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pee(e){let t=g.useContext(Cf);return Ka(t,UE(e)),t}function xee(e){let t=g.useContext(aw);return Ka(t,UE(e)),t}function yee(e){let t=g.useContext(ii);return Ka(t,UE(e)),t}function FE(e){let t=yee(e),n=t.matches[t.matches.length-1];return Ka(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function bee(){return FE("useRouteId")}function vee(){let e=g.useContext(zE),t=xee("useRouteError"),n=FE("useRouteError");return e!==void 0?e:t.errors?.[n]}function wee(){let{router:e}=pee("useNavigate"),t=FE("useNavigate"),n=g.useRef(!1);return r8(()=>{n.current=!0}),g.useCallback(async(r,i={})=>{Xr(n.current,s8),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var E5={};function l8(e,t,n){!t&&!E5[e]&&(E5[e]=!0,Xr(!1,n))}g.memo(Nee);function Nee({routes:e,future:t,state:n,unstable_onError:s}){return i8(e,void 0,n,s,t)}function xr({to:e,replace:t,state:n,relative:s}){Ka(Sf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=g.useContext(Oi);Xr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=g.useContext(ii),{pathname:l}=pa(),o=bt(),d=RE(e,$E(i),l,s==="path"),c=JSON.stringify(d);return g.useEffect(()=>{o(JSON.parse(c),{replace:t,state:n,relative:s})},[o,c,s,t,n]),null}function _f(e){return cee(e.context)}function mt(e){Ka(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jee({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1}){Ka(!Sf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=g.useMemo(()=>({basename:l,navigator:r,static:i,future:{}}),[l,r,i]);typeof n=="string"&&(n=jf(n));let{pathname:d="/",search:c="",hash:m="",state:h=null,key:p="default"}=n,b=g.useMemo(()=>{let w=oo(d,l);return w==null?null:{location:{pathname:w,search:c,hash:m,state:h,key:p},navigationType:s}},[l,d,c,m,h,p,s]);return Xr(b!=null,`<Router basename="${l}"> is not able to match the URL "${d}${c}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:g.createElement(Oi.Provider,{value:o},g.createElement(Mp.Provider,{children:t,value:b}))}function Cee({children:e,location:t}){return dee(TA(e),t)}function TA(e,t=[]){let n=[];return g.Children.forEach(e,(s,r)=>{if(!g.isValidElement(s))return;let i=[...t,r];if(s.type===g.Fragment){n.push.apply(n,TA(s.props.children,i));return}Ka(s.type===mt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ka(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=TA(s.props.children,i)),n.push(l)}),n}var gb="get",pb="application/x-www-form-urlencoded";function nw(e){return e!=null&&typeof e.tagName=="string"}function See(e){return nw(e)&&e.tagName.toLowerCase()==="button"}function _ee(e){return nw(e)&&e.tagName.toLowerCase()==="form"}function Aee(e){return nw(e)&&e.tagName.toLowerCase()==="input"}function Tee(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Eee(e,t){return e.button===0&&(!t||t==="_self")&&!Tee(e)}function EA(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function kee(e,t){let n=EA(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}var sy=null;function Lee(){if(sy===null)try{new FormData(document.createElement("form"),0),sy=!1}catch{sy=!0}return sy}var Pee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function FC(e){return e!=null&&!Pee.has(e)?(Xr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pb}"`),null):e}function Dee(e,t){let n,s,r,i,l;if(_ee(e)){let o=e.getAttribute("action");s=o?oo(o,t):null,n=e.getAttribute("method")||gb,r=FC(e.getAttribute("enctype"))||pb,i=new FormData(e)}else if(See(e)||Aee(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||o.getAttribute("action");if(s=d?oo(d,t):null,n=e.getAttribute("formmethod")||o.getAttribute("method")||gb,r=FC(e.getAttribute("formenctype"))||FC(o.getAttribute("enctype"))||pb,i=new FormData(o,e),!Lee()){let{name:c,type:m,value:h}=e;if(m==="image"){let p=c?`${c}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else c&&i.append(c,h)}}else{if(nw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=gb,s=null,r=pb,l=e}return i&&r==="text/plain"&&(l=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function BE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oee(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&oo(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function Mee(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Iee(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $ee(e,t,n){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let l=await Mee(i,n);return l.links?l.links():[]}return[]}));return Fee(s.flat(1).filter(Iee).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function k5(e,t,n,s,r,i){let l=(d,c)=>n[c]?d.route.id!==n[c].route.id:!0,o=(d,c)=>n[c].pathname!==d.pathname||n[c].route.path?.endsWith("*")&&n[c].params["*"]!==d.params["*"];return i==="assets"?t.filter((d,c)=>l(d,c)||o(d,c)):i==="data"?t.filter((d,c)=>{let m=s.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(l(d,c)||o(d,c))return!0;if(d.route.shouldRevalidate){let h=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Ree(e,t,{includeHydrateFallback:n}={}){return zee(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function zee(e){return[...new Set(e)]}function Uee(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function Fee(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Uee(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function o8(){let e=g.useContext(Cf);return BE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Bee(){let e=g.useContext(aw);return BE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var HE=g.createContext(void 0);HE.displayName="FrameworkContext";function c8(){let e=g.useContext(HE);return BE(e,"You must render this element inside a <HydratedRouter> element"),e}function Hee(e,t){let n=g.useContext(HE),[s,r]=g.useState(!1),[i,l]=g.useState(!1),{onFocus:o,onBlur:d,onMouseEnter:c,onMouseLeave:m,onTouchStart:h}=t,p=g.useRef(null);g.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let x=j=>{j.forEach(C=>{l(C.isIntersecting)})},v=new IntersectionObserver(x,{threshold:.5});return p.current&&v.observe(p.current),()=>{v.disconnect()}}},[e]),g.useEffect(()=>{if(s){let x=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(x)}}},[s]);let b=()=>{r(!0)},w=()=>{r(!1),l(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:Mh(o,b),onBlur:Mh(d,w),onMouseEnter:Mh(c,b),onMouseLeave:Mh(m,w),onTouchStart:Mh(h,b)}]:[!1,p,{}]}function Mh(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Gee({page:e,...t}){let{router:n}=o8(),s=g.useMemo(()=>JF(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?g.createElement(Wee,{page:e,matches:s,...t}):null}function Vee(e){let{manifest:t,routeModules:n}=c8(),[s,r]=g.useState([]);return g.useEffect(()=>{let i=!1;return $ee(e,t,n).then(l=>{i||r(l)}),()=>{i=!0}},[e,t,n]),s}function Wee({page:e,matches:t,...n}){let s=pa(),{manifest:r,routeModules:i}=c8(),{basename:l}=o8(),{loaderData:o,matches:d}=Bee(),c=g.useMemo(()=>k5(e,t,d,r,s,"data"),[e,t,d,r,s]),m=g.useMemo(()=>k5(e,t,d,r,s,"assets"),[e,t,d,r,s]),h=g.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let w=new Set,x=!1;if(t.forEach(j=>{let C=r.routes[j.route.id];!C||!C.hasLoader||(!c.some(S=>S.route.id===j.route.id)&&j.route.id in o&&i[j.route.id]?.shouldRevalidate||C.hasClientLoader?x=!0:w.add(j.route.id))}),w.size===0)return[];let v=Oee(e,l,"data");return x&&w.size>0&&v.searchParams.set("_routes",t.filter(j=>w.has(j.route.id)).map(j=>j.route.id).join(",")),[v.pathname+v.search]},[l,o,s,r,c,t,e,i]),p=g.useMemo(()=>Ree(m,r),[m,r]),b=Vee(m);return g.createElement(g.Fragment,null,h.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),p.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:x})=>g.createElement("link",{key:w,nonce:n.nonce,...x})))}function qee(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var d8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d8&&(window.__reactRouterVersion="7.9.3")}catch{}function Yee({basename:e,children:t,window:n}){let s=g.useRef();s.current==null&&(s.current=DJ({window:n,v5Compat:!0}));let r=s.current,[i,l]=g.useState({action:r.action,location:r.location}),o=g.useCallback(d=>{g.startTransition(()=>l(d))},[l]);return g.useLayoutEffect(()=>r.listen(o),[r,o]),g.createElement(jee,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:r})}var u8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m8=g.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:l,state:o,target:d,to:c,preventScrollReset:m,viewTransition:h,...p},b){let{basename:w}=g.useContext(Oi),x=typeof c=="string"&&u8.test(c),v,j=!1;if(typeof c=="string"&&x&&(v=c,d8))try{let z=new URL(window.location.href),K=c.startsWith("//")?new URL(z.protocol+c):new URL(c),B=oo(K.pathname,w);K.origin===z.origin&&B!=null?c=B+K.search+K.hash:j=!0}catch{Xr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=iee(c,{relative:r}),[S,_,A]=Hee(s,p),T=Xee(c,{replace:l,state:o,target:d,preventScrollReset:m,relative:r,viewTransition:h});function E(z){t&&t(z),z.defaultPrevented||T(z)}let D=g.createElement("a",{...p,...A,href:v||C,onClick:j||i?t:E,ref:qee(b,_),target:d,"data-discover":!x&&n==="render"?"true":void 0});return S&&!x?g.createElement(g.Fragment,null,D,g.createElement(Gee,{page:C})):D});m8.displayName="Link";var St=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:l,viewTransition:o,children:d,...c},m){let h=Ip(l,{relative:c.relative}),p=pa(),b=g.useContext(aw),{navigator:w,basename:x}=g.useContext(Oi),v=b!=null&&ate(h)&&o===!0,j=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,C=p.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&x&&(S=oo(S,x)||S);const _=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let A=C===j||!r&&C.startsWith(j)&&C.charAt(_)==="/",T=S!=null&&(S===j||!r&&S.startsWith(j)&&S.charAt(j.length)==="/"),E={isActive:A,isPending:T,isTransitioning:v},D=A?t:void 0,z;typeof s=="function"?z=s(E):z=[s,A?"active":null,T?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let K=typeof i=="function"?i(E):i;return g.createElement(m8,{...c,"aria-current":D,className:z,ref:m,style:K,to:l,viewTransition:o},typeof d=="function"?d(E):d)});St.displayName="NavLink";var Kee=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:l=gb,action:o,onSubmit:d,relative:c,preventScrollReset:m,viewTransition:h,...p},b)=>{let w=ete(),x=tte(o,{relative:c}),v=l.toLowerCase()==="get"?"get":"post",j=typeof o=="string"&&u8.test(o),C=S=>{if(d&&d(S),S.defaultPrevented)return;S.preventDefault();let _=S.nativeEvent.submitter,A=_?.getAttribute("formmethod")||l;w(_||S.currentTarget,{fetcherKey:t,method:A,navigate:n,replace:r,state:i,relative:c,preventScrollReset:m,viewTransition:h})};return g.createElement("form",{ref:b,method:v,action:x,onSubmit:s?d:C,...p,"data-discover":!j&&e==="render"?"true":void 0})});Kee.displayName="Form";function Qee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f8(e){let t=g.useContext(Cf);return Ka(t,Qee(e)),t}function Xee(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:l}={}){let o=bt(),d=pa(),c=Ip(e,{relative:i});return g.useCallback(m=>{if(Eee(m,t)){m.preventDefault();let h=n!==void 0?n:Xg(d)===Xg(c);o(e,{replace:h,state:s,preventScrollReset:r,relative:i,viewTransition:l})}},[d,o,c,n,s,t,e,r,i,l])}function Ss(e){Xr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(EA(e)),n=g.useRef(!1),s=pa(),r=g.useMemo(()=>kee(s.search,n.current?null:t.current),[s.search]),i=bt(),l=g.useCallback((o,d)=>{const c=EA(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,i("?"+c,d)},[i,r]);return[r,l]}var Zee=0,Jee=()=>`__${String(++Zee)}__`;function ete(){let{router:e}=f8("useSubmit"),{basename:t}=g.useContext(Oi),n=bee();return g.useCallback(async(s,r={})=>{let{action:i,method:l,encType:o,formData:d,body:c}=Dee(s,t);if(r.navigate===!1){let m=r.fetcherKey||Jee();await e.fetch(m,n,r.action||i,{preventScrollReset:r.preventScrollReset,formData:d,body:c,formMethod:r.method||l,formEncType:r.encType||o,flushSync:r.flushSync})}else await e.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:d,body:c,formMethod:r.method||l,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function tte(e,{relative:t}={}){let{basename:n}=g.useContext(Oi),s=g.useContext(ii);Ka(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Ip(e||".",{relative:t})},l=pa();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),d=o.getAll("index");if(d.some(m=>m==="")){o.delete("index"),d.filter(h=>h).forEach(h=>o.append("index",h));let m=o.toString();i.search=m?`?${m}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:so([n,i.pathname])),Xg(i)}function ate(e,{relative:t}={}){let n=g.useContext(n8);Ka(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=f8("useViewTransitionState"),r=Ip(e,{relative:t});if(!n.isTransitioning)return!1;let i=oo(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=oo(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ob(r.pathname,l)!=null||Ob(r.pathname,i)!=null}var $p=ZF();const ry=Di($p);function h8(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=h8(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Et(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=h8(e))&&(s&&(s+=" "),s+=t);return s}function nte(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}nte(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Rp=e=>typeof e=="number"&&!isNaN(e),Jd=e=>typeof e=="string",co=e=>typeof e=="function",ste=e=>Jd(e)||Rp(e),kA=e=>Jd(e)||co(e)?e:null,rte=(e,t)=>e===!1||Rp(e)&&e>0?e:t,LA=e=>g.isValidElement(e)||Jd(e)||co(e)||Rp(e);function ite(e,t,n=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)})})}function lte({enter:e,exit:t,appendPosition:n=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:l,preventExitTransition:o,done:d,nodeRef:c,isIn:m,playToast:h}){let p=n?`${e}--${l}`:e,b=n?`${t}--${l}`:t,w=g.useRef(0);return g.useLayoutEffect(()=>{let x=c.current,v=p.split(" "),j=C=>{C.target===c.current&&(h(),x.removeEventListener("animationend",j),x.removeEventListener("animationcancel",j),w.current===0&&C.type!=="animationcancel"&&x.classList.remove(...v))};x.classList.add(...v),x.addEventListener("animationend",j),x.addEventListener("animationcancel",j)},[]),g.useEffect(()=>{let x=c.current,v=()=>{x.removeEventListener("animationend",v),s?ite(x,d,r):d()};m||(o?v():(w.current=1,x.className+=` ${b}`,x.addEventListener("animationend",v)))},[m]),pt.createElement(pt.Fragment,null,i)}}function L5(e,t){return{content:g8(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function g8(e,t,n=!1){return g.isValidElement(e)&&!Jd(e.type)?g.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):co(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function ote({closeToast:e,theme:t,ariaLabel:n="close"}){return pt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":n},pt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},pt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function cte({delay:e,isRunning:t,closeToast:n,type:s="default",hide:r,className:i,controlledProgress:l,progress:o,rtl:d,isIn:c,theme:m}){let h=r||l&&o===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(p.transform=`scaleX(${o})`);let b=Et("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":d}),w=co(i)?i({rtl:d,type:s,defaultClassName:b}):Et(b,i),x={[l&&o>=1?"onTransitionEnd":"onAnimationEnd"]:l&&o<1?null:()=>{c&&n()}};return pt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},pt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${m} Toastify__progress-bar--${s}`}),pt.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:w,style:p,...x}))}var dte=1,p8=()=>`${dte++}`;function ute(e,t,n){let s=1,r=0,i=[],l=[],o=t,d=new Map,c=new Set,m=C=>(c.add(C),()=>c.delete(C)),h=()=>{l=Array.from(d.values()),c.forEach(C=>C())},p=({containerId:C,toastId:S,updateId:_})=>{let A=C?C!==e:e!==1,T=d.has(S)&&_==null;return A||T},b=(C,S)=>{d.forEach(_=>{var A;(S==null||S===_.props.toastId)&&((A=_.toggle)==null||A.call(_,C))})},w=C=>{var S,_;(_=(S=C.props)==null?void 0:S.onClose)==null||_.call(S,C.removalReason),C.isActive=!1},x=C=>{if(C==null)d.forEach(w);else{let S=d.get(C);S&&w(S)}h()},v=()=>{r-=i.length,i=[]},j=C=>{var S,_;let{toastId:A,updateId:T}=C.props,E=T==null;C.staleId&&d.delete(C.staleId),C.isActive=!0,d.set(A,C),h(),n(L5(C,E?"added":"updated")),E&&((_=(S=C.props).onOpen)==null||_.call(S))};return{id:e,props:o,observe:m,toggle:b,removeToast:x,toasts:d,clearQueue:v,buildToast:(C,S)=>{if(p(S))return;let{toastId:_,updateId:A,data:T,staleId:E,delay:D}=S,z=A==null;z&&r++;let K={...o,style:o.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([O,L])=>L!=null)),toastId:_,updateId:A,data:T,isIn:!1,className:kA(S.className||o.toastClassName),progressClassName:kA(S.progressClassName||o.progressClassName),autoClose:S.isLoading?!1:rte(S.autoClose,o.autoClose),closeToast(O){d.get(_).removalReason=O,x(_)},deleteToast(){let O=d.get(_);if(O!=null){if(n(L5(O,"removed")),d.delete(_),r--,r<0&&(r=0),i.length>0){j(i.shift());return}h()}}};K.closeButton=o.closeButton,S.closeButton===!1||LA(S.closeButton)?K.closeButton=S.closeButton:S.closeButton===!0&&(K.closeButton=LA(o.closeButton)?o.closeButton:!0);let B={content:C,props:K,staleId:E};o.limit&&o.limit>0&&r>o.limit&&z?i.push(B):Rp(D)?setTimeout(()=>{j(B)},D):j(B)},setProps(C){o=C},setToggle:(C,S)=>{let _=d.get(C);_&&(_.toggle=S)},isToastActive:C=>{var S;return(S=d.get(C))==null?void 0:S.isActive},getSnapshot:()=>l}}var Es=new Map,Zg=[],PA=new Set,mte=e=>PA.forEach(t=>t(e)),x8=()=>Es.size>0;function fte(){Zg.forEach(e=>b8(e.content,e.options)),Zg=[]}var hte=(e,{containerId:t})=>{var n;return(n=Es.get(t||1))==null?void 0:n.toasts.get(e)};function y8(e,t){var n;if(t)return!!((n=Es.get(t))!=null&&n.isToastActive(e));let s=!1;return Es.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function gte(e){if(!x8()){Zg=Zg.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||ste(e))Es.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Es.get(e.containerId);t?t.removeToast(e.id):Es.forEach(n=>{n.removeToast(e.id)})}}var pte=(e={})=>{Es.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function b8(e,t){LA(e)&&(x8()||Zg.push({content:e,options:t}),Es.forEach(n=>{n.buildToast(e,t)}))}function xte(e){var t;(t=Es.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function v8(e,t){Es.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function yte(e){let t=e.containerId||1;return{subscribe(n){let s=ute(t,e,mte);Es.set(t,s);let r=s.observe(n);return fte(),()=>{r(),Es.delete(t)}},setProps(n){var s;(s=Es.get(t))==null||s.setProps(n)},getSnapshot(){var n;return(n=Es.get(t))==null?void 0:n.getSnapshot()}}}function bte(e){return PA.add(e),()=>{PA.delete(e)}}function vte(e){return e&&(Jd(e.toastId)||Rp(e.toastId))?e.toastId:p8()}function zp(e,t){return b8(e,t),t.toastId}function sw(e,t){return{...t,type:t&&t.type||e,toastId:vte(t)}}function rw(e){return(t,n)=>zp(t,sw(e,n))}function Y(e,t){return zp(e,sw("default",t))}Y.loading=(e,t)=>zp(e,sw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function wte(e,{pending:t,error:n,success:s},r){let i;t&&(i=Jd(t)?Y.loading(t,r):Y.loading(t.render,{...r,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(c,m,h)=>{if(m==null){Y.dismiss(i);return}let p={type:c,...l,...r,data:h},b=Jd(m)?{render:m}:m;return i?Y.update(i,{...p,...b}):Y(b.render,{...p,...b}),h},d=co(e)?e():e;return d.then(c=>o("success",s,c)).catch(c=>o("error",n,c)),d}Y.promise=wte;Y.success=rw("success");Y.info=rw("info");Y.error=rw("error");Y.warning=rw("warning");Y.warn=Y.warning;Y.dark=(e,t)=>zp(e,sw("default",{theme:"dark",...t}));function Nte(e){gte(e)}Y.dismiss=Nte;Y.clearWaitingQueue=pte;Y.isActive=y8;Y.update=(e,t={})=>{let n=hte(e,t);if(n){let{props:s,content:r}=n,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:p8()};i.toastId!==e&&(i.staleId=e);let l=i.render||r;delete i.render,zp(l,i)}};Y.done=e=>{Y.update(e,{progress:1})};Y.onChange=bte;Y.play=e=>v8(!0,e);Y.pause=e=>v8(!1,e);function jte(e){var t;let{subscribe:n,getSnapshot:s,setProps:r}=g.useRef(yte(e)).current;r(e);let i=(t=g.useSyncExternalStore(n,s,s))==null?void 0:t.slice();function l(o){if(!i)return[];let d=new Map;return e.newestOnTop&&i.reverse(),i.forEach(c=>{let{position:m}=c.props;d.has(m)||d.set(m,[]),d.get(m).push(c)}),Array.from(d,c=>o(c[0],c[1]))}return{getToastToRender:l,isToastActive:y8,count:i?.length}}function Cte(e){let[t,n]=g.useState(!1),[s,r]=g.useState(!1),i=g.useRef(null),l=g.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:d,closeToast:c,onClick:m,closeOnClick:h}=e;xte({id:e.toastId,containerId:e.containerId,fn:n}),g.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{b()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||j(),window.addEventListener("focus",v),window.addEventListener("blur",j)}function b(){window.removeEventListener("focus",v),window.removeEventListener("blur",j)}function w(E){if(e.draggable===!0||e.draggable===E.pointerType){C();let D=i.current;l.canCloseOnClick=!0,l.canDrag=!0,D.style.transition="none",e.draggableDirection==="x"?(l.start=E.clientX,l.removalDistance=D.offsetWidth*(e.draggablePercent/100)):(l.start=E.clientY,l.removalDistance=D.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function x(E){let{top:D,bottom:z,left:K,right:B}=i.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&E.clientX>=K&&E.clientX<=B&&E.clientY>=D&&E.clientY<=z?j():v()}function v(){n(!0)}function j(){n(!1)}function C(){l.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",A)}function S(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",A)}function _(E){let D=i.current;if(l.canDrag&&D){l.didMove=!0,t&&j(),e.draggableDirection==="x"?l.delta=E.clientX-l.start:l.delta=E.clientY-l.start,l.start!==E.clientX&&(l.canCloseOnClick=!1);let z=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;D.style.transform=`translate3d(${z},0)`,D.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function A(){S();let E=i.current;if(l.canDrag&&l.didMove&&E){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let T={onPointerDown:w,onPointerUp:x};return o&&d&&(T.onMouseEnter=j,e.stacked||(T.onMouseLeave=v)),h&&(T.onClick=E=>{m&&m(E),l.canCloseOnClick&&c(!0)}),{playToast:v,pauseToast:j,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:T}}var Ste=typeof window<"u"?g.useLayoutEffect:g.useEffect,iw=({theme:e,type:t,isLoading:n,...s})=>pt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function _te(e){return pt.createElement(iw,{...e},pt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Ate(e){return pt.createElement(iw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Tte(e){return pt.createElement(iw,{...e},pt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Ete(e){return pt.createElement(iw,{...e},pt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function kte(){return pt.createElement("div",{className:"Toastify__spinner"})}var DA={info:Ate,warning:_te,success:Tte,error:Ete,spinner:kte},Lte=e=>e in DA;function Pte({theme:e,type:t,isLoading:n,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(co(s)?r=s({...i,isLoading:n}):g.isValidElement(s)?r=g.cloneElement(s,i):n?r=DA.spinner():Lte(t)&&(r=DA[t](i))),r}var Dte=e=>{let{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:r,playToast:i}=Cte(e),{closeButton:l,children:o,autoClose:d,onClick:c,type:m,hideProgressBar:h,closeToast:p,transition:b,position:w,className:x,style:v,progressClassName:j,updateId:C,role:S,progress:_,rtl:A,toastId:T,deleteToast:E,isIn:D,isLoading:z,closeOnClick:K,theme:B,ariaLabel:O}=e,L=Et("Toastify__toast",`Toastify__toast-theme--${B}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":K}),H=co(x)?x({rtl:A,position:w,type:m,defaultClassName:L}):Et(L,x),ae=Pte(e),W=!!_||!d,q={closeToast:p,type:m,theme:B},le=null;return l===!1||(co(l)?le=l(q):g.isValidElement(l)?le=g.cloneElement(l,q):le=ote(q)),pt.createElement(b,{isIn:D,done:E,position:w,preventExitTransition:n,nodeRef:s,playToast:i},pt.createElement("div",{id:T,tabIndex:0,onClick:c,"data-in":D,className:H,...r,style:v,ref:s,...D&&{role:S,"aria-label":O}},ae!=null&&pt.createElement("div",{className:Et("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},ae),g8(o,e,!t),le,!e.customProgressBar&&pt.createElement(cte,{...C&&!W?{key:`p-${C}`}:{},rtl:A,theme:B,delay:d,isRunning:t,isIn:D,closeToast:p,hide:h,type:m,className:j,controlledProgress:W,progress:_||0})))},Ote=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Mte=lte(Ote("bounce",!0)),Ite={position:"top-right",transition:Mte,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function $te(e){let t={...Ite,...e},n=e.stacked,[s,r]=g.useState(!0),i=g.useRef(null),{getToastToRender:l,isToastActive:o,count:d}=jte(t),{className:c,style:m,rtl:h,containerId:p,hotKeys:b}=t;function w(v){let j=Et("Toastify__toast-container",`Toastify__toast-container--${v}`,{"Toastify__toast-container--rtl":h});return co(c)?c({position:v,rtl:h,defaultClassName:j}):Et(j,kA(c))}function x(){n&&(r(!0),Y.play())}return Ste(()=>{var v;if(n){let j=i.current.querySelectorAll('[data-in="true"]'),C=12,S=(v=t.position)==null?void 0:v.includes("top"),_=0,A=0;Array.from(j).reverse().forEach((T,E)=>{let D=T;D.classList.add("Toastify__toast--stacked"),E>0&&(D.dataset.collapsed=`${s}`),D.dataset.pos||(D.dataset.pos=S?"top":"bot");let z=_*(s?.2:1)+(s?0:C*E);D.style.setProperty("--y",`${S?z:z*-1}px`),D.style.setProperty("--g",`${C}`),D.style.setProperty("--s",`${1-(s?A:0)}`),_+=D.offsetHeight,A+=.025})}},[s,d,n]),g.useEffect(()=>{function v(j){var C;let S=i.current;b(j)&&((C=S.querySelector('[tabIndex="0"]'))==null||C.focus(),r(!1),Y.pause()),j.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),Y.play())}return document.addEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}},[b]),pt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{n&&(r(!1),Y.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((v,j)=>{let C=j.length?{...m}:{...m,pointerEvents:"none"};return pt.createElement("div",{tabIndex:-1,className:w(v),"data-stacked":n,style:C,key:`c-${v}`},j.map(({content:S,props:_})=>pt.createElement(Dte,{..._,stacked:n,collapseAll:x,isIn:o(_.toastId,_.containerId),key:`t-${_.key}`},S)))}))}function w8(e,t){return function(){return e.apply(t,arguments)}}const{toString:Rte}=Object.prototype,{getPrototypeOf:GE}=Object,{iterator:lw,toStringTag:N8}=Symbol,ow=(e=>t=>{const n=Rte.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Mi=e=>(e=e.toLowerCase(),t=>ow(t)===e),cw=e=>t=>typeof t===e,{isArray:Af}=Array,tf=cw("undefined");function Up(e){return e!==null&&!tf(e)&&e.constructor!==null&&!tf(e.constructor)&&Ws(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const j8=Mi("ArrayBuffer");function zte(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&j8(e.buffer),t}const Ute=cw("string"),Ws=cw("function"),C8=cw("number"),Fp=e=>e!==null&&typeof e=="object",Fte=e=>e===!0||e===!1,xb=e=>{if(ow(e)!=="object")return!1;const t=GE(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(N8 in e)&&!(lw in e)},Bte=e=>{if(!Fp(e)||Up(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Hte=Mi("Date"),Gte=Mi("File"),Vte=Mi("Blob"),Wte=Mi("FileList"),qte=e=>Fp(e)&&Ws(e.pipe),Yte=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ws(e.append)&&((t=ow(e))==="formdata"||t==="object"&&Ws(e.toString)&&e.toString()==="[object FormData]"))},Kte=Mi("URLSearchParams"),[Qte,Xte,Zte,Jte]=["ReadableStream","Request","Response","Headers"].map(Mi),eae=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bp(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Af(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Up(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let o;for(s=0;s<l;s++)o=i[s],t.call(null,e[o],o,e)}}function S8(e,t){if(Up(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Od=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_8=e=>!tf(e)&&e!==Od;function OA(){const{caseless:e,skipUndefined:t}=_8(this)&&this||{},n={},s=(r,i)=>{const l=e&&S8(n,i)||i;xb(n[l])&&xb(r)?n[l]=OA(n[l],r):xb(r)?n[l]=OA({},r):Af(r)?n[l]=r.slice():(!t||!tf(r))&&(n[l]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Bp(arguments[r],s);return n}const tae=(e,t,n,{allOwnKeys:s}={})=>(Bp(t,(r,i)=>{n&&Ws(r)?e[i]=w8(r,n):e[i]=r},{allOwnKeys:s}),e),aae=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nae=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},sae=(e,t,n,s)=>{let r,i,l;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)l=r[i],(!s||s(l,e,t))&&!o[l]&&(t[l]=e[l],o[l]=!0);e=n!==!1&&GE(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},rae=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},iae=e=>{if(!e)return null;if(Af(e))return e;let t=e.length;if(!C8(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},lae=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&GE(Uint8Array)),oae=(e,t)=>{const s=(e&&e[lw]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},cae=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},dae=Mi("HTMLFormElement"),uae=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),P5=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),mae=Mi("RegExp"),A8=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Bp(n,(r,i)=>{let l;(l=t(r,i,e))!==!1&&(s[i]=l||r)}),Object.defineProperties(e,s)},fae=e=>{A8(e,(t,n)=>{if(Ws(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Ws(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},hae=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Af(e)?s(e):s(String(e).split(t)),n},gae=()=>{},pae=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function xae(e){return!!(e&&Ws(e.append)&&e[N8]==="FormData"&&e[lw])}const yae=e=>{const t=new Array(10),n=(s,r)=>{if(Fp(s)){if(t.indexOf(s)>=0)return;if(Up(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Af(s)?[]:{};return Bp(s,(l,o)=>{const d=n(l,r+1);!tf(d)&&(i[o]=d)}),t[r]=void 0,i}}return s};return n(e,0)},bae=Mi("AsyncFunction"),vae=e=>e&&(Fp(e)||Ws(e))&&Ws(e.then)&&Ws(e.catch),T8=((e,t)=>e?setImmediate:t?((n,s)=>(Od.addEventListener("message",({source:r,data:i})=>{r===Od&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Od.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ws(Od.postMessage)),wae=typeof queueMicrotask<"u"?queueMicrotask.bind(Od):typeof process<"u"&&process.nextTick||T8,Nae=e=>e!=null&&Ws(e[lw]),tt={isArray:Af,isArrayBuffer:j8,isBuffer:Up,isFormData:Yte,isArrayBufferView:zte,isString:Ute,isNumber:C8,isBoolean:Fte,isObject:Fp,isPlainObject:xb,isEmptyObject:Bte,isReadableStream:Qte,isRequest:Xte,isResponse:Zte,isHeaders:Jte,isUndefined:tf,isDate:Hte,isFile:Gte,isBlob:Vte,isRegExp:mae,isFunction:Ws,isStream:qte,isURLSearchParams:Kte,isTypedArray:lae,isFileList:Wte,forEach:Bp,merge:OA,extend:tae,trim:eae,stripBOM:aae,inherits:nae,toFlatObject:sae,kindOf:ow,kindOfTest:Mi,endsWith:rae,toArray:iae,forEachEntry:oae,matchAll:cae,isHTMLForm:dae,hasOwnProperty:P5,hasOwnProp:P5,reduceDescriptors:A8,freezeMethods:fae,toObjectSet:hae,toCamelCase:uae,noop:gae,toFiniteNumber:pae,findKey:S8,global:Od,isContextDefined:_8,isSpecCompliantForm:xae,toJSONObject:yae,isAsyncFn:bae,isThenable:vae,setImmediate:T8,asap:wae,isIterable:Nae};function Gt(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}tt.inherits(Gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.status}}});const E8=Gt.prototype,k8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{k8[e]={value:e}});Object.defineProperties(Gt,k8);Object.defineProperty(E8,"isAxiosError",{value:!0});Gt.from=(e,t,n,s,r,i)=>{const l=Object.create(E8);tt.toFlatObject(e,l,function(m){return m!==Error.prototype},c=>c!=="isAxiosError");const o=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return Gt.call(l,o,d,n,s,r),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const jae=null;function MA(e){return tt.isPlainObject(e)||tt.isArray(e)}function L8(e){return tt.endsWith(e,"[]")?e.slice(0,-2):e}function D5(e,t,n){return e?e.concat(t).map(function(r,i){return r=L8(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function Cae(e){return tt.isArray(e)&&!e.some(MA)}const Sae=tt.toFlatObject(tt,{},null,function(t){return/^is[A-Z]/.test(t)});function dw(e,t,n){if(!tt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=tt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,v){return!tt.isUndefined(v[x])});const s=n.metaTokens,r=n.visitor||m,i=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(t);if(!tt.isFunction(r))throw new TypeError("visitor must be a function");function c(w){if(w===null)return"";if(tt.isDate(w))return w.toISOString();if(tt.isBoolean(w))return w.toString();if(!d&&tt.isBlob(w))throw new Gt("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(w)||tt.isTypedArray(w)?d&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function m(w,x,v){let j=w;if(w&&!v&&typeof w=="object"){if(tt.endsWith(x,"{}"))x=s?x:x.slice(0,-2),w=JSON.stringify(w);else if(tt.isArray(w)&&Cae(w)||(tt.isFileList(w)||tt.endsWith(x,"[]"))&&(j=tt.toArray(w)))return x=L8(x),j.forEach(function(S,_){!(tt.isUndefined(S)||S===null)&&t.append(l===!0?D5([x],_,i):l===null?x:x+"[]",c(S))}),!1}return MA(w)?!0:(t.append(D5(v,x,i),c(w)),!1)}const h=[],p=Object.assign(Sae,{defaultVisitor:m,convertValue:c,isVisitable:MA});function b(w,x){if(!tt.isUndefined(w)){if(h.indexOf(w)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(w),tt.forEach(w,function(j,C){(!(tt.isUndefined(j)||j===null)&&r.call(t,j,tt.isString(C)?C.trim():C,x,p))===!0&&b(j,x?x.concat(C):[C])}),h.pop()}}if(!tt.isObject(e))throw new TypeError("data must be an object");return b(e),t}function O5(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function VE(e,t){this._pairs=[],e&&dw(e,this,t)}const P8=VE.prototype;P8.append=function(t,n){this._pairs.push([t,n])};P8.toString=function(t){const n=t?function(s){return t.call(this,s,O5)}:O5;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function _ae(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function D8(e,t,n){if(!t)return e;const s=n&&n.encode||_ae;tt.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=tt.isURLSearchParams(t)?t.toString():new VE(t,n).toString(s),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class M5{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){tt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const O8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Aae=typeof URLSearchParams<"u"?URLSearchParams:VE,Tae=typeof FormData<"u"?FormData:null,Eae=typeof Blob<"u"?Blob:null,kae={isBrowser:!0,classes:{URLSearchParams:Aae,FormData:Tae,Blob:Eae},protocols:["http","https","file","blob","url","data"]},WE=typeof window<"u"&&typeof document<"u",IA=typeof navigator=="object"&&navigator||void 0,Lae=WE&&(!IA||["ReactNative","NativeScript","NS"].indexOf(IA.product)<0),Pae=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Dae=WE&&window.location.href||"http://localhost",Oae=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:WE,hasStandardBrowserEnv:Lae,hasStandardBrowserWebWorkerEnv:Pae,navigator:IA,origin:Dae},Symbol.toStringTag,{value:"Module"})),ys={...Oae,...kae};function Mae(e,t){return dw(e,new ys.classes.URLSearchParams,{visitor:function(n,s,r,i){return ys.isNode&&tt.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Iae(e){return tt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $ae(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function M8(e){function t(n,s,r,i){let l=n[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),d=i>=n.length;return l=!l&&tt.isArray(r)?r.length:l,d?(tt.hasOwnProp(r,l)?r[l]=[r[l],s]:r[l]=s,!o):((!r[l]||!tt.isObject(r[l]))&&(r[l]=[]),t(n,s,r[l],i)&&tt.isArray(r[l])&&(r[l]=$ae(r[l])),!o)}if(tt.isFormData(e)&&tt.isFunction(e.entries)){const n={};return tt.forEachEntry(e,(s,r)=>{t(Iae(s),r,n,0)}),n}return null}function Rae(e,t,n){if(tt.isString(e))try{return(t||JSON.parse)(e),tt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Hp={transitional:O8,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=tt.isObject(t);if(i&&tt.isHTMLForm(t)&&(t=new FormData(t)),tt.isFormData(t))return r?JSON.stringify(M8(t)):t;if(tt.isArrayBuffer(t)||tt.isBuffer(t)||tt.isStream(t)||tt.isFile(t)||tt.isBlob(t)||tt.isReadableStream(t))return t;if(tt.isArrayBufferView(t))return t.buffer;if(tt.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Mae(t,this.formSerializer).toString();if((o=tt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return dw(o?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),Rae(t)):t}],transformResponse:[function(t){const n=this.transitional||Hp.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(tt.isResponse(t)||tt.isReadableStream(t))return t;if(t&&tt.isString(t)&&(s&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?Gt.from(o,Gt.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ys.classes.FormData,Blob:ys.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],e=>{Hp.headers[e]={}});const zae=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uae=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),s=l.substring(r+1).trim(),!(!n||t[n]&&zae[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},I5=Symbol("internals");function Ih(e){return e&&String(e).trim().toLowerCase()}function yb(e){return e===!1||e==null?e:tt.isArray(e)?e.map(yb):String(e)}function Fae(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const Bae=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function BC(e,t,n,s,r){if(tt.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!tt.isString(t)){if(tt.isString(s))return t.indexOf(s)!==-1;if(tt.isRegExp(s))return s.test(t)}}function Hae(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function Gae(e,t){const n=tt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,l){return this[s].call(this,t,r,i,l)},configurable:!0})})}let qs=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(o,d,c){const m=Ih(d);if(!m)throw new Error("header name must be a non-empty string");const h=tt.findKey(r,m);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||d]=yb(o))}const l=(o,d)=>tt.forEach(o,(c,m)=>i(c,m,d));if(tt.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(tt.isString(t)&&(t=t.trim())&&!Bae(t))l(Uae(t),n);else if(tt.isObject(t)&&tt.isIterable(t)){let o={},d,c;for(const m of t){if(!tt.isArray(m))throw TypeError("Object iterator must return a key-value pair");o[c=m[0]]=(d=o[c])?tt.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}l(o,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=Ih(t),t){const s=tt.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return Fae(r);if(tt.isFunction(n))return n.call(this,r,s);if(tt.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ih(t),t){const s=tt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||BC(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(l){if(l=Ih(l),l){const o=tt.findKey(s,l);o&&(!n||BC(s,s[o],o,n))&&(delete s[o],r=!0)}}return tt.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||BC(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return tt.forEach(this,(r,i)=>{const l=tt.findKey(s,i);if(l){n[l]=yb(r),delete n[i];return}const o=t?Hae(i):String(i).trim();o!==i&&delete n[i],n[o]=yb(r),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return tt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&tt.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[I5]=this[I5]={accessors:{}}).accessors,r=this.prototype;function i(l){const o=Ih(l);s[o]||(Gae(r,l),s[o]=!0)}return tt.isArray(t)?t.forEach(i):i(t),this}};qs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(qs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});tt.freezeMethods(qs);function HC(e,t){const n=this||Hp,s=t||n,r=qs.from(s.headers);let i=s.data;return tt.forEach(e,function(o){i=o.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function I8(e){return!!(e&&e.__CANCEL__)}function Tf(e,t,n){Gt.call(this,e??"canceled",Gt.ERR_CANCELED,t,n),this.name="CanceledError"}tt.inherits(Tf,Gt,{__CANCEL__:!0});function $8(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new Gt("Request failed with status code "+n.status,[Gt.ERR_BAD_REQUEST,Gt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Vae(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Wae(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,l;return t=t!==void 0?t:1e3,function(d){const c=Date.now(),m=s[i];l||(l=c),n[r]=d,s[r]=c;let h=i,p=0;for(;h!==r;)p+=n[h++],h=h%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),c-l<t)return;const b=m&&c-m;return b?Math.round(p*1e3/b):void 0}}function qae(e,t){let n=0,s=1e3/t,r,i;const l=(c,m=Date.now())=>{n=m,r=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const m=Date.now(),h=m-n;h>=s?l(c,m):(r=c,i||(i=setTimeout(()=>{i=null,l(r)},s-h)))},()=>r&&l(r)]}const Mb=(e,t,n=3)=>{let s=0;const r=Wae(50,250);return qae(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,d=l-s,c=r(d),m=l<=o;s=l;const h={loaded:l,total:o,progress:o?l/o:void 0,bytes:d,rate:c||void 0,estimated:c&&o&&m?(o-l)/c:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(h)},n)},$5=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},R5=e=>(...t)=>tt.asap(()=>e(...t)),Yae=ys.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ys.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ys.origin),ys.navigator&&/(msie|trident)/i.test(ys.navigator.userAgent)):()=>!0,Kae=ys.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const l=[e+"="+encodeURIComponent(t)];tt.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),tt.isString(s)&&l.push("path="+s),tt.isString(r)&&l.push("domain="+r),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qae(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Xae(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function R8(e,t,n){let s=!Qae(t);return e&&(s||n==!1)?Xae(e,t):t}const z5=e=>e instanceof qs?{...e}:e;function eu(e,t){t=t||{};const n={};function s(c,m,h,p){return tt.isPlainObject(c)&&tt.isPlainObject(m)?tt.merge.call({caseless:p},c,m):tt.isPlainObject(m)?tt.merge({},m):tt.isArray(m)?m.slice():m}function r(c,m,h,p){if(tt.isUndefined(m)){if(!tt.isUndefined(c))return s(void 0,c,h,p)}else return s(c,m,h,p)}function i(c,m){if(!tt.isUndefined(m))return s(void 0,m)}function l(c,m){if(tt.isUndefined(m)){if(!tt.isUndefined(c))return s(void 0,c)}else return s(void 0,m)}function o(c,m,h){if(h in t)return s(c,m);if(h in e)return s(void 0,c)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(c,m,h)=>r(z5(c),z5(m),h,!0)};return tt.forEach(Object.keys({...e,...t}),function(m){const h=d[m]||r,p=h(e[m],t[m],m);tt.isUndefined(p)&&h!==o||(n[m]=p)}),n}const z8=e=>{const t=eu({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=qs.from(l),t.url=D8(R8(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),tt.isFormData(n)){if(ys.hasStandardBrowserEnv||ys.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(tt.isFunction(n.getHeaders)){const d=n.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([m,h])=>{c.includes(m.toLowerCase())&&l.set(m,h)})}}if(ys.hasStandardBrowserEnv&&(s&&tt.isFunction(s)&&(s=s(t)),s||s!==!1&&Yae(t.url))){const d=r&&i&&Kae.read(i);d&&l.set(r,d)}return t},Zae=typeof XMLHttpRequest<"u",Jae=Zae&&function(e){return new Promise(function(n,s){const r=z8(e);let i=r.data;const l=qs.from(r.headers).normalize();let{responseType:o,onUploadProgress:d,onDownloadProgress:c}=r,m,h,p,b,w;function x(){b&&b(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(m),r.signal&&r.signal.removeEventListener("abort",m)}let v=new XMLHttpRequest;v.open(r.method.toUpperCase(),r.url,!0),v.timeout=r.timeout;function j(){if(!v)return;const S=qs.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:S,config:e,request:v};$8(function(E){n(E),x()},function(E){s(E),x()},A),v=null}"onloadend"in v?v.onloadend=j:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(j)},v.onabort=function(){v&&(s(new Gt("Request aborted",Gt.ECONNABORTED,e,v)),v=null)},v.onerror=function(_){const A=_&&_.message?_.message:"Network Error",T=new Gt(A,Gt.ERR_NETWORK,e,v);T.event=_||null,s(T),v=null},v.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const A=r.transitional||O8;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),s(new Gt(_,A.clarifyTimeoutError?Gt.ETIMEDOUT:Gt.ECONNABORTED,e,v)),v=null},i===void 0&&l.setContentType(null),"setRequestHeader"in v&&tt.forEach(l.toJSON(),function(_,A){v.setRequestHeader(A,_)}),tt.isUndefined(r.withCredentials)||(v.withCredentials=!!r.withCredentials),o&&o!=="json"&&(v.responseType=r.responseType),c&&([p,w]=Mb(c,!0),v.addEventListener("progress",p)),d&&v.upload&&([h,b]=Mb(d),v.upload.addEventListener("progress",h),v.upload.addEventListener("loadend",b)),(r.cancelToken||r.signal)&&(m=S=>{v&&(s(!S||S.type?new Tf(null,e,v):S),v.abort(),v=null)},r.cancelToken&&r.cancelToken.subscribe(m),r.signal&&(r.signal.aborted?m():r.signal.addEventListener("abort",m)));const C=Vae(r.url);if(C&&ys.protocols.indexOf(C)===-1){s(new Gt("Unsupported protocol "+C+":",Gt.ERR_BAD_REQUEST,e));return}v.send(i||null)})},ene=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(c){if(!r){r=!0,o();const m=c instanceof Error?c:this.reason;s.abort(m instanceof Gt?m:new Tf(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,i(new Gt(`timeout ${t} of ms exceeded`,Gt.ETIMEDOUT))},t);const o=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:d}=s;return d.unsubscribe=()=>tt.asap(o),d}},tne=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},ane=async function*(e,t){for await(const n of nne(e))yield*tne(n,t)},nne=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},U5=(e,t,n,s)=>{const r=ane(e,t);let i=0,l,o=d=>{l||(l=!0,s&&s(d))};return new ReadableStream({async pull(d){try{const{done:c,value:m}=await r.next();if(c){o(),d.close();return}let h=m.byteLength;if(n){let p=i+=h;n(p)}d.enqueue(new Uint8Array(m))}catch(c){throw o(c),c}},cancel(d){return o(d),r.return()}},{highWaterMark:2})},F5=64*1024,{isFunction:iy}=tt,sne=(({Request:e,Response:t})=>({Request:e,Response:t}))(tt.global),{ReadableStream:B5,TextEncoder:H5}=tt.global,G5=(e,...t)=>{try{return!!e(...t)}catch{return!1}},rne=e=>{e=tt.merge.call({skipUndefined:!0},sne,e);const{fetch:t,Request:n,Response:s}=e,r=t?iy(t):typeof fetch=="function",i=iy(n),l=iy(s);if(!r)return!1;const o=r&&iy(B5),d=r&&(typeof H5=="function"?(w=>x=>w.encode(x))(new H5):async w=>new Uint8Array(await new n(w).arrayBuffer())),c=i&&o&&G5(()=>{let w=!1;const x=new n(ys.origin,{body:new B5,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!x}),m=l&&o&&G5(()=>tt.isReadableStream(new s("").body)),h={stream:m&&(w=>w.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!h[w]&&(h[w]=(x,v)=>{let j=x&&x[w];if(j)return j.call(x);throw new Gt(`Response type '${w}' is not supported`,Gt.ERR_NOT_SUPPORT,v)})});const p=async w=>{if(w==null)return 0;if(tt.isBlob(w))return w.size;if(tt.isSpecCompliantForm(w))return(await new n(ys.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(tt.isArrayBufferView(w)||tt.isArrayBuffer(w))return w.byteLength;if(tt.isURLSearchParams(w)&&(w=w+""),tt.isString(w))return(await d(w)).byteLength},b=async(w,x)=>{const v=tt.toFiniteNumber(w.getContentLength());return v??p(x)};return async w=>{let{url:x,method:v,data:j,signal:C,cancelToken:S,timeout:_,onDownloadProgress:A,onUploadProgress:T,responseType:E,headers:D,withCredentials:z="same-origin",fetchOptions:K}=z8(w),B=t||fetch;E=E?(E+"").toLowerCase():"text";let O=ene([C,S&&S.toAbortSignal()],_),L=null;const H=O&&O.unsubscribe&&(()=>{O.unsubscribe()});let ae;try{if(T&&c&&v!=="get"&&v!=="head"&&(ae=await b(D,j))!==0){let V=new n(x,{method:"POST",body:j,duplex:"half"}),ee;if(tt.isFormData(j)&&(ee=V.headers.get("content-type"))&&D.setContentType(ee),V.body){const[me,we]=$5(ae,Mb(R5(T)));j=U5(V.body,F5,me,we)}}tt.isString(z)||(z=z?"include":"omit");const W=i&&"credentials"in n.prototype,q={...K,signal:O,method:v.toUpperCase(),headers:D.normalize().toJSON(),body:j,duplex:"half",credentials:W?z:void 0};L=i&&new n(x,q);let le=await(i?B(L,K):B(x,q));const Q=m&&(E==="stream"||E==="response");if(m&&(A||Q&&H)){const V={};["status","statusText","headers"].forEach(ve=>{V[ve]=le[ve]});const ee=tt.toFiniteNumber(le.headers.get("content-length")),[me,we]=A&&$5(ee,Mb(R5(A),!0))||[];le=new s(U5(le.body,F5,me,()=>{we&&we(),H&&H()}),V)}E=E||"text";let te=await h[tt.findKey(h,E)||"text"](le,w);return!Q&&H&&H(),await new Promise((V,ee)=>{$8(V,ee,{data:te,headers:qs.from(le.headers),status:le.status,statusText:le.statusText,config:w,request:L})})}catch(W){throw H&&H(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Gt("Network Error",Gt.ERR_NETWORK,w,L),{cause:W.cause||W}):Gt.from(W,W&&W.code,w,L)}}},ine=new Map,U8=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,i=[s,r,n];let l=i.length,o=l,d,c,m=ine;for(;o--;)d=i[o],c=m.get(d),c===void 0&&m.set(d,c=o?new Map:rne(t)),m=c;return c};U8();const $A={http:jae,xhr:Jae,fetch:{get:U8}};tt.forEach($A,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const V5=e=>`- ${e}`,lne=e=>tt.isFunction(e)||e===null||e===!1,F8={getAdapter:(e,t)=>{e=tt.isArray(e)?e:[e];const{length:n}=e;let s,r;const i={};for(let l=0;l<n;l++){s=e[l];let o;if(r=s,!lne(s)&&(r=$A[(o=String(s)).toLowerCase()],r===void 0))throw new Gt(`Unknown adapter '${o}'`);if(r&&(tt.isFunction(r)||(r=r.get(t))))break;i[o||"#"+l]=r}if(!r){const l=Object.entries(i).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=n?l.length>1?`since :
`+l.map(V5).join(`
`):" "+V5(l[0]):"as no adapter specified";throw new Gt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:$A};function GC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Tf(null,e)}function W5(e){return GC(e),e.headers=qs.from(e.headers),e.data=HC.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),F8.getAdapter(e.adapter||Hp.adapter,e)(e).then(function(s){return GC(e),s.data=HC.call(e,e.transformResponse,s),s.headers=qs.from(s.headers),s},function(s){return I8(s)||(GC(e),s&&s.response&&(s.response.data=HC.call(e,e.transformResponse,s.response),s.response.headers=qs.from(s.response.headers))),Promise.reject(s)})}const B8="1.12.2",uw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{uw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const q5={};uw.transitional=function(t,n,s){function r(i,l){return"[Axios v"+B8+"] Transitional option '"+i+"'"+l+(s?". "+s:"")}return(i,l,o)=>{if(t===!1)throw new Gt(r(l," has been removed"+(n?" in "+n:"")),Gt.ERR_DEPRECATED);return n&&!q5[l]&&(q5[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,o):!0}};uw.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function one(e,t,n){if(typeof e!="object")throw new Gt("options must be an object",Gt.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],l=t[i];if(l){const o=e[i],d=o===void 0||l(o,i,e);if(d!==!0)throw new Gt("option "+i+" must be "+d,Gt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Gt("Unknown option "+i,Gt.ERR_BAD_OPTION)}}const bb={assertOptions:one,validators:uw},Bi=bb.validators;let Hd=class{constructor(t){this.defaults=t||{},this.interceptors={request:new M5,response:new M5}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=eu(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&bb.assertOptions(s,{silentJSONParsing:Bi.transitional(Bi.boolean),forcedJSONParsing:Bi.transitional(Bi.boolean),clarifyTimeoutError:Bi.transitional(Bi.boolean)},!1),r!=null&&(tt.isFunction(r)?n.paramsSerializer={serialize:r}:bb.assertOptions(r,{encode:Bi.function,serialize:Bi.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),bb.assertOptions(n,{baseUrl:Bi.spelling("baseURL"),withXsrfToken:Bi.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&tt.merge(i.common,i[n.method]);i&&tt.forEach(["delete","get","head","post","put","patch","common"],w=>{delete i[w]}),n.headers=qs.concat(l,i);const o=[];let d=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(d=d&&x.synchronous,o.unshift(x.fulfilled,x.rejected))});const c=[];this.interceptors.response.forEach(function(x){c.push(x.fulfilled,x.rejected)});let m,h=0,p;if(!d){const w=[W5.bind(this),void 0];for(w.unshift(...o),w.push(...c),p=w.length,m=Promise.resolve(n);h<p;)m=m.then(w[h++],w[h++]);return m}p=o.length;let b=n;for(;h<p;){const w=o[h++],x=o[h++];try{b=w(b)}catch(v){x.call(this,v);break}}try{m=W5.call(this,b)}catch(w){return Promise.reject(w)}for(h=0,p=c.length;h<p;)m=m.then(c[h++],c[h++]);return m}getUri(t){t=eu(this.defaults,t);const n=R8(t.baseURL,t.url,t.allowAbsoluteUrls);return D8(n,t.params,t.paramsSerializer)}};tt.forEach(["delete","get","head","options"],function(t){Hd.prototype[t]=function(n,s){return this.request(eu(s||{},{method:t,url:n,data:(s||{}).data}))}});tt.forEach(["post","put","patch"],function(t){function n(s){return function(i,l,o){return this.request(eu(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Hd.prototype[t]=n(),Hd.prototype[t+"Form"]=n(!0)});let cne=class H8{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const l=new Promise(o=>{s.subscribe(o),i=o}).then(r);return l.cancel=function(){s.unsubscribe(i)},l},t(function(i,l,o){s.reason||(s.reason=new Tf(i,l,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new H8(function(r){t=r}),cancel:t}}};function dne(e){return function(n){return e.apply(null,n)}}function une(e){return tt.isObject(e)&&e.isAxiosError===!0}const RA={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(RA).forEach(([e,t])=>{RA[t]=e});function G8(e){const t=new Hd(e),n=w8(Hd.prototype.request,t);return tt.extend(n,Hd.prototype,t,{allOwnKeys:!0}),tt.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return G8(eu(e,r))},n}const xn=G8(Hp);xn.Axios=Hd;xn.CanceledError=Tf;xn.CancelToken=cne;xn.isCancel=I8;xn.VERSION=B8;xn.toFormData=dw;xn.AxiosError=Gt;xn.Cancel=xn.CanceledError;xn.all=function(t){return Promise.all(t)};xn.spread=dne;xn.isAxiosError=une;xn.mergeConfig=eu;xn.AxiosHeaders=qs;xn.formToJSON=e=>M8(tt.isHTMLForm(e)?new FormData(e):e);xn.getAdapter=F8.getAdapter;xn.HttpStatusCode=RA;xn.default=xn;const{Axios:l8e,AxiosError:o8e,CanceledError:c8e,isCancel:d8e,CancelToken:u8e,VERSION:m8e,all:f8e,Cancel:h8e,isAxiosError:g8e,spread:p8e,toFormData:x8e,AxiosHeaders:y8e,HttpStatusCode:b8e,formToJSON:v8e,getAdapter:w8e,mergeConfig:N8e}=xn,mne="https://crm.sari-sari.com",re=xn.create({baseURL:`${mne}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});re.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));re.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const fne="isLoggedIn",ly="userRole",Zs=()=>{const[e,t]=g.useState(!!localStorage.getItem(ly)),[n,s]=g.useState(localStorage.getItem(ly)||""),r=bt();g.useEffect(()=>{const c=localStorage.getItem(ly);c?(t(!0),s(c)):l()},[]);const i=c=>{localStorage.setItem(ly,c.role),localStorage.setItem(fne,!0),t(!0),s(c.role)},l=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await re.post("/auth/logout")}catch(c){console.log("Failed to logout from server:",c)}l(),r("/")},userRole:n,setUserRole:s,login:c=>{i(c),c.role==="CEO"||c.role==="Admin"?r("/admin"):c.role==="Manager"?r("/manager/dashboard"):r("/")}}},$h=({children:e,requiredRole:t})=>{const{isLoggedIn:n,userRole:s}=Zs();if(!n)return a.jsx(xr,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?a.jsx(xr,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?a.jsx(xr,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?a.jsx(xr,{to:"/manager/dashboard",replace:!0}):s==="SALES"?a.jsx(xr,{to:"/sales/dashboard",replace:!0}):a.jsx(xr,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?a.jsx(xr,{to:"/",replace:!0}):e};var V8={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Y5=pt.createContext&&pt.createContext(V8),hne=["attr","size","title"];function gne(e,t){if(e==null)return{};var n=pne(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function pne(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Ib(){return Ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ib.apply(this,arguments)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function $b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){xne(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xne(e,t,n){return t=yne(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yne(e){var t=bne(e,"string");return typeof t=="symbol"?t:t+""}function bne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W8(e){return e&&e.map((t,n)=>pt.createElement(t.tag,$b({key:n},t.attr),W8(t.child)))}function Ct(e){return t=>pt.createElement(vne,Ib({attr:$b({},e.attr)},t),W8(e.child))}function vne(e){var t=n=>{var{attr:s,size:r,title:i}=e,l=gne(e,hne),o=r||n.size||"1em",d;return n.className&&(d=n.className),e.className&&(d=(d?d+" ":"")+e.className),pt.createElement("svg",Ib({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,l,{className:d,style:$b($b({color:e.color||n.color},n.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),i&&pt.createElement("title",null,i),e.children)};return Y5!==void 0?pt.createElement(Y5.Consumer,null,n=>t(n)):t(V8)}function Zr(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Ef(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function qE(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function wne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function YE(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function mw(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Nne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function Gp(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function KE(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Yt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Nt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function q8(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function en(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function zt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function Y8(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function wt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function jne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Tt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Ns(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function ds(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function wu(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Rc(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function Ma(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function Qa(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function tu(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function au(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function da(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Cne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function Sne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(e)}function Vp(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function K8(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function _ne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function al(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function Ha(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Ane(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Wp(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function js(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function jt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Tne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function na(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function QE(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function $t(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function Ene(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function XE(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function fw(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function Lc(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function So(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function Nr(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Ot(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function nu(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function dl(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Ga(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function ul(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function Ut(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function ba(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Cs(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Bt(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const Q8=()=>{const[e,t]=g.useState(!1),n=g.useRef(null);return g.useEffect(()=>{const s=r=>{n.current&&!n.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),g.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),a.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:" CRM"})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[a.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),a.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),a.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),a.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),a.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),a.jsxs("div",{className:"flex sm:hidden items-center relative",ref:n,children:[a.jsx("button",{onClick:()=>t(!e),children:e?a.jsx(Bt,{className:"w-6 h-6 text-white"}):a.jsx(Wp,{className:"w-6 h-6 text-white"})}),e&&a.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:a.jsxs("nav",{className:"flex flex-col",children:[a.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),a.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function kne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function zc(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Lne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function hw(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function Pne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Dne(e){return Ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const One=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,n]=g.useState(0),[s,r]=g.useState(!1),i=g.useRef(null),[l,o]=g.useState(0),[d,c]=g.useState(0);g.useEffect(()=>(s||(i.current=setInterval(()=>{n(b=>(b+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const m=b=>o(b.targetTouches[0].clientX),h=b=>c(b.targetTouches[0].clientX),p=()=>{l-d>75&&n(b=>(b+1)%e.length),d-l>75&&n(b=>(b-1+e.length)%e.length)};return a.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"lg:text-left text-center",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",a.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),a.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),a.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:m,onTouchMove:h,onTouchEnd:p,children:[e.map((b,w)=>a.jsx("img",{src:b,alt:`Slide ${w+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${w===t?"opacity-100":"opacity-0"}`},w)),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((b,w)=>a.jsx("button",{onClick:()=>n(w),className:`w-3 h-3 rounded-full transition-all ${w===t?"bg-accent":"bg-gray-400 opacity-50"}`},w))})]})]})]})})},Mne=({Icon:e,title:t,description:n})=>a.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[a.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:a.jsx(e,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),a.jsx("p",{className:"text-gray-400",children:n})]}),Ine=()=>{const e=[{Icon:Dne,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:kne,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:Pne,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Lne,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return a.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),a.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,n)=>a.jsx(Mne,{...t},n))})]})})},$ne=()=>a.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),a.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),a.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),Rne=()=>a.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>a.jsxs("div",{children:[a.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),a.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((n,s)=>a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-accent",children:n})},s))})]},t))]})}),zne=()=>(g.useEffect(()=>{document.title="Sari-Sari CRM"},[]),a.jsxs("main",{className:"font-inter",children:[a.jsx(Q8,{}),a.jsx(One,{}),a.jsx(Ine,{}),a.jsx($ne,{}),a.jsx(Rne,{})]}));function Nu(e){return Ct({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Ia(e){return Ct({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function ZE(e){return Ct({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Sg extends Error{}Sg.prototype.name="InvalidTokenError";function Une(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function Fne(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Une(t)}catch{return atob(t)}}function X8(e,t){if(typeof e!="string")throw new Sg("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,s=e.split(".")[n];if(typeof s!="string")throw new Sg(`Invalid token specified: missing part #${n+1}`);let r;try{r=Fne(s)}catch(i){throw new Sg(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Sg(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}function Tn(e,t,n=void 0){const s={};for(const r in e){const i=e[r];let l="",o=!0;for(let d=0;d<i.length;d+=1){const c=i[d];c&&(l+=(o===!0?"":" ")+t(c),o=!1,n&&n[c]&&(l+=" "+n[c]))}s[r]=l}return s}function su(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>n.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${n} for the full message.`}function Pa(e){if(typeof e!="string")throw new Error(su(7));return e.charAt(0).toUpperCase()+e.slice(1)}var VC={exports:{}},ka={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q5;function Bne(){if(Q5)return ka;Q5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function w(x){if(typeof x=="object"&&x!==null){var v=x.$$typeof;switch(v){case e:switch(x=x.type,x){case n:case r:case s:case d:case c:case p:return x;default:switch(x=x&&x.$$typeof,x){case l:case o:case h:case m:return x;case i:return x;default:return v}}case t:return v}}}return ka.ContextConsumer=i,ka.ContextProvider=l,ka.Element=e,ka.ForwardRef=o,ka.Fragment=n,ka.Lazy=h,ka.Memo=m,ka.Portal=t,ka.Profiler=r,ka.StrictMode=s,ka.Suspense=d,ka.SuspenseList=c,ka.isContextConsumer=function(x){return w(x)===i},ka.isContextProvider=function(x){return w(x)===l},ka.isElement=function(x){return typeof x=="object"&&x!==null&&x.$$typeof===e},ka.isForwardRef=function(x){return w(x)===o},ka.isFragment=function(x){return w(x)===n},ka.isLazy=function(x){return w(x)===h},ka.isMemo=function(x){return w(x)===m},ka.isPortal=function(x){return w(x)===t},ka.isProfiler=function(x){return w(x)===r},ka.isStrictMode=function(x){return w(x)===s},ka.isSuspense=function(x){return w(x)===d},ka.isSuspenseList=function(x){return w(x)===c},ka.isValidElementType=function(x){return typeof x=="string"||typeof x=="function"||x===n||x===r||x===s||x===d||x===c||typeof x=="object"&&x!==null&&(x.$$typeof===h||x.$$typeof===m||x.$$typeof===l||x.$$typeof===i||x.$$typeof===o||x.$$typeof===b||x.getModuleId!==void 0)},ka.typeOf=w,ka}var X5;function Hne(){return X5||(X5=1,VC.exports=Bne()),VC.exports}var JE=Hne();function Zi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Z8(e){if(g.isValidElement(e)||JE.isValidElementType(e)||!Zi(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=Z8(e[n])}),t}function jr(e,t,n={clone:!0}){const s=n.clone?{...e}:e;return Zi(e)&&Zi(t)&&Object.keys(t).forEach(r=>{g.isValidElement(t[r])||JE.isValidElementType(t[r])?s[r]=t[r]:Zi(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&Zi(e[r])?s[r]=jr(e[r],t[r],n):n.clone?s[r]=Zi(t[r])?Z8(t[r]):t[r]:s[r]=t[r]}),s}function Ug(e,t){return t?jr(e,t,{clone:!1}):e}function Z5(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return n.length?n.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function Gne(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function Vne(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,s,r]=n,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Wne(e){const t=(i,l)=>i.replace("@media",l?`@container ${l}`:"@container");function n(i,l){i.up=(...o)=>t(e.breakpoints.up(...o),l),i.down=(...o)=>t(e.breakpoints.down(...o),l),i.between=(...o)=>t(e.breakpoints.between(...o),l),i.only=(...o)=>t(e.breakpoints.only(...o),l),i.not=(...o)=>{const d=t(e.breakpoints.not(...o),l);return d.includes("not all and")?d.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):d}}const s={},r=i=>(n(s,i),s);return n(r),{...e,containerQueries:r}}const gw={xs:0,sm:600,md:900,lg:1200,xl:1536},J5={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gw[e]}px)`},qne={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:gw[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function uo(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||J5;return t.reduce((l,o,d)=>(l[i.up(i.keys[d])]=n(t[d]),l),{})}if(typeof t=="object"){const i=s.breakpoints||J5;return Object.keys(t).reduce((l,o)=>{if(Gne(i.keys,o)){const d=Vne(s.containerQueries?s:qne,o);d&&(l[d]=n(t[o],o))}else if(Object.keys(i.values||gw).includes(o)){const d=i.up(o);l[d]=n(t[o],o)}else{const d=o;l[d]=t[d]}return l},{})}return n(t)}function Yne(e={}){return e.keys?.reduce((n,s)=>{const r=e.up(s);return n[r]={},n},{})||{}}function eM(e,t){return e.reduce((n,s)=>{const r=n[s];return(!r||Object.keys(r).length===0)&&delete n[s],n},t)}function pw(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function Rb(e,t,n,s=n){let r;return typeof e=="function"?r=e(n):Array.isArray(e)?r=e[n]||s:r=pw(e,n)||s,t&&(r=t(r,s,e)),r}function yn(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:r}=e,i=l=>{if(l[t]==null)return null;const o=l[t],d=l.theme,c=pw(d,s)||{};return uo(l,o,h=>{let p=Rb(c,r,h);return h===p&&typeof h=="string"&&(p=Rb(c,r,`${t}${h==="default"?"":Pa(h)}`,h)),n===!1?p:{[n]:p}})};return i.propTypes={},i.filterProps=[t],i}function Kne(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Qne={m:"margin",p:"padding"},Xne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},tM={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Zne=Kne(e=>{if(e.length>2)if(tM[e])e=tM[e];else return[e];const[t,n]=e.split(""),s=Qne[t],r=Xne[n]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),ek=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],tk=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...ek,...tk];function qp(e,t,n,s){const r=pw(e,t,!0)??n;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const l=Math.abs(i),o=r[l];return i>=0?o:typeof o=="number"?-o:typeof o=="string"&&o.startsWith("var(")?`calc(-1 * ${o})`:`-${o}`}:typeof r=="function"?r:()=>{}}function ak(e){return qp(e,"spacing",8)}function Yp(e,t){return typeof t=="string"||t==null?t:e(t)}function Jne(e,t){return n=>e.reduce((s,r)=>(s[r]=Yp(t,n),s),{})}function ese(e,t,n,s){if(!t.includes(n))return null;const r=Zne(n),i=Jne(r,s),l=e[n];return uo(e,l,i)}function J8(e,t){const n=ak(e.theme);return Object.keys(e).map(s=>ese(e,t,s,n)).reduce(Ug,{})}function ln(e){return J8(e,ek)}ln.propTypes={};ln.filterProps=ek;function on(e){return J8(e,tk)}on.propTypes={};on.filterProps=tk;function xw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),n=s=>Object.keys(s).reduce((r,i)=>t[i]?Ug(r,t[i](s)):r,{});return n.propTypes={},n.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),n}function Wr(e){return typeof e!="number"?e:`${e}px solid`}function li(e,t){return yn({prop:e,themeKey:"borders",transform:t})}const tse=li("border",Wr),ase=li("borderTop",Wr),nse=li("borderRight",Wr),sse=li("borderBottom",Wr),rse=li("borderLeft",Wr),ise=li("borderColor"),lse=li("borderTopColor"),ose=li("borderRightColor"),cse=li("borderBottomColor"),dse=li("borderLeftColor"),use=li("outline",Wr),mse=li("outlineColor"),yw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=qp(e.theme,"shape.borderRadius",4),n=s=>({borderRadius:Yp(t,s)});return uo(e,e.borderRadius,n)}return null};yw.propTypes={};yw.filterProps=["borderRadius"];xw(tse,ase,nse,sse,rse,ise,lse,ose,cse,dse,yw,use,mse);const bw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=qp(e.theme,"spacing",8),n=s=>({gap:Yp(t,s)});return uo(e,e.gap,n)}return null};bw.propTypes={};bw.filterProps=["gap"];const vw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=qp(e.theme,"spacing",8),n=s=>({columnGap:Yp(t,s)});return uo(e,e.columnGap,n)}return null};vw.propTypes={};vw.filterProps=["columnGap"];const ww=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=qp(e.theme,"spacing",8),n=s=>({rowGap:Yp(t,s)});return uo(e,e.rowGap,n)}return null};ww.propTypes={};ww.filterProps=["rowGap"];const fse=yn({prop:"gridColumn"}),hse=yn({prop:"gridRow"}),gse=yn({prop:"gridAutoFlow"}),pse=yn({prop:"gridAutoColumns"}),xse=yn({prop:"gridAutoRows"}),yse=yn({prop:"gridTemplateColumns"}),bse=yn({prop:"gridTemplateRows"}),vse=yn({prop:"gridTemplateAreas"}),wse=yn({prop:"gridArea"});xw(bw,vw,ww,fse,hse,gse,pse,xse,yse,bse,vse,wse);function qm(e,t){return t==="grey"?t:e}const Nse=yn({prop:"color",themeKey:"palette",transform:qm}),jse=yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:qm}),Cse=yn({prop:"backgroundColor",themeKey:"palette",transform:qm});xw(Nse,jse,Cse);function br(e){return e<=1&&e!==0?`${e*100}%`:e}const Sse=yn({prop:"width",transform:br}),nk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{const s=e.theme?.breakpoints?.values?.[n]||gw[n];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:br(n)}};return uo(e,e.maxWidth,t)}return null};nk.filterProps=["maxWidth"];const _se=yn({prop:"minWidth",transform:br}),Ase=yn({prop:"height",transform:br}),Tse=yn({prop:"maxHeight",transform:br}),Ese=yn({prop:"minHeight",transform:br});yn({prop:"size",cssProperty:"width",transform:br});yn({prop:"size",cssProperty:"height",transform:br});const kse=yn({prop:"boxSizing"});xw(Sse,nk,_se,Ase,Tse,Ese,kse);const Kp={border:{themeKey:"borders",transform:Wr},borderTop:{themeKey:"borders",transform:Wr},borderRight:{themeKey:"borders",transform:Wr},borderBottom:{themeKey:"borders",transform:Wr},borderLeft:{themeKey:"borders",transform:Wr},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Wr},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yw},color:{themeKey:"palette",transform:qm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:qm},backgroundColor:{themeKey:"palette",transform:qm},p:{style:on},pt:{style:on},pr:{style:on},pb:{style:on},pl:{style:on},px:{style:on},py:{style:on},padding:{style:on},paddingTop:{style:on},paddingRight:{style:on},paddingBottom:{style:on},paddingLeft:{style:on},paddingX:{style:on},paddingY:{style:on},paddingInline:{style:on},paddingInlineStart:{style:on},paddingInlineEnd:{style:on},paddingBlock:{style:on},paddingBlockStart:{style:on},paddingBlockEnd:{style:on},m:{style:ln},mt:{style:ln},mr:{style:ln},mb:{style:ln},ml:{style:ln},mx:{style:ln},my:{style:ln},margin:{style:ln},marginTop:{style:ln},marginRight:{style:ln},marginBottom:{style:ln},marginLeft:{style:ln},marginX:{style:ln},marginY:{style:ln},marginInline:{style:ln},marginInlineStart:{style:ln},marginInlineEnd:{style:ln},marginBlock:{style:ln},marginBlockStart:{style:ln},marginBlockEnd:{style:ln},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:bw},rowGap:{style:ww},columnGap:{style:vw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:br},maxWidth:{style:nk},minWidth:{transform:br},height:{transform:br},maxHeight:{transform:br},minHeight:{transform:br},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Lse(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),n=new Set(t);return e.every(s=>n.size===Object.keys(s).length)}function Pse(e,t){return typeof e=="function"?e(t):e}function Dse(){function e(n,s,r,i){const l={[n]:s,theme:r},o=i[n];if(!o)return{[n]:s};const{cssProperty:d=n,themeKey:c,transform:m,style:h}=o;if(s==null)return null;if(c==="typography"&&s==="inherit")return{[n]:s};const p=pw(r,c)||{};return h?h(l):uo(l,s,w=>{let x=Rb(p,m,w);return w===x&&typeof w=="string"&&(x=Rb(p,m,`${n}${w==="default"?"":Pa(w)}`,w)),d===!1?x:{[d]:x}})}function t(n){const{sx:s,theme:r={},nested:i}=n||{};if(!s)return null;const l=r.unstable_sxConfig??Kp;function o(d){let c=d;if(typeof d=="function")c=d(r);else if(typeof d!="object")return d;if(!c)return null;const m=Yne(r.breakpoints),h=Object.keys(m);let p=m;return Object.keys(c).forEach(b=>{const w=Pse(c[b],r);if(w!=null)if(typeof w=="object")if(l[b])p=Ug(p,e(b,w,r,l));else{const x=uo({theme:r},w,v=>({[b]:v}));Lse(x,w)?p[b]=t({sx:w,theme:r,nested:!0}):p=Ug(p,x)}else p=Ug(p,e(b,w,r,l))}),!i&&r.modularCssLayers?{"@layer sx":Z5(r,eM(h,p))}:Z5(r,eM(h,p))}return Array.isArray(s)?s.map(o):o(s)}return t}const af=Dse();af.filterProps=["sx"];const Ose=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??Kp;return Object.keys(e).forEach(s=>{n[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function Mse(e){const{sx:t,...n}=e,{systemProps:s,otherProps:r}=Ose(n);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...l)=>{const o=t(...l);return Zi(o)?{...s,...o}:s}:i={...s,...t},{...r,sx:i}}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ue.apply(null,arguments)}function Ise(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $se(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Rse=(function(){function e(n){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($se(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=Ise(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),fs="-ms-",zb="-moz-",ha="-webkit-",eB="comm",sk="rule",rk="decl",zse="@import",tB="@keyframes",Use="@layer",Fse=Math.abs,Nw=String.fromCharCode,Bse=Object.assign;function Hse(e,t){return cs(e,0)^45?(((t<<2^cs(e,0))<<2^cs(e,1))<<2^cs(e,2))<<2^cs(e,3):0}function aB(e){return e.trim()}function Gse(e,t){return(e=t.exec(e))?e[0]:e}function ga(e,t,n){return e.replace(t,n)}function zA(e,t){return e.indexOf(t)}function cs(e,t){return e.charCodeAt(t)|0}function Jg(e,t,n){return e.slice(t,n)}function Qi(e){return e.length}function ik(e){return e.length}function oy(e,t){return t.push(e),e}function Vse(e,t){return e.map(t).join("")}var jw=1,nf=1,nB=0,Xs=0,Sn=0,kf="";function Cw(e,t,n,s,r,i,l){return{value:e,root:t,parent:n,type:s,props:r,children:i,line:jw,column:nf,length:l,return:""}}function Rh(e,t){return Bse(Cw("",null,null,"",null,null,0),e,{length:-e.length},t)}function Wse(){return Sn}function qse(){return Sn=Xs>0?cs(kf,--Xs):0,nf--,Sn===10&&(nf=1,jw--),Sn}function Cr(){return Sn=Xs<nB?cs(kf,Xs++):0,nf++,Sn===10&&(nf=1,jw++),Sn}function rl(){return cs(kf,Xs)}function vb(){return Xs}function Qp(e,t){return Jg(kf,e,t)}function ep(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sB(e){return jw=nf=1,nB=Qi(kf=e),Xs=0,[]}function rB(e){return kf="",e}function wb(e){return aB(Qp(Xs-1,UA(e===91?e+2:e===40?e+1:e)))}function Yse(e){for(;(Sn=rl())&&Sn<33;)Cr();return ep(e)>2||ep(Sn)>3?"":" "}function Kse(e,t){for(;--t&&Cr()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return Qp(e,vb()+(t<6&&rl()==32&&Cr()==32))}function UA(e){for(;Cr();)switch(Sn){case e:return Xs;case 34:case 39:e!==34&&e!==39&&UA(Sn);break;case 40:e===41&&UA(e);break;case 92:Cr();break}return Xs}function Qse(e,t){for(;Cr()&&e+Sn!==57;)if(e+Sn===84&&rl()===47)break;return"/*"+Qp(t,Xs-1)+"*"+Nw(e===47?e:Cr())}function Xse(e){for(;!ep(rl());)Cr();return Qp(e,Xs)}function Zse(e){return rB(Nb("",null,null,null,[""],e=sB(e),0,[0],e))}function Nb(e,t,n,s,r,i,l,o,d){for(var c=0,m=0,h=l,p=0,b=0,w=0,x=1,v=1,j=1,C=0,S="",_=r,A=i,T=s,E=S;v;)switch(w=C,C=Cr()){case 40:if(w!=108&&cs(E,h-1)==58){zA(E+=ga(wb(C),"&","&\f"),"&\f")!=-1&&(j=-1);break}case 34:case 39:case 91:E+=wb(C);break;case 9:case 10:case 13:case 32:E+=Yse(w);break;case 92:E+=Kse(vb()-1,7);continue;case 47:switch(rl()){case 42:case 47:oy(Jse(Qse(Cr(),vb()),t,n),d);break;default:E+="/"}break;case 123*x:o[c++]=Qi(E)*j;case 125*x:case 59:case 0:switch(C){case 0:case 125:v=0;case 59+m:j==-1&&(E=ga(E,/\f/g,"")),b>0&&Qi(E)-h&&oy(b>32?nM(E+";",s,n,h-1):nM(ga(E," ","")+";",s,n,h-2),d);break;case 59:E+=";";default:if(oy(T=aM(E,t,n,c,m,r,o,S,_=[],A=[],h),i),C===123)if(m===0)Nb(E,t,T,T,_,i,h,o,A);else switch(p===99&&cs(E,3)===110?100:p){case 100:case 108:case 109:case 115:Nb(e,T,T,s&&oy(aM(e,T,T,0,0,r,o,S,r,_=[],h),A),r,A,h,o,s?_:A);break;default:Nb(E,T,T,T,[""],A,0,o,A)}}c=m=b=0,x=j=1,S=E="",h=l;break;case 58:h=1+Qi(E),b=w;default:if(x<1){if(C==123)--x;else if(C==125&&x++==0&&qse()==125)continue}switch(E+=Nw(C),C*x){case 38:j=m>0?1:(E+="\f",-1);break;case 44:o[c++]=(Qi(E)-1)*j,j=1;break;case 64:rl()===45&&(E+=wb(Cr())),p=rl(),m=h=Qi(S=E+=Xse(vb())),C++;break;case 45:w===45&&Qi(E)==2&&(x=0)}}return i}function aM(e,t,n,s,r,i,l,o,d,c,m){for(var h=r-1,p=r===0?i:[""],b=ik(p),w=0,x=0,v=0;w<s;++w)for(var j=0,C=Jg(e,h+1,h=Fse(x=l[w])),S=e;j<b;++j)(S=aB(x>0?p[j]+" "+C:ga(C,/&\f/g,p[j])))&&(d[v++]=S);return Cw(e,t,n,r===0?sk:o,d,c,m)}function Jse(e,t,n){return Cw(e,t,n,eB,Nw(Wse()),Jg(e,2,-2),0)}function nM(e,t,n,s){return Cw(e,t,n,rk,Jg(e,0,s),Jg(e,s+1,-1),s)}function Ym(e,t){for(var n="",s=ik(e),r=0;r<s;r++)n+=t(e[r],r,e,t)||"";return n}function ere(e,t,n,s){switch(e.type){case Use:if(e.children.length)break;case zse:case rk:return e.return=e.return||e.value;case eB:return"";case tB:return e.return=e.value+"{"+Ym(e.children,s)+"}";case sk:e.value=e.props.join(",")}return Qi(n=Ym(e.children,s))?e.return=e.value+"{"+n+"}":""}function tre(e){var t=ik(e);return function(n,s,r,i){for(var l="",o=0;o<t;o++)l+=e[o](n,s,r,i)||"";return l}}function are(e){return function(t){t.root||(t=t.return)&&e(t)}}function iB(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var nre=function(t,n,s){for(var r=0,i=0;r=i,i=rl(),r===38&&i===12&&(n[s]=1),!ep(i);)Cr();return Qp(t,Xs)},sre=function(t,n){var s=-1,r=44;do switch(ep(r)){case 0:r===38&&rl()===12&&(n[s]=1),t[s]+=nre(Xs-1,n,s);break;case 2:t[s]+=wb(r);break;case 4:if(r===44){t[++s]=rl()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=Nw(r)}while(r=Cr());return t},rre=function(t,n){return rB(sre(sB(t),n))},sM=new WeakMap,ire=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!sM.get(s))&&!r){sM.set(t,!0);for(var i=[],l=rre(n,i),o=s.props,d=0,c=0;d<l.length;d++)for(var m=0;m<o.length;m++,c++)t.props[c]=i[d]?l[d].replace(/&\f/g,o[m]):o[m]+" "+l[d]}}},lre=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function lB(e,t){switch(Hse(e,t)){case 5103:return ha+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ha+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ha+e+zb+e+fs+e+e;case 6828:case 4268:return ha+e+fs+e+e;case 6165:return ha+e+fs+"flex-"+e+e;case 5187:return ha+e+ga(e,/(\w+).+(:[^]+)/,ha+"box-$1$2"+fs+"flex-$1$2")+e;case 5443:return ha+e+fs+"flex-item-"+ga(e,/flex-|-self/,"")+e;case 4675:return ha+e+fs+"flex-line-pack"+ga(e,/align-content|flex-|-self/,"")+e;case 5548:return ha+e+fs+ga(e,"shrink","negative")+e;case 5292:return ha+e+fs+ga(e,"basis","preferred-size")+e;case 6060:return ha+"box-"+ga(e,"-grow","")+ha+e+fs+ga(e,"grow","positive")+e;case 4554:return ha+ga(e,/([^-])(transform)/g,"$1"+ha+"$2")+e;case 6187:return ga(ga(ga(e,/(zoom-|grab)/,ha+"$1"),/(image-set)/,ha+"$1"),e,"")+e;case 5495:case 3959:return ga(e,/(image-set\([^]*)/,ha+"$1$`$1");case 4968:return ga(ga(e,/(.+:)(flex-)?(.*)/,ha+"box-pack:$3"+fs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ha+e+e;case 4095:case 3583:case 4068:case 2532:return ga(e,/(.+)-inline(.+)/,ha+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Qi(e)-1-t>6)switch(cs(e,t+1)){case 109:if(cs(e,t+4)!==45)break;case 102:return ga(e,/(.+:)(.+)-([^]+)/,"$1"+ha+"$2-$3$1"+zb+(cs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~zA(e,"stretch")?lB(ga(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(cs(e,t+1)!==115)break;case 6444:switch(cs(e,Qi(e)-3-(~zA(e,"!important")&&10))){case 107:return ga(e,":",":"+ha)+e;case 101:return ga(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ha+(cs(e,14)===45?"inline-":"")+"box$3$1"+ha+"$2$3$1"+fs+"$2box$3")+e}break;case 5936:switch(cs(e,t+11)){case 114:return ha+e+fs+ga(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ha+e+fs+ga(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ha+e+fs+ga(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ha+e+fs+e+e}return e}var ore=function(t,n,s,r){if(t.length>-1&&!t.return)switch(t.type){case rk:t.return=lB(t.value,t.length);break;case tB:return Ym([Rh(t,{value:ga(t.value,"@","@"+ha)})],r);case sk:if(t.length)return Vse(t.props,function(i){switch(Gse(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ym([Rh(t,{props:[ga(i,/:(read-\w+)/,":"+zb+"$1")]})],r);case"::placeholder":return Ym([Rh(t,{props:[ga(i,/:(plac\w+)/,":"+ha+"input-$1")]}),Rh(t,{props:[ga(i,/:(plac\w+)/,":"+zb+"$1")]}),Rh(t,{props:[ga(i,/:(plac\w+)/,fs+"input-$1")]})],r)}return""})}},cre=[ore],dre=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(x){var v=x.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(x),x.setAttribute("data-s",""))})}var r=t.stylisPlugins||cre,i={},l,o=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(x){for(var v=x.getAttribute("data-emotion").split(" "),j=1;j<v.length;j++)i[v[j]]=!0;o.push(x)});var d,c=[ire,lre];{var m,h=[ere,are(function(x){m.insert(x)})],p=tre(c.concat(r,h)),b=function(v){return Ym(Zse(v),p)};d=function(v,j,C,S){m=C,b(v?v+"{"+j.styles+"}":j.styles),S&&(w.inserted[j.name]=!0)}}var w={key:n,sheet:new Rse({key:n,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:d};return w.sheet.hydrate(o),w},WC={exports:{}},xa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM;function ure(){if(rM)return xa;rM=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,m=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,w=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function S(A){if(typeof A=="object"&&A!==null){var T=A.$$typeof;switch(T){case t:switch(A=A.type,A){case d:case c:case s:case i:case r:case h:return A;default:switch(A=A&&A.$$typeof,A){case o:case m:case w:case b:case l:return A;default:return T}}case n:return T}}}function _(A){return S(A)===c}return xa.AsyncMode=d,xa.ConcurrentMode=c,xa.ContextConsumer=o,xa.ContextProvider=l,xa.Element=t,xa.ForwardRef=m,xa.Fragment=s,xa.Lazy=w,xa.Memo=b,xa.Portal=n,xa.Profiler=i,xa.StrictMode=r,xa.Suspense=h,xa.isAsyncMode=function(A){return _(A)||S(A)===d},xa.isConcurrentMode=_,xa.isContextConsumer=function(A){return S(A)===o},xa.isContextProvider=function(A){return S(A)===l},xa.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},xa.isForwardRef=function(A){return S(A)===m},xa.isFragment=function(A){return S(A)===s},xa.isLazy=function(A){return S(A)===w},xa.isMemo=function(A){return S(A)===b},xa.isPortal=function(A){return S(A)===n},xa.isProfiler=function(A){return S(A)===i},xa.isStrictMode=function(A){return S(A)===r},xa.isSuspense=function(A){return S(A)===h},xa.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===s||A===c||A===i||A===r||A===h||A===p||typeof A=="object"&&A!==null&&(A.$$typeof===w||A.$$typeof===b||A.$$typeof===l||A.$$typeof===o||A.$$typeof===m||A.$$typeof===v||A.$$typeof===j||A.$$typeof===C||A.$$typeof===x)},xa.typeOf=S,xa}var iM;function mre(){return iM||(iM=1,WC.exports=ure()),WC.exports}var qC,lM;function fre(){if(lM)return qC;lM=1;var e=mre(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function l(w){return e.isMemo(w)?r:i[w.$$typeof]||t}var o=Object.defineProperty,d=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function b(w,x,v){if(typeof x!="string"){if(p){var j=h(x);j&&j!==p&&b(w,j,v)}var C=d(x);c&&(C=C.concat(c(x)));for(var S=l(w),_=l(x),A=0;A<C.length;++A){var T=C[A];if(!n[T]&&!(v&&v[T])&&!(_&&_[T])&&!(S&&S[T])){var E=m(x,T);try{o(w,T,E)}catch{}}}}return w}return qC=b,qC}fre();var hre=!0;function oB(e,t,n){var s="";return n.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var lk=function(t,n,s){var r=t.key+"-"+n.name;(s===!1||hre===!1)&&t.registered[r]===void 0&&(t.registered[r]=n.styles)},cB=function(t,n,s){lk(t,n,s);var r=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function gre(e){for(var t=0,n,s=0,r=e.length;r>=4;++s,r-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pre={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xre=/[A-Z]|^ms/g,yre=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dB=function(t){return t.charCodeAt(1)===45},oM=function(t){return t!=null&&typeof t!="boolean"},YC=iB(function(e){return dB(e)?e:e.replace(xre,"-$&").toLowerCase()}),cM=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(yre,function(s,r,i){return Xi={name:r,styles:i,next:Xi},r})}return pre[t]!==1&&!dB(t)&&typeof n=="number"&&n!==0?n+"px":n};function tp(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return Xi={name:r.name,styles:r.styles,next:Xi},r.name;var i=n;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)Xi={name:l.name,styles:l.styles,next:Xi},l=l.next;var o=i.styles+";";return o}return bre(e,t,n)}case"function":{if(e!==void 0){var d=Xi,c=n(e);return Xi=d,tp(e,t,c)}break}}var m=n;if(t==null)return m;var h=t[m];return h!==void 0?h:m}function bre(e,t,n){var s="";if(Array.isArray(n))for(var r=0;r<n.length;r++)s+=tp(e,t,n[r])+";";else for(var i in n){var l=n[i];if(typeof l!="object"){var o=l;t!=null&&t[o]!==void 0?s+=i+"{"+t[o]+"}":oM(o)&&(s+=YC(i)+":"+cM(i,o)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var d=0;d<l.length;d++)oM(l[d])&&(s+=YC(i)+":"+cM(i,l[d])+";");else{var c=tp(e,t,l);switch(i){case"animation":case"animationName":{s+=YC(i)+":"+c+";";break}default:s+=i+"{"+c+"}"}}}return s}var dM=/label:\s*([^\s;{]+)\s*(;|$)/g,Xi;function Sw(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";Xi=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=tp(n,t,i);else{var l=i;r+=l[0]}for(var o=1;o<e.length;o++)if(r+=tp(n,t,e[o]),s){var d=i;r+=d[o]}dM.lastIndex=0;for(var c="",m;(m=dM.exec(r))!==null;)c+="-"+m[1];var h=gre(r)+c;return{name:h,styles:r,next:Xi}}var vre=function(t){return t()},wre=Zd.useInsertionEffect?Zd.useInsertionEffect:!1,uB=wre||vre,mB=g.createContext(typeof HTMLElement<"u"?dre({key:"css"}):null);mB.Provider;var fB=function(t){return g.forwardRef(function(n,s){var r=g.useContext(mB);return t(n,r,s)})},ok=g.createContext({}),ck={}.hasOwnProperty,FA="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Nre=function(t,n){var s={};for(var r in n)ck.call(n,r)&&(s[r]=n[r]);return s[FA]=t,s},jre=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return lk(n,s,r),uB(function(){return cB(n,s,r)}),null},Cre=fB(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[FA],i=[s],l="";typeof e.className=="string"?l=oB(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var o=Sw(i,void 0,g.useContext(ok));l+=t.key+"-"+o.name;var d={};for(var c in e)ck.call(e,c)&&c!=="css"&&c!==FA&&(d[c]=e[c]);return d.className=l,n&&(d.ref=n),g.createElement(g.Fragment,null,g.createElement(jre,{cache:t,serialized:o,isStringTag:typeof r=="string"}),g.createElement(r,d))}),Sre=Cre,uM=function(t,n){var s=arguments;if(n==null||!ck.call(n,"css"))return g.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=Sre,i[1]=Nre(t,n);for(var l=2;l<r;l++)i[l]=s[l];return g.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(uM||(uM={}));function dk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sw(t)}function Xp(){var e=dk.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var _re=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Are=iB(function(e){return _re.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Tre=Are,Ere=function(t){return t!=="theme"},mM=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Tre:Ere},fM=function(t,n,s){var r;if(n){var i=n.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},kre=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return lk(n,s,r),uB(function(){return cB(n,s,r)}),null},Lre=function e(t,n){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,l;n!==void 0&&(i=n.label,l=n.target);var o=fM(t,n,s),d=o||mM(r),c=!d("as");return function(){var m=arguments,h=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),m[0]==null||m[0].raw===void 0)h.push.apply(h,m);else{var p=m[0];h.push(p[0]);for(var b=m.length,w=1;w<b;w++)h.push(m[w],p[w])}var x=fB(function(v,j,C){var S=c&&v.as||r,_="",A=[],T=v;if(v.theme==null){T={};for(var E in v)T[E]=v[E];T.theme=g.useContext(ok)}typeof v.className=="string"?_=oB(j.registered,A,v.className):v.className!=null&&(_=v.className+" ");var D=Sw(h.concat(A),j.registered,T);_+=j.key+"-"+D.name,l!==void 0&&(_+=" "+l);var z=c&&o===void 0?mM(S):d,K={};for(var B in v)c&&B==="as"||z(B)&&(K[B]=v[B]);return K.className=_,C&&(K.ref=C),g.createElement(g.Fragment,null,g.createElement(kre,{cache:j,serialized:D,isStringTag:typeof S=="string"}),g.createElement(S,K))});return x.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",x.defaultProps=t.defaultProps,x.__emotion_real=x,x.__emotion_base=r,x.__emotion_styles=h,x.__emotion_forwardProp=o,Object.defineProperty(x,"toString",{value:function(){return"."+l}}),x.withComponent=function(v,j){var C=e(v,Ue({},n,j,{shouldForwardProp:fM(x,j,!0)}));return C.apply(void 0,h)},x}},Pre=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],BA=Lre.bind(null);Pre.forEach(function(e){BA[e]=BA(e)});function Dre(e,t){return BA(e,t)}function Ore(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const hM=[];function Gd(e){return hM[0]=e,Sw(hM)}const Mre=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,s)=>n.val-s.val),t.reduce((n,s)=>({...n,[s.key]:s.val}),{})};function Ire(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5,...r}=e,i=Mre(t),l=Object.keys(i);function o(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n})`}function d(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${n})`}function c(p,b){const w=l.indexOf(b);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n}) and (max-width:${(w!==-1&&typeof t[l[w]]=="number"?t[l[w]]:b)-s/100}${n})`}function m(p){return l.indexOf(p)+1<l.length?c(p,l[l.indexOf(p)+1]):o(p)}function h(p){const b=l.indexOf(p);return b===0?o(l[1]):b===l.length-1?d(l[b]):c(p,l[l.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:l,values:i,up:o,down:d,between:c,only:m,not:h,unit:n,...r}}const $re={borderRadius:4};function hB(e=8,t=ak({spacing:e})){if(e.mui)return e;const n=(...s)=>(s.length===0?[1]:s).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" ");return n.mui=!0,n}function Rre(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return n.palette.mode===e?t:{}}function uk(e={},...t){const{breakpoints:n={},palette:s={},spacing:r,shape:i={},...l}=e,o=Ire(n),d=hB(r);let c=jr({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:d,shape:{...$re,...i}},l);return c=Wne(c),c.applyStyles=Rre,c=t.reduce((m,h)=>jr(m,h),c),c.unstable_sxConfig={...Kp,...l?.unstable_sxConfig},c.unstable_sx=function(h){return af({sx:h,theme:this})},c}function zre(e){return Object.keys(e).length===0}function gB(e=null){const t=g.useContext(ok);return!t||zre(t)?e:t}const Ure=uk();function pB(e=Ure){return gB(e)}const gM=e=>e,Fre=()=>{let e=gM;return{configure(t){e=t},generate(t){return e(t)},reset(){e=gM}}},Bre=Fre(),Hre={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function En(e,t,n="Mui"){const s=Hre[t];return s?`${n}-${s}`:`${Bre.generate(e)}-${t}`}function mn(e,t,n="Mui"){const s={};return t.forEach(r=>{s[r]=En(e,r,n)}),s}function xB(e){const{variants:t,...n}=e,s={variants:t,style:Gd(n),isProcessed:!0};return s.style===n||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=Gd(r.style))}),s}const Gre=uk();function jb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Md(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Vre(e){return e?(t,n)=>n[e]:null}function Wre(e,t,n){e.theme=Kre(e.theme)?n:e.theme[t]||e.theme}function Cb(e,t,n){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>Cb(e,r,n));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=n?Md(s.style,n):s.style;else{const{variants:i,...l}=s;r=n?Md(Gd(l),n):l}return yB(e,s.variants,[r],n)}return s?.isProcessed?n?Md(Gd(s.style),n):s.style:n?Md(Gd(s),n):s}function yB(e,t,n=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const l=t[i];if(typeof l.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!l.props(r))continue}else for(const o in l.props)if(e[o]!==l.props[o]&&e.ownerState?.[o]!==l.props[o])continue e;typeof l.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},n.push(s?Md(Gd(l.style(r)),s):l.style(r))):n.push(s?Md(Gd(l.style),s):l.style)}return n}function qre(e={}){const{themeId:t,defaultTheme:n=Gre,rootShouldForwardProp:s=jb,slotShouldForwardProp:r=jb}=e;function i(o){Wre(o,t,n)}return(o,d={})=>{Ore(o,T=>T.filter(E=>E!==af));const{name:c,slot:m,skipVariantsResolver:h,skipSx:p,overridesResolver:b=Vre(Xre(m)),...w}=d,x=c&&c.startsWith("Mui")||m?"components":"custom",v=h!==void 0?h:m&&m!=="Root"&&m!=="root"||!1,j=p||!1;let C=jb;m==="Root"||m==="root"?C=s:m?C=r:Qre(o)&&(C=void 0);const S=Dre(o,{shouldForwardProp:C,label:Yre(),...w}),_=T=>{if(T.__emotion_real===T)return T;if(typeof T=="function")return function(D){return Cb(D,T,D.theme.modularCssLayers?x:void 0)};if(Zi(T)){const E=xB(T);return function(z){return E.variants?Cb(z,E,z.theme.modularCssLayers?x:void 0):z.theme.modularCssLayers?Md(E.style,x):E.style}}return T},A=(...T)=>{const E=[],D=T.map(_),z=[];if(E.push(i),c&&b&&z.push(function(L){const ae=L.theme.components?.[c]?.styleOverrides;if(!ae)return null;const W={};for(const q in ae)W[q]=Cb(L,ae[q],L.theme.modularCssLayers?"theme":void 0);return b(L,W)}),c&&!v&&z.push(function(L){const ae=L.theme?.components?.[c]?.variants;return ae?yB(L,ae,[],L.theme.modularCssLayers?"theme":void 0):null}),j||z.push(af),Array.isArray(D[0])){const O=D.shift(),L=new Array(E.length).fill(""),H=new Array(z.length).fill("");let ae;ae=[...L,...O,...H],ae.raw=[...L,...O.raw,...H],E.unshift(ae)}const K=[...E,...D,...z],B=S(...K);return o.muiName&&(B.muiName=o.muiName),B};return S.withConfig&&(A.withConfig=S.withConfig),A}}function Yre(e,t){return void 0}function Kre(e){for(const t in e)return!1;return!0}function Qre(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Xre(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function ru(e,t,n=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const l=e[i],o=t[i];if(!o)s[i]=l||{};else if(!l)s[i]=o;else{s[i]={...o};for(const d in l)if(Object.prototype.hasOwnProperty.call(l,d)){const c=d;s[i][c]=ru(l[c],o[c],n)}}}else i==="className"&&n&&t.className?s.className=Et(e?.className,t?.className):i==="style"&&n&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function bB(e){const{theme:t,name:n,props:s}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?s:ru(t.components[n].defaultProps,s)}function Zre({props:e,name:t,defaultTheme:n,themeId:s}){let r=pB(n);return r=r[s]||r,bB({theme:r,name:t,props:e})}const Un=typeof window<"u"?g.useLayoutEffect:g.useEffect;function Jre(e,t,n,s,r){const[i,l]=g.useState(()=>r&&n?n(e).matches:s?s(e).matches:t);return Un(()=>{if(!n)return;const o=n(e),d=()=>{l(o.matches)};return d(),o.addEventListener("change",d),()=>{o.removeEventListener("change",d)}},[e,n]),i}const eie={...Zd},vB=eie.useSyncExternalStore;function tie(e,t,n,s,r){const i=g.useCallback(()=>t,[t]),l=g.useMemo(()=>{if(r&&n)return()=>n(e).matches;if(s!==null){const{matches:m}=s(e);return()=>m}return i},[i,e,s,r,n]),[o,d]=g.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const m=n(e);return[()=>m.matches,h=>(m.addEventListener("change",h),()=>{m.removeEventListener("change",h)})]},[i,n,e]);return vB(d,o,l)}function wB(e={}){const{themeId:t}=e;return function(s,r={}){let i=gB();i&&t&&(i=i[t]||i);const l=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:o=!1,matchMedia:d=l?window.matchMedia:null,ssrMatchMedia:c=null,noSsr:m=!1}=bB({name:"MuiUseMediaQuery",props:r,theme:i});let h=typeof s=="function"?s(i):s;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(vB!==void 0?tie:Jre)(h,o,d,c,m)}}wB();function aie(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function mk(e,t=0,n=1){return aie(e,t,n)}function nie(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function Pc(e){if(e.type)return e;if(e.charAt(0)==="#")return Pc(nie(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(su(9,e));let s=e.substring(t+1,e.length-1),r;if(n==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(su(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:n,values:s,colorSpace:r}}const sie=e=>{const t=Pc(e);return t.values.slice(0,3).map((n,s)=>t.type.includes("hsl")&&s!==0?`${n}%`:n).join(" ")},_g=(e,t)=>{try{return sie(e)}catch{return e}};function _w(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function NB(e){e=Pc(e);const{values:t}=e,n=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),l=(c,m=(c+n/30)%12)=>r-i*Math.max(Math.min(m-3,9-m,1),-1);let o="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(o+="a",d.push(t[3])),_w({type:o,values:d})}function HA(e){e=Pc(e);let t=e.type==="hsl"||e.type==="hsla"?Pc(NB(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function rie(e,t){const n=HA(e),s=HA(t);return(Math.max(n,s)+.05)/(Math.min(n,s)+.05)}function jB(e,t){return e=Pc(e),t=mk(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,_w(e)}function dd(e,t,n){try{return jB(e,t)}catch{return e}}function Aw(e,t){if(e=Pc(e),t=mk(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return _w(e)}function Na(e,t,n){try{return Aw(e,t)}catch{return e}}function Tw(e,t){if(e=Pc(e),t=mk(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return _w(e)}function ja(e,t,n){try{return Tw(e,t)}catch{return e}}function iie(e,t=.15){return HA(e)>.5?Aw(e,t):Tw(e,t)}function cy(e,t,n){try{return iie(e,t)}catch{return e}}const lie=g.createContext(),Zp=()=>g.useContext(lie)??!1,oie=g.createContext(void 0);function cie(e){const{theme:t,name:n,props:s}=e;if(!t||!t.components||!t.components[n])return s;const r=t.components[n];return r.defaultProps?ru(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?ru(r,s,t.components.mergeClassNameAndStyle):s}function die({props:e,name:t}){const n=g.useContext(oie);return cie({props:e,name:t,theme:{components:n}})}let pM=0;function uie(e){const[t,n]=g.useState(e),s=e||t;return g.useEffect(()=>{t==null&&(pM+=1,n(`mui-${pM}`))},[t]),s}const mie={...Zd},xM=mie.useId;function Ew(e){if(xM!==void 0){const t=xM();return e??t}return uie(e)}const yM={theme:void 0};function fie(e){let t,n;return function(r){let i=t;return(i===void 0||r.theme!==n)&&(yM.theme=r.theme,i=xB(e(yM)),t=i,n=r.theme),i}}function hie(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const bM=(e,t,n,s=[])=>{let r=e;t.forEach((i,l)=>{l===t.length-1?Array.isArray(r)?r[Number(i)]=n:r&&typeof r=="object"&&(r[i]=n):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},gie=(e,t,n)=>{function s(r,i=[],l=[]){Object.entries(r).forEach(([o,d])=>{(!n||n&&!n([...i,o]))&&d!=null&&(typeof d=="object"&&Object.keys(d).length>0?s(d,[...i,o],Array.isArray(d)?[...l,o]:l):t([...i,o],d,l))})}s(e)},pie=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function KC(e,t){const{prefix:n,shouldSkipGeneratingVar:s}=t||{},r={},i={},l={};return gie(e,(o,d,c)=>{if((typeof d=="string"||typeof d=="number")&&(!s||!s(o,d))){const m=`--${n?`${n}-`:""}${o.join("-")}`,h=pie(o,d);Object.assign(r,{[m]:h}),bM(i,o,`var(${m})`,c),bM(l,o,`var(${m}, ${h})`,c)}},o=>o[0]==="vars"),{css:r,vars:i,varsWithDefaults:l}}function xie(e,t={}){const{getSelector:n=j,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:l={},components:o,defaultColorScheme:d="light",...c}=e,{vars:m,css:h,varsWithDefaults:p}=KC(c,t);let b=p;const w={},{[d]:x,...v}=l;if(Object.entries(v||{}).forEach(([_,A])=>{const{vars:T,css:E,varsWithDefaults:D}=KC(A,t);b=jr(b,D),w[_]={css:E,vars:T}}),x){const{css:_,vars:A,varsWithDefaults:T}=KC(x,t);b=jr(b,T),w[d]={css:_,vars:A}}function j(_,A){let T=r;if(r==="class"&&(T=".%s"),r==="data"&&(T="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(T=`[${r}="%s"]`),_){if(T==="media")return e.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${l[_]?.palette?.mode||_})`]:{":root":A}};if(T)return e.defaultColorScheme===_?`:root, ${T.replace("%s",String(_))}`:T.replace("%s",String(_))}return":root"}return{vars:b,generateThemeVars:()=>{let _={...m};return Object.entries(w).forEach(([,{vars:A}])=>{_=jr(_,A)}),_},generateStyleSheets:()=>{const _=[],A=e.defaultColorScheme||"light";function T(z,K){Object.keys(K).length&&_.push(typeof z=="string"?{[z]:{...K}}:z)}T(n(void 0,{...h}),h);const{[A]:E,...D}=w;if(E){const{css:z}=E,K=l[A]?.palette?.mode,B=!s&&K?{colorScheme:K,...z}:{...z};T(n(A,{...B}),B)}return Object.entries(D).forEach(([z,{css:K}])=>{const B=l[z]?.palette?.mode,O=!s&&B?{colorScheme:B,...K}:{...K};T(n(z,{...O}),O)}),i&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function yie(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const ap={black:"#000",white:"#fff"},bie={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},pm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},xm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},zh={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},ym={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},bm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},vm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function CB(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ap.white,default:ap.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const SB=CB();function _B(){return{text:{primary:ap.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ap.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const GA=_B();function vM(e,t,n,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Tw(e.main,r):t==="dark"&&(e.dark=Aw(e.main,i)))}function wM(e,t,n,s,r){const i=r.light||r,l=r.dark||r*1.5;t[n]||(t.hasOwnProperty(s)?t[n]=t[s]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(l*100).toFixed(0)}%)`))}function vie(e="light"){return e==="dark"?{main:ym[200],light:ym[50],dark:ym[400]}:{main:ym[700],light:ym[400],dark:ym[800]}}function wie(e="light"){return e==="dark"?{main:pm[200],light:pm[50],dark:pm[400]}:{main:pm[500],light:pm[300],dark:pm[700]}}function Nie(e="light"){return e==="dark"?{main:xm[500],light:xm[300],dark:xm[700]}:{main:xm[700],light:xm[400],dark:xm[800]}}function jie(e="light"){return e==="dark"?{main:bm[400],light:bm[300],dark:bm[700]}:{main:bm[700],light:bm[500],dark:bm[900]}}function Cie(e="light"){return e==="dark"?{main:vm[400],light:vm[300],dark:vm[700]}:{main:vm[800],light:vm[500],dark:vm[900]}}function Sie(e="light"){return e==="dark"?{main:zh[400],light:zh[300],dark:zh[700]}:{main:"#ed6c02",light:zh[500],dark:zh[900]}}function _ie(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function fk(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2,colorSpace:r,...i}=e,l=e.primary||vie(t),o=e.secondary||wie(t),d=e.error||Nie(t),c=e.info||jie(t),m=e.success||Cie(t),h=e.warning||Sie(t);function p(v){return r?_ie(v):rie(v,GA.text.primary)>=n?GA.text.primary:SB.text.primary}const b=({color:v,name:j,mainShade:C=500,lightShade:S=300,darkShade:_=700})=>{if(v={...v},!v.main&&v[C]&&(v.main=v[C]),!v.hasOwnProperty("main"))throw new Error(su(11,j?` (${j})`:"",C));if(typeof v.main!="string")throw new Error(su(12,j?` (${j})`:"",JSON.stringify(v.main)));return r?(wM(r,v,"light",S,s),wM(r,v,"dark",_,s)):(vM(v,"light",S,s),vM(v,"dark",_,s)),v.contrastText||(v.contrastText=p(v.main)),v};let w;return t==="light"?w=CB():t==="dark"&&(w=_B()),jr({common:{...ap},mode:t,primary:b({color:l,name:"primary"}),secondary:b({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:b({color:d,name:"error"}),warning:b({color:h,name:"warning"}),info:b({color:c,name:"info"}),success:b({color:m,name:"success"}),grey:bie,contrastThreshold:n,getContrastText:p,augmentColor:b,tonalOffset:s,...w},i)}function Aie(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Tie(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Eie(e){return Math.round(e*1e5)/1e5}const NM={textTransform:"uppercase"},jM='"Roboto", "Helvetica", "Arial", sans-serif';function kie(e,t){const{fontFamily:n=jM,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:l=500,fontWeightBold:o=700,htmlFontSize:d=16,allVariants:c,pxToRem:m,...h}=typeof t=="function"?t(e):t,p=s/14,b=m||(v=>`${v/d*p}rem`),w=(v,j,C,S,_)=>({fontFamily:n,fontWeight:v,fontSize:b(j),lineHeight:C,...n===jM?{letterSpacing:`${Eie(S/j)}em`}:{},..._,...c}),x={h1:w(r,96,1.167,-1.5),h2:w(r,60,1.2,-.5),h3:w(i,48,1.167,0),h4:w(i,34,1.235,.25),h5:w(i,24,1.334,0),h6:w(l,20,1.6,.15),subtitle1:w(i,16,1.75,.15),subtitle2:w(l,14,1.57,.1),body1:w(i,16,1.5,.15),body2:w(i,14,1.43,.15),button:w(l,14,1.75,.4,NM),caption:w(i,12,1.66,.4),overline:w(i,12,2.66,1,NM),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return jr({htmlFontSize:d,pxToRem:b,fontFamily:n,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:l,fontWeightBold:o,...x},h,{clone:!1})}const Lie=.2,Pie=.14,Die=.12;function Wa(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Lie})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Pie})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Die})`].join(",")}const Oie=["none",Wa(0,2,1,-1,0,1,1,0,0,1,3,0),Wa(0,3,1,-2,0,2,2,0,0,1,5,0),Wa(0,3,3,-2,0,3,4,0,0,1,8,0),Wa(0,2,4,-1,0,4,5,0,0,1,10,0),Wa(0,3,5,-1,0,5,8,0,0,1,14,0),Wa(0,3,5,-1,0,6,10,0,0,1,18,0),Wa(0,4,5,-2,0,7,10,1,0,2,16,1),Wa(0,5,5,-3,0,8,10,1,0,3,14,2),Wa(0,5,6,-3,0,9,12,1,0,3,16,2),Wa(0,6,6,-3,0,10,14,1,0,4,18,3),Wa(0,6,7,-4,0,11,15,1,0,4,20,3),Wa(0,7,8,-4,0,12,17,2,0,5,22,4),Wa(0,7,8,-4,0,13,19,2,0,5,24,4),Wa(0,7,9,-4,0,14,21,2,0,5,26,4),Wa(0,8,9,-5,0,15,22,2,0,6,28,5),Wa(0,8,10,-5,0,16,24,2,0,6,30,5),Wa(0,8,11,-5,0,17,26,2,0,6,32,5),Wa(0,9,11,-5,0,18,28,2,0,7,34,6),Wa(0,9,12,-6,0,19,29,2,0,7,36,6),Wa(0,10,13,-6,0,20,31,3,0,8,38,7),Wa(0,10,13,-6,0,21,33,3,0,8,40,7),Wa(0,10,14,-6,0,22,35,3,0,8,42,7),Wa(0,11,14,-7,0,23,36,3,0,9,44,8),Wa(0,11,15,-7,0,24,38,3,0,9,46,8)],Mie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Iie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function CM(e){return`${Math.round(e)}ms`}function $ie(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Rie(e){const t={...Mie,...e.easing},n={...Iie,...e.duration};return{getAutoHeightDuration:$ie,create:(r=["all"],i={})=>{const{duration:l=n.standard,easing:o=t.easeInOut,delay:d=0,...c}=i;return(Array.isArray(r)?r:[r]).map(m=>`${m} ${typeof l=="string"?l:CM(l)} ${o} ${typeof d=="string"?d:CM(d)}`).join(",")},...e,easing:t,duration:n}}const zie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Uie(e){return Zi(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function AB(e={}){const t={...e};function n(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[l,o]=r[i];!Uie(o)||l.startsWith("unstable_")?delete s[l]:Zi(o)&&(s[l]={...o},n(s[l]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function SM(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const Fie=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let s=0;s<t.length;s+=1)n+=+t[s];return n};function Bie(e){Object.assign(e,{alpha(t,n){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:jB(t,Fie(n))},lighten(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${SM(n)})`:Tw(t,n)},darken(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${SM(n)})`:Aw(t,n)}})}function VA(e={},...t){const{breakpoints:n,mixins:s={},spacing:r,palette:i={},transitions:l={},typography:o={},shape:d,colorSpace:c,...m}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(su(20));const h=fk({...i,colorSpace:c}),p=uk(e);let b=jr(p,{mixins:Tie(p.breakpoints,s),palette:h,shadows:Oie.slice(),typography:kie(h,o),transitions:Rie(l),zIndex:{...zie}});return b=jr(b,m),b=t.reduce((w,x)=>jr(w,x),b),b.unstable_sxConfig={...Kp,...m?.unstable_sxConfig},b.unstable_sx=function(x){return af({sx:x,theme:this})},b.toRuntimeSource=AB,Bie(b),b}function Hie(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Gie=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Hie(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function TB(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function EB(e){return e==="dark"?Gie:[]}function Vie(e){const{palette:t={mode:"light"},opacity:n,overlays:s,colorSpace:r,...i}=e,l=fk({...t,colorSpace:r});return{palette:l,opacity:{...TB(l.mode),...n},overlays:s||EB(l.mode),...i}}function Wie(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const qie=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Yie=e=>(t,n)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const l={};return qie(e.cssVarPrefix).forEach(o=>{l[o]=n[o],delete n[o]}),i==="media"?{[s]:n,"@media (prefers-color-scheme: dark)":{[s]:l}}:i?{[i.replace("%s",t)]:l,[`${s}, ${i.replace("%s",t)}`]:n}:{[s]:{...n,...l}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:n}};if(i)return i.replace("%s",String(t))}return s};function Kie(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function lt(e,t,n){!e[t]&&n&&(e[t]=n)}function Ag(e){return typeof e!="string"||!e.startsWith("hsl")?e:NB(e)}function zl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=_g(Ag(e[t])))}function Qie(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Hi=e=>{try{return e()}catch{}},Xie=(e="mui")=>hie(e);function QC(e,t,n,s,r){if(!n)return;n=n===!0?{}:n;const i=r==="dark"?"dark":"light";if(!s){t[r]=Vie({...n,palette:{mode:i,...n?.palette},colorSpace:e});return}const{palette:l,...o}=VA({...s,palette:{mode:i,...n?.palette},colorSpace:e});return t[r]={...n,palette:l,opacity:{...TB(i),...n?.opacity},overlays:n?.overlays||EB(i)},o}function Zie(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:l=!1,shouldSkipGeneratingVar:o=Wie,colorSchemeSelector:d=n.light&&n.dark?"media":void 0,rootSelector:c=":root",...m}=e,h=Object.keys(n)[0],p=s||(n.light&&h!=="light"?"light":h),b=Xie(i),{[p]:w,light:x,dark:v,...j}=n,C={...j};let S=w;if((p==="dark"&&!("dark"in n)||p==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(su(21,p));let _;l&&(_="oklch");const A=QC(_,C,S,m,p);x&&!C.light&&QC(_,C,x,void 0,"light"),v&&!C.dark&&QC(_,C,v,void 0,"dark");let T={defaultColorScheme:p,...A,cssVarPrefix:i,colorSchemeSelector:d,rootSelector:c,getCssVar:b,colorSchemes:C,font:{...Aie(A.typography),...A.font},spacing:Qie(m.spacing)};Object.keys(T.colorSchemes).forEach(B=>{const O=T.colorSchemes[B].palette,L=ae=>{const W=ae.split("-"),q=W[1],le=W[2];return b(ae,O[q][le])};O.mode==="light"&&(lt(O.common,"background","#fff"),lt(O.common,"onBackground","#000")),O.mode==="dark"&&(lt(O.common,"background","#000"),lt(O.common,"onBackground","#fff"));function H(ae,W,q){if(_){let le;return ae===dd&&(le=`transparent ${((1-q)*100).toFixed(0)}%`),ae===Na&&(le=`#000 ${(q*100).toFixed(0)}%`),ae===ja&&(le=`#fff ${(q*100).toFixed(0)}%`),`color-mix(in ${_}, ${W}, ${le})`}return ae(W,q)}if(Kie(O,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),O.mode==="light"){lt(O.Alert,"errorColor",H(Na,O.error.light,.6)),lt(O.Alert,"infoColor",H(Na,O.info.light,.6)),lt(O.Alert,"successColor",H(Na,O.success.light,.6)),lt(O.Alert,"warningColor",H(Na,O.warning.light,.6)),lt(O.Alert,"errorFilledBg",L("palette-error-main")),lt(O.Alert,"infoFilledBg",L("palette-info-main")),lt(O.Alert,"successFilledBg",L("palette-success-main")),lt(O.Alert,"warningFilledBg",L("palette-warning-main")),lt(O.Alert,"errorFilledColor",Hi(()=>O.getContrastText(O.error.main))),lt(O.Alert,"infoFilledColor",Hi(()=>O.getContrastText(O.info.main))),lt(O.Alert,"successFilledColor",Hi(()=>O.getContrastText(O.success.main))),lt(O.Alert,"warningFilledColor",Hi(()=>O.getContrastText(O.warning.main))),lt(O.Alert,"errorStandardBg",H(ja,O.error.light,.9)),lt(O.Alert,"infoStandardBg",H(ja,O.info.light,.9)),lt(O.Alert,"successStandardBg",H(ja,O.success.light,.9)),lt(O.Alert,"warningStandardBg",H(ja,O.warning.light,.9)),lt(O.Alert,"errorIconColor",L("palette-error-main")),lt(O.Alert,"infoIconColor",L("palette-info-main")),lt(O.Alert,"successIconColor",L("palette-success-main")),lt(O.Alert,"warningIconColor",L("palette-warning-main")),lt(O.AppBar,"defaultBg",L("palette-grey-100")),lt(O.Avatar,"defaultBg",L("palette-grey-400")),lt(O.Button,"inheritContainedBg",L("palette-grey-300")),lt(O.Button,"inheritContainedHoverBg",L("palette-grey-A100")),lt(O.Chip,"defaultBorder",L("palette-grey-400")),lt(O.Chip,"defaultAvatarColor",L("palette-grey-700")),lt(O.Chip,"defaultIconColor",L("palette-grey-700")),lt(O.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),lt(O.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),lt(O.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),lt(O.LinearProgress,"primaryBg",H(ja,O.primary.main,.62)),lt(O.LinearProgress,"secondaryBg",H(ja,O.secondary.main,.62)),lt(O.LinearProgress,"errorBg",H(ja,O.error.main,.62)),lt(O.LinearProgress,"infoBg",H(ja,O.info.main,.62)),lt(O.LinearProgress,"successBg",H(ja,O.success.main,.62)),lt(O.LinearProgress,"warningBg",H(ja,O.warning.main,.62)),lt(O.Skeleton,"bg",_?H(dd,O.text.primary,.11):`rgba(${L("palette-text-primaryChannel")} / 0.11)`),lt(O.Slider,"primaryTrack",H(ja,O.primary.main,.62)),lt(O.Slider,"secondaryTrack",H(ja,O.secondary.main,.62)),lt(O.Slider,"errorTrack",H(ja,O.error.main,.62)),lt(O.Slider,"infoTrack",H(ja,O.info.main,.62)),lt(O.Slider,"successTrack",H(ja,O.success.main,.62)),lt(O.Slider,"warningTrack",H(ja,O.warning.main,.62));const ae=_?H(Na,O.background.default,.6825):cy(O.background.default,.8);lt(O.SnackbarContent,"bg",ae),lt(O.SnackbarContent,"color",Hi(()=>_?GA.text.primary:O.getContrastText(ae))),lt(O.SpeedDialAction,"fabHoverBg",cy(O.background.paper,.15)),lt(O.StepConnector,"border",L("palette-grey-400")),lt(O.StepContent,"border",L("palette-grey-400")),lt(O.Switch,"defaultColor",L("palette-common-white")),lt(O.Switch,"defaultDisabledColor",L("palette-grey-100")),lt(O.Switch,"primaryDisabledColor",H(ja,O.primary.main,.62)),lt(O.Switch,"secondaryDisabledColor",H(ja,O.secondary.main,.62)),lt(O.Switch,"errorDisabledColor",H(ja,O.error.main,.62)),lt(O.Switch,"infoDisabledColor",H(ja,O.info.main,.62)),lt(O.Switch,"successDisabledColor",H(ja,O.success.main,.62)),lt(O.Switch,"warningDisabledColor",H(ja,O.warning.main,.62)),lt(O.TableCell,"border",H(ja,H(dd,O.divider,1),.88)),lt(O.Tooltip,"bg",H(dd,O.grey[700],.92))}if(O.mode==="dark"){lt(O.Alert,"errorColor",H(ja,O.error.light,.6)),lt(O.Alert,"infoColor",H(ja,O.info.light,.6)),lt(O.Alert,"successColor",H(ja,O.success.light,.6)),lt(O.Alert,"warningColor",H(ja,O.warning.light,.6)),lt(O.Alert,"errorFilledBg",L("palette-error-dark")),lt(O.Alert,"infoFilledBg",L("palette-info-dark")),lt(O.Alert,"successFilledBg",L("palette-success-dark")),lt(O.Alert,"warningFilledBg",L("palette-warning-dark")),lt(O.Alert,"errorFilledColor",Hi(()=>O.getContrastText(O.error.dark))),lt(O.Alert,"infoFilledColor",Hi(()=>O.getContrastText(O.info.dark))),lt(O.Alert,"successFilledColor",Hi(()=>O.getContrastText(O.success.dark))),lt(O.Alert,"warningFilledColor",Hi(()=>O.getContrastText(O.warning.dark))),lt(O.Alert,"errorStandardBg",H(Na,O.error.light,.9)),lt(O.Alert,"infoStandardBg",H(Na,O.info.light,.9)),lt(O.Alert,"successStandardBg",H(Na,O.success.light,.9)),lt(O.Alert,"warningStandardBg",H(Na,O.warning.light,.9)),lt(O.Alert,"errorIconColor",L("palette-error-main")),lt(O.Alert,"infoIconColor",L("palette-info-main")),lt(O.Alert,"successIconColor",L("palette-success-main")),lt(O.Alert,"warningIconColor",L("palette-warning-main")),lt(O.AppBar,"defaultBg",L("palette-grey-900")),lt(O.AppBar,"darkBg",L("palette-background-paper")),lt(O.AppBar,"darkColor",L("palette-text-primary")),lt(O.Avatar,"defaultBg",L("palette-grey-600")),lt(O.Button,"inheritContainedBg",L("palette-grey-800")),lt(O.Button,"inheritContainedHoverBg",L("palette-grey-700")),lt(O.Chip,"defaultBorder",L("palette-grey-700")),lt(O.Chip,"defaultAvatarColor",L("palette-grey-300")),lt(O.Chip,"defaultIconColor",L("palette-grey-300")),lt(O.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),lt(O.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),lt(O.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),lt(O.LinearProgress,"primaryBg",H(Na,O.primary.main,.5)),lt(O.LinearProgress,"secondaryBg",H(Na,O.secondary.main,.5)),lt(O.LinearProgress,"errorBg",H(Na,O.error.main,.5)),lt(O.LinearProgress,"infoBg",H(Na,O.info.main,.5)),lt(O.LinearProgress,"successBg",H(Na,O.success.main,.5)),lt(O.LinearProgress,"warningBg",H(Na,O.warning.main,.5)),lt(O.Skeleton,"bg",_?H(dd,O.text.primary,.13):`rgba(${L("palette-text-primaryChannel")} / 0.13)`),lt(O.Slider,"primaryTrack",H(Na,O.primary.main,.5)),lt(O.Slider,"secondaryTrack",H(Na,O.secondary.main,.5)),lt(O.Slider,"errorTrack",H(Na,O.error.main,.5)),lt(O.Slider,"infoTrack",H(Na,O.info.main,.5)),lt(O.Slider,"successTrack",H(Na,O.success.main,.5)),lt(O.Slider,"warningTrack",H(Na,O.warning.main,.5));const ae=_?H(ja,O.background.default,.985):cy(O.background.default,.98);lt(O.SnackbarContent,"bg",ae),lt(O.SnackbarContent,"color",Hi(()=>_?SB.text.primary:O.getContrastText(ae))),lt(O.SpeedDialAction,"fabHoverBg",cy(O.background.paper,.15)),lt(O.StepConnector,"border",L("palette-grey-600")),lt(O.StepContent,"border",L("palette-grey-600")),lt(O.Switch,"defaultColor",L("palette-grey-300")),lt(O.Switch,"defaultDisabledColor",L("palette-grey-600")),lt(O.Switch,"primaryDisabledColor",H(Na,O.primary.main,.55)),lt(O.Switch,"secondaryDisabledColor",H(Na,O.secondary.main,.55)),lt(O.Switch,"errorDisabledColor",H(Na,O.error.main,.55)),lt(O.Switch,"infoDisabledColor",H(Na,O.info.main,.55)),lt(O.Switch,"successDisabledColor",H(Na,O.success.main,.55)),lt(O.Switch,"warningDisabledColor",H(Na,O.warning.main,.55)),lt(O.TableCell,"border",H(Na,H(dd,O.divider,1),.68)),lt(O.Tooltip,"bg",H(dd,O.grey[700],.92))}zl(O.background,"default"),zl(O.background,"paper"),zl(O.common,"background"),zl(O.common,"onBackground"),zl(O,"divider"),Object.keys(O).forEach(ae=>{const W=O[ae];ae!=="tonalOffset"&&W&&typeof W=="object"&&(W.main&&lt(O[ae],"mainChannel",_g(Ag(W.main))),W.light&&lt(O[ae],"lightChannel",_g(Ag(W.light))),W.dark&&lt(O[ae],"darkChannel",_g(Ag(W.dark))),W.contrastText&&lt(O[ae],"contrastTextChannel",_g(Ag(W.contrastText))),ae==="text"&&(zl(O[ae],"primary"),zl(O[ae],"secondary")),ae==="action"&&(W.active&&zl(O[ae],"active"),W.selected&&zl(O[ae],"selected")))})}),T=t.reduce((B,O)=>jr(B,O),T);const E={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:o,getSelector:Yie(T),enableContrastVars:l},{vars:D,generateThemeVars:z,generateStyleSheets:K}=xie(T,E);return T.vars=D,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([B,O])=>{T[B]=O}),T.generateThemeVars=z,T.generateStyleSheets=K,T.generateSpacing=function(){return hB(m.spacing,ak(this))},T.getColorSchemeSelector=yie(d),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=o,T.unstable_sxConfig={...Kp,...m?.unstable_sxConfig},T.unstable_sx=function(O){return af({sx:O,theme:this})},T.toRuntimeSource=AB,T}function _M(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:fk({...n===!0?{}:n.palette,mode:t})})}function Jie(e={},...t){const{palette:n,cssVariables:s=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:i=n?.mode,...l}=e,o=i||"light",d=r?.[o],c={...r,...n?{[o]:{...typeof d!="boolean"&&d,palette:n}}:void 0};if(s===!1){if(!("colorSchemes"in e))return VA(e,...t);let m=n;"palette"in e||c[o]&&(c[o]!==!0?m=c[o].palette:o==="dark"&&(m={mode:"dark"}));const h=VA({...e,palette:m},...t);return h.defaultColorScheme=o,h.colorSchemes=c,h.palette.mode==="light"&&(h.colorSchemes.light={...c.light!==!0&&c.light,palette:h.palette},_M(h,"dark",c.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...c.dark!==!0&&c.dark,palette:h.palette},_M(h,"light",c.light)),h}return!n&&!("light"in c)&&o==="light"&&(c.light=!0),Zie({...l,colorSchemes:c,defaultColorScheme:o,...typeof s!="boolean"&&s},...t)}const hk=Jie(),kw="$$material";function xl(){const e=pB(hk);return e[kw]||e}function ele(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const kB=e=>ele(e)&&e!=="classes",Qt=qre({themeId:kw,defaultTheme:hk,rootShouldForwardProp:kB});function tle(){return Mse}function Uc(e){return die(e)}function ml(...e){const t=g.useRef(void 0),n=g.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const l=i,o=l(s);return typeof o=="function"?o:()=>{l(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return g.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=n(s))},e)}function ale(e){return typeof e=="string"}function LB(e,t,n){return e===void 0||ale(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function PB(e,t,n){return typeof e=="function"?e(t,n):e}function nle(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{n[s]=e[s]}),n}function AM(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function DB(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const b=Et(n?.className,i,r?.className,s?.className),w={...n?.style,...r?.style,...s?.style},x={...n,...r,...s};return b.length>0&&(x.className=b),Object.keys(w).length>0&&(x.style=w),{props:x,internalRef:void 0}}const l=nle({...r,...s}),o=AM(s),d=AM(r),c=t(l),m=Et(c?.className,n?.className,i,r?.className,s?.className),h={...c?.style,...n?.style,...r?.style,...s?.style},p={...c,...n,...d,...o};return m.length>0&&(p.className=m),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:c.ref}}function TM(e,t){const{className:n,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:l,shouldForwardComponentProp:o=!1,...d}=t,{component:c,slots:m={[e]:void 0},slotProps:h={[e]:void 0},...p}=i,b=m[e]||s,w=PB(h[e],r),{props:{component:x,...v},internalRef:j}=DB({className:n,...d,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:w}),C=ml(j,w?.ref,t.ref),S=e==="root"?x||c:x,_=LB(b,{...e==="root"&&!c&&!m[e]&&l,...e!=="root"&&!m[e]&&l,...v,...S&&!o&&{as:S},...S&&o&&{component:S},ref:C},r);return[b,_]}function aa(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function WA(e,t){return WA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},WA(e,t)}function OB(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,WA(e,t)}const EM={disabled:!1},Ub=pt.createContext(null);var sle=function(t){return t.scrollTop},Tg="unmounted",jd="exited",Cd="entering",Rm="entered",qA="exiting",_o=(function(e){OB(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=r,o=l&&!l.isMounting?s.enter:s.appear,d;return i.appearStatus=null,s.in?o?(d=jd,i.appearStatus=Cd):d=Rm:s.unmountOnExit||s.mountOnEnter?d=Tg:d=jd,i.state={status:d},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var l=r.in;return l&&i.status===Tg?{status:jd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var i=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==Cd&&l!==Rm&&(i=Cd):(l===Cd||l===Rm)&&(i=qA)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,i,l,o;return i=l=o=r,r!=null&&typeof r!="number"&&(i=r.exit,l=r.enter,o=r.appear!==void 0?r.appear:l),{exit:i,enter:l,appear:o}},n.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Cd){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:ry.findDOMNode(this);l&&sle(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===jd&&this.setState({status:Tg})},n.performEnter=function(r){var i=this,l=this.props.enter,o=this.context?this.context.isMounting:r,d=this.props.nodeRef?[o]:[ry.findDOMNode(this),o],c=d[0],m=d[1],h=this.getTimeouts(),p=o?h.appear:h.enter;if(!r&&!l||EM.disabled){this.safeSetState({status:Rm},function(){i.props.onEntered(c)});return}this.props.onEnter(c,m),this.safeSetState({status:Cd},function(){i.props.onEntering(c,m),i.onTransitionEnd(p,function(){i.safeSetState({status:Rm},function(){i.props.onEntered(c,m)})})})},n.performExit=function(){var r=this,i=this.props.exit,l=this.getTimeouts(),o=this.props.nodeRef?void 0:ry.findDOMNode(this);if(!i||EM.disabled){this.safeSetState({status:jd},function(){r.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:qA},function(){r.props.onExiting(o),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:jd},function(){r.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},n.setNextCallback=function(r){var i=this,l=!0;return this.nextCallback=function(o){l&&(l=!1,i.nextCallback=null,r(o))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,i){this.setNextCallback(i);var l=this.props.nodeRef?this.props.nodeRef.current:ry.findDOMNode(this),o=r==null&&!this.props.addEndListener;if(!l||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],c=d[0],m=d[1];this.props.addEndListener(c,m)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Tg)return null;var i=this.props,l=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var o=aa(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return pt.createElement(Ub.Provider,{value:null},typeof l=="function"?l(r,o):pt.cloneElement(pt.Children.only(l),o))},t})(pt.Component);_o.contextType=Ub;_o.propTypes={};function wm(){}_o.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:wm,onEntering:wm,onEntered:wm,onExit:wm,onExiting:wm,onExited:wm};_o.UNMOUNTED=Tg;_o.EXITED=jd;_o.ENTERING=Cd;_o.ENTERED=Rm;_o.EXITING=qA;function rle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gk(e,t){var n=function(i){return t&&g.isValidElement(i)?t(i):i},s=Object.create(null);return e&&g.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=n(r)}),s}function ile(e,t){e=e||{},t=t||{};function n(m){return m in t?t[m]:e[m]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var l,o={};for(var d in t){if(s[d])for(l=0;l<s[d].length;l++){var c=s[d][l];o[s[d][l]]=n(c)}o[d]=n(d)}for(l=0;l<r.length;l++)o[r[l]]=n(r[l]);return o}function Id(e,t,n){return n[t]!=null?n[t]:e.props[t]}function lle(e,t){return gk(e.children,function(n){return g.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Id(n,"appear",e),enter:Id(n,"enter",e),exit:Id(n,"exit",e)})})}function ole(e,t,n){var s=gk(e.children),r=ile(t,s);return Object.keys(r).forEach(function(i){var l=r[i];if(g.isValidElement(l)){var o=i in t,d=i in s,c=t[i],m=g.isValidElement(c)&&!c.props.in;d&&(!o||m)?r[i]=g.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Id(l,"exit",e),enter:Id(l,"enter",e)}):!d&&o&&!m?r[i]=g.cloneElement(l,{in:!1}):d&&o&&g.isValidElement(c)&&(r[i]=g.cloneElement(l,{onExited:n.bind(null,l),in:c.props.in,exit:Id(l,"exit",e),enter:Id(l,"enter",e)}))}}),r}var cle=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},dle={component:"div",childFactory:function(t){return t}},pk=(function(e){OB(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var l=i.handleExited.bind(rle(i));return i.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var l=i.children,o=i.handleExited,d=i.firstRender;return{children:d?lle(r,o):ole(r,l,o),firstRender:!1}},n.handleExited=function(r,i){var l=gk(this.props.children);r.key in l||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(o){var d=Ue({},o.children);return delete d[r.key],{children:d}}))},n.render=function(){var r=this.props,i=r.component,l=r.childFactory,o=aa(r,["component","childFactory"]),d=this.state.contextValue,c=cle(this.state.children).map(l);return delete o.appear,delete o.enter,delete o.exit,i===null?pt.createElement(Ub.Provider,{value:d},c):pt.createElement(Ub.Provider,{value:d},pt.createElement(i,o,c))},t})(pt.Component);pk.propTypes={};pk.defaultProps=dle;function MB(e){return parseInt(g.version,10)>=19?e?.props?.ref||null:e?.ref||null}const ule=e=>e.scrollTop;function kM(e,t){const{timeout:n,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const mle={entering:{opacity:1},entered:{opacity:1}},fle=g.forwardRef(function(t,n){const s=xl(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:l=!0,children:o,easing:d,in:c,onEnter:m,onEntered:h,onEntering:p,onExit:b,onExited:w,onExiting:x,style:v,timeout:j=r,TransitionComponent:C=_o,...S}=t,_=g.useRef(null),A=ml(_,MB(o),n),T=H=>ae=>{if(H){const W=_.current;ae===void 0?H(W):H(W,ae)}},E=T(p),D=T((H,ae)=>{ule(H);const W=kM({style:v,timeout:j,easing:d},{mode:"enter"});H.style.webkitTransition=s.transitions.create("opacity",W),H.style.transition=s.transitions.create("opacity",W),m&&m(H,ae)}),z=T(h),K=T(x),B=T(H=>{const ae=kM({style:v,timeout:j,easing:d},{mode:"exit"});H.style.webkitTransition=s.transitions.create("opacity",ae),H.style.transition=s.transitions.create("opacity",ae),b&&b(H)}),O=T(w),L=H=>{i&&i(_.current,H)};return a.jsx(C,{appear:l,in:c,nodeRef:_,onEnter:D,onEntered:z,onEntering:E,onExit:B,onExited:O,onExiting:K,addEndListener:L,timeout:j,...S,children:(H,{ownerState:ae,...W})=>g.cloneElement(o,{style:{opacity:0,visibility:H==="exited"&&!c?"hidden":void 0,...mle[H],...v,...o.props.style},ref:A,...W})})});function hle(e){return En("MuiBackdrop",e)}mn("MuiBackdrop",["root","invisible"]);const gle=e=>{const{classes:t,invisible:n}=e;return Tn({root:["root",n&&"invisible"]},hle,t)},ple=Qt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),xle=g.forwardRef(function(t,n){const s=Uc({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:l="div",invisible:o=!1,open:d,components:c={},componentsProps:m={},slotProps:h={},slots:p={},TransitionComponent:b,transitionDuration:w,...x}=s,v={...s,component:l,invisible:o},j=gle(v),C={transition:b,root:c.Root,...p},S={...m,...h},_={component:l,slots:C,slotProps:S},[A,T]=TM("root",{elementType:ple,externalForwardedProps:_,className:Et(j.root,i),ownerState:v}),[E,D]=TM("transition",{elementType:fle,externalForwardedProps:_,ownerState:v});return a.jsx(E,{in:d,timeout:w,...x,...D,children:a.jsx(A,{"aria-hidden":!0,...T,classes:j,ref:n,children:r})})}),iu=fie;function yle(e){return typeof e.main=="string"}function ble(e,t=[]){if(!yle(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function np(e=[]){return([,t])=>t&&ble(t,e)}function vle(e){return En("MuiCircularProgress",e)}mn("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const gi=44,YA=Xp`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,KA=Xp`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,wle=typeof YA!="string"?dk`
        animation: ${YA} 1.4s linear infinite;
      `:null,Nle=typeof KA!="string"?dk`
        animation: ${KA} 1.4s ease-in-out infinite;
      `:null,jle=e=>{const{classes:t,variant:n,color:s,disableShrink:r}=e,i={root:["root",n,`color${Pa(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Pa(n)}`,r&&"circleDisableShrink"]};return Tn(i,vle,t)},Cle=Qt("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Pa(n.color)}`]]}})(iu(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:wle||{animation:`${YA} 1.4s linear infinite`}},...Object.entries(e.palette).filter(np()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Sle=Qt("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),_le=Qt("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Pa(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(iu(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Nle||{animation:`${KA} 1.4s ease-in-out infinite`}}]}))),Ale=Qt("circle",{name:"MuiCircularProgress",slot:"Track"})(iu(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),xk=g.forwardRef(function(t,n){const s=Uc({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:l=!1,enableTrackSlot:o=!1,size:d=40,style:c,thickness:m=3.6,value:h=0,variant:p="indeterminate",...b}=s,w={...s,color:i,disableShrink:l,size:d,thickness:m,value:h,variant:p,enableTrackSlot:o},x=jle(w),v={},j={},C={};if(p==="determinate"){const S=2*Math.PI*((gi-m)/2);v.strokeDasharray=S.toFixed(3),C["aria-valuenow"]=Math.round(h),v.strokeDashoffset=`${((100-h)/100*S).toFixed(3)}px`,j.transform="rotate(-90deg)"}return a.jsx(Cle,{className:Et(x.root,r),style:{width:d,height:d,...j,...c},ownerState:w,ref:n,role:"progressbar",...C,...b,children:a.jsxs(Sle,{className:x.svg,ownerState:w,viewBox:`${gi/2} ${gi/2} ${gi} ${gi}`,children:[o?a.jsx(Ale,{className:x.track,ownerState:w,cx:gi,cy:gi,r:(gi-m)/2,fill:"none",strokeWidth:m,"aria-hidden":"true"}):null,a.jsx(_le,{className:x.circle,style:v,ownerState:w,cx:gi,cy:gi,r:(gi-m)/2,fill:"none",strokeWidth:m})]})})});function IB(e){return a.jsx(xle,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:a.jsx(xk,{color:"inherit"})})}var is={},dy={},LM;function Tle(){if(LM)return dy;LM=1,Object.defineProperty(dy,"__esModule",{value:!0});function e(t,n){return t.reduce((s,r)=>{const i=String(r[n]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return dy.default=e,dy}var uy={},PM;function Ele(){if(PM)return uy;PM=1,Object.defineProperty(uy,"__esModule",{value:!0});function e(t,n){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=n[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return uy.default=e,uy}var my={},DM;function kle(){if(DM)return my;DM=1,Object.defineProperty(my,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return my.default=e,my}var OM;function Lle(){if(OM)return is;OM=1;var e=is&&is.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(is,"__esModule",{value:!0}),is.customList=is.customArray=is.findOne=is.filter=is.all=is.utils=void 0;const t=e(Tle()),n=e(Ele()),s=e(kle());is.utils={groupBy:t.default};function r(){return s.default}is.all=r;function i(c,m){return s.default.filter(h=>h[c]===m)}is.filter=i;function l(c,m){return s.default.find(h=>h[c]===m)}is.findOne=l;function o(c={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:m,sortDataBy:h,filter:p}={}){const b=[];let w=s.default;if(typeof p=="function"&&(w=w.filter(p)),h){const x=new Intl.Collator([],{sensitivity:"accent"});w.sort((v,j)=>x.compare(v[h],j[h]))}if(w.forEach(x=>{const v={};for(const j in c)v[j]=(0,n.default)(c[j],x);b.push(v)}),m&&c[m]){const x=new Intl.Collator([],{sensitivity:"accent"});b.sort((v,j)=>x.compare(v[m],j[m]))}return b}is.customArray=o;function d(c="countryCode",m="{countryNameEn} ({countryCode})",{filter:h}={}){const p={};let b=s.default;return typeof h=="function"&&(b=b.filter(h)),b.forEach(w=>{const x=(0,n.default)(m,w);p[String(w[c])]=x}),p}return is.customList=d,is}var Lf=Lle();const QA=(...e)=>e.flat().filter(Boolean).join(" "),Ple=Lf.all(),$B=Ple.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),XA=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Dle=()=>{const e=bt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[a.jsx(Nu,{className:"size-4 mr-1"})," Back to Home"]})},Ole=g.memo(({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isVisible:l,onTogglePass:o,error:d,isSelect:c,options:m})=>{const h=t.toLowerCase().includes("password"),p=h?l?"text":"password":s,b=QA("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",h?"pr-10":"",d?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),a.jsxs("div",{className:"relative",children:[c?a.jsx("select",{id:t,value:r,onChange:i,required:!0,className:b,children:m.map(w=>a.jsx("option",{value:w,children:w},w))}):a.jsx("input",{id:t,type:p,placeholder:n,value:r,onChange:i,required:!0,className:b}),h&&a.jsx("button",{type:"button",onClick:()=>o(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(tu,{className:"size-5"}):a.jsx(au,{className:"size-5"})})]}),d&&a.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:d})]})}),Ld=Ole,Mle=g.memo(({currentStep:e,totalSteps:t})=>a.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:XA.map(n=>a.jsxs(g.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[a.jsx("div",{className:QA("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",n.id===e?"bg-amber-500 text-white shadow-lg":n.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:n.id<e?a.jsx(Y8,{className:"size-5"}):n.id}),a.jsx("span",{className:QA("mt-2 text-xs font-medium hidden sm:block",n.id===e?"text-amber-600":"text-gray-500"),children:n.title})]}),n.id<t&&a.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},n.id))})),Ile=g.memo(({formData:e,handleChange:t,handleCodeChange:n,handleTogglePass:s,isPassVisible:r,formError:i,signupError:l,termsAccepted:o,handleTerms:d,isButtonDisabled:c,handleSubmit:m,handleGoogleLogin:h})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[a.jsx("div",{className:"md:w-1/2",children:a.jsx(Ld,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),a.jsx("div",{className:"md:w-1/2",children:a.jsx(Ld,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:n,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:$B.map(p=>a.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),a.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(Ld,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),a.jsx(Ld,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),a.jsx(Ld,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),l&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:l}),a.jsxs("div",{className:"flex items-start pt-2",children:[a.jsx("input",{id:"terms",type:"checkbox",checked:o,onChange:d,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),a.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),a.jsx("button",{type:"submit",onClick:m,disabled:c,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),$le=g.memo(({companyData:e,handleCodeChange1:t,handleSubmit:n,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:l,setStep:o,setIsSubmitted:d,setFormError:c})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ld,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:$B.map(m=>a.jsxs("option",{value:m.code,children:[m.name," ",m.code]},m.code))}),a.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(Ld,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),a.jsxs("div",{className:"flex space-x-4 mt-8",children:[a.jsxs("button",{type:"button",onClick:()=>{o(1),d(!1),c(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[a.jsx(wne,{className:"size-4 mr-2"})," Back"]}),a.jsx("button",{onClick:n,type:"submit",disabled:l,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),Rle=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[n,s]=g.useState(1),[r,i]=g.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[l,o]=g.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[d,c]=g.useState({}),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),{login:v}=Zs(),[j,C]=g.useState({plan_name:"Free",price:0}),[S,_]=g.useState(!1),[A,T]=g.useState(null);g.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),g.useEffect(()=>{const le=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){le();return}const Q=document.createElement("script");Q.src="https://accounts.google.com/gsi/client",Q.async=!0,Q.defer=!0,Q.onload=le,document.body.appendChild(Q)},[]);const E=async le=>{_(!0);try{const Q=X8(le.credential);console.log("Google user:",Q);try{await re.post("/auth/email-check",{email:Q.email})}catch(te){const V=te.response?.data?.detail||"An error occurred.";T(V),_(!1);return}i(te=>({...te,email:Q.email,first_name:Q.given_name||"",last_name:Q.family_name||"",password:"",profilePicture:Q.picture||"",googleId:Q.sub,auth_provider:"google",id_token:le.credential})),s(2)}catch(Q){console.error("Google signup error:",Q),b("Failed to process Google account. Please try again.")}finally{T(null),b(null),_(!1)}},D=g.useCallback(le=>{const{id:Q,value:te}=le.target;x(!1),i(V=>{const ee={...V,[Q]:te};if(n===1&&(Q==="password"||Q==="confirmPassword")){const{password:me,confirmPassword:we}=ee,ve=me.length>0&&we.length>0&&me!==we?"Password doesn't match. Please try again.":null;b(Ae=>Ae!==ve?ve:Ae)}return ee})},[n]),z=g.useCallback(le=>{const{id:Q,value:te}=le.target;x(!1),o(V=>({...V,[Q]:te}))},[]),K=g.useCallback(le=>i(Q=>({...Q,countryCode:le.target.value})),[]),B=g.useCallback(le=>o(Q=>({...Q,countryCode:le.target.value})),[]),O=g.useCallback(le=>c(Q=>({...Q,[le]:!Q[le]})),[]),L=g.useCallback(le=>h(le.target.checked),[]),H=async le=>{if(le.preventDefault(),x(!1),b(null),_(!0),n===1){if(!e.every(te=>r[te].trim()!=="")||!m){b("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){b("The passwords you entered do not match. Please try again.");return}if(r.auth_provider==="google"){s(2);return}try{(await re.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(b(null),s(2))}catch(te){te.response&&te.response.data&&te.response.data.detail?b(te.response.data.detail):b("Something went wrong. Please try again.")}finally{_(!1)}}else if(n===2){if(!t.every(te=>(l[te]||"").trim()!=="")){b("Please fill in all required company details.");return}try{const{confirmPassword:te,...V}=r,ee={...l,company_number:`${l.countryCode} ${l.company_number}`},we=(await re.post("/company/create",ee)).data.id,ve={...V,company_id:we,phone_number:`${V.countryCode} ${V.phone_number}`};if(console.log(" Sending payload:",ve),V.auth_provider==="google"){const Ae=await re.post("/auth/google/signup",ve),be={...j,company_id:we,status:"Active"},Ie=await re.post("/subscription/subscribe",be);b(null),x(!0),v(Ae.data)}else{const Ae=await re.post("/auth/signup",ve),be={...j,company_id:we,status:"Active"},Ie=await re.post("/subscription/subscribe",be);b(null),x(!0),v(Ae.data)}}catch(te){if(te.response?.data?.detail){const V=te.response.data.detail;if(Array.isArray(V)){const ee=V.map(me=>me.msg).join(", ");b(ee)}else b(typeof V=="object"?V.msg||JSON.stringify(V):V)}else b("Something went wrong. Please try again.")}finally{_(!1)}}},ae=g.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:le=>{const{credential:Q}=le;i(te=>({...te,first_name:Q.given_name||"",last_name:Q.family_name||"",email:Q.email||"",profile_picture:Q.picture||"",auth_provider:"google",id_token:Q})),s(2)}}),window.google.accounts.id.prompt()}catch(le){console.error("Google login error:",le),b("Google login failed. Please try again.")}},[i,b,s]),W=g.useMemo(()=>{if(n===1){const le=e.every(Q=>(r[Q]||"").trim()!=="");return!m||!!p||!le}return n===2?!t.every(Q=>(l[Q]||"").trim()!==""):!0},[n,m,p,r,e,t]),q=XA.find(le=>le.id===n);return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsxs("div",{className:"flex items-center text-gray-800",children:[a.jsx(Yt,{className:"size-6 text-amber-500 mr-2"}),a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&a.jsx(IB,{isLoading:S}),a.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:a.jsx(Dle,{})}),a.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:q.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:q.subtitle})]}),a.jsx(Mle,{currentStep:n,totalSteps:XA.length}),n===1&&a.jsx("div",{id:"googleSignupBtn"}),a.jsxs("form",{className:"mt-8",children:[n===1&&a.jsx(Ile,{formData:r,handleChange:D,handleCodeChange:K,handleTogglePass:O,isPassVisible:d,formError:p,signupError:A,termsAccepted:m,handleTerms:L,isButtonDisabled:W,handleSubmit:H,handleGoogleLogin:ae}),n===2&&a.jsx($le,{handleSubmit:H,companyData:l,handleCompanyChange:z,formError:p,isSubmitted:w,isButtonDisabled:W,setStep:s,setIsSubmitted:x,setFormError:b,handleCodeChange1:B}),n===1&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",a.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},zle=()=>{const e=bt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(Nu,{className:"size-4 mr-1"})," Back to Home"]})},MM=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isPassVisible:l,onTogglePass:o})=>{const d=t.toLowerCase().includes("password"),c=d?l?"text":"password":s;return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:t,type:c,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&a.jsx("button",{type:"button",onClick:o,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(tu,{className:"size-5"}):a.jsx(au,{className:"size-5"})})]})]})},Ule=()=>{const[e,t]=g.useState({email:"",password:""}),[n,s]=g.useState(!1),[r,i]=g.useState(null),[l,o]=g.useState(!1),{isLoggedIn:d,login:c,userRole:m}=Zs(),h=bt();g.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),g.useEffect(()=>{d&&(m==="CEO"||m==="Admin"?h("/admin"):m==="Group Manager"?h("/group-manager"):m==="Manager"?h("/manager"):m==="Marketing"?h("/marketing"):m==="Sales"&&h("/sales"))},[d,h,m]);const p=x=>{const{id:v,value:j}=x.target;t(C=>({...C,[v]:j}))},b=async x=>{x.preventDefault(),i(null);try{const v=await re.post("/auth/login",e);c(v.data),i(null)}catch(v){v.response&&v.response.data&&v.response.data.detail?i(v.response.data.detail):i("Something went wrong. Please try again.")}};g.useEffect(()=>{const x=document.createElement("script");return x.src="https://accounts.google.com/gsi/client",x.async=!0,x.defer=!0,x.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:w}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(x),()=>{document.body.contains(x)&&document.body.removeChild(x)}},[]);const w=async x=>{o(!0);try{const v=X8(x.credential),j=await re.post("/auth/google/login",{id_token:x.credential});c(j.data)}catch(v){console.error("Google login failed:",v);const j=v.response?.data?.detail||"Google login failed. Please try again.";i(j)}finally{o(!1)}};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),l&&a.jsx(IB,{isLoading:l}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(zle,{}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),a.jsx("div",{id:"googleLoginBtn"}),a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6 cursor-pointer",children:[a.jsx(MM,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),a.jsx(MM,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:n,onTogglePass:()=>s(x=>!x)}),r&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),a.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),a.jsx("div",{className:"text-center mt-1",children:a.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",a.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},Fle=({onClick:e})=>a.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(Nu,{className:"size-4 mr-1"})," Back"]}),XC=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,icon:l})=>{const[o,d]=g.useState(!1),c=s==="password";return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative flex items-center",children:[l&&a.jsx(l,{className:"absolute left-3 text-gray-500 size-5"}),a.jsx("input",{id:t,type:c&&o?"text":s,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&a.jsx("button",{type:"button",onClick:()=>d(m=>!m),className:"absolute right-3 text-gray-500",children:o?a.jsx(tu,{className:"size-5"}):a.jsx(au,{className:"size-5"})})]})]})},Ble=({otp:e,setOtp:t})=>a.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((n,s)=>a.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const l=[...e];l[s]=i,t(l)}}},s))}),Hle=()=>{const e=bt(),[t,n]=g.useState(1),[s,r]=g.useState(""),[i,l]=g.useState(["","","","","",""]),[o,d]=g.useState(""),[c,m]=g.useState(""),h=x=>{x.preventDefault(),n(2)},p=x=>{x.preventDefault(),n(3)},b=x=>{if(x.preventDefault(),o!==c){alert("Passwords do not match!");return}alert("Password reset successfully!")},w=()=>{t>1?n(t-1):e("/login")};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(Fle,{onClick:w}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),a.jsxs("form",{onSubmit:h,className:"space-y-6 cursor-pointer",children:[a.jsx(XC,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:x=>r(x.target.value),icon:Ha}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",a.jsx("strong",{children:s}),"."]})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsx(Ble,{otp:i,setOtp:l}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsx(XC,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:o,onChange:x=>d(x.target.value),icon:al}),a.jsx(XC,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:c,onChange:x=>m(x.target.value),icon:al}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Xt=()=>{const[e,t]=g.useState(null),[n,s]=g.useState(!1),[r,i]=g.useState(!0),l=bt(),o=async()=>{try{const c=await re.get("/auth/me");t(c.data),s(!0)}catch(c){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",c)}finally{i(!1)}};return g.useEffect(()=>{o()},[]),{user:e,isLoggedIn:n,loading:r,fetchUser:o,logout:async()=>{try{await re.post("/auth/logout")}catch{}t(null),s(!1),l("/login")}}};function It({message:e="Loading..."}){return a.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:a.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Gle=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function fy(){const{user:e,loading:t,fetchUser:n}=Xt(),[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(!1),[c,m]=g.useState(!1),[h,p]=g.useState(!1),[b,w]=g.useState(!1),[x,v]=g.useState(!1),[j,C]=g.useState(!1),[S,_]=g.useState(null),[A,T]=g.useState(null),E=g.useRef(null),[D,z]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[K,B]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(z({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),T(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const O=(q,le)=>{z(Q=>({...Q,[q]:le}))},L=(q,le)=>{B(Q=>({...Q,[q]:le}))},H=q=>{const le=q.target.files?.[0];if(!le)return;if(!le.type.startsWith("image/")){Y.error("Please select an image file");return}if(le.size>5*1024*1024){Y.error("Image size should be less than 5MB");return}const Q=new FileReader;Q.onloadend=()=>{_(Q.result),T(Q.result)},Q.readAsDataURL(le)},ae=async q=>{if(q.preventDefault(),!D.firstName.trim()||!D.lastName.trim()){Y.warn("Please fill in all required fields.");return}l(!0);try{const le={first_name:D.firstName.trim(),last_name:D.lastName.trim(),phone_number:D.phoneNumber.trim()||null};S!==null&&(le.profile_picture=S),await re.put("/users/me",le),await n(),d(!1),_(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),Y.success("Account information updated successfully!")}catch(le){console.error("Error updating account:",le);const Q=le.response?.data?.detail||"Failed to update account information. Please try again.";Y.error(Q)}finally{l(!1)}},W=async q=>{if(q.preventDefault(),!K.newPassword||!K.confirmPassword){Y.warn("Please fill in all password fields.");return}if(K.newPassword.length<8){Y.warn("Password must be at least 8 characters long.");return}if(K.newPassword!==K.confirmPassword){Y.warn("New password and confirm password do not match.");return}C(!0);try{const le={password:K.newPassword};await re.put("/users/me",le),await n(),B({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),C(!1),Y.success("Password changed successfully!")}catch(le){console.error("Error changing password:",le);const Q=le.response?.data?.detail||"Failed to change password. Please try again.";Y.error(Q)}finally{C(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(It,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Ut,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!o&&a.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(Ma,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[A?a.jsx("div",{className:"relative",children:a.jsx("img",{src:A,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Gle(e.first_name,e.last_name)}),o&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:E,accept:"image/*",onChange:H,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(q8,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),o?a.jsxs("form",{onSubmit:ae,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:D.firstName,onChange:q=>O("firstName",q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:D.lastName,onChange:q=>O("lastName",q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:D.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:D.phoneNumber,onChange:q=>O("phoneNumber",q.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{d(!1),z({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(null),T(e.profile_picture||null),E.current&&(E.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[a.jsx(QE,{}),i?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(al,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:W,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:K.newPassword,onChange:q=>L("newPassword",q.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:b?a.jsx(tu,{}):a.jsx(au,{})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:K.confirmPassword,onChange:q=>L("confirmPassword",q.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?a.jsx(tu,{}):a.jsx(au,{})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:j,children:[a.jsx(al,{}),j?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(K8,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function Vle({toggleSidebar:e}){const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState(0),c=g.useRef(null),m=g.useRef(null),h=pa(),p=bt(),{logout:b}=Zs(),{user:w,fetchUser:x}=Xt(),j={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[h.pathname]||"Admin Panel";return g.useEffect(()=>{const C=()=>{x()};return window.addEventListener("userProfileUpdated",C),()=>{window.removeEventListener("userProfileUpdated",C)}},[x]),g.useEffect(()=>{if(!w?.id)return;const C=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=C?"localhost:8000":window.location.host,A=`${S}//${_}/ws/notifications?user_id=${w.id}`,T=new WebSocket(A);return T.onopen=()=>console.log("Admin WS Connected"),T.onmessage=E=>{const D=JSON.parse(E.data);l(z=>[D,...z]),d(z=>z+1)},T.onclose=()=>console.log("Admin WS Disconnected"),()=>T.close()},[w?.id]),g.useEffect(()=>{function C(S){c.current&&!c.current.contains(S.target)&&n(!1),m.current&&!m.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Wp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Gp,{className:"text-xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{l([]),d(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((C,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:C.title||C.message||"New Update"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:c,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[w?.first_name," ",w?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[w?.first_name," ",w?.middle_name," ",w?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{p("/admin/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/admin/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Wle(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,i]=g.useState(!1),[l,o]=g.useState(!1),d=pa(),{user:c}=Xt();g.useEffect(()=>{c&&console.log("Fetched user:",c)},[c]),g.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const h=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(d.pathname);g.useEffect(()=>{h&&t(!0)},[d.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",b="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),c&&c.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:c.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(St,{to:"/admin/dashboard",className:({isActive:w})=>w?p:b,children:[a.jsx(Vp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-lg"}),"Sales"]}),a.jsx(wt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/admin/accounts",className:({isActive:w})=>w?p:b,children:[a.jsx(ba,{})," Accounts"]}),a.jsxs(St,{to:"/admin/contacts",className:({isActive:w})=>w?p:b,children:[a.jsx(Ut,{})," Contacts"]}),a.jsxs(St,{to:"/admin/leads",className:({isActive:w})=>w?p:b,children:[a.jsx(Ga,{})," Leads"]}),a.jsxs(St,{to:"/admin/deals",className:({isActive:w})=>w?p:b,children:[a.jsx(Yt,{})," Deals"]}),a.jsxs(St,{to:"/admin/quotes",className:({isActive:w})=>w?p:b,children:[a.jsx(da,{})," Quotes"]}),a.jsxs(St,{to:"/admin/targets",className:({isActive:w})=>w?p:b,children:[a.jsx(Nr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"text-lg"}),"Activity"]}),a.jsx(wt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/admin/tasks",className:({isActive:w})=>w?p:b,children:[a.jsx(zt,{})," Tasks"]}),a.jsxs(St,{to:"/admin/meetings",className:({isActive:w})=>w?p:b,children:[a.jsx(Nt,{})," Meetings"]}),a.jsxs(St,{to:"/admin/calls",className:({isActive:w})=>w?p:b,children:[a.jsx(js,{})," Calls"]}),a.jsxs(St,{to:"/admin/audit",className:({isActive:w})=>w?p:b,children:[a.jsx(Ns,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(St,{to:"/admin/territory",className:({isActive:w})=>w?p:b,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zc,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(XE,{className:"text-lg"}),"User Management"]}),a.jsx(wt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/admin/users",className:({isActive:w})=>w?p:b,children:[a.jsx(ba,{})," Users"]}),a.jsxs(St,{to:"/admin/manage-account",className:({isActive:w})=>w?p:b,children:[a.jsx(Ut,{})," Manage Account"]}),a.jsxs(St,{to:"/admin/company-details",className:({isActive:w})=>w?p:b,children:[a.jsx(fw,{})," Company Details"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(Vle,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(_f,{})})]})]})}function qle(e){return Ct({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Yle(e){return Ct({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function oi({props:e,name:t}){return Zre({props:e,name:t,defaultTheme:hk,themeId:kw})}function mo(e){const{elementType:t,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,l=r?{}:PB(n,s),{props:o,internalRef:d}=DB({...i,externalSlotProps:l}),c=ml(d,l?.ref,e.additionalProps?.ref);return LB(t,{...o,ref:c},s)}function Qn(e){const t=g.useRef(e);return Un(()=>{t.current=e}),g.useRef((...n)=>(0,t.current)(...n)).current}var Fb=Symbol("NOT_FOUND");function Kle(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Qle(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Xle(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${n}]`)}}var IM=e=>Array.isArray(e)?e:[e];function Zle(e){const t=Array.isArray(e[0])?e[0]:e;return Xle(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Jle(e,t){const n=[],{length:s}=e;for(let r=0;r<s;r++)n.push(e[r].apply(null,t));return n}function eoe(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Fb},put(n,s){t={key:n,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function toe(e,t){let n=[];function s(o){const d=n.findIndex(c=>t(o,c.key));if(d>-1){const c=n[d];return d>0&&(n.splice(d,1),n.unshift(c)),c.value}return Fb}function r(o,d){s(o)===Fb&&(n.unshift({key:o,value:d}),n.length>e&&n.pop())}function i(){return n}function l(){n=[]}return{get:s,put:r,getEntries:i,clear:l}}var aoe=(e,t)=>e===t;function noe(e){return function(n,s){if(n===null||s===null||n.length!==s.length)return!1;const{length:r}=n;for(let i=0;i<r;i++)if(!e(n[i],s[i]))return!1;return!0}}function soe(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=aoe,maxSize:r=1,resultEqualityCheck:i}=n,l=noe(s);let o=0;const d=r<=1?eoe(l):toe(r,l);function c(){let m=d.get(arguments);if(m===Fb){if(m=e.apply(null,arguments),o++,i){const p=d.getEntries().find(b=>i(b.value,m));p&&(m=p.value,o!==0&&o--)}d.put(arguments,m)}return m}return c.clearCache=()=>{d.clear(),c.resetResultsCount()},c.resultsCount=()=>o,c.resetResultsCount=()=>{o=0},c}var roe=class{constructor(e){this.value=e}deref(){return this.value}},ioe=typeof WeakRef<"u"?WeakRef:roe,loe=0,$M=1;function hy(){return{s:loe,v:void 0,o:null,p:null}}function RB(e,t={}){let n=hy();const{resultEqualityCheck:s}=t;let r,i=0;function l(){let o=n;const{length:d}=arguments;for(let h=0,p=d;h<p;h++){const b=arguments[h];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=o.o;w===null&&(o.o=w=new WeakMap);const x=w.get(b);x===void 0?(o=hy(),w.set(b,o)):o=x}else{let w=o.p;w===null&&(o.p=w=new Map);const x=w.get(b);x===void 0?(o=hy(),w.set(b,o)):o=x}}const c=o;let m;if(o.s===$M)m=o.v;else if(m=e.apply(null,arguments),i++,s){const h=r?.deref?.()??r;h!=null&&s(h,m)&&(m=h,i!==0&&i--),r=typeof m=="object"&&m!==null||typeof m=="function"?new ioe(m):m}return c.s=$M,c.v=m,m}return l.clearCache=()=>{n=hy(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function zB(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,l=0,o,d={},c=r.pop();typeof c=="object"&&(d=c,c=r.pop()),Kle(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const m={...n,...d},{memoize:h,memoizeOptions:p=[],argsMemoize:b=RB,argsMemoizeOptions:w=[]}=m,x=IM(p),v=IM(w),j=Zle(r),C=h(function(){return i++,c.apply(null,arguments)},...x),S=b(function(){l++;const A=Jle(j,arguments);return o=C.apply(null,A),o},...v);return Object.assign(S,{resultFunc:c,memoizedResultFunc:C,dependencies:j,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:b})};return Object.assign(s,{withTypes:()=>s}),s}var Xe=zB(RB),ooe=Object.assign((e,t=Xe)=>{Qle(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),s=n.map(i=>e[i]);return t(s,(...i)=>i.reduce((l,o,d)=>(l[n[d]]=o,l),{}))},{withTypes:()=>ooe});const coe=zB({memoize:soe,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),xt=(e,t,n,s,r,i,l,o,...d)=>{if(d.length>0)throw new Error("Unsupported number of selectors");let c;if(e&&t&&n&&s&&r&&i&&l&&o)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b),v=n(m,h,p,b),j=s(m,h,p,b),C=r(m,h,p,b),S=i(m,h,p,b),_=l(m,h,p,b);return o(w,x,v,j,C,S,_,h,p,b)};else if(e&&t&&n&&s&&r&&i&&l)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b),v=n(m,h,p,b),j=s(m,h,p,b),C=r(m,h,p,b),S=i(m,h,p,b);return l(w,x,v,j,C,S,h,p,b)};else if(e&&t&&n&&s&&r&&i)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b),v=n(m,h,p,b),j=s(m,h,p,b),C=r(m,h,p,b);return i(w,x,v,j,C,h,p,b)};else if(e&&t&&n&&s&&r)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b),v=n(m,h,p,b),j=s(m,h,p,b);return r(w,x,v,j,h,p,b)};else if(e&&t&&n&&s)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b),v=n(m,h,p,b);return s(w,x,v,h,p,b)};else if(e&&t&&n)c=(m,h,p,b)=>{const w=e(m,h,p,b),x=t(m,h,p,b);return n(w,x,h,p,b)};else if(e&&t)c=(m,h,p,b)=>{const w=e(m,h,p,b);return t(w,h,p,b)};else if(e)c=e;else throw new Error("Missing arguments");return c},Lw=e=>(...t)=>{const n=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,l=Math.max(r.length-i,0);if(l>3)throw new Error("Unsupported number of arguments");return(d,c,m,h)=>{let p=d.__cacheKey__;p||(p={id:s},d.__cacheKey__=p,s+=1);let b=n.get(p);if(!b){const w=t.length===1?[j=>j,r]:t;let x=t;const v=[void 0,void 0,void 0];switch(l){case 0:break;case 1:{x=[...w.slice(0,-1),()=>v[0],r];break}case 2:{x=[...w.slice(0,-1),()=>v[0],()=>v[1],r];break}case 3:{x=[...w.slice(0,-1),()=>v[0],()=>v[1],()=>v[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(x=[...x,e]),b=coe(...x),b.selectorArgs=v,n.set(p,b)}switch(l){case 3:b.selectorArgs[2]=h;case 2:b.selectorArgs[1]=m;case 1:b.selectorArgs[0]=c}switch(l){case 0:return b(d);case 1:return b(d,c);case 2:return b(d,c,m);case 3:return b(d,c,m,h);default:throw new Error("unreachable")}}},bn=Lw();var ZC={exports:{}},JC={},eS={exports:{}},tS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RM;function doe(){if(RM)return tS;RM=1;var e=Nf();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(h,p){var b=p(),w=s({inst:{value:b,getSnapshot:p}}),x=w[0].inst,v=w[1];return i(function(){x.value=b,x.getSnapshot=p,d(x)&&v({inst:x})},[h,b,p]),r(function(){return d(x)&&v({inst:x}),h(function(){d(x)&&v({inst:x})})},[h]),l(b),b}function d(h){var p=h.getSnapshot;h=h.value;try{var b=p();return!n(h,b)}catch{return!0}}function c(h,p){return p()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:o;return tS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,tS}var zM;function uoe(){return zM||(zM=1,eS.exports=doe()),eS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function moe(){if(UM)return JC;UM=1;var e=Nf(),t=uoe();function n(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var s=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,o=e.useMemo,d=e.useDebugValue;return JC.useSyncExternalStoreWithSelector=function(c,m,h,p,b){var w=i(null);if(w.current===null){var x={hasValue:!1,value:null};w.current=x}else x=w.current;w=o(function(){function j(T){if(!C){if(C=!0,S=T,T=p(T),b!==void 0&&x.hasValue){var E=x.value;if(b(E,T))return _=E}return _=T}if(E=_,s(S,T))return E;var D=p(T);return b!==void 0&&b(E,D)?(S=T,E):(S=T,_=D)}var C=!1,S,_,A=h===void 0?null:h;return[function(){return j(m())},A===null?void 0:function(){return j(A())}]},[m,h,p,b]);var v=r(c,w[0],w[1]);return l(function(){x.hasValue=!0,x.value=v},[v]),d(v),v},JC}var FM;function foe(){return FM||(FM=1,ZC.exports=moe()),ZC.exports}var UB=foe();function hoe(e,t,n,s,r){const i=l=>t(l,n,s,r);return UB.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const BM={};function Pw(e,t){const n=g.useRef(BM);return n.current===BM&&(n.current=e(t)),n}const goe=[];function FB(e){g.useEffect(e,goe)}const poe=()=>{};function xoe(e,t,n){const s=Pw(yoe,{store:e,selector:t}).current;s.effect=n,FB(s.onMount)}function yoe(e){const{store:t,selector:n}=e;let s=n(t.state);const r={effect:poe,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const l=n(i);if(!Object.is(s,l)){const o=s;s=l,r.effect(o,l)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class yk{static create(t){return new yk(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const n=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(n!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){this.setState(Ue({},this.state,t));return}}set(t,n){Object.is(this.state[t],n)||this.setState(Ue({},this.state,{[t]:n}))}}const Dw=({params:e,store:t})=>{g.useEffect(()=>{t.set("animation",Ue({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const n=g.useCallback(()=>{let s=!1;return t.set("animation",Ue({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",Ue({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return Un(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=o=>{o.matches?r=n():r?.()},l=window.matchMedia("(prefers-reduced-motion)");return i(l),l.addEventListener("change",i),()=>{l.removeEventListener("change",i)}},[n,t]),{instance:{disableAnimation:n}}};Dw.params={skipAnimation:!0};Dw.getDefaultizedParams=({params:e})=>Ue({},e,{skipAnimation:e.skipAnimation??!1});Dw.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const boe=e=>e.animation,voe=xt(boe,e=>e.skip||e.skipAnimationRequests>0);function woe(e,t){const n=g.useRef(!0);g.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function ZA(e){return e&&e.ownerDocument||document}function Noe(e){return ZA(e).defaultView||window}const Pt=hoe,Ow="DEFAULT_X_AXIS_KEY",joe="DEFAULT_Y_AXIS_KEY",Coe={top:20,bottom:20,left:20,right:20},Soe=45,_oe=25,BB=20,yl=e=>e.cartesianAxis?.x,Ao=e=>e.cartesianAxis?.y,Aoe=xt(Ao,function(t){return(t??[]).reduce((n,s)=>s.position==="left"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),Toe=xt(Ao,function(t){return(t??[]).reduce((n,s)=>s.position==="right"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),Eoe=xt(yl,function(t){return(t??[]).reduce((n,s)=>s.position==="top"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),koe=xt(yl,function(t){return(t??[]).reduce((n,s)=>s.position==="bottom"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),Loe=bn(Aoe,Toe,Eoe,koe,function(t,n,s,r){return{left:t,right:n,top:s,bottom:r}}),Jp=e=>e.dimensions,Poe=e=>e.dimensions.margin,Js=bn(Jp,Poe,Loe,function({width:t,height:n},{top:s,right:r,bottom:i,left:l},{left:o,right:d,top:c,bottom:m}){return{width:t-l-r-o-d,left:l+o,right:r+d,height:n-s-i-c-m,top:s+c,bottom:i+m}}),Doe=xt(Jp,e=>e.width),Ooe=xt(Jp,e=>e.height),HB=xt(Jp,e=>e.propsWidth),GB=xt(Jp,e=>e.propsHeight);function Moe(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?Ue({},t,e):e}const Ioe=10,Mw=({params:e,store:t,svgRef:n})=>{const s=e.width!==void 0&&e.height!==void 0,r=g.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,l]=g.useState(0),[o,d]=g.useState(0),c=g.useCallback(()=>{const w=n?.current;if(!w)return{};const v=Noe(w).getComputedStyle(w),j=Math.floor(parseFloat(v.height))||0,C=Math.floor(parseFloat(v.width))||0;return(t.state.dimensions.width!==C||t.state.dimensions.height!==j)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??C,height:e.height??j,propsWidth:e.width,propsHeight:e.height}),{height:j,width:C}},[t,n,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);woe(()=>{const w=e.width??t.state.dimensions.width,x=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:w,height:x,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),g.useEffect(()=>{r.current.displayError=!0},[]),Un(()=>{if(s||!r.current.initialCompute||r.current.computeRun>Ioe)return;const w=c();w.width!==i||w.height!==o?(r.current.computeRun+=1,w.width!==void 0&&l(w.width),w.height!==void 0&&d(w.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[o,i,c,s]),Un(()=>{if(s)return()=>{};c();const w=n.current;if(typeof ResizeObserver>"u")return()=>{};let x;const v=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{c()})});return w&&v.observe(w),()=>{x&&cancelAnimationFrame(x),w&&v.unobserve(w)}},[c,s,n]);const m=Pt(t,Js),h=g.useCallback(w=>w>=m.left-1&&w<=m.left+m.width,[m.left,m.width]),p=g.useCallback(w=>w>=m.top-1&&w<=m.top+m.height,[m.height,m.top]);return{instance:{isPointInside:g.useCallback((w,x,v)=>v&&"closest"in v&&v.closest("[data-drawing-container]")?!0:h(w)&&p(x),[h,p]),isXInside:h,isYInside:p}}};Mw.params={width:!0,height:!0,margin:!0};Mw.getDefaultizedParams=({params:e})=>Ue({},e,{margin:Moe(e.margin,Coe)});Mw.getInitialState=({width:e,height:t,margin:n})=>({dimensions:{margin:n,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const bk=({params:e,store:t})=>(Un(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});bk.params={experimentalFeatures:!0};bk.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const $oe=e=>e.experimentalFeatures,Iw=xt($oe,e=>!!e?.preferStrictDomainInLineCharts);let HM=0;const Roe=()=>(HM+=1,`mui-chart-${HM}`),vk=({params:e,store:t})=>(g.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",Ue({},t.state.id,{chartId:e.id??Roe()}))},[t,e.id]),{});vk.params={id:!0};vk.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const zoe=e=>e.id,Uoe=xt(zoe,e=>e.chartId),Foe=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Boe=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],VB=e=>e==="dark"?Boe:Foe,WB=({series:e,colors:t,seriesConfig:n})=>{const s={};return e.forEach((r,i)=>{const l=n[r.type].getSeriesWithDefaultValues(r,i,t),o=l.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[o]!==void 0)throw new Error(`MUI X Charts: series' id "${o}" is not unique.`);s[r.type].series[o]=l,s[r.type].seriesOrder.push(o)}),s},Hoe=(e,t,n)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,n)??i)}),s},$w=({params:e,store:t,seriesConfig:n})=>{const{series:s,dataset:r,theme:i,colors:l}=e,o=g.useRef(!0);return g.useEffect(()=>{if(o.current){o.current=!1;return}t.set("series",Ue({},t.state.series,{defaultizedSeries:WB({series:s,colors:typeof l=="function"?l(i):l,seriesConfig:n}),dataset:r}))},[l,r,s,i,n,t]),{}};$w.params={dataset:!0,series:!0,colors:!0,theme:!0};const Goe=[];$w.getDefaultizedParams=({params:e})=>Ue({},e,{series:e.series?.length?e.series:Goe,colors:e.colors??VB,theme:e.theme??"light"});$w.getInitialState=({series:e=[],colors:t,theme:n,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:WB({series:e,colors:typeof t=="function"?t(n):t,seriesConfig:i}),dataset:s}});const wk=e=>e.series,Voe=xt(wk,e=>e.defaultizedSeries),Tr=xt(wk,e=>e.seriesConfig),Woe=xt(wk,e=>e.dataset),an=bn(Voe,Tr,Woe,function(t,n,s){return Hoe(t,n,s)}),qoe={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class qB{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in qoe)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,n,s,r){this.element=t,this.pointerManager=n,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const l=`${this.name}ChangeState`;this.element.addEventListener(l,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,n){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return n;const s=this.pointerOptions[t];return s?Ue({},n,s):n}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange)}}class Yoe{activeGestures=new Map;registerActiveGesture(t,n){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:n,element:t};s.add(r)}unregisterActiveGesture(t,n){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===n&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const n=this.activeGestures.get(t);return n?Array.from(n).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,n){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Koe{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(n=>n==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Qoe{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const n=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(n,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const l=Ue({},i,{type:"forceCancel"});this.pointers.set(r,l)}}this.notifyHandlers(n),this.pointers.clear()};handlePointerEvent=t=>{const{type:n,pointerId:s}=t;if(n==="pointerdown"||n==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(n==="pointerup"||n==="pointercancel"||n==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(n=>n(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Xoe{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Yoe;keyboardManager=new Koe;constructor(t){this.pointerManager=new Qoe({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}setGestureState(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}registerElement(t,n,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,n,i)}),n}registerSingleGesture(t,n,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const i=this.elementGestureMap.get(n);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,n));const l=r.clone(s);return l.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,l),!0}unregisterElement(t,n){const s=this.elementGestureMap.get(n);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(n),s.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(t){const n=this.elementGestureMap.get(t);if(n){for(const[,s]of n)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class ju extends qB{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,n,s,r){super.init(t,n,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,n){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(n===s.target||s.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(s.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Zoe(e,t){const n=t.x-e.x,s=t.y-e.y;return Math.sqrt(n*n+s*s)}function aS(e){if(e.length<2)return 0;let t=0,n=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Zoe({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),n+=1;return n>0?t/n:0}function fo(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((n,s)=>(n.x+=s.clientX,n.y+=s.clientY,n),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function Kr(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const gy=1e-5,oc=1e-5,GM=.15;function Joe(e,t){const n=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=ece(t,e),l=Math.abs(n)>Math.abs(s)?"horizontal":"vertical",o=i||l==="horizontal"?gy:GM,d=i?gy:l==="horizontal"?GM:gy;return Math.abs(n)>o&&(r.horizontal=n>0?"right":"left"),Math.abs(s)>d&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":l,r}function ece(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,n)*180/Math.PI;return r>=-45+oc&&r<=-22.5+oc||r>=22.5+oc&&r<=45+oc||r>=135+oc&&r<=157.5+oc||r>=-157.5+oc&&r<=-135+oc}function tce(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const n=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return n&&s}const VM=0,ace=e=>e>VM?1:e<-VM?-1:0,hc=e=>{e.cancelable&&e.preventDefault()};class Nk extends ju{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new Nk(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,n)=>{if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r||!this.isWithinPointerCount(s,n.pointerType))return;if(this.shouldPreventGesture(r,n.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,n);return}const i={x:n.clientX,y:n.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,n)),this.emitMoveEvent(r,"ongoing",s,n)};emitMoveEvent(t,n,s,r){const i=this.state.lastPosition||fo(s),l=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,activeGestures:l,customData:this.customData},d=Kr(this.name,n),c=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}}class Vd extends ju{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new Vd(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=Ue({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancel(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.cancel(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.cancel(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(l=>{this.state.startPointers.set(l.pointerId,l)}),this.originalTarget=r,this.state.startCentroid=fo(i),this.state.lastCentroid=Ue({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,n.pointerType)){const l=fo(i),o=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y,c=Math.sqrt(o*o+d*d),m=Joe(this.state.lastCentroid??this.state.startCentroid,l),h=this.state.lastCentroid?l.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?l.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&c>=this.threshold&&tce(m,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,n,l),this.emitPanEvent(r,"ongoing",i,n,l)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,n,l)),this.state.lastCentroid=l,this.state.lastDirection=m}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,n.pointerType)){const o=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,n,o),this.emitPanEvent(r,"end",i,n,o),this.resetState()}}else this.resetState();break}};emitPanEvent(t,n,s,r,i){if(!this.state.startCentroid)return;const l=this.state.lastDeltas?.x??0,o=this.state.lastDeltas?.y??0,d=this.state.startPointers.values().next().value,c=d?(r.timeStamp-d.timeStamp)/1e3:0,m=c>0?l/c:0,h=c>0?o/c:0,p=Math.sqrt(m*m+h*h),b=this.gesturesRegistry.getActiveGestures(t),w={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,deltaX:l,deltaY:o,direction:this.state.lastDirection,velocityX:m,velocityY:h,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:b,customData:this.customData},x=Kr(this.name,n),v=new CustomEvent(x,{bubbles:!0,cancelable:!0,composed:!0,detail:w});t.dispatchEvent(v),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,n,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",n,s,this.state.lastCentroid),this.emitPanEvent(r,"end",n,s,this.state.lastCentroid)}this.resetState()}}class jk extends ju{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(Ue({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new jk(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=Ue({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,n),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(n.type){case"pointerdown":if(i.length>=2&&!this.isActive){const l=aS(i);this.state.startDistance=l,this.state.lastDistance=l,this.state.lastTime=n.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,n.pointerType)){const l=aS(i),o=Math.abs(l-this.state.lastDistance);if(o!==0&&o>=this.threshold){const d=this.state.startDistance?l/this.state.startDistance:1,c=d/this.state.lastScale;this.state.totalScale*=c;const m=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(l-this.state.lastDistance)/m;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=l,this.state.deltaScale=d-this.state.lastScale,this.state.lastScale=d,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,n):(this.isActive=!0,this.emitPinchEvent(r,"start",i,n),this.emitPinchEvent(r,"ongoing",i,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const l=i.filter(o=>o.type!=="pointerup"&&o.type!=="pointercancel");if(!this.isWithinPointerCount(l,n.pointerType))n.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,n),this.emitPinchEvent(r,"end",i,n),this.resetState();else if(l.length>=2){const o=aS(l);this.state.startDistance=o/this.state.lastScale}}break}};emitPinchEvent(t,n,s,r){const i=fo(s),l=this.state.lastDistance,o=this.state.lastScale,d=this.gesturesRegistry.getActiveGestures(t),c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,scale:o,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:l,velocity:this.state.velocity,activeGestures:d,direction:ace(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const m=Kr(this.name,n),h=new CustomEvent(m,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(h)}}class Rw extends ju{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new Rw(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=Ue({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancelPress(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&this.cancelPress(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelPress(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=fo(i),this.state.lastPosition=Ue({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const l=this.state.lastPosition;this.emitPressEvent(r,"start",i,n,l),this.emitPressEvent(r,"ongoing",i,n,l)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=fo(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y;Math.sqrt(o*o+d*d)>this.maxDistance&&this.cancelPress(r,i,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const l=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,n,l)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,n);break}};emitPressEvent(t,n,s,r,i){const l=this.gesturesRegistry.getActiveGestures(t),o=r.timeStamp-this.state.startTime,d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:o,activeGestures:l,customData:this.customData},c=Kr(this.name,n),m=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(m),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,n,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",n,s,r),this.emitPressEvent(t??this.element,"end",n,s,r)}this.resetState()}}class Ck extends ju{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new Rw({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Vd({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new Ck(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.pressGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",hc,{passive:!1}),this.element.addEventListener("touchmove",hc,{passive:!1}),this.element.addEventListener("touchend",hc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",hc),this.element.removeEventListener("touchmove",hc),this.element.removeEventListener("touchend",hc)}}class sp extends ju{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new sp(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,n.pointerType)||!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelTap(r,i,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=fo(i),this.state.lastPosition=Ue({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const l=fo(i);this.state.lastPosition=l;const o=l.x-this.state.startCentroid.x,d=l.y-this.state.startCentroid.y;Math.sqrt(o*o+d*d)>this.maxDistance&&this.cancelTap(r,i,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const l=this.state.lastPosition||this.state.startCentroid;if(!l){this.cancelTap(r,i,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,n,l),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,n);break}};fireTapEvent(t,n,s,r){const i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(o),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,n,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},o=Kr(this.name,"cancel"),d=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}this.resetState()}}class Sk extends ju{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new sp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new Vd({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new Sk(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.tapGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(Kr(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",hc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",hc)}}class Bb extends qB{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new Bb(Ue({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,n){const s=t.length>0?fo(t):{x:n.clientX,y:n.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:n.target,srcEvent:n,phase:"ongoing",pointers:t,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const l=Kr(this.name,"ongoing"),o=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(o)}}const Nm=e=>e.preventDefault(),_k=({svgRef:e})=>{const t=g.useRef(null);g.useEffect(()=>{const r=e.current;t.current||(t.current=new Xoe({gestures:[new Vd({name:"pan",threshold:0,maxPointers:1}),new Nk({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new sp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new Rw({name:"quickPress",duration:50}),new Vd({name:"brush",threshold:0,maxPointers:1}),new Vd({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new jk({name:"zoomPinch",threshold:5}),new Bb({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Bb({name:"panTurnWheel",sensitivity:.5}),new Sk({name:"zoomTapAndDrag",dragThreshold:10}),new Ck({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new sp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const n=g.useCallback((r,i,l)=>{const o=e.current;return o?.addEventListener(r,i,l),{cleanup:()=>o?.removeEventListener(r,i)}},[e]),s=g.useCallback((r,i)=>{const l=e.current,o=t.current;!o||!l||o.setGestureOptions(r,l,i??{})},[e,t]);return g.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Nm),r?.addEventListener("gesturechange",Nm),r?.addEventListener("gestureend",Nm),()=>{r?.removeEventListener("gesturestart",Nm),r?.removeEventListener("gesturechange",Nm),r?.removeEventListener("gestureend",Nm)}},[e]),{instance:{addInteractionListener:n,updateZoomInteractionListeners:s}}};_k.params={};_k.getInitialState=()=>({});const nce=[vk,bk,Mw,$w,_k,Dw],sce=["apiRef"],rce=e=>{let{plugins:t}=e,n=aa(e.props,sce);const s={};t.forEach(l=>{Object.assign(s,l.params)});const r={};return Object.keys(n).forEach(l=>{const o=n[l];s[l]&&(r[l]=o)}),t.reduce((l,o)=>o.getDefaultizedParams?o.getDefaultizedParams({params:l}):l,r)};let WM=0;function ice(e,t,n){const s=Ew(),r=g.useMemo(()=>[...nce,...e],[e]),i=rce({plugins:r,props:t});i.id=i.id??s;const o=g.useRef({}).current,d=oce(t.apiRef),c=g.useRef(null),m=g.useRef(null),h=g.useRef(null);if(h.current==null){WM+=1;const w={cacheKey:{id:WM}};r.forEach(x=>{x.getInitialState&&Object.assign(w,x.getInitialState(i,w,n))}),h.current=new yk(w)}const p=w=>{const x=w({instance:o,params:i,plugins:r,store:h.current,svgRef:m,chartRootRef:c,seriesConfig:n});x.publicAPI&&Object.assign(d.current,x.publicAPI),x.instance&&Object.assign(o,x.instance)};return r.forEach(p),{contextValue:g.useMemo(()=>({store:h.current,publicAPI:d.current,instance:o,svgRef:m,chartRootRef:c}),[o,d])}}function lce(e){return e.current==null&&(e.current={}),e}function oce(e){const t=g.useRef({});return e?lce(e):t}const YB=g.createContext(null);const KB=()=>{},QB=4,XB=20+2*QB,cce=40+2*QB,dce="hover",py={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:XB,showTooltip:dce}},Ak=(e,t,n,s)=>{if(e)return e===!0?Ue({axisId:t,axisDirection:n},py,{reverse:s??!1}):Ue({axisId:t,axisDirection:n},py,{reverse:s??!1},e,{slider:Ue({},py.slider,{size:e.slider?.preview??py.slider.preview?cce:XB},e.slider)})};function ZB(e,t){const n={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:Ow,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,d=l===0?"bottom":"none",c=i.position??d,m=_oe+(i.label?BB:0),h=i.id??`defaultized-x-axis-${l}`,p=Ue({offset:n[c]},i,{id:h,position:c,height:i.height??m,zoom:Ak(i.zoom,h,"x",i.reverse)});if(c!=="none"&&(n[c]+=p.height,p.zoom?.slider.enabled&&(n[c]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return Ue({},p,{data:t.map(b=>b[o])})})}function JB(e,t){const n={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:joe,scaleType:"linear"}]).map((i,l)=>{const o=i.dataKey,d=l===0?"left":"none",c=i.position??d,m=Soe+(i.label?BB:0),h=i.id??`defaultized-y-axis-${l}`,p=Ue({offset:n[c]},i,{id:h,position:c,width:i.width??m,zoom:Ak(i.zoom,h,"y",i.reverse)});if(c!=="none"&&(n[c]+=p.width,p.zoom?.slider.enabled&&(n[c]+=p.zoom.slider.size)),o===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return Ue({},p,{data:t.map(b=>b[o])})})}function uce(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Cu(e){return e.scaleType==="band"}function Su(e){return e.scaleType==="point"}function mce(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function fce(e){return e.scaleType==="symlog"}function ex(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Tk(e){let t=e,n=e;e.length===1&&(t=(l,o)=>e(l)-o,n=hce(e));function s(l,o,d,c){for(d==null&&(d=0),c==null&&(c=l.length);d<c;){const m=d+c>>>1;n(l[m],o)<0?d=m+1:c=m}return d}function r(l,o,d,c){for(d==null&&(d=0),c==null&&(c=l.length);d<c;){const m=d+c>>>1;n(l[m],o)>0?c=m:d=m+1}return d}function i(l,o,d,c){d==null&&(d=0),c==null&&(c=l.length);const m=s(l,o,d,c-1);return m>d&&t(l[m-1],o)>-t(l[m],o)?m-1:m}return{left:s,center:i,right:r}}function hce(e){return(t,n)=>ex(e(t),n)}function eH(e){return e===null?NaN:+e}function*gce(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const pce=Tk(ex),tx=pce.right;Tk(eH).center;class Hb extends Map{constructor(t,n=bce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(qM(this,t))}has(t){return super.has(qM(this,t))}set(t,n){return super.set(xce(this,t),n)}delete(t){return super.delete(yce(this,t))}}function qM({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function xce({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function yce({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(n),e.delete(s)),n}function bce(e){return e!==null&&typeof e=="object"?e.valueOf():e}var JA=Math.sqrt(50),eT=Math.sqrt(10),tT=Math.sqrt(2);function aT(e,t,n){var s,r=-1,i,l,o;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(o=tH(e,t,n))===0||!isFinite(o))return[];if(o>0){let d=Math.round(e/o),c=Math.round(t/o);for(d*o<e&&++d,c*o>t&&--c,l=new Array(i=c-d+1);++r<i;)l[r]=(d+r)*o}else{o=-o;let d=Math.round(e*o),c=Math.round(t*o);for(d/o<e&&++d,c/o>t&&--c,l=new Array(i=c-d+1);++r<i;)l[r]=(d+r)/o}return s&&l.reverse(),l}function tH(e,t,n){var s=(t-e)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=JA?10:i>=eT?5:i>=tT?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=JA?10:i>=eT?5:i>=tT?2:1)}function nT(e,t,n){var s=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=JA?r*=10:i>=eT?r*=5:i>=tT&&(r*=2),t<e?-r:r}function YM(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function KM(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function aH(e,t,n=0,s=e.length-1,r=ex){for(;s>n;){if(s-n>600){const d=s-n+1,c=t-n+1,m=Math.log(d),h=.5*Math.exp(2*m/3),p=.5*Math.sqrt(m*h*(d-h)/d)*(c-d/2<0?-1:1),b=Math.max(n,Math.floor(t-c*h/d+p)),w=Math.min(s,Math.floor(t+(d-c)*h/d+p));aH(e,t,b,w,r)}const i=e[t];let l=n,o=s;for(Uh(e,n,t),r(e[s],i)>0&&Uh(e,n,s);l<o;){for(Uh(e,l,o),++l,--o;r(e[l],i)<0;)++l;for(;r(e[o],i)>0;)--o}r(e[n],i)===0?Uh(e,n,o):(++o,Uh(e,o,s)),o<=t&&(n=o+1),t<=o&&(s=o-1)}return e}function Uh(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function vce(e,t,n){if(e=Float64Array.from(gce(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return KM(e);if(t>=1)return YM(e);var s,r=(s-1)*t,i=Math.floor(r),l=YM(aH(e,i).subarray(0,i+1)),o=KM(e.subarray(i+1));return l+(o-l)*(r-i)}}function wce(e,t,n=eH){if(s=e.length){if((t=+t)<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),l=+n(e[i],i,e),o=+n(e[i+1],i+1,e);return l+(o-l)*(r-i)}}function nH(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++s<r;)i[s]=e+s*n;return i}function ci(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function To(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sT=Symbol("implicit");function rp(){var e=new Hb,t=[],n=[],s=sT;function r(i){let l=e.get(i);if(l===void 0){if(s!==sT)return s;e.set(i,l=t.push(i)-1)}return n[l%n.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Hb;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return rp(t,n).unknown(s)},ci.apply(r,arguments),r}function Ek(){var e=rp().unknown(void 0),t=e.domain,n=e.range,s=0,r=1,i,l,o=!1,d=0,c=0,m=.5;delete e.unknown;function h(){var p=t().length,b=r<s,w=b?r:s,x=b?s:r;i=(x-w)/Math.max(1,p-d+c*2),o&&(i=Math.floor(i)),w+=(x-w-i*(p-d))*m,l=i*(1-d),o&&(w=Math.round(w),l=Math.round(l));var v=nH(p).map(function(j){return w+i*j});return n(b?v.reverse():v)}return e.domain=function(p){return arguments.length?(t(p),h()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,h()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,o=!0,h()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(p){return arguments.length?(o=!!p,h()):o},e.padding=function(p){return arguments.length?(d=Math.min(1,c=+p),h()):d},e.paddingInner=function(p){return arguments.length?(d=Math.min(1,p),h()):d},e.paddingOuter=function(p){return arguments.length?(c=+p,h()):c},e.align=function(p){return arguments.length?(m=Math.max(0,Math.min(1,p)),h()):m},e.copy=function(){return Ek(t(),[s,r]).round(o).paddingInner(d).paddingOuter(c).align(m)},ci.apply(h(),arguments)}function sH(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sH(t())},e}function Nce(){return sH(Ek.apply(null,arguments).paddingInner(1))}function kk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rH(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function ax(){}var ip=.7,Gb=1/ip,Km="\\s*([+-]?\\d+)\\s*",lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",il="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jce=/^#([0-9a-f]{3,8})$/,Cce=new RegExp(`^rgb\\(${Km},${Km},${Km}\\)$`),Sce=new RegExp(`^rgb\\(${il},${il},${il}\\)$`),_ce=new RegExp(`^rgba\\(${Km},${Km},${Km},${lp}\\)$`),Ace=new RegExp(`^rgba\\(${il},${il},${il},${lp}\\)$`),Tce=new RegExp(`^hsl\\(${lp},${il},${il}\\)$`),Ece=new RegExp(`^hsla\\(${lp},${il},${il},${lp}\\)$`),QM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kk(ax,op,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XM,formatHex:XM,formatHex8:kce,formatHsl:Lce,formatRgb:ZM,toString:ZM});function XM(){return this.rgb().formatHex()}function kce(){return this.rgb().formatHex8()}function Lce(){return iH(this).formatHsl()}function ZM(){return this.rgb().formatRgb()}function op(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jce.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?JM(t):n===3?new Vs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Cce.exec(e))?new Vs(t[1],t[2],t[3],1):(t=Sce.exec(e))?new Vs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_ce.exec(e))?xy(t[1],t[2],t[3],t[4]):(t=Ace.exec(e))?xy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Tce.exec(e))?aI(t[1],t[2]/100,t[3]/100,1):(t=Ece.exec(e))?aI(t[1],t[2]/100,t[3]/100,t[4]):QM.hasOwnProperty(e)?JM(QM[e]):e==="transparent"?new Vs(NaN,NaN,NaN,0):null}function JM(e){return new Vs(e>>16&255,e>>8&255,e&255,1)}function xy(e,t,n,s){return s<=0&&(e=t=n=NaN),new Vs(e,t,n,s)}function Pce(e){return e instanceof ax||(e=op(e)),e?(e=e.rgb(),new Vs(e.r,e.g,e.b,e.opacity)):new Vs}function rT(e,t,n,s){return arguments.length===1?Pce(e):new Vs(e,t,n,s??1)}function Vs(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}kk(Vs,rT,rH(ax,{brighter(e){return e=e==null?Gb:Math.pow(Gb,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ip:Math.pow(ip,e),new Vs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vs(Wd(this.r),Wd(this.g),Wd(this.b),Vb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eI,formatHex:eI,formatHex8:Dce,formatRgb:tI,toString:tI}));function eI(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}`}function Dce(){return`#${$d(this.r)}${$d(this.g)}${$d(this.b)}${$d((isNaN(this.opacity)?1:this.opacity)*255)}`}function tI(){const e=Vb(this.opacity);return`${e===1?"rgb(":"rgba("}${Wd(this.r)}, ${Wd(this.g)}, ${Wd(this.b)}${e===1?")":`, ${e})`}`}function Vb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $d(e){return e=Wd(e),(e<16?"0":"")+e.toString(16)}function aI(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ci(e,t,n,s)}function iH(e){if(e instanceof Ci)return new Ci(e.h,e.s,e.l,e.opacity);if(e instanceof ax||(e=op(e)),!e)return new Ci;if(e instanceof Ci)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),l=NaN,o=i-r,d=(i+r)/2;return o?(t===i?l=(n-s)/o+(n<s)*6:n===i?l=(s-t)/o+2:l=(t-n)/o+4,o/=d<.5?i+r:2-i-r,l*=60):o=d>0&&d<1?0:l,new Ci(l,o,d,e.opacity)}function Oce(e,t,n,s){return arguments.length===1?iH(e):new Ci(e,t,n,s??1)}function Ci(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}kk(Ci,Oce,rH(ax,{brighter(e){return e=e==null?Gb:Math.pow(Gb,e),new Ci(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ip:Math.pow(ip,e),new Ci(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new Vs(nS(e>=240?e-240:e+120,r,s),nS(e,r,s),nS(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Ci(nI(this.h),yy(this.s),yy(this.l),Vb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Vb(this.opacity);return`${e===1?"hsl(":"hsla("}${nI(this.h)}, ${yy(this.s)*100}%, ${yy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nI(e){return e=(e||0)%360,e<0?e+360:e}function yy(e){return Math.max(0,Math.min(1,e||0))}function nS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lk=e=>()=>e;function Mce(e,t){return function(n){return e+n*t}}function Ice(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function $ce(e){return(e=+e)==1?lH:function(t,n){return n-t?Ice(t,n,e):Lk(isNaN(t)?n:t)}}function lH(e,t){var n=t-e;return n?Mce(e,n):Lk(isNaN(e)?t:e)}const sI=(function e(t){var n=$ce(t);function s(r,i){var l=n((r=rT(r)).r,(i=rT(i)).r),o=n(r.g,i.g),d=n(r.b,i.b),c=lH(r.opacity,i.opacity);return function(m){return r.r=l(m),r.g=o(m),r.b=d(m),r.opacity=c(m),r+""}}return s.gamma=e,s})(1);function Rce(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function zce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Uce(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,r=new Array(s),i=new Array(n),l;for(l=0;l<s;++l)r[l]=Pf(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(o){for(l=0;l<s;++l)i[l]=r[l](o);return i}}function Pk(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function sf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Fce(e,t){var n={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Pf(e[r],t[r]):s[r]=t[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var iT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sS=new RegExp(iT.source,"g");function Bce(e){return function(){return e}}function Hce(e){return function(t){return e(t)+""}}function Dk(e,t){var n=iT.lastIndex=sS.lastIndex=0,s,r,i,l=-1,o=[],d=[];for(e=e+"",t=t+"";(s=iT.exec(e))&&(r=sS.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),o[l]?o[l]+=i:o[++l]=i),(s=s[0])===(r=r[0])?o[l]?o[l]+=r:o[++l]=r:(o[++l]=null,d.push({i:l,x:sf(s,r)})),n=sS.lastIndex;return n<t.length&&(i=t.slice(n),o[l]?o[l]+=i:o[++l]=i),o.length<2?d[0]?Hce(d[0].x):Bce(t):(t=d.length,function(c){for(var m=0,h;m<t;++m)o[(h=d[m]).i]=h.x(c);return o.join("")})}function Pf(e,t){var n=typeof t,s;return t==null||n==="boolean"?Lk(t):(n==="number"?sf:n==="string"?(s=op(t))?(t=s,sI):Dk:t instanceof op?sI:t instanceof Date?Pk:zce(t)?Rce:Array.isArray(t)?Uce:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fce:sf)(e,t)}function Ok(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Gce(e,t){t===void 0&&(t=e,e=Pf);for(var n=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(r,r=t[++n]);return function(l){var o=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[o](l-o)}}function Vce(e){return function(){return e}}function Wb(e){return+e}var rI=[0,1];function ks(e){return e}function lT(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vce(isNaN(t)?NaN:.5)}function Wce(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function qce(e,t,n){var s=e[0],r=e[1],i=t[0],l=t[1];return r<s?(s=lT(r,s),i=n(l,i)):(s=lT(s,r),i=n(i,l)),function(o){return i(s(o))}}function Yce(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)r[l]=lT(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(o){var d=tx(e,o,1,s)-1;return i[d](r[d](o))}}function nx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zw(){var e=rI,t=rI,n=Pf,s,r,i,l=ks,o,d,c;function m(){var p=Math.min(e.length,t.length);return l!==ks&&(l=Wce(e[0],e[p-1])),o=p>2?Yce:qce,d=c=null,h}function h(p){return p==null||isNaN(p=+p)?i:(d||(d=o(e.map(s),t,n)))(s(l(p)))}return h.invert=function(p){return l(r((c||(c=o(t,e.map(s),sf)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,Wb),m()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),m()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=Ok,m()},h.clamp=function(p){return arguments.length?(l=p?!0:ks,m()):l!==ks},h.interpolate=function(p){return arguments.length?(n=p,m()):n},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,b){return s=p,r=b,m()}}function Mk(){return zw()(ks,ks)}function Kce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function rf(e){return e=qb(Math.abs(e)),e?e[1]:NaN}function Qce(e,t){return function(n,s){for(var r=n.length,i=[],l=0,o=e[0],d=0;r>0&&o>0&&(d+o+1>s&&(o=Math.max(1,s-d)),i.push(n.substring(r-=o,r+o)),!((d+=o+1)>s));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Xce(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cp(e){if(!(t=Zce.exec(e)))throw new Error("invalid format: "+e);var t;return new Ik({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cp.prototype=Ik.prototype;function Ik(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ik.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jce(e){e:for(var t=e.length,n=1,s=-1,r;n<t;++n)switch(e[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var oH;function ede(e,t){var n=qb(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(oH=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+qb(e,Math.max(0,t+i-1))[0]}function iI(e,t){var n=qb(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const lI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Kce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iI(e*100,t),r:iI,s:ede,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function oI(e){return e}var cI=Array.prototype.map,dI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function tde(e){var t=e.grouping===void 0||e.thousands===void 0?oI:Qce(cI.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?oI:Xce(cI.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function c(h){h=cp(h);var p=h.fill,b=h.align,w=h.sign,x=h.symbol,v=h.zero,j=h.width,C=h.comma,S=h.precision,_=h.trim,A=h.type;A==="n"?(C=!0,A="g"):lI[A]||(S===void 0&&(S=12),_=!0,A="g"),(v||p==="0"&&b==="=")&&(v=!0,p="0",b="=");var T=x==="$"?n:x==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",E=x==="$"?s:/[%p]/.test(A)?l:"",D=lI[A],z=/[defgprs%]/.test(A);S=S===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function K(B){var O=T,L=E,H,ae,W;if(A==="c")L=D(B)+L,B="";else{B=+B;var q=B<0||1/B<0;if(B=isNaN(B)?d:D(Math.abs(B),S),_&&(B=Jce(B)),q&&+B==0&&w!=="+"&&(q=!1),O=(q?w==="("?w:o:w==="-"||w==="("?"":w)+O,L=(A==="s"?dI[8+oH/3]:"")+L+(q&&w==="("?")":""),z){for(H=-1,ae=B.length;++H<ae;)if(W=B.charCodeAt(H),48>W||W>57){L=(W===46?r+B.slice(H+1):B.slice(H))+L,B=B.slice(0,H);break}}}C&&!v&&(B=t(B,1/0));var le=O.length+B.length+L.length,Q=le<j?new Array(j-le+1).join(p):"";switch(C&&v&&(B=t(Q+B,Q.length?j-L.length:1/0),Q=""),b){case"<":B=O+B+L+Q;break;case"=":B=O+Q+B+L;break;case"^":B=Q.slice(0,le=Q.length>>1)+O+B+L+Q.slice(le);break;default:B=Q+O+B+L;break}return i(B)}return K.toString=function(){return h+""},K}function m(h,p){var b=c((h=cp(h),h.type="f",h)),w=Math.max(-8,Math.min(8,Math.floor(rf(p)/3)))*3,x=Math.pow(10,-w),v=dI[8+w/3];return function(j){return b(x*j)+v}}return{format:c,formatPrefix:m}}var by,$k,cH;ade({thousands:",",grouping:[3],currency:["$",""]});function ade(e){return by=tde(e),$k=by.format,cH=by.formatPrefix,by}function nde(e){return Math.max(0,-rf(Math.abs(e)))}function sde(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(t)/3)))*3-rf(Math.abs(e)))}function rde(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rf(t)-rf(e))+1}function dH(e,t,n,s){var r=nT(e,t,n),i;switch(s=cp(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=sde(r,l))&&(s.precision=i),cH(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=rde(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=nde(r))&&(s.precision=i-(s.type==="%")*2);break}}return $k(s)}function Fc(e){var t=e.domain;return e.ticks=function(n){var s=t();return aT(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var r=t();return dH(r[0],r[r.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),r=0,i=s.length-1,l=s[r],o=s[i],d,c,m=10;for(o<l&&(c=l,l=o,o=c,c=r,r=i,i=c);m-- >0;){if(c=tH(l,o,n),c===d)return s[r]=l,s[i]=o,t(s);if(c>0)l=Math.floor(l/c)*c,o=Math.ceil(o/c)*c;else if(c<0)l=Math.ceil(l*c)/c,o=Math.floor(o*c)/c;else break;d=c}return e},e}function Uw(){var e=Mk();return e.copy=function(){return nx(e,Uw())},ci.apply(e,arguments),Fc(e)}function uH(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Wb),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return uH(e).unknown(t)},e=arguments.length?Array.from(e,Wb):[0,1],Fc(n)}function mH(e,t){e=e.slice();var n=0,s=e.length-1,r=e[n],i=e[s],l;return i<r&&(l=n,n=s,s=l,l=r,r=i,i=l),e[n]=t.floor(r),e[s]=t.ceil(i),e}function uI(e){return Math.log(e)}function mI(e){return Math.exp(e)}function ide(e){return-Math.log(-e)}function lde(e){return-Math.exp(-e)}function ode(e){return isFinite(e)?+("1e"+e):e<0?0:e}function cde(e){return e===10?ode:e===Math.E?Math.exp:t=>Math.pow(e,t)}function dde(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fI(e){return(t,n)=>-e(-t,n)}function Rk(e){const t=e(uI,mI),n=t.domain;let s=10,r,i;function l(){return r=dde(s),i=cde(s),n()[0]<0?(r=fI(r),i=fI(i),e(ide,lde)):e(uI,mI),t}return t.base=function(o){return arguments.length?(s=+o,l()):s},t.domain=function(o){return arguments.length?(n(o),l()):n()},t.ticks=o=>{const d=n();let c=d[0],m=d[d.length-1];const h=m<c;h&&([c,m]=[m,c]);let p=r(c),b=r(m),w,x;const v=o==null?10:+o;let j=[];if(!(s%1)&&b-p<v){if(p=Math.floor(p),b=Math.ceil(b),c>0){for(;p<=b;++p)for(w=1;w<s;++w)if(x=p<0?w/i(-p):w*i(p),!(x<c)){if(x>m)break;j.push(x)}}else for(;p<=b;++p)for(w=s-1;w>=1;--w)if(x=p>0?w/i(-p):w*i(p),!(x<c)){if(x>m)break;j.push(x)}j.length*2<v&&(j=aT(c,m,v))}else j=aT(p,b,Math.min(b-p,v)).map(i);return h?j.reverse():j},t.tickFormat=(o,d)=>{if(o==null&&(o=10),d==null&&(d=s===10?"s":","),typeof d!="function"&&(!(s%1)&&(d=cp(d)).precision==null&&(d.trim=!0),d=$k(d)),o===1/0)return d;const c=Math.max(1,s*o/t.ticks().length);return m=>{let h=m/i(Math.round(r(m)));return h*s<s-.5&&(h*=s),h<=c?d(m):""}},t.nice=()=>n(mH(n(),{floor:o=>i(Math.floor(r(o))),ceil:o=>i(Math.ceil(r(o)))})),t}function dp(){const e=Rk(zw()).domain([1,10]);return e.copy=()=>nx(e,dp()).base(e.base()),ci.apply(e,arguments),e}function hI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function zk(e){var t=1,n=e(hI(t),gI(t));return n.constant=function(s){return arguments.length?e(hI(t=+s),gI(t)):t},Fc(n)}function Uk(){var e=zk(zw());return e.copy=function(){return nx(e,Uk()).constant(e.constant())},ci.apply(e,arguments)}function pI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ude(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function mde(e){return e<0?-e*e:e*e}function Fk(e){var t=e(ks,ks),n=1;function s(){return n===1?e(ks,ks):n===.5?e(ude,mde):e(pI(n),pI(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,s()):n},Fc(t)}function Fw(){var e=Fk(zw());return e.copy=function(){return nx(e,Fw()).exponent(e.exponent())},ci.apply(e,arguments),e}function fH(){return Fw.apply(null,arguments).exponent(.5)}function xI(e){return Math.sign(e)*e*e}function fde(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function hH(){var e=Mk(),t=[0,1],n=!1,s;function r(i){var l=fde(e(i));return isNaN(l)?s:n?Math.round(l):l}return r.invert=function(i){return e.invert(xI(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,Wb)).map(xI)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(n=!!i,r):n},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return hH(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},ci.apply(r,arguments),Fc(r)}function gH(){var e=[],t=[],n=[],s;function r(){var l=0,o=Math.max(1,t.length);for(n=new Array(o-1);++l<o;)n[l-1]=wce(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?s:t[tx(n,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(ex),r()},i.range=function(l){return arguments.length?(t=Array.from(l),r()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return gH().domain(e).range(t).unknown(s)},ci.apply(i,arguments)}function pH(){var e=0,t=1,n=1,s=[.5],r=[0,1],i;function l(d){return d!=null&&d<=d?r[tx(s,d,0,n)]:i}function o(){var d=-1;for(s=new Array(n);++d<n;)s[d]=((d+1)*t-(d-n)*e)/(n+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,o()):[e,t]},l.range=function(d){return arguments.length?(n=(r=Array.from(d)).length-1,o()):r.slice()},l.invertExtent=function(d){var c=r.indexOf(d);return c<0?[NaN,NaN]:c<1?[e,s[0]]:c>=n?[s[n-1],t]:[s[c-1],s[c]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return s.slice()},l.copy=function(){return pH().domain([e,t]).range(r).unknown(i)},ci.apply(Fc(l),arguments)}function Bk(){var e=[.5],t=[0,1],n,s=1;function r(i){return i!=null&&i<=i?t[tx(e,i,0,s)]:n}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return Bk().domain(e).range(t).unknown(n)},ci.apply(r,arguments)}const rS=new Date,iS=new Date;function Fn(e,t,n,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const l=r(i),o=r.ceil(i);return i-l<o-i?l:o},r.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),r.range=(i,l,o)=>{const d=[];if(i=r.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return d;let c;do d.push(c=new Date(+i)),t(i,o),e(i);while(c<i&&i<l);return d},r.filter=i=>Fn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),n&&(r.count=(i,l)=>(rS.setTime(+i),iS.setTime(+l),e(rS),e(iS),Math.floor(n(rS,iS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?l=>s(l)%i===0:l=>r.count(0,l)%i===0):r)),r}const Yb=Fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Yb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Yb);Yb.range;const to=1e3,qr=to*60,ao=qr*60,ho=ao*24,Hk=ho*7,yI=ho*30,lS=ho*365,Rd=Fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*to)},(e,t)=>(t-e)/to,e=>e.getUTCSeconds());Rd.range;const Gk=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*to)},(e,t)=>{e.setTime(+e+t*qr)},(e,t)=>(t-e)/qr,e=>e.getMinutes());Gk.range;const Vk=Fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qr)},(e,t)=>(t-e)/qr,e=>e.getUTCMinutes());Vk.range;const Wk=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*to-e.getMinutes()*qr)},(e,t)=>{e.setTime(+e+t*ao)},(e,t)=>(t-e)/ao,e=>e.getHours());Wk.range;const qk=Fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ao)},(e,t)=>(t-e)/ao,e=>e.getUTCHours());qk.range;const sx=Fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qr)/ho,e=>e.getDate()-1);sx.range;const Bw=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ho,e=>e.getUTCDate()-1);Bw.range;const xH=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ho,e=>Math.floor(e/ho));xH.range;function _u(e){return Fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*qr)/Hk)}const Hw=_u(0),Kb=_u(1),hde=_u(2),gde=_u(3),lf=_u(4),pde=_u(5),xde=_u(6);Hw.range;Kb.range;hde.range;gde.range;lf.range;pde.range;xde.range;function Au(e){return Fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Hk)}const Gw=Au(0),Qb=Au(1),yde=Au(2),bde=Au(3),of=Au(4),vde=Au(5),wde=Au(6);Gw.range;Qb.range;yde.range;bde.range;of.range;vde.range;wde.range;const Yk=Fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Yk.range;const Kk=Fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kk.range;const go=Fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());go.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});go.range;const po=Fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});po.range;function yH(e,t,n,s,r,i){const l=[[Rd,1,to],[Rd,5,5*to],[Rd,15,15*to],[Rd,30,30*to],[i,1,qr],[i,5,5*qr],[i,15,15*qr],[i,30,30*qr],[r,1,ao],[r,3,3*ao],[r,6,6*ao],[r,12,12*ao],[s,1,ho],[s,2,2*ho],[n,1,Hk],[t,1,yI],[t,3,3*yI],[e,1,lS]];function o(c,m,h){const p=m<c;p&&([c,m]=[m,c]);const b=h&&typeof h.range=="function"?h:d(c,m,h),w=b?b.range(c,+m+1):[];return p?w.reverse():w}function d(c,m,h){const p=Math.abs(m-c)/h,b=Tk(([,,v])=>v).right(l,p);if(b===l.length)return e.every(nT(c/lS,m/lS,h));if(b===0)return Yb.every(Math.max(nT(c,m,h),1));const[w,x]=l[p/l[b-1][2]<l[b][2]/p?b-1:b];return w.every(x)}return[o,d]}const[Nde,jde]=yH(po,Kk,Gw,xH,qk,Vk),[Cde,Sde]=yH(go,Yk,Hw,sx,Wk,Gk);function oS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function _de(e){var t=e.dateTime,n=e.date,s=e.time,r=e.periods,i=e.days,l=e.shortDays,o=e.months,d=e.shortMonths,c=Bh(r),m=Hh(r),h=Bh(i),p=Hh(i),b=Bh(l),w=Hh(l),x=Bh(o),v=Hh(o),j=Bh(d),C=Hh(d),S={a:q,A:le,b:Q,B:te,c:null,d:CI,e:CI,f:Kde,g:rue,G:lue,H:Wde,I:qde,j:Yde,L:bH,m:Qde,M:Xde,p:V,q:ee,Q:AI,s:TI,S:Zde,u:Jde,U:eue,V:tue,w:aue,W:nue,x:null,X:null,y:sue,Y:iue,Z:oue,"%":_I},_={a:me,A:we,b:ve,B:Ae,c:null,d:SI,e:SI,f:mue,g:Nue,G:Cue,H:cue,I:due,j:uue,L:wH,m:fue,M:hue,p:be,q:Ie,Q:AI,s:TI,S:gue,u:pue,U:xue,V:yue,w:bue,W:vue,x:null,X:null,y:wue,Y:jue,Z:Sue,"%":_I},A={a:K,A:B,b:O,B:L,c:H,d:NI,e:NI,f:Bde,g:wI,G:vI,H:jI,I:jI,j:Rde,L:Fde,m:$de,M:zde,p:z,q:Ide,Q:Gde,s:Vde,S:Ude,u:Lde,U:Pde,V:Dde,w:kde,W:Ode,x:ae,X:W,y:wI,Y:vI,Z:Mde,"%":Hde};S.x=T(n,S),S.X=T(s,S),S.c=T(t,S),_.x=T(n,_),_.X=T(s,_),_.c=T(t,_);function T(G,Ce){return function(ce){var F=[],ie=-1,he=0,Le=G.length,xe,Ve,ke;for(ce instanceof Date||(ce=new Date(+ce));++ie<Le;)G.charCodeAt(ie)===37&&(F.push(G.slice(he,ie)),(Ve=bI[xe=G.charAt(++ie)])!=null?xe=G.charAt(++ie):Ve=xe==="e"?" ":"0",(ke=Ce[xe])&&(xe=ke(ce,Ve)),F.push(xe),he=ie+1);return F.push(G.slice(he,ie)),F.join("")}}function E(G,Ce){return function(ce){var F=Fh(1900,void 0,1),ie=D(F,G,ce+="",0),he,Le;if(ie!=ce.length)return null;if("Q"in F)return new Date(F.Q);if("s"in F)return new Date(F.s*1e3+("L"in F?F.L:0));if(Ce&&!("Z"in F)&&(F.Z=0),"p"in F&&(F.H=F.H%12+F.p*12),F.m===void 0&&(F.m="q"in F?F.q:0),"V"in F){if(F.V<1||F.V>53)return null;"w"in F||(F.w=1),"Z"in F?(he=cS(Fh(F.y,0,1)),Le=he.getUTCDay(),he=Le>4||Le===0?Qb.ceil(he):Qb(he),he=Bw.offset(he,(F.V-1)*7),F.y=he.getUTCFullYear(),F.m=he.getUTCMonth(),F.d=he.getUTCDate()+(F.w+6)%7):(he=oS(Fh(F.y,0,1)),Le=he.getDay(),he=Le>4||Le===0?Kb.ceil(he):Kb(he),he=sx.offset(he,(F.V-1)*7),F.y=he.getFullYear(),F.m=he.getMonth(),F.d=he.getDate()+(F.w+6)%7)}else("W"in F||"U"in F)&&("w"in F||(F.w="u"in F?F.u%7:"W"in F?1:0),Le="Z"in F?cS(Fh(F.y,0,1)).getUTCDay():oS(Fh(F.y,0,1)).getDay(),F.m=0,F.d="W"in F?(F.w+6)%7+F.W*7-(Le+5)%7:F.w+F.U*7-(Le+6)%7);return"Z"in F?(F.H+=F.Z/100|0,F.M+=F.Z%100,cS(F)):oS(F)}}function D(G,Ce,ce,F){for(var ie=0,he=Ce.length,Le=ce.length,xe,Ve;ie<he;){if(F>=Le)return-1;if(xe=Ce.charCodeAt(ie++),xe===37){if(xe=Ce.charAt(ie++),Ve=A[xe in bI?Ce.charAt(ie++):xe],!Ve||(F=Ve(G,ce,F))<0)return-1}else if(xe!=ce.charCodeAt(F++))return-1}return F}function z(G,Ce,ce){var F=c.exec(Ce.slice(ce));return F?(G.p=m.get(F[0].toLowerCase()),ce+F[0].length):-1}function K(G,Ce,ce){var F=b.exec(Ce.slice(ce));return F?(G.w=w.get(F[0].toLowerCase()),ce+F[0].length):-1}function B(G,Ce,ce){var F=h.exec(Ce.slice(ce));return F?(G.w=p.get(F[0].toLowerCase()),ce+F[0].length):-1}function O(G,Ce,ce){var F=j.exec(Ce.slice(ce));return F?(G.m=C.get(F[0].toLowerCase()),ce+F[0].length):-1}function L(G,Ce,ce){var F=x.exec(Ce.slice(ce));return F?(G.m=v.get(F[0].toLowerCase()),ce+F[0].length):-1}function H(G,Ce,ce){return D(G,t,Ce,ce)}function ae(G,Ce,ce){return D(G,n,Ce,ce)}function W(G,Ce,ce){return D(G,s,Ce,ce)}function q(G){return l[G.getDay()]}function le(G){return i[G.getDay()]}function Q(G){return d[G.getMonth()]}function te(G){return o[G.getMonth()]}function V(G){return r[+(G.getHours()>=12)]}function ee(G){return 1+~~(G.getMonth()/3)}function me(G){return l[G.getUTCDay()]}function we(G){return i[G.getUTCDay()]}function ve(G){return d[G.getUTCMonth()]}function Ae(G){return o[G.getUTCMonth()]}function be(G){return r[+(G.getUTCHours()>=12)]}function Ie(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var Ce=T(G+="",S);return Ce.toString=function(){return G},Ce},parse:function(G){var Ce=E(G+="",!1);return Ce.toString=function(){return G},Ce},utcFormat:function(G){var Ce=T(G+="",_);return Ce.toString=function(){return G},Ce},utcParse:function(G){var Ce=E(G+="",!0);return Ce.toString=function(){return G},Ce}}}var bI={"-":"",_:" ",0:"0"},Jn=/^\s*\d+/,Ade=/^%/,Tde=/[\\^$*+?|[\]().{}]/g;function ua(e,t,n){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<n?new Array(n-i+1).join(t)+r:r)}function Ede(e){return e.replace(Tde,"\\$&")}function Bh(e){return new RegExp("^(?:"+e.map(Ede).join("|")+")","i")}function Hh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function kde(e,t,n){var s=Jn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function Lde(e,t,n){var s=Jn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function Pde(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function Dde(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function Ode(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function vI(e,t,n){var s=Jn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function wI(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function Mde(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function Ide(e,t,n){var s=Jn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function $de(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function NI(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function Rde(e,t,n){var s=Jn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function jI(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function zde(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function Ude(e,t,n){var s=Jn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Fde(e,t,n){var s=Jn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function Bde(e,t,n){var s=Jn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function Hde(e,t,n){var s=Ade.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Gde(e,t,n){var s=Jn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Vde(e,t,n){var s=Jn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function CI(e,t){return ua(e.getDate(),t,2)}function Wde(e,t){return ua(e.getHours(),t,2)}function qde(e,t){return ua(e.getHours()%12||12,t,2)}function Yde(e,t){return ua(1+sx.count(go(e),e),t,3)}function bH(e,t){return ua(e.getMilliseconds(),t,3)}function Kde(e,t){return bH(e,t)+"000"}function Qde(e,t){return ua(e.getMonth()+1,t,2)}function Xde(e,t){return ua(e.getMinutes(),t,2)}function Zde(e,t){return ua(e.getSeconds(),t,2)}function Jde(e){var t=e.getDay();return t===0?7:t}function eue(e,t){return ua(Hw.count(go(e)-1,e),t,2)}function vH(e){var t=e.getDay();return t>=4||t===0?lf(e):lf.ceil(e)}function tue(e,t){return e=vH(e),ua(lf.count(go(e),e)+(go(e).getDay()===4),t,2)}function aue(e){return e.getDay()}function nue(e,t){return ua(Kb.count(go(e)-1,e),t,2)}function sue(e,t){return ua(e.getFullYear()%100,t,2)}function rue(e,t){return e=vH(e),ua(e.getFullYear()%100,t,2)}function iue(e,t){return ua(e.getFullYear()%1e4,t,4)}function lue(e,t){var n=e.getDay();return e=n>=4||n===0?lf(e):lf.ceil(e),ua(e.getFullYear()%1e4,t,4)}function oue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ua(t/60|0,"0",2)+ua(t%60,"0",2)}function SI(e,t){return ua(e.getUTCDate(),t,2)}function cue(e,t){return ua(e.getUTCHours(),t,2)}function due(e,t){return ua(e.getUTCHours()%12||12,t,2)}function uue(e,t){return ua(1+Bw.count(po(e),e),t,3)}function wH(e,t){return ua(e.getUTCMilliseconds(),t,3)}function mue(e,t){return wH(e,t)+"000"}function fue(e,t){return ua(e.getUTCMonth()+1,t,2)}function hue(e,t){return ua(e.getUTCMinutes(),t,2)}function gue(e,t){return ua(e.getUTCSeconds(),t,2)}function pue(e){var t=e.getUTCDay();return t===0?7:t}function xue(e,t){return ua(Gw.count(po(e)-1,e),t,2)}function NH(e){var t=e.getUTCDay();return t>=4||t===0?of(e):of.ceil(e)}function yue(e,t){return e=NH(e),ua(of.count(po(e),e)+(po(e).getUTCDay()===4),t,2)}function bue(e){return e.getUTCDay()}function vue(e,t){return ua(Qb.count(po(e)-1,e),t,2)}function wue(e,t){return ua(e.getUTCFullYear()%100,t,2)}function Nue(e,t){return e=NH(e),ua(e.getUTCFullYear()%100,t,2)}function jue(e,t){return ua(e.getUTCFullYear()%1e4,t,4)}function Cue(e,t){var n=e.getUTCDay();return e=n>=4||n===0?of(e):of.ceil(e),ua(e.getUTCFullYear()%1e4,t,4)}function Sue(){return"+0000"}function _I(){return"%"}function AI(e){return+e}function TI(e){return Math.floor(+e/1e3)}var jm,jH,CH;_ue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _ue(e){return jm=_de(e),jH=jm.format,jm.parse,CH=jm.utcFormat,jm.utcParse,jm}function Aue(e){return new Date(e)}function Tue(e){return e instanceof Date?+e:+new Date(+e)}function Qk(e,t,n,s,r,i,l,o,d,c){var m=Mk(),h=m.invert,p=m.domain,b=c(".%L"),w=c(":%S"),x=c("%I:%M"),v=c("%I %p"),j=c("%a %d"),C=c("%b %d"),S=c("%B"),_=c("%Y");function A(T){return(d(T)<T?b:o(T)<T?w:l(T)<T?x:i(T)<T?v:s(T)<T?r(T)<T?j:C:n(T)<T?S:_)(T)}return m.invert=function(T){return new Date(h(T))},m.domain=function(T){return arguments.length?p(Array.from(T,Tue)):p().map(Aue)},m.ticks=function(T){var E=p();return e(E[0],E[E.length-1],T??10)},m.tickFormat=function(T,E){return E==null?A:c(E)},m.nice=function(T){var E=p();return(!T||typeof T.range!="function")&&(T=t(E[0],E[E.length-1],T??10)),T?p(mH(E,T)):m},m.copy=function(){return nx(m,Qk(e,t,n,s,r,i,l,o,d,c))},m}function Xk(){return ci.apply(Qk(Cde,Sde,go,Yk,Hw,sx,Wk,Gk,Rd,jH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function SH(){return ci.apply(Qk(Nde,jde,po,Kk,Gw,Bw,qk,Vk,Rd,CH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vw(){var e=0,t=1,n,s,r,i,l=ks,o=!1,d;function c(h){return h==null||isNaN(h=+h)?d:l(r===0?.5:(h=(i(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),r=n===s?0:1/(s-n),c):[e,t]},c.clamp=function(h){return arguments.length?(o=!!h,c):o},c.interpolator=function(h){return arguments.length?(l=h,c):l};function m(h){return function(p){var b,w;return arguments.length?([b,w]=p,l=h(b,w),c):[l(0),l(1)]}}return c.range=m(Pf),c.rangeRound=m(Ok),c.unknown=function(h){return arguments.length?(d=h,c):d},function(h){return i=h,n=h(e),s=h(t),r=n===s?0:1/(s-n),c}}function Bc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zk(){var e=Fc(Vw()(ks));return e.copy=function(){return Bc(e,Zk())},To.apply(e,arguments)}function _H(){var e=Rk(Vw()).domain([1,10]);return e.copy=function(){return Bc(e,_H()).base(e.base())},To.apply(e,arguments)}function AH(){var e=zk(Vw());return e.copy=function(){return Bc(e,AH()).constant(e.constant())},To.apply(e,arguments)}function Jk(){var e=Fk(Vw());return e.copy=function(){return Bc(e,Jk()).exponent(e.exponent())},To.apply(e,arguments)}function Eue(){return Jk.apply(null,arguments).exponent(.5)}function TH(){var e=[],t=ks;function n(s){if(s!=null&&!isNaN(s=+s))return t((tx(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(ex),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(r,i)=>vce(e,i/s))},n.copy=function(){return TH(t).domain(e)},To.apply(n,arguments)}function Ww(){var e=0,t=.5,n=1,s=1,r,i,l,o,d,c=ks,m,h=!1,p;function b(x){return isNaN(x=+x)?p:(x=.5+((x=+m(x))-i)*(s*x<s*i?o:d),c(h?Math.max(0,Math.min(1,x)):x))}b.domain=function(x){return arguments.length?([e,t,n]=x,r=m(e=+e),i=m(t=+t),l=m(n=+n),o=r===i?0:.5/(i-r),d=i===l?0:.5/(l-i),s=i<r?-1:1,b):[e,t,n]},b.clamp=function(x){return arguments.length?(h=!!x,b):h},b.interpolator=function(x){return arguments.length?(c=x,b):c};function w(x){return function(v){var j,C,S;return arguments.length?([j,C,S]=v,c=Gce(x,[j,C,S]),b):[c(0),c(.5),c(1)]}}return b.range=w(Pf),b.rangeRound=w(Ok),b.unknown=function(x){return arguments.length?(p=x,b):p},function(x){return m=x,r=x(e),i=x(t),l=x(n),o=r===i?0:.5/(i-r),d=i===l?0:.5/(l-i),s=i<r?-1:1,b}}function EH(){var e=Fc(Ww()(ks));return e.copy=function(){return Bc(e,EH())},To.apply(e,arguments)}function kH(){var e=Rk(Ww()).domain([.1,1,10]);return e.copy=function(){return Bc(e,kH()).base(e.base())},To.apply(e,arguments)}function LH(){var e=zk(Ww());return e.copy=function(){return Bc(e,LH()).constant(e.constant())},To.apply(e,arguments)}function eL(){var e=Fk(Ww());return e.copy=function(){return Bc(e,eL()).exponent(e.exponent())},To.apply(e,arguments)}function kue(){return eL.apply(null,arguments).exponent(.5)}function PH(e){return e.type==="piecewise"?Bk(e.thresholds,e.colors):Zk([e.min??0,e.max??100],e.color)}function cf(e){return e.values?rp(e.values,e.colors).unknown(e.unknownColor??null):rp(e.colors.map((t,n)=>n),e.colors).unknown(e.unknownColor??null)}function Qm(e){return e.type==="ordinal"?cf(e):PH(e)}function DH(e,t,n){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,l=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),o=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(l,Math.max(o,i??n))}function OH(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function tL(e){return Math.floor(Math.abs(e)/50)}function EI(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function qw(...e){let t=new Hb(void 0,EI),n=[],s=[],r=0,i=1,l,o,d=!1,c=0,m=0,h=.5;const p=v=>{const j=t.get(v);if(j!==void 0)return s[j%s.length]},b=()=>{const v=n.length,j=i<r,C=j?i:r,S=j?r:i;l=(S-C)/Math.max(1,v-c+m*2),d&&(l=Math.floor(l));const _=C+(S-C-l*(v-c))*h;o=l*(1-c);const A=d?Math.round(_):_;o=d?Math.round(o):o;const E=nH(v).map(D=>A+l*D);return s=j?E.reverse():E,p};p.domain=function(v){if(!arguments.length)return n.slice();n=[],t=new Hb(void 0,EI);for(const j of v)t.has(j)||t.set(j,n.push(j)-1);return b()},p.range=function(v){if(!arguments.length)return[r,i];const[j,C]=v;return r=+j,i=+C,b()},p.rangeRound=function(v){const[j,C]=v;return r=+j,i=+C,d=!0,b()},p.bandwidth=function(){return o},p.step=function(){return l},p.round=function(v){return arguments.length?(d=!!v,b()):d},p.padding=function(v){return arguments.length?(c=Math.min(1,m=+v),b()):c},p.paddingInner=function(v){return arguments.length?(c=Math.min(1,v),b()):c},p.paddingOuter=function(v){return arguments.length?(m=+v,b()):m},p.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),b()):h},p.copy=()=>qw(n,[r,i]).round(d).paddingInner(c).paddingOuter(m).align(h);const[w,x]=e;return e.length>1?(p.domain(w),p.range(x)):w?p.range(w):b(),p}function MH(...e){const t=qw(...e).paddingInner(1),n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=n();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function IH(...e){const t=Uk(...e),n=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=Lue(t);return t.ticks=l=>{const o=n(l),d=t.constant();let c=0,m=0,h=0;o.forEach(b=>{b>-d&&b<d&&(m+=1),b<=-d&&(c+=1),b>=d&&(h+=1)});const p=[];if(c>0&&p.push(...s.ticks(c)),m>0){const b=r.ticks(m);p.at(-1)===b[0]?p.push(...b.slice(1)):p.push(...b)}if(h>0){const b=i.ticks(h);p.at(-1)===b[0]?p.push(...b.slice(1)):p.push(...b)}return p},t.tickFormat=(l=10,o)=>{const d=t.constant(),[c,m]=t.domain(),h=m-c,p=s.domain(),b=p[1]-p[0],x=(h===0?0:b/h)*l,v=r.domain(),j=v[1]-v[0],S=(h===0?0:j/h)*l,_=i.domain(),A=_[1]-_[0],E=(h===0?0:A/h)*l,D=s.tickFormat(x,o),z=r.tickFormat(S,o),K=i.tickFormat(E,o);return B=>(B.valueOf()<=-d?D:B.valueOf()>=d?K:z)(B)},t.copy=()=>IH(t.domain(),t.range()).constant(t.constant()),t}function Lue(e){const t=e.constant(),n=e.domain(),s=[n[0],Math.min(n[1],-t)],r=dp(s,e.range()),i=[Math.max(n[0],-t),Math.min(n[1],t)],l=Uw(i,e.range()),o=[Math.max(n[0],t),n[1]],d=dp(o,e.range());return{negativeScale:r,linearScale:l,positiveScale:d}}function Yw(e,t,n){switch(e){case"log":return dp(t,n);case"pow":return Fw(t,n);case"sqrt":return fH(t,n);case"time":return Xk(t,n);case"utc":return SH(t,n);case"symlog":return IH(t,n);default:return Uw(t,n)}}const oT=e=>e?.[0]instanceof Date;function cT(e,t,n){const s=Xk(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(n)(r):`${r.toLocaleString()}`}let kI,LI;class Pue{types=new Set;constructor(){if(kI)throw new Error("You can only create one instance!");kI=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class Due{types=new Set;constructor(){if(LI)throw new Error("You can only create one instance!");LI=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const Kw=new Pue;Kw.addType("bar");Kw.addType("line");Kw.addType("scatter");const $H=new Due;$H.addType("radar");function Qw(e){return Kw.getTypes().has(e)}function Xb(e){return Qw(e.type)}const Oue=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(Qw).forEach(l=>{const o=n[l]?.series??{},d=t[l].axisTooltipGetter?.(o);d!==void 0&&d.forEach(({axisId:c,direction:m})=>{m===e&&r.add(c??s)})}),r};function es(e){return e.bandwidth!==void 0}function Mue(e){return es(e)&&e.paddingOuter!==void 0}function Iue(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n?[s[1],s[0]]:s}const $ue=.2,Rue=.1;function RH({scales:e,drawingArea:t,formattedSeries:n,axis:s,seriesConfig:r,axisDirection:i,zoomMap:l,domains:o}){if(s===void 0)return{axis:{},axisIds:[]};const d=Oue(i,r,n,s[0].id),c={};return s.forEach(m=>{const h=m,p=e[h.id],b=l?.get(h.id),w=b?[b.start,b.end]:[0,100],x=Iue(t,i,h.reverse??!1),v=!h.ignoreTooltip&&d.has(h.id),j=h.data??[];if(es(p)){const T=i==="y"?[x[1],x[0]]:x;if(Mue(p)&&Cu(h)){const E=h.categoryGapRatio??$ue,D=h.barGapRatio??Rue;c[h.id]=Ue({offset:0,height:0,categoryGapRatio:E,barGapRatio:D,triggerTooltip:v},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?cf(Ue({values:h.data},h.colorMap)):Qm(h.colorMap))})}if(Su(h)&&(c[h.id]=Ue({offset:0,height:0,triggerTooltip:v},h,{data:j,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?cf(Ue({values:h.data},h.colorMap)):Qm(h.colorMap))})),oT(h.data)){const E=cT(h.data,T,h.tickNumber);c[h.id].valueFormatter=h.valueFormatter??E}return}if(h.scaleType==="band"||h.scaleType==="point")return;const C=o[h.id].tickNumber,S=h,_=S.scaleType??"linear",A=OH(C,w);c[h.id]=Ue({offset:0,height:0,triggerTooltip:v},S,{data:j,scaleType:_,scale:p,tickNumber:A,colorScale:S.colorMap&&PH(S.colorMap),valueFormatter:h.valueFormatter??uce(A,Yw(_,x.map(T=>p.invert(T)),x))})}),{axis:c,axisIds:s.map(({id:m})=>m)}}function zue(e){return e!=null}function Uue(e,t,n,s){const r=e?.length??0,i=Math.floor(t*r/100),l=Math.ceil(n*r/100);return function(d,c){return(d[s]??e?.[c])==null?!0:c>=i&&c<l}}function Fue(e,t,n,s,r){const i=e[0].valueOf(),l=e[1].valueOf(),o=i+t*(l-i)/100,d=i+n*(l-i)/100;return function(m,h){const p=m[s]??r?.[h];return p==null?!0:p>=o&&p<=d}}const Bue=e=>({currentAxisId:t,seriesXAxisId:n,seriesYAxisId:s,isDefaultAxis:r})=>(i,l)=>!(t===n?s:n)||r?Object.values(e??{})[0]?.(i,l)??!0:[s,n].filter(c=>c!==t).map(c=>e[c??""]).filter(zue).every(c=>c(i,l)),PI=e=>(t=[])=>t.reduce((n,s)=>{const{zoom:r,id:i,reverse:l}=s,o=Ak(r,i,e,l);return o&&(n[i]=o),n},{}),Hue=.2;function zH(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n.reverse?[s[1],s[0]]:s}function UH(e,t){const n=[0,1];if(Cu(e)){const i=e.categoryGapRatio??Hue;return qw(t,n).paddingInner(i).paddingOuter(i/2)}if(Su(e))return MH(t,n);const s=e.scaleType??"linear",r=Yw(s,t,n);return fce(e)&&e.constant!=null&&r.constant(e.constant),r}const FH=(e,t)=>{const n=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*n/s,i=e[1]+(100-t[1])*n/s;return[r,i]},Gue=(e,t,n,s,r,i,l)=>{const o=n==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,d=i[e]?.series??{};return o?.({series:d,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:l})??[1/0,-1/0]};function Xw(e,t,n,s,r,i){const l=Object.keys(n).filter(Qw);let o=[1/0,-1/0];for(const d of l){const[c,m]=Gue(d,e,t,n,s,r,i);o=[Math.min(o[0],c),Math.max(o[1],m)]}return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o}const Vue=(e,t,n,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&n===0)return"strict"}return"nice"};function BH(e,t,n){return Yw(e??"linear",t,[0,1]).nice(n).domain()}function HH(e,t,n,s,[r,i],l,o){const d=VH(e,t,n,s,o);let c=WH(e,r,i);if(typeof d=="function"){const{min:h,max:p}=d(r.valueOf(),i.valueOf());c[0]=h,c[1]=p}const m=DH(e,c,l);return d==="nice"&&(c=BH(e.scaleType,c,m)),c=["min"in e?e.min??c[0]:c[0],"max"in e?e.max??c[1]:c[1]],{domain:c,tickNumber:m}}function GH(e,t,n,s,[r,i],l,o){const d=VH(e,t,n,s,o);let c=WH(e,r,i);if(typeof d=="function"){const{min:m,max:h}=d(r.valueOf(),i.valueOf());c[0]=m,c[1]=h}return d==="nice"&&(c=BH(e.scaleType,c,l)),[e.min??c[0],e.max??c[1]]}function VH(e,t,n,s,r){return r?Vue(e,t,n,s):e.domainLimit??"nice"}function WH(e,t,n){let s=t,r=n;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class Wue{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,n){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(n>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=n}pop(){if(this.length===0)return;const t=this.ids,n=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],l=n[r];let o=0;const d=r>>1;for(;o<d;){const c=(o<<1)+1,m=c+1,h=c+(+(m<r)&+(n[m]<n[c]));if(n[h]>=l)break;t[o]=t[h],n[o]=n[h],o=h}t[o]=i,n[o]=l}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const DI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],dS=3;class aL{static from(t,n=0){if(n%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,n+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==dS)throw new Error(`Got v${i} data when expected v${dS}.`);const l=DI[r&15];if(!l)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,n+2,1),[d]=new Uint32Array(t,n+4,1);return new aL(d,o,l,void 0,t,n)}constructor(t,n=16,s=Float64Array,r=ArrayBuffer,i,l=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.byteOffset=l;let o=t,d=o;this._levelBounds=[o*4];do o=Math.ceil(o/this.nodeSize),d+=o,this._levelBounds.push(d*4);while(o!==1);this.ArrayType=s,this.IndexArrayType=d<16384?Uint16Array:Uint32Array;const c=DI.indexOf(s),m=d*4*s.BYTES_PER_ELEMENT;if(c<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,l+8,d*4),this._indices=new this.IndexArrayType(i,l+8+m,d),this._pos=d*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const h=this.data=new r(8+m+d*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(h,8,d*4),this._indices=new this.IndexArrayType(h,8+m,d),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(h,0,2).set([251,(dS<<4)+c]),new Uint16Array(h,2,1)[0]=n,new Uint32Array(h,4,1)[0]=t}this._queue=new Wue}add(t,n,s=t,r=n){const i=this._pos>>2,l=this._boxes;return this._indices[i]=i,l[this._pos++]=t,l[this._pos++]=n,l[this._pos++]=s,l[this._pos++]=r,t<this.minX&&(this.minX=t),n<this.minY&&(this.minY=n),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const n=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let l=0,o=0;l<this.numItems;l++){const d=t[o++],c=t[o++],m=t[o++],h=t[o++],p=Math.floor(i*((d+m)/2-this.minX)/n),b=Math.floor(i*((c+h)/2-this.minY)/s);r[l]=Kue(p,b)}dT(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let l=0,o=0;l<this._levelBounds.length-1;l++){const d=this._levelBounds[l];for(;o<d;){const c=o;let m=t[o++],h=t[o++],p=t[o++],b=t[o++];for(let w=1;w<this.nodeSize&&o<d;w++)m=Math.min(m,t[o++]),h=Math.min(h,t[o++]),p=Math.max(p,t[o++]),b=Math.max(b,t[o++]);this._indices[this._pos>>2]=c,t[this._pos++]=m,t[this._pos++]=h,t[this._pos++]=p,t[this._pos++]=b}}}search(t,n,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const o=[],d=[];for(;l!==void 0;){const c=Math.min(l+this.nodeSize*4,OI(l,this._levelBounds));for(let m=l;m<c;m+=4){if(s<this._boxes[m]||r<this._boxes[m+1]||t>this._boxes[m+2]||n>this._boxes[m+3])continue;const h=this._indices[m>>2]|0;l>=this.numItems*4?o.push(h):(i===void 0||i(h))&&(d.push(h),d.push(this._boxes[m]),d.push(this._boxes[m+1]))}l=o.pop()}return d}neighbors(t,n,s=1/0,r=1/0,i,l=que){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const d=this._queue,c=[];e:for(;o!==void 0;){const m=Math.min(o+this.nodeSize*4,OI(o,this._levelBounds));for(let h=o;h<m;h+=4){const p=this._indices[h>>2]|0,b=this._boxes[h],w=this._boxes[h+1],x=this._boxes[h+2],v=this._boxes[h+3],j=t<b?b-t:t>x?t-x:0,C=n<w?w-n:n>v?n-v:0,S=l(j,C);S>r||(o>=this.numItems*4?d.push(p<<1,S):(i===void 0||i(p))&&d.push((p<<1)+1,S))}for(;d.length&&d.peek()&1;)if(d.peekValue()>r||(c.push(d.pop()>>1),c.length===s))break e;o=d.length?d.pop()>>1:void 0}return d.clear(),c}}function que(e,t){return e*e+t*t}function OI(e,t){let n=0,s=t.length-1;for(;n<s;){const r=n+s>>1;t[r]>e?s=r:n=r+1}return t[n]}function dT(e,t,n,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const l=e[s],o=e[s+r>>1],d=e[r];let c=d;const m=Math.max(l,o);d>m?c=m:m===l?c=Math.max(o,d):m===o&&(c=Math.max(l,d));let h=s-1,p=r+1;for(;;){do h++;while(e[h]<c);do p--;while(e[p]>c);if(h>=p)break;Yue(e,t,n,h,p)}dT(e,t,n,s,p,i),dT(e,t,n,p+1,r,i)}function Yue(e,t,n,s,r){const i=e[s];e[s]=e[r],e[r]=i;const l=4*s,o=4*r,d=t[l],c=t[l+1],m=t[l+2],h=t[l+3];t[l]=t[o],t[l+1]=t[o+1],t[l+2]=t[o+2],t[l+3]=t[o+3],t[o]=d,t[o+1]=c,t[o+2]=m,t[o+3]=h;const p=n[s];n[s]=n[r],n[r]=p}function Kue(e,t){let n=e^t,s=65535^n,r=65535^(e|t),i=e&(t^65535),l=n|s>>1,o=n>>1^n,d=r>>1^s&i>>1^r,c=n&r>>1^i>>1^i;n=l,s=o,r=d,i=c,l=n&n>>2^s&s>>2,o=n&s>>2^s&(n^s)>>2,d^=n&r>>2^s&i>>2,c^=s&r>>2^(n^s)&i>>2,n=l,s=o,r=d,i=c,l=n&n>>4^s&s>>4,o=n&s>>4^s&(n^s)>>4,d^=n&r>>4^s&i>>4,c^=s&r>>4^(n^s)&i>>4,n=l,s=o,r=d,i=c,d^=n&r>>8^s&i>>8,c^=s&r>>8^(n^s)&i>>8,n=d^d>>1,s=c^c>>1;let m=e^t,h=s|65535^(m|n);return m=(m|m<<8)&16711935,m=(m|m<<4)&252645135,m=(m|m<<2)&858993459,m=(m|m<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|m)>>>0}const Que=e=>{const t=new Map;return e.forEach(n=>{t.set(n.axisId,n)}),t},qH=e=>e.zoom,Xue=xt(yl,Ao,(e,t)=>e?.some(n=>!!n.zoom)||t?.some(n=>!!n.zoom)||!1),YH=xt(qH,e=>e?.isInteracting),Hc=bn(qH,function(t){return t?.zoomData&&Que(t?.zoomData)}),MI=xt(Hc,(e,t)=>e?.get(t)),rx=bn(yl,Ao,function(t,n){return Ue({},PI("x")(t),PI("y")(n))});xt(rx,(e,t)=>e[t]);const Zue=xt(Js,function(t){return tL(t.width)}),Jue=xt(Js,function(t){return tL(t.height)}),nL=bn(yl,an,Tr,Iw,Zue,function(t,n,s,r,i){const o={};return t?.forEach((d,c)=>{const m=d;if(Cu(m)||Su(m)){o[m.id]={domain:m.data};return}const h=Xw(m,"x",s,c,n);o[m.id]=HH(m,"x",c,n,h,i,r)}),{axes:t,domains:o}}),sL=bn(Ao,an,Tr,Iw,Jue,function(t,n,s,r,i){const o={};return t?.forEach((d,c)=>{const m=d;if(Cu(m)||Su(m)){o[m.id]={domain:m.data};return}const h=Xw(m,"y",s,c,n);o[m.id]=HH(m,"y",c,n,h,i,r)}),{axes:t,domains:o}}),KH=bn(Hc,rx,nL,sL,function(t,n,{axes:s,domains:r},{axes:i,domains:l}){if(!t||!n)return;let o=!1;const d={},c=[...s??[],...i??[]];for(let m=0;m<c.length;m+=1){const h=c[m];if(!n[h.id]||n[h.id].filterMode!=="discard")continue;const p=t.get(h.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const b=m<(s?.length??0)?"x":"y";if(h.scaleType==="band"||h.scaleType==="point")d[h.id]=Uue(h.data,p.start,p.end,b);else{const{domain:w}=b==="x"?r[h.id]:l[h.id];d[h.id]=Fue(w,p.start,p.end,b,h.data)}o=!0}if(o)return Bue(d)}),eme=bn(an,Tr,Hc,rx,KH,Iw,nL,function(t,n,s,r,i,l,{axes:o,domains:d}){const c={};return o?.forEach((m,h)=>{const p=d[m.id].domain;if(Cu(m)||Su(m)){c[m.id]=p;return}const b=s?.get(m.id),w=r?.[m.id],x=b===void 0&&!w?i:void 0;if(!x){c[m.id]=p;return}const v=d[m.id].tickNumber,j=Xw(m,"x",n,h,t,x);c[m.id]=GH(m,"x",h,t,j,v,l)}),c}),tme=bn(an,Tr,Hc,rx,KH,Iw,sL,function(t,n,s,r,i,l,{axes:o,domains:d}){const c={};return o?.forEach((m,h)=>{const p=d[m.id].domain;if(Cu(m)||Su(m)){c[m.id]=p;return}const b=s?.get(m.id),w=r?.[m.id],x=b===void 0&&!w?i:void 0;if(!x){c[m.id]=p;return}const v=d[m.id].tickNumber,j=Xw(m,"y",n,h,t,x);c[m.id]=GH(m,"y",h,t,j,v,l)}),c}),QH=bn(yl,eme,function(t,n){const s={};return t?.forEach(r=>{const i=r,l=n[i.id];s[i.id]=UH(i,l)}),s}),XH=bn(Ao,tme,function(t,n){const s={};return t?.forEach(r=>{const i=r,l=n[i.id];s[i.id]=UH(i,l)}),s}),ame=bn(yl,QH,Js,Hc,function(t,n,s,r){const i={};return t?.forEach(l=>{const o=l,d=r?.get(o.id),c=d?[d.start,d.end]:[0,100],m=zH(s,"x",o),h=n[o.id].copy(),p=FH(m,c);h.range(p),i[o.id]=h}),i}),nme=bn(Ao,XH,Js,Hc,function(t,n,s,r){const i={};return t?.forEach(l=>{const o=l,d=r?.get(o.id),c=d?[d.start,d.end]:[0,100],m=zH(s,"y",o),h=n[o.id].copy(),p=es(h)?m.reverse():m,b=FH(p,c);h.range(b),i[o.id]=h}),i}),Ds=bn(Js,an,Tr,Hc,nL,ame,function(t,n,s,r,{axes:i,domains:l},o){return RH({scales:o,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:l})}),Os=bn(Js,an,Tr,Hc,sL,nme,function(t,n,s,r,{axes:i,domains:l},o){return RH({scales:o,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:l})});xt(Ds,Os,(e,t,n)=>e?.axis[n]??t?.axis[n]);xt(yl,Ao,(e,t,n)=>{const s=e?.find(r=>r.id===n)??t?.find(r=>r.id===n)??null;if(s)return s});const sme=xt(yl,e=>e[0].id),rme=xt(Ao,e=>e[0].id),ime=new Map,lme=()=>ime,ome=bn(an,QH,XH,sme,rme,function(t,n,s,r,i){const l=t.scatter,o=new Map;return l&&l.seriesOrder.forEach(d=>{const{data:c,xAxisId:m=r,yAxisId:h=i}=l.series[d],p=new aL(c.length),b=n[m],w=s[h];for(const x of c)p.add(b(x.x),w(x.y));p.finish(),o.set(d,p)}),o});function Cm(e){return e instanceof Date?e.getTime():e}function df(e,t){const{scale:n,data:s,reverse:r}=e;if(!es(n)){const l=n.invert(t);if(s===void 0)return-1;const o=Cm(l);return s?.findIndex((c,m)=>{const h=Cm(c);return h>o&&(m===0||Math.abs(o-h)<=Math.abs(o-Cm(s[m-1])))||h<=o&&(m===s.length-1||Math.abs(Cm(l)-h)<Math.abs(Cm(l)-Cm(s[m+1])))})}const i=n.bandwidth()===0?Math.floor((t-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((t-Math.min(...n.range()))/n.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function II(e,t,n,s){if(!es(e)){if(s===null){const r=e.invert(n);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function up(e,t){const n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n.matrixTransform(e.getScreenCTM().inverse())}const cme=Object.is;function ZH(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,s=0;for(const r in e)if(n+=1,!cme(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return n===s}const ix=({store:e})=>{const t=Qn(function(){e.set("interaction",Ue({},e.state.interaction,{pointer:null,item:null}))}),n=Qn(function(l){const o=e.state.interaction.item;if(!l){o!==null&&e.set("interaction",Ue({},e.state.interaction,{item:null}));return}o===null||Object.keys(l).some(d=>l[d]!==o[d])||e.set("interaction",Ue({},e.state.interaction,{item:null}))}),s=Qn(function(l,o){ZH(e.state.interaction.item,l)||e.set("interaction",Ue({},e.state.interaction,{lastUpdate:o.interaction,item:l}))}),r=Qn(function(l){e.set("interaction",Ue({},e.state.interaction,{pointer:l,lastUpdate:l!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:n,setPointerCoordinate:r}}};ix.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});ix.params={};const Zw=e=>e.interaction,dme=xt(Zw,e=>e!==void 0),JH=xt(Zw,e=>e?.item??null),e9=xt(Zw,e=>e?.pointer??null),lx=xt(e9,e=>e&&e.x),ox=xt(e9,e=>e&&e.y),ume=xt(JH,e=>e!==null),cx=xt(Zw,e=>e?.lastUpdate),mme=new Set(["bar","line","scatter","pie"]);function t9(e){return mme.has(e)}function a9(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):-1,l=s.filter(t9);for(let m=0;m<l.length;m+=1){const h=(r+m)%l.length,p=e[l[h]],b=m===0?i+1:0;for(let w=b;w<p.seriesOrder.length;w+=1)if(p.series[p.seriesOrder[w]].data.length>0)return{type:l[h],seriesId:p.seriesOrder[w]}}const o=r,d=e[l[o]],c=i;for(let m=0;m<c;m+=1)if(d.series[d.seriesOrder[m]].data.length>0)return{type:l[o],seriesId:d.seriesOrder[m]};return null}function n9(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):1,l=s.filter(t9);for(let m=0;m<l.length;m+=1){const h=(l.length+r-m)%l.length,p=e[l[h]],b=m===0?i+1:p.seriesOrder.length;for(let w=1;w<b;w+=1){const x=(p.seriesOrder.length+i-w)%p.seriesOrder.length;if(p.series[p.seriesOrder[x]].data.length>0)return{type:l[h],seriesId:p.seriesOrder[x]}}}const o=r,d=e[l[o]],c=d.seriesOrder;for(let m=c.length-1;m>i;m-=1)if(d.series[d.seriesOrder[m]].data.length>0)return{type:l[o],seriesId:d.seriesOrder[m]};return null}function s9(e,t,n){if(t==="sankey")return!1;const s=e[t]?.series[n]?.data;return s&&s.length>0}function fme(e){const t=an(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!s9(t,n,s)){const i=a9(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function hme(e){const t=an(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!s9(t,n,s)){const i=n9(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function gme(e){const t=an(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=a9(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function pme(e){const t=an(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=n9(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const Jw=({params:e,store:t,svgRef:n})=>{const s=Qn(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",Ue({},t.state.keyboardNavigation,{item:null}))});return g.useEffect(()=>{const r=n.current;if(!r||!e.enableKeyboardNavigation)return;function i(l){let o=t.state.keyboardNavigation.item;switch(l.key){case"ArrowRight":o=fme(t.state);break;case"ArrowLeft":o=hme(t.state);break;case"ArrowDown":{o=pme(t.state);break}case"ArrowUp":{o=gme(t.state);break}}o!==t.state.keyboardNavigation.item&&(l.preventDefault(),t.update(Ue({},t.state.highlight&&{highlight:Ue({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:Ue({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:Ue({},t.state.keyboardNavigation,{item:o})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[n,s,e.enableKeyboardNavigation,t]),Un(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",Ue({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};Jw.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});Jw.params={enableKeyboardNavigation:!0};const Tu=e=>e.keyboardNavigation;xt(Tu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const xme=xt(Tu,e=>e?.item!=null),eN=xt(Tu,e=>e?.item?.type),tN=xt(Tu,e=>e?.item?.seriesId),aN=xt(Tu,e=>e?.item?.dataIndex),yme=xt(Tu,e=>!!e?.enableKeyboardNavigation),r9=e=>(t,n,s,r,i)=>{if(t===void 0||n===void 0||s===void 0)return;const l=i[t]?.series[n];if(!l)return;let o=e==="x"?"xAxisId"in l&&l.xAxisId:"yAxisId"in l&&l.yAxisId;return(o===void 0||o===!1)&&(o=r.axisIds[0]),{axisId:o,dataIndex:s}},bme=xt(eN,tN,aN,Ds,an,r9("x")),vme=xt(eN,tN,aN,Os,an,r9("y")),i9=xt(Tu,function(t){if(t?.item==null)return null;const{type:n,seriesId:s}=t.item;return n===void 0||s===void 0?null:t.item}),wme=xt(eN,tN,aN,function(t,n,s){return n!==void 0&&s!==void 0}),l9=xt(cx,JH,i9,(e,t,n)=>e==="keyboard"?n:t??null),Nme=xt(cx,ume,wme,(e,t,n)=>e==="keyboard"?n:t),jme=xt(l9,Js,Tr,Ds,Os,an,function(t,n,s,{axis:r,axisIds:i},{axis:l,axisIds:o},d,c="top"){if(!t)return null;const m=d[t.type]?.series[t.seriesId];if(m){const h={},p=Xb(m)?m.xAxisId??i[0]:void 0,b=Xb(m)?m.yAxisId??o[0]:void 0;return p!==void 0&&(h.x=r[p]),b!==void 0&&(h.y=l[b]),s[m.type].tooltipItemPositionGetter?.({series:d,drawingArea:n,axesConfig:h,identifier:t,placement:c})??null}return null});function Xm(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!Xm(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const l=r[i];if(!Xm(l[1],t.get(l[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),s=n.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(let r=0;r<s;r+=1){const i=n[r];if(!Xm(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function uT(e,t,n=t.axisIds[0]){return Array.isArray(n)?n.map(s=>df(t.axis[s],e)):df(t.axis[n],e)}const o9=(e,t,n)=>{if(e===null)return null;const s=uT(e,t,n);return s===-1?null:s},rL=xt(lx,Ds,o9),iL=xt(ox,Os,o9),Cme=xt(lx,ox,Ds,Os,(e,t,n,s)=>[...e===null?[]:n.axisIds.map(r=>({axisId:r,dataIndex:uT(e,n,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:uT(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function c9(e,t,n,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const l=t.axis[r];return II(l.scale,l.data,e,n[i])}):II(t.axis[s].scale,t.axis[s].data,e,n)}const Sme=xt(lx,Ds,rL,(e,t,n,s)=>e===null||t.axisIds.length===0?null:c9(e,t,n,s)),_me=xt(ox,Os,iL,(e,t,n,s)=>e===null||t.axisIds.length===0?null:c9(e,t,n,s)),d9=[],u9=Lw({memoizeOptions:{resultEqualityCheck:Xm}})(lx,Ds,(e,t)=>e===null?d9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:df(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),m9=Lw({memoizeOptions:{resultEqualityCheck:Xm}})(ox,Os,(e,t)=>e===null?d9:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:df(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),Ame=xt(u9,m9,(e,t)=>e.length>0||t.length>0);function Tme(e){return e.setPointerCoordinate!==void 0}const Df=({params:e,store:t,seriesConfig:n,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:l,dataset:o,onHighlightedAxisChange:d}=e,c=Pt(t,Js),m=Pt(t,an),h=Pt(t,dme),{axis:p,axisIds:b}=Pt(t,Ds),{axis:w,axisIds:x}=Pt(t,Os);KB({controlled:e.highlightedAxis}),Un(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const v=g.useRef(!0);g.useEffect(()=>{if(v.current){v.current=!1;return}t.set("cartesianAxis",{x:ZB(i,o),y:JB(l,o)})},[n,c,i,l,o,t]);const j=b[0],C=x[0];xoe(t,Cme,(_,A)=>{if(d&&!Object.is(_,A)){if(_.length!==A.length){d(A);return}_?.some(({axisId:T,dataIndex:E},D)=>A[D].axisId!==T||A[D].dataIndex!==E)&&d(A)}});const S=Tme(r);return g.useEffect(()=>{const _=s.current;if(!h||!S||!_||e.disableAxisListener)return()=>{};const A=r.addInteractionListener("moveEnd",O=>{O.detail.activeGestures.pan||r.cleanInteraction()}),T=r.addInteractionListener("panEnd",O=>{O.detail.activeGestures.move||r.cleanInteraction()}),E=r.addInteractionListener("quickPressEnd",O=>{!O.detail.activeGestures.move&&!O.detail.activeGestures.pan&&r.cleanInteraction()}),D=O=>{const L=O.detail.srcEvent,H=O.detail.target,ae=up(_,L);if(O.detail.srcEvent.buttons>=1&&H?.hasPointerCapture(O.detail.srcEvent.pointerId)&&!H?.closest("[data-charts-zoom-slider]")&&H?.releasePointerCapture(O.detail.srcEvent.pointerId),!r.isPointInside(ae.x,ae.y,H)){r.cleanInteraction?.();return}r.setPointerCoordinate(ae)},z=r.addInteractionListener("move",D),K=r.addInteractionListener("pan",D),B=r.addInteractionListener("quickPress",D);return()=>{z.cleanup(),A.cleanup(),K.cleanup(),T.cleanup(),B.cleanup(),E.cleanup()}},[s,t,p,j,w,C,r,e.disableAxisListener,h,S]),g.useEffect(()=>{const _=s.current,A=e.onAxisClick;if(_===null||!A)return()=>{};const T=r.addInteractionListener("tap",E=>{let D=null,z=!1;const K=up(_,E.detail.srcEvent),B=df(p[j],K.x);z=B!==-1,D=z?B:df(w[C],K.y);const O=z?b[0]:x[0];if(D==null||D===-1)return;const L=(z?p:w)[O].data[D],H={};Object.keys(m).filter(ae=>["bar","line"].includes(ae)).forEach(ae=>{m[ae]?.seriesOrder.forEach(W=>{const q=m[ae].series[W],le=q.xAxisId,Q=q.yAxisId,te=z?le:Q;(te===void 0||te===O)&&(H[W]=q.data[D])})}),A(E.detail.srcEvent,{dataIndex:D,axisValue:L,seriesValues:H})});return()=>{T.cleanup()}},[e.onAxisClick,m,s,p,b,w,x,j,C,r]),{}};Df.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Df.getDefaultizedParams=({params:e})=>Ue({},e,{colors:e.colors??VB,theme:e.theme??"light",defaultizedXAxis:ZB(e.xAxis,e.dataset),defaultizedYAxis:JB(e.yAxis,e.dataset)});Df.getInitialState=e=>Ue({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const bl=e=>e.brush;xt(bl,e=>e?.start);xt(bl,e=>e?.current);const Eme=xt(bl,e=>e?.start?.x??null),kme=xt(bl,e=>e?.start?.y??null),Lme=xt(bl,e=>e?.current?.x??null),Pme=xt(bl,e=>e?.current?.y??null);xt(Eme,kme,Lme,Pme,(e,t,n,s)=>e===null||t===null||n===null||s===null?null:{start:{x:e,y:t},current:{x:n,y:s}});const Dme=xt(an,e=>{let t=!1,n=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(n=!0)}),n?"xy":t?"y":"x"}),Ome=xt(rx,function(t){let n=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(n=!0)}),n&&s?"xy":s?"y":n?"x":null});xt(Dme,Ome,(e,t)=>t??e);const f9=xt(bl,e=>e?.enabled||e?.isZoomBrushEnabled),h9=xt(f9,bl,(e,t)=>e&&t?.start!==null&&t?.current!==null),nN=xt(bl,h9,(e,t)=>t&&e?.preventHighlight),Mme=xt(bl,h9,(e,t)=>t&&e?.preventTooltip),dx=({store:e,svgRef:t,instance:n,params:s})=>{const r=Pt(e,f9);Un(()=>{e.set("brush",Ue({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=Qn(function(c){e.set("brush",Ue({},e.state.brush,{start:e.state.brush.start??c,current:c}))}),l=Qn(function(){e.set("brush",Ue({},e.state.brush,{start:null,current:null}))}),o=Qn(function(c){e.state.brush.isZoomBrushEnabled!==c&&e.set("brush",Ue({},e.state.brush,{isZoomBrushEnabled:c}))});return g.useEffect(()=>{const d=t.current;if(d===null||!r)return()=>{};const c=x=>{if(x.detail.target?.closest("[data-charts-zoom-slider]"))return;const v=up(d,{clientX:x.detail.initialCentroid.x,clientY:x.detail.initialCentroid.y});i(v)},m=x=>{const v=up(d,{clientX:x.detail.centroid.x,clientY:x.detail.centroid.y});i(v)},h=n.addInteractionListener("brushStart",c),p=n.addInteractionListener("brush",m),b=n.addInteractionListener("brushCancel",l),w=n.addInteractionListener("brushEnd",l);return()=>{h.cleanup(),p.cleanup(),w.cleanup(),b.cleanup()}},[t,n,e,l,i,r]),{instance:{setBrushCoordinates:i,clearBrush:l,setZoomBrushEnabled:o}}};dx.params={brushConfig:!0};dx.getDefaultizedParams=({params:e})=>Ue({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});dx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Of=e=>e.controlledCartesianAxisHighlight,g9=(e,t,n,s)=>s?[]:n!==void 0?n.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],p9=bn(rL,Ds,Of,nN,g9);bn(iL,Os,Of,nN,g9);const x9=(e,t,n,s,r,i,l)=>{if(l)return[];if(s!==void 0)return s.map(m=>Ue({},m,{value:n.axis[m.axisId]?.data?.[m.dataIndex]})).filter(({value:m})=>m!==void 0);const o=t!==null&&{axisId:n.axisIds[0],dataIndex:e,value:t},d=r&&n.axis[r.axisId]?.data?.[r.dataIndex],c=r&&d!=null&&Ue({},r,{value:d});if(i==="pointer"){if(o)return[o];if(c)return[c]}if(i==="keyboard"){if(c)return[c];if(o)return[o]}return[]},Ime=xt(rL,Sme,Ds,Of,bme,cx,nN,x9),$me=xt(iL,_me,Os,Of,vme,cx,nN,x9),y9=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);xt(Of,Ds,y9);xt(Of,Os,y9);function $I(e,t){return e.id!==void 0?e:Ue({id:t},e)}function RI(e){return e.colorMap?Ue({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?cf(Ue({values:e.data},e.colorMap)):Qm(e.colorMap.type==="continuous"?Ue({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function b9(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const n={},s=[];return e.forEach((r,i)=>{const l=r.dataKey,o=r.id??`defaultized-z-axis-${i}`;if(l===void 0||r.data!==void 0){n[o]=RI($I(r,o)),s.push(o);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[o]=RI($I(Ue({},r,{data:t.map(d=>d[l])}),o)),s.push(o)}),{axis:n,axisIds:s}}const ux=({params:e,store:t})=>{const{zAxis:n,dataset:s}=e,r=g.useRef(!0);return g.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",b9(n,s))},[n,s,t]),{}};ux.params={zAxis:!0,dataset:!0};ux.getInitialState=e=>({zAxis:b9(e.zAxis,e.dataset)});const Rme=e=>e,zme=xt(Rme,e=>e.zAxis),mx=({store:e,params:t})=>{KB({controlled:t.highlightedItem}),Un(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",Ue({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const n=Qn(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=Qn(r=>{const i=e.getSnapshot().highlight;i.isControlled||ZH(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:n,setHighlight:s}}};mx.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});mx.params={highlightedItem:!0,onHighlightChange:!0};function Zb(e){let t=1/0,n=-1/0;for(const s of e??[])s<t&&(t=s),s>n&&(n=s);return[t,n]}const zI=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},v9=e=>{const{axis:t,getFilters:n,isDefaultAxis:s}=e,r=n?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((l,o)=>r({x:null,y:null},o)):t.data;return Zb(i??[])},w9=e=>t=>{const{series:n,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(n).filter(l=>{const o=e==="x"?n[l].xAxisId:n[l].yAxisId;return o===s.id||i&&o===void 0}).reduce((l,o)=>{const{stackedData:d}=n[o],c=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:n[o].xAxisId,seriesYAxisId:n[o].yAxisId}),[m,h]=d?.reduce((p,b,w)=>c&&(!c(zI(b[0],e),w)||!c(zI(b[1],e),w))?p:[Math.min(...b,p[0]),Math.max(...b,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(m,l[0]),Math.max(h,l[1])]},[1/0,-1/0])},Ume=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?w9("x")(e):v9(e),Fme=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?v9(e):w9("y")(e);function ia(e){return function(){return e}}const N9=Math.cos,Jb=Math.sin,Ii=Math.sqrt,UI=1e-12,ev=Math.PI,qd=2*ev,mT=Math.PI,fT=2*mT,Sd=1e-6,Bme=fT-Sd;function j9(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hme(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return j9;const n=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*n)/n+s[r]}}class Gme{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?j9:Hme(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,r){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,n,s,r,i,l){this._append`C${+t},${+n},${+s},${+r},${this._x1=+i},${this._y1=+l}`}arcTo(t,n,s,r,i){if(t=+t,n=+n,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,d=s-t,c=r-n,m=l-t,h=o-n,p=m*m+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Sd)if(!(Math.abs(h*d-c*m)>Sd)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let b=s-l,w=r-o,x=d*d+c*c,v=b*b+w*w,j=Math.sqrt(x),C=Math.sqrt(p),S=i*Math.tan((mT-Math.acos((x+p-v)/(2*j*C)))/2),_=S/C,A=S/j;Math.abs(_-1)>Sd&&this._append`L${t+_*m},${n+_*h}`,this._append`A${i},${i},0,0,${+(h*b>m*w)},${this._x1=t+A*d},${this._y1=n+A*c}`}}arc(t,n,s,r,i,l){if(t=+t,n=+n,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let o=s*Math.cos(r),d=s*Math.sin(r),c=t+o,m=n+d,h=1^l,p=l?r-i:i-r;this._x1===null?this._append`M${c},${m}`:(Math.abs(this._x1-c)>Sd||Math.abs(this._y1-m)>Sd)&&this._append`L${c},${m}`,s&&(p<0&&(p=p%fT+fT),p>Bme?this._append`A${s},${s},0,1,${h},${t-o},${n-d}A${s},${s},0,1,${h},${this._x1=c},${this._y1=m}`:p>Sd&&this._append`A${s},${s},0,${+(p>=mT)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function lL(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Gme(t)}function sN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function C9(e){this._context=e}C9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fx(e){return new C9(e)}function S9(e){return e[0]}function _9(e){return e[1]}function oL(e,t){var n=ia(!0),s=null,r=fx,i=null,l=lL(o);e=typeof e=="function"?e:e===void 0?S9:ia(e),t=typeof t=="function"?t:t===void 0?_9:ia(t);function o(d){var c,m=(d=sN(d)).length,h,p=!1,b;for(s==null&&(i=r(b=l())),c=0;c<=m;++c)!(c<m&&n(h=d[c],c,d))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(h,c,d),+t(h,c,d));if(b)return i=null,b+""||null}return o.x=function(d){return arguments.length?(e=typeof d=="function"?d:ia(+d),o):e},o.y=function(d){return arguments.length?(t=typeof d=="function"?d:ia(+d),o):t},o.defined=function(d){return arguments.length?(n=typeof d=="function"?d:ia(!!d),o):n},o.curve=function(d){return arguments.length?(r=d,s!=null&&(i=r(s)),o):r},o.context=function(d){return arguments.length?(d==null?s=i=null:i=r(s=d),o):s},o}function Eg(e,t,n){var s=null,r=ia(!0),i=null,l=fx,o=null,d=lL(c);e=typeof e=="function"?e:e===void 0?S9:ia(+e),t=typeof t=="function"?t:ia(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?_9:ia(+n);function c(h){var p,b,w,x=(h=sN(h)).length,v,j=!1,C,S=new Array(x),_=new Array(x);for(i==null&&(o=l(C=d())),p=0;p<=x;++p){if(!(p<x&&r(v=h[p],p,h))===j)if(j=!j)b=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),w=p-1;w>=b;--w)o.point(S[w],_[w]);o.lineEnd(),o.areaEnd()}j&&(S[p]=+e(v,p,h),_[p]=+t(v,p,h),o.point(s?+s(v,p,h):S[p],n?+n(v,p,h):_[p]))}if(C)return o=null,C+""||null}function m(){return oL().defined(r).curve(l).context(i)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:ia(+h),s=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ia(+h),c):e},c.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:ia(+h),c):s},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:ia(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ia(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ia(+h),c):n},c.lineX0=c.lineY0=function(){return m().x(e).y(t)},c.lineY1=function(){return m().x(e).y(n)},c.lineX1=function(){return m().x(s).y(t)},c.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ia(!!h),c):r},c.curve=function(h){return arguments.length?(l=h,i!=null&&(o=l(i)),c):l},c.context=function(h){return arguments.length?(h==null?i=o=null:o=l(i=h),c):i},c}function Vme(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Wme(e){return e}function qme(){var e=Wme,t=Vme,n=null,s=ia(0),r=ia(qd),i=ia(0);function l(o){var d,c=(o=sN(o)).length,m,h,p=0,b=new Array(c),w=new Array(c),x=+s.apply(this,arguments),v=Math.min(qd,Math.max(-qd,r.apply(this,arguments)-x)),j,C=Math.min(Math.abs(v)/c,i.apply(this,arguments)),S=C*(v<0?-1:1),_;for(d=0;d<c;++d)(_=w[b[d]=d]=+e(o[d],d,o))>0&&(p+=_);for(t!=null?b.sort(function(A,T){return t(w[A],w[T])}):n!=null&&b.sort(function(A,T){return n(o[A],o[T])}),d=0,h=p?(v-c*S)/p:0;d<c;++d,x=j)m=b[d],_=w[m],j=x+(_>0?_*h:0)+S,w[m]={data:o[m],index:d,value:_,startAngle:x,endAngle:j,padAngle:C};return w}return l.value=function(o){return arguments.length?(e=typeof o=="function"?o:ia(+o),l):e},l.sortValues=function(o){return arguments.length?(t=o,n=null,l):t},l.sort=function(o){return arguments.length?(n=o,t=null,l):n},l.startAngle=function(o){return arguments.length?(s=typeof o=="function"?o:ia(+o),l):s},l.endAngle=function(o){return arguments.length?(r=typeof o=="function"?o:ia(+o),l):r},l.padAngle=function(o){return arguments.length?(i=typeof o=="function"?o:ia(+o),l):i},l}class A9{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function T9(e){return new A9(e,!0)}function E9(e){return new A9(e,!1)}const rN={draw(e,t){const n=Ii(t/ev);e.moveTo(n,0),e.arc(0,0,n,0,qd)}},k9={draw(e,t){const n=Ii(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},L9=Ii(1/3),Yme=L9*2,P9={draw(e,t){const n=Ii(t/Yme),s=n*L9;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},D9={draw(e,t){const n=Ii(t),s=-n/2;e.rect(s,s,n,n)}},Kme=.8908130915292852,O9=Jb(ev/10)/Jb(7*ev/10),Qme=Jb(qd/10)*O9,Xme=-N9(qd/10)*O9,M9={draw(e,t){const n=Ii(t*Kme),s=Qme*n,r=Xme*n;e.moveTo(0,-n),e.lineTo(s,r);for(let i=1;i<5;++i){const l=qd*i/5,o=N9(l),d=Jb(l);e.lineTo(d*n,-o*n),e.lineTo(o*s-d*r,d*s+o*r)}e.closePath()}},uS=Ii(3),I9={draw(e,t){const n=-Ii(t/(uS*3));e.moveTo(0,n*2),e.lineTo(-uS*n,-n),e.lineTo(uS*n,-n),e.closePath()}},Ur=-.5,Fr=Ii(3)/2,hT=1/Ii(12),Zme=(hT/2+1)*3,$9={draw(e,t){const n=Ii(t/Zme),s=n/2,r=n*hT,i=s,l=n*hT+n,o=-i,d=l;e.moveTo(s,r),e.lineTo(i,l),e.lineTo(o,d),e.lineTo(Ur*s-Fr*r,Fr*s+Ur*r),e.lineTo(Ur*i-Fr*l,Fr*i+Ur*l),e.lineTo(Ur*o-Fr*d,Fr*o+Ur*d),e.lineTo(Ur*s+Fr*r,Ur*r-Fr*s),e.lineTo(Ur*i+Fr*l,Ur*l-Fr*i),e.lineTo(Ur*o+Fr*d,Ur*d-Fr*o),e.closePath()}},R9=[rN,k9,P9,D9,M9,I9,$9];function cL(e,t){let n=null,s=lL(r);e=typeof e=="function"?e:ia(e||rN),t=typeof t=="function"?t:ia(t===void 0?64:+t);function r(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:ia(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:ia(+i),r):t},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function tv(){}function av(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function z9(e){this._context=e}z9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:av(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Jme(e){return new z9(e)}function U9(e){this._context=e}U9.prototype={areaStart:tv,areaEnd:tv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function efe(e){return new U9(e)}function F9(e){this._context=e}F9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tfe(e){return new F9(e)}function FI(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function dL(e,t){this._context=e,this._k=(1-t)/6}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:FI(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:FI(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(s){return new dL(s,t)}return n.tension=function(s){return e(+s)},n})(0);function afe(e,t,n){var s=e._x1,r=e._y1,i=e._x2,l=e._y2;if(e._l01_a>UI){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,d=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/d,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/d}if(e._l23_a>UI){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,m=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*c+e._x1*e._l23_2a-t*e._l12_2a)/m,l=(l*c+e._y1*e._l23_2a-n*e._l12_2a)/m}e._context.bezierCurveTo(s,r,i,l,e._x2,e._y2)}function B9(e,t){this._context=e,this._alpha=t}B9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:afe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nfe=(function e(t){function n(s){return t?new B9(s,t):new dL(s,0)}return n.alpha=function(s){return e(+s)},n})(.5);function H9(e){this._context=e}H9.prototype={areaStart:tv,areaEnd:tv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function sfe(e){return new H9(e)}function BI(e){return e<0?-1:1}function HI(e,t,n){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),l=(n-e._y1)/(r||s<0&&-0),o=(i*r+l*s)/(s+r);return(BI(i)+BI(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function GI(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function mS(e,t,n){var s=e._x0,r=e._y0,i=e._x1,l=e._y1,o=(i-s)/3;e._context.bezierCurveTo(s+o,r+o*t,i-o,l-o*n,i,l)}function nv(e){this._context=e}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mS(this,this._t0,GI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mS(this,GI(this,n=HI(this,e,t)),n);break;default:mS(this,this._t0,n=HI(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function G9(e){this._context=new V9(e)}(G9.prototype=Object.create(nv.prototype)).point=function(e,t){nv.prototype.point.call(this,t,e)};function V9(e){this._context=e}V9.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,r,i){this._context.bezierCurveTo(t,e,s,n,i,r)}};function gT(e){return new nv(e)}function W9(e){return new G9(e)}function q9(e){this._context=e}q9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=VI(e),r=VI(t),i=0,l=1;l<n;++i,++l)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[l],t[l]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function VI(e){var t,n=e.length-1,s,r=new Array(n),i=new Array(n),l=new Array(n);for(r[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,i[n-1]=7,l[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=r[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(r[n-1]=l[n-1]/i[n-1],t=n-2;t>=0;--t)r[t]=(l[t]-r[t+1])/i[t];for(i[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function Y9(e){return new q9(e)}function iN(e,t){this._context=e,this._t=t}iN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function K9(e){return new iN(e,.5)}function Q9(e){return new iN(e,0)}function X9(e){return new iN(e,1)}function Dc(e,t){if((l=e.length)>1)for(var n=1,s,r,i=e[t[0]],l,o=i.length;n<l;++n)for(r=i,i=e[t[n]],s=0;s<o;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function lu(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function rfe(e,t){return e[t]}function ife(e){const t=[];return t.key=e,t}function uL(){var e=ia([]),t=lu,n=Dc,s=rfe;function r(i){var l=Array.from(e.apply(this,arguments),ife),o,d=l.length,c=-1,m;for(const h of i)for(o=0,++c;o<d;++o)(l[o][c]=[0,+s(h,l[o].key,c,i)]).data=h;for(o=0,m=sN(t(l));o<d;++o)l[m[o]].index=o;return n(l,m),l}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ia(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:ia(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?lu:typeof i=="function"?i:ia(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(n=i??Dc,r):n},r}function Z9(e,t){if((s=e.length)>0){for(var n,s,r=0,i=e[0].length,l;r<i;++r){for(l=n=0;n<s;++n)l+=e[n][r][1]||0;if(l)for(n=0;n<s;++n)e[n][r][1]/=l}Dc(e,t)}}function lfe(e,t){if((d=e.length)>0)for(var n,s=0,r,i,l,o,d,c=e[t[0]].length;s<c;++s)for(l=o=0,n=0;n<d;++n)(i=(r=e[t[n]][s])[1]-r[0])>0?(r[0]=l,r[1]=l+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)}function J9(e,t){if((r=e.length)>0){for(var n=0,s=e[t[0]],r,i=s.length;n<i;++n){for(var l=0,o=0;l<r;++l)o+=e[l][n][1]||0;s[n][1]+=s[n][0]=-o/2}Dc(e,t)}}function eG(e,t){if(!(!((l=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var n=0,s=1,r,i,l;s<i;++s){for(var o=0,d=0,c=0;o<l;++o){for(var m=e[t[o]],h=m[s][1]||0,p=m[s-1][1]||0,b=(h-p)/2,w=0;w<o;++w){var x=e[t[w]],v=x[s][1]||0,j=x[s-1][1]||0;b+=v-j}d+=h,c+=b*h}r[s-1][1]+=r[s-1][0]=n,d&&(n-=c/d)}r[s-1][1]+=r[s-1][0]=n,Dc(e,t)}}function tG(e){var t=e.map(ofe);return lu(e).sort(function(n,s){return t[n]-t[s]})}function ofe(e){for(var t=-1,n=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,n=t);return n}function aG(e){var t=e.map(nG);return lu(e).sort(function(n,s){return t[n]-t[s]})}function nG(e){for(var t=0,n=-1,s=e.length,r;++n<s;)(r=+e[n][1])&&(t+=r);return t}function cfe(e){return aG(e).reverse()}function dfe(e){var t=e.length,n,s,r=e.map(nG),i=tG(e),l=0,o=0,d=[],c=[];for(n=0;n<t;++n)s=i[n],l<o?(l+=r[s],d.push(s)):(o+=r[s],c.push(s));return c.reverse().concat(d)}function ufe(e){return lu(e).reverse()}const fS={appearance:tG,ascending:aG,descending:cfe,insideOut:dfe,none:lu,reverse:ufe},hS={expand:Z9,diverging:lfe,none:Dc,silhouette:J9,wiggle:eG},sG=e=>{const{series:t,seriesOrder:n,defaultStrategy:s}=e,r=[],i={};return n.forEach(l=>{const{stack:o,stackOrder:d,stackOffset:c}=t[l];o===void 0?r.push({ids:[l],stackingOrder:fS.none,stackingOffset:hS.none}):i[o]===void 0?(i[o]=r.length,r.push({ids:[l],stackingOrder:fS[d??s?.stackOrder??"none"],stackingOffset:hS[c??s?.stackOffset??"diverging"]})):(r[i[o]].ids.push(l),d!==void 0&&(r[i[o]].stackingOrder=fS[d]),c!==void 0&&(r[i[o]].stackingOffset=hS[c]))}),r},mfe=e=>e==null?"":e.toLocaleString(),ffe=(e,t)=>{const{seriesOrder:n,series:s}=e,r=sG(e),i=t??[];n.forEach(o=>{const d=s[o].data;if(d!==void 0)d.forEach((c,m)=>{i.length<=m?i.push({[o]:c}):i[m][o]=c});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${o}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const l={};return r.forEach(o=>{const{ids:d,stackingOffset:c,stackingOrder:m}=o,h=uL().keys(d.map(p=>{const b=s[p].dataKey;return s[p].data===void 0&&b!==void 0?b:p})).value((p,b)=>p[b]??0).order(m).offset(c)(i);d.forEach((p,b)=>{const w=s[p].dataKey;l[p]=Ue({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??mfe},s[p],{data:w?t.map(x=>{const v=x[w];return typeof v=="number"?v:null}):s[p].data,stackedData:h[b].map(([x,v])=>[x,v])})})}),{seriesOrder:n,stackingGroups:r,series:l}};function Ei(e,t){return typeof e=="function"?e(t):e}const hfe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Ei(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])};function mL(e){return e.colorGetter?e.colorGetter:()=>e.color}const gfe=(e,t,n)=>{const s=e.layout==="vertical",r=s?t?.colorScale:n?.colorScale,i=s?n?.colorScale:t?.colorScale,l=s?t?.data:n?.data,o=mL(e);return i?d=>{if(d===void 0)return e.color;const c=e.data[d],m=c===null?o({value:c,dataIndex:d}):i(c);return m===null?o({value:c,dataIndex:d}):m}:r&&l?d=>{if(d===void 0)return e.color;const c=l[d],m=c===null?o({value:c,dataIndex:d}):r(c);return m===null?o({value:c,dataIndex:d}):m}:d=>{if(d===void 0)return e.color;const c=e.data[d];return o({value:c,dataIndex:d})}},pfe=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Ei(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},xfe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function $a(){const e=Er();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function di(){const e=$a();return Pt(e,Js)}function lN(){const e=$a();return Pt(e,Uoe)}function fL(e){return $H.getTypes().has(e)}const yfe=(e,t,n,s,r,i,l)=>{const o=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,d=l[t]?.series??{},[c,m]=o?.({series:d,axis:n,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[h,p]=e;return[Math.min(c,h),Math.max(m,p)]},bfe=(e,t,n,s,r)=>{const l=Object.keys(n).filter(fL).reduce((o,d)=>yfe(o,d,e,t,n,s,r),[1/0,-1/0]);return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l},vc=(e,t)=>e===void 0?t:Math.PI*e/180,vfe=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(fL).forEach(l=>{const o=n[l]?.series??{},d=t[l].axisTooltipGetter?.(o);d!==void 0&&d.forEach(({axisId:c,direction:m})=>{m===e&&r.add(c??s)})}),r};function wfe(e,t,n){if(t==="rotation"){if(n.scaleType==="point"){const s=[vc(n.startAngle,0),vc(n.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/n.data.length),s}return[vc(n.startAngle,0),vc(n.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const Nfe=.2,jfe=.1;function rG({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:s,axisDirection:r}){if(n===void 0)return{axis:{},axisIds:[]};const i=vfe(r,s,t,n[0].id),l={};return n.forEach((o,d)=>{const c=o,m=wfe(e,r,c),[h,p]=bfe(c,r,s,d,t),b=!c.ignoreTooltip&&i.has(c.id),w=c.data??[];if(Cu(c)){const z=c.categoryGapRatio??Nfe,K=c.barGapRatio??jfe;if(l[c.id]=Ue({offset:0,categoryGapRatio:z,barGapRatio:K,triggerTooltip:b},c,{data:w,scale:qw(c.data,m).paddingInner(z).paddingOuter(z/2),tickNumber:c.data.length,colorScale:c.colorMap&&(c.colorMap.type==="ordinal"?cf(Ue({values:c.data},c.colorMap)):Qm(c.colorMap))}),oT(c.data)){const B=cT(c.data,m,c.tickNumber);l[c.id].valueFormatter=c.valueFormatter??B}}if(Su(c)&&(l[c.id]=Ue({offset:0,triggerTooltip:b},c,{data:w,scale:MH(c.data,m),tickNumber:c.data.length,colorScale:c.colorMap&&(c.colorMap.type==="ordinal"?cf(Ue({values:c.data},c.colorMap)):Qm(c.colorMap))}),oT(c.data))){const z=cT(c.data,m,c.tickNumber);l[c.id].valueFormatter=c.valueFormatter??z}if(!mce(c))return;const x=c.scaleType??"linear",v=c.domainLimit??"nice",j=[c.min??h,c.max??p];if(typeof v=="function"){const{min:z,max:K}=v(h,p);j[0]=z,j[1]=K}const C=DH(c,j,tL(Math.abs(m[1]-m[0]))),S=OH(C,m),_=Yw(x,j,m),A=v==="nice"?_.nice(C):_,[T,E]=A.domain(),D=[c.min??T,c.max??E];l[c.id]=Ue({offset:0,triggerTooltip:b},c,{data:w,scaleType:x,scale:A.domain(D),tickNumber:S,colorScale:c.colorMap&&Qm(c.colorMap)})}),{axis:l,axisIds:n.map(({id:o})=>o)}}const iG=e=>e.polarAxis,lG=xt(iG,e=>e?.rotation),Cfe=xt(iG,e=>e?.radius),Eu=xt(lG,Js,an,Tr,(e,t,n,s)=>rG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"rotation"}));xt(Cfe,Js,an,Tr,(e,t,n,s)=>rG({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"radius"}));const Sfe=xt(Js,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),_fe=e=>(t,n)=>Math.atan2(t-e.cx,e.cy-n);function oN(e){return(e%360+360)%360}const gS=2*Math.PI;function Afe(e){return(e%gS+gS)%gS}function WI(e,t){const{scale:n,data:s,reverse:r}=e;if(!es(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=Afe(t-Math.min(...n.range())),l=n.bandwidth()===0?Math.floor((i+n.step()/2)/n.step())%s.length:Math.floor(i/n.step());return l<0||l>=s.length?-1:r?s.length-1-l:l}function er(){const e=$a(),{axis:t,axisIds:n}=Pt(e,Ds);return{xAxis:t,xAxisIds:n}}function tr(){const e=$a(),{axis:t,axisIds:n}=Pt(e,Os);return{yAxis:t,yAxisIds:n}}function Tfe(e){const t=$a(),{axis:n,axisIds:s}=Pt(t,Ds),r=s[0];return n[r]}function Efe(e){const t=$a(),{axis:n,axisIds:s}=Pt(t,Os),r=s[0];return n[r]}function oG(){const e=$a(),{axis:t,axisIds:n}=Pt(e,Eu);return{rotationAxis:t,rotationAxisIds:n}}function kfe(e){const t=$a(),{axis:n,axisIds:s}=Pt(t,Eu),r=s[0];return n[r]}function Mf(e){if(es(e))return n=>(e(n)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:n=>e(n)}function hL(){const e=$a(),{axis:t,axisIds:n}=Pt(e,zme)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:n}}function gL(){const e=Er();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function cN(){const e=$a();return Pt(e,an)}const Lfe=xt(an,(e,t)=>e[t]);bn(an,(e,t,n)=>{if(!n||Array.isArray(n)&&n.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(n))return e[t]?.series?.[n];const s=[];for(const r of n){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const Pfe=e=>{const t=$a();return Pt(t,Lfe,e)};function hx(){return Pfe("line")}function Dfe(){return!1}function cG(e,t){return!e||!t?Dfe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function Ofe(){return!1}function dG(e,t){return!e||!t?Ofe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function pL(e,t,n){return e?.highlight==="series"&&t?.seriesId===n}function Mfe(e,t,n){return pL(e,t,n)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===n}function uG(e,t,n){return e?.highlight==="item"&&t?.seriesId===n?t.dataIndex:null}function Ife(e,t,n){return pL(e,t,n)||uG(e,t,n)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===n?t.dataIndex:null}const $fe=e=>e.highlight,Rfe=xt(an,e=>{const t=new Map;return Object.keys(e).forEach(n=>{const s=e[n];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),Eo=bn($fe,i9,function(t,n){return t.isControlled||t.lastUpdate==="pointer"?t.item:n}),Gc=xt(Rfe,Eo,function(t,n){if(!n)return null;const s=t.get(n.seriesId);return s===void 0?null:s}),zfe=xt(Gc,Eo,cG),Ufe=xt(Gc,Eo,dG),Ffe=xt(Gc,Eo,function(t,n,s){return cG(t,n)(s)});xt(Gc,Eo,pL);xt(Gc,Eo,Mfe);xt(Gc,Eo,Ife);xt(Gc,Eo,uG);const Bfe=xt(Gc,Eo,function(t,n,s){return dG(t,n)(s)});function mG(e){const t=$a(),n=Pt(t,Ffe,e),s=Pt(t,Bfe,e);return{isHighlighted:n,isFaded:!n&&s}}function Hfe(){const e=$a(),t=Pt(e,zfe),n=Pt(e,Ufe);return{isHighlighted:t,isFaded:n}}function Gfe(e,t){return Object.keys(e).flatMap(n=>{const s=t[n].legendGetter;return s===void 0?[]:s(e[n])})}function Vfe(){const e=cN(),t=$a(),n=Pt(t,Tr);return{items:Gfe(e,n)}}function xL(){const e=lN();return g.useCallback(t=>`${e}-gradient-${t}`,[e])}function Wfe(){const e=lN();return g.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var pS,qI;function qfe(){if(qI)return pS;qI=1;var e=4,t=.001,n=1e-7,s=10,r=11,i=1/(r-1),l=typeof Float32Array=="function";function o(x,v){return 1-3*v+3*x}function d(x,v){return 3*v-6*x}function c(x){return 3*x}function m(x,v,j){return((o(v,j)*x+d(v,j))*x+c(v))*x}function h(x,v,j){return 3*o(v,j)*x*x+2*d(v,j)*x+c(v)}function p(x,v,j,C,S){var _,A,T=0;do A=v+(j-v)/2,_=m(A,C,S)-x,_>0?j=A:v=A;while(Math.abs(_)>n&&++T<s);return A}function b(x,v,j,C){for(var S=0;S<e;++S){var _=h(v,j,C);if(_===0)return v;var A=m(v,j,C)-x;v-=A/_}return v}function w(x){return x}return pS=function(v,j,C,S){if(!(0<=v&&v<=1&&0<=C&&C<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===j&&C===S)return w;for(var _=l?new Float32Array(r):new Array(r),A=0;A<r;++A)_[A]=m(A*i,v,C);function T(E){for(var D=0,z=1,K=r-1;z!==K&&_[z]<=E;++z)D+=i;--z;var B=(E-_[z])/(_[z+1]-_[z]),O=D+B*i,L=h(O,v,C);return L>=t?b(E,O,v,C):L===0?O:p(E,D,D+i,v,C)}return function(D){return D===0?0:D===1?1:m(T(D),j,S)}},pS}var Yfe=qfe();const Kfe=Di(Yfe),dN=300,yL="cubic-bezier(0.66, 0, 0.34, 1)",Qfe=Kfe(.66,0,.34,1);var uf=0,kg=0,Gh=0,fG=1e3,sv,Lg,rv=0,ou=0,uN=0,mp=typeof performance=="object"&&performance.now?performance:Date,hG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bL(){return ou||(hG(Xfe),ou=mp.now()+uN)}function Xfe(){ou=0}function iv(){this._call=this._time=this._next=null}iv.prototype=gG.prototype={constructor:iv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bL():+n)+(t==null?0:+t),!this._next&&Lg!==this&&(Lg?Lg._next=this:sv=this,Lg=this),this._call=e,this._time=n,pT()},stop:function(){this._call&&(this._call=null,this._time=1/0,pT())}};function gG(e,t,n){var s=new iv;return s.restart(e,t,n),s}function Zfe(){bL(),++uf;for(var e=sv,t;e;)(t=ou-e._time)>=0&&e._call.call(void 0,t),e=e._next;--uf}function YI(){ou=(rv=mp.now())+uN,uf=kg=0;try{Zfe()}finally{uf=0,ehe(),ou=0}}function Jfe(){var e=mp.now(),t=e-rv;t>fG&&(uN-=t,rv=e)}function ehe(){for(var e,t=sv,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sv=n);Lg=e,pT(s)}function pT(e){if(!uf){kg&&(kg=clearTimeout(kg));var t=e-ou;t>24?(e<1/0&&(kg=setTimeout(YI,e-mp.now()-uN)),Gh&&(Gh=clearInterval(Gh))):(Gh||(rv=mp.now(),Gh=setInterval(Jfe,fG)),uf=1,hG(YI))}}function the(e,t,n){var s=new iv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}class ahe{elapsed=0;timer=null;constructor(t,n,s){this.duration=t,this.easingFn=n,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(n);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=bL()-this.elapsed;return this.timer=gG(n=>this.timerCallback(n),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),the(()=>this.timerCallback(this.duration)),this}}function nhe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r+=1){const i=n[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function she(e,{createInterpolator:t,applyProps:n,skip:s,initialProps:r=e}){const i=g.useRef(r),l=g.useRef(null),o=g.useRef(null),d=g.useRef(e);Un(()=>{d.current=e},[e]),Un(()=>{s&&(l.current?.finish(),l.current=null,o.current=null,i.current=e)},[e,s]);const c=g.useCallback(h=>{const p=i.current,b=t(p,e);l.current=new ahe(dN,Qfe,w=>{const x=b(w);i.current=x,n(h,x)})},[n,t,e]);return[g.useCallback(h=>{if(h===null){l.current?.stop();return}const p=o.current;if(p===h){if(nhe(d.current,e)){l.current?.resume();return}l.current?.stop()}p&&l.current?.stop(),o.current=h,(l.current||!s)&&c(h)},[c,e,s]),i.current]}function pG(e,{createInterpolator:t,transformProps:n,applyProps:s,skip:r,initialProps:i=e,ref:l}){const o=n??(h=>h),[d,c]=she(e,{initialProps:i,createInterpolator:t,applyProps:(h,p)=>s(h,o(p)),skip:r}),m=n(r?e:c);return Ue({},m,{ref:ml(d,l)})}function rhe(e){return pG({d:e.d},{createInterpolator:(t,n)=>{const s=Dk(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function ihe(e){return pG({d:e.d},{createInterpolator:(t,n)=>{const s=Dk(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function lhe(){return Er().chartRootRef}const ohe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},che=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:Ue({},e)}}}}),xG={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${ohe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},dhe=xG;che(xG);const uhe=["localeText"],xT=g.createContext(null);function mhe(e){const{localeText:t}=e,n=aa(e,uhe),{localeText:s}=g.useContext(xT)??{localeText:void 0},r=oi({props:n,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:l}=r,o=g.useMemo(()=>Ue({},dhe,l,s,t),[l,s,t]),d=g.useMemo(()=>({localeText:o}),[o]);return a.jsx(xT.Provider,{value:d,children:i})}const yG=()=>{const e=g.useContext(xT);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function fhe({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*n),r=n*s;return{barWidth:s,offset:r}}function hhe(e,t,n){const s=e&&t>0,r=!e&&t<0,i=s||r;return n?!i:i}function ghe(e){const{verticalLayout:t,xAxisConfig:n,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:l,groupIndex:o}=e,d=t?n:s,c=(t?s.reverse:n.reverse)??!1,{barWidth:m,offset:h}=fhe({bandWidth:d.scale.bandwidth(),numberOfGroups:l,gapRatio:d.barGapRatio}),p=o*(m+h),b=n.scale,w=s.scale,x=d.data[i],v=r.data[i];if(v==null)return null;const C=r.stackedData[i].map(E=>t?w(E):b(E)),S=Math.round(Math.min(...C)),_=Math.round(Math.max(...C)),A=v===0?0:Math.max(r.minBarSize,_-S),T=hhe(t,v,c)?_-A:S;return{x:t?b(x)+p:T,y:t?T:w(x)+p,height:t?A:m,width:t?m:A}}const phe=e=>{const{series:t,identifier:n,axesConfig:s,placement:r}=e;if(!n||n.dataIndex===void 0)return null;const i=t.bar?.series[n.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const l=ghe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:n.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(h=>h.ids.includes(i.id))});if(l==null)return null;const{x:o,y:d,width:c,height:m}=l;switch(r){case"right":return{x:o+c,y:d+m/2};case"bottom":return{x:o+c/2,y:d+m};case"left":return{x:o,y:d+m/2};case"top":default:return{x:o+c/2,y:d}}},xhe=(e,t,n)=>Ue({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),yhe={seriesProcessor:ffe,colorProcessor:gfe,legendGetter:hfe,tooltipGetter:pfe,tooltipItemPositionGetter:phe,axisTooltipGetter:xfe,xExtremumGetter:Ume,yExtremumGetter:Fme,getSeriesWithDefaultValues:xhe},bhe=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const d=t[o].xAxisId;if(!(d===n.id||d===void 0&&s))continue;const c=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),m=t[o].data??[];for(let h=0;h<m.length;h+=1){const p=m[h];c&&!c(p,h)||p.x!==null&&(p.x<i&&(i=p.x),p.x>l&&(l=p.x))}}return[i,l]},vhe=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,l=-1/0;for(const o in t){if(!Object.hasOwn(t,o))continue;const d=t[o].yAxisId;if(!(d===n.id||d===void 0&&s))continue;const c=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),m=t[o].data??[];for(let h=0;h<m.length;h+=1){const p=m[h];c&&!c(p,h)||p.y!==null&&(p.y<i&&(i=p.y),p.y>l&&(l=p.y))}}return[i,l]},whe=({series:e,seriesOrder:t},n)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const l=i?.datasetKeys,o=["x","y"].filter(c=>typeof l?.[c]!="string");if(i?.datasetKeys&&o.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${o.map(c=>`"${c}"`).join(", ")} are missing.`].join(`
`));const d=l?n?.map(c=>({x:c[l.x]??null,y:c[l.y]??null,z:l.z&&c[l.z],id:l.id&&c[l.id]}))??[]:i.data??[];return[r,Ue({labelMarkType:"circle",markerSize:4},i,{preview:Ue({markerSize:1},i?.preview),data:d,valueFormatter:i.valueFormatter??(c=>c&&`(${c.x}, ${c.y})`)})]})),seriesOrder:t}),Nhe=(e,t,n,s)=>{const r=s?.colorScale,i=n?.colorScale,l=t?.colorScale,o=mL(e);return r?d=>{if(d===void 0)return e.color;if(s?.data?.[d]!==void 0){const h=r(s?.data?.[d]);if(h!==null)return h}const c=e.data[d],m=c===null?o({value:c,dataIndex:d}):r(c.z);return m===null?o({value:c,dataIndex:d}):m}:i?d=>{if(d===void 0)return e.color;const c=e.data[d],m=c===null?o({value:c,dataIndex:d}):i(c.y);return m===null?o({value:c,dataIndex:d}):m}:l?d=>{if(d===void 0)return e.color;const c=e.data[d],m=c===null?o({value:c,dataIndex:d}):l(c.x);return m===null?o({value:c,dataIndex:d}):m}:d=>{if(d===void 0)return e.color;const c=e.data[d];return o({value:c,dataIndex:d})}},jhe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Ei(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},Che=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Ei(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},She=(e,t,n)=>Ue({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),_he=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.scatter?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[n.dataIndex].x,l=r.data?.[n.dataIndex].y;return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},Ahe={seriesProcessor:whe,colorProcessor:Nhe,legendGetter:jhe,tooltipGetter:Che,tooltipItemPositionGetter:_he,xExtremumGetter:bhe,yExtremumGetter:vhe,getSeriesWithDefaultValues:She},The=e=>{const{axis:t}=e;return Zb(t.data??[])};function Ehe(e,t,n,s){return n.reduce((r,i,l)=>{if(t[l]===null)return r;const[o,d]=e(i);return s&&(!s({y:o,x:null},l)||!s({y:d,x:null},l))?r:[Math.min(o,d,r[0]),Math.max(o,d,r[1])]},[1/0,-1/0])}const khe=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const l=t[i].yAxisId;return l===n.id||s&&l===void 0}).reduce((i,l)=>{const{area:o,stackedData:d,data:c}=t[l],m=o!==void 0,h=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),p=m&&n.scaleType!=="log"&&typeof t[l].baseline!="string"?v=>v:v=>[v[1],v[1]],b=Ehe(p,c,d,h),[w,x]=b;return[Math.min(w,i[0]),Math.max(x,i[1])]},[1/0,-1/0])};function Lhe(e,t){const n={};return Object.keys(e).forEach(s=>{n[s]=Ue({},e[s],{valueFormatter:e[s].valueFormatter??t})}),n}const Phe=(e,t)=>{const{seriesOrder:n,series:s}=e,r=sG(Ue({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];n.forEach(o=>{const d=s[o].data;d!==void 0&&d.forEach((c,m)=>{i.length<=m?i.push({[o]:c}):i[m][o]=c})});const l={};return r.forEach(o=>{const{ids:d,stackingOrder:c,stackingOffset:m}=o,h=uL().keys(d.map(p=>{const b=s[p].dataKey;return s[p].data===void 0&&b!==void 0?b:p})).value((p,b)=>p[b]??0).order(c).offset(m)(i);d.forEach((p,b)=>{const w=s[p].dataKey;l[p]=Ue({labelMarkType:"line"},s[p],{data:w?t.map(x=>{const v=x[w];return typeof v=="number"?v:null}):s[p].data,stackedData:h[b].map(([x,v])=>[x,v])})})}),{seriesOrder:n,stackingGroups:r,series:Lhe(l,o=>o==null?"":o.toLocaleString())}},vL=(e,t,n)=>{const s=n?.colorScale,r=t?.colorScale,i=mL(e);return s?l=>{if(l===void 0)return e.color;const o=e.data[l],d=o===null?i({value:o,dataIndex:l}):s(o);return d===null?i({value:o,dataIndex:l}):d}:r?l=>{if(l===void 0)return e.color;const o=t.data?.[l],d=o===null?i({value:o,dataIndex:l}):r(o);return d===null?i({value:o,dataIndex:l}):d}:l=>{if(l===void 0)return e.color;const o=e.data[l];return i({value:o,dataIndex:l})}},Dhe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Ei(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},Ohe=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Ei(t.label,"tooltip"),i=t.data[s.dataIndex],l=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:l,markType:t.labelMarkType}},Mhe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),Ihe=(e,t,n)=>Ue({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),$he=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.line?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[n.dataIndex],l=r.data[n.dataIndex];return i==null||l==null?null:{x:s.x.scale(i),y:s.y.scale(l)}},Rhe={colorProcessor:vL,seriesProcessor:Phe,legendGetter:Dhe,tooltipGetter:Ohe,tooltipItemPositionGetter:$he,axisTooltipGetter:Mhe,xExtremumGetter:The,yExtremumGetter:khe,getSeriesWithDefaultValues:Ihe},zhe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,n)=>n-t;case"asc":return(t,n)=>t-n;default:return null}},Uhe=e=>{const{seriesOrder:t,series:n}=e,s={};return t.forEach(r=>{const i=qme().startAngle(vc(n[r].startAngle??0)).endAngle(vc(n[r].endAngle??360)).padAngle(vc(n[r].paddingAngle??0)).sortValues(zhe(n[r].sortingValues??"none"))(n[r].data.map(l=>l.value));s[r]=Ue({labelMarkType:"circle",valueFormatter:l=>l.value.toLocaleString()},n[r],{data:n[r].data.map((l,o)=>Ue({},l,{id:l.id??`auto-generated-pie-id-${r}-${o}`},i[o])).map((l,o)=>Ue({labelMarkType:"circle"},l,{formattedValue:n[r].valueFormatter?.(Ue({},l,{label:Ei(l.label,"arc")}),{dataIndex:o})??l.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Fhe=e=>t=>e.data[t].color,Bhe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>(n[r].data.forEach((i,l)=>{const o=Ei(i.label,"legend");o!==void 0&&s.push({markType:i.labelMarkType??n[r].labelMarkType,id:i.id??l,seriesId:r,color:i.color,label:o,itemId:i.id??l})}),s),[])},Hhe=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Ei(r.label,"tooltip"),l=Ue({},r,{label:i}),o=t.valueFormatter(l,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:i,value:l,formattedValue:o,markType:r.labelMarkType??t.labelMarkType}},Ghe=(e,t,n)=>Ue({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>Ue({},s,{color:s.color??n[r%n.length]}))});function lv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*t/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Vhe(e,t){const{height:n,width:s}=t,{cx:r,cy:i}=e,l=Math.min(s,n)/2,o=lv(r??"50%",s),d=lv(i??"50%",n);return{cx:o,cy:d,availableRadius:l}}const Whe=e=>{const{series:t,drawingArea:n,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:l,cy:o,availableRadius:d}=Vhe({cx:i.cx,cy:i.cy},n),{data:c,innerRadius:m=0,outerRadius:h}=i,p=Math.max(0,lv(m??0,d)),b=Math.max(0,lv(h??d,d)),w=c[s.dataIndex];if(!w)return null;const x=[[p,w.startAngle],[p,w.endAngle],[b,w.startAngle],[b,w.endAngle]].map(([_,A])=>({x:l+_*Math.sin(A),y:o-_*Math.cos(A)})),[v,j]=Zb(x.map(_=>_.x)),[C,S]=Zb(x.map(_=>_.y));switch(r){case"bottom":return{x:(j+v)/2,y:S};case"left":return{x:v,y:(S+C)/2};case"right":return{x:j,y:(S+C)/2};case"top":default:return{x:(j+v)/2,y:C}}},qhe={colorProcessor:Fhe,seriesProcessor:Uhe,legendGetter:Bhe,tooltipGetter:Hhe,tooltipItemPositionGetter:Whe,getSeriesWithDefaultValues:Ghe},Yhe={bar:yhe,scatter:Ahe,line:Rhe,pie:qhe},Khe=[ux,ix,Df,mx];function Qhe(e){const{children:t,plugins:n=Khe,pluginParams:s={},seriesConfig:r=Yhe}=e,{contextValue:i}=ice(n,s,r);return a.jsx(YB.Provider,{value:i,children:t})}const Er=()=>{const e=g.useContext(YB);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function Xhe(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const mN=(e,t)=>{const{instance:n}=Er(),s=g.useRef(!1),r=Qn(()=>{s.current=!0,n.setItemInteraction(e,{interaction:"pointer"}),n.setHighlight(e)}),i=Qn(()=>{s.current=!1,n.removeItemInteraction(e),n.clearHighlight()});return g.useEffect(()=>()=>{s.current&&i()},[i]),g.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:Xhe}),[t,r,i])};function bG(e){return e.replace(" ","_")}const vG=mn("MuiAppearingMask",["animate"]),Zhe=Qt("rect")({animationName:"animate-width",animationTimingFunction:yL,animationDuration:"0s",[`&.${vG.animate}`]:{animationDuration:`${dN}ms`},"@keyframes animate-width":{from:{width:0}}});function wG(e){const t=di(),n=lN(),s=bG(`${n}-${e.id}`);return a.jsxs(g.Fragment,{children:[a.jsx("clipPath",{id:s,children:a.jsx(Zhe,{className:e.skipAnimation?"":vG.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),a.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const Jhe=["skipAnimation","ownerState"];function ege(e){const{skipAnimation:t,ownerState:n}=e,s=aa(e,Jhe),r=rhe(e);return a.jsx(wG,{skipAnimation:t,id:`${n.id}-area-clip`,children:a.jsx("path",Ue({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?"brightness(140%)":n.gradientId?void 0:"brightness(120%)",opacity:n.isFaded?.3:1,stroke:"none","data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},s,r))})}const tge=["id","classes","color","gradientId","slots","slotProps","onClick"];function age(e){return En("MuiAreaElement",e)}const nge=mn("MuiAreaElement",["root","highlighted","faded","series"]),sge=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Tn(i,age,t)};function rge(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,d=aa(e,tge),c=mN({type:"line",seriesId:t}),{isFaded:m,isHighlighted:h}=mG({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:m,isHighlighted:h},b=sge(p),w=i?.area??ege,x=mo({elementType:w,externalSlotProps:l?.area,additionalProps:Ue({},c,{onClick:o,cursor:o?"pointer":"unset"}),className:b.root,ownerState:p});return a.jsx(w,Ue({},d,x))}function wL(e){const t=$a(),n=Pt(t,voe);return e||n}function NL(){const e=$a();return Pt(e,YH)}function NG(e){switch(e){case"catmullRom":return nfe.alpha(.5);case"linear":return fx;case"monotoneX":return gT;case"monotoneY":return W9;case"natural":return Y9;case"step":return K9;case"stepBefore":return Q9;case"stepAfter":return X9;case"bumpY":return E9;case"bumpX":return T9;default:return gT}}function ige(e,t){const n=hx(),s=er().xAxisIds[0],r=tr().yAxisIds[0],i=xL();return g.useMemo(()=>{if(n===void 0)return[];const{series:o,stackingGroups:d}=n,c=[];for(const m of d){const h=m.ids;for(let p=h.length-1;p>=0;p-=1){const b=h[p],{xAxisId:w=s,yAxisId:x=r,stackedData:v,data:j,connectNulls:C,baseline:S,curve:_,strictStepCurve:A,area:T}=o[b];if(!T||!(w in e)||!(x in t))continue;const E=e[w].scale,D=Mf(E),z=t[x].scale,K=e[w].data,B=t[x].colorScale&&i(x)||e[w].colorScale&&i(w)||void 0,O=_?.includes("step")&&!A&&es(E),L=K?.flatMap((q,le)=>{const Q=j[le]==null;if(O){const te=[{x:q,y:v[le],nullData:Q,isExtension:!1}];return!Q&&(le===0||j[le-1]==null)&&te.unshift({x:(E(q)??0)-(E.step()-E.bandwidth())/2,y:v[le],nullData:Q,isExtension:!0}),!Q&&(le===j.length-1||j[le+1]==null)&&te.push({x:(E(q)??0)+(E.step()+E.bandwidth())/2,y:v[le],nullData:Q,isExtension:!0}),te}return{x:q,y:v[le],nullData:Q}})??[],H=C?L.filter(q=>!q.nullData):L,W=Eg().x(q=>q.isExtension?q.x:D(q.x)).defined(q=>C||!q.nullData||!!q.isExtension).y0(q=>{if(typeof S=="number")return z(S);if(S==="max")return z.range()[1];if(S==="min")return z.range()[0];const le=q.y&&z(q.y[0]);return Number.isNaN(le)?z.range()[0]:le}).y1(q=>q.y&&z(q.y[1])).curve(NG(_))(H)||"";c.push({area:o[b].area,color:o[b].color,gradientId:B,d:W,seriesId:b})}}return c},[n,s,r,e,t,i])}const lge=["slots","slotProps","onItemClick","skipAnimation"],oge=Qt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${nge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),cge=()=>{const{xAxis:e}=er(),{yAxis:t}=tr();return ige(e,t)};function dge(e){const{slots:t,slotProps:n,onItemClick:s,skipAnimation:r}=e,i=aa(e,lge),l=NL(),o=wL(l||r),d=cge();return a.jsx(oge,Ue({},i,{children:d.map(({d:c,seriesId:m,color:h,area:p,gradientId:b})=>!!p&&a.jsx(rge,{id:m,d:c,color:h,gradientId:b,slots:t,slotProps:n,onClick:s&&(w=>s(w,{type:"line",seriesId:m})),skipAnimation:o},m))}))}const uge=["skipAnimation","ownerState"],mge=g.forwardRef(function(t,n){const{skipAnimation:s,ownerState:r}=t,i=aa(t,uge),l=ihe(Ue({},t,{ref:n}));return a.jsx(wG,{skipAnimation:s,id:`${r.id}-line-clip`,children:a.jsx("path",Ue({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,l))})}),fge=["id","classes","color","gradientId","slots","slotProps","onClick"];function hge(e){return En("MuiLineElement",e)}const gge=mn("MuiLineElement",["root","highlighted","faded","series"]),pge=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Tn(i,hge,t)};function xge(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:l,onClick:o}=e,d=aa(e,fge),c=mN({type:"line",seriesId:t}),{isFaded:m,isHighlighted:h}=mG({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:m,isHighlighted:h},b=pge(p),w=i?.line??mge,x=mo({elementType:w,externalSlotProps:l?.line,additionalProps:Ue({},c,{onClick:o,cursor:o?"pointer":"unset"}),className:b.root,ownerState:p});return a.jsx(w,Ue({},d,x))}function yge(e,t){const n=hx(),s=er().xAxisIds[0],r=tr().yAxisIds[0],i=xL();return g.useMemo(()=>{if(n===void 0)return[];const{series:o,stackingGroups:d}=n,c=[];for(const m of d){const h=m.ids;for(const p of h){const{xAxisId:b=s,yAxisId:w=r,stackedData:x,data:v,connectNulls:j,curve:C,strictStepCurve:S}=o[p];if(!(b in e)||!(w in t))continue;const _=e[b].scale,A=Mf(_),T=t[w].scale,E=e[b].data,D=t[w].colorScale&&i(w)||e[b].colorScale&&i(b)||void 0,z=C?.includes("step")&&!S&&es(_),K=E?.flatMap((H,ae)=>{const W=v[ae]==null;if(z){const q=[{x:H,y:x[ae],nullData:W,isExtension:!1}];return!W&&(ae===0||v[ae-1]==null)&&q.unshift({x:(_(H)??0)-(_.step()-_.bandwidth())/2,y:x[ae],nullData:W,isExtension:!0}),!W&&(ae===v.length-1||v[ae+1]==null)&&q.push({x:(_(H)??0)+(_.step()+_.bandwidth())/2,y:x[ae],nullData:W,isExtension:!0}),q}return{x:H,y:x[ae],nullData:W}})??[],B=j?K.filter(H=>!H.nullData):K,L=oL().x(H=>H.isExtension?H.x:A(H.x)).defined(H=>j||!H.nullData||!!H.isExtension).y(H=>T(H.y[1])).curve(NG(C))(B)||"";c.push({color:o[p].color,gradientId:D,d:L,seriesId:p})}}return c},[n,s,r,e,t,i])}const bge=["slots","slotProps","skipAnimation","onItemClick"],vge=Qt("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${gge.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),wge=()=>{const{xAxis:e}=er(),{yAxis:t}=tr();return yge(e,t)};function Nge(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=aa(e,bge),l=NL(),o=wL(l||s),d=wge();return a.jsx(vge,Ue({},i,{children:d.map(({d:c,seriesId:m,color:h,gradientId:p})=>a.jsx(xge,{id:m,d:c,color:h,gradientId:p,skipAnimation:o,slots:t,slotProps:n,onClick:r&&(b=>r(b,{type:"line",seriesId:m}))},m))}))}function jge(e){return En("MuiMarkElement",e)}const jG=mn("MuiMarkElement",["root","highlighted","faded","animate","series"]),CG=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r,skipAnimation:i}=e,l={root:["root",`series-${n}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Tn(l,jge,t)},Cge=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],Sge=Qt("circle")({[`&.${jG.animate}`]:{transitionDuration:`${dN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:yL}});function _ge(e){const{x:t,y:n,id:s,classes:r,color:i,dataIndex:l,onClick:o,skipAnimation:d,isFaded:c=!1,isHighlighted:m=!1}=e,h=aa(e,Cge),p=xl(),b=mN({type:"line",seriesId:s,dataIndex:l}),x=CG({id:s,classes:r,isHighlighted:m,isFaded:c,skipAnimation:d});return a.jsx(Sge,Ue({},h,{cx:t,cy:n,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:x.root,onClick:o,cursor:o?"pointer":"unset"},b,{"data-highlighted":m||void 0,"data-faded":c||void 0}))}function SG(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const Age=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],Tge=Qt("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${jG.animate}`]:{transitionDuration:`${dN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:yL}}));function Ege(e){const{x:t,y:n,id:s,classes:r,color:i,shape:l,dataIndex:o,onClick:d,skipAnimation:c,isFaded:m=!1,isHighlighted:h=!1}=e,p=aa(e,Age),b=mN({type:"line",seriesId:s,dataIndex:o}),w={id:s,classes:r,isHighlighted:h,isFaded:m,color:i,skipAnimation:c},x=CG(w);return a.jsx(Tge,Ue({},p,{style:{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`},ownerState:w,className:x.root,d:cL(R9[SG(l)])(),onClick:d,cursor:d?"pointer":"unset"},b,{"data-highlighted":h||void 0,"data-faded":m||void 0}))}const kge=["slots","slotProps","skipAnimation","onItemClick"];function Lge(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=aa(e,kge),l=NL(),o=wL(l||s),d=hx(),{xAxis:c,xAxisIds:m}=er(),{yAxis:h,yAxisIds:p}=tr(),b=lN(),{instance:w,store:x}=Er(),{isFaded:v,isHighlighted:j}=Hfe(),C=Pt(x,p9),S=g.useMemo(()=>{const D={};for(const{dataIndex:z,axisId:K}of C)D[K]===void 0?D[K]=new Set([z]):D[K].add(z);return D},[C]);if(d===void 0)return null;const{series:_,stackingGroups:A}=d,T=m[0],E=p[0];return a.jsx("g",Ue({},i,{children:A.flatMap(({ids:D})=>D.map(z=>{const{xAxisId:K=T,yAxisId:B=E,stackedData:O,data:L,showMark:H=!0,shape:ae="circle"}=_[z];if(H===!1)return null;const W=Mf(c[K].scale),q=h[B].scale,le=c[K].data;if(le===void 0)throw new Error(`MUI X Charts: ${K===Ow?"The first `xAxis`":`The x-axis with id "${K}"`} should have data property to be able to display a line plot.`);const Q=bG(`${b}-${z}-line-clip`),te=vL(_[z],c[K],h[B]),V=t?.mark??(ae==="circle"?_ge:Ege),ee=j({seriesId:z}),me=!ee&&v({seriesId:z});return a.jsx("g",{clipPath:`url(#${Q})`,"data-series":z,children:le?.map((we,ve)=>{const Ae=L[ve]==null?null:O[ve][1];return{x:W(we),y:Ae===null?null:q(Ae),position:we,value:Ae,index:ve}}).filter(({x:we,y:ve,index:Ae,position:be,value:Ie})=>Ie===null||ve===null||!w.isPointInside(we,ve)?!1:H===!0?!0:H({x:we,y:ve,index:Ae,position:be,value:Ie})).map(({x:we,y:ve,index:Ae})=>a.jsx(V,Ue({id:z,dataIndex:Ae,shape:ae,color:te(Ae),x:we,y:ve,skipAnimation:o,onClick:r&&(be=>r(be,{type:"line",seriesId:z,dataIndex:Ae})),isHighlighted:S[K]?.has(Ae)||ee,isFaded:me},n?.mark),`${z}-${Ae}`))},z)}))}))}function fN(){const[e,t]=g.useState(typeof window<"u"||!1);return g.useEffect(()=>{t(!0)},[]),e}function jL(e){return typeof e=="number"&&!Number.isFinite(e)}const yT={start:0,extremities:0,end:1,middle:.5};function xS(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+yT[n]*e.step()}function Pge(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,isInside:o}=e;if(es(t)){const p=t.domain(),b=l??"middle";if(t.bandwidth()>0){const x=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,v=t.range()[0]>t.range()[1],j=x.findIndex(S=>o(xS(t,S,v?"start":"end"))),C=x.findLastIndex(S=>o(xS(t,S,v?"end":"start")));return[...x.slice(j,C+1).map(S=>{const _=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:_})??_,offset:xS(t,S,i),labelOffset:b==="tick"?0:t.step()*(yT[b]-yT[i])}}),...i==="extremities"&&C===p.length-1&&o(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(x=>{const v=`${x}`;return{value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:v})??v,offset:t(x),labelOffset:0}})}if(t.domain().some(jL))return[];const c=l,m=typeof r=="object"?r:Dge(t,n),h=[];for(let p=0;p<m.length;p+=1){const b=m[p],w=t(b);if(o(w)){const x=t.tickFormat(n)(b);h.push({value:b,formattedValue:s?.(b,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:x})??x,offset:w,labelOffset:c==="middle"?t(m[p-1]??0)-(w+t(m[p-1]??0))/2:0})}}return h}function Dge(e,t){const n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function hN(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:l,direction:o}=e,{instance:d}=Er(),c=o==="x"?d.isXInside:d.isYInside;return g.useMemo(()=>Pge({scale:t,tickNumber:n,tickPlacement:i,tickInterval:r,tickLabelPlacement:l,valueFormatter:s,isInside:c}),[t,n,i,r,l,s,c])}function Oge(e=!1){const[t,n]=g.useState(!1);return Un(()=>{e||n(!0)},[e]),g.useEffect(()=>{e&&n(!0)},[e]),t}const _G=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Mge(e){return e.length}function Ige(e){const t=_G.segment(e);let n=0;for(const s of t)n+=1;return n}const $ge=_G?Ige:Mge;function Rge(e){return e*(Math.PI/180)}const AG=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function zge(e,t){return e.slice(0,t)}function Uge(e,t){const n=AG.segment(e);let s="",r=0;for(const i of n)if(s+=i.segment,r+=1,r>=t)break;return s}const Fge=AG?Uge:zge,KI="";function TG(e,t){const{width:n,height:s,measureText:r}=t,i=Rge(t.angle),l=r(e),o=Math.abs(l.width*Math.cos(i))+Math.abs(l.height*Math.sin(i)),d=Math.abs(l.width*Math.sin(i))+Math.abs(l.height*Math.cos(i));return o<=n&&d<=s}function EG(e,t){if(t(e))return e;let n=e,s=1,r=1/2;const i=$ge(e);let l=i,o=i,d=null;do{if(o=l,l=Math.floor(i*r),l===0)break;n=Fge(e,l).trim();const c=t(n+KI);s+=1,c?(d=n,r+=1/2**s):r-=1/2**s}while(Math.abs(l-o)!==1);return d?d+KI:""}function kG(){return typeof window>"u"}const wc=new Map,LG=2e3,Bge=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function CL(e,t){return Bge.has(e)&&t===+t?`${t}px`:t}const Hge=/([A-Z])/g;function SL(e){return String(e).replace(Hge,t=>`-${t.toLowerCase()}`)}function PG(e){let t="";for(const n in e)if(Object.hasOwn(e,n)){const s=n,r=e[s];if(r===void 0)continue;t+=`${SL(s)}:${CL(s,r)};`}return t}const gx=(e,t={})=>{if(e==null||kG())return{width:0,height:0};const n=String(e),s=PG(t),r=`${n}-${s}`,i=wc.get(r);if(i)return i;try{const l=OG(),o=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(c=>(o.style[SL(c)]=CL(c,t[c]),c)),o.textContent=n,l.replaceChildren(o);const d=DG(o);return wc.set(r,d),wc.size+1>LG&&wc.clear(),d}catch{return{width:0,height:0}}};function Gge(e,t={}){if(kG())return new Map(Array.from(e).map(d=>[d,{width:0,height:0}]));const n=new Map,s=[],r=PG(t);for(const d of e){const c=`${d}-${r}`,m=wc.get(c);m?n.set(d,m):s.push(d)}const i=OG(),l=Ue({},t);Object.keys(l).map(d=>(i.style[SL(d)]=CL(d,l[d]),d));const o=[];for(const d of s){const c=document.createElementNS("http://www.w3.org/2000/svg","text");c.textContent=`${d}`,o.push(c)}i.replaceChildren(...o);for(let d=0;d<s.length;d+=1){const c=s[d],m=i.children[d],h=DG(m),p=`${c}-${r}`;wc.set(p,h),n.set(c,h)}return wc.size+1>LG&&wc.clear(),n}function DG(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let Fs=null;function OG(){return Fs===null&&(Fs=document.createElementNS("http://www.w3.org/2000/svg","svg"),Fs.setAttribute("aria-hidden","true"),Fs.style.position="absolute",Fs.style.top="-20000px",Fs.style.left="0",Fs.style.padding="0",Fs.style.margin="0",Fs.style.border="none",Fs.style.pointerEvents="none",Fs.style.visibility="hidden",Fs.style.contain="strict",document.body.appendChild(Fs)),Fs}function Vge(e,t,n,s,r){const i=new Map,l=oN(r?.angle??0);let o=1,d=1;r?.textAnchor==="start"?(o=1/0,d=1):r?.textAnchor==="end"?(o=1,d=1/0):(o=2,d=2),l>90&&l<270&&([o,d]=[d,o]),s&&([o,d]=[d,o]);for(const c of e)if(c.formattedValue){const m=Math.min((c.offset+c.labelOffset)*o,(t.left+t.width+t.right-c.offset-c.labelOffset)*d),h=p=>TG(p,{width:m,height:n,angle:l,measureText:b=>gx(b,r)});i.set(c,EG(c.formattedValue.toString(),h))}return i}const QI=5;function Wge(e,t,n=0){const s=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(s<QI)return e;if(s>90-QI)return t;const r=vc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function qge(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:l}){if(typeof n=="function")return new Set(e.filter((h,p)=>n(h.value,p)));let o=0;const d=r?-1:1,c=e.filter(h=>{const{offset:p,labelOffset:b,formattedValue:w}=h;if(w==="")return!1;const x=p+b;return l(x)}),m=Kge(c,t);return new Set(c.filter((h,p)=>{const{offset:b,labelOffset:w}=h,x=b+w;if(p>0&&d*x<d*(o+s))return!1;const{width:v,height:j}=i?Yge(m,h):{width:0,height:0},C=Wge(v,j,t?.angle),S=x-d*C/2;return p>0&&d*S<d*(o+s)?!1:(o=x+d*C/2,!0)}))}function Yge(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(n=Math.max(n,i.width),s+=i.height)}return{width:n,height:s}}function Kge(e,t){const n=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>n.add(r));return Gge(n,t)}function MG(e){return En("MuiChartsAxis",e)}const vy=mn("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),IG=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionX",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Tn(r,MG,t)},bT=3,Qge=4,$G={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Xge({style:e,needsComputation:t,text:n}){return n.split(`
`).map(s=>Ue({text:s},t?gx(s,e):{width:0,height:0}))}const Zge=["x","y","style","text","ownerState"],Jge=["angle","textAnchor","dominantBaseline"];function gN(e){const{x:t,y:n,style:s,text:r}=e,i=aa(e,Zge),l=s??{},{angle:o,textAnchor:d,dominantBaseline:c}=l,m=aa(l,Jge),h=fN(),p=g.useMemo(()=>Xge({style:m,needsComputation:h&&r.includes(`
`),text:r}),[m,r,h]);let b;switch(c){case"hanging":case"text-before-edge":b=0;break;case"central":b=(p.length-1)/2*-p[0].height;break;default:b=(p.length-1)*-p[0].height;break}return a.jsx("text",Ue({},i,{transform:o?`rotate(${o}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:d,dominantBaseline:c,style:m,children:p.map((w,x)=>a.jsx("tspan",{x:t,dy:`${x===0?b:p[0].height}px`,dominantBaseline:c,children:w.text},x))}))}function RG(e){const t=oN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function zG(e){const t=oN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function UG(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const epe=["scale","tickNumber","reverse"];function FG(e){const{xAxis:t,xAxisIds:n}=er(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i,reverse:l}=s,o=aa(s,epe),d=oi({props:Ue({},o,e),name:"MuiChartsXAxis"}),c=Ue({},$G,d),{position:m,tickLabelStyle:h,slots:p,slotProps:b}=c,w=xl(),x=Zp(),v=IG(c),j=m==="bottom"?1:-1,C=p?.axisTick??"line",S=p?.axisTickLabel??gN,_=RG((m==="bottom"?0:180)-(h?.angle??0)),A=zG((m==="bottom"?0:180)-(h?.angle??0)),T=mo({elementType:S,externalSlotProps:b?.axisTickLabel,additionalProps:{style:Ue({},w.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:x?UG(_):_,dominantBaseline:A},h)},className:v.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:c,tickNumber:i,positionSign:j,classes:v,Tick:C,TickLabel:S,axisTickLabelProps:T,reverse:l}}function tpe(e){const{axisLabelHeight:t}=e,{xScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:d,axisTickLabelProps:c,reverse:m}=FG(e),h=Zp(),p=Oge(),{disableTicks:b,tickSize:w,valueFormatter:x,slotProps:v,tickInterval:j,tickLabelInterval:C,tickPlacement:S,tickLabelPlacement:_,tickLabelMinGap:A,height:T}=s,E=di(),{instance:D}=Er(),z=fN(),K=b?4:w,B=hN({scale:n,tickNumber:r,valueFormatter:x,tickInterval:j,tickPlacement:S,tickLabelPlacement:_,direction:"x"}),O=qge(B,{tickLabelStyle:c.style,tickLabelInterval:C,tickLabelMinGap:A,reverse:m,isMounted:p,isXInside:D.isXInside}),L=Math.max(0,T-(t>0?t+Qge:0)-K-bT),H=z?Vge(O,E,L,h,c.style):new Map(Array.from(O).map(ae=>[ae,ae.formattedValue]));return a.jsx(g.Fragment,{children:B.map((ae,W)=>{const{offset:q,labelOffset:le}=ae,Q=le??0,te=i*(K+bT),V=D.isXInside(q),ee=H.get(ae),me=O.has(ae);return a.jsxs("g",{transform:`translate(${q}, 0)`,className:l.tickContainer,children:[!b&&V&&a.jsx(o,Ue({y2:i*K,className:l.tick},v?.axisTick)),ee!==void 0&&me&&a.jsx(d,Ue({x:Q,y:te},c,{text:ee}))]},W)})})}const Vh={start:0,extremities:0,end:1,middle:.5,tick:0};function BG(e){const{scale:t,tickInterval:n,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return g.useMemo(()=>{const l=t.domain(),o=typeof n=="function"&&l.filter(n)||typeof n=="object"&&n||l;if(t.bandwidth()>0){const d=XI(o,i,r,s,t);return d[0]&&(d[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...d,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return XI(o,i,r,s,t)},[t,n,i,r,s])}function XI(e,t,n,s,r){const i=[],l=new Map;let o=0;for(let d=0;d<t.length;d+=1)for(let c=0;c<e.length;c+=1){const m=e[c],h=t[d].getValue(m,c),p=i[i.length-1];if(p?.value!==h||p?.groupIndex!==d){o=1;const w=es(r)?r(m)-(r.step()-r.bandwidth())/2+Vh[n]*r.step():r(m),x=r.step()*o*(Vh[s]-Vh[n]);i.push({value:h,formattedValue:`${h}`,offset:w,groupIndex:d,dataIndex:c,ignoreTick:!1,labelOffset:x}),l.has(c)||l.set(c,new Set);const v=l.get(c);for(const j of v.values())i[j].ignoreTick=!0;v.add(i.length-1)}else{o+=1;const w=r.step()*o*(Vh[s]-Vh[n]);p.labelOffset=w}}return i}const ZI={tickSize:6},ape=(e,t,n)=>{const s=e[t]??{},r=n??ZI.tickSize,i=r*t*2+r;return Ue({},ZI,s,{tickSize:s.tickSize??i})};function npe(e){const{xScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=FG(e);if(!es(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:d,tickSize:c,valueFormatter:m,slotProps:h,tickInterval:p,tickPlacement:b,tickLabelPlacement:w}=n,x=n.groups,{instance:v}=Er(),j=BG({scale:t,tickInterval:p,tickPlacement:b,tickLabelPlacement:w,groups:x});return a.jsx(g.Fragment,{children:j.map((C,S)=>{const{offset:_,labelOffset:A}=C,T=A??0,E=v.isXInside(_),D=C.formattedValue,z=C.ignoreTick??!1,K=C.groupIndex??0,B=ape(x,K,c),O=s*B.tickSize,L=s*(B.tickSize+bT);return a.jsxs("g",{transform:`translate(${_}, 0)`,className:r.tickContainer,"data-group-index":K,children:[!d&&!z&&E&&a.jsx(i,Ue({y2:O,className:r.tick},h?.axisTick)),D!==void 0&&a.jsx(l,Ue({x:T,y:L},o,{style:Ue({},o.style,B.tickLabelStyle),text:D}))]},S)})})}const HG=Qt("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${vy.tickLabel}`]:Ue({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${vy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${vy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${vy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),spe=["axis"],rpe=["scale","tickNumber","reverse"],ipe=Qt(HG,{name:"MuiChartsXAxis",slot:"Root"})({});function lpe(e){let{axis:t}=e,n=aa(e,spe);const{scale:s}=t,r=aa(t,rpe),i=oi({props:Ue({},r,n),name:"MuiChartsXAxis"}),l=Ue({},$G,i),{position:o,labelStyle:d,offset:c,slots:m,slotProps:h,sx:p,disableLine:b,label:w,height:x}=l,v=xl(),j=IG(l),{left:C,top:S,width:_,height:A}=di(),T=o==="bottom"?1:-1,E=m?.axisLine??"line",D=m?.axisLabel??gN,z=mo({elementType:D,externalSlotProps:h?.axisLabel,additionalProps:{style:Ue({},v.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:o==="bottom"?"text-after-edge":"text-before-edge"},d)},ownerState:{}});if(o==="none")return null;const K=w?gx(w,z.style).height:0,B=s.domain(),L=es(s)?B.length===0:B.some(jL);let H=null;L||(H="groups"in t&&Array.isArray(t.groups)?a.jsx(npe,Ue({},n)):a.jsx(tpe,Ue({},n,{axisLabelHeight:K})));const ae={x:C+_/2,y:T*x};return a.jsxs(ipe,{transform:`translate(0, ${o==="bottom"?S+A+c:S-c})`,className:j.root,sx:p,children:[!b&&a.jsx(E,Ue({x1:C,x2:C+_,className:j.line},h?.axisLine)),H,w&&a.jsx("g",{className:j.label,children:a.jsx(D,Ue({},ae,z,{text:w}))})]})}function ope(e){const{xAxis:t,xAxisIds:n}=er(),s=t[e.axisId??n[0]];return s?a.jsx(lpe,Ue({},e,{axis:s})):(`${e.axisId}`,null)}function cpe(e,t,n,s,r){const i=new Map,l=oN(r?.angle??0);let o=1,d=1;r?.textAnchor==="start"?(o=1/0,d=1):r?.textAnchor==="end"?(o=1,d=1/0):(o=2,d=2),l>180&&([o,d]=[d,o]),s&&([o,d]=[d,o]);for(const c of e)if(c.formattedValue){const m=Math.min((c.offset+c.labelOffset)*o,(t.top+t.height+t.bottom-c.offset-c.labelOffset)*d),h=p=>TG(p,{width:n,height:m,angle:l,measureText:b=>gx(b,r)});i.set(c,EG(c.formattedValue.toString(),h))}return i}const GG=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionY",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Tn(r,MG,t)},vT=2,dpe=2,VG={disableLine:!1,disableTicks:!1,tickSize:6},upe=["scale","tickNumber","reverse"];function WG(e){const{yAxis:t,yAxisIds:n}=tr(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i}=s,l=aa(s,upe),o=oi({props:Ue({},l,e),name:"MuiChartsYAxis"}),d=Ue({},VG,o),{position:c,tickLabelStyle:m,slots:h,slotProps:p}=d,b=xl(),w=Zp(),x=GG(d),v=c==="right"?1:-1,j=typeof m?.fontSize=="number"?m.fontSize:12,C=h?.axisTick??"line",S=h?.axisTickLabel??gN,_=RG((c==="right"?-90:90)-(m?.angle??0)),A=zG((c==="right"?-90:90)-(m?.angle??0)),T=mo({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:Ue({},b.typography.caption,{fontSize:j,textAnchor:w?UG(_):_,dominantBaseline:A},m)},className:x.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:d,tickNumber:i,positionSign:v,classes:x,Tick:C,TickLabel:S,axisTickLabelProps:T}}function mpe(e){const{axisLabelHeight:t}=e,{yScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:l,Tick:o,TickLabel:d,axisTickLabelProps:c}=WG(e),m=Zp(),{disableTicks:h,tickSize:p,valueFormatter:b,slotProps:w,tickPlacement:x,tickLabelPlacement:v,tickInterval:j,tickLabelInterval:C,width:S}=s,_=di(),{instance:A}=Er(),T=fN(),E=h?4:p,D=hN({scale:n,tickNumber:r,valueFormatter:b,tickPlacement:x,tickLabelPlacement:v,tickInterval:j,direction:"y"}),z=Math.max(0,S-(t>0?t+dpe:0)-E-vT),K=T?cpe(D,_,z,m,c.style):new Map(Array.from(D).map(B=>[B,B.formattedValue]));return a.jsx(g.Fragment,{children:D.map((B,O)=>{const{offset:L,labelOffset:H,value:ae}=B,W=i*(E+vT),q=H,le=typeof C=="function"&&!C?.(ae,O),Q=A.isYInside(L),te=K.get(B);return Q?a.jsxs("g",{transform:`translate(0, ${L})`,className:l.tickContainer,children:[!h&&a.jsx(o,Ue({x2:i*E,className:l.tick},w?.axisTick)),te!==void 0&&!le&&a.jsx(d,Ue({x:W,y:q,text:te},c))]},O):null})})}const JI={tickSize:6},fpe=(e,t,n)=>{const s=e[t]??{},r=n??JI.tickSize,i=r*t*2+r;return Ue({},JI,s,{tickSize:s.tickSize??i})};function hpe(e){const{yScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:l,axisTickLabelProps:o}=WG(e);if(!es(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:d,tickSize:c,valueFormatter:m,slotProps:h,tickInterval:p,tickPlacement:b,tickLabelPlacement:w}=n,x=n.groups,{instance:v}=Er(),j=BG({scale:t,tickInterval:p,tickPlacement:b,tickLabelPlacement:w,groups:x});return a.jsx(g.Fragment,{children:j.map((C,S)=>{const{offset:_,labelOffset:A}=C,T=A??0,E=v.isYInside(_),D=C.formattedValue,z=C.ignoreTick??!1,K=C.groupIndex??0,B=fpe(x,K,c),O=s*B.tickSize,L=s*(B.tickSize+vT);return a.jsxs("g",{transform:`translate(0, ${_})`,className:r.tickContainer,"data-group-index":K,children:[!d&&!z&&E&&a.jsx(i,Ue({x2:O,className:r.tick},h?.axisTick)),D!==void 0&&a.jsx(l,Ue({x:L,y:T},o,{style:Ue({},o.style,B.tickLabelStyle),text:D}))]},S)})})}const gpe=["axis"],ppe=["scale","tickNumber","reverse"],xpe=Qt(HG,{name:"MuiChartsYAxis",slot:"Root"})({});function ype(e){let{axis:t}=e,n=aa(e,gpe);const{scale:s}=t,r=aa(t,ppe),i=fN(),l=oi({props:Ue({},r,n),name:"MuiChartsYAxis"}),o=Ue({},VG,l),{position:d,disableLine:c,label:m,labelStyle:h,offset:p,width:b,sx:w,slots:x,slotProps:v}=o,j=xl(),C=GG(o),{left:S,top:_,width:A,height:T}=di(),E=d==="right"?1:-1,D=x?.axisLine??"line",z=x?.axisLabel??gN,K=mo({elementType:D,externalSlotProps:v?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),B=mo({elementType:z,externalSlotProps:v?.axisLabel,additionalProps:{style:Ue({},j.typography.body1,{lineHeight:1,fontSize:14,angle:E*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},h)},ownerState:{}});if(d==="none")return null;const O={x:E*b,y:_+T/2},L=m==null?0:gx(m,B.style).height,H=s.domain(),W=es(s)?H.length===0:H.some(jL);let q=null;return W||(q="groups"in t&&Array.isArray(t.groups)?a.jsx(hpe,Ue({},n)):a.jsx(mpe,Ue({},n,{axisLabelHeight:L}))),a.jsxs(xpe,{transform:`translate(${d==="right"?S+A+p:S-p}, 0)`,className:C.root,sx:w,children:[!c&&a.jsx(D,Ue({y1:_,y2:_+T,className:C.line},K)),q,m&&i&&a.jsx("g",{className:C.label,children:a.jsx(z,Ue({},O,B,{text:m}))})]})}function bpe(e){const{yAxis:t,yAxisIds:n}=tr(),s=t[e.axisId??n[0]];return s?a.jsx(ype,Ue({},e,{axis:s})):(`${e.axisId}`,null)}function vpe(e){const{slots:t,slotProps:n}=e,{xAxisIds:s,xAxis:r}=er(),{yAxisIds:i,yAxis:l}=tr();return a.jsxs(g.Fragment,{children:[s.map(o=>!r[o].position||r[o].position==="none"?null:a.jsx(ope,{slots:t,slotProps:n,axisId:o},o)),i.map(o=>!l[o].position||l[o].position==="none"?null:a.jsx(bpe,{slots:t,slotProps:n,axisId:o},o))]})}function wpe(e){return En("MuiTypography",e)}mn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Npe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},jpe=tle(),Cpe=e=>{const{align:t,gutterBottom:n,noWrap:s,paragraph:r,variant:i,classes:l}=e,o={root:["root",i,e.align!=="inherit"&&`align${Pa(t)}`,n&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Tn(o,wpe,l)},Spe=Qt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Pa(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(iu(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(np()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Pa(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),e$={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},_L=g.forwardRef(function(t,n){const{color:s,...r}=Uc({props:t,name:"MuiTypography"}),i=!Npe[s],l=jpe({...r,...i&&{color:s}}),{align:o="inherit",className:d,component:c,gutterBottom:m=!1,noWrap:h=!1,paragraph:p=!1,variant:b="body1",variantMapping:w=e$,...x}=l,v={...l,align:o,color:s,className:d,component:c,gutterBottom:m,noWrap:h,paragraph:p,variant:b,variantMapping:w},j=c||(p?"p":w[b]||e$[b])||"span",C=Cpe(v);return a.jsx(Spe,{as:j,ref:n,className:Et(C.root,d),...x,ownerState:v,style:{...o!=="inherit"&&{"--Typography-textAlign":o},...x.style}})});function _pe(e){return En("MuiChartsTooltip",e)}const zm=mn("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),pN=e=>Tn({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},_pe,e);function Ape(){const e=$a(),t=Pt(e,l9),n=Pt(e,Tr),s=cN(),{xAxis:r,xAxisIds:i}=er(),{yAxis:l,yAxisIds:o}=tr(),{zAxis:d,zAxisIds:c}=hL(),{rotationAxis:m,rotationAxisIds:h}=oG();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const b=Xb(p)?p.xAxisId??i[0]:void 0,w=Xb(p)?p.yAxisId??o[0]:void 0,x="zAxisId"in p?p.zAxisId??c[0]:c[0],v=h[0],j=n[p.type].colorProcessor?.(p,b!==void 0?r[b]:void 0,w!==void 0?l[w]:void 0,x!==void 0?d[x]:void 0)??(()=>""),C={};return b!==void 0&&(C.x=r[b]),w!==void 0&&(C.y=l[w]),v!==void 0&&(C.rotation=m[v]),n[p.type].tooltipGetter({series:p,axesConfig:C,getColor:j,identifier:t})}const wT=Qt("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),NT=Qt("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${zm.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),jT=Qt("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),Fm=Qt(_L,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${zm.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${zm.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${zm.valueCell}, &.${zm.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${zm.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function Tpe(e){return En("MuiChartsLabelMark",e)}const Sm=mn("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Epe=e=>{const{type:t}=e;return Tn({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Tpe,e.classes)},qG=(e,t,n)=>g.forwardRef(function(r,i){const l=oi({props:r,name:e}),o=typeof t.defaultProps=="function"?t.defaultProps(l):t.defaultProps??{},d=ru(o,l),c=xl(),m=t.classesResolver?.(d,c),h=g.forwardRef(n);return a.jsx(h,Ue({},d,{classes:m,ref:i}))}),kpe=["type","color","className","classes"],Lpe=Qt("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Sm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Sm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Sm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Sm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Sm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Sm.mask}`]:{height:"100%",width:"100%"}})),ov=qG("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Epe},function(t,n){const{type:s,color:r,className:i,classes:l}=t,o=aa(t,kpe),d=s;return a.jsx(Lpe,Ue({className:Et(l?.root,i),ownerState:t,"aria-hidden":"true",ref:n},o,{children:a.jsx("div",{className:l?.mask,children:typeof d=="function"?a.jsx(d,{className:l?.fill,color:r}):a.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?a.jsx("circle",{className:l?.fill,r:"12",cx:"12",cy:"12",fill:r}):a.jsx("rect",{className:l?.fill,width:"24",height:"24",fill:r})})})}))});function Ppe(e){const{classes:t,sx:n}=e,s=Ape(),r=pN(t);if(!s)return null;if("values"in s){const{label:c,color:m,markType:h}=s;return a.jsx(wT,{sx:n,className:r.paper,children:a.jsxs(NT,{className:r.table,children:[a.jsxs(_L,{component:"caption",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(ov,{type:h,color:m,className:r.mark})}),c]}),a.jsx("tbody",{children:s.values.map(({formattedValue:p,label:b})=>a.jsxs(jT,{className:r.row,children:[a.jsx(Fm,{className:Et(r.labelCell,r.cell),component:"th",children:b}),a.jsx(Fm,{className:Et(r.valueCell,r.cell),component:"td",children:p})]},b))})]})})}const{color:i,label:l,formattedValue:o,markType:d}=s;return a.jsx(wT,{sx:n,className:r.paper,children:a.jsx(NT,{className:r.table,children:a.jsx("tbody",{children:a.jsxs(jT,{className:r.row,children:[a.jsxs(Fm,{className:Et(r.labelCell,r.cell),component:"th",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(ov,{type:d,color:i,className:r.mark})}),l]}),a.jsx(Fm,{className:Et(r.valueCell,r.cell),component:"td",children:o})]})})})})}function Dpe(e){const t=$a(),n=Pt(t,Tr);return g.useMemo(()=>{const r={};return Object.keys(n).forEach(i=>{r[i]=n[i].colorProcessor}),r},[n])}const Ope=wB({themeId:kw});function Mpe(){const e=gL(),[t,n]=g.useState(null);return g.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=l=>{l.pointerType!=="mouse"&&n(null)},i=l=>{n({pointerType:l.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function Ipe(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const $pe="@media (pointer: fine)",Rpe=()=>Ope($pe,{defaultMatches:!0}),YG=(e,t)=>t,KG=(e,t)=>t;function QG(e,t,n){return Array.isArray(n)?n.map(s=>WI(t.axis[s],e)):WI(t.axis[n],e)}const XG=xt(lx,ox,Sfe,(e,t,n)=>e===null||t===null?null:_fe(n)(e,t)),zpe=xt(XG,Eu,YG,(e,t,n=t.axisIds[0])=>e===null?null:QG(e,t,n)),ZG=xt(XG,Eu,KG,(e,t,n=t.axisIds)=>e===null?null:QG(e,t,n));xt(Eu,zpe,YG,(e,t,n=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[n]?.data;return s?s[t]:null});xt(Eu,ZG,KG,(e,t,n=e.axisIds)=>t===null?null:n.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const JG=Lw({memoizeOptions:{resultEqualityCheck:Xm}})(ZG,Eu,(e,t)=>e===null?[]:t.axisIds.map((n,s)=>({axisId:n,dataIndex:e[s]})).filter(({axisId:n,dataIndex:s})=>t.axis[n].triggerTooltip&&s>=0)),Upe=xt(JG,e=>e.length>0);function yS(e,t,n){const s=e.data?.[t]??null,i=(e.valueFormatter??(l=>e.scaleType==="utc"?Ipe(l):l.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:n,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Fpe(e={}){const{multipleAxes:t,directions:n}=e,s=Tfe(),r=Efe(),i=kfe(),l=$a(),o=Pt(l,u9),d=Pt(l,m9),c=Pt(l,JG),m=cN(),{xAxis:h}=er(),{yAxis:p}=tr(),{zAxis:b,zAxisIds:w}=hL(),{rotationAxis:x}=oG(),v=Dpe();if(o.length===0&&d.length===0&&c.length===0)return null;const j=[];return(n===void 0||n.includes("x"))&&o.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(yS(h[C],S,"x"))}),(n===void 0||n.includes("y"))&&d.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(yS(p[C],S,"y"))}),(n===void 0||n.includes("rotation"))&&c.forEach(({axisId:C,dataIndex:S})=>{!t&&j.length>1||j.push(yS(x[C],S,"rotation"))}),Object.keys(m).filter(Qw).forEach(C=>{const S=m[C];return S?S.seriesOrder.forEach(_=>{const A=S.series[_],T=A.xAxisId??s.id,E=A.yAxisId??r.id,D=j.findIndex(({axisDirection:z,axisId:K})=>z==="x"&&K===T||z==="y"&&K===E);if(D>=0){const z="zAxisId"in A?A.zAxisId:w[0],{dataIndex:K}=j[D],B=v[C]?.(A,h[T],p[E],z?b[z]:void 0)(K)??"",O=A.data[K]??null,L=A.valueFormatter(O,{dataIndex:K}),H=Ei(A.label,"tooltip")??null;j[D].seriesItems.push({seriesId:_,color:B,value:O,formattedValue:L,formattedLabel:H,markType:A.labelMarkType})}}):[]}),Object.keys(m).filter(fL).forEach(C=>{const S=m[C];return S?S.seriesOrder.forEach(_=>{const A=S.series[_],T=A.rotationAxisId??i?.id,E=j.findIndex(({axisDirection:D,axisId:z})=>D==="rotation"&&z===T);if(E>=0){const{dataIndex:D}=j[E],z=v[C]?.(A)(D)??"",K=A.data[D]??null,B=A.valueFormatter(K,{dataIndex:D}),O=Ei(A.label,"tooltip")??null;j[E].seriesItems.push({seriesId:_,color:z,value:K,formattedValue:B,formattedLabel:O,markType:A.labelMarkType})}}):[]}),t?j:j.length===0?j[0]:null}function Bpe(e){return Fpe(Ue({},e,{multipleAxes:!0}))}function Hpe(e){const t=pN(e.classes),n=Bpe();return n===null?null:a.jsx(wT,{sx:e.sx,className:t.paper,children:n.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:l,seriesItems:o})=>a.jsxs(NT,{className:t.table,children:[i!=null&&!r.hideTooltip&&a.jsx(_L,{component:"caption",children:l}),a.jsx("tbody",{children:o.map(({seriesId:d,color:c,formattedValue:m,formattedLabel:h,markType:p})=>m==null?null:a.jsxs(jT,{className:t.row,children:[a.jsxs(Fm,{className:Et(t.labelCell,t.cell),component:"th",children:[a.jsx("div",{className:t.markContainer,children:a.jsx(ov,{type:p,color:c,className:t.mark})}),h||null]}),a.jsx(Fm,{className:Et(t.valueCell,t.cell),component:"td",children:m})]},d))})]},s))})}var Ys="top",Jr="bottom",ei="right",Ks="left",AL="auto",px=[Ys,Jr,ei,Ks],mf="start",fp="end",Gpe="clippingParents",eV="viewport",Wh="popper",Vpe="reference",t$=px.reduce(function(e,t){return e.concat([t+"-"+mf,t+"-"+fp])},[]),tV=[].concat(px,[AL]).reduce(function(e,t){return e.concat([t,t+"-"+mf,t+"-"+fp])},[]),Wpe="beforeRead",qpe="read",Ype="afterRead",Kpe="beforeMain",Qpe="main",Xpe="afterMain",Zpe="beforeWrite",Jpe="write",exe="afterWrite",txe=[Wpe,qpe,Ype,Kpe,Qpe,Xpe,Zpe,Jpe,exe];function fl(e){return e?(e.nodeName||"").toLowerCase():null}function _r(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function cu(e){var t=_r(e).Element;return e instanceof t||e instanceof Element}function Qr(e){var t=_r(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function TL(e){if(typeof ShadowRoot>"u")return!1;var t=_r(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function axe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},r=t.attributes[n]||{},i=t.elements[n];!Qr(i)||!fl(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(l){var o=r[l];o===!1?i.removeAttribute(l):i.setAttribute(l,o===!0?"":o)}))})}function nxe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},l=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),o=l.reduce(function(d,c){return d[c]="",d},{});!Qr(r)||!fl(r)||(Object.assign(r.style,o),Object.keys(i).forEach(function(d){r.removeAttribute(d)}))})}}const sxe={name:"applyStyles",enabled:!0,phase:"write",fn:axe,effect:nxe,requires:["computeStyles"]};function ll(e){return e.split("-")[0]}var Yd=Math.max,cv=Math.min,ff=Math.round;function CT(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function aV(){return!/^((?!chrome|android).)*safari/i.test(CT())}function hf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&Qr(e)&&(r=e.offsetWidth>0&&ff(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&ff(s.height)/e.offsetHeight||1);var l=cu(e)?_r(e):window,o=l.visualViewport,d=!aV()&&n,c=(s.left+(d&&o?o.offsetLeft:0))/r,m=(s.top+(d&&o?o.offsetTop:0))/i,h=s.width/r,p=s.height/i;return{width:h,height:p,top:m,right:c+h,bottom:m+p,left:c,x:c,y:m}}function EL(e){var t=hf(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function nV(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&TL(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function xo(e){return _r(e).getComputedStyle(e)}function rxe(e){return["table","td","th"].indexOf(fl(e))>=0}function Vc(e){return((cu(e)?e.ownerDocument:e.document)||window.document).documentElement}function xN(e){return fl(e)==="html"?e:e.assignedSlot||e.parentNode||(TL(e)?e.host:null)||Vc(e)}function a$(e){return!Qr(e)||xo(e).position==="fixed"?null:e.offsetParent}function ixe(e){var t=/firefox/i.test(CT()),n=/Trident/i.test(CT());if(n&&Qr(e)){var s=xo(e);if(s.position==="fixed")return null}var r=xN(e);for(TL(r)&&(r=r.host);Qr(r)&&["html","body"].indexOf(fl(r))<0;){var i=xo(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function xx(e){for(var t=_r(e),n=a$(e);n&&rxe(n)&&xo(n).position==="static";)n=a$(n);return n&&(fl(n)==="html"||fl(n)==="body"&&xo(n).position==="static")?t:n||ixe(e)||t}function kL(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fg(e,t,n){return Yd(e,cv(t,n))}function lxe(e,t,n){var s=Fg(e,t,n);return s>n?n:s}function sV(){return{top:0,right:0,bottom:0,left:0}}function rV(e){return Object.assign({},sV(),e)}function iV(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var oxe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,rV(typeof t!="number"?t:iV(t,px))};function cxe(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,l=n.modifiersData.popperOffsets,o=ll(n.placement),d=kL(o),c=[Ks,ei].indexOf(o)>=0,m=c?"height":"width";if(!(!i||!l)){var h=oxe(r.padding,n),p=EL(i),b=d==="y"?Ys:Ks,w=d==="y"?Jr:ei,x=n.rects.reference[m]+n.rects.reference[d]-l[d]-n.rects.popper[m],v=l[d]-n.rects.reference[d],j=xx(i),C=j?d==="y"?j.clientHeight||0:j.clientWidth||0:0,S=x/2-v/2,_=h[b],A=C-p[m]-h[w],T=C/2-p[m]/2+S,E=Fg(_,T,A),D=d;n.modifiersData[s]=(t={},t[D]=E,t.centerOffset=E-T,t)}}function dxe(e){var t=e.state,n=e.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||nV(t.elements.popper,r)&&(t.elements.arrow=r))}const uxe={name:"arrow",enabled:!0,phase:"main",fn:cxe,effect:dxe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gf(e){return e.split("-")[1]}var mxe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fxe(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:ff(n*r)/r||0,y:ff(s*r)/r||0}}function n$(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,l=e.offsets,o=e.position,d=e.gpuAcceleration,c=e.adaptive,m=e.roundOffsets,h=e.isFixed,p=l.x,b=p===void 0?0:p,w=l.y,x=w===void 0?0:w,v=typeof m=="function"?m({x:b,y:x}):{x:b,y:x};b=v.x,x=v.y;var j=l.hasOwnProperty("x"),C=l.hasOwnProperty("y"),S=Ks,_=Ys,A=window;if(c){var T=xx(n),E="clientHeight",D="clientWidth";if(T===_r(n)&&(T=Vc(n),xo(T).position!=="static"&&o==="absolute"&&(E="scrollHeight",D="scrollWidth")),T=T,r===Ys||(r===Ks||r===ei)&&i===fp){_=Jr;var z=h&&T===A&&A.visualViewport?A.visualViewport.height:T[E];x-=z-s.height,x*=d?1:-1}if(r===Ks||(r===Ys||r===Jr)&&i===fp){S=ei;var K=h&&T===A&&A.visualViewport?A.visualViewport.width:T[D];b-=K-s.width,b*=d?1:-1}}var B=Object.assign({position:o},c&&mxe),O=m===!0?fxe({x:b,y:x},_r(n)):{x:b,y:x};if(b=O.x,x=O.y,d){var L;return Object.assign({},B,(L={},L[_]=C?"0":"",L[S]=j?"0":"",L.transform=(A.devicePixelRatio||1)<=1?"translate("+b+"px, "+x+"px)":"translate3d("+b+"px, "+x+"px, 0)",L))}return Object.assign({},B,(t={},t[_]=C?x+"px":"",t[S]=j?b+"px":"",t.transform="",t))}function hxe(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,l=i===void 0?!0:i,o=n.roundOffsets,d=o===void 0?!0:o,c={placement:ll(t.placement),variation:gf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,n$(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,n$(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const gxe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hxe,data:{}};var wy={passive:!0};function pxe(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,l=s.resize,o=l===void 0?!0:l,d=_r(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&c.forEach(function(m){m.addEventListener("scroll",n.update,wy)}),o&&d.addEventListener("resize",n.update,wy),function(){i&&c.forEach(function(m){m.removeEventListener("scroll",n.update,wy)}),o&&d.removeEventListener("resize",n.update,wy)}}const xxe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:pxe,data:{}};var yxe={left:"right",right:"left",bottom:"top",top:"bottom"};function Sb(e){return e.replace(/left|right|bottom|top/g,function(t){return yxe[t]})}var bxe={start:"end",end:"start"};function s$(e){return e.replace(/start|end/g,function(t){return bxe[t]})}function LL(e){var t=_r(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function PL(e){return hf(Vc(e)).left+LL(e).scrollLeft}function vxe(e,t){var n=_r(e),s=Vc(e),r=n.visualViewport,i=s.clientWidth,l=s.clientHeight,o=0,d=0;if(r){i=r.width,l=r.height;var c=aV();(c||!c&&t==="fixed")&&(o=r.offsetLeft,d=r.offsetTop)}return{width:i,height:l,x:o+PL(e),y:d}}function wxe(e){var t,n=Vc(e),s=LL(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=Yd(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=Yd(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-s.scrollLeft+PL(e),d=-s.scrollTop;return xo(r||n).direction==="rtl"&&(o+=Yd(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:o,y:d}}function DL(e){var t=xo(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function lV(e){return["html","body","#document"].indexOf(fl(e))>=0?e.ownerDocument.body:Qr(e)&&DL(e)?e:lV(xN(e))}function Bg(e,t){var n;t===void 0&&(t=[]);var s=lV(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),i=_r(s),l=r?[i].concat(i.visualViewport||[],DL(s)?s:[]):s,o=t.concat(l);return r?o:o.concat(Bg(xN(l)))}function ST(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Nxe(e,t){var n=hf(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function r$(e,t,n){return t===eV?ST(vxe(e,n)):cu(t)?Nxe(t,n):ST(wxe(Vc(e)))}function jxe(e){var t=Bg(xN(e)),n=["absolute","fixed"].indexOf(xo(e).position)>=0,s=n&&Qr(e)?xx(e):e;return cu(s)?t.filter(function(r){return cu(r)&&nV(r,s)&&fl(r)!=="body"}):[]}function Cxe(e,t,n,s){var r=t==="clippingParents"?jxe(e):[].concat(t),i=[].concat(r,[n]),l=i[0],o=i.reduce(function(d,c){var m=r$(e,c,s);return d.top=Yd(m.top,d.top),d.right=cv(m.right,d.right),d.bottom=cv(m.bottom,d.bottom),d.left=Yd(m.left,d.left),d},r$(e,l,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function oV(e){var t=e.reference,n=e.element,s=e.placement,r=s?ll(s):null,i=s?gf(s):null,l=t.x+t.width/2-n.width/2,o=t.y+t.height/2-n.height/2,d;switch(r){case Ys:d={x:l,y:t.y-n.height};break;case Jr:d={x:l,y:t.y+t.height};break;case ei:d={x:t.x+t.width,y:o};break;case Ks:d={x:t.x-n.width,y:o};break;default:d={x:t.x,y:t.y}}var c=r?kL(r):null;if(c!=null){var m=c==="y"?"height":"width";switch(i){case mf:d[c]=d[c]-(t[m]/2-n[m]/2);break;case fp:d[c]=d[c]+(t[m]/2-n[m]/2);break}}return d}function hp(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=s===void 0?e.placement:s,i=n.strategy,l=i===void 0?e.strategy:i,o=n.boundary,d=o===void 0?Gpe:o,c=n.rootBoundary,m=c===void 0?eV:c,h=n.elementContext,p=h===void 0?Wh:h,b=n.altBoundary,w=b===void 0?!1:b,x=n.padding,v=x===void 0?0:x,j=rV(typeof v!="number"?v:iV(v,px)),C=p===Wh?Vpe:Wh,S=e.rects.popper,_=e.elements[w?C:p],A=Cxe(cu(_)?_:_.contextElement||Vc(e.elements.popper),d,m,l),T=hf(e.elements.reference),E=oV({reference:T,element:S,placement:r}),D=ST(Object.assign({},S,E)),z=p===Wh?D:T,K={top:A.top-z.top+j.top,bottom:z.bottom-A.bottom+j.bottom,left:A.left-z.left+j.left,right:z.right-A.right+j.right},B=e.modifiersData.offset;if(p===Wh&&B){var O=B[r];Object.keys(K).forEach(function(L){var H=[ei,Jr].indexOf(L)>=0?1:-1,ae=[Ys,Jr].indexOf(L)>=0?"y":"x";K[L]+=O[ae]*H})}return K}function Sxe(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,l=n.padding,o=n.flipVariations,d=n.allowedAutoPlacements,c=d===void 0?tV:d,m=gf(s),h=m?o?t$:t$.filter(function(w){return gf(w)===m}):px,p=h.filter(function(w){return c.indexOf(w)>=0});p.length===0&&(p=h);var b=p.reduce(function(w,x){return w[x]=hp(e,{placement:x,boundary:r,rootBoundary:i,padding:l})[ll(x)],w},{});return Object.keys(b).sort(function(w,x){return b[w]-b[x]})}function _xe(e){if(ll(e)===AL)return[];var t=Sb(e);return[s$(e),t,s$(t)]}function Axe(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,l=n.altAxis,o=l===void 0?!0:l,d=n.fallbackPlacements,c=n.padding,m=n.boundary,h=n.rootBoundary,p=n.altBoundary,b=n.flipVariations,w=b===void 0?!0:b,x=n.allowedAutoPlacements,v=t.options.placement,j=ll(v),C=j===v,S=d||(C||!w?[Sb(v)]:_xe(v)),_=[v].concat(S).reduce(function(we,ve){return we.concat(ll(ve)===AL?Sxe(t,{placement:ve,boundary:m,rootBoundary:h,padding:c,flipVariations:w,allowedAutoPlacements:x}):ve)},[]),A=t.rects.reference,T=t.rects.popper,E=new Map,D=!0,z=_[0],K=0;K<_.length;K++){var B=_[K],O=ll(B),L=gf(B)===mf,H=[Ys,Jr].indexOf(O)>=0,ae=H?"width":"height",W=hp(t,{placement:B,boundary:m,rootBoundary:h,altBoundary:p,padding:c}),q=H?L?ei:Ks:L?Jr:Ys;A[ae]>T[ae]&&(q=Sb(q));var le=Sb(q),Q=[];if(i&&Q.push(W[O]<=0),o&&Q.push(W[q]<=0,W[le]<=0),Q.every(function(we){return we})){z=B,D=!1;break}E.set(B,Q)}if(D)for(var te=w?3:1,V=function(ve){var Ae=_.find(function(be){var Ie=E.get(be);if(Ie)return Ie.slice(0,ve).every(function(G){return G})});if(Ae)return z=Ae,"break"},ee=te;ee>0;ee--){var me=V(ee);if(me==="break")break}t.placement!==z&&(t.modifiersData[s]._skip=!0,t.placement=z,t.reset=!0)}}const Txe={name:"flip",enabled:!0,phase:"main",fn:Axe,requiresIfExists:["offset"],data:{_skip:!1}};function i$(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function l$(e){return[Ys,ei,Jr,Ks].some(function(t){return e[t]>=0})}function Exe(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,l=hp(t,{elementContext:"reference"}),o=hp(t,{altBoundary:!0}),d=i$(l,s),c=i$(o,r,i),m=l$(d),h=l$(c);t.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:c,isReferenceHidden:m,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":h})}const kxe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Exe};function Lxe(e,t,n){var s=ll(e),r=[Ks,Ys].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,l=i[0],o=i[1];return l=l||0,o=(o||0)*r,[Ks,ei].indexOf(s)>=0?{x:o,y:l}:{x:l,y:o}}function Pxe(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=r===void 0?[0,0]:r,l=tV.reduce(function(m,h){return m[h]=Lxe(h,t.rects,i),m},{}),o=l[t.placement],d=o.x,c=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=c),t.modifiersData[s]=l}const Dxe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Pxe};function Oxe(e){var t=e.state,n=e.name;t.modifiersData[n]=oV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Mxe={name:"popperOffsets",enabled:!0,phase:"read",fn:Oxe,data:{}};function Ixe(e){return e==="x"?"y":"x"}function $xe(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=r===void 0?!0:r,l=n.altAxis,o=l===void 0?!1:l,d=n.boundary,c=n.rootBoundary,m=n.altBoundary,h=n.padding,p=n.tether,b=p===void 0?!0:p,w=n.tetherOffset,x=w===void 0?0:w,v=hp(t,{boundary:d,rootBoundary:c,padding:h,altBoundary:m}),j=ll(t.placement),C=gf(t.placement),S=!C,_=kL(j),A=Ixe(_),T=t.modifiersData.popperOffsets,E=t.rects.reference,D=t.rects.popper,z=typeof x=="function"?x(Object.assign({},t.rects,{placement:t.placement})):x,K=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(T){if(i){var L,H=_==="y"?Ys:Ks,ae=_==="y"?Jr:ei,W=_==="y"?"height":"width",q=T[_],le=q+v[H],Q=q-v[ae],te=b?-D[W]/2:0,V=C===mf?E[W]:D[W],ee=C===mf?-D[W]:-E[W],me=t.elements.arrow,we=b&&me?EL(me):{width:0,height:0},ve=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:sV(),Ae=ve[H],be=ve[ae],Ie=Fg(0,E[W],we[W]),G=S?E[W]/2-te-Ie-Ae-K.mainAxis:V-Ie-Ae-K.mainAxis,Ce=S?-E[W]/2+te+Ie+be+K.mainAxis:ee+Ie+be+K.mainAxis,ce=t.elements.arrow&&xx(t.elements.arrow),F=ce?_==="y"?ce.clientTop||0:ce.clientLeft||0:0,ie=(L=B?.[_])!=null?L:0,he=q+G-ie-F,Le=q+Ce-ie,xe=Fg(b?cv(le,he):le,q,b?Yd(Q,Le):Q);T[_]=xe,O[_]=xe-q}if(o){var Ve,ke=_==="x"?Ys:Ks,ye=_==="x"?Jr:ei,Me=T[A],He=A==="y"?"height":"width",Be=Me+v[ke],dt=Me-v[ye],M=[Ys,Ks].indexOf(j)!==-1,pe=(Ve=B?.[A])!=null?Ve:0,se=M?Be:Me-E[He]-D[He]-pe+K.altAxis,je=M?Me+E[He]+D[He]-pe-K.altAxis:dt,We=b&&M?lxe(se,Me,je):Fg(b?se:Be,Me,b?je:dt);T[A]=We,O[A]=We-Me}t.modifiersData[s]=O}}const Rxe={name:"preventOverflow",enabled:!0,phase:"main",fn:$xe,requiresIfExists:["offset"]};function zxe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Uxe(e){return e===_r(e)||!Qr(e)?LL(e):zxe(e)}function Fxe(e){var t=e.getBoundingClientRect(),n=ff(t.width)/e.offsetWidth||1,s=ff(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Bxe(e,t,n){n===void 0&&(n=!1);var s=Qr(t),r=Qr(t)&&Fxe(t),i=Vc(t),l=hf(e,r,n),o={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&((fl(t)!=="body"||DL(i))&&(o=Uxe(t)),Qr(t)?(d=hf(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=PL(i))),{x:l.left+o.scrollLeft-d.x,y:l.top+o.scrollTop-d.y,width:l.width,height:l.height}}function Hxe(e){var t=new Map,n=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){n.add(i.name);var l=[].concat(i.requires||[],i.requiresIfExists||[]);l.forEach(function(o){if(!n.has(o)){var d=t.get(o);d&&r(d)}}),s.push(i)}return e.forEach(function(i){n.has(i.name)||r(i)}),s}function Gxe(e){var t=Hxe(e);return txe.reduce(function(n,s){return n.concat(t.filter(function(r){return r.phase===s}))},[])}function Vxe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Wxe(e){var t=e.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var o$={placement:"bottom",modifiers:[],strategy:"absolute"};function c$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function qxe(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,r=t.defaultOptions,i=r===void 0?o$:r;return function(o,d,c){c===void 0&&(c=i);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},o$,i),modifiersData:{},elements:{reference:o,popper:d},attributes:{},styles:{}},h=[],p=!1,b={state:m,setOptions:function(j){var C=typeof j=="function"?j(m.options):j;x(),m.options=Object.assign({},i,m.options,C),m.scrollParents={reference:cu(o)?Bg(o):o.contextElement?Bg(o.contextElement):[],popper:Bg(d)};var S=Gxe(Wxe([].concat(s,m.options.modifiers)));return m.orderedModifiers=S.filter(function(_){return _.enabled}),w(),b.update()},forceUpdate:function(){if(!p){var j=m.elements,C=j.reference,S=j.popper;if(c$(C,S)){m.rects={reference:Bxe(C,xx(S),m.options.strategy==="fixed"),popper:EL(S)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(K){return m.modifiersData[K.name]=Object.assign({},K.data)});for(var _=0;_<m.orderedModifiers.length;_++){if(m.reset===!0){m.reset=!1,_=-1;continue}var A=m.orderedModifiers[_],T=A.fn,E=A.options,D=E===void 0?{}:E,z=A.name;typeof T=="function"&&(m=T({state:m,options:D,name:z,instance:b})||m)}}}},update:Vxe(function(){return new Promise(function(v){b.forceUpdate(),v(m)})}),destroy:function(){x(),p=!0}};if(!c$(o,d))return b;b.setOptions(c).then(function(v){!p&&c.onFirstUpdate&&c.onFirstUpdate(v)});function w(){m.orderedModifiers.forEach(function(v){var j=v.name,C=v.options,S=C===void 0?{}:C,_=v.effect;if(typeof _=="function"){var A=_({state:m,name:j,instance:b,options:S}),T=function(){};h.push(A||T)}})}function x(){h.forEach(function(v){return v()}),h=[]}return b}}var Yxe=[xxe,Mxe,gxe,sxe,Dxe,Txe,Rxe,uxe,kxe],Kxe=qxe({defaultModifiers:Yxe});function d$(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Qxe(e){return typeof e=="function"?e():e}const Xxe=g.forwardRef(function(t,n){const{children:s,container:r,disablePortal:i=!1}=t,[l,o]=g.useState(null),d=ml(g.isValidElement(s)?MB(s):null,n);if(Un(()=>{i||o(Qxe(r)||document.body)},[r,i]),Un(()=>{if(l&&!i)return d$(n,l),()=>{d$(n,null)}},[n,l,i]),i){if(g.isValidElement(s)){const c={ref:d};return g.cloneElement(s,c)}return s}return l&&$p.createPortal(s,l)});function Zxe(e){return En("MuiPopper",e)}mn("MuiPopper",["root"]);function Jxe(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function _T(e){return typeof e=="function"?e():e}function e0e(e){return e.nodeType!==void 0}const t0e=e=>{const{classes:t}=e;return Tn({root:["root"]},Zxe,t)},a0e={},n0e=g.forwardRef(function(t,n){const{anchorEl:s,children:r,direction:i,disablePortal:l,modifiers:o,open:d,placement:c,popperOptions:m,popperRef:h,slotProps:p={},slots:b={},TransitionProps:w,ownerState:x,...v}=t,j=g.useRef(null),C=ml(j,n),S=g.useRef(null),_=ml(S,h),A=g.useRef(_);Un(()=>{A.current=_},[_]),g.useImperativeHandle(h,()=>S.current,[]);const T=Jxe(c,i),[E,D]=g.useState(T),[z,K]=g.useState(_T(s));g.useEffect(()=>{S.current&&S.current.forceUpdate()}),g.useEffect(()=>{s&&K(_T(s))},[s]),Un(()=>{if(!z||!d)return;const ae=le=>{D(le.placement)};let W=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:le})=>{ae(le)}}];o!=null&&(W=W.concat(o)),m&&m.modifiers!=null&&(W=W.concat(m.modifiers));const q=Kxe(z,j.current,{placement:T,...m,modifiers:W});return A.current(q),()=>{q.destroy(),A.current(null)}},[z,l,o,d,m,T]);const B={placement:E};w!==null&&(B.TransitionProps=w);const O=t0e(t),L=b.root??"div",H=mo({elementType:L,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:C},ownerState:t,className:O.root});return a.jsx(L,{...H,children:typeof r=="function"?r(B):r})}),s0e=g.forwardRef(function(t,n){const{anchorEl:s,children:r,container:i,direction:l="ltr",disablePortal:o=!1,keepMounted:d=!1,modifiers:c,open:m,placement:h="bottom",popperOptions:p=a0e,popperRef:b,style:w,transition:x=!1,slotProps:v={},slots:j={},...C}=t,[S,_]=g.useState(!0),A=()=>{_(!1)},T=()=>{_(!0)};if(!d&&!m&&(!x||S))return null;let E;if(i)E=i;else if(s){const K=_T(s);E=K&&e0e(K)?ZA(K).body:ZA(null).body}const D=!m&&d&&(!x||S)?"none":void 0,z=x?{in:m,onEnter:A,onExited:T}:void 0;return a.jsx(Xxe,{disablePortal:o,container:E,children:a.jsx(n0e,{anchorEl:s,direction:l,disablePortal:o,modifiers:c,ref:n,open:x?!S:m,placement:h,popperOptions:p,popperRef:b,slotProps:v,slots:j,...C,style:{position:"fixed",top:0,left:0,display:D,...w},TransitionProps:z,children:r})})}),r0e=Qt(s0e,{name:"MuiPopper",slot:"Root"})({}),i0e=g.forwardRef(function(t,n){const s=Zp(),r=Uc({props:t,name:"MuiPopper"}),{anchorEl:i,component:l,components:o,componentsProps:d,container:c,disablePortal:m,keepMounted:h,modifiers:p,open:b,placement:w,popperOptions:x,popperRef:v,transition:j,slots:C,slotProps:S,..._}=r,A=C?.root??o?.Root,T={anchorEl:i,container:c,disablePortal:m,keepMounted:h,modifiers:p,open:b,placement:w,popperOptions:x,popperRef:v,transition:j,..._};return a.jsx(r0e,{as:l,direction:s?"rtl":"ltr",slots:{root:A},slotProps:S??d,...T,ref:n})});function l0e(e){const{children:t,defer:n=!1,fallback:s=null}=e,[r,i]=g.useState(!1);return Un(()=>{n||i(!0)},[n]),g.useEffect(()=>{n&&i(!0)},[n]),r?t:s}function u$(e){let t,n;const s=()=>{n=null,e(...t)};function r(...i){t=i,n||(n=requestAnimationFrame(s))}return r.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},r}function o0e(){const e=$a(),t=Pt(e,lG),n=Pt(e,yl);return t!==void 0?"polar":n!==void 0?"cartesian":"none"}const c0e=["trigger","position","anchor","classes","children"],m$=()=>!1;function d0e(e,t,n){return n?m$:e==="item"?Nme:t==="polar"?Upe:t==="cartesian"?Ame:m$}const u0e=Qt(i0e,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function m0e(e){const t=oi({props:e,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",position:s,anchor:r="pointer",classes:i,children:l}=t,o=aa(t,c0e),d=gL(),c=pN(i),m=Mpe(),h=Rpe(),p=g.useRef(null),b=Pw(()=>({x:0,y:0})),w=o0e(),x=$a(),v=Pt(x,Mme),j=Pt(x,d0e(n,w,v)),S=Pt(x,cx)==="keyboard"?"node":r,_=Pt(x,n==="item"&&S==="node"?jme:()=>null,s);g.useEffect(()=>{const z=d.current;if(z===null)return()=>{};if(_!==null){const O=u$(()=>{b.current={x:z.getBoundingClientRect().left+(_?.x??0),y:z.getBoundingClientRect().top+(_?.y??0)},p.current?.update()});return O(),()=>O.clear()}const K=u$((O,L)=>{b.current={x:O,y:L},p.current?.update()}),B=O=>{K(O.clientX,O.clientY)};return z.addEventListener("pointerdown",B),z.addEventListener("pointermove",B),z.addEventListener("pointerenter",B),()=>{z.removeEventListener("pointerdown",B),z.removeEventListener("pointermove",B),z.removeEventListener("pointerenter",B),K.clear()}},[d,b,_]);const A=g.useMemo(()=>({getBoundingClientRect:()=>({x:b.current.x,y:b.current.y,top:b.current.y,left:b.current.x,right:b.current.x,bottom:b.current.y,width:0,height:0,toJSON:()=>""})}),[b]),T=m?.pointerType==="mouse"||h,E=m?.pointerType==="touch"||!h,D=g.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},...T?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[T,E]);return n==="none"?null:a.jsx(l0e,{children:j&&a.jsx(u0e,Ue({},o,{className:c?.root,open:j,placement:o.placement??s??(T?"right-start":"top"),popperRef:p,anchorEl:A,modifiers:D,children:l}))})}function f0e(e){const{classes:t,trigger:n="axis"}=e,s=pN(t);return a.jsx(m0e,Ue({},e,{classes:t,children:n==="axis"?a.jsx(Hpe,{classes:s}):a.jsx(Ppe,{classes:s})}))}const h0e=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function g0e(e){return En("MuiChartsLegend",e)}const p0e=e=>{const{classes:t,direction:n}=e;return Tn({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},g0e,t)},f$=mn("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),x0e=["slots","slotProps"],y0e=["ownerState"],b0e=(e,t,n,s)=>{function r(i,l){const o=oi({props:i,name:e}),d=typeof n.defaultProps=="function"?n.defaultProps(o):n.defaultProps??{},c=ru(d,o),m=c,{slots:h,slotProps:p}=m,b=aa(m,x0e),w=xl(),x=n.classesResolver?.(c,w),v=h?.[t]??s,j=n.propagateSlots&&!h?.[t],C=mo({elementType:v,externalSlotProps:p?.[t],additionalProps:Ue({},b,{classes:x},j&&{slots:h,slotProps:p}),ownerState:{}}),S=aa(C,y0e),_=Ue({},S);for(const A of n.omitProps??[])delete _[A];return a.jsx(v,Ue({},_,{ref:l}))}return g.forwardRef(r)};function v0e(e){return En("MuiChartsLabel",e)}mn("MuiChartsLabel",["root"]);const w0e=e=>Tn({root:["root"]},v0e,e.classes),N0e=["children","className","classes"],j0e=qG("MuiChartsLabel",{classesResolver:w0e},function(t,n){const{children:s,className:r,classes:i}=t,l=aa(t,N0e);return a.jsx("span",Ue({className:Et(i?.root,r),ref:n},l,{children:s}))}),C0e=["direction","onItemClick","className","classes"],S0e=Qt("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>Ue({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${f$.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${f$.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),_0e=b0e("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:p0e},g.forwardRef(function(t,n){const s=Vfe(),{onItemClick:r,className:i,classes:l}=t,o=aa(t,C0e);if(s.items.length===0)return null;const d=r?"button":"div";return a.jsx(S0e,Ue({className:Et(l?.root,i),ref:n},o,{ownerState:t,children:s.items.map((c,m)=>a.jsx("li",{className:l?.item,"data-series":c.id,children:a.jsxs(d,{className:l?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(h=>r(h,h0e(c),m)):void 0,children:[a.jsx(ov,{className:l?.mark,color:c.color,type:c.markType}),a.jsx(j0e,{className:l?.label,children:c.label})]})},c.id))}))}));function A0e(e){return En("MuiChartsAxisHighlight",e)}mn("MuiChartsAxisHighlight",["root"]);const dv=Qt("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:Ue({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:Ue({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function T0e(e){const{type:t,classes:n}=e,{left:s,width:r}=di(),i=$a(),l=Pt(i,$me),o=Pt(i,Os);return l.length===0?null:l.map(({axisId:d,value:c})=>{const h=o.axis[d].scale,p=Mf(h),b=t==="band"&&c!==null&&es(h);return a.jsxs(g.Fragment,{children:[b&&h(c)!==void 0&&a.jsx(dv,{d:`M ${s} ${h(c)-(h.step()-h.bandwidth())/2} l 0 ${h.step()} l ${r} 0 l 0 ${-h.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&c!==null&&a.jsx(dv,{d:`M ${s} ${p(c)} L ${s+r} ${p(c)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${d}-${c}`)})}function E0e(e){const{type:t,classes:n}=e,{top:s,height:r}=di(),i=$a(),l=Pt(i,Ime),o=Pt(i,Ds);return l.length===0?null:l.map(({axisId:d,value:c})=>{const h=o.axis[d].scale,p=Mf(h),b=t==="band"&&c!==null&&es(h);return a.jsxs(g.Fragment,{children:[b&&h(c)!==void 0&&a.jsx(dv,{d:`M ${h(c)-(h.step()-h.bandwidth())/2} ${s} l ${h.step()} 0 l 0 ${r} l ${-h.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&c!==null&&a.jsx(dv,{d:`M ${p(c)} ${s} L ${p(c)} ${s+r}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${d}-${c}`)})}const k0e=()=>Tn({root:["root"]},A0e);function L0e(e){const{x:t,y:n}=e,s=k0e();return a.jsxs(g.Fragment,{children:[t&&t!=="none"&&a.jsx(E0e,{type:t,classes:s}),n&&n!=="none"&&a.jsx(T0e,{type:n,classes:s})]})}function P0e(e){const{id:t,offset:n}=e,{left:s,top:r,width:i,height:l}=di(),o=Ue({top:0,right:0,bottom:0,left:0},n);return a.jsx("clipPath",{id:t,children:a.jsx("rect",{x:s-o.left,y:r-o.top,width:i+o.left+o.right,height:l+o.top+o.bottom})})}const D0e=parseInt(g.version,10),O0e=["x","y","id","classes","color","shape"];function M0e(e){return En("MuiHighlightElement",e)}mn("MuiHighlightElement",["root"]);const I0e=e=>{const{classes:t,id:n}=e,s={root:["root",`series-${n}`]};return Tn(s,M0e,t)};function $0e(e){const{x:t,y:n,color:s,shape:r}=e,i=aa(e,O0e),l=I0e(e),o=r==="circle"?"circle":"path",d=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:cL(R9[SG(r)])()},c=D0e>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return a.jsx(o,Ue({pointerEvents:"none",className:l.root,transform:`translate(${t} ${n})`,fill:s},c,d,i))}const R0e=["slots","slotProps"];function z0e(e){const{slots:t,slotProps:n}=e,s=aa(e,R0e),r=hx(),{xAxis:i,xAxisIds:l}=er(),{yAxis:o,yAxisIds:d}=tr(),{instance:c}=Er(),m=$a(),h=Pt(m,p9);if(h.length===0||r===void 0)return null;const{series:p,stackingGroups:b}=r,w=l[0],x=d[0],v=t?.lineHighlight??$0e;return a.jsx("g",Ue({},s,{children:h.flatMap(({dataIndex:j,axisId:C})=>b.flatMap(({ids:S})=>S.flatMap(_=>{const{xAxisId:A=w,yAxisId:T=x,stackedData:E,data:D,disableHighlight:z,shape:K="circle"}=p[_];if(z||D[j]==null||C!==A)return null;const B=Mf(i[A].scale),O=o[T].scale,L=i[A].data;if(L===void 0)throw new Error(`MUI X Charts: ${A===Ow?"The first `xAxis`":`The x-axis with id "${A}"`} should have data property to be able to display a line plot.`);const H=B(L[j]),ae=O(E[j][1]);if(!c.isPointInside(H,ae))return null;const W=vL(p[_],i[A],o[T]);return a.jsx(v,Ue({id:_,color:W(j),x:H,y:ae,shape:K},n?.lineHighlight),`${_}`)})))}))}function U0e(e){return En("MuiChartsGrid",e)}const h$=mn("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),F0e=Qt("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${h$.verticalLine}`]:t.verticalLine},{[`&.${h$.horizontalLine}`]:t.horizontalLine},t.root]})({}),cV=Qt("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function B0e(e){const{instance:t}=Er(),{axis:n,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:d}=n,c=hN({scale:l,tickNumber:o,tickInterval:d,direction:"x"});return a.jsx(g.Fragment,{children:c.map(({value:m,offset:h})=>t.isXInside(h)?a.jsx(cV,{y1:s,y2:r,x1:h,x2:h,className:i.verticalLine},`vertical-${m?.getTime?.()??m}`):null)})}function H0e(e){const{instance:t}=Er(),{axis:n,start:s,end:r,classes:i}=e,{scale:l,tickNumber:o,tickInterval:d}=n,c=hN({scale:l,tickNumber:o,tickInterval:d,direction:"y"});return a.jsx(g.Fragment,{children:c.map(({value:m,offset:h})=>t.isYInside(h)?a.jsx(cV,{y1:h,y2:h,x1:s,x2:r,className:i.horizontalLine},`horizontal-${m?.getTime?.()??m}`):null)})}const G0e=["vertical","horizontal"],V0e=({classes:e})=>Tn({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},U0e,e);function W0e(e){const t=oi({props:e,name:"MuiChartsGrid"}),n=di(),{vertical:s,horizontal:r}=t,i=aa(t,G0e),{xAxis:l,xAxisIds:o}=er(),{yAxis:d,yAxisIds:c}=tr(),m=V0e(t),h=d[c[0]],p=l[o[0]];return a.jsxs(F0e,Ue({},i,{className:m.root,children:[s&&a.jsx(B0e,{axis:p,start:n.top,end:n.height+n.top,classes:m}),r&&a.jsx(H0e,{axis:h,start:n.left,end:n.width+n.left,classes:m})]}))}const q0e=["message"],Y0e=Qt("text")(({theme:e})=>Ue({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function K0e(e){const{message:t}=e,n=aa(e,q0e),{top:s,left:r,height:i,width:l}=di(),{localeText:o}=yG();return a.jsx(Y0e,Ue({x:r+l/2,y:s+i/2},n,{children:t??o.loading}))}const Q0e=["message"],X0e=Qt("text")(({theme:e})=>Ue({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Z0e(e){const{message:t}=e,n=aa(e,Q0e),{top:s,left:r,height:i,width:l}=di(),{localeText:o}=yG();return a.jsx(X0e,Ue({x:r+l/2,y:s+i/2},n,{children:t??o.noData}))}function J0e(){const e=cN();return Object.values(e).every(t=>{if(!t)return!0;const{series:n,seriesOrder:s}=t;return s.every(r=>{const i=n[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function eye(e){const t=J0e();if(e.loading){const n=e.slots?.loadingOverlay??K0e;return a.jsx(n,Ue({},e.slotProps?.loadingOverlay))}if(t){const n=e.slots?.noDataOverlay??Z0e;return a.jsx(n,Ue({},e.slotProps?.noDataOverlay))}return null}const tye=[ux,dx,ix,Df,mx,Jw],aye=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],nye=e=>{const{xAxis:t,yAxis:n,series:s,width:r,height:i,margin:l,colors:o,dataset:d,sx:c,onAreaClick:m,onLineClick:h,onMarkClick:p,axisHighlight:b,disableLineItemHighlight:w,grid:x,children:v,slots:j,slotProps:C,skipAnimation:S,loading:_,highlightedItem:A,onHighlightChange:T,className:E,brushConfig:D}=e,z=aa(e,aye),B=`${Ew()}-clip-path`,O=g.useMemo(()=>s.map(Ae=>Ue({disableHighlight:!!w,type:"line"},Ae)),[w,s]),L=Ue({},z,{series:O,width:r,height:i,margin:l,colors:o,dataset:d,xAxis:t??[{id:Ow,scaleType:"point",data:Array.from({length:Math.max(...s.map(Ae=>(Ae.data??d??[]).length))},(Ae,be)=>be)}],yAxis:n,highlightedItem:A,onHighlightChange:T,disableAxisListener:C?.tooltip?.trigger!=="axis"&&b?.x==="none"&&b?.y==="none",className:E,skipAnimation:S,brushConfig:D,plugins:tye}),H={vertical:x?.vertical,horizontal:x?.horizontal},ae={clipPath:`url(#${B})`},W={id:B},q={slots:j,slotProps:C,onItemClick:m},le={slots:j,slotProps:C,onItemClick:h},Q={slots:j,slotProps:C,onItemClick:p,skipAnimation:S},te={slots:j,slotProps:C,loading:_},V={slots:j,slotProps:C},ee=Ue({x:"line"},b),me={slots:j,slotProps:C},we={slots:j,slotProps:C};return{chartsWrapperProps:{sx:c,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:L,gridProps:H,clipPathProps:W,clipPathGroupProps:ae,areaPlotProps:q,linePlotProps:le,markPlotProps:Q,overlayProps:te,chartsAxisProps:V,axisHighlightProps:ee,lineHighlightPlotProps:me,legendProps:we,children:v}};function sye(e,t,n,s,r,i,l,o,d,c,m,h=1/0,p=1){const b=s.copy(),w=r.copy();b.range([0,1]),w.range([0,1]);const x=function(D){const z=b(n[D].x),K=w(n[D].y);return z>=i&&z<=l&&K>=o&&K<=d},v=s.range()[1]-s.range()[0],j=r.range()[1]-r.range()[0],C=v*v,S=j*j;function _(E,D){return C*E*E+S*D*D}const A=b(g$(s,c,E=>n[E]?.x)),T=w(g$(r,m,E=>n[E]?.y));return e.neighbors(A,T,p,h!=null?h*h:1/0,x,_)}function g$(e,t,n){if(es(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return n(s)}return e.invert(t)}const yN=({svgRef:e,params:t,store:n,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:l}=t,o=Pt(n,Js),{axis:d,axisIds:c}=Pt(n,Ds),{axis:m,axisIds:h}=Pt(n,Os),p=Pt(n,YH),{series:b,seriesOrder:w}=Pt(n,an)?.scatter??{},x=Pt(n,p?lme:ome),v=c[0],j=h[0];Un(()=>{n.set("voronoi",{isVoronoiEnabled:!r})},[n,r]),g.useEffect(()=>{if(e.current===null||r)return;const _=e.current;function A(H){const ae=up(_,H);if(!s.isPointInside(ae.x,ae.y))return"outside-chart";let W;for(const q of w??[]){const le=(b??{})[q],Q=x.get(q);if(!Q)continue;const te=le.xAxisId??v,V=le.yAxisId??j,ee=MI(n.getSnapshot(),te),me=MI(n.getSnapshot(),V),we=i==="item"?le.markerSize:i,ve=(ee?.start??0)/100,Ae=(ee?.end??100)/100,be=(me?.start??0)/100,Ie=(me?.end??100)/100,G=d[te].scale,Ce=m[V].scale,ce=sye(Q,o,le.data,G,Ce,ve,Ae,be,Ie,ae.x,ae.y,we)[0];if(ce===void 0)continue;const F=le.data[ce],ie=G(F.x),he=Ce(F.y),Le=(ie-ae.x)**2+(he-ae.y)**2;(W===void 0||Le<W.distanceSq)&&(W={dataIndex:ce,seriesId:q,distanceSq:Le})}return W===void 0?"no-point-found":{seriesId:W.seriesId,dataIndex:W.dataIndex}}const T=s.addInteractionListener("moveEnd",H=>{H.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),E=s.addInteractionListener("panEnd",H=>{H.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),D=s.addInteractionListener("quickPressEnd",H=>{!H.detail.activeGestures.move&&!H.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),z=H=>{const ae=A(H.detail.srcEvent);if(ae==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(ae==="outside-voronoi-max-radius"||ae==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:W,dataIndex:q}=ae;s.setItemInteraction?.({type:"scatter",seriesId:W,dataIndex:q},{interaction:"pointer"}),s.setHighlight?.({seriesId:W,dataIndex:q})},K=s.addInteractionListener("tap",H=>{const ae=A(H.detail.srcEvent);if(typeof ae!="string"&&l){const{seriesId:W,dataIndex:q}=ae;l(H.detail.srcEvent,{type:"scatter",seriesId:W,dataIndex:q})}}),B=s.addInteractionListener("move",z),O=s.addInteractionListener("pan",z),L=s.addInteractionListener("quickPress",z);return()=>{K.cleanup(),B.cleanup(),T.cleanup(),O.cleanup(),E.cleanup(),L.cleanup(),D.cleanup()}},[e,m,d,i,l,r,o,s,w,b,x,v,j,n]);const C=Qn(()=>{n.set("voronoi",{isVoronoiEnabled:!0})}),S=Qn(()=>{n.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:C,disableVoronoi:S}}};yN.getDefaultizedParams=({params:e})=>Ue({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});yN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});yN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const dV=[ux,dx,ix,Df,mx,yN,Jw],rye=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],iye=(e,t)=>{const n=e,{width:s,height:r,margin:i,children:l,series:o,colors:d,dataset:c,desc:m,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:b,disableVoronoi:w,voronoiMaxRadius:x,onItemClick:v,disableAxisListener:j,highlightedItem:C,onHighlightChange:S,sx:_,title:A,xAxis:T,yAxis:E,zAxis:D,rotationAxis:z,radiusAxis:K,skipAnimation:B,seriesConfig:O,plugins:L,localeText:H,slots:ae,slotProps:W,experimentalFeatures:q,enableKeyboardNavigation:le,brushConfig:Q}=n,te=aa(n,rye),V=Ue({title:A,desc:m,sx:_,ref:t},te);return{chartDataProviderProps:{margin:i,series:o,colors:d,dataset:c,disableAxisListener:j,highlightedItem:C,onHighlightChange:S,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:b,disableVoronoi:w,voronoiMaxRadius:x,onItemClick:v,xAxis:T,yAxis:E,zAxis:D,rotationAxis:z,radiusAxis:K,skipAnimation:B,width:s,height:r,localeText:H,seriesConfig:O,experimentalFeatures:q,enableKeyboardNavigation:le,brushConfig:Q,plugins:L??dV,slots:ae,slotProps:W},chartsSurfaceProps:V,children:l}};function p$(e){try{return e.matches(":focus-visible")}catch{}return!1}class uv{static create(){return new uv}static use(){const t=Pw(uv.create).current,[n,s]=g.useState(!1);return t.shouldMount=n,t.setShouldMount=s,g.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=oye(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function lye(){return uv.use()}function oye(){let e,t;const n=new Promise((s,r)=>{e=s,t=r});return n.resolve=e,n.reject=t,n}class OL{static create(){return new OL}currentId=null;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function cye(){const e=Pw(OL.create).current;return FB(e.disposeEffect),e}function dye(e){const{className:t,classes:n,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:l,in:o,onExited:d,timeout:c}=e,[m,h]=g.useState(!1),p=Et(t,n.ripple,n.rippleVisible,s&&n.ripplePulsate),b={width:l,height:l,top:-(l/2)+i,left:-(l/2)+r},w=Et(n.child,m&&n.childLeaving,s&&n.childPulsate);return!o&&!m&&h(!0),g.useEffect(()=>{if(!o&&d!=null){const x=setTimeout(d,c);return()=>{clearTimeout(x)}}},[d,o,c]),a.jsx("span",{className:p,style:b,children:a.jsx("span",{className:w})})}const Vr=mn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),AT=550,uye=80,mye=Xp`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,fye=Xp`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,hye=Xp`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,gye=Qt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),pye=Qt(dye,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Vr.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${mye};
    animation-duration: ${AT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Vr.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Vr.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Vr.childLeaving} {
    opacity: 0;
    animation-name: ${fye};
    animation-duration: ${AT}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Vr.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${hye};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,xye=g.forwardRef(function(t,n){const s=Uc({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:l,...o}=s,[d,c]=g.useState([]),m=g.useRef(0),h=g.useRef(null);g.useEffect(()=>{h.current&&(h.current(),h.current=null)},[d]);const p=g.useRef(!1),b=cye(),w=g.useRef(null),x=g.useRef(null),v=g.useCallback(_=>{const{pulsate:A,rippleX:T,rippleY:E,rippleSize:D,cb:z}=_;c(K=>[...K,a.jsx(pye,{classes:{ripple:Et(i.ripple,Vr.ripple),rippleVisible:Et(i.rippleVisible,Vr.rippleVisible),ripplePulsate:Et(i.ripplePulsate,Vr.ripplePulsate),child:Et(i.child,Vr.child),childLeaving:Et(i.childLeaving,Vr.childLeaving),childPulsate:Et(i.childPulsate,Vr.childPulsate)},timeout:AT,pulsate:A,rippleX:T,rippleY:E,rippleSize:D},m.current)]),m.current+=1,h.current=z},[i]),j=g.useCallback((_={},A={},T=()=>{})=>{const{pulsate:E=!1,center:D=r||A.pulsate,fakeElement:z=!1}=A;if(_?.type==="mousedown"&&p.current){p.current=!1;return}_?.type==="touchstart"&&(p.current=!0);const K=z?null:x.current,B=K?K.getBoundingClientRect():{width:0,height:0,left:0,top:0};let O,L,H;if(D||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)O=Math.round(B.width/2),L=Math.round(B.height/2);else{const{clientX:ae,clientY:W}=_.touches&&_.touches.length>0?_.touches[0]:_;O=Math.round(ae-B.left),L=Math.round(W-B.top)}if(D)H=Math.sqrt((2*B.width**2+B.height**2)/3),H%2===0&&(H+=1);else{const ae=Math.max(Math.abs((K?K.clientWidth:0)-O),O)*2+2,W=Math.max(Math.abs((K?K.clientHeight:0)-L),L)*2+2;H=Math.sqrt(ae**2+W**2)}_?.touches?w.current===null&&(w.current=()=>{v({pulsate:E,rippleX:O,rippleY:L,rippleSize:H,cb:T})},b.start(uye,()=>{w.current&&(w.current(),w.current=null)})):v({pulsate:E,rippleX:O,rippleY:L,rippleSize:H,cb:T})},[r,v,b]),C=g.useCallback(()=>{j({},{pulsate:!0})},[j]),S=g.useCallback((_,A)=>{if(b.clear(),_?.type==="touchend"&&w.current){w.current(),w.current=null,b.start(0,()=>{S(_,A)});return}w.current=null,c(T=>T.length>0?T.slice(1):T),h.current=A},[b]);return g.useImperativeHandle(n,()=>({pulsate:C,start:j,stop:S}),[C,j,S]),a.jsx(gye,{className:Et(Vr.root,i.root,l),ref:x,...o,children:a.jsx(pk,{component:null,exit:!0,children:d})})});function yye(e){return En("MuiButtonBase",e)}const bye=mn("MuiButtonBase",["root","disabled","focusVisible"]),vye=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:s,classes:r}=e,l=Tn({root:["root",t&&"disabled",n&&"focusVisible"]},yye,r);return n&&s&&(l.root+=` ${s}`),l},wye=Qt("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${bye.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),uV=g.forwardRef(function(t,n){const s=Uc({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:l,className:o,component:d="button",disabled:c=!1,disableRipple:m=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:b,LinkComponent:w="a",onBlur:x,onClick:v,onContextMenu:j,onDragLeave:C,onFocus:S,onFocusVisible:_,onKeyDown:A,onKeyUp:T,onMouseDown:E,onMouseLeave:D,onMouseUp:z,onTouchEnd:K,onTouchMove:B,onTouchStart:O,tabIndex:L=0,TouchRippleProps:H,touchRippleRef:ae,type:W,...q}=s,le=g.useRef(null),Q=lye(),te=ml(Q.ref,ae),[V,ee]=g.useState(!1);c&&V&&ee(!1),g.useImperativeHandle(r,()=>({focusVisible:()=>{ee(!0),le.current.focus()}}),[]);const me=Q.shouldMount&&!m&&!c;g.useEffect(()=>{V&&p&&!m&&Q.pulsate()},[m,p,V,Q]);const we=Ul(Q,"start",E,h),ve=Ul(Q,"stop",j,h),Ae=Ul(Q,"stop",C,h),be=Ul(Q,"stop",z,h),Ie=Ul(Q,"stop",Be=>{V&&Be.preventDefault(),D&&D(Be)},h),G=Ul(Q,"start",O,h),Ce=Ul(Q,"stop",K,h),ce=Ul(Q,"stop",B,h),F=Ul(Q,"stop",Be=>{p$(Be.target)||ee(!1),x&&x(Be)},!1),ie=Qn(Be=>{le.current||(le.current=Be.currentTarget),p$(Be.target)&&(ee(!0),_&&_(Be)),S&&S(Be)}),he=()=>{const Be=le.current;return d&&d!=="button"&&!(Be.tagName==="A"&&Be.href)},Le=Qn(Be=>{p&&!Be.repeat&&V&&Be.key===" "&&Q.stop(Be,()=>{Q.start(Be)}),Be.target===Be.currentTarget&&he()&&Be.key===" "&&Be.preventDefault(),A&&A(Be),Be.target===Be.currentTarget&&he()&&Be.key==="Enter"&&!c&&(Be.preventDefault(),v&&v(Be))}),xe=Qn(Be=>{p&&Be.key===" "&&V&&!Be.defaultPrevented&&Q.stop(Be,()=>{Q.pulsate(Be)}),T&&T(Be),v&&Be.target===Be.currentTarget&&he()&&Be.key===" "&&!Be.defaultPrevented&&v(Be)});let Ve=d;Ve==="button"&&(q.href||q.to)&&(Ve=w);const ke={};Ve==="button"?(ke.type=W===void 0?"button":W,ke.disabled=c):(!q.href&&!q.to&&(ke.role="button"),c&&(ke["aria-disabled"]=c));const ye=ml(n,le),Me={...s,centerRipple:i,component:d,disabled:c,disableRipple:m,disableTouchRipple:h,focusRipple:p,tabIndex:L,focusVisible:V},He=vye(Me);return a.jsxs(wye,{as:Ve,className:Et(He.root,o),ownerState:Me,onBlur:F,onClick:v,onContextMenu:ve,onFocus:ie,onKeyDown:Le,onKeyUp:xe,onMouseDown:we,onMouseLeave:Ie,onMouseUp:be,onDragLeave:Ae,onTouchEnd:Ce,onTouchMove:ce,onTouchStart:G,ref:ye,tabIndex:c?-1:L,type:W,...ke,...q,children:[l,me?a.jsx(xye,{ref:te,center:i,...H}):null]})});function Ul(e,t,n,s=!1){return Qn(r=>(n&&n(r),s||e[t](r),!0))}function Nye(e){return En("MuiIconButton",e)}const x$=mn("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),jye=e=>{const{classes:t,disabled:n,color:s,edge:r,size:i,loading:l}=e,o={root:["root",l&&"loading",n&&"disabled",s!=="default"&&`color${Pa(s)}`,r&&`edge${Pa(r)}`,`size${Pa(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Tn(o,Nye,t)},Cye=Qt(uV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Pa(n.color)}`],n.edge&&t[`edge${Pa(n.edge)}`],t[`size${Pa(n.size)}`]]}})(iu(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),iu(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(np()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(np()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${x$.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${x$.loading}`]:{color:"transparent"}}))),Sye=Qt("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),_ye=g.forwardRef(function(t,n){const s=Uc({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:l,color:o="default",disabled:d=!1,disableFocusRipple:c=!1,size:m="medium",id:h,loading:p=null,loadingIndicator:b,...w}=s,x=Ew(h),v=b??a.jsx(xk,{"aria-labelledby":x,color:"inherit",size:16}),j={...s,edge:r,color:o,disabled:d,disableFocusRipple:c,loading:p,loadingIndicator:v,size:m},C=jye(j);return a.jsxs(Cye,{id:p?x:h,className:Et(C.root,l),centerRipple:!0,focusRipple:!c,disabled:d||p,ref:n,...w,ownerState:j,children:[typeof p=="boolean"&&a.jsx("span",{className:C.loadingWrapper,style:{display:"contents"},children:a.jsx(Sye,{className:C.loadingIndicator,ownerState:j,children:p&&v})}),i]})});function Aye(e){return En("MuiButton",e)}const ud=mn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Tye=g.createContext({}),Eye=g.createContext(void 0),kye=e=>{const{color:t,disableElevation:n,fullWidth:s,size:r,variant:i,loading:l,loadingPosition:o,classes:d}=e,c={root:["root",l&&"loading",i,`${i}${Pa(t)}`,`size${Pa(r)}`,`${i}Size${Pa(r)}`,`color${Pa(t)}`,n&&"disableElevation",s&&"fullWidth",l&&`loadingPosition${Pa(o)}`],startIcon:["icon","startIcon",`iconSize${Pa(r)}`],endIcon:["icon","endIcon",`iconSize${Pa(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},m=Tn(c,Aye,d);return{...d,...m}},mV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Lye=Qt(uV,{shouldForwardProp:e=>kB(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Pa(n.color)}`],t[`size${Pa(n.size)}`],t[`${n.variant}Size${Pa(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(iu(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${ud.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${ud.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${ud.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${ud.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(np()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ud.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ud.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${ud.loading}`]:{color:"transparent"}}}]}})),Pye=Qt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Pa(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...mV]})),Dye=Qt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Pa(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...mV]})),Oye=Qt("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),y$=Qt("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Mye=g.forwardRef(function(t,n){const s=g.useContext(Tye),r=g.useContext(Eye),i=ru(s,t),l=Uc({props:i,name:"MuiButton"}),{children:o,color:d="primary",component:c="button",className:m,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:b=!1,endIcon:w,focusVisibleClassName:x,fullWidth:v=!1,id:j,loading:C=null,loadingIndicator:S,loadingPosition:_="center",size:A="medium",startIcon:T,type:E,variant:D="text",...z}=l,K=Ew(j),B=S??a.jsx(xk,{"aria-labelledby":K,color:"inherit",size:16}),O={...l,color:d,component:c,disabled:h,disableElevation:p,disableFocusRipple:b,fullWidth:v,loading:C,loadingIndicator:B,loadingPosition:_,size:A,type:E,variant:D},L=kye(O),H=(T||C&&_==="start")&&a.jsx(Pye,{className:L.startIcon,ownerState:O,children:T||a.jsx(y$,{className:L.loadingIconPlaceholder,ownerState:O})}),ae=(w||C&&_==="end")&&a.jsx(Dye,{className:L.endIcon,ownerState:O,children:w||a.jsx(y$,{className:L.loadingIconPlaceholder,ownerState:O})}),W=r||"",q=typeof C=="boolean"?a.jsx("span",{className:L.loadingWrapper,style:{display:"contents"},children:C&&a.jsx(Oye,{className:L.loadingIndicator,ownerState:O,children:B})}):null;return a.jsxs(Lye,{ownerState:O,className:Et(s.className,L.root,m,W),component:c,disabled:h||C,focusRipple:!b,focusVisibleClassName:Et(L.focusVisible,x),ref:n,type:E,id:C?K:j,...z,classes:L,children:[H,_!=="end"&&q,o,_==="end"&&q,ae]})}),Iye={baseButton:Mye,baseIconButton:_ye},$ye={},Rye=Ue({},Iye,$ye),zye=g.createContext(null);function Uye(e){const{slots:t,slotProps:n={},defaultSlots:s,children:r}=e,i=g.useMemo(()=>({slots:Ue({},s,t),slotProps:n}),[s,t,n]);return a.jsx(zye.Provider,{value:i,children:r})}const Fye=["children","localeText","plugins","seriesConfig","slots","slotProps"],Bye=e=>{const t=oi({props:e,name:"MuiChartDataProvider"}),{children:n,localeText:s,plugins:r=dV,seriesConfig:i,slots:l,slotProps:o}=t,d=aa(t,Fye),c=xl(),m={plugins:r,seriesConfig:i,pluginParams:Ue({theme:c.palette.mode},d)};return{children:n,localeText:s,chartProviderProps:m,slots:l,slotProps:o}};function Hye(e){const{children:t,localeText:n,chartProviderProps:s,slots:r,slotProps:i}=Bye(e);return a.jsx(Qhe,Ue({},s,{children:a.jsx(mhe,{localeText:n,children:a.jsx(Uye,{slots:r,slotProps:i,defaultSlots:Rye,children:t})})}))}function b$(e){const{isReversed:t,gradientId:n,size:s,direction:r,scale:i,colorMap:l}=e;return s<=0?null:a.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:l.thresholds.map((o,d)=>{const c=i(o);if(c===void 0)return null;const m=t?1-c/s:c/s;return Number.isNaN(m)?null:a.jsxs(g.Fragment,{children:[a.jsx("stop",{offset:m,stopColor:l.colors[d],stopOpacity:1}),a.jsx("stop",{offset:m,stopColor:l.colors[d+1],stopOpacity:1})]},o.toString()+d)})})}const Gye=10;function v$(e){const{gradientUnits:t,isReversed:n,gradientId:s,size:r,direction:i,scale:l,colorScale:o,colorMap:d}=e,c=[d.min??0,d.max??100],m=c.map(l).filter(w=>w!==void 0);if(m.length!==2)return null;const h=typeof c[0]=="number"?sf(c[0],c[1]):Pk(c[0],c[1]),p=Math.round((Math.max(...m)-Math.min(...m))/Gye),b=`${c[0]}-${c[1]}-`;return a.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${n?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(w,x)=>{const v=h(x/p);if(v===void 0)return null;const j=l(v);if(j===void 0)return null;const C=n?1-j/r:j/r,S=o(v);return S===null?null:a.jsx("stop",{offset:C,stopColor:S,stopOpacity:1},b+x)})})}const Vye=10,Wye=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function bS(e){const{isReversed:t,gradientId:n,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],l=typeof i[0]=="number"?sf(i[0],i[1]):Pk(i[0],i[1]),o=Vye,d=`${i[0]}-${i[1]}-`;return a.jsx("linearGradient",Ue({id:n},Wye(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:o+1},(c,m)=>{const h=m/o,p=l(h);if(p===void 0)return null;const b=s(p);return b===null?null:a.jsx("stop",{offset:h,stopColor:b,stopOpacity:1},d+m)})}))}function qye(){const{top:e,height:t,bottom:n,left:s,width:r,right:i}=di(),l=e+t+n,o=s+r+i,d=xL(),c=Wfe(),{xAxis:m,xAxisIds:h}=er(),{yAxis:p,yAxisIds:b}=tr(),{zAxis:w,zAxisIds:x}=hL(),v=b.filter(S=>p[S].colorMap!==void 0),j=h.filter(S=>m[S].colorMap!==void 0),C=x.filter(S=>w[S].colorMap!==void 0);return v.length===0&&j.length===0&&C.length===0?null:a.jsxs("defs",{children:[v.map(S=>{const _=d(S),A=c(S),{colorMap:T,scale:E,colorScale:D,reverse:z}=p[S];return T?.type==="piecewise"?a.jsx(b$,{isReversed:!z,scale:E,colorMap:T,size:l,gradientId:_,direction:"y"},_):T?.type==="continuous"?a.jsxs(g.Fragment,{children:[a.jsx(v$,{isReversed:!z,scale:E,colorScale:D,colorMap:T,size:l,gradientId:_,direction:"y"}),a.jsx(bS,{isReversed:z,colorScale:D,colorMap:T,gradientId:A})]},_):null}),j.map(S=>{const _=d(S),A=c(S),{colorMap:T,scale:E,reverse:D,colorScale:z}=m[S];return T?.type==="piecewise"?a.jsx(b$,{isReversed:D,scale:E,colorMap:T,size:o,gradientId:_,direction:"x"},_):T?.type==="continuous"?a.jsxs(g.Fragment,{children:[a.jsx(v$,{isReversed:D,scale:E,colorScale:z,colorMap:T,size:o,gradientId:_,direction:"x"}),a.jsx(bS,{isReversed:D,colorScale:z,colorMap:T,gradientId:A})]},_):null}),C.map(S=>{const _=c(S),{colorMap:A,colorScale:T}=w[S];return A?.type==="continuous"?a.jsx(bS,{colorScale:T,colorMap:A,gradientId:_},_):null})]})}function Yye(e){return En("MuiChartsSurface",e)}const Kye=()=>Tn({root:["root"]},Yye);mn("MuiChartsSurface",["root"]);const Qye=["children","className","title","desc"],Xye=Qt("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Zye=g.forwardRef(function(t,n){const s=$a(),r=Pt(s,Doe),i=Pt(s,Ooe),l=Pt(s,HB),o=Pt(s,GB),d=Pt(s,yme),c=Pt(s,xme),m=Pt(s,Xue),h=gL(),p=ml(h,n),b=oi({props:t,name:"MuiChartsSurface"}),{children:w,className:x,title:v,desc:j}=b,C=aa(b,Qye),S=Kye(),_=i>0&&r>0;return a.jsxs(Xye,Ue({ownerState:{width:l,height:o,hasZoom:m},viewBox:`0 0 ${r} ${i}`,className:Et(S.root,x),tabIndex:d?0:void 0,"data-has-focused-item":c||void 0},C,{ref:p,children:[v&&a.jsx("title",{children:v}),j&&a.jsx("desc",{children:j}),a.jsx(qye,{}),_&&w]}))}),w$=mn("MuiChartsToolbar",["root"]),Jye=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",ebe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",tbe=(e,t,n)=>e?'"chart"':t==="vertical"?n?.horizontal==="start"?'"legend chart"':'"chart legend"':n?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,abe=(e=!1,t="horizontal",n="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:n==="start"?`auto ${r}`:`${r} auto`},nbe=(e=!1,t="horizontal",n="top")=>t==="vertical"||e?"1fr":n==="bottom"?"1fr auto":"auto 1fr",sbe=Qt("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>jb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const n=abe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=nbe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=tbe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:n,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${w$.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${n.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${w$.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Jye(e.legendPosition),alignItems:ebe(e.legendPosition)}});function rbe(e){const{children:t,sx:n,extendVertically:s}=e,r=lhe(),i=$a(),l=Pt(i,HB),o=Pt(i,GB);return a.jsx(sbe,{ref:r,ownerState:e,sx:n,extendVertically:s??o===void 0,width:l,children:t})}function ibe(){const e=$a(),t=Pt(e,eN),n=Pt(e,tN),s=Pt(e,aN);return g.useMemo(()=>t===void 0||n===void 0||s===void 0?null:{seriesType:t,seriesId:n,dataIndex:s},[t,n,s])}const Ny=6;function lbe(){const e=xl(),t=ibe(),n=hx(),{xAxis:s,xAxisIds:r}=er(),{yAxis:i,yAxisIds:l}=tr();if(t===null||t.seriesType!=="line"||!n)return null;const o=n?.series[t.seriesId],d=o.xAxisId??r[0],c=o.yAxisId??l[0];return a.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[d].scale(s[d].data[t.dataIndex])-Ny,y:i[c].scale(o.stackedData[t.dataIndex][1])-Ny,width:2*Ny,height:2*Ny,rx:3,ry:3})}const ML=g.forwardRef(function(t,n){const s=oi({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:l,clipPathProps:o,clipPathGroupProps:d,areaPlotProps:c,linePlotProps:m,markPlotProps:h,overlayProps:p,chartsAxisProps:b,axisHighlightProps:w,lineHighlightPlotProps:x,legendProps:v,children:j}=nye(s),{chartDataProviderProps:C,chartsSurfaceProps:S}=iye(i,n),_=s.slots?.tooltip??f0e,A=s.slots?.toolbar;return a.jsx(Hye,Ue({},C,{children:a.jsxs(rbe,Ue({},r,{children:[s.showToolbar&&A?a.jsx(A,Ue({},s.slotProps?.toolbar)):null,!s.hideLegend&&a.jsx(_0e,Ue({},v)),a.jsxs(Zye,Ue({},S,{children:[a.jsx(W0e,Ue({},l)),a.jsxs("g",Ue({},d,{children:[a.jsx(dge,Ue({},c)),a.jsx(Nge,Ue({},m)),a.jsx(eye,Ue({},p)),a.jsx(L0e,Ue({},w))]})),a.jsx(lbe,{}),a.jsx(vpe,Ue({},b)),a.jsx("g",{"data-drawing-container":!0,children:a.jsx(Lge,Ue({},h))}),a.jsx(z0e,Ue({},x)),a.jsx(P0e,Ue({},o)),j]})),!s.loading&&a.jsx(_,Ue({},s.slotProps?.tooltip))]}))}))}),obe=e=>a.jsx($t,{...e}),cbe=e=>a.jsx(wu,{...e}),dbe=e=>a.jsx(ZE,{...e}),fV=e=>a.jsx(ds,{...e}),ube=e=>a.jsx(mw,{...e}),mbe=e=>a.jsx(qE,{...e}),fbe=e=>a.jsx(Nt,{...e}),hbe=e=>a.jsx(jt,{...e}),gbe=e=>a.jsx(KE,{...e}),hV=e=>a.jsx(YE,{...e}),gV=e=>a.jsx(ba,{...e}),pV=e=>a.jsx(Ut,{...e}),pbe=e=>a.jsx(Ga,{...e}),xbe=e=>a.jsx(Yt,{...e}),ybe=e=>a.jsx(da,{...e}),bbe=e=>a.jsx(Nr,{...e}),vbe=e=>a.jsx(en,{...e}),wbe=e=>a.jsx(Nt,{...e}),Nbe=e=>a.jsx(js,{...e}),jbe=e=>a.jsx(zc,{...e}),Cbe=e=>a.jsx(Ns,{...e}),xV=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,Sbe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},_be=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Abe=e=>{switch(e){case"call":return{Icon:hbe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:gbe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:fbe,color:"text-blue-500",bgColor:"bg-blue-100"}}},Tbe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Ebe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=bt(),[i,l]=g.useState(!1),o=g.useRef(null),d=[{icon:gV,label:"Account"},{icon:pV,label:"Contact"},{icon:pbe,label:"Leads"},{icon:xbe,label:"Deals"},{icon:ybe,label:"Quotes"},{icon:bbe,label:"Target"},{icon:vbe,label:"Task"},{icon:wbe,label:"Meeting"},{icon:Nbe,label:"Call"},{icon:Cbe,label:"Audit"},{icon:jbe,label:"Territory"}];g.useEffect(()=>{const h=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=h=>{t(h.target.value),l(h.target.value.trim().length>0)},m=h=>{s&&s(h),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(obe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:c,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/admin/accounts");break;case"Contact":r("/admin/contacts");break;case"Leads":r("/admin/leads");break;case"Deals":r("/admin/deals");break;case"Quotes":r("/admin/quotes");break;case"Target":r("/admin/targets");break;case"Task":r("/admin/tasks");break;case"Meeting":r("/admin/meetings");break;case"Call":r("/admin/calls");break;case"Audit":r("/admin/audit");break;case"Territory":r("/admin/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},kbe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=bt(),l=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,w=Math.floor(b/6e4),x=Math.floor(b/36e5),v=Math.floor(b/864e5);return w<1?"Just now":w<60?`${w} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",d=s||n||"System",c=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:c})]})},Lbe=({logs:e,loading:t})=>{const n=bt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(hV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(kbe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},Pbe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),Dbe=({revenueData:e,loading:t})=>{const n=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(s[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const o={};let d=0,c=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const C=v.close_date||v.closeDate||null,S=C&&C!==null&&C!=="",_=v.stage||"",A=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const E=T>0;if(A&&(c++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:C,close_date_type:typeof C,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&A&&E)try{let D=new Date(C);if(isNaN(D.getTime())){const z=String(C).split("T")[0];D=new Date(z+"T00:00:00")}if(isNaN(D.getTime()))console.warn(` Invalid date for deal ${v.id}:`,C,"Type:",typeof C);else{const z=D.getFullYear(),K=D.getMonth()+1,B=`${z}-${String(K).padStart(2,"0")}`;o[B]||(o[B]=0),o[B]+=T,d++,console.log(` Added deal ${v.id} to month ${B}: ${T}, total: ${o[B]}`),console.log(`  - Close date: ${C} -> Parsed: ${D.toISOString()} -> Month: ${B} (Year: ${z}, Month: ${K})`)}}catch(D){console.error("Error parsing deal date:",C,D)}else A&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:C,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:c,validDealsForGraph:d,monthlyRevenue:o});const m=Object.keys(o).map(v=>parseInt(v.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],w=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;b.push(s[v]);const C=o[j]||0;w.push(C),C>0&&console.log(`Month ${s[v]} (${j}): ${C}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=o[S]||0;b.push(`${s[C]} ${j}`),w.push(_),_>0&&console.log(`Month ${s[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...w,1);return console.log("Final chart data:",{labels:b,revenues:w,maxRevenue:x,hasData:w.some(v=>v>0)}),{labels:b,revenues:w,maxRevenue:x}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(hV,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&l&&l.length>0?a.jsx(ML,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Obe=({pipelineData:e,loading:t})=>{const n=bt(),s=l=>{const o=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[o])return d[o];const c=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(o.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%c.length;return{name:l||"Unknown",color:c[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=s(h);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(m=>{const h=m.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(m.amount||0)});const o=Math.max(...Object.values(l).map(m=>m.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],c=[];return d.forEach(m=>{const h=s(m),p=l[m]||{deals:0,value:0};c.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:o>0?p.value/o*100:0})}),c})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/admin/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/admin/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:xV(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},vS=({title:e,items:t,children:n,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},Mbe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=bt(),{text:o,bg:d}=_be(s||"Website"),c=b=>{if(!b)return"Unknown";const w=new Date(b),v=new Date-w,j=Math.floor(v/6e4),C=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:C<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=c(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/admin/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${d} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Ibe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=bt(),c={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:m,bg:h}=Sbe(c),p=parseFloat(t||0),b=l?p>=l?"up":"down":"up",w=b==="up"?ube:mbe,x=b==="up"?"text-green-400":"text-red-400",v=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:c})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:xV(p)}),a.jsx(w,{size:16,className:`${x} mt-1`})]})]})})},$be=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:d})=>{const c=bt(),h=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:w}=Abe(h),{text:x,bg:v}=Tbe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const E=new Date(T),z=E-new Date,K=Math.floor(z/864e5);return K===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",A=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),c(`/admin/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),c(`/admin/meetings/info?id=${l}`)):c("/admin/tasks"):c(h==="call"?`/admin/calls/info?id=${l}`:h==="meeting"?`/admin/meetings/info?id=${l}`:"/admin/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:A,children:[a.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(fV,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(pV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Rbe=()=>{const e=bt(),{user:t}=Xt(),[n,s]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,o]=g.useState([]),[d,c]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[w,x]=g.useState([]),[v,j]=g.useState(!0),[C,S]=g.useState(null),[_,A]=g.useState(""),[T,E]=g.useState([]),[D,z]=g.useState([]),[K,B]=g.useState([]),[O,L]=g.useState(new Date),H=g.useRef(null),ae=g.useRef(null),W=g.useMemo(()=>{try{if(!_.trim())return[];const te=_.toLowerCase().trim(),V=[];return Array.isArray(T)&&T.forEach(ee=>{const me=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),we=(ee.company_name||"").toLowerCase(),ve=(ee.email||"").toLowerCase(),Ae=(ee.phone||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/admin/leads/${ee.id}`})}),Array.isArray(D)&&D.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.account?.name||"").toLowerCase(),ve=(ee.description||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/admin/deals/info?id=${ee.id}`})}),Array.isArray(K)&&K.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.email||"").toLowerCase(),ve=(ee.phone||"").toLowerCase(),Ae=(ee.website||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/admin/accounts"})}),V.slice(0,10)}catch(te){return console.error("Error in search:",te),[]}},[_,T,D,K]),q=te=>{te.route&&(e(te.route),A(""))},le=g.useCallback(async()=>{j(!0),S(null);try{const[te,V,ee,me,we,ve,Ae]=await Promise.all([re.get("/leads/admin/getLeads").catch(M=>(console.error("Error fetching leads:",M),{data:[]})),re.get("/deals/admin/fetch-all").catch(M=>(console.error("Error fetching deals:",M),{data:[]})),re.get("/accounts/admin/fetch-all").catch(M=>(console.error("Error fetching accounts:",M),{data:[]})),re.get("/tasks/all").catch(M=>(console.error("Error fetching tasks:",M),{data:[]})),re.get("/meetings/admin/fetch-all").catch(M=>(console.error("Error fetching meetings:",M),{data:[]})),re.get("/calls/admin/fetch-all").catch(M=>(console.error("Error fetching calls:",M),{data:[]})),re.get("/logs/read-all").catch(M=>(console.error("Error fetching logs:",M),{data:[]}))]),be=Array.isArray(te.data)?te.data:[],Ie=Array.isArray(V.data)?V.data:[],G=Array.isArray(ee.data)?ee.data:[],Ce=Array.isArray(me.data)?me.data:[],ce=Array.isArray(we.data)?we.data:[],F=Array.isArray(ve.data)?ve.data:[],ie=Array.isArray(Ae.data)?Ae.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Ie.length),Ie.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Ie[0],null,2)),console.log("First deal keys:",Object.keys(Ie[0]))),E(be),z(Ie),B(G);const he=be.filter(M=>M.status&&!["Lost","Converted"].includes(M.status)).length,Le=Ce.filter(M=>!M.dueDate||M.status==="Completed"?!1:new Date(M.dueDate)<new Date).length;s({activeLeads:he,totalDeals:Ie.length,activeAccounts:G.length,overdueTasks:Le});const xe=[...be].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);i(xe);const Ve=[...Ie].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);o(Ve);const ke=new Date,ye=[];F.forEach(M=>{const pe=M.due_date||M.call_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||ye.push({type:"Call",title:M.subject||"Untitled Call",assignedTo:M.assigned_to||(M.call_assign_to?`${M.call_assign_to.first_name||""} ${M.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"call",fullData:M})}}),ce.forEach(M=>{const pe=M.dueDate||M.start_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||ye.push({type:"Meeting",title:M.subject||M.activity||"Untitled Meeting",assignedTo:M.assignedTo||(M.meet_assign_to?`${M.meet_assign_to.first_name||""} ${M.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"meeting",fullData:M})}});const Me={HIGH:1,MEDIUM:2,LOW:3},He=ye.sort((M,pe)=>{const se=Me[M.priority]||3,je=Me[pe.priority]||3;if(se!==je)return se-je;const We=new Date(M.scheduledDate||0),Ne=new Date(pe.scheduledDate||0);return We-Ne}).slice(0,5);c(He),h(Ie),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Ie.length);const Be=Ie.filter(M=>(M.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Be.length),Be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Be.forEach((M,pe)=>{let se=M.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${pe+1}:`,{id:M.id,name:M.name,stage:M.stage,stage_upper:(M.stage||"").toUpperCase(),amount:M.amount,amount_parsed:se,amount_type:typeof M.amount,close_date:M.close_date,close_date_type:typeof M.close_date,close_date_value:M.close_date?new Date(M.close_date):null,has_close_date:!!M.close_date,has_amount:se>0,all_keys:Object.keys(M),full_deal:M})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Ie.map(M=>M.stage))),x(Ie);const dt=[...ie].sort((M,pe)=>new Date(pe.timestamp||0)-new Date(M.timestamp||0));b(dt)}catch(te){console.error("Error fetching dashboard data:",te),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("AdminDashboard mounted, fetching data..."),le(),H.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),le(),L(new Date)},3e4),()=>{H.current&&clearInterval(H.current)}),[le]),g.useEffect(()=>{if(!t||!t.id)return;let te=0;const V=3;let ee=null;const me=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ae=`${we}//${ve}/ws/notifications?user_id=${t.id}`;try{const be=new WebSocket(Ae);ae.current=be,be.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),te=0},be.onmessage=Ie=>{try{const G=JSON.parse(Ie.data);console.log(" Real-time notification received:",G),G.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(G.event)&&(console.log(" Refreshing dashboard due to:",G.event),le(),L(new Date))}catch(G){console.error("Error parsing WebSocket message:",G)}},be.onerror=Ie=>{te===0&&console.warn(" WebSocket connection unavailable (this is optional)")},be.onclose=()=>{te<V&&(te++,ee=setTimeout(()=>{t&&t.id&&me()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return me(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[t,le]);const Q=[{icon:gV,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:cbe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:dbe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/admin/accounts")},{icon:fV,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return console.log("AdminDashboard rendering, loading:",v,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&a.jsx(It,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(Ebe,{searchQuery:_,onSearchChange:A,searchResults:W,onSearchResultClick:q}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:Q.map(te=>a.jsx(Pbe,{...te,loading:v},te.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(Lbe,{logs:p,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Dbe,{revenueData:w,loading:v})}),a.jsx("div",{children:a.jsx(Obe,{pipelineData:m,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(vS,{title:"Latest Leads",children:r.length>0?r.map((te,V)=>a.jsx(Mbe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(vS,{title:"Latest Deals",children:v?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((te,V)=>a.jsx(Ibe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(vS,{title:"Upcoming Activities",children:d.length>0?d.map((te,V)=>a.jsx($be,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function Vt({totalItems:e=0,pageSize:t=10,currentPage:n=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:l=[10,20,30,40,50],className:o="",label:d="records"}){const c=e===0?1:Math.ceil(e/t),m=e===0?0:(n-1)*t+1,h=Math.min(n*t,e),p=n<=1||e===0,b=n>=c||e===0,w="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",x="bg-black text-white hover:bg-gray-900",v="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return a.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${o}`,children:[a.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:m,"-",h," of ",e," ",d]}),i&&a.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),a.jsx("select",{value:t,onChange:j=>i(Number(j.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:l.map(j=>a.jsx("option",{value:j,children:j},j))})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[a.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${w} ${p?v:x}`,children:[a.jsx(jne,{className:"text-base"}),"Prev"]}),a.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:n," of"," ",e===0?0:c]}),a.jsxs("button",{type:"button",onClick:r,disabled:b,className:`${w} ${b?v:x}`,children:["Next",a.jsx(Tt,{className:"text-base"})]})]})]})}const wS=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],NS={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Hs=e=>e?e.toUpperCase():"",jS=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",zbe=e=>{switch(Hs(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Ube=e=>{switch(Hs(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function Fbe(){const e=bt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(null),[c,m]=g.useState(null),[h,p]=g.useState(NS),[b,w]=g.useState(null),[x,v]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[A,T]=g.useState(null),[E,D]=g.useState([]),[z,K]=g.useState([]),[B,O]=g.useState("Filter by Status"),[L,H]=g.useState(""),[ae,W]=g.useState(null),[q,le]=g.useState(!1),[Q,te]=g.useState(1),[V,ee]=g.useState(10),[me,we]=g.useState("Overview"),[ve,Ae]=g.useState(""),[be,Ie]=g.useState(!1),[G,Ce]=g.useState([]),[ce,F]=g.useState({}),[ie,he]=g.useState(null),Le=g.useCallback(async(_e=null)=>{C(!0);try{const gt=await re.get("/accounts/admin/fetch-all"),sa=[...Array.isArray(gt.data)?gt.data:[]].sort((Ja,rr)=>{const ts=Ja?.created_at||Ja?.updated_at||0,ir=rr?.created_at||rr?.updated_at||0;return new Date(ir)-new Date(ts)});if(v(sa),console.log("Fetch from backend: ",gt.data),_e){const Ja=sa.find(rr=>rr.id===_e);w(Ja||null)}}catch(gt){console.error(gt),v([]),gt.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[w]),xe=g.useCallback(async()=>{try{const _e=await re.get("/users/all");_(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Ve=g.useCallback(async()=>{try{const _e=await re.get("/territories/fetch");D(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&Y.warn("Unable to load territories (permission denied).")}},[]),ke=g.useCallback(async()=>{try{const _e=await re.get("/accounts/admin/parent-companies");K(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e),_e.response?.status===403&&Y.warn("Unable to load parent companies (permission denied).")}},[]),ye=g.useCallback(async _e=>{try{const gt=await re.get(`/activities/accounts/${_e}`);console.log("Related activities: ",gt.data),F(gt.data&&typeof gt.data=="object"?gt.data:{})}catch(gt){console.error(gt),gt.response?.status===404&&(console.warn("No activities found for this account."),F({}))}},[]);g.useEffect(()=>{Le(),xe(),Ve(),ke()},[Le,xe,Ve,ke]),g.useEffect(()=>{te(1)},[L,B,V]);const Me=g.useMemo(()=>{const _e=L.toLowerCase(),gt=B;return x.filter(Wt=>{const sa=Wt.name?.toLowerCase().includes(_e)||Wt.website?.toLowerCase().includes(_e)||Wt.phone_number?.toLowerCase().includes(_e)||Wt.industry?.toLowerCase().includes(_e)||Wt.parent_company?.toLowerCase().includes(_e)||Wt.territory?.name?.toLowerCase().includes(_e),Ja=gt==="Filter by Status"||Hs(Wt.status)===Hs(gt);return sa&&Ja})},[x,L,B]),He=Math.max(1,Math.ceil(Me.length/V)||1);g.useEffect(()=>{te(_e=>{const gt=Math.max(1,Math.ceil(Me.length/V)||1);return _e>gt?gt:_e})},[Me.length,V]);const Be=g.useMemo(()=>{const _e=(Q-1)*V;return Me.slice(_e,_e+V)},[Me,Q,V]),dt=_e=>{if(_e.target.checked){const gt=Be.map(Wt=>Wt.id);Ce(gt)}else Ce([])},M=_e=>{Ce(gt=>gt.includes(_e)?gt.filter(Wt=>Wt!==_e):[...gt,_e])},pe=async()=>{G.length!==0&&W({title:"Bulk Delete Accounts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:G.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Accounts`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:G}})};Me.length===0||(Q-1)*V+1,Math.min(Q*V,Me.length);const se=()=>te(_e=>Math.max(_e-1,1)),je=()=>te(_e=>Math.min(_e+1,He));g.useEffect(()=>{b&&Ae(Hs(b.status)||"PROSPECT")},[b]);const We=x.length,Ne=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="customer").length,[x]),qe=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="prospect").length,[x]),De=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="partner").length,[x]),Je=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="active").length,[x]),at=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="inactive").length,[x]),ot=g.useMemo(()=>x.filter(_e=>_e.status?.toLowerCase()==="former").length,[x]),R=g.useMemo(()=>[{title:"Total",value:We,icon:ba,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ne,icon:dl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:qe,icon:Ga,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:De,icon:Ut,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Je,icon:dl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:at,icon:ul,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ot,icon:ul,color:"text-orange-600",bgColor:"bg-orange-100"}],[We,Ne,qe,De,Je,at,ot]),$=_e=>{w(_e),we("Overview"),Ae(Hs(_e?.status)||"PROSPECT")},I=()=>w(null),U=_e=>{_e.target.id==="accountModalBackdrop"&&!q&&I()},de=()=>{n(!1),r(!1),m(null),p(NS),l(!1),T(null)},ge=_e=>{_e.target.id==="modalBackdrop"&&de()},ue=_e=>_e?new Date(_e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Se=_e=>{const{name:gt,value:Wt}=_e.target;p(sa=>({...sa,[gt]:Wt}))},Fe=()=>{p(NS),r(!1),m(null),n(!0)},ft=_e=>{w(null),console.log("edit: ",_e),_e.assigned_accs?T(_e.assigned_accs):T(null),p({name:_e.name||"",website:_e.website||"",phone_number:_e.phone_number||"",billing_address:_e.billing_address||"",shipping_address:_e.shipping_address||"",industry:_e.industry||"",status:Hs(_e.status)||"PROSPECT",territory_id:_e.territory?.id?String(_e.territory.id):"",assigned_to:_e.assigned_accs?.id?String(_e.assigned_accs.id):""}),r(!0),m(_e.id),n(!0)},vt=_e=>{_e&&W({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:_e.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:_e.id,name:_e.name}})},ze=async()=>{if(!ae?.action){W(null);return}const{action:_e}=ae,{type:gt,payload:Wt,targetId:sa,name:Ja,accountIds:rr}=_e;le(!0);try{if(gt==="create"){l(!0);const ts=await re.post("/accounts/admin",Wt);ke(),Y.success(`Account "${Ja}" created successfully.`);const ir=b?.id||null;de(),await Le(ir),!b&&ts.data?.id}else if(gt==="update"){if(!sa)throw new Error("Missing account identifier for update.");l(!0),await re.put(`/accounts/admin/${sa}`,Wt),Y.success(`Account "${Ja}" updated successfully.`);const ts=b?.id&&b.id===sa?sa:null;de(),await Le(ts),b?.id===sa&&w(null)}else if(gt==="delete"){if(!sa)throw new Error("Missing account identifier for deletion.");const ts=b?.id;d(sa),await re.delete(`/accounts/admin/${sa}`),Y.success(`Account "${Ja}" deleted successfully.`),await Le(ts&&ts!==sa?ts:null),ts===sa&&w(null)}else gt==="bulk-delete"&&(await re.delete("/accounts/admin/bulk-delete",{data:{account_ids:rr}}),Y.success(`Successfully deleted ${rr.length} accounts`),Ce([]),await Le())}catch(ts){console.error(ts);const ir=gt==="create"?"Failed to create account. Please review the details and try again.":gt==="update"?"Failed to update account. Please review the details and try again.":gt==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ro=ts.response?.data?.detail||ir;Y.error(Ro),(gt==="create"||gt==="update")&&l(!1),gt==="delete"&&d(null)}finally{(gt==="create"||gt==="update")&&l(!1),gt==="delete"&&d(null),le(!1),W(null)}},yt=()=>{q||W(null)},Te=async()=>{if(!b||!ve)return;const _e=Hs(ve),gt=Hs(b.status);if(_e!==gt){Ie(!0);try{await re.put(`/accounts/admin/${b.id}`,{status:_e}),Y.success(`Account status updated to ${jS(_e)}`),v(Wt=>Wt.map(sa=>sa.id===b.id?{...sa,status:_e}:sa)),w(null)}catch(Wt){console.error(Wt);const sa=Wt.response?.data?.detail||"Failed to update account status. Please try again.";Y.error(sa)}finally{Ie(!1)}}},[st,X]=g.useState(!1),Ee=_e=>{_e.preventDefault(),X(!0);const gt=h.name.trim();if(!gt){Y.error("Account name is required.");return}if(!h.assigned_to){Y.error("Assigned To is required.");return}const sa={name:gt,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},Ja=s&&c?"update":"create";W({title:Ja==="create"?"Confirm New Account":"Confirm Update",message:Ja==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:gt}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:gt}),"?"]}),confirmLabel:Ja==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ja,payload:sa,targetId:c||null,name:gt}})},$e=[{label:"Filter by Status",value:"Filter by Status"},...wS.map(_e=>({label:_e.label,value:_e.value}))],Ye=ae?.action?.type==="delete"?ae.action.targetId:null,J=b&&(o===b.id||Ye===b.id),ne=b&&o===b.id,oe=b?zbe(b.status):"",Oe=b?a.jsx("div",{id:"accountModalBackdrop",onClick:U,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:_e=>_e.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:I,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${oe}`,children:jS(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ft(b),disabled:ae?.action?.type==="update"&&ae.action.targetId===b.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>vt(b),disabled:!!J,children:ne?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(_e=>a.jsx("button",{onClick:()=>we(_e),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${me===_e?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_e},_e))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:b.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:ue(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:ue(b.updated_at)||"N/A"})]})]})}),me==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),me==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[ce.tasks&&ce.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ce.tasks.length,")"]})]}),ie==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.tasks.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_e.subject||_e.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:_e.description||"No description"}),_e.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",_e.assigned_to.first_name," ",_e.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.due_date||_e.created_at)})]},`task-${gt}`))})]}),ce.meetings&&ce.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ce.meetings.length,")"]})]}),ie==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.meetings.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_e.subject||_e.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:_e.description||_e.location||"No description"}),_e.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",_e.host.first_name," ",_e.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.start_time||_e.created_at)})]},`meeting-${gt}`))})]}),ce.calls&&ce.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ce.calls.length,")"]})]}),ie==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.calls.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:_e.subject||_e.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:_e.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.call_time||_e.created_at)})]},`call-${gt}`))})]}),ce.contacts&&ce.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ce.contacts.length,")"]})]}),ie==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.contacts.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[_e.first_name?`${_e.first_name} `:"",_e.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_e.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.created_at)})]},`contact-${gt}`))})]}),ce.deals&&ce.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ce.deals.length,")"]})]}),ie==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.deals.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[_e.deal_id?_e.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",_e.name||_e.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:_e.stage||_e.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.close_date||_e.created_at)})]},`deal-${gt}`))})]}),ce.quotes&&ce.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>he(ie==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ce.quotes.length,")"]})]}),ie==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ie==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ce.quotes.map((_e,gt)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(_e.quote_id?_e.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_e.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue(_e.presented_date)||""})]},`quote-${gt}`))})]}),(!ce||(!ce.tasks||ce.tasks.length===0)&&(!ce.meetings||ce.meetings.length===0)&&(!ce.calls||ce.calls.length===0)&&(!ce.quotes||ce.quotes.length===0)&&(!ce.deals||ce.deals.length===0)&&(!ce.contacts||ce.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assigned_to:b.assigned_accs?.id?String(b.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assigned_to:b.assigned_accs?.id?String(b.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assigned_to:b.assigned_accs?.id?String(b.assigned_accs.id):"",priority:"MEDIUM",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||Hs(b?.status)||"PROSPECT",onChange:_e=>Ae(_e.target.value),children:wS.map(_e=>a.jsx("option",{value:_e.value,children:_e.label},_e.value))}),a.jsx("button",{onClick:Te,disabled:be||!ve||Hs(ve)===Hs(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${be||!ve||Hs(ve)===Hs(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:be?"Updating...":"Update"})]})]})]})]})]})}):null,et=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(It,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Fe(),X(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:R.map(_e=>a.jsx(Bbe,{..._e},_e.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:L,onChange:_e=>H(_e.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:_e=>O(_e.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:$e.map(_e=>a.jsx("option",{value:_e.value,children:_e.label},_e.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Be.length>0&&Be.every(_e=>G.includes(_e.id)),onChange:dt,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:G.length>0?a.jsx("button",{onClick:pe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected items`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Me.length>0?Be.map(_e=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{$(_e),ye(_e.id)},children:[a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("input",{type:"checkbox",checked:G.includes(_e.id),onChange:()=>M(_e.id),onClick:gt=>gt.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:_e.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:_e.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Ube(_e.status)}`,children:jS(_e.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:_e.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:_e.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:_e.phone_number||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},_e.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Me.length,pageSize:V,currentPage:Q,onPrev:se,onNext:je,onPageSizeChange:_e=>{ee(_e),te(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),nt=t?a.jsx("div",{id:"modalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:_e=>_e.stopPropagation(),children:[a.jsx("button",{onClick:()=>{de(),X(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||q,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ee,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(_m,{label:"Name",name:"name",value:h.name,onChange:Se,placeholder:"Company name",required:!0,isSubmitted:st})}),a.jsx(j$,{label:"Parent Company",value:h.parent_company,onChange:_e=>{p(gt=>({...gt,parent_company:_e}))},items:z.map(_e=>({id:_e,name:_e})),getLabel:_e=>_e?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(_m,{label:"Website",name:"website",value:h.website,onChange:Se,placeholder:"https://example.com",disabled:i}),a.jsx(_m,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:Se,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(_m,{label:"Industry",name:"industry",value:h.industry,onChange:Se,placeholder:"Industry",disabled:i}),a.jsx(_m,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:Se,placeholder:"Billing address",disabled:i}),a.jsx(_m,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:Se,placeholder:"Shipping address",disabled:i}),a.jsx(N$,{label:"Status",name:"status",value:h.status,onChange:Se,options:[{value:"",label:"Select status"},...wS],required:!0,disabled:i}),a.jsx(j$,{label:"Assigned To",value:h.assigned_to,onChange:_e=>{const gt=S.find(sa=>String(sa.id)===String(_e));T(gt);let Wt=null;gt&&gt.assigned_territory&&gt.assigned_territory.length===1&&(Wt=gt.assigned_territory[0].id),p(sa=>({...sa,assigned_to:_e,territory_id:Wt}))},items:S||[],getLabel:_e=>`${_e?.first_name??""} ${_e?.last_name??""} (${_e?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:st,disabled:i||S.length===0}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(N$,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:Se,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(_e=>({value:String(_e.id),label:_e.name}))||[]],disabled:i||!A||!A.assigned_territory||A.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{de(),X(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||q,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,ht=ae?a.jsx(Gbe,{open:!0,title:ae.title,message:ae.message,confirmLabel:ae.confirmLabel,cancelLabel:ae.cancelLabel,variant:ae.variant,onConfirm:ze,onCancel:yt,loading:q}):null;return a.jsxs(a.Fragment,{children:[et,Oe,nt,ht]})}function Bbe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function _m({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function N$({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function j$({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1,allowFreeText:m=!1}){const h=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Hbe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:h,allowFreeText:m})]})}function Hbe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),w=e.find(j=>String(j.id)===String(t)),x=w?s(w):t,v=g.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const j=C=>{b.current&&!b.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:x,placeholder:r,onFocus:()=>!i&&m(!0),onChange:j=>{p(j.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[d&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),m(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const C=String(j.id),S=s(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):!d||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function Gbe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function yx(e){return Ct({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const CS={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Am=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Gi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Vbe(){const e=bt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState(null),[h,p]=g.useState(!1),[b,w]=g.useState(!1),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[A,T]=g.useState(null),[E,D]=g.useState(CS),[z,K]=g.useState(""),[B,O]=g.useState("Filter by Accounts"),[L,H]=g.useState(null),[ae,W]=g.useState("Overview"),[q,le]=g.useState(1),[Q,te]=g.useState(10),[V,ee]=g.useState({}),[me,we]=g.useState(null),[ve,Ae]=g.useState([]),be=g.useCallback(async(ue=null)=>{r(!0);try{const Se=await re.get("/contacts/admin/fetch-all"),ft=[...Array.isArray(Se.data)?Se.data:[]].sort((vt,ze)=>{const yt=vt?.created_at||vt?.updated_at||0,Te=ze?.created_at||ze?.updated_at||0;return new Date(Te)-new Date(yt)});if(n(ft),ue){const vt=ft.find(ze=>ze.id===ue);m(vt||null)}}catch(Se){console.error(Se),n([]),Se.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch contacts. Please try again later.")}finally{r(!1)}},[m]),Ie=g.useCallback(async()=>{try{const ue=await re.get("/accounts/admin/fetch-all"),Fe=[...Array.isArray(ue.data)?ue.data:[]].sort((ft,vt)=>(ft?.name||"").localeCompare(vt?.name||""));l(Fe)}catch(ue){console.error(ue),l([]),ue.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),G=g.useCallback(async()=>{try{const ue=await re.get("/users/all"),Fe=[...Array.isArray(ue.data)?ue.data:[]].sort((ft,vt)=>Am(ft).localeCompare(Am(vt)));d(Fe)}catch(ue){console.error(ue),d([]),ue.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Ce=g.useCallback(async ue=>{try{const Se=await re.get(`/activities/contact/${ue}`);ee(Se.data&&typeof Se.data=="object"?Se.data:{})}catch(Se){console.error(Se),Se.response?.status===404&&(console.warn("No activities found for this account."),ee({}))}},[]);g.useEffect(()=>{be(),Ie(),G()},[be,Ie,G]);const ce=g.useMemo(()=>{const ue=new Map;i.forEach(Fe=>{Fe?.id&&Fe?.name&&ue.set(String(Fe.id),Fe.name)}),t.forEach(Fe=>{Fe?.account_id&&Fe?.account?.name&&ue.set(String(Fe.account_id),Fe.account.name)});const Se=Array.from(ue.entries()).sort((Fe,ft)=>Fe[1].localeCompare(ft[1])).map(([Fe,ft])=>({value:Fe,label:ft}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Se]},[i,t]),F=g.useMemo(()=>{const ue=z.trim().toLowerCase(),Se=B.trim();return t.filter(Fe=>{const ft=[Fe?.first_name,Fe?.last_name,Fe?.email,Fe?.title,Fe?.department,Fe?.account?.name,Fe?.account?.status,Fe?.work_phone,Fe?.mobile_phone_1,Fe?.mobile_phone_2,Fe?.assigned_contact?.first_name,Fe?.assigned_contact?.last_name,Fe?.contact_creator?.first_name,Fe?.contact_creator?.last_name,Fe?.notes,Gi(Fe?.created_at),Gi(Fe?.updated_at)],vt=ue===""||ft.some(yt=>yt==null?!1:yt.toString().toLowerCase().includes(ue)),ze=Se==="Filter by Accounts"||String(Fe.account_id)===Se;return vt&&ze})},[t,z,B]),ie=Math.max(1,Math.ceil(F.length/Q)||1);g.useEffect(()=>{le(1)},[z,B,Q]),g.useEffect(()=>{le(ue=>{const Se=Math.max(1,Math.ceil(F.length/Q)||1);return ue>Se?Se:ue})},[F.length,Q]);const he=g.useMemo(()=>{const ue=(q-1)*Q;return F.slice(ue,ue+Q)},[F,q,Q]),Le=()=>le(ue=>Math.max(ue-1,1)),xe=()=>le(ue=>Math.min(ue+1,ie)),Ve=ue=>{if(ue.target.checked){const Se=he.map(Fe=>Fe.id);Ae(Se)}else Ae([])},ke=ue=>{Ae(Se=>Se.includes(ue)?Se.filter(Fe=>Fe!==ue):[...Se,ue])},ye=async()=>{ve.length!==0&&C({title:"Bulk Delete Contacts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:ve.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${ve.length} Contacts`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:ve}})},Me=g.useCallback(()=>{p(!1),w(!1),T(null),D(CS),v(!1),je(!1)},[]),He=ue=>{ue.target.id==="modalBackdrop"&&!x&&!S&&Me()},Be=ue=>{const{name:Se,value:Fe}=ue.target;D(ft=>({...ft,[Se]:Fe}))},dt=()=>{D(CS),w(!1),T(null),p(!0)},M=ue=>{ue&&(D({first_name:ue.first_name||"",last_name:ue.last_name||"",account_id:ue.account_id?String(ue.account_id):"",title:ue.title||"",department:ue.department||"",email:ue.email||"",work_phone:ue.work_phone||"",mobile_phone_1:ue.mobile_phone_1||"",mobile_phone_2:ue.mobile_phone_2||"",notes:ue.notes||"",assigned_to:ue.assigned_to?String(ue.assigned_to):""}),w(!0),T(ue.id),p(!0),m(null))},pe=ue=>{if(!ue)return;const Se=Am(ue)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Se}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:Se}})},[se,je]=g.useState(!1),We=ue=>{ue.preventDefault(),je(!0);const Se=E.first_name.trim(),Fe=E.last_name.trim();if(!Se||!Fe){Y.error("First name and last name are required.");return}if(!E.account_id){Y.error("Account is required.");return}if(!E.assigned_to){Y.error("Assigned To is required.");return}const vt=E.email?.trim();if(!vt){Y.error("Email is required.");return}if(!vt.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(vt)){Y.error("Please enter a valid email address.");return}if((vt.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}const st={first_name:Se,last_name:Fe,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},X=b&&A?"update":"create",Ee=`${Se} ${Fe}`.trim();C({title:X==="create"?"Confirm New Contact":"Confirm Update",message:X==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:Ee})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Ee}),"?"]}),confirmLabel:X==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:X,payload:st,targetId:A||null,name:Ee}})},Ne=async()=>{if(!j?.action){C(null);return}const{action:ue}=j,{type:Se,payload:Fe,targetId:ft,name:vt}=ue;_(!0);try{if(Se==="create"){v(!0),await re.post("/contacts/admin",Fe),Y.success(`Contact "${vt}" created successfully.`);const ze=c?.id||null;Me(),await be(ze)}else if(Se==="update"){if(!ft)throw new Error("Missing contact identifier for update.");v(!0),await re.put(`/contacts/admin/${ft}`,Fe),Y.success(`Contact "${vt}" updated successfully.`);const ze=c?.id&&c.id===ft?ft:c?.id||null;Me(),await be(ze),c?.id===ft&&m(null)}else if(Se==="delete"){if(!ft)throw new Error("Missing contact identifier for deletion.");const ze=c?.id;H(ft),await re.delete(`/contacts/admin/${ft}`),Y.success(`Contact "${vt}" deleted successfully.`),await be(ze&&ze!==ft?ze:null),ze===ft&&m(null)}else if(Se==="bulk-delete"){const ze=ue.contact_ids;await re.delete("/contacts/admin/bulk-delete",{data:{contact_ids:ze}}),Y.success(`Successfully deleted ${ze.length} contacts`),Ae([]),await be()}}catch(ze){console.error(ze);const yt=Se==="create"?"Failed to create contact. Please review the details and try again.":Se==="update"?"Failed to update contact. Please review the details and try again.":Se==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",Te=ze.response?.data?.detail||yt;Y.error(Te)}finally{(Se==="create"||Se==="update")&&v(!1),Se==="delete"&&H(null),_(!1),C(null)}},qe=()=>{S||C(null)},De=ue=>{m(ue),W("Overview")},Je=()=>m(null),at=ue=>{ue.target.id==="contactModalBackdrop"&&!S&&Je()},ot=j?.action?.type==="delete"?j.action.targetId:null,R=c&&(L===c.id||ot===c.id),$=c&&L===c.id,I=c?a.jsx("div",{id:"contactModalBackdrop",onClick:at,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ue=>ue.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:Je,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Am(c)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>M(c),disabled:S||j?.action?.type==="update"&&j.action.targetId===c.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>pe(c),disabled:!!R,children:$?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:c.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(ue=>a.jsx("button",{onClick:()=>W(ue),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===ue?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ue},ue))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Am(c)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email?a.jsx("a",{href:`mailto:${c.email}`,className:"text-blue-600 hover:underline break-all",children:c.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_contact?`${c.assigned_contact.first_name} ${c.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.contact_creator?`${c.contact_creator.first_name} ${c.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Gi(c.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Gi(c.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[V.tasks&&V.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(me==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",V.tasks.length,")"]})]}),me==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),me==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:V.tasks.map((ue,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.description||"No description"}),ue.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",ue.assigned_to.first_name," ",ue.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(ue.due_date||ue.created_at)})]},`task-${Se}`))})]}),V.meetings&&V.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(me==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",V.meetings.length,")"]})]}),me==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),me==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:V.meetings.map((ue,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.description||ue.location||"No description"}),ue.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",ue.host.first_name," ",ue.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(ue.start_time||ue.created_at)})]},`meeting-${Se}`))})]}),V.calls&&V.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(me==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",V.calls.length,")"]})]}),me==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),me==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:V.calls.map((ue,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:ue.subject||ue.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:ue.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(ue.call_time||ue.created_at)})]},`call-${Se}`))})]}),V.deals&&V.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(me==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",V.deals.length,")"]})]}),me==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),me==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:V.deals.map((ue,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[ue.deal_id?ue.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",ue.name||ue.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:ue.stage||ue.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(ue.close_date||ue.created_at)})]},`deal-${Se}`))})]}),V.quotes&&V.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>we(me==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",V.quotes.length,")"]})]}),me==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),me==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:V.quotes.map((ue,Se)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(ue.quote_id?ue.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ue.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Gi(ue.presented_date)||""})]},`quote-${Se}`))})]}),(!V||(!V.tasks||V.tasks.length===0)&&(!V.meetings||V.meetings.length===0)&&(!V.calls||V.calls.length===0)&&(!V.quotes||V.quotes.length===0)&&(!V.deals||V.deals.length===0)&&(!V.contacts||V.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const ue=encodeURIComponent(c.email),Se=encodeURIComponent(""),Fe=encodeURIComponent(""),ft=`mailto:${ue}?subject=${Se}&body=${Fe}`;window.location.href=ft},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,U=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{dt(),je(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:ue=>K(ue.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:ue=>O(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ce.map(ue=>a.jsx("option",{value:ue.value,children:ue.label},ue.value??ue.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:he.length>0&&ve.length===he.length,onChange:Ve})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:ve.length>0?a.jsx("button",{onClick:ye,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ve.length} selected items`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):F.length>0?he.map(ue=>{const Se=[{Icon:Ha,value:ue.email,key:"email"},{Icon:jt,value:ue.work_phone,key:"work_phone"},{Icon:Lc,value:ue.mobile_phone_1,key:"mobile_phone_1"},{Icon:Lc,value:ue.mobile_phone_2,key:"mobile_phone_2"}].filter(Fe=>!!Fe.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:Fe=>{Fe.target.closest('input[type="checkbox"]')||Fe.target.closest("button")||(De(ue),Ce(ue.id))},children:[a.jsx("td",{className:"py-3 px-4 text-center align-top",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:ve.includes(ue.id),onChange:()=>ke(ue.id)})}),a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Am(ue)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:ue.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(yx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:ue.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:Se.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:Se.map(({Icon:Fe,value:ft,key:vt})=>{const ze=pt.createElement(Fe,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ze,a.jsx("span",{children:ft})]},vt)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Yt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:ue.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Ut,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:ue.assigned_contact?`${ue.assigned_contact.first_name} ${ue.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Nt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Gi(ue.created_at)||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top"})]},ue.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:F.length,pageSize:Q,currentPage:q,onPrev:Le,onNext:xe,onPageSizeChange:ue=>{te(ue),le(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),de=h?a.jsx("div",{id:"modalBackdrop",onClick:He,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Me(),je(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:We,noValidate:!0,children:[a.jsx(cc,{label:"First Name",name:"first_name",value:E.first_name,onChange:Be,placeholder:"First name",required:!0,isSubmitted:se}),a.jsx(cc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:Be,placeholder:"Last name",required:!0,isSubmitted:se}),a.jsx(C$,{label:"Account",value:E.account_id,onChange:ue=>D(Se=>({...Se,account_id:ue})),items:i||[],getLabel:ue=>ue?.name??"",placeholder:"Search account...",required:!0,isSubmitted:se,disabled:x||i.length===0}),a.jsx(C$,{label:"Assigned To",value:E.assigned_to,onChange:ue=>D(Se=>({...Se,assigned_to:ue})),items:o||[],getLabel:ue=>`${ue?.first_name??""} ${ue?.last_name??""} (${ue?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:se,disabled:x||o.length===0}),a.jsx(cc,{label:"Title",name:"title",value:E.title,onChange:Be,placeholder:"Job title",disabled:x}),a.jsx(cc,{label:"Department",name:"department",value:E.department,onChange:Be,placeholder:"Department",disabled:x}),a.jsx(cc,{label:"Email",name:"email",type:"email",value:E.email,onChange:Be,placeholder:"example@email.com",required:!0,isSubmitted:se}),a.jsx(cc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:Be,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(cc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Be,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(cc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Be,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(qbe,{label:"Notes",name:"notes",value:E.notes,onChange:Be,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Me(),je(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,ge=j?a.jsx(Ybe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:Ne,onCancel:qe,loading:S}):null;return a.jsxs(a.Fragment,{children:[U,I,de,ge]})}function cc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:d=!1,className:c=""}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function C$({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(Wbe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function Wbe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function qbe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Ybe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const SS=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function yV({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=bt(),{leadID:d}=Co(),[c,m]=g.useState(e||null),[h,p]=g.useState("Overview"),[b,w]=g.useState(""),x=c?.status?.toUpperCase()==="QUALIFIED",[v,j]=g.useState(null),[C,S]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,A]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),D=async()=>{try{if(e){m(e),w(e.status||"New");return}if(!d)return;const L=await re.get(`/leads/get/${d}`);m(L.data),w(L.data.status||"New"),S({name:L.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:L.data.territory?.id||null,assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),A({last_name:L.data.last_name||"",first_name:L.data.first_name||"",account_id:null,title:L.data.title||"",department:L.data.department||"",email:L.data.email||"",work_phone:L.data.work_phone||"",mobile_phone_1:L.data.mobile_phone_1||"",mobile_phone_2:L.data.mobile_phone_2||"",notes:"",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null})}catch(L){console.error(L)}};g.useEffect(()=>{e?(m(e),w(e.status||"New")):d&&D()},[d,e]);const z=async()=>{try{if(b==="Converted"&&c?.status?.toUpperCase()!=="QUALIFIED"){Y.error("Lead must be Qualified before it can be converted.");return}const L=await re.put(`/leads/${c.id}/update/status`,{status:b});Y.success("Lead status updated successfully");const H={...c,status:L.data.status};m(H),i&&i(H),n&&n(),t&&t()}catch(L){console.error(L),Y.error("Failed to update lead status")}},K=async L=>{const H={...C,assigned_to:L.assigned_to?.id,billing_address:L.address,shipping_address:L.address,created_by:L.creator?.id,industry:null,name:L.company_name,phone_number:L.work_phone,status:"Prospect",territory_id:L.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",L);try{const W=(await re.post("/accounts/convertedLead",H)).data.id,q={..._,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,department:L.department,email:L.email,first_name:L.first_name,last_name:L.last_name,mobile_phone_1:L.mobile_phone_1,mobile_phone_2:L.mobile_phone_2,notes:L.notes,title:L.title,work_phone:L.work_phone},Q=(await re.post("/contacts/convertedLead",q)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},V=T.amount&&T.amount!==""?parseFloat(T.amount):0,ee={...T,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,primary_contact_id:Q,probability:te(),stage:"Prospecting"},me=await re.post("/deals/convertedLead",ee),we=await re.put(`/leads/convert/${L.id}`);i&&i(null),n(),Y.success("Lead converted successfully!"),t()}catch(ae){console.error("Error during conversion:",ae);const W=ae.response?.data?.detail||ae.message||"Failed to convert lead. Please try again.";Y.error(W)}},B=L=>{switch((L||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=L=>L.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(c.status)}`,children:O(c.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>K(c),disabled:!x,title:x?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${x?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(L=>a.jsx("button",{onClick:()=>p(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),h==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),h==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:SS(L.due_date||L.created_at)})]},`task-${H}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:SS(L.start_time||L.created_at)})]},`meeting-${H}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:SS(L.call_time||L.created_at)})]},`call-${H}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{c&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:c.title?`Call regarding ${c.title}`:`Call with ${c.first_name} ${c.last_name}`,relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const L=encodeURIComponent(c.email),H=encodeURIComponent(""),ae=encodeURIComponent(""),W=`mailto:${L}?subject=${H}&body=${ae}`;window.location.href=W},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{c&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:c.title?`Meeting regarding ${c.title}`:`Meeting with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{c&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:c.title?`Follow up on ${c.title}`:`Follow up with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:b,onChange:L=>w(L.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),c?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:z,disabled:b===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${b===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Kbe=Lf.all(),_S=Kbe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Qbe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Xbe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},AS={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Zbe(){const e=bt(),{leadID:t}=Co();Ss();const[n,s]=g.useState(null),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState(""),[_,A]=g.useState(1),[T,E]=g.useState(10),[D,z]=g.useState(AS),[K,B]=g.useState(!1),[O,L]=g.useState(null),[H,ae]=g.useState(!1),[W,q]=g.useState(null),[le,Q]=g.useState(!1),[te,V]=g.useState([]),[ee,me]=g.useState({});g.useRef(null);const[we,ve]=g.useState(!1),[Ae,be]=g.useState(null),[Ie,G]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Ce,ce]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[F,ie]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const he=async()=>{try{const ze=await re.get("/leads/getUsers");o(ze.data)}catch(ze){console.error(`Error fetching users: ${ze}`)}},Le=async()=>{b(!0);try{const ze=await re.get("/leads/admin/getLeads");h(ze.data),console.log(ze.data)}catch(ze){console.error(`Error fetching leads: ${ze}`)}finally{b(!1)}};g.useEffect(()=>{he(),Le()},[]),g.useEffect(()=>{if(t&&m.length>0&&!r&&!K){const ze=m.find(yt=>yt.id===Number(t));ze&&s(ze)}else!t&&!n&&s(null)},[t,m,r,K]),g.useEffect(()=>{if(Ae){const yt=(X=>{if(!X)return{code:"+63",number:""};const Ee=X.match(/^(\+\d+)\s(.+)$/);if(Ee)return{code:Ee[1],number:Ee[2]};if(X.startsWith("+")){const $e=X.match(/^(\+\d{1,3})/);if($e)return{code:$e[1],number:X.substring($e[1].length).trim()}}return{code:"+63",number:X}})(Ae.work_phone),Te=[];Ae.work_phone&&Te.push(`Work: ${Ae.work_phone}`),Ae.mobile_phone_1&&Te.push(`Mobile 1: ${Ae.mobile_phone_1}`),Ae.mobile_phone_2&&Te.push(`Mobile 2: ${Ae.mobile_phone_2}`);const st=Te.length>0?Te.join(" | "):"";G({name:Ae.company_name||"",website:"",countryCode:yt.code,phone_number:yt.number,combinedPhoneNumbers:st,billing_address:Ae.address||"",shipping_address:Ae.address||"",industry:"",status:"Prospect",territory_id:Ae.assigned_to?.territory?.id||null,assigned_to:Ae.assigned_to?.id||null,created_by:Ae.creator?.id||null}),ce({last_name:Ae.last_name||"",first_name:Ae.first_name||"",account_id:null,title:Ae.title||"",department:Ae.department||"",email:Ae.email||"",work_phone:Ae.work_phone||"",mobile_phone_1:Ae.mobile_phone_1||"",mobile_phone_2:Ae.mobile_phone_2||"",notes:Ae.notes||"",assigned_to:Ae.assigned_to?.id||null,created_by:Ae.creator?.id||null}),ie({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Ae.assigned_to?.id||null,created_by:Ae.creator?.id||null})}},[Ae]);const xe=ze=>x(ze.target.value),Ve=g.useMemo(()=>{let ze=[...m];const yt=w.trim().toLowerCase();yt&&(ze=ze.filter(st=>[st?.first_name,st?.last_name,st?.company_name,st?.title,st?.email,st?.work_phone,st?.assigned_to?`${st.assigned_to.first_name} ${st.assigned_to.last_name}`:""].some(Ee=>Ee&&Ee.toString().toLowerCase().includes(yt))));const Te=v.trim().toUpperCase();return Te&&Te!=="FILTER BY STATUS"?ze=ze.filter(st=>(st.status?st.status.toUpperCase():"")===Te):ze=ze.filter(st=>(st.status?st.status.toUpperCase():"")!=="CONVERTED"),C&&ze.sort((st,X)=>{const Ee=`${st.first_name} ${st.last_name}`,$e=`${X.first_name} ${X.last_name}`;return C==="asc"?Ee.localeCompare($e):$e.localeCompare(Ee)}),ze},[m,w,v,C]),ke=Math.max(1,Math.ceil(Ve.length/T)||1);g.useEffect(()=>{A(1)},[w,v]),g.useEffect(()=>{A(ze=>{const yt=Math.max(1,Math.ceil(Ve.length/T)||1);return ze>yt?yt:ze})},[Ve.length,T]);const ye=g.useMemo(()=>{const ze=(_-1)*T;return Ve.slice(ze,ze+T)},[Ve,_,T]),Me=()=>A(ze=>Math.max(ze-1,1)),He=()=>A(ze=>Math.min(ze+1,ke)),Be=ze=>{E(ze),A(1)},dt=g.useCallback(async ze=>{try{const yt=await re.get(`/activities/lead/${ze}`);me(yt.data&&typeof yt.data=="object"?yt.data:{})}catch(yt){console.error(yt),yt.response?.status===404&&(console.warn("No activities found for this account."),me({}))}},[]),M=ze=>{s(ze),dt(ze.id)},pe=()=>{s(null),t&&e("/admin/leads",{replace:!0})},se=()=>{i(!1),z(AS),B(!1),L(null),ae(!1),c(null),sessionStorage.removeItem("editLeadData")},je=ze=>{ze.target.id==="modalBackdrop"&&se()},We=()=>{z(AS),B(!1),L(null),c(null),i(!0)},Ne=ze=>{if(!ze){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ze),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const yt=$e=>{if(!$e)return{code:"+63",number:""};const Ye=$e.match(/^(\+\d+)\s(.+)$/);return Ye?{code:Ye[1],number:Ye[2]}:{code:"+63",number:$e}},Te=yt(ze.work_phone),st=yt(ze.mobile_phone_1),X=yt(ze.mobile_phone_2);let Ee="";if(ze.assigned_to){Ee=String(ze.assigned_to.id);const $e=l?.find(Ye=>Ye.id===ze.assigned_to.id);c($e)}z({first_name:ze.first_name||"",last_name:ze.last_name||"",company_name:ze.company_name||"",title:ze.title||"",department:ze.department||"",email:ze.email||"",work_ccode:Te.code,work_phone:Te.number,m1_ccode:st.code,mobile_phone_1:st.number,m2_ccode:X.code,mobile_phone_2:X.number,address:ze.address||"",notes:ze.notes||"",source:ze.source||"",territory_id:ze.territory?.id||null,lead_owner:Ee,status:ze.status||"New"}),B(!0),L(ze.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},qe=ze=>{if(!ze){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ze);const yt=`${ze.first_name} ${ze.last_name}`||"this lead";q({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:yt}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ze.id,name:yt}})},De=ze=>{const{name:yt,value:Te}=ze.target;if(z(st=>({...st,[yt]:Te})),yt==="lead_owner"){const st=l.find(X=>X.id===parseInt(Te));c(st)}},[Je,at]=g.useState(!1),ot=ze=>{if(ze.preventDefault(),at(!0),!D.last_name?.trim()){Y.error("Last name is required.");return}if(!D.company_name?.trim()){Y.error("Company is required.");return}if(!D.title?.trim()){Y.error("Job title is required.");return}if(!D.email?.trim()){Y.error("Email is required.");return}if(!D.email.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D.email)){Y.error("Please enter a valid email address with a dot in the domain.");return}if((D.email.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}if(!D.lead_owner){Y.error("Please assign a lead owner.");return}const X={...D,territory_id:D.territory_id?parseInt(D.territory_id):null,lead_owner:parseInt(D.lead_owner),work_phone:`${D.work_ccode} ${D.work_phone}`,mobile_phone_1:`${D.m1_ccode} ${D.mobile_phone_1}`,mobile_phone_2:`${D.m2_ccode} ${D.mobile_phone_2}`},Ee=K&&O?"update":"create",$e=`${D.first_name} ${D.last_name}`;q({title:Ee==="create"?"Confirm New Lead":"Confirm Update",message:Ee==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:$e}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:$e}),"?"]}),confirmLabel:Ee==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:Ee,payload:X,targetId:O||null,name:$e}})},R=ze=>{if(ze.target.checked){const yt=ye.map(Te=>Te.id);V(yt)}else V([])},$=ze=>{V(yt=>yt.includes(ze)?yt.filter(Te=>Te!==ze):[...yt,ze])},I=async()=>{te.length!==0&&q({title:"Bulk Delete Leads",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:te.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${te.length} Leads`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:te}})},U=async()=>{if(!W?.action){q(null);return}const{action:ze}=W,{type:yt,payload:Te,targetId:st,name:X,lead:Ee,leadIds:$e}=ze;console.log(Te),Q(!0);try{if(yt==="create")ae(!0),await re.post("/leads/create",Te),Y.success(`Lead "${X}" created successfully.`),se(),await Le();else if(yt==="update"){if(!st)throw new Error("Missing lead identifier for update.");ae(!0);const Ye=await re.put(`/leads/${st}`,Te);Y.success(`Lead "${X}" updated successfully.`),n&&n.id===st&&s(null),se(),await Le()}else if(yt==="delete"){if(!st)throw new Error("Missing lead identifier for deletion.");await re.delete(`/leads/${st}`),Y.success(`Lead "${X}" deleted successfully.`),n?.id===st&&s(null),await Le()}else yt==="bulk-delete"&&(await re.delete("/leads/admin/bulk-delete",{data:{lead_ids:$e}}),Y.success(`Successfully deleted ${$e.length} leads`),V([]),await Le())}catch(Ye){console.error(Ye);const J=yt==="create"?"Failed to create lead. Please review the details and try again.":yt==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ne=Ye.response?.data?.detail||J;Y.error(ne)}finally{(yt==="create"||yt==="update")&&ae(!1),yt!=="edit"&&(Q(!1),q(null))}},de=()=>{le||q(null)},ge=m.filter(ze=>ze.status==="New").length,ue=m.filter(ze=>ze.status==="Contacted").length,Se=m.filter(ze=>ze.status==="Qualified").length,Fe=m.filter(ze=>ze.status==="Converted").length,ft=m.filter(ze=>ze.status==="Lost").length,vt=[{title:"New",value:ge,icon:Ga,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ue,icon:jt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Se,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Fe,icon:So,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ft,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(It,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ga,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{Y.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rc,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{We(),at(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:vt.map(ze=>a.jsx(eve,{...ze},ze.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:xe,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:v,onChange:ze=>j(ze.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:C,onChange:ze=>S(ze.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"",children:"Sort by Name"}),a.jsx("option",{value:"asc",children:"A-Z"}),a.jsx("option",{value:"desc",children:"Z-A"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ye.length>0&&ye.every(ze=>te.includes(ze.id)),onChange:R})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:te.length>0?a.jsx("button",{onClick:I,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${te.length} selected leads`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:Ve.length>0?ye.map(ze=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:yt=>yt.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:te.includes(ze.id),onChange:()=>$(ze.id)})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>M(ze),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ze.first_name," ",ze.last_name]})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>M(ze),children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ze.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>M(ze),children:ze.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>M(ze),children:ze.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>M(ze),children:ze.assigned_to?`${ze.assigned_to.first_name} ${ze.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>M(ze),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Xbe(ze.status||"New")}`,children:Qbe(ze.status||"New")})}),a.jsx("td",{})]},ze.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ve.length,pageSize:T,currentPage:_,onPrev:Me,onNext:He,onPageSizeChange:Be,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ze=>ze.stopPropagation(),children:[a.jsx("button",{onClick:()=>{se(),at(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:K?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:D.first_name,onChange:De,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:D.last_name,onChange:De,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${Je&&!D.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:D.company_name,onChange:De,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Je&&!D.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:D.title,onChange:De,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Je&&!D.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:D.department,onChange:De,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:D.email,onChange:De,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Je&&!D.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:D.work_ccode,onChange:De,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_S.map(ze=>a.jsx("option",{value:ze.code,children:ze.code},ze.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:D.work_phone,onChange:De,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:D.m1_ccode,onChange:De,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_S.map(ze=>a.jsx("option",{value:ze.code,children:ze.code},ze.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:D.mobile_phone_1,onChange:De,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:D.m2_ccode,onChange:De,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:_S.map(ze=>a.jsx("option",{value:ze.code,children:ze.code},ze.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:D.mobile_phone_2,onChange:De,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:D.address,onChange:De,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${Je&&!D.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(tve,{items:Array.isArray(l)?l:[],value:D.lead_owner??"",placeholder:"Search a user...",getLabel:ze=>`${ze.first_name} ${ze.last_name}`,onChange:ze=>{const yt=l.find(st=>String(st.id)===String(ze));c(yt);let Te=null;yt&&yt.assigned_territory&&yt.assigned_territory.length===1&&(Te=yt.assigned_territory[0].id),z(st=>({...st,lead_owner:ze,territory_id:Te}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:D.territory_id||"",onChange:De,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(ze=>a.jsx("option",{value:ze.id,children:ze.name},ze.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:D.source,onChange:De,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:D.notes,onChange:De,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{se(),at(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:H||le,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:ot,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:H||le,children:H||le?"Processing...":K?"Update Lead":"Save Lead"})]})]})]})}),W&&a.jsx(Jbe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:U,onCancel:de,loading:le}),n&&!r&&!K&&a.jsx(yV,{relatedActs:ee,lead:n,onBack:pe,fetchLeads:Le,setSelectedLead:s,onEdit:Ne,onDelete:qe})]})}function Jbe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function eve({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function tve({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}let ave={data:""},nve=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||ave},sve=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,rve=/\/\*[^]*?\*\/|  +/g,S$=/\n+/g,xc=(e,t)=>{let n="",s="",r="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":s+=i[1]=="f"?xc(l,i):i+"{"+xc(l,i[1]=="k"?"":t)+"}":typeof l=="object"?s+=xc(l,t?t.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,o):o?o+" "+d:d)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=xc.p?xc.p(i,l):i+":"+l+";")}return n+(t&&r?t+"{"+r+"}":r)+s},Fl={},bV=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+bV(e[n]);return t}return e},ive=(e,t,n,s,r)=>{let i=bV(e),l=Fl[i]||(Fl[i]=(d=>{let c=0,m=11;for(;c<d.length;)m=101*m+d.charCodeAt(c++)>>>0;return"go"+m})(i));if(!Fl[l]){let d=i!==e?e:(c=>{let m,h,p=[{}];for(;m=sve.exec(c.replace(rve,""));)m[4]?p.shift():m[3]?(h=m[3].replace(S$," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][m[1]]=m[2].replace(S$," ").trim();return p[0]})(e);Fl[l]=xc(r?{["@keyframes "+l]:d}:d,n?"":"."+l)}let o=n&&Fl.g?Fl.g:null;return n&&(Fl.g=Fl[l]),((d,c,m,h)=>{h?c.data=c.data.replace(h,d):c.data.indexOf(d)===-1&&(c.data=m?d+c.data:c.data+d)})(Fl[l],t,s,o),l},lve=(e,t,n)=>e.reduce((s,r,i)=>{let l=t[i];if(l&&l.call){let o=l(n),d=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=d?"."+d:o&&typeof o=="object"?o.props?"":xc(o,""):o===!1?"":o}return s+r+(l??"")},"");function bN(e){let t=this||{},n=e.call?e(t.p):e;return ive(n.unshift?n.raw?lve(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,nve(t.target),t.g,t.o,t.k)}let vV,TT,ET;bN.bind({g:1});let yo=bN.bind({k:1});function ove(e,t,n,s){xc.p=t,vV=e,TT=n,ET=s}function Wc(e,t){let n=this||{};return function(){let s=arguments;function r(i,l){let o=Object.assign({},i),d=o.className||r.className;n.p=Object.assign({theme:TT&&TT()},o),n.o=/ *go\d+/.test(d),o.className=bN.apply(n,s)+(d?" "+d:"");let c=e;return e[0]&&(c=o.as||e,delete o.as),ET&&c[0]&&ET(o),vV(c,o)}return r}}var cve=e=>typeof e=="function",mv=(e,t)=>cve(e)?e(t):e,dve=(()=>{let e=0;return()=>(++e).toString()})(),wV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),uve=20,IL="default",NV=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:s}=t;return NV(e,{type:e.toasts.find(l=>l.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},_b=[],jV={toasts:[],pausedAt:void 0,settings:{toastLimit:uve}},nl={},CV=(e,t=IL)=>{nl[t]=NV(nl[t]||jV,e),_b.forEach(([n,s])=>{n===t&&s(nl[t])})},SV=e=>Object.keys(nl).forEach(t=>CV(e,t)),mve=e=>Object.keys(nl).find(t=>nl[t].toasts.some(n=>n.id===e)),vN=(e=IL)=>t=>{CV(t,e)},fve={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},hve=(e={},t=IL)=>{let[n,s]=g.useState(nl[t]||jV),r=g.useRef(nl[t]);g.useEffect(()=>(r.current!==nl[t]&&s(nl[t]),_b.push([t,s]),()=>{let l=_b.findIndex(([o])=>o===t);l>-1&&_b.splice(l,1)}),[t]);let i=n.toasts.map(l=>{var o,d,c;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((o=e[l.type])==null?void 0:o.removeDelay)||e?.removeDelay,duration:l.duration||((d=e[l.type])==null?void 0:d.duration)||e?.duration||fve[l.type],style:{...e.style,...(c=e[l.type])==null?void 0:c.style,...l.style}}});return{...n,toasts:i}},gve=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||dve()}),bx=e=>(t,n)=>{let s=gve(t,e,n);return vN(s.toasterId||mve(s.id))({type:2,toast:s}),s.id},$n=(e,t)=>bx("blank")(e,t);$n.error=bx("error");$n.success=bx("success");$n.loading=bx("loading");$n.custom=bx("custom");$n.dismiss=(e,t)=>{let n={type:3,toastId:e};t?vN(t)(n):SV(n)};$n.dismissAll=e=>$n.dismiss(void 0,e);$n.remove=(e,t)=>{let n={type:4,toastId:e};t?vN(t)(n):SV(n)};$n.removeAll=e=>$n.remove(void 0,e);$n.promise=(e,t,n)=>{let s=$n.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?mv(t.success,r):void 0;return i?$n.success(i,{id:s,...n,...n?.success}):$n.dismiss(s),r}).catch(r=>{let i=t.error?mv(t.error,r):void 0;i?$n.error(i,{id:s,...n,...n?.error}):$n.dismiss(s)}),e};var pve=1e3,xve=(e,t="default")=>{let{toasts:n,pausedAt:s}=hve(e,t),r=g.useRef(new Map).current,i=g.useCallback((h,p=pve)=>{if(r.has(h))return;let b=setTimeout(()=>{r.delete(h),l({type:4,toastId:h})},p);r.set(h,b)},[]);g.useEffect(()=>{if(s)return;let h=Date.now(),p=n.map(b=>{if(b.duration===1/0)return;let w=(b.duration||0)+b.pauseDuration-(h-b.createdAt);if(w<0){b.visible&&$n.dismiss(b.id);return}return setTimeout(()=>$n.dismiss(b.id,t),w)});return()=>{p.forEach(b=>b&&clearTimeout(b))}},[n,s,t]);let l=g.useCallback(vN(t),[t]),o=g.useCallback(()=>{l({type:5,time:Date.now()})},[l]),d=g.useCallback((h,p)=>{l({type:1,toast:{id:h,height:p}})},[l]),c=g.useCallback(()=>{s&&l({type:6,time:Date.now()})},[s,l]),m=g.useCallback((h,p)=>{let{reverseOrder:b=!1,gutter:w=8,defaultPosition:x}=p||{},v=n.filter(S=>(S.position||x)===(h.position||x)&&S.height),j=v.findIndex(S=>S.id===h.id),C=v.filter((S,_)=>_<j&&S.visible).length;return v.filter(S=>S.visible).slice(...b?[C+1]:[0,C]).reduce((S,_)=>S+(_.height||0)+w,0)},[n]);return g.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let p=r.get(h.id);p&&(clearTimeout(p),r.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:d,startPause:o,endPause:c,calculateOffset:m}}},yve=yo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,bve=yo`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vve=yo`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wve=Wc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yve} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${bve} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vve} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Nve=yo`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jve=Wc("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Nve} 1s linear infinite;
`,Cve=yo`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Sve=yo`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_ve=Wc("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Cve} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Sve} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ave=Wc("div")`
  position: absolute;
`,Tve=Wc("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Eve=yo`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kve=Wc("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Eve} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lve=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?g.createElement(kve,null,t):t:n==="blank"?null:g.createElement(Tve,null,g.createElement(jve,{...s}),n!=="loading"&&g.createElement(Ave,null,n==="error"?g.createElement(wve,{...s}):g.createElement(_ve,{...s})))},Pve=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Dve=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Ove="0%{opacity:0;} 100%{opacity:1;}",Mve="0%{opacity:1;} 100%{opacity:0;}",Ive=Wc("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$ve=Wc("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Rve=(e,t)=>{let n=e.includes("top")?1:-1,[s,r]=wV()?[Ove,Mve]:[Pve(n),Dve(n)];return{animation:t?`${yo(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${yo(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zve=g.memo(({toast:e,position:t,style:n,children:s})=>{let r=e.height?Rve(e.position||t||"top-center",e.visible):{opacity:0},i=g.createElement(Lve,{toast:e}),l=g.createElement($ve,{...e.ariaProps},mv(e.message,e));return g.createElement(Ive,{className:e.className,style:{...r,...n,...e.style}},typeof s=="function"?s({icon:i,message:l}):g.createElement(g.Fragment,null,i,l))});ove(g.createElement);var Uve=({id:e,className:t,style:n,onHeightUpdate:s,children:r})=>{let i=g.useCallback(l=>{if(l){let o=()=>{let d=l.getBoundingClientRect().height;s(e,d)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return g.createElement("div",{ref:i,className:t,style:n},r)},Fve=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:wV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...r}},Bve=bN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,jy=16,vx=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:r,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:d,handlers:c}=xve(n,i);return g.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:jy,left:jy,right:jy,bottom:jy,pointerEvents:"none",...l},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},d.map(m=>{let h=m.position||t,p=c.calculateOffset(m,{reverseOrder:e,gutter:s,defaultPosition:t}),b=Fve(h,p);return g.createElement(Uve,{id:m.id,key:m.id,onHeightUpdate:c.updateHeight,className:m.visible?Bve:"",style:b},m.type==="custom"?mv(m.message,m):r?r(m):g.createElement(zve,{toast:m,position:h}))}))},wx=$n;function Hve(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,s]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,o]=g.useState(1),[d,c]=g.useState(10),m=async()=>{try{const C=await re.get("/logs/read-all");t(C.data)}catch(C){console.error("Error fetching audit logs:",C)}};g.useEffect(()=>{m()},[]);const h=g.useMemo(()=>{if(!Array.isArray(e))return[];const C=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(A=>{const T=A.timestamp?new Date(A.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${A.entity_type||""} ${A.entity_name||A.entity_details?.name||A.entity_details?.title||A.entity_id||""}`,D=`${A.logger?.first_name||""} ${A.logger?.last_name||""}`,z=[T,D,A.action,A.entity_type,E,A.description],K=C===""||z.some(O=>O==null?!1:O.toString().toLowerCase().includes(C)),B=S==="FILTER BY ACTIONS"||(A.action||"").toUpperCase()===S;return K&&B}).sort((A,T)=>{const E=A.timestamp?new Date(A.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-E})},[e,n,r]),p=Math.max(1,Math.ceil(h.length/d)||1);g.useEffect(()=>{o(1)},[n,r]),g.useEffect(()=>{o(C=>{const S=Math.max(1,Math.ceil(h.length/d)||1);return C>S?S:C})},[h.length,d]);const b=g.useMemo(()=>{const C=(l-1)*d;return h.slice(C,C+d)},[h,l,d]);h.length===0||(l-1)*d+1,Math.min(l*d,h.length);const w=()=>o(C=>Math.max(C-1,1)),x=()=>o(C=>Math.min(C+1,p)),v=()=>{if(!h.length){wx.error("No logs to export!");return}const C=["Timestamp","User","Action","Resource","Details"],S=h.map(D=>[new Date(D.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${D.logger?.first_name||""} ${D.logger?.last_name||""}`.trim(),D.action,`${D.entity_type}: ${D.entity_id}`,D.description||""]),_=[C.join(","),...S.map(D=>D.map(z=>`"${String(z).replace(/"/g,'""')}"`).join(","))].join(`
`),A=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(A),E=document.createElement("a");E.href=T,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(T)},j=C=>{switch((C||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(It,{message:"Loading audit logs..."}),a.jsx(vx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Nt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ns,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:v,children:[a.jsx(Rc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:C=>s(C.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:C=>i(C.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(h)&&h.length>0?b.map((C,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(C.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:C.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${j(C.action)}`,children:C.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[C.entity_type,": ",C.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:C.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:h.length,pageSize:d,currentPage:l,onPrev:w,onNext:x,onPageSizeChange:C=>{c(C),o(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var Gve=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $L(e){if(typeof e!="string")return!1;var t=Gve;return t.includes(e)}var Vve=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Wve=new Set(Vve);function _V(e){return typeof e!="string"?!1:Wve.has(e)}function AV(e){return typeof e=="string"&&e.startsWith("data-")}function ki(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(_V(n)||AV(n))&&(t[n]=e[n]);return t}function gp(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ki(t)}return typeof e=="object"&&!Array.isArray(e)?ki(e):null}function ti(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(_V(n)||AV(n)||$L(n))&&(t[n]=e[n]);return t}var qve=["children","width","height","viewBox","className","style","title","desc"];function kT(){return kT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kT.apply(null,arguments)}function Yve(e,t){if(e==null)return{};var n,s,r=Kve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kve(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var TV=g.forwardRef((e,t)=>{var{children:n,width:s,height:r,viewBox:i,className:l,style:o,title:d,desc:c}=e,m=Yve(e,qve),h=i||{width:s,height:r,x:0,y:0},p=Et("recharts-surface",l);return g.createElement("svg",kT({},ti(m),{className:p,width:s,height:r,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),g.createElement("title",null,d),g.createElement("desc",null,c),n)}),Qve=["children","className"];function LT(){return LT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},LT.apply(null,arguments)}function Xve(e,t){if(e==null)return{};var n,s,r=Zve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zve(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var Ls=g.forwardRef((e,t)=>{var{children:n,className:s}=e,r=Xve(e,Qve),i=Et("recharts-layer",s);return g.createElement("g",LT({className:i},ti(r),{ref:t}),n)}),Jve=g.createContext(null),TS={},ES={},_$;function ewe(){return _$||(_$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(ES)),ES}var kS={},A$;function EV(){return A$||(A$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(kS)),kS}var LS={},T$;function RL(){return T$||(T$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(LS)),LS}var PS={},DS={},E$;function twe(){return E$||(E$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const s=String(n);return s==="0"&&Object.is(Number(n),-0)?"-0":s}e.toString=t})(DS)),DS}var k$;function zL(){return k$||(k$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=twe(),n=RL();function s(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],l=r.length;if(l===0)return i;let o=0,d="",c="",m=!1;for(r.charCodeAt(0)===46&&(i.push(""),o++);o<l;){const h=r[o];c?h==="\\"&&o+1<l?(o++,d+=r[o]):h===c?c="":d+=h:m?h==='"'||h==="'"?c=h:h==="]"?(m=!1,i.push(d),d=""):d+=h:h==="["?(m=!0,d&&(i.push(d),d="")):h==="."?d&&(i.push(d),d=""):d+=h,o++}return d&&i.push(d),i}e.toPath=s})(PS)),PS}var L$;function UL(){return L$||(L$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ewe(),n=EV(),s=RL(),r=zL();function i(o,d,c){if(o==null)return c;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return c;const m=o[d];return m===void 0?n.isDeepKey(d)?i(o,r.toPath(d),c):c:m}case"number":case"symbol":{typeof d=="number"&&(d=s.toKey(d));const m=o[d];return m===void 0?c:m}default:{if(Array.isArray(d))return l(o,d,c);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return c;const m=o[d];return m===void 0?c:m}}}function l(o,d,c){if(d.length===0)return c;let m=o;for(let h=0;h<d.length;h++){if(m==null||t.isUnsafeProperty(d[h]))return c;m=m[d[h]]}return m===void 0?c:m}e.get=i})(TS)),TS}var OS,P$;function awe(){return P$||(P$=1,OS=UL().get),OS}var nwe=awe();const du=Di(nwe);var swe=4;function Nc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:swe,n=10**t,s=Math.round(e*n)/n;return Object.is(s,-0)?0:s}function cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e.reduce((r,i,l)=>{var o=n[l-1];return typeof o=="string"?r+o+i:o!==void 0?r+Nc(o)+i:r+i},"")}var Xn=e=>e===0?0:e>0?1:-1,Li=e=>typeof e=="number"&&e!=+e,bo=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Lt=e=>(typeof e=="number"||e instanceof Number)&&!Li(e),hl=e=>Lt(e)||typeof e=="string",rwe=0,pp=e=>{var t=++rwe;return"".concat(e||"").concat(t)},ws=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Lt(t)&&typeof t!="string")return s;var i;if(bo(t)){if(n==null)return s;var l=t.indexOf("%");i=n*parseFloat(t.slice(0,l))/100}else i=+t;return Li(i)&&(i=s),r&&n!=null&&i>n&&(i=n),i},kV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},s=0;s<t;s++)if(!n[String(e[s])])n[String(e[s])]=!0;else return!0;return!1};function Ln(e,t,n){return Lt(e)&&Lt(t)?Nc(e+n*(t-e)):t}function iwe(e,t,n){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):du(s,t))===n)}var Zn=e=>e===null||typeof e>"u",Nx=e=>Zn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function lwe(e){return e!=null}function jx(){}var owe=["type","size","sizeType"];function PT(){return PT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},PT.apply(null,arguments)}function D$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function O$(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D$(Object(n),!0).forEach(function(s){cwe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cwe(e,t,n){return(t=dwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dwe(e){var t=uwe(e,"string");return typeof t=="symbol"?t:t+""}function uwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mwe(e,t){if(e==null)return{};var n,s,r=fwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fwe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var LV={symbolCircle:rN,symbolCross:k9,symbolDiamond:P9,symbolSquare:D9,symbolStar:M9,symbolTriangle:I9,symbolWye:$9},hwe=Math.PI/180,gwe=e=>{var t="symbol".concat(Nx(e));return LV[t]||rN},pwe=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*hwe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xwe=(e,t)=>{LV["symbol".concat(Nx(e))]=t},PV=e=>{var{type:t="circle",size:n=64,sizeType:s="area"}=e,r=mwe(e,owe),i=O$(O$({},r),{},{type:t,size:n,sizeType:s}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var p=gwe(l),b=cL().type(p).size(pwe(n,s,l)),w=b();if(w!==null)return w},{className:d,cx:c,cy:m}=i,h=ti(i);return Lt(c)&&Lt(m)&&Lt(n)?g.createElement("path",PT({},h,{className:Et("recharts-symbols",d),transform:"translate(".concat(c,", ").concat(m,")"),d:o()})):null};PV.registerSymbol=xwe;var DV=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,ywe=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(r=>{$L(r)&&(s[r]=(i=>n[r](n,i)))}),s},bwe=(e,t,n)=>s=>(e(t,n,s),null),wN=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];$L(r)&&typeof i=="function"&&(s||(s={}),s[r]=bwe(i,t,n))}),s};function M$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function vwe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(n),!0).forEach(function(s){wwe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M$(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wwe(e,t,n){return(t=Nwe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nwe(e){var t=jwe(e,"string");return typeof t=="symbol"?t:t+""}function jwe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _s(e,t){var n=vwe({},e),s=t,r=Object.keys(t),i=r.reduce((l,o)=>(l[o]===void 0&&s[o]!==void 0&&(l[o]=s[o]),l),n);return i}var MS={},IS={},I$;function Cwe(){return I$||(I$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){const r=new Map;for(let i=0;i<n.length;i++){const l=n[i],o=s(l);r.has(o)||r.set(o,l)}return Array.from(r.values())}e.uniqBy=t})(IS)),IS}var $S={},$$;function OV(){return $$||($$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})($S)),$S}var RS={},zS={},US={},R$;function Swe(){return R$||(R$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(US)),US}var z$;function FL(){return z$||(z$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Swe();function n(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=n})(zS)),zS}var FS={},U$;function _we(){return U$||(U$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(FS)),FS}var F$;function Awe(){return F$||(F$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FL(),n=_we();function s(r){return n.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(RS)),RS}var BS={},HS={},B$;function Twe(){return B$||(B$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UL();function n(s){return function(r){return t.get(r,s)}}e.property=n})(HS)),HS}var GS={},VS={},WS={},qS={},H$;function MV(){return H$||(H$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(qS)),qS}var YS={},G$;function IV(){return G$||(G$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(YS)),YS}var KS={},V$;function $V(){return V$||(V$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){return n===s||Number.isNaN(n)&&Number.isNaN(s)}e.eq=t})(KS)),KS}var W$;function Ewe(){return W$||(W$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MV(),n=IV(),s=$V();function r(m,h,p){return typeof p!="function"?r(m,h,()=>{}):i(m,h,function b(w,x,v,j,C,S){const _=p(w,x,v,j,C,S);return _!==void 0?!!_:i(w,x,b,S)},new Map)}function i(m,h,p,b){if(h===m)return!0;switch(typeof h){case"object":return l(m,h,p,b);case"function":return Object.keys(h).length>0?i(m,{...h},p,b):s.eq(m,h);default:return t.isObject(m)?typeof h=="string"?h==="":!0:s.eq(m,h)}}function l(m,h,p,b){if(h==null)return!0;if(Array.isArray(h))return d(m,h,p,b);if(h instanceof Map)return o(m,h,p,b);if(h instanceof Set)return c(m,h,p,b);const w=Object.keys(h);if(m==null||n.isPrimitive(m))return w.length===0;if(w.length===0)return!0;if(b?.has(h))return b.get(h)===m;b?.set(h,m);try{for(let x=0;x<w.length;x++){const v=w[x];if(!n.isPrimitive(m)&&!(v in m)||h[v]===void 0&&m[v]!==void 0||h[v]===null&&m[v]!==null||!p(m[v],h[v],v,m,h,b))return!1}return!0}finally{b?.delete(h)}}function o(m,h,p,b){if(h.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,x]of h.entries()){const v=m.get(w);if(p(v,x,w,m,h,b)===!1)return!1}return!0}function d(m,h,p,b){if(h.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let x=0;x<h.length;x++){const v=h[x];let j=!1;for(let C=0;C<m.length;C++){if(w.has(C))continue;const S=m[C];let _=!1;if(p(S,v,x,m,h,b)&&(_=!0),_){w.add(C),j=!0;break}}if(!j)return!1}return!0}function c(m,h,p,b){return h.size===0?!0:m instanceof Set?d([...m],[...h],p,b):!1}e.isMatchWith=r,e.isSetMatch=c})(WS)),WS}var q$;function RV(){return q$||(q$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ewe();function n(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=n})(VS)),VS}var QS={},XS={},ZS={},Y$;function kwe(){return Y$||(Y$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(s=>Object.prototype.propertyIsEnumerable.call(n,s))}e.getSymbols=t})(ZS)),ZS}var JS={},K$;function zV(){return K$||(K$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(JS)),JS}var e2={},Q$;function UV(){return Q$||(Q$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",l="[object Symbol]",o="[object Date]",d="[object Map]",c="[object Set]",m="[object Array]",h="[object Function]",p="[object ArrayBuffer]",b="[object Object]",w="[object Error]",x="[object DataView]",v="[object Uint8Array]",j="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]",_="[object BigUint64Array]",A="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",D="[object BigInt64Array]",z="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=m,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=_,e.booleanTag=r,e.dataViewTag=x,e.dateTag=o,e.errorTag=w,e.float32ArrayTag=z,e.float64ArrayTag=K,e.functionTag=h,e.int16ArrayTag=T,e.int32ArrayTag=E,e.int8ArrayTag=A,e.mapTag=d,e.numberTag=s,e.objectTag=b,e.regexpTag=t,e.setTag=c,e.stringTag=n,e.symbolTag=l,e.uint16ArrayTag=C,e.uint32ArrayTag=S,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=j})(e2)),e2}var t2={},X$;function Lwe(){return X$||(X$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(t2)),t2}var Z$;function FV(){return Z$||(Z$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kwe(),n=zV(),s=UV(),r=IV(),i=Lwe();function l(m,h){return o(m,void 0,m,new Map,h)}function o(m,h,p,b=new Map,w=void 0){const x=w?.(m,h,p,b);if(x!==void 0)return x;if(r.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const v=new Array(m.length);b.set(m,v);for(let j=0;j<m.length;j++)v[j]=o(m[j],j,p,b,w);return Object.hasOwn(m,"index")&&(v.index=m.index),Object.hasOwn(m,"input")&&(v.input=m.input),v}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const v=new RegExp(m.source,m.flags);return v.lastIndex=m.lastIndex,v}if(m instanceof Map){const v=new Map;b.set(m,v);for(const[j,C]of m)v.set(j,o(C,j,p,b,w));return v}if(m instanceof Set){const v=new Set;b.set(m,v);for(const j of m)v.add(o(j,void 0,p,b,w));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const v=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,v);for(let j=0;j<m.length;j++)v[j]=o(m[j],j,p,b,w);return v}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const v=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,v),d(v,m,p,b,w),v}if(typeof File<"u"&&m instanceof File){const v=new File([m],m.name,{type:m.type});return b.set(m,v),d(v,m,p,b,w),v}if(typeof Blob<"u"&&m instanceof Blob){const v=new Blob([m],{type:m.type});return b.set(m,v),d(v,m,p,b,w),v}if(m instanceof Error){const v=new m.constructor;return b.set(m,v),v.message=m.message,v.name=m.name,v.stack=m.stack,v.cause=m.cause,d(v,m,p,b,w),v}if(m instanceof Boolean){const v=new Boolean(m.valueOf());return b.set(m,v),d(v,m,p,b,w),v}if(m instanceof Number){const v=new Number(m.valueOf());return b.set(m,v),d(v,m,p,b,w),v}if(m instanceof String){const v=new String(m.valueOf());return b.set(m,v),d(v,m,p,b,w),v}if(typeof m=="object"&&c(m)){const v=Object.create(Object.getPrototypeOf(m));return b.set(m,v),d(v,m,p,b,w),v}return m}function d(m,h,p=m,b,w){const x=[...Object.keys(h),...t.getSymbols(h)];for(let v=0;v<x.length;v++){const j=x[v],C=Object.getOwnPropertyDescriptor(m,j);(C==null||C.writable)&&(m[j]=o(h[j],j,p,b,w))}}function c(m){switch(n.getTag(m)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=d})(XS)),XS}var J$;function Pwe(){return J$||(J$=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FV();function n(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=n})(QS)),QS}var e6;function Dwe(){return e6||(e6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RV(),n=Pwe();function s(r){return r=n.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(GS)),GS}var a2={},n2={},s2={},t6;function Owe(){return t6||(t6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FV(),n=UV();function s(r,i){return t.cloneDeepWith(r,(l,o,d,c)=>{const m=i?.(l,o,d,c);if(m!==void 0)return m;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new r.constructor(r?.valueOf());return t.copyProperties(h,r),h}case n.argumentsTag:{const h={};return t.copyProperties(h,r),h.length=r.length,h[Symbol.iterator]=r[Symbol.iterator],h}default:return}})}e.cloneDeepWith=s})(s2)),s2}var a6;function Mwe(){return a6||(a6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Owe();function n(s){return t.cloneDeepWith(s)}e.cloneDeep=n})(n2)),n2}var r2={},i2={},n6;function BV(){return n6||(n6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=n})(i2)),i2}var l2={},s6;function Iwe(){return s6||(s6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zV();function n(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=n})(l2)),l2}var r6;function $we(){return r6||(r6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EV(),n=BV(),s=Iwe(),r=zL();function i(l,o){let d;if(Array.isArray(o)?d=o:typeof o=="string"&&t.isDeepKey(o)&&l?.[o]==null?d=r.toPath(o):d=[o],d.length===0)return!1;let c=l;for(let m=0;m<d.length;m++){const h=d[m];if((c==null||!Object.hasOwn(c,h))&&!((Array.isArray(c)||s.isArguments(c))&&n.isIndex(h)&&h<c.length))return!1;c=c[h]}return!0}e.has=i})(r2)),r2}var i6;function Rwe(){return i6||(i6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RV(),n=RL(),s=Mwe(),r=UL(),i=$we();function l(o,d){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return d=s.cloneDeep(d),function(c){const m=r.get(c,o);return m===void 0?i.has(c,o):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=l})(a2)),a2}var l6;function zwe(){return l6||(l6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OV(),n=Twe(),s=Dwe(),r=Rwe();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?r.matchesProperty(l[0],l[1]):s.matches(l);case"string":case"symbol":case"number":return n.property(l)}}e.iteratee=i})(BS)),BS}var o6;function Uwe(){return o6||(o6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cwe(),n=OV(),s=Awe(),r=zwe();function i(l,o=n.identity){return s.isArrayLikeObject(l)?t.uniqBy(Array.from(l),r.iteratee(o)):[]}e.uniqBy=i})(MS)),MS}var o2,c6;function Fwe(){return c6||(c6=1,o2=Uwe().uniqBy),o2}var Bwe=Fwe();const d6=Di(Bwe);function Hwe(e,t,n){return t===!0?d6(e,n):typeof t=="function"?d6(e,t):e}var BL=g.createContext(null),Gwe=e=>e,Xa=()=>{var e=g.useContext(BL);return e?e.store.dispatch:Gwe},Ab=()=>{},Vwe=()=>Ab,Wwe=(e,t)=>e===t;function Dt(e){var t=g.useContext(BL);return UB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Vwe,t?t.store.getState:Ab,t?t.store.getState:Ab,t?e:Ab,Wwe)}var c2={},d2={},u2={},u6;function qwe(){return u6||(u6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const n=(s,r,i)=>{if(s!==r){const l=t(s),o=t(r);if(l===o&&l===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?o-l:l-o}return 0};e.compareValues=n})(u2)),u2}var m2={},f2={},m6;function HV(){return m6||(m6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(f2)),f2}var f6;function Ywe(){return f6||(f6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HV(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!n.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=r})(m2)),m2}var h6;function Kwe(){return h6||(h6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qwe(),n=Ywe(),s=zL();function r(i,l,o,d){if(i==null)return[];o=d?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(b=>String(b));const c=(b,w)=>{let x=b;for(let v=0;v<w.length&&x!=null;++v)x=x[w[v]];return x},m=(b,w)=>w==null||b==null?w:typeof b=="object"&&"key"in b?Object.hasOwn(w,b.key)?w[b.key]:c(w,b.path):typeof b=="function"?b(w):Array.isArray(b)?c(w,b):typeof w=="object"?w[b]:w,h=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:s.toPath(b)}));return i.map(b=>({original:b,criteria:h.map(w=>m(w,b))})).slice().sort((b,w)=>{for(let x=0;x<h.length;x++){const v=t.compareValues(b.criteria[x],w.criteria[x],o[x]);if(v!==0)return v}return 0}).map(b=>b.original)}e.orderBy=r})(d2)),d2}var h2={},g6;function Qwe(){return g6||(g6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s=1){const r=[],i=Math.floor(s),l=(o,d)=>{for(let c=0;c<o.length;c++){const m=o[c];Array.isArray(m)&&d<i?l(m,d+1):r.push(m)}};return l(n,0),r}e.flatten=t})(h2)),h2}var g2={},p6;function GV(){return p6||(p6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BV(),n=FL(),s=MV(),r=$V();function i(l,o,d){return s.isObject(d)&&(typeof o=="number"&&n.isArrayLike(d)&&t.isIndex(o)&&o<d.length||typeof o=="string"&&o in d)?r.eq(d[o],l):!1}e.isIterateeCall=i})(g2)),g2}var x6;function Xwe(){return x6||(x6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kwe(),n=Qwe(),s=GV();function r(i,...l){const o=l.length;return o>1&&s.isIterateeCall(i,l[0],l[1])?l=[]:o>2&&s.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,n.flatten(l),["asc"])}e.sortBy=r})(c2)),c2}var p2,y6;function Zwe(){return y6||(y6=1,p2=Xwe().sortBy),p2}var Jwe=Zwe();const NN=Di(Jwe);var VV=e=>e.legend.settings,eNe=e=>e.legend.size,tNe=e=>e.legend.payload;Xe([tNe,VV],(e,t)=>{var{itemSorter:n}=t,s=e.flat(1);return n?NN(s,n):s});var Cy=1;function aNe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),s=g.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>Cy||Math.abs(l.left-t.left)>Cy||Math.abs(l.top-t.top)>Cy||Math.abs(l.width-t.width)>Cy)&&n({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function ls(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nNe=typeof Symbol=="function"&&Symbol.observable||"@@observable",b6=nNe,x2=()=>Math.random().toString(36).substring(7).split("").join("."),sNe={INIT:`@@redux/INIT${x2()}`,REPLACE:`@@redux/REPLACE${x2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${x2()}`},fv=sNe;function HL(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function WV(e,t,n){if(typeof e!="function")throw new Error(ls(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ls(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ls(1));return n(WV)(e,t)}let s=e,r=t,i=new Map,l=i,o=0,d=!1;function c(){l===i&&(l=new Map,i.forEach((v,j)=>{l.set(j,v)}))}function m(){if(d)throw new Error(ls(3));return r}function h(v){if(typeof v!="function")throw new Error(ls(4));if(d)throw new Error(ls(5));let j=!0;c();const C=o++;return l.set(C,v),function(){if(j){if(d)throw new Error(ls(6));j=!1,c(),l.delete(C),i=null}}}function p(v){if(!HL(v))throw new Error(ls(7));if(typeof v.type>"u")throw new Error(ls(8));if(typeof v.type!="string")throw new Error(ls(17));if(d)throw new Error(ls(9));try{d=!0,r=s(r,v)}finally{d=!1}return(i=l).forEach(C=>{C()}),v}function b(v){if(typeof v!="function")throw new Error(ls(10));s=v,p({type:fv.REPLACE})}function w(){const v=h;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(ls(11));function C(){const _=j;_.next&&_.next(m())}return C(),{unsubscribe:v(C)}},[b6](){return this}}}return p({type:fv.INIT}),{dispatch:p,subscribe:h,getState:m,replaceReducer:b,[b6]:w}}function rNe(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:fv.INIT})>"u")throw new Error(ls(12));if(typeof n(void 0,{type:fv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ls(13))})}function qV(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(n[l]=e[l])}const s=Object.keys(n);let r;try{rNe(n)}catch(i){r=i}return function(l={},o){if(r)throw r;let d=!1;const c={};for(let m=0;m<s.length;m++){const h=s[m],p=n[h],b=l[h],w=p(b,o);if(typeof w>"u")throw o&&o.type,new Error(ls(14));c[h]=w,d=d||w!==b}return d=d||s.length!==Object.keys(l).length,d?c:l}}function hv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function iNe(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(ls(15))};const l={getState:r.getState,dispatch:(d,...c)=>i(d,...c)},o=e.map(d=>d(l));return i=hv(...o)(r.dispatch),{...r,dispatch:i}}}function YV(e){return HL(e)&&"type"in e&&typeof e.type=="string"}var KV=Symbol.for("immer-nothing"),v6=Symbol.for("immer-draftable"),Ps=Symbol.for("immer-state");function Si(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wr=Object,pf=wr.getPrototypeOf,gv="constructor",jN="prototype",DT="configurable",pv="enumerable",Tb="writable",xp="value",vo=e=>!!e&&!!e[Ps];function Pi(e){return e?QV(e)||CN(e)||!!e[v6]||!!e[gv]?.[v6]||SN(e)||_N(e):!1}var lNe=wr[jN][gv].toString(),w6=new WeakMap;function QV(e){if(!e||!GL(e))return!1;const t=pf(e);if(t===null||t===wr[jN])return!0;const n=wr.hasOwnProperty.call(t,gv)&&t[gv];if(n===Object)return!0;if(!Um(n))return!1;let s=w6.get(n);return s===void 0&&(s=Function.toString.call(n),w6.set(n,s)),s===lNe}function Cx(e,t,n=!0){Sx(e)===0?(n?Reflect.ownKeys(e):wr.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function Sx(e){const t=e[Ps];return t?t.type_:CN(e)?1:SN(e)?2:_N(e)?3:0}var N6=(e,t,n=Sx(e))=>n===2?e.has(t):wr[jN].hasOwnProperty.call(e,t),OT=(e,t,n=Sx(e))=>n===2?e.get(t):e[t],xv=(e,t,n,s=Sx(e))=>{s===2?e.set(t,n):s===3?e.add(n):e[t]=n};function oNe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var CN=Array.isArray,SN=e=>e instanceof Map,_N=e=>e instanceof Set,GL=e=>typeof e=="object",Um=e=>typeof e=="function",y2=e=>typeof e=="boolean";function cNe(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Kl=e=>e.copy_||e.base_,VL=e=>e.modified_?e.copy_:e.base_;function MT(e,t){if(SN(e))return new Map(e);if(_N(e))return new Set(e);if(CN(e))return Array[jN].slice.call(e);const n=QV(e);if(t===!0||t==="class_only"&&!n){const s=wr.getOwnPropertyDescriptors(e);delete s[Ps];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o[Tb]===!1&&(o[Tb]=!0,o[DT]=!0),(o.get||o.set)&&(s[l]={[DT]:!0,[Tb]:!0,[pv]:o[pv],[xp]:e[l]})}return wr.create(pf(e),s)}else{const s=pf(e);if(s!==null&&n)return{...e};const r=wr.create(s);return wr.assign(r,e)}}function WL(e,t=!1){return AN(e)||vo(e)||!Pi(e)||(Sx(e)>1&&wr.defineProperties(e,{set:Sy,add:Sy,clear:Sy,delete:Sy}),wr.freeze(e),t&&Cx(e,(n,s)=>{WL(s,!0)},!1)),e}function dNe(){Si(2)}var Sy={[xp]:dNe};function AN(e){return e===null||!GL(e)?!0:wr.isFrozen(e)}var yv="MapSet",IT="Patches",j6="ArrayMethods",XV={};function uu(e){const t=XV[e];return t||Si(0,e),t}var C6=e=>!!XV[e],yp,ZV=()=>yp,uNe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:C6(yv)?uu(yv):void 0,arrayMethodsPlugin_:C6(j6)?uu(j6):void 0});function S6(e,t){t&&(e.patchPlugin_=uu(IT),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $T(e){RT(e),e.drafts_.forEach(mNe),e.drafts_=null}function RT(e){e===yp&&(yp=e.parent_)}var _6=e=>yp=uNe(yp,e);function mNe(e){const t=e[Ps];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function A6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Ps].modified_&&($T(t),Si(4)),Pi(e)&&(e=T6(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Ps].base_,e,t)}else e=T6(t,n);return fNe(t,e,!0),$T(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==KV?e:void 0}function T6(e,t){if(AN(t))return t;const n=t[Ps];if(!n)return qL(t,e.handledSet_,e);if(!TN(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:s}=n;if(s)for(;s.length>0;)s.pop()(e);tW(n,e)}return n.copy_}function fNe(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&WL(t,n)}function JV(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var TN=(e,t)=>e.scope_===t,hNe=[];function eW(e,t,n,s){const r=Kl(e),i=e.type_;if(s!==void 0&&OT(r,s,i)===t){xv(r,s,n,i);return}if(!e.draftLocations_){const o=e.draftLocations_=new Map;Cx(r,(d,c)=>{if(vo(c)){const m=o.get(c)||[];m.push(d),o.set(c,m)}})}const l=e.draftLocations_.get(t)??hNe;for(const o of l)xv(r,o,n,i)}function gNe(e,t,n){e.callbacks_.push(function(r){const i=t;if(!i||!TN(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const l=VL(i);eW(e,i.draft_??i,l,n),tW(i,r)})}function tW(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}JV(e)}}function pNe(e,t,n){const{scope_:s}=e;if(vo(n)){const r=n[Ps];TN(r,s)&&r.callbacks_.push(function(){Eb(e);const l=VL(r);eW(e,n,l,t)})}else Pi(n)&&e.callbacks_.push(function(){const i=Kl(e);OT(i,t,e.type_)===n&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&qL(OT(e.copy_,t,e.type_),s.handledSet_,s)})}function qL(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||vo(e)||t.has(e)||!Pi(e)||AN(e)||(t.add(e),Cx(e,(s,r)=>{if(vo(r)){const i=r[Ps];if(TN(i,n)){const l=VL(i);xv(e,s,l,e.type_),JV(i)}}else Pi(r)&&qL(r,t,n)})),e}function xNe(e,t){const n=CN(e),s={type_:n?1:0,scope_:t?t.scope_:ZV(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=YL;n&&(r=[s],i=bp);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,[o,s]}var YL={get(e,t){if(t===Ps)return e;let n=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const r=Kl(e);if(!N6(r,t,e.type_))return yNe(e,r,t);const i=r[t];if(e.finalized_||!Pi(i)||s&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&cNe(t))return i;if(i===b2(e.base_,t)){Eb(e);const l=e.type_===1?+t:t,o=UT(e.scope_,i,e,l);return e.copy_[l]=o}return i},has(e,t){return t in Kl(e)},ownKeys(e){return Reflect.ownKeys(Kl(e))},set(e,t,n){const s=aW(Kl(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=b2(Kl(e),t),i=r?.[Ps];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(oNe(n,r)&&(n!==void 0||N6(e.base_,t,e.type_)))return!0;Eb(e),zT(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),pNe(e,t,n)),!0},deleteProperty(e,t){return Eb(e),b2(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),zT(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Kl(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{[Tb]:!0,[DT]:e.type_!==1||t!=="length",[pv]:s[pv],[xp]:n[t]}},defineProperty(){Si(11)},getPrototypeOf(e){return pf(e.base_)},setPrototypeOf(){Si(12)}},bp={};Cx(YL,(e,t)=>{bp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});bp.deleteProperty=function(e,t){return bp.set.call(this,e,t,void 0)};bp.set=function(e,t,n){return YL.set.call(this,e[0],t,n,e[0])};function b2(e,t){const n=e[Ps];return(n?Kl(n):e)[t]}function yNe(e,t,n){const s=aW(t,n);return s?xp in s?s[xp]:s.get?.call(e.draft_):void 0}function aW(e,t){if(!(t in e))return;let n=pf(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=pf(n)}}function zT(e){e.modified_||(e.modified_=!0,e.parent_&&zT(e.parent_))}function Eb(e){e.copy_||(e.assigned_=new Map,e.copy_=MT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bNe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,s,r)=>{if(Um(n)&&!Um(s)){const l=s;s=n;const o=this;return function(c=l,...m){return o.produce(c,h=>s.call(this,h,...m))}}Um(s)||Si(6),r!==void 0&&!Um(r)&&Si(7);let i;if(Pi(n)){const l=_6(this),o=UT(l,n,void 0);let d=!0;try{i=s(o),d=!1}finally{d?$T(l):RT(l)}return S6(l,r),A6(i,l)}else if(!n||!GL(n)){if(i=s(n),i===void 0&&(i=n),i===KV&&(i=void 0),this.autoFreeze_&&WL(i,!0),r){const l=[],o=[];uu(IT).generateReplacementPatches_(n,i,{patches_:l,inversePatches_:o}),r(l,o)}return i}else Si(1,n)},this.produceWithPatches=(n,s)=>{if(Um(n))return(o,...d)=>this.produceWithPatches(o,c=>n(c,...d));let r,i;return[this.produce(n,s,(o,d)=>{r=o,i=d}),r,i]},y2(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),y2(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),y2(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Pi(t)||Si(8),vo(t)&&(t=Ti(t));const n=_6(this),s=UT(n,t,void 0);return s[Ps].isManual_=!0,RT(n),s}finishDraft(t,n){const s=t&&t[Ps];(!s||!s.isManual_)&&Si(9);const{scope_:r}=s;return S6(r,n),A6(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let s;for(s=n.length-1;s>=0;s--){const i=n[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(n=n.slice(s+1));const r=uu(IT).applyPatches_;return vo(t)?r(t,n):this.produce(t,i=>r(i,n))}};function UT(e,t,n,s){const[r,i]=SN(t)?uu(yv).proxyMap_(t,n):_N(t)?uu(yv).proxySet_(t,n):xNe(t,n);return(n?.scope_??ZV()).drafts_.push(r),i.callbacks_=n?.callbacks_??[],i.key_=s,n&&s!==void 0?gNe(n,i,s):i.callbacks_.push(function(d){d.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:c}=d;i.modified_&&c&&c.generatePatches_(i,[],d)}),r}function Ti(e){return vo(e)||Si(10,e),nW(e)}function nW(e){if(!Pi(e)||AN(e))return e;const t=e[Ps];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=MT(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=MT(e,!0);return Cx(n,(r,i)=>{xv(n,r,nW(i))},s),t&&(t.finalized_=!1),n}var vNe=new bNe,sW=vNe.produce;function rW(e){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,e):r(i)}var wNe=rW(),NNe=rW,jNe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hv:hv.apply(null,arguments)};function ai(e,t){function n(...s){if(t){let r=t(...s);if(!r)throw new Error(Sr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=s=>YV(s)&&s.type===e,n}var iW=class Pg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Pg.prototype)}static get[Symbol.species](){return Pg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Pg(...t[0].concat(this)):new Pg(...t.concat(this))}};function E6(e){return Pi(e)?sW(e,()=>{}):e}function _y(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function CNe(e){return typeof e=="boolean"}var SNe=()=>function(t){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let l=new iW;return n&&(CNe(n)?l.push(wNe):l.push(NNe(n.extraArgument))),l},lW="RTK_autoBatch",qa=()=>e=>({payload:e,meta:{[lW]:!0}}),k6=e=>t=>{setTimeout(t,e)},oW=(e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let r=!0,i=!1,l=!1;const o=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:k6(10):e.type==="callback"?e.queueNotification:k6(e.timeout),c=()=>{l=!1,i&&(i=!1,o.forEach(m=>m()))};return Object.assign({},s,{subscribe(m){const h=()=>r&&m(),p=s.subscribe(h);return o.add(m),()=>{p(),o.delete(m)}},dispatch(m){try{return r=!m?.meta?.[lW],i=!r,i&&(l||(l=!0,d(c))),s.dispatch(m)}finally{r=!0}}})},_Ne=e=>function(n){const{autoBatch:s=!0}=n??{};let r=new iW(e);return s&&r.push(oW(typeof s=="object"?s:void 0)),r};function ANe(e){const t=SNe(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof n=="function")o=n;else if(HL(n))o=qV(n);else throw new Error(Sr(1));let d;typeof s=="function"?d=s(t):d=t();let c=hv;r&&(c=jNe({trace:!1,...typeof r=="object"&&r}));const m=iNe(...d),h=_Ne(m);let p=typeof l=="function"?l(h):h();const b=c(...p);return WV(o,i,b)}function cW(e){const t={},n=[];let s;const r={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Sr(28));if(o in t)throw new Error(Sr(29));return t[o]=l,r},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:i.settled,reducer:l.settled}),r},addMatcher(i,l){return n.push({matcher:i,reducer:l}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,n,s]}function TNe(e){return typeof e=="function"}function ENe(e,t){let[n,s,r]=cW(t),i;if(TNe(e))i=()=>E6(e());else{const o=E6(e);i=()=>o}function l(o=i(),d){let c=[n[d.type],...s.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return c.filter(m=>!!m).length===0&&(c=[r]),c.reduce((m,h)=>{if(h)if(vo(m)){const b=h(m,d);return b===void 0?m:b}else{if(Pi(m))return sW(m,p=>h(p,d));{const p=h(m,d);if(p===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return m},o)}return l.getInitialState=i,l}var kNe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LNe=(e=21)=>{let t="",n=e;for(;n--;)t+=kNe[Math.random()*64|0];return t},PNe=Symbol.for("rtk-slice-createasyncthunk");function DNe(e,t){return`${e}/${t}`}function ONe({creators:e}={}){const t=e?.asyncThunk?.[PNe];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Sr(11));const l=(typeof s.reducers=="function"?s.reducers(INe()):s.reducers)||{},o=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(S,_){const A=typeof S=="string"?S:S.type;if(!A)throw new Error(Sr(12));if(A in d.sliceCaseReducersByType)throw new Error(Sr(13));return d.sliceCaseReducersByType[A]=_,c},addMatcher(S,_){return d.sliceMatchers.push({matcher:S,reducer:_}),c},exposeAction(S,_){return d.actionCreators[S]=_,c},exposeCaseReducer(S,_){return d.sliceCaseReducersByName[S]=_,c}};o.forEach(S=>{const _=l[S],A={reducerName:S,type:DNe(r,S),createNotation:typeof s.reducers=="function"};RNe(_)?UNe(A,_,c,t):$Ne(A,_,c)});function m(){const[S={},_=[],A=void 0]=typeof s.extraReducers=="function"?cW(s.extraReducers):[s.extraReducers],T={...S,...d.sliceCaseReducersByType};return ENe(s.initialState,E=>{for(let D in T)E.addCase(D,T[D]);for(let D of d.sliceMatchers)E.addMatcher(D.matcher,D.reducer);for(let D of _)E.addMatcher(D.matcher,D.reducer);A&&E.addDefaultCase(A)})}const h=S=>S,p=new Map,b=new WeakMap;let w;function x(S,_){return w||(w=m()),w(S,_)}function v(){return w||(w=m()),w.getInitialState()}function j(S,_=!1){function A(E){let D=E[S];return typeof D>"u"&&_&&(D=_y(b,A,v)),D}function T(E=h){const D=_y(p,_,()=>new WeakMap);return _y(D,E,()=>{const z={};for(const[K,B]of Object.entries(s.selectors??{}))z[K]=MNe(B,E,()=>_y(b,E,v),_);return z})}return{reducerPath:S,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const C={name:r,reducer:x,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:v,...j(i),injectInto(S,{reducerPath:_,...A}={}){const T=_??i;return S.inject({reducerPath:T,reducer:x},A),{...C,...j(T,!0)}}};return C}}function MNe(e,t,n,s){function r(i,...l){let o=t(i);return typeof o>"u"&&s&&(o=n()),e(o,...l)}return r.unwrapped=e,r}var ar=ONe();function INe(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function $Ne({type:e,reducerName:t,createNotation:n},s,r){let i,l;if("reducer"in s){if(n&&!zNe(s))throw new Error(Sr(17));i=s.reducer,l=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?ai(e,l):ai(e))}function RNe(e){return e._reducerDefinitionType==="asyncThunk"}function zNe(e){return e._reducerDefinitionType==="reducerWithPrepare"}function UNe({type:e,reducerName:t},n,s,r){if(!r)throw new Error(Sr(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:d,settled:c,options:m}=n,h=r(e,i,m);s.exposeAction(t,h),l&&s.addCase(h.fulfilled,l),o&&s.addCase(h.pending,o),d&&s.addCase(h.rejected,d),c&&s.addMatcher(h.settled,c),s.exposeCaseReducer(t,{fulfilled:l||Ay,pending:o||Ay,rejected:d||Ay,settled:c||Ay})}function Ay(){}var FNe="task",dW="listener",uW="completed",KL="cancelled",BNe=`task-${KL}`,HNe=`task-${uW}`,FT=`${dW}-${KL}`,GNe=`${dW}-${uW}`,EN=class{constructor(e){this.code=e,this.message=`${FNe} ${KL} (reason: ${e})`}name="TaskAbortError";message},QL=(e,t)=>{if(typeof e!="function")throw new TypeError(Sr(32))},bv=()=>{},mW=(e,t=bv)=>(e.catch(t),e),fW=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Kd=e=>{if(e.aborted)throw new EN(e.reason)};function hW(e,t){let n=bv;return new Promise((s,r)=>{const i=()=>r(new EN(e.reason));if(e.aborted){i();return}n=fW(e,i),t.finally(()=>n()).then(s,r)}).finally(()=>{n=bv})}var VNe=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof EN?"cancelled":"rejected",error:n}}finally{t?.()}},vv=e=>t=>mW(hW(e,t).then(n=>(Kd(e),n))),gW=e=>{const t=vv(e);return n=>t(new Promise(s=>setTimeout(s,n)))},{assign:Zm}=Object,L6={},kN="listenerMiddleware",WNe=(e,t)=>{const n=s=>fW(e,()=>s.abort(e.reason));return(s,r)=>{QL(s);const i=new AbortController;n(i);const l=VNe(async()=>{Kd(e),Kd(i.signal);const o=await s({pause:vv(i.signal),delay:gW(i.signal),signal:i.signal});return Kd(i.signal),o},()=>i.abort(HNe));return r?.autoJoin&&t.push(l.catch(bv)),{result:vv(e)(l),cancel(){i.abort(BNe)}}}},qNe=(e,t)=>{const n=async(s,r)=>{Kd(t);let i=()=>{};const o=[new Promise((d,c)=>{let m=e({predicate:s,effect:(h,p)=>{p.unsubscribe(),d([h,p.getState(),p.getOriginalState()])}});i=()=>{m(),c()}})];r!=null&&o.push(new Promise(d=>setTimeout(d,r,null)));try{const d=await hW(t,Promise.race(o));return Kd(t),d}finally{i()}};return(s,r)=>mW(n(s,r))},pW=e=>{let{type:t,actionCreator:n,matcher:s,predicate:r,effect:i}=e;if(t)r=ai(t).match;else if(n)t=n.type,r=n.match;else if(s)r=s;else if(!r)throw new Error(Sr(21));return QL(i),{predicate:r,type:t,effect:i}},xW=Zm(e=>{const{type:t,predicate:n,effect:s}=pW(e);return{id:LNe(),effect:s,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Sr(22))}}},{withTypes:()=>xW}),P6=(e,t)=>{const{type:n,effect:s,predicate:r}=pW(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===r)&&i.effect===s)},BT=e=>{e.pending.forEach(t=>{t.abort(FT)})},YNe=(e,t)=>()=>{for(const n of t.keys())BT(n);e.clear()},D6=(e,t,n)=>{try{e(t,n)}catch(s){setTimeout(()=>{throw s},0)}},yW=Zm(ai(`${kN}/add`),{withTypes:()=>yW}),KNe=ai(`${kN}/removeAll`),bW=Zm(ai(`${kN}/remove`),{withTypes:()=>bW}),QNe=(...e)=>{console.error(`${kN}/error`,...e)},_x=(e={})=>{const t=new Map,n=new Map,s=b=>{const w=n.get(b)??0;n.set(b,w+1)},r=b=>{const w=n.get(b)??1;w===1?n.delete(b):n.set(b,w-1)},{extra:i,onError:l=QNe}=e;QL(l);const o=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),w=>{b.unsubscribe(),w?.cancelActive&&BT(b)}),d=b=>{const w=P6(t,b)??xW(b);return o(w)};Zm(d,{withTypes:()=>d});const c=b=>{const w=P6(t,b);return w&&(w.unsubscribe(),b.cancelActive&&BT(w)),!!w};Zm(c,{withTypes:()=>c});const m=async(b,w,x,v)=>{const j=new AbortController,C=qNe(d,j.signal),S=[];try{b.pending.add(j),s(b),await Promise.resolve(b.effect(w,Zm({},x,{getOriginalState:v,condition:(_,A)=>C(_,A).then(Boolean),take:C,delay:gW(j.signal),pause:vv(j.signal),extra:i,signal:j.signal,fork:WNe(j.signal,S),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((_,A,T)=>{_!==j&&(_.abort(FT),T.delete(_))})},cancel:()=>{j.abort(FT),b.pending.delete(j)},throwIfCancelled:()=>{Kd(j.signal)}})))}catch(_){_ instanceof EN||D6(l,_,{raisedBy:"effect"})}finally{await Promise.all(S),j.abort(GNe),r(b),b.pending.delete(j)}},h=YNe(t,n);return{middleware:b=>w=>x=>{if(!YV(x))return w(x);if(yW.match(x))return d(x.payload);if(KNe.match(x)){h();return}if(bW.match(x))return c(x.payload);let v=b.getState();const j=()=>{if(v===L6)throw new Error(Sr(23));return v};let C;try{if(C=w(x),t.size>0){const S=b.getState(),_=Array.from(t.values());for(const A of _){let T=!1;try{T=A.predicate(x,S,v)}catch(E){T=!1,D6(l,E,{raisedBy:"predicate"})}T&&m(A,x,b,j)}}}finally{v=L6}return C},startListening:d,stopListening:c,clearListeners:h}};function Sr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var XNe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},vW=ar({name:"chartLayout",initialState:XNe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,s,r,i;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ZNe,setLayout:JNe,setChartSize:eje,setScale:tje}=vW.actions,aje=vW.reducer;function wW(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function tn(e){return Number.isFinite(e)}function gl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function O6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Bm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O6(Object(n),!0).forEach(function(s){nje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nje(e,t,n){return(t=sje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sje(e){var t=rje(e,"string");return typeof t=="symbol"?t:t+""}function rje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ba(e,t,n){return Zn(e)||Zn(t)?n:hl(t)?du(e,t,n):typeof t=="function"?t(e):n}var ije=(e,t,n)=>{if(t&&n){var{width:s,height:r}=n,{align:i,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&i!=="center"&&Lt(e[i]))return Bm(Bm({},e),{},{[i]:e[i]+(s||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&l!=="middle"&&Lt(e[l]))return Bm(Bm({},e),{},{[l]:e[l]+(r||0)})}return e},ku=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",NW=(e,t,n,s)=>{if(s)return e.map(o=>o.coordinate);var r,i,l=e.map(o=>(o.coordinate===t&&(r=!0),o.coordinate===n&&(i=!0),o.coordinate));return r||l.push(t),i||l.push(n),l},jW=(e,t,n)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:l,realScaleType:o,isCategorical:d,categoricalDomain:c,tickCount:m,ticks:h,niceTicks:p,axisType:b}=e;if(!l)return null;var w=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,x=r==="category"&&l.bandwidth?l.bandwidth()/w:0;if(x=b==="angleAxis"&&i&&i.length>=2?Xn(i[0]-i[1])*2*x:x,h||p){var v=(h||p||[]).map((j,C)=>{var S=s?s.indexOf(j):j;return{coordinate:l(S)+x,value:j,offset:x,index:C}});return v.filter(j=>!Li(j.coordinate))}return d&&c?c.map((j,C)=>({coordinate:l(j)+x,value:j,index:C,offset:x})):l.ticks&&m!=null?l.ticks(m).map((j,C)=>({coordinate:l(j)+x,value:j,offset:x,index:C})):l.domain().map((j,C)=>({coordinate:l(j)+x,value:s?s[j]:j,index:C,offset:x}))},M6=1e-4,lje=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,s=e.range(),r=Math.min(s[0],s[1])-M6,i=Math.max(s[0],s[1])+M6,l=e(t[0]),o=e(t[n-1]);(l<r||l>i||o<r||o>i)&&e.domain([t[0],t[n-1]])}},oje=(e,t)=>{if(!t||t.length!==2||!Lt(t[0])||!Lt(t[1]))return e;var n=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!Lt(e[0])||e[0]<n)&&(r[0]=n),(!Lt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<n&&(r[1]=n),r},cje=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0,o=0;o<n;++o){var d=e[o],c=d?.[r];if(c!=null){var m=c[1],h=c[0],p=Li(m)?h:m;p>=0?(c[0]=i,c[1]=i+p,i=m):(c[0]=l,c[1]=l+p,l=m)}}}},dje=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,l=0;l<n;++l){var o=e[l],d=o?.[r];if(d!=null){var c=Li(d[1])?d[0]:d[1];c>=0?(d[0]=i,d[1]=i+c,i=d[1]):(d[0]=0,d[1]=0)}}}},uje={sign:cje,expand:Z9,none:Dc,silhouette:J9,wiggle:eG,positive:dje},mje=(e,t,n)=>{var s,r=(s=uje[n])!==null&&s!==void 0?s:Dc,i=uL().keys(t).value((o,d)=>Number(Ba(o,d,0))).order(lu).offset(r),l=i(e);return l.forEach((o,d)=>{o.forEach((c,m)=>{var h=Ba(e[m],t[d],0);Array.isArray(h)&&h.length===2&&Lt(h[0])&&Lt(h[1])&&(c[0]=h[0],c[1]=h[1])})}),l};function fje(e){return e==null?void 0:String(e)}var I6=e=>{var{axis:t,ticks:n,offset:s,bandSize:r,entry:i,index:l}=e;if(t.type==="category")return n[l]?n[l].coordinate+s:null;var o=Ba(i,t.dataKey,t.scale.domain()[l]);return Zn(o)?null:t.scale(o)-r/2+s},hje=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var s=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return s<=0&&r>=0?0:r<0?r:s}return n[0]},gje=e=>{var t=e.flat(2).filter(Lt);return[Math.min(...t),Math.max(...t)]},pje=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],xje=(e,t,n)=>{if(e!=null)return pje(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:l}=i,o=l.reduce((d,c)=>{var m=wW(c,t,n),h=gje(m);return!tn(h[0])||!tn(h[1])?d:[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],s[0]),Math.max(o[1],s[1])]},[1/0,-1/0]))},$6=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,R6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wv=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&t&&t.length>=2){for(var r=NN(t,m=>m.coordinate),i=1/0,l=1,o=r.length;l<o;l++){var d=r[l],c=r[l-1];i=Math.min((d?.coordinate||0)-(c?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function z6(e){var{tooltipEntrySettings:t,dataKey:n,payload:s,value:r,name:i}=e;return Bm(Bm({},t),{},{dataKey:n,payload:s,value:r,name:i})}function LN(e,t){if(e)return String(e);if(typeof t=="string")return t}var yje=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},bje=(e,t)=>t==="centric"?e.angle:e.radius,ko=e=>e.layout.width,Lo=e=>e.layout.height,vje=e=>e.layout.scale,CW=e=>e.layout.margin,PN=Xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),DN=Xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),SW="data-recharts-item-index",_W="data-recharts-item-id",Ax=60;function U6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ty(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U6(Object(n),!0).forEach(function(s){wje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wje(e,t,n){return(t=Nje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nje(e){var t=jje(e,"string");return typeof t=="symbol"?t:t+""}function jje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cje=e=>e.brush.height;function Sje(e){var t=DN(e);return t.reduce((n,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Ax;return n+r}return n},0)}function _je(e){var t=DN(e);return t.reduce((n,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Ax;return n+r}return n},0)}function Aje(e){var t=PN(e);return t.reduce((n,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?n+s.height:n,0)}function Tje(e){var t=PN(e);return t.reduce((n,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?n+s.height:n,0)}var Bn=Xe([ko,Lo,CW,Cje,Sje,_je,Aje,Tje,VV,eNe],(e,t,n,s,r,i,l,o,d,c)=>{var m={left:(n.left||0)+r,right:(n.right||0)+i},h={top:(n.top||0)+l,bottom:(n.bottom||0)+o},p=Ty(Ty({},h),m),b=p.bottom;p.bottom+=s,p=ije(p,d,c);var w=e-p.left-p.right,x=t-p.top-p.bottom;return Ty(Ty({brushBottom:b},p),{},{width:Math.max(w,0),height:Math.max(x,0)})}),Eje=Xe(Bn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),XL=Xe(ko,Lo,(e,t)=>({x:0,y:0,width:e,height:t})),kje=g.createContext(null),nr=()=>g.useContext(kje)!=null,ON=e=>e.brush,MN=Xe([ON,Bn,CW],(e,t,n)=>({height:e.height,x:Lt(e.x)?e.x:t.left,y:Lt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Lt(e.width)?e.width:t.width})),v2={},w2={},N2={},F6;function Lje(){return F6||(F6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s,{signal:r,edges:i}={}){let l,o=null;const d=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),m=()=>{o!==null&&(n.apply(l,o),l=void 0,o=null)},h=()=>{c&&m(),x()};let p=null;const b=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},s)},w=()=>{p!==null&&(clearTimeout(p),p=null)},x=()=>{w(),l=void 0,o=null},v=()=>{m()},j=function(...C){if(r?.aborted)return;l=this,o=C;const S=p==null;b(),d&&S&&m()};return j.schedule=b,j.cancel=x,j.flush=v,r?.addEventListener("abort",x,{once:!0}),j}e.debounce=t})(N2)),N2}var B6;function Pje(){return B6||(B6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lje();function n(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:o=!0,maxWait:d}=i,c=Array(2);l&&(c[0]="leading"),o&&(c[1]="trailing");let m,h=null;const p=t.debounce(function(...x){m=s.apply(this,x),h=null},r,{edges:c}),b=function(...x){return d!=null&&(h===null&&(h=Date.now()),Date.now()-h>=d)?(m=s.apply(this,x),h=Date.now(),p.cancel(),p.schedule(),m):(p.apply(this,x),m)},w=()=>(p.flush(),m);return b.cancel=p.cancel,b.flush=w,b}e.debounce=n})(w2)),w2}var H6;function Dje(){return H6||(H6=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pje();function n(s,r=0,i={}){const{leading:l=!0,trailing:o=!0}=i;return t.debounce(s,r,{leading:l,maxWait:r,trailing:o})}e.throttle=n})(v2)),v2}var j2,G6;function Oje(){return G6||(G6=1,j2=Dje().throttle),j2}var Mje=Oje();const Ije=Di(Mje);var Nv=function(t,n){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=0;console.warn(n.replace(/%s/g,()=>r[l++]))}},AW=(e,t,n)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:l}=n,o=bo(s)?e:Number(s),d=bo(r)?t:Number(r);return i&&i>0&&(o?d=o/i:d&&(o=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:o,calculatedHeight:d}},$je={width:0,height:0,overflow:"visible"},Rje={width:0,overflowX:"visible"},zje={height:0,overflowY:"visible"},Uje={},Fje=e=>{var{width:t,height:n}=e,s=bo(t),r=bo(n);return s&&r?$je:s?Rje:r?zje:Uje};function Bje(e){var{width:t,height:n,aspect:s}=e,r=t,i=n;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function HT(){return HT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},HT.apply(null,arguments)}function V6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function W6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V6(Object(n),!0).forEach(function(s){Hje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V6(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Hje(e,t,n){return(t=Gje(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gje(e){var t=Vje(e,"string");return typeof t=="symbol"?t:t+""}function Vje(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TW=g.createContext({width:-1,height:-1});function Wje(e){return gl(e.width)&&gl(e.height)}function EW(e){var{children:t,width:n,height:s}=e,r=g.useMemo(()=>({width:n,height:s}),[n,s]);return Wje(r)?g.createElement(TW.Provider,{value:r},t):null}var ZL=()=>g.useContext(TW),qje=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:l=0,minHeight:o,maxHeight:d,children:c,debounce:m=0,id:h,className:p,onResize:b,style:w={}}=e,x=g.useRef(null),v=g.useRef();v.current=b,g.useImperativeHandle(t,()=>x.current);var[j,C]=g.useState({containerWidth:s.width,containerHeight:s.height}),S=g.useCallback((D,z)=>{C(K=>{var B=Math.round(D),O=Math.round(z);return K.containerWidth===B&&K.containerHeight===O?K:{containerWidth:B,containerHeight:O}})},[]);g.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return jx;var D=O=>{var L,{width:H,height:ae}=O[0].contentRect;S(H,ae),(L=v.current)===null||L===void 0||L.call(v,H,ae)};m>0&&(D=Ije(D,m,{trailing:!0,leading:!1}));var z=new ResizeObserver(D),{width:K,height:B}=x.current.getBoundingClientRect();return S(K,B),z.observe(x.current),()=>{z.disconnect()}},[S,m]);var{containerWidth:_,containerHeight:A}=j;Nv(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:T,calculatedHeight:E}=AW(_,A,{width:r,height:i,aspect:n,maxHeight:d});return Nv(T!=null&&T>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,E,r,i,l,o,n),g.createElement("div",{id:h?"".concat(h):void 0,className:Et("recharts-responsive-container",p),style:W6(W6({},w),{},{width:r,height:i,minWidth:l,minHeight:o,maxHeight:d}),ref:x},g.createElement("div",{style:Fje({width:r,height:i})},g.createElement(EW,{width:T,height:E},c)))}),q6=g.forwardRef((e,t)=>{var n=ZL();if(gl(n.width)&&gl(n.height))return e.children;var{width:s,height:r}=Bje({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=AW(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return Lt(i)&&Lt(l)?g.createElement(EW,{width:i,height:l},e.children):g.createElement(qje,HT({},e,{width:s,height:r,ref:t}))});function kW(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var IN=()=>{var e,t=nr(),n=Dt(Eje),s=Dt(MN),r=(e=Dt(ON))===null||e===void 0?void 0:e.padding;return!t||!s||!r?n:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},Yje={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},LW=()=>{var e;return(e=Dt(Bn))!==null&&e!==void 0?e:Yje},PW=()=>Dt(ko),DW=()=>Dt(Lo),ma=e=>e.layout.layoutType,Tx=()=>Dt(ma),Kje=()=>{var e=Tx();return e!==void 0},$N=e=>{var t=Xa(),n=nr(),{width:s,height:r}=e,i=ZL(),l=s,o=r;return i&&(l=i.width>0?i.width:s,o=i.height>0?i.height:r),g.useEffect(()=>{!n&&gl(l)&&gl(o)&&t(eje({width:l,height:o}))},[t,n,l,o]),null},OW=Symbol.for("immer-nothing"),Y6=Symbol.for("immer-draftable"),Ar=Symbol.for("immer-state");function _i(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vp=Object.getPrototypeOf;function xf(e){return!!e&&!!e[Ar]}function mu(e){return e?MW(e)||Array.isArray(e)||!!e[Y6]||!!e.constructor?.[Y6]||Ex(e)||zN(e):!1}var Qje=Object.prototype.constructor.toString(),K6=new WeakMap;function MW(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let s=K6.get(n);return s===void 0&&(s=Function.toString.call(n),K6.set(n,s)),s===Qje}function jv(e,t,n=!0){RN(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function RN(e){const t=e[Ar];return t?t.type_:Array.isArray(e)?1:Ex(e)?2:zN(e)?3:0}function GT(e,t){return RN(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IW(e,t,n){const s=RN(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function Xje(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ex(e){return e instanceof Map}function zN(e){return e instanceof Set}function _d(e){return e.copy_||e.base_}function VT(e,t){if(Ex(e))return new Map(e);if(zN(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=MW(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[Ar];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const l=r[i],o=s[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(s[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(vp(e),s)}else{const s=vp(e);if(s!==null&&n)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function JL(e,t=!1){return UN(e)||xf(e)||!mu(e)||(RN(e)>1&&Object.defineProperties(e,{set:Ey,add:Ey,clear:Ey,delete:Ey}),Object.freeze(e),t&&Object.values(e).forEach(n=>JL(n,!0))),e}function Zje(){_i(2)}var Ey={value:Zje};function UN(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Jje={};function fu(e){const t=Jje[e];return t||_i(0,e),t}var wp;function $W(){return wp}function e1e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Q6(e,t){t&&(fu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function WT(e){qT(e),e.drafts_.forEach(t1e),e.drafts_=null}function qT(e){e===wp&&(wp=e.parent_)}function X6(e){return wp=e1e(wp,e)}function t1e(e){const t=e[Ar];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Z6(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ar].modified_&&(WT(t),_i(4)),mu(e)&&(e=Cv(t,e),t.parent_||Sv(t,e)),t.patches_&&fu("Patches").generateReplacementPatches_(n[Ar].base_,e,t.patches_,t.inversePatches_)):e=Cv(t,n,[]),WT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==OW?e:void 0}function Cv(e,t,n){if(UN(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Ar];if(!r)return jv(t,(i,l)=>J6(e,r,t,i,l,n),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Sv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let l=i,o=!1;r.type_===3&&(l=new Set(i),i.clear(),o=!0),jv(l,(d,c)=>J6(e,r,i,d,c,n,o),s),Sv(e,i,!1),n&&e.patches_&&fu("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function J6(e,t,n,s,r,i,l){if(r==null||typeof r!="object"&&!l)return;const o=UN(r);if(!(o&&!l)){if(xf(r)){const d=i&&t&&t.type_!==3&&!GT(t.assigned_,s)?i.concat(s):void 0,c=Cv(e,r,d);if(IW(n,s,c),xf(c))e.canAutoFreeze_=!1;else return}else l&&n.add(r);if(mu(r)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&o)return;Cv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Ex(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&Sv(e,r)}}}function Sv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&JL(t,n)}function a1e(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:$W(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=e4;n&&(r=[s],i=Np);const{revoke:l,proxy:o}=Proxy.revocable(r,i);return s.draft_=o,s.revoke_=l,o}var e4={get(e,t){if(t===Ar)return e;const n=_d(e);if(!GT(n,t))return n1e(e,n,t);const s=n[t];return e.finalized_||!mu(s)?s:s===C2(e.base_,t)?(S2(e),e.copy_[t]=KT(s,e)):s},has(e,t){return t in _d(e)},ownKeys(e){return Reflect.ownKeys(_d(e))},set(e,t,n){const s=RW(_d(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=C2(_d(e),t),i=r?.[Ar];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Xje(n,r)&&(n!==void 0||GT(e.base_,t)))return!0;S2(e),YT(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return C2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,S2(e),YT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_d(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){_i(11)},getPrototypeOf(e){return vp(e.base_)},setPrototypeOf(){_i(12)}},Np={};jv(e4,(e,t)=>{Np[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Np.deleteProperty=function(e,t){return Np.set.call(this,e,t,void 0)};Np.set=function(e,t,n){return e4.set.call(this,e[0],t,n,e[0])};function C2(e,t){const n=e[Ar];return(n?_d(n):e)[t]}function n1e(e,t,n){const s=RW(t,n);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function RW(e,t){if(!(t in e))return;let n=vp(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=vp(n)}}function YT(e){e.modified_||(e.modified_=!0,e.parent_&&YT(e.parent_))}function S2(e){e.copy_||(e.copy_=VT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var s1e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const l=this;return function(d=i,...c){return l.produce(d,m=>n.call(this,m,...c))}}typeof n!="function"&&_i(6),s!==void 0&&typeof s!="function"&&_i(7);let r;if(mu(t)){const i=X6(this),l=KT(t,void 0);let o=!0;try{r=n(l),o=!1}finally{o?WT(i):qT(i)}return Q6(i,s),Z6(r,i)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===OW&&(r=void 0),this.autoFreeze_&&JL(r,!0),s){const i=[],l=[];fu("Patches").generateReplacementPatches_(t,r,i,l),s(i,l)}return r}else _i(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,d=>t(d,...o));let s,r;return[this.produce(t,n,(l,o)=>{s=l,r=o}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){mu(e)||_i(8),xf(e)&&(e=r1e(e));const t=X6(this),n=KT(e,void 0);return n[Ar].isManual_=!0,qT(t),n}finishDraft(e,t){const n=e&&e[Ar];(!n||!n.isManual_)&&_i(9);const{scope_:s}=n;return Q6(s,t),Z6(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=fu("Patches").applyPatches_;return xf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function KT(e,t){const n=Ex(e)?fu("MapSet").proxyMap_(e,t):zN(e)?fu("MapSet").proxySet_(e,t):a1e(e,t);return(t?t.scope_:$W()).drafts_.push(n),n}function r1e(e){return xf(e)||_i(10,e),zW(e)}function zW(e){if(!mu(e)||UN(e))return e;const t=e[Ar];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=VT(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=VT(e,!0);return jv(n,(r,i)=>{IW(n,r,zW(i))},s),t&&(t.finalized_=!1),n}var i1e=new s1e;i1e.produce;var l1e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},UW=ar({name:"legend",initialState:l1e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:qa()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Ti(e).payload.indexOf(n);r>-1&&(e.payload[r]=s)},prepare:qa()},removeLegendPayload:{reducer(e,t){var n=Ti(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:qa()}}}),{setLegendSize:C8e,setLegendSettings:S8e,addLegendPayload:FW,replaceLegendPayload:BW,removeLegendPayload:HW}=UW.actions,o1e=UW.reducer;function QT(){return QT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},QT.apply(null,arguments)}function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function _2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(s){c1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function c1e(e,t,n){return(t=d1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d1e(e){var t=u1e(e,"string");return typeof t=="symbol"?t:t+""}function u1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m1e(e){return Array.isArray(e)&&hl(e[0])&&hl(e[1])?e.join(" ~ "):e}var f1e=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:s={},labelStyle:r={},payload:i,formatter:l,itemSorter:o,wrapperClassName:d,labelClassName:c,label:m,labelFormatter:h,accessibilityLayer:p=!1}=e,b=()=>{if(i&&i.length){var A={padding:0,margin:0},T=(o?NN(i,o):i).map((E,D)=>{if(E.type==="none")return null;var z=E.formatter||l||m1e,{value:K,name:B}=E,O=K,L=B;if(z){var H=z(K,B,E,D,i);if(Array.isArray(H))[O,L]=H;else if(H!=null)O=H;else return null}var ae=_2({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},s);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:ae},hl(L)?g.createElement("span",{className:"recharts-tooltip-item-name"},L):null,hl(L)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},O),g.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null},w=_2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),x=_2({margin:0},r),v=!Zn(m),j=v?m:"",C=Et("recharts-default-tooltip",d),S=Et("recharts-tooltip-label",c);v&&h&&i!==void 0&&i!==null&&(j=h(m,i));var _=p?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",QT({className:C,style:w},_),g.createElement("p",{className:S,style:x},g.isValidElement(j)?j:"".concat(j)),b())},qh="recharts-tooltip-wrapper",h1e={visibility:"hidden"};function g1e(e){var{coordinate:t,translateX:n,translateY:s}=e;return Et(qh,{["".concat(qh,"-right")]:Lt(n)&&t&&Lt(t.x)&&n>=t.x,["".concat(qh,"-left")]:Lt(n)&&t&&Lt(t.x)&&n<t.x,["".concat(qh,"-bottom")]:Lt(s)&&t&&Lt(t.y)&&s>=t.y,["".concat(qh,"-top")]:Lt(s)&&t&&Lt(t.y)&&s<t.y})}function tR(e){var{allowEscapeViewBox:t,coordinate:n,key:s,offsetTopLeft:r,position:i,reverseDirection:l,tooltipDimension:o,viewBox:d,viewBoxDimension:c}=e;if(i&&Lt(i[s]))return i[s];var m=n[s]-o-(r>0?r:0),h=n[s]+r;if(t[s])return l[s]?m:h;var p=d[s];if(p==null)return 0;if(l[s]){var b=m,w=p;return b<w?Math.max(h,p):Math.max(m,p)}if(c==null)return 0;var x=h+o,v=p+c;return x>v?Math.max(m,p):Math.max(h,p)}function p1e(e){var{translateX:t,translateY:n,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function x1e(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:l,useTranslate3d:o,viewBox:d}=e,c,m,h;return l.height>0&&l.width>0&&n?(m=tR({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),h=tR({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),c=p1e({translateX:m,translateY:h,useTranslate3d:o})):c=h1e,{cssProperties:c,cssClasses:g1e({translateX:m,translateY:h,coordinate:n})}}function aR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function ky(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aR(Object(n),!0).forEach(function(s){XT(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function XT(e,t,n){return(t=y1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y1e(e){var t=b1e(e,"string");return typeof t=="symbol"?t:t+""}function b1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v1e extends g.PureComponent{constructor(){super(...arguments),XT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),XT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:s,animationEasing:r,children:i,coordinate:l,hasPayload:o,isAnimationActive:d,offset:c,position:m,reverseDirection:h,useTranslate3d:p,viewBox:b,wrapperStyle:w,lastBoundingBox:x,innerRef:v,hasPortalFromProps:j}=this.props,{cssClasses:C,cssProperties:S}=x1e({allowEscapeViewBox:n,coordinate:l,offsetTopLeft:c,position:m,reverseDirection:h,tooltipBox:{height:x.height,width:x.width},useTranslate3d:p,viewBox:b}),_=j?{}:ky(ky({transition:d&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),A=ky(ky({},_),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},w);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:A,ref:v},i)}}var GW=()=>{var e;return(e=Dt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function ZT(){return ZT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ZT.apply(null,arguments)}function nR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function sR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nR(Object(n),!0).forEach(function(s){w1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function w1e(e,t,n){return(t=N1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N1e(e){var t=j1e(e,"string");return typeof t=="symbol"?t:t+""}function j1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rR={curveBasisClosed:efe,curveBasisOpen:tfe,curveBasis:Jme,curveBumpX:T9,curveBumpY:E9,curveLinearClosed:sfe,curveLinear:fx,curveMonotoneX:gT,curveMonotoneY:W9,curveNatural:Y9,curveStep:K9,curveStepAfter:X9,curveStepBefore:Q9},_v=e=>tn(e.x)&&tn(e.y),iR=e=>e.base!=null&&_v(e.base)&&_v(e),Yh=e=>e.x,Kh=e=>e.y,C1e=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Nx(e));return(n==="curveMonotone"||n==="curveBump")&&t?rR["".concat(n).concat(t==="vertical"?"Y":"X")]:rR[n]||fx},S1e=e=>{var{type:t="linear",points:n=[],baseLine:s,layout:r,connectNulls:i=!1}=e,l=C1e(t,r),o=i?n.filter(_v):n,d;if(Array.isArray(s)){var c=n.map((b,w)=>sR(sR({},b),{},{base:s[w]}));r==="vertical"?d=Eg().y(Kh).x1(Yh).x0(b=>b.base.x):d=Eg().x(Yh).y1(Kh).y0(b=>b.base.y);var m=d.defined(iR).curve(l),h=i?c.filter(iR):c;return m(h)}r==="vertical"&&Lt(s)?d=Eg().y(Kh).x1(Yh).x0(s):Lt(s)?d=Eg().x(Yh).y1(Kh).y0(s):d=oL().x(Yh).y(Kh);var p=d.defined(_v).curve(l);return p(o)},t4=e=>{var{className:t,points:n,path:s,pathRef:r}=e,i=Tx();if((!n||!n.length)&&!s)return null;var l={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},o=n&&n.length?S1e(l):s;return g.createElement("path",ZT({},ki(e),ywe(e),{className:Et("recharts-curve",t),d:o===null?void 0:o,ref:r}))},_1e=["x","y","top","left","width","height","className"];function JT(){return JT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},JT.apply(null,arguments)}function lR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function A1e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lR(Object(n),!0).forEach(function(s){T1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function T1e(e,t,n){return(t=E1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E1e(e){var t=k1e(e,"string");return typeof t=="symbol"?t:t+""}function k1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L1e(e,t){if(e==null)return{};var n,s,r=P1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P1e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var D1e=(e,t,n,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(n),O1e=e=>{var{x:t=0,y:n=0,top:s=0,left:r=0,width:i=0,height:l=0,className:o}=e,d=L1e(e,_1e),c=A1e({x:t,y:n,top:s,left:r,width:i,height:l},d);return!Lt(t)||!Lt(n)||!Lt(i)||!Lt(l)||!Lt(s)||!Lt(r)?null:g.createElement("path",JT({},ti(c),{className:Et("recharts-cross",o),d:D1e(t,n,i,l,s,r)}))};function M1e(e,t,n,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-r,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function oR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function cR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(n),!0).forEach(function(s){I1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I1e(e,t,n){return(t=$1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $1e(e){var t=R1e(e,"string");return typeof t=="symbol"?t:t+""}function R1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z1e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),VW=(e,t,n)=>e.map(s=>"".concat(z1e(s)," ").concat(t,"ms ").concat(n)).join(","),U1e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,s)=>n.filter(r=>s.includes(r))),jp=(e,t)=>Object.keys(t).reduce((n,s)=>cR(cR({},n),{},{[s]:e(s,t[s])}),{});function dR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dR(Object(n),!0).forEach(function(s){F1e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function F1e(e,t,n){return(t=B1e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B1e(e){var t=H1e(e,"string");return typeof t=="symbol"?t:t+""}function H1e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Av=(e,t,n)=>e+(t-e)*n,eE=e=>{var{from:t,to:n}=e;return t!==n},WW=(e,t,n)=>{var s=jp((r,i)=>{if(eE(i)){var[l,o]=e(i.from,i.to,i.velocity);return Pn(Pn({},i),{},{from:l,velocity:o})}return i},t);return n<1?jp((r,i)=>eE(i)&&s[r]!=null?Pn(Pn({},i),{},{velocity:Av(i.velocity,s[r].velocity,n),from:Av(i.from,s[r].from,n)}):i,t):WW(e,s,n-1)};function G1e(e,t,n,s,r,i){var l,o=s.reduce((p,b)=>Pn(Pn({},p),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),d=()=>jp((p,b)=>b.from,o),c=()=>!Object.values(o).filter(eE).length,m=null,h=p=>{l||(l=p);var b=p-l,w=b/n.dt;o=WW(n,o,w),r(Pn(Pn(Pn({},e),t),d())),l=p,c()||(m=i.setTimeout(h))};return()=>(m=i.setTimeout(h),()=>{var p;(p=m)===null||p===void 0||p()})}function V1e(e,t,n,s,r,i,l){var o=null,d=r.reduce((h,p)=>{var b=e[p],w=t[p];return b==null||w==null?h:Pn(Pn({},h),{},{[p]:[b,w]})},{}),c,m=h=>{c||(c=h);var p=(h-c)/s,b=jp((x,v)=>Av(...v,n(p)),d);if(i(Pn(Pn(Pn({},e),t),b)),p<1)o=l.setTimeout(m);else{var w=jp((x,v)=>Av(...v,n(1)),d);i(Pn(Pn(Pn({},e),t),w))}};return()=>(o=l.setTimeout(m),()=>{var h;(h=o)===null||h===void 0||h()})}const W1e=(e,t,n,s,r,i)=>{var l=U1e(e,t);return n==null?()=>(r(Pn(Pn({},e),t)),()=>{}):n.isStepper===!0?G1e(e,t,n,l,r,i):V1e(e,t,n,s,l,r,i)};var Tv=1e-4,qW=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],YW=(e,t)=>e.map((n,s)=>n*t**s).reduce((n,s)=>n+s),uR=(e,t)=>n=>{var s=qW(e,t);return YW(s,n)},q1e=(e,t)=>n=>{var s=qW(e,t),r=[...s.map((i,l)=>i*l).slice(1),0];return YW(r,n)},Y1e=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var s=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},K1e=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=Y1e(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},Q1e=(e,t,n,s)=>{var r=uR(e,n),i=uR(t,s),l=q1e(e,n),o=c=>c>1?1:c<0?0:c,d=c=>{for(var m=c>1?1:c,h=m,p=0;p<8;++p){var b=r(h)-m,w=l(h);if(Math.abs(b-m)<Tv||w<Tv)return i(h);h=o(h-b/w)}return i(h)};return d.isStepper=!1,d},mR=function(){return Q1e(...K1e(...arguments))},X1e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:s=8,dt:r=17}=t,i=(l,o,d)=>{var c=-(l-o)*n,m=d*s,h=d+(c-m)*r/1e3,p=d*r/1e3+l;return Math.abs(p-o)<Tv&&Math.abs(h)<Tv?[o,0]:[p,h]};return i.isStepper=!0,i.dt=r,i},Z1e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mR(e);case"spring":return X1e();default:if(e.split("(")[0]==="cubic-bezier")return mR(e)}return typeof e=="function"?e:null};function J1e(e){var t,n=()=>null,s=!1,r=null,i=l=>{if(!s){if(Array.isArray(l)){if(!l.length)return;var o=l,[d,...c]=o;if(typeof d=="number"){r=e.setTimeout(i.bind(null,c),d);return}i(d),r=e.setTimeout(i.bind(null,c));return}typeof l=="string"&&(t=l,n(t)),typeof l=="object"&&(t=l,n(t)),typeof l=="function"&&l()}};return{stop:()=>{s=!0},start:l=>{s=!1,r&&(r(),r=null),i(l)},subscribe:l=>(n=l,()=>{n=()=>null}),getTimeoutController:()=>e}}class eCe{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=l=>{l-s>=n?t(l):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function tCe(){return J1e(new eCe)}var aCe=g.createContext(tCe);function nCe(e,t){var n=g.useContext(aCe);return g.useMemo(()=>t??n(e),[e,t,n])}var sCe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),FN={isSsr:sCe()},rCe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},fR={t:0},A2={t:1};function BN(e){var t=_s(e,rCe),{isActive:n,canBegin:s,duration:r,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:d,children:c}=t,m=n==="auto"?!FN.isSsr:n,h=nCe(t.animationId,t.animationManager),[p,b]=g.useState(m?fR:A2),w=g.useRef(null);return g.useEffect(()=>{m||b(A2)},[m]),g.useEffect(()=>{if(!m||!s)return jx;var x=W1e(fR,A2,Z1e(i),r,b,h.getTimeoutController()),v=()=>{w.current=x()};return h.start([d,l,v,r,o]),()=>{h.stop(),w.current&&w.current(),o()}},[m,s,r,i,l,d,o,h]),c(p.t)}function HN(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(pp(t)),s=g.useRef(e);return s.current!==e&&(n.current=pp(t),s.current=e),n.current}var iCe=["radius"],lCe=["radius"],hR,gR,pR,xR,yR,bR,vR,wR,NR,jR;function CR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function SR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(n),!0).forEach(function(s){oCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function oCe(e,t,n){return(t=cCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cCe(e){var t=dCe(e,"string");return typeof t=="symbol"?t:t+""}function dCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ev.apply(null,arguments)}function _R(e,t){if(e==null)return{};var n,s,r=uCe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function uCe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Vi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var AR=(e,t,n,s,r)=>{var i=Nc(n),l=Nc(s),o=Math.min(Math.abs(i)/2,Math.abs(l)/2),d=l>=0?1:-1,c=i>=0?1:-1,m=l>=0&&i>=0||l<0&&i<0?1:0,h;if(o>0&&r instanceof Array){for(var p=[0,0,0,0],b=0,w=4;b<w;b++)p[b]=r[b]>o?o:r[b];h=cn(hR||(hR=Vi(["M",",",""])),e,t+d*p[0]),p[0]>0&&(h+=cn(gR||(gR=Vi(["A ",",",",0,0,",",",",",""])),p[0],p[0],m,e+c*p[0],t)),h+=cn(pR||(pR=Vi(["L ",",",""])),e+n-c*p[1],t),p[1]>0&&(h+=cn(xR||(xR=Vi(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],m,e+n,t+d*p[1])),h+=cn(yR||(yR=Vi(["L ",",",""])),e+n,t+s-d*p[2]),p[2]>0&&(h+=cn(bR||(bR=Vi(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],m,e+n-c*p[2],t+s)),h+=cn(vR||(vR=Vi(["L ",",",""])),e+c*p[3],t+s),p[3]>0&&(h+=cn(wR||(wR=Vi(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],m,e,t+s-d*p[3])),h+="Z"}else if(o>0&&r===+r&&r>0){var x=Math.min(o,r);h=cn(NR||(NR=Vi(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+d*x,x,x,m,e+c*x,t,e+n-c*x,t,x,x,m,e+n,t+d*x,e+n,t+s-d*x,x,x,m,e+n-c*x,t+s,e+c*x,t+s,x,x,m,e,t+s-d*x)}else h=cn(jR||(jR=Vi(["M ",","," h "," v "," h "," Z"])),e,t,n,s,-n);return h},TR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KW=e=>{var t=_s(e,TR),n=g.useRef(null),[s,r]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&r(q)}catch{}},[]);var{x:i,y:l,width:o,height:d,radius:c,className:m}=t,{animationEasing:h,animationDuration:p,animationBegin:b,isAnimationActive:w,isUpdateAnimationActive:x}=t,v=g.useRef(o),j=g.useRef(d),C=g.useRef(i),S=g.useRef(l),_=g.useMemo(()=>({x:i,y:l,width:o,height:d,radius:c}),[i,l,o,d,c]),A=HN(_,"rectangle-");if(i!==+i||l!==+l||o!==+o||d!==+d||o===0||d===0)return null;var T=Et("recharts-rectangle",m);if(!x){var E=ti(t),{radius:D}=E,z=_R(E,iCe);return g.createElement("path",Ev({},z,{x:Nc(i),y:Nc(l),width:Nc(o),height:Nc(d),radius:typeof c=="number"?c:void 0,className:T,d:AR(i,l,o,d,c)}))}var K=v.current,B=j.current,O=C.current,L=S.current,H="0px ".concat(s===-1?1:s,"px"),ae="".concat(s,"px 0px"),W=VW(["strokeDasharray"],p,typeof h=="string"?h:TR.animationEasing);return g.createElement(BN,{animationId:A,key:A,canBegin:s>0,duration:p,easing:h,isActive:x,begin:b},q=>{var le=Ln(K,o,q),Q=Ln(B,d,q),te=Ln(O,i,q),V=Ln(L,l,q);n.current&&(v.current=le,j.current=Q,C.current=te,S.current=V);var ee;w?q>0?ee={transition:W,strokeDasharray:ae}:ee={strokeDasharray:H}:ee={strokeDasharray:ae};var me=ti(t),{radius:we}=me,ve=_R(me,lCe);return g.createElement("path",Ev({},ve,{radius:typeof c=="number"?c:void 0,className:T,d:AR(te,V,le,Q,c),ref:n,style:SR(SR({},ee),t.style)}))})};function ER(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function kR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(n),!0).forEach(function(s){mCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ER(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function mCe(e,t,n){return(t=fCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fCe(e){var t=hCe(e,"string");return typeof t=="symbol"?t:t+""}function hCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kv=Math.PI/180,gCe=e=>e*180/Math.PI,_n=(e,t,n,s)=>({x:e+Math.cos(-kv*s)*n,y:t+Math.sin(-kv*s)*n}),QW=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},pCe=(e,t)=>{var{x:n,y:s}=e,{x:r,y:i}=t;return Math.sqrt((n-r)**2+(s-i)**2)},xCe=(e,t)=>{var{x:n,y:s}=e,{cx:r,cy:i}=t,l=pCe({x:n,y:s},{x:r,y:i});if(l<=0)return{radius:l,angle:0};var o=(n-r)/l,d=Math.acos(o);return s>i&&(d=2*Math.PI-d),{radius:l,angle:gCe(d),angleInRadian:d}},yCe=e=>{var{startAngle:t,endAngle:n}=e,s=Math.floor(t/360),r=Math.floor(n/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:n-i*360}},bCe=(e,t)=>{var{startAngle:n,endAngle:s}=t,r=Math.floor(n/360),i=Math.floor(s/360),l=Math.min(r,i);return e+l*360},vCe=(e,t)=>{var{chartX:n,chartY:s}=e,{radius:r,angle:i}=xCe({x:n,y:s},t),{innerRadius:l,outerRadius:o}=t;if(r<l||r>o||r===0)return null;var{startAngle:d,endAngle:c}=yCe(t),m=i,h;if(d<=c){for(;m>c;)m-=360;for(;m<d;)m+=360;h=m>=d&&m<=c}else{for(;m>d;)m-=360;for(;m<c;)m+=360;h=m>=c&&m<=d}return h?kR(kR({},t),{},{radius:r,angle:bCe(m,t)}):null};function XW(e){var{cx:t,cy:n,radius:s,startAngle:r,endAngle:i}=e,l=_n(t,n,s,r),o=_n(t,n,s,i);return{points:[l,o],cx:t,cy:n,radius:s,startAngle:r,endAngle:i}}var LR,PR,DR,OR,MR,IR,$R;function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tE.apply(null,arguments)}function zd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wCe=(e,t)=>{var n=Xn(t-e),s=Math.min(Math.abs(t-e),359.999);return n*s},Ly=e=>{var{cx:t,cy:n,radius:s,angle:r,sign:i,isExternal:l,cornerRadius:o,cornerIsExternal:d}=e,c=o*(l?1:-1)+s,m=Math.asin(o/c)/kv,h=d?r:r+i*m,p=_n(t,n,c,h),b=_n(t,n,s,h),w=d?r-i*m:r,x=_n(t,n,c*Math.cos(m*kv),w);return{center:p,circleTangency:b,lineTangency:x,theta:m}},ZW=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:i,endAngle:l}=e,o=wCe(i,l),d=i+o,c=_n(t,n,r,i),m=_n(t,n,r,d),h=cn(LR||(LR=zd(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),c.x,c.y,r,r,+(Math.abs(o)>180),+(i>d),m.x,m.y);if(s>0){var p=_n(t,n,s,i),b=_n(t,n,s,d);h+=cn(PR||(PR=zd(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,s,s,+(Math.abs(o)>180),+(i<=d),p.x,p.y)}else h+=cn(DR||(DR=zd(["L ",","," Z"])),t,n);return h},NCe=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:d,endAngle:c}=e,m=Xn(c-d),{circleTangency:h,lineTangency:p,theta:b}=Ly({cx:t,cy:n,radius:r,angle:d,sign:m,cornerRadius:i,cornerIsExternal:o}),{circleTangency:w,lineTangency:x,theta:v}=Ly({cx:t,cy:n,radius:r,angle:c,sign:-m,cornerRadius:i,cornerIsExternal:o}),j=o?Math.abs(d-c):Math.abs(d-c)-b-v;if(j<0)return l?cn(OR||(OR=zd(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):ZW({cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:d,endAngle:c});var C=cn(MR||(MR=zd(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(m<0),h.x,h.y,r,r,+(j>180),+(m<0),w.x,w.y,i,i,+(m<0),x.x,x.y);if(s>0){var{circleTangency:S,lineTangency:_,theta:A}=Ly({cx:t,cy:n,radius:s,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:T,lineTangency:E,theta:D}=Ly({cx:t,cy:n,radius:s,angle:c,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),z=o?Math.abs(d-c):Math.abs(d-c)-A-D;if(z<0&&i===0)return"".concat(C,"L").concat(t,",").concat(n,"Z");C+=cn(IR||(IR=zd(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,i,i,+(m<0),T.x,T.y,s,s,+(z>180),+(m>0),S.x,S.y,i,i,+(m<0),_.x,_.y)}else C+=cn($R||($R=zd(["L",",","Z"])),t,n);return C},jCe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},JW=e=>{var t=_s(e,jCe),{cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:d,startAngle:c,endAngle:m,className:h}=t;if(i<r||c===m)return null;var p=Et("recharts-sector",h),b=i-r,w=ws(l,b,0,!0),x;return w>0&&Math.abs(c-m)<360?x=NCe({cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(w,b/2),forceCornerRadius:o,cornerIsExternal:d,startAngle:c,endAngle:m}):x=ZW({cx:n,cy:s,innerRadius:r,outerRadius:i,startAngle:c,endAngle:m}),g.createElement("path",tE({},ti(t),{className:p,d:x}))};function CCe(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(DV(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:l,angle:o}=t,d=_n(s,r,i,o),c=_n(s,r,l,o);return[{x:d.x,y:d.y},{x:c.x,y:c.y}]}return XW(t)}}var T2={},E2={},k2={},RR;function SCe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HV();function n(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=n})(k2)),k2}var zR;function _Ce(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SCe();function n(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=n})(E2)),E2}var UR;function ACe(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GV(),n=_Ce();function s(r,i,l){l&&typeof l!="number"&&t.isIterateeCall(r,i,l)&&(i=l=void 0),r=n.toFinite(r),i===void 0?(i=r,r=0):i=n.toFinite(i),l=l===void 0?r<i?1:-1:n.toFinite(l);const o=Math.max(Math.ceil((i-r)/(l||1)),0),d=new Array(o);for(let c=0;c<o;c++)d[c]=r,r+=l;return d}e.range=s})(T2)),T2}var L2,FR;function TCe(){return FR||(FR=1,L2=ACe().range),L2}var ECe=TCe();const eq=Di(ECe),Dg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ek,scaleDiverging:EH,scaleDivergingLog:kH,scaleDivergingPow:eL,scaleDivergingSqrt:kue,scaleDivergingSymlog:LH,scaleIdentity:uH,scaleImplicit:sT,scaleLinear:Uw,scaleLog:dp,scaleOrdinal:rp,scalePoint:Nce,scalePow:Fw,scaleQuantile:gH,scaleQuantize:pH,scaleRadial:hH,scaleSequential:Zk,scaleSequentialLog:_H,scaleSequentialPow:Jk,scaleSequentialQuantile:TH,scaleSequentialSqrt:Eue,scaleSequentialSymlog:AH,scaleSqrt:fH,scaleSymlog:Uk,scaleThreshold:Bk,scaleTime:Xk,scaleUtc:SH,tickFormat:dH},Symbol.toStringTag,{value:"Module"}));var Po=e=>e.chartData,GN=Xe([Po],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),tq=(e,t,n,s)=>s?GN(e):Po(e),kCe=(e,t,n)=>n?GN(e):Po(e);function Oc(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(tn(t)&&tn(n))return!0}return!1}function BR(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function aq(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,s]=e,r,i;if(tn(n))r=n;else if(typeof n=="function")return;if(tn(s))i=s;else if(typeof s=="function")return;var l=[r,i];if(Oc(l))return l}}function LCe(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,n);if(Oc(s))return BR(s,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,l,o;if(r==="auto")t!=null&&(l=Math.min(...t));else if(Lt(r))l=r;else if(typeof r=="function")try{t!=null&&(l=r(t?.[0]))}catch{}else if(typeof r=="string"&&$6.test(r)){var d=$6.exec(r);if(d==null||d[1]==null||t==null)l=void 0;else{var c=+d[1];l=t[0]-c}}else l=t?.[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(Lt(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t?.[1]))}catch{}else if(typeof i=="string"&&R6.test(i)){var m=R6.exec(i);if(m==null||m[1]==null||t==null)o=void 0;else{var h=+m[1];o=t[1]+h}}else o=t?.[1];var p=[l,o];if(Oc(p))return t==null?p:BR(p,t,n)}}}var If=1e9,PCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},n4,Ya=!0,ni="[DecimalError] ",Qd=ni+"Invalid argument: ",a4=ni+"Exponent out of range: ",$f=Math.floor,Ad=Math.pow,DCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vr,Kn=1e7,Fa=7,nq=9007199254740991,Lv=$f(nq/Fa),_t={};_t.absoluteValue=_t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_t.comparedTo=_t.cmp=function(e){var t,n,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,n=s<r?s:r;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Fa;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};_t.dividedBy=_t.div=function(e){return ro(this,new this.constructor(e))};_t.dividedToIntegerBy=_t.idiv=function(e){var t=this,n=t.constructor;return Da(ro(t,new n(e),0,1),n.precision)};_t.equals=_t.eq=function(e){return!this.cmp(e)};_t.exponent=function(){return An(this)};_t.greaterThan=_t.gt=function(e){return this.cmp(e)>0};_t.greaterThanOrEqualTo=_t.gte=function(e){return this.cmp(e)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(e){return this.cmp(e)<0};_t.lessThanOrEqualTo=_t.lte=function(e){return this.cmp(e)<1};_t.logarithm=_t.log=function(e){var t,n=this,s=n.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(vr))throw Error(ni+"NaN");if(n.s<1)throw Error(ni+(n.s?"NaN":"-Infinity"));return n.eq(vr)?new s(0):(Ya=!1,t=ro(Cp(n,i),Cp(e,i),i),Ya=!0,Da(t,r))};_t.minus=_t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iq(t,e):sq(t,(e.s=-e.s,e))};_t.modulo=_t.mod=function(e){var t,n=this,s=n.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(ni+"NaN");return n.s?(Ya=!1,t=ro(n,e,0,1).times(e),Ya=!0,n.minus(t)):Da(new s(n),r)};_t.naturalExponential=_t.exp=function(){return rq(this)};_t.naturalLogarithm=_t.ln=function(){return Cp(this)};_t.negated=_t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_t.plus=_t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sq(t,e):iq(t,(e.s=-e.s,e))};_t.precision=_t.sd=function(e){var t,n,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Qd+e);if(t=An(r)+1,s=r.d.length-1,n=s*Fa+1,s=r.d[s],s){for(;s%10==0;s/=10)n--;for(s=r.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};_t.squareRoot=_t.sqrt=function(){var e,t,n,s,r,i,l,o=this,d=o.constructor;if(o.s<1){if(!o.s)return new d(0);throw Error(ni+"NaN")}for(e=An(o),Ya=!1,r=Math.sqrt(+o),r==0||r==1/0?(t=sl(o.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=$f((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new d(t)):s=new d(r.toString()),n=d.precision,r=l=n+3;;)if(i=s,s=i.plus(ro(o,i,l+2)).times(.5),sl(i.d).slice(0,l)===(t=sl(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),r==l&&t=="4999"){if(Da(i,n+1,0),i.times(i).eq(o)){s=i;break}}else if(t!="9999")break;l+=4}return Ya=!0,Da(s,n)};_t.times=_t.mul=function(e){var t,n,s,r,i,l,o,d,c,m=this,h=m.constructor,p=m.d,b=(e=new h(e)).d;if(!m.s||!e.s)return new h(0);for(e.s*=m.s,n=m.e+e.e,d=p.length,c=b.length,d<c&&(i=p,p=b,b=i,l=d,d=c,c=l),i=[],l=d+c,s=l;s--;)i.push(0);for(s=c;--s>=0;){for(t=0,r=d+s;r>s;)o=i[r]+b[s]*p[r-s-1]+t,i[r--]=o%Kn|0,t=o/Kn|0;i[r]=(i[r]+t)%Kn|0}for(;!i[--l];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,Ya?Da(e,h.precision):e};_t.toDecimalPlaces=_t.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(pl(e,0,If),t===void 0?t=s.rounding:pl(t,0,8),Da(n,e+An(n)+1,t))};_t.toExponential=function(e,t){var n,s=this,r=s.constructor;return e===void 0?n=hu(s,!0):(pl(e,0,If),t===void 0?t=r.rounding:pl(t,0,8),s=Da(new r(s),e+1,t),n=hu(s,!0,e+1)),n};_t.toFixed=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?hu(r):(pl(e,0,If),t===void 0?t=i.rounding:pl(t,0,8),s=Da(new i(r),e+An(r)+1,t),n=hu(s.abs(),!1,e+An(s)+1),r.isneg()&&!r.isZero()?"-"+n:n)};_t.toInteger=_t.toint=function(){var e=this,t=e.constructor;return Da(new t(e),An(e)+1,t.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(e){var t,n,s,r,i,l,o=this,d=o.constructor,c=12,m=+(e=new d(e));if(!e.s)return new d(vr);if(o=new d(o),!o.s){if(e.s<1)throw Error(ni+"Infinity");return o}if(o.eq(vr))return o;if(s=d.precision,e.eq(vr))return Da(o,s);if(t=e.e,n=e.d.length-1,l=t>=n,i=o.s,l){if((n=m<0?-m:m)<=nq){for(r=new d(vr),t=Math.ceil(s/Fa+4),Ya=!1;n%2&&(r=r.times(o),GR(r.d,t)),n=$f(n/2),n!==0;)o=o.times(o),GR(o.d,t);return Ya=!0,e.s<0?new d(vr).div(r):Da(r,s)}}else if(i<0)throw Error(ni+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,Ya=!1,r=e.times(Cp(o,s+c)),Ya=!0,r=rq(r),r.s=i,r};_t.toPrecision=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?(n=An(r),s=hu(r,n<=i.toExpNeg||n>=i.toExpPos)):(pl(e,1,If),t===void 0?t=i.rounding:pl(t,0,8),r=Da(new i(r),e,t),n=An(r),s=hu(r,e<=n||n<=i.toExpNeg,e)),s};_t.toSignificantDigits=_t.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(pl(e,1,If),t===void 0?t=s.rounding:pl(t,0,8)),Da(new s(n),e,t)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=An(e),n=e.constructor;return hu(e,t<=n.toExpNeg||t>=n.toExpPos)};function sq(e,t){var n,s,r,i,l,o,d,c,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Ya?Da(t,h):t;if(d=e.d,c=t.d,l=e.e,r=t.e,d=d.slice(),i=l-r,i){for(i<0?(s=d,i=-i,o=c.length):(s=c,r=l,o=d.length),l=Math.ceil(h/Fa),o=l>o?l+1:o+1,i>o&&(i=o,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(o=d.length,i=c.length,o-i<0&&(i=o,s=c,c=d,d=s),n=0;i;)n=(d[--i]=d[i]+c[i]+n)/Kn|0,d[i]%=Kn;for(n&&(d.unshift(n),++r),o=d.length;d[--o]==0;)d.pop();return t.d=d,t.e=r,Ya?Da(t,h):t}function pl(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Qd+e)}function sl(e){var t,n,s,r=e.length-1,i="",l=e[0];if(r>0){for(i+=l,t=1;t<r;t++)s=e[t]+"",n=Fa-s.length,n&&(i+=gc(n)),i+=s;l=e[t],s=l+"",n=Fa-s.length,n&&(i+=gc(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var ro=(function(){function e(s,r){var i,l=0,o=s.length;for(s=s.slice();o--;)i=s[o]*r+l,s[o]=i%Kn|0,l=i/Kn|0;return l&&s.unshift(l),s}function t(s,r,i,l){var o,d;if(i!=l)d=i>l?1:-1;else for(o=d=0;o<i;o++)if(s[o]!=r[o]){d=s[o]>r[o]?1:-1;break}return d}function n(s,r,i){for(var l=0;i--;)s[i]-=l,l=s[i]<r[i]?1:0,s[i]=l*Kn+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,l){var o,d,c,m,h,p,b,w,x,v,j,C,S,_,A,T,E,D,z=s.constructor,K=s.s==r.s?1:-1,B=s.d,O=r.d;if(!s.s)return new z(s);if(!r.s)throw Error(ni+"Division by zero");for(d=s.e-r.e,E=O.length,A=B.length,b=new z(K),w=b.d=[],c=0;O[c]==(B[c]||0);)++c;if(O[c]>(B[c]||0)&&--d,i==null?C=i=z.precision:l?C=i+(An(s)-An(r))+1:C=i,C<0)return new z(0);if(C=C/Fa+2|0,c=0,E==1)for(m=0,O=O[0],C++;(c<A||m)&&C--;c++)S=m*Kn+(B[c]||0),w[c]=S/O|0,m=S%O|0;else{for(m=Kn/(O[0]+1)|0,m>1&&(O=e(O,m),B=e(B,m),E=O.length,A=B.length),_=E,x=B.slice(0,E),v=x.length;v<E;)x[v++]=0;D=O.slice(),D.unshift(0),T=O[0],O[1]>=Kn/2&&++T;do m=0,o=t(O,x,E,v),o<0?(j=x[0],E!=v&&(j=j*Kn+(x[1]||0)),m=j/T|0,m>1?(m>=Kn&&(m=Kn-1),h=e(O,m),p=h.length,v=x.length,o=t(h,x,p,v),o==1&&(m--,n(h,E<p?D:O,p))):(m==0&&(o=m=1),h=O.slice()),p=h.length,p<v&&h.unshift(0),n(x,h,v),o==-1&&(v=x.length,o=t(O,x,E,v),o<1&&(m++,n(x,E<v?D:O,v))),v=x.length):o===0&&(m++,x=[0]),w[c++]=m,o&&x[0]?x[v++]=B[_]||0:(x=[B[_]],v=1);while((_++<A||x[0]!==void 0)&&C--)}return w[0]||w.shift(),b.e=d,Da(b,l?i+An(b)+1:i)}})();function rq(e,t){var n,s,r,i,l,o,d=0,c=0,m=e.constructor,h=m.precision;if(An(e)>16)throw Error(a4+An(e));if(!e.s)return new m(vr);for(Ya=!1,o=h,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),c+=5;for(s=Math.log(Ad(2,c))/Math.LN10*2+5|0,o+=s,n=r=i=new m(vr),m.precision=o;;){if(r=Da(r.times(e),o),n=n.times(++d),l=i.plus(ro(r,n,o)),sl(l.d).slice(0,o)===sl(i.d).slice(0,o)){for(;c--;)i=Da(i.times(i),o);return m.precision=h,t==null?(Ya=!0,Da(i,h)):i}i=l}}function An(e){for(var t=e.e*Fa,n=e.d[0];n>=10;n/=10)t++;return t}function P2(e,t,n){if(t>e.LN10.sd())throw Ya=!0,n&&(e.precision=n),Error(ni+"LN10 precision limit exceeded");return Da(new e(e.LN10),t)}function gc(e){for(var t="";e--;)t+="0";return t}function Cp(e,t){var n,s,r,i,l,o,d,c,m,h=1,p=10,b=e,w=b.d,x=b.constructor,v=x.precision;if(b.s<1)throw Error(ni+(b.s?"NaN":"-Infinity"));if(b.eq(vr))return new x(0);if(t==null?(Ya=!1,c=v):c=t,b.eq(10))return t==null&&(Ya=!0),P2(x,c);if(c+=p,x.precision=c,n=sl(w),s=n.charAt(0),i=An(b),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)b=b.times(e),n=sl(b.d),s=n.charAt(0),h++;i=An(b),s>1?(b=new x("0."+n),i++):b=new x(s+"."+n.slice(1))}else return d=P2(x,c+2,v).times(i+""),b=Cp(new x(s+"."+n.slice(1)),c-p).plus(d),x.precision=v,t==null?(Ya=!0,Da(b,v)):b;for(o=l=b=ro(b.minus(vr),b.plus(vr),c),m=Da(b.times(b),c),r=3;;){if(l=Da(l.times(m),c),d=o.plus(ro(l,new x(r),c)),sl(d.d).slice(0,c)===sl(o.d).slice(0,c))return o=o.times(2),i!==0&&(o=o.plus(P2(x,c+2,v).times(i+""))),o=ro(o,new x(h),c),x.precision=v,t==null?(Ya=!0,Da(o,v)):o;o=d,r+=2}}function HR(e,t){var n,s,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,n=n-s-1,e.e=$f(n/Fa),e.d=[],s=(n+1)%Fa,n<0&&(s+=Fa),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=Fa;s<r;)e.d.push(+t.slice(s,s+=Fa));t=t.slice(s),s=Fa-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),Ya&&(e.e>Lv||e.e<-Lv))throw Error(a4+n)}else e.s=0,e.e=0,e.d=[0];return e}function Da(e,t,n){var s,r,i,l,o,d,c,m,h=e.d;for(l=1,i=h[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Fa,r=t,c=h[m=0];else{if(m=Math.ceil((s+1)/Fa),i=h.length,m>=i)return e;for(c=i=h[m],l=1;i>=10;i/=10)l++;s%=Fa,r=s-Fa+l}if(n!==void 0&&(i=Ad(10,l-r-1),o=c/i%10|0,d=t<0||h[m+1]!==void 0||c%i,d=n<4?(o||d)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||d||n==6&&(s>0?r>0?c/Ad(10,l-r):0:h[m-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return d?(i=An(e),h.length=1,t=t-i-1,h[0]=Ad(10,(Fa-t%Fa)%Fa),e.e=$f(-t/Fa)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=m,i=1,m--):(h.length=m+1,i=Ad(10,Fa-s),h[m]=r>0?(c/Ad(10,l-r)%Ad(10,r)|0)*i:0),d)for(;;)if(m==0){(h[0]+=i)==Kn&&(h[0]=1,++e.e);break}else{if(h[m]+=i,h[m]!=Kn)break;h[m--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(Ya&&(e.e>Lv||e.e<-Lv))throw Error(a4+An(e));return e}function iq(e,t){var n,s,r,i,l,o,d,c,m,h,p=e.constructor,b=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Ya?Da(t,b):t;if(d=e.d,h=t.d,s=t.e,c=e.e,d=d.slice(),l=c-s,l){for(m=l<0,m?(n=d,l=-l,o=h.length):(n=h,s=c,o=d.length),r=Math.max(Math.ceil(b/Fa),o)+2,l>r&&(l=r,n.length=1),n.reverse(),r=l;r--;)n.push(0);n.reverse()}else{for(r=d.length,o=h.length,m=r<o,m&&(o=r),r=0;r<o;r++)if(d[r]!=h[r]){m=d[r]<h[r];break}l=0}for(m&&(n=d,d=h,h=n,t.s=-t.s),o=d.length,r=h.length-o;r>0;--r)d[o++]=0;for(r=h.length;r>l;){if(d[--r]<h[r]){for(i=r;i&&d[--i]===0;)d[i]=Kn-1;--d[i],d[r]+=Kn}d[r]-=h[r]}for(;d[--o]===0;)d.pop();for(;d[0]===0;d.shift())--s;return d[0]?(t.d=d,t.e=s,Ya?Da(t,b):t):new p(0)}function hu(e,t,n){var s,r=An(e),i=sl(e.d),l=i.length;return t?(n&&(s=n-l)>0?i=i.charAt(0)+"."+i.slice(1)+gc(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+gc(-r-1)+i,n&&(s=n-l)>0&&(i+=gc(s))):r>=l?(i+=gc(r+1-l),n&&(s=n-r-1)>0&&(i=i+"."+gc(s))):((s=r+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-l)>0&&(r+1===l&&(i+="."),i+=gc(s))),e.s<0?"-"+i:i}function GR(e,t){if(e.length>t)return e.length=t,!0}function lq(e){var t,n,s;function r(i){var l=this;if(!(l instanceof r))return new r(i);if(l.constructor=r,i instanceof r){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Qd+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return HR(l,i.toString())}else if(typeof i!="string")throw Error(Qd+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,DCe.test(i))HR(l,i);else throw Error(Qd+i)}if(r.prototype=_t,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=lq,r.config=r.set=OCe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return r.config(e),r}function OCe(e){if(!e||typeof e!="object")throw Error(ni+"Object expected");var t,n,s,r=["precision",1,If,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[n=r[t]])!==void 0)if($f(s)===s&&s>=r[t+1]&&s<=r[t+2])this[n]=s;else throw Error(Qd+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Qd+n+": "+s);return this}var n4=lq(PCe);vr=new n4(1);const Sa=n4;var MCe=e=>e,oq={},cq=e=>e===oq,VR=e=>function t(){return arguments.length===0||arguments.length===1&&cq(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},dq=(e,t)=>e===1?t:VR(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var i=s.filter(l=>l!==oq).length;return i>=e?t(...s):dq(e-i,VR(function(){for(var l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];var c=s.map(m=>cq(m)?o.shift():m);return t(...c,...o)}))}),ICe=e=>dq(e.length,e),aE=(e,t)=>{for(var n=[],s=e;s<t;++s)n[s-e]=s;return n},$Ce=ICe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),RCe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return MCe;var r=n.reverse(),i=r[0],l=r.slice(1);return function(){return l.reduce((o,d)=>d(o),i(...arguments))}};function uq(e){var t;return e===0?t=1:t=Math.floor(new Sa(e).abs().log(10).toNumber())+1,t}function mq(e,t,n){for(var s=new Sa(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(n),r++;return i}var fq=e=>{var[t,n]=e,[s,r]=[t,n];return t>n&&([s,r]=[n,t]),[s,r]},hq=(e,t,n)=>{if(e.lte(0))return new Sa(0);var s=uq(e.toNumber()),r=new Sa(10).pow(s),i=e.div(r),l=s!==1?.05:.1,o=new Sa(Math.ceil(i.div(l).toNumber())).add(n).mul(l),d=o.mul(r);return t?new Sa(d.toNumber()):new Sa(Math.ceil(d.toNumber()))},zCe=(e,t,n)=>{var s=new Sa(1),r=new Sa(e);if(!r.isint()&&n){var i=Math.abs(e);i<1?(s=new Sa(10).pow(uq(e)-1),r=new Sa(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new Sa(Math.floor(e)))}else e===0?r=new Sa(Math.floor((t-1)/2)):n||(r=new Sa(Math.floor(e)));var l=Math.floor((t-1)/2),o=RCe($Ce(d=>r.add(new Sa(d-l).mul(s)).toNumber()),aE);return o(0,t)},gq=function(t,n,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(s-1)))return{step:new Sa(0),tickMin:new Sa(0),tickMax:new Sa(0)};var l=hq(new Sa(n).sub(t).div(s-1),r,i),o;t<=0&&n>=0?o=new Sa(0):(o=new Sa(t).add(n).div(2),o=o.sub(new Sa(o).mod(l)));var d=Math.ceil(o.sub(t).div(l).toNumber()),c=Math.ceil(new Sa(n).sub(o).div(l).toNumber()),m=d+c+1;return m>s?gq(t,n,s,r,i+1):(m<s&&(c=n>0?c+(s-m):c,d=n>0?d:d+(s-m)),{step:l,tickMin:o.sub(new Sa(d).mul(l)),tickMax:o.add(new Sa(c).mul(l))})},UCe=function(t){var[n,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(r,2),[o,d]=fq([n,s]);if(o===-1/0||d===1/0){var c=d===1/0?[o,...aE(0,r-1).map(()=>1/0)]:[...aE(0,r-1).map(()=>-1/0),d];return n>s?c.reverse():c}if(o===d)return zCe(o,r,i);var{step:m,tickMin:h,tickMax:p}=gq(o,d,l,i,0),b=mq(h,p.add(new Sa(.1).mul(m)),m);return n>s?b.reverse():b},FCe=function(t,n){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,o]=fq([s,r]);if(l===-1/0||o===1/0)return[s,r];if(l===o)return[l];var d=Math.max(n,2),c=hq(new Sa(o).sub(l).div(d-1),i,0),m=[...mq(new Sa(l),new Sa(o),c),o];return i===!1&&(m=m.map(h=>Math.round(h))),s>r?m.reverse():m},pq=e=>e.rootProps.maxBarSize,BCe=e=>e.rootProps.barGap,xq=e=>e.rootProps.barCategoryGap,HCe=e=>e.rootProps.barSize,kx=e=>e.rootProps.stackOffset,yq=e=>e.rootProps.reverseStackOrder,s4=e=>e.options.chartName,r4=e=>e.rootProps.syncId,bq=e=>e.rootProps.syncMethod,i4=e=>e.options.eventEmitter,us={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},yr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},VN=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},GCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zl.angleAxisId,includeHidden:!1,name:void 0,reversed:Zl.reversed,scale:Zl.scale,tick:Zl.tick,tickCount:void 0,ticks:void 0,type:Zl.type,unit:void 0},VCe={allowDataOverflow:yr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yr.scale,tick:yr.tick,tickCount:yr.tickCount,ticks:void 0,type:yr.type,unit:void 0},WCe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Zl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zl.scale,tick:Zl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},qCe={allowDataOverflow:yr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:yr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:yr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:yr.scale,tick:yr.tick,tickCount:yr.tickCount,ticks:void 0,type:"category",unit:void 0},l4=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?WCe:GCe,o4=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?qCe:VCe,WN=e=>e.polarOptions,c4=Xe([ko,Lo,Bn],QW),vq=Xe([WN,c4],(e,t)=>{if(e!=null)return ws(e.innerRadius,t,0)}),wq=Xe([WN,c4],(e,t)=>{if(e!=null)return ws(e.outerRadius,t,t*.8)}),YCe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},Nq=Xe([WN],YCe);Xe([l4,Nq],VN);var jq=Xe([c4,vq,wq],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});Xe([o4,jq],VN);var Cq=Xe([ma,WN,vq,wq,ko,Lo],(e,t,n,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||s==null)){var{cx:l,cy:o,startAngle:d,endAngle:c}=t;return{cx:ws(l,r,r/2),cy:ws(o,i,i/2),innerRadius:n,outerRadius:s,startAngle:d,endAngle:c,clockWise:!1}}}),Za=(e,t)=>t,Lx=(e,t,n)=>n;function d4(e){return e?.id}function Sq(e,t,n){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=n,l=new Map;return e.forEach(o=>{var d,c=(d=o.data)!==null&&d!==void 0?d:s;if(!(c==null||c.length===0)){var m=d4(o);c.forEach((h,p)=>{var b=i==null||r?p:String(Ba(h,i,null)),w=Ba(h,o.dataKey,0),x;l.has(b)?x=l.get(b):x={},Object.assign(x,{[m]:w}),l.set(b,x)})}}),Array.from(l.values())}function qN(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var YN=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function KN(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function KCe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var Hn=e=>{var t=ma(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Rf=e=>e.tooltip.settings.axisId;function WR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Pv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(n),!0).forEach(function(s){QCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QCe(e,t,n){return(t=XCe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XCe(e){var t=ZCe(e,"string");return typeof t=="symbol"?t:t+""}function ZCe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nE=[0,"auto"],qn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_q=(e,t)=>e.cartesianAxis.xAxis[t],Do=(e,t)=>{var n=_q(e,t);return n??qn},Yn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ax},Aq=(e,t)=>e.cartesianAxis.yAxis[t],Oo=(e,t)=>{var n=Aq(e,t);return n??Yn},JCe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},u4=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??JCe},nn=(e,t,n)=>{switch(t){case"xAxis":return Do(e,n);case"yAxis":return Oo(e,n);case"zAxis":return u4(e,n);case"angleAxis":return l4(e,n);case"radiusAxis":return o4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},eSe=(e,t,n)=>{switch(t){case"xAxis":return Do(e,n);case"yAxis":return Oo(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Px=(e,t,n)=>{switch(t){case"xAxis":return Do(e,n);case"yAxis":return Oo(e,n);case"angleAxis":return l4(e,n);case"radiusAxis":return o4(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Tq=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function m4(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var f4=e=>e.graphicalItems.cartesianItems,tSe=Xe([Za,Lx],m4),h4=(e,t,n)=>e.filter(n).filter(s=>t?.includeHidden===!0?!0:!s.hide),Dx=Xe([f4,nn,tSe],h4,{memoizeOptions:{resultEqualityCheck:KN}}),Eq=Xe([Dx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(qN)),kq=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),aSe=Xe([Dx],kq),g4=e=>e.map(t=>t.data).filter(Boolean).flat(1),nSe=Xe([Dx],g4,{memoizeOptions:{resultEqualityCheck:KN}}),p4=(e,t)=>{var{chartData:n=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:n.slice(s,r+1)},x4=Xe([nSe,tq],p4),y4=(e,t,n)=>t?.dataKey!=null?e.map(s=>({value:Ba(s,t.dataKey)})):n.length>0?n.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Ba(r,s)}))):e.map(s=>({value:s})),QN=Xe([x4,nn,Dx],y4);function Lq(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function kb(e){if(hl(e)||e instanceof Date){var t=Number(e);if(tn(t))return t}}function qR(e){if(Array.isArray(e)){var t=[kb(e[0]),kb(e[1])];return Oc(t)?t:void 0}var n=kb(e);if(n!=null)return[n,n]}function wo(e){return e.map(kb).filter(lwe)}function sSe(e,t,n){return!n||typeof t!="number"||Li(t)?[]:n.length?wo(n.flatMap(s=>{var r=Ba(e,s.dataKey),i,l;if(Array.isArray(r)?[i,l]=r:i=l=r,!(!tn(i)||!tn(l)))return[t-i,t+l]})):[]}var Gn=e=>{var t=Hn(e),n=Rf(e);return Px(e,t,n)},Ox=Xe([Gn],e=>e?.dataKey),rSe=Xe([Eq,tq,Gn],Sq),Pq=(e,t,n,s)=>{var r={},i=t.reduce((l,o)=>{if(o.stackId==null)return l;var d=l[o.stackId];return d==null&&(d=[]),d.push(o),l[o.stackId]=d,l},r);return Object.fromEntries(Object.entries(i).map(l=>{var[o,d]=l,c=s?[...d].reverse():d,m=c.map(d4);return[o,{stackedData:mje(e,m,n),graphicalItems:c}]}))},sE=Xe([rSe,Eq,kx,yq],Pq),Dq=(e,t,n,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&n!=="zAxis"){var l=xje(e,r,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},iSe=Xe([nn],e=>e.allowDataOverflow),b4=e=>{var t;if(e==null||!("domain"in e))return nE;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=wo(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:nE},v4=Xe([nn],b4),w4=Xe([v4,iSe],aq),lSe=Xe([sE,Po,Za,w4],Dq,{memoizeOptions:{resultEqualityCheck:YN}}),XN=e=>e.errorBars,oSe=(e,t,n)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>Lq(n,s)),Dv=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var r=n.filter(Boolean);if(r.length!==0){var i=r.flat(),l=Math.min(...i),o=Math.max(...i);return[l,o]}},N4=(e,t,n,s,r)=>{var i,l;if(n.length>0&&e.forEach(o=>{n.forEach(d=>{var c,m,h=(c=s[d.id])===null||c===void 0?void 0:c.filter(j=>Lq(r,j)),p=Ba(o,(m=t.dataKey)!==null&&m!==void 0?m:d.dataKey),b=sSe(o,p,h);if(b.length>=2){var w=Math.min(...b),x=Math.max(...b);(i==null||w<i)&&(i=w),(l==null||x>l)&&(l=x)}var v=qR(p);v!=null&&(i=i==null?v[0]:Math.min(i,v[0]),l=l==null?v[1]:Math.max(l,v[1]))})}),t?.dataKey!=null&&e.forEach(o=>{var d=qR(Ba(o,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),tn(i)&&tn(l))return[i,l]},cSe=Xe([x4,nn,aSe,XN,Za],N4,{memoizeOptions:{resultEqualityCheck:YN}});function dSe(e){var{value:t}=e;if(hl(t)||t instanceof Date)return t}var uSe=(e,t,n)=>{var s=e.map(dSe).filter(r=>r!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&kV(s))?eq(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},Oq=e=>e.referenceElements.dots,zf=(e,t,n)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===n:s.yAxisId===n),mSe=Xe([Oq,Za,Lx],zf),Mq=e=>e.referenceElements.areas,fSe=Xe([Mq,Za,Lx],zf),Iq=e=>e.referenceElements.lines,hSe=Xe([Iq,Za,Lx],zf),$q=(e,t)=>{if(e!=null){var n=wo(e.map(s=>t==="xAxis"?s.x:s.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},gSe=Xe(mSe,Za,$q),Rq=(e,t)=>{if(e!=null){var n=wo(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},pSe=Xe([fSe,Za],Rq);function xSe(e){var t;if(e.x!=null)return wo([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return n==null||n.length===0?[]:wo(n)}function ySe(e){var t;if(e.y!=null)return wo([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return n==null||n.length===0?[]:wo(n)}var zq=(e,t)=>{if(e!=null){var n=e.flatMap(s=>t==="xAxis"?xSe(s):ySe(s));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},bSe=Xe([hSe,Za],zq),vSe=Xe(gSe,bSe,pSe,(e,t,n)=>Dv(e,n,t)),j4=(e,t,n,s,r,i,l,o)=>{if(n!=null)return n;var d=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",c=d?Dv(s,i,r):Dv(i,r);return LCe(t,c,e.allowDataOverflow)},wSe=Xe([nn,v4,w4,lSe,cSe,vSe,ma,Za],j4,{memoizeOptions:{resultEqualityCheck:YN}}),NSe=[0,1],C4=(e,t,n,s,r,i,l)=>{if(!((e==null||n==null||n.length===0)&&l===void 0)){var{dataKey:o,type:d}=e,c=ku(t,i);if(c&&o==null){var m;return eq(0,(m=n?.length)!==null&&m!==void 0?m:0)}return d==="category"?uSe(s,e,c):r==="expand"?NSe:l}},S4=Xe([nn,ma,x4,QN,kx,Za,wSe],C4),Uq=(e,t,n,s,r)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":l==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Nx(i));return o in Dg?o:"point"}}},Uf=Xe([nn,ma,Tq,s4,Za],Uq);function jSe(e){if(e!=null){if(e in Dg)return Dg[e]();var t="scale".concat(Nx(e));if(t in Dg)return Dg[t]()}}function _4(e,t,n,s){if(!(n==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(s);var r=jSe(t);if(r!=null){var i=r.domain(n).range(s);return lje(i),i}}}var A4=(e,t,n)=>{var s=b4(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Oc(e))return UCe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Oc(e))return FCe(e,t.tickCount,t.allowDecimals)}},T4=Xe([S4,Px,Uf],A4),E4=(e,t,n,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&Oc(t)&&Array.isArray(n)&&n.length>0){var r=t[0],i=n[0],l=t[1],o=n[n.length-1];return[Math.min(r,i),Math.max(l,o)]}return t},CSe=Xe([nn,S4,T4,Za],E4),SSe=Xe(QN,nn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,s=Array.from(wo(e.map(h=>h.value))).sort((h,p)=>h-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var l=i-r;if(l===0)return 1/0;for(var o=0;o<s.length-1;o++){var d=s[o],c=s[o+1];if(!(d==null||c==null)){var m=c-d;n=Math.min(n,m)}}return n/l}}),Fq=Xe(SSe,ma,xq,Bn,(e,t,n,s,r)=>r,(e,t,n,s,r)=>{if(!tn(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var l=ws(n,e*i),o=e*i/2;return o-l-(o-l)/i*l}return 0}),_Se=(e,t,n)=>{var s=Do(e,t);return s==null||typeof s.padding!="string"?0:Fq(e,"xAxis",t,n,s.padding)},ASe=(e,t,n)=>{var s=Oo(e,t);return s==null||typeof s.padding!="string"?0:Fq(e,"yAxis",t,n,s.padding)},TSe=Xe(Do,_Se,(e,t)=>{var n,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((n=r.left)!==null&&n!==void 0?n:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),ESe=Xe(Oo,ASe,(e,t)=>{var n,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((n=r.top)!==null&&n!==void 0?n:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),kSe=Xe([Bn,TSe,MN,ON,(e,t,n)=>n],(e,t,n,s,r)=>{var{padding:i}=s;return r?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),LSe=Xe([Bn,ma,ESe,MN,ON,(e,t,n)=>n],(e,t,n,s,r,i)=>{var{padding:l}=r;return i?[s.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Mx=(e,t,n,s)=>{var r;switch(t){case"xAxis":return kSe(e,n,s);case"yAxis":return LSe(e,n,s);case"zAxis":return(r=u4(e,n))===null||r===void 0?void 0:r.range;case"angleAxis":return Nq(e);case"radiusAxis":return jq(e,n);default:return}},Bq=Xe([nn,Mx],VN),ZN=Xe([nn,Uf,CSe,Bq],_4);Xe([Dx,XN,Za],oSe);function Hq(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var JN=(e,t)=>t,ej=(e,t,n)=>n,PSe=Xe(PN,JN,ej,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(Hq)),DSe=Xe(DN,JN,ej,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(Hq)),Gq=(e,t)=>({width:e.width,height:t.height}),OSe=(e,t)=>{var n=typeof t.width=="number"?t.width:Ax;return{width:n,height:e.height}},Vq=Xe(Bn,Do,Gq),MSe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},ISe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},$Se=Xe(Lo,Bn,PSe,JN,ej,(e,t,n,s,r)=>{var i={},l;return n.forEach(o=>{var d=Gq(t,o);l==null&&(l=MSe(t,s,e));var c=s==="top"&&!r||s==="bottom"&&r;i[o.id]=l-Number(c)*d.height,l+=(c?-1:1)*d.height}),i}),RSe=Xe(ko,Bn,DSe,JN,ej,(e,t,n,s,r)=>{var i={},l;return n.forEach(o=>{var d=OSe(t,o);l==null&&(l=ISe(t,s,e));var c=s==="left"&&!r||s==="right"&&r;i[o.id]=l-Number(c)*d.width,l+=(c?-1:1)*d.width}),i}),zSe=(e,t)=>{var n=Do(e,t);if(n!=null)return $Se(e,n.orientation,n.mirror)},USe=Xe([Bn,Do,zSe,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),FSe=(e,t)=>{var n=Oo(e,t);if(n!=null)return RSe(e,n.orientation,n.mirror)},BSe=Xe([Bn,Oo,FSe,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),Wq=Xe(Bn,Oo,(e,t)=>{var n=typeof t.width=="number"?t.width:Ax;return{width:n,height:e.height}}),YR=(e,t,n)=>{switch(t){case"xAxis":return Vq(e,n).width;case"yAxis":return Wq(e,n).height;default:return}},qq=(e,t,n,s)=>{if(n!=null){var{allowDuplicatedCategory:r,type:i,dataKey:l}=n,o=ku(e,s),d=t.map(c=>c.value);if(l&&o&&i==="category"&&r&&kV(d))return d}},k4=Xe([ma,QN,nn,Za],qq),Yq=(e,t,n,s)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:i}=n,l=ku(e,s);if(l&&(r==="number"||i!=="auto"))return t.map(o=>o.value)}},L4=Xe([ma,QN,Px,Za],Yq),KR=Xe([ma,eSe,Uf,ZN,k4,L4,Mx,T4,Za],(e,t,n,s,r,i,l,o,d)=>{if(t!=null){var c=ku(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:r,isCategorical:c,niceTicks:o,range:l,realScaleType:n,scale:s}}}),HSe=(e,t,n,s,r,i,l,o,d)=>{if(!(t==null||s==null)){var c=ku(e,d),{type:m,ticks:h,tickCount:p}=t,b=n==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,w=m==="category"&&s.bandwidth?s.bandwidth()/b:0;w=d==="angleAxis"&&i!=null&&i.length>=2?Xn(i[0]-i[1])*2*w:w;var x=h||r;if(x){var v=x.map((j,C)=>{var S=l?l.indexOf(j):j;return{index:C,coordinate:s(S)+w,value:j,offset:w}});return v.filter(j=>tn(j.coordinate))}return c&&o?o.map((j,C)=>({coordinate:s(j)+w,value:j,index:C,offset:w})).filter(j=>tn(j.coordinate)):s.ticks?s.ticks(p).map(j=>({coordinate:s(j)+w,value:j,offset:w})):s.domain().map((j,C)=>({coordinate:s(j)+w,value:l?l[j]:j,index:C,offset:w}))}},Kq=Xe([ma,Px,Uf,ZN,T4,Mx,k4,L4,Za],HSe),GSe=(e,t,n,s,r,i,l)=>{if(!(t==null||n==null||s==null||s[0]===s[1])){var o=ku(e,l),{tickCount:d}=t,c=0;return c=l==="angleAxis"&&s?.length>=2?Xn(s[0]-s[1])*2*c:c,o&&i?i.map((m,h)=>({coordinate:n(m)+c,value:m,index:h,offset:c})):n.ticks?n.ticks(d).map(m=>({coordinate:n(m)+c,value:m,offset:c})):n.domain().map((m,h)=>({coordinate:n(m)+c,value:r?r[m]:m,index:h,offset:c}))}},yf=Xe([ma,Px,ZN,Mx,k4,L4,Za],GSe),bf=Xe(nn,ZN,(e,t)=>{if(!(e==null||t==null))return Pv(Pv({},e),{},{scale:t})}),VSe=Xe([nn,Uf,S4,Bq],_4);Xe((e,t,n)=>u4(e,n),VSe,(e,t)=>{if(!(e==null||t==null))return Pv(Pv({},e),{},{scale:t})});var WSe=Xe([ma,PN,DN],(e,t,n)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Qq=e=>e.options.defaultTooltipEventType,Xq=e=>e.options.validateTooltipEventTypes;function Zq(e,t,n){if(e==null)return t;var s=e?"axis":"item";return n==null?t:n.includes(s)?s:t}function P4(e,t){var n=Qq(e),s=Xq(e);return Zq(t,n,s)}function qSe(e){return Dt(t=>P4(t,e))}var Jq=(e,t)=>{var n,s=Number(t);if(!(Li(s)||t==null))return s>=0?e==null||(n=e[s])===null||n===void 0?void 0:n.value:void 0},YSe=e=>e.tooltip.settings,yc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},KSe={itemInteraction:{click:yc,hover:yc},axisInteraction:{click:yc,hover:yc},keyboardInteraction:yc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eY=ar({name:"tooltip",initialState:KSe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:qa()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Ti(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:qa()},removeTooltipEntrySettings:{reducer(e,t){var n=Ti(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:qa()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:QSe,replaceTooltipEntrySettings:XSe,removeTooltipEntrySettings:ZSe,setTooltipSettingsState:JSe,setActiveMouseOverItemIndex:tY,mouseLeaveItem:e2e,mouseLeaveChart:aY,setActiveClickItemIndex:t2e,setMouseOverAxisIndex:nY,setMouseClickAxisIndex:a2e,setSyncInteraction:rE,setKeyboardInteraction:iE}=eY.actions,n2e=eY.reducer;function QR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Py(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QR(Object(n),!0).forEach(function(s){s2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function s2e(e,t,n){return(t=r2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r2e(e){var t=i2e(e,"string");return typeof t=="symbol"?t:t+""}function i2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l2e(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function o2e(e){return e.index!=null}var sY=(e,t,n,s)=>{if(t==null)return yc;var r=l2e(e,t,n);if(r==null)return yc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(o2e(r)){if(i)return Py(Py({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Py(Py({},yc),{},{coordinate:r.coordinate})};function c2e(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function d2e(e,t){var n=c2e(e),s=t[0],r=t[1];if(n===void 0)return!1;var i=Math.min(s,r),l=Math.max(s,r);return n>=i&&n<=l}function u2e(e,t,n){if(n==null||t==null)return!0;var s=Ba(e,t);return s==null||!Oc(n)?!0:d2e(s,n)}var D4=(e,t,n,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!tn(i))return r;var l=0,o=1/0;t.length>0&&(o=t.length-1);var d=Math.max(l,Math.min(i,o)),c=t[d];return c==null||u2e(c,n,s)?String(d):null},rY=(e,t,n,s,r,i,l,o)=>{if(!(i==null||o==null)){var d=l[0],c=d==null?void 0:o(d.positions,i);if(c!=null)return c;var m=r?.[Number(i)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(s.top+t)/2};default:return{x:(s.left+e)/2,y:m.coordinate}}}},iY=(e,t,n,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(l=>{var o;return((o=l.settings)===null||o===void 0?void 0:o.graphicalItemId)===r})},Ix=e=>e.options.tooltipPayloadSearcher,Ff=e=>e.tooltip;function XR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function ZR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XR(Object(n),!0).forEach(function(s){m2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m2e(e,t,n){return(t=f2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f2e(e){var t=h2e(e,"string");return typeof t=="symbol"?t:t+""}function h2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g2e(e,t){return e??t}var lY=(e,t,n,s,r,i,l)=>{if(!(t==null||i==null)){var{chartData:o,computedData:d,dataStartIndex:c,dataEndIndex:m}=n,h=[];return e.reduce((p,b)=>{var w,{dataDefinedOnItem:x,settings:v}=b,j=g2e(x,o),C=Array.isArray(j)?wW(j,c,m):j,S=(w=v?.dataKey)!==null&&w!==void 0?w:s,_=v?.nameKey,A;if(s&&Array.isArray(C)&&!Array.isArray(C[0])&&l==="axis"?A=iwe(C,s,r):A=i(C,t,d,_),Array.isArray(A))A.forEach(E=>{var D=ZR(ZR({},v),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});p.push(z6({tooltipEntrySettings:D,dataKey:E.dataKey,payload:E.payload,value:Ba(E.payload,E.dataKey),name:E.name}))});else{var T;p.push(z6({tooltipEntrySettings:v,dataKey:S,payload:A,value:Ba(A,S),name:(T=Ba(A,_))!==null&&T!==void 0?T:v?.name}))}return p},h)}},O4=Xe([Gn,ma,Tq,s4,Hn],Uq),p2e=Xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),x2e=Xe([Hn,Rf],m4),Bf=Xe([p2e,Gn,x2e],h4,{memoizeOptions:{resultEqualityCheck:KN}}),y2e=Xe([Bf],e=>e.filter(qN)),b2e=Xe([Bf],g4,{memoizeOptions:{resultEqualityCheck:KN}}),Hf=Xe([b2e,Po],p4),v2e=Xe([y2e,Po,Gn],Sq),M4=Xe([Hf,Gn,Bf],y4),oY=Xe([Gn],b4),w2e=Xe([Gn],e=>e.allowDataOverflow),cY=Xe([oY,w2e],aq),N2e=Xe([Bf],e=>e.filter(qN)),j2e=Xe([v2e,N2e,kx,yq],Pq),C2e=Xe([j2e,Po,Hn,cY],Dq),S2e=Xe([Bf],kq),_2e=Xe([Hf,Gn,S2e,XN,Hn],N4,{memoizeOptions:{resultEqualityCheck:YN}}),A2e=Xe([Oq,Hn,Rf],zf),T2e=Xe([A2e,Hn],$q),E2e=Xe([Mq,Hn,Rf],zf),k2e=Xe([E2e,Hn],Rq),L2e=Xe([Iq,Hn,Rf],zf),P2e=Xe([L2e,Hn],zq),D2e=Xe([T2e,P2e,k2e],Dv),O2e=Xe([Gn,oY,cY,C2e,_2e,D2e,ma,Hn],j4),$x=Xe([Gn,ma,Hf,M4,kx,Hn,O2e],C4),M2e=Xe([$x,Gn,O4],A4),I2e=Xe([Gn,$x,M2e,Hn],E4),dY=e=>{var t=Hn(e),n=Rf(e),s=!1;return Mx(e,t,n,s)},uY=Xe([Gn,dY],VN),mY=Xe([Gn,O4,I2e,uY],_4),$2e=Xe([ma,M4,Gn,Hn],qq),R2e=Xe([ma,M4,Gn,Hn],Yq),z2e=(e,t,n,s,r,i,l,o)=>{if(t){var{type:d}=t,c=ku(e,o);if(s){var m=n==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,h=d==="category"&&s.bandwidth?s.bandwidth()/m:0;return h=o==="angleAxis"&&r!=null&&r?.length>=2?Xn(r[0]-r[1])*2*h:h,c&&l?l.map((p,b)=>({coordinate:s(p)+h,value:p,index:b,offset:h})):s.domain().map((p,b)=>({coordinate:s(p)+h,value:i?i[p]:p,index:b,offset:h}))}}},Mo=Xe([ma,Gn,O4,mY,dY,$2e,R2e,Hn],z2e),I4=Xe([Qq,Xq,YSe],(e,t,n)=>Zq(n.shared,e,t)),fY=e=>e.tooltip.settings.trigger,$4=e=>e.tooltip.settings.defaultIndex,Rx=Xe([Ff,I4,fY,$4],sY),gu=Xe([Rx,Hf,Ox,$x],D4),hY=Xe([Mo,gu],Jq),R4=Xe([Rx],e=>{if(e)return e.dataKey}),U2e=Xe([Rx],e=>{if(e)return e.graphicalItemId}),gY=Xe([Ff,I4,fY,$4],iY),F2e=Xe([ko,Lo,ma,Bn,Mo,$4,gY,Ix],rY),B2e=Xe([Rx,F2e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),H2e=Xe([Rx],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),G2e=Xe([gY,gu,Po,Ox,hY,Ix,I4],lY);Xe([G2e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function JR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(n),!0).forEach(function(s){V2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V2e(e,t,n){return(t=W2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W2e(e){var t=q2e(e,"string");return typeof t=="symbol"?t:t+""}function q2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2e=()=>Dt(Gn),K2e=()=>{var e=Y2e(),t=Dt(Mo),n=Dt(mY);return wv(!e||!n?void 0:ez(ez({},e),{},{scale:n}),t)};function tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Tm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tz(Object(n),!0).forEach(function(s){Q2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Q2e(e,t,n){return(t=X2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X2e(e){var t=Z2e(e,"string");return typeof t=="symbol"?t:t+""}function Z2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J2e=(e,t,n,s)=>{var r=t.find(i=>i&&i.index===n);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},e_e=(e,t,n,s)=>{var r=t.find(c=>c&&c.index===n);if(r){if(e==="centric"){var i=r.coordinate,{radius:l}=s;return Tm(Tm(Tm({},s),_n(s.cx,s.cy,l,i)),{},{angle:i,radius:l})}var o=r.coordinate,{angle:d}=s;return Tm(Tm(Tm({},s),_n(s.cx,s.cy,o,d)),{},{angle:d,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function t_e(e,t){var{chartX:n,chartY:s}=e;return n>=t.left&&n<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var pY=(e,t,n,s,r)=>{var i,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var o=0;o<l;o++){var d,c,m,h,p,b=o>0?(d=n[o-1])===null||d===void 0?void 0:d.coordinate:(c=n[l-1])===null||c===void 0?void 0:c.coordinate,w=(m=n[o])===null||m===void 0?void 0:m.coordinate,x=o>=l-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(p=n[o+1])===null||p===void 0?void 0:p.coordinate,v=void 0;if(!(b==null||w==null||x==null))if(Xn(w-b)!==Xn(x-w)){var j=[];if(Xn(x-w)===Xn(r[1]-r[0])){v=x;var C=w+r[1]-r[0];j[0]=Math.min(C,(C+b)/2),j[1]=Math.max(C,(C+b)/2)}else{v=b;var S=x+r[1]-r[0];j[0]=Math.min(w,(S+w)/2),j[1]=Math.max(w,(S+w)/2)}var _=[Math.min(w,(v+w)/2),Math.max(w,(v+w)/2)];if(e>_[0]&&e<=_[1]||e>=j[0]&&e<=j[1]){var A;return(A=n[o])===null||A===void 0?void 0:A.index}}else{var T=Math.min(b,x),E=Math.max(b,x);if(e>(T+w)/2&&e<=(E+w)/2){var D;return(D=n[o])===null||D===void 0?void 0:D.index}}}else if(t)for(var z=0;z<l;z++){var K=t[z];if(K!=null){var B=t[z+1],O=t[z-1];if(z===0&&B!=null&&e<=(K.coordinate+B.coordinate)/2||z===l-1&&O!=null&&e>(K.coordinate+O.coordinate)/2||z>0&&z<l-1&&O!=null&&B!=null&&e>(K.coordinate+O.coordinate)/2&&e<=(K.coordinate+B.coordinate)/2)return K.index}}return-1},a_e=()=>Dt(s4),z4=(e,t)=>t,xY=(e,t,n)=>n,U4=(e,t,n,s)=>s,n_e=Xe(Mo,e=>NN(e,t=>t.coordinate)),F4=Xe([Ff,z4,xY,U4],sY),B4=Xe([F4,Hf,Ox,$x],D4),s_e=(e,t,n)=>{if(t!=null){var s=Ff(e);return t==="axis"?n==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:n==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},yY=Xe([Ff,z4,xY,U4],iY),Ov=Xe([ko,Lo,ma,Bn,Mo,U4,yY,Ix],rY),r_e=Xe([F4,Ov],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),bY=Xe([Mo,B4],Jq),i_e=Xe([yY,B4,Po,Ox,bY,Ix,z4],lY),l_e=Xe([F4,B4],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),o_e=(e,t,n,s,r,i,l)=>{if(!(!e||!n||!s||!r)&&t_e(e,l)){var o=yje(e,t),d=pY(o,i,r,n,s),c=J2e(t,r,d,e);return{activeIndex:String(d),activeCoordinate:c}}},c_e=(e,t,n,s,r,i,l)=>{if(!(!e||!s||!r||!i||!n)){var o=vCe(e,n);if(o){var d=bje(o,t),c=pY(d,l,i,s,r),m=e_e(t,i,c,o);return{activeIndex:String(c),activeCoordinate:m}}}},d_e=(e,t,n,s,r,i,l,o)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?o_e(e,t,s,r,i,l,o):c_e(e,t,n,s,r,i,l)},u_e=Xe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var s=e[t];if(s!=null)return n?s.panoramaElement:s.element}}),m_e=Xe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(us)),n=Array.from(new Set(t));return n.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:KCe}});function az(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function nz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?az(Object(n),!0).forEach(function(s){f_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):az(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function f_e(e,t,n){return(t=h_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h_e(e){var t=g_e(e,"string");return typeof t=="symbol"?t:t+""}function g_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p_e={},x_e={zIndexMap:Object.values(us).reduce((e,t)=>nz(nz({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),p_e)},y_e=new Set(Object.values(us));function b_e(e){return y_e.has(e)}var vY=ar({name:"zIndex",initialState:x_e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:qa()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!b_e(n)&&delete e.zIndexMap[n])},prepare:qa()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:s,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElement=s:e.zIndexMap[n].element=s:e.zIndexMap[n]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:qa()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:qa()}}}),{registerZIndexPortal:v_e,unregisterZIndexPortal:w_e,registerZIndexPortalElement:N_e,unregisterZIndexPortalElement:j_e}=vY.actions,C_e=vY.reducer;function $i(e){var{zIndex:t,children:n}=e,s=Kje(),r=s&&t!==void 0&&t!==0,i=nr(),l=Xa();g.useLayoutEffect(()=>r?(l(v_e({zIndex:t})),()=>{l(w_e({zIndex:t}))}):jx,[l,t,r]);var o=Dt(d=>u_e(d,t,i));return r?o?$p.createPortal(n,o):null:n}function lE(){return lE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lE.apply(null,arguments)}function sz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Dy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sz(Object(n),!0).forEach(function(s){S_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function S_e(e,t,n){return(t=__e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function __e(e){var t=A_e(e,"string");return typeof t=="symbol"?t:t+""}function A_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T_e(e){var{cursor:t,cursorComp:n,cursorProps:s}=e;return g.isValidElement(t)?g.cloneElement(t,s):g.createElement(n,s)}function E_e(e){var t,{coordinate:n,payload:s,index:r,offset:i,tooltipAxisBandSize:l,layout:o,cursor:d,tooltipEventType:c,chartName:m}=e,h=n,p=s,b=r;if(!d||!h||m!=="ScatterChart"&&c!=="axis")return null;var w,x,v;if(m==="ScatterChart")w=h,x=O1e,v=us.cursorLine;else if(m==="BarChart")w=M1e(o,h,i,l),x=KW,v=us.cursorRectangle;else if(o==="radial"&&DV(h)){var{cx:j,cy:C,radius:S,startAngle:_,endAngle:A}=XW(h);w={cx:j,cy:C,startAngle:_,endAngle:A,innerRadius:S,outerRadius:S},x=JW,v=us.cursorLine}else w={points:CCe(o,h,i)},x=t4,v=us.cursorLine;var T=typeof d=="object"&&"className"in d?d.className:void 0,E=Dy(Dy(Dy(Dy({stroke:"#ccc",pointerEvents:"none"},i),w),gp(d)),{},{payload:p,payloadIndex:b,className:Et("recharts-tooltip-cursor",T)});return g.createElement($i,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:v},g.createElement(T_e,{cursor:d,cursorComp:x,cursorProps:E}))}function k_e(e){var t=K2e(),n=LW(),s=Tx(),r=a_e();return t==null||n==null||s==null||r==null?null:g.createElement(E_e,lE({},e,{offset:n,layout:s,tooltipAxisBandSize:t,chartName:r}))}var wY=g.createContext(null),L_e=()=>g.useContext(wY),D2={exports:{}},rz;function P_e(){return rz||(rz=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(d,c,m){this.fn=d,this.context=c,this.once=m||!1}function i(d,c,m,h,p){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new r(m,h||d,p),w=n?n+c:c;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],b]:d._events[w].push(b):(d._events[w]=b,d._eventsCount++),d}function l(d,c){--d._eventsCount===0?d._events=new s:delete d._events[c]}function o(){this._events=new s,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],m,h;if(this._eventsCount===0)return c;for(h in m=this._events)t.call(m,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(m)):c},o.prototype.listeners=function(c){var m=n?n+c:c,h=this._events[m];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,b=h.length,w=new Array(b);p<b;p++)w[p]=h[p].fn;return w},o.prototype.listenerCount=function(c){var m=n?n+c:c,h=this._events[m];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,m,h,p,b,w){var x=n?n+c:c;if(!this._events[x])return!1;var v=this._events[x],j=arguments.length,C,S;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,h),!0;case 4:return v.fn.call(v.context,m,h,p),!0;case 5:return v.fn.call(v.context,m,h,p,b),!0;case 6:return v.fn.call(v.context,m,h,p,b,w),!0}for(S=1,C=new Array(j-1);S<j;S++)C[S-1]=arguments[S];v.fn.apply(v.context,C)}else{var _=v.length,A;for(S=0;S<_;S++)switch(v[S].once&&this.removeListener(c,v[S].fn,void 0,!0),j){case 1:v[S].fn.call(v[S].context);break;case 2:v[S].fn.call(v[S].context,m);break;case 3:v[S].fn.call(v[S].context,m,h);break;case 4:v[S].fn.call(v[S].context,m,h,p);break;default:if(!C)for(A=1,C=new Array(j-1);A<j;A++)C[A-1]=arguments[A];v[S].fn.apply(v[S].context,C)}}return!0},o.prototype.on=function(c,m,h){return i(this,c,m,h,!1)},o.prototype.once=function(c,m,h){return i(this,c,m,h,!0)},o.prototype.removeListener=function(c,m,h,p){var b=n?n+c:c;if(!this._events[b])return this;if(!m)return l(this,b),this;var w=this._events[b];if(w.fn)w.fn===m&&(!p||w.once)&&(!h||w.context===h)&&l(this,b);else{for(var x=0,v=[],j=w.length;x<j;x++)(w[x].fn!==m||p&&!w[x].once||h&&w[x].context!==h)&&v.push(w[x]);v.length?this._events[b]=v.length===1?v[0]:v:l(this,b)}return this},o.prototype.removeAllListeners=function(c){var m;return c?(m=n?n+c:c,this._events[m]&&l(this,m)):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(D2)),D2.exports}var D_e=P_e();const O_e=Di(D_e);var Sp=new O_e,oE="recharts.syncEvent.tooltip",iz="recharts.syncEvent.brush";function NY(e,t){if(t){var n=Number.parseInt(t,10);if(!Li(n))return e?.[n]}}var M_e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},jY=ar({name:"options",initialState:M_e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),I_e=jY.reducer,{createEventEmitter:$_e}=jY.actions;function R_e(e){return e.tooltip.syncInteraction}var z_e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},CY=ar({name:"chartData",initialState:z_e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:s}=t.payload;n!=null&&(e.dataStartIndex=n),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:lz,setDataStartEndIndexes:U_e,setComputedData:_8e}=CY.actions,F_e=CY.reducer,B_e=["x","y"];function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Em(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(s){H_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function H_e(e,t,n){return(t=G_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G_e(e){var t=V_e(e,"string");return typeof t=="symbol"?t:t+""}function V_e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W_e(e,t){if(e==null)return{};var n,s,r=q_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function q_e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Y_e(){var e=Dt(r4),t=Dt(i4),n=Xa(),s=Dt(bq),r=Dt(Mo),i=Tx(),l=IN(),o=Dt(d=>d.rootProps.className);g.useEffect(()=>{if(e==null)return jx;var d=(c,m,h)=>{if(t!==h&&e===c){if(s==="index"){var p;if(l&&m!==null&&m!==void 0&&(p=m.payload)!==null&&p!==void 0&&p.coordinate&&m.payload.sourceViewBox){var b=m.payload.coordinate,{x:w,y:x}=b,v=W_e(b,B_e),{x:j,y:C,width:S,height:_}=m.payload.sourceViewBox,A=Em(Em({},v),{},{x:l.x+(S?(w-j)/S:0)*l.width,y:l.y+(_?(x-C)/_:0)*l.height});n(Em(Em({},m),{},{payload:Em(Em({},m.payload),{},{coordinate:A})}))}else n(m);return}if(r!=null){var T;if(typeof s=="function"){var E={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},D=s(r,E);T=r[D]}else s==="value"&&(T=r.find(W=>String(W.value)===m.payload.label));var{coordinate:z}=m.payload;if(T==null||m.payload.active===!1||z==null||l==null){n(rE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:K,y:B}=z,O=Math.min(K,l.x+l.width),L=Math.min(B,l.y+l.height),H={x:i==="horizontal"?T.coordinate:O,y:i==="horizontal"?L:T.coordinate},ae=rE({active:m.payload.active,coordinate:H,dataKey:m.payload.dataKey,index:String(T.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});n(ae)}}};return Sp.on(oE,d),()=>{Sp.off(oE,d)}},[o,n,t,e,s,r,i,l])}function K_e(){var e=Dt(r4),t=Dt(i4),n=Xa();g.useEffect(()=>{if(e==null)return jx;var s=(r,i,l)=>{t!==l&&e===r&&n(U_e(i))};return Sp.on(iz,s),()=>{Sp.off(iz,s)}},[n,t,e])}function Q_e(){var e=Xa();g.useEffect(()=>{e($_e())},[e]),Y_e(),K_e()}function X_e(e,t,n,s,r,i){var l=Dt(b=>s_e(b,e,t)),o=Dt(i4),d=Dt(r4),c=Dt(bq),m=Dt(R_e),h=m?.active,p=IN();g.useEffect(()=>{if(!h&&d!=null&&o!=null){var b=rE({active:i,coordinate:n,dataKey:l,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});Sp.emit(oE,d,b,o)}},[h,n,l,r,s,o,d,c,i,p])}function cz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function dz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cz(Object(n),!0).forEach(function(s){Z_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Z_e(e,t,n){return(t=J_e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J_e(e){var t=eAe(e,"string");return typeof t=="symbol"?t:t+""}function eAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tAe(e){return e.dataKey}function aAe(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(f1e,t)}var uz=[],nAe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function mz(e){var t,n,s=_s(e,nAe),{active:r,allowEscapeViewBox:i,animationDuration:l,animationEasing:o,content:d,filterNull:c,isAnimationActive:m,offset:h,payloadUniqBy:p,position:b,reverseDirection:w,useTranslate3d:x,wrapperStyle:v,cursor:j,shared:C,trigger:S,defaultIndex:_,portal:A,axisId:T}=s,E=Xa(),D=typeof _=="number"?String(_):_;g.useEffect(()=>{E(JSe({shared:C,trigger:S,axisId:T,active:r,defaultIndex:D}))},[E,C,S,T,r,D]);var z=IN(),K=GW(),B=qSe(C),{activeIndex:O,isActive:L}=(t=Dt(be=>l_e(be,B,S,D)))!==null&&t!==void 0?t:{},H=Dt(be=>i_e(be,B,S,D)),ae=Dt(be=>bY(be,B,S,D)),W=Dt(be=>r_e(be,B,S,D)),q=H,le=L_e(),Q=(n=r??L)!==null&&n!==void 0?n:!1,[te,V]=aNe([q,Q]),ee=B==="axis"?ae:void 0;X_e(B,S,W,ee,O,Q);var me=A??le;if(me==null||z==null||B==null)return null;var we=q??uz;Q||(we=uz),c&&we.length&&(we=Hwe(we.filter(be=>be.value!=null&&(be.hide!==!0||s.includeHidden)),p,tAe));var ve=we.length>0,Ae=g.createElement(v1e,{allowEscapeViewBox:i,animationDuration:l,animationEasing:o,isAnimationActive:m,active:Q,coordinate:W,hasPayload:ve,offset:h,position:b,reverseDirection:w,useTranslate3d:x,viewBox:z,wrapperStyle:v,lastBoundingBox:te,innerRef:V,hasPortalFromProps:!!A},aAe(d,dz(dz({},s),{},{payload:we,label:ee,active:Q,activeIndex:O,coordinate:W,accessibilityLayer:K})));return g.createElement(g.Fragment,null,$p.createPortal(Ae,me),Q&&g.createElement(k_e,{cursor:j,tooltipEventType:B,coordinate:W,payload:we,index:O}))}var tj=e=>null;tj.displayName="Cell";function sAe(e,t,n){return(t=rAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rAe(e){var t=iAe(e,"string");return typeof t=="symbol"?t:t+""}function iAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class lAe{constructor(t){sAe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function fz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function oAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fz(Object(n),!0).forEach(function(s){cAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cAe(e,t,n){return(t=dAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dAe(e){var t=uAe(e,"string");return typeof t=="symbol"?t:t+""}function uAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mAe={cacheSize:2e3,enableCache:!0},SY=oAe({},mAe),hz=new lAe(SY.cacheSize),fAe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gz="recharts_measurement_span";function hAe(e,t){var n=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(l,"|").concat(o)}var pz=(e,t)=>{try{var n=document.getElementById(gz);n||(n=document.createElement("span"),n.setAttribute("id",gz),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,fAe,t),n.textContent="".concat(e);var s=n.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Hg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||FN.isSsr)return{width:0,height:0};if(!SY.enableCache)return pz(t,n);var s=hAe(t,n),r=hz.get(s);if(r)return r;var i=pz(t,n);return hz.set(s,i),i},_Y;function gAe(e,t,n){return(t=pAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pAe(e){var t=xAe(e,"string");return typeof t=="symbol"?t:t+""}function xAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yAe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bAe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vAe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wAe=["cm","mm","pt","pc","in","Q","px"];function NAe(e){return wAe.includes(e)}var Hm="NaN";function jAe(e,t){return e*vAe[t]}class os{static parse(t){var n,[,s,r]=(n=bAe.exec(t))!==null&&n!==void 0?n:[];return s==null?os.NaN:new os(parseFloat(s),r??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Li(t)&&(this.unit=""),n!==""&&!yAe.test(n)&&(this.num=NaN,this.unit=""),NAe(n)&&(this.num=jAe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new os(NaN,""):new os(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new os(NaN,""):new os(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new os(NaN,""):new os(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new os(NaN,""):new os(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Li(this.num)}}_Y=os;gAe(os,"NaN",new _Y(NaN,""));function AY(e){if(e==null||e.includes(Hm))return Hm;for(var t=e;t.includes("*")||t.includes("/");){var n,[,s,r,i]=(n=xz.exec(t))!==null&&n!==void 0?n:[],l=os.parse(s??""),o=os.parse(i??""),d=r==="*"?l.multiply(o):l.divide(o);if(d.isNaN())return Hm;t=t.replace(xz,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,m,h,p]=(c=yz.exec(t))!==null&&c!==void 0?c:[],b=os.parse(m??""),w=os.parse(p??""),x=h==="+"?b.add(w):b.subtract(w);if(x.isNaN())return Hm;t=t.replace(yz,x.toString())}return t}var bz=/\(([^()]*)\)/;function CAe(e){for(var t=e,n;(n=bz.exec(t))!=null;){var[,s]=n;t=t.replace(bz,AY(s))}return t}function SAe(e){var t=e.replace(/\s+/g,"");return t=CAe(t),t=AY(t),t}function _Ae(e){try{return SAe(e)}catch{return Hm}}function O2(e){var t=_Ae(e.slice(5,-1));return t===Hm?"":t}var AAe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],TAe=["dx","dy","angle","className","breakAll"];function cE(){return cE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cE.apply(null,arguments)}function vz(e,t){if(e==null)return{};var n,s,r=EAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EAe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var TY=/[ \f\n\r\t\v\u2028\u2029]+/,EY=e=>{var{children:t,breakAll:n,style:s}=e;try{var r=[];Zn(t)||(n?r=t.toString().split(""):r=t.toString().split(TY));var i=r.map(o=>({word:o,width:Hg(o,s).width})),l=n?0:Hg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function kAe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var kY=(e,t,n,s)=>e.reduce((r,i)=>{var{word:l,width:o}=i,d=r[r.length-1];if(d&&o!=null&&(t==null||s||d.width+o+n<Number(t)))d.words.push(l),d.width+=o+n;else{var c={words:[l],width:o};r.push(c)}return r},[]),LY=e=>e.reduce((t,n)=>t.width>n.width?t:n),LAe="",wz=(e,t,n,s,r,i,l,o)=>{var d=e.slice(0,t),c=EY({breakAll:n,style:s,children:d+LAe});if(!c)return[!1,[]];var m=kY(c.wordsWithComputedWidth,i,l,o),h=m.length>r||LY(m).width>Number(i);return[h,m]},PAe=(e,t,n,s,r)=>{var{maxLines:i,children:l,style:o,breakAll:d}=e,c=Lt(i),m=String(l),h=kY(t,s,n,r);if(!c||r)return h;var p=h.length>i||LY(h).width>Number(s);if(!p)return h;for(var b=0,w=m.length-1,x=0,v;b<=w&&x<=m.length-1;){var j=Math.floor((b+w)/2),C=j-1,[S,_]=wz(m,C,d,o,i,s,n,r),[A]=wz(m,j,d,o,i,s,n,r);if(!S&&!A&&(b=j+1),S&&A&&(w=j-1),!S&&A){v=_;break}x++}return v||h},Nz=e=>{var t=Zn(e)?[]:e.toString().split(TY);return[{words:t,width:void 0}]},DAe=e=>{var{width:t,scaleToFit:n,children:s,style:r,breakAll:i,maxLines:l}=e;if((t||n)&&!FN.isSsr){var o,d,c=EY({breakAll:i,children:s,style:r});if(c){var{wordsWithComputedWidth:m,spaceWidth:h}=c;o=m,d=h}else return Nz(s);return PAe({breakAll:i,children:s,maxLines:l,style:r},o,d,t,!!n)}return Nz(s)},PY="#808080",OAe={angle:0,breakAll:!1,capHeight:"0.71em",fill:PY,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},aj=g.forwardRef((e,t)=>{var n=_s(e,OAe),{x:s,y:r,lineHeight:i,capHeight:l,fill:o,scaleToFit:d,textAnchor:c,verticalAnchor:m}=n,h=vz(n,AAe),p=g.useMemo(()=>DAe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:d,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,d,h.style,h.width]),{dx:b,dy:w,angle:x,className:v,breakAll:j}=h,C=vz(h,TAe);if(!hl(s)||!hl(r)||p.length===0)return null;var S=Number(s)+(Lt(b)?b:0),_=Number(r)+(Lt(w)?w:0);if(!tn(S)||!tn(_))return null;var A;switch(m){case"start":A=O2("calc(".concat(l,")"));break;case"middle":A=O2("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:A=O2("calc(".concat(p.length-1," * -").concat(i,")"));break}var T=[];if(d){var E=p[0].width,{width:D}=h;T.push("scale(".concat(Lt(D)&&Lt(E)?D/E:1,")"))}return x&&T.push("rotate(".concat(x,", ").concat(S,", ").concat(_,")")),T.length&&(C.transform=T.join(" ")),g.createElement("text",cE({},ti(C),{ref:t,x:S,y:_,className:Et("recharts-text",v),textAnchor:c,fill:o.includes("url")?PY:o}),p.map((z,K)=>{var B=z.words.join(j?"":" ");return g.createElement("tspan",{x:S,dy:K===0?A:i,key:"".concat(B,"-").concat(K)},B)}))});aj.displayName="Text";var MAe=["labelRef"],IAe=["content"];function jz(e,t){if(e==null)return{};var n,s,r=$Ae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $Ae(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Cz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(n),!0).forEach(function(s){RAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function RAe(e,t,n){return(t=zAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zAe(e){var t=UAe(e,"string");return typeof t=="symbol"?t:t+""}function UAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jl(){return Jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jl.apply(null,arguments)}var DY=g.createContext(null),FAe=e=>{var{x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:l,children:o}=e,d=g.useMemo(()=>({x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:l}),[t,n,s,r,i,l]);return g.createElement(DY.Provider,{value:d},o)},OY=()=>{var e=g.useContext(DY),t=IN();return e||kW(t)},BAe=g.createContext(null),HAe=()=>{var e=g.useContext(BAe),t=Dt(Cq);return e||t},GAe=e=>{var{value:t,formatter:n}=e,s=Zn(e.children)?t:e.children;return typeof n=="function"?n(s):s},H4=e=>e!=null&&typeof e=="function",VAe=(e,t)=>{var n=Xn(t-e),s=Math.min(Math.abs(t-e),360);return n*s},WAe=(e,t,n,s,r)=>{var{offset:i,className:l}=e,{cx:o,cy:d,innerRadius:c,outerRadius:m,startAngle:h,endAngle:p,clockWise:b}=r,w=(c+m)/2,x=VAe(h,p),v=x>=0?1:-1,j,C;switch(t){case"insideStart":j=h+v*i,C=b;break;case"insideEnd":j=p-v*i,C=!b;break;case"end":j=p+v*i,C=b;break;default:throw new Error("Unsupported position ".concat(t))}C=x<=0?C:!C;var S=_n(o,d,w,j),_=_n(o,d,w,j+(C?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(_.x,",").concat(_.y),T=Zn(e.id)?pp("recharts-radial-line-"):e.id;return g.createElement("text",Jl({},s,{dominantBaseline:"central",className:Et("recharts-radial-bar-label",l)}),g.createElement("defs",null,g.createElement("path",{id:T,d:A})),g.createElement("textPath",{xlinkHref:"#".concat(T)},n))},qAe=(e,t,n)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:l,startAngle:o,endAngle:d}=e,c=(o+d)/2;if(n==="outside"){var{x:m,y:h}=_n(s,r,l+t,c);return{x:m,y:h,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+l)/2,{x:b,y:w}=_n(s,r,p,c);return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},dE=e=>"cx"in e&&Lt(e.cx),YAe=(e,t)=>{var{parentViewBox:n,offset:s,position:r}=e,i;n!=null&&!dE(n)&&(i=n);var{x:l,y:o,upperWidth:d,lowerWidth:c,height:m}=t,h=l,p=l+(d-c)/2,b=(h+p)/2,w=(d+c)/2,x=h+d/2,v=m>=0?1:-1,j=v*s,C=v>0?"end":"start",S=v>0?"start":"end",_=d>=0?1:-1,A=_*s,T=_>0?"end":"start",E=_>0?"start":"end";if(r==="top"){var D={x:h+d/2,y:o-j,textAnchor:"middle",verticalAnchor:C};return gn(gn({},D),i?{height:Math.max(o-i.y,0),width:d}:{})}if(r==="bottom"){var z={x:p+c/2,y:o+m+j,textAnchor:"middle",verticalAnchor:S};return gn(gn({},z),i?{height:Math.max(i.y+i.height-(o+m),0),width:c}:{})}if(r==="left"){var K={x:b-A,y:o+m/2,textAnchor:T,verticalAnchor:"middle"};return gn(gn({},K),i?{width:Math.max(K.x-i.x,0),height:m}:{})}if(r==="right"){var B={x:b+w+A,y:o+m/2,textAnchor:E,verticalAnchor:"middle"};return gn(gn({},B),i?{width:Math.max(i.x+i.width-B.x,0),height:m}:{})}var O=i?{width:w,height:m}:{};return r==="insideLeft"?gn({x:b+A,y:o+m/2,textAnchor:E,verticalAnchor:"middle"},O):r==="insideRight"?gn({x:b+w-A,y:o+m/2,textAnchor:T,verticalAnchor:"middle"},O):r==="insideTop"?gn({x:h+d/2,y:o+j,textAnchor:"middle",verticalAnchor:S},O):r==="insideBottom"?gn({x:p+c/2,y:o+m-j,textAnchor:"middle",verticalAnchor:C},O):r==="insideTopLeft"?gn({x:h+A,y:o+j,textAnchor:E,verticalAnchor:S},O):r==="insideTopRight"?gn({x:h+d-A,y:o+j,textAnchor:T,verticalAnchor:S},O):r==="insideBottomLeft"?gn({x:p+A,y:o+m-j,textAnchor:E,verticalAnchor:C},O):r==="insideBottomRight"?gn({x:p+c-A,y:o+m-j,textAnchor:T,verticalAnchor:C},O):r&&typeof r=="object"&&(Lt(r.x)||bo(r.x))&&(Lt(r.y)||bo(r.y))?gn({x:l+ws(r.x,w),y:o+ws(r.y,m),textAnchor:"end",verticalAnchor:"end"},O):gn({x,y:o+m/2,textAnchor:"middle",verticalAnchor:"middle"},O)},KAe={angle:0,offset:5,zIndex:us.label,position:"middle",textBreakAll:!1};function pc(e){var t=_s(e,KAe),{viewBox:n,position:s,value:r,children:i,content:l,className:o="",textBreakAll:d,labelRef:c}=t,m=HAe(),h=OY(),p=s==="center"?h:m??h,b,w,x;if(n==null?b=p:dE(n)?b=n:b=kW(n),!b||Zn(r)&&Zn(i)&&!g.isValidElement(l)&&typeof l!="function")return null;var v=gn(gn({},t),{},{viewBox:b});if(g.isValidElement(l)){var{labelRef:j}=v,C=jz(v,MAe);return g.cloneElement(l,C)}if(typeof l=="function"){var{content:S}=v,_=jz(v,IAe);if(w=g.createElement(l,_),g.isValidElement(w))return w}else w=GAe(t);var A=ti(t);if(dE(b)){if(s==="insideStart"||s==="insideEnd"||s==="end")return WAe(t,s,w,A,b);x=qAe(b,t.offset,t.position)}else x=YAe(t,b);return g.createElement($i,{zIndex:t.zIndex},g.createElement(aj,Jl({ref:c,className:Et("recharts-label",o)},A,x,{textAnchor:kAe(A.textAnchor)?A.textAnchor:x.textAnchor,breakAll:d}),w))}pc.displayName="Label";var QAe=(e,t,n)=>{if(!e)return null;var s={viewBox:t,labelRef:n};return e===!0?g.createElement(pc,Jl({key:"label-implicit"},s)):hl(e)?g.createElement(pc,Jl({key:"label-implicit",value:e},s)):g.isValidElement(e)?e.type===pc?g.cloneElement(e,gn({key:"label-implicit"},s)):g.createElement(pc,Jl({key:"label-implicit",content:e},s)):H4(e)?g.createElement(pc,Jl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?g.createElement(pc,Jl({},e,{key:"label-implicit"},s)):null};function XAe(e){var{label:t,labelRef:n}=e,s=OY();return QAe(t,s,n)||null}var M2={},I2={},Sz;function ZAe(){return Sz||(Sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(I2)),I2}var $2={},_z;function JAe(){return _z||(_z=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})($2)),$2}var Az;function eTe(){return Az||(Az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZAe(),n=JAe(),s=FL();function r(i){if(s.isArrayLike(i))return t.last(n.toArray(i))}e.last=r})(M2)),M2}var R2,Tz;function tTe(){return Tz||(Tz=1,R2=eTe().last),R2}var aTe=tTe();const nTe=Di(aTe);var sTe=["valueAccessor"],rTe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mv.apply(null,arguments)}function Ez(e,t){if(e==null)return{};var n,s,r=iTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var lTe=e=>Array.isArray(e.value)?nTe(e.value):e.value,MY=g.createContext(void 0),oTe=MY.Provider,IY=g.createContext(void 0),cTe=IY.Provider;function dTe(){return g.useContext(MY)}function uTe(){return g.useContext(IY)}function Lb(e){var{valueAccessor:t=lTe}=e,n=Ez(e,sTe),{dataKey:s,clockWise:r,id:i,textBreakAll:l,zIndex:o}=n,d=Ez(n,rTe),c=dTe(),m=uTe(),h=c||m;return!h||!h.length?null:g.createElement($i,{zIndex:o??us.label},g.createElement(Ls,{className:"recharts-label-list"},h.map((p,b)=>{var w,x=Zn(s)?t(p,b):Ba(p&&p.payload,s),v=Zn(i)?{}:{id:"".concat(i,"-").concat(b)};return g.createElement(pc,Mv({key:"label-".concat(b)},ti(p),d,v,{fill:(w=n.fill)!==null&&w!==void 0?w:p.fill,parentViewBox:p.parentViewBox,value:x,textBreakAll:l,viewBox:p.viewBox,index:b,zIndex:0}))})))}Lb.displayName="LabelList";function $Y(e){var{label:t}=e;return t?t===!0?g.createElement(Lb,{key:"labelList-implicit"}):g.isValidElement(t)||H4(t)?g.createElement(Lb,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Lb,Mv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var RY=e=>e.graphicalItems.polarItems,mTe=Xe([Za,Lx],m4),nj=Xe([RY,nn,mTe],h4),fTe=Xe([nj],g4),sj=Xe([fTe,GN],p4),hTe=Xe([sj,nn,nj],y4);Xe([sj,nn,nj],(e,t,n)=>n.length>0?e.flatMap(s=>n.flatMap(r=>{var i,l=Ba(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Ba(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var kz=()=>{},gTe=Xe([sj,nn,nj,XN,Za],N4),pTe=Xe([nn,v4,w4,kz,gTe,kz,ma,Za],j4),zY=Xe([nn,ma,sj,hTe,kx,Za,pTe],C4),xTe=Xe([zY,nn,Uf],A4);Xe([nn,zY,xTe,Za],E4);var yTe={radiusAxis:{},angleAxis:{}},UY=ar({name:"polarAxis",initialState:yTe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:A8e,removeRadiusAxis:T8e,addAngleAxis:E8e,removeAngleAxis:k8e}=UY.actions,bTe=UY.reducer;function Lz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Pz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(n),!0).forEach(function(s){vTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vTe(e,t,n){return(t=wTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wTe(e){var t=NTe(e,"string");return typeof t=="symbol"?t:t+""}function NTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jTe=(e,t)=>t,G4=Xe([RY,jTe],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),CTe=[],V4=(e,t,n)=>n?.length===0?CTe:n,FY=Xe([GN,G4,V4],(e,t,n)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&n!=null&&(r=n.map(i=>Pz(Pz({},t.presentationProps),i.props))),r!=null)return r}}),STe=Xe([FY,G4,V4],(e,t,n)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,l=Ba(s,t.nameKey,t.name),o;return n!=null&&(i=n[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=n[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?o=s.fill:o=t.fill,{value:LN(l,t.dataKey),color:o,payload:s,type:t.legendType}})}),_Te=Xe([FY,G4,V4,Bn],(e,t,n,s)=>{if(!(t==null||e==null))return AEe({offset:s,pieSettings:t,displayedData:e,cells:n})}),Dz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Oz=null,z2=null,BY=e=>{if(e===Oz&&Array.isArray(z2))return z2;var t=[];return g.Children.forEach(e,n=>{Zn(n)||(JE.isFragment(n)?t=t.concat(BY(n.props.children)):t.push(n))}),z2=t,Oz=e,t};function W4(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(r=>Dz(r)):s=[Dz(t)],BY(e).forEach(r=>{var i=du(r,"type.displayName")||du(r,"type.name");i&&s.indexOf(i)!==-1&&n.push(r)}),n}var U2={},Mz;function ATe(){return Mz||(Mz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let s=n;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(n)===s}e.isPlainObject=t})(U2)),U2}var F2,Iz;function TTe(){return Iz||(Iz=1,F2=ATe().isPlainObject),F2}var ETe=TTe();const kTe=Di(ETe);var $z,Rz,zz,Uz,Fz;function Bz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Hz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bz(Object(n),!0).forEach(function(s){LTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function LTe(e,t,n){return(t=PTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PTe(e){var t=DTe(e,"string");return typeof t=="symbol"?t:t+""}function DTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Iv.apply(null,arguments)}function Qh(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Gz=(e,t,n,s,r)=>{var i=n-s,l;return l=cn($z||($z=Qh(["M ",",",""])),e,t),l+=cn(Rz||(Rz=Qh(["L ",",",""])),e+n,t),l+=cn(zz||(zz=Qh(["L ",",",""])),e+n-i/2,t+r),l+=cn(Uz||(Uz=Qh(["L ",",",""])),e+n-i/2-s,t+r),l+=cn(Fz||(Fz=Qh(["L ",","," Z"])),e,t),l},OTe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MTe=e=>{var t=_s(e,OTe),{x:n,y:s,upperWidth:r,lowerWidth:i,height:l,className:o}=t,{animationEasing:d,animationDuration:c,animationBegin:m,isUpdateAnimationActive:h}=t,p=g.useRef(null),[b,w]=g.useState(-1),x=g.useRef(r),v=g.useRef(i),j=g.useRef(l),C=g.useRef(n),S=g.useRef(s),_=HN(e,"trapezoid-");if(g.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var H=p.current.getTotalLength();H&&w(H)}catch{}},[]),n!==+n||s!==+s||r!==+r||i!==+i||l!==+l||r===0&&i===0||l===0)return null;var A=Et("recharts-trapezoid",o);if(!h)return g.createElement("g",null,g.createElement("path",Iv({},ti(t),{className:A,d:Gz(n,s,r,i,l)})));var T=x.current,E=v.current,D=j.current,z=C.current,K=S.current,B="0px ".concat(b===-1?1:b,"px"),O="".concat(b,"px 0px"),L=VW(["strokeDasharray"],c,d);return g.createElement(BN,{animationId:_,key:_,canBegin:b>0,duration:c,easing:d,isActive:h,begin:m},H=>{var ae=Ln(T,r,H),W=Ln(E,i,H),q=Ln(D,l,H),le=Ln(z,n,H),Q=Ln(K,s,H);p.current&&(x.current=ae,v.current=W,j.current=q,C.current=le,S.current=Q);var te=H>0?{transition:L,strokeDasharray:O}:{strokeDasharray:B};return g.createElement("path",Iv({},ti(t),{className:A,d:Gz(le,Q,ae,W,q),ref:p,style:Hz(Hz({},te),t.style)}))})},ITe=["option","shapeType","activeClassName"];function $Te(e,t){if(e==null)return{};var n,s,r=RTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function $v(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Vz(Object(n),!0).forEach(function(s){zTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zTe(e,t,n){return(t=UTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UTe(e){var t=FTe(e,"string");return typeof t=="symbol"?t:t+""}function FTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BTe(e,t){return $v($v({},t),e)}function HTe(e,t){return e==="symbols"}function Wz(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(KW,n);case"trapezoid":return g.createElement(MTe,n);case"sector":return g.createElement(JW,n);case"symbols":if(HTe(t))return g.createElement(PV,n);break;case"curve":return g.createElement(t4,n);default:return null}}function GTe(e){return g.isValidElement(e)?e.props:e}function HY(e){var{option:t,shapeType:n,activeClassName:s="recharts-active-shape"}=e,r=$Te(e,ITe),i;if(g.isValidElement(t))i=g.cloneElement(t,$v($v({},r),GTe(t)));else if(typeof t=="function")i=t(r,r.index);else if(kTe(t)&&typeof t!="boolean"){var l=BTe(t,r);i=g.createElement(Wz,{shapeType:n,elementProps:l})}else{var o=r;i=g.createElement(Wz,{shapeType:n,elementProps:o})}return r.isActive?g.createElement(Ls,{className:s},i):i}var q4=(e,t,n)=>{var s=Xa();return(r,i)=>l=>{e?.(r,i,l),s(tY({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},Y4=e=>{var t=Xa();return(n,s)=>r=>{e?.(n,s,r),t(e2e())}},K4=(e,t,n)=>{var s=Xa();return(r,i)=>l=>{e?.(r,i,l),s(t2e({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function GY(e){var{tooltipEntrySettings:t}=e,n=Xa(),s=nr(),r=g.useRef(null);return g.useLayoutEffect(()=>{s||(r.current===null?n(QSe(t)):r.current!==t&&n(XSe({prev:r.current,next:t})),r.current=t)},[t,n,s]),g.useLayoutEffect(()=>()=>{r.current&&(n(ZSe(r.current)),r.current=null)},[n]),null}function VTe(e){var{legendPayload:t}=e,n=Xa(),s=nr(),r=g.useRef(null);return g.useLayoutEffect(()=>{s||(r.current===null?n(FW(t)):r.current!==t&&n(BW({prev:r.current,next:t})),r.current=t)},[n,s,t]),g.useLayoutEffect(()=>()=>{r.current&&(n(HW(r.current)),r.current=null)},[n]),null}function WTe(e){var{legendPayload:t}=e,n=Xa(),s=Dt(ma),r=g.useRef(null);return g.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?n(FW(t)):r.current!==t&&n(BW({prev:r.current,next:t})),r.current=t)},[n,s,t]),g.useLayoutEffect(()=>()=>{r.current&&(n(HW(r.current)),r.current=null)},[n]),null}var B2,qTe=()=>{var[e]=g.useState(()=>pp("uid-"));return e},YTe=(B2=Zd.useId)!==null&&B2!==void 0?B2:qTe;function KTe(e,t){var n=YTe();return t||(e?"".concat(e,"-").concat(n):n)}var QTe=g.createContext(void 0),VY=e=>{var{id:t,type:n,children:s}=e,r=KTe("recharts-".concat(n),t);return g.createElement(QTe.Provider,{value:r},s(r))},XTe={cartesianItems:[],polarItems:[]},WY=ar({name:"graphicalItems",initialState:XTe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:qa()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Ti(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=s)},prepare:qa()},removeCartesianGraphicalItem:{reducer(e,t){var n=Ti(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:qa()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:qa()},removePolarGraphicalItem:{reducer(e,t){var n=Ti(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:qa()}}}),{addCartesianGraphicalItem:ZTe,replaceCartesianGraphicalItem:JTe,removeCartesianGraphicalItem:eEe,addPolarGraphicalItem:tEe,removePolarGraphicalItem:aEe}=WY.actions,nEe=WY.reducer,sEe=e=>{var t=Xa(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(ZTe(e)):n.current!==e&&t(JTe({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(eEe(n.current)),n.current=null)},[t]),null},rEe=g.memo(sEe);function iEe(e){var t=Xa();return g.useLayoutEffect(()=>(t(tEe(e)),()=>{t(aEe(e))}),[t,e]),null}var lEe=["key"],oEe=["onMouseEnter","onClick","onMouseLeave"],cEe=["id"],dEe=["id"];function qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(n),!0).forEach(function(s){uEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uEe(e,t,n){return(t=mEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mEe(e){var t=fEe(e,"string");return typeof t=="symbol"?t:t+""}function fEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mc(){return Mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mc.apply(null,arguments)}function rj(e,t){if(e==null)return{};var n,s,r=hEe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hEe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function gEe(e){var t=g.useMemo(()=>W4(e.children,tj),[e.children]),n=Dt(s=>STe(s,e.id,t));return n==null?null:g.createElement(WTe,{legendPayload:n})}var pEe=g.memo(e=>{var{dataKey:t,nameKey:n,sectors:s,stroke:r,strokeWidth:i,fill:l,name:o,hide:d,tooltipType:c,id:m}=e,h={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:n,name:LN(o,t),hide:d,type:c,color:l,unit:"",graphicalItemId:m}};return g.createElement(GY,{tooltipEntrySettings:h})}),xEe=(e,t)=>e>t?"start":e<t?"end":"middle",yEe=(e,t,n)=>ws(typeof t=="function"?t(e):t,n,n*.8),bEe=(e,t,n)=>{var{top:s,left:r,width:i,height:l}=t,o=QW(i,l),d=r+ws(e.cx,i,i/2),c=s+ws(e.cy,l,l/2),m=ws(e.innerRadius,o,0),h=yEe(n,e.outerRadius,o),p=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:d,cy:c,innerRadius:m,outerRadius:h,maxRadius:p}},vEe=(e,t)=>{var n=Xn(t-e),s=Math.min(Math.abs(t-e),360);return n*s};function wEe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var NEe=(e,t)=>{if(g.isValidElement(e))return g.cloneElement(e,t);if(typeof e=="function")return e(t);var n=Et("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=rj(t,lEe);return g.createElement(t4,Mc({},r,{type:"linear",className:n}))},jEe=(e,t,n)=>{if(g.isValidElement(e))return g.cloneElement(e,t);var s=n;if(typeof e=="function"&&(s=e(t),g.isValidElement(s)))return s;var r=Et("recharts-pie-label-text",wEe(e));return g.createElement(aj,Mc({},t,{alignmentBaseline:"middle",className:r}),s)};function CEe(e){var{sectors:t,props:n,showLabels:s}=e,{label:r,labelLine:i,dataKey:l}=n;if(!s||!r||!t)return null;var o=ki(n),d=gp(r),c=gp(i),m=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,h=t.map((p,b)=>{var w=(p.startAngle+p.endAngle)/2,x=_n(p.cx,p.cy,p.outerRadius+m,w),v=dn(dn(dn(dn({},o),p),{},{stroke:"none"},d),{},{index:b,textAnchor:xEe(x.x,p.cx)},x),j=dn(dn(dn(dn({},o),p),{},{fill:"none",stroke:p.fill},c),{},{index:b,points:[_n(p.cx,p.cy,p.outerRadius,w),x],key:"line"});return g.createElement($i,{zIndex:us.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(b)},g.createElement(Ls,null,i&&NEe(i,j),jEe(r,v,Ba(p,l))))});return g.createElement(Ls,{className:"recharts-pie-labels"},h)}function SEe(e){var{sectors:t,props:n,showLabels:s}=e,{label:r}=n;return typeof r=="object"&&r!=null&&"position"in r?g.createElement($Y,{label:r}):g.createElement(CEe,{sectors:t,props:n,showLabels:s})}function _Ee(e){var{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:r,shape:i,id:l}=e,o=Dt(gu),d=Dt(R4),c=Dt(U2e),{onMouseEnter:m,onClick:h,onMouseLeave:p}=r,b=rj(r,oEe),w=q4(m,r.dataKey,l),x=Y4(p),v=K4(h,r.dataKey,l);return t==null||t.length===0?null:g.createElement(g.Fragment,null,t.map((j,C)=>{if(j?.startAngle===0&&j?.endAngle===0&&t.length!==1)return null;var S=c==null||c===l,_=String(C)===o&&(d==null||r.dataKey===d)&&S,A=o?s:null,T=n&&_?n:A,E=dn(dn({},j),{},{stroke:j.stroke,tabIndex:-1,[SW]:C,[_W]:l});return g.createElement(Ls,Mc({key:"sector-".concat(j?.startAngle,"-").concat(j?.endAngle,"-").concat(j.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},wN(b,j,C),{onMouseEnter:w(j,C),onMouseLeave:x(j,C),onClick:v(j,C)}),g.createElement(HY,Mc({option:i??T,index:C,shapeType:"sector",isActive:_},E)))}))}function AEe(e){var t,{pieSettings:n,displayedData:s,cells:r,offset:i}=e,{cornerRadius:l,startAngle:o,endAngle:d,dataKey:c,nameKey:m,tooltipType:h}=n,p=Math.abs(n.minAngle),b=vEe(o,d),w=Math.abs(b),x=s.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,v=s.filter(T=>Ba(T,c,0)!==0).length,j=(w>=360?v:v-1)*x,C=w-v*p-j,S=s.reduce((T,E)=>{var D=Ba(E,c,0);return T+(Lt(D)?D:0)},0),_;if(S>0){var A;_=s.map((T,E)=>{var D=Ba(T,c,0),z=Ba(T,m,E),K=bEe(n,i,T),B=(Lt(D)?D:0)/S,O,L=dn(dn({},T),r&&r[E]&&r[E].props);E?O=A.endAngle+Xn(b)*x*(D!==0?1:0):O=o;var H=O+Xn(b)*((D!==0?p:0)+B*C),ae=(O+H)/2,W=(K.innerRadius+K.outerRadius)/2,q=[{name:z,value:D,payload:L,dataKey:c,type:h,graphicalItemId:n.id}],le=_n(K.cx,K.cy,W,ae);return A=dn(dn(dn(dn({},n.presentationProps),{},{percent:B,cornerRadius:typeof l=="string"?parseFloat(l):l,name:z,tooltipPayload:q,midAngle:ae,middleRadius:W,tooltipPosition:le},L),K),{},{value:D,dataKey:c,startAngle:O,endAngle:H,payload:L,paddingAngle:Xn(b)*x}),A})}return _}function TEe(e){var{showLabels:t,sectors:n,children:s}=e,r=g.useMemo(()=>!t||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,t]);return g.createElement(cTe,{value:t?r:void 0},s)}function EEe(e){var{props:t,previousSectorsRef:n,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:d,activeShape:c,inactiveShape:m,onAnimationStart:h,onAnimationEnd:p}=t,b=HN(t,"recharts-pie-"),w=n.current,[x,v]=g.useState(!1),j=g.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),C=g.useCallback(()=>{typeof h=="function"&&h(),v(!0)},[h]);return g.createElement(TEe,{showLabels:!x,sectors:r},g.createElement(BN,{animationId:b,begin:l,duration:o,isActive:i,easing:d,onAnimationStart:C,onAnimationEnd:j,key:b},S=>{var _=[],A=r&&r[0],T=A?.startAngle;return r?.forEach((E,D)=>{var z=w&&w[D],K=D>0?du(E,"paddingAngle",0):0;if(z){var B=Ln(z.endAngle-z.startAngle,E.endAngle-E.startAngle,S),O=dn(dn({},E),{},{startAngle:T+K,endAngle:T+B+K});_.push(O),T=O.endAngle}else{var{endAngle:L,startAngle:H}=E,ae=Ln(0,L-H,S),W=dn(dn({},E),{},{startAngle:T+K,endAngle:T+ae+K});_.push(W),T=W.endAngle}}),n.current=_,g.createElement(Ls,null,g.createElement(_Ee,{sectors:_,activeShape:c,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:s}))}),g.createElement(SEe,{showLabels:!x,sectors:r,props:t}),t.children)}var kEe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:us.area};function LEe(e){var{id:t}=e,n=rj(e,cEe),{hide:s,className:r,rootTabIndex:i}=e,l=g.useMemo(()=>W4(e.children,tj),[e.children]),o=Dt(m=>_Te(m,t,l)),d=g.useRef(null),c=Et("recharts-pie",r);return s||o==null?(d.current=null,g.createElement(Ls,{tabIndex:i,className:c})):g.createElement($i,{zIndex:e.zIndex},g.createElement(pEe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:o,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),g.createElement(Ls,{tabIndex:i,className:c},g.createElement(EEe,{props:dn(dn({},n),{},{sectors:o}),previousSectorsRef:d,id:t})))}function qY(e){var t=_s(e,kEe),{id:n}=t,s=rj(t,dEe),r=ki(s);return g.createElement(VY,{id:n,type:"pie"},i=>g.createElement(g.Fragment,null,g.createElement(iEe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),g.createElement(gEe,Mc({},s,{id:i})),g.createElement(LEe,Mc({},s,{id:i}))))}qY.displayName="Pie";function Yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Kz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(n),!0).forEach(function(s){PEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function PEe(e,t,n){return(t=DEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DEe(e){var t=OEe(e,"string");return typeof t=="symbol"?t:t+""}function OEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YY=0,MEe={xAxis:{},yAxis:{},zAxis:{}},KY=ar({name:"cartesianAxis",initialState:MEe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:qa()},replaceXAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.xAxis[n.id],e.xAxis[s.id]=s)},prepare:qa()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:qa()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:qa()},replaceYAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.yAxis[n.id],e.yAxis[s.id]=s)},prepare:qa()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:qa()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:qa()},replaceZAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.zAxis[n.id],e.zAxis[s.id]=s)},prepare:qa()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:qa()},updateYAxisWidth(e,t){var{id:n,width:s}=t.payload,r=e.yAxis[n];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var l=[...i,s].slice(-3);e.yAxis[n]=Kz(Kz({},e.yAxis[n]),{},{width:s,widthHistory:l})}}}}),{addXAxis:IEe,replaceXAxis:$Ee,removeXAxis:REe,addYAxis:zEe,replaceYAxis:UEe,removeYAxis:FEe,addZAxis:L8e,replaceZAxis:P8e,removeZAxis:D8e,updateYAxisWidth:BEe}=KY.actions,HEe=KY.reducer,GEe=Xe([Bn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),VEe=Xe([GEe,ko,Lo],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),QY=()=>Dt(VEe),Qz=(e,t,n)=>{var s=n??e;if(!Zn(s))return ws(s,t,0)},WEe=(e,t,n)=>{var s={},r=e.filter(qN),i=e.filter(c=>c.stackId==null),l=r.reduce((c,m)=>(c[m.stackId]||(c[m.stackId]=[]),c[m.stackId].push(m),c),s),o=Object.entries(l).map(c=>{var[m,h]=c,p=h.map(w=>w.dataKey),b=Qz(t,n,h[0].barSize);return{stackId:m,dataKeys:p,barSize:b}}),d=i.map(c=>{var m=[c.dataKey].filter(p=>p!=null),h=Qz(t,n,c.barSize);return{stackId:void 0,dataKeys:m,barSize:h}});return[...o,...d]};function Xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Oy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(n),!0).forEach(function(s){qEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qEe(e,t,n){return(t=YEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function YEe(e){var t=KEe(e,"string");return typeof t=="symbol"?t:t+""}function KEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QEe(e,t,n,s,r){var i=s.length;if(!(i<1)){var l=ws(e,n,0,!0),o,d=[];if(tn(s[0].barSize)){var c=!1,m=n/i,h=s.reduce((j,C)=>j+(C.barSize||0),0);h+=(i-1)*l,h>=n&&(h-=(i-1)*l,l=0),h>=n&&m>0&&(c=!0,m*=.9,h=i*m);var p=(n-h)/2>>0,b={offset:p-l,size:0};o=s.reduce((j,C)=>{var S,_={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:b.offset+b.size+l,size:c?m:(S=C.barSize)!==null&&S!==void 0?S:0}},A=[...j,_];return b=A[A.length-1].position,A},d)}else{var w=ws(t,n,0,!0);n-2*w-(i-1)*l<=0&&(l=0);var x=(n-2*w-(i-1)*l)/i;x>1&&(x>>=0);var v=tn(r)?Math.min(x,r):x;o=s.reduce((j,C,S)=>[...j,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(x+l)*S+(x-v)/2,size:v}}],d)}return o}}var XEe=(e,t,n,s,r,i,l)=>{var o=Zn(l)?t:l,d=QEe(n,s,r!==i?r:i,e,o);return r!==i&&d!=null&&(d=d.map(c=>Oy(Oy({},c),{},{position:Oy(Oy({},c.position),{},{offset:c.position.offset-r/2})}))),d},ZEe=(e,t)=>{var n=d4(t);if(!(!e||n==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(l=>l.key===n)}}}};function JEe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&tn(e.zIndex)?e.zIndex:t}var XY=e=>{var{chartData:t}=e,n=Xa(),s=nr();return g.useEffect(()=>s?()=>{}:(n(lz(t)),()=>{n(lz(void 0))}),[t,n,s]),null},Zz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZY=ar({name:"brush",initialState:Zz,reducers:{setBrushSettings(e,t){return t.payload==null?Zz:t.payload}}}),{setBrushSettings:O8e}=ZY.actions,eke=ZY.reducer;function tke(e,t,n){return(t=ake(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ake(e){var t=nke(e,"string");return typeof t=="symbol"?t:t+""}function nke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Q4{static create(t){return new Q4(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var n=this.range(),s=n[0],r=n[n.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}tke(Q4,"EPS",1e-4);function ske(e){return(e%180+180)%180}var rke=function(t){var{width:n,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ske(r),l=i*Math.PI/180,o=Math.atan(s/n),d=l>o&&l<Math.PI-o?s/Math.sin(l):n/Math.cos(l);return Math.abs(d)},ike={dots:[],areas:[],lines:[]},JY=ar({name:"referenceElements",initialState:ike,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Ti(e).dots.findIndex(s=>s===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Ti(e).areas.findIndex(s=>s===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Ti(e).lines.findIndex(s=>s===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:M8e,removeDot:I8e,addArea:$8e,removeArea:R8e,addLine:z8e,removeLine:U8e}=JY.actions,lke=JY.reducer,oke=g.createContext(void 0),cke=e=>{var{children:t}=e,[n]=g.useState("".concat(pp("recharts"),"-clip")),s=QY();if(s==null)return null;var{x:r,y:i,width:l,height:o}=s;return g.createElement(oke.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:r,y:i,height:o,width:l}))),t)};function eK(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&n.push(r)}return n}function dke(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return rke(s,n)}function uke(e,t,n){var s=n==="width",{x:r,y:i,width:l,height:o}=e;return t===1?{start:s?r:i,end:s?r+l:i+o}:{start:s?r+l:i+o,end:s?r:i}}function _p(e,t,n,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function mke(e,t){return eK(e,t+1)}function fke(e,t,n,s,r){for(var i=(s||[]).slice(),{start:l,end:o}=t,d=0,c=1,m=l,h=function(){var w=s?.[d];if(w===void 0)return{v:eK(s,c)};var x=d,v,j=()=>(v===void 0&&(v=n(w,x)),v),C=w.coordinate,S=d===0||_p(e,C,j,m,o);S||(d=0,m=l,c+=1),S&&(m=C+e*(j()/2+r),d+=c)},p;c<=i.length;)if(p=h(),p)return p.v;return[]}function hke(e,t,n,s,r){var i=(s||[]).slice(),l=i.length;if(l===0)return[];for(var{start:o,end:d}=t,c=1;c<=l;c++){for(var m=(l-1)%c,h=o,p=!0,b=function(){var C=s[w],S=w,_,A=()=>(_===void 0&&(_=n(C,S)),_),T=C.coordinate,E=w===m||_p(e,T,A,h,d);if(!E)return p=!1,1;E&&(h=T+e*(A()/2+r))},w=m;w<l&&!b();w+=c);if(p){for(var x=[],v=m;v<l;v+=c)x.push(s[v]);return x}}return[]}function Jz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(n),!0).forEach(function(s){gke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gke(e,t,n){return(t=pke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pke(e){var t=xke(e,"string");return typeof t=="symbol"?t:t+""}function xke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yke(e,t,n,s,r){for(var i=(s||[]).slice(),l=i.length,{start:o}=t,{end:d}=t,c=function(p){var b=i[p],w,x=()=>(w===void 0&&(w=n(b,p)),w);if(p===l-1){var v=e*(b.coordinate+e*x()/2-d);i[p]=b=gs(gs({},b),{},{tickCoord:v>0?b.coordinate-v*e:b.coordinate})}else i[p]=b=gs(gs({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var j=_p(e,b.tickCoord,x,o,d);j&&(d=b.tickCoord-e*(x()/2+r),i[p]=gs(gs({},b),{},{isShow:!0}))}},m=l-1;m>=0;m--)c(m);return i}function bke(e,t,n,s,r,i){var l=(s||[]).slice(),o=l.length,{start:d,end:c}=t;if(i){var m=s[o-1],h=n(m,o-1),p=e*(m.coordinate+e*h/2-c);if(l[o-1]=m=gs(gs({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate}),m.tickCoord!=null){var b=_p(e,m.tickCoord,()=>h,d,c);b&&(c=m.tickCoord-e*(h/2+r),l[o-1]=gs(gs({},m),{},{isShow:!0}))}}for(var w=i?o-1:o,x=function(C){var S=l[C],_,A=()=>(_===void 0&&(_=n(S,C)),_);if(C===0){var T=e*(S.coordinate-e*A()/2-d);l[C]=S=gs(gs({},S),{},{tickCoord:T<0?S.coordinate-T*e:S.coordinate})}else l[C]=S=gs(gs({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var E=_p(e,S.tickCoord,A,d,c);E&&(d=S.tickCoord+e*(A()/2+r),l[C]=gs(gs({},S),{},{isShow:!0}))}},v=0;v<w;v++)x(v);return l}function X4(e,t,n){var{tick:s,ticks:r,viewBox:i,minTickGap:l,orientation:o,interval:d,tickFormatter:c,unit:m,angle:h}=e;if(!r||!r.length||!s)return[];if(Lt(d)||FN.isSsr){var p;return(p=mke(r,Lt(d)?d:0))!==null&&p!==void 0?p:[]}var b=[],w=o==="top"||o==="bottom"?"width":"height",x=m&&w==="width"?Hg(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},v=(S,_)=>{var A=typeof c=="function"?c(S.value,_):S.value;return w==="width"?dke(Hg(A,{fontSize:t,letterSpacing:n}),x,h):Hg(A,{fontSize:t,letterSpacing:n})[w]},j=r.length>=2?Xn(r[1].coordinate-r[0].coordinate):1,C=uke(i,j,w);return d==="equidistantPreserveStart"?fke(j,C,v,r,l):d==="equidistantPreserveEnd"?hke(j,C,v,r,l):(d==="preserveStart"||d==="preserveStartEnd"?b=bke(j,C,v,r,l,d==="preserveStartEnd"):b=yke(j,C,v,r,l),b.filter(S=>S.isShow))}var vke=e=>{var{ticks:t,label:n,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(m=>{if(m){var h=m.getBoundingClientRect();h.width>l&&(l=h.width)}});var o=n?n.getBoundingClientRect().width:0,d=r+i,c=l+d+o+(n?s:0);return Math.round(c)}return 0},wke=["axisLine","width","height","className","hide","ticks","axisType"];function Nke(e,t){if(e==null)return{};var n,s,r=jke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jke(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function pu(){return pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pu.apply(null,arguments)}function e7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(n),!0).forEach(function(s){Cke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Cke(e,t,n){return(t=Ske(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ske(e){var t=_ke(e,"string");return typeof t=="symbol"?t:t+""}function _ke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var io={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:us.axis};function Ake(e){var{x:t,y:n,width:s,height:r,orientation:i,mirror:l,axisLine:o,otherSvgProps:d}=e;if(!o)return null;var c=Cn(Cn(Cn({},d),ki(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!l||i==="bottom"&&l);c=Cn(Cn({},c),{},{x1:t,y1:n+m*r,x2:t+s,y2:n+m*r})}else{var h=+(i==="left"&&!l||i==="right"&&l);c=Cn(Cn({},c),{},{x1:t+h*s,y1:n,x2:t+h*s,y2:n+r})}return g.createElement("line",pu({},c,{className:Et("recharts-cartesian-axis-line",du(o,"className"))}))}function Tke(e,t,n,s,r,i,l,o,d){var c,m,h,p,b,w,x=o?-1:1,v=e.tickSize||l,j=Lt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":c=m=e.coordinate,p=n+ +!o*r,h=p-x*v,w=h-x*d,b=j;break;case"left":h=p=e.coordinate,m=t+ +!o*s,c=m-x*v,b=c-x*d,w=j;break;case"right":h=p=e.coordinate,m=t+ +o*s,c=m+x*v,b=c+x*d,w=j;break;default:c=m=e.coordinate,p=n+ +o*r,h=p+x*v,w=h+x*d,b=j;break}return{line:{x1:c,y1:h,x2:m,y2:p},tick:{x:b,y:w}}}function Eke(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function kke(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Lke(e){var{option:t,tickProps:n,value:s}=e,r,i=Et(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))r=g.cloneElement(t,Cn(Cn({},n),{},{className:i}));else if(typeof t=="function")r=t(Cn(Cn({},n),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Et(l,t?.className)),r=g.createElement(aj,pu({},n,{className:l}),s)}return r}var Pke=g.forwardRef((e,t)=>{var{ticks:n=[],tick:s,tickLine:r,stroke:i,tickFormatter:l,unit:o,padding:d,tickTextProps:c,orientation:m,mirror:h,x:p,y:b,width:w,height:x,tickSize:v,tickMargin:j,fontSize:C,letterSpacing:S,getTicksConfig:_,events:A,axisType:T}=e,E=X4(Cn(Cn({},_),{},{ticks:n}),C,S),D=Eke(m,h),z=kke(m,h),K=ki(_),B=gp(s),O={};typeof r=="object"&&(O=r);var L=Cn(Cn({},K),{},{fill:"none"},O),H=E.map(q=>Cn({entry:q},Tke(q,p,b,w,x,m,v,h,j))),ae=H.map(q=>{var{entry:le,line:Q}=q;return g.createElement(Ls,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},r&&g.createElement("line",pu({},L,Q,{className:Et("recharts-cartesian-axis-tick-line",du(r,"className"))})))}),W=H.map((q,le)=>{var{entry:Q,tick:te}=q,V=Cn(Cn(Cn(Cn({textAnchor:D,verticalAnchor:z},K),{},{stroke:"none",fill:i},B),te),{},{index:le,payload:Q,visibleTicksCount:E.length,tickFormatter:l,padding:d},c);return g.createElement(Ls,pu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},wN(A,Q,le)),s&&g.createElement(Lke,{option:s,tickProps:V,value:"".concat(typeof l=="function"?l(Q.value,le):Q.value).concat(o||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},W.length>0&&g.createElement($i,{zIndex:us.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},W)),ae.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},ae))}),Dke=g.forwardRef((e,t)=>{var{axisLine:n,width:s,height:r,className:i,hide:l,ticks:o,axisType:d}=e,c=Nke(e,wke),[m,h]=g.useState(""),[p,b]=g.useState(""),w=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var v;return vke({ticks:w.current,label:(v=e.labelRef)===null||v===void 0?void 0:v.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=g.useCallback(v=>{if(v){var j=v.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=j;var C=j[0];if(C){var S=window.getComputedStyle(C),_=S.fontSize,A=S.letterSpacing;(_!==m||A!==p)&&(h(_),b(A))}}},[m,p]);return l||s!=null&&s<=0||r!=null&&r<=0?null:g.createElement($i,{zIndex:e.zIndex},g.createElement(Ls,{className:Et("recharts-cartesian-axis",i)},g.createElement(Ake,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:ki(e)}),g.createElement(Pke,{ref:x,axisType:d,events:c,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:o,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(FAe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(XAe,{label:e.label,labelRef:e.labelRef}),e.children)))}),Z4=g.forwardRef((e,t)=>{var n=_s(e,io);return g.createElement(Dke,pu({},n,{ref:t}))});Z4.displayName="CartesianAxis";var Oke=["x1","y1","x2","y2","key"],Mke=["offset"],Ike=["xAxisId","yAxisId"],$ke=["xAxisId","yAxisId"];function t7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function xs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(n),!0).forEach(function(s){Rke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Rke(e,t,n){return(t=zke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zke(e){var t=Uke(e,"string");return typeof t=="symbol"?t:t+""}function Uke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ud.apply(null,arguments)}function Rv(e,t){if(e==null)return{};var n,s,r=Fke(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fke(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var Bke=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:s,y:r,width:i,height:l,ry:o}=e;return g.createElement("rect",{x:s,y:r,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function tK(e){var{option:t,lineItemProps:n}=e,s;if(g.isValidElement(t))s=g.cloneElement(t,n);else if(typeof t=="function")s=t(n);else{var r,{x1:i,y1:l,x2:o,y2:d,key:c}=n,m=Rv(n,Oke),h=(r=ki(m))!==null&&r!==void 0?r:{},{offset:p}=h,b=Rv(h,Mke);s=g.createElement("line",Ud({},b,{x1:i,y1:l,x2:o,y2:d,fill:"none",key:c}))}return s}function Hke(e){var{x:t,width:n,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=Rv(e,Ike),d=r.map((c,m)=>{var h=xs(xs({},o),{},{x1:t,y1:c,x2:t+n,y2:c,key:"line-".concat(m),index:m});return g.createElement(tK,{key:"line-".concat(m),option:s,lineItemProps:h})});return g.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function Gke(e){var{y:t,height:n,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:l}=e,o=Rv(e,$ke),d=r.map((c,m)=>{var h=xs(xs({},o),{},{x1:c,y1:t,x2:c,y2:t+n,key:"line-".concat(m),index:m});return g.createElement(tK,{option:s,lineItemProps:h,key:"line-".concat(m)})});return g.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function Vke(e){var{horizontalFill:t,fillOpacity:n,x:s,y:r,width:i,height:l,horizontalPoints:o,horizontal:d=!0}=e;if(!d||!t||!t.length||o==null)return null;var c=o.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==c[0]&&c.unshift(0);var m=c.map((h,p)=>{var b=!c[p+1],w=b?r+l-h:c[p+1]-h;if(w<=0)return null;var x=p%t.length;return g.createElement("rect",{key:"react-".concat(p),y:h,x:s,height:w,width:i,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Wke(e){var{vertical:t=!0,verticalFill:n,fillOpacity:s,x:r,y:i,width:l,height:o,verticalPoints:d}=e;if(!t||!n||!n.length)return null;var c=d.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==c[0]&&c.unshift(0);var m=c.map((h,p)=>{var b=!c[p+1],w=b?r+l-h:c[p+1]-h;if(w<=0)return null;var x=p%n.length;return g.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:w,height:o,stroke:"none",fill:n[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return g.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var qke=(e,t)=>{var{xAxis:n,width:s,height:r,offset:i}=e;return NW(X4(xs(xs(xs({},io),n),{},{ticks:jW(n),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},Yke=(e,t)=>{var{yAxis:n,width:s,height:r,offset:i}=e;return NW(X4(xs(xs(xs({},io),n),{},{ticks:jW(n),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},Kke={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:us.grid};function aK(e){var t=PW(),n=DW(),s=LW(),r=xs(xs({},_s(e,Kke)),{},{x:Lt(e.x)?e.x:s.left,y:Lt(e.y)?e.y:s.top,width:Lt(e.width)?e.width:s.width,height:Lt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:l,x:o,y:d,width:c,height:m,syncWithTicks:h,horizontalValues:p,verticalValues:b}=r,w=nr(),x=Dt(z=>KR(z,"xAxis",i,w)),v=Dt(z=>KR(z,"yAxis",l,w));if(!gl(c)||!gl(m)||!Lt(o)||!Lt(d))return null;var j=r.verticalCoordinatesGenerator||qke,C=r.horizontalCoordinatesGenerator||Yke,{horizontalPoints:S,verticalPoints:_}=r;if((!S||!S.length)&&typeof C=="function"){var A=p&&p.length,T=C({yAxis:v?xs(xs({},v),{},{ticks:A?p:v.ticks}):void 0,width:t??c,height:n??m,offset:s},A?!0:h);Nv(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(S=T)}if((!_||!_.length)&&typeof j=="function"){var E=b&&b.length,D=j({xAxis:x?xs(xs({},x),{},{ticks:E?b:x.ticks}):void 0,width:t??c,height:n??m,offset:s},E?!0:h);Nv(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(_=D)}return g.createElement($i,{zIndex:r.zIndex},g.createElement("g",{className:"recharts-cartesian-grid"},g.createElement(Bke,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),g.createElement(Vke,Ud({},r,{horizontalPoints:S})),g.createElement(Wke,Ud({},r,{verticalPoints:_})),g.createElement(Hke,Ud({},r,{offset:s,horizontalPoints:S,xAxis:x,yAxis:v})),g.createElement(Gke,Ud({},r,{offset:s,verticalPoints:_,xAxis:x,yAxis:v}))))}aK.displayName="CartesianGrid";var Qke={},nK=ar({name:"errorBars",initialState:Qke,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]||(e[n]=[]),e[n].push(s)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:s,next:r}=t.payload;e[n]&&(e[n]=e[n].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]&&(e[n]=e[n].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:F8e,replaceErrorBar:B8e,removeErrorBar:H8e}=nK.actions,Xke=nK.reducer,Zke=["children"];function Jke(e,t){if(e==null)return{};var n,s,r=eLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eLe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var tLe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},aLe=g.createContext(tLe);function nLe(e){var{children:t}=e,n=Jke(e,Zke);return g.createElement(aLe.Provider,{value:n},t)}function sK(e,t){var n,s,r=Dt(c=>Do(c,e)),i=Dt(c=>Oo(c,t)),l=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:qn.allowDataOverflow,o=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:Yn.allowDataOverflow,d=l||o;return{needClip:d,needClipX:l,needClipY:o}}function sLe(e){var{xAxisId:t,yAxisId:n,clipPathId:s}=e,r=QY(),{needClipX:i,needClipY:l,needClip:o}=sK(t,n);if(!o||!r)return null;var{x:d,y:c,width:m,height:h}=r;return g.createElement("clipPath",{id:"clipPath-".concat(s)},g.createElement("rect",{x:i?d:d-m/2,y:l?c:c-h/2,width:i?m:m*2,height:l?h:h*2}))}var H2={exports:{}},G2={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a7;function rLe(){if(a7)return G2;a7=1;var e=Nf();function t(d,c){return d===c&&(d!==0||1/d===1/c)||d!==d&&c!==c}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,l=e.useMemo,o=e.useDebugValue;return G2.useSyncExternalStoreWithSelector=function(d,c,m,h,p){var b=r(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=l(function(){function v(A){if(!j){if(j=!0,C=A,A=h(A),p!==void 0&&w.hasValue){var T=w.value;if(p(T,A))return S=T}return S=A}if(T=S,n(C,A))return T;var E=h(A);return p!==void 0&&p(T,E)?(C=A,T):(C=A,S=E)}var j=!1,C,S,_=m===void 0?null:m;return[function(){return v(c())},_===null?void 0:function(){return v(_())}]},[c,m,h,p]);var x=s(d,b[0],b[1]);return i(function(){w.hasValue=!0,w.value=x},[x]),o(x),x},G2}var n7;function iLe(){return n7||(n7=1,H2.exports=rLe()),H2.exports}var lLe=iLe();function oLe(e){e()}function cLe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){oLe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var s7={notify(){},get:()=>[]};function dLe(e,t){let n,s=s7,r=0,i=!1;function l(x){m();const v=s.subscribe(x);let j=!1;return()=>{j||(j=!0,v(),h())}}function o(){s.notify()}function d(){w.onStateChange&&w.onStateChange()}function c(){return i}function m(){r++,n||(n=e.subscribe(d),s=cLe())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=s7)}function p(){i||(i=!0,m())}function b(){i&&(i=!1,h())}const w={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:d,isSubscribed:c,trySubscribe:p,tryUnsubscribe:b,getListeners:()=>s};return w}var uLe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mLe=uLe(),fLe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",hLe=fLe(),gLe=()=>mLe||hLe?g.useLayoutEffect:g.useEffect,pLe=gLe();function r7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xLe(e,t){if(r7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!r7(e[n[r]],t[n[r]]))return!1;return!0}var yLe=Symbol.for("react-redux-context"),bLe=typeof globalThis<"u"?globalThis:{};function vLe(){if(!g.createContext)return{};const e=bLe[yLe]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var wLe=vLe();function NLe(e){const{children:t,context:n,serverState:s,store:r}=e,i=g.useMemo(()=>{const d=dLe(r);return{store:r,subscription:d,getServerState:s?()=>s:void 0}},[r,s]),l=g.useMemo(()=>r.getState(),[r]);pLe(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==r.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const o=n||wLe;return g.createElement(o.Provider,{value:i},t)}var jLe=NLe,CLe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function SLe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function J4(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of n)if(CLe.has(s)){if(e[s]==null&&t[s]==null)continue;if(!xLe(e[s],t[s]))return!1}else if(!SLe(e[s],t[s]))return!1;return!0}function Lu(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&n!==void 0?n:YY}function Pu(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&n!==void 0?n:YY}var _Le="Invariant failed";function ALe(e,t){throw new Error(_Le)}function uE(){return uE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uE.apply(null,arguments)}function zv(e){return g.createElement(HY,uE({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var TLe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(Lt(t))return t;var i=Lt(s)||Zn(s);return i?t(s,r):(i||ALe(),n)}},ELe=(e,t,n)=>n,kLe=(e,t)=>t,zx=Xe([f4,kLe],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),LLe=Xe([zx],e=>e?.maxBarSize),PLe=(e,t,n,s)=>s,DLe=Xe([ma,f4,Lu,Pu,ELe],(e,t,n,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),OLe=(e,t,n)=>{var s=ma(e),r=Lu(e,t),i=Pu(e,t);if(!(r==null||i==null))return s==="horizontal"?sE(e,"yAxis",i,n):sE(e,"xAxis",r,n)},MLe=(e,t)=>{var n=ma(e),s=Lu(e,t),r=Pu(e,t);if(!(s==null||r==null))return n==="horizontal"?YR(e,"xAxis",s):YR(e,"yAxis",r)},ILe=Xe([DLe,HCe,MLe],WEe),$Le=(e,t,n)=>{var s,r,i=zx(e,t);if(i!=null){var l=Lu(e,t),o=Pu(e,t);if(!(l==null||o==null)){var d=ma(e),c=pq(e),{maxBarSize:m}=i,h=Zn(m)?c:m,p,b;return d==="horizontal"?(p=bf(e,"xAxis",l,n),b=yf(e,"xAxis",l,n)):(p=bf(e,"yAxis",o,n),b=yf(e,"yAxis",o,n)),(s=(r=wv(p,b,!0))!==null&&r!==void 0?r:h)!==null&&s!==void 0?s:0}}},rK=(e,t,n)=>{var s=ma(e),r=Lu(e,t),i=Pu(e,t);if(!(r==null||i==null)){var l,o;return s==="horizontal"?(l=bf(e,"xAxis",r,n),o=yf(e,"xAxis",r,n)):(l=bf(e,"yAxis",i,n),o=yf(e,"yAxis",i,n)),wv(l,o)}},RLe=Xe([ILe,pq,BCe,xq,$Le,rK,LLe],XEe),zLe=(e,t,n)=>{var s=Lu(e,t);if(s!=null)return bf(e,"xAxis",s,n)},ULe=(e,t,n)=>{var s=Pu(e,t);if(s!=null)return bf(e,"yAxis",s,n)},FLe=(e,t,n)=>{var s=Lu(e,t);if(s!=null)return yf(e,"xAxis",s,n)},BLe=(e,t,n)=>{var s=Pu(e,t);if(s!=null)return yf(e,"yAxis",s,n)},HLe=Xe([RLe,zx],(e,t)=>{if(!(e==null||t==null)){var n=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),GLe=Xe([OLe,zx],ZEe),VLe=Xe([Bn,XL,zLe,ULe,FLe,BLe,HLe,ma,kCe,rK,GLe,zx,PLe],(e,t,n,s,r,i,l,o,d,c,m,h,p)=>{var{chartData:b,dataStartIndex:w,dataEndIndex:x}=d;if(!(h==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||n==null||s==null||r==null||i==null||c==null)){var{data:v}=h,j;if(v!=null&&v.length>0?j=v:j=b?.slice(w,x+1),j!=null)return v4e({layout:o,barSettings:h,pos:l,parentViewBox:t,bandSize:c,xAxis:n,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:m,displayedData:j,offset:e,cells:p,dataStartIndex:w})}}),WLe=["index"];function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mE.apply(null,arguments)}function qLe(e,t){if(e==null)return{};var n,s,r=YLe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YLe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var iK=g.createContext(void 0),KLe=e=>{var t=g.useContext(iK);if(t!=null)return t.stackId;if(e!=null)return fje(e)},QLe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),XLe=e=>{var t=g.useContext(iK);if(t!=null){var{stackId:n}=t;return"url(#".concat(QLe(n,e),")")}},ZLe=e=>{var{index:t}=e,n=qLe(e,WLe),s=XLe(t);return g.createElement(Ls,mE({className:"recharts-bar-stack-layer",clipPath:s},n))},JLe=["onMouseEnter","onMouseLeave","onClick"],e4e=["value","background","tooltipPosition"],t4e=["id"],a4e=["onMouseEnter","onClick","onMouseLeave"];function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},No.apply(null,arguments)}function i7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(n),!0).forEach(function(s){n4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function n4e(e,t,n){return(t=s4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s4e(e){var t=r4e(e,"string");return typeof t=="symbol"?t:t+""}function r4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uv(e,t){if(e==null)return{};var n,s,r=i4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var l4e=e=>{var{dataKey:t,name:n,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:LN(n,t),payload:e}]},o4e=g.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:s,fill:r,name:i,hide:l,unit:o,tooltipType:d,id:c}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:LN(i,t),hide:l,type:d,color:r,unit:o,graphicalItemId:c}};return g.createElement(GY,{tooltipEntrySettings:m})});function c4e(e){var t=Dt(gu),{data:n,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:d}=i,c=Uv(i,JLe),m=q4(l,s,i.id),h=Y4(o),p=K4(d,s,i.id);if(!r||n==null)return null;var b=gp(r);return g.createElement($i,{zIndex:JEe(r,us.barBackground)},n.map((w,x)=>{var{value:v,background:j,tooltipPosition:C}=w,S=Uv(w,e4e);if(!j)return null;var _=m(w,x),A=h(w,x),T=p(w,x),E=Ts(Ts(Ts(Ts(Ts({option:r,isActive:String(x)===t},S),{},{fill:"#eee"},j),b),wN(c,w,x)),{},{onMouseEnter:_,onMouseLeave:A,onClick:T,dataKey:s,index:x,className:"recharts-bar-background-rectangle"});return g.createElement(zv,No({key:"background-bar-".concat(x)},E))}))}function d4e(e){var{showLabels:t,children:n,rects:s}=e,r=s?.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Ts(Ts({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return g.createElement(oTe,{value:t?r:void 0},n)}function u4e(e){var{shape:t,activeBar:n,baseProps:s,entry:r,index:i,dataKey:l}=e,o=Dt(gu),d=Dt(R4),c=n&&String(i)===o&&(d==null||l===d),m=c?n:t;return c?g.createElement($i,{zIndex:us.activeBar},g.createElement(zv,No({},s,{name:String(s.name)},r,{isActive:c,option:m,index:i,dataKey:l}))):g.createElement(zv,No({},s,{name:String(s.name)},r,{isActive:c,option:m,index:i,dataKey:l}))}function m4e(e){var{shape:t,baseProps:n,entry:s,index:r,dataKey:i}=e;return g.createElement(zv,No({},n,{name:String(n.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function f4e(e){var t,{data:n,props:s}=e,r=(t=ki(s))!==null&&t!==void 0?t:{},{id:i}=r,l=Uv(r,t4e),{shape:o,dataKey:d,activeBar:c}=s,{onMouseEnter:m,onClick:h,onMouseLeave:p}=s,b=Uv(s,a4e),w=q4(m,d,i),x=Y4(p),v=K4(h,d,i);return n?g.createElement(g.Fragment,null,n.map((j,C)=>g.createElement(ZLe,No({index:C,key:"rectangle-".concat(j?.x,"-").concat(j?.y,"-").concat(j?.value,"-").concat(C),className:"recharts-bar-rectangle"},wN(b,j,C),{onMouseEnter:w(j,C),onMouseLeave:x(j,C),onClick:v(j,C)}),c?g.createElement(u4e,{shape:o,activeBar:c,baseProps:l,entry:j,index:C,dataKey:d}):g.createElement(m4e,{shape:o,baseProps:l,entry:j,index:C,dataKey:d})))):null}function h4e(e){var{props:t,previousRectanglesRef:n}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:d,onAnimationEnd:c,onAnimationStart:m}=t,h=n.current,p=HN(t,"recharts-bar-"),[b,w]=g.useState(!1),x=!b,v=g.useCallback(()=>{typeof c=="function"&&c(),w(!1)},[c]),j=g.useCallback(()=>{typeof m=="function"&&m(),w(!0)},[m]);return g.createElement(d4e,{showLabels:x,rects:s},g.createElement(BN,{animationId:p,begin:l,duration:o,isActive:i,easing:d,onAnimationEnd:v,onAnimationStart:j,key:p},C=>{var S=C===1?s:s?.map((_,A)=>{var T=h&&h[A];if(T)return Ts(Ts({},_),{},{x:Ln(T.x,_.x,C),y:Ln(T.y,_.y,C),width:Ln(T.width,_.width,C),height:Ln(T.height,_.height,C)});if(r==="horizontal"){var E=Ln(0,_.height,C),D=Ln(_.stackedBarStart,_.y,C);return Ts(Ts({},_),{},{y:D,height:E})}var z=Ln(0,_.width,C),K=Ln(_.stackedBarStart,_.x,C);return Ts(Ts({},_),{},{width:z,x:K})});return C>0&&(n.current=S??null),S==null?null:g.createElement(Ls,null,g.createElement(f4e,{props:t,data:S}))}),g.createElement($Y,{label:t.label}),t.children)}function g4e(e){var t=g.useRef(null);return g.createElement(h4e,{previousRectanglesRef:t,props:e})}var lK=0,p4e=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ba(e,t)}};class x4e extends g.PureComponent{render(){var{hide:t,data:n,dataKey:s,className:r,xAxisId:i,yAxisId:l,needClip:o,background:d,id:c}=this.props;if(t||n==null)return null;var m=Et("recharts-bar",r),h=c;return g.createElement(Ls,{className:m,id:c},o&&g.createElement("defs",null,g.createElement(sLe,{clipPathId:h,xAxisId:i,yAxisId:l})),g.createElement(Ls,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(h,")"):void 0},g.createElement(c4e,{data:n,dataKey:s,background:d,allOtherBarProps:this.props}),g.createElement(g4e,this.props)))}}var y4e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:lK,xAxisId:0,yAxisId:0,zIndex:us.bar};function b4e(e){var{xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:d,animationEasing:c,isAnimationActive:m}=e,{needClip:h}=sK(t,n),p=Tx(),b=nr(),w=W4(e.children,tj),x=Dt(C=>VLe(C,e.id,b,w));if(p!=="vertical"&&p!=="horizontal")return null;var v,j=x?.[0];return j==null||j.height==null||j.width==null?v=0:v=p==="vertical"?j.height/2:j.width/2,g.createElement(nLe,{xAxisId:t,yAxisId:n,data:x,dataPointFormatter:p4e,errorBarOffset:v},g.createElement(x4e,No({},e,{layout:p,needClip:h,data:x,xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:d,animationEasing:c,isAnimationActive:m})))}function v4e(e){var{layout:t,barSettings:{dataKey:n,minPointSize:s},pos:r,bandSize:i,xAxis:l,yAxis:o,xAxisTicks:d,yAxisTicks:c,stackedData:m,displayedData:h,offset:p,cells:b,parentViewBox:w,dataStartIndex:x}=e,v=t==="horizontal"?o:l,j=m?v.scale.domain():null,C=hje({numericAxis:v}),S=v.scale(C);return h.map((_,A)=>{var T,E,D,z,K,B;if(m){var O=m[A+x];if(O==null)return null;T=oje(O,j)}else T=Ba(_,n),Array.isArray(T)||(T=[C,T]);var L=TLe(s,lK)(T[1],A);if(t==="horizontal"){var H,[ae,W]=[o.scale(T[0]),o.scale(T[1])];E=I6({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:_,index:A}),D=(H=W??ae)!==null&&H!==void 0?H:void 0,z=r.size;var q=ae-W;if(K=Li(q)?0:q,B={x:E,y:p.top,width:z,height:p.height},Math.abs(L)>0&&Math.abs(K)<Math.abs(L)){var le=Xn(K||L)*(Math.abs(L)-Math.abs(K));D-=le,K+=le}}else{var[Q,te]=[l.scale(T[0]),l.scale(T[1])];if(E=Q,D=I6({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:_,index:A}),z=te-Q,K=r.size,B={x:p.left,y:D,width:p.width,height:K},Math.abs(L)>0&&Math.abs(z)<Math.abs(L)){var V=Xn(z||L)*(Math.abs(L)-Math.abs(z));z+=V}}if(E==null||D==null||z==null||K==null)return null;var ee=Ts(Ts({},_),{},{stackedBarStart:S,x:E,y:D,width:z,height:K,value:m?T:T[1],payload:_,background:B,tooltipPosition:{x:E+z/2,y:D+K/2},parentViewBox:w},b&&b[A]&&b[A].props);return ee}).filter(Boolean)}function w4e(e){var t=_s(e,y4e),n=KLe(t.stackId),s=nr();return g.createElement(VY,{id:t.id,type:"bar"},r=>g.createElement(g.Fragment,null,g.createElement(VTe,{legendPayload:l4e(t)}),g.createElement(o4e,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),g.createElement(rEe,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),g.createElement($i,{zIndex:t.zIndex},g.createElement(b4e,No({},t,{id:r})))))}var fE=g.memo(w4e,J4);fE.displayName="Bar";var N4e=["domain","range"],j4e=["domain","range"];function l7(e,t){if(e==null)return{};var n,s,r=C4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function o7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function oK(e,t){if(e===t)return!0;var{domain:n,range:s}=e,r=l7(e,N4e),{domain:i,range:l}=t,o=l7(t,j4e);return!o7(n,i)||!o7(s,l)?!1:J4(r,o)}var S4e=["dangerouslySetInnerHTML","ticks","scale"],_4e=["id","scale"];function hE(){return hE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hE.apply(null,arguments)}function c7(e,t){if(e==null)return{};var n,s,r=A4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function T4e(e){var t=Xa(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(IEe(e)):n.current!==e&&t($Ee({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(REe(n.current)),n.current=null)},[t]),null}var E4e=e=>{var{xAxisId:t,className:n}=e,s=Dt(XL),r=nr(),i="xAxis",l=Dt(j=>Kq(j,i,t,r)),o=Dt(j=>Vq(j,t)),d=Dt(j=>USe(j,t)),c=Dt(j=>_q(j,t));if(o==null||d==null||c==null)return null;var{dangerouslySetInnerHTML:m,ticks:h,scale:p}=e,b=c7(e,S4e),{id:w,scale:x}=c,v=c7(c,_4e);return g.createElement(Z4,hE({},b,v,{x:d.x,y:d.y,width:o.width,height:o.height,className:Et("recharts-".concat(i," ").concat(i),n),viewBox:s,ticks:l,axisType:i}))},k4e={allowDataOverflow:qn.allowDataOverflow,allowDecimals:qn.allowDecimals,allowDuplicatedCategory:qn.allowDuplicatedCategory,angle:qn.angle,axisLine:io.axisLine,height:qn.height,hide:!1,includeHidden:qn.includeHidden,interval:qn.interval,minTickGap:qn.minTickGap,mirror:qn.mirror,orientation:qn.orientation,padding:qn.padding,reversed:qn.reversed,scale:qn.scale,tick:qn.tick,tickCount:qn.tickCount,tickLine:io.tickLine,tickSize:io.tickSize,type:qn.type,xAxisId:0},L4e=e=>{var t=_s(e,k4e);return g.createElement(g.Fragment,null,g.createElement(T4e,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(E4e,t))},cK=g.memo(L4e,oK);cK.displayName="XAxis";var P4e=["dangerouslySetInnerHTML","ticks","scale"],D4e=["id","scale"];function gE(){return gE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gE.apply(null,arguments)}function d7(e,t){if(e==null)return{};var n,s,r=O4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function O4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function M4e(e){var t=Xa(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(zEe(e)):n.current!==e&&t(UEe({prev:n.current,next:e})),n.current=e},[e,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(FEe(n.current)),n.current=null)},[t]),null}var I4e=e=>{var{yAxisId:t,className:n,width:s,label:r}=e,i=g.useRef(null),l=g.useRef(null),o=Dt(XL),d=nr(),c=Xa(),m="yAxis",h=Dt(T=>Wq(T,t)),p=Dt(T=>BSe(T,t)),b=Dt(T=>Kq(T,m,t,d)),w=Dt(T=>Aq(T,t));if(g.useLayoutEffect(()=>{if(!(s!=="auto"||!h||H4(r)||g.isValidElement(r)||w==null)){var T=i.current;if(T){var E=T.getCalculatedWidth();Math.round(h.width)!==Math.round(E)&&c(BEe({id:t,width:E}))}}},[b,h,c,r,t,s,w]),h==null||p==null||w==null)return null;var{dangerouslySetInnerHTML:x,ticks:v,scale:j}=e,C=d7(e,P4e),{id:S,scale:_}=w,A=d7(w,D4e);return g.createElement(Z4,gE({},C,A,{ref:i,labelRef:l,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:h.width,height:h.height,className:Et("recharts-".concat(m," ").concat(m),n),viewBox:o,ticks:b,axisType:m}))},$4e={allowDataOverflow:Yn.allowDataOverflow,allowDecimals:Yn.allowDecimals,allowDuplicatedCategory:Yn.allowDuplicatedCategory,angle:Yn.angle,axisLine:io.axisLine,hide:!1,includeHidden:Yn.includeHidden,interval:Yn.interval,minTickGap:Yn.minTickGap,mirror:Yn.mirror,orientation:Yn.orientation,padding:Yn.padding,reversed:Yn.reversed,scale:Yn.scale,tick:Yn.tick,tickCount:Yn.tickCount,tickLine:io.tickLine,tickSize:io.tickSize,type:Yn.type,width:Yn.width,yAxisId:0},R4e=e=>{var t=_s(e,$4e);return g.createElement(g.Fragment,null,g.createElement(M4e,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(I4e,t))},dK=g.memo(R4e,oK);dK.displayName="YAxis";var z4e=(e,t)=>t,eP=Xe([z4e,ma,Cq,Hn,uY,Mo,n_e,Bn],d_e),tP=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/s)}},uK=ai("mouseClick"),mK=_x();mK.startListening({actionCreator:uK,effect:(e,t)=>{var n=e.payload,s=eP(t.getState(),tP(n));s?.activeIndex!=null&&t.dispatch(a2e({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var pE=ai("mouseMove"),fK=_x(),My=null;fK.startListening({actionCreator:pE,effect:(e,t)=>{var n=e.payload;My!==null&&cancelAnimationFrame(My);var s=tP(n);My=requestAnimationFrame(()=>{var r=t.getState(),i=P4(r,r.tooltip.settings.shared);if(i==="axis"){var l=eP(r,s);l?.activeIndex!=null?t.dispatch(nY({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):t.dispatch(aY())}My=null})}});function U4e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var u7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},hK=ar({name:"rootProps",initialState:u7,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:u7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),F4e=hK.reducer,{updateOptions:B4e}=hK.actions,gK=ar({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:H4e}=gK.actions,G4e=gK.reducer,pK=ai("keyDown"),xK=ai("focus"),aP=_x();aP.startListening({actionCreator:pK,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=D4(r,Hf(n),Ox(n),$x(n)),o=l==null?-1:Number(l);if(!(!Number.isFinite(o)||o<0)){var d=Mo(n);if(i==="Enter"){var c=Ov(n,"axis","hover",String(r.index));t.dispatch(iE({active:!r.active,activeIndex:r.index,activeCoordinate:c}));return}var m=WSe(n),h=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,b=o+p*h;if(!(d==null||b>=d.length||b<0)){var w=Ov(n,"axis","hover",String(b));t.dispatch(iE({active:!0,activeIndex:b.toString(),activeCoordinate:w}))}}}}}});aP.startListening({actionCreator:xK,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var i="0",l=Ov(n,"axis","hover",String(i));t.dispatch(iE({active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Gr=ai("externalEvent"),yK=_x(),V2=new Map;yK.startListening({actionCreator:Gr,effect:(e,t)=>{var{handler:n,reactEvent:s}=e.payload;if(n!=null){s.persist();var r=s.type,i=V2.get(r);i!==void 0&&cancelAnimationFrame(i);var l=requestAnimationFrame(()=>{try{var o=t.getState(),d={activeCoordinate:B2e(o),activeDataKey:R4(o),activeIndex:gu(o),activeLabel:hY(o),activeTooltipIndex:gu(o),isTooltipActive:H2e(o)};n(d,s)}finally{V2.delete(r)}});V2.set(r,l)}}});var V4e=Xe([Ff],e=>e.tooltipItemPayloads),W4e=Xe([V4e,Ix,(e,t)=>t,(e,t,n)=>n],(e,t,n,s)=>{var r=e.find(o=>o.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var l=t(i,n);return l}}}),bK=ai("touchMove"),vK=_x();vK.startListening({actionCreator:bK,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var s=t.getState(),r=P4(s,s.tooltip.settings.shared);if(r==="axis"){var i=n.touches[0];if(i==null)return;var l=eP(s,tP({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&t.dispatch(nY({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(r==="item"){var o,d=n.touches[0];if(document.elementFromPoint==null||d==null)return;var c=document.elementFromPoint(d.clientX,d.clientY);if(!c||!c.getAttribute)return;var m=c.getAttribute(SW),h=(o=c.getAttribute(_W))!==null&&o!==void 0?o:void 0,p=Bf(s).find(x=>x.id===h);if(m==null||p==null||h==null)return;var{dataKey:b}=p,w=W4e(s,m,h);t.dispatch(tY({activeDataKey:b,activeIndex:m,activeCoordinate:w,activeGraphicalItemId:h}))}}}});var q4e=qV({brush:eke,cartesianAxis:HEe,chartData:F_e,errorBars:Xke,graphicalItems:nEe,layout:aje,legend:o1e,options:I_e,polarAxis:bTe,polarOptions:G4e,referenceElements:lke,rootProps:F4e,tooltip:n2e,zIndex:C_e}),Y4e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return ANe({reducer:q4e,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([mK.middleware,fK.middleware,aP.middleware,yK.middleware,vK.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(oW({type:"raf"}))},devTools:{serialize:{replacer:U4e},name:"recharts-".concat(n)}})};function wK(e){var{preloadedState:t,children:n,reduxStoreName:s}=e,r=nr(),i=g.useRef(null);if(r)return n;i.current==null&&(i.current=Y4e(t,s));var l=BL;return g.createElement(jLe,{context:l,store:i.current},n)}function K4e(e){var{layout:t,margin:n}=e,s=Xa(),r=nr();return g.useEffect(()=>{r||(s(JNe(t)),s(ZNe(n)))},[s,r,t,n]),null}var NK=g.memo(K4e,J4);function jK(e){var t=Xa();return g.useEffect(()=>{t(B4e(e))},[t,e]),null}function m7(e){var{zIndex:t,isPanorama:n}=e,s=g.useRef(null),r=Xa();return g.useLayoutEffect(()=>(s.current&&r(N_e({zIndex:t,element:s.current,isPanorama:n})),()=>{r(j_e({zIndex:t,isPanorama:n}))}),[r,t,n]),g.createElement("g",{tabIndex:-1,ref:s})}function f7(e){var{children:t,isPanorama:n}=e,s=Dt(m_e);if(!s||s.length===0)return t;var r=s.filter(l=>l<0),i=s.filter(l=>l>0);return g.createElement(g.Fragment,null,r.map(l=>g.createElement(m7,{key:l,zIndex:l,isPanorama:n})),t,i.map(l=>g.createElement(m7,{key:l,zIndex:l,isPanorama:n})))}var Q4e=["children"];function X4e(e,t){if(e==null)return{};var n,s,r=Z4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Z4e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fv.apply(null,arguments)}var J4e={width:"100%",height:"100%",display:"block"},ePe=g.forwardRef((e,t)=>{var n=PW(),s=DW(),r=GW();if(!gl(n)||!gl(s))return null;var{children:i,otherAttributes:l,title:o,desc:d}=e,c,m;return l!=null&&(typeof l.tabIndex=="number"?c=l.tabIndex:c=r?0:void 0,typeof l.role=="string"?m=l.role:m=r?"application":void 0),g.createElement(TV,Fv({},l,{title:o,desc:d,role:m,tabIndex:c,width:n,height:s,style:J4e,ref:t}),i)}),tPe=e=>{var{children:t}=e,n=Dt(MN);if(!n)return null;var{width:s,height:r,y:i,x:l}=n;return g.createElement(TV,{width:s,height:r,x:l,y:i},t)},h7=g.forwardRef((e,t)=>{var{children:n}=e,s=X4e(e,Q4e),r=nr();return r?g.createElement(tPe,null,g.createElement(f7,{isPanorama:!0},n)):g.createElement(ePe,Fv({ref:t},s),g.createElement(f7,{isPanorama:!1},n))});function aPe(){var e=Xa(),[t,n]=g.useState(null),s=Dt(vje);return g.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;tn(i)&&i!==s&&e(tje(i))}},[t,e,s]),n}function g7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function nPe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g7(Object(n),!0).forEach(function(s){sPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sPe(e,t,n){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rPe(e){var t=iPe(e,"string");return typeof t=="symbol"?t:t+""}function iPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xu.apply(null,arguments)}var lPe=()=>(Q_e(),null);function Bv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var oPe=g.forwardRef((e,t)=>{var n,s,r=g.useRef(null),[i,l]=g.useState({containerWidth:Bv((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Bv((s=e.style)===null||s===void 0?void 0:s.height)}),o=g.useCallback((c,m)=>{l(h=>{var p=Math.round(c),b=Math.round(m);return h.containerWidth===p&&h.containerHeight===b?h:{containerWidth:p,containerHeight:b}})},[]),d=g.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null&&typeof ResizeObserver<"u"){var{width:m,height:h}=c.getBoundingClientRect();o(m,h);var p=w=>{var{width:x,height:v}=w[0].contentRect;o(x,v)},b=new ResizeObserver(p);b.observe(c),r.current=b}},[t,o]);return g.useEffect(()=>()=>{var c=r.current;c?.disconnect()},[o]),g.createElement(g.Fragment,null,g.createElement($N,{width:i.containerWidth,height:i.containerHeight}),g.createElement("div",xu({ref:d},e)))}),cPe=g.forwardRef((e,t)=>{var{width:n,height:s}=e,[r,i]=g.useState({containerWidth:Bv(n),containerHeight:Bv(s)}),l=g.useCallback((d,c)=>{i(m=>{var h=Math.round(d),p=Math.round(c);return m.containerWidth===h&&m.containerHeight===p?m:{containerWidth:h,containerHeight:p}})},[]),o=g.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:c,height:m}=d.getBoundingClientRect();l(c,m)}},[t,l]);return g.createElement(g.Fragment,null,g.createElement($N,{width:r.containerWidth,height:r.containerHeight}),g.createElement("div",xu({ref:o},e)))}),dPe=g.forwardRef((e,t)=>{var{width:n,height:s}=e;return g.createElement(g.Fragment,null,g.createElement($N,{width:n,height:s}),g.createElement("div",xu({ref:t},e)))}),uPe=g.forwardRef((e,t)=>{var{width:n,height:s}=e;return bo(n)||bo(s)?g.createElement(cPe,xu({},e,{ref:t})):g.createElement(dPe,xu({},e,{ref:t}))});function mPe(e){return e===!0?oPe:uPe}var fPe=g.forwardRef((e,t)=>{var{children:n,className:s,height:r,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:d,onMouseEnter:c,onMouseLeave:m,onMouseMove:h,onMouseUp:p,onTouchEnd:b,onTouchMove:w,onTouchStart:x,style:v,width:j,responsive:C,dispatchTouchEvents:S=!0}=e,_=g.useRef(null),A=Xa(),[T,E]=g.useState(null),[D,z]=g.useState(null),K=aPe(),B=ZL(),O=B?.width>0?B.width:j,L=B?.height>0?B.height:r,H=g.useCallback(G=>{K(G),typeof t=="function"&&t(G),E(G),z(G),G!=null&&(_.current=G)},[K,t,E,z]),ae=g.useCallback(G=>{A(uK(G)),A(Gr({handler:i,reactEvent:G}))},[A,i]),W=g.useCallback(G=>{A(pE(G)),A(Gr({handler:c,reactEvent:G}))},[A,c]),q=g.useCallback(G=>{A(aY()),A(Gr({handler:m,reactEvent:G}))},[A,m]),le=g.useCallback(G=>{A(pE(G)),A(Gr({handler:h,reactEvent:G}))},[A,h]),Q=g.useCallback(()=>{A(xK())},[A]),te=g.useCallback(G=>{A(pK(G.key))},[A]),V=g.useCallback(G=>{A(Gr({handler:l,reactEvent:G}))},[A,l]),ee=g.useCallback(G=>{A(Gr({handler:o,reactEvent:G}))},[A,o]),me=g.useCallback(G=>{A(Gr({handler:d,reactEvent:G}))},[A,d]),we=g.useCallback(G=>{A(Gr({handler:p,reactEvent:G}))},[A,p]),ve=g.useCallback(G=>{A(Gr({handler:x,reactEvent:G}))},[A,x]),Ae=g.useCallback(G=>{S&&A(bK(G)),A(Gr({handler:w,reactEvent:G}))},[A,S,w]),be=g.useCallback(G=>{A(Gr({handler:b,reactEvent:G}))},[A,b]),Ie=mPe(C);return g.createElement(wY.Provider,{value:T},g.createElement(Jve.Provider,{value:D},g.createElement(Ie,{width:O??v?.width,height:L??v?.height,className:Et("recharts-wrapper",s),style:nPe({position:"relative",cursor:"default",width:O,height:L},v),onClick:ae,onContextMenu:V,onDoubleClick:ee,onFocus:Q,onKeyDown:te,onMouseDown:me,onMouseEnter:W,onMouseLeave:q,onMouseMove:le,onMouseUp:we,onTouchEnd:be,onTouchMove:Ae,onTouchStart:ve,ref:H},g.createElement(lPe,null),n)))}),hPe=["width","height","responsive","children","className","style","compact","title","desc"];function gPe(e,t){if(e==null)return{};var n,s,r=pPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var CK=g.forwardRef((e,t)=>{var{width:n,height:s,responsive:r,children:i,className:l,style:o,compact:d,title:c,desc:m}=e,h=gPe(e,hPe),p=ki(h);return d?g.createElement(g.Fragment,null,g.createElement($N,{width:n,height:s}),g.createElement(h7,{otherAttributes:p,title:c,desc:m},i)):g.createElement(fPe,{className:l,style:o,width:n,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(h7,{otherAttributes:p,title:c,desc:m,ref:t},g.createElement(cke,null,i)))});function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xE.apply(null,arguments)}var xPe={top:5,right:5,bottom:5,left:5},yPe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:xPe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},bPe=g.forwardRef(function(t,n){var s,r=_s(t.categoricalChartProps,yPe),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:d,categoricalChartProps:c}=t,m={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:d,eventEmitter:void 0};return g.createElement(wK,{preloadedState:{options:m},reduxStoreName:(s=c.id)!==null&&s!==void 0?s:i},g.createElement(XY,{chartData:c.data}),g.createElement(NK,{layout:r.layout,margin:r.margin}),g.createElement(jK,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),g.createElement(CK,xE({},r,{ref:n})))}),vPe=["axis","item"],wPe=g.forwardRef((e,t)=>g.createElement(bPe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vPe,tooltipPayloadSearcher:NY,categoricalChartProps:e,ref:t}));function NPe(e){var t=Xa();return g.useEffect(()=>{t(H4e(e))},[t,e]),null}var jPe=["layout"];function yE(){return yE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yE.apply(null,arguments)}function CPe(e,t){if(e==null)return{};var n,s,r=SPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var _Pe={top:5,right:5,bottom:5,left:5},SK={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:_Pe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},APe=g.forwardRef(function(t,n){var s,r=_s(t.categoricalChartProps,SK),{layout:i}=r,l=CPe(r,jPe),{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:c,tooltipPayloadSearcher:m}=t,h={chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:c,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(wK,{preloadedState:{options:h},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:o},g.createElement(XY,{chartData:r.data}),g.createElement(NK,{layout:i,margin:r.margin}),g.createElement(jK,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),g.createElement(NPe,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),g.createElement(CK,yE({},l,{ref:n})))});function p7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function x7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p7(Object(n),!0).forEach(function(s){TPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function TPe(e,t,n){return(t=EPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EPe(e){var t=kPe(e,"string");return typeof t=="symbol"?t:t+""}function kPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LPe=["item"],PPe=x7(x7({},SK),{},{layout:"centric",startAngle:0,endAngle:360}),DPe=g.forwardRef((e,t)=>{var n=_s(e,PPe);return g.createElement(APe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:LPe,tooltipPayloadSearcher:NY,categoricalChartProps:n,ref:t})});const y7={user_id:"",start_date:"",end_date:"",target_amount:""},b7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function OPe({name:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search..."}){const[l,o]=g.useState(!1),[d,c]=g.useState(""),m=g.useRef(null),h=t.find(w=>String(w.id)===String(n)),p=h?r(h):"",b=g.useMemo(()=>{const w=d.toLowerCase();return w?t.filter(x=>r(x).toLowerCase().includes(w)):t},[t,d,r]);return g.useEffect(()=>{const w=x=>{m.current&&!m.current.contains(x.target)&&o(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),a.jsxs("div",{ref:m,className:"relative flex justify-center w-full",children:[a.jsx("input",{value:l?d:p,placeholder:i,onFocus:()=>o(!0),onChange:w=>{c(w.target.value),o(!0)},className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"}),l&&a.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(w=>a.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(w.id)}}),o(!1),c("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(w)},w.id)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function ij({currentUserRole:e,currentUserId:t}){g.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[n,s]=g.useState([]),[r,i]=g.useState([]),[l,o]=g.useState(!1),[d,c]=g.useState(""),[m,h]=g.useState(1),[p,b]=g.useState(10),[w,x]=g.useState(!1),[v,j]=g.useState(!1),[C,S]=g.useState(!1),[_,A]=g.useState(null),[T,E]=g.useState(y7),[D,z]=g.useState(null),[K,B]=g.useState(null),[O,L]=g.useState(!1),[H,ae]=g.useState([]),[W,q]=g.useState("annual"),[le,Q]=g.useState(1),te=g.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER","SALES"].includes(e?.toUpperCase()),[e]),V=g.useCallback(async()=>{o(!0);try{const ke=await re.get("/targets/admin/fetch-all");s(ke.data)}catch(ke){console.error(ke),Y.error("Failed to load targets.")}finally{o(!1)}},[]),ee=g.useCallback(async()=>{try{if(te){const ke=await re.get("/targets/admin/get-users");i(ke.data)}}catch(ke){console.error(ke)}},[te]);g.useEffect(()=>{V(),ee()},[V,ee]);const me=g.useMemo(()=>{const ke=n.reduce((Be,dt)=>Be+(Number(dt.target_amount)||0),0),ye=n.reduce((Be,dt)=>Be+(Number(dt.achieved_amount)||0),0),Me=ke>0?(ye/ke*100).toFixed(1):0,He=Math.max(0,ke-ye);return{totalTarget:ke,totalAchieved:ye,achievement:Me,remaining:He,totalCount:n.length}},[n]),we=g.useCallback(()=>(ye=>W==="annual"?ye:ye.filter(Me=>{const He=new Date(Me.start_date),Be=new Date(Me.end_date),dt=He.getMonth(),M=Be.getMonth();let pe=!1;if(W==="semiannual")le===1?pe=dt<=5&&M>=0:pe=dt<=11&&M>=6;else if(W==="trimester"){const je=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][le-1];pe=dt<=je.end&&M>=je.start}else if(W==="quarterly"){const je=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][le-1];pe=dt<=je.end&&M>=je.start}return pe}))(n),[n,W,le]),ve=g.useMemo(()=>{const ke=we(),ye={};ke.forEach(dt=>{const M=dt.user_id,pe=dt.user?`${dt.user.first_name} ${dt.user.last_name}`:"Unknown";ye[M]||(ye[M]={userId:M,name:pe,targetAmount:0,achievedAmount:0}),ye[M].targetAmount+=Number(dt.target_amount)||0,ye[M].achievedAmount+=Number(dt.achieved_amount)||0});const Me=Object.values(ye).map((dt,M)=>({...dt,fill:b7[M%b7.length]})),He=Me.reduce((dt,M)=>dt+M.targetAmount,0);return Me.map(dt=>({...dt,percentage:He>0?(dt.targetAmount/He*100).toFixed(1):0}))},[we]),Ae=g.useMemo(()=>ve.slice(0,8).map(ke=>({name:ke.name.split(" ")[0],achievement:Number(ke.achievedAmount),target:Number(ke.targetAmount)})),[ve]),be=g.useMemo(()=>{const ke=d.toLowerCase();return n.filter(ye=>(ye.user?`${ye.user.first_name} ${ye.user.last_name}`.toLowerCase():"").includes(ke)||ye.start_date?.includes(ke)||ye.end_date?.includes(ke))},[n,d]),Ie=Math.max(1,Math.ceil(be.length/p)),G=g.useMemo(()=>{const ke=(m-1)*p;return be.slice(ke,ke+p)},[be,m,p]),Ce=ke=>{const{name:ye,value:Me}=ke.target;E(He=>({...He,[ye]:Me}))},ce=()=>{E(y7),j(!1),A(null),x(!0)},F=ke=>{E({user_id:ke.user?.id?String(ke.user.id):"",start_date:ke.start_date||"",end_date:ke.end_date||"",target_amount:ke.target_amount?.toString()||""}),j(!0),A(ke.id),x(!0),z(null)},ie=ke=>{const ye=ke.user?`${ke.user.first_name} ${ke.user.last_name}`:"Unknown";B({title:"Delete Target",message:a.jsxs("span",{children:["Are you sure you want to delete the target for"," ",a.jsx("span",{className:"font-semibold",children:ye}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await re.delete(`/targets/admin/${ke.id}`),Y.success("Target deleted successfully."),V(),z(null)}})},he=()=>{if(G.every(ke=>H.includes(ke.id)))ae(H.filter(ke=>!G.map(ye=>ye.id).includes(ke)));else{const ke=G.map(ye=>ye.id);ae([...new Set([...H,...ke])])}},Le=ke=>{ae(ye=>ye.includes(ke)?ye.filter(Me=>Me!==ke):[...ye,ke])},xe=async()=>{H.length!==0&&B({title:"Bulk Delete Targets",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:H.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${H.length} Targets`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await re.post("/targets/admin/bulk-delete",{target_ids:H}),Y.success(`Successfully deleted ${H.length} targets`),ae([]),V()}})},Ve=ke=>{if(ke.preventDefault(),!T.user_id||!T.start_date||!T.end_date||!T.target_amount){Y.error("All fields are required.");return}if(new Date(T.end_date)<new Date(T.start_date)){Y.error("End date must be after start date.");return}const ye={user_id:Number(T.user_id),target_amount:Number(T.target_amount),start_date:T.start_date,end_date:T.end_date},Me=v?"Update Target":"Create Target";B({title:Me,message:"Are you sure you want to proceed?",confirmLabel:Me,cancelLabel:"Cancel",variant:"primary",action:async()=>{S(!0);try{v?(await re.put(`/targets/admin/${_}`,ye),Y.success("Target updated successfully.")):(await re.post("/targets/admin/create",ye),Y.success("Target created successfully.")),x(!1),V()}catch(He){console.error(He);const Be=He.response?.data?.detail||He.message||"Operation failed.";Y.error(Be)}finally{S(!1)}}})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(It,{message:"Loading targets..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[a.jsx(Nr,{className:"mr-2 text-blue-600"})," Targets"]}),te&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Target"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(Iy,{title:"Total Targets",value:me.totalCount,icon:a.jsx(Nr,{size:22}),color:"blue"}),a.jsx(Iy,{title:"Target Amount",value:`${me.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(Yle,{size:22}),color:"green"}),a.jsx(Iy,{title:"Achieved Amount",value:`${me.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(nu,{size:22}),color:"purple"}),a.jsx(Iy,{title:"Achievement Rate",value:`${me.achievement}%`,icon:a.jsx(Nr,{size:22}),color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"mb-4 text-center",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),a.jsx("div",{className:"h-[38px] w-full invisible"})]}),Ae.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(q6,{width:"100%",height:"100%",children:a.jsxs(wPe,{data:Ae,children:[a.jsx(aK,{strokeDasharray:"3 3",vertical:!1}),a.jsx(cK,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(dK,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,ke=>Math.ceil(ke/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(mz,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:ke=>`Sales: ${ke}`,formatter:(ke,ye,Me)=>{if(!Me||!Me.payload)return[ke,ye];const He=Me.payload,Be=Number(He.achievement)||0,dt=Number(He.target)||0,M=Math.max(0,dt-Be),pe=dt>0?(Be/dt*100).toFixed(1):0;return ye==="Achieved"?[`${Be.toLocaleString()} (${pe}%)`,"Achieved"]:ye==="Remaining"?[`${M.toLocaleString()}`,"Remaining"]:[ke,ye]}}),a.jsx(fE,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:ke,y:ye,width:Me,value:He,payload:Be})=>{if(!Be||Be.target===void 0)return null;const dt=(He/Be.target*100).toFixed(0),M=ye-10<0?10:ye-10;return a.jsxs("text",{x:ke+Me/2,y:M,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[dt,"%"]})}}),a.jsx(fE,{dataKey:ke=>Math.max(0,ke.target-ke.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(Nne,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[a.jsxs("select",{value:W,onChange:ke=>{q(ke.target.value),Q(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"annual",children:"Annual"}),a.jsx("option",{value:"semiannual",children:"Every 6 Months"}),a.jsx("option",{value:"trimester",children:"Every 4 Months"}),a.jsx("option",{value:"quarterly",children:"Quarterly"})]}),W!=="annual"&&a.jsxs("select",{value:le,onChange:ke=>Q(parseInt(ke.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[W==="semiannual"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Jun"}),a.jsx("option",{value:2,children:"Jul - Dec"})]}),W==="trimester"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Apr"}),a.jsx("option",{value:2,children:"May - Aug"}),a.jsx("option",{value:3,children:"Sep - Dec"})]}),W==="quarterly"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),a.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),a.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),a.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),ve.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(q6,{width:"100%",height:"100%",children:a.jsxs(DPe,{children:[a.jsx(mz,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:ke,payload:ye})=>{if(ke&&ye&&ye.length>0){const Me=ye[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Me.name}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[a.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",Number(Me.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),a.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",Me.percentage,"%"]})]})}return null}}),a.jsx(qY,{data:ve,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:ke,percentage:ye,fill:Me})=>a.jsxs("text",{fill:Me,fontSize:12,fontWeight:600,children:[ke.split(" ")[0],": ",ye,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(Tne,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),te&&e.toLowerCase()!=="sales"&&a.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search targets...",value:d,onChange:ke=>c(ke.target.value),className:"w-full outline-none"})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:G.length>0&&G.every(ke=>H.includes(ke.id)),onChange:he})}),a.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:H.length>0?a.jsx("button",{onClick:xe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${H.length} selected targets`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:G.length>0?G.map(ke=>{const ye=Number(ke.target_amount)>0?(Number(ke.achieved_amount)/Number(ke.target_amount)*100).toFixed(1):0;return a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[a.jsx("td",{className:"py-3 px-4",onClick:Me=>Me.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(ke.id),onChange:()=>Le(ke.id)})}),a.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>z(ke),children:ke.user?`${ke.user.first_name} ${ke.user.last_name}`:"Unknown"}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>z(ke),children:["",Number(ke.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>z(ke),children:["",Number(ke.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>z(ke),children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ye>=100?"bg-green-500":ye>=75?"bg-blue-500":ye>=50?"bg-yellow-500":"bg-red-500"}`,children:[ye,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>z(ke),children:ke.start_date}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>z(ke),children:ke.end_date}),a.jsx("td",{})]},ke.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:be.length,pageSize:p,currentPage:m,onPrev:()=>h(ke=>Math.max(ke-1,1)),onNext:()=>h(ke=>Math.min(ke+1,Ie)),onPageSizeChange:ke=>{b(ke),h(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),D&&a.jsx(MPe,{target:D,onClose:()=>z(null),onEdit:()=>F(D),onDelete:()=>ie(D),canEdit:te}),w&&te&&a.jsx(IPe,{formData:T,users:r,isEditing:v,isSubmitting:C,onChange:Ce,onClose:()=>x(!1),onSubmit:Ve}),K&&a.jsx($Pe,{...K,loading:O,onConfirm:async()=>{L(!0),await K.action(),L(!1),B(null)},onCancel:()=>B(null)})]})}function Iy({title:e,value:t,icon:n,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[a.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:n}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),a.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function MPe({target:e,onClose:t,onEdit:n,onDelete:s,canEdit:r}){const i=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:l=>l.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),a.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]}),r&&a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:n,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"})]}),a.jsxs("div",{className:"p-4 lg:p-6",children:[a.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),a.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),a.jsxs("p",{className:"text-green-600 font-semibold",children:["",Number(e.target_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),a.jsxs("p",{className:"text-blue-600 font-semibold",children:["",Number(e.achieved_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),a.jsxs("p",{className:`font-semibold ${i>=100?"text-green-600":i>=75?"text-blue-600":i>=50?"text-yellow-600":"text-red-600"}`,children:[i,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),a.jsx("p",{children:e.start_date})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),a.jsx("p",{children:e.end_date})]})]})})]})]})})}function IPe({formData:e,users:t,isEditing:n,isSubmitting:s,onChange:r,onClose:i,onSubmit:l}){return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto min-h-[50vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:a.jsx(Bt,{size:24})}),a.jsx("h2",{className:"text-2xl font-semibold text-center mb-8",children:n?"Edit Target":"Add New Target"}),a.jsxs("form",{onSubmit:l,className:"grid gap-5 text-base",children:[a.jsxs("div",{className:"flex flex-col gap-1 relative",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign User"}),a.jsx(OPe,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:o=>`${o.first_name} ${o.last_name}`,placeholder:"Search user..."})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Target Amount"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,required:!0,className:"w-full max-w-md border text-gray-500 border-gray-300 text-gray-500 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function $Pe({title:e,message:t,confirmLabel:n,cancelLabel:s,variant:r,loading:i,onConfirm:l,onCancel:o}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:o,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),a.jsx("button",{onClick:l,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":n})]})]})})}function RPe(){const{userRole:e}=Zs();return a.jsx(ij,{currentUserRole:e,currentUserId:null})}const W2=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],q2={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},bi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},Y2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",zPe=e=>{switch(bi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},UPe=e=>{switch(bi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},$y=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Xh=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",FPe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},K2=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},v7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},w7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Hv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},BPe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=Hv(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=Hv(t);return n||null},HPe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},GPe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function VPe(){const e=bt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState([]),[h,p]=g.useState([]),[b,w]=g.useState(null),[x,v]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[A,T]=g.useState(!1),[E,D]=g.useState(null),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(q2),[ae,W]=g.useState(""),[q,le]=g.useState("Filter by Status"),[Q,te]=g.useState(null),[V,ee]=g.useState(1),[me,we]=g.useState(10),[ve,Ae]=g.useState("Overview"),[be,Ie]=g.useState("Draft"),[G,Ce]=g.useState([]);g.useEffect(()=>{let ne=!0;return(async()=>{const Oe=BPe();if(Oe&&ne){w(Oe);return}try{const et=await re.get("/auth/me"),nt=Hv(et?.data);if(nt&&ne){w(nt);return}}catch{}try{const et=await re.get("/users/me"),nt=Hv(et?.data);if(nt&&ne){w(nt);return}}catch{}ne&&w(null)})(),()=>{ne=!1}},[]);const ce=g.useCallback(ne=>ne&&o.find(Oe=>String(Oe.id)===String(ne))?.name||"",[o]),F=g.useCallback(ne=>{if(!ne)return"";const oe=c.find(Oe=>String(Oe.id)===String(ne));return oe?`${oe.first_name} ${oe.last_name}`.trim():""},[c]),ie=g.useCallback(ne=>{if(!ne)return"--";const oe=i.find(Oe=>String(Oe.id)===String(ne));return oe?.deal_name||oe?.name||`Deal #${v7(ne)}`},[i]),he=g.useCallback(ne=>{const oe=i.find(nt=>String(nt.id)===String(ne)),Oe=HPe(oe);let et=GPe(oe);if(!et&&Oe){const nt=c.filter(ht=>String(ht.account_id||"")===String(Oe));if(nt.length>0){const ht=[...nt].sort((_e,gt)=>{const Wt=`${_e.first_name||""} ${_e.last_name||""}`.trim().toLowerCase(),sa=`${gt.first_name||""} ${gt.last_name||""}`.trim().toLowerCase();return Wt.localeCompare(sa)});et=String(ht[0].id)}}if(Oe&&et){const nt=c.find(ht=>String(ht.id)===String(et));nt?.account_id&&String(nt.account_id)!==String(Oe)&&(et="")}return{accountId:Oe||"",contactId:et||""}},[i,c]),Le=g.useCallback(ne=>{if(!ne)return"--";if(ne.deal?.deal_name)return ne.deal.deal_name;if(ne.deal?.name)return ne.deal.name;const oe=ne.deal_id||ne.deal?.id;return oe?ie(oe):"--"},[ie]),xe=g.useCallback(ne=>{if(!ne)return"--";if(ne.account?.name)return ne.account.name;let oe=ne.account_id||ne.account?.id;if(!oe){const Oe=ne.deal_id||ne.deal?.id;Oe&&(oe=he(Oe).accountId)}return oe?ce(oe)||`Account #${oe}`:"--"},[he,ce]),Ve=g.useCallback(ne=>{if(!ne)return"--";if(ne.contact?.first_name||ne.contact?.last_name)return`${ne.contact?.first_name||""} ${ne.contact?.last_name||""}`.trim()||"--";let oe=ne.contact_id||ne.contact?.id;if(!oe){const et=ne.deal_id||ne.deal?.id;et&&(oe=he(et).contactId)}return(oe?F(oe):"")||(oe?`Contact #${oe}`:"--")},[he,F]),ke=g.useCallback(async(ne=null)=>{r(!0);try{const oe=await re.get("/quotes/admin/fetch-all"),et=[...Array.isArray(oe.data)?oe.data:[]].sort((nt,ht)=>{const _e=nt?.created_at||nt?.updated_at||0,gt=ht?.created_at||ht?.updated_at||0;return new Date(gt)-new Date(_e)});if(n(et),ne){const nt=et.find(ht=>ht.id===ne);v(nt||null)}}catch(oe){console.error(oe),n([]),oe.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),ye=g.useCallback(async()=>{try{const ne=await re.get("/deals/admin/fetch-all");l(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&Y.warn("Unable to load deals (permission denied).")}},[]),Me=g.useCallback(async()=>{try{const ne=await re.get("/accounts/admin/fetch-all");d(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),He=g.useCallback(async()=>{try{const ne=await re.get("/contacts/admin/fetch-all");m(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},[]),Be=g.useCallback(async()=>{try{const ne=await re.get("/users/all");p(Array.isArray(ne.data)?ne.data:[])}catch(ne){console.error(ne),ne.response?.status===403&&Y.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{ke(),ye(),Me(),He(),Be()},[ke,ye,Me,He,Be]);const dt=g.useMemo(()=>{const ne=ae.trim().toLowerCase(),oe=q.trim();return t.filter(Oe=>{const et=Le(Oe),nt=xe(Oe),ht=Ve(Oe),_e=K2(Oe.presented_date,Oe.validity_days),gt=[Oe.quote_id,et,nt,ht,Oe.total_amount?.toString(),Oe.validity_days?.toString(),Oe.presented_date?Xh(Oe.presented_date):"",_e?Xh(_e):"",Oe.assigned_user?.first_name,Oe.assigned_user?.last_name,Oe.creator?.first_name,Oe.creator?.last_name,Oe.status,Oe.notes,$y(Oe.created_at),$y(Oe.updated_at)],Wt=ne===""||gt.some(Ja=>Ja==null?!1:Ja.toString().toLowerCase().includes(ne)),sa=oe==="Filter by Status"||bi(Oe.status)===oe;return Wt&&sa})},[t,ae,q,Le,xe,Ve]),M=Math.max(1,Math.ceil(dt.length/me)||1);g.useEffect(()=>ee(1),[ae,q]),g.useEffect(()=>{ee(ne=>{const oe=Math.max(1,Math.ceil(dt.length/me)||1);return ne>oe?oe:ne})},[dt.length,me]);const pe=g.useMemo(()=>{const ne=(V-1)*me;return dt.slice(ne,ne+me)},[dt,V,me]),se=()=>ee(ne=>Math.max(ne-1,1)),je=()=>ee(ne=>Math.min(ne+1,M)),We=ne=>{v(ne),Ae("Overview"),Ie(bi(ne?.status)||"Draft")},Ne=()=>{v(null),Ae("Overview")},qe=ne=>{ne.target.id==="quoteModalBackdrop"&&!z&&Ne()},De=g.useCallback(()=>{C(!1),_(!1),O(null),H(q2),T(!1)},[]),Je=ne=>{ne.target.id==="modalBackdrop"&&!A&&!z&&De()},at=ne=>{const{name:oe,value:Oe}=ne.target;if(oe==="deal_id"){const{accountId:et,contactId:nt}=he(Oe);H(ht=>({...ht,deal_id:Oe,account_id:et,contact_id:nt}));return}H(et=>({...et,[oe]:Oe}))},ot=()=>{H(q2),_(!1),O(null),C(!0)},R=ne=>{if(!ne)return;v(null);const oe=ne.deal?.id?String(ne.deal.id):ne.deal_id?String(ne.deal_id):"",Oe=oe?he(oe):{accountId:"",contactId:""},et=ne.account?.id?String(ne.account.id):ne.account_id?String(ne.account_id):Oe.accountId,nt=ne.contact?.id?String(ne.contact.id):ne.contact_id?String(ne.contact_id):Oe.contactId,ht=ne.assigned_user?.id?String(ne.assigned_user.id):ne.assigned_to?String(ne.assigned_to):"";H({deal_id:oe,account_id:et||"",contact_id:nt||"",total_amount:ne.total_amount?.toString()||"",presented_date:FPe(ne.presented_date),validity_days:ne.validity_days!==null&&ne.validity_days!==void 0?String(ne.validity_days):"",status:bi(ne.status)||"Draft",assigned_to:ht,notes:ne.notes||""}),_(!0),O(ne.id),C(!0)},$=ne=>{if(ne.target.checked){const oe=pe.map(Oe=>Oe.id);Ce(oe)}else Ce([])},I=ne=>{Ce(oe=>oe.includes(ne)?oe.filter(Oe=>Oe!==ne):[...oe,ne])},U=ne=>{if(!ne)return;const oe=ne.quote_id||"this quote";D({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:oe}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ne.id,name:oe}})},de=async()=>{G.length!==0&&D({title:"Bulk Delete Quotes",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:G.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${G.length} Quotes`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:G}})},[ge,ue]=g.useState(!1),Se=ne=>{if(ne.preventDefault(),ue(!0),!b){Y.error("Unable to determine current user. Please log in again.");return}if(!L.deal_id){Y.error("Deal is required.");return}if(!L.assigned_to){Y.error("Assigned To is required.");return}const Oe=he(L.deal_id),et={deal_id:Number(L.deal_id),account_id:Oe.accountId?Number(Oe.accountId):null,contact_id:Oe.contactId?Number(Oe.contactId):null,total_amount:Number(L.total_amount),presented_date:L.presented_date||null,validity_days:L.validity_days===""?null:Number(L.validity_days),status:L.status||"Draft",assigned_to:L.assigned_to?Number(L.assigned_to):null,notes:L.notes?.trim()||null},nt=S&&B?"update":"create",ht=ie(L.deal_id),_e=nt==="create"?{...et,created_by_id:Number(b)}:et;D({title:nt==="create"?"Confirm New Quote":"Confirm Update",message:nt==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ht}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ht}),"?"]}),confirmLabel:nt==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:nt,payload:_e,targetId:B||null,name:ht}})},Fe=async()=>{if(!E?.action){D(null);return}const{action:ne}=E,{type:oe,payload:Oe,targetId:et,name:nt}=ne;K(!0);try{if(oe==="create")T(!0),await re.post("/quotes/admin",Oe),Y.success("Quote created successfully."),De(),await ke();else if(oe==="update"){if(!et)throw new Error("Missing quote identifier for update.");T(!0),await re.put(`/quotes/admin/${et}`,Oe),Y.success("Quote updated successfully."),De(),await ke(),x?.id===et&&v(null)}else if(oe==="delete"){if(!et)throw new Error("Missing quote identifier for deletion.");const ht=x?.id;te(et),await re.delete(`/quotes/admin/${et}`),Y.success(`Quote "${nt}" deleted successfully.`),await ke(ht&&ht!==et?ht:null),ht===et&&v(null)}else oe==="bulk-delete"&&(await re.post("/quotes/admin/bulk-delete",{quote_ids:G}),Y.success(`Successfully deleted ${G.length} quotes`),Ce([]),await ke())}catch(ht){console.error(ht);const _e=oe==="create"?"Failed to create quote. Please review the details and try again.":oe==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Y.error(_e),(oe==="create"||oe==="update")&&T(!1),oe==="delete"&&te(null)}finally{(oe==="create"||oe==="update")&&T(!1),oe==="delete"&&te(null),K(!1),D(null)}},ft=()=>{z||D(null)},vt=g.useCallback((ne,oe)=>{const Oe=ne?.deal_id??ne?.deal?.id??"",et=Oe?Number(Oe):null,nt=et?he(String(et)):{accountId:"",contactId:""},ht=ne?.account_id??ne?.account?.id??nt.accountId??null,_e=ne?.contact_id??ne?.contact?.id??nt.contactId??null,gt=ne?.total_amount??0,Wt=ne?.assigned_to??ne?.assigned_user?.id??null;return{deal_id:et,account_id:ht!=null&&String(ht).trim()!==""?Number(ht):null,contact_id:_e!=null&&String(_e).trim()!==""?Number(_e):null,total_amount:Number(gt),presented_date:ne?.presented_date||null,validity_days:ne?.validity_days===""||ne?.validity_days===void 0||ne?.validity_days===null?null:Number(ne.validity_days),status:oe,assigned_to:Wt!=null&&String(Wt).trim()!==""?Number(Wt):null,notes:ne?.notes?.trim()||null}},[he]),ze=g.useCallback(async()=>{if(!x?.id)return;const ne=bi(be),oe=[ne,ne.toLowerCase()],Oe=async et=>re.patch(`/quotes/admin/${x.id}/status`,{status:et},{headers:{"Content-Type":"application/json"}});try{let et=!1;for(const nt of oe)try{await Oe(nt),et=!0;break}catch(ht){if(ht?.response?.status===422)continue;throw ht}if(!et){const nt=vt(x,ne);if(!nt.deal_id){Y.error("Cannot update status: missing deal_id on selected quote.");return}if(!nt.total_amount||nt.total_amount<=0){Y.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await re.put(`/quotes/admin/${x.id}`,nt)}Y.success(`Quote status updated to ${ne}`),v(null),Ae("Overview"),await ke()}catch(et){console.error(et);const nt=et?.response?.data?.message||(et?.response?.data?.errors?Object.values(et.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Y.error(nt)}},[x,be,ke,vt]),yt=[{label:"Filter by Status",value:"Filter by Status"},...W2.map(ne=>({label:ne.label,value:ne.value}))],Te=E?.action?.type==="delete"?E.action.targetId:null,st=x&&(Q===x.id||Te===x.id),X=x&&Q===x.id,Ee=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:ne=>ne.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:Ne,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Le(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${UPe(x.status)}`,children:Y2(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>R(x),disabled:z||E?.action?.type==="update"&&E.action.targetId===x.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>U(x),disabled:!!st,children:X?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ne=>a.jsx("button",{onClick:()=>Ae(ne),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${ve===ne?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ne},ne))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ve==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:w7(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:Le(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:xe(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Ve(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:Xh(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:Xh(K2(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:Y2(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:$y(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:$y(x.updated_at)||"N/A"})]})]})}),ve==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||bi(x.status)||"Draft",onChange:ne=>Ie(ne.target.value),children:W2.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value))}),a.jsx("button",{onClick:ze,disabled:bi(be)===bi(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${bi(be)===bi(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,$e=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(da,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{ot(),ue(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:ne=>W(ne.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:q,onChange:ne=>le(ne.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(ne=>a.jsx("option",{value:ne.value,children:ne.label},ne.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:pe.length>0&&G.length===pe.length,onChange:$,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:G.length>0?a.jsx("button",{onClick:de,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${G.length} selected items`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):dt.length>0?pe.map(ne=>{const oe=K2(ne.presented_date,ne.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>We(ne),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Oe=>Oe.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:G.includes(ne.id),onChange:()=>I(ne.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:w7(ne.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Le(ne)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:xe(ne)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Ve(ne)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:ne.total_amount?`${Number(ne.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${zPe(ne.status)}`,children:Y2(ne.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:ne.assigned_user?`${ne.assigned_user.first_name} ${ne.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:Xh(oe)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},ne.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:dt.length,pageSize:me,currentPage:V,onPrev:se,onNext:je,onPageSizeChange:ne=>{we(ne),ee(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Ye=j?a.jsx("div",{id:"modalBackdrop",onClick:Je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ne=>ne.stopPropagation(),children:[a.jsx("button",{onClick:()=>{De(),ue(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||z,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Se,children:[a.jsx(j7,{label:"Deal",name:"deal_id",value:L.deal_id,onChange:ne=>{const{accountId:oe,contactId:Oe}=he(ne);H(et=>({...et,deal_id:ne,account_id:oe,contact_id:Oe}))},items:Array.isArray(i)?i:[],getLabel:ne=>`${v7(ne?.deal_id??"")} ${ne?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:ge,disabled:A||i.length===0,className:"md:col-span-2"}),a.jsx(N7,{label:"Account",value:ce(L.account_id)||(L.account_id?`Account #${L.account_id}`:""),disabled:!0}),a.jsx(N7,{label:"Contact",value:F(L.contact_id)||(L.contact_id?`Contact #${L.contact_id}`:""),disabled:!0}),a.jsx(Q2,{label:"Total Amount",name:"total_amount",type:"number",value:L.total_amount,onChange:at,placeholder:"0.00",disabled:A}),a.jsx(Q2,{label:"Presented Date",name:"presented_date",type:"date",value:L.presented_date,onChange:at,disabled:A}),a.jsx(Q2,{label:"Validity Days",name:"validity_days",type:"number",value:L.validity_days,onChange:at,placeholder:"30",disabled:A}),a.jsx(j7,{label:"Assigned To",value:L.assigned_to||"",onChange:ne=>H(oe=>({...oe,assigned_to:ne})),items:Array.isArray(h)?h:[],getLabel:ne=>{const oe=`${ne?.first_name??""} ${ne?.last_name??""}`.trim();return oe?ne?.role?`${oe} (${ne.role})`:oe:ne?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:ge,disabled:A}),a.jsx(WPe,{label:"Status",name:"status",value:L.status,onChange:at,options:W2,required:!0,disabled:A,className:"md:col-span-2"}),a.jsx(YPe,{label:"Notes",name:"notes",value:L.notes,onChange:at,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{De(),ue(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||z,children:A?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,J=E?a.jsx(KPe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:Fe,onCancel:ft,loading:z}):null;return a.jsxs(a.Fragment,{children:[x?Ee:$e,Ye,J]})}function Q2({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function N7({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function WPe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const d=n!=null?String(n):"",m=r.some(h=>String(h.value)===d)?d:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function j7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(qPe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function qPe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function YPe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function KPe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const lj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Zh={firstName:"",lastName:"",email:"",password:"",role:""},QPe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Ji=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",XPe=e=>{const t=Ji(e),n=lj.find(s=>Ji(s.value)===t);return n?n.value:e||""},bE=e=>{const t=Ji(e),n=lj.find(s=>Ji(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},C7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},X2=(e,{size:t="sm"}={})=>{const n=Ji(e),s=QPe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:bE(e)})},ZPe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},S7=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function JPe(){const{user:e,loading:t}=Xt(),[n,s]=g.useState([]),[r,i]=g.useState(!1),[l,o]=g.useState(""),[d,c]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(Zh),[_,A]=g.useState(!1),[T,E]=g.useState(null),[D,z]=g.useState(!1),[K,B]=g.useState(1),[O,L]=g.useState(10),[H,ae]=g.useState("Overview"),[W,q]=g.useState(""),[le,Q]=g.useState(!1),[te,V]=g.useState([]),ee=Ji(e?.role),me=["ADMIN","CEO"].includes(ee),we=!t&&me,ve=g.useMemo(()=>{const De=lj.filter(Je=>Ji(Je.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...De]},[]),Ae=g.useCallback(De=>{De&&(s(Je=>Je.map(at=>at.id===De?{...at,highlight:!0}:at)),setTimeout(()=>{s(Je=>Je.map(at=>at.id===De?{...at,highlight:!1}:at))},2e3))},[]),be=g.useCallback(async()=>{i(!0);try{const De=await re.get("/users/all"),Je=Array.isArray(De.data)?De.data:[],at=S7(Je);s(at),h(ot=>ot&&(at.find($=>$.id===ot.id)||null)),console.log(De.data)}catch(De){console.error("Error fetching users:",De);const Je=De.response?.data?.detail||"Failed to load users. Please try again later.";Y.error(Je)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!me&&e&&Y.error("You are not authorized to access User Management.")},[me,t,e]),g.useEffect(()=>{t||!me||be()},[t,me,be]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Ie=g.useMemo(()=>{const De=l.trim().toLowerCase(),Je=Ji(d);return S7(n.filter(at=>{if(!at)return!1;const ot=De===""||[at.first_name,at.last_name,`${at.first_name||""} ${at.last_name||""}`,at.email,bE(at.role)].filter(Boolean).some($=>$.toString().toLowerCase().includes(De)),R=Je===""||Je==="CEO"&&["CEO","ADMIN"].includes(Ji(at.role))||Ji(at.role)===Je;return ot&&R}))},[n,l,d]),G=Math.max(1,Math.ceil(Ie.length/O)||1);g.useEffect(()=>{B(1)},[l,d,O]),g.useEffect(()=>{B(De=>{const Je=Math.max(1,Math.ceil(Ie.length/O)||1);return De>Je?Je:De})},[Ie.length,O]);const Ce=g.useMemo(()=>{const De=(K-1)*O;return Ie.slice(De,De+O)},[Ie,K,O]);Ie.length===0||(K-1)*O+1,Math.min(K*O,Ie.length);const ce=()=>B(De=>Math.max(De-1,1)),F=()=>B(De=>Math.min(De+1,G)),ie=()=>{S(Zh),x(!1),j(null),b(!0)},he=De=>{h(De),ae("Overview"),q(De?.is_active?"Active":"Inactive")},Le=De=>{De.target.id==="userModalBackdrop"&&!D&&xe()},xe=()=>{h(null)},Ve=(De,Je)=>{S(at=>({...at,[De]:Je}))},ke=()=>{const De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Je="";for(let at=0;at<10;at+=1)Je+=De.charAt(Math.floor(Math.random()*De.length));Ve("password",Je)},ye=()=>{_||D||(b(!1),S(Zh),j(null),x(!1))},Me=De=>{S({firstName:De.first_name||"",lastName:De.last_name||"",email:De.email||"",password:"",role:XPe(De.role)}),x(!0),j(De.id),b(!0),h(null)},He=De=>{E({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[De.first_name," ",De.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:De.id,name:`${De.first_name||""} ${De.last_name||""}`.trim()||De.email||"user"}})},Be=De=>{De.preventDefault();const Je=C.firstName.trim(),at=C.lastName.trim(),ot=C.email.trim(),R=C.password.trim(),$=C.role,I=!(w&&v);if(!Je||!ot||!$){Y.warn("Please fill in all required fields.");return}if(I&&!R){Y.warn("Please fill in all required fields.");return}if(R&&R.length<8){Y.warn("Password should be at least 8 characters long.");return}const U={first_name:Je,last_name:at,email:ot,role:$};(I||R)&&(U.password=R);const de=`${Je} ${at}`.trim(),ge=I?"create":"update";E({title:ge==="create"?"Confirm New User":"Confirm User Update",message:ge==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:de})," with role"," ",a.jsx("span",{className:"font-semibold",children:bE($)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:de||ot}),"?"]}),confirmLabel:ge==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:ge,payload:U,targetId:v,name:de||ot}})},dt=async()=>{te.length!==0&&E({title:"Bulk Delete Users",message:a.jsxs("span",{children:["Are you sure you want to deactivate"," ",a.jsx("span",{className:"font-semibold",children:te.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${te.length} Users`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:te}})},M=De=>{if(De.target.checked){const Je=Ce.map(at=>at.id);V(Je)}else V([])},pe=De=>{V(Je=>Je.includes(De)?Je.filter(at=>at!==De):[...Je,De])},se=async()=>{if(!T?.action){E(null);return}const{action:De}=T,{type:Je,payload:at,targetId:ot,name:R}=De;z(!0),(Je==="create"||Je==="update")&&A(!0);try{if(Je==="create"){const I=(await re.post("/users/createuser",at)).data;await be(),Ae(I.id),Y.success(`User "${R}" created successfully.`),b(!1),S(Zh),j(null),x(!1)}else if(Je==="update"){if(!ot)throw new Error("Missing user identifier for update.");const I=(await re.put(`/users/updateuser/${ot}`,at)).data;await be(),h(null),Ae(I.id),Y.success(`User "${R}" updated successfully.`),b(!1),S(Zh),j(null),x(!1)}else if(Je==="delete"){if(!ot)throw new Error("Missing user identifier for deletion.");await re.delete(`/users/deleteuser/${ot}`),s($=>$.map(I=>I.id===ot?{...I,is_active:!1}:I)),m&&m.id===ot&&(h(null),q("")),Y.success(`User "${R}" deactivated successfully.`)}else Je==="bulk-delete"&&(await re.delete("/users/admin/bulk-delete",{data:{user_ids:De.user_ids}}),s($=>$.map(I=>De.user_ids.includes(I.id)?{...I,is_active:!1}:I)),m&&De.user_ids.includes(m.id)&&(h(null),q("")),Y.success(`Successfully deactivated ${De.user_ids.length} users`),V([]))}catch($){console.error("User management error:",$);const I=Je==="create"?"Failed to create user. Please review the details and try again.":Je==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",U=$.response?.data?.detail||I;Y.error(U)}finally{(Je==="create"||Je==="update")&&A(!1),z(!1),E(null)}},je=()=>{D||E(null)},We=async()=>{if(!m||!W)return;const De=m.is_active?"Active":"Inactive";if(W===De)return;const Je=W==="Active";Q(!0);try{const ot=(await re.put(`/users/updateuser/${m.id}`,{is_active:Je})).data;s(R=>R.map($=>$.id===ot.id?ot:$)),h(null),q(""),Y.success(`User status updated to ${W}`)}catch(at){console.error("Failed to update user status:",at);const ot=at.response?.data?.detail||"Failed to update user status. Please try again.";Y.error(ot)}finally{Q(!1)}},Ne=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!we)&&a.jsx(It,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:ie,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ga,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:De=>o(De.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:d,onChange:De=>c(De.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ve.map(De=>a.jsx("option",{value:De.value,children:De.label},De.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ce.length>0&&Ce.every(De=>te.includes(De.id)),onChange:M})}),a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:te.length>0?a.jsx("button",{onClick:dt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${te.length} selected users`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Ie.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Ce.map(De=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${De.highlight?"bg-green-50":""} ${De.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4",onClick:Je=>Je.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:te.includes(De.id),onChange:()=>pe(De.id)})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(De),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[De.first_name," ",De.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>he(De),children:De.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(De),children:X2(De.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>he(De),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${De.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:De.is_active?"Active":"Inactive"})})]},De.id))})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ie.length,pageSize:O,currentPage:K,onPrev:ce,onNext:F,onPageSizeChange:De=>{L(De),B(1)},label:"users"})]}),qe=m?a.jsx("div",{id:"userModalBackdrop",onClick:Le,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:xe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ia,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:ZPe(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),X2(m.role,{size:"md"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Me(m),disabled:D,children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>He(m),disabled:D,children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(De=>a.jsx("button",{onClick:()=>ae(De),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${H===De?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:De},De))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:H==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:X2(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,De=>De.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:C7(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?C7(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const De=encodeURIComponent(m.email),Je=encodeURIComponent(""),at=encodeURIComponent(""),ot=`https://mail.google.com/mail/?view=cm&fs=1&to=${De}&su=${Je}&body=${at}`;window.open(ot,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:W||(m.is_active?"Active":"Inactive"),onChange:De=>q(De.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:We,disabled:le||W===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${le||W===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:le?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Ne,qe,a.jsx(eDe,{open:p,isEditing:w,isSubmitting:_,confirmProcessing:D,formData:C,onClose:ye,onSubmit:Be,onChange:Ve,onGeneratePassword:ke}),a.jsx(tDe,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:D,onConfirm:se,onCancel:je})]})}function eDe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:d}){if(!e)return null;const c=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:c,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(Ry,{label:"First Name",value:r.firstName,onChange:m=>o("firstName",m),placeholder:"John",required:!0,disabled:c}),a.jsx(Ry,{label:"Last Name",value:r.lastName,onChange:m=>o("lastName",m),placeholder:"Doe",required:!0,disabled:c}),a.jsx(Ry,{label:"Email",type:"email",value:r.email,onChange:m=>o("email",m),placeholder:"john.doe@company.com",required:!0,disabled:c||t}),a.jsx(Ry,{label:"Role",type:"select",value:r.role,onChange:m=>o("role",m),options:[{value:"",label:"Select role"},...lj],required:!0,disabled:c}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:m=>o("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:c,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Ry({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:d=>s(d.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))}):a.jsx("input",{type:t,value:n??"",onChange:d=>s(d.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function tDe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const aDe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function nDe(){const{user:e,loading:t,fetchUser:n}=Xt(),[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(!1),[c,m]=g.useState(!1),[h,p]=g.useState(!1),[b,w]=g.useState(null),[x,v]=g.useState(null),j=g.useRef(null),[C,S]=g.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[_,A]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""});g.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(e.profile_picture||null))},[e]),g.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const T=(B,O)=>{S(L=>({...L,[B]:O}))},E=(B,O)=>{A(L=>({...L,[B]:O}))},D=B=>{const O=B.target.files?.[0];if(!O)return;if(!O.type.startsWith("image/")){Y.error("Please select an image file");return}if(O.size>5*1024*1024){Y.error("Image size should be less than 5MB");return}const L=new FileReader;L.onloadend=()=>{w(L.result),v(L.result)},L.readAsDataURL(O)},z=async B=>{if(B.preventDefault(),!C.firstName.trim()||!C.lastName.trim()){Y.warn("Please fill in all required fields.");return}r(!0);try{const O={first_name:C.firstName.trim(),last_name:C.lastName.trim(),phone_number:C.phoneNumber.trim()||null};b!==null&&(O.profile_picture=b),await re.put("/users/me",O),await n(),l(!1),w(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),Y.success("Account information updated successfully!")}catch(O){console.error("Error updating account:",O);const L=O.response?.data?.detail||"Failed to update account information. Please try again.";Y.error(L)}finally{r(!1)}},K=async B=>{if(B.preventDefault(),!_.newPassword||!_.confirmPassword){Y.warn("Please fill in all password fields.");return}if(_.newPassword.length<8){Y.warn("Password must be at least 8 characters long.");return}if(_.newPassword!==_.confirmPassword){Y.warn("New password and confirm password do not match.");return}p(!0);try{const O={password:_.newPassword};await re.put("/users/me",O),await n(),A({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),Y.success("Password changed successfully!")}catch(O){console.error("Error changing password:",O);const L=O.response?.data?.detail||"Failed to change password. Please try again.";Y.error(L)}finally{p(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(It,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Ut,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(Ma,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[x?a.jsx("div",{className:"relative",children:a.jsx("img",{src:x,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:aDe(e.first_name,e.last_name)}),i&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:D,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(q8,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?C.firstName:e.first_name," ",i?C.lastName:e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),i?a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:C.firstName,onChange:B=>T("firstName",B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:C.lastName,onChange:B=>T("lastName",B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ha,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:C.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(jt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:C.phoneNumber,onChange:B=>T("phoneNumber",B.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),w(null),v(e.profile_picture||null),j.current&&(j.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[a.jsx(QE,{}),s?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(al,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:K,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:o?void 0:{WebkitTextSecurity:"disc"},value:_.newPassword,onChange:B=>E("newPassword",B.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>d(B=>!B),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(tu,{className:"size-5"}):a.jsx(au,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:c?void 0:{WebkitTextSecurity:"disc"},value:_.confirmPassword,onChange:B=>E("confirmPassword",B.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>m(B=>!B),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":c?"Hide password":"Show password",children:c?a.jsx(tu,{className:"size-5"}):a.jsx(au,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:h,children:[a.jsx(al,{}),h?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(K8,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function _K({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),o=bt(),d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const c=async()=>{if(!e||!e.id){Y.error("No deal selected");return}if(!s||s===e.stage){Y.info("Please select a different stage");return}const m=e.id;l(!0);try{await re.put(`/deals/admin/${m}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Y.success("Deal status updated successfully")},300)}catch(h){console.error(h);const p=h.response?.data?.detail||"Failed to update deal status";Y.error(p)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const m=e.account?.id||e.account_id;o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.title?`Call regarding: ${e.title}`:"",relatedType1:"Account",relatedTo1:m,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const m=encodeURIComponent(e.contact.email),h=encodeURIComponent(""),p=encodeURIComponent(""),b=`mailto:${m}?subject=${h}&body=${p}`;window.location.href=b},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const m=e.account?.id||e.account_id;o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{title:e.title?`Meeting: ${e.title}`:"",relatedType1:"Account",relatedTo1:m,relatedType2:"Deal",relatedTo2:e.id}}})},children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const m=e.account?.id||e.account_id;o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{title:e.title?`Task for: ${e.title}`:"",relatedType1:"Account",relatedTo1:m,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:m=>r(m.target.value),disabled:i,children:d.map(m=>a.jsx("option",{value:m.value,children:m.label},m.value))}),a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:c,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Ux({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o,relatedActs:d}){const c=bt(),[m]=Ss(),h=m.get("id"),[p,b]=g.useState(e||null),[w,x]=g.useState(s||"Overview"),[v,j]=g.useState(null),C=s!==void 0?s:w;if(g.useEffect(()=>{(async()=>{if(h&&!e)try{const D=((await re.get("/deals/admin/fetch-all")).data||[]).find(z=>z.id===parseInt(h));if(D){const z={...D,amount:typeof D.amount=="number"?D.amount:parseFloat(D.amount||0),probability:D.probability||0};b(z)}else console.warn("Deal not found with ID:",h)}catch(T){console.error("Error fetching deal:",T)}})()},[h,e]),!p&&!h||h&&!p)return null;const S=A=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700";function _(A){return A?new Date(A).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Bt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${S(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",_(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete "]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(A=>a.jsx("button",{onClick:()=>{r?r(A):x(A)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${C===A?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:A},A))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[C==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const A=(p?.stage||"PROSPECTING").toUpperCase(),E=(z=>z==="PROSPECTING"?0:z==="QUALIFICATION"?1:z==="PROPOSAL"?2:z==="NEGOTIATION"?3:z==="CLOSED_WON"||z==="CLOSED_LOST"?4:-1)(A);return[0,1,2,3,4].map(z=>E===z?"orange":E>z?"green":"gray").map((z,K)=>a.jsxs(pt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${z==="green"?"bg-green-500 border-green-500":z==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),K<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},K))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((A,T)=>a.jsx("span",{className:"text-center flex-1 break-words",children:A},T))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),C==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]})]}),s==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[d.tasks&&d.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",d.tasks.length,")"]})]}),v==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:d.tasks.map((A,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.description||"No description"}),A.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",A.assigned_to.first_name," ",A.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_(A.due_date||A.created_at)})]},`task-${T}`))})]}),d.meetings&&d.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",d.meetings.length,")"]})]}),v==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:d.meetings.map((A,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.description||A.location||"No description"}),A.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",A.host.first_name," ",A.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_(A.start_time||A.created_at)})]},`meeting-${T}`))})]}),d.calls&&d.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",d.calls.length,")"]})]}),v==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:d.calls.map((A,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:A.subject||A.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:A.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_(A.call_time||A.created_at)})]},`call-${T}`))})]}),d.contacts&&d.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(FiUser,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",d.contacts.length,")"]})]}),v==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:d.contacts.map((A,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(FiUser,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[A.first_name?`${A.first_name} `:"",A.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:A.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_(A.created_at)})]},`contact-${T}`))})]}),d.quotes&&d.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",d.quotes.length,")"]})]}),v==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:d.quotes.map((A,T)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(A.quote_id?A.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:A.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:_(A.presented_date)||""})]},`quote-${T}`))})]}),(!d||(!d.tasks||d.tasks.length===0)&&(!d.meetings||d.meetings.length===0)&&(!d.calls||d.calls.length===0)&&(!d.quotes||d.quotes.length===0)&&(!d.deals||d.deals.length===0)&&(!d.contacts||d.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),C==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(_K,{selectedDeal:p,onStatusUpdate:o,onClose:n})})]})]})]})})}function sDe(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,s]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,o]=g.useState(null),[d,c]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(1),[C,S]=g.useState(10),[_,A]=g.useState(!1),[T,E]=g.useState(null),[D,z]=g.useState(!1),[K,B]=g.useState([]),[O,L]=g.useState(!1),[H,ae]=g.useState(null),[W,q]=g.useState([]),[le,Q]=g.useState([]),[te,V]=g.useState([]),[ee,me]=g.useState({}),[we,ve]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Ae={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},be=U=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[U]||U||"--",Ie=U=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[U]||"bg-gray-100 text-gray-700",G=g.useCallback(async U=>{try{const de=await re.get(`/activities/deal/${U}`);me(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),me({}))}},[]),Ce=g.useMemo(()=>{const U=e.trim().toLowerCase(),de=n.trim(),ge=r.trim();return(p??[]).filter(ue=>{const Se=[ue?.name,ue?.description,ue?.account?.name,ue?.contact?.first_name,ue?.contact?.last_name,ue?.assigned_deals?.first_name,ue?.assigned_deals?.last_name],Fe=U===""||Se.some(ze=>ze==null||ze===""?!1:ze.toString().toLowerCase().includes(U)),ft=de==="Filter by Stage"||de===""||ue.stage===Ae[de]||ue.stage===de,vt=ge==="Filter by Owner"||ge===""||`${ue.assigned_deals?.first_name||""} ${ue.assigned_deals?.last_name||""}`.trim().toLowerCase()===ge.toLowerCase();return Fe&&ft&&vt})},[p,e,n,r]),ce=Math.max(1,Math.ceil(Ce.length/C)||1);g.useEffect(()=>{j(1)},[e,n,r,C]),g.useEffect(()=>{j(U=>{const de=Math.max(1,Math.ceil(Ce.length/C)||1);return U>de?de:U})},[Ce.length,C]);const F=g.useMemo(()=>{const U=(v-1)*C;return Ce.slice(U,U+C)},[Ce,v,C]),ie=()=>j(U=>Math.max(U-1,1)),he=()=>j(U=>Math.min(U+1,ce)),Le=()=>{ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),L(!1),ae(null),h(!0)},xe=async()=>{x(!0);try{const U=await re.get("/deals/admin/fetch-all"),ge=[...Array.isArray(U.data)?U.data:[]].sort((ue,Se)=>{const Fe=ue?.created_at?new Date(ue.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-Fe});b(ge)}catch(U){U.response&&U.response.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch deals. Please try again later."),console.error(U)}finally{x(!1)}},Ve=async()=>{try{const U=await re.get("/accounts/admin/fetch-all");q(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},ke=async()=>{try{const U=await re.get("/contacts/admin/fetch-all");Q(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},ye=async()=>{try{const U=await re.get("/users/all");V(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&Y.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{xe(),Ve(),ke(),ye()},[]);const Me=U=>{U&&(ve({id:U.id||null,name:U.name||"",account_id:U.account_id?.toString()||"",primary_contact_id:U.primary_contact_id?.toString()||"",stage:U.stage||"PROPOSAL",amount:U.amount?.toString()||"",close_date:U.close_date?new Date(U.close_date).toISOString().split("T")[0]:"",assigned_to:U.assigned_to?.toString()||"",currency:U.currency||"PHP",description:U.description||""}),L(!0),ae(U.id),o(null),h(!0))},He=async(U=!1)=>{try{const de=await re.get("/deals/admin/fetch-all"),ue=[...Array.isArray(de.data)?de.data:[]].sort((Se,Fe)=>{const ft=Se?.created_at?new Date(Se.created_at).getTime():0;return(Fe?.created_at?new Date(Fe.created_at).getTime():0)-ft});if(b(ue),!U&&l&&l.id){const Se=ue.find(Fe=>Fe.id===l.id);Se&&o({...Se})}}catch(de){console.error("Failed to refresh deal data:",de),await xe()}},Be=U=>{const de=U.name.trim();if(!de){Y.error("Deal name is required.");return}if(!U.account_id){Y.error("Account is required.");return}const ge=O&&H?"update":"create",ue=de;E({title:ge==="create"?"Confirm New Deal":"Confirm Update",message:ge==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:ue}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ue}),"?"]}),confirmLabel:ge==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ge,formData:U,targetId:H||null,name:ue}})},dt=U=>{if(!U)return;const de=U.name||"this deal";E({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:de}})},M=U=>{if(U.target.checked){const de=F.map(ge=>ge.id);B(de)}else B([])},pe=U=>{B(de=>de.includes(U)?de.filter(ge=>ge!==U):[...de,U])},se=async()=>{K.length!==0&&E({title:"Bulk Delete Deals",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:K.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${K.length} Deals`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:K}})},je=async()=>{if(!T?.action){E(null);return}const{action:U}=T,{type:de,formData:ge,targetId:ue,name:Se}=U;z(!0);try{if(de==="create"){A(!0);const Fe={name:ge.name.trim(),account_id:parseInt(ge.account_id),primary_contact_id:ge.primary_contact_id?parseInt(ge.primary_contact_id):null,stage:ge.stage,amount:ge.amount?parseFloat(ge.amount):null,currency:ge.currency||"PHP",close_date:ge.close_date||null,description:ge.description||null,assigned_to:ge.assigned_to?parseInt(ge.assigned_to):null};await re.post("/deals/admin/create",Fe),Y.success(`Deal "${Se}" created successfully.`),h(!1),await xe()}else if(de==="update"){if(!ue)throw new Error("Missing deal identifier for update.");A(!0);const Fe={};ge.name!==void 0&&(Fe.name=ge.name.trim()),ge.account_id!==void 0&&ge.account_id!==""&&(Fe.account_id=parseInt(ge.account_id)),ge.primary_contact_id!==void 0&&(Fe.primary_contact_id=ge.primary_contact_id?parseInt(ge.primary_contact_id):null),ge.stage!==void 0&&(Fe.stage=ge.stage),ge.amount!==void 0&&ge.amount!==""&&(Fe.amount=parseFloat(ge.amount)),ge.currency!==void 0&&(Fe.currency=ge.currency),ge.close_date!==void 0&&(Fe.close_date=ge.close_date||null),ge.description!==void 0&&(Fe.description=ge.description||null),ge.assigned_to!==void 0&&(Fe.assigned_to=ge.assigned_to?parseInt(ge.assigned_to):null),await re.put(`/deals/admin/${ue}`,Fe),Y.success(`Deal "${Se}" updated successfully.`),h(!1),await xe()}else if(de==="delete"){if(!ue)throw new Error("Missing deal identifier for deletion.");await re.delete(`/deals/admin/${ue}`),Y.success(`Deal "${Se}" deleted successfully.`),l?.id===ue&&o(null),await xe()}else if(de==="bulk-delete"){const{dealIds:Fe}=U;await re.delete("/deals/admin/bulk-delete",{data:{deal_ids:Fe}}),Y.success(`Successfully deleted ${Fe.length} deals`),B([]),await xe()}}catch(Fe){console.error(Fe);const ft=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",vt=Fe.response?.data?.detail||ft;Y.error(vt)}finally{(de==="create"||de==="update")&&A(!1),z(!1),E(null)}},We=()=>{D||E(null)},Ne=()=>{h(!1),ve({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),L(!1),ae(null),A(!1)},qe=(p??[]).filter(U=>U.stage==="PROSPECTING").length,De=(p??[]).filter(U=>U.stage==="QUALIFICATION").length,Je=(p??[]).filter(U=>U.stage==="PROPOSAL").length,at=(p??[]).filter(U=>U.stage==="NEGOTIATION").length,ot=(p??[]).filter(U=>U.stage==="CLOSED_WON").length,R=(p??[]).filter(U=>U.stage==="CLOSED_LOST").length,$=(p??[]).filter(U=>U.stage==="CLOSED_CANCELLED").length,I=[{title:"Prospecting",value:qe,icon:hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:De,icon:Qa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Je,icon:Yt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:at,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ot,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:R,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:$,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&a.jsx(It,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Yt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:I.map(U=>a.jsx(iDe,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:U=>t(U.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:U=>s(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:r,onChange:U=>i(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(U=>`${U.assigned_deals?.first_name} ${U.assigned_deals?.last_name}`))].map((U,de)=>a.jsx("option",{value:U,children:U},de))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:F.length>0&&F.every(U=>K.includes(U.id)),onChange:M})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:K.length>0?a.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${K.length} selected items`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:Ce.length>0?F.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{o({...U}),G(U.id)},children:[a.jsx("td",{className:"py-3 px-4",onClick:de=>de.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:K.includes(U.id),onChange:()=>pe(U.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.contact?.first_name&&U.contact?.last_name?`${U.contact.first_name} ${U.contact.last_name}`:U.contact?.first_name||U.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ie(U.stage)}`,children:be(U.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",U.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_deals?.first_name&&U.assigned_deals?.last_name?`${U.assigned_deals.first_name} ${U.assigned_deals.last_name}`:U.assigned_deals?.first_name||U.assigned_deals?.last_name||"--"})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ce.length,pageSize:C,currentPage:v,onPrev:ie,onNext:he,onPageSizeChange:U=>{S(U),j(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),m&&a.jsx(lDe,{onClose:Ne,formData:we,setFormData:ve,isEditing:O,onSubmit:Be,isSubmitting:_||D,accounts:W,contacts:le,users:te}),l&&a.jsx(Ux,{relatedActs:ee,selectedDeal:l,show:!!l,onClose:()=>o(null),activeTab:d,setActiveTab:c,onEdit:Me,onDelete:dt,onStatusUpdate:He}),T&&a.jsx(rDe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:je,onCancel:We,loading:D})]})}function rDe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function iDe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function lDe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:d=[]}){const[c,m]=g.useState(!1),h=w=>{if(w.preventDefault(),m(!0),!t.name?.trim()){Y.error("Deal name is required.");return}const x=Number(t.amount);if(!t.amount||isNaN(x)||x<=0){Y.error("Amount must be a number greater than 0.");return}if(!t.account_id){Y.error("Please select an account.");return}if(!t.primary_contact_id){Y.error("Please select a primary contact.");return}if(!t.assigned_to){Y.error("Please assign this deal to a user.");return}r?.(t)},p=w=>{w.target.id==="modalBackdrop"&&e()},b=g.useMemo(()=>{const w=String(t.account_id||"").trim(),x=Array.isArray(o)?o:[];return w?x.filter(v=>{const C=[v?.account_id,v?.accountId,v?.account?.id,v?.account?.account_id,v?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return C?String(C)===w:!1}):x},[o,t.account_id]);return g.useEffect(()=>{const w=String(t.account_id||"").trim(),x=String(t.primary_contact_id||"").trim();if(!x||!w)return;b.some(j=>String(j?.id)===x)||n(j=>({...j,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,b,n]),a.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:h,noValidate:!0,children:[a.jsx(Z2,{label:"Deal Name",name:"name",value:t.name,onChange:w=>n({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:c,className:"md:col-span-2"}),a.jsx(J2,{label:"Account",value:t.account_id||"",onChange:w=>n({...t,account_id:w}),items:l||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:c}),a.jsx(J2,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>n({...t,primary_contact_id:w}),items:b||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:c,disabled:i}),a.jsx(_7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>n({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(Z2,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:w=>n({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:c}),a.jsx(_7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>n({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(Z2,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>n({...t,close_date:w.target.value}),disabled:i}),a.jsx(J2,{label:"Assign To",value:t.assigned_to||"",onChange:w=>n({...t,assigned_to:w}),items:d||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:c,className:"md:col-span-2"}),a.jsx(cDe,{label:"Description",name:"description",value:t.description,onChange:w=>n({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function Z2({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function _7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function J2({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(oDe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function oDe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function cDe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:d=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var dDe=Object.defineProperty,uDe=(e,t,n)=>t in e?dDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,e_=(e,t,n)=>(uDe(e,typeof t!="symbol"?t+"":t,n),n);let mDe=class{constructor(){e_(this,"current",this.detect()),e_(this,"handoffState","pending"),e_(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ol=new mDe;function Fx(e){var t;return ol.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function vE(e){var t,n;return ol.isServer?null:e==null?document:(n=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?n:document}function AK(e){var t,n;return(n=(t=vE(e))==null?void 0:t.activeElement)!=null?n:null}function fDe(e){return AK(e)===e}function oj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Io(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return oj(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=Io();return n(s),this.add(()=>s.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function cj(){let[e]=g.useState(Io);return g.useEffect(()=>()=>e.dispose(),[e]),e}let Qs=(e,t)=>{ol.isServer?g.useEffect(e,t):g.useLayoutEffect(e,t)};function Du(e){let t=g.useRef(e);return Qs(()=>{t.current=e},[e]),t}let Oa=function(e){let t=Du(e);return pt.useCallback((...n)=>t.current(...n),[t])};function Bx(e){return g.useMemo(()=>e,Object.values(e))}let hDe=g.createContext(void 0);function gDe(){return g.useContext(hDe)}function wE(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function jo(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,jo),s}var Gv=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Gv||{}),jc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(jc||{});function ui(){let e=xDe();return g.useCallback(t=>pDe({mergeRefs:e,...t}),[e])}function pDe({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:l,mergeRefs:o}){o=o??yDe;let d=TK(t,e);if(i)return zy(d,n,s,l,o);let c=r??0;if(c&2){let{static:m=!1,...h}=d;if(m)return zy(h,n,s,l,o)}if(c&1){let{unmount:m=!0,...h}=d;return jo(m?0:1,{0(){return null},1(){return zy({...h,hidden:!0,style:{display:"none"}},n,s,l,o)}})}return zy(d,n,s,l,o)}function zy(e,t={},n,s,r){let{as:i=n,children:l,refName:o="ref",...d}=t_(e,["unmount","static"]),c=e.ref!==void 0?{[o]:e.ref}:{},m=typeof l=="function"?l(t):l;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(t)),d["aria-labelledby"]&&d["aria-labelledby"]===d.id&&(d["aria-labelledby"]=void 0);let h={};if(t){let p=!1,b=[];for(let[w,x]of Object.entries(t))typeof x=="boolean"&&(p=!0),x===!0&&b.push(w.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){h["data-headlessui-state"]=b.join(" ");for(let w of b)h[`data-${w}`]=""}}if(Gg(i)&&(Object.keys(Td(d)).length>0||Object.keys(Td(h)).length>0))if(!g.isValidElement(m)||Array.isArray(m)&&m.length>1||vDe(m)){if(Object.keys(Td(d)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Td(d)).concat(Object.keys(Td(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=m.props,b=p?.className,w=typeof b=="function"?(...j)=>wE(b(...j),d.className):wE(b,d.className),x=w?{className:w}:{},v=TK(m.props,Td(t_(d,["ref"])));for(let j in h)j in v&&delete h[j];return g.cloneElement(m,Object.assign({},v,h,c,{ref:r(bDe(m),c.ref)},x))}return g.createElement(i,Object.assign({},t_(d,["ref"]),!Gg(i)&&c,!Gg(i)&&h),m)}function xDe(){let e=g.useRef([]),t=g.useCallback(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)},[]);return(...n)=>{if(!n.every(s=>s==null))return e.current=n,t}}function yDe(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function TK(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(n[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in n)Object.assign(t,{[s](r,...i){let l=n[s];for(let o of l){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;o(r,...i)}}});return t}function sr(e){var t;return Object.assign(g.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Td(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function t_(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}function bDe(e){return pt.version.split(".")[0]>="19"?e.props.ref:e.ref}function Gg(e){return e===g.Fragment||e===Symbol.for("react.fragment")}function vDe(e){return Gg(e.type)}let wDe="span";var Vv=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Vv||{});function NDe(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return ui()({ourProps:i,theirProps:r,slot:{},defaultTag:wDe,name:"Hidden"})}let NE=sr(NDe);function jDe(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function Ec(e){return jDe(e)&&"tagName"in e}function yu(e){return Ec(e)&&"accessKey"in e}function Cc(e){return Ec(e)&&"tabIndex"in e}function CDe(e){return Ec(e)&&"style"in e}function SDe(e){return yu(e)&&e.nodeName==="IFRAME"}function _De(e){return yu(e)&&e.nodeName==="INPUT"}let EK=Symbol();function ADe(e,t=!0){return Object.assign(e,{[EK]:t})}function vl(...e){let t=g.useRef(e);g.useEffect(()=>{t.current=e},[e]);let n=Oa(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[EK])?void 0:n}let nP=g.createContext(null);nP.displayName="DescriptionContext";function kK(){let e=g.useContext(nP);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,kK),t}return e}function TDe(){let[e,t]=g.useState([]);return[e.length>0?e.join(" "):void 0,g.useMemo(()=>function(n){let s=Oa(i=>(t(l=>[...l,i]),()=>t(l=>{let o=l.slice(),d=o.indexOf(i);return d!==-1&&o.splice(d,1),o}))),r=g.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props,value:n.value}),[s,n.slot,n.name,n.props,n.value]);return pt.createElement(nP.Provider,{value:r},n.children)},[t])]}let EDe="p";function kDe(e,t){let n=g.useId(),s=gDe(),{id:r=`headlessui-description-${n}`,...i}=e,l=kK(),o=vl(t);Qs(()=>l.register(r),[r,l.register]);let d=Bx({...l.slot,disabled:s||!1}),c={ref:o,...l.props,id:r};return ui()({ourProps:c,theirProps:i,slot:d,defaultTag:EDe,name:l.name||"Description"})}let LDe=sr(kDe),PDe=Object.assign(LDe,{});var LK=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(LK||{});let DDe=g.createContext(()=>{});function ODe({value:e,children:t}){return pt.createElement(DDe.Provider,{value:e},t)}let PK=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var MDe=Object.defineProperty,IDe=(e,t,n)=>t in e?MDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$De=(e,t,n)=>(IDe(e,t+"",n),n),DK=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Br=(e,t,n)=>(DK(e,t,"read from private field"),n?n.call(e):t.get(e)),a_=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},A7=(e,t,n,s)=>(DK(e,t,"write to private field"),t.set(e,n),n),qi,Og,Mg;let RDe=class{constructor(t){a_(this,qi,{}),a_(this,Og,new PK(()=>new Set)),a_(this,Mg,new Set),$De(this,"disposables",Io()),A7(this,qi,t),ol.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Br(this,qi)}subscribe(t,n){if(ol.isServer)return()=>{};let s={selector:t,callback:n,current:t(Br(this,qi))};return Br(this,Mg).add(s),this.disposables.add(()=>{Br(this,Mg).delete(s)})}on(t,n){return ol.isServer?()=>{}:(Br(this,Og).get(t).add(n),this.disposables.add(()=>{Br(this,Og).get(t).delete(n)}))}send(t){let n=this.reduce(Br(this,qi),t);if(n!==Br(this,qi)){A7(this,qi,n);for(let s of Br(this,Mg)){let r=s.selector(Br(this,qi));OK(s.current,r)||(s.current=r,s.callback(r))}for(let s of Br(this,Og).get(t.type))s(Br(this,qi),t)}}};qi=new WeakMap,Og=new WeakMap,Mg=new WeakMap;function OK(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:n_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:n_(e.entries(),t.entries()):T7(e)&&T7(t)?n_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function n_(e,t){do{let n=e.next(),s=t.next();if(n.done&&s.done)return!0;if(n.done||s.done||!Object.is(n.value,s.value))return!1}while(!0)}function T7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var zDe=Object.defineProperty,UDe=(e,t,n)=>t in e?zDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,E7=(e,t,n)=>(UDe(e,typeof t!="symbol"?t+"":t,n),n),FDe=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(FDe||{});let BDe={0(e,t){let n=t.id,s=e.stack,r=e.stack.indexOf(n);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(n),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,s=e.stack.indexOf(n);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},HDe=class MK extends RDe{constructor(){super(...arguments),E7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),E7(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new MK({stack:[]})}reduce(t,n){return jo(n.type,BDe,t,n)}};const IK=new PK(()=>HDe.new());function $K(e,t,n=OK){return lLe.useSyncExternalStoreWithSelector(Oa(s=>e.subscribe(GDe,s)),Oa(()=>e.state),Oa(()=>e.state),Oa(t),n)}function GDe(e){return e}function Hx(e,t){let n=g.useId(),s=IK.get(t),[r,i]=$K(s,g.useCallback(l=>[s.selectors.isTop(l,n),s.selectors.inStack(l,n)],[s,n]));return Qs(()=>{if(e)return s.actions.push(n),()=>s.actions.pop(n)},[s,e,n]),e?i?r:!0:!1}let jE=new Map,Vg=new Map;function k7(e){var t;let n=(t=Vg.get(e))!=null?t:0;return Vg.set(e,n+1),n!==0?()=>L7(e):(jE.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>L7(e))}function L7(e){var t;let n=(t=Vg.get(e))!=null?t:1;if(n===1?Vg.delete(e):Vg.set(e,n-1),n!==1)return;let s=jE.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,jE.delete(e))}function VDe(e,{allowed:t,disallowed:n}={}){let s=Hx(e,"inert-others");Qs(()=>{var r,i;if(!s)return;let l=Io();for(let d of(r=n?.())!=null?r:[])d&&l.add(k7(d));let o=(i=t?.())!=null?i:[];for(let d of o){if(!d)continue;let c=Fx(d);if(!c)continue;let m=d.parentElement;for(;m&&m!==c.body;){for(let h of m.children)o.some(p=>h.contains(p))||l.add(k7(h));m=m.parentElement}}return l.dispose},[s,t,n])}function WDe(e,t,n){let s=Du(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});g.useEffect(()=>{if(!e)return;let r=t===null?null:yu(t)?t:t.current;if(!r)return;let i=Io();if(typeof ResizeObserver<"u"){let l=new ResizeObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}if(typeof IntersectionObserver<"u"){let l=new IntersectionObserver(()=>s.current(r));l.observe(r),i.add(()=>l.disconnect())}return()=>i.dispose()},[t,s,e])}let Wv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),qDe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var eo=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(eo||{}),CE=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(CE||{}),YDe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(YDe||{});function KDe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Wv)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function QDe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(qDe)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var RK=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(RK||{});function XDe(e,t=0){var n;return e===((n=Fx(e))==null?void 0:n.body)?!1:jo(t,{0(){return e.matches(Wv)},1(){let s=e;for(;s!==null;){if(s.matches(Wv))return!0;s=s.parentElement}return!1}})}var ZDe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(ZDe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function lo(e){e?.focus({preventScroll:!0})}let JDe=["textarea","input"].join(",");function e3e(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,JDe))!=null?n:!1}function t3e(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let l=r.compareDocumentPosition(i);return l&Node.DOCUMENT_POSITION_FOLLOWING?-1:l&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Wg(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?vE(e[0]):document:vE(e),l=Array.isArray(e)?n?t3e(e):e:t&64?QDe(e):KDe(e);r.length>0&&l.length>1&&(l=l.filter(b=>!r.some(w=>w!=null&&"current"in w?w?.current===b:w===b))),s=s??i?.activeElement;let o=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,l.indexOf(s))-1;if(t&4)return Math.max(0,l.indexOf(s))+1;if(t&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},m=0,h=l.length,p;do{if(m>=h||m+h<=0)return 0;let b=d+m;if(t&16)b=(b+h)%h;else{if(b<0)return 3;if(b>=h)return 1}p=l[b],p?.focus(c),m+=o}while(p!==AK(p));return t&6&&e3e(p)&&p.select(),2}function zK(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function a3e(){return/Android/gi.test(window.navigator.userAgent)}function P7(){return zK()||a3e()}function Uy(e,t,n,s){let r=Du(n);g.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function UK(e,t,n,s){let r=Du(n);g.useEffect(()=>{if(!e)return;function i(l){r.current(l)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const D7=30;function n3e(e,t,n){let s=Du(n),r=g.useCallback(function(o,d){if(o.defaultPrevented)return;let c=d(o);if(c===null||!c.getRootNode().contains(c)||!c.isConnected)return;let m=(function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let h of m)if(h!==null&&(h.contains(c)||o.composed&&o.composedPath().includes(h)))return;return!XDe(c,RK.Loose)&&c.tabIndex!==-1&&o.preventDefault(),s.current(o,c)},[s,t]),i=g.useRef(null);Uy(e,"pointerdown",o=>{var d,c;P7()||(i.current=((c=(d=o.composedPath)==null?void 0:d.call(o))==null?void 0:c[0])||o.target)},!0),Uy(e,"pointerup",o=>{if(P7()||!i.current)return;let d=i.current;return i.current=null,r(o,()=>d)},!0);let l=g.useRef({x:0,y:0});Uy(e,"touchstart",o=>{l.current.x=o.touches[0].clientX,l.current.y=o.touches[0].clientY},!0),Uy(e,"touchend",o=>{let d={x:o.changedTouches[0].clientX,y:o.changedTouches[0].clientY};if(!(Math.abs(d.x-l.current.x)>=D7||Math.abs(d.y-l.current.y)>=D7))return r(o,()=>Cc(o.target)?o.target:null)},!0),UK(e,"blur",o=>r(o,()=>SDe(window.document.activeElement)?window.document.activeElement:null),!0)}function sP(...e){return g.useMemo(()=>Fx(...e),[...e])}function FK(e,t,n,s){let r=Du(n);g.useEffect(()=>{e=e??window;function i(l){r.current(l)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function s3e(e){return g.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function r3e(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let l=t[r].call(n,...i);l&&(n=l,s.forEach(o=>o()))}}}function i3e(){let e;return{before({doc:t}){var n;let s=t.documentElement,r=(n=t.defaultView)!=null?n:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:n}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);n.style(s,"paddingRight",`${i}px`)}}}function l3e(){return zK()?{before({doc:e,d:t,meta:n}){function s(r){for(let i of n().containers)for(let l of i())if(l.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let o=Io();o.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>o.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,l=null;t.addEventListener(e,"click",o=>{if(Cc(o.target))try{let d=o.target.closest("a");if(!d)return;let{hash:c}=new URL(d.href),m=e.querySelector(c);Cc(m)&&!s(m)&&(l=m)}catch{}},!0),t.group(o=>{t.addEventListener(e,"touchstart",d=>{if(o.dispose(),Cc(d.target)&&CDe(d.target))if(s(d.target)){let c=d.target;for(;c.parentElement&&s(c.parentElement);)c=c.parentElement;o.style(c,"overscrollBehavior","contain")}else o.style(d.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",o=>{if(Cc(o.target)){if(_De(o.target))return;if(s(o.target)){let d=o.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&o.preventDefault()}else o.preventDefault()}},{passive:!1}),t.add(()=>{var o;let d=(o=window.scrollY)!=null?o:window.pageYOffset;i!==d&&window.scrollTo(0,i),l&&l.isConnected&&(l.scrollIntoView({block:"nearest"}),l=null)})})}}:{}}function o3e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function O7(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let Fd=r3e(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:Io(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=O7(s.meta),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=O7(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[l3e(),i3e(),o3e()];n.forEach(({before:s})=>s?.(t)),n.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});Fd.subscribe(()=>{let e=Fd.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&Fd.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Fd.dispatch("TEARDOWN",n)}});function c3e(e,t,n=()=>({containers:[]})){let s=s3e(Fd),r=t?s.get(t):void 0,i=r?r.count>0:!1;return Qs(()=>{if(!(!t||!e))return Fd.dispatch("PUSH",t,n),()=>Fd.dispatch("POP",t,n)},[e,t]),i}function d3e(e,t,n=()=>[document.body]){let s=Hx(e,"scroll-lock");c3e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],n]}})}function u3e(e=0){let[t,n]=g.useState(e),s=g.useCallback(d=>n(d),[]),r=g.useCallback(d=>n(c=>c|d),[]),i=g.useCallback(d=>(t&d)===d,[t]),l=g.useCallback(d=>n(c=>c&~d),[]),o=g.useCallback(d=>n(c=>c^d),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:l,toggleFlag:o}}var m3e={},M7,I7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((M7=process==null?void 0:m3e)==null?void 0:M7.NODE_ENV)==="test"&&typeof((I7=Element?.prototype)==null?void 0:I7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var f3e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(f3e||{});function h3e(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function g3e(e,t,n,s){let[r,i]=g.useState(n),{hasFlag:l,addFlag:o,removeFlag:d}=u3e(e&&r?3:0),c=g.useRef(!1),m=g.useRef(!1),h=cj();return Qs(()=>{var p;if(e){if(n&&i(!0),!t){n&&o(3);return}return(p=s?.start)==null||p.call(s,n),p3e(t,{inFlight:c,prepare(){m.current?m.current=!1:m.current=c.current,c.current=!0,!m.current&&(n?(o(3),d(4)):(o(4),d(2)))},run(){m.current?n?(d(3),o(4)):(d(4),o(3)):n?d(1):o(1)},done(){var b;m.current&&b3e(t)||(c.current=!1,d(7),n||i(!1),(b=s?.end)==null||b.call(s,n))}})}},[e,n,t,h]),e?[r,{closed:l(1),enter:l(2),leave:l(4),transition:l(2)||l(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function p3e(e,{prepare:t,run:n,done:s,inFlight:r}){let i=Io();return y3e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(x3e(e,s))})}),i.dispose}function x3e(e,t){var n,s;let r=Io();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let l=(s=(n=e.getAnimations)==null?void 0:n.call(e).filter(o=>o instanceof CSSTransition))!=null?s:[];return l.length===0?(t(),r.dispose):(Promise.allSettled(l.map(o=>o.finished)).then(()=>{i||t()}),r.dispose)}function y3e(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let s=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=s}function b3e(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function rP(e,t){let n=g.useRef([]),s=Oa(e);g.useEffect(()=>{let r=[...n.current];for(let[i,l]of t.entries())if(n.current[i]!==l){let o=s(t,r);return n.current=t,o}},[s,...t])}let dj=g.createContext(null);dj.displayName="OpenClosedContext";var Ai=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Ai||{});function uj(){return g.useContext(dj)}function v3e({value:e,children:t}){return pt.createElement(dj.Provider,{value:e},t)}function w3e({children:e}){return pt.createElement(dj.Provider,{value:null},e)}function N3e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let bc=[];N3e(()=>{function e(t){if(!Cc(t.target)||t.target===document.body||bc[0]===t.target)return;let n=t.target;n=n.closest(Wv),bc.unshift(n??t.target),bc=bc.filter(s=>s!=null&&s.isConnected),bc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function BK(e){let t=Oa(e),n=g.useRef(!1);g.useEffect(()=>(n.current=!1,()=>{n.current=!0,oj(()=>{n.current&&t()})}),[t])}let HK=g.createContext(!1);function j3e(){return g.useContext(HK)}function $7(e){return pt.createElement(HK.Provider,{value:e.force},e.children)}function C3e(e){let t=j3e(),n=g.useContext(VK),[s,r]=g.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(ol.isServer)return null;let l=e?.getElementById("headlessui-portal-root");if(l)return l;if(e===null)return null;let o=e.createElement("div");return o.setAttribute("id","headlessui-portal-root"),e.body.appendChild(o)});return g.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),g.useEffect(()=>{t||n!==null&&r(n.current)},[n,r,t]),s}let GK=g.Fragment,S3e=sr(function(e,t){let{ownerDocument:n=null,...s}=e,r=g.useRef(null),i=vl(ADe(p=>{r.current=p}),t),l=sP(r.current),o=n??l,d=C3e(o),c=g.useContext(SE),m=cj(),h=ui();return BK(()=>{var p;d&&d.childNodes.length<=0&&((p=d.parentElement)==null||p.removeChild(d))}),d?$p.createPortal(pt.createElement("div",{"data-headlessui-portal":"",ref:p=>{m.dispose(),c&&p&&m.add(c.register(p))}},h({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:GK,name:"Portal"})),d):null});function _3e(e,t){let n=vl(t),{enabled:s=!0,ownerDocument:r,...i}=e,l=ui();return s?pt.createElement(S3e,{...i,ownerDocument:r,ref:n}):l({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:GK,name:"Portal"})}let A3e=g.Fragment,VK=g.createContext(null);function T3e(e,t){let{target:n,...s}=e,r={ref:vl(t)},i=ui();return pt.createElement(VK.Provider,{value:n},i({ourProps:r,theirProps:s,defaultTag:A3e,name:"Popover.Group"}))}let SE=g.createContext(null);function E3e(){let e=g.useContext(SE),t=g.useRef([]),n=Oa(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Oa(i=>{let l=t.current.indexOf(i);l!==-1&&t.current.splice(l,1),e&&e.unregister(i)}),r=g.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,g.useMemo(()=>function({children:i}){return pt.createElement(SE.Provider,{value:r},i)},[r])]}let k3e=sr(_3e),WK=sr(T3e),L3e=Object.assign(k3e,{Group:WK});function P3e(e,t=typeof document<"u"?document.defaultView:null,n){let s=Hx(e,"escape");FK(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===LK.Escape&&n(r))})}function D3e(){var e;let[t]=g.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,s]=g.useState((e=t?.matches)!=null?e:!1);return Qs(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function O3e({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let s=Oa(()=>{var r,i;let l=Fx(n),o=[];for(let d of e)d!==null&&(Ec(d)?o.push(d):"current"in d&&Ec(d.current)&&o.push(d.current));if(t!=null&&t.current)for(let d of t.current)o.push(d);for(let d of(r=l?.querySelectorAll("html > *, body > *"))!=null?r:[])d!==document.body&&d!==document.head&&Ec(d)&&d.id!=="headlessui-portal-root"&&(n&&(d.contains(n)||d.contains((i=n?.getRootNode())==null?void 0:i.host))||o.some(c=>d.contains(c))||o.push(d));return o});return{resolveContainers:s,contains:Oa(r=>s().some(i=>i.contains(r)))}}let qK=g.createContext(null);function R7({children:e,node:t}){let[n,s]=g.useState(null),r=YK(t??n);return pt.createElement(qK.Provider,{value:r},e,r===null&&pt.createElement(NE,{features:Vv.Hidden,ref:i=>{var l,o;if(i){for(let d of(o=(l=Fx(i))==null?void 0:l.querySelectorAll("html > *, body > *"))!=null?o:[])if(d!==document.body&&d!==document.head&&Ec(d)&&d!=null&&d.contains(i)){s(d);break}}}}))}function YK(e=null){var t;return(t=g.useContext(qK))!=null?t:e}function M3e(){let e=typeof document>"u";return"useSyncExternalStore"in Zd?(t=>t.useSyncExternalStore)(Zd)(()=>()=>{},()=>!1,()=>!e):!1}function mj(){let e=M3e(),[t,n]=g.useState(ol.isHandoffComplete);return t&&ol.isHandoffComplete===!1&&n(!1),g.useEffect(()=>{t!==!0&&n(!0)},[t]),g.useEffect(()=>ol.handoff(),[]),e?!1:t}function iP(){let e=g.useRef(!1);return Qs(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ig=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ig||{});function I3e(){let e=g.useRef(0);return UK(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function KK(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)Ec(n.current)&&t.add(n.current);return t}let $3e="div";var Pd=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Pd||{});function R3e(e,t){let n=g.useRef(null),s=vl(n,t),{initialFocus:r,initialFocusFallback:i,containers:l,features:o=15,...d}=e;mj()||(o=0);let c=sP(n.current);B3e(o,{ownerDocument:c});let m=H3e(o,{ownerDocument:c,container:n,initialFocus:r,initialFocusFallback:i});G3e(o,{ownerDocument:c,container:n,containers:l,previousActiveElement:m});let h=I3e(),p=Oa(C=>{if(!yu(n.current))return;let S=n.current;(_=>_())(()=>{jo(h.current,{[Ig.Forwards]:()=>{Wg(S,eo.First,{skipElements:[C.relatedTarget,i]})},[Ig.Backwards]:()=>{Wg(S,eo.Last,{skipElements:[C.relatedTarget,i]})}})})}),b=Hx(!!(o&2),"focus-trap#tab-lock"),w=cj(),x=g.useRef(!1),v={ref:s,onKeyDown(C){C.key=="Tab"&&(x.current=!0,w.requestAnimationFrame(()=>{x.current=!1}))},onBlur(C){if(!(o&4))return;let S=KK(l);yu(n.current)&&S.add(n.current);let _=C.relatedTarget;Cc(_)&&_.dataset.headlessuiFocusGuard!=="true"&&(QK(S,_)||(x.current?Wg(n.current,jo(h.current,{[Ig.Forwards]:()=>eo.Next,[Ig.Backwards]:()=>eo.Previous})|eo.WrapAround,{relativeTo:C.target}):Cc(C.target)&&lo(C.target)))}},j=ui();return pt.createElement(pt.Fragment,null,b&&pt.createElement(NE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Vv.Focusable}),j({ourProps:v,theirProps:d,defaultTag:$3e,name:"FocusTrap"}),b&&pt.createElement(NE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Vv.Focusable}))}let z3e=sr(R3e),U3e=Object.assign(z3e,{features:Pd});function F3e(e=!0){let t=g.useRef(bc.slice());return rP(([n],[s])=>{s===!0&&n===!1&&oj(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=bc.slice())},[e,bc,t]),Oa(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function B3e(e,{ownerDocument:t}){let n=!!(e&8),s=F3e(n);rP(()=>{n||fDe(t?.body)&&lo(s())},[n]),BK(()=>{n&&lo(s())})}function H3e(e,{ownerDocument:t,container:n,initialFocus:s,initialFocusFallback:r}){let i=g.useRef(null),l=Hx(!!(e&1),"focus-trap#initial-focus"),o=iP();return rP(()=>{if(e===0)return;if(!l){r!=null&&r.current&&lo(r.current);return}let d=n.current;d&&oj(()=>{if(!o.current)return;let c=t?.activeElement;if(s!=null&&s.current){if(s?.current===c){i.current=c;return}}else if(d.contains(c)){i.current=c;return}if(s!=null&&s.current)lo(s.current);else{if(e&16){if(Wg(d,eo.First|eo.AutoFocus)!==CE.Error)return}else if(Wg(d,eo.First)!==CE.Error)return;if(r!=null&&r.current&&(lo(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,l,e]),i}function G3e(e,{ownerDocument:t,container:n,containers:s,previousActiveElement:r}){let i=iP(),l=!!(e&4);FK(t?.defaultView,"focus",o=>{if(!l||!i.current)return;let d=KK(s);yu(n.current)&&d.add(n.current);let c=r.current;if(!c)return;let m=o.target;yu(m)?QK(d,m)?(r.current=m,lo(m)):(o.preventDefault(),o.stopPropagation(),lo(c)):lo(r.current)},!0)}function QK(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function XK(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Gg((t=e.as)!=null?t:JK)||pt.Children.count(e.children)===1}let fj=g.createContext(null);fj.displayName="TransitionContext";var V3e=(e=>(e.Visible="visible",e.Hidden="hidden",e))(V3e||{});function W3e(){let e=g.useContext(fj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function q3e(){let e=g.useContext(hj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let hj=g.createContext(null);hj.displayName="NestingContext";function gj(e){return"children"in e?gj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ZK(e,t){let n=Du(e),s=g.useRef([]),r=iP(),i=cj(),l=Oa((b,w=jc.Hidden)=>{let x=s.current.findIndex(({el:v})=>v===b);x!==-1&&(jo(w,{[jc.Unmount](){s.current.splice(x,1)},[jc.Hidden](){s.current[x].state="hidden"}}),i.microTask(()=>{var v;!gj(s)&&r.current&&((v=n.current)==null||v.call(n))}))}),o=Oa(b=>{let w=s.current.find(({el:x})=>x===b);return w?w.state!=="visible"&&(w.state="visible"):s.current.push({el:b,state:"visible"}),()=>l(b,jc.Unmount)}),d=g.useRef([]),c=g.useRef(Promise.resolve()),m=g.useRef({enter:[],leave:[]}),h=Oa((b,w,x)=>{d.current.splice(0),t&&(t.chains.current[w]=t.chains.current[w].filter(([v])=>v!==b)),t?.chains.current[w].push([b,new Promise(v=>{d.current.push(v)})]),t?.chains.current[w].push([b,new Promise(v=>{Promise.all(m.current[w].map(([j,C])=>C)).then(()=>v())})]),w==="enter"?c.current=c.current.then(()=>t?.wait.current).then(()=>x(w)):x(w)}),p=Oa((b,w,x)=>{Promise.all(m.current[w].splice(0).map(([v,j])=>j)).then(()=>{var v;(v=d.current.shift())==null||v()}).then(()=>x(w))});return g.useMemo(()=>({children:s,register:o,unregister:l,onStart:h,onStop:p,wait:c,chains:m}),[o,l,s,h,p,m,c])}let JK=g.Fragment,eQ=Gv.RenderStrategy;function Y3e(e,t){var n,s;let{transition:r=!0,beforeEnter:i,afterEnter:l,beforeLeave:o,afterLeave:d,enter:c,enterFrom:m,enterTo:h,entered:p,leave:b,leaveFrom:w,leaveTo:x,...v}=e,[j,C]=g.useState(null),S=g.useRef(null),_=XK(e),A=vl(..._?[S,t,C]:t===null?[]:[t]),T=(n=v.unmount)==null||n?jc.Unmount:jc.Hidden,{show:E,appear:D,initial:z}=W3e(),[K,B]=g.useState(E?"visible":"hidden"),O=q3e(),{register:L,unregister:H}=O;Qs(()=>L(S),[L,S]),Qs(()=>{if(T===jc.Hidden&&S.current){if(E&&K!=="visible"){B("visible");return}return jo(K,{hidden:()=>H(S),visible:()=>L(S)})}},[K,S,L,H,E,T]);let ae=mj();Qs(()=>{if(_&&ae&&K==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,K,ae,_]);let W=z&&!D,q=D&&E&&z,le=g.useRef(!1),Q=ZK(()=>{le.current||(B("hidden"),H(S))},O),te=Oa(be=>{le.current=!0;let Ie=be?"enter":"leave";Q.onStart(S,Ie,G=>{G==="enter"?i?.():G==="leave"&&o?.()})}),V=Oa(be=>{let Ie=be?"enter":"leave";le.current=!1,Q.onStop(S,Ie,G=>{G==="enter"?l?.():G==="leave"&&d?.()}),Ie==="leave"&&!gj(Q)&&(B("hidden"),H(S))});g.useEffect(()=>{_&&r||(te(E),V(E))},[E,_,r]);let ee=!(!r||!_||!ae||W),[,me]=g3e(ee,j,E,{start:te,end:V}),we=Td({ref:A,className:((s=wE(v.className,q&&c,q&&m,me.enter&&c,me.enter&&me.closed&&m,me.enter&&!me.closed&&h,me.leave&&b,me.leave&&!me.closed&&w,me.leave&&me.closed&&x,!me.transition&&E&&p))==null?void 0:s.trim())||void 0,...h3e(me)}),ve=0;K==="visible"&&(ve|=Ai.Open),K==="hidden"&&(ve|=Ai.Closed),E&&K==="hidden"&&(ve|=Ai.Opening),!E&&K==="visible"&&(ve|=Ai.Closing);let Ae=ui();return pt.createElement(hj.Provider,{value:Q},pt.createElement(v3e,{value:ve},Ae({ourProps:we,theirProps:v,defaultTag:JK,features:eQ,visible:K==="visible",name:"Transition.Child"})))}function K3e(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,l=g.useRef(null),o=XK(e),d=vl(...o?[l,t]:t===null?[]:[t]);mj();let c=uj();if(n===void 0&&c!==null&&(n=(c&Ai.Open)===Ai.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[m,h]=g.useState(n?"visible":"hidden"),p=ZK(()=>{n||h("hidden")}),[b,w]=g.useState(!0),x=g.useRef([n]);Qs(()=>{b!==!1&&x.current[x.current.length-1]!==n&&(x.current.push(n),w(!1))},[x,n]);let v=g.useMemo(()=>({show:n,appear:s,initial:b}),[n,s,b]);Qs(()=>{n?h("visible"):!gj(p)&&l.current!==null&&h("hidden")},[n,p]);let j={unmount:r},C=Oa(()=>{var A;b&&w(!1),(A=e.beforeEnter)==null||A.call(e)}),S=Oa(()=>{var A;b&&w(!1),(A=e.beforeLeave)==null||A.call(e)}),_=ui();return pt.createElement(hj.Provider,{value:p},pt.createElement(fj.Provider,{value:v},_({ourProps:{...j,as:g.Fragment,children:pt.createElement(tQ,{ref:d,...j,...i,beforeEnter:C,beforeLeave:S})},theirProps:{},defaultTag:g.Fragment,features:eQ,visible:m==="visible",name:"Transition"})))}function Q3e(e,t){let n=g.useContext(fj)!==null,s=uj()!==null;return pt.createElement(pt.Fragment,null,!n&&s?pt.createElement(_E,{ref:t,...e}):pt.createElement(tQ,{ref:t,...e}))}let _E=sr(K3e),tQ=sr(Y3e),lP=sr(Q3e),ps=Object.assign(_E,{Child:lP,Root:_E});var X3e=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(X3e||{}),Z3e=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Z3e||{});let J3e={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},oP=g.createContext(null);oP.displayName="DialogContext";function pj(e){let t=g.useContext(oP);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,pj),n}return t}function eOe(e,t){return jo(t.type,J3e,e,t)}let z7=sr(function(e,t){let n=g.useId(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:l,role:o="dialog",autoFocus:d=!0,__demoMode:c=!1,unmount:m=!1,...h}=e,p=g.useRef(!1);o=(function(){return o==="dialog"||o==="alertdialog"?o:(p.current||(p.current=!0,console.warn(`Invalid role [${o}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let b=uj();r===void 0&&b!==null&&(r=(b&Ai.Open)===Ai.Open);let w=g.useRef(null),x=vl(w,t),v=sP(w.current),j=r?0:1,[C,S]=g.useReducer(eOe,{titleId:null,descriptionId:null,panelRef:g.createRef()}),_=Oa(()=>i(!1)),A=Oa(me=>S({type:0,id:me})),T=mj()?j===0:!1,[E,D]=E3e(),z={get current(){var me;return(me=C.panelRef.current)!=null?me:w.current}},K=YK(),{resolveContainers:B}=O3e({mainTreeNode:K,portals:E,defaultContainers:[z]}),O=b!==null?(b&Ai.Closing)===Ai.Closing:!1;VDe(c||O?!1:T,{allowed:Oa(()=>{var me,we;return[(we=(me=w.current)==null?void 0:me.closest("[data-headlessui-portal]"))!=null?we:null]}),disallowed:Oa(()=>{var me;return[(me=K?.closest("body > *:not(#headlessui-portal-root)"))!=null?me:null]})});let L=IK.get(null);Qs(()=>{if(T)return L.actions.push(s),()=>L.actions.pop(s)},[L,s,T]);let H=$K(L,g.useCallback(me=>L.selectors.isTop(me,s),[L,s]));n3e(H,B,me=>{me.preventDefault(),_()}),P3e(H,v?.defaultView,me=>{me.preventDefault(),me.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),_()}),d3e(c||O?!1:T,v,B),WDe(T,w,_);let[ae,W]=TDe(),q=g.useMemo(()=>[{dialogState:j,close:_,setTitleId:A,unmount:m},C],[j,_,A,m,C]),le=Bx({open:j===0}),Q={ref:x,id:s,role:o,tabIndex:-1,"aria-modal":c?void 0:j===0?!0:void 0,"aria-labelledby":C.titleId,"aria-describedby":ae,unmount:m},te=!D3e(),V=Pd.None;T&&!c&&(V|=Pd.RestoreFocus,V|=Pd.TabLock,d&&(V|=Pd.AutoFocus),te&&(V|=Pd.InitialFocus));let ee=ui();return pt.createElement(w3e,null,pt.createElement($7,{force:!0},pt.createElement(L3e,null,pt.createElement(oP.Provider,{value:q},pt.createElement(WK,{target:w},pt.createElement($7,{force:!1},pt.createElement(W,{slot:le},pt.createElement(D,null,pt.createElement(U3e,{initialFocus:l,initialFocusFallback:w,containers:B,features:V},pt.createElement(ODe,{value:_},ee({ourProps:Q,theirProps:h,slot:le,defaultTag:tOe,features:aOe,visible:j===0,name:"Dialog"})))))))))))}),tOe="div",aOe=Gv.RenderStrategy|Gv.Static;function nOe(e,t){let{transition:n=!1,open:s,...r}=e,i=uj(),l=e.hasOwnProperty("open")||i!==null,o=e.hasOwnProperty("onClose");if(!l&&!o)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!l)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!o)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||n)&&!r.static?pt.createElement(R7,null,pt.createElement(ps,{show:s,transition:n,unmount:r.unmount},pt.createElement(z7,{ref:t,...r}))):pt.createElement(R7,null,pt.createElement(z7,{ref:t,open:s,...r}))}let sOe="div";function rOe(e,t){let n=g.useId(),{id:s=`headlessui-dialog-panel-${n}`,transition:r=!1,...i}=e,[{dialogState:l,unmount:o},d]=pj("Dialog.Panel"),c=vl(t,d.panelRef),m=Bx({open:l===0}),h=Oa(v=>{v.stopPropagation()}),p={ref:c,id:s,onClick:h},b=r?lP:g.Fragment,w=r?{unmount:o}:{},x=ui();return pt.createElement(b,{...w},x({ourProps:p,theirProps:i,slot:m,defaultTag:sOe,name:"Dialog.Panel"}))}let iOe="div";function lOe(e,t){let{transition:n=!1,...s}=e,[{dialogState:r,unmount:i}]=pj("Dialog.Backdrop"),l=Bx({open:r===0}),o={ref:t,"aria-hidden":!0},d=n?lP:g.Fragment,c=n?{unmount:i}:{},m=ui();return pt.createElement(d,{...c},m({ourProps:o,theirProps:s,slot:l,defaultTag:iOe,name:"Dialog.Backdrop"}))}let oOe="h2";function cOe(e,t){let n=g.useId(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:l}]=pj("Dialog.Title"),o=vl(t);g.useEffect(()=>(l(s),()=>l(null)),[s,l]);let d=Bx({open:i===0}),c={ref:o,id:s};return ui()({ourProps:c,theirProps:r,slot:d,defaultTag:oOe,name:"Dialog.Title"})}let dOe=sr(nOe),uOe=sr(rOe);sr(lOe);let mOe=sr(cOe),Ql=Object.assign(dOe,{Panel:uOe,Title:mOe,Description:PDe});function Gx({isOpen:e,onClose:t,onSave:n,onEdit:s,setFormData:r,formData:i,isEditing:l=!1,viewMode:o=!1,users:d=[],currentUser:c,onDelete:m}){const[h,p]=g.useState([]),[b,w]=g.useState([]),x=C=>{const{name:S,value:_}=C.target;r(A=>{const T={...A,[S]:_};return S==="relatedType1"&&(T.relatedTo1="",_==="Lead"?(T.relatedType2=null,T.relatedTo2=null,w([])):_==="Account"&&(T.relatedType2="Contact")),S==="relatedType2"&&(T.relatedTo2=""),T})};g.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let S;i.relatedType1==="Lead"?S=await re.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(S=await re.get("/accounts/admin/fetch-all"));let _=[];if(S&&Array.isArray(S.data)&&(_=S.data),l&&i.relatedTo1)try{let A;i.relatedType1==="Lead"?A=await re.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(A=await re.get(`/accounts/get/${i.relatedTo1}`)),A&&A.data&&(_.some(E=>String(E.id)===String(i.relatedTo1))||(_=[A.data,..._]))}catch(A){console.error("Error fetching specific related item:",A)}p(_)}catch(S){console.error("Error fetching related 1 data:",S),p([])}})()},[i.relatedType1,e,l,i.relatedTo1]),g.useEffect(()=>{if(!e||o)return;(async()=>{try{if(w([]),i.relatedType1==="Account"&&i.relatedTo1){let S;i.relatedType2==="Contact"?S=await re.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"&&(S=await re.get(`/deals/from-acc/${i.relatedTo1}`));let _=[];if(S&&Array.isArray(S.data)&&(_=S.data),l&&i.relatedTo2)try{let A;i.relatedType2==="Contact"?A=await re.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"&&(A=await re.get(`/deals/get/${i.relatedTo2}`)),A&&A.data&&(_.some(E=>String(E.id)===String(i.relatedTo2))||(_=[A.data,..._]))}catch(A){console.error("Error fetching specific related item:",A)}w(_)}}catch(S){console.error("Error fetching related 2 data:",S),w([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,o,l]);const v=C=>{C.preventDefault(),n?.(i)},j=o?"Task Details":l?"Edit Task":"Create Task";return a.jsx(ps,{appear:!0,show:e,as:g.Fragment,children:a.jsxs(Ql,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx(Ql.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:a.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[a.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Ia,{size:25})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:j}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:C=>C.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"p-6 lg:p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>m(i),children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),a.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),a.jsx("p",{children:i.relatedTo2Text})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Priority:"}),a.jsx("p",{children:i.priority||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:i.status||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Due Date:"}),a.jsx("p",{children:i.dueDate||""})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("p",{className:"font-semibold",children:"Description:"}),a.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]})})]})]})}),!o&&a.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:x,required:!0,disabled:o,placeholder:"Enter task title",className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:x,value:i.relatedType1,disabled:o,className:`w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 ${o?"cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(s_,{disabled:!1,items:Array.isArray(h)?h:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:C=>i.relatedType1==="Lead"?C.title:C.name??"",onChange:C=>r(S=>({...S,relatedTo1:C}))})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:x,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:o||i.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(s_,{disabled:i.relatedType1==="Lead",items:Array.isArray(b)?b:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(b)&&b.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:C=>i.relatedType2==="Contact"?`${C.first_name??""} ${C.last_name??""}`.trim():C.name??"",onChange:C=>r(S=>({...S,relatedTo2:C}))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{name:"description",value:i.description,onChange:x,disabled:o,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{name:"priority",value:i.priority,onChange:x,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Normal",children:"Normal"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:x,required:!0,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(s_,{items:Array.isArray(d)?d:[],value:i.assignedTo??"",placeholder:"Search an account...",getLabel:C=>`${C.first_name} ${C.last_name}`,onChange:C=>r(S=>({...S,assignedTo:C})),disabled:o||c?.role==="Sales"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",value:i.status,onChange:x,disabled:o,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${o?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Not started",children:"Not started"}),a.jsx("option",{value:"In progress",children:"In Progress"}),a.jsx("option",{value:"Deferred",children:"Deferred"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),!o&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:l?"Update Task":"Create Task"})]})]})]})})})})})]})})}function s_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const U7=["Not started","In progress","Deferred","Completed"],F7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},aQ=e=>e&&(F7[e]||F7[String(e).toUpperCase()])||"Not started",fOe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},B7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},hOe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),aQ(e.status);let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,c=l||o||i||r,m=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:c,related_type:m}},gOe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,c=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let x="Lead",v="",j="",C="",S="Lead",_="",A="",T="";const E=o(),D=p(),z=l(),K=h();if(E){x="Account",S="Account",_=D,v=String(E);const B=d(),O=c(),L=b(),H=w();B?(j="Contact",A="Contact",T=L,C=String(B)):O&&(A="Deal",j="Deal",T=H,C=String(O))}else z?(S="Lead",_=K,x="Lead",v=String(z)):e.related_type==="Account"&&(x="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:aQ(e.status),dueDate:s,dateAssigned:r,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:A,relatedTo2Text:T,subject:e.title,relatedType1:x,relatedTo1:v,relatedType2:j,relatedTo2:C}};function pOe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[n,s]=g.useState("board"),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,A]=g.useState([]),[T,E]=g.useState(1),[D,z]=g.useState(10),[K,B]=g.useState(null),[O,L]=g.useState(!1),[H,ae]=g.useState([]),W=bt(),q=pa(),[le,Q]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const ye=q.state?.openTaskModal,Me=q.state?.initialTaskData;ye&&(i(!0),Me&&Q(He=>({...He,...Me})),W(q.pathname,{replace:!0,state:{}}))},[q,W]);const te=async()=>{try{const ye=await re.get("/users/all");A(Array.isArray(ye.data)?ye.data:[])}catch(ye){console.error("Failed to fetch users:",ye),Y.error("Failed to fetch users.")}},V=async()=>{try{b(!0);const ye=await re.get("/tasks/all"),He=(Array.isArray(ye.data)?ye.data:[]).map(gOe);He.sort((Be,dt)=>{const M=Be.createdAt?new Date(Be.createdAt):0;return(dt.createdAt?new Date(dt.createdAt):0)-M}),console.log("Fetched Tasks:",He),h(He),n==="list"&&E(1)}catch(ye){console.error("Failed to load tasks:",ye),Y.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(te(),V())},[t,e]);const ee=()=>{o(null),Q({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},me=(ye=null,Me=!1)=>{o(ye),c(Me),ye?Q({id:ye.id,subject:ye.title||"",description:ye.description||"",priority:ye.priority||"Normal",status:ye.status||"Not started",dueDate:fOe(ye.dueDate),assignedTo:ye.assignedToId?String(ye.assignedToId):"",notes:ye.notes||"",relatedType1Text:ye.relatedType1Text||"",relatedTo1Text:ye.relatedTo1Text||"",relatedType2Text:ye.relatedType2Text||"",relatedTo2Text:ye.relatedTo2Text||"",relatedType1:ye.relatedType1||"",relatedTo1:ye.relatedTo1||"",relatedType2:ye.relatedType2||"",relatedTo2:ye.relatedTo2||""}):ee(),i(!0)},we=()=>{i(!1),o(null),c(!1),ee()},ve=async ye=>{const Me=hOe(ye);try{l&&!d?(await re.put(`/tasks/${l.id}`,Me),Y.success("Task updated successfully.")):(await re.post("/tasks/create",Me),Y.success("Task created successfully.")),i(!1),await V()}catch(He){console.error("Failed to save task:",He);const Be=He.response?.data?.detail||"Failed to save task.";Y.error(Be)}},Ae=ye=>{ye&&B({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:ye.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ye.id}})},be=()=>{if(ie.every(ye=>H.includes(ye.id)))ae(H.filter(ye=>!ie.map(Me=>Me.id).includes(ye)));else{const ye=ie.map(Me=>Me.id);ae([...new Set([...H,...ye])])}},Ie=ye=>{ae(Me=>Me.includes(ye)?Me.filter(He=>He!==ye):[...Me,ye])},G=async()=>{H.length!==0&&B({title:"Bulk Delete Tasks",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:H.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${H.length} Tasks`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:H}})},Ce=async()=>{if(!K?.action){B(null);return}const{action:ye}=K;L(!0);try{ye.type==="delete"?(await re.delete(`/tasks/${ye.targetId}`),Y.success("Task deleted successfully."),await V()):ye.type==="bulk-delete"&&(await re.delete("/tasks/admin/bulk-delete",{data:{task_ids:ye.task_ids}}),Y.success(`Successfully deleted ${ye.task_ids.length} tasks`),ae([]),await V())}catch(Me){console.error("Task action failed:",Me),Y.error("Failed to delete task.")}finally{L(!1),B(null)}},ce=()=>{O||B(null)},F=g.useMemo(()=>{const ye=w.trim().toLowerCase();return[...m].sort((He,Be)=>{const dt=He.createdAt?new Date(He.createdAt):0;return(Be.createdAt?new Date(Be.createdAt):0)-dt}).filter(He=>{const Be=ye===""||He.title?.toLowerCase().includes(ye)||He.description?.toLowerCase().includes(ye)||He.assignedToName?.toLowerCase().includes(ye)||He.createdBy?.toLowerCase().includes(ye),dt=v==="Filter by Status"||He.status===v,M=C==="Filter by Priority"||He.priority===C;return Be&&dt&&M})},[m,w,v,C]);g.useEffect(()=>{E(1)},[w,v,C,n,D]),g.useEffect(()=>{if(n==="list"){const ye=F.length===0?1:Math.ceil(F.length/D);T>ye&&E(ye)}},[F.length,T,n,D]);const ie=g.useMemo(()=>{if(n==="board")return F;const ye=(T-1)*D;return F.slice(ye,ye+D)},[F,T,n,D]),he=g.useMemo(()=>{const ye=new Date;return[{title:"To Do",value:m.filter(Me=>Me.status==="Not started").length,icon:ds,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(Me=>Me.status==="In progress").length,icon:Zr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(Me=>Me.status==="Completed").length,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(Me=>Me.dueDate&&new Date(Me.dueDate)<ye&&Me.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(Me=>Me.priority==="High").length,icon:So,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Le=ye=>ye.dueDate&&new Date(ye.dueDate)<new Date&&ye.status!=="Completed",xe=ye=>{switch(ye.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ve=ye=>{switch(ye){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ke=ye=>{switch(ye){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(It,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zr,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>me(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(na,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:he.map(ye=>a.jsx(xOe,{...ye},ye.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:ye=>x(ye.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:v,onChange:ye=>j(ye.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),U7.map(ye=>a.jsx("option",{children:ye},ye))]}),a.jsxs("select",{value:C,onChange:ye=>S(ye.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&F.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&F.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:U7.map(ye=>{const Me=ie.filter(He=>He.status===ye);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:ye}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:Me.length})]}),a.jsx("div",{className:`space-y-3 ${Me.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:Me.length>0?Me.map(He=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${xe(He)}`,onClick:()=>me(He,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:He.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",He.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",He.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Le(He)?"text-red-600":"text-gray-600",children:He.dateAssigned?B7(He.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Be=>{Be.stopPropagation(),me(He)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(Ma,{})}),a.jsx("button",{type:"button",onClick:Be=>{Be.stopPropagation(),Ae(He)},className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})]},He.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},ye)})}),!p&&!t&&F.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ie.length>0&&ie.every(ye=>H.includes(ye.id)),onChange:be})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:H.length>0?a.jsx("button",{onClick:G,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${H.length} selected tasks`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:ie.map(ye=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:Me=>Me.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:H.includes(ye.id),onChange:()=>Ie(ye.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>me(ye,!0),children:ye.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>me(ye,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ve(ye.status||"Not started")}`,children:ye.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>me(ye,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ke(ye.priority||"Low")}`,children:ye.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>me(ye,!0),children:ye.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Le(ye)?"text-red-600 font-medium":""}`,onClick:()=>me(ye,!0),children:ye.dateAssigned?B7(ye.dateAssigned):""}),a.jsx("td",{})]},ye.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Vt,{className:"mt-6",totalItems:F.length,pageSize:D,currentPage:F.length===0?0:T,onPrev:()=>E(ye=>Math.max(ye-1,1)),onNext:()=>E(ye=>Math.min(ye+1,Math.max(1,Math.ceil(F.length/D)||1))),onPageSizeChange:ye=>{z(ye),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(Gx,{isOpen:r,onClose:we,onSave:ve,onEdit:()=>c(!1),setFormData:Q,formData:le,isEditing:!d&&!!l,viewMode:d,users:_,currentUser:e,onDelete:Ae}),K&&a.jsx(yOe,{open:!0,title:K.title,message:K.message,confirmLabel:K.confirmLabel,cancelLabel:K.cancelLabel,variant:K.variant,onConfirm:Ce,onCancel:ce,loading:O})]})}function xOe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function yOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function bOe(e){return Ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const r_={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function vOe({label:e,options:t,selectedValues:n,onChange:s,disabled:r=!1,placeholder:i="Select users..."}){const[l,o]=g.useState(!1),[d,c]=g.useState(""),m=g.useRef(null);g.useEffect(()=>{function x(v){m.current&&!m.current.contains(v.target)&&(o(!1),c(""))}return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const h=t.filter(x=>x.label.toLowerCase().includes(d.toLowerCase())),p=x=>{const v=n.includes(x);let j;v?j=n.filter(C=>C!==x):j=[...n,x],s(j)},b=(x,v)=>{x.stopPropagation(),s(n.filter(j=>j!==v))},w=t.filter(x=>n.includes(x.value));return a.jsxs("div",{className:"relative",ref:m,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsxs("div",{onClick:()=>!r&&o(!l),className:`w-full border ${l?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
          rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
          ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[n.length===0&&a.jsx("span",{className:"text-gray-400 select-none",children:i}),w.map(x=>a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[x.label,!r&&a.jsx(Bt,{className:"cursor-pointer hover:text-indigo-900",onClick:v=>b(v,x.value)})]},x.value)),a.jsx("div",{className:"ml-auto text-gray-400",children:a.jsx(wt,{})})]}),l&&!r&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:a.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[a.jsx($t,{className:"text-gray-400 mr-2"}),a.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:d,onChange:x=>c(x.target.value),autoFocus:!0})]})}),a.jsx("div",{className:"overflow-y-auto flex-1",children:h.length>0?h.map(x=>{const v=n.includes(x.value);return a.jsxs("div",{onClick:()=>p(x.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${v?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[a.jsx("span",{children:x.label}),v&&a.jsx(Y8,{className:"text-indigo-600"})]},x.value)}):a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function dc(){g.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=bt(),{id:t}=Co(),[n,s]=g.useState(""),[r,i]=g.useState(""),[l,o]=g.useState(""),[d,c]=g.useState(null),[m,h]=g.useState(!1),[p,b]=g.useState([]),[w,x]=g.useState(!1),[v,j]=g.useState([]),[C,S]=g.useState(r_),[_,A]=g.useState(!1),[T,E]=g.useState(!1),[D,z]=g.useState(null),[K,B]=g.useState(null),[O,L]=g.useState("board"),[H,ae]=g.useState(null),[W,q]=g.useState(!1),[le,Q]=g.useState(null),[te,V]=g.useState(1),[ee,me]=g.useState(10),[we,ve]=g.useState([]),Ae=g.useRef(!1),{userRole:be}=Zs(),Ie=g.useMemo(()=>{const Ne=new Map;return p.forEach(qe=>{const De=`${qe.name}-${qe.manager_id||"no-manager"}`;if(!Ne.has(De))Ne.set(De,{...qe,assigned_users_list:qe.assigned_to?[qe.assigned_to]:[]});else{const Je=Ne.get(De);qe.assigned_to&&(Je.assigned_users_list.some(at=>at.id===qe.assigned_to.id)||Je.assigned_users_list.push(qe.assigned_to))}}),Array.from(Ne.values())},[p]),G=g.useMemo(()=>{const Ne=n.trim().toLowerCase(),qe=r.trim().toLowerCase(),De=l.trim();return[...Ie].sort((at,ot)=>{const R=at?.created_at?new Date(at.created_at):0;return(ot?.created_at?new Date(ot.created_at):0)-R}).filter(at=>{const ot=at.name?.toLowerCase()||"",R=at.description?.toLowerCase()||"",$=at.managed_by?`${at.managed_by.first_name} ${at.managed_by.last_name}`.toLowerCase():"",I=at.status?.toString().toLowerCase()||"",U=at.assigned_users_list.map(Fe=>`${Fe.first_name} ${Fe.last_name}`.toLowerCase()).join(" "),ge=Ne===""||[ot,R,$,I,U].some(Fe=>Fe&&Fe.includes(Ne)),ue=qe===""||I===qe,Se=De===""||String(at.managed_by?.id||"")===De||at.assigned_users_list.some(Fe=>String(Fe.id)===De);return ge&&ue&&Se})},[Ie,n,r,l]);g.useEffect(()=>{if(Ae.current){Ae.current=!1;return}if(t&&Ie.length>0&&!_&&!m&&!T){const Ne=Ie.find(qe=>qe.id===parseInt(t));Ne&&c(Ne)}!t&&!_&&!m&&c(null)},[t,Ie,_,m,T]),g.useEffect(()=>{V(1)},[n,r,l]),g.useEffect(()=>{V(Ne=>{const qe=Math.max(1,Math.ceil(G.length/ee)||1);return Ne>qe?qe:Ne})},[G.length,ee]);const Ce=async()=>{try{const Ne=await re.get("/users/read/territory");j(Ne.data)}catch(Ne){console.error("Error fetching users:",Ne)}},ce=async()=>{x(!0);try{const Ne=await re.get("/territories/fetch"),qe=Array.isArray(Ne.data)?Ne.data:[];b(qe),console.log(Ne.data)}catch(Ne){console.error("Error fetching territories:",Ne)}finally{x(!1)}};g.useEffect(()=>{Ce(),ce()},[]);const F=Ne=>{const{name:qe,value:De}=Ne.target;S(Je=>({...Je,[qe]:De}))},ie=Ne=>{S(qe=>({...qe,user_ids:Ne}))},he=()=>{S(r_),A(!1),z(null),h(!0)},Le=(Ne=!0)=>{h(!1),A(!1),z(null),S(r_)},xe=Ne=>{if(!Ne)return;const qe=Ne.assigned_users_list?Ne.assigned_users_list.map(De=>String(De.id)):[];S({name:Ne.name||"",description:Ne.description||"",manager_id:Ne.managed_by?String(Ne.managed_by.id):"",user_ids:qe,company_id:Ne.company_id?String(Ne.company_id):""}),A(!0),z(Ne.id),c(null),h(!0)},Ve=Ne=>{Ne.preventDefault();const qe=C.name.trim();if(!qe){Y.error("Territory name is required.");return}if(C.user_ids.length===0){Y.error("Please assign at least one user.");return}let De=C.company_id?Number(C.company_id):null;if(!De&&C.user_ids.length>0){const ot=C.user_ids[0],R=v.find($=>String($.id)===String(ot));R&&R.company&&(De=R.company.id)}const Je={name:qe,description:C.description?.trim()||"",manager_id:C.manager_id?Number(C.manager_id):null,user_ids:C.user_ids.map(ot=>Number(ot)),company_id:De},at=_&&D?"update":"create";ae({title:at==="create"?"Confirm New Territory":"Confirm Update",message:a.jsxs("span",{children:[at==="create"?"Create":"Update"," territory ",a.jsx("span",{className:"font-semibold",children:qe})," with ",Je.user_ids.length," assigned users?"]}),confirmLabel:at==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:at,payload:Je,targetId:D,name:qe}})},ke=Ne=>{Ne&&ae({title:"Delete Territory Group",message:a.jsxs("span",{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Ne.name}),"?",a.jsx("br",{}),a.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",Ne.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ne.id,name:Ne.name}})},ye=async()=>{we.length!==0&&ae({title:"Bulk Delete Territories",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:we.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${we.length} Territories`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:we}})},Me=Ne=>{if(Ne.target.checked){const qe=M.map(De=>De.id);ve(qe)}else ve([])},He=Ne=>{ve(qe=>qe.includes(Ne)?qe.filter(De=>De!==Ne):[...qe,Ne])},Be=async()=>{if(!H?.action){ae(null);return}const{action:Ne}=H,{type:qe,payload:De,targetId:Je,name:at}=Ne;q(!0);try{qe==="create"?(E(!0),await re.post("/territories/assign",De),Y.success(`Territory "${at}" created.`),await ce(),await Ce(),Le(!1)):qe==="update"?(E(!0),await re.put(`/territories/${Je}`,De),Y.success(`Territory "${at}" updated.`),Ae.current=!0,Le(!1),c(null),t&&e("/admin/territory"),await ce(),await Ce()):qe==="delete"?(Q(Je),await re.delete(`/territories/${Je}`),Y.success(`Territory "${at}" deleted.`),await ce(),d?.id===Je&&c(null)):qe==="bulk-delete"&&(await re.delete("/territories/admin/bulk-delete",{data:{territory_ids:Ne.territory_ids}}),Y.success(`Successfully deleted ${Ne.territory_ids.length} territories`),ve([]),await ce())}catch(ot){console.error(ot),Y.error("An error occurred.")}finally{E(!1),Q(null),q(!1),ae(null)}},dt=()=>{W||ae(null)},M=g.useMemo(()=>{if(O==="board")return G;const Ne=(te-1)*ee;return G.slice(Ne,Ne+ee)},[G,te,ee,O]),pe=G.length>0,se=()=>V(Ne=>Math.max(Ne-1,1)),je=()=>V(Ne=>Math.min(Ne+1,Math.ceil(G.length/ee)||1)),We=Ne=>!Ne||Ne.length===0?"Unassigned":Ne.length===1?`${Ne[0].first_name} ${Ne[0].last_name}`:`${Ne[0].first_name} ${Ne[0].last_name} +${Ne.length-1} more`;return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[w&&a.jsx(It,{message:"Loading territories..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[a.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[a.jsx(zc,{className:"mr-2 text-blue-600"})," Territory"]}),a.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(be.toLowerCase())&&(Array.isArray(v)&&v.length>0?a.jsxs("button",{onClick:he,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[a.jsx(na,{})," Create Territory"]}):a.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[a.jsx(bOe,{})," Add users to assign territories"]}))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:n,onChange:Ne=>s(Ne.target.value)})]}),be.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:l,onChange:Ne=>o(Ne.target.value),children:[a.jsx("option",{value:"",children:"Filter by Users"}),v.map(Ne=>a.jsxs("option",{value:String(Ne.id),children:[Ne.first_name," ",Ne.last_name]},Ne.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{onClick:()=>L("board"),className:`px-4 py-2 rounded-full text-sm ${O==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),a.jsx("button",{onClick:()=>L("list"),className:`px-4 py-2 rounded-full text-sm ${O==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),O==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:pe?M.map(Ne=>a.jsxs("div",{onClick:()=>{c(Ne);let qe;be.toLowerCase()==="ceo"||be.toLowerCase()==="admin"?qe="admin":be.toLowerCase()==="group manager"||be.toLowerCase()==="group_manager"?qe="group-manager":be.toLowerCase()==="manager"?qe="manager":qe="sales",e(`/${qe}/territory/${Ne.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:Ne.name}),Ne.description&&a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:Ne.description}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[a.jsx(Ut,{})," ",We(Ne.assigned_users_list)]}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),a.jsx("div",{className:"text-gray-400 text-xs text-right",children:Ne.created_at?new Date(Ne.created_at).toLocaleDateString():""})]},Ne.id)):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),O==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:M.length>0&&M.every(Ne=>we.includes(Ne.id)),onChange:Me})}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Manager"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:we.length>0?a.jsx("button",{onClick:ye,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${we.length} selected territories`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:pe?M.map(Ne=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:qe=>qe.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:we.includes(Ne.id),onChange:()=>He(Ne.id)})}),a.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{c(Ne);let qe;be.toLowerCase()==="ceo"||be.toLowerCase()==="admin"?qe="admin":be.toLowerCase()==="group manager"||be.toLowerCase()==="group_manager"?qe="group-manager":be.toLowerCase()==="manager"?qe="manager":qe="sales",e(`/${qe}/territory/${Ne.id}`)},children:Ne.name}),a.jsx("td",{className:"py-3 px-4",children:We(Ne.assigned_users_list)}),a.jsx("td",{className:"py-3 px-4",children:Ne.managed_by?`${Ne.managed_by.first_name}`:""}),a.jsx("td",{})]},Ne.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[a.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{c(null);let Ne;be.toLowerCase()==="ceo"||be.toLowerCase()==="admin"?Ne="admin":be.toLowerCase()==="group manager"||be.toLowerCase()==="group_manager"?Ne="group-manager":be.toLowerCase()==="manager"?Ne="manager":Ne="sales",e(`/${Ne}/territory`)},children:a.jsx(Bt,{size:24})}),a.jsx("h2",{className:"text-3xl font-semibold mb-1",children:d.name}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),a.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-700 text-sm mb-6",children:d.description||""}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Manager"}),a.jsx("div",{className:"font-medium",children:d.managed_by?`${d.managed_by.first_name} ${d.managed_by.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:d.assigned_users_list&&d.assigned_users_list.length>0?d.assigned_users_list.map(Ne=>a.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[a.jsx(Ut,{})," ",Ne.first_name," ",Ne.last_name]},Ne.id)):"Unassigned"})]})]}),!["sales","manager"].includes(be.toLowerCase())&&a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs("button",{onClick:()=>xe(d),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{onClick:()=>ke(d),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(Ot,{})," Delete"]})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[a.jsx("button",{className:"absolute top-4 right-4",onClick:()=>Le(),children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:_?"Edit Territory":"Create Territory"}),a.jsxs("form",{className:"space-y-4",onSubmit:Ve,children:[a.jsx(wOe,{label:"Territory Name",name:"name",value:C.name,onChange:F,required:!0}),a.jsx(NOe,{label:"Territory Manager",name:"manager_id",value:C.manager_id,onChange:F,options:[{value:"",label:"Assign Manager"},...v.map(Ne=>({value:String(Ne.id),label:`${Ne.first_name} ${Ne.last_name}`}))]}),a.jsx(vOe,{label:"Assign Users",placeholder:"Search and select users...",options:v.map(Ne=>({value:String(Ne.id),label:`${Ne.first_name} ${Ne.last_name}`})),selectedValues:C.user_ids,onChange:ie}),a.jsx(jOe,{label:"Description",name:"description",value:C.description,onChange:F}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>Le(),className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-tertiary text-white rounded",children:T?"Saving...":"Save Territory"})]})]})]})}),O==="list"&&a.jsx(Vt,{className:"mt-4",totalItems:G.length,pageSize:ee,currentPage:te,onPrev:se,onNext:je,onPageSizeChange:Ne=>{me(Ne),V(1)},label:"territories"}),H&&a.jsx(COe,{open:!0,title:H.title,message:H.message,confirmLabel:H.confirmLabel,cancelLabel:H.cancelLabel,variant:H.variant,onConfirm:Be,onCancel:dt,loading:W})]})})}function wOe({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function NOe({label:e,name:t,value:n,onChange:s,options:r,disabled:i=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,disabled:i,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100",children:r.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function jOe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function COe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const SOe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],_Oe=e=>e?String(e).toUpperCase():"",Dd=e=>{const t=_Oe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},i_=e=>{const t=Dd(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},H7=e=>{switch(Dd(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},G7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function V7(){const[e,t]=g.useState(!1),[n,s]=g.useState(null),[r,i]=g.useState(null),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(!1),[_,A]=g.useState(!1),[T,E]=g.useState("PLANNED"),[D,z]=g.useState(!1),[K,B]=g.useState(!1),[O,L]=g.useState(10),[H,ae]=g.useState(1),[W,q]=g.useState([]);Ss();const le=bt(),Q=pa(),V={subject:"",call_time:(()=>{const $=new Date,I=$.getFullYear(),U=String($.getMonth()+1).padStart(2,"0"),de=String($.getDate()).padStart(2,"0");return`${I}-${U}-${de}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[ee,me]=g.useState(V);g.useEffect(()=>{const $=Q.state;!$?.openCallModal||!$?.initialCallData||$.initialCallData.relatedType1==="Lead"&&Array.isArray(l)&&l.length===0||$.initialCallData.relatedType1==="Account"&&(!Array.isArray(l)||l.length===0)||(t(!0),me(I=>({...I,...$.initialCallData,relatedTo1:$.initialCallData.relatedTo1?String($.initialCallData.relatedTo1):"",relatedTo2:$.initialCallData.relatedTo2?String($.initialCallData.relatedTo2):""})),le(Q.pathname,{replace:!0,state:{}}))},[Q.state,l]);const we=async()=>{try{B(!0);const $=await re.get("/calls/admin/fetch-all"),U=[...Array.isArray($.data)?$.data:[]].sort((de,ge)=>{const ue=de?.created_at?new Date(de.created_at):0;return(ge?.created_at?new Date(ge.created_at):0)-ue});h(U)}catch($){console.error("Error fetching calls:",$),Y.error("Failed to load calls")}finally{B(!1)}},ve=async()=>{try{const $=await re.get("/users/all");b($.data)}catch($){console.error("Error fetching users: ",$)}};g.useEffect(()=>{ve(),we()},[]);const[Ae,be]=g.useState(""),[Ie,G]=g.useState("Filter by Status"),[Ce,ce]=g.useState("Filter by Users");g.useEffect(()=>{ae(1)},[Ae,Ie,Ce,O]);const F=g.useMemo(()=>m.filter($=>{const I=!Ae||[$.subject,$.notes,$.lead?.title,$.account?.name,$.contact?.first_name,$.contact?.last_name,$.deal?.name].some(ue=>ue&&String(ue).toLowerCase().includes(Ae.toLowerCase())),U=Ie==="Filter by Status"||Dd($.status)===Ie,de=$.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"";return I&&U&&(Ce==="Filter by Users"||de===Ce)}),[m,Ae,Ie,Ce]),ie=g.useMemo(()=>{const $=(H-1)*O;return F.slice($,$+O)},[F,H,O]),he=Array.isArray(p)?p.map($=>({id:$.id,name:`${$.first_name} ${$.last_name}`})):[],Le=()=>ae($=>Math.max(1,$-1)),xe=()=>ae($=>Math.min($+1,Math.ceil(F.length/O)||1)),Ve=$=>{if($.target.checked){const I=ie.map(U=>U.id);q(I)}else q([])},ke=$=>{q(I=>I.includes($)?I.filter(U=>U!==$):[...I,$])},ye=m.length,Me=m.filter($=>Dd($.status)==="PLANNED").length,He=m.filter($=>Dd($.status)==="HELD").length,Be=m.filter($=>Dd($.status)==="NOT_HELD").length,dt=[{title:"Total",value:ye,icon:js,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Me,icon:ds,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:He,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Be,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}],[M,pe]=g.useState("Overview"),se=$=>{const{name:I,value:U}=$.target;me(de=>{const ge={...de,[I]:U};return I==="relatedType1"&&(ge.relatedTo1="",U==="Lead"?(ge.relatedType2=null,ge.relatedTo2=null,c([])):U==="Account"&&(ge.relatedType2="Contact")),I==="relatedType2"&&(ge.relatedTo2=""),ge})};g.useEffect(()=>{const $=async()=>{try{o([]);let I;ee.relatedType1==="Lead"?I=await re.get("/leads/admin/getLeads"):ee.relatedType1==="Account"&&(I=await re.get("/accounts/admin/fetch-all")),I&&Array.isArray(I.data)?o(I.data):o([])}catch(I){console.error("Error fetching data:",I),o([])}};ee.relatedType1&&$()},[ee.relatedType1]),g.useEffect(()=>{const $=async()=>{try{c([]);let I;if(ee.relatedType1==="Account"&&ee.relatedTo1)ee.relatedType2==="Contact"?I=await re.get(`/contacts/from-acc/${ee.relatedTo1}`):ee.relatedType2==="Deal"&&(I=await re.get(`/deals/from-acc/${ee.relatedTo1}`));else{c([]);return}I&&Array.isArray(I.data)?c(I.data):c([])}catch(I){console.error("Error fetching data:",I),c([])}};ee.relatedType2&&$()},[ee.relatedType2,ee.relatedTo1,ee.relatedType1]);const je=$=>{if($.preventDefault(),!ee.assigned_to){Y.error("Please assign the call to a user.");return}const I={...ee,duration_minutes:ee.duration_minutes?parseInt(ee.duration_minutes,10):null,relatedTo1:ee.relatedTo1?parseInt(ee.relatedTo1,10):null,relatedTo2:ee.relatedType1==="Lead"?null:ee.relatedTo2?parseInt(ee.relatedTo2,10):null,relatedType2:ee.relatedType1==="Lead"?null:ee.relatedType2,assigned_to:ee.assigned_to?parseInt(ee.assigned_to,10):null},U=w&&v?"update":"create",de=(ee.subject||"").trim()||"Untitled Call";i({title:U==="create"?"Confirm New Call":"Confirm Update",message:U==="create"?`Create "${de}"?`:`Save changes to "${de}"?`,confirmLabel:U==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:U,payload:I,targetId:v||null,name:de}})},We=$=>s($),Ne=()=>{t(!1),x(!1),j(null)},qe=async()=>{W.length!==0&&i({title:"Bulk Delete Calls",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:W.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Calls`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:W}})},De=async()=>{if(!r?.action){i(null);return}const{action:$}=r,{type:I,payload:U,targetId:de,name:ge}=$;A(!0);try{if(I==="create")S(!0),await re.post("/calls/create",U),Y.success(`Call "${ge}" created successfully.`),t(!1),me(V),x(!1),j(null),await we();else if(I==="update"){if(!de)throw new Error("Missing call identifier for update.");S(!0),await re.put(`/calls/${de}`,U),Y.success(`Call "${ge}" updated successfully.`),t(!1),me(V),x(!1),j(null),await we()}else if(I==="delete"){if(!de)throw new Error("Missing call identifier for deletion.");await re.delete(`/calls/${de}`),Y.success(`Call "${ge}" deleted successfully.`),n?.id===de&&s(null),await we()}else I==="bulk-delete"&&(await re.delete("/calls/admin/bulk-delete",{data:{call_ids:W}}),Y.success(`Successfully deleted ${W.length} calls`),q([]),await we())}catch(ue){const Se=I==="create"?"Failed to create call. Please review the details and try again.":I==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Fe=ue?.response?.data?.detail||Se;Y.error(Fe)}finally{(I==="create"||I==="update")&&S(!1),A(!1),i(null)}},Je=()=>{_||i(null)},at=async()=>{if(n?.id)try{z(!0),await re.put(`/calls/${n.id}`,{status:T}),Y.success(`Status updated to ${i_(T)}`),h($=>Array.isArray($)?$.map(I=>I.id===n.id?{...I,status:T}:I):$),s(null)}catch($){const I=$.response?.data?.detail||"Failed to update status.";Y.error(I)}finally{z(!1)}};g.useEffect(()=>{n&&E(Dd(n.status))},[n]);const ot=n?a.jsxs("div",{id:"callModalBackdrop",onClick:$=>$.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[K&&a.jsx(It,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${H7(n.status)}`,children:i_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const $=ue=>{if(!ue)return"";const Se=new Date(ue),Fe=Se.getFullYear(),ft=String(Se.getMonth()+1).padStart(2,"0"),vt=String(Se.getDate()).padStart(2,"0"),ze=String(Se.getHours()).padStart(2,"0"),yt=String(Se.getMinutes()).padStart(2,"0");return`${Fe}-${ft}-${vt}T${ze}:${yt}`},I=n.lead?"Lead":n.account?"Account":"Lead",U=n.lead?n.lead.id:n.account?n.account.id:null,de=I==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",ge=I==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;me({subject:n.subject||"",call_time:$(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:I,relatedType2:de,relatedTo1:U?String(U):"",relatedTo2:ge?String(ge):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),s(null),t(!0)},children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const $=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${$}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:$}})},children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>a.jsx("button",{onClick:()=>pe($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${M===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[M==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Bl,{label:"Call Time",value:G7(n.call_time)}),a.jsx(Bl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Bl,{label:"Direction",value:n.direction||"--"}),a.jsx(Bl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Bl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Bl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Bl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Bl,{label:"Deal",value:n.deal.name}),a.jsx(Bl,{label:"Created At",value:G7(n.created_at)})]})}),M==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:$=>E($.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:at,disabled:D,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:D?"Updating...":"Update"})]})]})]})]})]}):null,R=e?a.jsx("div",{id:"modalBackdrop",onClick:$=>$.target.id==="modalBackdrop"&&Ne(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Ne,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:je,children:[a.jsx(TOe,{label:"Subject",className:"md:col-span-2",name:"subject",value:ee.subject,onChange:se,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:se,value:ee.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C||w,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(l_,{items:Array.isArray(l)?l:[],value:ee.relatedTo1??"",placeholder:`Search ${ee.relatedType1||"here"}...`,getLabel:$=>ee.relatedType1==="Lead"?$.title:$.name??"",onChange:$=>me(I=>({...I,relatedTo1:$})),disabled:C||w})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:se,value:ee.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:ee.relatedType1==="Lead"||C||w,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(l_,{disabled:ee.relatedType1==="Lead"||C||w,items:Array.isArray(d)?d:[],value:ee.relatedTo2??"",placeholder:ee.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${ee.relatedType2||"Contact"}...`:`No ${ee.relatedType2||""} data found`,getLabel:$=>ee.relatedType2==="Contact"?`${$.first_name??""} ${$.last_name??""}`.trim():$.name??"",onChange:$=>me(I=>({...I,relatedTo2:$}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:ee.call_time,onChange:se,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:ee.duration_minutes,onChange:se,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(l_,{items:Array.isArray(p)?p:[],value:ee.assigned_to??"",placeholder:"Search an account...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>me(I=>({...I,assigned_to:$}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:se,value:ee.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:se,value:ee.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(EOe,{className:"col-span-2",label:"Notes",value:ee.notes,onChange:se,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Ne,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(js,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{me(V),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:dt.map($=>a.jsx(AOe,{...$},$.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:Ae,onChange:$=>be($.target.value)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:Ie,onChange:$=>G($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),SOe.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))]}),a.jsxs("select",{value:Ce,onChange:$=>ce($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),he.map($=>a.jsx("option",{value:$.name,children:$.name},$.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:ie.length>0&&W.length===ie.length,onChange:Ve,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?a.jsx("button",{onClick:qe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected calls`,children:a.jsx(Ot,{size:18})}):""})]})}),a.jsx("tbody",{children:K?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10",children:a.jsx(It,{message:"Loading calls..."})})}):ie.length>0?ie.map($=>a.jsxs("tr",{onClick:()=>We($),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:I=>I.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:W.includes($.id),onChange:()=>ke($.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:$.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[$.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.lead.title}),$.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.account.name}),$.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[$.contact.first_name," ",$.contact.last_name]}),$.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:$.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:$.call_time?new Date($.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:$?.call_assign_to?`${$.call_assign_to.first_name} ${$.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H7($.status)}`,children:i_($.status)})}),a.jsx("td",{className:"py-3 px-4"})]},$.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Vt,{totalItems:F.length,pageSize:O,currentPage:H,onPrev:Le,onNext:xe,onPageSizeChange:$=>{L($),ae(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),ot,R,r&&a.jsx(kOe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:De,onCancel:Je,loading:_})]})}function AOe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function TOe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function EOe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Bl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function kOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function l_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const xj=({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:l=[]})=>{const d=(()=>{const _=new Date,A=_.getFullYear(),T=String(_.getMonth()+1).padStart(2,"0"),E=String(_.getDate()).padStart(2,"0");return{startTime:`${A}-${T}-${E}T08:00`,endTime:`${A}-${T}-${E}T09:00`}})(),[c,m]=g.useState({subject:"",startTime:d.startTime,endTime:d.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[h,p]=g.useState([]),[b,w]=g.useState([]);g.useEffect(()=>{t!==void 0&&n&&(!t.startTime||!t.endTime)&&n(_=>({..._,startTime:_.startTime||d.startTime,endTime:_.endTime||d.endTime}))},[]);const x=t!==void 0?t:c,v=n||m,{userRole:j}=Zs();g.useEffect(()=>{const _=async()=>{try{p([]);let A;x.relatedType1==="Lead"?A=await re.get("/leads/admin/getLeads"):x.relatedType1==="Account"&&(A=await re.get("/accounts/admin/fetch-all"));let T=[];if(A&&Array.isArray(A.data)&&(T=A.data),s&&x.relatedTo1)try{let E;x.relatedType1==="Lead"?E=await re.get(`/leads/get/${x.relatedTo1}`):x.relatedType1==="Account"&&(E=await re.get(`/accounts/get/${x.relatedTo1}`)),E&&E.data&&(T.some(z=>String(z.id)===String(x.relatedTo1))||(T=[E.data,...T]))}catch(E){console.error("Error fetching specific related item:",E)}p(T)}catch(A){console.error("Error fetching relatedTo1 data:",A),p([])}};x.relatedType1&&_()},[x.relatedType1,j,s,x.relatedTo1]),g.useEffect(()=>{const _=async()=>{try{if(w([]),x.relatedType1==="Account"&&x.relatedTo1){let A;x.relatedType2==="Contact"?A=await re.get(`/contacts/from-acc/${x.relatedTo1}`):x.relatedType2==="Deal"&&(A=await re.get(`/deals/from-acc/${x.relatedTo1}`)),A&&Array.isArray(A.data)?w(A.data):w([])}else w([])}catch(A){console.error("Error fetching relatedTo2 data:",A),w([])}};x.relatedType2&&_()},[x.relatedType2,x.relatedTo1,x.relatedType1]);const C=_=>{const{name:A,value:T}=_.target;v(E=>{const D={...E,[A]:T};return A==="relatedType1"&&(E.relatedType1!==T&&(D.relatedTo1=""),T==="Lead"?(D.relatedType2=null,D.relatedTo2=null,w([])):T==="Account"&&(D.relatedType2="Contact",D.relatedTo2="")),A==="relatedType2"&&E.relatedType2!==T&&(D.relatedTo2=""),D})},S=_=>{if(_.preventDefault(),x.status==="--"){Y.warn("Please select a valid status.");return}r?r(x):(console.log("Meeting Scheduled:",x),e())};return a.jsx("div",{id:"modalBackdrop",onClick:_=>_.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:S,children:[a.jsx(Fy,{label:"Subject",name:"subject",value:x.subject,onChange:C,placeholder:"e.g. Meeting with Client",required:!0,disabled:i,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType1",onChange:C,value:x.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400",disabled:i,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(o_,{items:Array.isArray(h)?h:[],disabled:i,value:x.relatedTo1??"",placeholder:`Search ${x.relatedType1||"here"}...`,getLabel:_=>x.relatedType1==="Lead"?_.title:_.name??"",onChange:_=>v(A=>({...A,relatedTo1:_}))})]}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("select",{name:"relatedType2",onChange:C,value:x.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded p-2 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||x.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(o_,{items:Array.isArray(b)?b:[],value:x.relatedTo2??"",placeholder:x.relatedType1==="Lead"?"":b?.length?`Search ${x.relatedType2}...`:`No ${x.relatedType2} data found`,getLabel:_=>x.relatedType2==="Contact"?`${_.first_name??""} ${_.last_name??""}`.trim():_.name??"",onChange:_=>v(A=>({...A,relatedTo2:_})),disabled:x.relatedType1==="Lead"})]}),a.jsx(Fy,{label:"Location",name:"location",className:"md:col-span-2",value:x.location,onChange:C,disabled:i}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(Fy,{label:"Start Time",name:"startTime",type:"datetime-local",value:x.startTime,onChange:C,required:!0,disabled:i}),a.jsx(Fy,{label:"End Time",name:"endTime",type:"datetime-local",value:x.endTime,onChange:C,required:!0,disabled:i})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(o_,{items:Array.isArray(l)?l:[],value:x.assignedTo??"",placeholder:"Search an account...",getLabel:_=>`${_.first_name} ${_.last_name}`,onChange:_=>v(A=>({...A,assignedTo:_})),disabled:j==="Sales"})]}),a.jsx(LOe,{label:"Status",name:"status",value:x.status,onChange:C,options:["--","Planned","Held","Not held"].map(_=>({value:_,label:_.replace("_"," ")})),disabled:i}),a.jsx(POe,{label:"Notes",name:"notes",value:x.notes,onChange:C,rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function Fy({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d=""}){return a.jsxs("div",{className:d,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function LOe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function POe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:d=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function o_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const Ic=({meeting:e,onClose:t,onEdit:n,onDelete:s,onStatusUpdate:r})=>{bt();const[i,l]=g.useState("Overview"),o=w=>{const x=(w||"").toUpperCase();return x==="PLANNED"||x==="IN PROGRESS"?"PLANNED":x==="HELD"||x==="DONE"?"HELD":x==="NOT HELD"?"NOT_HELD":"PLANNED"},d=w=>{const x=(w||"").toUpperCase();return x==="PLANNED"?"PLANNED":x==="HELD"?"HELD":x==="NOT HELD"||x==="NOT_HELD"?"NOT HELD":"PENDING"},[c,m]=g.useState(o(e?.status||"PENDING")),[h,p]=g.useState(!1);if(!e)return null;const b=w=>{const x=(w||"").toUpperCase(),v=x==="PLANNED"?"PENDING":x==="HELD"?"COMPLETED":x==="NOT_HELD"?"CANCELLED":x;switch(x){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(v){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),a.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${b(o(e.status))}`,children:o(e.status||"PENDING").replace("_"," ")})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{n&&n(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(w=>a.jsx("button",{onClick:()=>l(w),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${i===w?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:w},w))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[i==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Start Time:"}),a.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"End Time:"}),a.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),a.jsx("p",{children:e.subject||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Location:"}),a.jsx("p",{children:e.location||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Lead:"}),a.jsx("p",{children:e.lead.title})]}),e.account&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:e.account.name})]}),e.contact&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:e.deal.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:o(e.status||"PENDING").replace("_"," ")})]})]})}),i==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:c,onChange:w=>m(w.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const w=d(c);if(o(e.status)!==c){p(!0);try{await r(e.id,w)}catch(x){console.error("Failed to update status:",x)}finally{p(!1)}}},disabled:c===e.status||h,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${c===e.status||h?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:h?"Updating...":"Update"})]})]})]})]})})})},nQ=e=>e?e.toUpperCase():"",By=e=>{const t=nQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},DOe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},OOe=e=>{const t=nQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},c_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},W7=()=>{const e=bt(),t=pa(),[n]=Ss(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[o,d]=g.useState(!1),[c,m]=g.useState([]),[h,p]=g.useState(""),[b,w]=g.useState("Filter by Status"),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[A,T]=g.useState(10),[E,D]=g.useState(c_),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(!1),[ae,W]=g.useState(null),[q,le]=g.useState(!1),[Q,te]=g.useState([]);g.useEffect(()=>{const xe=t.state?.openMeetingModal,Ve=t.state?.initialMeetingData?.relatedTo||n.get("id");(xe||Ve)&&(v(!0),t.state?.initialMeetingData&&D(ke=>({...ke,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const V=async()=>{if(s&&r){const xe=sessionStorage.getItem("meetingDetailData");if(xe)try{const Ve=JSON.parse(xe);if(Ve.id===parseInt(s)){C(Ve),sessionStorage.removeItem("meetingDetailData");return}}catch(Ve){console.error(Ve)}}d(!0);try{const xe=await re.get("/meetings/admin/fetch-all"),ke=[...Array.isArray(xe.data)?xe.data:[]].sort((ye,Me)=>{const He=ye?.createdAt?new Date(ye.createdAt).getTime():0;return(Me?.createdAt?new Date(Me.createdAt).getTime():0)-He});if(l(ke),s&&!j){const ye=ke.find(Me=>Me.id===parseInt(s));ye&&C(ye)}console.log(xe.data)}catch{Y.error("Failed to load meetings.")}finally{d(!1)}},ee=async()=>{try{const xe=await re.get("/users/all");m(Array.isArray(xe.data)?xe.data:[])}catch(xe){console.error(xe)}};g.useEffect(()=>{V(),ee()},[]);const me=xe=>p(xe.target.value),we=xe=>{if(xe.target.checked){const Ve=be.map(ke=>ke.id);te(Ve)}else te([])},ve=xe=>{te(Ve=>Ve.includes(xe)?Ve.filter(ke=>ke!==xe):[...Ve,xe])},Ae=g.useMemo(()=>{const xe=h.trim().toLowerCase(),Ve=b.trim().toUpperCase();return i.filter(ke=>{const ye=[ke?.activity,ke?.description,ke?.relatedTo,ke?.assignedTo],Me=xe===""||ye.some(Be=>Be&&Be.toString().toLowerCase().includes(xe)),He=Ve==="FILTER BY STATUS"||By(ke.status||"PENDING")===Ve;return Me&&He})},[i,h,b]);g.useEffect(()=>{_(1)},[h,b,A]);const be=g.useMemo(()=>{const xe=(S-1)*A;return Ae.slice(xe,xe+A)},[Ae,S,A]),Ie=()=>{v(!1),D(c_),K(!1),O(null),H(!1)},G=()=>{D(c_),K(!1),O(null),v(!0)},Ce=xe=>{let Ve="";if(xe.meet_assign_to?.id)Ve=String(xe.meet_assign_to.id);else if(xe.assignedTo){const se=c.find(je=>`${je.first_name} ${je.last_name}`===xe.assignedTo);Ve=se?String(se.id):""}const ke=se=>{if(!se)return"";try{const je=new Date(se),We=je.getTimezoneOffset()*6e4;return new Date(je.getTime()-We).toISOString().slice(0,16)}catch{return""}};let ye="Lead",Me="",He="Contact",Be="";if(xe.lead)ye="Lead",Me=String(xe.lead.id);else if(xe.account)ye="Account",Me=String(xe.account.id),xe.contact?(He="Contact",Be=String(xe.contact.id)):xe.deal&&(He="Deal",Be=String(xe.deal.id));else if(xe.relatedType||xe.related_type){const se=xe.relatedType||xe.related_type,je=xe.related_to||xe.relatedToId;se==="Lead"?(ye="Lead",Me=String(je)):(ye="Account",Me=xe.account_id?String(xe.account_id):"")}const dt={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},M=By(xe.status),pe=dt[M]||"Planned";D({subject:xe.subject||xe.activity||"",location:xe.location||"",startTime:ke(xe.start_time||xe.startTime),endTime:ke(xe.end_time||xe.endTime),status:pe,notes:xe.description||xe.notes||"",assignedTo:Ve,relatedType1:ye,relatedTo1:Me,relatedType2:He,relatedTo2:Be}),K(!0),O(xe.id),C(null),v(!0)},ce=xe=>{if(!xe.subject?.trim())return Y.error("Subject is required.");if(!xe.startTime)return Y.error("Start time is required.");if(xe.endTime&&!(new Date(xe.endTime)-new Date(xe.startTime)>0))return Y.error("End time must be after start time.");xe.relatedType1,xe.relatedTo1,xe.relatedType1==="Account"&&xe.relatedType2&&xe.relatedTo2&&(xe.relatedType2,xe.relatedTo2);const Ve={...xe,assignedTo:parseInt(xe.assignedTo),relatedTo1:parseInt(xe.relatedTo1),relatedTo2:parseInt(xe.relatedTo2)},ke=z&&B?"update":"create";W({title:ke==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ke} "${Ve.subject}"?`,confirmLabel:ke==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ke,payload:Ve,targetId:B,name:Ve.subject}})},F=async()=>{if(!ae?.action)return;const{type:xe,payload:Ve,targetId:ke,name:ye}=ae.action;console.log(Ve),le(!0);try{if(xe==="create")H(!0),await re.post("/meetings/create",Ve),Y.success(`Meeting "${ye}" created.`),Ie(),await V();else if(xe==="update")H(!0),await re.put(`/meetings/${ke}`,Ve),Y.success(`Meeting "${ye}" updated.`),Ie(),await V();else if(xe==="delete")await re.delete(`/meetings/${ke}`),Y.success(`Meeting "${ye}" deleted.`),j?.id===ke&&C(null),await V();else if(xe==="bulk-delete"){const{meeting_ids:Me}=ae.action;await re.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:Me}}),Y.success(`${Me.length} meetings deleted.`),te([]),await V()}}catch(Me){const He=Me.response?.data?.detail||"Action failed.";Y.error(typeof He=="string"?He:JSON.stringify(He)),console.error(He)}finally{H(!1),le(!1),W(null)}},ie=async()=>{Q.length!==0&&W({title:"Bulk Delete Meetings",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:Q.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${Q.length} Meetings`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:Q}})},he=xe=>{W({title:"Delete Meeting",message:`Permanently delete "${xe.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:xe.id,name:xe.activity}})},Le=async(xe,Ve)=>{try{await re.put(`/meetings/${xe}`,{status:Ve}),Y.success("Status updated"),V(),C(null)}catch{Y.error("Failed to update status")}};return r&&s?j?a.jsx(Ic,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:Ce,onDelete:he,onStatusUpdate:Le}):a.jsx(It,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(It,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Nt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:G,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(na,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:me,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:xe=>w(xe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:be.length>0&&Q.length===be.length,onChange:we,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Q.length>0?a.jsx("button",{onClick:ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Q.length} selected items`,children:a.jsx(Ot,{size:18})}):a.jsx("span",{className:"text-gray-400",children:"Actions"})})]})}),a.jsx("tbody",{children:be.length>0?be.map(xe=>a.jsxs("tr",{onClick:()=>C(xe),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Ve=>Ve.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:Q.includes(xe.id),onChange:()=>ve(xe.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:xe.subject}),a.jsxs("td",{className:"py-3 px-4",children:[xe.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:xe.lead.title}),xe.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:xe.account.name}),xe.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[xe.contact.first_name," ",xe.contact.last_name]}),xe.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:xe.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:DOe(xe.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[xe.meet_assign_to.first_name," ",xe.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${OOe(By(xe.status))}`,children:By(xe.status).replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},xe.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Vt,{totalItems:Ae.length,pageSize:A,currentPage:S,onPrev:()=>_(xe=>Math.max(1,xe-1)),onNext:()=>_(xe=>Math.min(xe+1,Math.ceil(Ae.length/A)||1)),onPageSizeChange:T,label:"meetings"}),x&&a.jsx(xj,{onClose:Ie,formData:E,setFormData:D,isEditing:z,onSubmit:ce,isSubmitting:L||q,users:c}),j&&a.jsx(Ic,{meeting:j,onClose:()=>C(null),onEdit:Ce,onDelete:he,onStatusUpdate:Le}),ae&&a.jsx(MOe,{open:!0,title:ae.title,message:ae.message,confirmLabel:ae.confirmLabel,variant:ae.variant,onConfirm:F,onCancel:()=>W(null),loading:q})]})};function MOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${c}`,children:l?"...":s})]})]})})}function IOe(){const{user:e,mutate:t}=Xt(),[n,s]=g.useState(""),[r,i]=g.useState(!1),[l,o]=g.useState({type:"",text:""});g.useEffect(()=>{e?.company?.company_name&&s(e.company.company_name)},[e]);const d=async m=>{m.preventDefault(),i(!0),o({type:"",text:""});try{await re.put("/company/update-name",{company_name:n}),t&&await t(),o({type:"success",text:"Company name updated successfully!"})}catch(h){console.error("Update error:",h);const p=h.response?.data?.detail||"Failed to update company details.";o({type:"error",text:p})}finally{i(!1)}},c=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return a.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[a.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[a.jsx(Yt,{})," Company Details"]}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's global identity"})]}),a.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[!c&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[a.jsx(Ef,{}),a.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),a.jsx("input",{type:"text",value:n,onChange:m=>s(m.target.value),disabled:!c||r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),l.text&&a.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${l.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:l.text}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:c&&a.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[a.jsx(QE,{}),r?"Updating...":"Save Changes"]})})]})]})}function $Oe({toggleSidebar:e}){const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState(0),c=g.useRef(null),m=g.useRef(null),h=pa(),p=bt(),{logout:b}=Zs(),{user:w,fetchUser:x}=Xt(),j={"/sales/overview":"Overview","/sales/hub":"Sales Hub","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[h.pathname]||"Sales Panel";g.useEffect(()=>{x()},[]);const C=T=>{const E=String(T.action||T.type||"").toLowerCase(),D=String(T.title||T.description||"").toLowerCase(),z=E.includes("create"),K=E.includes("update");return D.includes("task")?"task_assignment":D.includes("territory")?"territory_assignment":D.includes("lead")?z?"lead_assignment":"lead_update":D.includes("contact")?z?"contact_assignment":"contact_update":D.includes("deal")?z?"deal_assignment":"deal_update":D.includes("account")?z?"account_assignment":"account_update":"info"},S=T=>{const E={...T};switch(E.read=!!E.read,E.type){case"territory_assignment":E.title=E.title||`You have been assigned to ${E.territoryName||"a territory"}`;break;case"lead_assigned":E.type="lead_assignment",E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_assignment":E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_update":E.title=E.title||`Lead updated: ${E.leadName||E.company||"Lead"}`;break;case"task_assignment":E.title=E.title||`New Task Assigned: ${E.taskTitle||"Task"}`;break;case"contact_assignment":E.title=E.title||`New contact assigned: ${E.contactName||E.contact||"Contact"}`;break;case"contact_update":E.title=E.title||`Contact updated: ${E.contactName||E.contact||"Contact"}`;break;case"deal_assignment":E.title=E.title||`New deal assigned: ${E.dealName||E.name||"Deal"}`;break;case"deal_update":E.title=E.title||`Deal updated: ${E.dealName||E.name||"Deal"}`;break;case"account_assignment":E.title=E.title||`New account assigned: ${E.accountName||E.name||"Account"}`;break;case"account_update":E.title=E.title||`Account updated: ${E.accountName||E.name||"Account"}`;break;default:E.title=E.title||"New Notification"}return E},_=T=>{switch(T.type){case"task_assignment":p(`/sales/hub/${T.taskId||T.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${T.leadId||T.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${T.contactId||T.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${T.dealId||T.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${T.accountId||T.account_id||""}`);break;default:p("/sales/overview")}},A=async T=>{if(T.read){_(T);return}try{await re.patch(`/logs/mark-read/${T.id}`),l(E=>E.map(D=>D.id===T.id?{...D,read:!0}:D)),d(E=>E>0?E-1:0),_(T)}catch(E){console.error("Failed to mark notification as read",E),_(T)}};return g.useEffect(()=>{if(!w?.id)return;const T=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",E=window.location.protocol==="https:"?"wss:":"ws:",D=T?"localhost:8000":window.location.host,z=`${E}//${D}/ws/notifications?user_id=${w.id}`,K=new WebSocket(z);return K.onopen=()=>console.log("WS Connected to:",z),K.onmessage=B=>{const O=JSON.parse(B.data),L=S(O);l(H=>[L,...H]),d(H=>H+1)},K.onclose=()=>console.log("WS Disconnected"),K.onerror=B=>console.error("WS Error",B),()=>K.close()},[w?.id]),g.useEffect(()=>{const T=async()=>{try{const D=((await re.get("/logs/read-all")).data||[]).map(z=>S({id:z.id,type:z.notif_type||z.notification_type||z.type||C(z),title:z.title||z.description,assignedBy:z.assignedBy||z.name,createdAt:z.createdAt||z.timestamp,read:z.is_read??z.read??!1,leadId:z.leadId||z.lead_id,taskId:z.taskId||z.task_id,contactId:z.contactId||z.contact_id,dealId:z.dealId||z.deal_id,accountId:z.accountId||z.account_id}));l(D),d(D.filter(z=>!z.read).length)}catch(E){console.error("Failed to load history notifications",E)}};w?.id&&T()},[w?.id]),g.useEffect(()=>{function T(E){c.current&&!c.current.contains(E.target)&&n(!1),m.current&&!m.current.contains(E.target)&&r(!1)}return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Wp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Gp,{className:"text-xl sm:text-2xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&a.jsx("button",{onClick:()=>{l([]),d(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((T,E)=>a.jsxs("div",{onClick:()=>A(T),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${T.read?"bg-gray-50":"bg-white"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${T.type==="task_assignment"?"bg-purple-100 text-purple-700":T.type==="lead_assignment"||T.type==="lead_update"?"bg-green-100 text-green-700":T.type==="contact_assignment"||T.type==="contact_update"?"bg-amber-100 text-amber-700":T.type==="deal_assignment"||T.type==="deal_update"?"bg-indigo-100 text-indigo-700":T.type==="account_assignment"||T.type==="account_update"?"bg-cyan-100 text-cyan-700":T.type==="territory_assignment"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:T.type==="task_assignment"?"Task":T.type==="lead_assignment"?"Lead":T.type==="lead_update"?"Lead Update":T.type==="contact_assignment"?"Contact":T.type==="contact_update"?"Contact Update":T.type==="deal_assignment"?"Deal":T.type==="deal_update"?"Deal Update":T.type==="account_assignment"?"Account":T.type==="account_update"?"Account Update":T.type==="territory_assignment"?"Territory":"Info"}),!T.read&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-800 text-sm",children:T.title}),a.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:T.assignedBy?`Assigned by ${T.assignedBy}`:"System"}),a.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:T.createdAt?new Date(T.createdAt).toLocaleString():""})]})]},T.id??E)):a.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:c,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[w?.first_name," ",w?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[w?.first_name," ",w?.middle_name," ",w?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]})]}),a.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[a.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),n(!1)},children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function ROe(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),{user:r}=Xt();g.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const i="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",l="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(St,{to:"/sales/overview",className:({isActive:o})=>o?i:l,children:[a.jsx(Vp,{className:"text-lg"}),a.jsx("span",{children:"Overview"})]}),a.jsxs(St,{to:"/sales/hub",className:({isActive:o})=>o?i:l,children:[a.jsx(Sne,{className:"text-lg"}),a.jsx("span",{children:"Sales Hub"})]}),a.jsxs(St,{to:"/sales/accounts",className:({isActive:o})=>o?i:l,children:[a.jsx(ba,{className:"text-lg"}),a.jsx("span",{children:"Accounts"})]}),a.jsxs(St,{to:"/sales/contacts",className:({isActive:o})=>o?i:l,children:[a.jsx(Ut,{className:"text-lg"}),a.jsx("span",{children:"Contacts"})]}),a.jsxs(St,{to:"/sales/leads",className:({isActive:o})=>o?i:l,children:[a.jsx(Ga,{className:"text-lg"}),a.jsx("span",{children:"Leads"})]}),a.jsxs(St,{to:"/sales/deals",className:({isActive:o})=>o?i:l,children:[a.jsx(Yt,{className:"text-lg"}),a.jsx("span",{children:"Deals"})]}),a.jsxs(St,{to:"/sales/quotes",className:({isActive:o})=>o?i:l,children:[a.jsx(da,{className:"text-lg"}),a.jsx("span",{children:"Quotes"})]}),a.jsxs(St,{to:"/sales/targets",className:({isActive:o})=>o?i:l,children:[a.jsx(Nr,{className:"text-lg"}),a.jsx("span",{children:"Targets"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"text-lg"}),"Activity"]}),a.jsx(wt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/sales/tasks",className:({isActive:o})=>o?i:l,children:[a.jsx(zt,{})," Tasks"]}),a.jsxs(St,{to:"/sales/meetings",className:({isActive:o})=>o?i:l,children:[a.jsx(Nt,{})," Meetings"]}),a.jsxs(St,{to:"/sales/calls",className:({isActive:o})=>o?i:l,children:[a.jsx(js,{})," Calls"]}),a.jsxs(St,{to:"/sales/audit",className:({isActive:o})=>o?i:l,children:[a.jsx(Ns,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(St,{to:"/sales/territory",className:({isActive:o})=>o?i:l,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zc,{className:"text-lg"}),"Territory"]})})}),a.jsxs(St,{to:"/sales/manage-account",className:({isActive:o})=>o?i:l,children:[a.jsx(Ut,{className:"text-lg"}),a.jsx("span",{children:"Manage Account"})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx($Oe,{toggleSidebar:()=>t(!0)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(_f,{})})]})]})}function zOe(){g.useEffect(()=>{document.title="SalesOverview | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[n,s]=g.useState({contacts:0,leads:0,calls_today:0,target_progress:0}),[r,i]=g.useState([]);return g.useEffect(()=>{(async()=>{try{const o=await re.get("/sales/overview");s(o.data)}catch(o){console.error("Error fetching sales overview:",o)}})()},[]),g.useEffect(()=>{(async()=>{if(e)try{const o=await re.get("/territories/myterritory");i(o.data)}catch(o){console.error("Error fetching territories:",o)}})()},[e]),t?a.jsx("p",{className:"text-gray-500",children:"Loading user data..."}):a.jsxs("div",{className:"space-y-10",children:[a.jsxs("div",{className:"flex items-center mb-8",children:[a.jsx(Ut,{className:"text-2xl text-gray-700 mr-2"}),a.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"SALES Dashboard"})]}),a.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),a.jsxs("p",{className:"font-medium text-gray-900",children:[e?.first_name," ",e?.last_name]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Last Login"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-gray-600"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.last_login?new Date(e.last_login).toLocaleString("en-PH",{timeZone:"Asia/Manila",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"N/A"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Date Joined"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),a.jsx("p",{className:"font-medium text-gray-900",children:e?.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Territories"}),a.jsx("div",{className:"flex flex-col gap-2",children:r.length>0?r.map(l=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ane,{className:"text-gray-600"}),a.jsx("p",{className:"font-medium text-gray-900",children:l.name})]},l.id)):a.jsx("p",{className:"font-medium text-gray-900",children:"No territories assigned"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),a.jsx("span",{className:"bg-black text-white text-xs font-semibold px-3 py-1 rounded-full",children:e?.is_active?"Active":"Inactive"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(ba,{className:"text-blue-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Contacts"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.contacts??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(Nr,{className:"text-green-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Leads"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.leads??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(js,{className:"text-orange-500 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Calls Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.calls_today??0})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col items-center",children:[a.jsx(Zr,{className:"text-purple-600 text-3xl mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:"My Target Progress"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[n.target_progress??0,"%"]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Recent Activities"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-800 font-medium",children:"Deal moved to negotiation: TechStart Inc."}),a.jsx("p",{className:"text-sm text-gray-500",children:"1 hour ago"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-800 font-medium",children:"Follow-up call scheduled with Global Solutions"}),a.jsx("p",{className:"text-sm text-gray-500",children:"3 hours ago"})]})]})]})]})]})}function UOe({isOpen:e,onClose:t}){const[n,s]=g.useState(""),[r,i]=g.useState("Call"),[l,o]=g.useState("Medium"),[d,c]=g.useState(""),[m,h]=g.useState("Lead"),[p,b]=g.useState(""),[w,x]=g.useState(""),v=j=>{j.preventDefault(),console.log({title:n,type:r,priority:l,dueDate:d,relatedTo:m,description:p,notes:w}),t()};return a.jsx(ps,{appear:!0,show:e,as:g.Fragment,children:a.jsxs(Ql,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-6 lg:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:t,"aria-label":"Close modal",className:"absolute top-3 right-3 p-2 text-2xl leading-none rounded-full text-gray-500 hover:text-black hover:bg-gray-100 transition",children:""}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:"Create New Task"}),a.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title *"}),a.jsx("input",{type:"text",value:n,onChange:j=>s(j.target.value),required:!0,placeholder:"Enter task title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{value:p,onChange:j=>b(j.target.value),placeholder:"Optional details about the task",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Type"}),a.jsxs("select",{value:r,onChange:j=>i(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Call"}),a.jsx("option",{children:"Email"}),a.jsx("option",{children:"Meeting"}),a.jsx("option",{children:"Follow-up"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{value:l,onChange:j=>o(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Low"}),a.jsx("option",{children:"Medium"}),a.jsx("option",{children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date *"}),a.jsx("input",{type:"datetime-local",value:d,onChange:j=>c(j.target.value),required:!0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Related To"}),a.jsxs("select",{value:m,onChange:j=>h(j.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{children:"Lead"}),a.jsx("option",{children:"Account"}),a.jsx("option",{children:"Deal"}),a.jsx("option",{children:"Contact"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{value:w,onChange:j=>x(j.target.value),placeholder:"Add any internal notes or comments",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",rows:3})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:t,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:"Create Task"})]})]})]})})})]})})}function FOe(){const[e,t]=g.useState(!1);return a.jsxs("div",{className:"p-6 min-h-screen hide-scrollbar",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(Nr,{className:"text-blue-600"})," Sales Dashboard"]}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your leads, tasks, and sales activities"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>t(!0),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[a.jsx(na,{className:"text-lg"})," New Task"]}),a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base ml-auto sm:ml-0 cursor-pointer",children:[a.jsx(Zr,{className:"text-lg"})," Log Activity"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-blue-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Target Progress"}),a.jsx("h2",{className:"text-2xl font-bold",children:"0%"}),a.jsx("div",{className:"mt-2 w-full bg-gray-200 h-2 rounded-full",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full w-0"})})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-green-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Revenue (Won)"}),a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-1",children:[a.jsx(wu,{})," 0"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"0 won deals"})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-purple-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Active Deals"}),a.jsx("h2",{className:"text-2xl font-bold",children:"2"}),a.jsx("p",{className:"text-sm text-gray-400",children:"2 leads in pipeline"})]}),a.jsxs("div",{className:"p-4 bg-white rounded-xl shadow-md border-l-4 border-orange-500",children:[a.jsx("p",{className:"text-gray-500 text-sm mb-2",children:"Tasks Today"}),a.jsx("h2",{className:"text-2xl font-bold",children:"0"}),a.jsx("p",{className:"text-sm text-gray-400",children:"1 pending task"})]})]}),a.jsxs("div",{className:"flex space-x-3 mb-6",children:[a.jsx(St,{to:"/sales/hub/mytasks",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Tasks"}),a.jsx(St,{to:"/sales/hub/activities",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Activities"}),a.jsx(St,{to:"/sales/hub/pipeline",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"My Pipeline"}),a.jsx(St,{to:"/sales/hub/performance",className:({isActive:n})=>`px-4 py-2 rounded-full text-sm font-medium ${n?"bg-tertiary text-white":"text-gray-600 hover:bg-gray-100"}`,children:"Performance"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:a.jsx(_f,{})}),a.jsx(UOe,{isOpen:e,onClose:()=>t(!1)})]})}function BOe(){const e=[{id:1,type:"call",title:"Discovery call with Acme Corp",status:"COMPLETED",description:"Discussed requirements and pain points",outcome:"Positive - moving to proposal stage",duration:"30 min",date:"10/12/2025",account:"Acme Enterprise License"},{id:2,type:"email",title:"Pricing information request",status:"COMPLETED",description:"Sent detailed pricing breakdown for enterprise package",date:"10/12/2025",contact:"Emma Wilson"}];return a.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 min-h-[80vh] p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2 text-gray-800",children:[a.jsx("span",{className:"text-purple-600",children:""})," Sales Activities"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",children:[a.jsx(Cne,{className:"text-gray-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"All Time "})]})]}),a.jsx("div",{className:"space-y-4",children:e.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-gray-100 flex flex-col gap-3 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[t.type==="call"?a.jsx(jt,{className:"text-green-600 text-xl"}):a.jsx(Ha,{className:"text-green-600 text-xl"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[t.title,a.jsx("span",{className:"text-xs bg-green-100 text-green-700 font-medium px-2 py-0.5 rounded-full",children:t.status})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]})]}),a.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[a.jsx("button",{className:"hover:text-blue-600",children:a.jsx(Ma,{})}),a.jsx("button",{className:"hover:text-red-600",children:a.jsx(Ot,{})})]})]}),t.outcome&&a.jsxs("div",{className:"bg-green-50 border border-green-100 text-green-700 text-sm px-4 py-2 rounded-lg flex items-center gap-2",children:[" Outcome: ",t.outcome]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500",children:[t.duration&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.duration]}),a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.date]}),t.account&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.account]}),t.contact&&a.jsxs("p",{className:"flex items-center gap-1",children:[" ",t.contact]})]})]},t.id))})]})}function HOe(){g.useEffect(()=>{document.title="Saleshub | Sari-Sari CRM"},[]);const[e,t]=g.useState([]),[n,s]=g.useState([]),[r,i]=g.useState([]),[l,o]=g.useState(null),[d,c]=g.useState({title:"",description:"",type:"Call",priority:"MEDIUM",status:"To Do",dueDate:"",assignedTo:"",relatedTo:"",notes:""}),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState("All Tasks"),[C,S]=g.useState(!1),_=new Date,A=W=>W.dueDate&&new Date(W.dueDate)<_&&W.status!=="Completed",T=async()=>{try{const q=(await re.get("/tasks/assigned")).data.sort((le,Q)=>{const te=new Date(le.dueDate||le.dateAssigned);return new Date(Q.dueDate||Q.dateAssigned)-te});t(q),s(q)}catch(W){console.error("Error fetching tasks:",W)}},E=async()=>{try{const W=await re.get("/sales");i(W.data)}catch(W){console.error("Error fetching sales list:",W)}};g.useEffect(()=>{T(),E()},[]);const D=W=>{if(j(W),W==="All Tasks")s(e);else{const q=e.filter(le=>le.status===W);s(q)}S(!1)},z=W=>{o(W),c({title:W.title||"",description:W.description||"",type:W.type||"Call",priority:W.priority||"MEDIUM",status:W.status||"To Do",dueDate:W.dueDate||"",assignedTo:W.assignedTo||"",relatedTo:W.relatedTo||"",notes:W.notes||""})},K=W=>{c({...d,[W.target.name]:W.target.value})},B=W=>{W.preventDefault(),x(!0)},O=async()=>{try{await re.put(`/tasks/${l.id}`,d),T(),o(null),x(!1)}catch(W){console.error("Error updating task:",W)}},L=async()=>{try{await re.delete(`/tasks/${p.id}`),T(),h(!1),b(null)}catch(W){console.error("Error deleting task:",W)}},H={HIGH:"bg-orange-100 text-orange-700",MEDIUM:"bg-yellow-100 text-yellow-700",LOW:"bg-green-100 text-green-700"},ae=["All Tasks","To Do","In Progress","Completed"];return a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 min-h-[80vh] p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2 text-blue-700",children:[a.jsx(ds,{className:"text-blue-600"})," My Tasks & Follow-ups"]}),a.jsxs("div",{className:"relative w-full max-w-3xs",children:[a.jsx("div",{className:"flex items-center w-full gap-2 bg-white shadow-sm border rounded-lg px-3 py-2 cursor-pointer hover:bg-gray-50",onClick:()=>S(!C),children:a.jsxs("span",{className:"text-sm text-gray-700",children:[v," "]})}),C&&a.jsx("div",{className:"absolute mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-md z-10",children:ae.map(W=>a.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 w-full cursor-pointer text-sm text-gray-700",onClick:()=>D(W),children:W},W))})]})]}),a.jsx("div",{className:"space-y-4",children:Array.isArray(n)&&n.length>0?n.map(W=>a.jsxs("div",{className:`rounded-xl shadow-sm p-5 flex flex-col gap-3 hover:shadow-md transition
                ${A(W)?"bg-red-50 border border-red-200":"bg-white border border-gray-100"}`,children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jt,{className:"text-blue-600 text-xl"}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[W.title,a.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${A(W)?"bg-red-100 text-red-700":H[W.priority]}`,children:W.priority})]}),a.jsx("p",{className:"text-gray-600 text-sm",children:W.description})]})]}),a.jsxs("div",{className:"flex gap-3 text-lg text-gray-500",children:[a.jsx("button",{className:"hover:text-blue-600",onClick:()=>z(W),children:a.jsx(Ma,{})}),a.jsx("button",{className:"hover:text-red-600",onClick:()=>{b(W),h(!0)},children:a.jsx(Ot,{})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[a.jsxs("p",{className:`flex items-center gap-1 ${A(W)?"text-red-600 font-medium":"text-gray-500"}`,children:[" ",W.dueDate?.split("T")[0]]}),a.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",W.assignedTo]}),a.jsxs("p",{className:"text-gray-500 flex items-center gap-1",children:[" ",W.type]})]})]},W.id)):a.jsx("p",{className:"text-gray-500 text-sm text-center",children:"No tasks assigned yet."})}),a.jsx(ps,{appear:!0,show:!!l,as:g.Fragment,children:a.jsxs(Ql,{as:"div",className:"relative z-50",onClose:()=>o(null),children:[a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ql.Panel,{className:"w-full max-w-xl rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-left align-middle transform transition-all max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-4",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Task"})}),a.jsx("button",{onClick:()=>o(null),"aria-label":"Close modal",className:"text-gray-400 hover:text-gray-600 transition text-xl leading-none",children:""})]}),a.jsxs("form",{onSubmit:B,className:"space-y-5 overflow-y-auto pr-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Title *"}),a.jsx("input",{type:"text",name:"title",value:d.title,onChange:K,required:!0,placeholder:"Enter task title",className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{name:"description",value:d.description,onChange:K,placeholder:"Enter task description",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Type"}),a.jsxs("select",{name:"type",value:d.type,onChange:K,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"Call"}),a.jsx("option",{children:"Meeting"}),a.jsx("option",{children:"Email"}),a.jsx("option",{children:"Follow-up"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Priority"}),a.jsxs("select",{name:"priority",value:d.priority,onChange:K,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"Low"}),a.jsx("option",{children:"Medium"}),a.jsx("option",{children:"High"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),a.jsxs("select",{name:"status",value:d.status,onChange:K,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{children:"To Do"}),a.jsx("option",{children:"In Progress"}),a.jsx("option",{children:"Completed"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Due Date *"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:d.dueDate,onChange:K,required:!0,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",value:d.assignedTo,onChange:K,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select sales representative"}),r.map(W=>a.jsxs("option",{value:W.id,children:[W.first_name," ",W.last_name]},W.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Related To"}),a.jsxs("select",{name:"relatedTo",value:d.relatedTo,onChange:K,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select type"}),a.jsx("option",{children:"Lead"}),a.jsx("option",{children:"Opportunity"}),a.jsx("option",{children:"Customer"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Notes"}),a.jsx("textarea",{name:"notes",value:d.notes,onChange:K,placeholder:"Additional notes...",rows:2,className:"w-full mt-1 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t mt-6",children:[a.jsx("button",{type:"button",onClick:()=>o(null),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 focus:ring-2 focus:ring-blue-400 transition",children:"Update Task"})]})]})]})})})})]})}),a.jsx(ps,{appear:!0,show:w,as:g.Fragment,children:a.jsxs(Ql,{as:"div",className:"relative z-50",onClose:()=>x(!1),children:[a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ql.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Confirm Update"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Are you sure you want to update this task?"}),a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{onClick:O,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition",children:"Confirm"})]})]})})})]})}),a.jsx(ps,{appear:!0,show:m,as:g.Fragment,children:a.jsxs(Ql,{as:"div",className:"relative z-50",onClose:()=>h(!1),children:[a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:a.jsx(ps.Child,{as:g.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(Ql.Panel,{className:"w-full max-w-sm rounded-2xl bg-white shadow-2xl ring-1 ring-gray-100 p-6 text-center transform transition-all",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Delete Task"}),a.jsxs("p",{className:"text-gray-600 text-sm mb-6",children:["Are you sure you want to delete this task? ",a.jsx("br",{}),"This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition",children:"Cancel"}),a.jsx("button",{onClick:L,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition",children:"Delete"})]})]})})})]})})]})}function GOe(){return a.jsx("div",{className:"p-6 bg-gradient-to-b from-blue-50 to-white rounded-2xl",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-green-50 border border-green-100 rounded-2xl shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-green-100",children:[a.jsxs("h2",{className:"text-green-700 font-semibold flex items-center gap-2",children:[a.jsx(ba,{})," My Leads"]}),a.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Emma Wilson"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Startup Ventures"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(ds,{})," 1/20/2024"]})]}),a.jsx("div",{className:"mt-3",children:a.jsx("span",{className:"text-xs font-medium bg-green-100 text-green-700 px-3 py-1 rounded-md",children:"QUALIFIED"})})]}),a.jsxs("div",{className:"bg-white border border-green-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Robert Davis"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Manufacturing Plus"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(ds,{})," 1/25/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"NEW"}),a.jsx("button",{className:"bg-green-600 text-white text-xs px-3 py-1 rounded-lg hover:bg-green-700 transition",children:"Contact"})]})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-100 rounded-2xl shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-yellow-100",children:[a.jsxs("h2",{className:"text-yellow-700 font-semibold flex items-center gap-2",children:[a.jsx(wu,{})," My Deals"]}),a.jsx("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-2 py-1 rounded-full font-medium",children:"2"})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"Acme Enterprise License"}),a.jsx("p",{className:"text-sm text-gray-500",children:"$150,000"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(ds,{})," 3/15/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-orange-100 text-orange-700 px-3 py-1 rounded-md",children:"NEGOTIATION"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-[75%] h-2 bg-gray-900 rounded-full"})}),a.jsx("span",{className:"text-xs text-gray-700",children:"75%"})]})]})]}),a.jsxs("div",{className:"bg-white border border-yellow-100 rounded-xl p-4 hover:shadow-md transition",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:"TechStart Cloud Migration"}),a.jsx("p",{className:"text-sm text-gray-500",children:"$75,000"})]}),a.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1",children:[a.jsx(ds,{})," 2/28/2024"]})]}),a.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-medium bg-blue-50 text-blue-700 px-3 py-1 rounded-md",children:"PROPOSAL"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-[60%] h-2 bg-gray-900 rounded-full"})}),a.jsx("span",{className:"text-xs text-gray-700",children:"60%"})]})]})]})]})]})]})})}function VOe(){return a.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[a.jsx(nu,{})," Sales Performance"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ba,{className:"text-gray-400"})," Total Leads"]}),a.jsx("span",{className:"font-semibold",children:"2"})]}),a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(en,{})," Qualified Leads"]}),a.jsx("span",{className:"font-semibold",children:"1"})]}),a.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nu,{})," Active Deals"]}),a.jsx("span",{className:"font-semibold",children:"2"})]}),a.jsxs("div",{className:"flex justify-between items-center text-yellow-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wu,{})," Won Deals"]}),a.jsx("span",{className:"font-semibold",children:"0"})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-xl flex justify-between items-center font-semibold text-green-700",children:[a.jsx("span",{children:"Total Revenue"}),a.jsx("span",{children:"$0"})]})]}),a.jsxs("div",{className:"bg-orange-50 border border-orange-100 rounded-2xl shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-700 flex items-center gap-2",children:[a.jsx(en,{})," Task Completion"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[a.jsx("span",{children:"Completed Tasks"}),a.jsx("span",{className:"font-semibold",children:"0"})]}),a.jsxs("div",{className:"flex justify-between items-center text-orange-600",children:[a.jsx("span",{children:"Pending Tasks"}),a.jsx("span",{className:"font-semibold",children:"1"})]}),a.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[a.jsx("span",{children:"Tasks Today"}),a.jsx("span",{className:"font-semibold",children:"0"})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between mb-1 text-sm font-medium text-orange-600",children:[a.jsx("span",{children:"Completion Rate"}),a.jsx("span",{children:"0%"})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full",children:a.jsx("div",{className:"w-0 h-3 bg-orange-500 rounded-full"})})]})]})]})}const d_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],u_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},hr=e=>e?e.toUpperCase():"",m_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",WOe=e=>{switch(hr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},qOe=e=>{switch(hr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},md=10;function YOe(){const e=bt(),{user:t}=Xt(),n=t?.role==="Sales";g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(!1),[c,m]=g.useState(null),[h,p]=g.useState(null),[b,w]=g.useState(u_),[x,v]=g.useState(null),[j,C]=g.useState([]),[S,_]=g.useState(!1),[A,T]=g.useState([]),[E,D]=g.useState(null),[z,K]=g.useState([]),[B,O]=g.useState([]),[L,H]=g.useState("Filter by Status"),[ae,W]=g.useState(""),[q,le]=g.useState(null),[Q,te]=g.useState(!1),[V,ee]=g.useState(1),[me,we]=g.useState("Overview"),[ve,Ae]=g.useState(""),[be,Ie]=g.useState(!1),[G,Ce]=g.useState({}),[ce,F]=g.useState(null);g.useEffect(()=>{s&&!i&&n&&t&&!b.assigned_to&&w(oe=>({...oe,assigned_to:t.id}))},[s,i,n,t,b.assigned_to]);const ie=g.useCallback(async(oe=null)=>{_(!0);try{const Oe=await re.get("/accounts/admin/fetch-all"),nt=[...Array.isArray(Oe.data)?Oe.data:[]].sort((ht,_e)=>{const gt=ht?.created_at||ht?.updated_at||0,Wt=_e?.created_at||_e?.updated_at||0;return new Date(Wt)-new Date(gt)});if(C(nt),console.log("Fetch from backend: ",Oe.data),oe){const ht=nt.find(_e=>_e.id===oe);v(ht||null)}}catch(Oe){console.error(Oe),C([]),Oe.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch accounts. Please try again later.")}finally{_(!1)}},[v]),he=g.useCallback(async()=>{try{const oe=await re.get("/users/all");T(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Le=g.useCallback(async()=>{try{const oe=await re.get("/territories/fetch");K(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&Y.warn("Unable to load territories (permission denied).")}},[]),xe=g.useCallback(async()=>{try{const oe=await re.get("/accounts/admin/parent-companies");O(Array.isArray(oe.data)?oe.data:[])}catch(oe){console.error(oe),oe.response?.status===403&&Y.warn("Unable to load parent companies (permission denied).")}},[]),Ve=g.useCallback(async oe=>{try{const Oe=await re.get(`/activities/accounts/${oe}`);console.log("Related activities: ",Oe.data),Ce(Oe.data&&typeof Oe.data=="object"?Oe.data:{})}catch(Oe){console.error(Oe),Oe.response?.status===404&&(console.warn("No activities found for this account."),Ce({}))}},[]);g.useEffect(()=>{ie(),he(),Le(),xe()},[ie,he,Le,xe]),g.useEffect(()=>{x&&Ae(hr(x.status)||"PROSPECT")},[x]);const ke=j.length,ye=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="customer").length,[j]),Me=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="prospect").length,[j]),He=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="partner").length,[j]),Be=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="active").length,[j]),dt=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="inactive").length,[j]),M=g.useMemo(()=>j.filter(oe=>oe.status?.toLowerCase()==="former").length,[j]),pe=g.useMemo(()=>[{title:"Total",value:ke,icon:ba,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:ye,icon:dl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Me,icon:Ga,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:He,icon:Ut,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Be,icon:dl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:dt,icon:ul,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:M,icon:ul,color:"text-orange-600",bgColor:"bg-orange-100"}],[ke,ye,Me,He,Be,dt,M]),se=g.useMemo(()=>{const oe=ae.trim().toLowerCase(),Oe=L.trim().toUpperCase();return j.filter(et=>{const nt=[et?.name,et?.website,et?.industry,et?.territory?.name,et?.phone_number],ht=oe===""||nt.some(gt=>gt==null?!1:gt.toString().toLowerCase().includes(oe)),_e=Oe==="FILTER BY STATUS"||hr(et.status)===Oe;return ht&&_e})},[j,ae,L]),je=Math.max(1,Math.ceil(se.length/md)||1);g.useEffect(()=>{ee(1)},[ae,L]),g.useEffect(()=>{ee(oe=>{const Oe=Math.max(1,Math.ceil(se.length/md)||1);return oe>Oe?Oe:oe})},[se.length]);const We=g.useMemo(()=>{const oe=(V-1)*md;return se.slice(oe,oe+md)},[se,V]);se.length===0||(V-1)*md+1,Math.min(V*md,se.length);const Ne=()=>ee(oe=>Math.max(oe-1,1)),qe=()=>ee(oe=>Math.min(oe+1,je)),De=oe=>{v(oe),we("Overview"),Ae(hr(oe?.status)||"PROSPECT")},Je=()=>v(null),at=oe=>{oe.target.id==="accountModalBackdrop"&&!Q&&Je()},ot=()=>{r(!1),l(!1),p(null),w(u_),d(!1),D(null)},R=oe=>{oe.target.id==="modalBackdrop"&&ot()},$=oe=>oe?new Date(oe).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",I=oe=>{const{name:Oe,value:et}=oe.target;w(nt=>({...nt,[Oe]:et}))},U=()=>{w(u_),l(!1),p(null),r(!0)},de=oe=>{v(null),console.log("edit: ",oe),oe.assigned_accs?D(oe.assigned_accs):D(null),w({name:oe.name||"",website:oe.website||"",phone_number:oe.phone_number||"",billing_address:oe.billing_address||"",shipping_address:oe.shipping_address||"",industry:oe.industry||"",status:hr(oe.status)||"PROSPECT",territory_id:oe.territory?.id?String(oe.territory.id):"",assigned_to:oe.assigned_accs?.id?String(oe.assigned_accs.id):""}),l(!0),p(oe.id),r(!0)},ge=oe=>{oe&&le({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:oe.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:oe.id,name:oe.name}})},ue=async()=>{if(!q?.action){le(null);return}const{action:oe}=q,{type:Oe,payload:et,targetId:nt,name:ht}=oe;te(!0);try{if(Oe==="create"){d(!0);const _e=await re.post("/accounts/admin",et);xe(),Y.success(`Account "${ht}" created successfully.`);const gt=x?.id||null;ot(),await ie(gt),!x&&_e.data?.id}else if(Oe==="update"){if(!nt)throw new Error("Missing account identifier for update.");d(!0),await re.put(`/accounts/admin/${nt}`,et),Y.success(`Account "${ht}" updated successfully.`);const _e=x?.id&&x.id===nt?nt:null;ot(),await ie(_e),x?.id===nt&&v(null)}else if(Oe==="delete"){if(!nt)throw new Error("Missing account identifier for deletion.");const _e=x?.id;m(nt),await re.delete(`/accounts/admin/${nt}`),Y.success(`Account "${ht}" deleted successfully.`),await ie(_e&&_e!==nt?_e:null),_e===nt&&v(null)}}catch(_e){console.error(_e);const gt=Oe==="create"?"Failed to create account. Please review the details and try again.":Oe==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",Wt=_e.response?.data?.detail||gt;Y.error(Wt),(Oe==="create"||Oe==="update")&&d(!1),Oe==="delete"&&m(null)}finally{(Oe==="create"||Oe==="update")&&d(!1),Oe==="delete"&&m(null),te(!1),le(null)}},Se=()=>{Q||le(null)},Fe=async()=>{if(!x||!ve)return;const oe=hr(ve),Oe=hr(x.status);if(oe!==Oe){Ie(!0);try{await re.put(`/accounts/admin/${x.id}`,{status:oe}),Y.success(`Account status updated to ${m_(oe)}`),C(et=>et.map(nt=>nt.id===x.id?{...nt,status:oe}:nt)),v(null)}catch(et){console.error(et);const nt=et.response?.data?.detail||"Failed to update account status. Please try again.";Y.error(nt)}finally{Ie(!1)}}},[ft,vt]=g.useState(!1),ze=oe=>{oe.preventDefault(),vt(!0);const Oe=b.name.trim();if(!Oe){Y.error("Account name is required.");return}if(!b.assigned_to){Y.error("Assigned To is required.");return}const nt={name:Oe,website:b.website?.trim()||null,phone_number:b.phone_number?.trim()||null,billing_address:b.billing_address?.trim()||null,shipping_address:b.shipping_address?.trim()||null,industry:b.industry?.trim()||null,parent_company:b.parent_company?.trim()||null,status:b.status||"PROSPECT",territory_id:b.territory_id?Number(b.territory_id):null,assigned_to:b.assigned_to?Number(b.assigned_to):null},ht=i&&h?"update":"create";le({title:ht==="create"?"Confirm New Account":"Confirm Update",message:ht==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:Oe}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:Oe}),"?"]}),confirmLabel:ht==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ht,payload:nt,targetId:h||null,name:Oe}})},yt=[{label:"Filter by Status",value:"Filter by Status"},...d_.map(oe=>({label:oe.label,value:oe.value}))],Te=q?.action?.type==="delete"?q.action.targetId:null,st=x&&(c===x.id||Te===x.id),X=x&&c===x.id,Ee=x?WOe(x.status):"",$e=x?a.jsx("div",{id:"accountModalBackdrop",onClick:at,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:oe=>oe.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:Je,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Ee}`,children:m_(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:q?.action?.type==="update"&&q.action.targetId===x.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(x),disabled:!!st,children:X?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(oe=>a.jsx("button",{onClick:()=>we(oe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${me===oe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:oe},oe))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:x.website?a.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:x.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:x.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:x.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:x.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:x.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:x.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:$(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:$(x.updated_at)||"N/A"})]})]})}),me==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:j.notes||"No notes available."})]})]}),me==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[G.tasks&&G.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",G.tasks.length,")"]})]}),ce==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.tasks.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||"No description"}),oe.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",oe.assigned_to.first_name," ",oe.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.due_date||oe.created_at)})]},`task-${Oe}`))})]}),G.meetings&&G.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",G.meetings.length,")"]})]}),ce==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.meetings.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.description||oe.location||"No description"}),oe.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",oe.host.first_name," ",oe.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.start_time||oe.created_at)})]},`meeting-${Oe}`))})]}),G.calls&&G.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",G.calls.length,")"]})]}),ce==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.calls.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:oe.subject||oe.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:oe.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.call_time||oe.created_at)})]},`call-${Oe}`))})]}),G.contacts&&G.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",G.contacts.length,")"]})]}),ce==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.contacts.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.first_name?`${oe.first_name} `:"",oe.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.created_at)})]},`contact-${Oe}`))})]}),G.deals&&G.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",G.deals.length,")"]})]}),ce==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.deals.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[oe.deal_id?oe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",oe.name||oe.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:oe.stage||oe.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.close_date||oe.created_at)})]},`deal-${Oe}`))})]}),G.quotes&&G.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>F(ce==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",G.quotes.length,")"]})]}),ce==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),ce==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:G.quotes.map((oe,Oe)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(oe.quote_id?oe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:oe.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$(oe.presented_date)||""})]},`quote-${Oe}`))})]}),(!G||(!G.tasks||G.tasks.length===0)&&(!G.meetings||G.meetings.length===0)&&(!G.calls||G.calls.length===0)&&(!G.quotes||G.quotes.length===0)&&(!G.deals||G.deals.length===0)&&(!G.contacts||G.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||hr(x?.status)||"PROSPECT",onChange:oe=>Ae(oe.target.value),children:d_.map(oe=>a.jsx("option",{value:oe.value,children:oe.label},oe.value))}),a.jsx("button",{onClick:Fe,disabled:be||!ve||hr(ve)===hr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${be||!ve||hr(ve)===hr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:be?"Updating...":"Update"})]})]})]})]})]})}):null,Ye=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&a.jsx(It,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{U(),vt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:pe.map(oe=>a.jsx(KOe,{...oe},oe.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:ae,onChange:oe=>W(oe.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:L,onChange:oe=>H(oe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:yt.map(oe=>a.jsx("option",{value:oe.value,children:oe.label},oe.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:S?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):se.length>0?We.map(oe=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{De(oe),Ve(oe.id)},children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:oe.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:oe.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${qOe(oe.status)}`,children:m_(oe.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:oe.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:oe.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:oe.phone_number||"--"})]})})]},oe.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:se.length,pageSize:md,currentPage:V,onPrev:Ne,onNext:qe,label:"accounts"})]}),J=s?a.jsx("div",{id:"modalBackdrop",onClick:R,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:oe=>oe.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ot(),vt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||Q,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ze,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(km,{label:"Name",name:"name",value:b.name,onChange:I,placeholder:"Company name",required:!0,isSubmitted:ft})}),a.jsx(Y7,{label:"Parent Company",value:b.parent_company,onChange:oe=>{w(Oe=>({...Oe,parent_company:oe}))},items:B.map(oe=>({id:oe,name:oe})),getLabel:oe=>oe?.name||"",placeholder:"Select or type parent company...",disabled:o,allowFreeText:!0}),a.jsx(km,{label:"Website",name:"website",value:b.website,onChange:I,placeholder:"https://example.com",disabled:o}),a.jsx(km,{label:"Phone Number",name:"phone_number",value:b.phone_number,onChange:I,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),a.jsx(km,{label:"Industry",name:"industry",value:b.industry,onChange:I,placeholder:"Industry",disabled:o}),a.jsx(km,{label:"Billing Address",name:"billing_address",value:b.billing_address,onChange:I,placeholder:"Billing address",disabled:o}),a.jsx(km,{label:"Shipping Address",name:"shipping_address",value:b.shipping_address,onChange:I,placeholder:"Shipping address",disabled:o}),a.jsx(q7,{label:"Status",name:"status",value:b.status,onChange:I,options:[{value:"",label:"Select status"},...d_],required:!0,disabled:o}),a.jsx(Y7,{label:"Assigned To",value:b.assigned_to,onChange:oe=>{const Oe=A.find(nt=>String(nt.id)===String(oe));D(Oe);let et=null;Oe&&Oe.assigned_territory&&Oe.assigned_territory.length===1&&(et=Oe.assigned_territory[0].id),w(nt=>({...nt,assigned_to:oe,territory_id:et}))},items:A||[],getLabel:oe=>`${oe?.first_name??""} ${oe?.last_name??""} (${oe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ft,disabled:o||A.length===0||n}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(q7,{label:"Territory",name:"territory_id",value:b.territory_id||"",onChange:I,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map(oe=>({value:String(oe.id),label:oe.name}))||[]],disabled:o||!E||!E.assigned_territory||E.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{ot(),vt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||Q,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||Q,children:o?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,ne=q?a.jsx(XOe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:ue,onCancel:Se,loading:Q}):null;return a.jsxs(a.Fragment,{children:[Ye,$e,J,ne]})}function KOe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function km({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function q7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function Y7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1,allowFreeText:m=!1}){const h=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(QOe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:h,allowFreeText:m})]})}function QOe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),w=e.find(j=>String(j.id)===String(t)),x=w?s(w):t,v=g.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const j=C=>{b.current&&!b.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:x,placeholder:r,onFocus:()=>!i&&m(!0),onChange:j=>{p(j.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[d&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),m(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const C=String(j.id),S=s(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):!d||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function XOe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const Jh=10,f_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Lm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),pi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function ZOe(){const e=bt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState(null),[h,p]=g.useState(!1),[b,w]=g.useState(!1),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[A,T]=g.useState(null),[E,D]=g.useState(f_),[z,K]=g.useState(""),[B,O]=g.useState("Filter by Accounts"),[L,H]=g.useState(null),[ae,W]=g.useState("Overview"),[q,le]=g.useState(1),[Q,te]=g.useState({}),[V,ee]=g.useState(null),[me,we]=g.useState(null);g.useEffect(()=>{async function I(){try{const U=await re.get("/auth/me");we(U.data)}catch(U){console.error("Failed to fetch current user",U)}}I()},[]);const ve=g.useCallback(async(I=null)=>{r(!0);try{const U=await re.get("/contacts/admin/fetch-all"),ge=[...Array.isArray(U.data)?U.data:[]].sort((ue,Se)=>{const Fe=ue?.created_at||ue?.updated_at||0,ft=Se?.created_at||Se?.updated_at||0;return new Date(ft)-new Date(Fe)});if(n(ge),I){const ue=ge.find(Se=>Se.id===I);m(ue||null)}}catch(U){console.error(U),n([]),U.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch contacts. Please try again later.")}finally{r(!1)}},[m]),Ae=g.useCallback(async()=>{try{const I=await re.get("/accounts/admin/fetch-all"),de=[...Array.isArray(I.data)?I.data:[]].sort((ge,ue)=>(ge?.name||"").localeCompare(ue?.name||""));l(de)}catch(I){console.error(I),l([]),I.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),be=g.useCallback(async()=>{try{const I=await re.get("/users/all"),de=[...Array.isArray(I.data)?I.data:[]].sort((ge,ue)=>Lm(ge).localeCompare(Lm(ue)));d(de)}catch(I){console.error(I),d([]),I.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Ie=g.useCallback(async I=>{try{const U=await re.get(`/activities/contact/${I}`);te(U.data&&typeof U.data=="object"?U.data:{})}catch(U){console.error(U),U.response?.status===404&&(console.warn("No activities found for this account."),te({}))}},[]);g.useEffect(()=>{ve(),Ae(),be()},[ve,Ae,be]);const G=g.useMemo(()=>{const I=new Map;i.forEach(de=>{de?.id&&de?.name&&I.set(String(de.id),de.name)}),t.forEach(de=>{de?.account_id&&de?.account?.name&&I.set(String(de.account_id),de.account.name)});const U=Array.from(I.entries()).sort((de,ge)=>de[1].localeCompare(ge[1])).map(([de,ge])=>({value:de,label:ge}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...U]},[i,t]),Ce=g.useMemo(()=>{const I=z.trim().toLowerCase(),U=B.trim();return t.filter(de=>{const ge=[de?.first_name,de?.last_name,de?.email,de?.title,de?.department,de?.account?.name,de?.account?.status,de?.work_phone,de?.mobile_phone_1,de?.mobile_phone_2,de?.assigned_contact?.first_name,de?.assigned_contact?.last_name,de?.contact_creator?.first_name,de?.contact_creator?.last_name,de?.notes,pi(de?.created_at),pi(de?.updated_at)],ue=I===""||ge.some(Fe=>Fe==null?!1:Fe.toString().toLowerCase().includes(I)),Se=U==="Filter by Accounts"||String(de.account_id)===U;return ue&&Se})},[t,z,B]),ce=Math.max(1,Math.ceil(Ce.length/Jh)||1);g.useEffect(()=>{le(1)},[z,B]),g.useEffect(()=>{le(I=>{const U=Math.max(1,Math.ceil(Ce.length/Jh)||1);return I>U?U:I})},[Ce.length]);const F=g.useMemo(()=>{const I=(q-1)*Jh;return Ce.slice(I,I+Jh)},[Ce,q]),ie=()=>le(I=>Math.max(I-1,1)),he=()=>le(I=>Math.min(I+1,ce)),Le=g.useMemo(()=>{if(!b||!A)return i;const I=t.find(de=>de.id===A);return!I||!I.account||i.some(de=>de.id===I.account.id)?i:[...i,I.account]},[i,b,A,t]),xe=g.useCallback(()=>{p(!1),w(!1),T(null),D(f_),v(!1),dt(!1)},[]),Ve=I=>{I.target.id==="modalBackdrop"&&!x&&!S&&xe()},ke=I=>{const{name:U,value:de}=I.target;D(ge=>({...ge,[U]:de}))},ye=()=>{D(f_),w(!1),T(null),p(!0),me?.role==="Sales"&&D(I=>({...I,assigned_to:me.id}))},Me=async I=>{if(!I)return;const U=await re.get(`/accounts/get/${I.account_id}`);D({first_name:I.first_name||"",last_name:I.last_name||"",account_id:U.data.id?U.data.id:"",title:I.title||"",department:I.department||"",email:I.email||"",work_phone:I.work_phone||"",mobile_phone_1:I.mobile_phone_1||"",mobile_phone_2:I.mobile_phone_2||"",notes:I.notes||"",assigned_to:I.assigned_to?String(I.assigned_to):""}),w(!0),T(I.id),p(!0),m(null)},He=I=>{if(!I)return;const U=Lm(I)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:U}})},[Be,dt]=g.useState(!1),M=I=>{I.preventDefault(),dt(!0);const U=E.first_name.trim(),de=E.last_name.trim();if(!U||!de){Y.error("First name and last name are required.");return}if(!E.account_id){Y.error("Account is required.");return}if(!E.assigned_to){Y.error("Assigned To is required.");return}const ue=E.email?.trim();if(!ue){Y.error("Email is required.");return}if(!ue.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ue)){Y.error("Please enter a valid email address.");return}if((ue.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}const vt={first_name:U,last_name:de,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},ze=b&&A?"update":"create",yt=`${U} ${de}`.trim();C({title:ze==="create"?"Confirm New Contact":"Confirm Update",message:ze==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:yt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:yt}),"?"]}),confirmLabel:ze==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ze,payload:vt,targetId:A||null,name:yt}})},pe=async()=>{if(!j?.action){C(null);return}const{action:I}=j,{type:U,payload:de,targetId:ge,name:ue}=I;_(!0);try{if(U==="create"){v(!0),await re.post("/contacts/admin",de),Y.success(`Contact "${ue}" created successfully.`);const Se=c?.id||null;xe(),await ve(Se)}else if(U==="update"){if(!ge)throw new Error("Missing contact identifier for update.");v(!0),await re.put(`/contacts/admin/${ge}`,de),Y.success(`Contact "${ue}" updated successfully.`);const Se=c?.id&&c.id===ge?ge:c?.id||null;xe(),await ve(Se),c?.id===ge&&m(null)}else if(U==="delete"){if(!ge)throw new Error("Missing contact identifier for deletion.");const Se=c?.id;H(ge),await re.delete(`/contacts/admin/${ge}`),Y.success(`Contact "${ue}" deleted successfully.`),await ve(Se&&Se!==ge?Se:null),Se===ge&&m(null)}}catch(Se){console.error(Se);const Fe=U==="create"?"Failed to create contact. Please review the details and try again.":U==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",ft=Se.response?.data?.detail||Fe;Y.error(ft)}finally{(U==="create"||U==="update")&&v(!1),U==="delete"&&H(null),_(!1),C(null)}},se=()=>{S||C(null)},je=I=>{m(I),W("Overview")},We=()=>m(null),Ne=I=>{I.target.id==="contactModalBackdrop"&&!S&&We()},qe=j?.action?.type==="delete"?j.action.targetId:null,De=c&&(L===c.id||qe===c.id),Je=c&&L===c.id,at=c?a.jsx("div",{id:"contactModalBackdrop",onClick:Ne,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:I=>I.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:We,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Lm(c)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Me(c),disabled:S||j?.action?.type==="update"&&j.action.targetId===c.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>He(c),disabled:!!De,children:Je?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:c.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>a.jsx("button",{onClick:()=>W(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Lm(c)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email?a.jsx("a",{href:`mailto:${c.email}`,className:"text-blue-600 hover:underline break-all",children:c.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_contact?`${c.assigned_contact.first_name} ${c.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.contact_creator?`${c.contact_creator.first_name} ${c.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:pi(c.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:pi(c.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[Q.tasks&&Q.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Q.tasks.length,")"]})]}),V==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.tasks.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.due_date||I.created_at)})]},`task-${U}`))})]}),Q.meetings&&Q.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Q.meetings.length,")"]})]}),V==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.meetings.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.start_time||I.created_at)})]},`meeting-${U}`))})]}),Q.calls&&Q.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Q.calls.length,")"]})]}),V==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.calls.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.call_time||I.created_at)})]},`call-${U}`))})]}),Q.contacts&&Q.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Q.contacts.length,")"]})]}),V==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.contacts.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.first_name?`${I.first_name} `:"",I.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.created_at)})]},`contact-${U}`))})]}),Q.deals&&Q.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Q.deals.length,")"]})]}),V==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.deals.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[I.deal_id?I.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",I.name||I.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:I.stage||I.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.close_date||I.created_at)})]},`deal-${U}`))})]}),Q.quotes&&Q.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Q.quotes.length,")"]})]}),V==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.quotes.map((I,U)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(I.quote_id?I.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:pi(I.presented_date)||""})]},`quote-${U}`))})]}),(!Q||(!Q.tasks||Q.tasks.length===0)&&(!Q.meetings||Q.meetings.length===0)&&(!Q.calls||Q.calls.length===0)&&(!Q.quotes||Q.quotes.length===0)&&(!Q.deals||Q.deals.length===0)&&(!Q.contacts||Q.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const I=encodeURIComponent(c.email),U=encodeURIComponent(""),de=encodeURIComponent(""),ge=`https://mail.google.com/mail/?view=cm&fs=1&to=${I}&su=${U}&body=${de}`;window.open(ge,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ot=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{ye(),dt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:I=>K(I.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:I=>O(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:G.map(I=>a.jsx("option",{value:I.value,children:I.label},I.value??I.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Ce.length>0?F.map(I=>{const U=[{Icon:Ha,value:I.email,key:"email"},{Icon:jt,value:I.work_phone,key:"work_phone"},{Icon:Lc,value:I.mobile_phone_1,key:"mobile_phone_1"},{Icon:Lc,value:I.mobile_phone_2,key:"mobile_phone_2"}].filter(de=>!!de.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{je(I),Ie(I.id)},children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Lm(I)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:I.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(yx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:I.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:U.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:U.map(({Icon:de,value:ge,key:ue})=>{const Se=pt.createElement(de,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Se,a.jsx("span",{children:ge})]},ue)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Yt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:I.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Ut,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:I.assigned_contact?`${I.assigned_contact.first_name} ${I.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Nt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:pi(I.created_at)||"--"})]})})]},I.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ce.length,pageSize:Jh,currentPage:q,onPrev:ie,onNext:he,label:"contacts"})]}),R=h?a.jsx("div",{id:"modalBackdrop",onClick:Ve,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{onClick:()=>{xe(),dt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:M,noValidate:!0,children:[a.jsx(uc,{label:"First Name",name:"first_name",value:E.first_name,onChange:ke,placeholder:"First name",required:!0,isSubmitted:Be}),a.jsx(uc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:ke,placeholder:"Last name",required:!0,isSubmitted:Be}),a.jsx(K7,{label:"Account",value:E.account_id,onChange:I=>D(U=>({...U,account_id:I})),items:b?Le:i||[],getLabel:I=>I?.name??"",placeholder:"Search account...",disabled:x||(b?Le.length===0:i.length===0),required:!0,isSubmitted:Be}),a.jsx(K7,{label:"Assigned To",value:E.assigned_to,onChange:I=>D(U=>({...U,assigned_to:I})),items:o||[],getLabel:I=>`${I?.first_name??""} ${I?.last_name??""} (${I?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Be,disabled:x||o.length===0||me?.role==="Sales"}),a.jsx(uc,{label:"Title",name:"title",value:E.title,onChange:ke,placeholder:"Job title",disabled:x}),a.jsx(uc,{label:"Department",name:"department",value:E.department,onChange:ke,placeholder:"Department",disabled:x}),a.jsx(uc,{label:"Email",name:"email",type:"email",value:E.email,onChange:ke,placeholder:"example@email.com",required:!0,isSubmitted:Be}),a.jsx(uc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:ke,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:ke,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:ke,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(e5e,{label:"Notes",name:"notes",value:E.notes,onChange:ke,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{xe(),dt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,$=j?a.jsx(t5e,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:pe,onCancel:se,loading:S}):null;return a.jsxs(a.Fragment,{children:[ot,at,R,$]})}function uc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:d=!1,className:c=""}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function K7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(JOe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function JOe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function e5e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function t5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const h_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function sQ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=bt(),{leadID:d}=Co(),[c,m]=g.useState(e||null),[h,p]=g.useState("Overview"),[b,w]=g.useState(""),x=c?.status?.toUpperCase()==="QUALIFIED",[v,j]=g.useState(null),[C,S]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,A]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),D=async()=>{try{if(e){m(e),w(e.status||"New");return}if(!d)return;const L=await re.get(`/leads/get/${d}`);m(L.data),w(L.data.status||"New"),S({name:L.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:L.data.territory?.id||null,assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),A({last_name:L.data.last_name||"",first_name:L.data.first_name||"",account_id:null,title:L.data.title||"",department:L.data.department||"",email:L.data.email||"",work_phone:L.data.work_phone||"",mobile_phone_1:L.data.mobile_phone_1||"",mobile_phone_2:L.data.mobile_phone_2||"",notes:"",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null})}catch(L){console.error(L)}};g.useEffect(()=>{e?(m(e),w(e.status||"New")):d&&D()},[d,e]);const z=async()=>{try{if(b==="Converted"&&c?.status?.toUpperCase()!=="QUALIFIED"){Y.error("Lead must be Qualified before it can be converted.");return}const L=await re.put(`/leads/${c.id}/update/status`,{status:b});Y.success("Lead status updated successfully");const H={...c,status:L.data.status};m(H),i&&i(H),n&&n(),t&&t()}catch(L){console.error(L),Y.error("Failed to update lead status")}},K=async L=>{const H={...C,assigned_to:L.assigned_to?.id,billing_address:L.address,shipping_address:L.address,created_by:L.creator?.id,industry:null,name:L.company_name,phone_number:L.work_phone,status:"Prospect",territory_id:L.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",L);try{const W=(await re.post("/accounts/convertedLead",H)).data.id,q={..._,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,department:L.department,email:L.email,first_name:L.first_name,last_name:L.last_name,mobile_phone_1:L.mobile_phone_1,mobile_phone_2:L.mobile_phone_2,notes:L.notes,title:L.title,work_phone:L.work_phone},Q=(await re.post("/contacts/convertedLead",q)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},V=T.amount&&T.amount!==""?parseFloat(T.amount):0,ee={...T,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,primary_contact_id:Q,probability:te(),stage:"Prospecting"},me=await re.post("/deals/convertedLead",ee),we=await re.put(`/leads/convert/${L.id}`);i&&i(null),n(),Y.success("Lead converted successfully!"),t()}catch(ae){console.error("Error during conversion:",ae);const W=ae.response?.data?.detail||ae.message||"Failed to convert lead. Please try again.";Y.error(W)}},B=L=>{switch((L||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=L=>L.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(c.status)}`,children:O(c.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>K(c),disabled:!x,title:x?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${x?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(L=>a.jsx("button",{onClick:()=>p(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),h==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),h==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(L.due_date||L.created_at)})]},`task-${H}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(L.start_time||L.created_at)})]},`meeting-${H}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:h_(L.call_time||L.created_at)})]},`call-${H}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{c&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:c.title?`Call regarding ${c.title}`:`Call with ${c.first_name} ${c.last_name}`,relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const L=encodeURIComponent(c.email),H=encodeURIComponent(""),ae=encodeURIComponent(""),W=`mailto:${L}?subject=${H}&body=${ae}`;window.location.href=W},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{c&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:c.title?`Meeting regarding ${c.title}`:`Meeting with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{c&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:c.title?`Follow up on ${c.title}`:`Follow up with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:b,onChange:L=>w(L.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),c?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:z,disabled:b===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${b===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const a5e=Lf.all(),g_=a5e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),n5e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),s5e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},eg=10,p_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function r5e(){const e=bt(),{leadID:t}=Co();Ss();const[n,s]=g.useState(null),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,A]=g.useState(p_),[T,E]=g.useState(!1),[D,z]=g.useState(null),[K,B]=g.useState(!1),[O,L]=g.useState(null),[H,ae]=g.useState(!1),[W,q]=g.useState({});g.useRef(null);const[le,Q]=g.useState(!1),[te,V]=g.useState(null),[ee,me]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[we,ve]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Ae,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ie=async()=>{try{const U=await re.get("/leads/getUsers");o(U.data)}catch(U){console.error(`Error fetching users: ${U}`)}},G=async()=>{b(!0);try{const U=await re.get("/leads/admin/getLeads");h(U.data),console.log(U.data)}catch(U){console.error(`Error fetching leads: ${U}`)}finally{b(!1)}};g.useEffect(()=>{Ie(),G()},[]);const{user:Ce}=Xt(),ce=Ce?.role==="Sales";g.useEffect(()=>{r&&!T&&ce&&Ce&&!_.lead_owner&&A(U=>({...U,lead_owner:Ce.id}))},[r,T,ce,Ce,_.lead_owner]),g.useEffect(()=>{if(t&&m.length>0&&!r&&!T){const U=m.find(de=>de.id===Number(t));U&&s(U)}else!t&&!n&&s(null)},[t,m,r,T]),g.useEffect(()=>{if(te){const de=(Se=>{if(!Se)return{code:"+63",number:""};const Fe=Se.match(/^(\+\d+)\s(.+)$/);if(Fe)return{code:Fe[1],number:Fe[2]};if(Se.startsWith("+")){const ft=Se.match(/^(\+\d{1,3})/);if(ft)return{code:ft[1],number:Se.substring(ft[1].length).trim()}}return{code:"+63",number:Se}})(te.work_phone),ge=[];te.work_phone&&ge.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&ge.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&ge.push(`Mobile 2: ${te.mobile_phone_2}`);const ue=ge.length>0?ge.join(" | "):"";me({name:te.company_name||"",website:"",countryCode:de.code,phone_number:de.number,combinedPhoneNumbers:ue,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),ve({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const F=U=>x(U.target.value),ie=g.useMemo(()=>{const U=w.trim().toLowerCase(),de=v.trim().toUpperCase();return m.filter(ge=>{const ue=[ge?.first_name,ge?.last_name,ge?.company_name,ge?.title,ge?.email,ge?.work_phone,ge?.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:""],Se=U===""||ue.some(ft=>ft==null||ft===""?!1:ft.toString().toLowerCase().includes(U));let Fe=!1;return de==="FILTER BY STATUS"?Fe=(ge.status?ge.status.toUpperCase():"")!=="CONVERTED":Fe=(ge.status?ge.status.toUpperCase():"")===de,Se&&Fe})},[m,w,v]),he=Math.max(1,Math.ceil(ie.length/eg)||1);g.useEffect(()=>{S(1)},[w,v]),g.useEffect(()=>{S(U=>{const de=Math.max(1,Math.ceil(ie.length/eg)||1);return U>de?de:U})},[ie.length]);const Le=g.useMemo(()=>{const U=(C-1)*eg;return ie.slice(U,U+eg)},[ie,C]),xe=()=>S(U=>Math.max(U-1,1)),Ve=()=>S(U=>Math.min(U+1,he)),ke=g.useCallback(async U=>{try{const de=await re.get(`/activities/lead/${U}`);q(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),q({}))}},[]),ye=U=>{s(U),ke(U.id)},Me=()=>{s(null),t&&e("/admin/leads",{replace:!0})},He=()=>{i(!1),A(p_),E(!1),z(null),B(!1),c(null),sessionStorage.removeItem("editLeadData")},Be=U=>{U.target.id==="modalBackdrop"&&He()},dt=()=>{A(p_),E(!1),z(null),c(null),i(!0)},M=U=>{if(!U){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",U),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const de=ft=>{if(!ft)return{code:"+63",number:""};const vt=ft.match(/^(\+\d+)\s(.+)$/);return vt?{code:vt[1],number:vt[2]}:{code:"+63",number:ft}},ge=de(U.work_phone),ue=de(U.mobile_phone_1),Se=de(U.mobile_phone_2);let Fe="";if(U.assigned_to){Fe=String(U.assigned_to.id);const ft=l?.find(vt=>vt.id===U.assigned_to.id);c(ft)}A({first_name:U.first_name||"",last_name:U.last_name||"",company_name:U.company_name||"",title:U.title||"",department:U.department||"",email:U.email||"",work_ccode:ge.code,work_phone:ge.number,m1_ccode:ue.code,mobile_phone_1:ue.number,m2_ccode:Se.code,mobile_phone_2:Se.number,address:U.address||"",notes:U.notes||"",source:U.source||"",territory_id:U.territory?.id||null,lead_owner:Fe,status:U.status||"New"}),E(!0),z(U.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},pe=U=>{if(!U){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",U);const de=`${U.first_name} ${U.last_name}`||"this lead";L({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:U.id,name:de}})},se=U=>{const{name:de,value:ge}=U.target;if(A(ue=>({...ue,[de]:ge})),de==="lead_owner"){const ue=l.find(Se=>Se.id===parseInt(ge));c(ue)}},[je,We]=g.useState(!1),Ne=U=>{if(U.preventDefault(),We(!0),!_.last_name?.trim()){Y.error("Last name is required.");return}if(!_.company_name?.trim()){Y.error("Company is required.");return}if(!_.email?.trim()){Y.error("Email is required.");return}if(!_.email.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){Y.error("Please enter a valid email address with a dot in the domain.");return}if((_.email.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}if(!_.lead_owner){Y.error("Please assign a lead owner.");return}const Se={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},Fe=T&&D?"update":"create",ft=`${_.first_name} ${_.last_name}`;L({title:Fe==="create"?"Confirm New Lead":"Confirm Update",message:Fe==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}),confirmLabel:Fe==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:Fe,payload:Se,targetId:D||null,name:ft}})},qe=async()=>{if(!O?.action){L(null);return}const{action:U}=O,{type:de,payload:ge,targetId:ue,name:Se,lead:Fe}=U;console.log(ge),ae(!0);try{if(de==="create")B(!0),await re.post("/leads/create",ge),Y.success(`Lead "${Se}" created successfully.`),He(),await G();else if(de==="update"){if(!ue)throw new Error("Missing lead identifier for update.");B(!0);const ft=await re.put(`/leads/${ue}`,ge);Y.success(`Lead "${Se}" updated successfully.`),n&&n.id===ue&&s(null),He(),await G()}else if(de==="delete"){if(!ue)throw new Error("Missing lead identifier for deletion.");await re.delete(`/leads/${ue}`),Y.success(`Lead "${Se}" deleted successfully.`),n?.id===ue&&s(null),await G()}}catch(ft){console.error(ft);const vt=de==="create"?"Failed to create lead. Please review the details and try again.":de==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ze=ft.response?.data?.detail||vt;Y.error(ze)}finally{(de==="create"||de==="update")&&B(!1),de!=="edit"&&(ae(!1),L(null))}},De=()=>{H||L(null)},Je=m.filter(U=>U.status==="New").length,at=m.filter(U=>U.status==="Contacted").length,ot=m.filter(U=>U.status==="Qualified").length,R=m.filter(U=>U.status==="Converted").length,$=m.filter(U=>U.status==="Lost").length,I=[{title:"New",value:Je,icon:Ga,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:at,icon:jt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ot,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:R,icon:So,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:$,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(It,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ga,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{dt(),We(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:I.map(U=>a.jsx(l5e,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:F,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:v,onChange:U=>j(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:ie.length>0?Le.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>ye(U),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[U.first_name," ",U.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:U.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_to?`${U.assigned_to.first_name} ${U.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${s5e(U.status||"New")}`,children:n5e(U.status||"New")})})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:ie.length,pageSize:eg,currentPage:C,onPrev:xe,onNext:Ve,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:U=>U.stopPropagation(),children:[a.jsx("button",{onClick:()=>{He(),We(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:se,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${je&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${je&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:se,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${je&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:se,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:se,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${je&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(U=>a.jsx("option",{value:U.code,children:U.code},U.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(U=>a.jsx("option",{value:U.code,children:U.code},U.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:se,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:g_.map(U=>a.jsx("option",{value:U.code,children:U.code},U.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:se,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:se,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${je&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(o5e,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:K||ce,getLabel:U=>`${U.first_name} ${U.last_name}`,onChange:U=>{const de=l.find(ue=>String(ue.id)===String(U));c(de);let ge=null;de&&de.assigned_territory&&de.assigned_territory.length===1&&(ge=de.assigned_territory[0].id),A(ue=>({...ue,lead_owner:U,territory_id:ge}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:se,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map(U=>a.jsx("option",{value:U.id,children:U.name},U.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:se,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:se,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{He(),We(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:K||H,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Ne,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:K||H,children:K||H?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),O&&a.jsx(i5e,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:qe,onCancel:De,loading:H}),n&&!r&&!T&&a.jsx(sQ,{relatedActs:W,lead:n,onBack:Me,fetchLeads:G,setSelectedLead:s,onEdit:M,onDelete:pe})]})}function i5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function l5e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function o5e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d5e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),Q7=e=>{const t=d5e(e);return t.charAt(0).toUpperCase()+t.slice(1)},rQ=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),u5e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var m5e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5e=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:l,...o},d)=>g.createElement("svg",{ref:d,...m5e,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:rQ("lucide",r),...!i&&!u5e(o)&&{"aria-hidden":"true"},...o},[...l.map(([c,m])=>g.createElement(c,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5e=(e,t)=>{const n=g.forwardRef(({className:s,...r},i)=>g.createElement(f5e,{ref:i,iconNode:t,className:rQ(`lucide-${c5e(Q7(e))}`,`lucide-${e}`,s),...r}));return n.displayName=Q7(e),n};/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yj=h5e("x",g5e),Hy={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Dn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),p5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Dn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Dn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Dn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Dn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Dn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),x5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Dn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Dn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Dn,{label:"Department",name:"department",value:e.department}),a.jsx(Dn,{label:"Title",name:"title",value:e.title}),a.jsx(Dn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Dn,{label:"Email",name:"email",value:e.email}),a.jsx(Dn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Dn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),y5e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Dn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Dn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Dn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Dn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Dn,{label:"Description",name:"description",value:e.description}),a.jsx(Dn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function b5e({isOpen:e,onClose:t}){const[n,s]=g.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(n){case 1:return a.jsx(p5e,{data:Hy});case 2:return a.jsx(x5e,{data:Hy});case 3:return a.jsx(y5e,{data:Hy});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Hy.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(yj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(c=>a.jsx("button",{onClick:()=>s(c.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===c.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:c.name},c.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const tg=10;function v5e(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,s]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,o]=g.useState(null),[d,c]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(1),[C,S]=g.useState(!1),[_,A]=g.useState(null),[T,E]=g.useState(!1),[D,z]=g.useState(!1),[K,B]=g.useState(null),[O,L]=g.useState([]),[H,ae]=g.useState([]),[W,q]=g.useState([]),[le,Q]=g.useState({}),[te,V]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ee,me]=g.useState(null),[we,ve]=g.useState(null),Ae={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},be=I=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[I]||I||"--",Ie=I=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[I]||"bg-gray-100 text-gray-700",G=g.useCallback(async I=>{try{const U=await re.get(`/activities/deal/${I}`);Q(U.data&&typeof U.data=="object"?U.data:{})}catch(U){console.error(U),U.response?.status===404&&(console.warn("No activities found for this account."),Q({}))}},[]),Ce=g.useMemo(()=>{const I=e.trim().toLowerCase(),U=n.trim(),de=r.trim();return(p??[]).filter(ge=>{const ue=[ge?.name,ge?.description,ge?.account?.name,ge?.contact?.first_name,ge?.contact?.last_name,ge?.assigned_deals?.first_name,ge?.assigned_deals?.last_name],Se=I===""||ue.some(vt=>vt==null||vt===""?!1:vt.toString().toLowerCase().includes(I)),Fe=U==="Filter by Stage"||U===""||ge.stage===Ae[U]||ge.stage===U,ft=de==="Filter by Owner"||de===""||`${ge.assigned_deals?.first_name||""} ${ge.assigned_deals?.last_name||""}`.trim().toLowerCase()===de.toLowerCase();return Se&&Fe&&ft})},[p,e,n,r]),ce=Math.max(1,Math.ceil(Ce.length/tg)||1);g.useEffect(()=>{j(1)},[e,n,r]),g.useEffect(()=>{j(I=>{const U=Math.max(1,Math.ceil(Ce.length/tg)||1);return I>U?U:I})},[Ce.length]);const F=g.useMemo(()=>{const I=(v-1)*tg;return Ce.slice(I,I+tg)},[Ce,v]),ie=()=>j(I=>Math.max(I-1,1)),he=()=>j(I=>Math.min(I+1,ce)),Le=()=>{V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),z(!1),B(null),h(!0)},xe=async()=>{x(!0);try{const I=await re.get("/deals/admin/fetch-all"),de=[...Array.isArray(I.data)?I.data:[]].sort((ge,ue)=>{const Se=ge?.created_at?new Date(ge.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-Se});b(de)}catch(I){I.response&&I.response.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch deals. Please try again later."),console.error(I)}finally{x(!1)}},Ve=async()=>{try{const I=await re.get("/accounts/admin/fetch-all");L(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},ke=async()=>{try{const I=await re.get("/contacts/admin/fetch-all");ae(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},ye=async()=>{try{const I=await re.get("/users/all");q(Array.isArray(I.data)?I.data:[])}catch(I){console.error(I),I.response?.status===403&&Y.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{xe(),Ve(),ke(),ye()},[]);const{user:Me}=Xt(),He=Me?.role==="Sales";g.useEffect(()=>{m&&!D&&He&&Me&&!te.assigned_to&&V(I=>({...I,assigned_to:Me.id}))},[m,D,He,Me,te.assigned_to]);const Be=async I=>{I&&(V({id:I.id||null,name:I.name||"",account_id:I.account_id?.toString()||"",primary_contact_id:I.primary_contact_id?.toString()||"",stage:I.stage||"PROPOSAL",amount:I.amount?.toString()||"",close_date:I.close_date?new Date(I.close_date).toISOString().split("T")[0]:"",assigned_to:I.assigned_to?.toString()||"",currency:I.currency||"PHP",description:I.description||""}),me(I.account||null),ve(I.contact||null),z(!0),B(I.id),o(null),h(!0))},dt=async(I=!1)=>{try{const U=await re.get("/deals/admin/fetch-all"),ge=[...Array.isArray(U.data)?U.data:[]].sort((ue,Se)=>{const Fe=ue?.created_at?new Date(ue.created_at).getTime():0;return(Se?.created_at?new Date(Se.created_at).getTime():0)-Fe});if(b(ge),!I&&l&&l.id){const ue=ge.find(Se=>Se.id===l.id);ue&&o({...ue})}}catch(U){console.error("Failed to refresh deal data:",U),await xe()}},M=I=>{const U=I.name.trim();if(!U){Y.error("Deal name is required.");return}if(!I.account_id){Y.error("Account is required.");return}const de=D&&K?"update":"create",ge=U;A({title:de==="create"?"Confirm New Deal":"Confirm Update",message:de==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ge}),"?"]}),confirmLabel:de==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:de,formData:I,targetId:K||null,name:ge}})},pe=I=>{if(!I)return;const U=I.name||"this deal";A({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:U}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:I.id,name:U}})},se=async()=>{if(!_?.action){A(null);return}const{action:I}=_,{type:U,formData:de,targetId:ge,name:ue}=I;E(!0);try{if(U==="create"){S(!0);const Se={name:de.name.trim(),account_id:parseInt(de.account_id),primary_contact_id:de.primary_contact_id?parseInt(de.primary_contact_id):null,stage:de.stage,amount:de.amount?parseFloat(de.amount):null,currency:de.currency||"PHP",close_date:de.close_date||null,description:de.description||null,assigned_to:de.assigned_to?parseInt(de.assigned_to):null};await re.post("/deals/admin/create",Se),Y.success(`Deal "${ue}" created successfully.`),h(!1),await xe()}else if(U==="update"){if(!ge)throw new Error("Missing deal identifier for update.");S(!0);const Se={};de.name!==void 0&&(Se.name=de.name.trim()),de.account_id!==void 0&&de.account_id!==""&&(Se.account_id=parseInt(de.account_id)),de.primary_contact_id!==void 0&&(Se.primary_contact_id=de.primary_contact_id?parseInt(de.primary_contact_id):null),de.stage!==void 0&&(Se.stage=de.stage),de.amount!==void 0&&de.amount!==""&&(Se.amount=parseFloat(de.amount)),de.currency!==void 0&&(Se.currency=de.currency),de.close_date!==void 0&&(Se.close_date=de.close_date||null),de.description!==void 0&&(Se.description=de.description||null),de.assigned_to!==void 0&&(Se.assigned_to=de.assigned_to?parseInt(de.assigned_to):null),await re.put(`/deals/admin/${ge}`,Se),Y.success(`Deal "${ue}" updated successfully.`),h(!1),await xe()}else if(U==="delete"){if(!ge)throw new Error("Missing deal identifier for deletion.");await re.delete(`/deals/admin/${ge}`),Y.success(`Deal "${ue}" deleted successfully.`),l?.id===ge&&o(null),await xe()}}catch(Se){console.error(Se);const Fe=U==="create"?"Failed to create deal. Please review the details and try again.":U==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ft=Se.response?.data?.detail||Fe;Y.error(ft)}finally{(U==="create"||U==="update")&&S(!1),E(!1),A(null)}},je=()=>{T||A(null)},We=()=>{h(!1),V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),ve(null),z(!1),B(null),S(!1)},Ne=(p??[]).filter(I=>I.stage==="PROSPECTING").length,qe=(p??[]).filter(I=>I.stage==="QUALIFICATION").length,De=(p??[]).filter(I=>I.stage==="PROPOSAL").length,Je=(p??[]).filter(I=>I.stage==="NEGOTIATION").length,at=(p??[]).filter(I=>I.stage==="CLOSED_WON").length,ot=(p??[]).filter(I=>I.stage==="CLOSED_LOST").length,R=(p??[]).filter(I=>I.stage==="CLOSED_CANCELLED").length,$=[{title:"Prospecting",value:Ne,icon:hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:qe,icon:Qa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:De,icon:Yt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:Je,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:at,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ot,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:R,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&a.jsx(It,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Yt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:$.map(I=>a.jsx(N5e,{...I},I.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:I=>t(I.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:I=>s(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:r,onChange:I=>i(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(I=>`${I.assigned_deals?.first_name} ${I.assigned_deals?.last_name}`))].map((I,U)=>a.jsx("option",{value:I,children:I},U))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ce.length>0?F.map(I=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{o({...I}),G(I.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:I.deal_id?I.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:I.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:I.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:I.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:I.contact?.first_name&&I.contact?.last_name?`${I.contact.first_name} ${I.contact.last_name}`:I.contact?.first_name||I.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ie(I.stage)}`,children:be(I.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",I.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:I.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:I.assigned_deals?.first_name&&I.assigned_deals?.last_name?`${I.assigned_deals.first_name} ${I.assigned_deals.last_name}`:I.assigned_deals?.first_name||I.assigned_deals?.last_name||"--"})]},I.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ce.length,pageSize:tg,currentPage:v,onPrev:ie,onNext:he,label:"deals"}),m&&a.jsx(j5e,{onClose:We,formData:te,setFormData:V,isEditing:D,onSubmit:M,isSubmitting:C||T,accounts:O,contacts:H,users:W,currentAccount:ee,currentContact:we}),l&&a.jsx(Ux,{relatedActs:le,selectedDeal:l,show:!!l,onClose:()=>o(null),activeTab:d,setActiveTab:c,onEdit:Be,onDelete:pe,onStatusUpdate:dt}),_&&a.jsx(w5e,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:se,onCancel:je,loading:T})]})}function w5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function N5e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function j5e({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:d=[],currentAccount:c=null,currentContact:m=null}){const{user:h}=Xt(),p=h?.role==="Sales";g.useEffect(()=>{!s&&p&&h&&!t.assigned_to&&n(C=>({...C,assigned_to:h.id}))},[s,p,h,t.assigned_to,n]);const[b,w]=g.useState(!1),x=C=>{if(C.preventDefault(),w(!0),!t.name?.trim()){Y.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){Y.error("Amount must be a number greater than 0.");return}if(!t.account_id){Y.error("Please select an account.");return}if(!t.primary_contact_id){Y.error("Please select a primary contact.");return}r?.(t)},v=C=>{C.target.id==="modalBackdrop"&&e()},j=g.useMemo(()=>{const C=String(t.account_id||"").trim(),S=Array.isArray(o)?o:[];return C?S.filter(_=>{const T=[_?.account_id,_?.accountId,_?.account?.id,_?.account?.account_id,_?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return T?String(T)===C:!1}):S},[o,t.account_id]);return g.useEffect(()=>{const C=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!C)return;j.some(A=>String(A?.id)===S)||n(A=>({...A,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,j,n]),a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:C=>C.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[a.jsx(x_,{label:"Deal Name",name:"name",value:t.name,onChange:C=>n({...t,name:C.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:b,className:"md:col-span-2"}),a.jsx(y_,{label:"Account",value:t.account_id||"",onChange:C=>n({...t,account_id:C}),items:l||[],getLabel:C=>C?.name??"",placeholder:"Search account...",disabled:i,currentItem:c,required:!0,isSubmitted:b}),a.jsx(y_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:C=>n({...t,primary_contact_id:C}),items:j||[],getLabel:C=>`${C?.first_name??""} ${C?.last_name??""}`.trim()||C?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m,required:!0,isSubmitted:b}),a.jsx(X7,{label:"Stage",name:"stage",value:t.stage,onChange:C=>n({...t,stage:C.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(x_,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:C=>n({...t,amount:C.target.value}),placeholder:"0",required:!0,isSubmitted:b}),a.jsx(X7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:C=>n({...t,currency:C.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(x_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:C=>n({...t,close_date:C.target.value}),disabled:i}),a.jsx(y_,{label:"Assign To",value:t.assigned_to||"",onChange:C=>n({...t,assigned_to:C}),items:d||[],getLabel:C=>`${C?.first_name??""} ${C?.last_name??""}`.trim()||C?.email||"",placeholder:"Search assignee...",disabled:i||p,className:"md:col-span-2"}),a.jsx(S5e,{label:"Description",name:"description",value:t.description,onChange:C=>n({...t,description:C.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function x_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function X7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function y_({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:d=null,required:c=!1,isSubmitted:m=!1}){const h=m&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(C5e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:d,hasError:h})]})}function C5e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:d={hasError:d}}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),x=e.find(C=>String(C.id)===String(t))||o,v=x?s(x):"",j=g.useMemo(()=>{const C=h.trim().toLowerCase();return(C?e.filter(_=>(s(_)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const C=S=>{b.current&&!b.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:v,placeholder:r,onFocus:()=>!i&&m(!0),onChange:C=>{p(C.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(C=>{const S=String(C.id),_=s(C),A=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function S5e({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:d=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function bj({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),o=bt(),{user:d}=Xt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Y.error("No deal selected");return}if(!s||s===e.stage){Y.info("Please select a different stage");return}const h=e.id;l(!0);try{await re.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Y.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Y.error(b)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),w=`mailto:${h}?subject=${p}&body=${b}`;window.location.href=w},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:c.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function _5e({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const d=bt(),[c]=Ss(),m=c.get("id"),[h,p]=g.useState(e||null),[b,w]=g.useState(s||"Overview"),{user:x}=Xt();g.useEffect(()=>{console.log("SalesDealsInformation mounted",h),console.log("User:",x)},[h,x]);const v=s!==void 0?s:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const A=(await re.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",A.length);const T=A.find(E=>E.id===parseInt(m));if(console.log("Found deal:",T),T){console.log("Deal data structure:",{id:T.id,name:T.name,amount:T.amount,stage:T.stage,account:T.account,contact:T.contact,assigned_deals:T.assigned_deals,deal_creator:T.deal_creator,allKeys:Object.keys(T)});const E={...T,amount:typeof T.amount=="number"?T.amount:parseFloat(T.amount||0),probability:T.probability||0};p(E)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Bt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):w(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),A=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>A===E?"orange":A>E?"green":"gray").map((E,D)=>a.jsxs(pt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),D<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},D))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:jt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Nt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),v==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(bj,{selectedDeal:h,onStatusUpdate:o,onClose:n})})]})]})]})})}function A5e({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),o=bt(),{user:d}=Xt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Y.error("No deal selected");return}if(!s||s===e.stage){Y.info("Please select a different stage");return}const h=e.id;l(!0);try{await re.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Y.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Y.error(b)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),w=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${p}&body=${b}`;window.open(w,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:c.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const ag=10,b_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],v_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},vi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},w_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",T5e=e=>{switch(vi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},E5e=e=>{switch(vi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Gy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ng=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",k5e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},N_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},Z7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},J7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},AE=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},L5e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=AE(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=AE(t);return n||null},P5e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},D5e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function O5e(){const e=bt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState([]),[h,p]=g.useState([]),[b,w]=g.useState(null),[x,v]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[A,T]=g.useState(!1),[E,D]=g.useState(null),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(v_),[ae,W]=g.useState(""),[q,le]=g.useState("Filter by Status"),[Q,te]=g.useState(null),[V,ee]=g.useState(1),[me,we]=g.useState("Overview"),[ve,Ae]=g.useState("Draft"),[be,Ie]=g.useState(null);g.useEffect(()=>{async function X(){try{const Ee=await re.get("/auth/me");Ie(Ee.data)}catch(Ee){console.error(Ee)}}X()},[]),g.useEffect(()=>{let X=!0;return(async()=>{const $e=L5e();if($e&&X){w($e);return}try{const Ye=await re.get("/auth/me"),J=AE(Ye?.data);if(J&&X){w(J);return}}catch{}X&&w(null)})(),()=>{X=!1}},[]);const G=g.useCallback(X=>X&&o.find($e=>String($e.id)===String(X))?.name||"",[o]),Ce=g.useCallback(X=>{if(!X)return"";const Ee=c.find($e=>String($e.id)===String(X));return Ee?`${Ee.first_name} ${Ee.last_name}`.trim():""},[c]),ce=g.useCallback(X=>{if(!X)return"--";const Ee=i.find($e=>String($e.id)===String(X));return Ee?.deal_name||Ee?.name||`Deal #${Z7(X)}`},[i]),F=g.useCallback(X=>{const Ee=i.find(J=>String(J.id)===String(X)),$e=P5e(Ee);let Ye=D5e(Ee);if(!Ye&&$e){const J=c.filter(ne=>String(ne.account_id||"")===String($e));if(J.length>0){const ne=[...J].sort((oe,Oe)=>{const et=`${oe.first_name||""} ${oe.last_name||""}`.trim().toLowerCase(),nt=`${Oe.first_name||""} ${Oe.last_name||""}`.trim().toLowerCase();return et.localeCompare(nt)});Ye=String(ne[0].id)}}if($e&&Ye){const J=c.find(ne=>String(ne.id)===String(Ye));J?.account_id&&String(J.account_id)!==String($e)&&(Ye="")}return{accountId:$e||"",contactId:Ye||""}},[i,c]),ie=g.useCallback(X=>{if(!X)return"--";if(X.deal?.deal_name)return X.deal.deal_name;if(X.deal?.name)return X.deal.name;const Ee=X.deal_id||X.deal?.id;return Ee?ce(Ee):"--"},[ce]),he=g.useCallback(X=>{if(!X)return"--";if(X.account?.name)return X.account.name;let Ee=X.account_id||X.account?.id;if(!Ee){const $e=X.deal_id||X.deal?.id;$e&&(Ee=F($e).accountId)}return Ee?G(Ee)||`Account #${Ee}`:"--"},[F,G]),Le=g.useCallback(X=>{if(!X)return"--";if(X.contact?.first_name||X.contact?.last_name)return`${X.contact?.first_name||""} ${X.contact?.last_name||""}`.trim()||"--";let Ee=X.contact_id||X.contact?.id;if(!Ee){const Ye=X.deal_id||X.deal?.id;Ye&&(Ee=F(Ye).contactId)}return(Ee?Ce(Ee):"")||(Ee?`Contact #${Ee}`:"--")},[F,Ce]),xe=g.useCallback(async(X=null)=>{r(!0);try{const Ee=await re.get("/quotes/admin/fetch-all"),Ye=[...Array.isArray(Ee.data)?Ee.data:[]].sort((J,ne)=>{const oe=J?.created_at||J?.updated_at||0,Oe=ne?.created_at||ne?.updated_at||0;return new Date(Oe)-new Date(oe)});if(n(Ye),X){const J=Ye.find(ne=>ne.id===X);v(J||null)}}catch(Ee){console.error(Ee),n([]),Ee.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),Ve=g.useCallback(async()=>{try{const X=await re.get("/deals/admin/fetch-all");l(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load deals (permission denied).")}},[]),ke=g.useCallback(async()=>{try{const X=await re.get("/accounts/admin/fetch-all");d(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),ye=g.useCallback(async()=>{try{const X=await re.get("/contacts/admin/fetch-all");m(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},[]),Me=g.useCallback(async()=>{try{const X=await re.get("/users/all");p(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{xe(),Ve(),ke(),ye(),Me()},[xe,Ve,ke,ye,Me]);const He=g.useMemo(()=>{const X=ae.trim().toLowerCase(),Ee=q.trim();return t.filter($e=>{const Ye=ie($e),J=he($e),ne=Le($e),oe=N_($e.presented_date,$e.validity_days),Oe=[$e.quote_id,Ye,J,ne,$e.total_amount?.toString(),$e.validity_days?.toString(),$e.presented_date?ng($e.presented_date):"",oe?ng(oe):"",$e.assigned_user?.first_name,$e.assigned_user?.last_name,$e.creator?.first_name,$e.creator?.last_name,$e.status,$e.notes,Gy($e.created_at),Gy($e.updated_at)],et=X===""||Oe.some(ht=>ht==null?!1:ht.toString().toLowerCase().includes(X)),nt=Ee==="Filter by Status"||vi($e.status)===Ee;return et&&nt})},[t,ae,q,ie,he,Le]),Be=Math.max(1,Math.ceil(He.length/ag)||1);g.useEffect(()=>ee(1),[ae,q]),g.useEffect(()=>{ee(X=>{const Ee=Math.max(1,Math.ceil(He.length/ag)||1);return X>Ee?Ee:X})},[He.length]);const dt=g.useMemo(()=>{const X=(V-1)*ag;return He.slice(X,X+ag)},[He,V]),M=()=>ee(X=>Math.max(X-1,1)),pe=()=>ee(X=>Math.min(X+1,Be)),se=X=>{v(X),we("Overview"),Ae(vi(X?.status)||"Draft")},je=()=>{v(null),we("Overview")},We=X=>{X.target.id==="quoteModalBackdrop"&&!z&&je()},Ne=g.useCallback(()=>{C(!1),_(!1),O(null),H(v_),T(!1)},[]),qe=X=>{X.target.id==="modalBackdrop"&&!A&&!z&&Ne()},De=X=>{const{name:Ee,value:$e}=X.target;if(Ee==="deal_id"){const{accountId:Ye,contactId:J}=F($e);H(ne=>({...ne,deal_id:$e,account_id:Ye,contact_id:J}));return}H(Ye=>({...Ye,[Ee]:$e}))},Je=()=>{H(v_),_(!1),O(null),C(!0),be?.role==="Sales"&&H(X=>({...X,assigned_to:be.id}))},at=X=>{if(!X)return;v(null);const Ee=X.deal?.id?String(X.deal.id):X.deal_id?String(X.deal_id):"",$e=Ee?F(Ee):{accountId:"",contactId:""},Ye=X.account?.id?String(X.account.id):X.account_id?String(X.account_id):$e.accountId,J=X.contact?.id?String(X.contact.id):X.contact_id?String(X.contact_id):$e.contactId,ne=X.assigned_user?.id?String(X.assigned_user.id):X.assigned_to?String(X.assigned_to):"";H({deal_id:Ee,account_id:Ye||"",contact_id:J||"",total_amount:X.total_amount?.toString()||"",presented_date:k5e(X.presented_date),validity_days:X.validity_days!==null&&X.validity_days!==void 0?String(X.validity_days):"",status:vi(X.status)||"Draft",assigned_to:ne,notes:X.notes||""}),_(!0),O(X.id),C(!0)},ot=X=>{if(!X)return;const Ee=X.quote_id||"this quote";D({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:X.id,name:Ee}})},[R,$]=g.useState(!1),I=X=>{if(X.preventDefault(),$(!0),!b){Y.error("Unable to determine current user. Please log in again.");return}if(!L.deal_id){Y.error("Deal is required.");return}if(!L.assigned_to){Y.error("Assigned To is required.");return}const $e=F(L.deal_id),Ye={deal_id:Number(L.deal_id),account_id:$e.accountId?Number($e.accountId):null,contact_id:$e.contactId?Number($e.contactId):null,total_amount:Number(L.total_amount),presented_date:L.presented_date||null,validity_days:L.validity_days===""?null:Number(L.validity_days),status:L.status||"Draft",assigned_to:L.assigned_to?Number(L.assigned_to):null,notes:L.notes?.trim()||null},J=S&&B?"update":"create",ne=ce(L.deal_id),oe=J==="create"?{...Ye,created_by_id:Number(b)}:Ye;D({title:J==="create"?"Confirm New Quote":"Confirm Update",message:J==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:J==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:oe,targetId:B||null,name:ne}})},U=async()=>{if(!E?.action){D(null);return}const{action:X}=E,{type:Ee,payload:$e,targetId:Ye,name:J}=X;K(!0);try{if(Ee==="create")T(!0),await re.post("/quotes/admin",$e),Y.success("Quote created successfully."),Ne(),await xe();else if(Ee==="update"){if(!Ye)throw new Error("Missing quote identifier for update.");T(!0),await re.put(`/quotes/admin/${Ye}`,$e),Y.success("Quote updated successfully."),Ne(),await xe(),x?.id===Ye&&v(null)}else if(Ee==="delete"){if(!Ye)throw new Error("Missing quote identifier for deletion.");const ne=x?.id;te(Ye),await re.delete(`/quotes/admin/${Ye}`),Y.success(`Quote "${J}" deleted successfully.`),await xe(ne&&ne!==Ye?ne:null),ne===Ye&&v(null)}}catch(ne){console.error(ne);const oe=Ee==="create"?"Failed to create quote. Please review the details and try again.":Ee==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Y.error(oe),(Ee==="create"||Ee==="update")&&T(!1),Ee==="delete"&&te(null)}finally{(Ee==="create"||Ee==="update")&&T(!1),Ee==="delete"&&te(null),K(!1),D(null)}},de=()=>{z||D(null)},ge=g.useCallback((X,Ee)=>{const $e=X?.deal_id??X?.deal?.id??"",Ye=$e?Number($e):null,J=Ye?F(String(Ye)):{accountId:"",contactId:""},ne=X?.account_id??X?.account?.id??J.accountId??null,oe=X?.contact_id??X?.contact?.id??J.contactId??null,Oe=X?.total_amount??0,et=X?.assigned_to??X?.assigned_user?.id??null;return{deal_id:Ye,account_id:ne!=null&&String(ne).trim()!==""?Number(ne):null,contact_id:oe!=null&&String(oe).trim()!==""?Number(oe):null,total_amount:Number(Oe),presented_date:X?.presented_date||null,validity_days:X?.validity_days===""||X?.validity_days===void 0||X?.validity_days===null?null:Number(X.validity_days),status:Ee,assigned_to:et!=null&&String(et).trim()!==""?Number(et):null,notes:X?.notes?.trim()||null}},[F]),ue=g.useCallback(async()=>{if(!x?.id)return;const X=vi(ve),Ee=[X,X.toLowerCase()],$e=async Ye=>re.patch(`/quotes/admin/${x.id}/status`,{status:Ye},{headers:{"Content-Type":"application/json"}});try{let Ye=!1;for(const J of Ee)try{await $e(J),Ye=!0;break}catch(ne){if(ne?.response?.status===422)continue;throw ne}if(!Ye){const J=ge(x,X);if(!J.deal_id){Y.error("Cannot update status: missing deal_id on selected quote.");return}if(!J.total_amount||J.total_amount<=0){Y.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await re.put(`/quotes/admin/${x.id}`,J)}Y.success(`Quote status updated to ${X}`),v(null),we("Overview"),await xe()}catch(Ye){console.error(Ye);const J=Ye?.response?.data?.message||(Ye?.response?.data?.errors?Object.values(Ye.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Y.error(J)}},[x,ve,xe,ge]),Se=[{label:"Filter by Status",value:"Filter by Status"},...b_.map(X=>({label:X.label,value:X.value}))],Fe=E?.action?.type==="delete"?E.action.targetId:null,ft=x&&(Q===x.id||Fe===x.id),vt=x&&Q===x.id,ze=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:X=>X.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:je,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ie(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${E5e(x.status)}`,children:w_(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>at(x),disabled:z||E?.action?.type==="update"&&E.action.targetId===x.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ot(x),disabled:!!ft,children:vt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(X=>a.jsx("button",{onClick:()=>we(X),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${me===X?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:X},X))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:J7(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ie(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:he(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Le(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:ng(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:ng(N_(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:w_(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Gy(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Gy(x.updated_at)||"N/A"})]})]})}),me==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||vi(x.status)||"Draft",onChange:X=>Ae(X.target.value),children:b_.map(X=>a.jsx("option",{value:X.value,children:X.label},X.value))}),a.jsx("button",{onClick:ue,disabled:vi(ve)===vi(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${vi(ve)===vi(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,yt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(da,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Je(),$(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:X=>W(X.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:q,onChange:X=>le(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Se.map(X=>a.jsx("option",{value:X.value,children:X.label},X.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):He.length>0?dt.map(X=>{const Ee=N_(X.presented_date,X.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>se(X),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:J7(X.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:he(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Le(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:X.total_amount?`${Number(X.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${T5e(X.status)}`,children:w_(X.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:X.assigned_user?`${X.assigned_user.first_name} ${X.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:ng(Ee)||"--"})})]},X.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:He.length,pageSize:ag,currentPage:V,onPrev:M,onNext:pe,label:"quotes"})]}),Te=j?a.jsx("div",{id:"modalBackdrop",onClick:qe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:X=>X.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ne(),$(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||z,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:I,children:[a.jsx(tU,{label:"Deal",name:"deal_id",value:L.deal_id,onChange:X=>{const{accountId:Ee,contactId:$e}=F(X);H(Ye=>({...Ye,deal_id:X,account_id:Ee,contact_id:$e}))},items:Array.isArray(i)?i:[],getLabel:X=>`${Z7(X?.deal_id??"")} ${X?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:R,disabled:A||i.length===0,className:"md:col-span-2"}),a.jsx(eU,{label:"Account",value:G(L.account_id)||(L.account_id?`Account #${L.account_id}`:""),disabled:!0}),a.jsx(eU,{label:"Contact",value:Ce(L.contact_id)||(L.contact_id?`Contact #${L.contact_id}`:""),disabled:!0}),a.jsx(j_,{label:"Total Amount",name:"total_amount",type:"number",value:L.total_amount,onChange:De,placeholder:"0.00",disabled:A}),a.jsx(j_,{label:"Presented Date",name:"presented_date",type:"date",value:L.presented_date,onChange:De,disabled:A}),a.jsx(j_,{label:"Validity Days",name:"validity_days",type:"number",value:L.validity_days,onChange:De,placeholder:"30",disabled:A}),a.jsx(tU,{label:"Assigned To",value:L.assigned_to||"",onChange:X=>H(Ee=>({...Ee,assigned_to:X})),items:Array.isArray(h)?h:[],getLabel:X=>{const Ee=`${X?.first_name??""} ${X?.last_name??""}`.trim();return Ee?X?.role?`${Ee} (${X.role})`:Ee:X?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:R,disabled:A||be?.role==="Sales"}),a.jsx(M5e,{label:"Status",name:"status",value:L.status,onChange:De,options:b_,required:!0,disabled:A,className:"md:col-span-2"}),a.jsx($5e,{label:"Notes",name:"notes",value:L.notes,onChange:De,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Ne(),$(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||z,children:A?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,st=E?a.jsx(R5e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:U,onCancel:de,loading:z}):null;return a.jsxs(a.Fragment,{children:[x?ze:yt,Te,st]})}function j_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function eU({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function M5e({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const d=n!=null?String(n):"",m=r.some(h=>String(h.value)===d)?d:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function tU({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(I5e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function I5e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function $5e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function R5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function z5e(){const{userRole:e}=Zs();return a.jsx(ij,{currentUserRole:e,currentUserId:null})}const fd=10;function U5e(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,s]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,o]=g.useState(1),d=async()=>{try{const v=await re.get("/logs/read-all");t(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const c=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=n.trim().toLowerCase(),j=r?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,T=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,E=[_,T,S.action,S.entity_type,A,S.description],D=v===""||E.some(K=>K==null?!1:K.toString().toLowerCase().includes(v)),z=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return D&&z}).sort((S,_)=>{const A=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,n,r]),m=Math.max(1,Math.ceil(c.length/fd)||1);g.useEffect(()=>{o(1)},[n,r]),g.useEffect(()=>{o(v=>{const j=Math.max(1,Math.ceil(c.length/fd)||1);return v>j?j:v})},[c.length]);const h=g.useMemo(()=>{const v=(l-1)*fd;return c.slice(v,v+fd)},[c,l]);c.length===0||(l-1)*fd+1,Math.min(l*fd,c.length);const p=()=>o(v=>Math.max(v-1,1)),b=()=>o(v=>Math.min(v+1,m)),w=()=>{if(!c.length){wx.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],j=c.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),C=[v.join(","),...j.map(T=>T.map(E=>`"${String(E).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},x=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(It,{message:"Loading audit logs..."}),a.jsx(vx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Nt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ns,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[a.jsx(Rc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:v=>s(v.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(c)&&c.length>0?h.map((v,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(v.action)}`,children:v.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:c.length,pageSize:fd,currentPage:l,onPrev:p,onNext:b,label:"logs"})]})}const aU=["To Do","In Progress","Review","Completed"],sg=10,Vy=e=>{if(!e)return"To Do";const t=e.toLowerCase();return t==="not started"||t==="to do"?"To Do":t==="in progress"?"In Progress":t==="review"?"Review":t==="completed"?"Completed":"To Do"},F5e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},nU=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},B5e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,c=l||o||i||r,m=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:c,related_type:m}},H5e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,c=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let x="Lead",v="",j="",C="",S="Lead",_="",A="",T="";const E=o(),D=p(),z=l(),K=h();if(E){x="Account",S="Account",_=D,v=String(E);const B=d(),O=c(),L=b(),H=w();B?(j="Contact",A="Contact",T=L,C=String(B)):O&&(A="Deal",j="Deal",T=H,C=String(O))}else z?(S="Lead",_=K,x="Lead",v=String(z)):e.related_type==="Account"&&(x="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:A,relatedTo2Text:T,subject:e.title,relatedType1:x,relatedTo1:v,relatedType2:j,relatedTo2:C}};function G5e(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),n=e?.role==="Sales",[s,r]=g.useState("board"),[i,l]=g.useState(!1),[o,d]=g.useState(null),[c,m]=g.useState(!1),[h,p]=g.useState([]),[b,w]=g.useState(!0),[x,v]=g.useState(""),[j,C]=g.useState("Filter by Status"),[S,_]=g.useState("Filter by Priority"),[A,T]=g.useState([]),[E,D]=g.useState(1),[z,K]=g.useState(null),[B,O]=g.useState(!1),L=bt(),H=pa(),[ae,W]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{i&&!ae.id&&n&&e&&!ae.assignedTo&&W(ie=>({...ie,assignedTo:e.id}))},[i,ae.id,e,n]),g.useEffect(()=>{const ie=H.state?.openTaskModal,he=H.state?.initialTaskData;ie&&(l(!0),he&&W(Le=>({...Le,...he})),L(H.pathname,{replace:!0,state:{}}))},[H,L]);const q=async()=>{try{const ie=await re.get("/users/all");T(Array.isArray(ie.data)?ie.data:[])}catch(ie){console.error("Failed to fetch users:",ie),Y.error("Failed to fetch users.")}},le=async()=>{try{w(!0);const ie=await re.get("/tasks/all"),Le=(Array.isArray(ie.data)?ie.data:[]).map(H5e);Le.sort((xe,Ve)=>{const ke=xe.createdAt?new Date(xe.createdAt):0;return(Ve.createdAt?new Date(Ve.createdAt):0)-ke}),console.log("Fetched Tasks:",Le),p(Le),s==="list"&&D(1)}catch(ie){console.error("Failed to load tasks:",ie),Y.error("Failed to load tasks.")}finally{w(!1)}};g.useEffect(()=>{!t&&e&&(q(),le())},[t,e]);const Q=()=>{d(null),W({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},te=(ie=null,he=!1)=>{d(ie),m(he),ie?W({id:ie.id,subject:ie.title||"",description:ie.description||"",priority:ie.priority||"Normal",status:ie.status||"Not started",dueDate:F5e(ie.dueDate),assignedTo:ie.assignedToId?String(ie.assignedToId):"",notes:ie.notes||"",relatedType1Text:ie.relatedType1Text||"",relatedTo1Text:ie.relatedTo1Text||"",relatedType2Text:ie.relatedType2Text||"",relatedTo2Text:ie.relatedTo2Text||"",relatedType1:ie.relatedType1||"",relatedTo1:ie.relatedTo1||"",relatedType2:ie.relatedType2||"",relatedTo2:ie.relatedTo2||""}):Q(),l(!0)},V=()=>{l(!1),d(null),m(!1),Q()},ee=async ie=>{const he=B5e(ie);try{o&&!c?(await re.put(`/tasks/${o.id}`,he),Y.success("Task updated successfully.")):(await re.post("/tasks/create",he),Y.success("Task created successfully.")),l(!1),await le()}catch(Le){console.error("Failed to save task:",Le);const xe=Le.response?.data?.detail||"Failed to save task.";Y.error(xe)}},me=ie=>{ie&&K({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:ie.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ie.id}})},we=async()=>{if(!z?.action){K(null);return}const{action:ie}=z;O(!0);try{ie.type==="delete"&&(await re.delete(`/tasks/${ie.targetId}`),Y.success("Task deleted successfully."),await le())}catch(he){console.error("Task action failed:",he),Y.error("Failed to delete task.")}finally{O(!1),K(null)}},ve=()=>{B||K(null)},Ae=g.useMemo(()=>{const ie=x.trim().toLowerCase();return[...h].sort((Le,xe)=>{const Ve=Le.createdAt?new Date(Le.createdAt):0;return(xe.createdAt?new Date(xe.createdAt):0)-Ve}).filter(Le=>{const xe=ie===""||Le.title?.toLowerCase().includes(ie)||Le.description?.toLowerCase().includes(ie)||Le.assignedToName?.toLowerCase().includes(ie)||Le.createdBy?.toLowerCase().includes(ie),Ve=j==="Filter by Status"||Vy(Le.status)===j,ke=S==="Filter by Priority"||Le.priority===S;return xe&&Ve&&ke})},[h,x,j,S]);g.useEffect(()=>{D(1)},[x,j,S,s]),g.useEffect(()=>{if(s==="list"){const ie=Ae.length===0?1:Math.ceil(Ae.length/sg);E>ie&&D(ie)}},[Ae.length,E,s]);const be=g.useMemo(()=>{if(s==="board")return Ae;const ie=(E-1)*sg;return Ae.slice(ie,ie+sg)},[Ae,E,s]),Ie=g.useMemo(()=>{const ie=new Date;return[{title:"To Do",value:h.filter(he=>he.status==="Not started").length,icon:ds,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:h.filter(he=>he.status==="In progress").length,icon:Zr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:h.filter(he=>he.status==="Completed").length,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:h.filter(he=>he.dueDate&&new Date(he.dueDate)<ie&&he.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:h.filter(he=>he.priority==="High").length,icon:So,color:"text-orange-600",bgColor:"bg-orange-100"}]},[h]),G=ie=>ie.dueDate&&new Date(ie.dueDate)<new Date&&ie.status!=="Completed",Ce=ie=>{switch(Vy(ie.status)){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ce=ie=>{switch(Vy(ie)){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},F=ie=>{switch(ie){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(b||t)&&a.jsx(It,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zr,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>te(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(na,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(ie=>a.jsx(V5e,{...ie},ie.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:x,onChange:ie=>v(ie.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:j,onChange:ie=>C(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),aU.map(ie=>a.jsx("option",{children:ie},ie))]}),a.jsxs("select",{value:S,onChange:ie=>_(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>r("board"),className:`px-4 py-2 rounded-full text-sm ${s==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>r("list"),className:`px-4 py-2 rounded-full text-sm ${s==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!b&&!t&&Ae.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!b&&!t&&Ae.length>0&&s==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:aU.map(ie=>{const he=be.filter(Le=>Vy(Le.status)===ie);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:ie}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:he.length})]}),a.jsx("div",{className:`space-y-3 ${he.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:he.length>0?he.map(Le=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${Ce(Le)}`,onClick:()=>te(Le,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Le.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Le.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Le.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:G(Le)?"text-red-600":"text-gray-600",children:Le.dateAssigned?nU(Le.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),te(Le)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(Ma,{})}),a.jsx("button",{type:"button",onClick:xe=>{xe.stopPropagation(),me(Le)},className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})]},Le.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},ie)})}),!b&&!t&&Ae.length>0&&s==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:be.map(ie=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",ie),te(ie,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:ie.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(ie.status||"To Do")}`,children:ie.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${F(ie.priority||"Low")}`,children:ie.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:ie.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${G(ie)?"text-red-600 font-medium":""}`,children:ie.dateAssigned?nU(ie.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:he=>he.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>te(ie),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>me(ie),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(Ot,{})," Delete"]})]})})]},ie.id))})]})})}),!b&&!t&&s==="list"&&a.jsx(Vt,{className:"mt-6",totalItems:Ae.length,pageSize:sg,currentPage:Ae.length===0?0:E,onPrev:()=>D(ie=>Math.max(ie-1,1)),onNext:()=>D(ie=>Math.min(ie+1,Math.max(1,Math.ceil(Ae.length/sg)||1))),label:"tasks"}),a.jsx(Gx,{isOpen:i,onClose:V,onSave:ee,onEdit:()=>m(!1),setFormData:W,formData:ae,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:me}),z&&a.jsx(W5e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:we,onCancel:ve,loading:B})]})}function V5e({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function W5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const iQ=e=>e?e.toUpperCase():"",Wy=e=>{const t=iQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},q5e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Y5e=e=>{const t=iQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},C_=10,S_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},K5e=()=>{const e=bt(),t=pa(),{user:n}=Xt(),s=n?.role==="Sales",[r]=Ss(),i=r.get("id"),l=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[o,d]=g.useState([]),[c,m]=g.useState(!1),[h,p]=g.useState([]),[b,w]=g.useState(""),[x,v]=g.useState("Filter by Status"),[j,C]=g.useState(!1),[S,_]=g.useState(null),[A,T]=g.useState(1),[E,D]=g.useState(S_),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(!1),[ae,W]=g.useState(null),[q,le]=g.useState(!1);g.useEffect(()=>{j&&!z&&s&&n&&!E.assignedTo&&D(ce=>({...ce,assignedTo:n.id}))},[j,z,n,s]),g.useEffect(()=>{const ce=t.state?.openMeetingModal,F=t.state?.initialMeetingData?.relatedTo||r.get("id");(ce||F)&&(C(!0),t.state?.initialMeetingData&&D(ie=>({...ie,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]);const Q=async()=>{if(i&&l){const ce=sessionStorage.getItem("meetingDetailData");if(ce)try{const F=JSON.parse(ce);if(F.id===parseInt(i)){_(F),sessionStorage.removeItem("meetingDetailData");return}}catch(F){console.error(F)}}m(!0);try{const ce=await re.get("/meetings/admin/fetch-all"),ie=[...Array.isArray(ce.data)?ce.data:[]].sort((he,Le)=>{const xe=he?.createdAt?new Date(he.createdAt).getTime():0;return(Le?.createdAt?new Date(Le.createdAt).getTime():0)-xe});if(d(ie),i&&!S){const he=ie.find(Le=>Le.id===parseInt(i));he&&_(he)}console.log(ce.data)}catch{Y.error("Failed to load meetings.")}finally{m(!1)}},te=async()=>{try{const ce=await re.get("/users/all");p(Array.isArray(ce.data)?ce.data:[])}catch(ce){console.error(ce)}};g.useEffect(()=>{Q(),te()},[]);const V=ce=>w(ce.target.value),ee=g.useMemo(()=>{const ce=b.trim().toLowerCase(),F=x.trim().toUpperCase();return o.filter(ie=>{const he=[ie?.activity,ie?.description,ie?.relatedTo,ie?.assignedTo],Le=ce===""||he.some(Ve=>Ve&&Ve.toString().toLowerCase().includes(ce)),xe=F==="FILTER BY STATUS"||Wy(ie.status||"PENDING")===F;return Le&&xe})},[o,b,x]),me=g.useMemo(()=>{const ce=(A-1)*C_;return ee.slice(ce,ce+C_)},[ee,A]),we=()=>{C(!1),D(S_),K(!1),O(null),H(!1)},ve=()=>{D(S_),K(!1),O(null),C(!0)},Ae=ce=>{let F="";if(ce.meet_assign_to?.id)F=String(ce.meet_assign_to.id);else if(ce.assignedTo){const He=h.find(Be=>`${Be.first_name} ${Be.last_name}`===ce.assignedTo);F=He?String(He.id):""}const ie=He=>{if(!He)return"";try{const Be=new Date(He),dt=Be.getTimezoneOffset()*6e4;return new Date(Be.getTime()-dt).toISOString().slice(0,16)}catch{return""}};let he="Lead",Le="",xe="Contact",Ve="";if(ce.lead)he="Lead",Le=String(ce.lead.id);else if(ce.account)he="Account",Le=String(ce.account.id),ce.contact?(xe="Contact",Ve=String(ce.contact.id)):ce.deal&&(xe="Deal",Ve=String(ce.deal.id));else if(ce.relatedType||ce.related_type){const He=ce.relatedType||ce.related_type,Be=ce.related_to||ce.relatedToId;He==="Lead"?(he="Lead",Le=String(Be)):(he="Account",Le=ce.account_id?String(ce.account_id):"")}const ke={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ye=Wy(ce.status),Me=ke[ye]||"Planned";D({subject:ce.subject||ce.activity||"",location:ce.location||"",startTime:ie(ce.start_time||ce.startTime),endTime:ie(ce.end_time||ce.endTime),status:Me,notes:ce.description||ce.notes||"",assignedTo:F,relatedType1:he,relatedTo1:Le,relatedType2:xe,relatedTo2:Ve}),K(!0),O(ce.id),_(null),C(!0)},be=ce=>{if(!ce.subject?.trim())return Y.error("Subject is required.");if(!ce.startTime)return Y.error("Start time is required.");if(ce.endTime&&!(new Date(ce.endTime)-new Date(ce.startTime)>0))return Y.error("End time must be after start time.");ce.relatedType1,ce.relatedTo1,ce.relatedType1==="Account"&&ce.relatedType2&&ce.relatedTo2&&(ce.relatedType2,ce.relatedTo2);const F={...ce,assignedTo:parseInt(ce.assignedTo),relatedTo1:parseInt(ce.relatedTo1),relatedTo2:parseInt(ce.relatedTo2)},ie=z&&B?"update":"create";W({title:ie==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ie} "${F.subject}"?`,confirmLabel:ie==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ie,payload:F,targetId:B,name:F.subject}})},Ie=async()=>{if(!ae?.action)return;const{type:ce,payload:F,targetId:ie,name:he}=ae.action;console.log(F),le(!0);try{ce==="create"?(H(!0),await re.post("/meetings/create",F),Y.success(`Meeting "${he}" created.`),we(),await Q()):ce==="update"?(H(!0),await re.put(`/meetings/${ie}`,F),Y.success(`Meeting "${he}" updated.`),we(),await Q()):ce==="delete"&&(await re.delete(`/meetings/${ie}`),Y.success(`Meeting "${he}" deleted.`),S?.id===ie&&_(null),await Q())}catch(Le){const xe=Le.response?.data?.detail||"Action failed.";Y.error(typeof xe=="string"?xe:JSON.stringify(xe)),console.error(xe)}finally{H(!1),le(!1),W(null)}},G=ce=>{W({title:"Delete Meeting",message:`Permanently delete "${ce.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ce.id,name:ce.activity}})},Ce=async(ce,F)=>{try{await re.put(`/meetings/${ce}`,{status:F}),Y.success("Status updated"),Q(),_(null)}catch{Y.error("Failed to update status")}};return l&&i?S?a.jsx(Ic,{meeting:S,onClose:()=>{_(null),e("/admin/dashboard")},onEdit:Ae,onDelete:G,onStatusUpdate:Ce}):a.jsx(It,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[c&&a.jsx(It,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Nt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:ve,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(na,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:b,onChange:V,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:ce=>v(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:me.length>0?me.map(ce=>a.jsxs("tr",{onClick:()=>_(ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ce.subject}),a.jsxs("td",{className:"py-3 px-4",children:[ce.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.lead.title}),ce.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.account.name}),ce.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ce.contact.first_name," ",ce.contact.last_name]}),ce.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:q5e(ce.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[ce.meet_assign_to.first_name," ",ce.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Y5e(Wy(ce.status))}`,children:Wy(ce.status).replace("_"," ")})})]},ce.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Vt,{totalItems:ee.length,pageSize:C_,currentPage:A,onPrev:()=>T(ce=>Math.max(1,ce-1)),onNext:()=>T(ce=>ce+1),label:"meetings"}),j&&a.jsx(xj,{onClose:we,formData:E,setFormData:D,isEditing:z,onSubmit:be,isSubmitting:L||q,users:h,currentUser:n}),S&&a.jsx(Ic,{meeting:S,onClose:()=>_(null),onEdit:Ae,onDelete:G,onStatusUpdate:Ce}),ae&&a.jsx(Q5e,{open:!0,title:ae.title,message:ae.message,confirmLabel:ae.confirmLabel,variant:ae.variant,onConfirm:Ie,onCancel:()=>W(null),loading:q})]})};function Q5e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${c}`,children:l?"...":s})]})]})})}const X5e=10,Z5e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],J5e=e=>e?String(e).toUpperCase():"",Gm=e=>{const t=J5e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},__=e=>{const t=Gm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},sU=e=>{switch(Gm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},rU=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function eMe(){const[e,t]=g.useState(!1),[n,s]=g.useState(null),[r,i]=g.useState(null),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(!1),[_,A]=g.useState(!1),[T,E]=g.useState("PLANNED"),[D,z]=g.useState(!1),[K,B]=g.useState(!1),[O]=Ss(),L=bt(),H=pa(),{user:ae}=Xt(),W=ae?.role==="Sales",le={subject:"",call_time:(()=>{const se=new Date,je=se.getFullYear(),We=String(se.getMonth()+1).padStart(2,"0"),Ne=String(se.getDate()).padStart(2,"0");return`${je}-${We}-${Ne}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Q,te]=g.useState(le);g.useEffect(()=>{e&&!w&&W&&ae&&!Q.assigned_to&&te(se=>({...se,assigned_to:ae.id}))},[e,w,ae,W]),g.useEffect(()=>{const se=H.state?.openCallModal,je=H.state?.initialCallData?.relatedTo1||O.get("id");(se||je)&&(t(!0),H.state?.initialCallData&&te(We=>({...We,...H.state.initialCallData})),je&&te(We=>({...We,relatedTo1:je})),L(H.pathname,{replace:!0,state:{}}))},[H,O,L]);const V=async()=>{try{B(!0);const se=await re.get("/calls/admin/fetch-all"),We=[...Array.isArray(se.data)?se.data:[]].sort((Ne,qe)=>{const De=Ne?.created_at?new Date(Ne.created_at):0;return(qe?.created_at?new Date(qe.created_at):0)-De});h(We)}catch(se){console.error("Error fetching calls:",se),Y.error("Failed to load calls")}finally{B(!1)}},ee=async()=>{try{const se=await re.get("/users/all");b(se.data)}catch(se){console.error("Error fetching users: ",se)}};g.useEffect(()=>{ee(),V()},[]);const me=[],we="",ve="Filter by Status",Ae="Filter by Users",be=1,Ie=m,G=m,Ce=m.length,ce=m.filter(se=>Gm(se.status)==="PLANNED").length,F=m.filter(se=>Gm(se.status)==="HELD").length,ie=m.filter(se=>Gm(se.status)==="NOT_HELD").length,he=[{title:"Total",value:Ce,icon:js,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ce,icon:ds,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:F,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ie,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Le,xe]=g.useState("Overview"),Ve=se=>{const{name:je,value:We}=se.target;te(Ne=>{const qe={...Ne,[je]:We};return je==="relatedType1"&&(qe.relatedTo1="",We==="Lead"?(qe.relatedType2=null,qe.relatedTo2=null,c([])):We==="Account"&&(qe.relatedType2="Contact")),je==="relatedType2"&&(qe.relatedTo2=""),qe})};g.useEffect(()=>{const se=async()=>{try{o([]);let je;Q.relatedType1==="Lead"?je=await re.get("/leads/admin/getLeads"):Q.relatedType1==="Account"&&(je=await re.get("/accounts/admin/fetch-all"));let We=[];if(je&&Array.isArray(je.data)?We=je.data:We=[],w&&Q.relatedTo1)try{let Ne;Q.relatedType1==="Lead"?Ne=await re.get(`/leads/get/${Q.relatedTo1}`):Q.relatedType1==="Account"&&(Ne=await re.get(`/accounts/get/${Q.relatedTo1}`)),Ne&&Ne.data&&(We.some(De=>String(De.id)===String(Q.relatedTo1))||(We=[Ne.data,...We]))}catch(Ne){console.error("Error fetching specific related item:",Ne)}o(We)}catch(je){console.error("Error fetching data:",je),o([])}};Q.relatedType1&&se()},[Q.relatedType1,w,Q.relatedTo1]),g.useEffect(()=>{const se=async()=>{try{c([]);let je;if(Q.relatedType1==="Account"&&Q.relatedTo1)Q.relatedType2==="Contact"?je=await re.get(`/contacts/from-acc/${Q.relatedTo1}`):Q.relatedType2==="Deal"&&(je=await re.get(`/deals/from-acc/${Q.relatedTo1}`));else{c([]);return}je&&Array.isArray(je.data)?c(je.data):c([])}catch(je){console.error("Error fetching data:",je),c([])}};Q.relatedType2&&se()},[Q.relatedType2,Q.relatedTo1,Q.relatedType1]);const ke=se=>{if(se.preventDefault(),!Q.assigned_to){Y.error("Please assign the call to a user.");return}const je={...Q,duration_minutes:Q.duration_minutes?parseInt(Q.duration_minutes,10):null,relatedTo1:Q.relatedTo1?parseInt(Q.relatedTo1,10):null,relatedTo2:Q.relatedType1==="Lead"?null:Q.relatedTo2?parseInt(Q.relatedTo2,10):null,relatedType2:Q.relatedType1==="Lead"?null:Q.relatedType2,assigned_to:Q.assigned_to?parseInt(Q.assigned_to,10):null},We=w&&v?"update":"create",Ne=(Q.subject||"").trim()||"Untitled Call";i({title:We==="create"?"Confirm New Call":"Confirm Update",message:We==="create"?`Create "${Ne}"?`:`Save changes to "${Ne}"?`,confirmLabel:We==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:je,targetId:v||null,name:Ne}})},ye=se=>s(se),Me=()=>{t(!1),x(!1),j(null)},He=async()=>{if(!r?.action){i(null);return}const{action:se}=r,{type:je,payload:We,targetId:Ne,name:qe}=se;A(!0);try{if(je==="create")S(!0),await re.post("/calls/create",We),Y.success(`Call "${qe}" created successfully.`),t(!1),te(le),x(!1),j(null),await V();else if(je==="update"){if(!Ne)throw new Error("Missing call identifier for update.");S(!0),await re.put(`/calls/${Ne}`,We),Y.success(`Call "${qe}" updated successfully.`),t(!1),te(le),x(!1),j(null),await V()}else if(je==="delete"){if(!Ne)throw new Error("Missing call identifier for deletion.");await re.delete(`/calls/${Ne}`),Y.success(`Call "${qe}" deleted successfully.`),n?.id===Ne&&s(null),await V()}}catch(De){const Je=je==="create"?"Failed to create call. Please review the details and try again.":je==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",at=De?.response?.data?.detail||Je;Y.error(at)}finally{(je==="create"||je==="update")&&S(!1),A(!1),i(null)}},Be=()=>{_||i(null)},dt=async()=>{if(n?.id)try{z(!0),await re.put(`/calls/${n.id}`,{status:T}),Y.success(`Status updated to ${__(T)}`),h(se=>Array.isArray(se)?se.map(je=>je.id===n.id?{...je,status:T}:je):se),s(null)}catch(se){const je=se.response?.data?.detail||"Failed to update status.";Y.error(je)}finally{z(!1)}};g.useEffect(()=>{n&&E(Gm(n.status))},[n]);const M=n?a.jsxs("div",{id:"callModalBackdrop",onClick:se=>se.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[K&&a.jsx(It,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${sU(n.status)}`,children:__(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const se=De=>{if(!De)return"";const Je=new Date(De),at=Je.getFullYear(),ot=String(Je.getMonth()+1).padStart(2,"0"),R=String(Je.getDate()).padStart(2,"0"),$=String(Je.getHours()).padStart(2,"0"),I=String(Je.getMinutes()).padStart(2,"0");return`${at}-${ot}-${R}T${$}:${I}`},je=n.lead?"Lead":n.account?"Account":"Lead",We=n.lead?n.lead.id:n.account?n.account.id:null,Ne=je==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",qe=je==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;te({subject:n.subject||"",call_time:se(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:je,relatedType2:Ne,relatedTo1:We?String(We):"",relatedTo2:qe?String(qe):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),s(null),t(!0)},children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const se=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${se}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:se}})},children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(se=>a.jsx("button",{onClick:()=>xe(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Le===se?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Le==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Hl,{label:"Call Time",value:rU(n.call_time)}),a.jsx(Hl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Hl,{label:"Direction",value:n.direction||"--"}),a.jsx(Hl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Hl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Hl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Hl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Hl,{label:"Deal",value:n.deal.name}),a.jsx(Hl,{label:"Created At",value:rU(n.created_at)})]})}),Le==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:se=>E(se.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:dt,disabled:D,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:D?"Updating...":"Update"})]})]})]})]})]}):null,pe=e?a.jsx("div",{id:"modalBackdrop",onClick:se=>se.target.id==="modalBackdrop"&&Me(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:Me,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ke,children:[a.jsx(aMe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Q.subject,onChange:Ve,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Ve,value:Q.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(A_,{items:Array.isArray(l)?l:[],value:Q.relatedTo1??"",placeholder:`Search ${Q.relatedType1||"here"}...`,getLabel:se=>Q.relatedType1==="Lead"?se.title:se.name??"",onChange:se=>te(je=>({...je,relatedTo1:se})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Ve,value:Q.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Q.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(A_,{disabled:Q.relatedType1==="Lead"||C,items:Array.isArray(d)?d:[],value:Q.relatedTo2??"",placeholder:Q.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${Q.relatedType2||"Contact"}...`:`No ${Q.relatedType2||""} data found`,getLabel:se=>Q.relatedType2==="Contact"?`${se.first_name??""} ${se.last_name??""}`.trim():se.name??"",onChange:se=>te(je=>({...je,relatedTo2:se}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:Q.call_time,onChange:Ve,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:Q.duration_minutes,onChange:Ve,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(A_,{items:Array.isArray(p)?p:[],value:Q.assigned_to??"",placeholder:"Search an account...",getLabel:se=>`${se.first_name} ${se.last_name}`,onChange:se=>te(je=>({...je,assigned_to:se})),disabled:W})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Ve,value:Q.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Ve,value:Q.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(nMe,{className:"col-span-2",label:"Notes",value:Q.notes,onChange:Ve,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:Me,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(js,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{te(le),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:he.map(se=>a.jsx(tMe,{...se},se.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:we})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:ve,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Z5e.map(se=>a.jsx("option",{value:se.value,children:se.label},se.value))]}),a.jsxs("select",{defaultValue:Ae,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),me.map(se=>a.jsx("option",{value:se.name,children:se.name},se.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:K?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(It,{message:"Loading calls..."})})}):G.length>0?G.map(se=>a.jsxs("tr",{onClick:()=>ye(se),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:se.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[se.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.lead.title}),se.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.account.name}),se.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[se.contact.first_name," ",se.contact.last_name]}),se.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:se.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:se.call_time?new Date(se.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:se?.call_assign_to?`${se.call_assign_to.first_name} ${se.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${sU(se.status)}`,children:__(se.status)})})]},se.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Vt,{totalItems:Ie.length,pageSize:X5e,currentPage:be,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),M,pe,r&&a.jsx(sMe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:He,onCancel:Be,loading:_})]})}function tMe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function aMe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function nMe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Hl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function sMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function A_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function rMe({toggleSidebar:e}){const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState(0),c=g.useRef(null),m=g.useRef(null),h=pa(),p=bt(),{logout:b}=Zs(),{user:w,fetchUser:x}=Xt(),j={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[h.pathname]||"Manager Panel";return g.useEffect(()=>{x()},[]),g.useEffect(()=>{const C=()=>x();return window.addEventListener("userProfileUpdated",C),()=>window.removeEventListener("userProfileUpdated",C)},[x]),g.useEffect(()=>{if(!w?.id)return;const C=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=C?"localhost:8000":window.location.host,A=`${S}//${_}/ws/notifications?user_id=${w.id}`,T=new WebSocket(A);return T.onmessage=E=>{const D=JSON.parse(E.data);l(z=>[D,...z]),d(z=>z+1)},()=>T.close()},[w?.id]),g.useEffect(()=>{function C(S){c.current&&!c.current.contains(S.target)&&n(!1),m.current&&!m.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Wp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:j})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:m,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(Gp,{className:"text-xl"}),o>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:o})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{l([]),d(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((C,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:C.title||C.message||"New Notification"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:c,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[w?.first_name," ",w?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:w?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[w?.first_name," ",w?.middle_name," ",w?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[a.jsx("button",{onClick:()=>{p("/manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-100 my-2"}),a.jsx("button",{onClick:b,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function iMe(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1),[r,i]=g.useState(!1),[l,o]=g.useState(!1),d=pa(),{user:c}=Xt();g.useEffect(()=>{c&&console.log("Fetched user:",c)},[c]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",b=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(d.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),c&&c.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:c.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(St,{to:"/manager/dashboard",className:({isActive:w})=>w?m:h,children:[a.jsx(Vp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-lg"}),"Sales"]}),a.jsx(wt,{className:`transition-transform ${e||b?"rotate-180":""}`})]}),(e||b)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/manager/accounts",className:({isActive:w})=>w?m:h,children:[a.jsx(ba,{})," Accounts"]}),a.jsxs(St,{to:"/manager/contacts",className:({isActive:w})=>w?m:h,children:[a.jsx(Ut,{})," Contacts"]}),a.jsxs(St,{to:"/manager/leads",className:({isActive:w})=>w?m:h,children:[a.jsx(Ga,{})," Leads"]}),a.jsxs(St,{to:"/manager/deals",className:({isActive:w})=>w?m:h,children:[a.jsx(Yt,{})," Deals"]}),a.jsxs(St,{to:"/manager/quotes",className:({isActive:w})=>w?m:h,children:[a.jsx(da,{})," Quotes"]}),a.jsxs(St,{to:"/manager/targets",className:({isActive:w})=>w?m:h,children:[a.jsx(Nr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"text-lg"}),"Activity"]}),a.jsx(wt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/manager/tasks",className:({isActive:w})=>w?m:h,children:[a.jsx(zt,{})," Tasks"]}),a.jsxs(St,{to:"/manager/meetings",className:({isActive:w})=>w?m:h,children:[a.jsx(Nt,{})," Meetings"]}),a.jsxs(St,{to:"/manager/calls",className:({isActive:w})=>w?m:h,children:[a.jsx(js,{})," Calls"]}),a.jsxs(St,{to:"/manager/audit",className:({isActive:w})=>w?m:h,children:[a.jsx(Ns,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(St,{to:"/manager/territory",className:({isActive:w})=>w?m:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zc,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(XE,{className:"text-lg"}),"User Management"]}),a.jsx(wt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/manager/users",className:({isActive:w})=>w?m:h,children:[a.jsx(ba,{})," Users"]}),a.jsxs(St,{to:"/manager/manage-account",className:({isActive:w})=>w?m:h,children:[a.jsx(Ut,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(rMe,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(_f,{})})]})]})}const lMe=e=>a.jsx($t,{...e}),oMe=e=>a.jsx(wu,{...e}),cMe=e=>a.jsx(ZE,{...e}),lQ=e=>a.jsx(ds,{...e}),dMe=e=>a.jsx(mw,{...e}),uMe=e=>a.jsx(qE,{...e}),mMe=e=>a.jsx(Nt,{...e}),fMe=e=>a.jsx(jt,{...e}),hMe=e=>a.jsx(KE,{...e}),oQ=e=>a.jsx(YE,{...e}),cQ=e=>a.jsx(ba,{...e}),dQ=e=>a.jsx(Ut,{...e}),gMe=e=>a.jsx(Ga,{...e}),pMe=e=>a.jsx(Yt,{...e}),xMe=e=>a.jsx(da,{...e}),yMe=e=>a.jsx(Nr,{...e}),bMe=e=>a.jsx(en,{...e}),vMe=e=>a.jsx(Nt,{...e}),wMe=e=>a.jsx(js,{...e}),NMe=e=>a.jsx(zc,{...e}),jMe=e=>a.jsx(Ns,{...e}),uQ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,CMe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},SMe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},_Me=e=>{switch(e){case"call":return{Icon:fMe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:hMe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:mMe,color:"text-blue-500",bgColor:"bg-blue-100"}}},AMe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},TMe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=bt(),[i,l]=g.useState(!1),o=g.useRef(null),d=[{icon:cQ,label:"Account"},{icon:dQ,label:"Contact"},{icon:gMe,label:"Leads"},{icon:pMe,label:"Deals"},{icon:xMe,label:"Quotes"},{icon:yMe,label:"Target"},{icon:bMe,label:"Task"},{icon:vMe,label:"Meeting"},{icon:wMe,label:"Call"},{icon:jMe,label:"Audit"},{icon:NMe,label:"Territory"}];g.useEffect(()=>{const h=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=h=>{t(h.target.value),l(h.target.value.trim().length>0)},m=h=>{s&&s(h),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(lMe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:c,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},EMe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=bt(),l=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,w=Math.floor(b/6e4),x=Math.floor(b/36e5),v=Math.floor(b/864e5);return w<1?"Just now":w<60?`${w} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",d=s||n||"System",c=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:c})]})},kMe=({logs:e,loading:t})=>{const n=bt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(oQ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(EMe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},LMe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),PMe=({revenueData:e,loading:t})=>{const n=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(s[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const o={};let d=0,c=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const C=v.close_date||v.closeDate||null,S=C&&C!==null&&C!=="",_=v.stage||"",A=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const E=T>0;if(A&&(c++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:C,close_date_type:typeof C,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&A&&E)try{let D=new Date(C);if(isNaN(D.getTime())){const z=String(C).split("T")[0];D=new Date(z+"T00:00:00")}if(isNaN(D.getTime()))console.warn(` Invalid date for deal ${v.id}:`,C,"Type:",typeof C);else{const z=D.getFullYear(),K=D.getMonth()+1,B=`${z}-${String(K).padStart(2,"0")}`;o[B]||(o[B]=0),o[B]+=T,d++,console.log(` Added deal ${v.id} to month ${B}: ${T}, total: ${o[B]}`),console.log(`  - Close date: ${C} -> Parsed: ${D.toISOString()} -> Month: ${B} (Year: ${z}, Month: ${K})`)}}catch(D){console.error("Error parsing deal date:",C,D)}else A&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:C,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:c,validDealsForGraph:d,monthlyRevenue:o});const m=Object.keys(o).map(v=>parseInt(v.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],w=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;b.push(s[v]);const C=o[j]||0;w.push(C),C>0&&console.log(`Month ${s[v]} (${j}): ${C}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=o[S]||0;b.push(`${s[C]} ${j}`),w.push(_),_>0&&console.log(`Month ${s[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...w,1);return console.log("Final chart data:",{labels:b,revenues:w,maxRevenue:x,hasData:w.some(v=>v>0)}),{labels:b,revenues:w,maxRevenue:x}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(oQ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?a.jsx(ML,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},DMe=({pipelineData:e,loading:t})=>{const n=bt(),s=l=>{const o=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[o])return d[o];const c=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(o.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%c.length;return{name:l||"Unknown",color:c[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=s(h);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(m=>{const h=m.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(m.amount||0)});const o=Math.max(...Object.values(l).map(m=>m.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],c=[];return d.forEach(m=>{const h=s(m),p=l[m]||{deals:0,value:0};c.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:o>0?p.value/o*100:0})}),c})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:uQ(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},T_=({title:e,items:t,children:n,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},OMe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=bt(),{text:o,bg:d}=SMe(s||"Website"),c=b=>{if(!b)return"Unknown";const w=new Date(b),v=new Date-w,j=Math.floor(v/6e4),C=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:C<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=c(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${d} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},MMe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=bt(),c={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:m,bg:h}=CMe(c),p=parseFloat(t||0),b=l?p>=l?"up":"down":"up",w=b==="up"?dMe:uMe,x=b==="up"?"text-green-400":"text-red-400",v=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:c})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:uQ(p)}),a.jsx(w,{size:16,className:`${x} mt-1`})]})]})})},IMe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:d})=>{const c=bt(),h=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:w}=_Me(h),{text:x,bg:v}=AMe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const E=new Date(T),z=E-new Date,K=Math.floor(z/864e5);return K===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",A=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),c(`/manager/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),c(`/manager/meetings/info?id=${l}`)):c("/manager/tasks"):c(h==="call"?`/manager/calls/info?id=${l}`:h==="meeting"?`/manager/meetings/info?id=${l}`:"/manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:A,children:[a.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(lQ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(dQ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},$Me=()=>{const e=bt(),{user:t}=Xt(),[n,s]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,o]=g.useState([]),[d,c]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[w,x]=g.useState([]),[v,j]=g.useState(!0),[C,S]=g.useState(null),[_,A]=g.useState(""),[T,E]=g.useState([]),[D,z]=g.useState([]),[K,B]=g.useState([]),[O,L]=g.useState(new Date),H=g.useRef(null),ae=g.useRef(null),W=g.useMemo(()=>{try{if(!_.trim())return[];const te=_.toLowerCase().trim(),V=[];return Array.isArray(T)&&T.forEach(ee=>{const me=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),we=(ee.company_name||"").toLowerCase(),ve=(ee.email||"").toLowerCase(),Ae=(ee.phone||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/manager/leads/${ee.id}`})}),Array.isArray(D)&&D.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.account?.name||"").toLowerCase(),ve=(ee.description||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/manager/deals/info?id=${ee.id}`})}),Array.isArray(K)&&K.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.email||"").toLowerCase(),ve=(ee.phone||"").toLowerCase(),Ae=(ee.website||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/manager/accounts"})}),V.slice(0,10)}catch(te){return console.error("Error in search:",te),[]}},[_,T,D,K]),q=te=>{te.route&&(e(te.route),A(""))},le=g.useCallback(async()=>{j(!0),S(null);try{const[te,V,ee,me,we,ve,Ae]=await Promise.all([re.get("/leads/manager/getLeads").catch(M=>(console.error("Error fetching leads:",M),{data:[]})),re.get("/deals/manager/fetch-all").catch(M=>(console.error("Error fetching deals:",M),{data:[]})),re.get("/accounts/manager/fetch-all").catch(M=>(console.error("Error fetching accounts:",M),{data:[]})),re.get("/tasks/all").catch(M=>(console.error("Error fetching tasks:",M),{data:[]})),re.get("/meetings/manager/fetch-all").catch(M=>(console.error("Error fetching meetings:",M),{data:[]})),re.get("/calls/manager/fetch-all").catch(M=>(console.error("Error fetching calls:",M),{data:[]})),re.get("/logs/read-all").catch(M=>(console.error("Error fetching logs:",M),{data:[]}))]),be=Array.isArray(te.data)?te.data:[],Ie=Array.isArray(V.data)?V.data:[],G=Array.isArray(ee.data)?ee.data:[],Ce=Array.isArray(me.data)?me.data:[],ce=Array.isArray(we.data)?we.data:[],F=Array.isArray(ve.data)?ve.data:[],ie=Array.isArray(Ae.data)?Ae.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Ie.length),Ie.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Ie[0],null,2)),console.log("First deal keys:",Object.keys(Ie[0]))),E(be),z(Ie),B(G);const he=be.filter(M=>M.status&&!["Lost","Converted"].includes(M.status)).length,Le=Ce.filter(M=>!M.dueDate||M.status==="Completed"?!1:new Date(M.dueDate)<new Date).length;s({activeLeads:he,totalDeals:Ie.length,activeAccounts:G.length,overdueTasks:Le});const xe=[...be].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);i(xe);const Ve=[...Ie].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);o(Ve);const ke=new Date,ye=[];F.forEach(M=>{const pe=M.due_date||M.call_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||ye.push({type:"Call",title:M.subject||"Untitled Call",assignedTo:M.assigned_to||(M.call_assign_to?`${M.call_assign_to.first_name||""} ${M.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"call",fullData:M})}}),ce.forEach(M=>{const pe=M.dueDate||M.start_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||ye.push({type:"Meeting",title:M.subject||M.activity||"Untitled Meeting",assignedTo:M.assignedTo||(M.meet_assign_to?`${M.meet_assign_to.first_name||""} ${M.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"meeting",fullData:M})}});const Me={HIGH:1,MEDIUM:2,LOW:3},He=ye.sort((M,pe)=>{const se=Me[M.priority]||3,je=Me[pe.priority]||3;if(se!==je)return se-je;const We=new Date(M.scheduledDate||0),Ne=new Date(pe.scheduledDate||0);return We-Ne}).slice(0,5);c(He),h(Ie),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Ie.length);const Be=Ie.filter(M=>(M.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Be.length),Be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Be.forEach((M,pe)=>{let se=M.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${pe+1}:`,{id:M.id,name:M.name,stage:M.stage,stage_upper:(M.stage||"").toUpperCase(),amount:M.amount,amount_parsed:se,amount_type:typeof M.amount,close_date:M.close_date,close_date_type:typeof M.close_date,close_date_value:M.close_date?new Date(M.close_date):null,has_close_date:!!M.close_date,has_amount:se>0,all_keys:Object.keys(M),full_deal:M})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Ie.map(M=>M.stage))),x(Ie);const dt=[...ie].sort((M,pe)=>new Date(pe.timestamp||0)-new Date(M.timestamp||0));b(dt)}catch(te){console.error("Error fetching dashboard data:",te),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),le(),H.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),le(),L(new Date)},3e4),()=>{H.current&&clearInterval(H.current)}),[le]),g.useEffect(()=>{if(!t||!t.id)return;let te=0;const V=3;let ee=null;const me=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ae=`${we}//${ve}/ws/notifications?user_id=${t.id}`;try{const be=new WebSocket(Ae);ae.current=be,be.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),te=0},be.onmessage=Ie=>{try{const G=JSON.parse(Ie.data);console.log(" Real-time notification received:",G),G.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(G.event)&&(console.log(" Refreshing dashboard due to:",G.event),le(),L(new Date))}catch(G){console.error("Error parsing WebSocket message:",G)}},be.onerror=Ie=>{te===0&&console.warn(" WebSocket connection unavailable (this is optional)")},be.onclose=()=>{te<V&&(te++,ee=setTimeout(()=>{t&&t.id&&me()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return me(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[t,le]);const Q=[{icon:cQ,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:oMe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:cMe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:lQ,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",v,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&a.jsx(It,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx(TMe,{searchQuery:_,onSearchChange:A,searchResults:W,onSearchResultClick:q}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Q.map(te=>a.jsx(LMe,{...te,loading:v},te.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(kMe,{logs:p,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(PMe,{revenueData:w,loading:v})}),a.jsx("div",{children:a.jsx(DMe,{pipelineData:m,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(T_,{title:"Latest Leads",children:r.length>0?r.map((te,V)=>a.jsx(OMe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(T_,{title:"Latest Deals",children:v?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((te,V)=>a.jsx(MMe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(T_,{title:"Upcoming Activities",children:d.length>0?d.map((te,V)=>a.jsx(IMe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},E_=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],k_={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},gr=e=>e?e.toUpperCase():"",L_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",RMe=e=>{switch(gr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},zMe=e=>{switch(gr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},hd=10;function UMe(){const e=bt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(null),[c,m]=g.useState(null),[h,p]=g.useState(k_),[b,w]=g.useState(null),[x,v]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[A,T]=g.useState(null),[E,D]=g.useState([]),[z,K]=g.useState([]),[B,O]=g.useState("Filter by Status"),[L,H]=g.useState(""),[ae,W]=g.useState(null),[q,le]=g.useState(!1),[Q,te]=g.useState(1),[V,ee]=g.useState("Overview"),[me,we]=g.useState(""),[ve,Ae]=g.useState(!1),[be,Ie]=g.useState({}),[G,Ce]=g.useState(null),ce=g.useCallback(async(J=null)=>{C(!0);try{const ne=await re.get("/accounts/admin/fetch-all"),Oe=[...Array.isArray(ne.data)?ne.data:[]].sort((et,nt)=>{const ht=et?.created_at||et?.updated_at||0,_e=nt?.created_at||nt?.updated_at||0;return new Date(_e)-new Date(ht)});if(v(Oe),console.log("Fetch from backend: ",ne.data),J){const et=Oe.find(nt=>nt.id===J);w(et||null)}}catch(ne){console.error(ne),v([]),ne.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[w]),F=g.useCallback(async()=>{try{const J=await re.get("/users/all");_(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),ie=g.useCallback(async()=>{try{const J=await re.get("/territories/fetch");D(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load territories (permission denied).")}},[]),he=g.useCallback(async()=>{try{const J=await re.get("/accounts/admin/parent-companies");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load parent companies (permission denied).")}},[]),Le=g.useCallback(async J=>{try{const ne=await re.get(`/activities/accounts/${J}`);console.log("Related activities: ",ne.data),Ie(ne.data&&typeof ne.data=="object"?ne.data:{})}catch(ne){console.error(ne),ne.response?.status===404&&(console.warn("No activities found for this account."),Ie({}))}},[]);g.useEffect(()=>{ce(),F(),ie(),he()},[ce,F,ie,he]),g.useEffect(()=>{b&&we(gr(b.status)||"PROSPECT")},[b]);const xe=x.length,Ve=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="customer").length,[x]),ke=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="prospect").length,[x]),ye=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="partner").length,[x]),Me=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="active").length,[x]),He=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="inactive").length,[x]),Be=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="former").length,[x]),dt=g.useMemo(()=>[{title:"Total",value:xe,icon:ba,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ve,icon:dl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ke,icon:Ga,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ye,icon:Ut,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Me,icon:dl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:He,icon:ul,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:ul,color:"text-orange-600",bgColor:"bg-orange-100"}],[xe,Ve,ke,ye,Me,He,Be]),M=g.useMemo(()=>{const J=L.trim().toLowerCase(),ne=B.trim().toUpperCase();return x.filter(oe=>{const Oe=[oe?.name,oe?.website,oe?.industry,oe?.territory?.name,oe?.phone_number],et=J===""||Oe.some(ht=>ht==null?!1:ht.toString().toLowerCase().includes(J)),nt=ne==="FILTER BY STATUS"||gr(oe.status)===ne;return et&&nt})},[x,L,B]),pe=Math.max(1,Math.ceil(M.length/hd)||1);g.useEffect(()=>{te(1)},[L,B]),g.useEffect(()=>{te(J=>{const ne=Math.max(1,Math.ceil(M.length/hd)||1);return J>ne?ne:J})},[M.length]);const se=g.useMemo(()=>{const J=(Q-1)*hd;return M.slice(J,J+hd)},[M,Q]);M.length===0||(Q-1)*hd+1,Math.min(Q*hd,M.length);const je=()=>te(J=>Math.max(J-1,1)),We=()=>te(J=>Math.min(J+1,pe)),Ne=J=>{w(J),ee("Overview"),we(gr(J?.status)||"PROSPECT")},qe=()=>w(null),De=J=>{J.target.id==="accountModalBackdrop"&&!q&&qe()},Je=()=>{n(!1),r(!1),m(null),p(k_),l(!1),T(null)},at=J=>{J.target.id==="modalBackdrop"&&Je()},ot=J=>J?new Date(J).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",R=J=>{const{name:ne,value:oe}=J.target;p(Oe=>({...Oe,[ne]:oe}))},$=()=>{p(k_),r(!1),m(null),n(!0)},I=J=>{w(null),console.log("edit: ",J),J.assigned_accs?T(J.assigned_accs):T(null),p({name:J.name||"",website:J.website||"",phone_number:J.phone_number||"",billing_address:J.billing_address||"",shipping_address:J.shipping_address||"",industry:J.industry||"",status:gr(J.status)||"PROSPECT",territory_id:J.territory?.id?String(J.territory.id):"",assigned_to:J.assigned_accs?.id?String(J.assigned_accs.id):""}),r(!0),m(J.id),n(!0)},U=J=>{J&&W({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:J.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:J.name}})},de=async()=>{if(!ae?.action){W(null);return}const{action:J}=ae,{type:ne,payload:oe,targetId:Oe,name:et}=J;le(!0);try{if(ne==="create"){l(!0);const nt=await re.post("/accounts/admin",oe);he(),Y.success(`Account "${et}" created successfully.`);const ht=b?.id||null;Je(),await ce(ht),!b&&nt.data?.id}else if(ne==="update"){if(!Oe)throw new Error("Missing account identifier for update.");l(!0),await re.put(`/accounts/admin/${Oe}`,oe),Y.success(`Account "${et}" updated successfully.`);const nt=b?.id&&b.id===Oe?Oe:null;Je(),await ce(nt),b?.id===Oe&&w(null)}else if(ne==="delete"){if(!Oe)throw new Error("Missing account identifier for deletion.");const nt=b?.id;d(Oe),await re.delete(`/accounts/admin/${Oe}`),Y.success(`Account "${et}" deleted successfully.`),await ce(nt&&nt!==Oe?nt:null),nt===Oe&&w(null)}}catch(nt){console.error(nt);const ht=ne==="create"?"Failed to create account. Please review the details and try again.":ne==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",_e=nt.response?.data?.detail||ht;Y.error(_e),(ne==="create"||ne==="update")&&l(!1),ne==="delete"&&d(null)}finally{(ne==="create"||ne==="update")&&l(!1),ne==="delete"&&d(null),le(!1),W(null)}},ge=()=>{q||W(null)},ue=async()=>{if(!b||!me)return;const J=gr(me),ne=gr(b.status);if(J!==ne){Ae(!0);try{await re.put(`/accounts/admin/${b.id}`,{status:J}),Y.success(`Account status updated to ${L_(J)}`),v(oe=>oe.map(Oe=>Oe.id===b.id?{...Oe,status:J}:Oe)),w(null)}catch(oe){console.error(oe);const Oe=oe.response?.data?.detail||"Failed to update account status. Please try again.";Y.error(Oe)}finally{Ae(!1)}}},[Se,Fe]=g.useState(!1),ft=J=>{J.preventDefault(),Fe(!0);const ne=h.name.trim();if(!ne){Y.error("Account name is required.");return}if(!h.assigned_to){Y.error("Assigned To is required.");return}const Oe={name:ne,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},et=s&&c?"update":"create";W({title:et==="create"?"Confirm New Account":"Confirm Update",message:et==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:et==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:et,payload:Oe,targetId:c||null,name:ne}})},vt=[{label:"Filter by Status",value:"Filter by Status"},...E_.map(J=>({label:J.label,value:J.value}))],ze=ae?.action?.type==="delete"?ae.action.targetId:null,yt=b&&(o===b.id||ze===b.id),Te=b&&o===b.id,st=b?RMe(b.status):"",X=b?a.jsx("div",{id:"accountModalBackdrop",onClick:De,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:J=>J.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:qe,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${st}`,children:L_(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>I(b),disabled:ae?.action?.type==="update"&&ae.action.targetId===b.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>U(b),disabled:!!yt,children:Te?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(J=>a.jsx("button",{onClick:()=>ee(J),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===J?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:J},J))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:b.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:ot(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:ot(b.updated_at)||"N/A"})]})]})}),V==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),V==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[be.tasks&&be.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",be.tasks.length,")"]})]}),G==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.tasks.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||"No description"}),J.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",J.assigned_to.first_name," ",J.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.due_date||J.created_at)})]},`task-${ne}`))})]}),be.meetings&&be.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",be.meetings.length,")"]})]}),G==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.meetings.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||J.location||"No description"}),J.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",J.host.first_name," ",J.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.start_time||J.created_at)})]},`meeting-${ne}`))})]}),be.calls&&be.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",be.calls.length,")"]})]}),G==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.calls.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.call_time||J.created_at)})]},`call-${ne}`))})]}),be.contacts&&be.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",be.contacts.length,")"]})]}),G==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.contacts.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.first_name?`${J.first_name} `:"",J.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.created_at)})]},`contact-${ne}`))})]}),be.deals&&be.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",be.deals.length,")"]})]}),G==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.deals.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",J.name||J.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:J.stage||J.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.close_date||J.created_at)})]},`deal-${ne}`))})]}),be.quotes&&be.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",be.quotes.length,")"]})]}),G==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.quotes.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(J.quote_id?J.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.presented_date)||""})]},`quote-${ne}`))})]}),(!be||(!be.tasks||be.tasks.length===0)&&(!be.meetings||be.meetings.length===0)&&(!be.calls||be.calls.length===0)&&(!be.quotes||be.quotes.length===0)&&(!be.deals||be.deals.length===0)&&(!be.contacts||be.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:me||gr(b?.status)||"PROSPECT",onChange:J=>we(J.target.value),children:E_.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))}),a.jsx("button",{onClick:ue,disabled:ve||!me||gr(me)===gr(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ve||!me||gr(me)===gr(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ve?"Updating...":"Update"})]})]})]})]})]})}):null,Ee=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(It,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{$(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:dt.map(J=>a.jsx(FMe,{...J},J.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:L,onChange:J=>H(J.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:J=>O(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:vt.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):M.length>0?se.map(J=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ne(J),Le(J.id)},children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${zMe(J.status)}`,children:L_(J.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:J.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:J.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:J.phone_number||"--"})]})})]},J.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:M.length,pageSize:hd,currentPage:Q,onPrev:je,onNext:We,label:"accounts"})]}),$e=t?a.jsx("div",{id:"modalBackdrop",onClick:at,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:J=>J.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||q,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ft,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Pm,{label:"Name",name:"name",value:h.name,onChange:R,placeholder:"Company name",required:!0,isSubmitted:Se})}),a.jsx(lU,{label:"Parent Company",value:h.parent_company,onChange:J=>{p(ne=>({...ne,parent_company:J}))},items:z.map(J=>({id:J,name:J})),getLabel:J=>J?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(Pm,{label:"Website",name:"website",value:h.website,onChange:R,placeholder:"https://example.com",disabled:i}),a.jsx(Pm,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:R,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Pm,{label:"Industry",name:"industry",value:h.industry,onChange:R,placeholder:"Industry",disabled:i}),a.jsx(Pm,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:R,placeholder:"Billing address",disabled:i}),a.jsx(Pm,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:R,placeholder:"Shipping address",disabled:i}),a.jsx(iU,{label:"Status",name:"status",value:h.status,onChange:R,options:[{value:"",label:"Select status"},...E_],required:!0,disabled:i}),a.jsx(lU,{label:"Assigned To",value:h.assigned_to,onChange:J=>{const ne=S.find(Oe=>String(Oe.id)===String(J));T(ne);let oe=null;ne&&ne.assigned_territory&&ne.assigned_territory.length===1&&(oe=ne.assigned_territory[0].id),p(Oe=>({...Oe,assigned_to:J,territory_id:oe}))},items:S||[],getLabel:J=>`${J?.first_name??""} ${J?.last_name??""} (${J?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:i||S.length===0}),a.jsx(iU,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:R,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(J=>({value:String(J.id),label:J.name}))||[]],disabled:i||!A||!A.assigned_territory||A.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||q,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Ye=ae?a.jsx(HMe,{open:!0,title:ae.title,message:ae.message,confirmLabel:ae.confirmLabel,cancelLabel:ae.cancelLabel,variant:ae.variant,onConfirm:de,onCancel:ge,loading:q}):null;return a.jsxs(a.Fragment,{children:[Ee,X,$e,Ye]})}function FMe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Pm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function iU({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function lU({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1,allowFreeText:m=!1}){const h=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(BMe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:h,allowFreeText:m})]})}function BMe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),w=e.find(j=>String(j.id)===String(t)),x=w?s(w):t,v=g.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const j=C=>{b.current&&!b.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:x,placeholder:r,onFocus:()=>!i&&m(!0),onChange:j=>{p(j.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[d&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),m(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const C=String(j.id),S=s(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):!d||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function HMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const rg=10,P_={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Dm=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),xi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function GMe(){const e=bt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState(null),[h,p]=g.useState(!1),[b,w]=g.useState(!1),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[A,T]=g.useState(null),[E,D]=g.useState(P_),[z,K]=g.useState(""),[B,O]=g.useState("Filter by Accounts"),[L,H]=g.useState(null),[ae,W]=g.useState("Overview"),[q,le]=g.useState(1),[Q,te]=g.useState({}),[V,ee]=g.useState(null),me=g.useCallback(async(R=null)=>{r(!0);try{const $=await re.get("/contacts/admin/fetch-all"),U=[...Array.isArray($.data)?$.data:[]].sort((de,ge)=>{const ue=de?.created_at||de?.updated_at||0,Se=ge?.created_at||ge?.updated_at||0;return new Date(Se)-new Date(ue)});if(n(U),R){const de=U.find(ge=>ge.id===R);m(de||null)}}catch($){console.error($),n([]),$.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch contacts. Please try again later.")}finally{r(!1)}},[m]),we=g.useCallback(async()=>{try{const R=await re.get("/accounts/admin/fetch-all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>(U?.name||"").localeCompare(de?.name||""));l(I)}catch(R){console.error(R),l([]),R.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),ve=g.useCallback(async()=>{try{const R=await re.get("/users/all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>Dm(U).localeCompare(Dm(de)));d(I)}catch(R){console.error(R),d([]),R.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async R=>{try{const $=await re.get(`/activities/contact/${R}`);te($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),te({}))}},[]);g.useEffect(()=>{me(),we(),ve()},[me,we,ve]);const be=g.useMemo(()=>{const R=new Map;i.forEach(I=>{I?.id&&I?.name&&R.set(String(I.id),I.name)}),t.forEach(I=>{I?.account_id&&I?.account?.name&&R.set(String(I.account_id),I.account.name)});const $=Array.from(R.entries()).sort((I,U)=>I[1].localeCompare(U[1])).map(([I,U])=>({value:I,label:U}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...$]},[i,t]),Ie=g.useMemo(()=>{const R=z.trim().toLowerCase(),$=B.trim();return t.filter(I=>{const U=[I?.first_name,I?.last_name,I?.email,I?.title,I?.department,I?.account?.name,I?.account?.status,I?.work_phone,I?.mobile_phone_1,I?.mobile_phone_2,I?.assigned_contact?.first_name,I?.assigned_contact?.last_name,I?.contact_creator?.first_name,I?.contact_creator?.last_name,I?.notes,xi(I?.created_at),xi(I?.updated_at)],de=R===""||U.some(ue=>ue==null?!1:ue.toString().toLowerCase().includes(R)),ge=$==="Filter by Accounts"||String(I.account_id)===$;return de&&ge})},[t,z,B]),G=Math.max(1,Math.ceil(Ie.length/rg)||1);g.useEffect(()=>{le(1)},[z,B]),g.useEffect(()=>{le(R=>{const $=Math.max(1,Math.ceil(Ie.length/rg)||1);return R>$?$:R})},[Ie.length]);const Ce=g.useMemo(()=>{const R=(q-1)*rg;return Ie.slice(R,R+rg)},[Ie,q]),ce=()=>le(R=>Math.max(R-1,1)),F=()=>le(R=>Math.min(R+1,G)),ie=g.useMemo(()=>{if(!b||!A)return i;const R=t.find(I=>I.id===A);return!R||!R.account||i.some(I=>I.id===R.account.id)?i:[...i,R.account]},[i,b,A,t]),he=g.useCallback(()=>{p(!1),w(!1),T(null),D(P_),v(!1),He(!1)},[]),Le=R=>{R.target.id==="modalBackdrop"&&!x&&!S&&he()},xe=R=>{const{name:$,value:I}=R.target;D(U=>({...U,[$]:I}))},Ve=()=>{D(P_),w(!1),T(null),p(!0)},ke=async R=>{if(!R)return;const $=await re.get(`/accounts/get/${R.account_id}`);D({first_name:R.first_name||"",last_name:R.last_name||"",account_id:$.data.id?$.data.id:"",title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?String(R.assigned_to):""}),w(!0),T(R.id),p(!0),m(null)},ye=R=>{if(!R)return;const $=Dm(R)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:R.id,name:$}})},[Me,He]=g.useState(!1),Be=R=>{R.preventDefault(),He(!0);const $=E.first_name.trim(),I=E.last_name.trim();if(!$||!I){Y.error("First name and last name are required.");return}if(!E.account_id){Y.error("Account is required.");return}if(!E.assigned_to){Y.error("Assigned To is required.");return}const de=E.email?.trim();if(!de){Y.error("Email is required.");return}if(!de.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)){Y.error("Please enter a valid email address.");return}if((de.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}const Fe={first_name:$,last_name:I,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},ft=b&&A?"update":"create",vt=`${$} ${I}`.trim();C({title:ft==="create"?"Confirm New Contact":"Confirm Update",message:ft==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:vt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:vt}),"?"]}),confirmLabel:ft==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ft,payload:Fe,targetId:A||null,name:vt}})},dt=async()=>{if(!j?.action){C(null);return}const{action:R}=j,{type:$,payload:I,targetId:U,name:de}=R;_(!0);try{if($==="create"){v(!0),await re.post("/contacts/admin",I),Y.success(`Contact "${de}" created successfully.`);const ge=c?.id||null;he(),await me(ge)}else if($==="update"){if(!U)throw new Error("Missing contact identifier for update.");v(!0),await re.put(`/contacts/admin/${U}`,I),Y.success(`Contact "${de}" updated successfully.`);const ge=c?.id&&c.id===U?U:c?.id||null;he(),await me(ge),c?.id===U&&m(null)}else if($==="delete"){if(!U)throw new Error("Missing contact identifier for deletion.");const ge=c?.id;H(U),await re.delete(`/contacts/admin/${U}`),Y.success(`Contact "${de}" deleted successfully.`),await me(ge&&ge!==U?ge:null),ge===U&&m(null)}}catch(ge){console.error(ge);const ue=$==="create"?"Failed to create contact. Please review the details and try again.":$==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",Se=ge.response?.data?.detail||ue;Y.error(Se)}finally{($==="create"||$==="update")&&v(!1),$==="delete"&&H(null),_(!1),C(null)}},M=()=>{S||C(null)},pe=R=>{m(R),W("Overview")},se=()=>m(null),je=R=>{R.target.id==="contactModalBackdrop"&&!S&&se()},We=j?.action?.type==="delete"?j.action.targetId:null,Ne=c&&(L===c.id||We===c.id),qe=c&&L===c.id,De=c?a.jsx("div",{id:"contactModalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:R=>R.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:se,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Dm(c)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ke(c),disabled:S||j?.action?.type==="update"&&j.action.targetId===c.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(c),disabled:!!Ne,children:qe?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:c.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(R=>a.jsx("button",{onClick:()=>W(R),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===R?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:R},R))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Dm(c)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email?a.jsx("a",{href:`mailto:${c.email}`,className:"text-blue-600 hover:underline break-all",children:c.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_contact?`${c.assigned_contact.first_name} ${c.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.contact_creator?`${c.contact_creator.first_name} ${c.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:xi(c.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:xi(c.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[Q.tasks&&Q.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Q.tasks.length,")"]})]}),V==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.tasks.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||"No description"}),R.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",R.assigned_to.first_name," ",R.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.due_date||R.created_at)})]},`task-${$}`))})]}),Q.meetings&&Q.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Q.meetings.length,")"]})]}),V==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.meetings.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||R.location||"No description"}),R.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",R.host.first_name," ",R.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.start_time||R.created_at)})]},`meeting-${$}`))})]}),Q.calls&&Q.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Q.calls.length,")"]})]}),V==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.calls.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.call_time||R.created_at)})]},`call-${$}`))})]}),Q.contacts&&Q.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Q.contacts.length,")"]})]}),V==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.contacts.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[R.first_name?`${R.first_name} `:"",R.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:R.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.created_at)})]},`contact-${$}`))})]}),Q.deals&&Q.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Q.deals.length,")"]})]}),V==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.deals.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[R.deal_id?R.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",R.name||R.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:R.stage||R.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.close_date||R.created_at)})]},`deal-${$}`))})]}),Q.quotes&&Q.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Q.quotes.length,")"]})]}),V==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.quotes.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(R.quote_id?R.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:R.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xi(R.presented_date)||""})]},`quote-${$}`))})]}),(!Q||(!Q.tasks||Q.tasks.length===0)&&(!Q.meetings||Q.meetings.length===0)&&(!Q.calls||Q.calls.length===0)&&(!Q.quotes||Q.quotes.length===0)&&(!Q.deals||Q.deals.length===0)&&(!Q.contacts||Q.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const R=encodeURIComponent(c.email),$=encodeURIComponent(""),I=encodeURIComponent(""),U=`mailto:${R}?subject=${$}&body=${I}`;window.location.href=U},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Je=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Ve(),He(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:R=>K(R.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:R=>O(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:be.map(R=>a.jsx("option",{value:R.value,children:R.label},R.value??R.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Ie.length>0?Ce.map(R=>{const $=[{Icon:Ha,value:R.email,key:"email"},{Icon:jt,value:R.work_phone,key:"work_phone"},{Icon:Lc,value:R.mobile_phone_1,key:"mobile_phone_1"},{Icon:Lc,value:R.mobile_phone_2,key:"mobile_phone_2"}].filter(I=>!!I.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{pe(R),Ae(R.id)},children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Dm(R)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:R.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(yx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:R.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:$.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:$.map(({Icon:I,value:U,key:de})=>{const ge=pt.createElement(I,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ge,a.jsx("span",{children:U})]},de)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Yt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:R.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Ut,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:R.assigned_contact?`${R.assigned_contact.first_name} ${R.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Nt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:xi(R.created_at)||"--"})]})})]},R.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ie.length,pageSize:rg,currentPage:q,onPrev:ce,onNext:F,label:"contacts"})]}),at=h?a.jsx("div",{id:"modalBackdrop",onClick:Le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:R=>R.stopPropagation(),children:[a.jsx("button",{onClick:()=>{he(),He(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[a.jsx(mc,{label:"First Name",name:"first_name",value:E.first_name,onChange:xe,placeholder:"First name",required:!0,isSubmitted:Me}),a.jsx(mc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:xe,placeholder:"Last name",required:!0,isSubmitted:Me}),a.jsx(oU,{label:"Account",value:E.account_id,onChange:R=>D($=>({...$,account_id:R})),items:b?ie:i||[],getLabel:R=>R?.name??"",placeholder:"Search account...",disabled:x||(b?ie.length===0:i.length===0),required:!0,isSubmitted:Me}),a.jsx(oU,{label:"Assigned To",value:E.assigned_to,onChange:R=>D($=>({...$,assigned_to:R})),items:o||[],getLabel:R=>`${R?.first_name??""} ${R?.last_name??""} (${R?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Me,disabled:x||o.length===0}),a.jsx(mc,{label:"Title",name:"title",value:E.title,onChange:xe,placeholder:"Job title",disabled:x}),a.jsx(mc,{label:"Department",name:"department",value:E.department,onChange:xe,placeholder:"Department",disabled:x}),a.jsx(mc,{label:"Email",name:"email",type:"email",value:E.email,onChange:xe,placeholder:"example@email.com",required:!0,isSubmitted:Me}),a.jsx(mc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(mc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(mc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(WMe,{label:"Notes",name:"notes",value:E.notes,onChange:xe,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{he(),He(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,ot=j?a.jsx(qMe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:dt,onCancel:M,loading:S}):null;return a.jsxs(a.Fragment,{children:[Je,De,at,ot]})}function mc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:d=!1,className:c=""}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function oU({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(VMe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function VMe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function WMe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function qMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const D_=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function mQ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=bt(),{leadID:d}=Co(),[c,m]=g.useState(e||null),[h,p]=g.useState("Overview"),[b,w]=g.useState(""),x=c?.status?.toUpperCase()==="QUALIFIED",[v,j]=g.useState(null),[C,S]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,A]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),D=async()=>{try{if(e){m(e),w(e.status||"New");return}if(!d)return;const L=await re.get(`/leads/get/${d}`);m(L.data),w(L.data.status||"New"),S({name:L.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:L.data.territory?.id||null,assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),A({last_name:L.data.last_name||"",first_name:L.data.first_name||"",account_id:null,title:L.data.title||"",department:L.data.department||"",email:L.data.email||"",work_phone:L.data.work_phone||"",mobile_phone_1:L.data.mobile_phone_1||"",mobile_phone_2:L.data.mobile_phone_2||"",notes:"",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null})}catch(L){console.error(L)}};g.useEffect(()=>{e?(m(e),w(e.status||"New")):d&&D()},[d,e]);const z=async()=>{try{if(b==="Converted"&&c?.status?.toUpperCase()!=="QUALIFIED"){Y.error("Lead must be Qualified before it can be converted.");return}const L=await re.put(`/leads/${c.id}/update/status`,{status:b});Y.success("Lead status updated successfully");const H={...c,status:L.data.status};m(H),i&&i(H),n&&n(),t&&t()}catch(L){console.error(L),Y.error("Failed to update lead status")}},K=async L=>{const H={...C,assigned_to:L.assigned_to?.id,billing_address:L.address,shipping_address:L.address,created_by:L.creator?.id,industry:null,name:L.company_name,phone_number:L.work_phone,status:"Prospect",territory_id:L.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",L);try{const W=(await re.post("/accounts/convertedLead",H)).data.id,q={..._,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,department:L.department,email:L.email,first_name:L.first_name,last_name:L.last_name,mobile_phone_1:L.mobile_phone_1,mobile_phone_2:L.mobile_phone_2,notes:L.notes,title:L.title,work_phone:L.work_phone},Q=(await re.post("/contacts/convertedLead",q)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},V=T.amount&&T.amount!==""?parseFloat(T.amount):0,ee={...T,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,primary_contact_id:Q,probability:te(),stage:"Prospecting"},me=await re.post("/deals/convertedLead",ee),we=await re.put(`/leads/convert/${L.id}`);i&&i(null),n(),Y.success("Lead converted successfully!"),t()}catch(ae){console.error("Error during conversion:",ae);const W=ae.response?.data?.detail||ae.message||"Failed to convert lead. Please try again.";Y.error(W)}},B=L=>{switch((L||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=L=>L.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(c.status)}`,children:O(c.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>K(c),disabled:!x,title:x?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${x?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(L=>a.jsx("button",{onClick:()=>p(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),h==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),h==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:D_(L.due_date||L.created_at)})]},`task-${H}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:D_(L.start_time||L.created_at)})]},`meeting-${H}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:D_(L.call_time||L.created_at)})]},`call-${H}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{c&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:c.title?`Call regarding ${c.title}`:`Call with ${c.first_name} ${c.last_name}`,relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const L=encodeURIComponent(c.email),H=encodeURIComponent(""),ae=encodeURIComponent(""),W=`mailto:${L}?subject=${H}&body=${ae}`;window.location.href=W},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{c&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:c.title?`Meeting regarding ${c.title}`:`Meeting with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{c&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:c.title?`Follow up on ${c.title}`:`Follow up with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:b,onChange:L=>w(L.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),c?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:z,disabled:b===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${b===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const YMe=Lf.all(),O_=YMe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),KMe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),QMe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ig=10,M_={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function XMe(){const e=bt(),{leadID:t}=Co();Ss();const[n,s]=g.useState(null),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,A]=g.useState(M_),[T,E]=g.useState(!1),[D,z]=g.useState(null),[K,B]=g.useState(!1),[O,L]=g.useState(null),[H,ae]=g.useState(!1),[W,q]=g.useState({});g.useRef(null);const[le,Q]=g.useState(!1),[te,V]=g.useState(null),[ee,me]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[we,ve]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Ae,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ie=async()=>{try{const $=await re.get("/leads/getUsers");o($.data)}catch($){console.error(`Error fetching users: ${$}`)}},G=async()=>{b(!0);try{const $=await re.get("/leads/admin/getLeads");h($.data),console.log($.data)}catch($){console.error(`Error fetching leads: ${$}`)}finally{b(!1)}};g.useEffect(()=>{Ie(),G()},[]),g.useEffect(()=>{if(t&&m.length>0&&!r&&!T){const $=m.find(I=>I.id===Number(t));$&&s($)}else!t&&!n&&s(null)},[t,m,r,T]),g.useEffect(()=>{if(te){const I=(ge=>{if(!ge)return{code:"+63",number:""};const ue=ge.match(/^(\+\d+)\s(.+)$/);if(ue)return{code:ue[1],number:ue[2]};if(ge.startsWith("+")){const Se=ge.match(/^(\+\d{1,3})/);if(Se)return{code:Se[1],number:ge.substring(Se[1].length).trim()}}return{code:"+63",number:ge}})(te.work_phone),U=[];te.work_phone&&U.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&U.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&U.push(`Mobile 2: ${te.mobile_phone_2}`);const de=U.length>0?U.join(" | "):"";me({name:te.company_name||"",website:"",countryCode:I.code,phone_number:I.number,combinedPhoneNumbers:de,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),ve({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const Ce=$=>x($.target.value),ce=g.useMemo(()=>{const $=w.trim().toLowerCase(),I=v.trim().toUpperCase();return m.filter(U=>{const de=[U?.first_name,U?.last_name,U?.company_name,U?.title,U?.email,U?.work_phone,U?.assigned_to?`${U.assigned_to.first_name} ${U.assigned_to.last_name}`:""],ge=$===""||de.some(Se=>Se==null||Se===""?!1:Se.toString().toLowerCase().includes($));let ue=!1;return I==="FILTER BY STATUS"?ue=(U.status?U.status.toUpperCase():"")!=="CONVERTED":ue=(U.status?U.status.toUpperCase():"")===I,ge&&ue})},[m,w,v]),F=Math.max(1,Math.ceil(ce.length/ig)||1);g.useEffect(()=>{S(1)},[w,v]),g.useEffect(()=>{S($=>{const I=Math.max(1,Math.ceil(ce.length/ig)||1);return $>I?I:$})},[ce.length]);const ie=g.useMemo(()=>{const $=(C-1)*ig;return ce.slice($,$+ig)},[ce,C]),he=()=>S($=>Math.max($-1,1)),Le=()=>S($=>Math.min($+1,F)),xe=g.useCallback(async $=>{try{const I=await re.get(`/activities/lead/${$}`);q(I.data&&typeof I.data=="object"?I.data:{})}catch(I){console.error(I),I.response?.status===404&&(console.warn("No activities found for this account."),q({}))}},[]),Ve=$=>{s($),xe($.id)},ke=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ye=()=>{i(!1),A(M_),E(!1),z(null),B(!1),c(null),sessionStorage.removeItem("editLeadData")},Me=$=>{$.target.id==="modalBackdrop"&&ye()},He=()=>{A(M_),E(!1),z(null),c(null),i(!0)},Be=$=>{if(!$){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",$),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const I=Se=>{if(!Se)return{code:"+63",number:""};const Fe=Se.match(/^(\+\d+)\s(.+)$/);return Fe?{code:Fe[1],number:Fe[2]}:{code:"+63",number:Se}},U=I($.work_phone),de=I($.mobile_phone_1),ge=I($.mobile_phone_2);let ue="";if($.assigned_to){ue=String($.assigned_to.id);const Se=l?.find(Fe=>Fe.id===$.assigned_to.id);c(Se)}A({first_name:$.first_name||"",last_name:$.last_name||"",company_name:$.company_name||"",title:$.title||"",department:$.department||"",email:$.email||"",work_ccode:U.code,work_phone:U.number,m1_ccode:de.code,mobile_phone_1:de.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:$.address||"",notes:$.notes||"",source:$.source||"",territory_id:$.territory?.id||null,lead_owner:ue,status:$.status||"New"}),E(!0),z($.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},dt=$=>{if(!$){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",$);const I=`${$.first_name} ${$.last_name}`||"this lead";L({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:I}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:I}})},M=$=>{const{name:I,value:U}=$.target;if(A(de=>({...de,[I]:U})),I==="lead_owner"){const de=l.find(ge=>ge.id===parseInt(U));c(de)}},[pe,se]=g.useState(!1),je=$=>{if($.preventDefault(),se(!0),!_.last_name?.trim()){Y.error("Last name is required.");return}if(!_.company_name?.trim()){Y.error("Company is required.");return}if(!_.email?.trim()){Y.error("Email is required.");return}if(!_.email.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){Y.error("Please enter a valid email address with a dot in the domain.");return}if((_.email.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}if(!_.lead_owner){Y.error("Please assign a lead owner.");return}const ge={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},ue=T&&D?"update":"create",Se=`${_.first_name} ${_.last_name}`;L({title:ue==="create"?"Confirm New Lead":"Confirm Update",message:ue==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}),confirmLabel:ue==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:ge,targetId:D||null,name:Se}})},We=async()=>{if(!O?.action){L(null);return}const{action:$}=O,{type:I,payload:U,targetId:de,name:ge,lead:ue}=$;console.log(U),ae(!0);try{if(I==="create")B(!0),await re.post("/leads/create",U),Y.success(`Lead "${ge}" created successfully.`),ye(),await G();else if(I==="update"){if(!de)throw new Error("Missing lead identifier for update.");B(!0);const Se=await re.put(`/leads/${de}`,U);Y.success(`Lead "${ge}" updated successfully.`),n&&n.id===de&&s(null),ye(),await G()}else if(I==="delete"){if(!de)throw new Error("Missing lead identifier for deletion.");await re.delete(`/leads/${de}`),Y.success(`Lead "${ge}" deleted successfully.`),n?.id===de&&s(null),await G()}}catch(Se){console.error(Se);const Fe=I==="create"?"Failed to create lead. Please review the details and try again.":I==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ft=Se.response?.data?.detail||Fe;Y.error(ft)}finally{(I==="create"||I==="update")&&B(!1),I!=="edit"&&(ae(!1),L(null))}},Ne=()=>{H||L(null)},qe=m.filter($=>$.status==="New").length,De=m.filter($=>$.status==="Contacted").length,Je=m.filter($=>$.status==="Qualified").length,at=m.filter($=>$.status==="Converted").length,ot=m.filter($=>$.status==="Lost").length,R=[{title:"New",value:qe,icon:Ga,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:De,icon:jt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Je,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:at,icon:So,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ot,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(It,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ga,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{He(),se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:R.map($=>a.jsx(JMe,{...$},$.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:Ce,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:v,onChange:$=>j($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:ce.length>0?ie.map($=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Ve($),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[$.first_name," ",$.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:$.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.assigned_to?`${$.assigned_to.first_name} ${$.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${QMe($.status||"New")}`,children:KMe($.status||"New")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:ce.length,pageSize:ig,currentPage:C,onPrev:he,onNext:Le,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ye(),se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:M,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${pe&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:M,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:M,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:O_.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:O_.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:O_.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:M,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${pe&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(eIe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>{const I=l.find(de=>String(de.id)===String($));c(I);let U=null;I&&I.assigned_territory&&I.assigned_territory.length===1&&(U=I.assigned_territory[0].id),A(de=>({...de,lead_owner:$,territory_id:U}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:M,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:M,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:M,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{ye(),se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:K||H,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:je,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:K||H,children:K||H?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),O&&a.jsx(ZMe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:We,onCancel:Ne,loading:H}),n&&!r&&!T&&a.jsx(mQ,{relatedActs:W,lead:n,onBack:ke,fetchLeads:G,setSelectedLead:s,onEdit:Be,onDelete:dt})]})}function ZMe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function JMe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function eIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const qy={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},On=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),tIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(On,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(On,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(On,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(On,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(On,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),aIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(On,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(On,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(On,{label:"Department",name:"department",value:e.department}),a.jsx(On,{label:"Title",name:"title",value:e.title}),a.jsx(On,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(On,{label:"Email",name:"email",value:e.email}),a.jsx(On,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(On,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),nIe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(On,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(On,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(On,{label:"Stage",name:"stage",value:e.stage}),a.jsx(On,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(On,{label:"Description",name:"description",value:e.description}),a.jsx(On,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function sIe({isOpen:e,onClose:t}){const[n,s]=g.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(n){case 1:return a.jsx(tIe,{data:qy});case 2:return a.jsx(aIe,{data:qy});case 3:return a.jsx(nIe,{data:qy});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:qy.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(yj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(c=>a.jsx("button",{onClick:()=>s(c.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===c.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:c.name},c.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const lg=10;function rIe(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,s]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,o]=g.useState(null),[d,c]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(1),[C,S]=g.useState(!1),[_,A]=g.useState(null),[T,E]=g.useState(!1),[D,z]=g.useState(!1),[K,B]=g.useState(null),[O,L]=g.useState([]),[H,ae]=g.useState([]),[W,q]=g.useState([]),[le,Q]=g.useState({}),[te,V]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ee,me]=g.useState(null),[we,ve]=g.useState(null),Ae={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},be=R=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[R]||R||"--",Ie=R=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[R]||"bg-gray-100 text-gray-700",G=g.useCallback(async R=>{try{const $=await re.get(`/activities/deal/${R}`);Q($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),Q({}))}},[]),Ce=g.useMemo(()=>{const R=e.trim().toLowerCase(),$=n.trim(),I=r.trim();return(p??[]).filter(U=>{const de=[U?.name,U?.description,U?.account?.name,U?.contact?.first_name,U?.contact?.last_name,U?.assigned_deals?.first_name,U?.assigned_deals?.last_name],ge=R===""||de.some(Fe=>Fe==null||Fe===""?!1:Fe.toString().toLowerCase().includes(R)),ue=$==="Filter by Stage"||$===""||U.stage===Ae[$]||U.stage===$,Se=I==="Filter by Owner"||I===""||`${U.assigned_deals?.first_name||""} ${U.assigned_deals?.last_name||""}`.trim().toLowerCase()===I.toLowerCase();return ge&&ue&&Se})},[p,e,n,r]),ce=Math.max(1,Math.ceil(Ce.length/lg)||1);g.useEffect(()=>{j(1)},[e,n,r]),g.useEffect(()=>{j(R=>{const $=Math.max(1,Math.ceil(Ce.length/lg)||1);return R>$?$:R})},[Ce.length]);const F=g.useMemo(()=>{const R=(v-1)*lg;return Ce.slice(R,R+lg)},[Ce,v]),ie=()=>j(R=>Math.max(R-1,1)),he=()=>j(R=>Math.min(R+1,ce)),Le=()=>{V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),z(!1),B(null),h(!0)},xe=async()=>{x(!0);try{const R=await re.get("/deals/admin/fetch-all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>{const ge=U?.created_at?new Date(U.created_at).getTime():0;return(de?.created_at?new Date(de.created_at).getTime():0)-ge});b(I)}catch(R){R.response&&R.response.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch deals. Please try again later."),console.error(R)}finally{x(!1)}},Ve=async()=>{try{const R=await re.get("/accounts/admin/fetch-all");L(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},ke=async()=>{try{const R=await re.get("/contacts/admin/fetch-all");ae(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},ye=async()=>{try{const R=await re.get("/users/all");q(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{xe(),Ve(),ke(),ye()},[]);const Me=async R=>{R&&(V({id:R.id||null,name:R.name||"",account_id:R.account_id?.toString()||"",primary_contact_id:R.primary_contact_id?.toString()||"",stage:R.stage||"PROPOSAL",amount:R.amount?.toString()||"",close_date:R.close_date?new Date(R.close_date).toISOString().split("T")[0]:"",assigned_to:R.assigned_to?.toString()||"",currency:R.currency||"PHP",description:R.description||""}),me(R.account||null),ve(R.contact||null),z(!0),B(R.id),o(null),h(!0))},He=async(R=!1)=>{try{const $=await re.get("/deals/admin/fetch-all"),U=[...Array.isArray($.data)?$.data:[]].sort((de,ge)=>{const ue=de?.created_at?new Date(de.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-ue});if(b(U),!R&&l&&l.id){const de=U.find(ge=>ge.id===l.id);de&&o({...de})}}catch($){console.error("Failed to refresh deal data:",$),await xe()}},Be=R=>{const $=R.name.trim();if(!$){Y.error("Deal name is required.");return}if(!R.account_id){Y.error("Account is required.");return}const I=D&&K?"update":"create",U=$;A({title:I==="create"?"Confirm New Deal":"Confirm Update",message:I==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:U}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:U}),"?"]}),confirmLabel:I==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:I,formData:R,targetId:K||null,name:U}})},dt=R=>{if(!R)return;const $=R.name||"this deal";A({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:R.id,name:$}})},M=async()=>{if(!_?.action){A(null);return}const{action:R}=_,{type:$,formData:I,targetId:U,name:de}=R;E(!0);try{if($==="create"){S(!0);const ge={name:I.name.trim(),account_id:parseInt(I.account_id),primary_contact_id:I.primary_contact_id?parseInt(I.primary_contact_id):null,stage:I.stage,amount:I.amount?parseFloat(I.amount):null,currency:I.currency||"PHP",close_date:I.close_date||null,description:I.description||null,assigned_to:I.assigned_to?parseInt(I.assigned_to):null};await re.post("/deals/admin/create",ge),Y.success(`Deal "${de}" created successfully.`),h(!1),await xe()}else if($==="update"){if(!U)throw new Error("Missing deal identifier for update.");S(!0);const ge={};I.name!==void 0&&(ge.name=I.name.trim()),I.account_id!==void 0&&I.account_id!==""&&(ge.account_id=parseInt(I.account_id)),I.primary_contact_id!==void 0&&(ge.primary_contact_id=I.primary_contact_id?parseInt(I.primary_contact_id):null),I.stage!==void 0&&(ge.stage=I.stage),I.amount!==void 0&&I.amount!==""&&(ge.amount=parseFloat(I.amount)),I.currency!==void 0&&(ge.currency=I.currency),I.close_date!==void 0&&(ge.close_date=I.close_date||null),I.description!==void 0&&(ge.description=I.description||null),I.assigned_to!==void 0&&(ge.assigned_to=I.assigned_to?parseInt(I.assigned_to):null),await re.put(`/deals/admin/${U}`,ge),Y.success(`Deal "${de}" updated successfully.`),h(!1),await xe()}else if($==="delete"){if(!U)throw new Error("Missing deal identifier for deletion.");await re.delete(`/deals/admin/${U}`),Y.success(`Deal "${de}" deleted successfully.`),l?.id===U&&o(null),await xe()}}catch(ge){console.error(ge);const ue=$==="create"?"Failed to create deal. Please review the details and try again.":$==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Se=ge.response?.data?.detail||ue;Y.error(Se)}finally{($==="create"||$==="update")&&S(!1),E(!1),A(null)}},pe=()=>{T||A(null)},se=()=>{h(!1),V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),ve(null),z(!1),B(null),S(!1)},je=(p??[]).filter(R=>R.stage==="PROSPECTING").length,We=(p??[]).filter(R=>R.stage==="QUALIFICATION").length,Ne=(p??[]).filter(R=>R.stage==="PROPOSAL").length,qe=(p??[]).filter(R=>R.stage==="NEGOTIATION").length,De=(p??[]).filter(R=>R.stage==="CLOSED_WON").length,Je=(p??[]).filter(R=>R.stage==="CLOSED_LOST").length,at=(p??[]).filter(R=>R.stage==="CLOSED_CANCELLED").length,ot=[{title:"Prospecting",value:je,icon:hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:We,icon:Qa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Ne,icon:Yt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:qe,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:De,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Je,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:at,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&a.jsx(It,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Yt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ot.map(R=>a.jsx(lIe,{...R},R.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:R=>t(R.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:r,onChange:R=>i(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(R=>`${R.assigned_deals?.first_name} ${R.assigned_deals?.last_name}`))].map((R,$)=>a.jsx("option",{value:R,children:R},$))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ce.length>0?F.map(R=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{o({...R}),G(R.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.deal_id?R.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:R.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:R.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.contact?.first_name&&R.contact?.last_name?`${R.contact.first_name} ${R.contact.last_name}`:R.contact?.first_name||R.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ie(R.stage)}`,children:be(R.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",R.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.assigned_deals?.first_name&&R.assigned_deals?.last_name?`${R.assigned_deals.first_name} ${R.assigned_deals.last_name}`:R.assigned_deals?.first_name||R.assigned_deals?.last_name||"--"})]},R.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ce.length,pageSize:lg,currentPage:v,onPrev:ie,onNext:he,label:"deals"}),m&&a.jsx(oIe,{onClose:se,formData:te,setFormData:V,isEditing:D,onSubmit:Be,isSubmitting:C||T,accounts:O,contacts:H,users:W,currentAccount:ee,currentContact:we}),l&&a.jsx(Ux,{relatedActs:le,selectedDeal:l,show:!!l,onClose:()=>o(null),activeTab:d,setActiveTab:c,onEdit:Me,onDelete:dt,onStatusUpdate:He}),_&&a.jsx(iIe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:M,onCancel:pe,loading:T})]})}function iIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function lIe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function oIe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:d=[],currentAccount:c=null,currentContact:m=null}){const[h,p]=g.useState(!1),b=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){Y.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){Y.error("Amount must be a number greater than 0.");return}if(!t.account_id){Y.error("Please select an account.");return}if(!t.primary_contact_id){Y.error("Please select a primary contact.");return}if(!t.assigned_to){Y.error("Please assign this deal to a user.");return}r?.(t)},w=v=>{v.target.id==="modalBackdrop"&&e()},x=g.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(o)?o:[];return v?j.filter(C=>{const _=[C?.account_id,C?.accountId,C?.account?.id,C?.account?.account_id,C?.account?.accountId].find(A=>A!=null&&String(A).trim()!=="");return _?String(_)===v:!1}):j},[o,t.account_id]);return g.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;x.some(S=>String(S?.id)===j)||n(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,n]),a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:b,noValidate:!0,children:[a.jsx(I_,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:h,className:"md:col-span-2"}),a.jsx($_,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:l||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:c,required:!0,isSubmitted:h}),a.jsx($_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m,required:!0,isSubmitted:h}),a.jsx(cU,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(I_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:h}),a.jsx(cU,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(I_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx($_,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:d||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:h,className:"md:col-span-2"}),a.jsx(dIe,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function I_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function cU({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function $_({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:d=null,required:c=!1,isSubmitted:m=!1}){const h=m&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(cIe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:d,hasError:h})]})}function cIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),x=e.find(C=>String(C.id)===String(t))||o,v=x?s(x):"",j=g.useMemo(()=>{const C=h.trim().toLowerCase();return(C?e.filter(_=>(s(_)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const C=S=>{b.current&&!b.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:v,placeholder:r,onFocus:()=>!i&&m(!0),onChange:C=>{p(C.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(C=>{const S=String(C.id),_=s(C),A=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function dIe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:d=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uIe({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const d=bt(),[c]=Ss(),m=c.get("id"),[h,p]=g.useState(e||null),[b,w]=g.useState(s||"Overview"),{user:x}=Xt();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",x)},[h,x]);const v=s!==void 0?s:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const A=(await re.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",A.length);const T=A.find(E=>E.id===parseInt(m));if(console.log("Found deal:",T),T){console.log("Deal data structure:",{id:T.id,name:T.name,amount:T.amount,stage:T.stage,account:T.account,contact:T.contact,assigned_deals:T.assigned_deals,deal_creator:T.deal_creator,allKeys:Object.keys(T)});const E={...T,amount:typeof T.amount=="number"?T.amount:parseFloat(T.amount||0),probability:T.probability||0};p(E)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Bt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):w(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),A=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>A===E?"orange":A>E?"green":"gray").map((E,D)=>a.jsxs(pt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),D<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},D))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:jt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Nt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),v==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(bj,{selectedDeal:h,onStatusUpdate:o,onClose:n})})]})]})]})})}function mIe({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=g.useState(e?.stage||""),[i,l]=g.useState(!1),o=bt(),{user:d}=Xt();g.useEffect(()=>{console.log("AdminDealsInformation mounted sahdksd",e),console.log("User sadad:",d)},[e,d]);const c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];g.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const m=async()=>{if(!e||!e.id){Y.error("No deal selected");return}if(!s||s===e.stage){Y.info("Please select a different stage");return}const h=e.id;l(!0);try{await re.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{Y.success("Deal status updated successfully")},300)}catch(p){console.error(p);const b=p.response?.data?.detail||"Failed to update deal status";Y.error(b)}finally{l(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>o("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),b=encodeURIComponent(""),w=`https://mail.google.com/mail/?view=cm&fs=1&to=${h}&su=${p}&body=${b}`;window.open(w,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Deal"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Deal"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==d?.id&&e.assigned_to!==d?.id,children:c.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===d?.id||e.assigned_to===d?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:m,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}const og=10,R_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],z_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},wi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},U_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",fIe=e=>{switch(wi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},hIe=e=>{switch(wi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Yy=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",cg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",gIe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},F_=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},dU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},uU=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},qv=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},pIe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=qv(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=qv(t);return n||null},xIe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},yIe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function bIe(){const e=bt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState([]),[h,p]=g.useState([]),[b,w]=g.useState(null),[x,v]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[A,T]=g.useState(!1),[E,D]=g.useState(null),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(z_),[ae,W]=g.useState(""),[q,le]=g.useState("Filter by Status"),[Q,te]=g.useState(null),[V,ee]=g.useState(1),[me,we]=g.useState("Overview"),[ve,Ae]=g.useState("Draft"),[be,Ie]=g.useState(null);g.useEffect(()=>{async function X(){try{const Ee=await re.get("/auth/me");Ie(Ee.data)}catch(Ee){console.error(Ee)}}X()},[]),g.useEffect(()=>{let X=!0;return(async()=>{const $e=pIe();if($e&&X){w($e);return}try{const Ye=await re.get("/auth/me"),J=qv(Ye?.data);if(J&&X){w(J);return}}catch{}try{const Ye=await re.get("/users/me"),J=qv(Ye?.data);if(J&&X){w(J);return}}catch{}X&&w(null)})(),()=>{X=!1}},[]);const G=g.useCallback(X=>X&&o.find($e=>String($e.id)===String(X))?.name||"",[o]),Ce=g.useCallback(X=>{if(!X)return"";const Ee=c.find($e=>String($e.id)===String(X));return Ee?`${Ee.first_name} ${Ee.last_name}`.trim():""},[c]),ce=g.useCallback(X=>{if(!X)return"--";const Ee=i.find($e=>String($e.id)===String(X));return Ee?.deal_name||Ee?.name||`Deal #${dU(X)}`},[i]),F=g.useCallback(X=>{const Ee=i.find(J=>String(J.id)===String(X)),$e=xIe(Ee);let Ye=yIe(Ee);if(!Ye&&$e){const J=c.filter(ne=>String(ne.account_id||"")===String($e));if(J.length>0){const ne=[...J].sort((oe,Oe)=>{const et=`${oe.first_name||""} ${oe.last_name||""}`.trim().toLowerCase(),nt=`${Oe.first_name||""} ${Oe.last_name||""}`.trim().toLowerCase();return et.localeCompare(nt)});Ye=String(ne[0].id)}}if($e&&Ye){const J=c.find(ne=>String(ne.id)===String(Ye));J?.account_id&&String(J.account_id)!==String($e)&&(Ye="")}return{accountId:$e||"",contactId:Ye||""}},[i,c]),ie=g.useCallback(X=>{if(!X)return"--";if(X.deal?.deal_name)return X.deal.deal_name;if(X.deal?.name)return X.deal.name;const Ee=X.deal_id||X.deal?.id;return Ee?ce(Ee):"--"},[ce]),he=g.useCallback(X=>{if(!X)return"--";if(X.account?.name)return X.account.name;let Ee=X.account_id||X.account?.id;if(!Ee){const $e=X.deal_id||X.deal?.id;$e&&(Ee=F($e).accountId)}return Ee?G(Ee)||`Account #${Ee}`:"--"},[F,G]),Le=g.useCallback(X=>{if(!X)return"--";if(X.contact?.first_name||X.contact?.last_name)return`${X.contact?.first_name||""} ${X.contact?.last_name||""}`.trim()||"--";let Ee=X.contact_id||X.contact?.id;if(!Ee){const Ye=X.deal_id||X.deal?.id;Ye&&(Ee=F(Ye).contactId)}return(Ee?Ce(Ee):"")||(Ee?`Contact #${Ee}`:"--")},[F,Ce]),xe=g.useCallback(async(X=null)=>{r(!0);try{const Ee=await re.get("/quotes/admin/fetch-all"),Ye=[...Array.isArray(Ee.data)?Ee.data:[]].sort((J,ne)=>{const oe=J?.created_at||J?.updated_at||0,Oe=ne?.created_at||ne?.updated_at||0;return new Date(Oe)-new Date(oe)});if(n(Ye),X){const J=Ye.find(ne=>ne.id===X);v(J||null)}}catch(Ee){console.error(Ee),n([]),Ee.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),Ve=g.useCallback(async()=>{try{const X=await re.get("/deals/admin/fetch-all");l(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load deals (permission denied).")}},[]),ke=g.useCallback(async()=>{try{const X=await re.get("/accounts/admin/fetch-all");d(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),ye=g.useCallback(async()=>{try{const X=await re.get("/contacts/admin/fetch-all");m(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},[]),Me=g.useCallback(async()=>{try{const X=await re.get("/users/all");p(Array.isArray(X.data)?X.data:[])}catch(X){console.error(X),X.response?.status===403&&Y.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{xe(),Ve(),ke(),ye(),Me()},[xe,Ve,ke,ye,Me]);const He=g.useMemo(()=>{const X=ae.trim().toLowerCase(),Ee=q.trim();return t.filter($e=>{const Ye=ie($e),J=he($e),ne=Le($e),oe=F_($e.presented_date,$e.validity_days),Oe=[$e.quote_id,Ye,J,ne,$e.total_amount?.toString(),$e.validity_days?.toString(),$e.presented_date?cg($e.presented_date):"",oe?cg(oe):"",$e.assigned_user?.first_name,$e.assigned_user?.last_name,$e.creator?.first_name,$e.creator?.last_name,$e.status,$e.notes,Yy($e.created_at),Yy($e.updated_at)],et=X===""||Oe.some(ht=>ht==null?!1:ht.toString().toLowerCase().includes(X)),nt=Ee==="Filter by Status"||wi($e.status)===Ee;return et&&nt})},[t,ae,q,ie,he,Le]),Be=Math.max(1,Math.ceil(He.length/og)||1);g.useEffect(()=>ee(1),[ae,q]),g.useEffect(()=>{ee(X=>{const Ee=Math.max(1,Math.ceil(He.length/og)||1);return X>Ee?Ee:X})},[He.length]);const dt=g.useMemo(()=>{const X=(V-1)*og;return He.slice(X,X+og)},[He,V]),M=()=>ee(X=>Math.max(X-1,1)),pe=()=>ee(X=>Math.min(X+1,Be)),se=X=>{v(X),we("Overview"),Ae(wi(X?.status)||"Draft")},je=()=>{v(null),we("Overview")},We=X=>{X.target.id==="quoteModalBackdrop"&&!z&&je()},Ne=g.useCallback(()=>{C(!1),_(!1),O(null),H(z_),T(!1)},[]),qe=X=>{X.target.id==="modalBackdrop"&&!A&&!z&&Ne()},De=X=>{const{name:Ee,value:$e}=X.target;if(Ee==="deal_id"){const{accountId:Ye,contactId:J}=F($e);H(ne=>({...ne,deal_id:$e,account_id:Ye,contact_id:J}));return}H(Ye=>({...Ye,[Ee]:$e}))},Je=()=>{H(z_),_(!1),O(null),C(!0)},at=X=>{if(!X)return;v(null);const Ee=X.deal?.id?String(X.deal.id):X.deal_id?String(X.deal_id):"",$e=Ee?F(Ee):{accountId:"",contactId:""},Ye=X.account?.id?String(X.account.id):X.account_id?String(X.account_id):$e.accountId,J=X.contact?.id?String(X.contact.id):X.contact_id?String(X.contact_id):$e.contactId,ne=X.assigned_user?.id?String(X.assigned_user.id):X.assigned_to?String(X.assigned_to):"";H({deal_id:Ee,account_id:Ye||"",contact_id:J||"",total_amount:X.total_amount?.toString()||"",presented_date:gIe(X.presented_date),validity_days:X.validity_days!==null&&X.validity_days!==void 0?String(X.validity_days):"",status:wi(X.status)||"Draft",assigned_to:ne,notes:X.notes||""}),_(!0),O(X.id),C(!0)},ot=X=>{if(!X)return;const Ee=X.quote_id||"this quote";D({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Ee}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:X.id,name:Ee}})},[R,$]=g.useState(!1),I=X=>{if(X.preventDefault(),$(!0),!b){Y.error("Unable to determine current user. Please log in again.");return}if(!L.deal_id){Y.error("Deal is required.");return}if(!L.assigned_to){Y.error("Assigned To is required.");return}const $e=F(L.deal_id),Ye={deal_id:Number(L.deal_id),account_id:$e.accountId?Number($e.accountId):null,contact_id:$e.contactId?Number($e.contactId):null,total_amount:Number(L.total_amount),presented_date:L.presented_date||null,validity_days:L.validity_days===""?null:Number(L.validity_days),status:L.status||"Draft",assigned_to:L.assigned_to?Number(L.assigned_to):null,notes:L.notes?.trim()||null},J=S&&B?"update":"create",ne=ce(L.deal_id),oe=J==="create"?{...Ye,created_by_id:Number(b)}:Ye;D({title:J==="create"?"Confirm New Quote":"Confirm Update",message:J==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:J==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:oe,targetId:B||null,name:ne}})},U=async()=>{if(!E?.action){D(null);return}const{action:X}=E,{type:Ee,payload:$e,targetId:Ye,name:J}=X;K(!0);try{if(Ee==="create")T(!0),await re.post("/quotes/admin",$e),Y.success("Quote created successfully."),Ne(),await xe();else if(Ee==="update"){if(!Ye)throw new Error("Missing quote identifier for update.");T(!0),await re.put(`/quotes/admin/${Ye}`,$e),Y.success("Quote updated successfully."),Ne(),await xe(),x?.id===Ye&&v(null)}else if(Ee==="delete"){if(!Ye)throw new Error("Missing quote identifier for deletion.");const ne=x?.id;te(Ye),await re.delete(`/quotes/admin/${Ye}`),Y.success(`Quote "${J}" deleted successfully.`),await xe(ne&&ne!==Ye?ne:null),ne===Ye&&v(null)}}catch(ne){console.error(ne);const oe=Ee==="create"?"Failed to create quote. Please review the details and try again.":Ee==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Y.error(oe),(Ee==="create"||Ee==="update")&&T(!1),Ee==="delete"&&te(null)}finally{(Ee==="create"||Ee==="update")&&T(!1),Ee==="delete"&&te(null),K(!1),D(null)}},de=()=>{z||D(null)},ge=g.useCallback((X,Ee)=>{const $e=X?.deal_id??X?.deal?.id??"",Ye=$e?Number($e):null,J=Ye?F(String(Ye)):{accountId:"",contactId:""},ne=X?.account_id??X?.account?.id??J.accountId??null,oe=X?.contact_id??X?.contact?.id??J.contactId??null,Oe=X?.total_amount??0,et=X?.assigned_to??X?.assigned_user?.id??null;return{deal_id:Ye,account_id:ne!=null&&String(ne).trim()!==""?Number(ne):null,contact_id:oe!=null&&String(oe).trim()!==""?Number(oe):null,total_amount:Number(Oe),presented_date:X?.presented_date||null,validity_days:X?.validity_days===""||X?.validity_days===void 0||X?.validity_days===null?null:Number(X.validity_days),status:Ee,assigned_to:et!=null&&String(et).trim()!==""?Number(et):null,notes:X?.notes?.trim()||null}},[F]),ue=g.useCallback(async()=>{if(!x?.id)return;const X=wi(ve),Ee=[X,X.toLowerCase()],$e=async Ye=>re.patch(`/quotes/admin/${x.id}/status`,{status:Ye},{headers:{"Content-Type":"application/json"}});try{let Ye=!1;for(const J of Ee)try{await $e(J),Ye=!0;break}catch(ne){if(ne?.response?.status===422)continue;throw ne}if(!Ye){const J=ge(x,X);if(!J.deal_id){Y.error("Cannot update status: missing deal_id on selected quote.");return}if(!J.total_amount||J.total_amount<=0){Y.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await re.put(`/quotes/admin/${x.id}`,J)}Y.success(`Quote status updated to ${X}`),v(null),we("Overview"),await xe()}catch(Ye){console.error(Ye);const J=Ye?.response?.data?.message||(Ye?.response?.data?.errors?Object.values(Ye.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Y.error(J)}},[x,ve,xe,ge]),Se=[{label:"Filter by Status",value:"Filter by Status"},...R_.map(X=>({label:X.label,value:X.value}))],Fe=E?.action?.type==="delete"?E.action.targetId:null,ft=x&&(Q===x.id||Fe===x.id),vt=x&&Q===x.id,ze=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:X=>X.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:je,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ie(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${hIe(x.status)}`,children:U_(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>at(x),disabled:z||E?.action?.type==="update"&&E.action.targetId===x.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ot(x),disabled:!!ft,children:vt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(X=>a.jsx("button",{onClick:()=>we(X),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${me===X?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:X},X))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:uU(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ie(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:he(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:Le(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:cg(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:cg(F_(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:U_(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Yy(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Yy(x.updated_at)||"N/A"})]})]})}),me==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||wi(x.status)||"Draft",onChange:X=>Ae(X.target.value),children:R_.map(X=>a.jsx("option",{value:X.value,children:X.label},X.value))}),a.jsx("button",{onClick:ue,disabled:wi(ve)===wi(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${wi(ve)===wi(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,yt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(da,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Je(),$(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:X=>W(X.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:q,onChange:X=>le(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Se.map(X=>a.jsx("option",{value:X.value,children:X.label},X.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):He.length>0?dt.map(X=>{const Ee=F_(X.presented_date,X.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>se(X),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:uU(X.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:he(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:Le(X)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:X.total_amount?`${Number(X.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${fIe(X.status)}`,children:U_(X.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:X.assigned_user?`${X.assigned_user.first_name} ${X.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:cg(Ee)||"--"})})]},X.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:He.length,pageSize:og,currentPage:V,onPrev:M,onNext:pe,label:"quotes"})]}),Te=j?a.jsx("div",{id:"modalBackdrop",onClick:qe,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:X=>X.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Ne(),$(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||z,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:I,children:[a.jsx(fU,{label:"Deal",name:"deal_id",value:L.deal_id,onChange:X=>{const{accountId:Ee,contactId:$e}=F(X);H(Ye=>({...Ye,deal_id:X,account_id:Ee,contact_id:$e}))},items:Array.isArray(i)?i:[],getLabel:X=>`${dU(X?.deal_id??"")} ${X?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:R,disabled:A||i.length===0,className:"md:col-span-2"}),a.jsx(mU,{label:"Account",value:G(L.account_id)||(L.account_id?`Account #${L.account_id}`:""),disabled:!0}),a.jsx(mU,{label:"Contact",value:Ce(L.contact_id)||(L.contact_id?`Contact #${L.contact_id}`:""),disabled:!0}),a.jsx(B_,{label:"Total Amount",name:"total_amount",type:"number",value:L.total_amount,onChange:De,placeholder:"0.00",disabled:A}),a.jsx(B_,{label:"Presented Date",name:"presented_date",type:"date",value:L.presented_date,onChange:De,disabled:A}),a.jsx(B_,{label:"Validity Days",name:"validity_days",type:"number",value:L.validity_days,onChange:De,placeholder:"30",disabled:A}),a.jsx(fU,{label:"Assigned To",value:L.assigned_to||"",onChange:X=>H(Ee=>({...Ee,assigned_to:X})),items:Array.isArray(h)?h:[],getLabel:X=>{const Ee=`${X?.first_name??""} ${X?.last_name??""}`.trim();return Ee?X?.role?`${Ee} (${X.role})`:Ee:X?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:R,disabled:A}),a.jsx(vIe,{label:"Status",name:"status",value:L.status,onChange:De,options:R_,required:!0,disabled:A,className:"md:col-span-2"}),a.jsx(NIe,{label:"Notes",name:"notes",value:L.notes,onChange:De,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{Ne(),$(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||z,children:A?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,st=E?a.jsx(jIe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:U,onCancel:de,loading:z}):null;return a.jsxs(a.Fragment,{children:[x?ze:yt,Te,st]})}function B_({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function mU({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function vIe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const d=n!=null?String(n):"",m=r.some(h=>String(h.value)===d)?d:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function fU({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(wIe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function wIe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function NIe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function jIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function CIe(){const{userRole:e}=Zs();return a.jsx(ij,{currentUserRole:e,currentUserId:null})}const gd=10;function SIe(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,s]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,o]=g.useState(1),d=async()=>{try{const v=await re.get("/logs/read-all");t(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const c=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=n.trim().toLowerCase(),j=r?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,T=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,E=[_,T,S.action,S.entity_type,A,S.description],D=v===""||E.some(K=>K==null?!1:K.toString().toLowerCase().includes(v)),z=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return D&&z}).sort((S,_)=>{const A=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,n,r]),m=Math.max(1,Math.ceil(c.length/gd)||1);g.useEffect(()=>{o(1)},[n,r]),g.useEffect(()=>{o(v=>{const j=Math.max(1,Math.ceil(c.length/gd)||1);return v>j?j:v})},[c.length]);const h=g.useMemo(()=>{const v=(l-1)*gd;return c.slice(v,v+gd)},[c,l]);c.length===0||(l-1)*gd+1,Math.min(l*gd,c.length);const p=()=>o(v=>Math.max(v-1,1)),b=()=>o(v=>Math.min(v+1,m)),w=()=>{if(!c.length){wx.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],j=c.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),C=[v.join(","),...j.map(T=>T.map(E=>`"${String(E).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},x=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(It,{message:"Loading audit logs..."}),a.jsx(vx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Nt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ns,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[a.jsx(Rc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:v=>s(v.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(c)&&c.length>0?h.map((v,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(v.action)}`,children:v.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:c.length,pageSize:gd,currentPage:l,onPrev:p,onNext:b,label:"logs"})]})}const _Ie=10,AIe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],TIe=e=>e?String(e).toUpperCase():"",Vm=e=>{const t=TIe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},H_=e=>{const t=Vm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},hU=e=>{switch(Vm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},gU=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function EIe(){const[e,t]=g.useState(!1),[n,s]=g.useState(null),[r,i]=g.useState(null),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(!1),[_,A]=g.useState(!1),[T,E]=g.useState("PLANNED"),[D,z]=g.useState(!1),[K,B]=g.useState(!1),[O]=Ss(),L=bt(),H=pa(),W={subject:"",call_time:(()=>{const M=new Date,pe=M.getFullYear(),se=String(M.getMonth()+1).padStart(2,"0"),je=String(M.getDate()).padStart(2,"0");return`${pe}-${se}-${je}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[q,le]=g.useState(W);g.useEffect(()=>{const M=H.state?.openCallModal,pe=H.state?.initialCallData?.relatedTo1||O.get("id");(M||pe)&&(t(!0),H.state?.initialCallData&&le(se=>({...se,...H.state.initialCallData})),pe&&le(se=>({...se,relatedTo1:pe})),L(H.pathname,{replace:!0,state:{}}))},[H,O,L]);const Q=async()=>{try{B(!0);const M=await re.get("/calls/admin/fetch-all"),se=[...Array.isArray(M.data)?M.data:[]].sort((je,We)=>{const Ne=je?.created_at?new Date(je.created_at):0;return(We?.created_at?new Date(We.created_at):0)-Ne});h(se)}catch(M){console.error("Error fetching calls:",M),Y.error("Failed to load calls")}finally{B(!1)}},te=async()=>{try{const M=await re.get("/users/all");b(M.data)}catch(M){console.error("Error fetching users: ",M)}};g.useEffect(()=>{te(),Q()},[]);const V=[],ee="",me="Filter by Status",we="Filter by Users",ve=1,Ae=m,be=m,Ie=m.length,G=m.filter(M=>Vm(M.status)==="PLANNED").length,Ce=m.filter(M=>Vm(M.status)==="HELD").length,ce=m.filter(M=>Vm(M.status)==="NOT_HELD").length,F=[{title:"Total",value:Ie,icon:js,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:G,icon:ds,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ce,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ce,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ie,he]=g.useState("Overview"),Le=M=>{const{name:pe,value:se}=M.target;le(je=>{const We={...je,[pe]:se};return pe==="relatedType1"&&(We.relatedTo1="",se==="Lead"?(We.relatedType2=null,We.relatedTo2=null,c([])):se==="Account"&&(We.relatedType2="Contact")),pe==="relatedType2"&&(We.relatedTo2=""),We})};g.useEffect(()=>{const M=async()=>{try{o([]);let pe;q.relatedType1==="Lead"?pe=await re.get("/leads/admin/getLeads"):q.relatedType1==="Account"&&(pe=await re.get("/accounts/admin/fetch-all"));let se=[];if(pe&&Array.isArray(pe.data)?se=pe.data:se=[],w&&q.relatedTo1)try{let je;q.relatedType1==="Lead"?je=await re.get(`/leads/get/${q.relatedTo1}`):q.relatedType1==="Account"&&(je=await re.get(`/accounts/get/${q.relatedTo1}`)),je&&je.data&&(se.some(Ne=>String(Ne.id)===String(q.relatedTo1))||(se=[je.data,...se]))}catch(je){console.error("Error fetching specific related item:",je)}o(se)}catch(pe){console.error("Error fetching data:",pe),o([])}};q.relatedType1&&M()},[q.relatedType1,w,q.relatedTo1]),g.useEffect(()=>{const M=async()=>{try{c([]);let pe;if(q.relatedType1==="Account"&&q.relatedTo1)q.relatedType2==="Contact"?pe=await re.get(`/contacts/from-acc/${q.relatedTo1}`):q.relatedType2==="Deal"&&(pe=await re.get(`/deals/from-acc/${q.relatedTo1}`));else{c([]);return}pe&&Array.isArray(pe.data)?c(pe.data):c([])}catch(pe){console.error("Error fetching data:",pe),c([])}};q.relatedType2&&M()},[q.relatedType2,q.relatedTo1,q.relatedType1]);const xe=M=>{if(M.preventDefault(),!q.assigned_to){Y.error("Please assign the call to a user.");return}const pe={...q,duration_minutes:q.duration_minutes?parseInt(q.duration_minutes,10):null,relatedTo1:q.relatedTo1?parseInt(q.relatedTo1,10):null,relatedTo2:q.relatedType1==="Lead"?null:q.relatedTo2?parseInt(q.relatedTo2,10):null,relatedType2:q.relatedType1==="Lead"?null:q.relatedType2,assigned_to:q.assigned_to?parseInt(q.assigned_to,10):null},se=w&&v?"update":"create",je=(q.subject||"").trim()||"Untitled Call";i({title:se==="create"?"Confirm New Call":"Confirm Update",message:se==="create"?`Create "${je}"?`:`Save changes to "${je}"?`,confirmLabel:se==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:pe,targetId:v||null,name:je}})},Ve=M=>s(M),ke=()=>{t(!1),x(!1),j(null)},ye=async()=>{if(!r?.action){i(null);return}const{action:M}=r,{type:pe,payload:se,targetId:je,name:We}=M;A(!0);try{if(pe==="create")S(!0),await re.post("/calls/create",se),Y.success(`Call "${We}" created successfully.`),t(!1),le(W),x(!1),j(null),await Q();else if(pe==="update"){if(!je)throw new Error("Missing call identifier for update.");S(!0),await re.put(`/calls/${je}`,se),Y.success(`Call "${We}" updated successfully.`),t(!1),le(W),x(!1),j(null),await Q()}else if(pe==="delete"){if(!je)throw new Error("Missing call identifier for deletion.");await re.delete(`/calls/${je}`),Y.success(`Call "${We}" deleted successfully.`),n?.id===je&&s(null),await Q()}}catch(Ne){const qe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",De=Ne?.response?.data?.detail||qe;Y.error(De)}finally{(pe==="create"||pe==="update")&&S(!1),A(!1),i(null)}},Me=()=>{_||i(null)},He=async()=>{if(n?.id)try{z(!0),await re.put(`/calls/${n.id}`,{status:T}),Y.success(`Status updated to ${H_(T)}`),h(M=>Array.isArray(M)?M.map(pe=>pe.id===n.id?{...pe,status:T}:pe):M),s(null)}catch(M){const pe=M.response?.data?.detail||"Failed to update status.";Y.error(pe)}finally{z(!1)}};g.useEffect(()=>{n&&E(Vm(n.status))},[n]);const Be=n?a.jsxs("div",{id:"callModalBackdrop",onClick:M=>M.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[K&&a.jsx(It,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${hU(n.status)}`,children:H_(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const M=Ne=>{if(!Ne)return"";const qe=new Date(Ne),De=qe.getFullYear(),Je=String(qe.getMonth()+1).padStart(2,"0"),at=String(qe.getDate()).padStart(2,"0"),ot=String(qe.getHours()).padStart(2,"0"),R=String(qe.getMinutes()).padStart(2,"0");return`${De}-${Je}-${at}T${ot}:${R}`},pe=n.lead?"Lead":n.account?"Account":"Lead",se=n.lead?n.lead.id:n.account?n.account.id:null,je=pe==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",We=pe==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;le({subject:n.subject||"",call_time:M(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:pe,relatedType2:je,relatedTo1:se?String(se):"",relatedTo2:We?String(We):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),s(null),t(!0)},children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const M=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${M}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:M}})},children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(M=>a.jsx("button",{onClick:()=>he(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ie===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ie==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Gl,{label:"Call Time",value:gU(n.call_time)}),a.jsx(Gl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Gl,{label:"Direction",value:n.direction||"--"}),a.jsx(Gl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Gl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Gl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Gl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Gl,{label:"Deal",value:n.deal.name}),a.jsx(Gl,{label:"Created At",value:gU(n.created_at)})]})}),ie==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:M=>E(M.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:D,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:D?"Updating...":"Update"})]})]})]})]})]}):null,dt=e?a.jsx("div",{id:"modalBackdrop",onClick:M=>M.target.id==="modalBackdrop"&&ke(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:ke,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:xe,children:[a.jsx(LIe,{label:"Subject",className:"md:col-span-2",name:"subject",value:q.subject,onChange:Le,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Le,value:q.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(G_,{items:Array.isArray(l)?l:[],value:q.relatedTo1??"",placeholder:`Search ${q.relatedType1||"here"}...`,getLabel:M=>q.relatedType1==="Lead"?M.title:M.name??"",onChange:M=>le(pe=>({...pe,relatedTo1:M})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Le,value:q.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:q.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(G_,{disabled:q.relatedType1==="Lead"||C,items:Array.isArray(d)?d:[],value:q.relatedTo2??"",placeholder:q.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${q.relatedType2||"Contact"}...`:`No ${q.relatedType2||""} data found`,getLabel:M=>q.relatedType2==="Contact"?`${M.first_name??""} ${M.last_name??""}`.trim():M.name??"",onChange:M=>le(pe=>({...pe,relatedTo2:M}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:q.call_time,onChange:Le,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:q.duration_minutes,onChange:Le,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(G_,{items:Array.isArray(p)?p:[],value:q.assigned_to??"",placeholder:"Search an account...",getLabel:M=>`${M.first_name} ${M.last_name}`,onChange:M=>le(pe=>({...pe,assigned_to:M}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Le,value:q.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Le,value:q.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(PIe,{className:"col-span-2",label:"Notes",value:q.notes,onChange:Le,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:ke,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(js,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{le(W),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:F.map(M=>a.jsx(kIe,{...M},M.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ee})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:me,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),AIe.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),V.map(M=>a.jsx("option",{value:M.name,children:M.name},M.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:K?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(It,{message:"Loading calls..."})})}):be.length>0?be.map(M=>a.jsxs("tr",{onClick:()=>Ve(M),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:M.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[M.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.lead.title}),M.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.account.name}),M.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[M.contact.first_name," ",M.contact.last_name]}),M.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M.call_time?new Date(M.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M?.call_assign_to?`${M.call_assign_to.first_name} ${M.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${hU(M.status)}`,children:H_(M.status)})})]},M.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Vt,{totalItems:Ae.length,pageSize:_Ie,currentPage:ve,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Be,dt,r&&a.jsx(DIe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ye,onCancel:Me,loading:_})]})}function kIe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function LIe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function PIe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Gl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function DIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function G_({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const pU=["To Do","In Progress","Review","Completed"],dg=10,OIe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},xU=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},MIe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,c=l||o||i||r,m=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:c,related_type:m}},IIe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,c=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let x="Lead",v="",j="",C="",S="Lead",_="",A="",T="";const E=o(),D=p(),z=l(),K=h();if(E){x="Account",S="Account",_=D,v=String(E);const B=d(),O=c(),L=b(),H=w();B?(j="Contact",A="Contact",T=L,C=String(B)):O&&(A="Deal",j="Deal",T=H,C=String(O))}else z?(S="Lead",_=K,x="Lead",v=String(z)):e.related_type==="Account"&&(x="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:A,relatedTo2Text:T,subject:e.title,relatedType1:x,relatedTo1:v,relatedType2:j,relatedTo2:C}};function $Ie(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[n,s]=g.useState("board"),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,A]=g.useState([]),[T,E]=g.useState(1),[D,z]=g.useState(null),[K,B]=g.useState(!1),O=bt(),L=pa(),[H,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const F=L.state?.openTaskModal,ie=L.state?.initialTaskData;F&&(i(!0),ie&&ae(he=>({...he,...ie})),O(L.pathname,{replace:!0,state:{}}))},[L,O]);const W=async()=>{try{const F=await re.get("/users/all");A(Array.isArray(F.data)?F.data:[])}catch(F){console.error("Failed to fetch users:",F),Y.error("Failed to fetch users.")}},q=async()=>{try{b(!0);const F=await re.get("/tasks/all"),he=(Array.isArray(F.data)?F.data:[]).map(IIe);he.sort((Le,xe)=>{const Ve=Le.createdAt?new Date(Le.createdAt):0;return(xe.createdAt?new Date(xe.createdAt):0)-Ve}),console.log("Fetched Tasks:",he),h(he),n==="list"&&E(1)}catch(F){console.error("Failed to load tasks:",F),Y.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(W(),q())},[t,e]);const le=()=>{o(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Q=(F=null,ie=!1)=>{o(F),c(ie),F?ae({id:F.id,subject:F.title||"",description:F.description||"",priority:F.priority||"Normal",status:F.status||"Not started",dueDate:OIe(F.dueDate),assignedTo:F.assignedToId?String(F.assignedToId):"",notes:F.notes||"",relatedType1Text:F.relatedType1Text||"",relatedTo1Text:F.relatedTo1Text||"",relatedType2Text:F.relatedType2Text||"",relatedTo2Text:F.relatedTo2Text||"",relatedType1:F.relatedType1||"",relatedTo1:F.relatedTo1||"",relatedType2:F.relatedType2||"",relatedTo2:F.relatedTo2||""}):le(),i(!0)},te=()=>{i(!1),o(null),c(!1),le()},V=async F=>{const ie=MIe(F);try{l&&!d?(await re.put(`/tasks/${l.id}`,ie),Y.success("Task updated successfully.")):(await re.post("/tasks/create",ie),Y.success("Task created successfully.")),i(!1),await q()}catch(he){console.error("Failed to save task:",he);const Le=he.response?.data?.detail||"Failed to save task.";Y.error(Le)}},ee=F=>{F&&z({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:F.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id}})},me=async()=>{if(!D?.action){z(null);return}const{action:F}=D;B(!0);try{F.type==="delete"&&(await re.delete(`/tasks/${F.targetId}`),Y.success("Task deleted successfully."),await q())}catch(ie){console.error("Task action failed:",ie),Y.error("Failed to delete task.")}finally{B(!1),z(null)}},we=()=>{K||z(null)},ve=g.useMemo(()=>{const F=w.trim().toLowerCase();return[...m].sort((he,Le)=>{const xe=he.createdAt?new Date(he.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-xe}).filter(he=>{const Le=F===""||he.title?.toLowerCase().includes(F)||he.description?.toLowerCase().includes(F)||he.assignedToName?.toLowerCase().includes(F)||he.createdBy?.toLowerCase().includes(F),xe=v==="Filter by Status"||he.status===v,Ve=C==="Filter by Priority"||he.priority===C;return Le&&xe&&Ve})},[m,w,v,C]);g.useEffect(()=>{E(1)},[w,v,C,n]),g.useEffect(()=>{if(n==="list"){const F=ve.length===0?1:Math.ceil(ve.length/dg);T>F&&E(F)}},[ve.length,T,n]);const Ae=g.useMemo(()=>{if(n==="board")return ve;const F=(T-1)*dg;return ve.slice(F,F+dg)},[ve,T,n]),be=g.useMemo(()=>{const F=new Date;return[{title:"To Do",value:m.filter(ie=>ie.status==="Not started").length,icon:ds,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ie=>ie.status==="In progress").length,icon:Zr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ie=>ie.status==="Completed").length,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ie=>ie.dueDate&&new Date(ie.dueDate)<F&&ie.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ie=>ie.priority==="High").length,icon:So,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Ie=F=>F.dueDate&&new Date(F.dueDate)<new Date&&F.status!=="Completed",G=F=>{switch(F.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ce=F=>{switch(F){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ce=F=>{switch(F){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(It,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zr,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>Q(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(na,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(F=>a.jsx(RIe,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:F=>x(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:v,onChange:F=>j(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),pU.map(F=>a.jsx("option",{children:F},F))]}),a.jsxs("select",{value:C,onChange:F=>S(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ve.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ve.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:pU.map(F=>{const ie=Ae.filter(he=>he.status===F);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:F}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ie.length})]}),a.jsx("div",{className:`space-y-3 ${ie.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ie.length>0?ie.map(he=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${G(he)}`,onClick:()=>Q(he,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:he.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",he.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",he.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Ie(he)?"text-red-600":"text-gray-600",children:he.dateAssigned?xU(he.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),Q(he)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(Ma,{})}),a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),ee(he)},className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})]},he.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},F)})}),!p&&!t&&ve.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Ae.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",F),Q(F,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:F.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(F.status||"To Do")}`,children:F.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(F.priority||"Low")}`,children:F.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:F.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ie(F)?"text-red-600 font-medium":""}`,children:F.dateAssigned?xU(F.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ie=>ie.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>Q(F),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ee(F),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(Ot,{})," Delete"]})]})})]},F.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Vt,{className:"mt-6",totalItems:ve.length,pageSize:dg,currentPage:ve.length===0?0:T,onPrev:()=>E(F=>Math.max(F-1,1)),onNext:()=>E(F=>Math.min(F+1,Math.max(1,Math.ceil(ve.length/dg)||1))),label:"tasks"}),a.jsx(Gx,{isOpen:r,onClose:te,onSave:V,onEdit:()=>c(!1),setFormData:ae,formData:H,isEditing:!d&&!!l,viewMode:d,users:_,currentUser:e,onDelete:ee}),D&&a.jsx(zIe,{open:!0,title:D.title,message:D.message,confirmLabel:D.confirmLabel,cancelLabel:D.cancelLabel,variant:D.variant,onConfirm:me,onCancel:we,loading:K})]})}function RIe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function zIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const fQ=e=>e?e.toUpperCase():"",Ky=e=>{const t=fQ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},UIe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},FIe=e=>{const t=fQ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},V_=10,W_={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},BIe=()=>{const e=bt(),t=pa(),[n]=Ss(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[o,d]=g.useState(!1),[c,m]=g.useState([]),[h,p]=g.useState(""),[b,w]=g.useState("Filter by Status"),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[A,T]=g.useState(W_),[E,D]=g.useState(!1),[z,K]=g.useState(null),[B,O]=g.useState(!1),[L,H]=g.useState(null),[ae,W]=g.useState(!1);g.useEffect(()=>{const G=t.state?.openMeetingModal,Ce=t.state?.initialMeetingData?.relatedTo||n.get("id");(G||Ce)&&(v(!0),t.state?.initialMeetingData&&T(ce=>({...ce,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const q=async()=>{if(s&&r){const G=sessionStorage.getItem("meetingDetailData");if(G)try{const Ce=JSON.parse(G);if(Ce.id===parseInt(s)){C(Ce),sessionStorage.removeItem("meetingDetailData");return}}catch(Ce){console.error(Ce)}}d(!0);try{const G=await re.get("/meetings/admin/fetch-all"),ce=[...Array.isArray(G.data)?G.data:[]].sort((F,ie)=>{const he=F?.createdAt?new Date(F.createdAt).getTime():0;return(ie?.createdAt?new Date(ie.createdAt).getTime():0)-he});if(l(ce),s&&!j){const F=ce.find(ie=>ie.id===parseInt(s));F&&C(F)}console.log(G.data)}catch{Y.error("Failed to load meetings.")}finally{d(!1)}},le=async()=>{try{const G=await re.get("/users/all");m(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G)}};g.useEffect(()=>{q(),le()},[]);const Q=G=>p(G.target.value),te=g.useMemo(()=>{const G=h.trim().toLowerCase(),Ce=b.trim().toUpperCase();return i.filter(ce=>{const F=[ce?.activity,ce?.description,ce?.relatedTo,ce?.assignedTo],ie=G===""||F.some(Le=>Le&&Le.toString().toLowerCase().includes(G)),he=Ce==="FILTER BY STATUS"||Ky(ce.status||"PENDING")===Ce;return ie&&he})},[i,h,b]),V=g.useMemo(()=>{const G=(S-1)*V_;return te.slice(G,G+V_)},[te,S]),ee=()=>{v(!1),T(W_),D(!1),K(null),O(!1)},me=()=>{T(W_),D(!1),K(null),v(!0)},we=G=>{let Ce="";if(G.meet_assign_to?.id)Ce=String(G.meet_assign_to.id);else if(G.assignedTo){const ye=c.find(Me=>`${Me.first_name} ${Me.last_name}`===G.assignedTo);Ce=ye?String(ye.id):""}const ce=ye=>{if(!ye)return"";try{const Me=new Date(ye),He=Me.getTimezoneOffset()*6e4;return new Date(Me.getTime()-He).toISOString().slice(0,16)}catch{return""}};let F="Lead",ie="",he="Contact",Le="";if(G.lead)F="Lead",ie=String(G.lead.id);else if(G.account)F="Account",ie=String(G.account.id),G.contact?(he="Contact",Le=String(G.contact.id)):G.deal&&(he="Deal",Le=String(G.deal.id));else if(G.relatedType||G.related_type){const ye=G.relatedType||G.related_type,Me=G.related_to||G.relatedToId;ye==="Lead"?(F="Lead",ie=String(Me)):(F="Account",ie=G.account_id?String(G.account_id):"")}const xe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ve=Ky(G.status),ke=xe[Ve]||"Planned";T({subject:G.subject||G.activity||"",location:G.location||"",startTime:ce(G.start_time||G.startTime),endTime:ce(G.end_time||G.endTime),status:ke,notes:G.description||G.notes||"",assignedTo:Ce,relatedType1:F,relatedTo1:ie,relatedType2:he,relatedTo2:Le}),D(!0),K(G.id),C(null),v(!0)},ve=G=>{if(!G.subject?.trim())return Y.error("Subject is required.");if(!G.startTime)return Y.error("Start time is required.");if(G.endTime&&!(new Date(G.endTime)-new Date(G.startTime)>0))return Y.error("End time must be after start time.");G.relatedType1,G.relatedTo1,G.relatedType1==="Account"&&G.relatedType2&&G.relatedTo2&&(G.relatedType2,G.relatedTo2);const Ce={...G,assignedTo:parseInt(G.assignedTo),relatedTo1:parseInt(G.relatedTo1),relatedTo2:parseInt(G.relatedTo2)},ce=E&&z?"update":"create";H({title:ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ce} "${Ce.subject}"?`,confirmLabel:ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ce,payload:Ce,targetId:z,name:Ce.subject}})},Ae=async()=>{if(!L?.action)return;const{type:G,payload:Ce,targetId:ce,name:F}=L.action;console.log(Ce),W(!0);try{G==="create"?(O(!0),await re.post("/meetings/create",Ce),Y.success(`Meeting "${F}" created.`),ee(),await q()):G==="update"?(O(!0),await re.put(`/meetings/${ce}`,Ce),Y.success(`Meeting "${F}" updated.`),ee(),await q()):G==="delete"&&(await re.delete(`/meetings/${ce}`),Y.success(`Meeting "${F}" deleted.`),j?.id===ce&&C(null),await q())}catch(ie){const he=ie.response?.data?.detail||"Action failed.";Y.error(typeof he=="string"?he:JSON.stringify(he)),console.error(he)}finally{O(!1),W(!1),H(null)}},be=G=>{H({title:"Delete Meeting",message:`Permanently delete "${G.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:G.id,name:G.activity}})},Ie=async(G,Ce)=>{try{await re.put(`/meetings/${G}`,{status:Ce}),Y.success("Status updated"),q(),C(null)}catch{Y.error("Failed to update status")}};return r&&s?j?a.jsx(Ic,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:be,onStatusUpdate:Ie}):a.jsx(It,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(It,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Nt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:me,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(na,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:Q,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:G=>w(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:V.length>0?V.map(G=>a.jsxs("tr",{onClick:()=>C(G),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:G.subject}),a.jsxs("td",{className:"py-3 px-4",children:[G.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.lead.title}),G.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.account.name}),G.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[G.contact.first_name," ",G.contact.last_name]}),G.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:UIe(G.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[G.meet_assign_to.first_name," ",G.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${FIe(Ky(G.status))}`,children:Ky(G.status).replace("_"," ")})})]},G.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Vt,{totalItems:te.length,pageSize:V_,currentPage:S,onPrev:()=>_(G=>Math.max(1,G-1)),onNext:()=>_(G=>G+1),label:"meetings"}),x&&a.jsx(xj,{onClose:ee,formData:A,setFormData:T,isEditing:E,onSubmit:ve,isSubmitting:B||ae,users:c}),j&&a.jsx(Ic,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:be,onStatusUpdate:Ie}),L&&a.jsx(HIe,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,variant:L.variant,onConfirm:Ae,onCancel:()=>H(null),loading:ae})]})};function HIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${c}`,children:l?"...":s})]})]})})}const vj=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],ug={firstName:"",lastName:"",email:"",password:"",role:""},GIe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},el=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",VIe=e=>{const t=el(e),n=vj.find(s=>el(s.value)===t);return n?n.value:e||""},TE=e=>{const t=el(e),n=vj.find(s=>el(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},yU=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},q_=(e,{size:t="sm"}={})=>{const n=el(e),s=GIe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:TE(e)})},pd=10,WIe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},bU=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function qIe(){const{user:e,loading:t}=Xt(),[n,s]=g.useState([]),[r,i]=g.useState(!1),[l,o]=g.useState(""),[d,c]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(ug),[_,A]=g.useState(!1),[T,E]=g.useState(null),[D,z]=g.useState(!1),[K,B]=g.useState(1),[O,L]=g.useState("Overview"),[H,ae]=g.useState(""),[W,q]=g.useState(!1),le=el(e?.role),Q=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(le),te=!t&&Q,V=g.useMemo(()=>{const M=vj.filter(pe=>el(pe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...M]},[]),ee=g.useCallback(M=>{M&&(s(pe=>pe.map(se=>se.id===M?{...se,highlight:!0}:se)),setTimeout(()=>{s(pe=>pe.map(se=>se.id===M?{...se,highlight:!1}:se))},2e3))},[]),me=g.useCallback(async()=>{i(!0);try{const M=await re.get("/users/all"),pe=Array.isArray(M.data)?M.data:[],se=bU(pe);s(se),h(je=>je&&(se.find(Ne=>Ne.id===je.id)||null)),console.log(M.data)}catch(M){console.error("Error fetching users:",M);const pe=M.response?.data?.detail||"Failed to load users. Please try again later.";Y.error(pe)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!Q&&e&&Y.error("You are not authorized to access User Management.")},[Q,t,e]),g.useEffect(()=>{t||!Q||me()},[t,Q,me]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const we=g.useMemo(()=>{const M=l.trim().toLowerCase(),pe=el(d);return bU(n.filter(se=>{if(!se)return!1;const je=M===""||[se.first_name,se.last_name,`${se.first_name||""} ${se.last_name||""}`,se.email,TE(se.role)].filter(Boolean).some(Ne=>Ne.toString().toLowerCase().includes(M)),We=pe===""||pe==="CEO"&&["CEO","ADMIN"].includes(el(se.role))||el(se.role)===pe;return je&&We}))},[n,l,d]),ve=Math.max(1,Math.ceil(we.length/pd)||1);g.useEffect(()=>{B(1)},[l,d]),g.useEffect(()=>{B(M=>{const pe=Math.max(1,Math.ceil(we.length/pd)||1);return M>pe?pe:M})},[we.length]);const Ae=g.useMemo(()=>{const M=(K-1)*pd;return we.slice(M,M+pd)},[we,K]);we.length===0||(K-1)*pd+1,Math.min(K*pd,we.length);const be=()=>B(M=>Math.max(M-1,1)),Ie=()=>B(M=>Math.min(M+1,ve)),G=()=>{S(ug),x(!1),j(null),b(!0)},Ce=M=>{console.log(M),h(M),L("Overview"),ae(M?.is_active?"Active":"Inactive")},ce=M=>{M.target.id==="userModalBackdrop"&&!D&&F()},F=()=>{h(null)},ie=(M,pe)=>{S(se=>({...se,[M]:pe}))},he=()=>{const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let pe="";for(let se=0;se<10;se+=1)pe+=M.charAt(Math.floor(Math.random()*M.length));ie("password",pe)},Le=()=>{_||D||(b(!1),S(ug),j(null),x(!1))},xe=M=>{S({firstName:M.first_name||"",lastName:M.last_name||"",email:M.email||"",password:"",role:VIe(M.role)}),x(!0),j(M.id),b(!0),h(null)},Ve=M=>{E({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[M.first_name," ",M.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:`${M.first_name||""} ${M.last_name||""}`.trim()||M.email||"user"}})},ke=M=>{M.preventDefault();const pe=C.firstName.trim(),se=C.lastName.trim(),je=C.email.trim(),We=C.password.trim(),Ne="Sales",qe=!(w&&v);if(!pe||!je||!Ne){Y.warn("Please fill in all required fields.");return}if(qe&&!We){Y.warn("Please fill in all required fields.");return}if(We&&We.length<8){Y.warn("Password should be at least 8 characters long.");return}const De={first_name:pe,last_name:se,email:je,role:Ne};console.log(De),(qe||We)&&(De.password=We);const Je=`${pe} ${se}`.trim(),at=qe?"create":"update";E({title:at==="create"?"Confirm New User":"Confirm User Update",message:at==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:Je})," with role"," ",a.jsx("span",{className:"font-semibold",children:TE(Ne)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:Je||je}),"?"]}),confirmLabel:at==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:at,payload:De,targetId:v,name:Je||je}})},ye=async()=>{if(!T?.action){E(null);return}const{action:M}=T,{type:pe,payload:se,targetId:je,name:We}=M;z(!0),(pe==="create"||pe==="update")&&A(!0);try{if(pe==="create"){const qe=(await re.post("/users/createuser",se)).data;await me(),ee(qe.id),Y.success(`User "${We}" created successfully.`),b(!1),S(ug),j(null),x(!1)}else if(pe==="update"){if(!je)throw new Error("Missing user identifier for update.");const qe=(await re.put(`/users/updateuser/${je}`,se)).data;await me(),h(null),ee(qe.id),Y.success(`User "${We}" updated successfully.`),b(!1),S(ug),j(null),x(!1)}else if(pe==="delete"){if(!je)throw new Error("Missing user identifier for deletion.");await re.delete(`/users/deleteuser/${je}`),s(Ne=>Ne.map(qe=>qe.id===je?{...qe,is_active:!1}:qe)),m&&m.id===je&&(h(null),ae("")),Y.success(`User "${We}" deactivated successfully.`)}}catch(Ne){console.error("User management error:",Ne);const qe=pe==="create"?"Failed to create user. Please review the details and try again.":pe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",De=Ne.response?.data?.detail||qe;Y.error(De)}finally{(pe==="create"||pe==="update")&&A(!1),z(!1),E(null)}},Me=()=>{D||E(null)},He=async()=>{if(!m||!H)return;const M=m.is_active?"Active":"Inactive";if(H===M)return;const pe=H==="Active";q(!0);try{const je=(await re.put(`/users/updateuser/${m.id}`,{is_active:pe})).data;s(We=>We.map(Ne=>Ne.id===je.id?je:Ne)),h(null),ae(""),Y.success(`User status updated to ${H}`)}catch(se){console.error("Failed to update user status:",se);const je=se.response?.data?.detail||"Failed to update user status. Please try again.";Y.error(je)}finally{q(!1)}},Be=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!te)&&a.jsx(It,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:G,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ga,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:M=>o(M.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:d,onChange:M=>c(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:V.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):we.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Ae.map(M=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${M.highlight?"bg-green-50":""} ${M.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[M.first_name," ",M.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ce(M),children:M.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:q_(M.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${M.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:M.is_active?"Active":"Inactive"})})]},M.id))})]})}),a.jsx(Vt,{className:"mt-4",totalItems:we.length,pageSize:pd,currentPage:K,onPrev:be,onNext:Ie,label:"users"})]}),dt=m?a.jsx("div",{id:"userModalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:F,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ia,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:WIe(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),q_(m.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(m.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>xe(m),disabled:D,children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ve(m),disabled:D,children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(M=>a.jsx("button",{onClick:()=>L(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${O===M?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:O==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:q_(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,M=>M.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:yU(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?yU(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const M=encodeURIComponent(m.email),pe=encodeURIComponent(""),se=encodeURIComponent(""),je=`https://mail.google.com/mail/?view=cm&fs=1&to=${M}&su=${pe}&body=${se}`;window.open(je,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:H||(m.is_active?"Active":"Inactive"),onChange:M=>ae(M.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:He,disabled:W||H===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||H===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Be,dt,a.jsx(YIe,{open:p,isEditing:w,isSubmitting:_,confirmProcessing:D,formData:C,onClose:Le,onSubmit:ke,onChange:ie,onGeneratePassword:he}),a.jsx(KIe,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:D,onConfirm:ye,onCancel:Me})]})}function YIe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:d}){if(!e)return null;const c=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:c,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(Qy,{label:"First Name",value:r.firstName,onChange:m=>o("firstName",m),placeholder:"John",required:!0,disabled:c}),a.jsx(Qy,{label:"Last Name",value:r.lastName,onChange:m=>o("lastName",m),placeholder:"Doe",required:!0,disabled:c}),a.jsx(Qy,{label:"Email",type:"email",value:r.email,onChange:m=>o("email",m),placeholder:"john.doe@company.com",required:!0,disabled:c||t}),a.jsx(Qy,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:m=>o("role",m),options:[{value:"",label:"Select role"},...vj],required:!0}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:m=>o("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:c,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Qy({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:d=>s(d.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))}):a.jsx("input",{type:t,value:n??"",onChange:d=>s(d.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function KIe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function QIe({toggleSidebar:e}){const[t,n]=g.useState(!1),s=g.useRef(null),r=pa(),{logout:i}=Zs(),{user:l,fetchUser:o}=Xt(),d={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};g.useEffect(()=>{o()},[]);const c=d[r.pathname]||"Marketing Panel";return g.useEffect(()=>{function m(h){s.current&&!s.current.contains(h.target)&&n(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Wp,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:c})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Gp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:l?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function XIe(){const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,i]=g.useState(!1),[l,o]=g.useState(!1),d=pa(),{fetchUser:c}=Xt();g.useEffect(()=>{c()},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],b=["/marketing/accounts","/marketing/contacts","/marketing/leads"],w=["/marketing/tasks"],x=p.includes(d.pathname),v=b.includes(d.pathname),j=w.includes(d.pathname);return g.useEffect(()=>{x&&t(!0),v&&s(!0),j&&i(!0)},[x,v,j]),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[a.jsxs(St,{to:"/marketing/dashboard",className:({isActive:C})=>C?m:h,children:[a.jsx(Vp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-lg"}),"Sales"]}),a.jsx(wt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/marketing/accounts",className:({isActive:C})=>C?m:h,children:[a.jsx(ba,{})," Accounts"]}),a.jsxs(St,{to:"/marketing/contacts",className:({isActive:C})=>C?m:h,children:[a.jsx(Ut,{})," Contacts"]}),a.jsxs(St,{to:"/marketing/leads",className:({isActive:C})=>C?m:h,children:[a.jsx(Ga,{})," Leads"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Nr,{className:"text-lg"}),"Tools"]}),a.jsx(wt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/marketing/campaigns",className:({isActive:C})=>C?m:h,children:[a.jsx(Ene,{})," Campaign"]}),a.jsxs(St,{to:"/marketing/templates",className:({isActive:C})=>C?m:h,children:[a.jsx(_ne,{})," Templates"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"text-lg"}),"Activity"]}),a.jsx(wt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsx("div",{className:"ml-6 mt-2 space-y-1",children:a.jsxs(St,{to:"/marketing/tasks",className:({isActive:C})=>C?m:h,children:[a.jsx(zt,{})," Tasks"]})})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(QIe,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:a.jsx(_f,{})})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vx(e){return e+.5|0}const Sc=(e,t,n)=>Math.max(Math.min(e,n),t);function $g(e){return Sc(Vx(e*2.55),0,255)}function kc(e){return Sc(Vx(e*255),0,255)}function Xl(e){return Sc(Vx(e/2.55)/100,0,1)}function vU(e){return Sc(Vx(e*100),0,100)}const Hr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},EE=[..."0123456789ABCDEF"],ZIe=e=>EE[e&15],JIe=e=>EE[(e&240)>>4]+EE[e&15],Xy=e=>(e&240)>>4===(e&15),e$e=e=>Xy(e.r)&&Xy(e.g)&&Xy(e.b)&&Xy(e.a);function t$e(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&Hr[e[1]]*17,g:255&Hr[e[2]]*17,b:255&Hr[e[3]]*17,a:t===5?Hr[e[4]]*17:255}:(t===7||t===9)&&(n={r:Hr[e[1]]<<4|Hr[e[2]],g:Hr[e[3]]<<4|Hr[e[4]],b:Hr[e[5]]<<4|Hr[e[6]],a:t===9?Hr[e[7]]<<4|Hr[e[8]]:255})),n}const a$e=(e,t)=>e<255?t(e):"";function n$e(e){var t=e$e(e)?ZIe:JIe;return e?"#"+t(e.r)+t(e.g)+t(e.b)+a$e(e.a,t):void 0}const s$e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hQ(e,t,n){const s=t*Math.min(n,1-n),r=(i,l=(i+e/30)%12)=>n-s*Math.max(Math.min(l-3,9-l,1),-1);return[r(0),r(8),r(4)]}function r$e(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function i$e(e,t,n){const s=hQ(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function l$e(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function cP(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),l=Math.min(n,s,r),o=(i+l)/2;let d,c,m;return i!==l&&(m=i-l,c=o>.5?m/(2-i-l):m/(i+l),d=l$e(n,s,r,m,i),d=d*60+.5),[d|0,c||0,o]}function dP(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(kc)}function uP(e,t,n){return dP(hQ,e,t,n)}function o$e(e,t,n){return dP(i$e,e,t,n)}function c$e(e,t,n){return dP(r$e,e,t,n)}function gQ(e){return(e%360+360)%360}function d$e(e){const t=s$e.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?$g(+t[5]):kc(+t[5]));const r=gQ(+t[2]),i=+t[3]/100,l=+t[4]/100;return t[1]==="hwb"?s=o$e(r,i,l):t[1]==="hsv"?s=c$e(r,i,l):s=uP(r,i,l),{r:s[0],g:s[1],b:s[2],a:n}}function u$e(e,t){var n=cP(e);n[0]=gQ(n[0]+t),n=uP(n),e.r=n[0],e.g=n[1],e.b=n[2]}function m$e(e){if(!e)return;const t=cP(e),n=t[0],s=vU(t[1]),r=vU(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${Xl(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const wU={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NU={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function f$e(){const e={},t=Object.keys(NU),n=Object.keys(wU);let s,r,i,l,o;for(s=0;s<t.length;s++){for(l=o=t[s],r=0;r<n.length;r++)i=n[r],o=o.replace(i,wU[i]);i=parseInt(NU[l],16),e[o]=[i>>16&255,i>>8&255,i&255]}return e}let Zy;function h$e(e){Zy||(Zy=f$e(),Zy.transparent=[0,0,0,0]);const t=Zy[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const g$e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function p$e(e){const t=g$e.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const l=+t[7];n=t[8]?$g(l):Sc(l*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?$g(s):Sc(s,0,255)),r=255&(t[4]?$g(r):Sc(r,0,255)),i=255&(t[6]?$g(i):Sc(i,0,255)),{r:s,g:r,b:i,a:n}}}function x$e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Xl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Y_=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Om=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function y$e(e,t,n){const s=Om(Xl(e.r)),r=Om(Xl(e.g)),i=Om(Xl(e.b));return{r:kc(Y_(s+n*(Om(Xl(t.r))-s))),g:kc(Y_(r+n*(Om(Xl(t.g))-r))),b:kc(Y_(i+n*(Om(Xl(t.b))-i))),a:e.a+n*(t.a-e.a)}}function Jy(e,t,n){if(e){let s=cP(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=uP(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function pQ(e,t){return e&&Object.assign(t||{},e)}function jU(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=kc(e[3]))):(t=pQ(e,{r:0,g:0,b:0,a:1}),t.a=kc(t.a)),t}function b$e(e){return e.charAt(0)==="r"?p$e(e):d$e(e)}class Ap{constructor(t){if(t instanceof Ap)return t;const n=typeof t;let s;n==="object"?s=jU(t):n==="string"&&(s=t$e(t)||h$e(t)||b$e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=pQ(this._rgb);return t&&(t.a=Xl(t.a)),t}set rgb(t){this._rgb=jU(t)}rgbString(){return this._valid?x$e(this._rgb):void 0}hexString(){return this._valid?n$e(this._rgb):void 0}hslString(){return this._valid?m$e(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const l=n===i?.5:n,o=2*l-1,d=s.a-r.a,c=((o*d===-1?o:(o+d)/(1+o*d))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=l*s.a+(1-l)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=y$e(this._rgb,t._rgb,n)),this}clone(){return new Ap(this.rgb)}alpha(t){return this._rgb.a=kc(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=Vx(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Jy(this._rgb,2,t),this}darken(t){return Jy(this._rgb,2,-t),this}saturate(t){return Jy(this._rgb,1,t),this}desaturate(t){return Jy(this._rgb,1,-t),this}rotate(t){return u$e(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Vl(){}const v$e=(()=>{let e=0;return()=>e++})();function ya(e){return e==null}function Rn(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function la(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function si(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Wi(e,t){return si(e)?e:t}function Kt(e,t){return typeof e>"u"?t:e}const w$e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,xQ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ua(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function Ca(e,t,n,s){let r,i,l;if(Rn(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(la(e))for(l=Object.keys(e),i=l.length,r=0;r<i;r++)t.call(n,e[l[r]],l[r])}function Yv(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Kv(e){if(Rn(e))return e.map(Kv);if(la(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Kv(e[n[r]]);return t}return e}function yQ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function N$e(e,t,n,s){if(!yQ(e))return;const r=t[e],i=n[e];la(r)&&la(i)?Tp(r,i,s):t[e]=Kv(i)}function Tp(e,t,n){const s=Rn(t)?t:[t],r=s.length;if(!la(e))return e;n=n||{};const i=n.merger||N$e;let l;for(let o=0;o<r;++o){if(l=s[o],!la(l))continue;const d=Object.keys(l);for(let c=0,m=d.length;c<m;++c)i(d[c],e,l,n)}return e}function qg(e,t){return Tp(e,t,{merger:j$e})}function j$e(e,t,n){if(!yQ(e))return;const s=t[e],r=n[e];la(s)&&la(r)?qg(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Kv(r))}const CU={"":e=>e,x:e=>e.x,y:e=>e.y};function C$e(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function S$e(e){const t=C$e(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function bu(e,t){return(CU[t]||(CU[t]=S$e(t)))(e)}function mP(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ep=e=>typeof e<"u",$c=e=>typeof e=="function",SU=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function _$e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const _a=Math.PI,un=2*_a,A$e=un+_a,Qv=Number.POSITIVE_INFINITY,T$e=_a/180,zn=_a/2,xd=_a/4,_U=_a*2/3,bQ=Math.log10,cl=Math.sign;function Yg(e,t,n){return Math.abs(e-t)<n}function AU(e){const t=Math.round(e);e=Yg(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(bQ(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function E$e(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function k$e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function kp(e){return!k$e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function L$e(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function P$e(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function no(e){return e*(_a/180)}function D$e(e){return e*(180/_a)}function TU(e){if(!si(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function vQ(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*_a&&(i+=un),{angle:i,distance:r}}function kE(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function O$e(e,t){return(e-t+A$e)%un-_a}function ji(e){return(e%un+un)%un}function Lp(e,t,n,s){const r=ji(e),i=ji(t),l=ji(n),o=ji(i-r),d=ji(l-r),c=ji(r-i),m=ji(r-l);return r===i||r===l||s&&i===l||o>d&&c<m}function bs(e,t,n){return Math.max(t,Math.min(n,e))}function M$e(e){return bs(e,-32768,32767)}function _c(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function fP(e,t,n){n=n||(l=>e[l]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Bd=(e,t,n,s)=>fP(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),I$e=(e,t,n)=>fP(e,n,s=>e[s][t]>=n);function $$e(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const wQ=["push","pop","shift","splice","unshift"];function R$e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wQ.forEach(n=>{const s="_onData"+mP(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const l=r.apply(this,i);return e._chartjs.listeners.forEach(o=>{typeof o[s]=="function"&&o[s](...i)}),l}})})}function EU(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(wQ.forEach(i=>{delete e[i]}),delete e._chartjs)}function NQ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const jQ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function CQ(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,jQ.call(window,()=>{s=!1,e.apply(t,n)}))}}function z$e(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const hP=e=>e==="start"?"left":e==="end"?"right":"center",hs=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,U$e=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function F$e(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:l,vScale:o,_parsed:d}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=l.axis,{min:h,max:p,minDefined:b,maxDefined:w}=l.getUserBounds();if(b){if(r=Math.min(Bd(d,m,h).lo,n?s:Bd(t,m,l.getPixelForValue(h)).lo),c){const x=d.slice(0,r+1).reverse().findIndex(v=>!ya(v[o.axis]));r-=Math.max(0,x)}r=bs(r,0,s-1)}if(w){let x=Math.max(Bd(d,l.axis,p,!0).hi+1,n?0:Bd(t,m,l.getPixelForValue(p),!0).hi+1);if(c){const v=d.slice(x-1).findIndex(j=>!ya(j[o.axis]));x+=Math.max(0,v)}i=bs(x,r,s)-r}else i=s-r}return{start:r,count:i}}function B$e(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const eb=e=>e===0||e===1,kU=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*un/n)),LU=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*un/n)+1,Kg={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*zn)+1,easeOutSine:e=>Math.sin(e*zn),easeInOutSine:e=>-.5*(Math.cos(_a*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>eb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>eb(e)?e:kU(e,.075,.3),easeOutElastic:e=>eb(e)?e:LU(e,.075,.3),easeInOutElastic(e){return eb(e)?e:e<.5?.5*kU(e*2,.1125,.45):.5+.5*LU(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Kg.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Kg.easeInBounce(e*2)*.5:Kg.easeOutBounce(e*2-1)*.5+.5};function gP(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function PU(e){return gP(e)?e:new Ap(e)}function K_(e){return gP(e)?e:new Ap(e).saturate(.5).darken(.1).hexString()}const H$e=["x","y","borderWidth","radius","tension"],G$e=["color","borderColor","backgroundColor"];function V$e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:G$e},numbers:{type:"number",properties:H$e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function W$e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const DU=new Map;function q$e(e,t){t=t||{};const n=e+JSON.stringify(t);let s=DU.get(n);return s||(s=new Intl.NumberFormat(e,t),DU.set(n,s)),s}function pP(e,t,n){return q$e(t,n).format(e)}const Y$e={values(e){return Rn(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=K$e(e,n)}const l=bQ(Math.abs(i)),o=isNaN(l)?1:Math.max(Math.min(-1*Math.floor(l),20),0),d={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(d,this.options.ticks.format),pP(e,s,d)}};function K$e(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var SQ={formatters:Y$e};function Q$e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:SQ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const vu=Object.create(null),LE=Object.create(null);function Qg(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function Q_(e,t,n){return typeof t=="string"?Tp(Qg(e,t),n):Tp(Qg(e,""),t)}class X$e{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>K_(r.backgroundColor),this.hoverBorderColor=(s,r)=>K_(r.borderColor),this.hoverColor=(s,r)=>K_(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return Q_(this,t,n)}get(t){return Qg(this,t)}describe(t,n){return Q_(LE,t,n)}override(t,n){return Q_(vu,t,n)}route(t,n,s,r){const i=Qg(this,t),l=Qg(this,s),o="_"+n;Object.defineProperties(i,{[o]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[o],c=l[r];return la(d)?Object.assign({},c,d):Kt(d,c)},set(d){this[o]=d}}})}apply(t){t.forEach(n=>n(this))}}var pn=new X$e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[V$e,W$e,Q$e]);function Z$e(e){return!e||ya(e.size)||ya(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function OU(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function yd(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function MU(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function PE(e,t,n,s){_Q(e,t,n,s,null)}function _Q(e,t,n,s,r){let i,l,o,d,c,m,h,p;const b=t.pointStyle,w=t.rotation,x=t.radius;let v=(w||0)*T$e;if(b&&typeof b=="object"&&(i=b.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(v),e.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),b){default:r?e.ellipse(n,s,r/2,x,0,0,un):e.arc(n,s,x,0,un),e.closePath();break;case"triangle":m=r?r/2:x,e.moveTo(n+Math.sin(v)*m,s-Math.cos(v)*x),v+=_U,e.lineTo(n+Math.sin(v)*m,s-Math.cos(v)*x),v+=_U,e.lineTo(n+Math.sin(v)*m,s-Math.cos(v)*x),e.closePath();break;case"rectRounded":c=x*.516,d=x-c,l=Math.cos(v+xd)*d,h=Math.cos(v+xd)*(r?r/2-c:d),o=Math.sin(v+xd)*d,p=Math.sin(v+xd)*(r?r/2-c:d),e.arc(n-h,s-o,c,v-_a,v-zn),e.arc(n+p,s-l,c,v-zn,v),e.arc(n+h,s+o,c,v,v+zn),e.arc(n-p,s+l,c,v+zn,v+_a),e.closePath();break;case"rect":if(!w){d=Math.SQRT1_2*x,m=r?r/2:d,e.rect(n-m,s-d,2*m,2*d);break}v+=xd;case"rectRot":h=Math.cos(v)*(r?r/2:x),l=Math.cos(v)*x,o=Math.sin(v)*x,p=Math.sin(v)*(r?r/2:x),e.moveTo(n-h,s-o),e.lineTo(n+p,s-l),e.lineTo(n+h,s+o),e.lineTo(n-p,s+l),e.closePath();break;case"crossRot":v+=xd;case"cross":h=Math.cos(v)*(r?r/2:x),l=Math.cos(v)*x,o=Math.sin(v)*x,p=Math.sin(v)*(r?r/2:x),e.moveTo(n-h,s-o),e.lineTo(n+h,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l);break;case"star":h=Math.cos(v)*(r?r/2:x),l=Math.cos(v)*x,o=Math.sin(v)*x,p=Math.sin(v)*(r?r/2:x),e.moveTo(n-h,s-o),e.lineTo(n+h,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l),v+=xd,h=Math.cos(v)*(r?r/2:x),l=Math.cos(v)*x,o=Math.sin(v)*x,p=Math.sin(v)*(r?r/2:x),e.moveTo(n-h,s-o),e.lineTo(n+h,s+o),e.moveTo(n+p,s-l),e.lineTo(n-p,s+l);break;case"line":l=r?r/2:Math.cos(v)*x,o=Math.sin(v)*x,e.moveTo(n-l,s-o),e.lineTo(n+l,s+o);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(v)*(r?r/2:x),s+Math.sin(v)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Pp(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function xP(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function yP(e){e.restore()}function J$e(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function e6e(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function t6e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ya(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function a6e(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),l=t-i.actualBoundingBoxLeft,o=t+i.actualBoundingBoxRight,d=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,m=r.strikethrough?(d+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(l,m),e.lineTo(o,m),e.stroke()}}function n6e(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Dp(e,t,n,s,r,i={}){const l=Rn(t)?t:[t],o=i.strokeWidth>0&&i.strokeColor!=="";let d,c;for(e.save(),e.font=r.string,t6e(e,i),d=0;d<l.length;++d)c=l[d],i.backdrop&&n6e(e,i.backdrop),o&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),ya(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(c,n,s,i.maxWidth)),e.fillText(c,n,s,i.maxWidth),a6e(e,n,s,c,i),s+=Number(r.lineHeight);e.restore()}function Xv(e,t){const{x:n,y:s,w:r,h:i,radius:l}=t;e.arc(n+l.topLeft,s+l.topLeft,l.topLeft,1.5*_a,_a,!0),e.lineTo(n,s+i-l.bottomLeft),e.arc(n+l.bottomLeft,s+i-l.bottomLeft,l.bottomLeft,_a,zn,!0),e.lineTo(n+r-l.bottomRight,s+i),e.arc(n+r-l.bottomRight,s+i-l.bottomRight,l.bottomRight,zn,0,!0),e.lineTo(n+r,s+l.topRight),e.arc(n+r-l.topRight,s+l.topRight,l.topRight,0,-zn,!0),e.lineTo(n+l.topLeft,s)}const s6e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,r6e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function i6e(e,t){const n=(""+e).match(s6e);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const l6e=e=>+e||0;function bP(e,t){const n={},s=la(t),r=s?Object.keys(t):t,i=la(e)?s?l=>Kt(e[l],e[t[l]]):l=>e[l]:()=>e;for(const l of r)n[l]=l6e(i(l));return n}function AQ(e){return bP(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Jm(e){return bP(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ri(e){const t=AQ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function vs(e,t){e=e||{},t=t||pn.font;let n=Kt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Kt(e.style,t.style);s&&!(""+s).match(r6e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Kt(e.family,t.family),lineHeight:i6e(Kt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Kt(e.weight,t.weight),string:""};return r.string=Z$e(r),r}function tb(e,t,n,s){let r,i,l;for(r=0,i=e.length;r<i;++r)if(l=e[r],l!==void 0&&l!==void 0)return l}function o6e(e,t,n){const{min:s,max:r}=e,i=xQ(t,(r-s)/2),l=(o,d)=>n&&o===0?0:o+d;return{min:l(s,-Math.abs(i)),max:l(r,i)}}function Ou(e,t){return Object.assign(Object.create(e),t)}function vP(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=LQ("_fallback",e));const l={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:o=>vP([o,...e],t,i,s)};return new Proxy(l,{deleteProperty(o,d){return delete o[d],delete o._keys,delete e[0][d],!0},get(o,d){return EQ(o,d,()=>p6e(d,t,e,o))},getOwnPropertyDescriptor(o,d){return Reflect.getOwnPropertyDescriptor(o._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(o,d){return $U(o).includes(d)},ownKeys(o){return $U(o)},set(o,d,c){const m=o._storage||(o._storage=r());return o[d]=m[d]=c,delete o._keys,!0}})}function vf(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:TQ(e,s),setContext:i=>vf(e,i,n,s),override:i=>vf(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,l){return delete i[l],delete e[l],!0},get(i,l,o){return EQ(i,l,()=>d6e(i,l,o))},getOwnPropertyDescriptor(i,l){return i._descriptors.allKeys?Reflect.has(e,l)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,l)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,l){return Reflect.has(e,l)},ownKeys(){return Reflect.ownKeys(e)},set(i,l,o){return e[l]=o,delete i[l],!0}})}function TQ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:$c(n)?n:()=>n,isIndexable:$c(s)?s:()=>s}}const c6e=(e,t)=>e?e+mP(t):t,wP=(e,t)=>la(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function EQ(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function d6e(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:l}=e;let o=s[t];return $c(o)&&l.isScriptable(t)&&(o=u6e(t,o,e,n)),Rn(o)&&o.length&&(o=m6e(t,o,e,l.isIndexable)),wP(t,o)&&(o=vf(o,r,i&&i[t],l)),o}function u6e(e,t,n,s){const{_proxy:r,_context:i,_subProxy:l,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let d=t(i,l||s);return o.delete(e),wP(e,d)&&(d=NP(r._scopes,r,e,d)),d}function m6e(e,t,n,s){const{_proxy:r,_context:i,_subProxy:l,_descriptors:o}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(la(t[0])){const d=t,c=r._scopes.filter(m=>m!==d);t=[];for(const m of d){const h=NP(c,r,e,m);t.push(vf(h,i,l&&l[e],o))}}return t}function kQ(e,t,n){return $c(e)?e(t,n):e}const f6e=(e,t)=>e===!0?t:typeof e=="string"?bu(t,e):void 0;function h6e(e,t,n,s,r){for(const i of t){const l=f6e(n,i);if(l){e.add(l);const o=kQ(l._fallback,n,r);if(typeof o<"u"&&o!==n&&o!==s)return o}else if(l===!1&&typeof s<"u"&&n!==s)return null}return!1}function NP(e,t,n,s){const r=t._rootScopes,i=kQ(t._fallback,n,s),l=[...e,...r],o=new Set;o.add(s);let d=IU(o,l,n,i||n,s);return d===null||typeof i<"u"&&i!==n&&(d=IU(o,l,i,d,s),d===null)?!1:vP(Array.from(o),[""],r,i,()=>g6e(t,n,s))}function IU(e,t,n,s,r){for(;n;)n=h6e(e,t,n,s,r);return n}function g6e(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return Rn(r)&&la(n)?n:r||{}}function p6e(e,t,n,s){let r;for(const i of t)if(r=LQ(c6e(i,e),n),typeof r<"u")return wP(e,r)?NP(n,s,e,r):r}function LQ(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function $U(e){let t=e._keys;return t||(t=e._keys=x6e(e._scopes)),t}function x6e(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const y6e=Number.EPSILON||1e-14,wf=(e,t)=>t<e.length&&!e[t].skip&&e[t],PQ=e=>e==="x"?"y":"x";function b6e(e,t,n,s){const r=e.skip?t:e,i=t,l=n.skip?t:n,o=kE(i,r),d=kE(l,i);let c=o/(o+d),m=d/(o+d);c=isNaN(c)?0:c,m=isNaN(m)?0:m;const h=s*c,p=s*m;return{previous:{x:i.x-h*(l.x-r.x),y:i.y-h*(l.y-r.y)},next:{x:i.x+p*(l.x-r.x),y:i.y+p*(l.y-r.y)}}}function v6e(e,t,n){const s=e.length;let r,i,l,o,d,c=wf(e,0);for(let m=0;m<s-1;++m)if(d=c,c=wf(e,m+1),!(!d||!c)){if(Yg(t[m],0,y6e)){n[m]=n[m+1]=0;continue}r=n[m]/t[m],i=n[m+1]/t[m],o=Math.pow(r,2)+Math.pow(i,2),!(o<=9)&&(l=3/Math.sqrt(o),n[m]=r*l*t[m],n[m+1]=i*l*t[m])}}function w6e(e,t,n="x"){const s=PQ(n),r=e.length;let i,l,o,d=wf(e,0);for(let c=0;c<r;++c){if(l=o,o=d,d=wf(e,c+1),!o)continue;const m=o[n],h=o[s];l&&(i=(m-l[n])/3,o[`cp1${n}`]=m-i,o[`cp1${s}`]=h-i*t[c]),d&&(i=(d[n]-m)/3,o[`cp2${n}`]=m+i,o[`cp2${s}`]=h+i*t[c])}}function N6e(e,t="x"){const n=PQ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let l,o,d,c=wf(e,0);for(l=0;l<s;++l)if(o=d,d=c,c=wf(e,l+1),!!d){if(c){const m=c[t]-d[t];r[l]=m!==0?(c[n]-d[n])/m:0}i[l]=o?c?cl(r[l-1])!==cl(r[l])?0:(r[l-1]+r[l])/2:r[l-1]:r[l]}v6e(e,r,i),w6e(e,i,t)}function ab(e,t,n){return Math.max(Math.min(e,n),t)}function j6e(e,t){let n,s,r,i,l,o=Pp(e[0],t);for(n=0,s=e.length;n<s;++n)l=i,i=o,o=n<s-1&&Pp(e[n+1],t),i&&(r=e[n],l&&(r.cp1x=ab(r.cp1x,t.left,t.right),r.cp1y=ab(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=ab(r.cp2x,t.left,t.right),r.cp2y=ab(r.cp2y,t.top,t.bottom)))}function C6e(e,t,n,s,r){let i,l,o,d;if(t.spanGaps&&(e=e.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")N6e(e,r);else{let c=s?e[e.length-1]:e[0];for(i=0,l=e.length;i<l;++i)o=e[i],d=b6e(c,o,e[Math.min(i+1,l-(s?0:1))%l],t.tension),o.cp1x=d.previous.x,o.cp1y=d.previous.y,o.cp2x=d.next.x,o.cp2y=d.next.y,c=o}t.capBezierPoints&&j6e(e,n)}function jP(){return typeof window<"u"&&typeof document<"u"}function CP(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Zv(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const wj=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function S6e(e,t){return wj(e).getPropertyValue(t)}const _6e=["top","right","bottom","left"];function Xd(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=_6e[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const A6e=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function T6e(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let l=!1,o,d;if(A6e(r,i,e.target))o=r,d=i;else{const c=t.getBoundingClientRect();o=s.clientX-c.left,d=s.clientY-c.top,l=!0}return{x:o,y:d,box:l}}function Ed(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=wj(n),i=r.boxSizing==="border-box",l=Xd(r,"padding"),o=Xd(r,"border","width"),{x:d,y:c,box:m}=T6e(e,n),h=l.left+(m&&o.left),p=l.top+(m&&o.top);let{width:b,height:w}=t;return i&&(b-=l.width+o.width,w-=l.height+o.height),{x:Math.round((d-h)/b*n.width/s),y:Math.round((c-p)/w*n.height/s)}}function E6e(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&CP(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const l=i.getBoundingClientRect(),o=wj(i),d=Xd(o,"border","width"),c=Xd(o,"padding");t=l.width-c.width-d.width,n=l.height-c.height-d.height,s=Zv(o.maxWidth,i,"clientWidth"),r=Zv(o.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Qv,maxHeight:r||Qv}}const Ac=e=>Math.round(e*10)/10;function k6e(e,t,n,s){const r=wj(e),i=Xd(r,"margin"),l=Zv(r.maxWidth,e,"clientWidth")||Qv,o=Zv(r.maxHeight,e,"clientHeight")||Qv,d=E6e(e,t,n);let{width:c,height:m}=d;if(r.boxSizing==="content-box"){const p=Xd(r,"border","width"),b=Xd(r,"padding");c-=b.width+p.width,m-=b.height+p.height}return c=Math.max(0,c-i.width),m=Math.max(0,s?c/s:m-i.height),c=Ac(Math.min(c,l,d.maxWidth)),m=Ac(Math.min(m,o,d.maxHeight)),c&&!m&&(m=Ac(c/2)),(t!==void 0||n!==void 0)&&s&&d.height&&m>d.height&&(m=d.height,c=Ac(Math.floor(m*s))),{width:c,height:m}}function RU(e,t,n){const s=t||1,r=Ac(e.height*s),i=Ac(e.width*s);e.height=Ac(e.height),e.width=Ac(e.width);const l=e.canvas;return l.style&&(n||!l.style.height&&!l.style.width)&&(l.style.height=`${e.height}px`,l.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||l.height!==r||l.width!==i?(e.currentDevicePixelRatio=s,l.height=r,l.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const L6e=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};jP()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function zU(e,t){const n=S6e(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function kd(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function P6e(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function D6e(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},l=kd(e,r,n),o=kd(r,i,n),d=kd(i,t,n),c=kd(l,o,n),m=kd(o,d,n);return kd(c,m,n)}const O6e=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},M6e=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function ef(e,t,n){return e?O6e(t,n):M6e()}function DQ(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function OQ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function MQ(e){return e==="angle"?{between:Lp,compare:O$e,normalize:ji}:{between:_c,compare:(t,n)=>t-n,normalize:t=>t}}function UU({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function I6e(e,t,n){const{property:s,start:r,end:i}=n,{between:l,normalize:o}=MQ(s),d=t.length;let{start:c,end:m,loop:h}=e,p,b;if(h){for(c+=d,m+=d,p=0,b=d;p<b&&l(o(t[c%d][s]),r,i);++p)c--,m--;c%=d,m%=d}return m<c&&(m+=d),{start:c,end:m,loop:h,style:e.style}}function $6e(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,l=t.length,{compare:o,between:d,normalize:c}=MQ(s),{start:m,end:h,loop:p,style:b}=I6e(e,t,n),w=[];let x=!1,v=null,j,C,S;const _=()=>d(r,S,j)&&o(r,S)!==0,A=()=>o(i,j)===0||d(i,S,j),T=()=>x||_(),E=()=>!x||A();for(let D=m,z=m;D<=h;++D)C=t[D%l],!C.skip&&(j=c(C[s]),j!==S&&(x=d(j,r,i),v===null&&T()&&(v=o(j,r)===0?D:z),v!==null&&E()&&(w.push(UU({start:v,end:D,loop:p,count:l,style:b})),v=null),z=D,S=j));return v!==null&&w.push(UU({start:v,end:h,loop:p,count:l,style:b})),w}function R6e(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=$6e(s[r],e.points,t);i.length&&n.push(...i)}return n}function z6e(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function U6e(e,t,n,s){const r=e.length,i=[];let l=t,o=e[t],d;for(d=t+1;d<=n;++d){const c=e[d%r];c.skip||c.stop?o.skip||(s=!1,i.push({start:t%r,end:(d-1)%r,loop:s}),t=l=c.stop?d:null):(l=d,o.skip&&(t=d)),o=c}return l!==null&&i.push({start:t%r,end:l%r,loop:s}),i}function F6e(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:l,end:o}=z6e(n,r,i,s);if(s===!0)return FU(e,[{start:l,end:o,loop:i}],n,t);const d=o<l?o+r:o,c=!!e._fullLoop&&l===0&&o===r-1;return FU(e,U6e(n,l,d,c),n,t)}function FU(e,t,n,s){return!s||!s.setContext||!n?t:B6e(e,t,n,s)}function B6e(e,t,n,s){const r=e._chart.getContext(),i=BU(e.options),{_datasetIndex:l,options:{spanGaps:o}}=e,d=n.length,c=[];let m=i,h=t[0].start,p=h;function b(w,x,v,j){const C=o?-1:1;if(w!==x){for(w+=d;n[w%d].skip;)w-=C;for(;n[x%d].skip;)x+=C;w%d!==x%d&&(c.push({start:w%d,end:x%d,loop:v,style:j}),m=j,h=x%d)}}for(const w of t){h=o?h:w.start;let x=n[h%d],v;for(p=h+1;p<=w.end;p++){const j=n[p%d];v=BU(s.setContext(Ou(r,{type:"segment",p0:x,p1:j,p0DataIndex:(p-1)%d,p1DataIndex:p%d,datasetIndex:l}))),H6e(v,m)&&b(h,p-1,w.loop,m),x=j,m=v}h<p-1&&b(h,p-1,w.loop,m)}return c}function BU(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function H6e(e,t){if(!t)return!1;const n=[],s=function(r,i){return gP(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function nb(e,t,n){return e.options.clip?e[n]:t[n]}function G6e(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:nb(n,t,"left"),right:nb(n,t,"right"),top:nb(s,t,"top"),bottom:nb(s,t,"bottom")}:t}function V6e(e,t){const n=t._clip;if(n.disabled)return!1;const s=G6e(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class W6e{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],l=n.duration;i.forEach(o=>o({chart:t,initial:n.initial,numSteps:l,currentStep:Math.min(s-n.start,l)}))}_refresh(){this._request||(this._running=!0,this._request=jQ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let l=i.length-1,o=!1,d;for(;l>=0;--l)d=i[l],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(t),o=!0):(i[l]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ql=new W6e;const HU="transparent",q6e={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=PU(e||HU),r=s.valid&&PU(t||HU);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class Y6e{constructor(t,n,s,r){const i=n[s];r=tb([t.to,r,i,t.from]);const l=tb([t.from,i,r]);this._active=!0,this._fn=t.fn||q6e[t.type||typeof l],this._easing=Kg[t.easing]||Kg.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=l,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,l=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(l,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=tb([t.to,n,r,t.from]),this._from=tb([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,l=this._loop,o=this._to;let d;if(this._active=i!==o&&(l||n<s),!this._active){this._target[r]=o,this._notify(!0);return}if(n<0){this._target[r]=i;return}d=n/s%2,d=l&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[r]=this._fn(i,o,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class IQ{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!la(t))return;const n=Object.keys(pn.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!la(i))return;const l={};for(const o of n)l[o]=i[o];(Rn(i.properties)&&i.properties||[r]).forEach(o=>{(o===r||!s.has(o))&&s.set(o,l)})})}_animateOptions(t,n){const s=n.options,r=Q6e(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&K6e(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),l=Object.keys(n),o=Date.now();let d;for(d=l.length-1;d>=0;--d){const c=l[d];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,n));continue}const m=n[c];let h=i[c];const p=s.get(c);if(h)if(p&&h.active()){h.update(p,m,o);continue}else h.cancel();if(!p||!p.duration){t[c]=m;continue}i[c]=h=new Y6e(p,t,c,m),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return ql.add(this._chart,s),!0}}function K6e(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function Q6e(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function GU(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function X6e(e,t,n){if(n===!1)return!1;const s=GU(e,n),r=GU(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function Z6e(e){let t,n,s,r;return la(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function $Q(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function VU(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let l,o,d,c;if(t===null)return;let m=!1;for(l=0,o=r.length;l<o;++l){if(d=+r[l],d===n){if(m=!0,s.all)continue;break}c=e.values[d],si(c)&&(i||t===0||cl(t)===cl(c))&&(t+=c)}return!m&&!s.all?0:t}function J6e(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",l=Object.keys(e),o=new Array(l.length);let d,c,m;for(d=0,c=l.length;d<c;++d)m=l[d],o[d]={[r]:m,[i]:e[m]};return o}function X_(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function eRe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function tRe(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function aRe(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function WU(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function qU(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:l,index:o}=s,d=i.axis,c=l.axis,m=eRe(i,l,s),h=t.length;let p;for(let b=0;b<h;++b){const w=t[b],{[d]:x,[c]:v}=w,j=w._stacks||(w._stacks={});p=j[c]=aRe(r,m,x),p[o]=v,p._top=WU(p,l,!0,s.type),p._bottom=WU(p,l,!1,s.type);const C=p._visualValues||(p._visualValues={});C[o]=v}}function Z_(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function nRe(e,t){return Ou(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function sRe(e,t,n){return Ou(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function mg(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const J_=e=>e==="reset"||e==="none",YU=(e,t)=>t?e:Object.assign({},e),rRe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:$Q(n,!0),values:null};class Nj{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=X_(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&mg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,p,b,w)=>h==="x"?p:h==="r"?w:b,i=n.xAxisID=Kt(s.xAxisID,Z_(t,"x")),l=n.yAxisID=Kt(s.yAxisID,Z_(t,"y")),o=n.rAxisID=Kt(s.rAxisID,Z_(t,"r")),d=n.indexAxis,c=n.iAxisID=r(d,i,l,o),m=n.vAxisID=r(d,l,i,o);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(l),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&EU(this._data,this),t._stacked&&mg(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(la(n)){const r=this._cachedMeta;this._data=J6e(n,r)}else if(s!==n){if(s){EU(s,this);const r=this._cachedMeta;mg(r),r._parsed=[]}n&&Object.isExtensible(n)&&R$e(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=X_(n.vScale,n),n.stack!==s.stack&&(r=!0,mg(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(qU(this,n._parsed),n._stacked=X_(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:l}=s,o=i.axis;let d=t===0&&n===r.length?!0:s._sorted,c=t>0&&s._parsed[t-1],m,h,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{Rn(r[t])?p=this.parseArrayData(s,r,t,n):la(r[t])?p=this.parseObjectData(s,r,t,n):p=this.parsePrimitiveData(s,r,t,n);const b=()=>h[o]===null||c&&h[o]<c[o];for(m=0;m<n;++m)s._parsed[m+t]=h=p[m],d&&(b()&&(d=!1),c=h);s._sorted=d}l&&qU(this,p)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:l}=t,o=i.axis,d=l.axis,c=i.getLabels(),m=i===l,h=new Array(r);let p,b,w;for(p=0,b=r;p<b;++p)w=p+s,h[p]={[o]:m||i.parse(c[w],w),[d]:l.parse(n[w],w)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:l}=t,o=new Array(r);let d,c,m,h;for(d=0,c=r;d<c;++d)m=d+s,h=n[m],o[d]={x:i.parse(h[0],m),y:l.parse(h[1],m)};return o}parseObjectData(t,n,s,r){const{xScale:i,yScale:l}=t,{xAxisKey:o="x",yAxisKey:d="y"}=this._parsing,c=new Array(r);let m,h,p,b;for(m=0,h=r;m<h;++m)p=m+s,b=n[p],c[m]={x:i.parse(bu(b,o),p),y:l.parse(bu(b,d),p)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,l=n[t.axis],o={keys:$Q(r,!0),values:n._stacks[t.axis]._visualValues};return VU(o,l,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let l=i===null?NaN:i;const o=r&&s._stacks[n.axis];r&&o&&(r.values=o,l=VU(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,l),t.max=Math.max(t.max,l)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,l=r.length,o=this._getOtherScale(t),d=rRe(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:h}=tRe(o);let p,b;function w(){b=r[p];const x=b[o.axis];return!si(b[t.axis])||m>x||h<x}for(p=0;p<l&&!(!w()&&(this.updateRangeFromParsed(c,t,b,d),i));++p);if(i){for(p=l-1;p>=0;--p)if(!w()){this.updateRangeFromParsed(c,t,b,d);break}}return c}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,l;for(r=0,i=n.length;r<i;++r)l=n[r][t.axis],si(l)&&s.push(l);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=Z6e(Kt(this.options.clip,X6e(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,l=[],o=this._drawStart||0,d=this._drawCount||r.length-o,c=this.options.drawActiveElementsOnTop;let m;for(s.dataset&&s.dataset.draw(t,i,o,d),m=o;m<o+d;++m){const h=r[m];h.hidden||(h.active&&c?l.push(h):h.draw(t,i))}for(m=0;m<l.length;++m)l[m].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const l=this._cachedMeta.data[t];i=l.$context||(l.$context=sRe(this.getContext(),t,l)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=nRe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,l=t+"-"+n,o=i[l],d=this.enableOptionSharing&&Ep(s);if(o)return YU(o,d);const c=this.chart.config,m=c.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(this.getDataset(),m),b=Object.keys(pn.elements[t]),w=()=>this.getContext(s,r,n),x=c.resolveNamedOptions(p,b,w,h);return x.$shared&&(x.$shared=d,i[l]=Object.freeze(YU(x,d))),x}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,l=`animation-${n}`,o=i[l];if(o)return o;let d;if(r.options.animation!==!1){const m=this.chart.config,h=m.datasetAnimationScopeKeys(this._type,n),p=m.getOptionScopes(this.getDataset(),h);d=m.createResolver(p,this.getContext(t,s,n))}const c=new IQ(r,d&&d.animations);return d&&d._cacheable&&(i[l]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||J_(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),l=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:l}}updateElement(t,n,s,r){J_(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!J_(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[o,d,c]of this._syncList)this[o](d,c);this._syncList=[];const r=s.length,i=n.length,l=Math.min(i,r);l&&this.parse(0,l),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,l=t+n;let o;const d=c=>{for(c.length+=n,o=c.length-1;o>=l;o--)c[o]=c[o-n]};for(d(i),o=t;o<l;++o)i[o]=new this.dataElementType;this._parsing&&d(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&mg(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function iRe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=NQ(s.sort((r,i)=>r-i))}return e._cache.$bar}function lRe(e){const t=e.iScale,n=iRe(t,e.type);let s=t._length,r,i,l,o;const d=()=>{l===32767||l===-32768||(Ep(o)&&(s=Math.min(s,Math.abs(l-o)||s)),o=l)};for(r=0,i=n.length;r<i;++r)l=t.getPixelForValue(n[r]),d();for(o=void 0,r=0,i=t.ticks.length;r<i;++r)l=t.getPixelForTick(r),d();return s}function oRe(e,t,n,s){const r=n.barThickness;let i,l;return ya(r)?(i=t.min*n.categoryPercentage,l=n.barPercentage):(i=r*s,l=1),{chunk:i/s,ratio:l,start:t.pixels[e]-i/2}}function cRe(e,t,n,s){const r=t.pixels,i=r[e];let l=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const d=n.categoryPercentage;l===null&&(l=i-(o===null?t.end-t.start:o-i)),o===null&&(o=i+i-l);const c=i-(i-Math.min(l,o))/2*d;return{chunk:Math.abs(o-l)/2*d/s,ratio:n.barPercentage,start:c}}function dRe(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),l=Math.min(r,i),o=Math.max(r,i);let d=l,c=o;Math.abs(l)>Math.abs(o)&&(d=o,c=l),t[n.axis]=c,t._custom={barStart:d,barEnd:c,start:r,end:i,min:l,max:o}}function RQ(e,t,n,s){return Rn(e)?dRe(e,t,n,s):t[n.axis]=n.parse(e,s),t}function KU(e,t,n,s){const r=e.iScale,i=e.vScale,l=r.getLabels(),o=r===i,d=[];let c,m,h,p;for(c=n,m=n+s;c<m;++c)p=t[c],h={},h[r.axis]=o||r.parse(l[c],c),d.push(RQ(p,h,i,c));return d}function eA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function uRe(e,t,n){return e!==0?cl(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function mRe(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function fRe(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:l,end:o,reverse:d,top:c,bottom:m}=mRe(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=c:(n._bottom||0)===s?r=m:(i[QU(m,l,o,d)]=!0,r=c)),i[QU(r,l,o,d)]=!0,e.borderSkipped=i}function QU(e,t,n,s){return s?(e=hRe(e,t,n),e=XU(e,n,t)):e=XU(e,t,n),e}function hRe(e,t,n){return e===t?n:e===n?t:e}function XU(e,t,n){return e==="start"?t:e==="end"?n:e}function gRe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class pRe extends Nj{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,s,r){return KU(t,n,s,r)}parseArrayData(t,n,s,r){return KU(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:l}=t,{xAxisKey:o="x",yAxisKey:d="y"}=this._parsing,c=i.axis==="x"?o:d,m=l.axis==="x"?o:d,h=[];let p,b,w,x;for(p=s,b=s+r;p<b;++p)x=n[p],w={},w[i.axis]=i.parse(bu(x,c),p),h.push(RQ(bu(x,m),w,l,p));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),l=i._custom,o=eA(l)?"["+l.start+", "+l.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:l,_cachedMeta:{vScale:o}}=this,d=o.getBasePixel(),c=o.isHorizontal(),m=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,r);for(let b=n;b<n+s;b++){const w=this.getParsed(b),x=i||ya(w[o.axis])?{base:d,head:d}:this._calculateBarValuePixels(b),v=this._calculateBarIndexPixels(b,m),j=(w._stacks||{})[o.axis],C={horizontal:c,base:x.base,enableBorderRadius:!j||eA(w._custom)||l===j._top||l===j._bottom,x:c?x.head:v.center,y:c?v.center:x.head,height:c?v.size:Math.abs(x.size),width:c?Math.abs(x.size):v.size};p&&(C.options=h||this.resolveDataElementOptions(b,t[b].active?"active":r));const S=C.options||t[b].options;fRe(C,S,j,l),gRe(C,S,m.ratio),this.updateElement(t[b],b,C,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=s.options.stacked,l=[],o=this._cachedMeta.controller.getParsed(n),d=o&&o[s.axis],c=m=>{const h=m._parsed.find(b=>b[s.axis]===d),p=h&&h[m.vScale.axis];if(ya(p)||isNaN(p))return!0};for(const m of r)if(!(n!==void 0&&c(m))&&((i===!1||l.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&l.push(m.stack),m.index===t))break;return l.length||l.push(void 0),l}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[Kt(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,l;for(i=0,l=n.data.length;i<l;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const o=t.barThickness;return{min:o||lRe(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:l}}=this,o=i||0,d=this.getParsed(t),c=d._custom,m=eA(c);let h=d[n.axis],p=0,b=s?this.applyStack(n,d,s):h,w,x;b!==h&&(p=b-h,b=h),m&&(h=c.barStart,b=c.barEnd-c.barStart,h!==0&&cl(h)!==cl(c.barEnd)&&(p=0),p+=h);const v=!ya(i)&&!m?i:p;let j=n.getPixelForValue(v);if(this.chart.getDataVisibility(t)?w=n.getPixelForValue(p+b):w=j,x=w-j,Math.abs(x)<l){x=uRe(x,n,o)*l,h===o&&(j-=x/2);const C=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),_=Math.min(C,S),A=Math.max(C,S);j=Math.max(Math.min(j,A),_),w=j+x,s&&!m&&(d._stacks[n.axis]._visualValues[r]=n.getValueForPixel(w)-n.getValueForPixel(j))}if(j===n.getPixelForValue(o)){const C=cl(x)*n.getLineWidthForValue(o)/2;j+=C,x-=C}return{size:x,base:j,head:w,center:w+x/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,l=Kt(r.maxBarThickness,1/0);let o,d;const c=this._getAxisCount();if(n.grouped){const m=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?cRe(t,n,r,m*c):oRe(t,n,r,m*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(Kt(p,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+b;o=h.start+h.chunk*w+h.chunk/2,d=Math.min(l,h.chunk*h.ratio)}else o=s.getPixelForValue(this.getParsed(t)[s.axis],t),d=Math.min(l,n.min*n.ratio);return{base:o-d/2,head:o+d/2,center:o,size:d}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function xRe(e,t,n){let s=1,r=1,i=0,l=0;if(t<un){const o=e,d=o+t,c=Math.cos(o),m=Math.sin(o),h=Math.cos(d),p=Math.sin(d),b=(S,_,A)=>Lp(S,o,d,!0)?1:Math.max(_,_*n,A,A*n),w=(S,_,A)=>Lp(S,o,d,!0)?-1:Math.min(_,_*n,A,A*n),x=b(0,c,h),v=b(zn,m,p),j=w(_a,c,h),C=w(_a+zn,m,p);s=(x-j)/2,r=(v-C)/2,i=-(x+j)/2,l=-(v+C)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:l}}class yRe extends Nj{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((d,c)=>{const h=t.getDatasetMeta(0).controller.getStyle(c);return{text:d,fillStyle:h.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:l&&(o||h.borderRadius),index:c}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=d=>+s[d];if(la(s[t])){const{key:d="value"}=this._parsing;i=c=>+bu(s[c],d)}let l,o;for(l=t,o=t+n;l<o;++l)r._parsed[l]=i(l)}}_getRotation(){return no(this.options.rotation-90)}_getCircumference(){return no(this.options.circumference)}_getRotationExtents(){let t=un,n=-un;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),l=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+l)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,l=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(s.width,s.height)-l)/2,0),d=Math.min(w$e(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:m,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:b,offsetX:w,offsetY:x}=xRe(h,m,d),v=(s.width-l)/p,j=(s.height-l)/b,C=Math.max(Math.min(v,j)/2,0),S=xQ(this.options.radius,C),_=Math.max(S*d,0),A=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=w*S,this.offsetY=x*S,r.total=this.calculateTotal(),this.outerRadius=S-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*c,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/un)}updateElements(t,n,s,r){const i=r==="reset",l=this.chart,o=l.chartArea,c=l.options.animation,m=(o.left+o.right)/2,h=(o.top+o.bottom)/2,p=i&&c.animateScale,b=p?0:this.innerRadius,w=p?0:this.outerRadius,{sharedOptions:x,includeOptions:v}=this._getSharedOptions(n,r);let j=this._getRotation(),C;for(C=0;C<n;++C)j+=this._circumference(C,i);for(C=n;C<n+s;++C){const S=this._circumference(C,i),_=t[C],A={x:m+this.offsetX,y:h+this.offsetY,startAngle:j,endAngle:j+S,circumference:S,outerRadius:w,innerRadius:b};v&&(A.options=x||this.resolveDataElementOptions(C,_.active?"active":r)),j+=S,this.updateElement(_,C,A,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?un*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=pP(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,l,o,d;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){l=s.getDatasetMeta(r),t=l.data,o=l.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)d=o.resolveDataElementOptions(r),d.borderAlign!=="inner"&&(n=Math.max(n,d.borderWidth||0,d.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Kt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class bRe extends Nj{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,l=this.chart._animationsDisabled;let{start:o,count:d}=F$e(n,r,l);this._drawStart=o,this._drawCount=d,B$e(n)&&(o=0,d=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!l,options:c},t),this.updateElements(r,o,d,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:l,vScale:o,_stacked:d,_dataset:c}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(n,r),p=l.axis,b=o.axis,{spanGaps:w,segment:x}=this.options,v=kp(w)?w:Number.POSITIVE_INFINITY,j=this.chart._animationsDisabled||i||r==="none",C=n+s,S=t.length;let _=n>0&&this.getParsed(n-1);for(let A=0;A<S;++A){const T=t[A],E=j?T:{};if(A<n||A>=C){E.skip=!0;continue}const D=this.getParsed(A),z=ya(D[b]),K=E[p]=l.getPixelForValue(D[p],A),B=E[b]=i||z?o.getBasePixel():o.getPixelForValue(d?this.applyStack(o,D,d):D[b],A);E.skip=isNaN(K)||isNaN(B)||z,E.stop=A>0&&Math.abs(D[p]-_[p])>v,x&&(E.parsed=D,E.raw=c.data[A]),h&&(E.options=m||this.resolveDataElementOptions(A,T.active?"active":r)),j||this.updateElement(T,A,E,r),_=D}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),l=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,l)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class vRe extends yRe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function bd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class SP{static override(t){Object.assign(SP.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return bd()}parse(){return bd()}format(){return bd()}add(){return bd()}diff(){return bd()}startOf(){return bd()}endOf(){return bd()}}var wRe={_date:SP};function NRe(e,t,n,s){const{controller:r,data:i,_sorted:l}=e,o=r._cachedMeta.iScale,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&l&&i.length){const c=o._reversePixels?I$e:Bd;if(s){if(r._sharedOptions){const m=i[0],h=typeof m.getRange=="function"&&m.getRange(t);if(h){const p=c(i,t,n-h),b=c(i,t,n+h);return{lo:p.lo,hi:b.hi}}}}else{const m=c(i,t,n);if(d){const{vScale:h}=r._cachedMeta,{_parsed:p}=e,b=p.slice(0,m.lo+1).reverse().findIndex(x=>!ya(x[h.axis]));m.lo-=Math.max(0,b);const w=p.slice(m.hi).findIndex(x=>!ya(x[h.axis]));m.hi+=Math.max(0,w)}return m}}return{lo:0,hi:i.length-1}}function jj(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),l=n[t];for(let o=0,d=i.length;o<d;++o){const{index:c,data:m}=i[o],{lo:h,hi:p}=NRe(i[o],t,l,r);for(let b=h;b<=p;++b){const w=m[b];w.skip||s(w,c,b)}}}function jRe(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,l=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(l,2))}}function tA(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||jj(e,n,t,function(o,d,c){!r&&!Pp(o,e.chartArea,0)||o.inRange(t.x,t.y,s)&&i.push({element:o,datasetIndex:d,index:c})},!0),i}function CRe(e,t,n,s){let r=[];function i(l,o,d){const{startAngle:c,endAngle:m}=l.getProps(["startAngle","endAngle"],s),{angle:h}=vQ(l,{x:t.x,y:t.y});Lp(h,c,m)&&r.push({element:l,datasetIndex:o,index:d})}return jj(e,n,t,i),r}function SRe(e,t,n,s,r,i){let l=[];const o=jRe(n);let d=Number.POSITIVE_INFINITY;function c(m,h,p){const b=m.inRange(t.x,t.y,r);if(s&&!b)return;const w=m.getCenterPoint(r);if(!(!!i||e.isPointInArea(w))&&!b)return;const v=o(t,w);v<d?(l=[{element:m,datasetIndex:h,index:p}],d=v):v===d&&l.push({element:m,datasetIndex:h,index:p})}return jj(e,n,t,c),l}function aA(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?CRe(e,t,n,r):SRe(e,t,n,s,r,i)}function ZU(e,t,n,s,r){const i=[],l=n==="x"?"inXRange":"inYRange";let o=!1;return jj(e,n,t,(d,c,m)=>{d[l]&&d[l](t[n],r)&&(i.push({element:d,datasetIndex:c,index:m}),o=o||d.inRange(t.x,t.y,r))}),s&&!o?[]:i}var _Re={modes:{index(e,t,n,s){const r=Ed(t,e),i=n.axis||"x",l=n.includeInvisible||!1,o=n.intersect?tA(e,r,i,s,l):aA(e,r,i,!1,s,l),d=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(c=>{const m=o[0].index,h=c.data[m];h&&!h.skip&&d.push({element:h,datasetIndex:c.index,index:m})}),d):[]},dataset(e,t,n,s){const r=Ed(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;let o=n.intersect?tA(e,r,i,s,l):aA(e,r,i,!1,s,l);if(o.length>0){const d=o[0].datasetIndex,c=e.getDatasetMeta(d).data;o=[];for(let m=0;m<c.length;++m)o.push({element:c[m],datasetIndex:d,index:m})}return o},point(e,t,n,s){const r=Ed(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;return tA(e,r,i,s,l)},nearest(e,t,n,s){const r=Ed(t,e),i=n.axis||"xy",l=n.includeInvisible||!1;return aA(e,r,i,n.intersect,s,l)},x(e,t,n,s){const r=Ed(t,e);return ZU(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=Ed(t,e);return ZU(e,r,"y",n.intersect,s)}}};const zQ=["left","top","right","bottom"];function fg(e,t){return e.filter(n=>n.pos===t)}function JU(e,t){return e.filter(n=>zQ.indexOf(n.pos)===-1&&n.box.axis===t)}function hg(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function ARe(e){const t=[];let n,s,r,i,l,o;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:l,stackWeight:o=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:l&&i+l,stackWeight:o});return t}function TRe(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!zQ.includes(r))continue;const l=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=i}return t}function ERe(e,t){const n=TRe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,l,o;for(i=0,l=e.length;i<l;++i){o=e[i];const{fullSize:d}=o.box,c=n[o.stack],m=c&&o.stackWeight/c.weight;o.horizontal?(o.width=m?m*s:d&&t.availableWidth,o.height=r):(o.width=s,o.height=m?m*r:d&&t.availableHeight)}return n}function kRe(e){const t=ARe(e),n=hg(t.filter(c=>c.box.fullSize),!0),s=hg(fg(t,"left"),!0),r=hg(fg(t,"right")),i=hg(fg(t,"top"),!0),l=hg(fg(t,"bottom")),o=JU(t,"x"),d=JU(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(d).concat(l).concat(o),chartArea:fg(t,"chartArea"),vertical:s.concat(r).concat(d),horizontal:i.concat(l).concat(o)}}function eF(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function UQ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function LRe(e,t,n,s){const{pos:r,box:i}=n,l=e.maxPadding;if(!la(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&UQ(l,i.getPadding());const o=Math.max(0,t.outerWidth-eF(l,e,"left","right")),d=Math.max(0,t.outerHeight-eF(l,e,"top","bottom")),c=o!==e.w,m=d!==e.h;return e.w=o,e.h=d,n.horizontal?{same:c,other:m}:{same:m,other:c}}function PRe(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function DRe(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(l=>{i[l]=Math.max(t[l],n[l])}),i}return s(e?["left","right"]:["top","bottom"])}function Rg(e,t,n,s){const r=[];let i,l,o,d,c,m;for(i=0,l=e.length,c=0;i<l;++i){o=e[i],d=o.box,d.update(o.width||t.w,o.height||t.h,DRe(o.horizontal,t));const{same:h,other:p}=LRe(t,n,o,s);c|=h&&r.length,m=m||p,d.fullSize||r.push(o)}return c&&Rg(r,t,n,s)||m}function sb(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function tF(e,t,n,s){const r=n.padding;let{x:i,y:l}=t;for(const o of e){const d=o.box,c=s[o.stack]||{placed:0,weight:1},m=o.stackWeight/c.weight||1;if(o.horizontal){const h=t.w*m,p=c.size||d.height;Ep(c.start)&&(l=c.start),d.fullSize?sb(d,r.left,l,n.outerWidth-r.right-r.left,p):sb(d,t.left+c.placed,l,h,p),c.start=l,c.placed+=h,l=d.bottom}else{const h=t.h*m,p=c.size||d.width;Ep(c.start)&&(i=c.start),d.fullSize?sb(d,i,r.top,p,n.outerHeight-r.bottom-r.top):sb(d,i,t.top+c.placed,p,h),c.start=i,c.placed+=h,i=d.right}}t.x=i,t.y=l}var Yr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=ri(e.options.layout.padding),i=Math.max(t-r.width,0),l=Math.max(n-r.height,0),o=kRe(e.boxes),d=o.vertical,c=o.horizontal;Ca(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const m=d.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:l,vBoxMaxWidth:i/2/m,hBoxMaxHeight:l/2}),p=Object.assign({},r);UQ(p,ri(s));const b=Object.assign({maxPadding:p,w:i,h:l,x:r.left,y:r.top},r),w=ERe(d.concat(c),h);Rg(o.fullSize,b,h,w),Rg(d,b,h,w),Rg(c,b,h,w)&&Rg(d,b,h,w),PRe(b),tF(o.leftAndTop,b,h,w),b.x+=b.w,b.y+=b.h,tF(o.rightAndBottom,b,h,w),e.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},Ca(o.chartArea,x=>{const v=x.box;Object.assign(v,e.chartArea),v.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class FQ{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class ORe extends FQ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Pb="$chartjs",MRe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aF=e=>e===null||e==="";function IRe(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[Pb]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aF(r)){const i=zU(e,"width");i!==void 0&&(e.width=i)}if(aF(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=zU(e,"height");i!==void 0&&(e.height=i)}return e}const BQ=L6e?{passive:!0}:!1;function $Re(e,t,n){e&&e.addEventListener(t,n,BQ)}function RRe(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,BQ)}function zRe(e,t){const n=MRe[e.type]||e.type,{x:s,y:r}=Ed(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Jv(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function URe(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Jv(o.addedNodes,s),l=l&&!Jv(o.removedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function FRe(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let l=!1;for(const o of i)l=l||Jv(o.removedNodes,s),l=l&&!Jv(o.addedNodes,s);l&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Op=new Map;let nF=0;function HQ(){const e=window.devicePixelRatio;e!==nF&&(nF=e,Op.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function BRe(e,t){Op.size||window.addEventListener("resize",HQ),Op.set(e,t)}function HRe(e){Op.delete(e),Op.size||window.removeEventListener("resize",HQ)}function GRe(e,t,n){const s=e.canvas,r=s&&CP(s);if(!r)return;const i=CQ((o,d)=>{const c=r.clientWidth;n(o,d),c<r.clientWidth&&n()},window),l=new ResizeObserver(o=>{const d=o[0],c=d.contentRect.width,m=d.contentRect.height;c===0&&m===0||i(c,m)});return l.observe(r),BRe(e,i),l}function nA(e,t,n){n&&n.disconnect(),t==="resize"&&HRe(e)}function VRe(e,t,n){const s=e.canvas,r=CQ(i=>{e.ctx!==null&&n(zRe(i,e))},e);return $Re(s,t,r),r}class WRe extends FQ{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(IRe(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[Pb])return!1;const s=n[Pb].initial;["height","width"].forEach(i=>{const l=s[i];ya(l)?n.removeAttribute(i):n.setAttribute(i,l)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Pb],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),l={attach:URe,detach:FRe,resize:GRe}[n]||VRe;r[n]=l(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:nA,detach:nA,resize:nA}[n]||RRe)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return k6e(t,n,s,r)}isAttached(t){const n=t&&CP(t);return!!(n&&n.isConnected)}}function qRe(e){return!jP()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?ORe:WRe}let $o=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return kp(this.x)&&kp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function YRe(e,t){const n=e.options.ticks,s=KRe(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?XRe(t):[],l=i.length,o=i[0],d=i[l-1],c=[];if(l>r)return ZRe(t,c,i,l/r),c;const m=QRe(i,t,r);if(l>0){let h,p;const b=l>1?Math.round((d-o)/(l-1)):null;for(rb(t,c,m,ya(b)?0:o-b,o),h=0,p=l-1;h<p;h++)rb(t,c,m,i[h],i[h+1]);return rb(t,c,m,d,ya(b)?t.length:d+b),c}return rb(t,c,m),c}function KRe(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function QRe(e,t,n){const s=JRe(e),r=t.length/n;if(!s)return Math.max(r,1);const i=E$e(s);for(let l=0,o=i.length-1;l<o;l++){const d=i[l];if(d>r)return d}return Math.max(r,1)}function XRe(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function ZRe(e,t,n,s){let r=0,i=n[0],l;for(s=Math.ceil(s),l=0;l<e.length;l++)l===i&&(t.push(e[l]),r++,i=n[r*s])}function rb(e,t,n,s,r){const i=Kt(s,0),l=Math.min(Kt(r,e.length),e.length);let o=0,d,c,m;for(n=Math.ceil(n),r&&(d=r-s,n=d/Math.floor(d/n)),m=i;m<0;)o++,m=Math.round(i+o*n);for(c=Math.max(i,0);c<l;c++)c===m&&(t.push(e[c]),o++,m=Math.round(i+o*n))}function JRe(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const eze=e=>e==="left"?"right":e==="right"?"left":e,sF=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,rF=(e,t)=>Math.min(t||e,e);function iF(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function tze(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,l=e._endPixel,o=1e-6;let d=e.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(d-i,l-d):t===0?c=(e.getPixelForTick(1)-d)/2:c=(d-e.getPixelForTick(r-1))/2,d+=r<t?c:-c,d<i-o||d>l+o)))return d}function aze(e,t){Ca(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function gg(e){return e.drawTicks?e.tickLength:0}function lF(e,t){if(!e.display)return 0;const n=vs(e.font,t),s=ri(e.padding);return(Rn(e.text)?e.text.length:1)*n.lineHeight+s.height}function nze(e,t){return Ou(e,{scale:t,type:"scale"})}function sze(e,t,n){return Ou(e,{tick:n,index:t,type:"tick"})}function rze(e,t,n){let s=hP(e);return(n&&t!=="right"||!n&&t==="right")&&(s=eze(s)),s}function ize(e,t,n,s){const{top:r,left:i,bottom:l,right:o,chart:d}=e,{chartArea:c,scales:m}=d;let h=0,p,b,w;const x=l-r,v=o-i;if(e.isHorizontal()){if(b=hs(s,i,o),la(n)){const j=Object.keys(n)[0],C=n[j];w=m[j].getPixelForValue(C)+x-t}else n==="center"?w=(c.bottom+c.top)/2+x-t:w=sF(e,n,t);p=o-i}else{if(la(n)){const j=Object.keys(n)[0],C=n[j];b=m[j].getPixelForValue(C)-v+t}else n==="center"?b=(c.left+c.right)/2-v+t:b=sF(e,n,t);w=hs(s,l,r),h=n==="left"?-zn:zn}return{titleX:b,titleY:w,maxWidth:p,rotation:h}}class Gf extends $o{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=Wi(t,Number.POSITIVE_INFINITY),n=Wi(n,Number.NEGATIVE_INFINITY),s=Wi(s,Number.POSITIVE_INFINITY),r=Wi(r,Number.NEGATIVE_INFINITY),{min:Wi(t,s),max:Wi(n,r),minDefined:si(t),maxDefined:si(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),l;if(r&&i)return{min:n,max:s};const o=this.getMatchingVisibleMetas();for(let d=0,c=o.length;d<c;++d)l=o[d].controller.getMinMax(this,t),r||(n=Math.min(n,l.min)),i||(s=Math.max(s,l.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Wi(n,Wi(s,n)),max:Wi(s,Wi(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ua(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:l}=this.options,o=l.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=o6e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=o<this.ticks.length;this._convertTicksToLabels(d?iF(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),l.display&&(l.autoSkip||l.source==="auto")&&(this.ticks=YRe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ua(this.options.afterUpdate,[this])}beforeSetDimensions(){Ua(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ua(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ua(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ua(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=Ua(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){Ua(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ua(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=rF(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let l=r,o,d,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const m=this._getLabelSizes(),h=m.widest.width,p=m.highest.height,b=bs(this.chart.width-h,0,this.maxWidth);o=t.offset?this.maxWidth/s:b/(s-1),h+6>o&&(o=b/(s-(t.offset?.5:1)),d=this.maxHeight-gg(t.grid)-n.padding-lF(t.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),l=D$e(Math.min(Math.asin(bs((m.highest.height+6)/o,-1,1)),Math.asin(bs(d/c,-1,1))-Math.asin(bs(p/c,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ua(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ua(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,l=this._isVisible(),o=this.isHorizontal();if(l){const d=lF(r,n.options.font);if(o?(t.width=this.maxWidth,t.height=gg(i)+d):(t.height=this.maxHeight,t.width=gg(i)+d),s.display&&this.ticks.length){const{first:c,last:m,widest:h,highest:p}=this._getLabelSizes(),b=s.padding*2,w=no(this.labelRotation),x=Math.cos(w),v=Math.sin(w);if(o){const j=s.mirror?0:v*h.width+x*p.height;t.height=Math.min(this.maxHeight,t.height+j+b)}else{const j=s.mirror?0:x*h.width+v*p.height;t.width=Math.min(this.maxWidth,t.width+j+b)}this._calculatePadding(c,m,v,x)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:l},position:o}=this.options,d=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,b=0;d?c?(p=r*t.width,b=s*n.height):(p=s*t.height,b=r*n.width):i==="start"?b=n.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,b=n.width/2),this.paddingLeft=Math.max((p-m+l)*this.width/(this.width-m),0),this.paddingRight=Math.max((b-h+l)*this.width/(this.width-h),0)}else{let m=n.height/2,h=t.height/2;i==="start"?(m=0,h=t.height):i==="end"&&(m=n.height,h=0),this.paddingTop=m+l,this.paddingBottom=h+l}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ua(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ya(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=iF(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,l=[],o=[],d=Math.floor(n/rF(n,s));let c=0,m=0,h,p,b,w,x,v,j,C,S,_,A;for(h=0;h<n;h+=d){if(w=t[h].label,x=this._resolveTickFontOptions(h),r.font=v=x.string,j=i[v]=i[v]||{data:{},gc:[]},C=x.lineHeight,S=_=0,!ya(w)&&!Rn(w))S=OU(r,j.data,j.gc,S,w),_=C;else if(Rn(w))for(p=0,b=w.length;p<b;++p)A=w[p],!ya(A)&&!Rn(A)&&(S=OU(r,j.data,j.gc,S,A),_+=C);l.push(S),o.push(_),c=Math.max(S,c),m=Math.max(_,m)}aze(i,n);const T=l.indexOf(c),E=o.indexOf(m),D=z=>({width:l[z]||0,height:o[z]||0});return{first:D(0),last:D(n-1),widest:D(T),highest:D(E),widths:l,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return M$e(this._alignToPixels?yd(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=sze(this.getContext(),t,s))}return this.$context||(this.$context=nze(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=no(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),l=t.autoSkipPadding||0,o=i?i.widest.width+l:0,d=i?i.highest.height+l:0;return this.isHorizontal()?d*s>o*r?o/s:d/r:d*r<o*s?d/s:o/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:l,border:o}=r,d=i.offset,c=this.isHorizontal(),h=this.ticks.length+(d?1:0),p=gg(i),b=[],w=o.setContext(this.getContext()),x=w.display?w.width:0,v=x/2,j=function(W){return yd(s,W,x)};let C,S,_,A,T,E,D,z,K,B,O,L;if(l==="top")C=j(this.bottom),E=this.bottom-p,z=C-v,B=j(t.top)+v,L=t.bottom;else if(l==="bottom")C=j(this.top),B=t.top,L=j(t.bottom)-v,E=C+v,z=this.top+p;else if(l==="left")C=j(this.right),T=this.right-p,D=C-v,K=j(t.left)+v,O=t.right;else if(l==="right")C=j(this.left),K=t.left,O=j(t.right)-v,T=C+v,D=this.left+p;else if(n==="x"){if(l==="center")C=j((t.top+t.bottom)/2+.5);else if(la(l)){const W=Object.keys(l)[0],q=l[W];C=j(this.chart.scales[W].getPixelForValue(q))}B=t.top,L=t.bottom,E=C+v,z=E+p}else if(n==="y"){if(l==="center")C=j((t.left+t.right)/2);else if(la(l)){const W=Object.keys(l)[0],q=l[W];C=j(this.chart.scales[W].getPixelForValue(q))}T=C-v,D=T-p,K=t.left,O=t.right}const H=Kt(r.ticks.maxTicksLimit,h),ae=Math.max(1,Math.ceil(h/H));for(S=0;S<h;S+=ae){const W=this.getContext(S),q=i.setContext(W),le=o.setContext(W),Q=q.lineWidth,te=q.color,V=le.dash||[],ee=le.dashOffset,me=q.tickWidth,we=q.tickColor,ve=q.tickBorderDash||[],Ae=q.tickBorderDashOffset;_=tze(this,S,d),_!==void 0&&(A=yd(s,_,Q),c?T=D=K=O=A:E=z=B=L=A,b.push({tx1:T,ty1:E,tx2:D,ty2:z,x1:K,y1:B,x2:O,y2:L,width:Q,color:te,borderDash:V,borderDashOffset:ee,tickWidth:me,tickColor:we,tickBorderDash:ve,tickBorderDashOffset:Ae}))}return this._ticksLength=h,this._borderValue=C,b}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,l=this.isHorizontal(),o=this.ticks,{align:d,crossAlign:c,padding:m,mirror:h}=i,p=gg(s.grid),b=p+m,w=h?-m:b,x=-no(this.labelRotation),v=[];let j,C,S,_,A,T,E,D,z,K,B,O,L="middle";if(r==="top")T=this.bottom-w,E=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+w,E=this._getXAxisLabelAlignment();else if(r==="left"){const ae=this._getYAxisLabelAlignment(p);E=ae.textAlign,A=ae.x}else if(r==="right"){const ae=this._getYAxisLabelAlignment(p);E=ae.textAlign,A=ae.x}else if(n==="x"){if(r==="center")T=(t.top+t.bottom)/2+b;else if(la(r)){const ae=Object.keys(r)[0],W=r[ae];T=this.chart.scales[ae].getPixelForValue(W)+b}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")A=(t.left+t.right)/2-b;else if(la(r)){const ae=Object.keys(r)[0],W=r[ae];A=this.chart.scales[ae].getPixelForValue(W)}E=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(d==="start"?L="top":d==="end"&&(L="bottom"));const H=this._getLabelSizes();for(j=0,C=o.length;j<C;++j){S=o[j],_=S.label;const ae=i.setContext(this.getContext(j));D=this.getPixelForTick(j)+i.labelOffset,z=this._resolveTickFontOptions(j),K=z.lineHeight,B=Rn(_)?_.length:1;const W=B/2,q=ae.color,le=ae.textStrokeColor,Q=ae.textStrokeWidth;let te=E;l?(A=D,E==="inner"&&(j===C-1?te=this.options.reverse?"left":"right":j===0?te=this.options.reverse?"right":"left":te="center"),r==="top"?c==="near"||x!==0?O=-B*K+K/2:c==="center"?O=-H.highest.height/2-W*K+K:O=-H.highest.height+K/2:c==="near"||x!==0?O=K/2:c==="center"?O=H.highest.height/2-W*K:O=H.highest.height-B*K,h&&(O*=-1),x!==0&&!ae.showLabelBackdrop&&(A+=K/2*Math.sin(x))):(T=D,O=(1-B)*K/2);let V;if(ae.showLabelBackdrop){const ee=ri(ae.backdropPadding),me=H.heights[j],we=H.widths[j];let ve=O-ee.top,Ae=0-ee.left;switch(L){case"middle":ve-=me/2;break;case"bottom":ve-=me;break}switch(E){case"center":Ae-=we/2;break;case"right":Ae-=we;break;case"inner":j===C-1?Ae-=we:j>0&&(Ae-=we/2);break}V={left:Ae,top:ve,width:we+ee.width,height:me+ee.height,color:ae.backdropColor}}v.push({label:_,font:z,textOffset:O,options:{rotation:x,color:q,strokeColor:le,strokeWidth:Q,textAlign:te,textBaseline:L,translation:[A,T],backdrop:V}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-no(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,l=this._getLabelSizes(),o=t+i,d=l.widest.width;let c,m;return n==="left"?r?(m=this.right+i,s==="near"?c="left":s==="center"?(c="center",m+=d/2):(c="right",m+=d)):(m=this.right-o,s==="near"?c="right":s==="center"?(c="center",m-=d/2):(c="left",m=this.left)):n==="right"?r?(m=this.left+i,s==="near"?c="right":s==="center"?(c="center",m-=d/2):(c="left",m-=d)):(m=this.left+o,s==="near"?c="left":s==="center"?(c="center",m+=d/2):(c="right",m=this.right)):c="right",{textAlign:c,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:l}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,l),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,l;const o=(d,c,m)=>{!m.width||!m.color||(s.save(),s.lineWidth=m.width,s.strokeStyle=m.color,s.setLineDash(m.borderDash||[]),s.lineDashOffset=m.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,l=r.length;i<l;++i){const d=r[i];n.drawOnChartArea&&o({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&o({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),l=s.display?i.width:0;if(!l)return;const o=r.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let c,m,h,p;this.isHorizontal()?(c=yd(t,this.left,l)-l/2,m=yd(t,this.right,o)+o/2,h=p=d):(h=yd(t,this.top,l)-l/2,p=yd(t,this.bottom,o)+o/2,c=m=d),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(m,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&xP(s,r);const i=this.getLabelItems(t);for(const l of i){const o=l.options,d=l.font,c=l.label,m=l.textOffset;Dp(s,c,0,m,d,o)}r&&yP(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=vs(s.font),l=ri(s.padding),o=s.align;let d=i.lineHeight/2;n==="bottom"||n==="center"||la(n)?(d+=l.bottom,Rn(s.text)&&(d+=i.lineHeight*(s.text.length-1))):d+=l.top;const{titleX:c,titleY:m,maxWidth:h,rotation:p}=ize(this,d,n,o);Dp(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:p,textAlign:rze(o,n,r),textBaseline:"middle",translation:[c,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Kt(t.grid&&t.grid.z,-1),r=Kt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Gf.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,l;for(i=0,l=n.length;i<l;++i){const o=n[i];o[s]===this.id&&(!t||o.type===t)&&r.push(o)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return vs(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ib{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;cze(n)&&(s=this.register(n));const r=this.items,i=t.id,l=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,lze(t,l,s),this.override&&pn.override(t.id,t.overrides)),l}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in pn[r]&&(delete pn[r][s],this.override&&delete vu[s])}}function lze(e,t,n){const s=Tp(Object.create(null),[n?pn.get(n):{},pn.get(t),e.defaults]);pn.set(t,s),e.defaultRoutes&&oze(t,e.defaultRoutes),e.descriptors&&pn.describe(t,e.descriptors)}function oze(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),l=t[n].split("."),o=l.pop(),d=l.join(".");pn.route(i,r,d,o)})}function cze(e){return"id"in e&&"defaults"in e}class dze{constructor(){this.controllers=new ib(Nj,"datasets",!0),this.elements=new ib($o,"elements"),this.plugins=new ib(Object,"plugins"),this.scales=new ib(Gf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):Ca(r,l=>{const o=s||this._getRegistryForType(l);this._exec(t,o,l)})})}_exec(t,n,s){const r=mP(t);Ua(s["before"+r],[],s),n[t](s),Ua(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var Ki=new dze;class uze{constructor(){this._init=void 0}notify(t,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),l=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),l}_notify(t,n,s,r){r=r||{};for(const i of t){const l=i.plugin,o=l[s],d=[n,r,i.options];if(Ua(o,d,l)===!1&&r.cancelable)return!1}return!0}invalidate(){ya(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=Kt(s.options&&s.options.plugins,{}),i=mze(s);return r===!1&&!n?[]:hze(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,l)=>i.filter(o=>!l.some(d=>o.plugin.id===d.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function mze(e){const t={},n=[],s=Object.keys(Ki.plugins.items);for(let i=0;i<s.length;i++)n.push(Ki.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const l=r[i];n.indexOf(l)===-1&&(n.push(l),t[l.id]=!0)}return{plugins:n,localIds:t}}function fze(e,t){return!t&&e===!1?null:e===!0?{}:e}function hze(e,{plugins:t,localIds:n},s,r){const i=[],l=e.getContext();for(const o of t){const d=o.id,c=fze(s[d],r);c!==null&&i.push({plugin:o,options:gze(e.config,{plugin:o,local:n[d]},c,l)})}return i}function gze(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),l=e.getOptionScopes(s,i);return n&&t.defaults&&l.push(t.defaults),e.createResolver(l,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function DE(e,t){const n=pn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function pze(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function xze(e,t){return e===t?"_index_":"_value_"}function oF(e){if(e==="x"||e==="y"||e==="r")return e}function yze(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function OE(e,...t){if(oF(e))return e;for(const n of t){const s=n.axis||yze(n.position)||e.length>1&&oF(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function cF(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function bze(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return cF(e,"x",n[0])||cF(e,"y",n[0])}return{}}function vze(e,t){const n=vu[e.type]||{scales:{}},s=t.scales||{},r=DE(e.type,t),i=Object.create(null);return Object.keys(s).forEach(l=>{const o=s[l];if(!la(o))return console.error(`Invalid scale configuration for scale: ${l}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=OE(l,o,bze(l,e),pn.scales[o.type]),c=xze(d,r),m=n.scales||{};i[l]=qg(Object.create(null),[{axis:d},o,m[d],m[c]])}),e.data.datasets.forEach(l=>{const o=l.type||e.type,d=l.indexAxis||DE(o,t),m=(vu[o]||{}).scales||{};Object.keys(m).forEach(h=>{const p=pze(h,d),b=l[p+"AxisID"]||p;i[b]=i[b]||Object.create(null),qg(i[b],[{axis:p},s[b],m[h]])})}),Object.keys(i).forEach(l=>{const o=i[l];qg(o,[pn.scales[o.type],pn.scale])}),i}function GQ(e){const t=e.options||(e.options={});t.plugins=Kt(t.plugins,{}),t.scales=vze(e,t)}function VQ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function wze(e){return e=e||{},e.data=VQ(e.data),GQ(e),e}const dF=new Map,WQ=new Set;function lb(e,t){let n=dF.get(e);return n||(n=t(),dF.set(e,n),WQ.add(n)),n}const pg=(e,t,n)=>{const s=bu(t,n);s!==void 0&&e.add(s)};class Nze{constructor(t){this._config=wze(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=VQ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),GQ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return lb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return lb(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return lb(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return lb(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,l=this._cachedScopes(t,s),o=l.get(n);if(o)return o;const d=new Set;n.forEach(m=>{t&&(d.add(t),m.forEach(h=>pg(d,t,h))),m.forEach(h=>pg(d,r,h)),m.forEach(h=>pg(d,vu[i]||{},h)),m.forEach(h=>pg(d,pn,h)),m.forEach(h=>pg(d,LE,h))});const c=Array.from(d);return c.length===0&&c.push(Object.create(null)),WQ.has(n)&&l.set(n,c),c}chartOptionScopes(){const{options:t,type:n}=this;return[t,vu[n]||{},pn.datasets[n]||{},{type:n},pn,LE]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:l,subPrefixes:o}=uF(this._resolverCache,t,r);let d=l;if(Cze(l,n)){i.$shared=!1,s=$c(s)?s():s;const c=this.createResolver(t,s,o);d=vf(l,s,c)}for(const c of n)i[c]=d[c];return i}createResolver(t,n,s=[""],r){const{resolver:i}=uF(this._resolverCache,t,s);return la(n)?vf(i,n,void 0,r):i}}function uF(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:vP(t,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},s.set(r,i)),i}const jze=e=>la(e)&&Object.getOwnPropertyNames(e).some(t=>$c(e[t]));function Cze(e,t){const{isScriptable:n,isIndexable:s}=TQ(e);for(const r of t){const i=n(r),l=s(r),o=(l||i)&&e[r];if(i&&($c(o)||jze(o))||l&&Rn(o))return!0}return!1}var Sze="4.5.1";const _ze=["top","bottom","left","right","chartArea"];function mF(e,t){return e==="top"||e==="bottom"||_ze.indexOf(e)===-1&&t==="x"}function fF(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function hF(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ua(n&&n.onComplete,[e],t)}function Aze(e){const t=e.chart,n=t.options.animation;Ua(n&&n.onProgress,[e],t)}function qQ(e){return jP()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Db={},gF=e=>{const t=qQ(e);return Object.values(Db).filter(n=>n.canvas===t).pop()};function Tze(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const l=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=l)}}}function Eze(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}let Cj=class{static defaults=pn;static instances=Db;static overrides=vu;static registry=Ki;static version=Sze;static getChart=gF;static register(...t){Ki.add(...t),pF()}static unregister(...t){Ki.remove(...t),pF()}constructor(t,n){const s=this.config=new Nze(n),r=qQ(t),i=gF(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const l=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||qRe(r)),this.platform.updateConfig(s);const o=this.platform.acquireContext(r,l.aspectRatio),d=o&&o.canvas,c=d&&d.height,m=d&&d.width;if(this.id=v$e(),this.ctx=o,this.canvas=d,this.width=m,this.height=c,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uze,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=z$e(h=>this.update(h),l.resizeDelay||0),this._dataChanges=[],Db[this.id]=this,!o||!d){console.error("Failed to create chart: can't acquire context from the given item");return}ql.listen(this,"complete",hF),ql.listen(this,"progress",Aze),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return ya(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ki}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():RU(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return MU(this.canvas,this.ctx),this}stop(){return ql.stop(this),this}resize(t,n){ql.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,l=this.platform.getMaximumSize(r,t,n,i),o=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=l.width,this.height=l.height,this._aspectRatio=this.aspectRatio,RU(this,o,!0)&&(this.notifyPlugins("resize",{size:l}),Ua(s.onResize,[this,l],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ca(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((l,o)=>(l[o]=!1,l),{});let i=[];n&&(i=i.concat(Object.keys(n).map(l=>{const o=n[l],d=OE(l,o),c=d==="r",m=d==="x";return{options:o,dposition:c?"chartArea":m?"bottom":"left",dtype:c?"radialLinear":m?"category":"linear"}}))),Ca(i,l=>{const o=l.options,d=o.id,c=OE(d,o),m=Kt(o.type,l.dtype);(o.position===void 0||mF(o.position,c)!==mF(l.dposition))&&(o.position=l.dposition),r[d]=!0;let h=null;if(d in s&&s[d].type===m)h=s[d];else{const p=Ki.getScale(m);h=new p({id:d,type:m,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(o,t)}),Ca(r,(l,o)=>{l||delete s[o]}),Ca(s,l=>{Yr.configure(this,l,l.options),Yr.addBox(this,l)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(fF("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let l=this.getDatasetMeta(s);const o=i.type||this.config.type;if(l.type&&l.type!==o&&(this._destroyDatasetMeta(s),l=this.getDatasetMeta(s)),l.type=o,l.indexAxis=i.indexAxis||DE(o,this.options),l.order=i.order||0,l.index=s,l.label=""+i.label,l.visible=this.isDatasetVisible(s),l.controller)l.controller.updateIndex(s),l.controller.linkScales();else{const d=Ki.getController(o),{datasetElementType:c,dataElementType:m}=pn.datasets[o];Object.assign(d,{dataElementType:Ki.getElement(m),datasetElementType:c&&Ki.getElement(c)}),l.controller=new d(this,s),t.push(l.controller)}}return this._updateMetasets(),t}_resetElements(){Ca(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let l=0;for(let c=0,m=this.data.datasets.length;c<m;c++){const{controller:h}=this.getDatasetMeta(c),p=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),l=Math.max(+h.getMaxOverflow(),l)}l=this._minPadding=s.layout.autoPadding?l:0,this._updateLayout(l),r||Ca(i,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(fF("z","_idx"));const{_active:o,_lastEvent:d}=this;d?this._eventHandler(d,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Ca(this.scales,t=>{Yr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!SU(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const l=s==="_removeElements"?-i:i;Tze(t,r,l)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(l=>l[0]===i).map((l,o)=>o+","+l.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!SU(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Yr.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Ca(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,$c(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ql.has(this)?this.attached&&!ql.running(this)&&ql.start(this):(this.draw(),hF({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const l=n[r];(!t||l.visible)&&s.push(l)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=V6e(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&xP(n,r),t.controller.draw(),r&&yP(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Pp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=_Re.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ou(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),l=i.controller._resolveAnimations(void 0,r);Ep(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),l.update(i,{visible:s}),this.update(o=>o.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),ql.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),MU(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Db[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,l)=>{n.addEventListener(this,i,l),t[i]=l},r=(i,l,o)=>{i.offsetX=l,i.offsetY=o,this._eventHandler(i)};Ca(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(d,c)=>{n.addEventListener(this,d,c),t[d]=c},r=(d,c)=>{t[d]&&(n.removeEventListener(this,d,c),delete t[d])},i=(d,c)=>{this.canvas&&this.resize(d,c)};let l;const o=()=>{r("attach",o),this.attached=!0,this.resize(),s("resize",i),s("detach",l)};l=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",o)},n.isAttached(this.canvas)?o():l()}unbindEvents(){Ca(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},Ca(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,l,o,d;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),o=0,d=t.length;o<d;++o){l=t[o];const c=l&&this.getDatasetMeta(l.datasetIndex).controller;c&&c[r+"HoverStyle"](l.element,l.datasetIndex,l.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:l})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[l],index:l}});!Yv(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(d,c)=>d.filter(m=>!c.some(h=>m.datasetIndex===h.datasetIndex&&m.index===h.index)),l=i(n,t),o=s?t:i(t,n);l.length&&this.updateHoverStyle(l,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=l=>(l.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,l=n,o=this._getActiveElements(t,r,s,l),d=_$e(t),c=Eze(t,this._lastEvent,s,d);s&&(this._lastEvent=null,Ua(i.onHover,[t,o,this],this),d&&Ua(i.onClick,[t,o,this],this));const m=!Yv(o,r);return(m||n)&&(this._active=o,this._updateHoverStyles(o,r,n)),this._lastEvent=c,m}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function pF(){return Ca(Cj.instances,e=>e._plugins.invalidate())}function kze(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:l,innerRadius:o,options:d}=t,{borderWidth:c,borderJoinStyle:m}=d,h=Math.min(c/l,ji(s-n));if(e.beginPath(),e.arc(r,i,l-c/2,s+h/2,n-h/2),o>0){const p=Math.min(c/o,ji(s-n));e.arc(r,i,o+c/2,n-p/2,s+p/2,!0)}else{const p=Math.min(c/2,l*ji(s-n));if(m==="round")e.arc(r,i,p,n-_a/2,s+_a/2,!0);else if(m==="bevel"){const b=2*p*p,w=-b*Math.cos(n+_a/2)+r,x=-b*Math.sin(n+_a/2)+i,v=b*Math.cos(s+_a/2)+r,j=b*Math.sin(s+_a/2)+i;e.lineTo(w,x),e.lineTo(v,j)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Lze(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:l,outerRadius:o,innerRadius:d}=t;let c=r/o;e.beginPath(),e.arc(i,l,o,s-c,n+c),d>r?(c=r/d,e.arc(i,l,d,n+c,s-c,!0)):e.arc(i,l,r,n+zn,s-zn),e.closePath(),e.clip()}function Pze(e){return bP(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Dze(e,t,n,s){const r=Pze(e.options.borderRadius),i=(n-t)/2,l=Math.min(i,s*t/2),o=d=>{const c=(n-Math.min(i,d))*s/2;return bs(d,0,Math.min(i,c))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:bs(r.innerStart,0,l),innerEnd:bs(r.innerEnd,0,l)}}function Mm(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function ew(e,t,n,s,r,i){const{x:l,y:o,startAngle:d,pixelMargin:c,innerRadius:m}=t,h=Math.max(t.outerRadius+s+n-c,0),p=m>0?m+s+n+c:0;let b=0;const w=r-d;if(s){const ae=m>0?m-s:0,W=h>0?h-s:0,q=(ae+W)/2,le=q!==0?w*q/(q+s):w;b=(w-le)/2}const x=Math.max(.001,w*h-n/_a)/h,v=(w-x)/2,j=d+v+b,C=r-v-b,{outerStart:S,outerEnd:_,innerStart:A,innerEnd:T}=Dze(t,p,h,C-j),E=h-S,D=h-_,z=j+S/E,K=C-_/D,B=p+A,O=p+T,L=j+A/B,H=C-T/O;if(e.beginPath(),i){const ae=(z+K)/2;if(e.arc(l,o,h,z,ae),e.arc(l,o,h,ae,K),_>0){const Q=Mm(D,K,l,o);e.arc(Q.x,Q.y,_,K,C+zn)}const W=Mm(O,C,l,o);if(e.lineTo(W.x,W.y),T>0){const Q=Mm(O,H,l,o);e.arc(Q.x,Q.y,T,C+zn,H+Math.PI)}const q=(C-T/p+(j+A/p))/2;if(e.arc(l,o,p,C-T/p,q,!0),e.arc(l,o,p,q,j+A/p,!0),A>0){const Q=Mm(B,L,l,o);e.arc(Q.x,Q.y,A,L+Math.PI,j-zn)}const le=Mm(E,j,l,o);if(e.lineTo(le.x,le.y),S>0){const Q=Mm(E,z,l,o);e.arc(Q.x,Q.y,S,j-zn,z)}}else{e.moveTo(l,o);const ae=Math.cos(z)*h+l,W=Math.sin(z)*h+o;e.lineTo(ae,W);const q=Math.cos(K)*h+l,le=Math.sin(K)*h+o;e.lineTo(q,le)}e.closePath()}function Oze(e,t,n,s,r){const{fullCircles:i,startAngle:l,circumference:o}=t;let d=t.endAngle;if(i){ew(e,t,n,s,d,r);for(let c=0;c<i;++c)e.fill();isNaN(o)||(d=l+(o%un||un))}return ew(e,t,n,s,d,r),e.fill(),d}function Mze(e,t,n,s,r){const{fullCircles:i,startAngle:l,circumference:o,options:d}=t,{borderWidth:c,borderJoinStyle:m,borderDash:h,borderDashOffset:p,borderRadius:b}=d,w=d.borderAlign==="inner";if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=p,w?(e.lineWidth=c*2,e.lineJoin=m||"round"):(e.lineWidth=c,e.lineJoin=m||"bevel");let x=t.endAngle;if(i){ew(e,t,n,s,x,r);for(let v=0;v<i;++v)e.stroke();isNaN(o)||(x=l+(o%un||un))}w&&Lze(e,t,x),d.selfJoin&&x-l>=_a&&b===0&&m!=="miter"&&kze(e,t,x),i||(ew(e,t,n,s,x,r),e.stroke())}class Ize extends $o{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.getProps(["x","y"],s),{angle:i,distance:l}=vQ(r,{x:t,y:n}),{startAngle:o,endAngle:d,innerRadius:c,outerRadius:m,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,b=Kt(h,d-o),w=Lp(i,o,d)&&o!==d,x=b>=un||w,v=_c(l,c+p,m+p);return x&&v}getCenterPoint(t){const{x:n,y:s,startAngle:r,endAngle:i,innerRadius:l,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:c}=this.options,m=(r+i)/2,h=(l+o+c+d)/2;return{x:n+Math.cos(m)*h,y:s+Math.sin(m)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,r=(n.offset||0)/4,i=(n.spacing||0)/2,l=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>un?Math.floor(s/un):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*r,Math.sin(o)*r);const d=1-Math.sin(Math.min(_a,s||0)),c=r*d;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Oze(t,this,c,i,l),Mze(t,this,c,i,l),t.restore()}}function YQ(e,t,n=t){e.lineCap=Kt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Kt(n.borderDash,t.borderDash)),e.lineDashOffset=Kt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Kt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Kt(n.borderWidth,t.borderWidth),e.strokeStyle=Kt(n.borderColor,t.borderColor)}function $ze(e,t,n){e.lineTo(n.x,n.y)}function Rze(e){return e.stepped?J$e:e.tension||e.cubicInterpolationMode==="monotone"?e6e:$ze}function KQ(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:l,end:o}=t,d=Math.max(r,l),c=Math.min(i,o),m=r<l&&i<l||r>o&&i>o;return{count:s,start:d,loop:t.loop,ilen:c<d&&!m?s+c-d:c-d}}function zze(e,t,n,s){const{points:r,options:i}=t,{count:l,start:o,loop:d,ilen:c}=KQ(r,n,s),m=Rze(i);let{move:h=!0,reverse:p}=s||{},b,w,x;for(b=0;b<=c;++b)w=r[(o+(p?c-b:b))%l],!w.skip&&(h?(e.moveTo(w.x,w.y),h=!1):m(e,x,w,p,i.stepped),x=w);return d&&(w=r[(o+(p?c:0))%l],m(e,x,w,p,i.stepped)),!!d}function Uze(e,t,n,s){const r=t.points,{count:i,start:l,ilen:o}=KQ(r,n,s),{move:d=!0,reverse:c}=s||{};let m=0,h=0,p,b,w,x,v,j;const C=_=>(l+(c?o-_:_))%i,S=()=>{x!==v&&(e.lineTo(m,v),e.lineTo(m,x),e.lineTo(m,j))};for(d&&(b=r[C(0)],e.moveTo(b.x,b.y)),p=0;p<=o;++p){if(b=r[C(p)],b.skip)continue;const _=b.x,A=b.y,T=_|0;T===w?(A<x?x=A:A>v&&(v=A),m=(h*m+_)/++h):(S(),e.lineTo(_,A),w=T,h=0,x=v=A),j=A}S()}function ME(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?Uze:zze}function Fze(e){return e.stepped?P6e:e.tension||e.cubicInterpolationMode==="monotone"?D6e:kd}function Bze(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),YQ(e,t.options),e.stroke(r)}function Hze(e,t,n,s){const{segments:r,options:i}=t,l=ME(t);for(const o of r)YQ(e,i,o.style),e.beginPath(),l(e,t,o,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const Gze=typeof Path2D=="function";function Vze(e,t,n,s){Gze&&!t.options.segment?Bze(e,t,n,s):Hze(e,t,n,s)}class Wze extends $o{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;C6e(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=F6e(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,l=R6e(this,{property:n,start:r,end:r});if(!l.length)return;const o=[],d=Fze(s);let c,m;for(c=0,m=l.length;c<m;++c){const{start:h,end:p}=l[c],b=i[h],w=i[p];if(b===w){o.push(b);continue}const x=Math.abs((r-b[n])/(w[n]-b[n])),v=d(b,w,x,s.stepped);v[n]=t[n],o.push(v)}return o.length===1?o[0]:o}pathSegment(t,n,s){return ME(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=ME(this);let l=this._loop;n=n||0,s=s||this.points.length-n;for(const o of r)l&=i(t,this,o,{start:n,end:n+s-1});return!!l}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),Vze(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function xF(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class qze extends $o{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.options,{x:i,y:l}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(n-l,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return xF(this,t,"x",n)}inYRange(t,n){return xF(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!Pp(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,PE(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function QQ(e,t){const{x:n,y:s,base:r,width:i,height:l}=e.getProps(["x","y","base","width","height"],t);let o,d,c,m,h;return e.horizontal?(h=l/2,o=Math.min(n,r),d=Math.max(n,r),c=s-h,m=s+h):(h=i/2,o=n-h,d=n+h,c=Math.min(s,r),m=Math.max(s,r)),{left:o,top:c,right:d,bottom:m}}function Tc(e,t,n,s){return e?0:bs(t,n,s)}function Yze(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=AQ(s);return{t:Tc(r.top,i.top,0,n),r:Tc(r.right,i.right,0,t),b:Tc(r.bottom,i.bottom,0,n),l:Tc(r.left,i.left,0,t)}}function Kze(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Jm(r),l=Math.min(t,n),o=e.borderSkipped,d=s||la(r);return{topLeft:Tc(!d||o.top||o.left,i.topLeft,0,l),topRight:Tc(!d||o.top||o.right,i.topRight,0,l),bottomLeft:Tc(!d||o.bottom||o.left,i.bottomLeft,0,l),bottomRight:Tc(!d||o.bottom||o.right,i.bottomRight,0,l)}}function Qze(e){const t=QQ(e),n=t.right-t.left,s=t.bottom-t.top,r=Yze(e,n/2,s/2),i=Kze(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function sA(e,t,n,s){const r=t===null,i=n===null,o=e&&!(r&&i)&&QQ(e,s);return o&&(r||_c(t,o.left,o.right))&&(i||_c(n,o.top,o.bottom))}function Xze(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function Zze(e,t){e.rect(t.x,t.y,t.w,t.h)}function rA(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,l=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+l,radius:e.radius}}class Jze extends $o{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:l}=Qze(this),o=Xze(l.radius)?Xv:Zze;t.save(),(l.w!==i.w||l.h!==i.h)&&(t.beginPath(),o(t,rA(l,n,i)),t.clip(),o(t,rA(i,-n,l)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),o(t,rA(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return sA(this,t,n,s)}inXRange(t,n){return sA(this,t,null,n)}inYRange(t,n){return sA(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const yF=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},e7e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class bF extends $o{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ua(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=vs(s.font),i=r.size,l=this._computeTitleHeight(),{boxWidth:o,itemHeight:d}=yF(s,i);let c,m;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,m=this._fitRows(l,i,o,d)+10):(m=this.maxHeight,c=this._fitCols(l,r,o,d)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:l,options:{labels:{padding:o}}}=this,d=this.legendHitBoxes=[],c=this.lineWidths=[0],m=r+o;let h=t;i.textAlign="left",i.textBaseline="middle";let p=-1,b=-m;return this.legendItems.forEach((w,x)=>{const v=s+n/2+i.measureText(w.text).width;(x===0||c[c.length-1]+v+2*o>l)&&(h+=m,c[c.length-(x>0?0:1)]=0,b+=m,p++),d[x]={left:0,top:b,row:p,width:v,height:r},c[c.length-1]+=v+o}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:l,options:{labels:{padding:o}}}=this,d=this.legendHitBoxes=[],c=this.columnSizes=[],m=l-t;let h=o,p=0,b=0,w=0,x=0;return this.legendItems.forEach((v,j)=>{const{itemWidth:C,itemHeight:S}=t7e(s,n,i,v,r);j>0&&b+S+2*o>m&&(h+=p+o,c.push({width:p,height:b}),w+=p+o,x++,p=b=0),d[j]={left:w,top:b,col:x,width:C,height:S},p=Math.max(p,C),b+=S+o}),h+=p,c.push({width:p,height:b}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,l=ef(i,this.left,this.width);if(this.isHorizontal()){let o=0,d=hs(s,this.left+r,this.right-this.lineWidths[o]);for(const c of n)o!==c.row&&(o=c.row,d=hs(s,this.left+r,this.right-this.lineWidths[o])),c.top+=this.top+t+r,c.left=l.leftForLtr(l.x(d),c.width),d+=c.width+r}else{let o=0,d=hs(s,this.top+t+r,this.bottom-this.columnSizes[o].height);for(const c of n)c.col!==o&&(o=c.col,d=hs(s,this.top+t+r,this.bottom-this.columnSizes[o].height)),c.top=d,c.left+=this.left+r,c.left=l.leftForLtr(l.x(c.left),c.width),d+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;xP(t,this),this._draw(),yP(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:l}=t,o=pn.color,d=ef(t.rtl,this.left,this.width),c=vs(l.font),{padding:m}=l,h=c.size,p=h/2;let b;this.drawTitle(),r.textAlign=d.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:w,boxHeight:x,itemHeight:v}=yF(l,h),j=function(T,E,D){if(isNaN(w)||w<=0||isNaN(x)||x<0)return;r.save();const z=Kt(D.lineWidth,1);if(r.fillStyle=Kt(D.fillStyle,o),r.lineCap=Kt(D.lineCap,"butt"),r.lineDashOffset=Kt(D.lineDashOffset,0),r.lineJoin=Kt(D.lineJoin,"miter"),r.lineWidth=z,r.strokeStyle=Kt(D.strokeStyle,o),r.setLineDash(Kt(D.lineDash,[])),l.usePointStyle){const K={radius:x*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:z},B=d.xPlus(T,w/2),O=E+p;_Q(r,K,B,O,l.pointStyleWidth&&w)}else{const K=E+Math.max((h-x)/2,0),B=d.leftForLtr(T,w),O=Jm(D.borderRadius);r.beginPath(),Object.values(O).some(L=>L!==0)?Xv(r,{x:B,y:K,w,h:x,radius:O}):r.rect(B,K,w,x),r.fill(),z!==0&&r.stroke()}r.restore()},C=function(T,E,D){Dp(r,D.text,T,E+v/2,c,{strikethrough:D.hidden,textAlign:d.textAlign(D.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?b={x:hs(i,this.left+m,this.right-s[0]),y:this.top+m+_,line:0}:b={x:this.left+m,y:hs(i,this.top+_+m,this.bottom-n[0].height),line:0},DQ(this.ctx,t.textDirection);const A=v+m;this.legendItems.forEach((T,E)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;const D=r.measureText(T.text).width,z=d.textAlign(T.textAlign||(T.textAlign=l.textAlign)),K=w+p+D;let B=b.x,O=b.y;d.setWidth(this.width),S?E>0&&B+K+m>this.right&&(O=b.y+=A,b.line++,B=b.x=hs(i,this.left+m,this.right-s[b.line])):E>0&&O+A>this.bottom&&(B=b.x=B+n[b.line].width+m,b.line++,O=b.y=hs(i,this.top+_+m,this.bottom-n[b.line].height));const L=d.x(B);if(j(L,O,T),B=U$e(z,B+w+p,S?B+K:this.right,t.rtl),C(d.x(B),O,T),S)b.x+=K+m;else if(typeof T.text!="string"){const H=c.lineHeight;b.y+=XQ(T,H)+m}else b.y+=A}),OQ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=vs(n.font),r=ri(n.padding);if(!n.display)return;const i=ef(t.rtl,this.left,this.width),l=this.ctx,o=n.position,d=s.size/2,c=r.top+d;let m,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+c,h=hs(t.align,h,this.right-p);else{const w=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);m=c+hs(t.align,this.top,this.bottom-w-t.labels.padding-this._computeTitleHeight())}const b=hs(o,h,h+p);l.textAlign=i.textAlign(hP(o)),l.textBaseline="middle",l.strokeStyle=n.color,l.fillStyle=n.color,l.font=s.string,Dp(l,n.text,b,m,s)}_computeTitleHeight(){const t=this.options.title,n=vs(t.font),s=ri(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(_c(t,this.left,this.right)&&_c(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],_c(t,r.left,r.left+r.width)&&_c(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!s7e(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=e7e(r,s);r&&!i&&Ua(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&Ua(n.onHover,[t,s,this],this)}else s&&Ua(n.onClick,[t,s,this],this)}}function t7e(e,t,n,s,r){const i=a7e(s,e,t,n),l=n7e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:l}}function a7e(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,l)=>i.length>l.length?i:l)),t+n.size/2+s.measureText(r).width}function n7e(e,t,n){let s=e;return typeof t.text!="string"&&(s=XQ(t,n)),s}function XQ(e,t){const n=e.text?e.text.length:0;return t*n}function s7e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var r7e={id:"legend",_element:bF,start(e,t,n){const s=e.legend=new bF({ctx:e.ctx,options:n,chart:e});Yr.configure(e,s,n),Yr.addBox(e,s)},stop(e){Yr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;Yr.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:l,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const c=d.controller.getStyle(n?0:void 0),m=ri(c.borderWidth);return{text:t[d.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:l&&(o||c.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ZQ extends $o{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=Rn(s.text)?s.text.length:1;this._padding=ri(s.padding);const i=r*vs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:l}=this,o=l.align;let d=0,c,m,h;return this.isHorizontal()?(m=hs(o,s,i),h=n+t,c=i-s):(l.position==="left"?(m=s+t,h=hs(o,r,n),d=_a*-.5):(m=i-t,h=hs(o,n,r),d=_a*.5),c=r-n),{titleX:m,titleY:h,maxWidth:c,rotation:d}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=vs(n.font),i=s.lineHeight/2+this._padding.top,{titleX:l,titleY:o,maxWidth:d,rotation:c}=this._drawArgs(i);Dp(t,n.text,0,0,s,{color:n.color,maxWidth:d,rotation:c,textAlign:hP(n.align),textBaseline:"middle",translation:[l,o]})}}function i7e(e,t){const n=new ZQ({ctx:e.ctx,options:t,chart:e});Yr.configure(e,n,t),Yr.addBox(e,n),e.titleBlock=n}var l7e={id:"title",_element:ZQ,start(e,t,n){i7e(e,n)},stop(e){const t=e.titleBlock;Yr.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;Yr.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const zg={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const o=e[t].element;if(o&&o.hasValue()){const d=o.tooltipPosition();s.add(d.x),r+=d.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((o,d)=>o+d)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,l,o;for(i=0,l=e.length;i<l;++i){const d=e[i].element;if(d&&d.hasValue()){const c=d.getCenterPoint(),m=kE(t,c);m<r&&(r=m,o=d)}}if(o){const d=o.tooltipPosition();n=d.x,s=d.y}return{x:n,y:s}}};function Yi(e,t){return t&&(Rn(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Yl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function o7e(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:l,value:o}=i.getLabelAndValue(r);return{chart:e,label:l,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:o,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function vF(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:l,boxHeight:o}=t,d=vs(t.bodyFont),c=vs(t.titleFont),m=vs(t.footerFont),h=i.length,p=r.length,b=s.length,w=ri(t.padding);let x=w.height,v=0,j=s.reduce((_,A)=>_+A.before.length+A.lines.length+A.after.length,0);if(j+=e.beforeBody.length+e.afterBody.length,h&&(x+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),j){const _=t.displayColors?Math.max(o,d.lineHeight):d.lineHeight;x+=b*_+(j-b)*d.lineHeight+(j-1)*t.bodySpacing}p&&(x+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let C=0;const S=function(_){v=Math.max(v,n.measureText(_).width+C)};return n.save(),n.font=c.string,Ca(e.title,S),n.font=d.string,Ca(e.beforeBody.concat(e.afterBody),S),C=t.displayColors?l+2+t.boxPadding:0,Ca(s,_=>{Ca(_.before,S),Ca(_.lines,S),Ca(_.after,S)}),C=0,n.font=m.string,Ca(e.footer,S),n.restore(),v+=w.width,{width:v,height:x}}function c7e(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function d7e(e,t,n,s){const{x:r,width:i}=s,l=n.caretSize+n.caretPadding;if(e==="left"&&r+i+l>t.width||e==="right"&&r-i-l<0)return!0}function u7e(e,t,n,s){const{x:r,width:i}=n,{width:l,chartArea:{left:o,right:d}}=e;let c="center";return s==="center"?c=r<=(o+d)/2?"left":"right":r<=i/2?c="left":r>=l-i/2&&(c="right"),d7e(c,e,t,n)&&(c="center"),c}function wF(e,t,n){const s=n.yAlign||t.yAlign||c7e(e,n);return{xAlign:n.xAlign||t.xAlign||u7e(e,t,n,s),yAlign:s}}function m7e(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function f7e(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function NF(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:l}=e,{xAlign:o,yAlign:d}=n,c=r+i,{topLeft:m,topRight:h,bottomLeft:p,bottomRight:b}=Jm(l);let w=m7e(t,o);const x=f7e(t,d,c);return d==="center"?o==="left"?w+=c:o==="right"&&(w-=c):o==="left"?w-=Math.max(m,p)+r:o==="right"&&(w+=Math.max(h,b)+r),{x:bs(w,0,s.width-t.width),y:bs(x,0,s.height-t.height)}}function ob(e,t,n){const s=ri(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function jF(e){return Yi([],Yl(e))}function h7e(e,t,n){return Ou(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function CF(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const JQ={beforeTitle:Vl,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:Vl,beforeBody:Vl,beforeLabel:Vl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ya(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vl,afterBody:Vl,beforeFooter:Vl,footer:Vl,afterFooter:Vl};function Bs(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?JQ[t].call(n,s):r}class SF extends $o{static positioners=zg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new IQ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=h7e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=Bs(s,"beforeTitle",this,t),i=Bs(s,"title",this,t),l=Bs(s,"afterTitle",this,t);let o=[];return o=Yi(o,Yl(r)),o=Yi(o,Yl(i)),o=Yi(o,Yl(l)),o}getBeforeBody(t,n){return jF(Bs(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return Ca(t,i=>{const l={before:[],lines:[],after:[]},o=CF(s,i);Yi(l.before,Yl(Bs(o,"beforeLabel",this,i))),Yi(l.lines,Bs(o,"label",this,i)),Yi(l.after,Yl(Bs(o,"afterLabel",this,i))),r.push(l)}),r}getAfterBody(t,n){return jF(Bs(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=Bs(s,"beforeFooter",this,t),i=Bs(s,"footer",this,t),l=Bs(s,"afterFooter",this,t);let o=[];return o=Yi(o,Yl(r)),o=Yi(o,Yl(i)),o=Yi(o,Yl(l)),o}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],l=[];let o=[],d,c;for(d=0,c=n.length;d<c;++d)o.push(o7e(this.chart,n[d]));return t.filter&&(o=o.filter((m,h,p)=>t.filter(m,h,p,s))),t.itemSort&&(o=o.sort((m,h)=>t.itemSort(m,h,s))),Ca(o,m=>{const h=CF(t.callbacks,m);r.push(Bs(h,"labelColor",this,m)),i.push(Bs(h,"labelPointStyle",this,m)),l.push(Bs(h,"labelTextColor",this,m))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=l,this.dataPoints=o,o}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,l=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const o=zg[s.position].call(this,r,this._eventPosition);l=this._createItems(s),this.title=this.getTitle(l,s),this.beforeBody=this.getBeforeBody(l,s),this.body=this.getBody(l,s),this.afterBody=this.getAfterBody(l,s),this.footer=this.getFooter(l,s);const d=this._size=vF(this,s),c=Object.assign({},o,d),m=wF(this.chart,s,c),h=NF(s,c,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:h.x,y:h.y,width:d.width,height:d.height,caretX:o.x,caretY:o.y}}this._tooltipItems=l,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:l,cornerRadius:o}=s,{topLeft:d,topRight:c,bottomLeft:m,bottomRight:h}=Jm(o),{x:p,y:b}=t,{width:w,height:x}=n;let v,j,C,S,_,A;return i==="center"?(_=b+x/2,r==="left"?(v=p,j=v-l,S=_+l,A=_-l):(v=p+w,j=v+l,S=_-l,A=_+l),C=v):(r==="left"?j=p+Math.max(d,m)+l:r==="right"?j=p+w-Math.max(c,h)-l:j=this.caretX,i==="top"?(S=b,_=S-l,v=j-l,C=j+l):(S=b+x,_=S+l,v=j+l,C=j-l),A=S),{x1:v,x2:j,x3:C,y1:S,y2:_,y3:A}}drawTitle(t,n,s){const r=this.title,i=r.length;let l,o,d;if(i){const c=ef(s.rtl,this.x,this.width);for(t.x=ob(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",l=vs(s.titleFont),o=s.titleSpacing,n.fillStyle=s.titleColor,n.font=l.string,d=0;d<i;++d)n.fillText(r[d],c.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+o,d+1===i&&(t.y+=s.titleMarginBottom-o)}}_drawColorBox(t,n,s,r,i){const l=this.labelColors[s],o=this.labelPointStyles[s],{boxHeight:d,boxWidth:c}=i,m=vs(i.bodyFont),h=ob(this,"left",i),p=r.x(h),b=d<m.lineHeight?(m.lineHeight-d)/2:0,w=n.y+b;if(i.usePointStyle){const x={radius:Math.min(c,d)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},v=r.leftForLtr(p,c)+c/2,j=w+d/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,PE(t,x,v,j),t.strokeStyle=l.borderColor,t.fillStyle=l.backgroundColor,PE(t,x,v,j)}else{t.lineWidth=la(l.borderWidth)?Math.max(...Object.values(l.borderWidth)):l.borderWidth||1,t.strokeStyle=l.borderColor,t.setLineDash(l.borderDash||[]),t.lineDashOffset=l.borderDashOffset||0;const x=r.leftForLtr(p,c),v=r.leftForLtr(r.xPlus(p,1),c-2),j=Jm(l.borderRadius);Object.values(j).some(C=>C!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Xv(t,{x,y:w,w:c,h:d,radius:j}),t.fill(),t.stroke(),t.fillStyle=l.backgroundColor,t.beginPath(),Xv(t,{x:v,y:w+1,w:c-2,h:d-2,radius:j}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(x,w,c,d),t.strokeRect(x,w,c,d),t.fillStyle=l.backgroundColor,t.fillRect(v,w+1,c-2,d-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:l,displayColors:o,boxHeight:d,boxWidth:c,boxPadding:m}=s,h=vs(s.bodyFont);let p=h.lineHeight,b=0;const w=ef(s.rtl,this.x,this.width),x=function(D){n.fillText(D,w.x(t.x+b),t.y+p/2),t.y+=p+i},v=w.textAlign(l);let j,C,S,_,A,T,E;for(n.textAlign=l,n.textBaseline="middle",n.font=h.string,t.x=ob(this,v,s),n.fillStyle=s.bodyColor,Ca(this.beforeBody,x),b=o&&v!=="right"?l==="center"?c/2+m:c+2+m:0,_=0,T=r.length;_<T;++_){for(j=r[_],C=this.labelTextColors[_],n.fillStyle=C,Ca(j.before,x),S=j.lines,o&&S.length&&(this._drawColorBox(n,t,_,w,s),p=Math.max(h.lineHeight,d)),A=0,E=S.length;A<E;++A)x(S[A]),p=h.lineHeight;Ca(j.after,x)}b=0,p=h.lineHeight,Ca(this.afterBody,x),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let l,o;if(i){const d=ef(s.rtl,this.x,this.width);for(t.x=ob(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=d.textAlign(s.footerAlign),n.textBaseline="middle",l=vs(s.footerFont),n.fillStyle=s.footerColor,n.font=l.string,o=0;o<i;++o)n.fillText(r[o],d.x(t.x),t.y+l.lineHeight/2),t.y+=l.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:l}=this,{x:o,y:d}=t,{width:c,height:m}=s,{topLeft:h,topRight:p,bottomLeft:b,bottomRight:w}=Jm(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(o+h,d),l==="top"&&this.drawCaret(t,n,s,r),n.lineTo(o+c-p,d),n.quadraticCurveTo(o+c,d,o+c,d+p),l==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(o+c,d+m-w),n.quadraticCurveTo(o+c,d+m,o+c-w,d+m),l==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(o+b,d+m),n.quadraticCurveTo(o,d+m,o,d+m-b),l==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(o,d+h),n.quadraticCurveTo(o,d,o+h,d),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const l=zg[t.position].call(this,this._active,this._eventPosition);if(!l)return;const o=this._size=vF(this,t),d=Object.assign({},l,this._size),c=wF(n,t,d),m=NF(t,d,c,n);(r._to!==m.x||i._to!==m.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=l.x,this.caretY=l.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const l=ri(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),DQ(t,n.textDirection),i.y+=l.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),OQ(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:o,index:d})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[d],index:d}}),i=!Yv(s,r),l=this._positionChanged(r,n);(i||l)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],l=this._getActiveElements(t,i,n,s),o=this._positionChanged(l,t),d=n||!Yv(l,i)||o;return d&&(this._active=l,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),d}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const l=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&l.reverse(),l}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,l=zg[i.position].call(this,t,n);return l!==!1&&(s!==l.x||r!==l.y)}}var g7e={id:"tooltip",_element:SF,positioners:zg,afterInit(e,t,n){n&&(e.tooltip=new SF({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:JQ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const p7e=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function x7e(e,t,n,s){const r=e.indexOf(t);if(r===-1)return p7e(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const y7e=(e,t)=>e===null?null:bs(Math.round(e),0,t);function _F(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class b7e extends Gf{static id="category";static defaults={ticks:{callback:_F}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ya(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:x7e(s,t,Kt(n,t),this._addedLabels),y7e(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let l=t;l<=n;l++)r.push({value:l});return r}getLabelForValue(t){return _F.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function v7e(e,t){const n=[],{bounds:r,step:i,min:l,max:o,precision:d,count:c,maxTicks:m,maxDigits:h,includeBounds:p}=e,b=i||1,w=m-1,{min:x,max:v}=t,j=!ya(l),C=!ya(o),S=!ya(c),_=(v-x)/(h+1);let A=AU((v-x)/w/b)*b,T,E,D,z;if(A<1e-14&&!j&&!C)return[{value:x},{value:v}];z=Math.ceil(v/A)-Math.floor(x/A),z>w&&(A=AU(z*A/w/b)*b),ya(d)||(T=Math.pow(10,d),A=Math.ceil(A*T)/T),r==="ticks"?(E=Math.floor(x/A)*A,D=Math.ceil(v/A)*A):(E=x,D=v),j&&C&&i&&L$e((o-l)/i,A/1e3)?(z=Math.round(Math.min((o-l)/A,m)),A=(o-l)/z,E=l,D=o):S?(E=j?l:E,D=C?o:D,z=c-1,A=(D-E)/z):(z=(D-E)/A,Yg(z,Math.round(z),A/1e3)?z=Math.round(z):z=Math.ceil(z));const K=Math.max(TU(A),TU(E));T=Math.pow(10,ya(d)?K:d),E=Math.round(E*T)/T,D=Math.round(D*T)/T;let B=0;for(j&&(p&&E!==l?(n.push({value:l}),E<l&&B++,Yg(Math.round((E+B*A)*T)/T,l,AF(l,_,e))&&B++):E<l&&B++);B<z;++B){const O=Math.round((E+B*A)*T)/T;if(C&&O>o)break;n.push({value:O})}return C&&p&&D!==o?n.length&&Yg(n[n.length-1].value,o,AF(o,_,e))?n[n.length-1].value=o:n.push({value:o}):(!C||D===o)&&n.push({value:D}),n}function AF(e,t,{horizontal:n,minRotation:s}){const r=no(s),i=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}class w7e extends Gf{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ya(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const l=d=>r=n?r:d,o=d=>i=s?i:d;if(t){const d=cl(r),c=cl(i);d<0&&c<0?o(0):d>0&&c>0&&l(0)}if(r===i){let d=i===0?1:Math.abs(i*.05);o(i+d),t||l(r-d)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,l=v7e(r,i);return t.bounds==="ticks"&&P$e(l,this,"value"),t.reverse?(l.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),l}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return pP(t,this.chart.options.locale,this.options.ticks.format)}}class N7e extends w7e{static id="linear";static defaults={ticks:{callback:SQ.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=si(t)?t:0,this.max=si(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=no(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Sj={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gs=Object.keys(Sj);function TF(e,t){return e-t}function EF(e,t){if(ya(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let l=t;return typeof s=="function"&&(l=s(l)),si(l)||(l=typeof s=="string"?n.parse(l,s):n.parse(l)),l===null?null:(r&&(l=r==="week"&&(kp(i)||i===!0)?n.startOf(l,"isoWeek",i):n.startOf(l,r)),+l)}function kF(e,t,n,s){const r=Gs.length;for(let i=Gs.indexOf(e);i<r-1;++i){const l=Sj[Gs[i]],o=l.steps?l.steps:Number.MAX_SAFE_INTEGER;if(l.common&&Math.ceil((n-t)/(o*l.size))<=s)return Gs[i]}return Gs[r-1]}function j7e(e,t,n,s,r){for(let i=Gs.length-1;i>=Gs.indexOf(n);i--){const l=Gs[i];if(Sj[l].common&&e._adapter.diff(r,s,l)>=t-1)return l}return Gs[n?Gs.indexOf(n):0]}function C7e(e){for(let t=Gs.indexOf(e)+1,n=Gs.length;t<n;++t)if(Sj[Gs[t]].common)return Gs[t]}function LF(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=fP(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function S7e(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),l=t[t.length-1].value;let o,d;for(o=i;o<=l;o=+r.add(o,1,s))d=n[o],d>=0&&(t[d].major=!0);return t}function PF(e,t,n){const s=[],r={},i=t.length;let l,o;for(l=0;l<i;++l)o=t[l],r[o]=l,s.push({value:o,major:!1});return i===0||!n?s:S7e(e,s,r,n)}class DF extends Gf{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new wRe._date(t.adapters.date);r.init(n),qg(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:EF(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:l,maxDefined:o}=this.getUserBounds();function d(c){!l&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!o&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!l||!o)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),r=si(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=si(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,l=this.max,o=$$e(r,i,l);return this._unit=n.unit||(s.autoSkip?kF(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):j7e(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:C7e(this._unit),this.initOffsets(r),t.reverse&&o.reverse(),PF(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const l=t.length<3?.5:.25;n=bs(n,0,l),s=bs(s,0,l),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,l=i.unit||kF(i.minUnit,n,s,this._getLabelCapacity(n)),o=Kt(r.ticks.stepSize,1),d=l==="week"?i.isoWeekday:!1,c=kp(d)||d===!0,m={};let h=n,p,b;if(c&&(h=+t.startOf(h,"isoWeek",d)),h=+t.startOf(h,c?"day":l),t.diff(s,n,l)>1e5*o)throw new Error(n+" and "+s+" are too far apart with stepSize of "+o+" "+l);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(p=h,b=0;p<s;p=+t.add(p,o,l),b++)LF(m,p,w);return(p===s||r.bounds==="ticks"||b===1)&&LF(m,p,w),Object.keys(m).sort(TF).map(x=>+x)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,l=n||r[i];return this._adapter.format(t,l)}_tickFormatFunction(t,n,s,r){const i=this.options,l=i.ticks.callback;if(l)return Ua(l,[t,n,s],this);const o=i.time.displayFormats,d=this._unit,c=this._majorUnit,m=d&&o[d],h=c&&o[c],p=s[n],b=c&&h&&p&&p.major;return this._adapter.format(t,r||(b?h:m))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=no(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),l=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:s*i+o*l,h:s*l+o*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,PF(this,[t],this._majorUnit),r),l=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/l.w:this.height/l.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(EF(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return NQ(t.sort(TF))}}function cb(e,t,n){let s=0,r=e.length-1,i,l,o,d;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=Bd(e,"pos",t)),{pos:i,time:o}=e[s],{pos:l,time:d}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=Bd(e,"time",t)),{time:i,pos:o}=e[s],{time:l,pos:d}=e[r]);const c=l-i;return c?o+(d-o)*(t-i)/c:o}class K8e extends DF{static id="timeseries";static defaults=DF.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=cb(n,this.min),this._tableRange=cb(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let l,o,d,c,m;for(l=0,o=t.length;l<o;++l)c=t[l],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(l=0,o=r.length;l<o;++l)m=r[l+1],d=r[l-1],c=r[l],Math.round((m+d)/2)!==c&&i.push({time:c,pos:l/(o-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(cb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return cb(this._table,s*this._tableRange+this._minPos,!0)}}const eX="label";function OF(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function _7e(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function tX(e,t){e.labels=t}function aX(e,t,n=eX){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(l=>l[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function A7e(e,t=eX){const n={labels:[],datasets:[]};return tX(n,e.labels),aX(n,e.datasets,t),n}function T7e(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:l,data:o,options:d,plugins:c=[],fallbackContent:m,updateMode:h,...p}=e,b=g.useRef(null),w=g.useRef(null),x=()=>{b.current&&(w.current=new Cj(b.current,{type:l,data:A7e(o,i),options:d&&{...d},plugins:c}),OF(t,w.current))},v=()=>{OF(t,null),w.current&&(w.current.destroy(),w.current=null)};return g.useEffect(()=>{!r&&w.current&&d&&_7e(w.current,d)},[r,d]),g.useEffect(()=>{!r&&w.current&&tX(w.current.config.data,o.labels)},[r,o.labels]),g.useEffect(()=>{!r&&w.current&&o.datasets&&aX(w.current.config.data,o.datasets,i)},[r,o.datasets]),g.useEffect(()=>{w.current&&(r?(v(),setTimeout(x)):w.current.update(h))},[r,d,o.labels,o.datasets,h]),g.useEffect(()=>{w.current&&(v(),setTimeout(x))},[l]),g.useEffect(()=>(x(),()=>v()),[]),a.jsx("canvas",{ref:b,role:"img",height:n,width:s,...p,children:m})}const E7e=g.forwardRef(T7e);function _P(e,t){return Cj.register(t),g.forwardRef((n,s)=>a.jsx(E7e,{...n,ref:s,type:e}))}const k7e=_P("line",bRe),L7e=_P("bar",pRe),P7e=_P("pie",vRe);Cj.register(b7e,N7e,Jze,Wze,qze,Ize,l7e,g7e,r7e);const nX=e=>a.jsx(ba,{...e}),D7e=e=>a.jsx(wu,{...e}),O7e=e=>a.jsx(mw,{...e}),M7e=e=>a.jsx(en,{...e}),sX=e=>a.jsx(da,{...e}),I7e=e=>a.jsx(qle,{...e}),$7e=[{icon:nX,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:sX,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:O7e,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:D7e,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],R7e=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],z7e={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},U7e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},F7e={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},B7e={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},H7e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},G7e=()=>{const e=[{icon:nX,label:"New Contact"},{icon:sX,label:"New Campaign"},{icon:M7e,label:"New Task"},{icon:I7e,label:"New Leads"}];return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,n)=>a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:a.jsx(t.icon,{size:20})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},n))})]})},V7e=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]}),W7e=({name:e,company:t,assignedBy:n,source:s,date:r})=>{const{text:i,bg:l}=H7e(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-xs text-gray-500",children:t}),n&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",a.jsx("span",{className:"font-semibold text-gray-700",children:n})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:r}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${l} px-2 py-0.5 rounded-full`,children:s})]})]})})},q7e=({title:e,children:t})=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),Y7e=({title:e,chartData:t,chartOptions:n})=>{const[s,r]=g.useState("bar"),i=s==="pie"?F7e:t,l=s==="pie"?B7e:n,o=s==="line"?k7e:s==="pie"?P7e:L7e,d=s==="pie"?250:300;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsxs("select",{value:s,onChange:c=>r(c.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[a.jsx("option",{value:"bar",children:"Bar"}),a.jsx("option",{value:"line",children:"Line"}),a.jsx("option",{value:"pie",children:"Pie"})]})]}),a.jsx("div",{className:"w-full flex justify-center",style:{height:d},children:a.jsx(o,{data:i,options:l})})]})};function K7e(){const{user:e}=Xt();return g.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),a.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:a.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),a.jsx(G7e,{}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:$7e.map(t=>a.jsx(V7e,{...t},t.title))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx(Y7e,{title:"Leads & Conversions",chartData:z7e,chartOptions:U7e}),a.jsx(q7e,{title:"Latest Leads",children:R7e.map((t,n)=>a.jsx(W7e,{...t},n))})]})]})})}function Q7e(){g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,s]=g.useState(""),[r,i]=g.useState("All Statuses"),l=g.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),o=h=>t(h),d=()=>t(null),c=g.useMemo(()=>[{title:"Total Accounts",value:l.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:ba},{title:"Customers",value:l.filter(h=>h.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:dl},{title:"Prospects",value:l.filter(h=>h.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Ga},{title:"Partners",value:l.filter(h=>h.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:Ut},{title:"Active",value:l.filter(h=>h.status==="CUSTOMER"||h.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:dl},{title:"Inactive",value:l.filter(h=>h.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:ul},{title:"Former",value:l.filter(h=>h.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:ul}],[l]);if(e)return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:d,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Nu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsx("div",{children:a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,a.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Website:"})," ",a.jsx("br",{}),a.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Industry:"})," ",a.jsx("br",{}),e.industry]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Territory:"})," ",a.jsx("br",{}),e.territory]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",a.jsx("br",{}),e.phone_number]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",a.jsx("br",{}),e.billing_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",a.jsx("br",{}),e.shipping_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),e.created_by," on ",e.created_date]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),e.last_updated]})]})]})]});const m=l.filter(h=>{const p=h.company.toLowerCase().includes(n.toLowerCase())||h.url.toLowerCase().includes(n.toLowerCase())||h.industry.toLowerCase().includes(n.toLowerCase())||h.territory.toLowerCase().includes(n.toLowerCase())||h.phone_number.toLowerCase().includes(n.toLowerCase()),b=r==="All Statuses"||r==="Active"&&(h.status==="CUSTOMER"||h.status==="PARTNER")||r==="Inactive"&&h.status==="INACTIVE"||r==="Former"&&h.status==="FORMER"||h.status.toLowerCase()===r.toLowerCase();return p&&b});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:c.map(h=>a.jsx(X7e,{...h},h.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:n,onChange:h=>s(h.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:h=>i(h.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Customer"}),a.jsx("option",{children:"Prospect"}),a.jsx("option",{children:"Partner"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Inactive"}),a.jsx("option",{children:"Former"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsxs("tbody",{children:[m.map((h,p)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>o(h),children:[a.jsx("td",{className:"py-3 px-4 break-words",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:h.company}),a.jsx("div",{className:"text-gray-500 text-xs break-words",children:h.url})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.status==="CUSTOMER"?"bg-green-100 text-green-700":h.status==="PROSPECT"?"bg-purple-100 text-purple-700":h.status==="PARTNER"?"bg-pink-100 text-pink-700":h.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:h.status})}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.industry}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.territory}),a.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:h.phone_number})]})]},p)),m.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const X7e=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]});function Z7e(){g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=g.useState(!1),[n,s]=g.useState(null),[r,i]=g.useState(!1),[l,o]=g.useState(""),[d,c]=g.useState("All Contacts"),[m,h]=g.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,b]=g.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),w=A=>{A.target.id==="modalBackdrop"&&t(!1)},x=A=>{s(A)},v=()=>{s(null)},j=()=>{i(!1),b({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},C=(A,T)=>{T.stopPropagation(),i(!0),b(A),t(!0)},S=A=>{const{name:T,value:E}=A.target;b(D=>({...D,[T]:E}))},_=A=>{if(A.preventDefault(),r)h(T=>T.map(E=>E.id===p.id?{...p}:E));else{const T={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};h(E=>[...E,T])}t(!1)};return n?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:v,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Nu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.account}),a.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:a.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[a.jsx(Rc,{}),"Export"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",a.jsx("br",{}),n.name]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.jsx("br",{}),n.email]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),n.createdBy," on ",n.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Title:"})," ",a.jsx("br",{}),n.title]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",a.jsx("br",{}),n.assigned]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",a.jsx("br",{}),n.workPhone]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account:"})," ",a.jsx("br",{}),n.account]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",a.jsx("br",{}),n.phone1]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),n.lastUpdated]})]}),a.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:n.notes?n.notes:"No additional notes were provided for this contact."})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts...",value:l,onChange:A=>o(A.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:d,onChange:A=>c(A.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Contacts"}),a.jsx("option",{children:"Option 1"}),a.jsx("option",{children:"Option 2"}),a.jsx("option",{children:"Option 3"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-xs text-gray-700",children:m.map((A,T)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>x(A),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:A.name}),a.jsx("div",{className:"text-xs text-gray-500",children:A.title})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(yx,{className:"text-gray-500"}),a.jsx("span",{children:A.account})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ha,{className:"text-gray-500"}),a.jsx("span",{children:A.email})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:A.phone1})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:A.phone2})]})]})}),a.jsx("td",{className:"py-3 px-4",children:A.department}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ut,{className:"text-gray-500"}),a.jsx("span",{children:A.assigned})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Nt,{className:"text-gray-500"}),a.jsx("span",{children:A.created})]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:E=>C(A,E),className:"text-blue-500 hover:text-blue-700",children:a.jsx(Qa,{})})})})]},T))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:A=>A.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),a.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),a.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",children:"Assign To"}),a.jsx("option",{value:"Smith",children:"Smith"}),a.jsx("option",{value:"Doe",children:"Doe"}),a.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),a.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const db={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Mn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),J7e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Mn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Mn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Mn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Mn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Mn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),eUe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Mn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Mn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Mn,{label:"Department",name:"department",value:e.department}),a.jsx(Mn,{label:"Title",name:"title",value:e.title}),a.jsx(Mn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Mn,{label:"Email",name:"email",value:e.email}),a.jsx(Mn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Mn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),tUe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Mn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Mn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Mn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Mn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Mn,{label:"Description",name:"description",value:e.description}),a.jsx(Mn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function rX({isOpen:e,onClose:t}){const[n,s]=g.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(n){case 1:return a.jsx(J7e,{data:db});case 2:return a.jsx(eUe,{data:db});case 3:return a.jsx(tUe,{data:db});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:db.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(yj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(c=>a.jsx("button",{onClick:()=>s(c.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===c.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:c.name},c.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const aUe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function iX({lead:e=aUe,onBack:t}){const[n,s]=g.useState(!1);return e?a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Nu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),a.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),a.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:a.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsx("p",{children:e.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:e.company})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:e.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:e.department})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:e.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:e.territory})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assign To:"}),a.jsx("p",{children:e.assignedTo})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:e.createdBy})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:e.workPhone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:e.phone1})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:e.phone2})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:e.source})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",a.jsx("br",{}),e.addressLine2," ",a.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),a.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),a.jsx(rX,{isOpen:n,onClose:()=>s(!1)})]}):null}const nUe=Lf.all(),iA=nUe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function sUe(){const[e,t]=g.useState(null),[n,s]=g.useState(!1),[r,i]=g.useState(null),[l,o]=g.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[d,c]=g.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[m,h]=g.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=E=>t(E),b=()=>t(null),[w,x]=g.useState(""),[v,j]=g.useState("All Accounts"),C=()=>{s(!1),i(null),h({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=E=>{i(E),s(!0),h({work_ccode:E.work_ccode||"+63",work_phone:E.workPhone||"",m1_ccode:E.m1_ccode||"+63",mobile_phone_1:E.phone1||"",m2_ccode:E.m2_ccode||"+63",mobile_phone_2:E.phone2||""})},_=E=>{window.confirm("Are you sure you want to delete this lead?")&&c(d.filter(D=>D.id!==E))},A=E=>{const{name:D,value:z}=E.target;h(K=>({...K,[D]:z}))},T=E=>{E.preventDefault();const D=new FormData(E.target),z=Object.fromEntries(D.entries());z.name=`${z.firstName} ${z.lastName}`,z.assignedTo=l.find(K=>K.id.toString()===z.assignedTo)?.first_name+" "+l.find(K=>K.id.toString()===z.assignedTo)?.last_name,z.work_ccode=m.work_ccode,z.workPhone=m.work_phone,z.m1_ccode=m.m1_ccode,z.phone1=m.mobile_phone_1,z.m2_ccode=m.m2_ccode,z.phone2=m.mobile_phone_2,c(r?d.map(K=>K.id===r.id?{...K,...z}:K):[...d,{...z,id:d.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),C()};return e?a.jsx(iX,{lead:e,onBack:b}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ga,{className:"mr-2 text-blue-600"})," Leads"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[a.jsx(Rc,{})," Download"]}),a.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Leads...",value:w,onChange:E=>x(E.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:v,onChange:E=>j(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Leads"}),a.jsx("option",{children:"New"}),a.jsx("option",{children:"Contacted"}),a.jsx("option",{children:"Qualified"}),a.jsx("option",{children:"Converted"}),a.jsx("option",{children:"Lost"})]})})]}),a.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[a.jsx("div",{children:"Name"}),a.jsx("div",{children:"Account"}),a.jsx("div",{children:"Title"}),a.jsx("div",{children:"Department"}),a.jsx("div",{children:"Email"}),a.jsx("div",{children:"Work Phone"}),a.jsx("div",{children:"Assigned To"}),a.jsx("div",{children:"Updated"}),a.jsx("div",{className:"text-center",children:"Actions"})]}),d.map(E=>a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(E),children:[a.jsx("div",{className:"truncate",children:E.name}),a.jsx("div",{className:"truncate",children:E.company}),a.jsx("div",{className:"truncate",children:E.title}),a.jsx("div",{className:"truncate",children:E.department}),a.jsx("div",{className:"truncate",children:E.email}),a.jsxs("div",{className:"truncate",children:[E.work_ccode," ",E.workPhone]}),a.jsx("div",{className:"truncate",children:E.assignedTo}),a.jsx("div",{className:"truncate",children:E.lastUpdated}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:D=>{D.stopPropagation(),S(E)},children:a.jsx(Qa,{})}),a.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:D=>{D.stopPropagation(),_(E.id)},children:a.jsx(Ot,{})})]})]},E.id))]}),n&&a.jsx("div",{id:"modalBackdrop",onClick:C,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:C,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Bt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:T,children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),a.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),a.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),a.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),a.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),a.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),a.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"work_ccode",value:m.work_ccode,onChange:A,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:iA.map(E=>a.jsx("option",{value:E.code,children:E.code},E.code))}),a.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:m.work_phone,onChange:A,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m1_ccode",value:m.m1_ccode,onChange:A,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:iA.map(E=>a.jsx("option",{value:E.code,children:E.code},E.code))}),a.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:m.mobile_phone_1,onChange:A,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m2_ccode",value:m.m2_ccode,onChange:A,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:iA.map(E=>a.jsx("option",{value:E.code,children:E.code},E.code))}),a.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:m.mobile_phone_2,onChange:A,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),a.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",defaultValue:l.find(E=>`${E.first_name} ${E.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",disabled:!0,children:"Select user"}),l.map(E=>a.jsxs("option",{value:E.id,children:[E.first_name," ",E.last_name]},E.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),a.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),a.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),a.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const MF=["To Do","In Progress","Review","Completed"],xg=10,rUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},IF=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},iUe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,c=l||o||i||r,m=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:c,related_type:m}},lUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,c=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let x="Lead",v="",j="",C="",S="Lead",_="",A="",T="";const E=o(),D=p(),z=l(),K=h();if(E){x="Account",S="Account",_=D,v=String(E);const B=d(),O=c(),L=b(),H=w();B?(j="Contact",A="Contact",T=L,C=String(B)):O&&(A="Deal",j="Deal",T=H,C=String(O))}else z?(S="Lead",_=K,x="Lead",v=String(z)):e.related_type==="Account"&&(x="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:A,relatedTo2Text:T,subject:e.title,relatedType1:x,relatedTo1:v,relatedType2:j,relatedTo2:C}};function oUe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[n,s]=g.useState("board"),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,A]=g.useState([]),[T,E]=g.useState(1),[D,z]=g.useState(null),[K,B]=g.useState(!1),O=bt(),L=pa(),[H,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const F=L.state?.openTaskModal,ie=L.state?.initialTaskData;F&&(i(!0),ie&&ae(he=>({...he,...ie})),O(L.pathname,{replace:!0,state:{}}))},[L,O]);const W=async()=>{try{const F=await re.get("/users/all");A(Array.isArray(F.data)?F.data:[])}catch(F){console.error("Failed to fetch users:",F),Y.error("Failed to fetch users.")}},q=async()=>{try{b(!0);const F=await re.get("/tasks/all"),he=(Array.isArray(F.data)?F.data:[]).map(lUe);he.sort((Le,xe)=>{const Ve=Le.createdAt?new Date(Le.createdAt):0;return(xe.createdAt?new Date(xe.createdAt):0)-Ve}),console.log("Fetched Tasks:",he),h(he),n==="list"&&E(1)}catch(F){console.error("Failed to load tasks:",F),Y.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(W(),q())},[t,e]);const le=()=>{o(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Q=(F=null,ie=!1)=>{o(F),c(ie),F?ae({id:F.id,subject:F.title||"",description:F.description||"",priority:F.priority||"Normal",status:F.status||"Not started",dueDate:rUe(F.dueDate),assignedTo:F.assignedToId?String(F.assignedToId):"",notes:F.notes||"",relatedType1Text:F.relatedType1Text||"",relatedTo1Text:F.relatedTo1Text||"",relatedType2Text:F.relatedType2Text||"",relatedTo2Text:F.relatedTo2Text||"",relatedType1:F.relatedType1||"",relatedTo1:F.relatedTo1||"",relatedType2:F.relatedType2||"",relatedTo2:F.relatedTo2||""}):le(),i(!0)},te=()=>{i(!1),o(null),c(!1),le()},V=async F=>{const ie=iUe(F);try{l&&!d?(await re.put(`/tasks/${l.id}`,ie),Y.success("Task updated successfully.")):(await re.post("/tasks/create",ie),Y.success("Task created successfully.")),i(!1),await q()}catch(he){console.error("Failed to save task:",he);const Le=he.response?.data?.detail||"Failed to save task.";Y.error(Le)}},ee=F=>{F&&z({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:F.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id}})},me=async()=>{if(!D?.action){z(null);return}const{action:F}=D;B(!0);try{F.type==="delete"&&(await re.delete(`/tasks/${F.targetId}`),Y.success("Task deleted successfully."),await q())}catch(ie){console.error("Task action failed:",ie),Y.error("Failed to delete task.")}finally{B(!1),z(null)}},we=()=>{K||z(null)},ve=g.useMemo(()=>{const F=w.trim().toLowerCase();return[...m].sort((he,Le)=>{const xe=he.createdAt?new Date(he.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-xe}).filter(he=>{const Le=F===""||he.title?.toLowerCase().includes(F)||he.description?.toLowerCase().includes(F)||he.assignedToName?.toLowerCase().includes(F)||he.createdBy?.toLowerCase().includes(F),xe=v==="Filter by Status"||he.status===v,Ve=C==="Filter by Priority"||he.priority===C;return Le&&xe&&Ve})},[m,w,v,C]);g.useEffect(()=>{E(1)},[w,v,C,n]),g.useEffect(()=>{if(n==="list"){const F=ve.length===0?1:Math.ceil(ve.length/xg);T>F&&E(F)}},[ve.length,T,n]);const Ae=g.useMemo(()=>{if(n==="board")return ve;const F=(T-1)*xg;return ve.slice(F,F+xg)},[ve,T,n]),be=g.useMemo(()=>{const F=new Date;return[{title:"To Do",value:m.filter(ie=>ie.status==="Not started").length,icon:ds,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ie=>ie.status==="In progress").length,icon:Zr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ie=>ie.status==="Completed").length,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ie=>ie.dueDate&&new Date(ie.dueDate)<F&&ie.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ie=>ie.priority==="High").length,icon:So,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Ie=F=>F.dueDate&&new Date(F.dueDate)<new Date&&F.status!=="Completed",G=F=>{switch(F.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ce=F=>{switch(F){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ce=F=>{switch(F){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(It,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zr,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>Q(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(na,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(F=>a.jsx(cUe,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:F=>x(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:v,onChange:F=>j(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),MF.map(F=>a.jsx("option",{children:F},F))]}),a.jsxs("select",{value:C,onChange:F=>S(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ve.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ve.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:MF.map(F=>{const ie=Ae.filter(he=>he.status===F);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:F}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ie.length})]}),a.jsx("div",{className:`space-y-3 ${ie.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ie.length>0?ie.map(he=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${G(he)}`,onClick:()=>Q(he,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:he.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",he.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",he.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Ie(he)?"text-red-600":"text-gray-600",children:he.dateAssigned?IF(he.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),Q(he)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(Ma,{})}),a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),ee(he)},className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})]},he.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},F)})}),!p&&!t&&ve.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Ae.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",F),Q(F,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:F.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(F.status||"To Do")}`,children:F.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(F.priority||"Low")}`,children:F.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:F.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ie(F)?"text-red-600 font-medium":""}`,children:F.dateAssigned?IF(F.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ie=>ie.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>Q(F),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ee(F),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(Ot,{})," Delete"]})]})})]},F.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Vt,{className:"mt-6",totalItems:ve.length,pageSize:xg,currentPage:ve.length===0?0:T,onPrev:()=>E(F=>Math.max(F-1,1)),onNext:()=>E(F=>Math.min(F+1,Math.max(1,Math.ceil(ve.length/xg)||1))),label:"tasks"}),a.jsx(Gx,{isOpen:r,onClose:te,onSave:V,onEdit:()=>c(!1),setFormData:ae,formData:H,isEditing:!d&&!!l,viewMode:d,users:_,currentUser:e,onDelete:ee}),D&&a.jsx(dUe,{open:!0,title:D.title,message:D.message,confirmLabel:D.confirmLabel,cancelLabel:D.cancelLabel,variant:D.variant,onConfirm:me,onCancel:we,loading:K})]})}function cUe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function dUe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function uUe(){g.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=g.useState(!1),[n,s]=g.useState(!1),[r,i]=g.useState(null),[l,o]=g.useState(""),[d,c]=g.useState("All Statuses"),[m,h]=g.useState({show:!1,action:null,campaign:null}),[p,b]=g.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[w,x]=g.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),v=p.filter(B=>{const O=d==="All Statuses"||B.status===d,L=B.name.toLowerCase().includes(l.toLowerCase())||B.subject.toLowerCase().includes(l.toLowerCase());return O&&L}),j=()=>{s(!1),x({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},C=(B,O)=>{O.stopPropagation(),s(!0),x(B),t(!0)},S=(B,O)=>{O.stopPropagation(),h({show:!0,action:"delete",campaign:B})},_=B=>{B.preventDefault(),h({show:!0,action:n?"edit":"add",campaign:{...w}})},A=()=>{if(m.action==="add"){const B={...m.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};b(O=>[...O,B]),t(!1)}else m.action==="edit"?(b(B=>B.map(O=>O.id===m.campaign.id?{...m.campaign}:O)),t(!1)):m.action==="delete"&&b(B=>B.filter(O=>O.id!==m.campaign.id));h({show:!1,action:null,campaign:null})},T=()=>{h({show:!1,action:null,campaign:null})},E=B=>i(B),D=()=>i(null),z=B=>{const{name:O,value:L}=B.target;x(H=>({...H,[O]:L}))},K=B=>{B.target.id==="modalBackdrop"&&t(!1)};return r?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:D,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[a.jsx(Nu,{className:"mr-1 w-5 h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),a.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Subject:"})," ",a.jsx("br",{}),r.subject]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),r.createdBy]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created On:"})," ",a.jsx("br",{}),r.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",a.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),a.jsxs("p",{className:"sm:col-span-2",children:[a.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",a.jsx("br",{}),r.content]}),r.status==="Scheduled"&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",a.jsx("br",{}),r.recipients]})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ha,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),a.jsx("button",{onClick:j,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:l,onChange:B=>o(B.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:d,onChange:B=>c(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Draft"}),a.jsx("option",{children:"Scheduled"}),a.jsx("option",{children:"Sent"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),a.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Recipients"}),a.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-sm text-gray-700",children:v.map((B,O)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>E(B),children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:B.name}),a.jsx("td",{className:"py-3 px-4",children:B.subject}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${B.status==="Scheduled"?"bg-yellow-100 text-yellow-700":B.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:B.status})}),a.jsx("td",{className:"py-3 px-4",children:B.recipients?`${B.recipients} emails`:""}),a.jsx("td",{className:"py-3 px-4",children:B.scheduleDate?new Date(B.scheduleDate).toLocaleString():""}),a.jsx("td",{className:"py-3 px-4 text-center",onClick:L=>L.stopPropagation(),children:a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:L=>C(B,L),className:"text-blue-500 hover:text-blue-700",children:a.jsx(Qa,{})}),a.jsx("button",{onClick:L=>S(B,L),className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})})]},O))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:K,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:B=>B.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Bt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:n?"Edit Campaign":"Add New Campaign"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:w.name,onChange:z,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:w.subject,onChange:z,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:w.status,onChange:z,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Scheduled",children:"Scheduled"}),a.jsx("option",{value:"Sent",children:"Sent"})]})]}),w.status==="Scheduled"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",name:"scheduleDate",value:w.scheduleDate,onChange:z,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"recipients",value:w.recipients,onChange:z,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"content",rows:4,value:w.content,onChange:z,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),m.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Bt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:m.action==="delete"?"Confirm Delete":m.action==="edit"?"Confirm Edit":"Confirm Add"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:m.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the campaign"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]}):m.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]}):a.jsxs(a.Fragment,{children:["Add new campaign"," ",a.jsx("span",{className:"font-semibold",children:m.campaign.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:A,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const mUe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],$F={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function fUe(){g.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=g.useState(mUe),[n,s]=g.useState(!1),[r,i]=g.useState(null),[l,o]=g.useState(null),[d,c]=g.useState(""),[m,h]=g.useState("All Categories"),[p,b]=g.useState({name:"",category:"",subject:"",body:""}),[w,x]=g.useState({show:!1,action:null,template:null}),v=()=>{o(null),i(null),s(!1)},j=O=>{b({...p,[O.target.name]:O.target.value})},C=()=>{x({show:!0,action:"add",template:{...p}})},S=O=>{i(O),b({name:O.name,category:O.category,subject:O.subject,body:O.body})},_=()=>{x({show:!0,action:"edit",template:{...p,id:r.id}})},A=O=>{x({show:!0,action:"delete",template:O})},T=O=>{wx.success(`Template "${O.name}" selected for use!`),x({show:!1,action:null,template:null})},E=()=>{const O=w.template;if(w.action==="add"){const L={...O,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(H=>[L,...H]),s(!1),b({name:"",category:"",subject:"",body:""})}else w.action==="edit"?(t(L=>L.map(H=>H.id===O.id?{...O}:H).sort((H,ae)=>new Date(ae.date).getTime()-new Date(H.date).getTime())),i(null),b({name:"",category:"",subject:"",body:""}),o(null)):w.action==="delete"&&(t(L=>L.filter(H=>H.id!==O.id)),o(null));x({show:!1,action:null,template:null})},D=()=>{x({show:!1,action:null,template:null})},z=O=>o(O),K=e.filter(O=>O.name.toLowerCase().includes(d.toLowerCase())&&(m==="All Categories"||O.category===m)),B=(O,L=!1)=>a.jsxs("div",{className:"flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:O.name}),a.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${$F[O.category]||$F.default}`,children:O.category})]}),a.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:O.subject}),a.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${L?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:L?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:O.body})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!L&&a.jsxs("button",{onClick:H=>{H.stopPropagation(),T(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(da,{})," Use Template"]}),L&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:H=>{H.stopPropagation(),S(O)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{onClick:H=>{H.stopPropagation(),A(O)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[a.jsx(Ot,{})," Delete"]})]}),a.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",O.createdBy," | ",O.date]})]})]});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[a.jsx(vx,{position:"top-center",reverseOrder:!1}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(da,{className:"mr-2 text-black"})," Templates"]}),a.jsx("button",{onClick:()=>{s(!0),i(null),b({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by template name...",value:d,onChange:O=>c(O.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:m,onChange:O=>h(O.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Categories"}),a.jsx("option",{children:"Welcome"}),a.jsx("option",{children:"Follow-up"}),a.jsx("option",{children:"Newsletter"}),a.jsx("option",{children:"Promotional"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:K.map(O=>a.jsxs("div",{onClick:()=>z(O),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow",children:B(O)})]},O.id))}),(n||r)&&a.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:O=>O.stopPropagation(),children:[a.jsx("button",{onClick:v,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Bt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),a.jsxs("form",{onSubmit:O=>{O.preventDefault(),r?_():C()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:j,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"category",value:p.category,onChange:j,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"Welcome",children:"Welcome"}),a.jsx("option",{value:"Follow-up",children:"Follow-up"}),a.jsx("option",{value:"Newsletter",children:"Newsletter"}),a.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:j,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:j,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),l&&!r&&a.jsx("div",{onClick:v,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:B(l,!0)})]})}),w.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:D,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(Bt,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:w.action==="delete"?"Confirm Delete":w.action==="edit"?"Confirm Update":w.action==="add"?"Confirm Add":"Confirm Use"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:w.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the template"," ",a.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):w.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):w.action==="add"?a.jsxs(a.Fragment,{children:["Add new template"," ",a.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]}):a.jsxs(a.Fragment,{children:["Use template"," ",a.jsx("span",{className:"font-semibold",children:w.template.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}function hUe({toggleSidebar:e}){const[t,n]=g.useState(!1),s=g.useRef(null),r=pa(),i=bt(),{logout:l}=Zs(),{user:o,fetchUser:d}=Xt(),c={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};g.useEffect(()=>{d()},[]),g.useEffect(()=>{const h=()=>{d()};return window.addEventListener("userProfileUpdated",h),()=>{window.removeEventListener("userProfileUpdated",h)}},[d]);const m=c[r.pathname]||"Group Manager Panel";return g.useEffect(()=>{function h(p){s.current&&!s.current.contains(p.target)&&n(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:m})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(Gp,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:o?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[o?.first_name," ",o?.middle_name," ",o?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{i("/group-manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:l,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function gUe(){const[e,t]=g.useState(!0),[n,s]=g.useState(!1),[r,i]=g.useState(!1),[l,o]=g.useState(!1),d=pa(),{user:c}=Xt();g.useEffect(()=>{c&&console.log("Fetched user:",c)},[c]),g.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),g.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const m="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",b=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(d.pathname);return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${l?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),c&&c.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:c.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(St,{to:"/group-manager/dashboard",className:({isActive:w})=>w?m:h,children:[a.jsx(Vp,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-lg"}),"Sales"]}),a.jsx(wt,{className:`transition-transform ${e||b?"rotate-180":""}`})]}),(e||b)&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/group-manager/accounts",className:({isActive:w})=>w?m:h,children:[a.jsx(ba,{})," Accounts"]}),a.jsxs(St,{to:"/group-manager/contacts",className:({isActive:w})=>w?m:h,children:[a.jsx(Ut,{})," Contacts"]}),a.jsxs(St,{to:"/group-manager/leads",className:({isActive:w})=>w?m:h,children:[a.jsx(Ga,{})," Leads"]}),a.jsxs(St,{to:"/group-manager/deals",className:({isActive:w})=>w?m:h,children:[a.jsx(Yt,{})," Deals"]}),a.jsxs(St,{to:"/group-manager/quotes",className:({isActive:w})=>w?m:h,children:[a.jsx(da,{})," Quotes"]}),a.jsxs(St,{to:"/group-manager/targets",className:({isActive:w})=>w?m:h,children:[a.jsx(Nr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Ns,{className:"text-lg"}),"Activity"]}),a.jsx(wt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/group-manager/tasks",className:({isActive:w})=>w?m:h,children:[a.jsx(zt,{})," Tasks"]}),a.jsxs(St,{to:"/group-manager/meetings",className:({isActive:w})=>w?m:h,children:[a.jsx(Nt,{})," Meetings"]}),a.jsxs(St,{to:"/group-manager/calls",className:({isActive:w})=>w?m:h,children:[a.jsx(js,{})," Calls"]}),a.jsxs(St,{to:"/group-manager/audit",className:({isActive:w})=>w?m:h,children:[a.jsx(Ns,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(St,{to:"/group-manager/territory",className:({isActive:w})=>w?m:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(zc,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(XE,{className:"text-lg"}),"User Management"]}),a.jsx(wt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(St,{to:"/group-manager/users",className:({isActive:w})=>w?m:h,children:[a.jsx(ba,{})," Users"]}),a.jsxs(St,{to:"/group-manager/manage-account",className:({isActive:w})=>w?m:h,children:[a.jsx(Ut,{})," Manage Account"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(hUe,{toggleSidebar:()=>o(!l)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(_f,{})})]})]})}const pUe=e=>a.jsx($t,{...e}),xUe=e=>a.jsx(wu,{...e}),yUe=e=>a.jsx(ZE,{...e}),lX=e=>a.jsx(ds,{...e}),bUe=e=>a.jsx(mw,{...e}),vUe=e=>a.jsx(qE,{...e}),wUe=e=>a.jsx(Nt,{...e}),NUe=e=>a.jsx(jt,{...e}),jUe=e=>a.jsx(KE,{...e}),oX=e=>a.jsx(YE,{...e}),cX=e=>a.jsx(ba,{...e}),dX=e=>a.jsx(Ut,{...e}),CUe=e=>a.jsx(Ga,{...e}),SUe=e=>a.jsx(Yt,{...e}),_Ue=e=>a.jsx(da,{...e}),AUe=e=>a.jsx(Nr,{...e}),TUe=e=>a.jsx(en,{...e}),EUe=e=>a.jsx(Nt,{...e}),kUe=e=>a.jsx(js,{...e}),LUe=e=>a.jsx(zc,{...e}),PUe=e=>a.jsx(Ns,{...e}),uX=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,DUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},OUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},MUe=e=>{switch(e){case"call":return{Icon:NUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:jUe,color:"text-green-600",bgColor:"bg-green-100"};case"meeting":default:return{Icon:wUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},IUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},$Ue=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=bt(),[i,l]=g.useState(!1),o=g.useRef(null),d=[{icon:cX,label:"Account"},{icon:dX,label:"Contact"},{icon:CUe,label:"Leads"},{icon:SUe,label:"Deals"},{icon:_Ue,label:"Quotes"},{icon:AUe,label:"Target"},{icon:TUe,label:"Task"},{icon:EUe,label:"Meeting"},{icon:kUe,label:"Call"},{icon:PUe,label:"Audit"},{icon:LUe,label:"Territory"}];g.useEffect(()=>{const h=p=>{o.current&&!o.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const c=h=>{t(h.target.value),l(h.target.value.trim().length>0)},m=h=>{s&&s(h),l(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:o,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(pUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:c,onFocus:()=>e.trim().length>0&&l(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>m(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:d.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,onClick:()=>{switch(h.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-700 text-white text-xs font-medium rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition duration-200 pointer-events-none z-20 shadow-md",children:h.label})]},p))})})]})},RUe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=bt(),l=m=>{if(!m)return"Unknown";const h=new Date(m),b=new Date-h,w=Math.floor(b/6e4),x=Math.floor(b/36e5),v=Math.floor(b/864e5);return w<1?"Just now":w<60?`${w} min ago`:x<24?`${x} hour${x>1?"s":""} ago`:v<7?`${v} day${v>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},o=e||t||"Action",d=s||n||"System",c=l(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[o," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",d,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:c})]})},zUe=({logs:e,loading:t})=>{const n=bt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(oX,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(RUe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},UUe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:l})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),FUe=({revenueData:e,loading:t})=>{const n=bt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=g.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const v=new Date;v.getFullYear();const j=v.getMonth(),C=[],S=[];for(let _=0;_<=j;_++)C.push(s[_]),S.push(0);return{labels:C,revenues:S,maxRevenue:0}}const o={};let d=0,c=0;console.log("Processing deals:",e.length),e.forEach((v,j)=>{const C=v.close_date||v.closeDate||null,S=C&&C!==null&&C!=="",_=v.stage||"",A=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=v.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const E=T>0;if(A&&(c++,console.log(`Deal ${j+1} (CLOSED_WON):`,{id:v.id,name:v.name,stage:_,close_date:C,close_date_type:typeof C,amount:T,amount_type:typeof v.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(v)})),S&&A&&E)try{let D=new Date(C);if(isNaN(D.getTime())){const z=String(C).split("T")[0];D=new Date(z+"T00:00:00")}if(isNaN(D.getTime()))console.warn(` Invalid date for deal ${v.id}:`,C,"Type:",typeof C);else{const z=D.getFullYear(),K=D.getMonth()+1,B=`${z}-${String(K).padStart(2,"0")}`;o[B]||(o[B]=0),o[B]+=T,d++,console.log(` Added deal ${v.id} to month ${B}: ${T}, total: ${o[B]}`),console.log(`  - Close date: ${C} -> Parsed: ${D.toISOString()} -> Month: ${B} (Year: ${z}, Month: ${K})`)}}catch(D){console.error("Error parsing deal date:",C,D)}else A&&console.warn(` Deal ${v.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:C,amount:T,originalAmount:v.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:c,validDealsForGraph:d,monthlyRevenue:o});const m=Object.keys(o).map(v=>parseInt(v.split("-")[0])),h=m.length>0?[...new Set(m)].sort():[],p=new Date().getFullYear();new Date().getMonth();const b=[],w=[];for(let v=0;v<12;v++){const j=`${p}-${String(v+1).padStart(2,"0")}`;b.push(s[v]);const C=o[j]||0;w.push(C),C>0&&console.log(`Month ${s[v]} (${j}): ${C}`)}if(h.length>0){const v=Math.max(...h);if(v>p)for(let j=p+1;j<=v;j++)for(let C=0;C<12;C++){const S=`${j}-${String(C+1).padStart(2,"0")}`,_=o[S]||0;b.push(`${s[C]} ${j}`),w.push(_),_>0&&console.log(`Month ${s[C]} ${j} (${S}): ${_}`)}}const x=Math.max(...w,1);return console.log("Final chart data:",{labels:b,revenues:w,maxRevenue:x,hasData:w.some(v=>v>0)}),{labels:b,revenues:w,maxRevenue:x}},[e]),i=r.labels,l=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",l),console.log("Has any revenue > 0:",l.some(o=>o>0)),console.log("All revenue values:",l),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(oX,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&l&&l.length>0?a.jsx(ML,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}k`:o.toString()}],series:[{data:l,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},BUe=({pipelineData:e,loading:t})=>{const n=bt(),s=l=>{const o=(l||"").toUpperCase(),d={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(d[o])return d[o];const c=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],m=Math.abs(o.split("").reduce((h,p)=>h+p.charCodeAt(0),0))%c.length;return{name:l||"Unknown",color:c[m]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(h=>{const p=s(h);return{stage:p.name,value:0,deals:0,color:p.color}});const l={};e.forEach(m=>{const h=m.stage||"PROSPECTING";l[h]||(l[h]={deals:0,value:0}),l[h].deals+=1,l[h].value+=parseFloat(m.amount||0)});const o=Math.max(...Object.values(l).map(m=>m.value),1),d=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],c=[];return d.forEach(m=>{const h=s(m),p=l[m]||{deals:0,value:0};c.push({stage:h.name,value:p.value,deals:p.deals,color:h.color,percentage:o>0?p.value/o*100:0})}),c})();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>n("/group-manager/deals"),children:"See All"})]}),a.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(l=>a.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>n("/group-manager/deals"),children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[a.jsx("span",{className:"font-medium text-gray-700",children:l.stage}),a.jsx("span",{className:"font-semibold text-gray-800",children:uX(l.value)})]}),a.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:a.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${l.color}`,style:{width:`${Math.min(l.percentage,100)}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.deals," Deals"]})]},l.stage))})]})},lA=({title:e,items:t,children:n,onSeeAll:s})=>{const r=bt(),i=()=>{if(s)s();else{const l={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};l[e]&&r(l[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},HUe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const l=bt(),{text:o,bg:d}=OUe(s||"Website"),c=b=>{if(!b)return"Unknown";const w=new Date(b),v=new Date-w,j=Math.floor(v/6e4),C=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<60?`${j} min ago`:C<24?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?w.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):w.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},m=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=c(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:m}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${o} ${d} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},GUe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:l})=>{const o=bt(),c={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:m,bg:h}=DUe(c),p=parseFloat(t||0),b=l?p>=l?"up":"down":"up",w=b==="up"?bUe:vUe,x=b==="up"?"text-green-400":"text-red-400",v=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:v}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${m} ${h} px-2 py-0.5 rounded-full`,children:c})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:uX(p)}),a.jsx(w,{size:16,className:`${x} mt-1`})]})]})})},VUe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:l,activityType:o,fullData:d})=>{const c=bt(),h=o||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:b,bgColor:w}=MUe(h),{text:x,bg:v}=IUe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const E=new Date(T),z=E-new Date,K=Math.floor(z/864e5);return K===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:K===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",A=()=>{l&&(d?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(d)),c(`/group-manager/calls/info?id=${l}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(d)),c(`/group-manager/meetings/info?id=${l}`)):c("/group-manager/tasks"):c(h==="call"?`/group-manager/calls/info?id=${l}`:h==="meeting"?`/group-manager/meetings/info?id=${l}`:"/group-manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:A,children:[a.jsx("div",{className:`p-2 rounded-lg ${w} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${b}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(lX,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(dX,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${x} ${v} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},WUe=()=>{const e=bt(),{user:t}=Xt(),[n,s]=g.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=g.useState([]),[l,o]=g.useState([]),[d,c]=g.useState([]),[m,h]=g.useState([]),[p,b]=g.useState([]),[w,x]=g.useState([]),[v,j]=g.useState(!0),[C,S]=g.useState(null),[_,A]=g.useState(""),[T,E]=g.useState([]),[D,z]=g.useState([]),[K,B]=g.useState([]),[O,L]=g.useState(new Date),H=g.useRef(null),ae=g.useRef(null),W=g.useMemo(()=>{try{if(!_.trim())return[];const te=_.toLowerCase().trim(),V=[];return Array.isArray(T)&&T.forEach(ee=>{const me=`${ee.first_name||""} ${ee.last_name||""}`.trim().toLowerCase(),we=(ee.company_name||"").toLowerCase(),ve=(ee.email||"").toLowerCase(),Ae=(ee.phone||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:`${ee.first_name||""} ${ee.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:ee.company_name||"No company",route:`/group-manager/leads/${ee.id}`})}),Array.isArray(D)&&D.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.account?.name||"").toLowerCase(),ve=(ee.description||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Deal",type:"Deal",details:ee.account?.name||"No account",route:`/group-manager/deals/info?id=${ee.id}`})}),Array.isArray(K)&&K.forEach(ee=>{const me=(ee.name||"").toLowerCase(),we=(ee.email||"").toLowerCase(),ve=(ee.phone||"").toLowerCase(),Ae=(ee.website||"").toLowerCase();(me.includes(te)||we.includes(te)||ve.includes(te)||Ae.includes(te))&&V.push({id:ee.id,name:ee.name||"Unnamed Account",type:"Account",details:ee.email||ee.phone||"No contact info",route:"/group-manager/accounts"})}),V.slice(0,10)}catch(te){return console.error("Error in search:",te),[]}},[_,T,D,K]),q=te=>{te.route&&(e(te.route),A(""))},le=g.useCallback(async()=>{j(!0),S(null);try{const[te,V,ee,me,we,ve,Ae]=await Promise.all([re.get("/leads/group-manager/getLeads").catch(M=>(console.error("Error fetching leads:",M),{data:[]})),re.get("/deals/group-manager/fetch-all").catch(M=>(console.error("Error fetching deals:",M),{data:[]})),re.get("/accounts/group-manager/fetch-all").catch(M=>(console.error("Error fetching accounts:",M),{data:[]})),re.get("/tasks/all").catch(M=>(console.error("Error fetching tasks:",M),{data:[]})),re.get("/meetings/group-manager/fetch-all").catch(M=>(console.error("Error fetching meetings:",M),{data:[]})),re.get("/calls/group-manager/fetch-all").catch(M=>(console.error("Error fetching calls:",M),{data:[]})),re.get("/logs/read-all").catch(M=>(console.error("Error fetching logs:",M),{data:[]}))]),be=Array.isArray(te.data)?te.data:[],Ie=Array.isArray(V.data)?V.data:[],G=Array.isArray(ee.data)?ee.data:[],Ce=Array.isArray(me.data)?me.data:[],ce=Array.isArray(we.data)?we.data:[],F=Array.isArray(ve.data)?ve.data:[],ie=Array.isArray(Ae.data)?Ae.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Ie.length),Ie.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Ie[0],null,2)),console.log("First deal keys:",Object.keys(Ie[0]))),E(be),z(Ie),B(G);const he=be.filter(M=>M.status&&!["Lost","Converted"].includes(M.status)).length,Le=Ce.filter(M=>!M.dueDate||M.status==="Completed"?!1:new Date(M.dueDate)<new Date).length;s({activeLeads:he,totalDeals:Ie.length,activeAccounts:G.length,overdueTasks:Le});const xe=[...be].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);i(xe);const Ve=[...Ie].sort((M,pe)=>new Date(pe.created_at||0)-new Date(M.created_at||0)).slice(0,5);o(Ve);const ke=new Date,ye=[];F.forEach(M=>{const pe=M.due_date||M.call_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="MISSED"||se==="NOT_HELD"||se==="HELD"||ye.push({type:"Call",title:M.subject||"Untitled Call",assignedTo:M.assigned_to||(M.call_assign_to?`${M.call_assign_to.first_name||""} ${M.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"call",fullData:M})}}),ce.forEach(M=>{const pe=M.dueDate||M.start_time,se=(M.status||"").toUpperCase();if(pe){const je=new Date(pe);se==="COMPLETED"||se==="CANCELLED"||se==="DONE"||ye.push({type:"Meeting",title:M.subject||M.activity||"Untitled Meeting",assignedTo:M.assignedTo||(M.meet_assign_to?`${M.meet_assign_to.first_name||""} ${M.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:pe,priority:(M.priority||"MEDIUM").toUpperCase(),id:M.id,activityType:"meeting",fullData:M})}});const Me={HIGH:1,MEDIUM:2,LOW:3},He=ye.sort((M,pe)=>{const se=Me[M.priority]||3,je=Me[pe.priority]||3;if(se!==je)return se-je;const We=new Date(M.scheduledDate||0),Ne=new Date(pe.scheduledDate||0);return We-Ne}).slice(0,5);c(He),h(Ie),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Ie.length);const Be=Ie.filter(M=>(M.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",Be.length),Be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),Be.forEach((M,pe)=>{let se=M.amount;se&&typeof se=="object"?se.toString?se=parseFloat(se.toString()):se=parseFloat(se):se=parseFloat(se)||0,console.log(`Deal ${pe+1}:`,{id:M.id,name:M.name,stage:M.stage,stage_upper:(M.stage||"").toUpperCase(),amount:M.amount,amount_parsed:se,amount_type:typeof M.amount,close_date:M.close_date,close_date_type:typeof M.close_date,close_date_value:M.close_date?new Date(M.close_date):null,has_close_date:!!M.close_date,has_amount:se>0,all_keys:Object.keys(M),full_deal:M})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Ie.map(M=>M.stage))),x(Ie);const dt=[...ie].sort((M,pe)=>new Date(pe.timestamp||0)-new Date(M.timestamp||0));b(dt)}catch(te){console.error("Error fetching dashboard data:",te),S("Failed to load dashboard data. Please refresh the page.")}finally{j(!1)}},[]);g.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),le(),H.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),le(),L(new Date)},3e4),()=>{H.current&&clearInterval(H.current)}),[le]),g.useEffect(()=>{if(!t||!t.id)return;let te=0;const V=3;let ee=null;const me=()=>{const we=window.location.protocol==="https:"?"wss:":"ws:",ve=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Ae=`${we}//${ve}/ws/notifications?user_id=${t.id}`;try{const be=new WebSocket(Ae);ae.current=be,be.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),te=0},be.onmessage=Ie=>{try{const G=JSON.parse(Ie.data);console.log(" Real-time notification received:",G),G.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(G.event)&&(console.log(" Refreshing dashboard due to:",G.event),le(),L(new Date))}catch(G){console.error("Error parsing WebSocket message:",G)}},be.onerror=Ie=>{te===0&&console.warn(" WebSocket connection unavailable (this is optional)")},be.onclose=()=>{te<V&&(te++,ee=setTimeout(()=>{t&&t.id&&me()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return me(),()=>{ee&&clearTimeout(ee),ae.current&&(ae.current.close(),ae.current=null)}},[t,le]);const Q=[{icon:cX,title:"Active Leads",value:n.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:xUe,title:"Total Deals",value:n.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:yUe,title:"Active Account",value:n.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:lX,title:"Overdue Tasks",value:n.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",v,"error:",C),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[v&&a.jsx(It,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[C&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:C})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[a.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[a.jsx($Ue,{searchQuery:_,onSearchChange:A,searchResults:W,onSearchResultClick:q}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Q.map(te=>a.jsx(UUe,{...te,loading:v},te.title))})]}),a.jsx("div",{className:"lg:col-span-3",children:a.jsx(zUe,{logs:p,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(FUe,{revenueData:w,loading:v})}),a.jsx("div",{children:a.jsx(BUe,{pipelineData:m,loading:v})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(lA,{title:"Latest Leads",children:r.length>0?r.map((te,V)=>a.jsx(HUe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(lA,{title:"Latest Deals",children:v?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((te,V)=>a.jsx(GUe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(lA,{title:"Upcoming Activities",children:d.length>0?d.map((te,V)=>a.jsx(VUe,{...te},te.id||V)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},oA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Active"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Former"}],cA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},pr=e=>e?e.toUpperCase():"",dA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",qUe=e=>{switch(pr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},YUe=e=>{switch(pr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},vd=10;function KUe(){const e=bt();g.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,n]=g.useState(!1),[s,r]=g.useState(!1),[i,l]=g.useState(!1),[o,d]=g.useState(null),[c,m]=g.useState(null),[h,p]=g.useState(cA),[b,w]=g.useState(null),[x,v]=g.useState([]),[j,C]=g.useState(!1),[S,_]=g.useState([]),[A,T]=g.useState(null),[E,D]=g.useState([]),[z,K]=g.useState([]),[B,O]=g.useState("Filter by Status"),[L,H]=g.useState(""),[ae,W]=g.useState(null),[q,le]=g.useState(!1),[Q,te]=g.useState(1),[V,ee]=g.useState("Overview"),[me,we]=g.useState(""),[ve,Ae]=g.useState(!1),[be,Ie]=g.useState({}),[G,Ce]=g.useState(null),ce=g.useCallback(async(J=null)=>{C(!0);try{const ne=await re.get("/accounts/admin/fetch-all"),Oe=[...Array.isArray(ne.data)?ne.data:[]].sort((et,nt)=>{const ht=et?.created_at||et?.updated_at||0,_e=nt?.created_at||nt?.updated_at||0;return new Date(_e)-new Date(ht)});if(v(Oe),console.log("Fetch from backend: ",ne.data),J){const et=Oe.find(nt=>nt.id===J);w(et||null)}}catch(ne){console.error(ne),v([]),ne.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch accounts. Please try again later.")}finally{C(!1)}},[w]),F=g.useCallback(async()=>{try{const J=await re.get("/users/all");_(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),ie=g.useCallback(async()=>{try{const J=await re.get("/territories/fetch");D(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load territories (permission denied).")}},[]),he=g.useCallback(async()=>{try{const J=await re.get("/accounts/admin/parent-companies");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&Y.warn("Unable to load parent companies (permission denied).")}},[]),Le=g.useCallback(async J=>{try{const ne=await re.get(`/activities/accounts/${J}`);console.log("Related activities: ",ne.data),Ie(ne.data&&typeof ne.data=="object"?ne.data:{})}catch(ne){console.error(ne),ne.response?.status===404&&(console.warn("No activities found for this account."),Ie({}))}},[]);g.useEffect(()=>{ce(),F(),ie(),he()},[ce,F,ie,he]),g.useEffect(()=>{b&&we(pr(b.status)||"PROSPECT")},[b]);const xe=x.length,Ve=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="customer").length,[x]),ke=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="prospect").length,[x]),ye=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="partner").length,[x]),Me=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="active").length,[x]),He=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="inactive").length,[x]),Be=g.useMemo(()=>x.filter(J=>J.status?.toLowerCase()==="former").length,[x]),dt=g.useMemo(()=>[{title:"Total",value:xe,icon:ba,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ve,icon:dl,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ke,icon:Ga,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:ye,icon:Ut,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Me,icon:dl,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:He,icon:ul,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:ul,color:"text-orange-600",bgColor:"bg-orange-100"}],[xe,Ve,ke,ye,Me,He,Be]),M=g.useMemo(()=>{const J=L.trim().toLowerCase(),ne=B.trim().toUpperCase();return x.filter(oe=>{const Oe=[oe?.name,oe?.website,oe?.industry,oe?.territory?.name,oe?.phone_number],et=J===""||Oe.some(ht=>ht==null?!1:ht.toString().toLowerCase().includes(J)),nt=ne==="FILTER BY STATUS"||pr(oe.status)===ne;return et&&nt})},[x,L,B]),pe=Math.max(1,Math.ceil(M.length/vd)||1);g.useEffect(()=>{te(1)},[L,B]),g.useEffect(()=>{te(J=>{const ne=Math.max(1,Math.ceil(M.length/vd)||1);return J>ne?ne:J})},[M.length]);const se=g.useMemo(()=>{const J=(Q-1)*vd;return M.slice(J,J+vd)},[M,Q]);M.length===0||(Q-1)*vd+1,Math.min(Q*vd,M.length);const je=()=>te(J=>Math.max(J-1,1)),We=()=>te(J=>Math.min(J+1,pe)),Ne=J=>{w(J),ee("Overview"),we(pr(J?.status)||"PROSPECT")},qe=()=>w(null),De=J=>{J.target.id==="accountModalBackdrop"&&!q&&qe()},Je=()=>{n(!1),r(!1),m(null),p(cA),l(!1),T(null)},at=J=>{J.target.id==="modalBackdrop"&&Je()},ot=J=>J?new Date(J).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",R=J=>{const{name:ne,value:oe}=J.target;p(Oe=>({...Oe,[ne]:oe}))},$=()=>{p(cA),r(!1),m(null),n(!0)},I=J=>{w(null),console.log("edit: ",J),J.assigned_accs?T(J.assigned_accs):T(null),p({name:J.name||"",website:J.website||"",phone_number:J.phone_number||"",billing_address:J.billing_address||"",shipping_address:J.shipping_address||"",industry:J.industry||"",status:pr(J.status)||"PROSPECT",territory_id:J.territory?.id?String(J.territory.id):"",assigned_to:J.assigned_accs?.id?String(J.assigned_accs.id):""}),r(!0),m(J.id),n(!0)},U=J=>{J&&W({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:J.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:J.name}})},de=async()=>{if(!ae?.action){W(null);return}const{action:J}=ae,{type:ne,payload:oe,targetId:Oe,name:et}=J;le(!0);try{if(ne==="create"){l(!0);const nt=await re.post("/accounts/admin",oe);he(),Y.success(`Account "${et}" created successfully.`);const ht=b?.id||null;Je(),await ce(ht),!b&&nt.data?.id}else if(ne==="update"){if(!Oe)throw new Error("Missing account identifier for update.");l(!0),await re.put(`/accounts/admin/${Oe}`,oe),Y.success(`Account "${et}" updated successfully.`);const nt=b?.id&&b.id===Oe?Oe:null;Je(),await ce(nt),b?.id===Oe&&w(null)}else if(ne==="delete"){if(!Oe)throw new Error("Missing account identifier for deletion.");const nt=b?.id;d(Oe),await re.delete(`/accounts/admin/${Oe}`),Y.success(`Account "${et}" deleted successfully.`),await ce(nt&&nt!==Oe?nt:null),nt===Oe&&w(null)}}catch(nt){console.error(nt);const ht=ne==="create"?"Failed to create account. Please review the details and try again.":ne==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",_e=nt.response?.data?.detail||ht;Y.error(_e),(ne==="create"||ne==="update")&&l(!1),ne==="delete"&&d(null)}finally{(ne==="create"||ne==="update")&&l(!1),ne==="delete"&&d(null),le(!1),W(null)}},ge=()=>{q||W(null)},ue=async()=>{if(!b||!me)return;const J=pr(me),ne=pr(b.status);if(J!==ne){Ae(!0);try{await re.put(`/accounts/admin/${b.id}`,{status:J}),Y.success(`Account status updated to ${dA(J)}`),v(oe=>oe.map(Oe=>Oe.id===b.id?{...Oe,status:J}:Oe)),w(null)}catch(oe){console.error(oe);const Oe=oe.response?.data?.detail||"Failed to update account status. Please try again.";Y.error(Oe)}finally{Ae(!1)}}},[Se,Fe]=g.useState(!1),ft=J=>{J.preventDefault(),Fe(!0);const ne=h.name.trim();if(!ne){Y.error("Account name is required.");return}if(!h.assigned_to){Y.error("Assigned To is required.");return}const Oe={name:ne,website:h.website?.trim()||null,phone_number:h.phone_number?.trim()||null,billing_address:h.billing_address?.trim()||null,shipping_address:h.shipping_address?.trim()||null,industry:h.industry?.trim()||null,parent_company:h.parent_company?.trim()||null,status:h.status||"PROSPECT",territory_id:h.territory_id?Number(h.territory_id):null,assigned_to:h.assigned_to?Number(h.assigned_to):null},et=s&&c?"update":"create";W({title:et==="create"?"Confirm New Account":"Confirm Update",message:et==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ne}),"?"]}),confirmLabel:et==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:et,payload:Oe,targetId:c||null,name:ne}})},vt=[{label:"Filter by Status",value:"Filter by Status"},...oA.map(J=>({label:J.label,value:J.value}))],ze=ae?.action?.type==="delete"?ae.action.targetId:null,yt=b&&(o===b.id||ze===b.id),Te=b&&o===b.id,st=b?qUe(b.status):"",X=b?a.jsx("div",{id:"accountModalBackdrop",onClick:De,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:J=>J.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:qe,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${st}`,children:dA(b.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>I(b),disabled:ae?.action?.type==="update"&&ae.action.targetId===b.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>U(b),disabled:!!yt,children:Te?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(J=>a.jsx("button",{onClick:()=>ee(J),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===J?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:J},J))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:b.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:ot(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:ot(b.updated_at)||"N/A"})]})]})}),V==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:x.notes||"No notes available."})]})]}),V==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[be.tasks&&be.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",be.tasks.length,")"]})]}),G==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.tasks.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||"No description"}),J.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",J.assigned_to.first_name," ",J.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.due_date||J.created_at)})]},`task-${ne}`))})]}),be.meetings&&be.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",be.meetings.length,")"]})]}),G==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.meetings.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.description||J.location||"No description"}),J.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",J.host.first_name," ",J.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.start_time||J.created_at)})]},`meeting-${ne}`))})]}),be.calls&&be.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",be.calls.length,")"]})]}),G==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.calls.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:J.subject||J.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:J.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.call_time||J.created_at)})]},`call-${ne}`))})]}),be.contacts&&be.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",be.contacts.length,")"]})]}),G==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.contacts.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.first_name?`${J.first_name} `:"",J.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.created_at)})]},`contact-${ne}`))})]}),be.deals&&be.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",be.deals.length,")"]})]}),G==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.deals.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",J.name||J.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:J.stage||J.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.close_date||J.created_at)})]},`deal-${ne}`))})]}),be.quotes&&be.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>Ce(G==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",be.quotes.length,")"]})]}),G==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),G==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:be.quotes.map((J,ne)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(J.quote_id?J.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:J.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ot(J.presented_date)||""})]},`quote-${ne}`))})]}),(!be||(!be.tasks||be.tasks.length===0)&&(!be.meetings||be.meetings.length===0)&&(!be.calls||be.calls.length===0)&&(!be.quotes||be.quotes.length===0)&&(!be.deals||be.deals.length===0)&&(!be.contacts||be.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Account"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Account"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:me||pr(b?.status)||"PROSPECT",onChange:J=>we(J.target.value),children:oA.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))}),a.jsx("button",{onClick:ue,disabled:ve||!me||pr(me)===pr(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ve||!me||pr(me)===pr(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ve?"Updating...":"Update"})]})]})]})]})]})}):null,Ee=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[j&&a.jsx(It,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{$(),Fe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:dt.map(J=>a.jsx(QUe,{...J},J.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:L,onChange:J=>H(J.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:J=>O(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:vt.map(J=>a.jsx("option",{value:J.value,children:J.label},J.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsx("tbody",{children:j?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):M.length>0?se.map(J=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ne(J),Le(J.id)},children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${YUe(J.status)}`,children:dA(J.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:J.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:J.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(jt,{className:"text-gray-500"}),a.jsx("span",{children:J.phone_number||"--"})]})})]},J.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:M.length,pageSize:vd,currentPage:Q,onPrev:je,onNext:We,label:"accounts"})]}),$e=t?a.jsx("div",{id:"modalBackdrop",onClick:at,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:J=>J.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Je(),Fe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||q,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ft,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Im,{label:"Name",name:"name",value:h.name,onChange:R,placeholder:"Company name",required:!0,isSubmitted:Se})}),a.jsx(zF,{label:"Parent Company",value:h.parent_company,onChange:J=>{p(ne=>({...ne,parent_company:J}))},items:z.map(J=>({id:J,name:J})),getLabel:J=>J?.name||"",placeholder:"Select or type parent company...",disabled:i,allowFreeText:!0}),a.jsx(Im,{label:"Website",name:"website",value:h.website,onChange:R,placeholder:"https://example.com",disabled:i}),a.jsx(Im,{label:"Phone Number",name:"phone_number",value:h.phone_number,onChange:R,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),a.jsx(Im,{label:"Industry",name:"industry",value:h.industry,onChange:R,placeholder:"Industry",disabled:i}),a.jsx(Im,{label:"Billing Address",name:"billing_address",value:h.billing_address,onChange:R,placeholder:"Billing address",disabled:i}),a.jsx(Im,{label:"Shipping Address",name:"shipping_address",value:h.shipping_address,onChange:R,placeholder:"Shipping address",disabled:i}),a.jsx(RF,{label:"Status",name:"status",value:h.status,onChange:R,options:[{value:"",label:"Select status"},...oA],required:!0,disabled:i}),a.jsx(zF,{label:"Assigned To",value:h.assigned_to,onChange:J=>{const ne=S.find(Oe=>String(Oe.id)===String(J));T(ne);let oe=null;ne&&ne.assigned_territory&&ne.assigned_territory.length===1&&(oe=ne.assigned_territory[0].id),p(Oe=>({...Oe,assigned_to:J,territory_id:oe}))},items:S||[],getLabel:J=>`${J?.first_name??""} ${J?.last_name??""} (${J?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Se,disabled:i||S.length===0}),a.jsx(RF,{label:"Territory",name:"territory_id",value:h.territory_id||"",onChange:R,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(J=>({value:String(J.id),label:J.name}))||[]],disabled:i||!A||!A.assigned_territory||A.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Je(),Fe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||q,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||q,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Ye=ae?a.jsx(ZUe,{open:!0,title:ae.title,message:ae.message,confirmLabel:ae.confirmLabel,cancelLabel:ae.cancelLabel,variant:ae.variant,onConfirm:de,onCancel:ge,loading:q}):null;return a.jsxs(a.Fragment,{children:[Ee,X,$e,Ye]})}function QUe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Im({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function RF({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))})]})}function zF({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1,allowFreeText:m=!1}){const h=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(XUe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:h,allowFreeText:m})]})}function XUe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1,allowFreeText:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),w=e.find(j=>String(j.id)===String(t)),x=w?s(w):t,v=g.useMemo(()=>{const j=h.trim().toLowerCase();return(j?e.filter(S=>(s(S)||"").toLowerCase().includes(j)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const j=C=>{b.current&&!b.current.contains(C.target)&&m(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:x,placeholder:r,onFocus:()=>!i&&m(!0),onChange:j=>{p(j.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[d&&h.trim()&&!v.some(j=>s(j).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),m(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),v.length>0?v.map(j=>{const C=String(j.id),S=s(j),_=String(t)===C;return a.jsx("button",{type:"button",onClick:()=>{n(C),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},C)}):!d||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function ZUe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const yg=10,uA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},$m=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),yi=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function JUe(){const e=bt();g.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState(null),[h,p]=g.useState(!1),[b,w]=g.useState(!1),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(!1),[A,T]=g.useState(null),[E,D]=g.useState(uA),[z,K]=g.useState(""),[B,O]=g.useState("Filter by Accounts"),[L,H]=g.useState(null),[ae,W]=g.useState("Overview"),[q,le]=g.useState(1),[Q,te]=g.useState({}),[V,ee]=g.useState(null),me=g.useCallback(async(R=null)=>{r(!0);try{const $=await re.get("/contacts/admin/fetch-all"),U=[...Array.isArray($.data)?$.data:[]].sort((de,ge)=>{const ue=de?.created_at||de?.updated_at||0,Se=ge?.created_at||ge?.updated_at||0;return new Date(Se)-new Date(ue)});if(n(U),R){const de=U.find(ge=>ge.id===R);m(de||null)}}catch($){console.error($),n([]),$.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch contacts. Please try again later.")}finally{r(!1)}},[m]),we=g.useCallback(async()=>{try{const R=await re.get("/accounts/admin/fetch-all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>(U?.name||"").localeCompare(de?.name||""));l(I)}catch(R){console.error(R),l([]),R.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),ve=g.useCallback(async()=>{try{const R=await re.get("/users/all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>$m(U).localeCompare($m(de)));d(I)}catch(R){console.error(R),d([]),R.response?.status===403&&Y.warn("Unable to load users for assignment (permission denied).")}},[]),Ae=g.useCallback(async R=>{try{const $=await re.get(`/activities/contact/${R}`);te($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),te({}))}},[]);g.useEffect(()=>{me(),we(),ve()},[me,we,ve]);const be=g.useMemo(()=>{const R=new Map;i.forEach(I=>{I?.id&&I?.name&&R.set(String(I.id),I.name)}),t.forEach(I=>{I?.account_id&&I?.account?.name&&R.set(String(I.account_id),I.account.name)});const $=Array.from(R.entries()).sort((I,U)=>I[1].localeCompare(U[1])).map(([I,U])=>({value:I,label:U}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...$]},[i,t]),Ie=g.useMemo(()=>{const R=z.trim().toLowerCase(),$=B.trim();return t.filter(I=>{const U=[I?.first_name,I?.last_name,I?.email,I?.title,I?.department,I?.account?.name,I?.account?.status,I?.work_phone,I?.mobile_phone_1,I?.mobile_phone_2,I?.assigned_contact?.first_name,I?.assigned_contact?.last_name,I?.contact_creator?.first_name,I?.contact_creator?.last_name,I?.notes,yi(I?.created_at),yi(I?.updated_at)],de=R===""||U.some(ue=>ue==null?!1:ue.toString().toLowerCase().includes(R)),ge=$==="Filter by Accounts"||String(I.account_id)===$;return de&&ge})},[t,z,B]),G=Math.max(1,Math.ceil(Ie.length/yg)||1);g.useEffect(()=>{le(1)},[z,B]),g.useEffect(()=>{le(R=>{const $=Math.max(1,Math.ceil(Ie.length/yg)||1);return R>$?$:R})},[Ie.length]);const Ce=g.useMemo(()=>{const R=(q-1)*yg;return Ie.slice(R,R+yg)},[Ie,q]),ce=()=>le(R=>Math.max(R-1,1)),F=()=>le(R=>Math.min(R+1,G)),ie=g.useMemo(()=>{if(!b||!A)return i;const R=t.find(I=>I.id===A);return!R||!R.account||i.some(I=>I.id===R.account.id)?i:[...i,R.account]},[i,b,A,t]),he=g.useCallback(()=>{p(!1),w(!1),T(null),D(uA),v(!1),He(!1)},[]),Le=R=>{R.target.id==="modalBackdrop"&&!x&&!S&&he()},xe=R=>{const{name:$,value:I}=R.target;D(U=>({...U,[$]:I}))},Ve=()=>{D(uA),w(!1),T(null),p(!0)},ke=async R=>{if(!R)return;const $=await re.get(`/accounts/get/${R.account_id}`);D({first_name:R.first_name||"",last_name:R.last_name||"",account_id:$.data.id?$.data.id:"",title:R.title||"",department:R.department||"",email:R.email||"",work_phone:R.work_phone||"",mobile_phone_1:R.mobile_phone_1||"",mobile_phone_2:R.mobile_phone_2||"",notes:R.notes||"",assigned_to:R.assigned_to?String(R.assigned_to):""}),w(!0),T(R.id),p(!0),m(null)},ye=R=>{if(!R)return;const $=$m(R)||"this contact";C({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:R.id,name:$}})},[Me,He]=g.useState(!1),Be=R=>{R.preventDefault(),He(!0);const $=E.first_name.trim(),I=E.last_name.trim();if(!$||!I){Y.error("First name and last name are required.");return}if(!E.account_id){Y.error("Account is required.");return}if(!E.assigned_to){Y.error("Assigned To is required.");return}const de=E.email?.trim();if(!de){Y.error("Email is required.");return}if(!de.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)){Y.error("Please enter a valid email address.");return}if((de.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}const Fe={first_name:$,last_name:I,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},ft=b&&A?"update":"create",vt=`${$} ${I}`.trim();C({title:ft==="create"?"Confirm New Contact":"Confirm Update",message:ft==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:vt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:vt}),"?"]}),confirmLabel:ft==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:ft,payload:Fe,targetId:A||null,name:vt}})},dt=async()=>{if(!j?.action){C(null);return}const{action:R}=j,{type:$,payload:I,targetId:U,name:de}=R;_(!0);try{if($==="create"){v(!0),await re.post("/contacts/admin",I),Y.success(`Contact "${de}" created successfully.`);const ge=c?.id||null;he(),await me(ge)}else if($==="update"){if(!U)throw new Error("Missing contact identifier for update.");v(!0),await re.put(`/contacts/admin/${U}`,I),Y.success(`Contact "${de}" updated successfully.`);const ge=c?.id&&c.id===U?U:c?.id||null;he(),await me(ge),c?.id===U&&m(null)}else if($==="delete"){if(!U)throw new Error("Missing contact identifier for deletion.");const ge=c?.id;H(U),await re.delete(`/contacts/admin/${U}`),Y.success(`Contact "${de}" deleted successfully.`),await me(ge&&ge!==U?ge:null),ge===U&&m(null)}}catch(ge){console.error(ge);const ue=$==="create"?"Failed to create contact. Please review the details and try again.":$==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",Se=ge.response?.data?.detail||ue;Y.error(Se)}finally{($==="create"||$==="update")&&v(!1),$==="delete"&&H(null),_(!1),C(null)}},M=()=>{S||C(null)},pe=R=>{m(R),W("Overview")},se=()=>m(null),je=R=>{R.target.id==="contactModalBackdrop"&&!S&&se()},We=j?.action?.type==="delete"?j.action.targetId:null,Ne=c&&(L===c.id||We===c.id),qe=c&&L===c.id,De=c?a.jsx("div",{id:"contactModalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:R=>R.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:se,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Ia,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:$m(c)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ke(c),disabled:S||j?.action?.type==="update"&&j.action.targetId===c.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ye(c),disabled:!!Ne,children:qe?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:c.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(R=>a.jsx("button",{onClick:()=>W(R),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ae===R?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:R},R))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ae==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:$m(c)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email?a.jsx("a",{href:`mailto:${c.email}`,className:"text-blue-600 hover:underline break-all",children:c.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_contact?`${c.assigned_contact.first_name} ${c.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.contact_creator?`${c.contact_creator.first_name} ${c.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:yi(c.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:yi(c.updated_at)||"N/A"})]})]})}),ae==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),ae==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[Q.tasks&&Q.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Q.tasks.length,")"]})]}),V==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.tasks.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||"No description"}),R.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",R.assigned_to.first_name," ",R.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.due_date||R.created_at)})]},`task-${$}`))})]}),Q.meetings&&Q.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Q.meetings.length,")"]})]}),V==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.meetings.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.description||R.location||"No description"}),R.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",R.host.first_name," ",R.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.start_time||R.created_at)})]},`meeting-${$}`))})]}),Q.calls&&Q.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Q.calls.length,")"]})]}),V==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.calls.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:R.subject||R.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:R.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.call_time||R.created_at)})]},`call-${$}`))})]}),Q.contacts&&Q.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Q.contacts.length,")"]})]}),V==="contacts"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.contacts.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(Ut,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[R.first_name?`${R.first_name} `:"",R.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:R.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.created_at)})]},`contact-${$}`))})]}),Q.deals&&Q.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Q.deals.length,")"]})]}),V==="deals"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.deals.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[R.deal_id?R.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",R.name||R.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:R.stage||R.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.close_date||R.created_at)})]},`deal-${$}`))})]}),Q.quotes&&Q.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ee(V==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(da,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Q.quotes.length,")"]})]}),V==="quotes"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),V==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Q.quotes.map((R,$)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(da,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(R.quote_id?R.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:R.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:yi(R.presented_date)||""})]},`quote-${$}`))})]}),(!Q||(!Q.tasks||Q.tasks.length===0)&&(!Q.meetings||Q.meetings.length===0)&&(!Q.calls||Q.calls.length===0)&&(!Q.quotes||Q.quotes.length===0)&&(!Q.deals||Q.deals.length===0)&&(!Q.contacts||Q.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const R=encodeURIComponent(c.email),$=encodeURIComponent(""),I=encodeURIComponent(""),U=`https://mail.google.com/mail/?view=cm&fs=1&to=${R}&su=${$}&body=${I}`;window.open(U,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Contact"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Contact"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Je=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ba,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Ve(),He(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:z,onChange:R=>K(R.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:B,onChange:R=>O(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:be.map(R=>a.jsx("option",{value:R.value,children:R.label},R.value??R.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Ie.length>0?Ce.map(R=>{const $=[{Icon:Ha,value:R.email,key:"email"},{Icon:jt,value:R.work_phone,key:"work_phone"},{Icon:Lc,value:R.mobile_phone_1,key:"mobile_phone_1"},{Icon:Lc,value:R.mobile_phone_2,key:"mobile_phone_2"}].filter(I=>!!I.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{pe(R),Ae(R.id)},children:[a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:$m(R)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:R.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(yx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:R.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:$.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:$.map(({Icon:I,value:U,key:de})=>{const ge=pt.createElement(I,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ge,a.jsx("span",{children:U})]},de)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(Yt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:R.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Ut,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:R.assigned_contact?`${R.assigned_contact.first_name} ${R.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Nt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:yi(R.created_at)||"--"})]})})]},R.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ie.length,pageSize:yg,currentPage:q,onPrev:ce,onNext:F,label:"contacts"})]}),at=h?a.jsx("div",{id:"modalBackdrop",onClick:Le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:R=>R.stopPropagation(),children:[a.jsx("button",{onClick:()=>{he(),He(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:x||S,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:b?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[a.jsx(fc,{label:"First Name",name:"first_name",value:E.first_name,onChange:xe,placeholder:"First name",required:!0,isSubmitted:Me}),a.jsx(fc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:xe,placeholder:"Last name",required:!0,isSubmitted:Me}),a.jsx(UF,{label:"Account",value:E.account_id,onChange:R=>D($=>({...$,account_id:R})),items:b?ie:i||[],getLabel:R=>R?.name??"",placeholder:"Search account...",disabled:x||(b?ie.length===0:i.length===0),required:!0,isSubmitted:Me}),a.jsx(UF,{label:"Assigned To",value:E.assigned_to,onChange:R=>D($=>({...$,assigned_to:R})),items:o||[],getLabel:R=>`${R?.first_name??""} ${R?.last_name??""} (${R?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Me,disabled:x||o.length===0}),a.jsx(fc,{label:"Title",name:"title",value:E.title,onChange:xe,placeholder:"Job title",disabled:x}),a.jsx(fc,{label:"Department",name:"department",value:E.department,onChange:xe,placeholder:"Department",disabled:x}),a.jsx(fc,{label:"Email",name:"email",type:"email",value:E.email,onChange:xe,placeholder:"example@email.com",required:!0,isSubmitted:Me}),a.jsx(fc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(fc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(fc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:xe,placeholder:"09xx xxx xxxx",disabled:x}),a.jsx(tFe,{label:"Notes",name:"notes",value:E.notes,onChange:xe,placeholder:"Additional details...",rows:3,disabled:x,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{he(),He(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:x||S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:x||S,children:x?"Saving...":b?"Update Contact":"Save Contact"})]})]})]})}):null,ot=j?a.jsx(aFe,{open:!0,title:j.title,message:j.message,confirmLabel:j.confirmLabel,cancelLabel:j.cancelLabel,variant:j.variant,onConfirm:dt,onCancel:M,loading:S}):null;return a.jsxs(a.Fragment,{children:[Je,De,at,ot]})}function fc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,isSubmitted:d=!1,className:c=""}){const m=d&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function UF({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(eFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function eFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function tFe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function aFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const mA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function mX({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:l}){const o=bt(),{leadID:d}=Co(),[c,m]=g.useState(e||null),[h,p]=g.useState("Overview"),[b,w]=g.useState(""),x=c?.status?.toUpperCase()==="QUALIFIED",[v,j]=g.useState(null),[C,S]=g.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,A]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,E]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),D=async()=>{try{if(e){m(e),w(e.status||"New");return}if(!d)return;const L=await re.get(`/leads/get/${d}`);m(L.data),w(L.data.status||"New"),S({name:L.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:L.data.territory?.id||null,assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),A({last_name:L.data.last_name||"",first_name:L.data.first_name||"",account_id:null,title:L.data.title||"",department:L.data.department||"",email:L.data.email||"",work_phone:L.data.work_phone||"",mobile_phone_1:L.data.mobile_phone_1||"",mobile_phone_2:L.data.mobile_phone_2||"",notes:"",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:L.data.assigned_to?.id||null,created_by:L.data.creator?.id||null})}catch(L){console.error(L)}};g.useEffect(()=>{e?(m(e),w(e.status||"New")):d&&D()},[d,e]);const z=async()=>{try{if(b==="Converted"&&c?.status?.toUpperCase()!=="QUALIFIED"){Y.error("Lead must be Qualified before it can be converted.");return}const L=await re.put(`/leads/${c.id}/update/status`,{status:b});Y.success("Lead status updated successfully");const H={...c,status:L.data.status};m(H),i&&i(H),n&&n(),t&&t()}catch(L){console.error(L),Y.error("Failed to update lead status")}},K=async L=>{const H={...C,assigned_to:L.assigned_to?.id,billing_address:L.address,shipping_address:L.address,created_by:L.creator?.id,industry:null,name:L.company_name,phone_number:L.work_phone,status:"Prospect",territory_id:L.territory?.id,website:""};console.log("Account data: ",H),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",L);try{const W=(await re.post("/accounts/convertedLead",H)).data.id,q={..._,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,department:L.department,email:L.email,first_name:L.first_name,last_name:L.last_name,mobile_phone_1:L.mobile_phone_1,mobile_phone_2:L.mobile_phone_2,notes:L.notes,title:L.title,work_phone:L.work_phone},Q=(await re.post("/contacts/convertedLead",q)).data.id,te=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},V=T.amount&&T.amount!==""?parseFloat(T.amount):0,ee={...T,account_id:W,assigned_to:L.assigned_to?.id,created_by:L.creator?.id,primary_contact_id:Q,probability:te(),stage:"Prospecting"},me=await re.post("/deals/convertedLead",ee),we=await re.put(`/leads/convert/${L.id}`);i&&i(null),n(),Y.success("Lead converted successfully!"),t()}catch(ae){console.error("Error during conversion:",ae);const W=ae.response?.data?.detail||ae.message||"Failed to convert lead. Please try again.";Y.error(W)}},B=L=>{switch((L||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},O=L=>L.toString().toLowerCase().replace(/\b\w/g,H=>H.toUpperCase());return c?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():o(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[c.first_name," ",c.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${B(c.status)}`,children:O(c.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>K(c),disabled:!x,title:x?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${x?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&c&&s(c)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&c&&r(c)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(L=>a.jsx("button",{onClick:()=>p(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[c.first_name," ",c.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:c.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:c.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:c.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:c.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:c.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:c.assigned_to?`${c.assigned_to.first_name} ${c.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:c.creator?`${c.creator.first_name} ${c.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:c.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:c.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:c.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:c.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:c.address||"N/A"})]})]})}),h==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:c.notes||"No notes available."})]})]}),h==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[l.tasks&&l.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",l.tasks.length,")"]})]}),v==="tasks"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.tasks.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(zt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:mA(L.due_date||L.created_at)})]},`task-${H}`))})]}),l.meetings&&l.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Nt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",l.meetings.length,")"]})]}),v==="meetings"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.meetings.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Nt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:mA(L.start_time||L.created_at)})]},`meeting-${H}`))})]}),l.calls&&l.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>j(v==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(jt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",l.calls.length,")"]})]}),v==="calls"?a.jsx(wt,{className:"text-gray-500"}):a.jsx(Tt,{className:"text-gray-500"})]}),v==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:l.calls.map((L,H)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(jt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:mA(L.call_time||L.created_at)})]},`call-${H}`))})]}),(!l||(!l.tasks||l.tasks.length===0)&&(!l.meetings||l.meetings.length===0)&&(!l.calls||l.calls.length===0)&&(!l.quotes||l.quotes.length===0)&&(!l.deals||l.deals.length===0)&&(!l.contacts||l.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{c&&o("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:c.title?`Call regarding ${c.title}`:`Call with ${c.first_name} ${c.last_name}`,relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!c?.email){alert("No email address available");return}const L=encodeURIComponent(c.email),H=encodeURIComponent(""),ae=encodeURIComponent(""),W=`mailto:${L}?subject=${H}&body=${ae}`;window.location.href=W},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{c&&o("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:c.title?`Meeting regarding ${c.title}`:`Meeting with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{c&&o("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:c.title?`Follow up on ${c.title}`:`Follow up with ${c.first_name||""} ${c.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(c.id),relatedType2:null,relatedTo2:null,assigned_to:c.assigned_to?.id?String(c.assigned_to.id):"",priority:"MEDIUM",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:b,onChange:L=>w(L.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),c?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:z,disabled:b===c.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${b===c.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const nFe=Lf.all(),fA=nFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),sFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),rFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},bg=10,hA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function iFe(){const e=bt(),{leadID:t}=Co();Ss();const[n,s]=g.useState(null),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(!1),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState(1),[_,A]=g.useState(hA),[T,E]=g.useState(!1),[D,z]=g.useState(null),[K,B]=g.useState(!1),[O,L]=g.useState(null),[H,ae]=g.useState(!1),[W,q]=g.useState({});g.useRef(null);const[le,Q]=g.useState(!1),[te,V]=g.useState(null),[ee,me]=g.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[we,ve]=g.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[Ae,be]=g.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});g.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ie=async()=>{try{const $=await re.get("/leads/getUsers");o($.data)}catch($){console.error(`Error fetching users: ${$}`)}},G=async()=>{b(!0);try{const $=await re.get("/leads/admin/getLeads");h($.data),console.log($.data)}catch($){console.error(`Error fetching leads: ${$}`)}finally{b(!1)}};g.useEffect(()=>{Ie(),G()},[]),g.useEffect(()=>{if(t&&m.length>0&&!r&&!T){const $=m.find(I=>I.id===Number(t));$&&s($)}else!t&&!n&&s(null)},[t,m,r,T]),g.useEffect(()=>{if(te){const I=(ge=>{if(!ge)return{code:"+63",number:""};const ue=ge.match(/^(\+\d+)\s(.+)$/);if(ue)return{code:ue[1],number:ue[2]};if(ge.startsWith("+")){const Se=ge.match(/^(\+\d{1,3})/);if(Se)return{code:Se[1],number:ge.substring(Se[1].length).trim()}}return{code:"+63",number:ge}})(te.work_phone),U=[];te.work_phone&&U.push(`Work: ${te.work_phone}`),te.mobile_phone_1&&U.push(`Mobile 1: ${te.mobile_phone_1}`),te.mobile_phone_2&&U.push(`Mobile 2: ${te.mobile_phone_2}`);const de=U.length>0?U.join(" | "):"";me({name:te.company_name||"",website:"",countryCode:I.code,phone_number:I.number,combinedPhoneNumbers:de,billing_address:te.address||"",shipping_address:te.address||"",industry:"",status:"Prospect",territory_id:te.assigned_to?.territory?.id||null,assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),ve({last_name:te.last_name||"",first_name:te.first_name||"",account_id:null,title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null}),be({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:te.assigned_to?.id||null,created_by:te.creator?.id||null})}},[te]);const Ce=$=>x($.target.value),ce=g.useMemo(()=>{const $=w.trim().toLowerCase(),I=v.trim().toUpperCase();return m.filter(U=>{const de=[U?.first_name,U?.last_name,U?.company_name,U?.title,U?.email,U?.work_phone,U?.assigned_to?`${U.assigned_to.first_name} ${U.assigned_to.last_name}`:""],ge=$===""||de.some(Se=>Se==null||Se===""?!1:Se.toString().toLowerCase().includes($));let ue=!1;return I==="FILTER BY STATUS"?ue=(U.status?U.status.toUpperCase():"")!=="CONVERTED":ue=(U.status?U.status.toUpperCase():"")===I,ge&&ue})},[m,w,v]),F=Math.max(1,Math.ceil(ce.length/bg)||1);g.useEffect(()=>{S(1)},[w,v]),g.useEffect(()=>{S($=>{const I=Math.max(1,Math.ceil(ce.length/bg)||1);return $>I?I:$})},[ce.length]);const ie=g.useMemo(()=>{const $=(C-1)*bg;return ce.slice($,$+bg)},[ce,C]),he=()=>S($=>Math.max($-1,1)),Le=()=>S($=>Math.min($+1,F)),xe=g.useCallback(async $=>{try{const I=await re.get(`/activities/lead/${$}`);q(I.data&&typeof I.data=="object"?I.data:{})}catch(I){console.error(I),I.response?.status===404&&(console.warn("No activities found for this account."),q({}))}},[]),Ve=$=>{s($),xe($.id)},ke=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ye=()=>{i(!1),A(hA),E(!1),z(null),B(!1),c(null),sessionStorage.removeItem("editLeadData")},Me=$=>{$.target.id==="modalBackdrop"&&ye()},He=()=>{A(hA),E(!1),z(null),c(null),i(!0)},Be=$=>{if(!$){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",$),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const I=Se=>{if(!Se)return{code:"+63",number:""};const Fe=Se.match(/^(\+\d+)\s(.+)$/);return Fe?{code:Fe[1],number:Fe[2]}:{code:"+63",number:Se}},U=I($.work_phone),de=I($.mobile_phone_1),ge=I($.mobile_phone_2);let ue="";if($.assigned_to){ue=String($.assigned_to.id);const Se=l?.find(Fe=>Fe.id===$.assigned_to.id);c(Se)}A({first_name:$.first_name||"",last_name:$.last_name||"",company_name:$.company_name||"",title:$.title||"",department:$.department||"",email:$.email||"",work_ccode:U.code,work_phone:U.number,m1_ccode:de.code,mobile_phone_1:de.number,m2_ccode:ge.code,mobile_phone_2:ge.number,address:$.address||"",notes:$.notes||"",source:$.source||"",territory_id:$.territory?.id||null,lead_owner:ue,status:$.status||"New"}),E(!0),z($.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},dt=$=>{if(!$){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",$);const I=`${$.first_name} ${$.last_name}`||"this lead";L({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:I}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:I}})},M=$=>{const{name:I,value:U}=$.target;if(A(de=>({...de,[I]:U})),I==="lead_owner"){const de=l.find(ge=>ge.id===parseInt(U));c(de)}},[pe,se]=g.useState(!1),je=$=>{if($.preventDefault(),se(!0),!_.last_name?.trim()){Y.error("Last name is required.");return}if(!_.company_name?.trim()){Y.error("Company is required.");return}if(!_.title?.trim()){Y.error("Job title is required.");return}if(!_.email?.trim()){Y.error("Email is required.");return}if(!_.email.includes("@")){Y.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){Y.error("Please enter a valid email address with a dot in the domain.");return}if((_.email.toLowerCase().split("@")[1]||"")!=="gmail.com"){Y.error("Please enter a valid Gmail address (must be gmail.com).");return}if(!_.lead_owner){Y.error("Please assign a lead owner.");return}const ge={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},ue=T&&D?"update":"create",Se=`${_.first_name} ${_.last_name}`;L({title:ue==="create"?"Confirm New Lead":"Confirm Update",message:ue==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Se}),"?"]}),confirmLabel:ue==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ue,payload:ge,targetId:D||null,name:Se}})},We=async()=>{if(!O?.action){L(null);return}const{action:$}=O,{type:I,payload:U,targetId:de,name:ge,lead:ue}=$;console.log(U),ae(!0);try{if(I==="create")B(!0),await re.post("/leads/create",U),Y.success(`Lead "${ge}" created successfully.`),ye(),await G();else if(I==="update"){if(!de)throw new Error("Missing lead identifier for update.");B(!0);const Se=await re.put(`/leads/${de}`,U);Y.success(`Lead "${ge}" updated successfully.`),n&&n.id===de&&s(null),ye(),await G()}else if(I==="delete"){if(!de)throw new Error("Missing lead identifier for deletion.");await re.delete(`/leads/${de}`),Y.success(`Lead "${ge}" deleted successfully.`),n?.id===de&&s(null),await G()}}catch(Se){console.error(Se);const Fe=I==="create"?"Failed to create lead. Please review the details and try again.":I==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ft=Se.response?.data?.detail||Fe;Y.error(ft)}finally{(I==="create"||I==="update")&&B(!1),I!=="edit"&&(ae(!1),L(null))}},Ne=()=>{H||L(null)},qe=m.filter($=>$.status==="New").length,De=m.filter($=>$.status==="Contacted").length,Je=m.filter($=>$.status==="Qualified").length,at=m.filter($=>$.status==="Converted").length,ot=m.filter($=>$.status==="Lost").length,R=[{title:"New",value:qe,icon:Ga,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:De,icon:jt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Je,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:at,icon:So,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ot,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(It,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Ga,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{Y.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Rc,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{He(),se(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:R.map($=>a.jsx(oFe,{...$},$.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:w,onChange:Ce,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:v,onChange:$=>j($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:ce.length>0?ie.map($=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>Ve($),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[$.first_name," ",$.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:$.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:$.assigned_to?`${$.assigned_to.first_name} ${$.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${rFe($.status||"New")}`,children:sFe($.status||"New")})})]},$.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:ce.length,pageSize:bg,currentPage:C,onPrev:he,onNext:Le,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:Me,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ye(),se(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:M,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${pe&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:M,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:M,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:M,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${pe&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:fA.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:fA.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:M,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:fA.map($=>a.jsx("option",{value:$.code,children:$.code},$.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:M,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:_.address,onChange:M,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${pe&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(cFe,{items:Array.isArray(l)?l:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:$=>`${$.first_name} ${$.last_name}`,onChange:$=>{const I=l.find(de=>String(de.id)===String($));c(I);let U=null;I&&I.assigned_territory&&I.assigned_territory.length===1&&(U=I.assigned_territory[0].id),A(de=>({...de,lead_owner:$,territory_id:U}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:M,disabled:!d||!d.assigned_territory||d.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:d?d.assigned_territory&&d.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),d&&d.assigned_territory&&d.assigned_territory.map($=>a.jsx("option",{value:$.id,children:$.name},$.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:M,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:M,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{ye(),se(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:K||H,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:je,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:K||H,children:K||H?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),O&&a.jsx(lFe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:We,onCancel:Ne,loading:H}),n&&!r&&!T&&a.jsx(mX,{relatedActs:W,lead:n,onBack:ke,fetchLeads:G,setSelectedLead:s,onEdit:Be,onDelete:dt})]})}function lFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function oFe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function cFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const ub={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},In=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),dFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(In,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(In,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(In,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(In,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(In,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),uFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(In,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(In,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(In,{label:"Department",name:"department",value:e.department}),a.jsx(In,{label:"Title",name:"title",value:e.title}),a.jsx(In,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(In,{label:"Email",name:"email",value:e.email}),a.jsx(In,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(In,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),mFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(In,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(In,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(In,{label:"Stage",name:"stage",value:e.stage}),a.jsx(In,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(In,{label:"Description",name:"description",value:e.description}),a.jsx(In,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function fFe({isOpen:e,onClose:t}){const[n,s]=g.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},l=()=>{n>1&&s(n-1)},o=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],d=()=>{switch(n){case 1:return a.jsx(dFe,{data:ub});case 2:return a.jsx(uFe,{data:ub});case 3:return a.jsx(mFe,{data:ub});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:ub.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(yj,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:o.map(c=>a.jsx("button",{onClick:()=>s(c.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===c.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:c.name},c.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:l,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const vg=10;function hFe(){g.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const[e,t]=g.useState(""),[n,s]=g.useState("Filter by Stage"),[r,i]=g.useState("Filter by Owner"),[l,o]=g.useState(null),[d,c]=g.useState("Overview"),[m,h]=g.useState(!1),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(1),[C,S]=g.useState(!1),[_,A]=g.useState(null),[T,E]=g.useState(!1),[D,z]=g.useState(!1),[K,B]=g.useState(null),[O,L]=g.useState([]),[H,ae]=g.useState([]),[W,q]=g.useState([]),[le,Q]=g.useState({}),[te,V]=g.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ee,me]=g.useState(null),[we,ve]=g.useState(null),Ae={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},be=R=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[R]||R||"--",Ie=R=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[R]||"bg-gray-100 text-gray-700",G=g.useCallback(async R=>{try{const $=await re.get(`/activities/deal/${R}`);Q($.data&&typeof $.data=="object"?$.data:{})}catch($){console.error($),$.response?.status===404&&(console.warn("No activities found for this account."),Q({}))}},[]),Ce=g.useMemo(()=>{const R=e.trim().toLowerCase(),$=n.trim(),I=r.trim();return(p??[]).filter(U=>{const de=[U?.name,U?.description,U?.account?.name,U?.contact?.first_name,U?.contact?.last_name,U?.assigned_deals?.first_name,U?.assigned_deals?.last_name],ge=R===""||de.some(Fe=>Fe==null||Fe===""?!1:Fe.toString().toLowerCase().includes(R)),ue=$==="Filter by Stage"||$===""||U.stage===Ae[$]||U.stage===$,Se=I==="Filter by Owner"||I===""||`${U.assigned_deals?.first_name||""} ${U.assigned_deals?.last_name||""}`.trim().toLowerCase()===I.toLowerCase();return ge&&ue&&Se})},[p,e,n,r]),ce=Math.max(1,Math.ceil(Ce.length/vg)||1);g.useEffect(()=>{j(1)},[e,n,r]),g.useEffect(()=>{j(R=>{const $=Math.max(1,Math.ceil(Ce.length/vg)||1);return R>$?$:R})},[Ce.length]);const F=g.useMemo(()=>{const R=(v-1)*vg;return Ce.slice(R,R+vg)},[Ce,v]),ie=()=>j(R=>Math.max(R-1,1)),he=()=>j(R=>Math.min(R+1,ce)),Le=()=>{V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),z(!1),B(null),h(!0)},xe=async()=>{x(!0);try{const R=await re.get("/deals/admin/fetch-all"),I=[...Array.isArray(R.data)?R.data:[]].sort((U,de)=>{const ge=U?.created_at?new Date(U.created_at).getTime():0;return(de?.created_at?new Date(de.created_at).getTime():0)-ge});b(I)}catch(R){R.response&&R.response.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch deals. Please try again later."),console.error(R)}finally{x(!1)}},Ve=async()=>{try{const R=await re.get("/accounts/admin/fetch-all");L(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},ke=async()=>{try{const R=await re.get("/contacts/admin/fetch-all");ae(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},ye=async()=>{try{const R=await re.get("/users/all");q(Array.isArray(R.data)?R.data:[])}catch(R){console.error(R),R.response?.status===403&&Y.warn("Unable to load users (permission denied).")}};g.useEffect(()=>{xe(),Ve(),ke(),ye()},[]);const Me=async R=>{R&&(V({id:R.id||null,name:R.name||"",account_id:R.account_id?.toString()||"",primary_contact_id:R.primary_contact_id?.toString()||"",stage:R.stage||"PROPOSAL",amount:R.amount?.toString()||"",close_date:R.close_date?new Date(R.close_date).toISOString().split("T")[0]:"",assigned_to:R.assigned_to?.toString()||"",currency:R.currency||"PHP",description:R.description||""}),me(R.account||null),ve(R.contact||null),z(!0),B(R.id),o(null),h(!0))},He=async(R=!1)=>{try{const $=await re.get("/deals/admin/fetch-all"),U=[...Array.isArray($.data)?$.data:[]].sort((de,ge)=>{const ue=de?.created_at?new Date(de.created_at).getTime():0;return(ge?.created_at?new Date(ge.created_at).getTime():0)-ue});if(b(U),!R&&l&&l.id){const de=U.find(ge=>ge.id===l.id);de&&o({...de})}}catch($){console.error("Failed to refresh deal data:",$),await xe()}},Be=R=>{const $=R.name.trim();if(!$){Y.error("Deal name is required.");return}if(!R.account_id){Y.error("Account is required.");return}const I=D&&K?"update":"create",U=$;A({title:I==="create"?"Confirm New Deal":"Confirm Update",message:I==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:U}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:U}),"?"]}),confirmLabel:I==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:I,formData:R,targetId:K||null,name:U}})},dt=R=>{if(!R)return;const $=R.name||"this deal";A({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:R.id,name:$}})},M=async()=>{if(!_?.action){A(null);return}const{action:R}=_,{type:$,formData:I,targetId:U,name:de}=R;E(!0);try{if($==="create"){S(!0);const ge={name:I.name.trim(),account_id:parseInt(I.account_id),primary_contact_id:I.primary_contact_id?parseInt(I.primary_contact_id):null,stage:I.stage,amount:I.amount?parseFloat(I.amount):null,currency:I.currency||"PHP",close_date:I.close_date||null,description:I.description||null,assigned_to:I.assigned_to?parseInt(I.assigned_to):null};await re.post("/deals/admin/create",ge),Y.success(`Deal "${de}" created successfully.`),h(!1),await xe()}else if($==="update"){if(!U)throw new Error("Missing deal identifier for update.");S(!0);const ge={};I.name!==void 0&&(ge.name=I.name.trim()),I.account_id!==void 0&&I.account_id!==""&&(ge.account_id=parseInt(I.account_id)),I.primary_contact_id!==void 0&&(ge.primary_contact_id=I.primary_contact_id?parseInt(I.primary_contact_id):null),I.stage!==void 0&&(ge.stage=I.stage),I.amount!==void 0&&I.amount!==""&&(ge.amount=parseFloat(I.amount)),I.currency!==void 0&&(ge.currency=I.currency),I.close_date!==void 0&&(ge.close_date=I.close_date||null),I.description!==void 0&&(ge.description=I.description||null),I.assigned_to!==void 0&&(ge.assigned_to=I.assigned_to?parseInt(I.assigned_to):null),await re.put(`/deals/admin/${U}`,ge),Y.success(`Deal "${de}" updated successfully.`),h(!1),await xe()}else if($==="delete"){if(!U)throw new Error("Missing deal identifier for deletion.");await re.delete(`/deals/admin/${U}`),Y.success(`Deal "${de}" deleted successfully.`),l?.id===U&&o(null),await xe()}}catch(ge){console.error(ge);const ue=$==="create"?"Failed to create deal. Please review the details and try again.":$==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Se=ge.response?.data?.detail||ue;Y.error(Se)}finally{($==="create"||$==="update")&&S(!1),E(!1),A(null)}},pe=()=>{T||A(null)},se=()=>{h(!1),V({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),me(null),ve(null),z(!1),B(null),S(!1)},je=(p??[]).filter(R=>R.stage==="PROSPECTING").length,We=(p??[]).filter(R=>R.stage==="QUALIFICATION").length,Ne=(p??[]).filter(R=>R.stage==="PROPOSAL").length,qe=(p??[]).filter(R=>R.stage==="NEGOTIATION").length,De=(p??[]).filter(R=>R.stage==="CLOSED_WON").length,Je=(p??[]).filter(R=>R.stage==="CLOSED_LOST").length,at=(p??[]).filter(R=>R.stage==="CLOSED_CANCELLED").length,ot=[{title:"Prospecting",value:je,icon:hw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:We,icon:Qa,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Ne,icon:Yt,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:qe,icon:nu,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:De,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Je,icon:Cs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:at,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&a.jsx(It,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Yt,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ot.map(R=>a.jsx(pFe,{...R},R.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:e,onChange:R=>t(R.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:n,onChange:R=>s(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:r,onChange:R=>i(R.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((p??[]).map(R=>`${R.assigned_deals?.first_name} ${R.assigned_deals?.last_name}`))].map((R,$)=>a.jsx("option",{value:R,children:R},$))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),a.jsx("tbody",{children:Ce.length>0?F.map(R=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{o({...R}),G(R.id)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.deal_id?R.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:R.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:R.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.contact?.first_name&&R.contact?.last_name?`${R.contact.first_name} ${R.contact.last_name}`:R.contact?.first_name||R.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ie(R.stage)}`,children:be(R.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",R.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:R.assigned_deals?.first_name&&R.assigned_deals?.last_name?`${R.assigned_deals.first_name} ${R.assigned_deals.last_name}`:R.assigned_deals?.first_name||R.assigned_deals?.last_name||"--"})]},R.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:Ce.length,pageSize:vg,currentPage:v,onPrev:ie,onNext:he,label:"deals"}),m&&a.jsx(xFe,{onClose:se,formData:te,setFormData:V,isEditing:D,onSubmit:Be,isSubmitting:C||T,accounts:O,contacts:H,users:W,currentAccount:ee,currentContact:we}),l&&a.jsx(Ux,{relatedActs:le,selectedDeal:l,show:!!l,onClose:()=>o(null),activeTab:d,setActiveTab:c,onEdit:Me,onDelete:dt,onStatusUpdate:He}),_&&a.jsx(gFe,{open:!0,title:_.title,message:_.message,confirmLabel:_.confirmLabel,cancelLabel:_.cancelLabel,variant:_.variant,onConfirm:M,onCancel:pe,loading:T})]})}function gFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function pFe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const l=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:l,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function xFe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:l=[],contacts:o=[],users:d=[],currentAccount:c=null,currentContact:m=null}){const[h,p]=g.useState(!1),b=v=>{if(v.preventDefault(),p(!0),!t.name?.trim()){Y.error("Deal name is required.");return}const j=Number(t.amount);if(!t.amount||isNaN(j)||j<=0){Y.error("Amount must be a number greater than 0.");return}if(!t.account_id){Y.error("Please select an account.");return}if(!t.primary_contact_id){Y.error("Please select a primary contact.");return}if(!t.assigned_to){Y.error("Please assign this deal to a user.");return}r?.(t)},w=v=>{v.target.id==="modalBackdrop"&&e()},x=g.useMemo(()=>{const v=String(t.account_id||"").trim(),j=Array.isArray(o)?o:[];return v?j.filter(C=>{const _=[C?.account_id,C?.accountId,C?.account?.id,C?.account?.account_id,C?.account?.accountId].find(A=>A!=null&&String(A).trim()!=="");return _?String(_)===v:!1}):j},[o,t.account_id]);return g.useEffect(()=>{const v=String(t.account_id||"").trim(),j=String(t.primary_contact_id||"").trim();if(!j||!v)return;x.some(S=>String(S?.id)===j)||n(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,n]),a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:b,noValidate:!0,children:[a.jsx(gA,{label:"Deal Name",name:"name",value:t.name,onChange:v=>n({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:h,className:"md:col-span-2"}),a.jsx(pA,{label:"Account",value:t.account_id||"",onChange:v=>n({...t,account_id:v}),items:l||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,currentItem:c,required:!0,isSubmitted:h}),a.jsx(pA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>n({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",disabled:i,currentItem:m,required:!0,isSubmitted:h}),a.jsx(FF,{label:"Stage",name:"stage",value:t.stage,onChange:v=>n({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(gA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>n({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:h}),a.jsx(FF,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>n({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(gA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>n({...t,close_date:v.target.value}),disabled:i}),a.jsx(pA,{label:"Assign To",value:t.assigned_to||"",onChange:v=>n({...t,assigned_to:v}),items:d||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:h,className:"md:col-span-2"}),a.jsx(bFe,{label:"Description",name:"description",value:t.description,onChange:v=>n({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function gA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function FF({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function pA({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",currentItem:d=null,required:c=!1,isSubmitted:m=!1}){const h=m&&c&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(yFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,currentItem:d,hasError:h})]})}function yFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,currentItem:o=null,hasError:d=!1}){const[c,m]=g.useState(!1),[h,p]=g.useState(""),b=g.useRef(null),x=e.find(C=>String(C.id)===String(t))||o,v=x?s(x):"",j=g.useMemo(()=>{const C=h.trim().toLowerCase();return(C?e.filter(_=>(s(_)||"").toLowerCase().includes(C)):e).slice(0,l)},[e,h,s,l]);return g.useEffect(()=>{const C=S=>{b.current&&!b.current.contains(S.target)&&m(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),g.useEffect(()=>{c||p("")},[c]),a.jsxs("div",{ref:b,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?h:v,placeholder:r,onFocus:()=>!i&&m(!0),onChange:C=>{p(C.target.value),c||m(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(C=>{const S=String(C.id),_=s(C),A=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),m(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function bFe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:l=!1,className:o="",rows:d=3}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:l,rows:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function vFe({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:l,onStatusUpdate:o}){const d=bt(),[c]=Ss(),m=c.get("id"),[h,p]=g.useState(e||null),[b,w]=g.useState(s||"Overview"),{user:x}=Xt();g.useEffect(()=>{console.log("AdminDealsInformation mounted",h),console.log("User:",x)},[h,x]);const v=s!==void 0?s:b;if(g.useEffect(()=>{(async()=>{if(m&&!e)try{console.log("Fetching deal from route, ID:",m);const A=(await re.get("/deals/admin/fetch-all")).data||[];console.log("All deals fetched:",A.length);const T=A.find(E=>E.id===parseInt(m));if(console.log("Found deal:",T),T){console.log("Deal data structure:",{id:T.id,name:T.name,amount:T.amount,stage:T.stage,account:T.account,contact:T.contact,assigned_deals:T.assigned_deals,deal_creator:T.deal_creator,allKeys:Object.keys(T)});const E={...T,amount:typeof T.amount=="number"?T.amount:parseFloat(T.amount||0),probability:T.probability||0};p(E)}else console.warn("Deal not found with ID:",m)}catch(_){console.error("Error fetching deal:",_)}})()},[m,e]),!h&&!m||m&&!h)return null;const j=S=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[S]||"bg-gray-100 text-gray-700";function C(S){return S?new Date(S).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Bt,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:h.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${j(h.stage)}`,children:h.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",C(h.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",h.amount?h.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",h.probability,"% Complete "]}),(h.created_by===x?.id||h.assigned_to===x?.id)&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(h)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(Ma,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(h)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(Ot,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(S=>a.jsx("button",{onClick:()=>{r?r(S):w(S)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${v===S?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:S},S))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[v==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",h.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",h.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const S=(h?.stage||"PROSPECTING").toUpperCase(),A=(E=>E==="PROSPECTING"?0:E==="QUALIFICATION"?1:E==="PROPOSAL"?2:E==="NEGOTIATION"?3:E==="CLOSED_WON"||E==="CLOSED_LOST"?4:-1)(S);return[0,1,2,3,4].map(E=>A===E?"orange":A>E?"green":"gray").map((E,D)=>a.jsxs(pt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${E==="green"?"bg-green-500 border-green-500":E==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),D<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},D))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((S,_)=>a.jsx("span",{className:"text-center flex-1 break-words",children:S},_))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:h.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",h.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",h.contact?.first_name," ",h.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",h.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",h.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",h.assigned_deals?.first_name," ",h.assigned_deals?.last_name]})]})]})]}),v==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.description||"No notes available."})]})]}),v==="Activities"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:jt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Nt,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((S,_)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[a.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-gray-600 mt-1",children:a.jsx(S.icon,{size:24})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 break-words",children:S.title}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.desc}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),a.jsx("p",{className:"text-sm text-gray-700 break-words",children:S.user})]})]})]}),a.jsx("p",{className:"text-sm text-gray-500 break-words",children:S.date})]},_))]}),v==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:h.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(bj,{selectedDeal:h,onStatusUpdate:o,onClose:n})})]})]})]})})}const wg=10,xA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],yA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:""},Ni=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},bA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",wFe=e=>{switch(Ni(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},NFe=e=>{switch(Ni(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},mb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ng=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",jFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},vA=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},BF=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},HF=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},tw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},CFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),l=tw(i);if(l)return l}catch{}}const t=localStorage.getItem("user_id"),n=tw(t);return n||null},SFe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},_Fe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function AFe(){const e=bt();g.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[t,n]=g.useState([]),[s,r]=g.useState(!1),[i,l]=g.useState([]),[o,d]=g.useState([]),[c,m]=g.useState([]),[h,p]=g.useState([]),[b,w]=g.useState(null),[x,v]=g.useState(null),[j,C]=g.useState(!1),[S,_]=g.useState(!1),[A,T]=g.useState(!1),[E,D]=g.useState(null),[z,K]=g.useState(!1),[B,O]=g.useState(null),[L,H]=g.useState(yA),[ae,W]=g.useState(""),[q,le]=g.useState("Filter by Status"),[Q,te]=g.useState(null),[V,ee]=g.useState(1),[me,we]=g.useState("Overview"),[ve,Ae]=g.useState("Draft");g.useEffect(()=>{let Te=!0;return(async()=>{const X=CFe();if(X&&Te){w(X);return}try{const Ee=await re.get("/auth/me"),$e=tw(Ee?.data);if($e&&Te){w($e);return}}catch{}try{const Ee=await re.get("/users/me"),$e=tw(Ee?.data);if($e&&Te){w($e);return}}catch{}Te&&w(null)})(),()=>{Te=!1}},[]);const be=g.useCallback(Te=>Te&&o.find(X=>String(X.id)===String(Te))?.name||"",[o]),Ie=g.useCallback(Te=>{if(!Te)return"";const st=c.find(X=>String(X.id)===String(Te));return st?`${st.first_name} ${st.last_name}`.trim():""},[c]),G=g.useCallback(Te=>{if(!Te)return"--";const st=i.find(X=>String(X.id)===String(Te));return st?.deal_name||st?.name||`Deal #${BF(Te)}`},[i]),Ce=g.useCallback(Te=>{const st=i.find($e=>String($e.id)===String(Te)),X=SFe(st);let Ee=_Fe(st);if(!Ee&&X){const $e=c.filter(Ye=>String(Ye.account_id||"")===String(X));if($e.length>0){const Ye=[...$e].sort((J,ne)=>{const oe=`${J.first_name||""} ${J.last_name||""}`.trim().toLowerCase(),Oe=`${ne.first_name||""} ${ne.last_name||""}`.trim().toLowerCase();return oe.localeCompare(Oe)});Ee=String(Ye[0].id)}}if(X&&Ee){const $e=c.find(Ye=>String(Ye.id)===String(Ee));$e?.account_id&&String($e.account_id)!==String(X)&&(Ee="")}return{accountId:X||"",contactId:Ee||""}},[i,c]),ce=g.useCallback(Te=>{if(!Te)return"--";if(Te.deal?.deal_name)return Te.deal.deal_name;if(Te.deal?.name)return Te.deal.name;const st=Te.deal_id||Te.deal?.id;return st?G(st):"--"},[G]),F=g.useCallback(Te=>{if(!Te)return"--";if(Te.account?.name)return Te.account.name;let st=Te.account_id||Te.account?.id;if(!st){const X=Te.deal_id||Te.deal?.id;X&&(st=Ce(X).accountId)}return st?be(st)||`Account #${st}`:"--"},[Ce,be]),ie=g.useCallback(Te=>{if(!Te)return"--";if(Te.contact?.first_name||Te.contact?.last_name)return`${Te.contact?.first_name||""} ${Te.contact?.last_name||""}`.trim()||"--";let st=Te.contact_id||Te.contact?.id;if(!st){const Ee=Te.deal_id||Te.deal?.id;Ee&&(st=Ce(Ee).contactId)}return(st?Ie(st):"")||(st?`Contact #${st}`:"--")},[Ce,Ie]),he=g.useCallback(async(Te=null)=>{r(!0);try{const st=await re.get("/quotes/admin/fetch-all"),Ee=[...Array.isArray(st.data)?st.data:[]].sort(($e,Ye)=>{const J=$e?.created_at||$e?.updated_at||0,ne=Ye?.created_at||Ye?.updated_at||0;return new Date(ne)-new Date(J)});if(n(Ee),Te){const $e=Ee.find(Ye=>Ye.id===Te);v($e||null)}}catch(st){console.error(st),n([]),st.response?.status===403?Y.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):Y.error("Failed to fetch quotes. Please try again later.")}finally{r(!1)}},[]),Le=g.useCallback(async()=>{try{const Te=await re.get("/deals/admin/fetch-all");l(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te),Te.response?.status===403&&Y.warn("Unable to load deals (permission denied).")}},[]),xe=g.useCallback(async()=>{try{const Te=await re.get("/accounts/admin/fetch-all");d(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te),Te.response?.status===403&&Y.warn("Unable to load accounts (permission denied).")}},[]),Ve=g.useCallback(async()=>{try{const Te=await re.get("/contacts/admin/fetch-all");m(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te),Te.response?.status===403&&Y.warn("Unable to load contacts (permission denied).")}},[]),ke=g.useCallback(async()=>{try{const Te=await re.get("/users/all");p(Array.isArray(Te.data)?Te.data:[])}catch(Te){console.error(Te),Te.response?.status===403&&Y.warn("Unable to load users (permission denied).")}},[]);g.useEffect(()=>{he(),Le(),xe(),Ve(),ke()},[he,Le,xe,Ve,ke]);const ye=g.useMemo(()=>{const Te=ae.trim().toLowerCase(),st=q.trim();return t.filter(X=>{const Ee=ce(X),$e=F(X),Ye=ie(X),J=vA(X.presented_date,X.validity_days),ne=[X.quote_id,Ee,$e,Ye,X.total_amount?.toString(),X.validity_days?.toString(),X.presented_date?Ng(X.presented_date):"",J?Ng(J):"",X.assigned_user?.first_name,X.assigned_user?.last_name,X.creator?.first_name,X.creator?.last_name,X.status,X.notes,mb(X.created_at),mb(X.updated_at)],oe=Te===""||ne.some(et=>et==null?!1:et.toString().toLowerCase().includes(Te)),Oe=st==="Filter by Status"||Ni(X.status)===st;return oe&&Oe})},[t,ae,q,ce,F,ie]),Me=Math.max(1,Math.ceil(ye.length/wg)||1);g.useEffect(()=>ee(1),[ae,q]),g.useEffect(()=>{ee(Te=>{const st=Math.max(1,Math.ceil(ye.length/wg)||1);return Te>st?st:Te})},[ye.length]);const He=g.useMemo(()=>{const Te=(V-1)*wg;return ye.slice(Te,Te+wg)},[ye,V]),Be=()=>ee(Te=>Math.max(Te-1,1)),dt=()=>ee(Te=>Math.min(Te+1,Me)),M=Te=>{v(Te),we("Overview"),Ae(Ni(Te?.status)||"Draft")},pe=()=>{v(null),we("Overview")},se=Te=>{Te.target.id==="quoteModalBackdrop"&&!z&&pe()},je=g.useCallback(()=>{C(!1),_(!1),O(null),H(yA),T(!1)},[]),We=Te=>{Te.target.id==="modalBackdrop"&&!A&&!z&&je()},Ne=Te=>{const{name:st,value:X}=Te.target;if(st==="deal_id"){const{accountId:Ee,contactId:$e}=Ce(X);H(Ye=>({...Ye,deal_id:X,account_id:Ee,contact_id:$e}));return}H(Ee=>({...Ee,[st]:X}))},qe=()=>{H(yA),_(!1),O(null),C(!0)},De=Te=>{if(!Te)return;v(null);const st=Te.deal?.id?String(Te.deal.id):Te.deal_id?String(Te.deal_id):"",X=st?Ce(st):{accountId:"",contactId:""},Ee=Te.account?.id?String(Te.account.id):Te.account_id?String(Te.account_id):X.accountId,$e=Te.contact?.id?String(Te.contact.id):Te.contact_id?String(Te.contact_id):X.contactId,Ye=Te.assigned_user?.id?String(Te.assigned_user.id):Te.assigned_to?String(Te.assigned_to):"";H({deal_id:st,account_id:Ee||"",contact_id:$e||"",total_amount:Te.total_amount?.toString()||"",presented_date:jFe(Te.presented_date),validity_days:Te.validity_days!==null&&Te.validity_days!==void 0?String(Te.validity_days):"",status:Ni(Te.status)||"Draft",assigned_to:Ye,notes:Te.notes||""}),_(!0),O(Te.id),C(!0)},Je=Te=>{if(!Te)return;const st=Te.quote_id||"this quote";D({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:st}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Te.id,name:st}})},[at,ot]=g.useState(!1),R=Te=>{if(Te.preventDefault(),ot(!0),!b){Y.error("Unable to determine current user. Please log in again.");return}if(!L.deal_id){Y.error("Deal is required.");return}if(!L.assigned_to){Y.error("Assigned To is required.");return}const X=Ce(L.deal_id),Ee={deal_id:Number(L.deal_id),account_id:X.accountId?Number(X.accountId):null,contact_id:X.contactId?Number(X.contactId):null,total_amount:Number(L.total_amount),presented_date:L.presented_date||null,validity_days:L.validity_days===""?null:Number(L.validity_days),status:L.status||"Draft",assigned_to:L.assigned_to?Number(L.assigned_to):null,notes:L.notes?.trim()||null},$e=S&&B?"update":"create",Ye=G(L.deal_id),J=$e==="create"?{...Ee,created_by_id:Number(b)}:Ee;D({title:$e==="create"?"Confirm New Quote":"Confirm Update",message:$e==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:$e==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:$e,payload:J,targetId:B||null,name:Ye}})},$=async()=>{if(!E?.action){D(null);return}const{action:Te}=E,{type:st,payload:X,targetId:Ee,name:$e}=Te;K(!0);try{if(st==="create")T(!0),await re.post("/quotes/admin",X),Y.success("Quote created successfully."),je(),await he();else if(st==="update"){if(!Ee)throw new Error("Missing quote identifier for update.");T(!0),await re.put(`/quotes/admin/${Ee}`,X),Y.success("Quote updated successfully."),je(),await he(),x?.id===Ee&&v(null)}else if(st==="delete"){if(!Ee)throw new Error("Missing quote identifier for deletion.");const Ye=x?.id;te(Ee),await re.delete(`/quotes/admin/${Ee}`),Y.success(`Quote "${$e}" deleted successfully.`),await he(Ye&&Ye!==Ee?Ye:null),Ye===Ee&&v(null)}}catch(Ye){console.error(Ye);const J=st==="create"?"Failed to create quote. Please review the details and try again.":st==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";Y.error(J),(st==="create"||st==="update")&&T(!1),st==="delete"&&te(null)}finally{(st==="create"||st==="update")&&T(!1),st==="delete"&&te(null),K(!1),D(null)}},I=()=>{z||D(null)},U=g.useCallback((Te,st)=>{const X=Te?.deal_id??Te?.deal?.id??"",Ee=X?Number(X):null,$e=Ee?Ce(String(Ee)):{accountId:"",contactId:""},Ye=Te?.account_id??Te?.account?.id??$e.accountId??null,J=Te?.contact_id??Te?.contact?.id??$e.contactId??null,ne=Te?.total_amount??0,oe=Te?.assigned_to??Te?.assigned_user?.id??null;return{deal_id:Ee,account_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,contact_id:J!=null&&String(J).trim()!==""?Number(J):null,total_amount:Number(ne),presented_date:Te?.presented_date||null,validity_days:Te?.validity_days===""||Te?.validity_days===void 0||Te?.validity_days===null?null:Number(Te.validity_days),status:st,assigned_to:oe!=null&&String(oe).trim()!==""?Number(oe):null,notes:Te?.notes?.trim()||null}},[Ce]),de=g.useCallback(async()=>{if(!x?.id)return;const Te=Ni(ve),st=[Te,Te.toLowerCase()],X=async Ee=>re.patch(`/quotes/admin/${x.id}/status`,{status:Ee},{headers:{"Content-Type":"application/json"}});try{let Ee=!1;for(const $e of st)try{await X($e),Ee=!0;break}catch(Ye){if(Ye?.response?.status===422)continue;throw Ye}if(!Ee){const $e=U(x,Te);if(!$e.deal_id){Y.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){Y.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await re.put(`/quotes/admin/${x.id}`,$e)}Y.success(`Quote status updated to ${Te}`),v(null),we("Overview"),await he()}catch(Ee){console.error(Ee);const $e=Ee?.response?.data?.message||(Ee?.response?.data?.errors?Object.values(Ee.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";Y.error($e)}},[x,ve,he,U]),ge=[{label:"Filter by Status",value:"Filter by Status"},...xA.map(Te=>({label:Te.label,value:Te.value}))],ue=E?.action?.type==="delete"?E.action.targetId:null,Se=x&&(Q===x.id||ue===x.id),Fe=x&&Q===x.id,ft=x?a.jsx("div",{id:"quoteModalBackdrop",onClick:se,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Te=>Te.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:pe,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Ia,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ce(x)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${NFe(x.status)}`,children:bA(x.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(x),disabled:z||E?.action?.type==="update"&&E.action.targetId===x.id,children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Je(x),disabled:!!Se,children:Fe?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Te=>a.jsx("button",{onClick:()=>we(Te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${me===Te?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Te},Te))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[me==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:HF(x.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ce(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:F(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:ie(x)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:x.total_amount?`${Number(x.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:Ng(x.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:x.validity_days!==null&&x.validity_days!==void 0?x.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:Ng(vA(x.presented_date,x.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:bA(x.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:x.assigned_user?`${x.assigned_user.first_name} ${x.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:x.creator?`${x.creator.first_name} ${x.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:mb(x.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:mb(x.updated_at)||"N/A"})]})]})}),me==="Notes"&&a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:x.notes||"No notes available."})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{relatedType1:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(jt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{relatedType:"Quotes"}}}),children:[a.jsx(Nt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{relatedTo:"Quotes"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(zt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ve||Ni(x.status)||"Draft",onChange:Te=>Ae(Te.target.value),children:xA.map(Te=>a.jsx("option",{value:Te.value,children:Te.label},Te.value))}),a.jsx("button",{onClick:de,disabled:Ni(ve)===Ni(x.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ni(ve)===Ni(x.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,vt=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[s&&a.jsx(It,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(da,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{qe(),ot(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:ae,onChange:Te=>W(Te.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:q,onChange:Te=>le(Te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ge.map(Te=>a.jsx("option",{value:Te.value,children:Te.label},Te.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"})]})}),a.jsx("tbody",{children:s?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading quotes..."})}):ye.length>0?He.map(Te=>{const st=vA(Te.presented_date,Te.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>M(Te),children:[a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:HF(Te.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ce(Te)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:F(Te)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie(Te)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:Te.total_amount?`${Number(Te.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${wFe(Te.status)}`,children:bA(Te.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:Te.assigned_user?`${Te.assigned_user.first_name} ${Te.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:Ng(st)||"--"})})]},Te.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No quotes found."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:ye.length,pageSize:wg,currentPage:V,onPrev:Be,onNext:dt,label:"quotes"})]}),ze=j?a.jsx("div",{id:"modalBackdrop",onClick:We,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Te=>Te.stopPropagation(),children:[a.jsx("button",{onClick:()=>{je(),ot(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:A||z,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:S?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:R,children:[a.jsx(VF,{label:"Deal",name:"deal_id",value:L.deal_id,onChange:Te=>{const{accountId:st,contactId:X}=Ce(Te);H(Ee=>({...Ee,deal_id:Te,account_id:st,contact_id:X}))},items:Array.isArray(i)?i:[],getLabel:Te=>`${BF(Te?.deal_id??"")} ${Te?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:at,disabled:A||i.length===0,className:"md:col-span-2"}),a.jsx(GF,{label:"Account",value:be(L.account_id)||(L.account_id?`Account #${L.account_id}`:""),disabled:!0}),a.jsx(GF,{label:"Contact",value:Ie(L.contact_id)||(L.contact_id?`Contact #${L.contact_id}`:""),disabled:!0}),a.jsx(wA,{label:"Total Amount",name:"total_amount",type:"number",value:L.total_amount,onChange:Ne,placeholder:"0.00",disabled:A}),a.jsx(wA,{label:"Presented Date",name:"presented_date",type:"date",value:L.presented_date,onChange:Ne,disabled:A}),a.jsx(wA,{label:"Validity Days",name:"validity_days",type:"number",value:L.validity_days,onChange:Ne,placeholder:"30",disabled:A}),a.jsx(VF,{label:"Assigned To",value:L.assigned_to||"",onChange:Te=>H(st=>({...st,assigned_to:Te})),items:Array.isArray(h)?h:[],getLabel:Te=>{const st=`${Te?.first_name??""} ${Te?.last_name??""}`.trim();return st?Te?.role?`${st} (${Te.role})`:st:Te?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:at,disabled:A}),a.jsx(EFe,{label:"Status",name:"status",value:L.status,onChange:Ne,options:xA,required:!0,disabled:A,className:"md:col-span-2"}),a.jsx(kFe,{label:"Notes",name:"notes",value:L.notes,onChange:Ne,placeholder:"Additional details...",rows:3,disabled:A,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{je(),ot(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:A||z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:A||z,children:A?"Saving...":S?"Update Quote":"Save Quote"})]})]})]})}):null,yt=E?a.jsx(LFe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:$,onCancel:I,loading:z}):null;return a.jsxs(a.Fragment,{children:[x?ft:vt,ze,yt]})}function wA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:l=!1,disabled:o=!1,className:d="",isSubmitted:c=!1}){const m=c&&!n?.trim();return a.jsxs("div",{className:d,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:l,disabled:o,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${m?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function GF({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function VF({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:l=!1,className:o="",required:d=!1,isSubmitted:c=!1}){const m=c&&d&&!n;return a.jsxs("div",{className:o,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(TFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:l,hasError:m})]})}function TFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200,hasError:o=!1}){const[d,c]=g.useState(!1),[m,h]=g.useState(""),p=g.useRef(null),b=e.find(v=>String(v.id)===String(t)),w=b?s(b):"",x=g.useMemo(()=>{const v=m.trim().toLowerCase();return(v?e.filter(C=>(s(C)||"").toLowerCase().includes(v)):e).slice(0,l)},[e,m,s,l]);return g.useEffect(()=>{const v=j=>{p.current&&!p.current.contains(j.target)&&c(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),g.useEffect(()=>{d||h("")},[d]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:d?m:w,placeholder:r,onFocus:()=>!i&&c(!0),onChange:v=>{h(v.target.value),d||c(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${o?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:x.length>0?x.map(v=>{const j=String(v.id),C=s(v),S=String(t)===j;return a.jsx("button",{type:"button",onClick:()=>{n(j),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:C||"--"},j)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}function EFe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:l=!1,className:o=""}){const d=n!=null?String(n):"",m=r.some(h=>String(h.value)===d)?d:"";return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:m,onChange:s,required:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function kFe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:l=!1,className:o=""}){return a.jsxs("div",{className:o,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function LFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function PFe(){const{userRole:e}=Zs();return a.jsx(ij,{currentUserRole:e,currentUserId:null})}const WF=["To Do","In Progress","Review","Completed"],jg=10,DFe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},qF=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},OFe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,l=null,o=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(o=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,c=l||o||i||r,m=l?"Contact":o?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:l,deal_id:o,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:c,related_type:m}},MFe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",l=()=>e.lead?.id||e.lead_id,o=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,c=()=>e.deal?.id||e.deal_id,m=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,b=()=>i||e.contact_id,w=()=>e.deal?.name||e.deal_id;let x="Lead",v="",j="",C="",S="Lead",_="",A="",T="";const E=o(),D=p(),z=l(),K=h();if(E){x="Account",S="Account",_=D,v=String(E);const B=d(),O=c(),L=b(),H=w();B?(j="Contact",A="Contact",T=L,C=String(B)):O&&(A="Deal",j="Deal",T=H,C=String(O))}else z?(S="Lead",_=K,x="Lead",v=String(z)):e.related_type==="Account"&&(x="Account",v=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:m()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:A,relatedTo2Text:T,subject:e.title,relatedType1:x,relatedTo1:v,relatedType2:j,relatedTo2:C}};function IFe(){g.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Xt(),[n,s]=g.useState("board"),[r,i]=g.useState(!1),[l,o]=g.useState(null),[d,c]=g.useState(!1),[m,h]=g.useState([]),[p,b]=g.useState(!0),[w,x]=g.useState(""),[v,j]=g.useState("Filter by Status"),[C,S]=g.useState("Filter by Priority"),[_,A]=g.useState([]),[T,E]=g.useState(1),[D,z]=g.useState(null),[K,B]=g.useState(!1),O=bt(),L=pa(),[H,ae]=g.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});g.useEffect(()=>{const F=L.state?.openTaskModal,ie=L.state?.initialTaskData;F&&(i(!0),ie&&ae(he=>({...he,...ie})),O(L.pathname,{replace:!0,state:{}}))},[L,O]);const W=async()=>{try{const F=await re.get("/users/all");A(Array.isArray(F.data)?F.data:[])}catch(F){console.error("Failed to fetch users:",F),Y.error("Failed to fetch users.")}},q=async()=>{try{b(!0);const F=await re.get("/tasks/all"),he=(Array.isArray(F.data)?F.data:[]).map(MFe);he.sort((Le,xe)=>{const Ve=Le.createdAt?new Date(Le.createdAt):0;return(xe.createdAt?new Date(xe.createdAt):0)-Ve}),console.log("Fetched Tasks:",he),h(he),n==="list"&&E(1)}catch(F){console.error("Failed to load tasks:",F),Y.error("Failed to load tasks.")}finally{b(!1)}};g.useEffect(()=>{!t&&e&&(W(),q())},[t,e]);const le=()=>{o(null),ae({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Q=(F=null,ie=!1)=>{o(F),c(ie),F?ae({id:F.id,subject:F.title||"",description:F.description||"",priority:F.priority||"Normal",status:F.status||"Not started",dueDate:DFe(F.dueDate),assignedTo:F.assignedToId?String(F.assignedToId):"",notes:F.notes||"",relatedType1Text:F.relatedType1Text||"",relatedTo1Text:F.relatedTo1Text||"",relatedType2Text:F.relatedType2Text||"",relatedTo2Text:F.relatedTo2Text||"",relatedType1:F.relatedType1||"",relatedTo1:F.relatedTo1||"",relatedType2:F.relatedType2||"",relatedTo2:F.relatedTo2||""}):le(),i(!0)},te=()=>{i(!1),o(null),c(!1),le()},V=async F=>{const ie=OFe(F);try{l&&!d?(await re.put(`/tasks/${l.id}`,ie),Y.success("Task updated successfully.")):(await re.post("/tasks/create",ie),Y.success("Task created successfully.")),i(!1),await q()}catch(he){console.error("Failed to save task:",he);const Le=he.response?.data?.detail||"Failed to save task.";Y.error(Le)}},ee=F=>{F&&z({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:F.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id}})},me=async()=>{if(!D?.action){z(null);return}const{action:F}=D;B(!0);try{F.type==="delete"&&(await re.delete(`/tasks/${F.targetId}`),Y.success("Task deleted successfully."),await q())}catch(ie){console.error("Task action failed:",ie),Y.error("Failed to delete task.")}finally{B(!1),z(null)}},we=()=>{K||z(null)},ve=g.useMemo(()=>{const F=w.trim().toLowerCase();return[...m].sort((he,Le)=>{const xe=he.createdAt?new Date(he.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-xe}).filter(he=>{const Le=F===""||he.title?.toLowerCase().includes(F)||he.description?.toLowerCase().includes(F)||he.assignedToName?.toLowerCase().includes(F)||he.createdBy?.toLowerCase().includes(F),xe=v==="Filter by Status"||he.status===v,Ve=C==="Filter by Priority"||he.priority===C;return Le&&xe&&Ve})},[m,w,v,C]);g.useEffect(()=>{E(1)},[w,v,C,n]),g.useEffect(()=>{if(n==="list"){const F=ve.length===0?1:Math.ceil(ve.length/jg);T>F&&E(F)}},[ve.length,T,n]);const Ae=g.useMemo(()=>{if(n==="board")return ve;const F=(T-1)*jg;return ve.slice(F,F+jg)},[ve,T,n]),be=g.useMemo(()=>{const F=new Date;return[{title:"To Do",value:m.filter(ie=>ie.status==="Not started").length,icon:ds,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:m.filter(ie=>ie.status==="In progress").length,icon:Zr,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:m.filter(ie=>ie.status==="Completed").length,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:m.filter(ie=>ie.dueDate&&new Date(ie.dueDate)<F&&ie.status!=="Completed").length,icon:Ef,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:m.filter(ie=>ie.priority==="High").length,icon:So,color:"text-orange-600",bgColor:"bg-orange-100"}]},[m]),Ie=F=>F.dueDate&&new Date(F.dueDate)<new Date&&F.status!=="Completed",G=F=>{switch(F.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Ce=F=>{switch(F){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ce=F=>{switch(F){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(It,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zr,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>Q(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(na,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:be.map(F=>a.jsx($Fe,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:w,onChange:F=>x(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:v,onChange:F=>j(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),WF.map(F=>a.jsx("option",{children:F},F))]}),a.jsxs("select",{value:C,onChange:F=>S(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&ve.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&ve.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:WF.map(F=>{const ie=Ae.filter(he=>he.status===F);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:F}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ie.length})]}),a.jsx("div",{className:`space-y-3 ${ie.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ie.length>0?ie.map(he=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${G(he)}`,onClick:()=>Q(he,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:he.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",he.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",he.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Ie(he)?"text-red-600":"text-gray-600",children:he.dateAssigned?qF(he.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),Q(he)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(Ma,{})}),a.jsx("button",{type:"button",onClick:Le=>{Le.stopPropagation(),ee(he)},className:"text-red-500 hover:text-red-700",children:a.jsx(Ot,{})})]})]},he.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},F)})}),!p&&!t&&ve.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:Ae.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",F),Q(F,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:F.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(F.status||"To Do")}`,children:F.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ce(F.priority||"Low")}`,children:F.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:F.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ie(F)?"text-red-600 font-medium":""}`,children:F.dateAssigned?qF(F.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:ie=>ie.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>Q(F),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(Ma,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ee(F),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(Ot,{})," Delete"]})]})})]},F.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(Vt,{className:"mt-6",totalItems:ve.length,pageSize:jg,currentPage:ve.length===0?0:T,onPrev:()=>E(F=>Math.max(F-1,1)),onNext:()=>E(F=>Math.min(F+1,Math.max(1,Math.ceil(ve.length/jg)||1))),label:"tasks"}),a.jsx(Gx,{isOpen:r,onClose:te,onSave:V,onEdit:()=>c(!1),setFormData:ae,formData:H,isEditing:!d&&!!l,viewMode:d,users:_,currentUser:e,onDelete:ee}),D&&a.jsx(RFe,{open:!0,title:D.title,message:D.message,confirmLabel:D.confirmLabel,cancelLabel:D.cancelLabel,variant:D.variant,onConfirm:me,onCancel:we,loading:K})]})}function $Fe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function RFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}const fX=e=>e?e.toUpperCase():"",fb=e=>{const t=fX(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},zFe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},UFe=e=>{const t=fX(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},NA=10,jA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},FFe=()=>{const e=bt(),t=pa(),[n]=Ss(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";g.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,l]=g.useState([]),[o,d]=g.useState(!1),[c,m]=g.useState([]),[h,p]=g.useState(""),[b,w]=g.useState("Filter by Status"),[x,v]=g.useState(!1),[j,C]=g.useState(null),[S,_]=g.useState(1),[A,T]=g.useState(jA),[E,D]=g.useState(!1),[z,K]=g.useState(null),[B,O]=g.useState(!1),[L,H]=g.useState(null),[ae,W]=g.useState(!1);g.useEffect(()=>{const G=t.state?.openMeetingModal,Ce=t.state?.initialMeetingData?.relatedTo||n.get("id");(G||Ce)&&(v(!0),t.state?.initialMeetingData&&T(ce=>({...ce,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]);const q=async()=>{if(s&&r){const G=sessionStorage.getItem("meetingDetailData");if(G)try{const Ce=JSON.parse(G);if(Ce.id===parseInt(s)){C(Ce),sessionStorage.removeItem("meetingDetailData");return}}catch(Ce){console.error(Ce)}}d(!0);try{const G=await re.get("/meetings/admin/fetch-all"),ce=[...Array.isArray(G.data)?G.data:[]].sort((F,ie)=>{const he=F?.createdAt?new Date(F.createdAt).getTime():0;return(ie?.createdAt?new Date(ie.createdAt).getTime():0)-he});if(l(ce),s&&!j){const F=ce.find(ie=>ie.id===parseInt(s));F&&C(F)}console.log(G.data)}catch{Y.error("Failed to load meetings.")}finally{d(!1)}},le=async()=>{try{const G=await re.get("/users/all");m(Array.isArray(G.data)?G.data:[])}catch(G){console.error(G)}};g.useEffect(()=>{q(),le()},[]);const Q=G=>p(G.target.value),te=g.useMemo(()=>{const G=h.trim().toLowerCase(),Ce=b.trim().toUpperCase();return i.filter(ce=>{const F=[ce?.activity,ce?.description,ce?.relatedTo,ce?.assignedTo],ie=G===""||F.some(Le=>Le&&Le.toString().toLowerCase().includes(G)),he=Ce==="FILTER BY STATUS"||fb(ce.status||"PENDING")===Ce;return ie&&he})},[i,h,b]),V=g.useMemo(()=>{const G=(S-1)*NA;return te.slice(G,G+NA)},[te,S]),ee=()=>{v(!1),T(jA),D(!1),K(null),O(!1)},me=()=>{T(jA),D(!1),K(null),v(!0)},we=G=>{let Ce="";if(G.meet_assign_to?.id)Ce=String(G.meet_assign_to.id);else if(G.assignedTo){const ye=c.find(Me=>`${Me.first_name} ${Me.last_name}`===G.assignedTo);Ce=ye?String(ye.id):""}const ce=ye=>{if(!ye)return"";try{const Me=new Date(ye),He=Me.getTimezoneOffset()*6e4;return new Date(Me.getTime()-He).toISOString().slice(0,16)}catch{return""}};let F="Lead",ie="",he="Contact",Le="";if(G.lead)F="Lead",ie=String(G.lead.id);else if(G.account)F="Account",ie=String(G.account.id),G.contact?(he="Contact",Le=String(G.contact.id)):G.deal&&(he="Deal",Le=String(G.deal.id));else if(G.relatedType||G.related_type){const ye=G.relatedType||G.related_type,Me=G.related_to||G.relatedToId;ye==="Lead"?(F="Lead",ie=String(Me)):(F="Account",ie=G.account_id?String(G.account_id):"")}const xe={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Ve=fb(G.status),ke=xe[Ve]||"Planned";T({subject:G.subject||G.activity||"",location:G.location||"",startTime:ce(G.start_time||G.startTime),endTime:ce(G.end_time||G.endTime),status:ke,notes:G.description||G.notes||"",assignedTo:Ce,relatedType1:F,relatedTo1:ie,relatedType2:he,relatedTo2:Le}),D(!0),K(G.id),C(null),v(!0)},ve=G=>{if(!G.subject?.trim())return Y.error("Subject is required.");if(!G.startTime)return Y.error("Start time is required.");if(G.endTime&&!(new Date(G.endTime)-new Date(G.startTime)>0))return Y.error("End time must be after start time.");G.relatedType1,G.relatedTo1,G.relatedType1==="Account"&&G.relatedType2&&G.relatedTo2&&(G.relatedType2,G.relatedTo2);const Ce={...G,assignedTo:parseInt(G.assignedTo),relatedTo1:parseInt(G.relatedTo1),relatedTo2:parseInt(G.relatedTo2)},ce=E&&z?"update":"create";H({title:ce==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ce} "${Ce.subject}"?`,confirmLabel:ce==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ce,payload:Ce,targetId:z,name:Ce.subject}})},Ae=async()=>{if(!L?.action)return;const{type:G,payload:Ce,targetId:ce,name:F}=L.action;console.log(Ce),W(!0);try{G==="create"?(O(!0),await re.post("/meetings/create",Ce),Y.success(`Meeting "${F}" created.`),ee(),await q()):G==="update"?(O(!0),await re.put(`/meetings/${ce}`,Ce),Y.success(`Meeting "${F}" updated.`),ee(),await q()):G==="delete"&&(await re.delete(`/meetings/${ce}`),Y.success(`Meeting "${F}" deleted.`),j?.id===ce&&C(null),await q())}catch(ie){const he=ie.response?.data?.detail||"Action failed.";Y.error(typeof he=="string"?he:JSON.stringify(he)),console.error(he)}finally{O(!1),W(!1),H(null)}},be=G=>{H({title:"Delete Meeting",message:`Permanently delete "${G.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:G.id,name:G.activity}})},Ie=async(G,Ce)=>{try{await re.put(`/meetings/${G}`,{status:Ce}),Y.success("Status updated"),q(),C(null)}catch{Y.error("Failed to update status")}};return r&&s?j?a.jsx(Ic,{meeting:j,onClose:()=>{C(null),e("/admin/dashboard")},onEdit:we,onDelete:be,onStatusUpdate:Ie}):a.jsx(It,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(It,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Nt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:me,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(na,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx($t,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:Q,className:"w-full outline-none"})]}),a.jsxs("select",{value:b,onChange:G=>w(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:V.length>0?V.map(G=>a.jsxs("tr",{onClick:()=>C(G),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:G.subject}),a.jsxs("td",{className:"py-3 px-4",children:[G.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.lead.title}),G.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.account.name}),G.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[G.contact.first_name," ",G.contact.last_name]}),G.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:G.deal.name})]}),a.jsx("td",{className:"py-3 px-4",children:zFe(G.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[G.meet_assign_to.first_name," ",G.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${UFe(fb(G.status))}`,children:fb(G.status).replace("_"," ")})})]},G.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(Vt,{totalItems:te.length,pageSize:NA,currentPage:S,onPrev:()=>_(G=>Math.max(1,G-1)),onNext:()=>_(G=>G+1),label:"meetings"}),x&&a.jsx(xj,{onClose:ee,formData:A,setFormData:T,isEditing:E,onSubmit:ve,isSubmitting:B||ae,users:c}),j&&a.jsx(Ic,{meeting:j,onClose:()=>C(null),onEdit:we,onDelete:be,onStatusUpdate:Ie}),L&&a.jsx(BFe,{open:!0,title:L.title,message:L.message,confirmLabel:L.confirmLabel,variant:L.variant,onConfirm:Ae,onCancel:()=>H(null),loading:ae})]})};function BFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:d,disabled:l,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:o,disabled:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${c}`,children:l?"...":s})]})]})})}const HFe=10,GFe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],VFe=e=>e?String(e).toUpperCase():"",Wm=e=>{const t=VFe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},CA=e=>{const t=Wm(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},YF=e=>{switch(Wm(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},KF=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function WFe(){const[e,t]=g.useState(!1),[n,s]=g.useState(null),[r,i]=g.useState(null),[l,o]=g.useState(null),[d,c]=g.useState(null),[m,h]=g.useState([]),[p,b]=g.useState(null),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(!1),[_,A]=g.useState(!1),[T,E]=g.useState("PLANNED"),[D,z]=g.useState(!1),[K,B]=g.useState(!1),[O]=Ss(),L=bt(),H=pa(),W={subject:"",call_time:(()=>{const M=new Date,pe=M.getFullYear(),se=String(M.getMonth()+1).padStart(2,"0"),je=String(M.getDate()).padStart(2,"0");return`${pe}-${se}-${je}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[q,le]=g.useState(W);g.useEffect(()=>{const M=H.state?.openCallModal,pe=H.state?.initialCallData?.relatedTo1||O.get("id");(M||pe)&&(t(!0),H.state?.initialCallData&&le(se=>({...se,...H.state.initialCallData})),pe&&le(se=>({...se,relatedTo1:pe})),L(H.pathname,{replace:!0,state:{}}))},[H,O,L]);const Q=async()=>{try{B(!0);const M=await re.get("/calls/admin/fetch-all"),se=[...Array.isArray(M.data)?M.data:[]].sort((je,We)=>{const Ne=je?.created_at?new Date(je.created_at):0;return(We?.created_at?new Date(We.created_at):0)-Ne});h(se)}catch(M){console.error("Error fetching calls:",M),Y.error("Failed to load calls")}finally{B(!1)}},te=async()=>{try{const M=await re.get("/users/all");b(M.data)}catch(M){console.error("Error fetching users: ",M)}};g.useEffect(()=>{te(),Q()},[]);const V=[],ee="",me="Filter by Status",we="Filter by Users",ve=1,Ae=m,be=m,Ie=m.length,G=m.filter(M=>Wm(M.status)==="PLANNED").length,Ce=m.filter(M=>Wm(M.status)==="HELD").length,ce=m.filter(M=>Wm(M.status)==="NOT_HELD").length,F=[{title:"Total",value:Ie,icon:js,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:G,icon:ds,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ce,icon:en,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:ce,icon:Cs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ie,he]=g.useState("Overview"),Le=M=>{const{name:pe,value:se}=M.target;le(je=>{const We={...je,[pe]:se};return pe==="relatedType1"&&(We.relatedTo1="",se==="Lead"?(We.relatedType2=null,We.relatedTo2=null,c([])):se==="Account"&&(We.relatedType2="Contact")),pe==="relatedType2"&&(We.relatedTo2=""),We})};g.useEffect(()=>{const M=async()=>{try{o([]);let pe;q.relatedType1==="Lead"?pe=await re.get("/leads/admin/getLeads"):q.relatedType1==="Account"&&(pe=await re.get("/accounts/admin/fetch-all"));let se=[];if(pe&&Array.isArray(pe.data)?se=pe.data:se=[],w&&q.relatedTo1)try{let je;q.relatedType1==="Lead"?je=await re.get(`/leads/get/${q.relatedTo1}`):q.relatedType1==="Account"&&(je=await re.get(`/accounts/get/${q.relatedTo1}`)),je&&je.data&&(se.some(Ne=>String(Ne.id)===String(q.relatedTo1))||(se=[je.data,...se]))}catch(je){console.error("Error fetching specific related item:",je)}o(se)}catch(pe){console.error("Error fetching data:",pe),o([])}};q.relatedType1&&M()},[q.relatedType1,w,q.relatedTo1]),g.useEffect(()=>{const M=async()=>{try{c([]);let pe;if(q.relatedType1==="Account"&&q.relatedTo1)q.relatedType2==="Contact"?pe=await re.get(`/contacts/from-acc/${q.relatedTo1}`):q.relatedType2==="Deal"&&(pe=await re.get(`/deals/from-acc/${q.relatedTo1}`));else{c([]);return}let se=[];if(pe&&Array.isArray(pe.data)?se=pe.data:se=[],w&&q.relatedTo2)try{let je;q.relatedType2==="Contact"?je=await re.get(`/contacts/get/${q.relatedTo2}`):q.relatedType2==="Deal"&&(je=await re.get(`/deals/get/${q.relatedTo2}`)),je&&je.data&&(se.some(Ne=>String(Ne.id)===String(q.relatedTo2))||(se=[je.data,...se]))}catch(je){console.error("Error fetching specific related item:",je)}c(se)}catch(pe){console.error("Error fetching data:",pe),c([])}};q.relatedType2&&M()},[q.relatedType2,q.relatedTo1,q.relatedType1,w,q.relatedTo2]);const xe=M=>{if(M.preventDefault(),!q.assigned_to){Y.error("Please assign the call to a user.");return}const pe={...q,duration_minutes:q.duration_minutes?parseInt(q.duration_minutes,10):null,relatedTo1:q.relatedTo1?parseInt(q.relatedTo1,10):null,relatedTo2:q.relatedType1==="Lead"?null:q.relatedTo2?parseInt(q.relatedTo2,10):null,relatedType2:q.relatedType1==="Lead"?null:q.relatedType2,assigned_to:q.assigned_to?parseInt(q.assigned_to,10):null},se=w&&v?"update":"create",je=(q.subject||"").trim()||"Untitled Call";i({title:se==="create"?"Confirm New Call":"Confirm Update",message:se==="create"?`Create "${je}"?`:`Save changes to "${je}"?`,confirmLabel:se==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:pe,targetId:v||null,name:je}})},Ve=M=>s(M),ke=()=>{t(!1),x(!1),j(null)},ye=async()=>{if(!r?.action){i(null);return}const{action:M}=r,{type:pe,payload:se,targetId:je,name:We}=M;A(!0);try{if(pe==="create")S(!0),await re.post("/calls/create",se),Y.success(`Call "${We}" created successfully.`),t(!1),le(W),x(!1),j(null),await Q();else if(pe==="update"){if(!je)throw new Error("Missing call identifier for update.");S(!0),await re.put(`/calls/${je}`,se),Y.success(`Call "${We}" updated successfully.`),t(!1),le(W),x(!1),j(null),await Q()}else if(pe==="delete"){if(!je)throw new Error("Missing call identifier for deletion.");await re.delete(`/calls/${je}`),Y.success(`Call "${We}" deleted successfully.`),n?.id===je&&s(null),await Q()}}catch(Ne){const qe=pe==="create"?"Failed to create call. Please review the details and try again.":pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",De=Ne?.response?.data?.detail||qe;Y.error(De)}finally{(pe==="create"||pe==="update")&&S(!1),A(!1),i(null)}},Me=()=>{_||i(null)},He=async()=>{if(n?.id)try{z(!0),await re.put(`/calls/${n.id}`,{status:T}),Y.success(`Status updated to ${CA(T)}`),h(M=>Array.isArray(M)?M.map(pe=>pe.id===n.id?{...pe,status:T}:pe):M),s(null)}catch(M){const pe=M.response?.data?.detail||"Failed to update status.";Y.error(pe)}finally{z(!1)}};g.useEffect(()=>{n&&E(Wm(n.status))},[n]);const Be=n?a.jsxs("div",{id:"callModalBackdrop",onClick:M=>M.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[K&&a.jsx(It,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Ia,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${YF(n.status)}`,children:CA(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const M=Ne=>{if(!Ne)return"";const qe=new Date(Ne),De=qe.getFullYear(),Je=String(qe.getMonth()+1).padStart(2,"0"),at=String(qe.getDate()).padStart(2,"0"),ot=String(qe.getHours()).padStart(2,"0"),R=String(qe.getMinutes()).padStart(2,"0");return`${De}-${Je}-${at}T${ot}:${R}`},pe=n.lead?"Lead":n.account?"Account":"Lead",se=n.lead?n.lead.id:n.account?n.account.id:null,je=pe==="Lead"?null:n.contact?"Contact":n.deal?"Deal":"Contact",We=pe==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:null;le({subject:n.subject||"",call_time:M(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:pe,relatedType2:je,relatedTo1:se?String(se):"",relatedTo2:We?String(We):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),x(!0),j(n.id),s(null),t(!0)},children:[a.jsx(Qa,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const M=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${M}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:M}})},children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(M=>a.jsx("button",{onClick:()=>he(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ie===M?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ie==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(Wl,{label:"Call Time",value:KF(n.call_time)}),a.jsx(Wl,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(Wl,{label:"Direction",value:n.direction||"--"}),a.jsx(Wl,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(Wl,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(Wl,{label:"Account",value:n.account.name}),n.contact&&a.jsx(Wl,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(Wl,{label:"Deal",value:n.deal.name}),a.jsx(Wl,{label:"Created At",value:KF(n.created_at)})]})}),ie==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:M=>E(M.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:He,disabled:D,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:D?"Updating...":"Update"})]})]})]})]})]}):null,dt=e?a.jsx("div",{id:"modalBackdrop",onClick:M=>M.target.id==="modalBackdrop"&&ke(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:ke,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:w?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:xe,children:[a.jsx(YFe,{label:"Subject",className:"md:col-span-2",name:"subject",value:q.subject,onChange:Le,disabled:C,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType1",onChange:Le,value:q.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:C,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx(SA,{items:Array.isArray(l)?l:[],value:q.relatedTo1??"",placeholder:`Search ${q.relatedType1||"here"}...`,getLabel:M=>q.relatedType1==="Lead"?M.title:M.name??"",onChange:M=>le(pe=>({...pe,relatedTo1:M})),disabled:C})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:Le,value:q.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:q.relatedType1==="Lead"||C,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"})]}),a.jsx(SA,{disabled:q.relatedType1==="Lead"||C,items:Array.isArray(d)?d:[],value:q.relatedTo2??"",placeholder:q.relatedType1==="Lead"?"":Array.isArray(d)&&d.length>0?`Search ${q.relatedType2||"Contact"}...`:`No ${q.relatedType2||""} data found`,getLabel:M=>q.relatedType2==="Contact"?`${M.first_name??""} ${M.last_name??""}`.trim():M.name??"",onChange:M=>le(pe=>({...pe,relatedTo2:M}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:q.call_time,onChange:Le,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:q.duration_minutes,onChange:Le,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsx(SA,{items:Array.isArray(p)?p:[],value:q.assigned_to??"",placeholder:"Search an account...",getLabel:M=>`${M.first_name} ${M.last_name}`,onChange:M=>le(pe=>({...pe,assigned_to:M}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:Le,value:q.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:Le,value:q.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(KFe,{className:"col-span-2",label:"Notes",value:q.notes,onChange:Le,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:ke,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:C,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:C?"Saving...":w?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(js,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{le(W),x(!1),j(null),t(!0)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(na,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:F.map(M=>a.jsx(qFe,{...M},M.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:ee})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:me,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),GFe.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))]}),a.jsxs("select",{defaultValue:we,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),V.map(M=>a.jsx("option",{value:M.name,children:M.name},M.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:K?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(It,{message:"Loading calls..."})})}):be.length>0?be.map(M=>a.jsxs("tr",{onClick:()=>Ve(M),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:M.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[M.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.lead.title}),M.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.account.name}),M.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[M.contact.first_name," ",M.contact.last_name]}),M.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:M.deal.name})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M.call_time?new Date(M.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:M?.call_assign_to?`${M.call_assign_to.first_name} ${M.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${YF(M.status)}`,children:CA(M.status)})})]},M.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(Vt,{totalItems:Ae.length,pageSize:HFe,currentPage:ve,onPrev:()=>{},onNext:()=>{},label:"calls"})]}),Be,dt,r&&a.jsx(QFe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:ye,onCancel:Me,loading:_})]})}function qFe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function YFe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("input",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]})}function KFe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Wl({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function QFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function SA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:l=200}){const[o,d]=g.useState(!1),[c,m]=g.useState(""),h=g.useRef(null),p=e.find(x=>String(x.id)===String(t)),b=p?s(p):"",w=g.useMemo(()=>{const x=c.trim().toLowerCase();return(x?e.filter(j=>(s(j)||"").toLowerCase().includes(x)):e).slice(0,l)},[e,c,s,l]);return g.useEffect(()=>{const x=v=>{h.current&&!h.current.contains(v.target)&&d(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),g.useEffect(()=>{o||m("")},[o]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:o?c:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:x=>{m(x.target.value),o||d(!0)},className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),o&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:w.length>0?w.map(x=>{const v=String(x.id),j=s(x),C=String(t)===v;return a.jsx("button",{type:"button",onClick:()=>{n(v),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${C?"bg-blue-50":""}`,children:j||"--"},v)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>l&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",l," results  keep typing to narrow."]})]})]})}const wd=10;function XFe(){g.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=g.useState(null),[n,s]=g.useState(""),[r,i]=g.useState("Filter by Actions"),[l,o]=g.useState(1),d=async()=>{try{const v=await re.get("/logs/read-all");t(v.data)}catch(v){console.error("Error fetching audit logs:",v)}};g.useEffect(()=>{d()},[]);const c=g.useMemo(()=>{if(!Array.isArray(e))return[];const v=n.trim().toLowerCase(),j=r?.toUpperCase?.()||"ALL";return e.filter(S=>{const _=S.timestamp?new Date(S.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${S.entity_type||""} ${S.entity_name||S.entity_details?.name||S.entity_details?.title||S.entity_id||""}`,T=`${S.logger?.first_name||""} ${S.logger?.last_name||""}`,E=[_,T,S.action,S.entity_type,A,S.description],D=v===""||E.some(K=>K==null?!1:K.toString().toLowerCase().includes(v)),z=j==="FILTER BY ACTIONS"||(S.action||"").toUpperCase()===j;return D&&z}).sort((S,_)=>{const A=S.timestamp?new Date(S.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-A})},[e,n,r]),m=Math.max(1,Math.ceil(c.length/wd)||1);g.useEffect(()=>{o(1)},[n,r]),g.useEffect(()=>{o(v=>{const j=Math.max(1,Math.ceil(c.length/wd)||1);return v>j?j:v})},[c.length]);const h=g.useMemo(()=>{const v=(l-1)*wd;return c.slice(v,v+wd)},[c,l]);c.length===0||(l-1)*wd+1,Math.min(l*wd,c.length);const p=()=>o(v=>Math.max(v-1,1)),b=()=>o(v=>Math.min(v+1,m)),w=()=>{if(!c.length){wx.error("No logs to export!");return}const v=["Timestamp","User","Action","Resource","Details"],j=c.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),C=[v.join(","),...j.map(T=>T.map(E=>`"${String(E).replace(/"/g,'""')}"`).join(","))].join(`
`),S=new Blob([C],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(S),A=document.createElement("a");A.href=_,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(_)},x=v=>{switch((v||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(It,{message:"Loading audit logs..."}),a.jsx(vx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Nt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ns,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:w,children:[a.jsx(Rc,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:v=>s(v.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:v=>i(v.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(c)&&c.length>0?h.map((v,j)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(v.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${x(v.action)}`,children:v.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[v.entity_type,": ",v.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:v.description})]},j)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(Vt,{className:"mt-4",totalItems:c.length,pageSize:wd,currentPage:l,onPrev:p,onNext:b,label:"logs"})]})}const _j=[{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Cg={firstName:"",lastName:"",email:"",password:"",role:""},ZFe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},tl=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",JFe=e=>{const t=tl(e),n=_j.find(s=>tl(s.value)===t);return n?n.value:e||""},IE=e=>{const t=tl(e),n=_j.find(s=>tl(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},QF=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},_A=(e,{size:t="sm"}={})=>{const n=tl(e),s=ZFe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:IE(e)})},Nd=10,e8e=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},XF=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function t8e(){const{user:e,loading:t}=Xt(),[n,s]=g.useState([]),[r,i]=g.useState(!1),[l,o]=g.useState(""),[d,c]=g.useState(""),[m,h]=g.useState(null),[p,b]=g.useState(!1),[w,x]=g.useState(!1),[v,j]=g.useState(null),[C,S]=g.useState(Cg),[_,A]=g.useState(!1),[T,E]=g.useState(null),[D,z]=g.useState(!1),[K,B]=g.useState(1),[O,L]=g.useState("Overview"),[H,ae]=g.useState(""),[W,q]=g.useState(!1),le=tl(e?.role);console.log("meow",e);const Q=["ADMIN","CEO","GROUP_MANAGER"].includes(le),te=!t&&Q,V=g.useMemo(()=>{const M=_j.filter(pe=>tl(pe.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...M]},[]),ee=g.useCallback(M=>{M&&(s(pe=>pe.map(se=>se.id===M?{...se,highlight:!0}:se)),setTimeout(()=>{s(pe=>pe.map(se=>se.id===M?{...se,highlight:!1}:se))},2e3))},[]),me=g.useCallback(async()=>{i(!0);try{const M=await re.get("/users/all"),pe=Array.isArray(M.data)?M.data:[],se=XF(pe);s(se),h(je=>je&&(se.find(Ne=>Ne.id===je.id)||null)),console.log(M.data)}catch(M){console.error("Error fetching users:",M);const pe=M.response?.data?.detail||"Failed to load users. Please try again later.";Y.error(pe)}finally{i(!1)}},[]);g.useEffect(()=>{!t&&!Q&&e&&Y.error("You are not authorized to access User Management.")},[Q,t,e]),g.useEffect(()=>{t||!Q||me()},[t,Q,me]),g.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const we=g.useMemo(()=>{const M=l.trim().toLowerCase(),pe=tl(d);return XF(n.filter(se=>{if(!se)return!1;const je=M===""||[se.first_name,se.last_name,`${se.first_name||""} ${se.last_name||""}`,se.email,IE(se.role)].filter(Boolean).some(Ne=>Ne.toString().toLowerCase().includes(M)),We=pe===""||pe==="CEO"&&["CEO","ADMIN"].includes(tl(se.role))||tl(se.role)===pe;return je&&We}))},[n,l,d]),ve=Math.max(1,Math.ceil(we.length/Nd)||1);g.useEffect(()=>{B(1)},[l,d]),g.useEffect(()=>{B(M=>{const pe=Math.max(1,Math.ceil(we.length/Nd)||1);return M>pe?pe:M})},[we.length]);const Ae=g.useMemo(()=>{const M=(K-1)*Nd;return we.slice(M,M+Nd)},[we,K]);we.length===0||(K-1)*Nd+1,Math.min(K*Nd,we.length);const be=()=>B(M=>Math.max(M-1,1)),Ie=()=>B(M=>Math.min(M+1,ve)),G=()=>{S(Cg),x(!1),j(null),b(!0)},Ce=M=>{h(M),L("Overview"),ae(M?.is_active?"Active":"Inactive")},ce=M=>{M.target.id==="userModalBackdrop"&&!D&&F()},F=()=>{h(null)},ie=(M,pe)=>{S(se=>({...se,[M]:pe}))},he=()=>{const M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let pe="";for(let se=0;se<10;se+=1)pe+=M.charAt(Math.floor(Math.random()*M.length));ie("password",pe)},Le=()=>{_||D||(b(!1),S(Cg),j(null),x(!1))},xe=M=>{S({firstName:M.first_name||"",lastName:M.last_name||"",email:M.email||"",password:"",role:JFe(M.role)}),x(!0),j(M.id),b(!0),h(null)},Ve=M=>{E({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[M.first_name," ",M.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:M.id,name:`${M.first_name||""} ${M.last_name||""}`.trim()||M.email||"user"}})},ke=M=>{M.preventDefault();const pe=C.firstName.trim(),se=C.lastName.trim(),je=C.email.trim(),We=C.password.trim(),Ne=C.role,qe=!(w&&v);if(!pe||!je||!Ne){Y.warn("Please fill in all required fields.");return}if(qe&&!We){Y.warn("Please fill in all required fields.");return}if(We&&We.length<8){Y.warn("Password should be at least 8 characters long.");return}const De={first_name:pe,last_name:se,email:je,role:Ne};(qe||We)&&(De.password=We);const Je=`${pe} ${se}`.trim(),at=qe?"create":"update";E({title:at==="create"?"Confirm New User":"Confirm User Update",message:at==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:Je})," with role"," ",a.jsx("span",{className:"font-semibold",children:IE(Ne)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:Je||je}),"?"]}),confirmLabel:at==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:at,payload:De,targetId:v,name:Je||je}})},ye=async()=>{if(!T?.action){E(null);return}const{action:M}=T,{type:pe,payload:se,targetId:je,name:We}=M;z(!0),(pe==="create"||pe==="update")&&A(!0);try{if(pe==="create"){const qe=(await re.post("/users/createuser",se)).data;await me(),ee(qe.id),Y.success(`User "${We}" created successfully.`),b(!1),S(Cg),j(null),x(!1)}else if(pe==="update"){if(!je)throw new Error("Missing user identifier for update.");const qe=(await re.put(`/users/updateuser/${je}`,se)).data;await me(),h(null),ee(qe.id),Y.success(`User "${We}" updated successfully.`),b(!1),S(Cg),j(null),x(!1)}else if(pe==="delete"){if(!je)throw new Error("Missing user identifier for deletion.");await re.delete(`/users/deleteuser/${je}`),s(Ne=>Ne.map(qe=>qe.id===je?{...qe,is_active:!1}:qe)),m&&m.id===je&&(h(null),ae("")),Y.success(`User "${We}" deactivated successfully.`)}}catch(Ne){console.error("User management error:",Ne);const qe=pe==="create"?"Failed to create user. Please review the details and try again.":pe==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",De=Ne.response?.data?.detail||qe;Y.error(De)}finally{(pe==="create"||pe==="update")&&A(!1),z(!1),E(null)}},Me=()=>{D||E(null)},He=async()=>{if(!m||!H)return;const M=m.is_active?"Active":"Inactive";if(H===M)return;const pe=H==="Active";q(!0);try{const je=(await re.put(`/users/updateuser/${m.id}`,{is_active:pe})).data;s(We=>We.map(Ne=>Ne.id===je.id?je:Ne)),h(null),ae(""),Y.success(`User status updated to ${H}`)}catch(se){console.error("Failed to update user status:",se);const je=se.response?.data?.detail||"Failed to update user status. Please try again.";Y.error(je)}finally{q(!1)}},Be=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!te)&&a.jsx(It,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(fw,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:G,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Ga,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx($t,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:l,onChange:M=>o(M.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:d,onChange:M=>c(M.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:V.map(M=>a.jsx("option",{value:M.value,children:M.label},M.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):we.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Ae.map(M=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${M.highlight?"bg-green-50":""} ${M.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[M.first_name," ",M.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ce(M),children:M.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:_A(M.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ce(M),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${M.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:M.is_active?"Active":"Inactive"})})]},M.id))})]})}),a.jsx(Vt,{className:"mt-4",totalItems:we.length,pageSize:Nd,currentPage:K,onPrev:be,onNext:Ie,label:"users"})]}),dt=m?a.jsx("div",{id:"userModalBackdrop",onClick:ce,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:F,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Ia,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[m.profile_picture?a.jsx("img",{src:m.profile_picture,alt:`${m.first_name} ${m.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:e8e(m.first_name,m.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[m.first_name," ",m.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:m.email})]})]}),_A(m.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(m.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>xe(m),disabled:D,children:[a.jsx(Ma,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ve(m),disabled:D,children:[a.jsx(Ot,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(M=>a.jsx("button",{onClick:()=>L(M),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${O===M?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:M},M))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:O==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:m.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:_A(m.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:m.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:m.auth_provider?m.auth_provider.toString().replace(/\b\w/g,M=>M.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:m.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:m.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:m.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:m.manager?`${m.manager.first_name} ${m.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:QF(m.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:m.last_login?QF(m.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:m.profile_picture?a.jsx("a",{href:m.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!m.email){alert("No email address available");return}const M=encodeURIComponent(m.email),pe=encodeURIComponent(""),se=encodeURIComponent(""),je=`https://mail.google.com/mail/?view=cm&fs=1&to=${M}&su=${pe}&body=${se}`;window.open(je,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Ha,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:H||(m.is_active?"Active":"Inactive"),onChange:M=>ae(M.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:He,disabled:W||H===(m.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||H===(m.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[Be,dt,a.jsx(a8e,{open:p,isEditing:w,isSubmitting:_,confirmProcessing:D,formData:C,onClose:Le,onSubmit:ke,onChange:ie,onGeneratePassword:he}),a.jsx(n8e,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:D,onConfirm:ye,onCancel:Me})]})}function a8e({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:l,onChange:o,onGeneratePassword:d}){if(!e)return null;const c=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:c,children:a.jsx(Bt,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:l,children:[a.jsx(hb,{label:"First Name",value:r.firstName,onChange:m=>o("firstName",m),placeholder:"John",required:!0,disabled:c}),a.jsx(hb,{label:"Last Name",value:r.lastName,onChange:m=>o("lastName",m),placeholder:"Doe",required:!0,disabled:c}),a.jsx(hb,{label:"Email",type:"email",value:r.email,onChange:m=>o("email",m),placeholder:"john.doe@company.com",required:!0,disabled:c||t}),a.jsx(hb,{label:"Role",type:"select",value:r.role,onChange:m=>o("role",m),options:[{value:"",label:"Select role"},..._j],required:!0,disabled:c}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:m=>o("password",m.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:c,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:d,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:c,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function hb({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:l=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:d=>s(d.target.value),required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))}):a.jsx("input",{type:t,value:n??"",onChange:d=>s(d.target.value),placeholder:r,required:l,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function n8e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:l=!1,onConfirm:o,onCancel:d}){if(!e)return null;const c=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:d,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:l,children:r}),a.jsx("button",{type:"button",onClick:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${c}`,disabled:l,children:l?"Processing...":s})]})]})})}function s8e(){return a.jsxs(Yee,{children:[a.jsx($te,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),a.jsxs(Cee,{children:[a.jsx(mt,{path:"/",element:a.jsx(zne,{})}),a.jsx(mt,{path:"/header",element:a.jsx(Q8,{})}),a.jsx(mt,{path:"/signup",element:a.jsx(Rle,{})}),a.jsx(mt,{path:"/login",element:a.jsx(Ule,{})}),a.jsx(mt,{path:"/forgot-password",element:a.jsx(Hle,{})}),a.jsxs(mt,{path:"/admin",element:a.jsx($h,{requiredRole:"ceo",children:a.jsx(Wle,{})}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"dashboard",replace:!0})}),a.jsx(mt,{path:"dashboard",element:a.jsx(Rbe,{})}),a.jsx(mt,{path:"accounts",element:a.jsx(Fbe,{})}),a.jsx(mt,{path:"contacts",element:a.jsx(Vbe,{})}),a.jsx(mt,{path:"leads",element:a.jsx(Zbe,{})}),a.jsx(mt,{path:"leads/:leadID",element:a.jsx(yV,{})}),a.jsx(mt,{path:"audit",element:a.jsx(Hve,{})}),a.jsx(mt,{path:"targets",element:a.jsx(RPe,{})}),a.jsx(mt,{path:"quotes",element:a.jsx(VPe,{})}),a.jsx(mt,{path:"users",element:a.jsx(JPe,{})}),a.jsx(mt,{path:"manage-account",element:a.jsx(nDe,{})}),a.jsx(mt,{path:"company-details",element:a.jsx(IOe,{})}),a.jsx(mt,{path:"deals",element:a.jsx(sDe,{})}),a.jsx(mt,{path:"deals/info",element:a.jsx(Ux,{})}),a.jsx(mt,{path:"deals/quickaction",element:a.jsx(_K,{})}),a.jsx(mt,{path:"tasks",element:a.jsx(pOe,{})}),a.jsxs(mt,{path:"/admin/territory",children:[a.jsx(mt,{index:!0,element:a.jsx(dc,{})}),a.jsx(mt,{path:":id",element:a.jsx(dc,{})})]}),a.jsx(mt,{path:"calls",element:a.jsx(V7,{})}),a.jsx(mt,{path:"calls/info",element:a.jsx(V7,{})}),a.jsx(mt,{path:"meetings",element:a.jsx(W7,{})}),a.jsx(mt,{path:"meetings/info",element:a.jsx(W7,{})})]}),a.jsxs(mt,{path:"/sales",element:a.jsx($h,{requiredRole:"sales",children:a.jsx(ROe,{})}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"overview",replace:!0})}),a.jsx(mt,{path:"overview",element:a.jsx(zOe,{})}),a.jsx(mt,{path:"accounts",element:a.jsx(YOe,{})}),a.jsx(mt,{path:"contacts",element:a.jsx(ZOe,{})}),a.jsx(mt,{path:"leads",element:a.jsx(r5e,{})}),a.jsx(mt,{path:"leads/info",element:a.jsx(sQ,{})}),a.jsx(mt,{path:"leads/convert",element:a.jsx(b5e,{})}),a.jsx(mt,{path:"deals",element:a.jsx(v5e,{})}),a.jsx(mt,{path:"deals/info",element:a.jsx(_5e,{})}),a.jsx(mt,{path:"deals/quickaction",element:a.jsx(A5e,{})}),a.jsx(mt,{path:"quotes",element:a.jsx(O5e,{})}),a.jsx(mt,{path:"targets",element:a.jsx(z5e,{})}),a.jsx(mt,{path:"audit",element:a.jsx(U5e,{})}),a.jsx(mt,{path:"manage-account",element:a.jsx(fy,{})}),a.jsxs(mt,{path:"/sales/territory",children:[a.jsx(mt,{index:!0,element:a.jsx(dc,{})}),a.jsx(mt,{path:":id",element:a.jsx(dc,{})})]}),a.jsx(mt,{path:"meetings",element:a.jsx(K5e,{})}),a.jsx(mt,{path:"calls",element:a.jsx(eMe,{})}),a.jsx(mt,{path:"tasks",element:a.jsx(G5e,{})}),a.jsxs(mt,{path:"hub/*",element:a.jsx(FOe,{}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"mytasks",replace:!0})}),a.jsx(mt,{path:"activities",element:a.jsx(BOe,{})}),a.jsx(mt,{path:"mytasks",element:a.jsx(HOe,{})}),a.jsx(mt,{path:"pipeline",element:a.jsx(GOe,{})}),a.jsx(mt,{path:"performance",element:a.jsx(VOe,{})})]})]}),a.jsxs(mt,{path:"/manager",element:a.jsx($h,{requiredRole:"manager",children:a.jsx(iMe,{})}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"dashboard",replace:!0})}),a.jsx(mt,{path:"dashboard",element:a.jsx($Me,{})}),a.jsx(mt,{path:"accounts",element:a.jsx(UMe,{})}),a.jsx(mt,{path:"contacts",element:a.jsx(GMe,{})}),a.jsx(mt,{path:"leads",element:a.jsx(XMe,{})}),a.jsx(mt,{path:"leads/info",element:a.jsx(mQ,{})}),a.jsx(mt,{path:"leads/convert",element:a.jsx(sIe,{})}),a.jsx(mt,{path:"deals",element:a.jsx(rIe,{})}),a.jsx(mt,{path:"deals/info",element:a.jsx(uIe,{})}),a.jsx(mt,{path:"deals/quickaction",element:a.jsx(mIe,{})}),a.jsx(mt,{path:"quotes",element:a.jsx(bIe,{})}),a.jsx(mt,{path:"targets",element:a.jsx(CIe,{})}),a.jsx(mt,{path:"meetings",element:a.jsx(BIe,{})}),a.jsx(mt,{path:"audit",element:a.jsx(SIe,{})}),a.jsx(mt,{path:"calls",element:a.jsx(EIe,{})}),a.jsx(mt,{path:"tasks",element:a.jsx($Ie,{})}),a.jsxs(mt,{path:"/manager/territory",children:[a.jsx(mt,{index:!0,element:a.jsx(dc,{})}),a.jsx(mt,{path:":id",element:a.jsx(dc,{})})]}),a.jsx(mt,{path:"users",element:a.jsx(qIe,{})}),a.jsx(mt,{path:"manage-account",element:a.jsx(fy,{})})]}),a.jsx(mt,{children:a.jsxs(mt,{path:"/marketing",element:a.jsx($h,{requiredRole:"marketing",children:a.jsx(XIe,{})}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"dashboard",replace:!0})}),a.jsx(mt,{path:"dashboard",element:a.jsx(K7e,{})}),a.jsx(mt,{path:"accounts",element:a.jsx(Q7e,{})}),a.jsx(mt,{path:"contacts",element:a.jsx(Z7e,{})}),a.jsx(mt,{path:"leads",element:a.jsx(sUe,{})}),a.jsx(mt,{path:"leads/info",element:a.jsx(iX,{})}),a.jsx(mt,{path:"leads/convert",element:a.jsx(rX,{})}),a.jsx(mt,{path:"tasks",element:a.jsx(oUe,{})}),a.jsx(mt,{path:"campaigns",element:a.jsx(uUe,{})}),a.jsx(mt,{path:"templates",element:a.jsx(fUe,{})}),a.jsx(mt,{path:"manage-account",element:a.jsx(fy,{})})]})}),a.jsxs(mt,{path:"/group-manager",element:a.jsx($h,{requiredRole:"group manager",children:a.jsx(gUe,{})}),children:[a.jsx(mt,{index:!0,element:a.jsx(xr,{to:"dashboard",replace:!0})}),a.jsx(mt,{path:"dashboard",element:a.jsx(WUe,{})}),a.jsx(mt,{path:"accounts",element:a.jsx(KUe,{})}),a.jsx(mt,{path:"contacts",element:a.jsx(JUe,{})}),a.jsx(mt,{path:"leads",element:a.jsx(iFe,{})}),a.jsx(mt,{path:"leads/info",element:a.jsx(mX,{})}),a.jsx(mt,{path:"leads/convert",element:a.jsx(fFe,{})}),a.jsx(mt,{path:"deals",element:a.jsx(hFe,{})}),a.jsx(mt,{path:"deals/info",element:a.jsx(vFe,{})}),a.jsx(mt,{path:"deals/quickaction",element:a.jsx(bj,{})}),a.jsx(mt,{path:"quotes",element:a.jsx(AFe,{})}),a.jsx(mt,{path:"targets",element:a.jsx(PFe,{})}),a.jsx(mt,{path:"tasks",element:a.jsx(IFe,{})}),a.jsxs(mt,{path:"/group-manager/territory",children:[a.jsx(mt,{index:!0,element:a.jsx(dc,{})}),a.jsx(mt,{path:":id",element:a.jsx(dc,{})})]}),a.jsx(mt,{path:"meetings",element:a.jsx(FFe,{})}),a.jsx(mt,{path:"calls",element:a.jsx(WFe,{})}),a.jsx(mt,{path:"audit",element:a.jsx(XFe,{})}),a.jsx(mt,{path:"users",element:a.jsx(t8e,{})}),a.jsx(mt,{path:"manage-account",element:a.jsx(fy,{})})]})]})]})}PJ.createRoot(document.getElementById("root")).render(a.jsx(g.StrictMode,{children:a.jsx(s8e,{})}));
