function pne(e,t){for(var a=0;a<t.length;a++){const s=t[a];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();function Ki(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hS={exports:{}},tg={};var zM;function xne(){if(zM)return tg;zM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function a(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return tg.Fragment=t,tg.jsx=a,tg.jsxs=a,tg}var UM;function yne(){return UM||(UM=1,hS.exports=xne()),hS.exports}var n=yne(),gS={exports:{}},Jt={};var FM;function bne(){if(FM)return Jt;FM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;function x(K){return K===null||typeof K!="object"?null:(K=p&&K[p]||K["@@iterator"],typeof K=="function"?K:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,b={};function C(K,U,ye){this.props=K,this.context=U,this.refs=b,this.updater=ye||v}C.prototype.isReactComponent={},C.prototype.setState=function(K,U){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,U,"setState")},C.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function w(){}w.prototype=C.prototype;function S(K,U,ye){this.props=K,this.context=U,this.refs=b,this.updater=ye||v}var A=S.prototype=new w;A.constructor=S,N(A,C.prototype),A.isPureReactComponent=!0;var k=Array.isArray;function _(){}var E={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function M(K,U,ye){var pe=ye.ref;return{$$typeof:e,type:K,key:U,ref:pe!==void 0?pe:null,props:ye}}function R(K,U){return M(K.type,U,K.props)}function z(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function P(K){var U={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ye){return U[ye]})}var I=/\/+/g;function q(K,U){return typeof K=="object"&&K!==null&&K.key!=null?P(""+K.key):U.toString(36)}function Q(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(_,_):(K.status="pending",K.then(function(U){K.status==="pending"&&(K.status="fulfilled",K.value=U)},function(U){K.status==="pending"&&(K.status="rejected",K.reason=U)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function V(K,U,ye,pe,Ne){var Se=typeof K;(Se==="undefined"||Se==="boolean")&&(K=null);var Oe=!1;if(K===null)Oe=!0;else switch(Se){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(K.$$typeof){case e:case t:Oe=!0;break;case u:return Oe=K._init,V(Oe(K._payload),U,ye,pe,Ne)}}if(Oe)return Ne=Ne(K),Oe=pe===""?"."+q(K,0):pe,k(Ne)?(ye="",Oe!=null&&(ye=Oe.replace(I,"$&/")+"/"),V(Ne,U,ye,"",function(qe){return qe})):Ne!=null&&(z(Ne)&&(Ne=R(Ne,ye+(Ne.key==null||K&&K.key===Ne.key?"":(""+Ne.key).replace(I,"$&/")+"/")+Oe)),U.push(Ne)),1;Oe=0;var ke=pe===""?".":pe+":";if(k(K))for(var he=0;he<K.length;he++)pe=K[he],Se=ke+q(pe,he),Oe+=V(pe,U,ye,Se,Ne);else if(he=x(K),typeof he=="function")for(K=he.call(K),he=0;!(pe=K.next()).done;)pe=pe.value,Se=ke+q(pe,he++),Oe+=V(pe,U,ye,Se,Ne);else if(Se==="object"){if(typeof K.then=="function")return V(Q(K),U,ye,pe,Ne);throw U=String(K),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function X(K,U,ye){if(K==null)return K;var pe=[],Ne=0;return V(K,pe,"","",function(Se){return U.call(ye,Se,Ne++)}),pe}function W(K){if(K._status===-1){var U=K._result;U=U(),U.then(function(ye){(K._status===0||K._status===-1)&&(K._status=1,K._result=ye)},function(ye){(K._status===0||K._status===-1)&&(K._status=2,K._result=ye)}),K._status===-1&&(K._status=0,K._result=U)}if(K._status===1)return K._result.default;throw K._result}var ne=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},oe={map:X,forEach:function(K,U,ye){X(K,function(){U.apply(this,arguments)},ye)},count:function(K){var U=0;return X(K,function(){U++}),U},toArray:function(K){return X(K,function(U){return U})||[]},only:function(K){if(!z(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return Jt.Activity=f,Jt.Children=oe,Jt.Component=C,Jt.Fragment=a,Jt.Profiler=r,Jt.PureComponent=S,Jt.StrictMode=s,Jt.Suspense=c,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return E.H.useMemoCache(K)}},Jt.cache=function(K){return function(){return K.apply(null,arguments)}},Jt.cacheSignal=function(){return null},Jt.cloneElement=function(K,U,ye){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var pe=N({},K.props),Ne=K.key;if(U!=null)for(Se in U.key!==void 0&&(Ne=""+U.key),U)!T.call(U,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&U.ref===void 0||(pe[Se]=U[Se]);var Se=arguments.length-2;if(Se===1)pe.children=ye;else if(1<Se){for(var Oe=Array(Se),ke=0;ke<Se;ke++)Oe[ke]=arguments[ke+2];pe.children=Oe}return M(K.type,Ne,pe)},Jt.createContext=function(K){return K={$$typeof:o,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:i,_context:K},K},Jt.createElement=function(K,U,ye){var pe,Ne={},Se=null;if(U!=null)for(pe in U.key!==void 0&&(Se=""+U.key),U)T.call(U,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Ne[pe]=U[pe]);var Oe=arguments.length-2;if(Oe===1)Ne.children=ye;else if(1<Oe){for(var ke=Array(Oe),he=0;he<Oe;he++)ke[he]=arguments[he+2];Ne.children=ke}if(K&&K.defaultProps)for(pe in Oe=K.defaultProps,Oe)Ne[pe]===void 0&&(Ne[pe]=Oe[pe]);return M(K,Se,Ne)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(K){return{$$typeof:l,render:K}},Jt.isValidElement=z,Jt.lazy=function(K){return{$$typeof:u,_payload:{_status:-1,_result:K},_init:W}},Jt.memo=function(K,U){return{$$typeof:d,type:K,compare:U===void 0?null:U}},Jt.startTransition=function(K){var U=E.T,ye={};E.T=ye;try{var pe=K(),Ne=E.S;Ne!==null&&Ne(ye,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(_,ne)}catch(Se){ne(Se)}finally{U!==null&&ye.types!==null&&(U.types=ye.types),E.T=U}},Jt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Jt.use=function(K){return E.H.use(K)},Jt.useActionState=function(K,U,ye){return E.H.useActionState(K,U,ye)},Jt.useCallback=function(K,U){return E.H.useCallback(K,U)},Jt.useContext=function(K){return E.H.useContext(K)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(K,U){return E.H.useDeferredValue(K,U)},Jt.useEffect=function(K,U){return E.H.useEffect(K,U)},Jt.useEffectEvent=function(K){return E.H.useEffectEvent(K)},Jt.useId=function(){return E.H.useId()},Jt.useImperativeHandle=function(K,U,ye){return E.H.useImperativeHandle(K,U,ye)},Jt.useInsertionEffect=function(K,U){return E.H.useInsertionEffect(K,U)},Jt.useLayoutEffect=function(K,U){return E.H.useLayoutEffect(K,U)},Jt.useMemo=function(K,U){return E.H.useMemo(K,U)},Jt.useOptimistic=function(K,U){return E.H.useOptimistic(K,U)},Jt.useReducer=function(K,U,ye){return E.H.useReducer(K,U,ye)},Jt.useRef=function(K){return E.H.useRef(K)},Jt.useState=function(K){return E.H.useState(K)},Jt.useSyncExternalStore=function(K,U,ye){return E.H.useSyncExternalStore(K,U,ye)},Jt.useTransition=function(){return E.H.useTransition()},Jt.version="19.2.0",Jt}var BM;function Uf(){return BM||(BM=1,gS.exports=bne()),gS.exports}var h=Uf();const bt=Ki(h),Nu=pne({__proto__:null,default:bt},[h]);var pS={exports:{}},ng={},xS={exports:{}},yS={};var HM;function vne(){return HM||(HM=1,(function(e){function t(V,X){var W=V.length;V.push(X);e:for(;0<W;){var ne=W-1>>>1,oe=V[ne];if(0<r(oe,X))V[ne]=X,V[W]=oe,W=ne;else break e}}function a(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var X=V[0],W=V.pop();if(W!==X){V[0]=W;e:for(var ne=0,oe=V.length,K=oe>>>1;ne<K;){var U=2*(ne+1)-1,ye=V[U],pe=U+1,Ne=V[pe];if(0>r(ye,W))pe<oe&&0>r(Ne,ye)?(V[ne]=Ne,V[pe]=W,ne=pe):(V[ne]=ye,V[U]=W,ne=U);else if(pe<oe&&0>r(Ne,W))V[ne]=Ne,V[pe]=W,ne=pe;else break e}}return X}function r(V,X){var W=V.sortIndex-X.sortIndex;return W!==0?W:V.id-X.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,x=!1,v=!1,N=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function A(V){for(var X=a(d);X!==null;){if(X.callback===null)s(d);else if(X.startTime<=V)s(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=a(d)}}function k(V){if(N=!1,A(V),!v)if(a(c)!==null)v=!0,_||(_=!0,P());else{var X=a(d);X!==null&&Q(k,X.startTime-V)}}var _=!1,E=-1,T=5,M=-1;function R(){return b?!0:!(e.unstable_now()-M<T)}function z(){if(b=!1,_){var V=e.unstable_now();M=V;var X=!0;try{e:{v=!1,N&&(N=!1,w(E),E=-1),x=!0;var W=p;try{t:{for(A(V),f=a(c);f!==null&&!(f.expirationTime>V&&R());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var oe=ne(f.expirationTime<=V);if(V=e.unstable_now(),typeof oe=="function"){f.callback=oe,A(V),X=!0;break t}f===a(c)&&s(c),A(V)}else s(c);f=a(c)}if(f!==null)X=!0;else{var K=a(d);K!==null&&Q(k,K.startTime-V),X=!1}}break e}finally{f=null,p=W,x=!1}X=void 0}}finally{X?P():_=!1}}}var P;if(typeof S=="function")P=function(){S(z)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=z,P=function(){q.postMessage(null)}}else P=function(){C(z,0)};function Q(V,X){E=C(function(){V(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(V){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var W=p;p=X;try{return V()}finally{p=W}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(V,X){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=p;p=V;try{return X()}finally{p=W}},e.unstable_scheduleCallback=function(V,X,W){var ne=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ne+W:ne):W=ne,V){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=W+oe,V={id:u++,callback:X,priorityLevel:V,startTime:W,expirationTime:oe,sortIndex:-1},W>ne?(V.sortIndex=W,t(d,V),a(c)===null&&V===a(d)&&(N?(w(E),E=-1):N=!0,Q(k,W-ne))):(V.sortIndex=oe,t(c,V),v||x||(v=!0,_||(_=!0,P()))),V},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(V){var X=p;return function(){var W=p;p=X;try{return V.apply(this,arguments)}finally{p=W}}}})(yS)),yS}var qM;function wne(){return qM||(qM=1,xS.exports=vne()),xS.exports}var bS={exports:{}},Ts={};var GM;function Nne(){if(GM)return Ts;GM=1;var e=Uf();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var s={d:{f:a,r:function(){throw Error(t(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,d,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:f==null?null:""+f,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ts.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},Ts.flushSync=function(c){var d=o.T,u=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=d,s.p=u,s.d.f()}},Ts.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(c,d))},Ts.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Ts.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin),p=typeof d.integrity=="string"?d.integrity:void 0,x=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?s.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:f,integrity:p,fetchPriority:x}):u==="script"&&s.d.X(c,{crossOrigin:f,integrity:p,fetchPriority:x,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Ts.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);s.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(c)},Ts.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,f=l(u,d.crossOrigin);s.d.L(c,u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Ts.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);s.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(c)},Ts.requestFormReset=function(c){s.d.r(c)},Ts.unstable_batchedUpdates=function(c,d){return c(d)},Ts.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},Ts.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ts.version="19.2.0",Ts}var WM;function JB(){if(WM)return bS.exports;WM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bS.exports=Nne(),bS.exports}var VM;function jne(){if(VM)return ng;VM=1;var e=wne(),t=Uf(),a=JB();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function d(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,j=g;;){var L=y.return;if(L===null)break;var O=L.alternate;if(O===null){if(j=L.return,j!==null){y=j;continue}break}if(L.child===O.child){for(O=L.child;O;){if(O===y)return c(L),m;if(O===j)return c(L),g;O=O.sibling}throw Error(s(188))}if(y.return!==j.return)y=L,j=O;else{for(var Y=!1,we=L.child;we;){if(we===y){Y=!0,y=L,j=O;break}if(we===j){Y=!0,j=L,y=O;break}we=we.sibling}if(!Y){for(we=O.child;we;){if(we===y){Y=!0,y=O,j=L;break}if(we===j){Y=!0,j=O,y=L;break}we=we.sibling}if(!Y)throw Error(s(189))}}if(y.alternate!==j)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function u(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=u(m),g!==null)return g;m=m.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function P(m){return m===null||typeof m!="object"?null:(m=z&&m[z]||m["@@iterator"],typeof m=="function"?m:null)}var I=Symbol.for("react.client.reference");function q(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===I?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case N:return"Fragment";case C:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case M:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case v:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case A:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case E:return g=m.displayName||null,g!==null?g:q(m.type)||"Memo";case T:g=m._payload,m=m._init;try{return q(m(g))}catch{}}return null}var Q=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ne=[],oe=-1;function K(m){return{current:m}}function U(m){0>oe||(m.current=ne[oe],ne[oe]=null,oe--)}function ye(m,g){oe++,ne[oe]=m.current,m.current=g}var pe=K(null),Ne=K(null),Se=K(null),Oe=K(null);function ke(m,g){switch(ye(Se,g),ye(Ne,m),ye(pe,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?lM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=lM(g),m=cM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}U(pe),ye(pe,m)}function he(){U(pe),U(Ne),U(Se)}function qe(m){m.memoizedState!==null&&ye(Oe,m);var g=pe.current,y=cM(g,m.type);g!==y&&(ye(Ne,m),ye(pe,y))}function Ce(m){Ne.current===m&&(U(pe),U(Ne)),Oe.current===m&&(U(Oe),Xh._currentValue=W)}var xe,ee;function Ee(m){if(xe===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);xe=g&&g[1]||"",ee=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xe+m+ee}var Ae=!1;function Re(m,g){if(!m||Ae)return"";Ae=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var j={DetermineComponentFrameRoot:function(){try{if(g){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(dt){var it=dt}Reflect.construct(m,[],xt)}else{try{xt.call()}catch(dt){it=dt}m.call(xt.prototype)}}else{try{throw Error()}catch(dt){it=dt}(xt=m())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(dt){if(dt&&it&&typeof dt.stack=="string")return[dt.stack,it.stack]}return[null,null]}};j.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(j.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(j.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=j.DetermineComponentFrameRoot(),Y=O[0],we=O[1];if(Y&&we){var ze=Y.split(`
`),st=we.split(`
`);for(L=j=0;j<ze.length&&!ze[j].includes("DetermineComponentFrameRoot");)j++;for(;L<st.length&&!st[L].includes("DetermineComponentFrameRoot");)L++;if(j===ze.length||L===st.length)for(j=ze.length-1,L=st.length-1;1<=j&&0<=L&&ze[j]!==st[L];)L--;for(;1<=j&&0<=L;j--,L--)if(ze[j]!==st[L]){if(j!==1||L!==1)do if(j--,L--,0>L||ze[j]!==st[L]){var ut=`
`+ze[j].replace(" at new "," at ");return m.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",m.displayName)),ut}while(1<=j&&0<=L);break}}}finally{Ae=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?Ee(y):""}function et(m,g){switch(m.tag){case 26:case 27:case 5:return Ee(m.type);case 16:return Ee("Lazy");case 13:return m.child!==g&&g!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return Re(m.type,!1);case 11:return Re(m.type.render,!1);case 1:return Re(m.type,!0);case 31:return Ee("Activity");default:return""}}function De(m){try{var g="",y=null;do g+=et(m,y),y=m,m=m.return;while(m);return g}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}var tt=Object.prototype.hasOwnProperty,Je=e.unstable_scheduleCallback,H=e.unstable_cancelCallback,be=e.unstable_shouldYield,le=e.unstable_requestPaint,Z=e.unstable_now,_e=e.unstable_getCurrentPriorityLevel,te=e.unstable_ImmediatePriority,Ue=e.unstable_UserBlockingPriority,Ie=e.unstable_NormalPriority,Ge=e.unstable_LowPriority,gt=e.unstable_IdlePriority,ve=e.log,Be=e.unstable_setDisableYieldValue,nt=null,Te=null;function Qe(m){if(typeof ve=="function"&&Be(m),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(nt,m)}catch{}}var ct=Math.clz32?Math.clz32:Ze,ht=Math.log,je=Math.LN2;function Ze(m){return m>>>=0,m===0?32:31-(ht(m)/je|0)|0}var ce=256,J=262144,de=4194304;function D(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function B(m,g,y){var j=m.pendingLanes;if(j===0)return 0;var L=0,O=m.suspendedLanes,Y=m.pingedLanes;m=m.warmLanes;var we=j&134217727;return we!==0?(j=we&~O,j!==0?L=D(j):(Y&=we,Y!==0?L=D(Y):y||(y=we&~m,y!==0&&(L=D(y))))):(we=j&~O,we!==0?L=D(we):Y!==0?L=D(Y):y||(y=j&~m,y!==0&&(L=D(y)))),L===0?0:g!==0&&g!==L&&(g&O)===0&&(O=L&-L,y=g&-g,O>=y||O===32&&(y&4194048)!==0)?g:L}function ie(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function ue(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function se(){var m=de;return de<<=1,(de&62914560)===0&&(de=4194304),m}function Pe(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function ge(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function fe(m,g,y,j,L,O){var Y=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var we=m.entanglements,ze=m.expirationTimes,st=m.hiddenUpdates;for(y=Y&~y;0<y;){var ut=31-ct(y),xt=1<<ut;we[ut]=0,ze[ut]=-1;var it=st[ut];if(it!==null)for(st[ut]=null,ut=0;ut<it.length;ut++){var dt=it[ut];dt!==null&&(dt.lane&=-536870913)}y&=~xt}j!==0&&Fe(m,j,0),O!==0&&L===0&&m.tag!==0&&(m.suspendedLanes|=O&~(Y&~g))}function Fe(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var j=31-ct(g);m.entangledLanes|=g,m.entanglements[j]=m.entanglements[j]|1073741824|y&261930}function Xe(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var j=31-ct(y),L=1<<j;L&g|m[j]&g&&(m[j]|=g),y&=~L}}function pt(m,g){var y=g&-g;return y=(y&42)!==0?1:Nt(y),(y&(m.suspendedLanes|g))!==0?0:y}function Nt(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function St(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function Ht(){var m=X.p;return m!==0?m:(m=window.event,m===void 0?32:PM(m.type))}function on(m,g){var y=X.p;try{return X.p=m,g()}finally{X.p=y}}var cn=Math.random().toString(36).slice(2),re="__reactFiber$"+cn,ot="__reactProps$"+cn,zt="__reactContainer$"+cn,kt="__reactEvents$"+cn,Kt="__reactListeners$"+cn,Me="__reactHandles$"+cn,vt="__reactResources$"+cn,F="__reactMarker$"+cn;function $(m){delete m[re],delete m[ot],delete m[kt],delete m[Kt],delete m[Me]}function me(m){var g=m[re];if(g)return g;for(var y=m.parentNode;y;){if(g=y[zt]||y[re]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=pM(m);m!==null;){if(y=m[re])return y;m=pM(m)}return g}m=y,y=m.parentNode}return null}function Le(m){if(m=m[re]||m[zt]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function $e(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function Ve(m){var g=m[vt];return g||(g=m[vt]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function Ye(m){m[F]=!0}var At=new Set,Ct={};function Xt(m,g){sa(m,g),sa(m+"Capture",g)}function sa(m,g){for(Ct[m]=g,m=0;m<g.length;m++)At.add(g[m])}var fh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ZD={},JD={};function lee(m){return tt.call(JD,m)?!0:tt.call(ZD,m)?!1:fh.test(m)?JD[m]=!0:(ZD[m]=!0,!1)}function d0(m,g,y){if(lee(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var j=g.toLowerCase().slice(0,5);if(j!=="data-"&&j!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function u0(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function Vo(m,g,y,j){if(j===null)m.removeAttribute(y);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+j)}}function Gr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function e3(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function cee(m,g,y){var j=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var L=j.get,O=j.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return L.call(this)},set:function(Y){y=""+Y,O.call(this,Y)}}),Object.defineProperty(m,g,{enumerable:j.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function o1(m){if(!m._valueTracker){var g=e3(m)?"checked":"value";m._valueTracker=cee(m,g,""+m[g])}}function t3(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),j="";return m&&(j=e3(m)?m.checked?"true":"false":m.value),m=j,m!==y?(g.setValue(m),!0):!1}function m0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var dee=/[\n"\\]/g;function Wr(m){return m.replace(dee,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function l1(m,g,y,j,L,O,Y,we){m.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?m.type=Y:m.removeAttribute("type"),g!=null?Y==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Gr(g)):m.value!==""+Gr(g)&&(m.value=""+Gr(g)):Y!=="submit"&&Y!=="reset"||m.removeAttribute("value"),g!=null?c1(m,Y,Gr(g)):y!=null?c1(m,Y,Gr(y)):j!=null&&m.removeAttribute("value"),L==null&&O!=null&&(m.defaultChecked=!!O),L!=null&&(m.checked=L&&typeof L!="function"&&typeof L!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?m.name=""+Gr(we):m.removeAttribute("name")}function n3(m,g,y,j,L,O,Y,we){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(m.type=O),g!=null||y!=null){if(!(O!=="submit"&&O!=="reset"||g!=null)){o1(m);return}y=y!=null?""+Gr(y):"",g=g!=null?""+Gr(g):y,we||g===m.value||(m.value=g),m.defaultValue=g}j=j??L,j=typeof j!="function"&&typeof j!="symbol"&&!!j,m.checked=we?m.checked:!!j,m.defaultChecked=!!j,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(m.name=Y),o1(m)}function c1(m,g,y){g==="number"&&m0(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function am(m,g,y,j){if(m=m.options,g){g={};for(var L=0;L<y.length;L++)g["$"+y[L]]=!0;for(y=0;y<m.length;y++)L=g.hasOwnProperty("$"+m[y].value),m[y].selected!==L&&(m[y].selected=L),L&&j&&(m[y].defaultSelected=!0)}else{for(y=""+Gr(y),g=null,L=0;L<m.length;L++){if(m[L].value===y){m[L].selected=!0,j&&(m[L].defaultSelected=!0);return}g!==null||m[L].disabled||(g=m[L])}g!==null&&(g.selected=!0)}}function a3(m,g,y){if(g!=null&&(g=""+Gr(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+Gr(y):""}function s3(m,g,y,j){if(g==null){if(j!=null){if(y!=null)throw Error(s(92));if(Q(j)){if(1<j.length)throw Error(s(93));j=j[0]}y=j}y==null&&(y=""),g=y}y=Gr(g),m.defaultValue=y,j=m.textContent,j===y&&j!==""&&j!==null&&(m.value=j),o1(m)}function sm(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var uee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function r3(m,g,y){var j=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?j?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":j?m.setProperty(g,y):typeof y!="number"||y===0||uee.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function i3(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var j in y)!y.hasOwnProperty(j)||g!=null&&g.hasOwnProperty(j)||(j.indexOf("--")===0?m.setProperty(j,""):j==="float"?m.cssFloat="":m[j]="");for(var L in g)j=g[L],g.hasOwnProperty(L)&&y[L]!==j&&r3(m,L,j)}else for(var O in g)g.hasOwnProperty(O)&&r3(m,O,g[O])}function d1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function f0(m){return fee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Qo(){}var u1=null;function m1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var rm=null,im=null;function o3(m){var g=Le(m);if(g&&(m=g.stateNode)){var y=m[ot]||null;e:switch(m=g.stateNode,g.type){case"input":if(l1(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Wr(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var j=y[g];if(j!==m&&j.form===m.form){var L=j[ot]||null;if(!L)throw Error(s(90));l1(j,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(g=0;g<y.length;g++)j=y[g],j.form===m.form&&t3(j)}break e;case"textarea":a3(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&am(m,!!y.multiple,g,!1)}}}var f1=!1;function l3(m,g,y){if(f1)return m(g,y);f1=!0;try{var j=m(g);return j}finally{if(f1=!1,(rm!==null||im!==null)&&(ey(),rm&&(g=rm,m=im,im=rm=null,o3(g),m)))for(g=0;g<m.length;g++)o3(m[g])}}function hh(m,g){var y=m.stateNode;if(y===null)return null;var j=y[ot]||null;if(j===null)return null;y=j[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(m=m.type,j=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!j;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var Yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h1=!1;if(Yo)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){h1=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{h1=!1}var dc=null,g1=null,h0=null;function c3(){if(h0)return h0;var m,g=g1,y=g.length,j,L="value"in dc?dc.value:dc.textContent,O=L.length;for(m=0;m<y&&g[m]===L[m];m++);var Y=y-m;for(j=1;j<=Y&&g[y-j]===L[O-j];j++);return h0=L.slice(m,1<j?1-j:void 0)}function g0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function p0(){return!0}function d3(){return!1}function Xs(m){function g(y,j,L,O,Y){this._reactName=y,this._targetInst=L,this.type=j,this.nativeEvent=O,this.target=Y,this.currentTarget=null;for(var we in m)m.hasOwnProperty(we)&&(y=m[we],this[we]=y?y(O):O[we]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?p0:d3,this.isPropagationStopped=d3,this}return f(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=p0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=p0)},persist:function(){},isPersistent:p0}),g}var _d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},x0=Xs(_d),ph=f({},_d,{view:0,detail:0}),hee=Xs(ph),p1,x1,xh,y0=f({},ph,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==xh&&(xh&&m.type==="mousemove"?(p1=m.screenX-xh.screenX,x1=m.screenY-xh.screenY):x1=p1=0,xh=m),p1)},movementY:function(m){return"movementY"in m?m.movementY:x1}}),u3=Xs(y0),gee=f({},y0,{dataTransfer:0}),pee=Xs(gee),xee=f({},ph,{relatedTarget:0}),y1=Xs(xee),yee=f({},_d,{animationName:0,elapsedTime:0,pseudoElement:0}),bee=Xs(yee),vee=f({},_d,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),wee=Xs(vee),Nee=f({},_d,{data:0}),m3=Xs(Nee),jee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},See={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _ee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=See[m])?!!g[m]:!1}function b1(){return _ee}var Aee=f({},ph,{key:function(m){if(m.key){var g=jee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=g0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Cee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b1,charCode:function(m){return m.type==="keypress"?g0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?g0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Tee=Xs(Aee),Eee=f({},y0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f3=Xs(Eee),kee=f({},ph,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b1}),Lee=Xs(kee),Pee=f({},_d,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dee=Xs(Pee),Oee=f({},y0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Mee=Xs(Oee),Iee=f({},_d,{newState:0,oldState:0}),$ee=Xs(Iee),Ree=[9,13,27,32],v1=Yo&&"CompositionEvent"in window,yh=null;Yo&&"documentMode"in document&&(yh=document.documentMode);var zee=Yo&&"TextEvent"in window&&!yh,h3=Yo&&(!v1||yh&&8<yh&&11>=yh),g3=" ",p3=!1;function x3(m,g){switch(m){case"keyup":return Ree.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y3(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var om=!1;function Uee(m,g){switch(m){case"compositionend":return y3(g);case"keypress":return g.which!==32?null:(p3=!0,g3);case"textInput":return m=g.data,m===g3&&p3?null:m;default:return null}}function Fee(m,g){if(om)return m==="compositionend"||!v1&&x3(m,g)?(m=c3(),h0=g1=dc=null,om=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return h3&&g.locale!=="ko"?null:g.data;default:return null}}var Bee={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b3(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!Bee[m.type]:g==="textarea"}function v3(m,g,y,j){rm?im?im.push(j):im=[j]:rm=j,g=oy(g,"onChange"),0<g.length&&(y=new x0("onChange","change",null,y,j),m.push({event:y,listeners:g}))}var bh=null,vh=null;function Hee(m){nM(m,0)}function b0(m){var g=$e(m);if(t3(g))return m}function w3(m,g){if(m==="change")return g}var N3=!1;if(Yo){var w1;if(Yo){var N1="oninput"in document;if(!N1){var j3=document.createElement("div");j3.setAttribute("oninput","return;"),N1=typeof j3.oninput=="function"}w1=N1}else w1=!1;N3=w1&&(!document.documentMode||9<document.documentMode)}function C3(){bh&&(bh.detachEvent("onpropertychange",S3),vh=bh=null)}function S3(m){if(m.propertyName==="value"&&b0(vh)){var g=[];v3(g,vh,m,m1(m)),l3(Hee,g)}}function qee(m,g,y){m==="focusin"?(C3(),bh=g,vh=y,bh.attachEvent("onpropertychange",S3)):m==="focusout"&&C3()}function Gee(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return b0(vh)}function Wee(m,g){if(m==="click")return b0(g)}function Vee(m,g){if(m==="input"||m==="change")return b0(g)}function Qee(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var Nr=typeof Object.is=="function"?Object.is:Qee;function wh(m,g){if(Nr(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),j=Object.keys(g);if(y.length!==j.length)return!1;for(j=0;j<y.length;j++){var L=y[j];if(!tt.call(g,L)||!Nr(m[L],g[L]))return!1}return!0}function _3(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function A3(m,g){var y=_3(m);m=0;for(var j;y;){if(y.nodeType===3){if(j=m+y.textContent.length,m<=g&&j>=g)return{node:y,offset:g-m};m=j}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=_3(y)}}function T3(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?T3(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function E3(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=m0(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=m0(m.document)}return g}function j1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var Yee=Yo&&"documentMode"in document&&11>=document.documentMode,lm=null,C1=null,Nh=null,S1=!1;function k3(m,g,y){var j=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;S1||lm==null||lm!==m0(j)||(j=lm,"selectionStart"in j&&j1(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Nh&&wh(Nh,j)||(Nh=j,j=oy(C1,"onSelect"),0<j.length&&(g=new x0("onSelect","select",null,g,y),m.push({event:g,listeners:j}),g.target=lm)))}function Ad(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var cm={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionrun:Ad("Transition","TransitionRun"),transitionstart:Ad("Transition","TransitionStart"),transitioncancel:Ad("Transition","TransitionCancel"),transitionend:Ad("Transition","TransitionEnd")},_1={},L3={};Yo&&(L3=document.createElement("div").style,"AnimationEvent"in window||(delete cm.animationend.animation,delete cm.animationiteration.animation,delete cm.animationstart.animation),"TransitionEvent"in window||delete cm.transitionend.transition);function Td(m){if(_1[m])return _1[m];if(!cm[m])return m;var g=cm[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in L3)return _1[m]=g[y];return m}var P3=Td("animationend"),D3=Td("animationiteration"),O3=Td("animationstart"),Kee=Td("transitionrun"),Xee=Td("transitionstart"),Zee=Td("transitioncancel"),M3=Td("transitionend"),I3=new Map,A1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");A1.push("scrollEnd");function Ei(m,g){I3.set(m,g),Xt(g,[m])}var v0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Vr=[],dm=0,T1=0;function w0(){for(var m=dm,g=T1=dm=0;g<m;){var y=Vr[g];Vr[g++]=null;var j=Vr[g];Vr[g++]=null;var L=Vr[g];Vr[g++]=null;var O=Vr[g];if(Vr[g++]=null,j!==null&&L!==null){var Y=j.pending;Y===null?L.next=L:(L.next=Y.next,Y.next=L),j.pending=L}O!==0&&$3(y,L,O)}}function N0(m,g,y,j){Vr[dm++]=m,Vr[dm++]=g,Vr[dm++]=y,Vr[dm++]=j,T1|=j,m.lanes|=j,m=m.alternate,m!==null&&(m.lanes|=j)}function E1(m,g,y,j){return N0(m,g,y,j),j0(m)}function Ed(m,g){return N0(m,null,null,g),j0(m)}function $3(m,g,y){m.lanes|=y;var j=m.alternate;j!==null&&(j.lanes|=y);for(var L=!1,O=m.return;O!==null;)O.childLanes|=y,j=O.alternate,j!==null&&(j.childLanes|=y),O.tag===22&&(m=O.stateNode,m===null||m._visibility&1||(L=!0)),m=O,O=O.return;return m.tag===3?(O=m.stateNode,L&&g!==null&&(L=31-ct(y),m=O.hiddenUpdates,j=m[L],j===null?m[L]=[g]:j.push(g),g.lane=y|536870912),O):null}function j0(m){if(50<qh)throw qh=0,RC=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var um={};function Jee(m,g,y,j){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(m,g,y,j){return new Jee(m,g,y,j)}function k1(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Ko(m,g){var y=m.alternate;return y===null?(y=jr(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function R3(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function C0(m,g,y,j,L,O){var Y=0;if(j=m,typeof m=="function")k1(m)&&(Y=1);else if(typeof m=="string")Y=sne(m,y,pe.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case M:return m=jr(31,y,g,L),m.elementType=M,m.lanes=O,m;case N:return kd(y.children,L,O,g);case b:Y=8,L|=24;break;case C:return m=jr(12,y,g,L|2),m.elementType=C,m.lanes=O,m;case k:return m=jr(13,y,g,L),m.elementType=k,m.lanes=O,m;case _:return m=jr(19,y,g,L),m.elementType=_,m.lanes=O,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:Y=10;break e;case w:Y=9;break e;case A:Y=11;break e;case E:Y=14;break e;case T:Y=16,j=null;break e}Y=29,y=Error(s(130,m===null?"null":typeof m,"")),j=null}return g=jr(Y,y,g,L),g.elementType=m,g.type=j,g.lanes=O,g}function kd(m,g,y,j){return m=jr(7,m,j,g),m.lanes=y,m}function L1(m,g,y){return m=jr(6,m,null,g),m.lanes=y,m}function z3(m){var g=jr(18,null,null,0);return g.stateNode=m,g}function P1(m,g,y){return g=jr(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var U3=new WeakMap;function Qr(m,g){if(typeof m=="object"&&m!==null){var y=U3.get(m);return y!==void 0?y:(g={value:m,source:g,stack:De(g)},U3.set(m,g),g)}return{value:m,source:g,stack:De(g)}}var mm=[],fm=0,S0=null,jh=0,Yr=[],Kr=0,uc=null,Ji=1,eo="";function Xo(m,g){mm[fm++]=jh,mm[fm++]=S0,S0=m,jh=g}function F3(m,g,y){Yr[Kr++]=Ji,Yr[Kr++]=eo,Yr[Kr++]=uc,uc=m;var j=Ji;m=eo;var L=32-ct(j)-1;j&=~(1<<L),y+=1;var O=32-ct(g)+L;if(30<O){var Y=L-L%5;O=(j&(1<<Y)-1).toString(32),j>>=Y,L-=Y,Ji=1<<32-ct(g)+L|y<<L|j,eo=O+m}else Ji=1<<O|y<<L|j,eo=m}function D1(m){m.return!==null&&(Xo(m,1),F3(m,1,0))}function O1(m){for(;m===S0;)S0=mm[--fm],mm[fm]=null,jh=mm[--fm],mm[fm]=null;for(;m===uc;)uc=Yr[--Kr],Yr[Kr]=null,eo=Yr[--Kr],Yr[Kr]=null,Ji=Yr[--Kr],Yr[Kr]=null}function B3(m,g){Yr[Kr++]=Ji,Yr[Kr++]=eo,Yr[Kr++]=uc,Ji=g.id,eo=g.overflow,uc=m}var bs=null,Zn=null,bn=!1,mc=null,Xr=!1,M1=Error(s(519));function fc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ch(Qr(g,m)),M1}function H3(m){var g=m.stateNode,y=m.type,j=m.memoizedProps;switch(g[re]=m,g[ot]=j,y){case"dialog":fn("cancel",g),fn("close",g);break;case"iframe":case"object":case"embed":fn("load",g);break;case"video":case"audio":for(y=0;y<Wh.length;y++)fn(Wh[y],g);break;case"source":fn("error",g);break;case"img":case"image":case"link":fn("error",g),fn("load",g);break;case"details":fn("toggle",g);break;case"input":fn("invalid",g),n3(g,j.value,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name,!0);break;case"select":fn("invalid",g);break;case"textarea":fn("invalid",g),s3(g,j.value,j.defaultValue,j.children)}y=j.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||j.suppressHydrationWarning===!0||iM(g.textContent,y)?(j.popover!=null&&(fn("beforetoggle",g),fn("toggle",g)),j.onScroll!=null&&fn("scroll",g),j.onScrollEnd!=null&&fn("scrollend",g),j.onClick!=null&&(g.onclick=Qo),g=!0):g=!1,g||fc(m,!0)}function q3(m){for(bs=m.return;bs;)switch(bs.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:bs=bs.return}}function hm(m){if(m!==bs)return!1;if(!bn)return q3(m),bn=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||JC(m.type,m.memoizedProps)),y=!y),y&&Zn&&fc(m),q3(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=gM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));Zn=gM(m)}else g===27?(g=Zn,Ac(m.type)?(m=sS,sS=null,Zn=m):Zn=g):Zn=bs?Jr(m.stateNode.nextSibling):null;return!0}function Ld(){Zn=bs=null,bn=!1}function I1(){var m=mc;return m!==null&&(tr===null?tr=m:tr.push.apply(tr,m),mc=null),m}function Ch(m){mc===null?mc=[m]:mc.push(m)}var $1=K(null),Pd=null,Zo=null;function hc(m,g,y){ye($1,g._currentValue),g._currentValue=y}function Jo(m){m._currentValue=$1.current,U($1)}function R1(m,g,y){for(;m!==null;){var j=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,j!==null&&(j.childLanes|=g)):j!==null&&(j.childLanes&g)!==g&&(j.childLanes|=g),m===y)break;m=m.return}}function z1(m,g,y,j){var L=m.child;for(L!==null&&(L.return=m);L!==null;){var O=L.dependencies;if(O!==null){var Y=L.child;O=O.firstContext;e:for(;O!==null;){var we=O;O=L;for(var ze=0;ze<g.length;ze++)if(we.context===g[ze]){O.lanes|=y,we=O.alternate,we!==null&&(we.lanes|=y),R1(O.return,y,m),j||(Y=null);break e}O=we.next}}else if(L.tag===18){if(Y=L.return,Y===null)throw Error(s(341));Y.lanes|=y,O=Y.alternate,O!==null&&(O.lanes|=y),R1(Y,y,m),Y=null}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===m){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}}function gm(m,g,y,j){m=null;for(var L=g,O=!1;L!==null;){if(!O){if((L.flags&524288)!==0)O=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var Y=L.alternate;if(Y===null)throw Error(s(387));if(Y=Y.memoizedProps,Y!==null){var we=L.type;Nr(L.pendingProps.value,Y.value)||(m!==null?m.push(we):m=[we])}}else if(L===Oe.current){if(Y=L.alternate,Y===null)throw Error(s(387));Y.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(m!==null?m.push(Xh):m=[Xh])}L=L.return}m!==null&&z1(g,m,y,j),g.flags|=262144}function _0(m){for(m=m.firstContext;m!==null;){if(!Nr(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Dd(m){Pd=m,Zo=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function vs(m){return G3(Pd,m)}function A0(m,g){return Pd===null&&Dd(m),G3(m,g)}function G3(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},Zo===null){if(m===null)throw Error(s(308));Zo=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else Zo=Zo.next=g;return y}var ete=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,j){m.push(j)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},tte=e.unstable_scheduleCallback,nte=e.unstable_NormalPriority,Ia={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function U1(){return{controller:new ete,data:new Map,refCount:0}}function Sh(m){m.refCount--,m.refCount===0&&tte(nte,function(){m.controller.abort()})}var _h=null,F1=0,pm=0,xm=null;function ate(m,g){if(_h===null){var y=_h=[];F1=0,pm=qC(),xm={status:"pending",value:void 0,then:function(j){y.push(j)}}}return F1++,g.then(W3,W3),g}function W3(){if(--F1===0&&_h!==null){xm!==null&&(xm.status="fulfilled");var m=_h;_h=null,pm=0,xm=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function ste(m,g){var y=[],j={status:"pending",value:null,reason:null,then:function(L){y.push(L)}};return m.then(function(){j.status="fulfilled",j.value=g;for(var L=0;L<y.length;L++)(0,y[L])(g)},function(L){for(j.status="rejected",j.reason=L,L=0;L<y.length;L++)(0,y[L])(void 0)}),j}var V3=V.S;V.S=function(m,g){k5=Z(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&ate(m,g),V3!==null&&V3(m,g)};var Od=K(null);function B1(){var m=Od.current;return m!==null?m:qn.pooledCache}function T0(m,g){g===null?ye(Od,Od.current):ye(Od,g.pool)}function Q3(){var m=B1();return m===null?null:{parent:Ia._currentValue,pool:m}}var ym=Error(s(460)),H1=Error(s(474)),E0=Error(s(542)),k0={then:function(){}};function Y3(m){return m=m.status,m==="fulfilled"||m==="rejected"}function K3(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Qo,Qo),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,Z3(m),m;default:if(typeof g.status=="string")g.then(Qo,Qo);else{if(m=qn,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(j){if(g.status==="pending"){var L=g;L.status="fulfilled",L.value=j}},function(j){if(g.status==="pending"){var L=g;L.status="rejected",L.reason=j}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,Z3(m),m}throw Id=g,ym}}function Md(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Id=y,ym):y}}var Id=null;function X3(){if(Id===null)throw Error(s(459));var m=Id;return Id=null,m}function Z3(m){if(m===ym||m===E0)throw Error(s(483))}var bm=null,Ah=0;function L0(m){var g=Ah;return Ah+=1,bm===null&&(bm=[]),K3(bm,m,g)}function Th(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function P0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function J3(m){function g(Ke,He){if(m){var at=Ke.deletions;at===null?(Ke.deletions=[He],Ke.flags|=16):at.push(He)}}function y(Ke,He){if(!m)return null;for(;He!==null;)g(Ke,He),He=He.sibling;return null}function j(Ke){for(var He=new Map;Ke!==null;)Ke.key!==null?He.set(Ke.key,Ke):He.set(Ke.index,Ke),Ke=Ke.sibling;return He}function L(Ke,He){return Ke=Ko(Ke,He),Ke.index=0,Ke.sibling=null,Ke}function O(Ke,He,at){return Ke.index=at,m?(at=Ke.alternate,at!==null?(at=at.index,at<He?(Ke.flags|=67108866,He):at):(Ke.flags|=67108866,He)):(Ke.flags|=1048576,He)}function Y(Ke){return m&&Ke.alternate===null&&(Ke.flags|=67108866),Ke}function we(Ke,He,at,ft){return He===null||He.tag!==6?(He=L1(at,Ke.mode,ft),He.return=Ke,He):(He=L(He,at),He.return=Ke,He)}function ze(Ke,He,at,ft){var qt=at.type;return qt===N?ut(Ke,He,at.props.children,ft,at.key):He!==null&&(He.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===T&&Md(qt)===He.type)?(He=L(He,at.props),Th(He,at),He.return=Ke,He):(He=C0(at.type,at.key,at.props,null,Ke.mode,ft),Th(He,at),He.return=Ke,He)}function st(Ke,He,at,ft){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=P1(at,Ke.mode,ft),He.return=Ke,He):(He=L(He,at.children||[]),He.return=Ke,He)}function ut(Ke,He,at,ft,qt){return He===null||He.tag!==7?(He=kd(at,Ke.mode,ft,qt),He.return=Ke,He):(He=L(He,at),He.return=Ke,He)}function xt(Ke,He,at){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=L1(""+He,Ke.mode,at),He.return=Ke,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case x:return at=C0(He.type,He.key,He.props,null,Ke.mode,at),Th(at,He),at.return=Ke,at;case v:return He=P1(He,Ke.mode,at),He.return=Ke,He;case T:return He=Md(He),xt(Ke,He,at)}if(Q(He)||P(He))return He=kd(He,Ke.mode,at,null),He.return=Ke,He;if(typeof He.then=="function")return xt(Ke,L0(He),at);if(He.$$typeof===S)return xt(Ke,A0(Ke,He),at);P0(Ke,He)}return null}function it(Ke,He,at,ft){var qt=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return qt!==null?null:we(Ke,He,""+at,ft);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case x:return at.key===qt?ze(Ke,He,at,ft):null;case v:return at.key===qt?st(Ke,He,at,ft):null;case T:return at=Md(at),it(Ke,He,at,ft)}if(Q(at)||P(at))return qt!==null?null:ut(Ke,He,at,ft,null);if(typeof at.then=="function")return it(Ke,He,L0(at),ft);if(at.$$typeof===S)return it(Ke,He,A0(Ke,at),ft);P0(Ke,at)}return null}function dt(Ke,He,at,ft,qt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ke=Ke.get(at)||null,we(He,Ke,""+ft,qt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case x:return Ke=Ke.get(ft.key===null?at:ft.key)||null,ze(He,Ke,ft,qt);case v:return Ke=Ke.get(ft.key===null?at:ft.key)||null,st(He,Ke,ft,qt);case T:return ft=Md(ft),dt(Ke,He,at,ft,qt)}if(Q(ft)||P(ft))return Ke=Ke.get(at)||null,ut(He,Ke,ft,qt,null);if(typeof ft.then=="function")return dt(Ke,He,at,L0(ft),qt);if(ft.$$typeof===S)return dt(Ke,He,at,A0(He,ft),qt);P0(He,ft)}return null}function Mt(Ke,He,at,ft){for(var qt=null,Cn=null,Ut=He,ln=He=0,pn=null;Ut!==null&&ln<at.length;ln++){Ut.index>ln?(pn=Ut,Ut=null):pn=Ut.sibling;var Sn=it(Ke,Ut,at[ln],ft);if(Sn===null){Ut===null&&(Ut=pn);break}m&&Ut&&Sn.alternate===null&&g(Ke,Ut),He=O(Sn,He,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn,Ut=pn}if(ln===at.length)return y(Ke,Ut),bn&&Xo(Ke,ln),qt;if(Ut===null){for(;ln<at.length;ln++)Ut=xt(Ke,at[ln],ft),Ut!==null&&(He=O(Ut,He,ln),Cn===null?qt=Ut:Cn.sibling=Ut,Cn=Ut);return bn&&Xo(Ke,ln),qt}for(Ut=j(Ut);ln<at.length;ln++)pn=dt(Ut,Ke,ln,at[ln],ft),pn!==null&&(m&&pn.alternate!==null&&Ut.delete(pn.key===null?ln:pn.key),He=O(pn,He,ln),Cn===null?qt=pn:Cn.sibling=pn,Cn=pn);return m&&Ut.forEach(function(Pc){return g(Ke,Pc)}),bn&&Xo(Ke,ln),qt}function Vt(Ke,He,at,ft){if(at==null)throw Error(s(151));for(var qt=null,Cn=null,Ut=He,ln=He=0,pn=null,Sn=at.next();Ut!==null&&!Sn.done;ln++,Sn=at.next()){Ut.index>ln?(pn=Ut,Ut=null):pn=Ut.sibling;var Pc=it(Ke,Ut,Sn.value,ft);if(Pc===null){Ut===null&&(Ut=pn);break}m&&Ut&&Pc.alternate===null&&g(Ke,Ut),He=O(Pc,He,ln),Cn===null?qt=Pc:Cn.sibling=Pc,Cn=Pc,Ut=pn}if(Sn.done)return y(Ke,Ut),bn&&Xo(Ke,ln),qt;if(Ut===null){for(;!Sn.done;ln++,Sn=at.next())Sn=xt(Ke,Sn.value,ft),Sn!==null&&(He=O(Sn,He,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn);return bn&&Xo(Ke,ln),qt}for(Ut=j(Ut);!Sn.done;ln++,Sn=at.next())Sn=dt(Ut,Ke,ln,Sn.value,ft),Sn!==null&&(m&&Sn.alternate!==null&&Ut.delete(Sn.key===null?ln:Sn.key),He=O(Sn,He,ln),Cn===null?qt=Sn:Cn.sibling=Sn,Cn=Sn);return m&&Ut.forEach(function(gne){return g(Ke,gne)}),bn&&Xo(Ke,ln),qt}function Fn(Ke,He,at,ft){if(typeof at=="object"&&at!==null&&at.type===N&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case x:e:{for(var qt=at.key;He!==null;){if(He.key===qt){if(qt=at.type,qt===N){if(He.tag===7){y(Ke,He.sibling),ft=L(He,at.props.children),ft.return=Ke,Ke=ft;break e}}else if(He.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===T&&Md(qt)===He.type){y(Ke,He.sibling),ft=L(He,at.props),Th(ft,at),ft.return=Ke,Ke=ft;break e}y(Ke,He);break}else g(Ke,He);He=He.sibling}at.type===N?(ft=kd(at.props.children,Ke.mode,ft,at.key),ft.return=Ke,Ke=ft):(ft=C0(at.type,at.key,at.props,null,Ke.mode,ft),Th(ft,at),ft.return=Ke,Ke=ft)}return Y(Ke);case v:e:{for(qt=at.key;He!==null;){if(He.key===qt)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){y(Ke,He.sibling),ft=L(He,at.children||[]),ft.return=Ke,Ke=ft;break e}else{y(Ke,He);break}else g(Ke,He);He=He.sibling}ft=P1(at,Ke.mode,ft),ft.return=Ke,Ke=ft}return Y(Ke);case T:return at=Md(at),Fn(Ke,He,at,ft)}if(Q(at))return Mt(Ke,He,at,ft);if(P(at)){if(qt=P(at),typeof qt!="function")throw Error(s(150));return at=qt.call(at),Vt(Ke,He,at,ft)}if(typeof at.then=="function")return Fn(Ke,He,L0(at),ft);if(at.$$typeof===S)return Fn(Ke,He,A0(Ke,at),ft);P0(Ke,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,He!==null&&He.tag===6?(y(Ke,He.sibling),ft=L(He,at),ft.return=Ke,Ke=ft):(y(Ke,He),ft=L1(at,Ke.mode,ft),ft.return=Ke,Ke=ft),Y(Ke)):y(Ke,He)}return function(Ke,He,at,ft){try{Ah=0;var qt=Fn(Ke,He,at,ft);return bm=null,qt}catch(Ut){if(Ut===ym||Ut===E0)throw Ut;var Cn=jr(29,Ut,null,Ke.mode);return Cn.lanes=ft,Cn.return=Ke,Cn}}}var $d=J3(!0),eO=J3(!1),gc=!1;function q1(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function G1(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function pc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function xc(m,g,y){var j=m.updateQueue;if(j===null)return null;if(j=j.shared,(An&2)!==0){var L=j.pending;return L===null?g.next=g:(g.next=L.next,L.next=g),j.pending=g,g=j0(m),$3(m,null,y),g}return N0(m,j,g,y),j0(m)}function Eh(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,Xe(m,y)}}function W1(m,g){var y=m.updateQueue,j=m.alternate;if(j!==null&&(j=j.updateQueue,y===j)){var L=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?L=O=Y:O=O.next=Y,y=y.next}while(y!==null);O===null?L=O=g:O=O.next=g}else L=O=g;y={baseState:j.baseState,firstBaseUpdate:L,lastBaseUpdate:O,shared:j.shared,callbacks:j.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var V1=!1;function kh(){if(V1){var m=xm;if(m!==null)throw m}}function Lh(m,g,y,j){V1=!1;var L=m.updateQueue;gc=!1;var O=L.firstBaseUpdate,Y=L.lastBaseUpdate,we=L.shared.pending;if(we!==null){L.shared.pending=null;var ze=we,st=ze.next;ze.next=null,Y===null?O=st:Y.next=st,Y=ze;var ut=m.alternate;ut!==null&&(ut=ut.updateQueue,we=ut.lastBaseUpdate,we!==Y&&(we===null?ut.firstBaseUpdate=st:we.next=st,ut.lastBaseUpdate=ze))}if(O!==null){var xt=L.baseState;Y=0,ut=st=ze=null,we=O;do{var it=we.lane&-536870913,dt=it!==we.lane;if(dt?(gn&it)===it:(j&it)===it){it!==0&&it===pm&&(V1=!0),ut!==null&&(ut=ut.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Mt=m,Vt=we;it=g;var Fn=y;switch(Vt.tag){case 1:if(Mt=Vt.payload,typeof Mt=="function"){xt=Mt.call(Fn,xt,it);break e}xt=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Vt.payload,it=typeof Mt=="function"?Mt.call(Fn,xt,it):Mt,it==null)break e;xt=f({},xt,it);break e;case 2:gc=!0}}it=we.callback,it!==null&&(m.flags|=64,dt&&(m.flags|=8192),dt=L.callbacks,dt===null?L.callbacks=[it]:dt.push(it))}else dt={lane:it,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ut===null?(st=ut=dt,ze=xt):ut=ut.next=dt,Y|=it;if(we=we.next,we===null){if(we=L.shared.pending,we===null)break;dt=we,we=dt.next,dt.next=null,L.lastBaseUpdate=dt,L.shared.pending=null}}while(!0);ut===null&&(ze=xt),L.baseState=ze,L.firstBaseUpdate=st,L.lastBaseUpdate=ut,O===null&&(L.shared.lanes=0),Nc|=Y,m.lanes=Y,m.memoizedState=xt}}function tO(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function nO(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)tO(y[m],g)}var vm=K(null),D0=K(0);function aO(m,g){m=ll,ye(D0,m),ye(vm,g),ll=m|g.baseLanes}function Q1(){ye(D0,ll),ye(vm,vm.current)}function Y1(){ll=D0.current,U(vm),U(D0)}var Cr=K(null),Zr=null;function yc(m){var g=m.alternate;ye(Ea,Ea.current&1),ye(Cr,m),Zr===null&&(g===null||vm.current!==null||g.memoizedState!==null)&&(Zr=m)}function K1(m){ye(Ea,Ea.current),ye(Cr,m),Zr===null&&(Zr=m)}function sO(m){m.tag===22?(ye(Ea,Ea.current),ye(Cr,m),Zr===null&&(Zr=m)):bc()}function bc(){ye(Ea,Ea.current),ye(Cr,Cr.current)}function Sr(m){U(Cr),Zr===m&&(Zr=null),U(Ea)}var Ea=K(0);function O0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||nS(y)||aS(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var el=0,an=null,zn=null,$a=null,M0=!1,wm=!1,Rd=!1,I0=0,Ph=0,Nm=null,rte=0;function ba(){throw Error(s(321))}function X1(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!Nr(m[y],g[y]))return!1;return!0}function Z1(m,g,y,j,L,O){return el=O,an=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,V.H=m===null||m.memoizedState===null?FO:fC,Rd=!1,O=y(j,L),Rd=!1,wm&&(O=iO(g,y,j,L)),rO(m),O}function rO(m){V.H=Mh;var g=zn!==null&&zn.next!==null;if(el=0,$a=zn=an=null,M0=!1,Ph=0,Nm=null,g)throw Error(s(300));m===null||Ra||(m=m.dependencies,m!==null&&_0(m)&&(Ra=!0))}function iO(m,g,y,j){an=m;var L=0;do{if(wm&&(Nm=null),Ph=0,wm=!1,25<=L)throw Error(s(301));if(L+=1,$a=zn=null,m.updateQueue!=null){var O=m.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}V.H=BO,O=g(y,j)}while(wm);return O}function ite(){var m=V.H,g=m.useState()[0];return g=typeof g.then=="function"?Dh(g):g,m=m.useState()[0],(zn!==null?zn.memoizedState:null)!==m&&(an.flags|=1024),g}function J1(){var m=I0!==0;return I0=0,m}function eC(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function tC(m){if(M0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}M0=!1}el=0,$a=zn=an=null,wm=!1,Ph=I0=0,Nm=null}function Fs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $a===null?an.memoizedState=$a=m:$a=$a.next=m,$a}function ka(){if(zn===null){var m=an.alternate;m=m!==null?m.memoizedState:null}else m=zn.next;var g=$a===null?an.memoizedState:$a.next;if(g!==null)$a=g,zn=m;else{if(m===null)throw an.alternate===null?Error(s(467)):Error(s(310));zn=m,m={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},$a===null?an.memoizedState=$a=m:$a=$a.next=m}return $a}function $0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dh(m){var g=Ph;return Ph+=1,Nm===null&&(Nm=[]),m=K3(Nm,m,g),g=an,($a===null?g.memoizedState:$a.next)===null&&(g=g.alternate,V.H=g===null||g.memoizedState===null?FO:fC),m}function R0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Dh(m);if(m.$$typeof===S)return vs(m)}throw Error(s(438,String(m)))}function nC(m){var g=null,y=an.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var j=an.alternate;j!==null&&(j=j.updateQueue,j!==null&&(j=j.memoCache,j!=null&&(g={data:j.data.map(function(L){return L.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=$0(),an.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),j=0;j<m;j++)y[j]=R;return g.index++,y}function tl(m,g){return typeof g=="function"?g(m):g}function z0(m){var g=ka();return aC(g,zn,m)}function aC(m,g,y){var j=m.queue;if(j===null)throw Error(s(311));j.lastRenderedReducer=y;var L=m.baseQueue,O=j.pending;if(O!==null){if(L!==null){var Y=L.next;L.next=O.next,O.next=Y}g.baseQueue=L=O,j.pending=null}if(O=m.baseState,L===null)m.memoizedState=O;else{g=L.next;var we=Y=null,ze=null,st=g,ut=!1;do{var xt=st.lane&-536870913;if(xt!==st.lane?(gn&xt)===xt:(el&xt)===xt){var it=st.revertLane;if(it===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),xt===pm&&(ut=!0);else if((el&it)===it){st=st.next,it===pm&&(ut=!0);continue}else xt={lane:0,revertLane:st.revertLane,gesture:null,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(we=ze=xt,Y=O):ze=ze.next=xt,an.lanes|=it,Nc|=it;xt=st.action,Rd&&y(O,xt),O=st.hasEagerState?st.eagerState:y(O,xt)}else it={lane:xt,revertLane:st.revertLane,gesture:st.gesture,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},ze===null?(we=ze=it,Y=O):ze=ze.next=it,an.lanes|=xt,Nc|=xt;st=st.next}while(st!==null&&st!==g);if(ze===null?Y=O:ze.next=we,!Nr(O,m.memoizedState)&&(Ra=!0,ut&&(y=xm,y!==null)))throw y;m.memoizedState=O,m.baseState=Y,m.baseQueue=ze,j.lastRenderedState=O}return L===null&&(j.lanes=0),[m.memoizedState,j.dispatch]}function sC(m){var g=ka(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var j=y.dispatch,L=y.pending,O=g.memoizedState;if(L!==null){y.pending=null;var Y=L=L.next;do O=m(O,Y.action),Y=Y.next;while(Y!==L);Nr(O,g.memoizedState)||(Ra=!0),g.memoizedState=O,g.baseQueue===null&&(g.baseState=O),y.lastRenderedState=O}return[O,j]}function oO(m,g,y){var j=an,L=ka(),O=bn;if(O){if(y===void 0)throw Error(s(407));y=y()}else y=g();var Y=!Nr((zn||L).memoizedState,y);if(Y&&(L.memoizedState=y,Ra=!0),L=L.queue,oC(dO.bind(null,j,L,m),[m]),L.getSnapshot!==g||Y||$a!==null&&$a.memoizedState.tag&1){if(j.flags|=2048,jm(9,{destroy:void 0},cO.bind(null,j,L,y,g),null),qn===null)throw Error(s(349));O||(el&127)!==0||lO(j,g,y)}return y}function lO(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=an.updateQueue,g===null?(g=$0(),an.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function cO(m,g,y,j){g.value=y,g.getSnapshot=j,uO(g)&&mO(m)}function dO(m,g,y){return y(function(){uO(g)&&mO(m)})}function uO(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!Nr(m,y)}catch{return!0}}function mO(m){var g=Ed(m,2);g!==null&&nr(g,m,2)}function rC(m){var g=Fs();if(typeof m=="function"){var y=m;if(m=y(),Rd){Qe(!0);try{y()}finally{Qe(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:m},g}function fO(m,g,y,j){return m.baseState=y,aC(m,zn,typeof j=="function"?j:tl)}function ote(m,g,y,j,L){if(B0(m))throw Error(s(485));if(m=g.action,m!==null){var O={payload:L,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){O.listeners.push(Y)}};V.T!==null?y(!0):O.isTransition=!1,j(O),y=g.pending,y===null?(O.next=g.pending=O,hO(g,O)):(O.next=y.next,g.pending=y.next=O)}}function hO(m,g){var y=g.action,j=g.payload,L=m.state;if(g.isTransition){var O=V.T,Y={};V.T=Y;try{var we=y(L,j),ze=V.S;ze!==null&&ze(Y,we),gO(m,g,we)}catch(st){iC(m,g,st)}finally{O!==null&&Y.types!==null&&(O.types=Y.types),V.T=O}}else try{O=y(L,j),gO(m,g,O)}catch(st){iC(m,g,st)}}function gO(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(j){pO(m,g,j)},function(j){return iC(m,g,j)}):pO(m,g,y)}function pO(m,g,y){g.status="fulfilled",g.value=y,xO(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,hO(m,y)))}function iC(m,g,y){var j=m.pending;if(m.pending=null,j!==null){j=j.next;do g.status="rejected",g.reason=y,xO(g),g=g.next;while(g!==j)}m.action=null}function xO(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function yO(m,g){return g}function bO(m,g){if(bn){var y=qn.formState;if(y!==null){e:{var j=an;if(bn){if(Zn){t:{for(var L=Zn,O=Xr;L.nodeType!==8;){if(!O){L=null;break t}if(L=Jr(L.nextSibling),L===null){L=null;break t}}O=L.data,L=O==="F!"||O==="F"?L:null}if(L){Zn=Jr(L.nextSibling),j=L.data==="F!";break e}}fc(j)}j=!1}j&&(g=y[0])}}return y=Fs(),y.memoizedState=y.baseState=g,j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yO,lastRenderedState:g},y.queue=j,y=RO.bind(null,an,j),j.dispatch=y,j=rC(!1),O=mC.bind(null,an,!1,j.queue),j=Fs(),L={state:g,dispatch:null,action:m,pending:null},j.queue=L,y=ote.bind(null,an,L,O,y),L.dispatch=y,j.memoizedState=m,[g,y,!1]}function vO(m){var g=ka();return wO(g,zn,m)}function wO(m,g,y){if(g=aC(m,g,yO)[0],m=z0(tl)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var j=Dh(g)}catch(Y){throw Y===ym?E0:Y}else j=g;g=ka();var L=g.queue,O=L.dispatch;return y!==g.memoizedState&&(an.flags|=2048,jm(9,{destroy:void 0},lte.bind(null,L,y),null)),[j,O,m]}function lte(m,g){m.action=g}function NO(m){var g=ka(),y=zn;if(y!==null)return wO(g,y,m);ka(),g=g.memoizedState,y=ka();var j=y.queue.dispatch;return y.memoizedState=m,[g,j,!1]}function jm(m,g,y,j){return m={tag:m,create:y,deps:j,inst:g,next:null},g=an.updateQueue,g===null&&(g=$0(),an.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(j=y.next,y.next=m,m.next=j,g.lastEffect=m),m}function jO(){return ka().memoizedState}function U0(m,g,y,j){var L=Fs();an.flags|=m,L.memoizedState=jm(1|g,{destroy:void 0},y,j===void 0?null:j)}function F0(m,g,y,j){var L=ka();j=j===void 0?null:j;var O=L.memoizedState.inst;zn!==null&&j!==null&&X1(j,zn.memoizedState.deps)?L.memoizedState=jm(g,O,y,j):(an.flags|=m,L.memoizedState=jm(1|g,O,y,j))}function CO(m,g){U0(8390656,8,m,g)}function oC(m,g){F0(2048,8,m,g)}function cte(m){an.flags|=4;var g=an.updateQueue;if(g===null)g=$0(),an.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function SO(m){var g=ka().memoizedState;return cte({ref:g,nextImpl:m}),function(){if((An&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function _O(m,g){return F0(4,2,m,g)}function AO(m,g){return F0(4,4,m,g)}function TO(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function EO(m,g,y){y=y!=null?y.concat([m]):null,F0(4,4,TO.bind(null,g,m),y)}function lC(){}function kO(m,g){var y=ka();g=g===void 0?null:g;var j=y.memoizedState;return g!==null&&X1(g,j[1])?j[0]:(y.memoizedState=[m,g],m)}function LO(m,g){var y=ka();g=g===void 0?null:g;var j=y.memoizedState;if(g!==null&&X1(g,j[1]))return j[0];if(j=m(),Rd){Qe(!0);try{m()}finally{Qe(!1)}}return y.memoizedState=[j,g],j}function cC(m,g,y){return y===void 0||(el&1073741824)!==0&&(gn&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=P5(),an.lanes|=m,Nc|=m,y)}function PO(m,g,y,j){return Nr(y,g)?y:vm.current!==null?(m=cC(m,y,j),Nr(m,g)||(Ra=!0),m):(el&42)===0||(el&1073741824)!==0&&(gn&261930)===0?(Ra=!0,m.memoizedState=y):(m=P5(),an.lanes|=m,Nc|=m,g)}function DO(m,g,y,j,L){var O=X.p;X.p=O!==0&&8>O?O:8;var Y=V.T,we={};V.T=we,mC(m,!1,g,y);try{var ze=L(),st=V.S;if(st!==null&&st(we,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var ut=ste(ze,j);Oh(m,g,ut,Tr(m))}else Oh(m,g,j,Tr(m))}catch(xt){Oh(m,g,{then:function(){},status:"rejected",reason:xt},Tr())}finally{X.p=O,Y!==null&&we.types!==null&&(Y.types=we.types),V.T=Y}}function dte(){}function dC(m,g,y,j){if(m.tag!==5)throw Error(s(476));var L=OO(m).queue;DO(m,L,g,W,y===null?dte:function(){return MO(m),y(j)})}function OO(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:W},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tl,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function MO(m){var g=OO(m);g.next===null&&(g=m.alternate.memoizedState),Oh(m,g.next.queue,{},Tr())}function uC(){return vs(Xh)}function IO(){return ka().memoizedState}function $O(){return ka().memoizedState}function ute(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=Tr();m=pc(y);var j=xc(g,m,y);j!==null&&(nr(j,g,y),Eh(j,g,y)),g={cache:U1()},m.payload=g;return}g=g.return}}function mte(m,g,y){var j=Tr();y={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},B0(m)?zO(g,y):(y=E1(m,g,y,j),y!==null&&(nr(y,m,j),UO(y,g,j)))}function RO(m,g,y){var j=Tr();Oh(m,g,y,j)}function Oh(m,g,y,j){var L={lane:j,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(B0(m))zO(g,L);else{var O=m.alternate;if(m.lanes===0&&(O===null||O.lanes===0)&&(O=g.lastRenderedReducer,O!==null))try{var Y=g.lastRenderedState,we=O(Y,y);if(L.hasEagerState=!0,L.eagerState=we,Nr(we,Y))return N0(m,g,L,0),qn===null&&w0(),!1}catch{}if(y=E1(m,g,L,j),y!==null)return nr(y,m,j),UO(y,g,j),!0}return!1}function mC(m,g,y,j){if(j={lane:2,revertLane:qC(),gesture:null,action:j,hasEagerState:!1,eagerState:null,next:null},B0(m)){if(g)throw Error(s(479))}else g=E1(m,y,j,2),g!==null&&nr(g,m,2)}function B0(m){var g=m.alternate;return m===an||g!==null&&g===an}function zO(m,g){wm=M0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function UO(m,g,y){if((y&4194048)!==0){var j=g.lanes;j&=m.pendingLanes,y|=j,g.lanes=y,Xe(m,y)}}var Mh={readContext:vs,use:R0,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useLayoutEffect:ba,useInsertionEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useSyncExternalStore:ba,useId:ba,useHostTransitionStatus:ba,useFormState:ba,useActionState:ba,useOptimistic:ba,useMemoCache:ba,useCacheRefresh:ba};Mh.useEffectEvent=ba;var FO={readContext:vs,use:R0,useCallback:function(m,g){return Fs().memoizedState=[m,g===void 0?null:g],m},useContext:vs,useEffect:CO,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,U0(4194308,4,TO.bind(null,g,m),y)},useLayoutEffect:function(m,g){return U0(4194308,4,m,g)},useInsertionEffect:function(m,g){U0(4,2,m,g)},useMemo:function(m,g){var y=Fs();g=g===void 0?null:g;var j=m();if(Rd){Qe(!0);try{m()}finally{Qe(!1)}}return y.memoizedState=[j,g],j},useReducer:function(m,g,y){var j=Fs();if(y!==void 0){var L=y(g);if(Rd){Qe(!0);try{y(g)}finally{Qe(!1)}}}else L=g;return j.memoizedState=j.baseState=L,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:L},j.queue=m,m=m.dispatch=mte.bind(null,an,m),[j.memoizedState,m]},useRef:function(m){var g=Fs();return m={current:m},g.memoizedState=m},useState:function(m){m=rC(m);var g=m.queue,y=RO.bind(null,an,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:lC,useDeferredValue:function(m,g){var y=Fs();return cC(y,m,g)},useTransition:function(){var m=rC(!1);return m=DO.bind(null,an,m.queue,!0,!1),Fs().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var j=an,L=Fs();if(bn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),qn===null)throw Error(s(349));(gn&127)!==0||lO(j,g,y)}L.memoizedState=y;var O={value:y,getSnapshot:g};return L.queue=O,CO(dO.bind(null,j,O,m),[m]),j.flags|=2048,jm(9,{destroy:void 0},cO.bind(null,j,O,y,g),null),y},useId:function(){var m=Fs(),g=qn.identifierPrefix;if(bn){var y=eo,j=Ji;y=(j&~(1<<32-ct(j)-1)).toString(32)+y,g="_"+g+"R_"+y,y=I0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=rte++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:uC,useFormState:bO,useActionState:bO,useOptimistic:function(m){var g=Fs();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=mC.bind(null,an,!0,y),y.dispatch=g,[m,g]},useMemoCache:nC,useCacheRefresh:function(){return Fs().memoizedState=ute.bind(null,an)},useEffectEvent:function(m){var g=Fs(),y={impl:m};return g.memoizedState=y,function(){if((An&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},fC={readContext:vs,use:R0,useCallback:kO,useContext:vs,useEffect:oC,useImperativeHandle:EO,useInsertionEffect:_O,useLayoutEffect:AO,useMemo:LO,useReducer:z0,useRef:jO,useState:function(){return z0(tl)},useDebugValue:lC,useDeferredValue:function(m,g){var y=ka();return PO(y,zn.memoizedState,m,g)},useTransition:function(){var m=z0(tl)[0],g=ka().memoizedState;return[typeof m=="boolean"?m:Dh(m),g]},useSyncExternalStore:oO,useId:IO,useHostTransitionStatus:uC,useFormState:vO,useActionState:vO,useOptimistic:function(m,g){var y=ka();return fO(y,zn,m,g)},useMemoCache:nC,useCacheRefresh:$O};fC.useEffectEvent=SO;var BO={readContext:vs,use:R0,useCallback:kO,useContext:vs,useEffect:oC,useImperativeHandle:EO,useInsertionEffect:_O,useLayoutEffect:AO,useMemo:LO,useReducer:sC,useRef:jO,useState:function(){return sC(tl)},useDebugValue:lC,useDeferredValue:function(m,g){var y=ka();return zn===null?cC(y,m,g):PO(y,zn.memoizedState,m,g)},useTransition:function(){var m=sC(tl)[0],g=ka().memoizedState;return[typeof m=="boolean"?m:Dh(m),g]},useSyncExternalStore:oO,useId:IO,useHostTransitionStatus:uC,useFormState:NO,useActionState:NO,useOptimistic:function(m,g){var y=ka();return zn!==null?fO(y,zn,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:nC,useCacheRefresh:$O};BO.useEffectEvent=SO;function hC(m,g,y,j){g=m.memoizedState,y=y(j,g),y=y==null?g:f({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var gC={enqueueSetState:function(m,g,y){m=m._reactInternals;var j=Tr(),L=pc(j);L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,j),g!==null&&(nr(g,m,j),Eh(g,m,j))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var j=Tr(),L=pc(j);L.tag=1,L.payload=g,y!=null&&(L.callback=y),g=xc(m,L,j),g!==null&&(nr(g,m,j),Eh(g,m,j))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=Tr(),j=pc(y);j.tag=2,g!=null&&(j.callback=g),g=xc(m,j,y),g!==null&&(nr(g,m,y),Eh(g,m,y))}};function HO(m,g,y,j,L,O,Y){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(j,O,Y):g.prototype&&g.prototype.isPureReactComponent?!wh(y,j)||!wh(L,O):!0}function qO(m,g,y,j){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,j),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,j),g.state!==m&&gC.enqueueReplaceState(g,g.state,null)}function zd(m,g){var y=g;if("ref"in g){y={};for(var j in g)j!=="ref"&&(y[j]=g[j])}if(m=m.defaultProps){y===g&&(y=f({},y));for(var L in m)y[L]===void 0&&(y[L]=m[L])}return y}function GO(m){v0(m)}function WO(m){console.error(m)}function VO(m){v0(m)}function H0(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(j){setTimeout(function(){throw j})}}function QO(m,g,y){try{var j=m.onCaughtError;j(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function pC(m,g,y){return y=pc(y),y.tag=3,y.payload={element:null},y.callback=function(){H0(m,g)},y}function YO(m){return m=pc(m),m.tag=3,m}function KO(m,g,y,j){var L=y.type.getDerivedStateFromError;if(typeof L=="function"){var O=j.value;m.payload=function(){return L(O)},m.callback=function(){QO(g,y,j)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(m.callback=function(){QO(g,y,j),typeof L!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var we=j.stack;this.componentDidCatch(j.value,{componentStack:we!==null?we:""})})}function fte(m,g,y,j,L){if(y.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){if(g=y.alternate,g!==null&&gm(g,y,L,!0),y=Cr.current,y!==null){switch(y.tag){case 31:case 13:return Zr===null?ty():y.alternate===null&&va===0&&(va=3),y.flags&=-257,y.flags|=65536,y.lanes=L,j===k0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([j]):g.add(j),FC(m,j,L)),!1;case 22:return y.flags|=65536,j===k0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([j])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([j]):y.add(j)),FC(m,j,L)),!1}throw Error(s(435,y.tag))}return FC(m,j,L),ty(),!1}if(bn)return g=Cr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=L,j!==M1&&(m=Error(s(422),{cause:j}),Ch(Qr(m,y)))):(j!==M1&&(g=Error(s(423),{cause:j}),Ch(Qr(g,y))),m=m.current.alternate,m.flags|=65536,L&=-L,m.lanes|=L,j=Qr(j,y),L=pC(m.stateNode,j,L),W1(m,L),va!==4&&(va=2)),!1;var O=Error(s(520),{cause:j});if(O=Qr(O,y),Hh===null?Hh=[O]:Hh.push(O),va!==4&&(va=2),g===null)return!0;j=Qr(j,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=L&-L,y.lanes|=m,m=pC(y.stateNode,j,m),W1(y,m),!1;case 1:if(g=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(jc===null||!jc.has(O))))return y.flags|=65536,L&=-L,y.lanes|=L,L=YO(L),KO(L,m,y,j),W1(y,L),!1}y=y.return}while(y!==null);return!1}var xC=Error(s(461)),Ra=!1;function ws(m,g,y,j){g.child=m===null?eO(g,null,y,j):$d(g,m.child,y,j)}function XO(m,g,y,j,L){y=y.render;var O=g.ref;if("ref"in j){var Y={};for(var we in j)we!=="ref"&&(Y[we]=j[we])}else Y=j;return Dd(g),j=Z1(m,g,y,Y,O,L),we=J1(),m!==null&&!Ra?(eC(m,g,L),nl(m,g,L)):(bn&&we&&D1(g),g.flags|=1,ws(m,g,j,L),g.child)}function ZO(m,g,y,j,L){if(m===null){var O=y.type;return typeof O=="function"&&!k1(O)&&O.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=O,JO(m,g,O,j,L)):(m=C0(y.type,null,j,g,g.mode,L),m.ref=g.ref,m.return=g,g.child=m)}if(O=m.child,!SC(m,L)){var Y=O.memoizedProps;if(y=y.compare,y=y!==null?y:wh,y(Y,j)&&m.ref===g.ref)return nl(m,g,L)}return g.flags|=1,m=Ko(O,j),m.ref=g.ref,m.return=g,g.child=m}function JO(m,g,y,j,L){if(m!==null){var O=m.memoizedProps;if(wh(O,j)&&m.ref===g.ref)if(Ra=!1,g.pendingProps=j=O,SC(m,L))(m.flags&131072)!==0&&(Ra=!0);else return g.lanes=m.lanes,nl(m,g,L)}return yC(m,g,y,j,L)}function e5(m,g,y,j){var L=j.children,O=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),j.mode==="hidden"){if((g.flags&128)!==0){if(O=O!==null?O.baseLanes|y:y,m!==null){for(j=g.child=m.child,L=0;j!==null;)L=L|j.lanes|j.childLanes,j=j.sibling;j=L&~O}else j=0,g.child=null;return t5(m,g,O,y,j)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&T0(g,O!==null?O.cachePool:null),O!==null?aO(g,O):Q1(),sO(g);else return j=g.lanes=536870912,t5(m,g,O!==null?O.baseLanes|y:y,y,j)}else O!==null?(T0(g,O.cachePool),aO(g,O),bc(),g.memoizedState=null):(m!==null&&T0(g,null),Q1(),bc());return ws(m,g,L,y),g.child}function Ih(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function t5(m,g,y,j,L){var O=B1();return O=O===null?null:{parent:Ia._currentValue,pool:O},g.memoizedState={baseLanes:y,cachePool:O},m!==null&&T0(g,null),Q1(),sO(g),m!==null&&gm(m,g,j,!0),g.childLanes=L,null}function q0(m,g){return g=W0({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function n5(m,g,y){return $d(g,m.child,null,y),m=q0(g,g.pendingProps),m.flags|=2,Sr(g),g.memoizedState=null,m}function hte(m,g,y){var j=g.pendingProps,L=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(bn){if(j.mode==="hidden")return m=q0(g,j),g.lanes=536870912,Ih(null,m);if(K1(g),(m=Zn)?(m=hM(m,Xr),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:Ji,overflow:eo}:null,retryLane:536870912,hydrationErrors:null},y=z3(m),y.return=g,g.child=y,bs=g,Zn=null)):m=null,m===null)throw fc(g);return g.lanes=536870912,null}return q0(g,j)}var O=m.memoizedState;if(O!==null){var Y=O.dehydrated;if(K1(g),L)if(g.flags&256)g.flags&=-257,g=n5(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(Ra||gm(m,g,y,!1),L=(y&m.childLanes)!==0,Ra||L){if(j=qn,j!==null&&(Y=pt(j,y),Y!==0&&Y!==O.retryLane))throw O.retryLane=Y,Ed(m,Y),nr(j,m,Y),xC;ty(),g=n5(m,g,y)}else m=O.treeContext,Zn=Jr(Y.nextSibling),bs=g,bn=!0,mc=null,Xr=!1,m!==null&&B3(g,m),g=q0(g,j),g.flags|=4096;return g}return m=Ko(m.child,{mode:j.mode,children:j.children}),m.ref=g.ref,g.child=m,m.return=g,m}function G0(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function yC(m,g,y,j,L){return Dd(g),y=Z1(m,g,y,j,void 0,L),j=J1(),m!==null&&!Ra?(eC(m,g,L),nl(m,g,L)):(bn&&j&&D1(g),g.flags|=1,ws(m,g,y,L),g.child)}function a5(m,g,y,j,L,O){return Dd(g),g.updateQueue=null,y=iO(g,j,y,L),rO(m),j=J1(),m!==null&&!Ra?(eC(m,g,O),nl(m,g,O)):(bn&&j&&D1(g),g.flags|=1,ws(m,g,y,O),g.child)}function s5(m,g,y,j,L){if(Dd(g),g.stateNode===null){var O=um,Y=y.contextType;typeof Y=="object"&&Y!==null&&(O=vs(Y)),O=new y(j,O),g.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=gC,g.stateNode=O,O._reactInternals=g,O=g.stateNode,O.props=j,O.state=g.memoizedState,O.refs={},q1(g),Y=y.contextType,O.context=typeof Y=="object"&&Y!==null?vs(Y):um,O.state=g.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(hC(g,y,Y,j),O.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Y=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Y!==O.state&&gC.enqueueReplaceState(O,O.state,null),Lh(g,j,O,L),kh(),O.state=g.memoizedState),typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!0}else if(m===null){O=g.stateNode;var we=g.memoizedProps,ze=zd(y,we);O.props=ze;var st=O.context,ut=y.contextType;Y=um,typeof ut=="object"&&ut!==null&&(Y=vs(ut));var xt=y.getDerivedStateFromProps;ut=typeof xt=="function"||typeof O.getSnapshotBeforeUpdate=="function",we=g.pendingProps!==we,ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(we||st!==Y)&&qO(g,O,j,Y),gc=!1;var it=g.memoizedState;O.state=it,Lh(g,j,O,L),kh(),st=g.memoizedState,we||it!==st||gc?(typeof xt=="function"&&(hC(g,y,xt,j),st=g.memoizedState),(ze=gc||HO(g,y,ze,j,it,st,Y))?(ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(g.flags|=4194308)):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=j,g.memoizedState=st),O.props=j,O.state=st,O.context=Y,j=ze):(typeof O.componentDidMount=="function"&&(g.flags|=4194308),j=!1)}else{O=g.stateNode,G1(m,g),Y=g.memoizedProps,ut=zd(y,Y),O.props=ut,xt=g.pendingProps,it=O.context,st=y.contextType,ze=um,typeof st=="object"&&st!==null&&(ze=vs(st)),we=y.getDerivedStateFromProps,(st=typeof we=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==xt||it!==ze)&&qO(g,O,j,ze),gc=!1,it=g.memoizedState,O.state=it,Lh(g,j,O,L),kh();var dt=g.memoizedState;Y!==xt||it!==dt||gc||m!==null&&m.dependencies!==null&&_0(m.dependencies)?(typeof we=="function"&&(hC(g,y,we,j),dt=g.memoizedState),(ut=gc||HO(g,y,ut,j,it,dt,ze)||m!==null&&m.dependencies!==null&&_0(m.dependencies))?(st||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(j,dt,ze),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(j,dt,ze)),typeof O.componentDidUpdate=="function"&&(g.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=1024),g.memoizedProps=j,g.memoizedState=dt),O.props=j,O.state=dt,O.context=ze,j=ut):(typeof O.componentDidUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===m.memoizedProps&&it===m.memoizedState||(g.flags|=1024),j=!1)}return O=j,G0(m,g),j=(g.flags&128)!==0,O||j?(O=g.stateNode,y=j&&typeof y.getDerivedStateFromError!="function"?null:O.render(),g.flags|=1,m!==null&&j?(g.child=$d(g,m.child,null,L),g.child=$d(g,null,y,L)):ws(m,g,y,L),g.memoizedState=O.state,m=g.child):m=nl(m,g,L),m}function r5(m,g,y,j){return Ld(),g.flags|=256,ws(m,g,y,j),g.child}var bC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vC(m){return{baseLanes:m,cachePool:Q3()}}function wC(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=Ar),m}function i5(m,g,y){var j=g.pendingProps,L=!1,O=(g.flags&128)!==0,Y;if((Y=O)||(Y=m!==null&&m.memoizedState===null?!1:(Ea.current&2)!==0),Y&&(L=!0,g.flags&=-129),Y=(g.flags&32)!==0,g.flags&=-33,m===null){if(bn){if(L?yc(g):bc(),(m=Zn)?(m=hM(m,Xr),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:uc!==null?{id:Ji,overflow:eo}:null,retryLane:536870912,hydrationErrors:null},y=z3(m),y.return=g,g.child=y,bs=g,Zn=null)):m=null,m===null)throw fc(g);return aS(m)?g.lanes=32:g.lanes=536870912,null}var we=j.children;return j=j.fallback,L?(bc(),L=g.mode,we=W0({mode:"hidden",children:we},L),j=kd(j,L,y,null),we.return=g,j.return=g,we.sibling=j,g.child=we,j=g.child,j.memoizedState=vC(y),j.childLanes=wC(m,Y,y),g.memoizedState=bC,Ih(null,j)):(yc(g),NC(g,we))}var ze=m.memoizedState;if(ze!==null&&(we=ze.dehydrated,we!==null)){if(O)g.flags&256?(yc(g),g.flags&=-257,g=jC(m,g,y)):g.memoizedState!==null?(bc(),g.child=m.child,g.flags|=128,g=null):(bc(),we=j.fallback,L=g.mode,j=W0({mode:"visible",children:j.children},L),we=kd(we,L,y,null),we.flags|=2,j.return=g,we.return=g,j.sibling=we,g.child=j,$d(g,m.child,null,y),j=g.child,j.memoizedState=vC(y),j.childLanes=wC(m,Y,y),g.memoizedState=bC,g=Ih(null,j));else if(yc(g),aS(we)){if(Y=we.nextSibling&&we.nextSibling.dataset,Y)var st=Y.dgst;Y=st,j=Error(s(419)),j.stack="",j.digest=Y,Ch({value:j,source:null,stack:null}),g=jC(m,g,y)}else if(Ra||gm(m,g,y,!1),Y=(y&m.childLanes)!==0,Ra||Y){if(Y=qn,Y!==null&&(j=pt(Y,y),j!==0&&j!==ze.retryLane))throw ze.retryLane=j,Ed(m,j),nr(Y,m,j),xC;nS(we)||ty(),g=jC(m,g,y)}else nS(we)?(g.flags|=192,g.child=m.child,g=null):(m=ze.treeContext,Zn=Jr(we.nextSibling),bs=g,bn=!0,mc=null,Xr=!1,m!==null&&B3(g,m),g=NC(g,j.children),g.flags|=4096);return g}return L?(bc(),we=j.fallback,L=g.mode,ze=m.child,st=ze.sibling,j=Ko(ze,{mode:"hidden",children:j.children}),j.subtreeFlags=ze.subtreeFlags&65011712,st!==null?we=Ko(st,we):(we=kd(we,L,y,null),we.flags|=2),we.return=g,j.return=g,j.sibling=we,g.child=j,Ih(null,j),j=g.child,we=m.child.memoizedState,we===null?we=vC(y):(L=we.cachePool,L!==null?(ze=Ia._currentValue,L=L.parent!==ze?{parent:ze,pool:ze}:L):L=Q3(),we={baseLanes:we.baseLanes|y,cachePool:L}),j.memoizedState=we,j.childLanes=wC(m,Y,y),g.memoizedState=bC,Ih(m.child,j)):(yc(g),y=m.child,m=y.sibling,y=Ko(y,{mode:"visible",children:j.children}),y.return=g,y.sibling=null,m!==null&&(Y=g.deletions,Y===null?(g.deletions=[m],g.flags|=16):Y.push(m)),g.child=y,g.memoizedState=null,y)}function NC(m,g){return g=W0({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function W0(m,g){return m=jr(22,m,null,g),m.lanes=0,m}function jC(m,g,y){return $d(g,m.child,null,y),m=NC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function o5(m,g,y){m.lanes|=g;var j=m.alternate;j!==null&&(j.lanes|=g),R1(m.return,g,y)}function CC(m,g,y,j,L,O){var Y=m.memoizedState;Y===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:j,tail:y,tailMode:L,treeForkCount:O}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=j,Y.tail=y,Y.tailMode=L,Y.treeForkCount=O)}function l5(m,g,y){var j=g.pendingProps,L=j.revealOrder,O=j.tail;j=j.children;var Y=Ea.current,we=(Y&2)!==0;if(we?(Y=Y&1|2,g.flags|=128):Y&=1,ye(Ea,Y),ws(m,g,j,y),j=bn?jh:0,!we&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&o5(m,y,g);else if(m.tag===19)o5(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(L){case"forwards":for(y=g.child,L=null;y!==null;)m=y.alternate,m!==null&&O0(m)===null&&(L=y),y=y.sibling;y=L,y===null?(L=g.child,g.child=null):(L=y.sibling,y.sibling=null),CC(g,!1,L,y,O,j);break;case"backwards":case"unstable_legacy-backwards":for(y=null,L=g.child,g.child=null;L!==null;){if(m=L.alternate,m!==null&&O0(m)===null){g.child=L;break}m=L.sibling,L.sibling=y,y=L,L=m}CC(g,!0,y,null,O,j);break;case"together":CC(g,!1,null,null,void 0,j);break;default:g.memoizedState=null}return g.child}function nl(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),Nc|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(gm(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=Ko(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=Ko(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function SC(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&_0(m)))}function gte(m,g,y){switch(g.tag){case 3:ke(g,g.stateNode.containerInfo),hc(g,Ia,m.memoizedState.cache),Ld();break;case 27:case 5:qe(g);break;case 4:ke(g,g.stateNode.containerInfo);break;case 10:hc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,K1(g),null;break;case 13:var j=g.memoizedState;if(j!==null)return j.dehydrated!==null?(yc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?i5(m,g,y):(yc(g),m=nl(m,g,y),m!==null?m.sibling:null);yc(g);break;case 19:var L=(m.flags&128)!==0;if(j=(y&g.childLanes)!==0,j||(gm(m,g,y,!1),j=(y&g.childLanes)!==0),L){if(j)return l5(m,g,y);g.flags|=128}if(L=g.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ye(Ea,Ea.current),j)break;return null;case 22:return g.lanes=0,e5(m,g,y,g.pendingProps);case 24:hc(g,Ia,m.memoizedState.cache)}return nl(m,g,y)}function c5(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)Ra=!0;else{if(!SC(m,y)&&(g.flags&128)===0)return Ra=!1,gte(m,g,y);Ra=(m.flags&131072)!==0}else Ra=!1,bn&&(g.flags&1048576)!==0&&F3(g,jh,g.index);switch(g.lanes=0,g.tag){case 16:e:{var j=g.pendingProps;if(m=Md(g.elementType),g.type=m,typeof m=="function")k1(m)?(j=zd(m,j),g.tag=1,g=s5(null,g,m,j,y)):(g.tag=0,g=yC(null,g,m,j,y));else{if(m!=null){var L=m.$$typeof;if(L===A){g.tag=11,g=XO(null,g,m,j,y);break e}else if(L===E){g.tag=14,g=ZO(null,g,m,j,y);break e}}throw g=q(m)||m,Error(s(306,g,""))}}return g;case 0:return yC(m,g,g.type,g.pendingProps,y);case 1:return j=g.type,L=zd(j,g.pendingProps),s5(m,g,j,L,y);case 3:e:{if(ke(g,g.stateNode.containerInfo),m===null)throw Error(s(387));j=g.pendingProps;var O=g.memoizedState;L=O.element,G1(m,g),Lh(g,j,null,y);var Y=g.memoizedState;if(j=Y.cache,hc(g,Ia,j),j!==O.cache&&z1(g,[Ia],y,!0),kh(),j=Y.element,O.isDehydrated)if(O={element:j,isDehydrated:!1,cache:Y.cache},g.updateQueue.baseState=O,g.memoizedState=O,g.flags&256){g=r5(m,g,j,y);break e}else if(j!==L){L=Qr(Error(s(424)),g),Ch(L),g=r5(m,g,j,y);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,Zn=Jr(m.firstChild),bs=g,bn=!0,mc=null,Xr=!0,y=eO(g,null,j,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Ld(),j===L){g=nl(m,g,y);break e}ws(m,g,j,y)}g=g.child}return g;case 26:return G0(m,g),m===null?(y=vM(g.type,null,g.pendingProps,null))?g.memoizedState=y:bn||(y=g.type,m=g.pendingProps,j=ly(Se.current).createElement(y),j[re]=g,j[ot]=m,Ns(j,y,m),Ye(j),g.stateNode=j):g.memoizedState=vM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return qe(g),m===null&&bn&&(j=g.stateNode=xM(g.type,g.pendingProps,Se.current),bs=g,Xr=!0,L=Zn,Ac(g.type)?(sS=L,Zn=Jr(j.firstChild)):Zn=L),ws(m,g,g.pendingProps.children,y),G0(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&bn&&((L=j=Zn)&&(j=Gte(j,g.type,g.pendingProps,Xr),j!==null?(g.stateNode=j,bs=g,Zn=Jr(j.firstChild),Xr=!1,L=!0):L=!1),L||fc(g)),qe(g),L=g.type,O=g.pendingProps,Y=m!==null?m.memoizedProps:null,j=O.children,JC(L,O)?j=null:Y!==null&&JC(L,Y)&&(g.flags|=32),g.memoizedState!==null&&(L=Z1(m,g,ite,null,null,y),Xh._currentValue=L),G0(m,g),ws(m,g,j,y),g.child;case 6:return m===null&&bn&&((m=y=Zn)&&(y=Wte(y,g.pendingProps,Xr),y!==null?(g.stateNode=y,bs=g,Zn=null,m=!0):m=!1),m||fc(g)),null;case 13:return i5(m,g,y);case 4:return ke(g,g.stateNode.containerInfo),j=g.pendingProps,m===null?g.child=$d(g,null,j,y):ws(m,g,j,y),g.child;case 11:return XO(m,g,g.type,g.pendingProps,y);case 7:return ws(m,g,g.pendingProps,y),g.child;case 8:return ws(m,g,g.pendingProps.children,y),g.child;case 12:return ws(m,g,g.pendingProps.children,y),g.child;case 10:return j=g.pendingProps,hc(g,g.type,j.value),ws(m,g,j.children,y),g.child;case 9:return L=g.type._context,j=g.pendingProps.children,Dd(g),L=vs(L),j=j(L),g.flags|=1,ws(m,g,j,y),g.child;case 14:return ZO(m,g,g.type,g.pendingProps,y);case 15:return JO(m,g,g.type,g.pendingProps,y);case 19:return l5(m,g,y);case 31:return hte(m,g,y);case 22:return e5(m,g,y,g.pendingProps);case 24:return Dd(g),j=vs(Ia),m===null?(L=B1(),L===null&&(L=qn,O=U1(),L.pooledCache=O,O.refCount++,O!==null&&(L.pooledCacheLanes|=y),L=O),g.memoizedState={parent:j,cache:L},q1(g),hc(g,Ia,L)):((m.lanes&y)!==0&&(G1(m,g),Lh(g,null,null,y),kh()),L=m.memoizedState,O=g.memoizedState,L.parent!==j?(L={parent:j,cache:j},g.memoizedState=L,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=L),hc(g,Ia,j)):(j=O.cache,hc(g,Ia,j),j!==L.cache&&z1(g,[Ia],y,!0))),ws(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function al(m){m.flags|=4}function _C(m,g,y,j,L){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(L&335544128)===L)if(m.stateNode.complete)m.flags|=8192;else if(I5())m.flags|=8192;else throw Id=k0,H1}else m.flags&=-16777217}function d5(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!SM(g))if(I5())m.flags|=8192;else throw Id=k0,H1}function V0(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?se():536870912,m.lanes|=g,Am|=g)}function $h(m,g){if(!bn)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var j=null;y!==null;)y.alternate!==null&&(j=y),y=y.sibling;j===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:j.sibling=null}}function Jn(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,j=0;if(g)for(var L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags&65011712,j|=L.flags&65011712,L.return=m,L=L.sibling;else for(L=m.child;L!==null;)y|=L.lanes|L.childLanes,j|=L.subtreeFlags,j|=L.flags,L.return=m,L=L.sibling;return m.subtreeFlags|=j,m.childLanes=y,g}function pte(m,g,y){var j=g.pendingProps;switch(O1(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(g),null;case 1:return Jn(g),null;case 3:return y=g.stateNode,j=null,m!==null&&(j=m.memoizedState.cache),g.memoizedState.cache!==j&&(g.flags|=2048),Jo(Ia),he(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(hm(g)?al(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,I1())),Jn(g),null;case 26:var L=g.type,O=g.memoizedState;return m===null?(al(g),O!==null?(Jn(g),d5(g,O)):(Jn(g),_C(g,L,null,j,y))):O?O!==m.memoizedState?(al(g),Jn(g),d5(g,O)):(Jn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==j&&al(g),Jn(g),_C(g,L,m,j,y)),null;case 27:if(Ce(g),y=Se.current,L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}m=pe.current,hm(g)?H3(g):(m=xM(L,j,y),g.stateNode=m,al(g))}return Jn(g),null;case 5:if(Ce(g),L=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(!j){if(g.stateNode===null)throw Error(s(166));return Jn(g),null}if(O=pe.current,hm(g))H3(g);else{var Y=ly(Se.current);switch(O){case 1:O=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case 2:O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;default:switch(L){case"svg":O=Y.createElementNS("http://www.w3.org/2000/svg",L);break;case"math":O=Y.createElementNS("http://www.w3.org/1998/Math/MathML",L);break;case"script":O=Y.createElement("div"),O.innerHTML="<script><\/script>",O=O.removeChild(O.firstChild);break;case"select":O=typeof j.is=="string"?Y.createElement("select",{is:j.is}):Y.createElement("select"),j.multiple?O.multiple=!0:j.size&&(O.size=j.size);break;default:O=typeof j.is=="string"?Y.createElement(L,{is:j.is}):Y.createElement(L)}}O[re]=g,O[ot]=j;e:for(Y=g.child;Y!==null;){if(Y.tag===5||Y.tag===6)O.appendChild(Y.stateNode);else if(Y.tag!==4&&Y.tag!==27&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===g)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===g)break e;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}g.stateNode=O;e:switch(Ns(O,L,j),L){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}j&&al(g)}}return Jn(g),_C(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==j&&al(g);else{if(typeof j!="string"&&g.stateNode===null)throw Error(s(166));if(m=Se.current,hm(g)){if(m=g.stateNode,y=g.memoizedProps,j=null,L=bs,L!==null)switch(L.tag){case 27:case 5:j=L.memoizedProps}m[re]=g,m=!!(m.nodeValue===y||j!==null&&j.suppressHydrationWarning===!0||iM(m.nodeValue,y)),m||fc(g,!0)}else m=ly(m).createTextNode(j),m[re]=g,g.stateNode=m}return Jn(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(j=hm(g),y!==null){if(m===null){if(!j)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[re]=g}else Ld(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),m=!1}else y=I1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(Sr(g),g):(Sr(g),null);if((g.flags&128)!==0)throw Error(s(558))}return Jn(g),null;case 13:if(j=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(L=hm(g),j!==null&&j.dehydrated!==null){if(m===null){if(!L)throw Error(s(318));if(L=g.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(s(317));L[re]=g}else Ld(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Jn(g),L=!1}else L=I1(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=L),L=!0;if(!L)return g.flags&256?(Sr(g),g):(Sr(g),null)}return Sr(g),(g.flags&128)!==0?(g.lanes=y,g):(y=j!==null,m=m!==null&&m.memoizedState!==null,y&&(j=g.child,L=null,j.alternate!==null&&j.alternate.memoizedState!==null&&j.alternate.memoizedState.cachePool!==null&&(L=j.alternate.memoizedState.cachePool.pool),O=null,j.memoizedState!==null&&j.memoizedState.cachePool!==null&&(O=j.memoizedState.cachePool.pool),O!==L&&(j.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),V0(g,g.updateQueue),Jn(g),null);case 4:return he(),m===null&&QC(g.stateNode.containerInfo),Jn(g),null;case 10:return Jo(g.type),Jn(g),null;case 19:if(U(Ea),j=g.memoizedState,j===null)return Jn(g),null;if(L=(g.flags&128)!==0,O=j.rendering,O===null)if(L)$h(j,!1);else{if(va!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(O=O0(m),O!==null){for(g.flags|=128,$h(j,!1),m=O.updateQueue,g.updateQueue=m,V0(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)R3(y,m),y=y.sibling;return ye(Ea,Ea.current&1|2),bn&&Xo(g,j.treeForkCount),g.child}m=m.sibling}j.tail!==null&&Z()>Z0&&(g.flags|=128,L=!0,$h(j,!1),g.lanes=4194304)}else{if(!L)if(m=O0(O),m!==null){if(g.flags|=128,L=!0,m=m.updateQueue,g.updateQueue=m,V0(g,m),$h(j,!0),j.tail===null&&j.tailMode==="hidden"&&!O.alternate&&!bn)return Jn(g),null}else 2*Z()-j.renderingStartTime>Z0&&y!==536870912&&(g.flags|=128,L=!0,$h(j,!1),g.lanes=4194304);j.isBackwards?(O.sibling=g.child,g.child=O):(m=j.last,m!==null?m.sibling=O:g.child=O,j.last=O)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=Z(),m.sibling=null,y=Ea.current,ye(Ea,L?y&1|2:y&1),bn&&Xo(g,j.treeForkCount),m):(Jn(g),null);case 22:case 23:return Sr(g),Y1(),j=g.memoizedState!==null,m!==null?m.memoizedState!==null!==j&&(g.flags|=8192):j&&(g.flags|=8192),j?(y&536870912)!==0&&(g.flags&128)===0&&(Jn(g),g.subtreeFlags&6&&(g.flags|=8192)):Jn(g),y=g.updateQueue,y!==null&&V0(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),j=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(j=g.memoizedState.cachePool.pool),j!==y&&(g.flags|=2048),m!==null&&U(Od),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),Jo(Ia),Jn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function xte(m,g){switch(O1(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return Jo(Ia),he(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return Ce(g),null;case 31:if(g.memoizedState!==null){if(Sr(g),g.alternate===null)throw Error(s(340));Ld()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(Sr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Ld()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return U(Ea),null;case 4:return he(),null;case 10:return Jo(g.type),null;case 22:case 23:return Sr(g),Y1(),m!==null&&U(Od),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return Jo(Ia),null;case 25:return null;default:return null}}function u5(m,g){switch(O1(g),g.tag){case 3:Jo(Ia),he();break;case 26:case 27:case 5:Ce(g);break;case 4:he();break;case 31:g.memoizedState!==null&&Sr(g);break;case 13:Sr(g);break;case 19:U(Ea);break;case 10:Jo(g.type);break;case 22:case 23:Sr(g),Y1(),m!==null&&U(Od);break;case 24:Jo(Ia)}}function Rh(m,g){try{var y=g.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var L=j.next;y=L;do{if((y.tag&m)===m){j=void 0;var O=y.create,Y=y.inst;j=O(),Y.destroy=j}y=y.next}while(y!==L)}}catch(we){Dn(g,g.return,we)}}function vc(m,g,y){try{var j=g.updateQueue,L=j!==null?j.lastEffect:null;if(L!==null){var O=L.next;j=O;do{if((j.tag&m)===m){var Y=j.inst,we=Y.destroy;if(we!==void 0){Y.destroy=void 0,L=g;var ze=y,st=we;try{st()}catch(ut){Dn(L,ze,ut)}}}j=j.next}while(j!==O)}}catch(ut){Dn(g,g.return,ut)}}function m5(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{nO(g,y)}catch(j){Dn(m,m.return,j)}}}function f5(m,g,y){y.props=zd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(j){Dn(m,g,j)}}function zh(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var j=m.stateNode;break;case 30:j=m.stateNode;break;default:j=m.stateNode}typeof y=="function"?m.refCleanup=y(j):y.current=j}}catch(L){Dn(m,g,L)}}function to(m,g){var y=m.ref,j=m.refCleanup;if(y!==null)if(typeof j=="function")try{j()}catch(L){Dn(m,g,L)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(L){Dn(m,g,L)}else y.current=null}function h5(m){var g=m.type,y=m.memoizedProps,j=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&j.focus();break e;case"img":y.src?j.src=y.src:y.srcSet&&(j.srcset=y.srcSet)}}catch(L){Dn(m,m.return,L)}}function AC(m,g,y){try{var j=m.stateNode;zte(j,m.type,y,g),j[ot]=g}catch(L){Dn(m,m.return,L)}}function g5(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&Ac(m.type)||m.tag===4}function TC(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||g5(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&Ac(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function EC(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Qo));else if(j!==4&&(j===27&&Ac(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(EC(m,g,y),m=m.sibling;m!==null;)EC(m,g,y),m=m.sibling}function Q0(m,g,y){var j=m.tag;if(j===5||j===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(j!==4&&(j===27&&Ac(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(Q0(m,g,y),m=m.sibling;m!==null;)Q0(m,g,y),m=m.sibling}function p5(m){var g=m.stateNode,y=m.memoizedProps;try{for(var j=m.type,L=g.attributes;L.length;)g.removeAttributeNode(L[0]);Ns(g,j,y),g[re]=m,g[ot]=y}catch(O){Dn(m,m.return,O)}}var sl=!1,za=!1,kC=!1,x5=typeof WeakSet=="function"?WeakSet:Set,cs=null;function yte(m,g){if(m=m.containerInfo,XC=gy,m=E3(m),j1(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var j=y.getSelection&&y.getSelection();if(j&&j.rangeCount!==0){y=j.anchorNode;var L=j.anchorOffset,O=j.focusNode;j=j.focusOffset;try{y.nodeType,O.nodeType}catch{y=null;break e}var Y=0,we=-1,ze=-1,st=0,ut=0,xt=m,it=null;t:for(;;){for(var dt;xt!==y||L!==0&&xt.nodeType!==3||(we=Y+L),xt!==O||j!==0&&xt.nodeType!==3||(ze=Y+j),xt.nodeType===3&&(Y+=xt.nodeValue.length),(dt=xt.firstChild)!==null;)it=xt,xt=dt;for(;;){if(xt===m)break t;if(it===y&&++st===L&&(we=Y),it===O&&++ut===j&&(ze=Y),(dt=xt.nextSibling)!==null)break;xt=it,it=xt.parentNode}xt=dt}y=we===-1||ze===-1?null:{start:we,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(ZC={focusedElem:m,selectionRange:y},gy=!1,cs=g;cs!==null;)if(g=cs,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,cs=m;else for(;cs!==null;){switch(g=cs,O=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)L=m[y],L.ref.impl=L.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&O!==null){m=void 0,y=g,L=O.memoizedProps,O=O.memoizedState,j=y.stateNode;try{var Mt=zd(y.type,L);m=j.getSnapshotBeforeUpdate(Mt,O),j.__reactInternalSnapshotBeforeUpdate=m}catch(Vt){Dn(y,y.return,Vt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)tS(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":tS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,cs=m;break}cs=g.return}}function y5(m,g,y){var j=y.flags;switch(y.tag){case 0:case 11:case 15:il(m,y),j&4&&Rh(5,y);break;case 1:if(il(m,y),j&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(Y){Dn(y,y.return,Y)}else{var L=zd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(L,g,m.__reactInternalSnapshotBeforeUpdate)}catch(Y){Dn(y,y.return,Y)}}j&64&&m5(y),j&512&&zh(y,y.return);break;case 3:if(il(m,y),j&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{nO(m,g)}catch(Y){Dn(y,y.return,Y)}}break;case 27:g===null&&j&4&&p5(y);case 26:case 5:il(m,y),g===null&&j&4&&h5(y),j&512&&zh(y,y.return);break;case 12:il(m,y);break;case 31:il(m,y),j&4&&w5(m,y);break;case 13:il(m,y),j&4&&N5(m,y),j&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=Ate.bind(null,y),Vte(m,y))));break;case 22:if(j=y.memoizedState!==null||sl,!j){g=g!==null&&g.memoizedState!==null||za,L=sl;var O=za;sl=j,(za=g)&&!O?ol(m,y,(y.subtreeFlags&8772)!==0):il(m,y),sl=L,za=O}break;case 30:break;default:il(m,y)}}function b5(m){var g=m.alternate;g!==null&&(m.alternate=null,b5(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&$(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var ra=null,Zs=!1;function rl(m,g,y){for(y=y.child;y!==null;)v5(m,g,y),y=y.sibling}function v5(m,g,y){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(nt,y)}catch{}switch(y.tag){case 26:za||to(y,g),rl(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:za||to(y,g);var j=ra,L=Zs;Ac(y.type)&&(ra=y.stateNode,Zs=!1),rl(m,g,y),Qh(y.stateNode),ra=j,Zs=L;break;case 5:za||to(y,g);case 6:if(j=ra,L=Zs,ra=null,rl(m,g,y),ra=j,Zs=L,ra!==null)if(Zs)try{(ra.nodeType===9?ra.body:ra.nodeName==="HTML"?ra.ownerDocument.body:ra).removeChild(y.stateNode)}catch(O){Dn(y,g,O)}else try{ra.removeChild(y.stateNode)}catch(O){Dn(y,g,O)}break;case 18:ra!==null&&(Zs?(m=ra,mM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),Mm(m)):mM(ra,y.stateNode));break;case 4:j=ra,L=Zs,ra=y.stateNode.containerInfo,Zs=!0,rl(m,g,y),ra=j,Zs=L;break;case 0:case 11:case 14:case 15:vc(2,y,g),za||vc(4,y,g),rl(m,g,y);break;case 1:za||(to(y,g),j=y.stateNode,typeof j.componentWillUnmount=="function"&&f5(y,g,j)),rl(m,g,y);break;case 21:rl(m,g,y);break;case 22:za=(j=za)||y.memoizedState!==null,rl(m,g,y),za=j;break;default:rl(m,g,y)}}function w5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Mm(m)}catch(y){Dn(g,g.return,y)}}}function N5(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Mm(m)}catch(y){Dn(g,g.return,y)}}function bte(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new x5),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new x5),g;default:throw Error(s(435,m.tag))}}function Y0(m,g){var y=bte(m);g.forEach(function(j){if(!y.has(j)){y.add(j);var L=Tte.bind(null,m,j);j.then(L,L)}})}function Js(m,g){var y=g.deletions;if(y!==null)for(var j=0;j<y.length;j++){var L=y[j],O=m,Y=g,we=Y;e:for(;we!==null;){switch(we.tag){case 27:if(Ac(we.type)){ra=we.stateNode,Zs=!1;break e}break;case 5:ra=we.stateNode,Zs=!1;break e;case 3:case 4:ra=we.stateNode.containerInfo,Zs=!0;break e}we=we.return}if(ra===null)throw Error(s(160));v5(O,Y,L),ra=null,Zs=!1,O=L.alternate,O!==null&&(O.return=null),L.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)j5(g,m),g=g.sibling}var ki=null;function j5(m,g){var y=m.alternate,j=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Js(g,m),er(m),j&4&&(vc(3,m,m.return),Rh(3,m),vc(5,m,m.return));break;case 1:Js(g,m),er(m),j&512&&(za||y===null||to(y,y.return)),j&64&&sl&&(m=m.updateQueue,m!==null&&(j=m.callbacks,j!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?j:y.concat(j))));break;case 26:var L=ki;if(Js(g,m),er(m),j&512&&(za||y===null||to(y,y.return)),j&4){var O=y!==null?y.memoizedState:null;if(j=m.memoizedState,y===null)if(j===null)if(m.stateNode===null){e:{j=m.type,y=m.memoizedProps,L=L.ownerDocument||L;t:switch(j){case"title":O=L.getElementsByTagName("title")[0],(!O||O[F]||O[re]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=L.createElement(j),L.head.insertBefore(O,L.querySelector("head > title"))),Ns(O,j,y),O[re]=m,Ye(O),j=O;break e;case"link":var Y=jM("link","href",L).get(j+(y.href||""));if(Y){for(var we=0;we<Y.length;we++)if(O=Y[we],O.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&O.getAttribute("rel")===(y.rel==null?null:y.rel)&&O.getAttribute("title")===(y.title==null?null:y.title)&&O.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Y.splice(we,1);break t}}O=L.createElement(j),Ns(O,j,y),L.head.appendChild(O);break;case"meta":if(Y=jM("meta","content",L).get(j+(y.content||""))){for(we=0;we<Y.length;we++)if(O=Y[we],O.getAttribute("content")===(y.content==null?null:""+y.content)&&O.getAttribute("name")===(y.name==null?null:y.name)&&O.getAttribute("property")===(y.property==null?null:y.property)&&O.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&O.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Y.splice(we,1);break t}}O=L.createElement(j),Ns(O,j,y),L.head.appendChild(O);break;default:throw Error(s(468,j))}O[re]=m,Ye(O),j=O}m.stateNode=j}else CM(L,m.type,m.stateNode);else m.stateNode=NM(L,j,m.memoizedProps);else O!==j?(O===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):O.count--,j===null?CM(L,m.type,m.stateNode):NM(L,j,m.memoizedProps)):j===null&&m.stateNode!==null&&AC(m,m.memoizedProps,y.memoizedProps)}break;case 27:Js(g,m),er(m),j&512&&(za||y===null||to(y,y.return)),y!==null&&j&4&&AC(m,m.memoizedProps,y.memoizedProps);break;case 5:if(Js(g,m),er(m),j&512&&(za||y===null||to(y,y.return)),m.flags&32){L=m.stateNode;try{sm(L,"")}catch(Mt){Dn(m,m.return,Mt)}}j&4&&m.stateNode!=null&&(L=m.memoizedProps,AC(m,L,y!==null?y.memoizedProps:L)),j&1024&&(kC=!0);break;case 6:if(Js(g,m),er(m),j&4){if(m.stateNode===null)throw Error(s(162));j=m.memoizedProps,y=m.stateNode;try{y.nodeValue=j}catch(Mt){Dn(m,m.return,Mt)}}break;case 3:if(uy=null,L=ki,ki=cy(g.containerInfo),Js(g,m),ki=L,er(m),j&4&&y!==null&&y.memoizedState.isDehydrated)try{Mm(g.containerInfo)}catch(Mt){Dn(m,m.return,Mt)}kC&&(kC=!1,C5(m));break;case 4:j=ki,ki=cy(m.stateNode.containerInfo),Js(g,m),er(m),ki=j;break;case 12:Js(g,m),er(m);break;case 31:Js(g,m),er(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,Y0(m,j)));break;case 13:Js(g,m),er(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(X0=Z()),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,Y0(m,j)));break;case 22:L=m.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,st=sl,ut=za;if(sl=st||L,za=ut||ze,Js(g,m),za=ut,sl=st,er(m),j&8192)e:for(g=m.stateNode,g._visibility=L?g._visibility&-2:g._visibility|1,L&&(y===null||ze||sl||za||Ud(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){ze=y=g;try{if(O=ze.stateNode,L)Y=O.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{we=ze.stateNode;var xt=ze.memoizedProps.style,it=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;we.style.display=it==null||typeof it=="boolean"?"":(""+it).trim()}}catch(Mt){Dn(ze,ze.return,Mt)}}}else if(g.tag===6){if(y===null){ze=g;try{ze.stateNode.nodeValue=L?"":ze.memoizedProps}catch(Mt){Dn(ze,ze.return,Mt)}}}else if(g.tag===18){if(y===null){ze=g;try{var dt=ze.stateNode;L?fM(dt,!0):fM(ze.stateNode,!1)}catch(Mt){Dn(ze,ze.return,Mt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}j&4&&(j=m.updateQueue,j!==null&&(y=j.retryQueue,y!==null&&(j.retryQueue=null,Y0(m,y))));break;case 19:Js(g,m),er(m),j&4&&(j=m.updateQueue,j!==null&&(m.updateQueue=null,Y0(m,j)));break;case 30:break;case 21:break;default:Js(g,m),er(m)}}function er(m){var g=m.flags;if(g&2){try{for(var y,j=m.return;j!==null;){if(g5(j)){y=j;break}j=j.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var L=y.stateNode,O=TC(m);Q0(m,O,L);break;case 5:var Y=y.stateNode;y.flags&32&&(sm(Y,""),y.flags&=-33);var we=TC(m);Q0(m,we,Y);break;case 3:case 4:var ze=y.stateNode.containerInfo,st=TC(m);EC(m,st,ze);break;default:throw Error(s(161))}}catch(ut){Dn(m,m.return,ut)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function C5(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;C5(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function il(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)y5(m,g.alternate,g),g=g.sibling}function Ud(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:vc(4,g,g.return),Ud(g);break;case 1:to(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&f5(g,g.return,y),Ud(g);break;case 27:Qh(g.stateNode);case 26:case 5:to(g,g.return),Ud(g);break;case 22:g.memoizedState===null&&Ud(g);break;case 30:Ud(g);break;default:Ud(g)}m=m.sibling}}function ol(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var j=g.alternate,L=m,O=g,Y=O.flags;switch(O.tag){case 0:case 11:case 15:ol(L,O,y),Rh(4,O);break;case 1:if(ol(L,O,y),j=O,L=j.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(st){Dn(j,j.return,st)}if(j=O,L=j.updateQueue,L!==null){var we=j.stateNode;try{var ze=L.shared.hiddenCallbacks;if(ze!==null)for(L.shared.hiddenCallbacks=null,L=0;L<ze.length;L++)tO(ze[L],we)}catch(st){Dn(j,j.return,st)}}y&&Y&64&&m5(O),zh(O,O.return);break;case 27:p5(O);case 26:case 5:ol(L,O,y),y&&j===null&&Y&4&&h5(O),zh(O,O.return);break;case 12:ol(L,O,y);break;case 31:ol(L,O,y),y&&Y&4&&w5(L,O);break;case 13:ol(L,O,y),y&&Y&4&&N5(L,O);break;case 22:O.memoizedState===null&&ol(L,O,y),zh(O,O.return);break;case 30:break;default:ol(L,O,y)}g=g.sibling}}function LC(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&Sh(y))}function PC(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Sh(m))}function Li(m,g,y,j){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)S5(m,g,y,j),g=g.sibling}function S5(m,g,y,j){var L=g.flags;switch(g.tag){case 0:case 11:case 15:Li(m,g,y,j),L&2048&&Rh(9,g);break;case 1:Li(m,g,y,j);break;case 3:Li(m,g,y,j),L&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Sh(m)));break;case 12:if(L&2048){Li(m,g,y,j),m=g.stateNode;try{var O=g.memoizedProps,Y=O.id,we=O.onPostCommit;typeof we=="function"&&we(Y,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(ze){Dn(g,g.return,ze)}}else Li(m,g,y,j);break;case 31:Li(m,g,y,j);break;case 13:Li(m,g,y,j);break;case 23:break;case 22:O=g.stateNode,Y=g.alternate,g.memoizedState!==null?O._visibility&2?Li(m,g,y,j):Uh(m,g):O._visibility&2?Li(m,g,y,j):(O._visibility|=2,Cm(m,g,y,j,(g.subtreeFlags&10256)!==0||!1)),L&2048&&LC(Y,g);break;case 24:Li(m,g,y,j),L&2048&&PC(g.alternate,g);break;default:Li(m,g,y,j)}}function Cm(m,g,y,j,L){for(L=L&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var O=m,Y=g,we=y,ze=j,st=Y.flags;switch(Y.tag){case 0:case 11:case 15:Cm(O,Y,we,ze,L),Rh(8,Y);break;case 23:break;case 22:var ut=Y.stateNode;Y.memoizedState!==null?ut._visibility&2?Cm(O,Y,we,ze,L):Uh(O,Y):(ut._visibility|=2,Cm(O,Y,we,ze,L)),L&&st&2048&&LC(Y.alternate,Y);break;case 24:Cm(O,Y,we,ze,L),L&&st&2048&&PC(Y.alternate,Y);break;default:Cm(O,Y,we,ze,L)}g=g.sibling}}function Uh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,j=g,L=j.flags;switch(j.tag){case 22:Uh(y,j),L&2048&&LC(j.alternate,j);break;case 24:Uh(y,j),L&2048&&PC(j.alternate,j);break;default:Uh(y,j)}g=g.sibling}}var Fh=8192;function Sm(m,g,y){if(m.subtreeFlags&Fh)for(m=m.child;m!==null;)_5(m,g,y),m=m.sibling}function _5(m,g,y){switch(m.tag){case 26:Sm(m,g,y),m.flags&Fh&&m.memoizedState!==null&&rne(y,ki,m.memoizedState,m.memoizedProps);break;case 5:Sm(m,g,y);break;case 3:case 4:var j=ki;ki=cy(m.stateNode.containerInfo),Sm(m,g,y),ki=j;break;case 22:m.memoizedState===null&&(j=m.alternate,j!==null&&j.memoizedState!==null?(j=Fh,Fh=16777216,Sm(m,g,y),Fh=j):Sm(m,g,y));break;default:Sm(m,g,y)}}function A5(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Bh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];cs=j,E5(j,m)}A5(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)T5(m),m=m.sibling}function T5(m){switch(m.tag){case 0:case 11:case 15:Bh(m),m.flags&2048&&vc(9,m,m.return);break;case 3:Bh(m);break;case 12:Bh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,K0(m)):Bh(m);break;default:Bh(m)}}function K0(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var j=g[y];cs=j,E5(j,m)}A5(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:vc(8,g,g.return),K0(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,K0(g));break;default:K0(g)}m=m.sibling}}function E5(m,g){for(;cs!==null;){var y=cs;switch(y.tag){case 0:case 11:case 15:vc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var j=y.memoizedState.cachePool.pool;j!=null&&j.refCount++}break;case 24:Sh(y.memoizedState.cache)}if(j=y.child,j!==null)j.return=y,cs=j;else e:for(y=m;cs!==null;){j=cs;var L=j.sibling,O=j.return;if(b5(j),j===y){cs=null;break e}if(L!==null){L.return=O,cs=L;break e}cs=O}}}var vte={getCacheForType:function(m){var g=vs(Ia),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return vs(Ia).controller.signal}},wte=typeof WeakMap=="function"?WeakMap:Map,An=0,qn=null,mn=null,gn=0,Pn=0,_r=null,wc=!1,_m=!1,DC=!1,ll=0,va=0,Nc=0,Fd=0,OC=0,Ar=0,Am=0,Hh=null,tr=null,MC=!1,X0=0,k5=0,Z0=1/0,J0=null,jc=null,Qa=0,Cc=null,Tm=null,cl=0,IC=0,$C=null,L5=null,qh=0,RC=null;function Tr(){return(An&2)!==0&&gn!==0?gn&-gn:V.T!==null?qC():Ht()}function P5(){if(Ar===0)if((gn&536870912)===0||bn){var m=J;J<<=1,(J&3932160)===0&&(J=262144),Ar=m}else Ar=536870912;return m=Cr.current,m!==null&&(m.flags|=32),Ar}function nr(m,g,y){(m===qn&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)&&(Em(m,0),Sc(m,gn,Ar,!1)),ge(m,y),((An&2)===0||m!==qn)&&(m===qn&&((An&2)===0&&(Fd|=y),va===4&&Sc(m,gn,Ar,!1)),no(m))}function D5(m,g,y){if((An&6)!==0)throw Error(s(327));var j=!y&&(g&127)===0&&(g&m.expiredLanes)===0||ie(m,g),L=j?Cte(m,g):UC(m,g,!0),O=j;do{if(L===0){_m&&!j&&Sc(m,g,0,!1);break}else{if(y=m.current.alternate,O&&!Nte(y)){L=UC(m,g,!1),O=!1;continue}if(L===2){if(O=g,m.errorRecoveryDisabledLanes&O)var Y=0;else Y=m.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){g=Y;e:{var we=m;L=Hh;var ze=we.current.memoizedState.isDehydrated;if(ze&&(Em(we,Y).flags|=256),Y=UC(we,Y,!1),Y!==2){if(DC&&!ze){we.errorRecoveryDisabledLanes|=O,Fd|=O,L=4;break e}O=tr,tr=L,O!==null&&(tr===null?tr=O:tr.push.apply(tr,O))}L=Y}if(O=!1,L!==2)continue}}if(L===1){Em(m,0),Sc(m,g,0,!0);break}e:{switch(j=m,O=L,O){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:Sc(j,g,Ar,!wc);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(L=X0+300-Z(),10<L)){if(Sc(j,g,Ar,!wc),B(j,0,!0)!==0)break e;cl=g,j.timeoutHandle=dM(O5.bind(null,j,y,tr,J0,MC,g,Ar,Fd,Am,wc,O,"Throttled",-0,0),L);break e}O5(j,y,tr,J0,MC,g,Ar,Fd,Am,wc,O,null,-0,0)}}break}while(!0);no(m)}function O5(m,g,y,j,L,O,Y,we,ze,st,ut,xt,it,dt){if(m.timeoutHandle=-1,xt=g.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qo},_5(g,O,xt);var Mt=(O&62914560)===O?X0-Z():(O&4194048)===O?k5-Z():0;if(Mt=ine(xt,Mt),Mt!==null){cl=O,m.cancelPendingCommit=Mt(B5.bind(null,m,g,O,y,j,L,Y,we,ze,ut,xt,null,it,dt)),Sc(m,O,Y,!st);return}}B5(m,g,O,y,j,L,Y,we,ze)}function Nte(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var j=0;j<y.length;j++){var L=y[j],O=L.getSnapshot;L=L.value;try{if(!Nr(O(),L))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Sc(m,g,y,j){g&=~OC,g&=~Fd,m.suspendedLanes|=g,m.pingedLanes&=~g,j&&(m.warmLanes|=g),j=m.expirationTimes;for(var L=g;0<L;){var O=31-ct(L),Y=1<<O;j[O]=-1,L&=~Y}y!==0&&Fe(m,y,g)}function ey(){return(An&6)===0?(Gh(0),!1):!0}function zC(){if(mn!==null){if(Pn===0)var m=mn.return;else m=mn,Zo=Pd=null,tC(m),bm=null,Ah=0,m=mn;for(;m!==null;)u5(m.alternate,m),m=m.return;mn=null}}function Em(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,Bte(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),cl=0,zC(),qn=m,mn=y=Ko(m.current,null),gn=g,Pn=0,_r=null,wc=!1,_m=ie(m,g),DC=!1,Am=Ar=OC=Fd=Nc=va=0,tr=Hh=null,MC=!1,(g&8)!==0&&(g|=g&32);var j=m.entangledLanes;if(j!==0)for(m=m.entanglements,j&=g;0<j;){var L=31-ct(j),O=1<<L;g|=m[L],j&=~O}return ll=g,w0(),y}function M5(m,g){an=null,V.H=Mh,g===ym||g===E0?(g=X3(),Pn=3):g===H1?(g=X3(),Pn=4):Pn=g===xC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,_r=g,mn===null&&(va=1,H0(m,Qr(g,m.current)))}function I5(){var m=Cr.current;return m===null?!0:(gn&4194048)===gn?Zr===null:(gn&62914560)===gn||(gn&536870912)!==0?m===Zr:!1}function $5(){var m=V.H;return V.H=Mh,m===null?Mh:m}function R5(){var m=V.A;return V.A=vte,m}function ty(){va=4,wc||(gn&4194048)!==gn&&Cr.current!==null||(_m=!0),(Nc&134217727)===0&&(Fd&134217727)===0||qn===null||Sc(qn,gn,Ar,!1)}function UC(m,g,y){var j=An;An|=2;var L=$5(),O=R5();(qn!==m||gn!==g)&&(J0=null,Em(m,g)),g=!1;var Y=va;e:do try{if(Pn!==0&&mn!==null){var we=mn,ze=_r;switch(Pn){case 8:zC(),Y=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(g=!0);var st=Pn;if(Pn=0,_r=null,km(m,we,ze,st),y&&_m){Y=0;break e}break;default:st=Pn,Pn=0,_r=null,km(m,we,ze,st)}}jte(),Y=va;break}catch(ut){M5(m,ut)}while(!0);return g&&m.shellSuspendCounter++,Zo=Pd=null,An=j,V.H=L,V.A=O,mn===null&&(qn=null,gn=0,w0()),Y}function jte(){for(;mn!==null;)z5(mn)}function Cte(m,g){var y=An;An|=2;var j=$5(),L=R5();qn!==m||gn!==g?(J0=null,Z0=Z()+500,Em(m,g)):_m=ie(m,g);e:do try{if(Pn!==0&&mn!==null){g=mn;var O=_r;t:switch(Pn){case 1:Pn=0,_r=null,km(m,g,O,1);break;case 2:case 9:if(Y3(O)){Pn=0,_r=null,U5(g);break}g=function(){Pn!==2&&Pn!==9||qn!==m||(Pn=7),no(m)},O.then(g,g);break e;case 3:Pn=7;break e;case 4:Pn=5;break e;case 7:Y3(O)?(Pn=0,_r=null,U5(g)):(Pn=0,_r=null,km(m,g,O,7));break;case 5:var Y=null;switch(mn.tag){case 26:Y=mn.memoizedState;case 5:case 27:var we=mn;if(Y?SM(Y):we.stateNode.complete){Pn=0,_r=null;var ze=we.sibling;if(ze!==null)mn=ze;else{var st=we.return;st!==null?(mn=st,ny(st)):mn=null}break t}}Pn=0,_r=null,km(m,g,O,5);break;case 6:Pn=0,_r=null,km(m,g,O,6);break;case 8:zC(),va=6;break e;default:throw Error(s(462))}}Ste();break}catch(ut){M5(m,ut)}while(!0);return Zo=Pd=null,V.H=j,V.A=L,An=y,mn!==null?0:(qn=null,gn=0,w0(),va)}function Ste(){for(;mn!==null&&!be();)z5(mn)}function z5(m){var g=c5(m.alternate,m,ll);m.memoizedProps=m.pendingProps,g===null?ny(m):mn=g}function U5(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=a5(y,g,g.pendingProps,g.type,void 0,gn);break;case 11:g=a5(y,g,g.pendingProps,g.type.render,g.ref,gn);break;case 5:tC(g);default:u5(y,g),g=mn=R3(g,ll),g=c5(y,g,ll)}m.memoizedProps=m.pendingProps,g===null?ny(m):mn=g}function km(m,g,y,j){Zo=Pd=null,tC(g),bm=null,Ah=0;var L=g.return;try{if(fte(m,L,g,y,gn)){va=1,H0(m,Qr(y,m.current)),mn=null;return}}catch(O){if(L!==null)throw mn=L,O;va=1,H0(m,Qr(y,m.current)),mn=null;return}g.flags&32768?(bn||j===1?m=!0:_m||(gn&536870912)!==0?m=!1:(wc=m=!0,(j===2||j===9||j===3||j===6)&&(j=Cr.current,j!==null&&j.tag===13&&(j.flags|=16384))),F5(g,m)):ny(g)}function ny(m){var g=m;do{if((g.flags&32768)!==0){F5(g,wc);return}m=g.return;var y=pte(g.alternate,g,ll);if(y!==null){mn=y;return}if(g=g.sibling,g!==null){mn=g;return}mn=g=m}while(g!==null);va===0&&(va=5)}function F5(m,g){do{var y=xte(m.alternate,m);if(y!==null){y.flags&=32767,mn=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){mn=m;return}mn=m=y}while(m!==null);va=6,mn=null}function B5(m,g,y,j,L,O,Y,we,ze){m.cancelPendingCommit=null;do ay();while(Qa!==0);if((An&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(O=g.lanes|g.childLanes,O|=T1,fe(m,y,O,Y,we,ze),m===qn&&(mn=qn=null,gn=0),Tm=g,Cc=m,cl=y,IC=O,$C=L,L5=j,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,Ete(Ie,function(){return V5(),null})):(m.callbackNode=null,m.callbackPriority=0),j=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||j){j=V.T,V.T=null,L=X.p,X.p=2,Y=An,An|=4;try{yte(m,g,y)}finally{An=Y,X.p=L,V.T=j}}Qa=1,H5(),q5(),G5()}}function H5(){if(Qa===1){Qa=0;var m=Cc,g=Tm,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=V.T,V.T=null;var j=X.p;X.p=2;var L=An;An|=4;try{j5(g,m);var O=ZC,Y=E3(m.containerInfo),we=O.focusedElem,ze=O.selectionRange;if(Y!==we&&we&&we.ownerDocument&&T3(we.ownerDocument.documentElement,we)){if(ze!==null&&j1(we)){var st=ze.start,ut=ze.end;if(ut===void 0&&(ut=st),"selectionStart"in we)we.selectionStart=st,we.selectionEnd=Math.min(ut,we.value.length);else{var xt=we.ownerDocument||document,it=xt&&xt.defaultView||window;if(it.getSelection){var dt=it.getSelection(),Mt=we.textContent.length,Vt=Math.min(ze.start,Mt),Fn=ze.end===void 0?Vt:Math.min(ze.end,Mt);!dt.extend&&Vt>Fn&&(Y=Fn,Fn=Vt,Vt=Y);var Ke=A3(we,Vt),He=A3(we,Fn);if(Ke&&He&&(dt.rangeCount!==1||dt.anchorNode!==Ke.node||dt.anchorOffset!==Ke.offset||dt.focusNode!==He.node||dt.focusOffset!==He.offset)){var at=xt.createRange();at.setStart(Ke.node,Ke.offset),dt.removeAllRanges(),Vt>Fn?(dt.addRange(at),dt.extend(He.node,He.offset)):(at.setEnd(He.node,He.offset),dt.addRange(at))}}}}for(xt=[],dt=we;dt=dt.parentNode;)dt.nodeType===1&&xt.push({element:dt,left:dt.scrollLeft,top:dt.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<xt.length;we++){var ft=xt[we];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}gy=!!XC,ZC=XC=null}finally{An=L,X.p=j,V.T=y}}m.current=g,Qa=2}}function q5(){if(Qa===2){Qa=0;var m=Cc,g=Tm,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=V.T,V.T=null;var j=X.p;X.p=2;var L=An;An|=4;try{y5(m,g.alternate,g)}finally{An=L,X.p=j,V.T=y}}Qa=3}}function G5(){if(Qa===4||Qa===3){Qa=0,le();var m=Cc,g=Tm,y=cl,j=L5;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Qa=5:(Qa=0,Tm=Cc=null,W5(m,m.pendingLanes));var L=m.pendingLanes;if(L===0&&(jc=null),St(y),g=g.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(nt,g,void 0,(g.current.flags&128)===128)}catch{}if(j!==null){g=V.T,L=X.p,X.p=2,V.T=null;try{for(var O=m.onRecoverableError,Y=0;Y<j.length;Y++){var we=j[Y];O(we.value,{componentStack:we.stack})}}finally{V.T=g,X.p=L}}(cl&3)!==0&&ay(),no(m),L=m.pendingLanes,(y&261930)!==0&&(L&42)!==0?m===RC?qh++:(qh=0,RC=m):qh=0,Gh(0)}}function W5(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,Sh(g)))}function ay(){return H5(),q5(),G5(),V5()}function V5(){if(Qa!==5)return!1;var m=Cc,g=IC;IC=0;var y=St(cl),j=V.T,L=X.p;try{X.p=32>y?32:y,V.T=null,y=$C,$C=null;var O=Cc,Y=cl;if(Qa=0,Tm=Cc=null,cl=0,(An&6)!==0)throw Error(s(331));var we=An;if(An|=4,T5(O.current),S5(O,O.current,Y,y),An=we,Gh(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(nt,O)}catch{}return!0}finally{X.p=L,V.T=j,W5(m,g)}}function Q5(m,g,y){g=Qr(y,g),g=pC(m.stateNode,g,2),m=xc(m,g,2),m!==null&&(ge(m,2),no(m))}function Dn(m,g,y){if(m.tag===3)Q5(m,m,y);else for(;g!==null;){if(g.tag===3){Q5(g,m,y);break}else if(g.tag===1){var j=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(jc===null||!jc.has(j))){m=Qr(y,m),y=YO(2),j=xc(g,y,2),j!==null&&(KO(y,j,g,m),ge(j,2),no(j));break}}g=g.return}}function FC(m,g,y){var j=m.pingCache;if(j===null){j=m.pingCache=new wte;var L=new Set;j.set(g,L)}else L=j.get(g),L===void 0&&(L=new Set,j.set(g,L));L.has(y)||(DC=!0,L.add(y),m=_te.bind(null,m,g,y),g.then(m,m))}function _te(m,g,y){var j=m.pingCache;j!==null&&j.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,qn===m&&(gn&y)===y&&(va===4||va===3&&(gn&62914560)===gn&&300>Z()-X0?(An&2)===0&&Em(m,0):OC|=y,Am===gn&&(Am=0)),no(m)}function Y5(m,g){g===0&&(g=se()),m=Ed(m,g),m!==null&&(ge(m,g),no(m))}function Ate(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),Y5(m,y)}function Tte(m,g){var y=0;switch(m.tag){case 31:case 13:var j=m.stateNode,L=m.memoizedState;L!==null&&(y=L.retryLane);break;case 19:j=m.stateNode;break;case 22:j=m.stateNode._retryCache;break;default:throw Error(s(314))}j!==null&&j.delete(g),Y5(m,y)}function Ete(m,g){return Je(m,g)}var sy=null,Lm=null,BC=!1,ry=!1,HC=!1,_c=0;function no(m){m!==Lm&&m.next===null&&(Lm===null?sy=Lm=m:Lm=Lm.next=m),ry=!0,BC||(BC=!0,Lte())}function Gh(m,g){if(!HC&&ry){HC=!0;do for(var y=!1,j=sy;j!==null;){if(m!==0){var L=j.pendingLanes;if(L===0)var O=0;else{var Y=j.suspendedLanes,we=j.pingedLanes;O=(1<<31-ct(42|m)+1)-1,O&=L&~(Y&~we),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(y=!0,J5(j,O))}else O=gn,O=B(j,j===qn?O:0,j.cancelPendingCommit!==null||j.timeoutHandle!==-1),(O&3)===0||ie(j,O)||(y=!0,J5(j,O));j=j.next}while(y);HC=!1}}function kte(){K5()}function K5(){ry=BC=!1;var m=0;_c!==0&&Fte()&&(m=_c);for(var g=Z(),y=null,j=sy;j!==null;){var L=j.next,O=X5(j,g);O===0?(j.next=null,y===null?sy=L:y.next=L,L===null&&(Lm=y)):(y=j,(m!==0||(O&3)!==0)&&(ry=!0)),j=L}Qa!==0&&Qa!==5||Gh(m),_c!==0&&(_c=0)}function X5(m,g){for(var y=m.suspendedLanes,j=m.pingedLanes,L=m.expirationTimes,O=m.pendingLanes&-62914561;0<O;){var Y=31-ct(O),we=1<<Y,ze=L[Y];ze===-1?((we&y)===0||(we&j)!==0)&&(L[Y]=ue(we,g)):ze<=g&&(m.expiredLanes|=we),O&=~we}if(g=qn,y=gn,y=B(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j=m.callbackNode,y===0||m===g&&(Pn===2||Pn===9)||m.cancelPendingCommit!==null)return j!==null&&j!==null&&H(j),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||ie(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(j!==null&&H(j),St(y)){case 2:case 8:y=Ue;break;case 32:y=Ie;break;case 268435456:y=gt;break;default:y=Ie}return j=Z5.bind(null,m),y=Je(y,j),m.callbackPriority=g,m.callbackNode=y,g}return j!==null&&j!==null&&H(j),m.callbackPriority=2,m.callbackNode=null,2}function Z5(m,g){if(Qa!==0&&Qa!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(ay()&&m.callbackNode!==y)return null;var j=gn;return j=B(m,m===qn?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),j===0?null:(D5(m,j,g),X5(m,Z()),m.callbackNode!=null&&m.callbackNode===y?Z5.bind(null,m):null)}function J5(m,g){if(ay())return null;D5(m,g,!0)}function Lte(){Hte(function(){(An&6)!==0?Je(te,kte):K5()})}function qC(){if(_c===0){var m=pm;m===0&&(m=ce,ce<<=1,(ce&261888)===0&&(ce=256)),_c=m}return _c}function eM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:f0(""+m)}function tM(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function Pte(m,g,y,j,L){if(g==="submit"&&y&&y.stateNode===L){var O=eM((L[ot]||null).action),Y=j.submitter;Y&&(g=(g=Y[ot]||null)?eM(g.formAction):Y.getAttribute("formAction"),g!==null&&(O=g,Y=null));var we=new x0("action","action",null,j,L);m.push({event:we,listeners:[{instance:null,listener:function(){if(j.defaultPrevented){if(_c!==0){var ze=Y?tM(L,Y):new FormData(L);dC(y,{pending:!0,data:ze,method:L.method,action:O},null,ze)}}else typeof O=="function"&&(we.preventDefault(),ze=Y?tM(L,Y):new FormData(L),dC(y,{pending:!0,data:ze,method:L.method,action:O},O,ze))},currentTarget:L}]})}}for(var GC=0;GC<A1.length;GC++){var WC=A1[GC],Dte=WC.toLowerCase(),Ote=WC[0].toUpperCase()+WC.slice(1);Ei(Dte,"on"+Ote)}Ei(P3,"onAnimationEnd"),Ei(D3,"onAnimationIteration"),Ei(O3,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(Kee,"onTransitionRun"),Ei(Xee,"onTransitionStart"),Ei(Zee,"onTransitionCancel"),Ei(M3,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),Xt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mte=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wh));function nM(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var j=m[y],L=j.event;j=j.listeners;e:{var O=void 0;if(g)for(var Y=j.length-1;0<=Y;Y--){var we=j[Y],ze=we.instance,st=we.currentTarget;if(we=we.listener,ze!==O&&L.isPropagationStopped())break e;O=we,L.currentTarget=st;try{O(L)}catch(ut){v0(ut)}L.currentTarget=null,O=ze}else for(Y=0;Y<j.length;Y++){if(we=j[Y],ze=we.instance,st=we.currentTarget,we=we.listener,ze!==O&&L.isPropagationStopped())break e;O=we,L.currentTarget=st;try{O(L)}catch(ut){v0(ut)}L.currentTarget=null,O=ze}}}}function fn(m,g){var y=g[kt];y===void 0&&(y=g[kt]=new Set);var j=m+"__bubble";y.has(j)||(aM(g,m,2,!1),y.add(j))}function VC(m,g,y){var j=0;g&&(j|=4),aM(y,m,j,g)}var iy="_reactListening"+Math.random().toString(36).slice(2);function QC(m){if(!m[iy]){m[iy]=!0,At.forEach(function(y){y!=="selectionchange"&&(Mte.has(y)||VC(y,!1,m),VC(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[iy]||(g[iy]=!0,VC("selectionchange",!1,g))}}function aM(m,g,y,j){switch(PM(g)){case 2:var L=cne;break;case 8:L=dne;break;default:L=cS}y=L.bind(null,g,y,m),L=void 0,!h1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(L=!0),j?L!==void 0?m.addEventListener(g,y,{capture:!0,passive:L}):m.addEventListener(g,y,!0):L!==void 0?m.addEventListener(g,y,{passive:L}):m.addEventListener(g,y,!1)}function YC(m,g,y,j,L){var O=j;if((g&1)===0&&(g&2)===0&&j!==null)e:for(;;){if(j===null)return;var Y=j.tag;if(Y===3||Y===4){var we=j.stateNode.containerInfo;if(we===L)break;if(Y===4)for(Y=j.return;Y!==null;){var ze=Y.tag;if((ze===3||ze===4)&&Y.stateNode.containerInfo===L)return;Y=Y.return}for(;we!==null;){if(Y=me(we),Y===null)return;if(ze=Y.tag,ze===5||ze===6||ze===26||ze===27){j=O=Y;continue e}we=we.parentNode}}j=j.return}l3(function(){var st=O,ut=m1(y),xt=[];e:{var it=I3.get(m);if(it!==void 0){var dt=x0,Mt=m;switch(m){case"keypress":if(g0(y)===0)break e;case"keydown":case"keyup":dt=Tee;break;case"focusin":Mt="focus",dt=y1;break;case"focusout":Mt="blur",dt=y1;break;case"beforeblur":case"afterblur":dt=y1;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":dt=u3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":dt=pee;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":dt=Lee;break;case P3:case D3:case O3:dt=bee;break;case M3:dt=Dee;break;case"scroll":case"scrollend":dt=hee;break;case"wheel":dt=Mee;break;case"copy":case"cut":case"paste":dt=wee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":dt=f3;break;case"toggle":case"beforetoggle":dt=$ee}var Vt=(g&4)!==0,Fn=!Vt&&(m==="scroll"||m==="scrollend"),Ke=Vt?it!==null?it+"Capture":null:it;Vt=[];for(var He=st,at;He!==null;){var ft=He;if(at=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||at===null||Ke===null||(ft=hh(He,Ke),ft!=null&&Vt.push(Vh(He,ft,at))),Fn)break;He=He.return}0<Vt.length&&(it=new dt(it,Mt,null,y,ut),xt.push({event:it,listeners:Vt}))}}if((g&7)===0){e:{if(it=m==="mouseover"||m==="pointerover",dt=m==="mouseout"||m==="pointerout",it&&y!==u1&&(Mt=y.relatedTarget||y.fromElement)&&(me(Mt)||Mt[zt]))break e;if((dt||it)&&(it=ut.window===ut?ut:(it=ut.ownerDocument)?it.defaultView||it.parentWindow:window,dt?(Mt=y.relatedTarget||y.toElement,dt=st,Mt=Mt?me(Mt):null,Mt!==null&&(Fn=i(Mt),Vt=Mt.tag,Mt!==Fn||Vt!==5&&Vt!==27&&Vt!==6)&&(Mt=null)):(dt=null,Mt=st),dt!==Mt)){if(Vt=u3,ft="onMouseLeave",Ke="onMouseEnter",He="mouse",(m==="pointerout"||m==="pointerover")&&(Vt=f3,ft="onPointerLeave",Ke="onPointerEnter",He="pointer"),Fn=dt==null?it:$e(dt),at=Mt==null?it:$e(Mt),it=new Vt(ft,He+"leave",dt,y,ut),it.target=Fn,it.relatedTarget=at,ft=null,me(ut)===st&&(Vt=new Vt(Ke,He+"enter",Mt,y,ut),Vt.target=at,Vt.relatedTarget=Fn,ft=Vt),Fn=ft,dt&&Mt)t:{for(Vt=Ite,Ke=dt,He=Mt,at=0,ft=Ke;ft;ft=Vt(ft))at++;ft=0;for(var qt=He;qt;qt=Vt(qt))ft++;for(;0<at-ft;)Ke=Vt(Ke),at--;for(;0<ft-at;)He=Vt(He),ft--;for(;at--;){if(Ke===He||He!==null&&Ke===He.alternate){Vt=Ke;break t}Ke=Vt(Ke),He=Vt(He)}Vt=null}else Vt=null;dt!==null&&sM(xt,it,dt,Vt,!1),Mt!==null&&Fn!==null&&sM(xt,Fn,Mt,Vt,!0)}}e:{if(it=st?$e(st):window,dt=it.nodeName&&it.nodeName.toLowerCase(),dt==="select"||dt==="input"&&it.type==="file")var Cn=w3;else if(b3(it))if(N3)Cn=Vee;else{Cn=Gee;var Ut=qee}else dt=it.nodeName,!dt||dt.toLowerCase()!=="input"||it.type!=="checkbox"&&it.type!=="radio"?st&&d1(st.elementType)&&(Cn=w3):Cn=Wee;if(Cn&&(Cn=Cn(m,st))){v3(xt,Cn,y,ut);break e}Ut&&Ut(m,it,st),m==="focusout"&&st&&it.type==="number"&&st.memoizedProps.value!=null&&c1(it,"number",it.value)}switch(Ut=st?$e(st):window,m){case"focusin":(b3(Ut)||Ut.contentEditable==="true")&&(lm=Ut,C1=st,Nh=null);break;case"focusout":Nh=C1=lm=null;break;case"mousedown":S1=!0;break;case"contextmenu":case"mouseup":case"dragend":S1=!1,k3(xt,y,ut);break;case"selectionchange":if(Yee)break;case"keydown":case"keyup":k3(xt,y,ut)}var ln;if(v1)e:{switch(m){case"compositionstart":var pn="onCompositionStart";break e;case"compositionend":pn="onCompositionEnd";break e;case"compositionupdate":pn="onCompositionUpdate";break e}pn=void 0}else om?x3(m,y)&&(pn="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(pn="onCompositionStart");pn&&(h3&&y.locale!=="ko"&&(om||pn!=="onCompositionStart"?pn==="onCompositionEnd"&&om&&(ln=c3()):(dc=ut,g1="value"in dc?dc.value:dc.textContent,om=!0)),Ut=oy(st,pn),0<Ut.length&&(pn=new m3(pn,m,null,y,ut),xt.push({event:pn,listeners:Ut}),ln?pn.data=ln:(ln=y3(y),ln!==null&&(pn.data=ln)))),(ln=zee?Uee(m,y):Fee(m,y))&&(pn=oy(st,"onBeforeInput"),0<pn.length&&(Ut=new m3("onBeforeInput","beforeinput",null,y,ut),xt.push({event:Ut,listeners:pn}),Ut.data=ln)),Pte(xt,m,st,y,ut)}nM(xt,g)})}function Vh(m,g,y){return{instance:m,listener:g,currentTarget:y}}function oy(m,g){for(var y=g+"Capture",j=[];m!==null;){var L=m,O=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||O===null||(L=hh(m,y),L!=null&&j.unshift(Vh(m,L,O)),L=hh(m,g),L!=null&&j.push(Vh(m,L,O))),m.tag===3)return j;m=m.return}return[]}function Ite(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function sM(m,g,y,j,L){for(var O=g._reactName,Y=[];y!==null&&y!==j;){var we=y,ze=we.alternate,st=we.stateNode;if(we=we.tag,ze!==null&&ze===j)break;we!==5&&we!==26&&we!==27||st===null||(ze=st,L?(st=hh(y,O),st!=null&&Y.unshift(Vh(y,st,ze))):L||(st=hh(y,O),st!=null&&Y.push(Vh(y,st,ze)))),y=y.return}Y.length!==0&&m.push({event:g,listeners:Y})}var $te=/\r\n?/g,Rte=/\u0000|\uFFFD/g;function rM(m){return(typeof m=="string"?m:""+m).replace($te,`
`).replace(Rte,"")}function iM(m,g){return g=rM(g),rM(m)===g}function Un(m,g,y,j,L,O){switch(y){case"children":typeof j=="string"?g==="body"||g==="textarea"&&j===""||sm(m,j):(typeof j=="number"||typeof j=="bigint")&&g!=="body"&&sm(m,""+j);break;case"className":u0(m,"class",j);break;case"tabIndex":u0(m,"tabindex",j);break;case"dir":case"role":case"viewBox":case"width":case"height":u0(m,y,j);break;case"style":i3(m,j,O);break;case"data":if(g!=="object"){u0(m,"data",j);break}case"src":case"href":if(j===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(j==null||typeof j=="function"||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=f0(""+j),m.setAttribute(y,j);break;case"action":case"formAction":if(typeof j=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(y==="formAction"?(g!=="input"&&Un(m,g,"name",L.name,L,null),Un(m,g,"formEncType",L.formEncType,L,null),Un(m,g,"formMethod",L.formMethod,L,null),Un(m,g,"formTarget",L.formTarget,L,null)):(Un(m,g,"encType",L.encType,L,null),Un(m,g,"method",L.method,L,null),Un(m,g,"target",L.target,L,null)));if(j==null||typeof j=="symbol"||typeof j=="boolean"){m.removeAttribute(y);break}j=f0(""+j),m.setAttribute(y,j);break;case"onClick":j!=null&&(m.onclick=Qo);break;case"onScroll":j!=null&&fn("scroll",m);break;case"onScrollEnd":j!=null&&fn("scrollend",m);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=j&&typeof j!="function"&&typeof j!="symbol";break;case"muted":m.muted=j&&typeof j!="function"&&typeof j!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(j==null||typeof j=="function"||typeof j=="boolean"||typeof j=="symbol"){m.removeAttribute("xlink:href");break}y=f0(""+j),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""+j):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":j&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":j===!0?m.setAttribute(y,""):j!==!1&&j!=null&&typeof j!="function"&&typeof j!="symbol"?m.setAttribute(y,j):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":j!=null&&typeof j!="function"&&typeof j!="symbol"&&!isNaN(j)&&1<=j?m.setAttribute(y,j):m.removeAttribute(y);break;case"rowSpan":case"start":j==null||typeof j=="function"||typeof j=="symbol"||isNaN(j)?m.removeAttribute(y):m.setAttribute(y,j);break;case"popover":fn("beforetoggle",m),fn("toggle",m),d0(m,"popover",j);break;case"xlinkActuate":Vo(m,"http://www.w3.org/1999/xlink","xlink:actuate",j);break;case"xlinkArcrole":Vo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",j);break;case"xlinkRole":Vo(m,"http://www.w3.org/1999/xlink","xlink:role",j);break;case"xlinkShow":Vo(m,"http://www.w3.org/1999/xlink","xlink:show",j);break;case"xlinkTitle":Vo(m,"http://www.w3.org/1999/xlink","xlink:title",j);break;case"xlinkType":Vo(m,"http://www.w3.org/1999/xlink","xlink:type",j);break;case"xmlBase":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:base",j);break;case"xmlLang":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",j);break;case"xmlSpace":Vo(m,"http://www.w3.org/XML/1998/namespace","xml:space",j);break;case"is":d0(m,"is",j);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=mee.get(y)||y,d0(m,y,j))}}function KC(m,g,y,j,L,O){switch(y){case"style":i3(m,j,O);break;case"dangerouslySetInnerHTML":if(j!=null){if(typeof j!="object"||!("__html"in j))throw Error(s(61));if(y=j.__html,y!=null){if(L.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof j=="string"?sm(m,j):(typeof j=="number"||typeof j=="bigint")&&sm(m,""+j);break;case"onScroll":j!=null&&fn("scroll",m);break;case"onScrollEnd":j!=null&&fn("scrollend",m);break;case"onClick":j!=null&&(m.onclick=Qo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(L=y.endsWith("Capture"),g=y.slice(2,L?y.length-7:void 0),O=m[ot]||null,O=O!=null?O[y]:null,typeof O=="function"&&m.removeEventListener(g,O,L),typeof j=="function")){typeof O!="function"&&O!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,j,L);break e}y in m?m[y]=j:j===!0?m.setAttribute(y,""):d0(m,y,j)}}}function Ns(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fn("error",m),fn("load",m);var j=!1,L=!1,O;for(O in y)if(y.hasOwnProperty(O)){var Y=y[O];if(Y!=null)switch(O){case"src":j=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Un(m,g,O,Y,y,null)}}L&&Un(m,g,"srcSet",y.srcSet,y,null),j&&Un(m,g,"src",y.src,y,null);return;case"input":fn("invalid",m);var we=O=Y=L=null,ze=null,st=null;for(j in y)if(y.hasOwnProperty(j)){var ut=y[j];if(ut!=null)switch(j){case"name":L=ut;break;case"type":Y=ut;break;case"checked":ze=ut;break;case"defaultChecked":st=ut;break;case"value":O=ut;break;case"defaultValue":we=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(s(137,g));break;default:Un(m,g,j,ut,y,null)}}n3(m,O,we,ze,st,Y,L,!1);return;case"select":fn("invalid",m),j=Y=O=null;for(L in y)if(y.hasOwnProperty(L)&&(we=y[L],we!=null))switch(L){case"value":O=we;break;case"defaultValue":Y=we;break;case"multiple":j=we;default:Un(m,g,L,we,y,null)}g=O,y=Y,m.multiple=!!j,g!=null?am(m,!!j,g,!1):y!=null&&am(m,!!j,y,!0);return;case"textarea":fn("invalid",m),O=L=j=null;for(Y in y)if(y.hasOwnProperty(Y)&&(we=y[Y],we!=null))switch(Y){case"value":j=we;break;case"defaultValue":L=we;break;case"children":O=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(s(91));break;default:Un(m,g,Y,we,y,null)}s3(m,j,L,O);return;case"option":for(ze in y)y.hasOwnProperty(ze)&&(j=y[ze],j!=null)&&(ze==="selected"?m.selected=j&&typeof j!="function"&&typeof j!="symbol":Un(m,g,ze,j,y,null));return;case"dialog":fn("beforetoggle",m),fn("toggle",m),fn("cancel",m),fn("close",m);break;case"iframe":case"object":fn("load",m);break;case"video":case"audio":for(j=0;j<Wh.length;j++)fn(Wh[j],m);break;case"image":fn("error",m),fn("load",m);break;case"details":fn("toggle",m);break;case"embed":case"source":case"link":fn("error",m),fn("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(st in y)if(y.hasOwnProperty(st)&&(j=y[st],j!=null))switch(st){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Un(m,g,st,j,y,null)}return;default:if(d1(g)){for(ut in y)y.hasOwnProperty(ut)&&(j=y[ut],j!==void 0&&KC(m,g,ut,j,y,void 0));return}}for(we in y)y.hasOwnProperty(we)&&(j=y[we],j!=null&&Un(m,g,we,j,y,null))}function zte(m,g,y,j){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,O=null,Y=null,we=null,ze=null,st=null,ut=null;for(dt in y){var xt=y[dt];if(y.hasOwnProperty(dt)&&xt!=null)switch(dt){case"checked":break;case"value":break;case"defaultValue":ze=xt;default:j.hasOwnProperty(dt)||Un(m,g,dt,null,j,xt)}}for(var it in j){var dt=j[it];if(xt=y[it],j.hasOwnProperty(it)&&(dt!=null||xt!=null))switch(it){case"type":O=dt;break;case"name":L=dt;break;case"checked":st=dt;break;case"defaultChecked":ut=dt;break;case"value":Y=dt;break;case"defaultValue":we=dt;break;case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,g));break;default:dt!==xt&&Un(m,g,it,dt,j,xt)}}l1(m,Y,we,ze,st,ut,O,L);return;case"select":dt=Y=we=it=null;for(O in y)if(ze=y[O],y.hasOwnProperty(O)&&ze!=null)switch(O){case"value":break;case"multiple":dt=ze;default:j.hasOwnProperty(O)||Un(m,g,O,null,j,ze)}for(L in j)if(O=j[L],ze=y[L],j.hasOwnProperty(L)&&(O!=null||ze!=null))switch(L){case"value":it=O;break;case"defaultValue":we=O;break;case"multiple":Y=O;default:O!==ze&&Un(m,g,L,O,j,ze)}g=we,y=Y,j=dt,it!=null?am(m,!!y,it,!1):!!j!=!!y&&(g!=null?am(m,!!y,g,!0):am(m,!!y,y?[]:"",!1));return;case"textarea":dt=it=null;for(we in y)if(L=y[we],y.hasOwnProperty(we)&&L!=null&&!j.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Un(m,g,we,null,j,L)}for(Y in j)if(L=j[Y],O=y[Y],j.hasOwnProperty(Y)&&(L!=null||O!=null))switch(Y){case"value":it=L;break;case"defaultValue":dt=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(s(91));break;default:L!==O&&Un(m,g,Y,L,j,O)}a3(m,it,dt);return;case"option":for(var Mt in y)it=y[Mt],y.hasOwnProperty(Mt)&&it!=null&&!j.hasOwnProperty(Mt)&&(Mt==="selected"?m.selected=!1:Un(m,g,Mt,null,j,it));for(ze in j)it=j[ze],dt=y[ze],j.hasOwnProperty(ze)&&it!==dt&&(it!=null||dt!=null)&&(ze==="selected"?m.selected=it&&typeof it!="function"&&typeof it!="symbol":Un(m,g,ze,it,j,dt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Vt in y)it=y[Vt],y.hasOwnProperty(Vt)&&it!=null&&!j.hasOwnProperty(Vt)&&Un(m,g,Vt,null,j,it);for(st in j)if(it=j[st],dt=y[st],j.hasOwnProperty(st)&&it!==dt&&(it!=null||dt!=null))switch(st){case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(s(137,g));break;default:Un(m,g,st,it,j,dt)}return;default:if(d1(g)){for(var Fn in y)it=y[Fn],y.hasOwnProperty(Fn)&&it!==void 0&&!j.hasOwnProperty(Fn)&&KC(m,g,Fn,void 0,j,it);for(ut in j)it=j[ut],dt=y[ut],!j.hasOwnProperty(ut)||it===dt||it===void 0&&dt===void 0||KC(m,g,ut,it,j,dt);return}}for(var Ke in y)it=y[Ke],y.hasOwnProperty(Ke)&&it!=null&&!j.hasOwnProperty(Ke)&&Un(m,g,Ke,null,j,it);for(xt in j)it=j[xt],dt=y[xt],!j.hasOwnProperty(xt)||it===dt||it==null&&dt==null||Un(m,g,xt,it,j,dt)}function oM(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ute(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),j=0;j<y.length;j++){var L=y[j],O=L.transferSize,Y=L.initiatorType,we=L.duration;if(O&&we&&oM(Y)){for(Y=0,we=L.responseEnd,j+=1;j<y.length;j++){var ze=y[j],st=ze.startTime;if(st>we)break;var ut=ze.transferSize,xt=ze.initiatorType;ut&&oM(xt)&&(ze=ze.responseEnd,Y+=ut*(ze<we?1:(we-st)/(ze-st)))}if(--j,g+=8*(O+Y)/(L.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var XC=null,ZC=null;function ly(m){return m.nodeType===9?m:m.ownerDocument}function lM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function JC(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var eS=null;function Fte(){var m=window.event;return m&&m.type==="popstate"?m===eS?!1:(eS=m,!0):(eS=null,!1)}var dM=typeof setTimeout=="function"?setTimeout:void 0,Bte=typeof clearTimeout=="function"?clearTimeout:void 0,uM=typeof Promise=="function"?Promise:void 0,Hte=typeof queueMicrotask=="function"?queueMicrotask:typeof uM<"u"?function(m){return uM.resolve(null).then(m).catch(qte)}:dM;function qte(m){setTimeout(function(){throw m})}function Ac(m){return m==="head"}function mM(m,g){var y=g,j=0;do{var L=y.nextSibling;if(m.removeChild(y),L&&L.nodeType===8)if(y=L.data,y==="/$"||y==="/&"){if(j===0){m.removeChild(L),Mm(g);return}j--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")j++;else if(y==="html")Qh(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,Qh(y);for(var O=y.firstChild;O;){var Y=O.nextSibling,we=O.nodeName;O[F]||we==="SCRIPT"||we==="STYLE"||we==="LINK"&&O.rel.toLowerCase()==="stylesheet"||y.removeChild(O),O=Y}}else y==="body"&&Qh(m.ownerDocument.body);y=L}while(y);Mm(g)}function fM(m,g){var y=m;m=0;do{var j=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),j&&j.nodeType===8)if(y=j.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=j}while(y)}function tS(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":tS(y),$(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function Gte(m,g,y,j){for(;m.nodeType===1;){var L=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!j&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(j){if(!m[F])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(O=m.getAttribute("rel"),O==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(O!==L.rel||m.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||m.getAttribute("title")!==(L.title==null?null:L.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(O=m.getAttribute("src"),(O!==(L.src==null?null:L.src)||m.getAttribute("type")!==(L.type==null?null:L.type)||m.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&O&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var O=L.name==null?null:""+L.name;if(L.type==="hidden"&&m.getAttribute("name")===O)return m}else return m;if(m=Jr(m.nextSibling),m===null)break}return null}function Wte(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=Jr(m.nextSibling),m===null))return null;return m}function hM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=Jr(m.nextSibling),m===null))return null;return m}function nS(m){return m.data==="$?"||m.data==="$~"}function aS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function Vte(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var j=function(){g(),y.removeEventListener("DOMContentLoaded",j)};y.addEventListener("DOMContentLoaded",j),m._reactRetry=j}}function Jr(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var sS=null;function gM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return Jr(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function pM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function xM(m,g,y){switch(g=ly(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function Qh(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);$(m)}var ei=new Map,yM=new Set;function cy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var dl=X.d;X.d={f:Qte,r:Yte,D:Kte,C:Xte,L:Zte,m:Jte,X:tne,S:ene,M:nne};function Qte(){var m=dl.f(),g=ey();return m||g}function Yte(m){var g=Le(m);g!==null&&g.tag===5&&g.type==="form"?MO(g):dl.r(m)}var Pm=typeof document>"u"?null:document;function bM(m,g,y){var j=Pm;if(j&&typeof g=="string"&&g){var L=Wr(g);L='link[rel="'+m+'"][href="'+L+'"]',typeof y=="string"&&(L+='[crossorigin="'+y+'"]'),yM.has(L)||(yM.add(L),m={rel:m,crossOrigin:y,href:g},j.querySelector(L)===null&&(g=j.createElement("link"),Ns(g,"link",m),Ye(g),j.head.appendChild(g)))}}function Kte(m){dl.D(m),bM("dns-prefetch",m,null)}function Xte(m,g){dl.C(m,g),bM("preconnect",m,g)}function Zte(m,g,y){dl.L(m,g,y);var j=Pm;if(j&&m&&g){var L='link[rel="preload"][as="'+Wr(g)+'"]';g==="image"&&y&&y.imageSrcSet?(L+='[imagesrcset="'+Wr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(L+='[imagesizes="'+Wr(y.imageSizes)+'"]')):L+='[href="'+Wr(m)+'"]';var O=L;switch(g){case"style":O=Dm(m);break;case"script":O=Om(m)}ei.has(O)||(m=f({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),ei.set(O,m),j.querySelector(L)!==null||g==="style"&&j.querySelector(Yh(O))||g==="script"&&j.querySelector(Kh(O))||(g=j.createElement("link"),Ns(g,"link",m),Ye(g),j.head.appendChild(g)))}}function Jte(m,g){dl.m(m,g);var y=Pm;if(y&&m){var j=g&&typeof g.as=="string"?g.as:"script",L='link[rel="modulepreload"][as="'+Wr(j)+'"][href="'+Wr(m)+'"]',O=L;switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Om(m)}if(!ei.has(O)&&(m=f({rel:"modulepreload",href:m},g),ei.set(O,m),y.querySelector(L)===null)){switch(j){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(Kh(O)))return}j=y.createElement("link"),Ns(j,"link",m),Ye(j),y.head.appendChild(j)}}}function ene(m,g,y){dl.S(m,g,y);var j=Pm;if(j&&m){var L=Ve(j).hoistableStyles,O=Dm(m);g=g||"default";var Y=L.get(O);if(!Y){var we={loading:0,preload:null};if(Y=j.querySelector(Yh(O)))we.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":g},y),(y=ei.get(O))&&rS(m,y);var ze=Y=j.createElement("link");Ye(ze),Ns(ze,"link",m),ze._p=new Promise(function(st,ut){ze.onload=st,ze.onerror=ut}),ze.addEventListener("load",function(){we.loading|=1}),ze.addEventListener("error",function(){we.loading|=2}),we.loading|=4,dy(Y,g,j)}Y={type:"stylesheet",instance:Y,count:1,state:we},L.set(O,Y)}}}function tne(m,g){dl.X(m,g);var y=Pm;if(y&&m){var j=Ve(y).hoistableScripts,L=Om(m),O=j.get(L);O||(O=y.querySelector(Kh(L)),O||(m=f({src:m,async:!0},g),(g=ei.get(L))&&iS(m,g),O=y.createElement("script"),Ye(O),Ns(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(L,O))}}function nne(m,g){dl.M(m,g);var y=Pm;if(y&&m){var j=Ve(y).hoistableScripts,L=Om(m),O=j.get(L);O||(O=y.querySelector(Kh(L)),O||(m=f({src:m,async:!0,type:"module"},g),(g=ei.get(L))&&iS(m,g),O=y.createElement("script"),Ye(O),Ns(O,"link",m),y.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},j.set(L,O))}}function vM(m,g,y,j){var L=(L=Se.current)?cy(L):null;if(!L)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=Dm(y.href),y=Ve(L).hoistableStyles,j=y.get(g),j||(j={type:"style",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=Dm(y.href);var O=Ve(L).hoistableStyles,Y=O.get(m);if(Y||(L=L.ownerDocument||L,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(m,Y),(O=L.querySelector(Yh(m)))&&!O._p&&(Y.instance=O,Y.state.loading=5),ei.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ei.set(m,y),O||ane(L,m,y,Y.state))),g&&j===null)throw Error(s(528,""));return Y}if(g&&j!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Om(y),y=Ve(L).hoistableScripts,j=y.get(g),j||(j={type:"script",instance:null,count:0,state:null},y.set(g,j)),j):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function Dm(m){return'href="'+Wr(m)+'"'}function Yh(m){return'link[rel="stylesheet"]['+m+"]"}function wM(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function ane(m,g,y,j){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?j.loading=1:(g=m.createElement("link"),j.preload=g,g.addEventListener("load",function(){return j.loading|=1}),g.addEventListener("error",function(){return j.loading|=2}),Ns(g,"link",y),Ye(g),m.head.appendChild(g))}function Om(m){return'[src="'+Wr(m)+'"]'}function Kh(m){return"script[async]"+m}function NM(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var j=m.querySelector('style[data-href~="'+Wr(y.href)+'"]');if(j)return g.instance=j,Ye(j),j;var L=f({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return j=(m.ownerDocument||m).createElement("style"),Ye(j),Ns(j,"style",L),dy(j,y.precedence,m),g.instance=j;case"stylesheet":L=Dm(y.href);var O=m.querySelector(Yh(L));if(O)return g.state.loading|=4,g.instance=O,Ye(O),O;j=wM(y),(L=ei.get(L))&&rS(j,L),O=(m.ownerDocument||m).createElement("link"),Ye(O);var Y=O;return Y._p=new Promise(function(we,ze){Y.onload=we,Y.onerror=ze}),Ns(O,"link",j),g.state.loading|=4,dy(O,y.precedence,m),g.instance=O;case"script":return O=Om(y.src),(L=m.querySelector(Kh(O)))?(g.instance=L,Ye(L),L):(j=y,(L=ei.get(O))&&(j=f({},y),iS(j,L)),m=m.ownerDocument||m,L=m.createElement("script"),Ye(L),Ns(L,"link",j),m.head.appendChild(L),g.instance=L);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(j=g.instance,g.state.loading|=4,dy(j,y.precedence,m));return g.instance}function dy(m,g,y){for(var j=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=j.length?j[j.length-1]:null,O=L,Y=0;Y<j.length;Y++){var we=j[Y];if(we.dataset.precedence===g)O=we;else if(O!==L)break}O?O.parentNode.insertBefore(m,O.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function rS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function iS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var uy=null;function jM(m,g,y){if(uy===null){var j=new Map,L=uy=new Map;L.set(y,j)}else L=uy,j=L.get(y),j||(j=new Map,L.set(y,j));if(j.has(m))return j;for(j.set(m,null),y=y.getElementsByTagName(m),L=0;L<y.length;L++){var O=y[L];if(!(O[F]||O[re]||m==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=O.getAttribute(g)||"";Y=m+Y;var we=j.get(Y);we?we.push(O):j.set(Y,[O])}}return j}function CM(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function sne(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function SM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function rne(m,g,y,j){if(y.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var L=Dm(j.href),O=g.querySelector(Yh(L));if(O){g=O._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=my.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=O,Ye(O);return}O=g.ownerDocument||g,j=wM(j),(L=ei.get(L))&&rS(j,L),O=O.createElement("link"),Ye(O);var Y=O;Y._p=new Promise(function(we,ze){Y.onload=we,Y.onerror=ze}),Ns(O,"link",j),y.instance=O}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=my.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var oS=0;function ine(m,g){return m.stylesheets&&m.count===0&&hy(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var j=setTimeout(function(){if(m.stylesheets&&hy(m,m.stylesheets),m.unsuspend){var O=m.unsuspend;m.unsuspend=null,O()}},6e4+g);0<m.imgBytes&&oS===0&&(oS=62500*Ute());var L=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&hy(m,m.stylesheets),m.unsuspend)){var O=m.unsuspend;m.unsuspend=null,O()}},(m.imgBytes>oS?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(j),clearTimeout(L)}}:null}function my(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hy(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var fy=null;function hy(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,fy=new Map,g.forEach(one,m),fy=null,my.call(m))}function one(m,g){if(!(g.state.loading&4)){var y=fy.get(m);if(y)var j=y.get(null);else{y=new Map,fy.set(m,y);for(var L=m.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<L.length;O++){var Y=L[O];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(y.set(Y.dataset.precedence,Y),j=Y)}j&&y.set(null,j)}L=g.instance,Y=L.getAttribute("data-precedence"),O=y.get(Y)||j,O===j&&y.set(null,L),y.set(Y,L),this.count++,j=my.bind(this),L.addEventListener("load",j),L.addEventListener("error",j),O?O.parentNode.insertBefore(L,O.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(L,m.firstChild)),g.state.loading|=4}}var Xh={$$typeof:S,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function lne(m,g,y,j,L,O,Y,we,ze){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=j,this.onUncaughtError=L,this.onCaughtError=O,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function _M(m,g,y,j,L,O,Y,we,ze,st,ut,xt){return m=new lne(m,g,y,Y,ze,st,ut,xt,we),g=1,O===!0&&(g|=24),O=jr(3,null,null,g),m.current=O,O.stateNode=m,g=U1(),g.refCount++,m.pooledCache=g,g.refCount++,O.memoizedState={element:j,isDehydrated:y,cache:g},q1(O),m}function AM(m){return m?(m=um,m):um}function TM(m,g,y,j,L,O){L=AM(L),j.context===null?j.context=L:j.pendingContext=L,j=pc(g),j.payload={element:y},O=O===void 0?null:O,O!==null&&(j.callback=O),y=xc(m,j,g),y!==null&&(nr(y,m,g),Eh(y,m,g))}function EM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function lS(m,g){EM(m,g),(m=m.alternate)&&EM(m,g)}function kM(m){if(m.tag===13||m.tag===31){var g=Ed(m,67108864);g!==null&&nr(g,m,67108864),lS(m,67108864)}}function LM(m){if(m.tag===13||m.tag===31){var g=Tr();g=Nt(g);var y=Ed(m,g);y!==null&&nr(y,m,g),lS(m,g)}}var gy=!0;function cne(m,g,y,j){var L=V.T;V.T=null;var O=X.p;try{X.p=2,cS(m,g,y,j)}finally{X.p=O,V.T=L}}function dne(m,g,y,j){var L=V.T;V.T=null;var O=X.p;try{X.p=8,cS(m,g,y,j)}finally{X.p=O,V.T=L}}function cS(m,g,y,j){if(gy){var L=dS(j);if(L===null)YC(m,g,j,py,y),DM(m,j);else if(mne(L,m,g,y,j))j.stopPropagation();else if(DM(m,j),g&4&&-1<une.indexOf(m)){for(;L!==null;){var O=Le(L);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var Y=D(O.pendingLanes);if(Y!==0){var we=O;for(we.pendingLanes|=2,we.entangledLanes|=2;Y;){var ze=1<<31-ct(Y);we.entanglements[1]|=ze,Y&=~ze}no(O),(An&6)===0&&(Z0=Z()+500,Gh(0))}}break;case 31:case 13:we=Ed(O,2),we!==null&&nr(we,O,2),ey(),lS(O,2)}if(O=dS(j),O===null&&YC(m,g,j,py,y),O===L)break;L=O}L!==null&&j.stopPropagation()}else YC(m,g,j,null,y)}}function dS(m){return m=m1(m),uS(m)}var py=null;function uS(m){if(py=null,m=me(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=o(g),m!==null)return m;m=null}else if(y===31){if(m=l(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return py=m,null}function PM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case te:return 2;case Ue:return 8;case Ie:case Ge:return 32;case gt:return 268435456;default:return 32}default:return 32}}var mS=!1,Tc=null,Ec=null,kc=null,Zh=new Map,Jh=new Map,Lc=[],une="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DM(m,g){switch(m){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":Ec=null;break;case"mouseover":case"mouseout":kc=null;break;case"pointerover":case"pointerout":Zh.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(g.pointerId)}}function eg(m,g,y,j,L,O){return m===null||m.nativeEvent!==O?(m={blockedOn:g,domEventName:y,eventSystemFlags:j,nativeEvent:O,targetContainers:[L]},g!==null&&(g=Le(g),g!==null&&kM(g)),m):(m.eventSystemFlags|=j,g=m.targetContainers,L!==null&&g.indexOf(L)===-1&&g.push(L),m)}function mne(m,g,y,j,L){switch(g){case"focusin":return Tc=eg(Tc,m,g,y,j,L),!0;case"dragenter":return Ec=eg(Ec,m,g,y,j,L),!0;case"mouseover":return kc=eg(kc,m,g,y,j,L),!0;case"pointerover":var O=L.pointerId;return Zh.set(O,eg(Zh.get(O)||null,m,g,y,j,L)),!0;case"gotpointercapture":return O=L.pointerId,Jh.set(O,eg(Jh.get(O)||null,m,g,y,j,L)),!0}return!1}function OM(m){var g=me(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=o(y),g!==null){m.blockedOn=g,on(m.priority,function(){LM(y)});return}}else if(g===31){if(g=l(y),g!==null){m.blockedOn=g,on(m.priority,function(){LM(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function xy(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=dS(m.nativeEvent);if(y===null){y=m.nativeEvent;var j=new y.constructor(y.type,y);u1=j,y.target.dispatchEvent(j),u1=null}else return g=Le(y),g!==null&&kM(g),m.blockedOn=y,!1;g.shift()}return!0}function MM(m,g,y){xy(m)&&y.delete(g)}function fne(){mS=!1,Tc!==null&&xy(Tc)&&(Tc=null),Ec!==null&&xy(Ec)&&(Ec=null),kc!==null&&xy(kc)&&(kc=null),Zh.forEach(MM),Jh.forEach(MM)}function yy(m,g){m.blockedOn===g&&(m.blockedOn=null,mS||(mS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fne)))}var by=null;function IM(m){by!==m&&(by=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){by===m&&(by=null);for(var g=0;g<m.length;g+=3){var y=m[g],j=m[g+1],L=m[g+2];if(typeof j!="function"){if(uS(j||y)===null)continue;break}var O=Le(y);O!==null&&(m.splice(g,3),g-=3,dC(O,{pending:!0,data:L,method:y.method,action:j},j,L))}}))}function Mm(m){function g(ze){return yy(ze,m)}Tc!==null&&yy(Tc,m),Ec!==null&&yy(Ec,m),kc!==null&&yy(kc,m),Zh.forEach(g),Jh.forEach(g);for(var y=0;y<Lc.length;y++){var j=Lc[y];j.blockedOn===m&&(j.blockedOn=null)}for(;0<Lc.length&&(y=Lc[0],y.blockedOn===null);)OM(y),y.blockedOn===null&&Lc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(j=0;j<y.length;j+=3){var L=y[j],O=y[j+1],Y=L[ot]||null;if(typeof O=="function")Y||IM(y);else if(Y){var we=null;if(O&&O.hasAttribute("formAction")){if(L=O,Y=O[ot]||null)we=Y.formAction;else if(uS(L)!==null)continue}else we=Y.action;typeof we=="function"?y[j+1]=we:(y.splice(j,3),j-=3),IM(y)}}}function $M(){function m(O){O.canIntercept&&O.info==="react-transition"&&O.intercept({handler:function(){return new Promise(function(Y){return L=Y})},focusReset:"manual",scroll:"manual"})}function g(){L!==null&&(L(),L=null),j||setTimeout(y,20)}function y(){if(!j&&!navigation.transition){var O=navigation.currentEntry;O&&O.url!=null&&navigation.navigate(O.url,{state:O.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var j=!1,L=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){j=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),L!==null&&(L(),L=null)}}}function fS(m){this._internalRoot=m}vy.prototype.render=fS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,j=Tr();TM(y,j,m,g,null,null)},vy.prototype.unmount=fS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;TM(m.current,2,null,m,null,null),ey(),g[zt]=null}};function vy(m){this._internalRoot=m}vy.prototype.unstable_scheduleHydration=function(m){if(m){var g=Ht();m={blockedOn:null,target:m,priority:g};for(var y=0;y<Lc.length&&g!==0&&g<Lc[y].priority;y++);Lc.splice(y,0,m),y===0&&OM(m)}};var RM=t.version;if(RM!=="19.2.0")throw Error(s(527,RM,"19.2.0"));X.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=d(g),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var hne={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wy.isDisabled&&wy.supportsFiber)try{nt=wy.inject(hne),Te=wy}catch{}}return ng.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,j="",L=GO,O=WO,Y=VO;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(j=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(O=g.onCaughtError),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),g=_M(m,1,!1,null,null,y,j,null,L,O,Y,$M),m[zt]=g.current,QC(m),new fS(g)},ng.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var j=!1,L="",O=GO,Y=WO,we=VO,ze=null;return y!=null&&(y.unstable_strictMode===!0&&(j=!0),y.identifierPrefix!==void 0&&(L=y.identifierPrefix),y.onUncaughtError!==void 0&&(O=y.onUncaughtError),y.onCaughtError!==void 0&&(Y=y.onCaughtError),y.onRecoverableError!==void 0&&(we=y.onRecoverableError),y.formState!==void 0&&(ze=y.formState)),g=_M(m,1,!0,g,y??null,j,L,ze,O,Y,we,$M),g.context=AM(null),y=g.current,j=Tr(),j=Nt(j),L=pc(j),L.callback=null,xc(y,L,j),y=j,g.current.lanes=y,ge(g,y),no(g),m[zt]=g.current,QC(m),new vy(g)},ng.version="19.2.0",ng}var QM;function Cne(){if(QM)return pS.exports;QM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),pS.exports=jne(),pS.exports}var Sne=Cne();var YM="popstate";function _ne(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return yT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function a(s,r){return typeof r=="string"?r:ip(r)}return Tne(t,a,null,e)}function da(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ane(){return Math.random().toString(36).substring(2,10)}function KM(e,t){return{usr:e.state,key:e.key,idx:t}}function yT(e,t,a=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ff(t):t,state:a,key:t&&t.key||s||Ane()}}function ip({pathname:e="/",search:t="",hash:a=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function Ff(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substring(a),e=e.substring(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Tne(e,t,a,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=u(),C=b==null?null:b-d;d=b,c&&c({action:l,location:N.location,delta:C})}function p(b,C){l="PUSH";let w=yT(N.location,b,C);d=u()+1;let S=KM(w,d),A=N.createHref(w);try{o.pushState(S,"",A)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(A)}i&&c&&c({action:l,location:N.location,delta:1})}function x(b,C){l="REPLACE";let w=yT(N.location,b,C);d=u();let S=KM(w,d),A=N.createHref(w);o.replaceState(S,"",A),i&&c&&c({action:l,location:N.location,delta:0})}function v(b){return Ene(b)}let N={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(YM,f),c=b,()=>{r.removeEventListener(YM,f),c=null}},createHref(b){return t(r,b)},createURL:v,encodeLocation(b){let C=v(b);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:x,go(b){return o.go(b)}};return N}function Ene(e,t=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),da(a,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:ip(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=a+s),new URL(s,a)}function eH(e,t,a="/"){return kne(e,t,a,!1)}function kne(e,t,a,s){let r=typeof t=="string"?Ff(t):t,i=Ol(r.pathname||"/",a);if(i==null)return null;let o=tH(e);Lne(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Bne(i);l=Une(o[c],d,s)}return l}function tH(e,t=[],a=[],s="",r=!1){let i=(o,l,c=r,d)=>{let u={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(s)&&c)return;da(u.relativePath.startsWith(s),`Absolute route path "${u.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(s.length)}let f=kl([s,u.relativePath]),p=a.concat(u);o.children&&o.children.length>0&&(da(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),tH(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:Rne(f,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of nH(o.path))i(o,l,!0,c)}),t}function nH(e){let t=e.split("/");if(t.length===0)return[];let[a,...s]=t,r=a.endsWith("?"),i=a.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=nH(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Lne(e){e.sort((t,a)=>t.score!==a.score?a.score-t.score:zne(t.routesMeta.map(s=>s.childrenIndex),a.routesMeta.map(s=>s.childrenIndex)))}var Pne=/^:[\w-]+$/,Dne=3,One=2,Mne=1,Ine=10,$ne=-2,XM=e=>e==="*";function Rne(e,t){let a=e.split("/"),s=a.length;return a.some(XM)&&(s+=$ne),t&&(s+=One),a.filter(r=>!XM(r)).reduce((r,i)=>r+(Pne.test(i)?Dne:i===""?Mne:Ine),s)}function zne(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function Une(e,t,a=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",f=av({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),p=c.route;if(!f&&d&&a&&!s[s.length-1].route.index&&(f=av({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:kl([i,f.pathname]),pathnameBase:Wne(kl([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=kl([i,f.pathnameBase]))}return o}function av(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=Fne(e.path,e.caseSensitive,e.end),r=t.match(a);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((d,{paramName:u,isOptional:f},p)=>{if(u==="*"){let v=l[p]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[p];return f&&!x?d[u]=void 0:d[u]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Fne(e,t=!1,a=!0){pi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function Bne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ol(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&s!=="/"?null:e.slice(a)||"/"}var Hne=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function qne(e,t="/"){let{pathname:a,search:s="",hash:r=""}=typeof e=="string"?Ff(e):e,i;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?i=ZM(a.substring(1),"/"):i=ZM(a,t)):i=t,{pathname:i,search:Vne(s),hash:Qne(r)}}function ZM(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?a.length>1&&a.pop():r!=="."&&a.push(r)}),a.length>1?a.join("/"):"/"}function vS(e,t,a,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gne(e){return e.filter((t,a)=>a===0||t.route.path&&t.route.path.length>0)}function Bk(e){let t=Gne(e);return t.map((a,s)=>s===t.length-1?a.pathname:a.pathnameBase)}function Hk(e,t,a,s=!1){let r;typeof e=="string"?r=Ff(e):(r={...e},da(!r.pathname||!r.pathname.includes("?"),vS("?","pathname","search",r)),da(!r.pathname||!r.pathname.includes("#"),vS("#","pathname","hash",r)),da(!r.search||!r.search.includes("#"),vS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=a;else{let f=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}l=f>=0?t[f]:"/"}let c=qne(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&a.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var kl=e=>e.join("/").replace(/\/\/+/g,"/"),Wne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Vne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Yne=class{constructor(e,t,a,s=!1){this.status=e,this.statusText=t||"",this.internal=s,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function Kne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Xne(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sH(e,t){let a=e;if(typeof a!="string"||!Hne.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let s=a,r=!1;if(aH)try{let i=new URL(window.location.href),o=a.startsWith("//")?new URL(i.protocol+a):new URL(a),l=Ol(o.pathname,t);o.origin===i.origin&&l!=null?a=l+o.search+o.hash:r=!0}catch{pi(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rH=["POST","PUT","PATCH","DELETE"];new Set(rH);var Zne=["GET",...rH];new Set(Zne);var Bf=h.createContext(null);Bf.displayName="DataRouter";var Lw=h.createContext(null);Lw.displayName="DataRouterState";var Jne=h.createContext(!1),iH=h.createContext({isTransitioning:!1});iH.displayName="ViewTransition";var eae=h.createContext(new Map);eae.displayName="Fetchers";var tae=h.createContext(null);tae.displayName="Await";var Br=h.createContext(null);Br.displayName="Navigation";var Qp=h.createContext(null);Qp.displayName="Location";var ji=h.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var qk=h.createContext(null);qk.displayName="RouteError";var oH="REACT_ROUTER_ERROR",nae="REDIRECT",aae="ROUTE_ERROR_RESPONSE";function sae(e){if(e.startsWith(`${oH}:${nae}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function rae(e){if(e.startsWith(`${oH}:${aae}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Yne(t.status,t.statusText,t.data)}catch{}}function iae(e,{relative:t}={}){da(Hf(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:s}=h.useContext(Br),{hash:r,pathname:i,search:o}=Yp(e,{relative:t}),l=i;return a!=="/"&&(l=i==="/"?a:kl([a,i])),s.createHref({pathname:l,search:o,hash:r})}function Hf(){return h.useContext(Qp)!=null}function Zt(){return da(Hf(),"useLocation() may be used only in the context of a <Router> component."),h.useContext(Qp).location}var lH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cH(e){h.useContext(Br).static||h.useLayoutEffect(e)}function wt(){let{isDataRoute:e}=h.useContext(ji);return e?wae():oae()}function oae(){da(Hf(),"useNavigate() may be used only in the context of a <Router> component.");let e=h.useContext(Bf),{basename:t,navigator:a}=h.useContext(Br),{matches:s}=h.useContext(ji),{pathname:r}=Zt(),i=JSON.stringify(Bk(s)),o=h.useRef(!1);return cH(()=>{o.current=!0}),h.useCallback((c,d={})=>{if(pi(o.current,lH),!o.current)return;if(typeof c=="number"){a.go(c);return}let u=Hk(c,JSON.parse(i),r,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:kl([t,u.pathname])),(d.replace?a.replace:a.push)(u,d.state,d)},[t,a,i,r,e])}var lae=h.createContext(null);function cae(e){let t=h.useContext(ji).outlet;return h.useMemo(()=>t&&h.createElement(lae.Provider,{value:e},t),[t,e])}function Bo(){let{matches:e}=h.useContext(ji),t=e[e.length-1];return t?t.params:{}}function Yp(e,{relative:t}={}){let{matches:a}=h.useContext(ji),{pathname:s}=Zt(),r=JSON.stringify(Bk(a));return h.useMemo(()=>Hk(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function dae(e,t){return dH(e,t)}function dH(e,t,a,s,r){da(Hf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=h.useContext(Br),{matches:o}=h.useContext(ji),l=o[o.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";mH(d,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Zt(),x;if(t){let w=typeof t=="string"?Ff(t):t;da(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let v=x.pathname||"/",N=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=eH(e,{pathname:N});pi(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),pi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=gae(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:kl([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:kl([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,a,s,r);return t&&C?h.createElement(Qp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},C):C}function uae(){let e=vae(),t=Kne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=h.createElement(h.Fragment,null,h.createElement("p",null," Hey developer "),h.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",h.createElement("code",{style:i},"ErrorBoundary")," or"," ",h.createElement("code",{style:i},"errorElement")," prop on your route.")),h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),a?h.createElement("pre",{style:r},a):null,o)}var mae=h.createElement(uae,null),uH=class extends h.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const a=rae(e.digest);a&&(e=a)}let t=e!==void 0?h.createElement(ji.Provider,{value:this.props.routeContext},h.createElement(qk.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?h.createElement(fae,{error:e},t):t}};uH.contextType=Jne;var wS=new WeakMap;function fae({children:e,error:t}){let{basename:a}=h.useContext(Br);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=sae(t.digest);if(s){let r=wS.get(t);if(r)throw r;let i=sH(s.location,a);if(aH&&!wS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw wS.set(t,o),o}return h.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function hae({routeContext:e,match:t,children:a}){let s=h.useContext(Bf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),h.createElement(ji.Provider,{value:e},a)}function gae(e,t=[],a=null,s=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(t.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let i=e,o=a?.errors;if(o!=null){let u=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);da(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let l=!1,c=-1;if(a)for(let u=0;u<i.length;u++){let f=i[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:x}=a,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let d=a&&s?(u,f)=>{s(u,{location:a.location,params:a.matches?.[0]?.params??{},unstable_pattern:Xne(a.matches),errorInfo:f})}:void 0;return i.reduceRight((u,f,p)=>{let x,v=!1,N=null,b=null;a&&(x=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||mae,l&&(c<0&&p===0?(mH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===p&&(v=!0,b=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=N:v?S=b:f.route.Component?S=h.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,h.createElement(hae,{match:f,routeContext:{outlet:u,matches:C,isDataRoute:a!=null},children:S})};return a&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?h.createElement(uH,{location:a.location,revalidation:a.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:d}):w()},null)}function Gk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pae(e){let t=h.useContext(Bf);return da(t,Gk(e)),t}function xae(e){let t=h.useContext(Lw);return da(t,Gk(e)),t}function yae(e){let t=h.useContext(ji);return da(t,Gk(e)),t}function Wk(e){let t=yae(e),a=t.matches[t.matches.length-1];return da(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function bae(){return Wk("useRouteId")}function vae(){let e=h.useContext(qk),t=xae("useRouteError"),a=Wk("useRouteError");return e!==void 0?e:t.errors?.[a]}function wae(){let{router:e}=pae("useNavigate"),t=Wk("useNavigate"),a=h.useRef(!1);return cH(()=>{a.current=!0}),h.useCallback(async(r,i={})=>{pi(a.current,lH),a.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var JM={};function mH(e,t,a){!t&&!JM[e]&&(JM[e]=!0,pi(!1,a))}h.memo(Nae);function Nae({routes:e,future:t,state:a,onError:s}){return dH(e,void 0,a,s,t)}function oi({to:e,replace:t,state:a,relative:s}){da(Hf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=h.useContext(Br);pi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=h.useContext(ji),{pathname:o}=Zt(),l=wt(),c=Hk(e,Bk(i),o,s==="path"),d=JSON.stringify(c);return h.useEffect(()=>{l(JSON.parse(d),{replace:t,state:a,relative:s})},[l,d,s,t,a]),null}function Kp(e){return cae(e.context)}function yt(e){da(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jae({basename:e="/",children:t=null,location:a,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){da(!Hf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=h.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof a=="string"&&(a=Ff(a));let{pathname:d="/",search:u="",hash:f="",state:p=null,key:x="default"}=a,v=h.useMemo(()=>{let N=Ol(d,l);return N==null?null:{location:{pathname:N,search:u,hash:f,state:p,key:x},navigationType:s}},[l,d,u,f,p,x,s]);return pi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${u}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:h.createElement(Br.Provider,{value:c},h.createElement(Qp.Provider,{children:t,value:v}))}function Cae({children:e,location:t}){return dae(bT(e),t)}function bT(e,t=[]){let a=[];return h.Children.forEach(e,(s,r)=>{if(!h.isValidElement(s))return;let i=[...t,r];if(s.type===h.Fragment){a.push.apply(a,bT(s.props.children,i));return}da(s.type===yt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),da(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=bT(s.props.children,i)),a.push(o)}),a}var Mb="get",Ib="application/x-www-form-urlencoded";function Pw(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Sae(e){return Pw(e)&&e.tagName.toLowerCase()==="button"}function _ae(e){return Pw(e)&&e.tagName.toLowerCase()==="form"}function Aae(e){return Pw(e)&&e.tagName.toLowerCase()==="input"}function Tae(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Eae(e,t){return e.button===0&&(!t||t==="_self")&&!Tae(e)}function vT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let s=e[a];return t.concat(Array.isArray(s)?s.map(r=>[a,r]):[[a,s]])},[]))}function kae(e,t){let a=vT(e);return t&&t.forEach((s,r)=>{a.has(r)||t.getAll(r).forEach(i=>{a.append(r,i)})}),a}var Ny=null;function Lae(){if(Ny===null)try{new FormData(document.createElement("form"),0),Ny=!1}catch{Ny=!0}return Ny}var Pae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function NS(e){return e!=null&&!Pae.has(e)?(pi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ib}"`),null):e}function Dae(e,t){let a,s,r,i,o;if(_ae(e)){let l=e.getAttribute("action");s=l?Ol(l,t):null,a=e.getAttribute("method")||Mb,r=NS(e.getAttribute("enctype"))||Ib,i=new FormData(e)}else if(Sae(e)||Aae(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Ol(c,t):null,a=e.getAttribute("formmethod")||l.getAttribute("method")||Mb,r=NS(e.getAttribute("formenctype"))||NS(l.getAttribute("enctype"))||Ib,i=new FormData(l,e),!Lae()){let{name:d,type:u,value:f}=e;if(u==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,f)}}else{if(Pw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=Mb,s=null,r=Ib,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:a.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vk(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oae(e,t,a,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return a?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Ol(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function Mae(e,t){if(e.id in t)return t[e.id];try{let a=await import(e.module);return t[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Iae(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $ae(e,t,a){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await Mae(i,a);return o.links?o.links():[]}return[]}));return Fae(s.flat(1).filter(Iae).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function eI(e,t,a,s,r,i){let o=(c,d)=>a[d]?c.route.id!==a[d].route.id:!0,l=(c,d)=>a[d].pathname!==c.pathname||a[d].route.path?.endsWith("*")&&a[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=s.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function Rae(e,t,{includeHydrateFallback:a}={}){return zae(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),a&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function zae(e){return[...new Set(e)]}function Uae(e){let t={},a=Object.keys(e).sort();for(let s of a)t[s]=e[s];return t}function Fae(e,t){let a=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(Uae(r));return a.has(i)||(a.add(i),s.push({key:i,link:r})),s},[])}function fH(){let e=h.useContext(Bf);return Vk(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Bae(){let e=h.useContext(Lw);return Vk(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Qk=h.createContext(void 0);Qk.displayName="FrameworkContext";function hH(){let e=h.useContext(Qk);return Vk(e,"You must render this element inside a <HydratedRouter> element"),e}function Hae(e,t){let a=h.useContext(Qk),[s,r]=h.useState(!1),[i,o]=h.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=h.useRef(null);h.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=C=>{C.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(N,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),h.useEffect(()=>{if(s){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[s]);let x=()=>{r(!0)},v=()=>{r(!1),o(!1)};return a?e!=="intent"?[i,p,{}]:[i,p,{onFocus:ag(l,x),onBlur:ag(c,v),onMouseEnter:ag(d,x),onMouseLeave:ag(u,v),onTouchStart:ag(f,x)}]:[!1,p,{}]}function ag(e,t){return a=>{e&&e(a),a.defaultPrevented||t(a)}}function qae({page:e,...t}){let{router:a}=fH(),s=h.useMemo(()=>eH(a.routes,e,a.basename),[a.routes,e,a.basename]);return s?h.createElement(Wae,{page:e,matches:s,...t}):null}function Gae(e){let{manifest:t,routeModules:a}=hH(),[s,r]=h.useState([]);return h.useEffect(()=>{let i=!1;return $ae(e,t,a).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,a]),s}function Wae({page:e,matches:t,...a}){let s=Zt(),{future:r,manifest:i,routeModules:o}=hH(),{basename:l}=fH(),{loaderData:c,matches:d}=Bae(),u=h.useMemo(()=>eI(e,t,d,i,s,"data"),[e,t,d,i,s]),f=h.useMemo(()=>eI(e,t,d,i,s,"assets"),[e,t,d,i,s]),p=h.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let N=new Set,b=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!u.some(A=>A.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:N.add(w.route.id))}),N.size===0)return[];let C=Oae(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return b&&N.size>0&&C.searchParams.set("_routes",t.filter(w=>N.has(w.route.id)).map(w=>w.route.id).join(",")),[C.pathname+C.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,u,t,e,o]),x=h.useMemo(()=>Rae(f,i),[f,i]),v=Gae(f);return h.createElement(h.Fragment,null,p.map(N=>h.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),x.map(N=>h.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),v.map(({key:N,link:b})=>h.createElement("link",{key:N,nonce:a.nonce,...b,crossOrigin:b.crossOrigin??a.crossOrigin})))}function Vae(...e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}var Qae=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Qae&&(window.__reactRouterVersion="7.13.0")}catch{}function Yae({basename:e,children:t,unstable_useTransitions:a,window:s}){let r=h.useRef();r.current==null&&(r.current=_ne({window:s,v5Compat:!0}));let i=r.current,[o,l]=h.useState({action:i.action,location:i.location}),c=h.useCallback(d=>{a===!1?l(d):h.startTransition(()=>l(d))},[a]);return h.useLayoutEffect(()=>i.listen(c),[i,c]),h.createElement(jae,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:a})}var gH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pH=h.forwardRef(function({onClick:t,discover:a="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v){let{basename:N,unstable_useTransitions:b}=h.useContext(Br),C=typeof d=="string"&&gH.test(d),w=sH(d,N);d=w.to;let S=iae(d,{relative:r}),[A,k,_]=Hae(s,x),E=Zae(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function T(R){t&&t(R),R.defaultPrevented||E(R)}let M=h.createElement("a",{...x,..._,href:w.absoluteURL||S,onClick:w.isExternal||i?t:T,ref:Vae(v,k),target:c,"data-discover":!C&&a==="render"?"true":void 0});return A&&!C?h.createElement(h.Fragment,null,M,h.createElement(qae,{page:S})):M});pH.displayName="Link";var $t=h.forwardRef(function({"aria-current":t="page",caseSensitive:a=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let f=Yp(o,{relative:d.relative}),p=Zt(),x=h.useContext(Lw),{navigator:v,basename:N}=h.useContext(Br),b=x!=null&&ase(f)&&l===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;a||(w=w.toLowerCase(),S=S?S.toLowerCase():null,C=C.toLowerCase()),S&&N&&(S=Ol(S,N)||S);const A=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let k=w===C||!r&&w.startsWith(C)&&w.charAt(A)==="/",_=S!=null&&(S===C||!r&&S.startsWith(C)&&S.charAt(C.length)==="/"),E={isActive:k,isPending:_,isTransitioning:b},T=k?t:void 0,M;typeof s=="function"?M=s(E):M=[s,k?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(E):i;return h.createElement(pH,{...d,"aria-current":T,className:M,ref:u,style:R,to:o,viewTransition:l},typeof c=="function"?c(E):c)});$t.displayName="NavLink";var Kae=h.forwardRef(({discover:e="render",fetcherKey:t,navigate:a,reloadDocument:s,replace:r,state:i,method:o=Mb,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p,...x},v)=>{let{unstable_useTransitions:N}=h.useContext(Br),b=tse(),C=nse(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&gH.test(l),A=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,E=_?.getAttribute("formmethod")||o,T=()=>b(_||k.currentTarget,{fetcherKey:t,method:E,navigate:a,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:f,unstable_defaultShouldRevalidate:p});N&&a!==!1?h.startTransition(()=>T()):T()};return h.createElement("form",{ref:v,method:w,action:C,onSubmit:s?c:A,...x,"data-discover":!S&&e==="render"?"true":void 0})});Kae.displayName="Form";function Xae(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xH(e){let t=h.useContext(Bf);return da(t,Xae(e)),t}function Zae(e,{target:t,replace:a,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let d=wt(),u=Zt(),f=Yp(e,{relative:i});return h.useCallback(p=>{if(Eae(p,t)){p.preventDefault();let x=a!==void 0?a:ip(u)===ip(f),v=()=>d(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?h.startTransition(()=>v()):v()}},[u,d,f,a,s,t,e,r,i,o,l,c])}function zs(e){pi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=h.useRef(vT(e)),a=h.useRef(!1),s=Zt(),r=h.useMemo(()=>kae(s.search,a.current?null:t.current),[s.search]),i=wt(),o=h.useCallback((l,c)=>{const d=vT(typeof l=="function"?l(new URLSearchParams(r)):l);a.current=!0,i("?"+d,c)},[i,r]);return[r,o]}var Jae=0,ese=()=>`__${String(++Jae)}__`;function tse(){let{router:e}=xH("useSubmit"),{basename:t}=h.useContext(Br),a=bae(),s=e.fetch,r=e.navigate;return h.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:u,body:f}=Dae(i,t);if(o.navigate===!1){let p=o.fetcherKey||ese();await s(p,a,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,a])}function nse(e,{relative:t}={}){let{basename:a}=h.useContext(Br),s=h.useContext(ji);da(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...Yp(e||".",{relative:t})},o=Zt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(i.pathname=i.pathname==="/"?a:kl([a,i.pathname])),ip(i)}function ase(e,{relative:t}={}){let a=h.useContext(iH);da(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=xH("useViewTransitionState"),r=Yp(e,{relative:t});if(!a.isTransitioning)return!1;let i=Ol(a.currentLocation.pathname,s)||a.currentLocation.pathname,o=Ol(a.nextLocation.pathname,s)||a.nextLocation.pathname;return av(r.pathname,o)!=null||av(r.pathname,i)!=null}var Bi=JB();const jy=Ki(Bi);function yH(e){var t,a,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(a=yH(e[t]))&&(s&&(s+=" "),s+=a)}else for(a in e)e[a]&&(s&&(s+=" "),s+=a);return s}function Pt(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=yH(e))&&(s&&(s+=" "),s+=t);return s}function sse(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}sse(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Xp=e=>typeof e=="number"&&!isNaN(e),ju=e=>typeof e=="string",Ml=e=>typeof e=="function",rse=e=>ju(e)||Xp(e),wT=e=>ju(e)||Ml(e)?e:null,ise=(e,t)=>e===!1||Xp(e)&&e>0?e:t,NT=e=>h.isValidElement(e)||ju(e)||Ml(e)||Xp(e);function ose(e,t,a=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${a}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,a)})})}function lse({enter:e,exit:t,appendPosition:a=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:f}){let p=a?`${e}--${o}`:e,x=a?`${t}--${o}`:t,v=h.useRef(0);return h.useLayoutEffect(()=>{let N=d.current,b=p.split(" "),C=w=>{w.target===d.current&&(f(),N.removeEventListener("animationend",C),N.removeEventListener("animationcancel",C),v.current===0&&w.type!=="animationcancel"&&N.classList.remove(...b))};N.classList.add(...b),N.addEventListener("animationend",C),N.addEventListener("animationcancel",C)},[]),h.useEffect(()=>{let N=d.current,b=()=>{N.removeEventListener("animationend",b),s?ose(N,c,r):c()};u||(l?b():(v.current=1,N.className+=` ${x}`,N.addEventListener("animationend",b)))},[u]),bt.createElement(bt.Fragment,null,i)}}function tI(e,t){return{content:bH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function bH(e,t,a=!1){return h.isValidElement(e)&&!ju(e.type)?h.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):Ml(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:a}):e}function cse({closeToast:e,theme:t,ariaLabel:a="close"}){return bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":a},bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function dse({delay:e,isRunning:t,closeToast:a,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:d,theme:u}){let f=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=Pt("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=Ml(i)?i({rtl:c,type:s,defaultClassName:x}):Pt(x,i),N={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{d&&a()}};return bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${s}`}),bt.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:v,style:p,...N}))}var use=1,vH=()=>`${use++}`;function mse(e,t,a){let s=1,r=0,i=[],o=[],l=t,c=new Map,d=new Set,u=w=>(d.add(w),()=>d.delete(w)),f=()=>{o=Array.from(c.values()),d.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:A})=>{let k=w?w!==e:e!==1,_=c.has(S)&&A==null;return k||_},x=(w,S)=>{c.forEach(A=>{var k;(S==null||S===A.props.toastId)&&((k=A.toggle)==null||k.call(A,w))})},v=w=>{var S,A;(A=(S=w.props)==null?void 0:S.onClose)==null||A.call(S,w.removalReason),w.isActive=!1},N=w=>{if(w==null)c.forEach(v);else{let S=c.get(w);S&&v(S)}f()},b=()=>{r-=i.length,i=[]},C=w=>{var S,A;let{toastId:k,updateId:_}=w.props,E=_==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(k,w),f(),a(tI(w,E?"added":"updated")),E&&((A=(S=w.props).onOpen)==null||A.call(S))};return{id:e,props:l,observe:u,toggle:x,removeToast:N,toasts:c,clearQueue:b,buildToast:(w,S)=>{if(p(S))return;let{toastId:A,updateId:k,data:_,staleId:E,delay:T}=S,M=k==null;M&&r++;let R={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([P,I])=>I!=null)),toastId:A,updateId:k,data:_,isIn:!1,className:wT(S.className||l.toastClassName),progressClassName:wT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:ise(S.autoClose,l.autoClose),closeToast(P){c.get(A).removalReason=P,N(A)},deleteToast(){let P=c.get(A);if(P!=null){if(a(tI(P,"removed")),c.delete(A),r--,r<0&&(r=0),i.length>0){C(i.shift());return}f()}}};R.closeButton=l.closeButton,S.closeButton===!1||NT(S.closeButton)?R.closeButton=S.closeButton:S.closeButton===!0&&(R.closeButton=NT(l.closeButton)?l.closeButton:!0);let z={content:w,props:R,staleId:E};l.limit&&l.limit>0&&r>l.limit&&M?i.push(z):Xp(T)?setTimeout(()=>{C(z)},T):C(z)},setProps(w){l=w},setToggle:(w,S)=>{let A=c.get(w);A&&(A.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var Hs=new Map,op=[],jT=new Set,fse=e=>jT.forEach(t=>t(e)),wH=()=>Hs.size>0;function hse(){op.forEach(e=>jH(e.content,e.options)),op=[]}var gse=(e,{containerId:t})=>{var a;return(a=Hs.get(t||1))==null?void 0:a.toasts.get(e)};function NH(e,t){var a;if(t)return!!((a=Hs.get(t))!=null&&a.isToastActive(e));let s=!1;return Hs.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function pse(e){if(!wH()){op=op.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||rse(e))Hs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Hs.get(e.containerId);t?t.removeToast(e.id):Hs.forEach(a=>{a.removeToast(e.id)})}}var xse=(e={})=>{Hs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function jH(e,t){NT(e)&&(wH()||op.push({content:e,options:t}),Hs.forEach(a=>{a.buildToast(e,t)}))}function yse(e){var t;(t=Hs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function CH(e,t){Hs.forEach(a=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===a.id)&&a.toggle(e,t?.id)})}function bse(e){let t=e.containerId||1;return{subscribe(a){let s=mse(t,e,fse);Hs.set(t,s);let r=s.observe(a);return hse(),()=>{r(),Hs.delete(t)}},setProps(a){var s;(s=Hs.get(t))==null||s.setProps(a)},getSnapshot(){var a;return(a=Hs.get(t))==null?void 0:a.getSnapshot()}}}function vse(e){return jT.add(e),()=>{jT.delete(e)}}function wse(e){return e&&(ju(e.toastId)||Xp(e.toastId))?e.toastId:vH()}function Zp(e,t){return jH(e,t),t.toastId}function Dw(e,t){return{...t,type:t&&t.type||e,toastId:wse(t)}}function Ow(e){return(t,a)=>Zp(t,Dw(e,a))}function G(e,t){return Zp(e,Dw("default",t))}G.loading=(e,t)=>Zp(e,Dw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function Nse(e,{pending:t,error:a,success:s},r){let i;t&&(i=ju(t)?G.loading(t,r):G.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,f)=>{if(u==null){G.dismiss(i);return}let p={type:d,...o,...r,data:f},x=ju(u)?{render:u}:u;return i?G.update(i,{...p,...x}):G(x.render,{...p,...x}),f},c=Ml(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",a,d)),c}G.promise=Nse;G.success=Ow("success");G.info=Ow("info");G.error=Ow("error");G.warning=Ow("warning");G.warn=G.warning;G.dark=(e,t)=>Zp(e,Dw("default",{theme:"dark",...t}));function jse(e){pse(e)}G.dismiss=jse;G.clearWaitingQueue=xse;G.isActive=NH;G.update=(e,t={})=>{let a=gse(e,t);if(a){let{props:s,content:r}=a,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:vH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,Zp(o,i)}};G.done=e=>{G.update(e,{progress:1})};G.onChange=vse;G.play=e=>CH(!0,e);G.pause=e=>CH(!1,e);function Cse(e){var t;let{subscribe:a,getSnapshot:s,setProps:r}=h.useRef(bse(e)).current;r(e);let i=(t=h.useSyncExternalStore(a,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:u}=d.props;c.has(u)||c.set(u,[]),c.get(u).push(d)}),Array.from(c,d=>l(d[0],d[1]))}return{getToastToRender:o,isToastActive:NH,count:i?.length}}function Sse(e){let[t,a]=h.useState(!1),[s,r]=h.useState(!1),i=h.useRef(null),o=h.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;yse({id:e.toastId,containerId:e.containerId,fn:a}),h.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||C(),window.addEventListener("focus",b),window.addEventListener("blur",C)}function x(){window.removeEventListener("focus",b),window.removeEventListener("blur",C)}function v(E){if(e.draggable===!0||e.draggable===E.pointerType){w();let T=i.current;o.canCloseOnClick=!0,o.canDrag=!0,T.style.transition="none",e.draggableDirection==="x"?(o.start=E.clientX,o.removalDistance=T.offsetWidth*(e.draggablePercent/100)):(o.start=E.clientY,o.removalDistance=T.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(E){let{top:T,bottom:M,left:R,right:z}=i.current.getBoundingClientRect();E.nativeEvent.type!=="touchend"&&e.pauseOnHover&&E.clientX>=R&&E.clientX<=z&&E.clientY>=T&&E.clientY<=M?C():b()}function b(){a(!0)}function C(){a(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",k)}function A(E){let T=i.current;if(o.canDrag&&T){o.didMove=!0,t&&C(),e.draggableDirection==="x"?o.delta=E.clientX-o.start:o.delta=E.clientY-o.start,o.start!==E.clientX&&(o.canCloseOnClick=!1);let M=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;T.style.transform=`translate3d(${M},0)`,T.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function k(){S();let E=i.current;if(o.canDrag&&o.didMove&&E){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}E.style.transition="transform 0.2s, opacity 0.2s",E.style.removeProperty("transform"),E.style.removeProperty("opacity")}}let _={onPointerDown:v,onPointerUp:N};return l&&c&&(_.onMouseEnter=C,e.stacked||(_.onMouseLeave=b)),f&&(_.onClick=E=>{u&&u(E),o.canCloseOnClick&&d(!0)}),{playToast:b,pauseToast:C,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:_}}var _se=typeof window<"u"?h.useLayoutEffect:h.useEffect,Mw=({theme:e,type:t,isLoading:a,...s})=>bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function Ase(e){return bt.createElement(Mw,{...e},bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Tse(e){return bt.createElement(Mw,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Ese(e){return bt.createElement(Mw,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function kse(e){return bt.createElement(Mw,{...e},bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Lse(){return bt.createElement("div",{className:"Toastify__spinner"})}var CT={info:Tse,warning:Ase,success:Ese,error:kse,spinner:Lse},Pse=e=>e in CT;function Dse({theme:e,type:t,isLoading:a,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(Ml(s)?r=s({...i,isLoading:a}):h.isValidElement(s)?r=h.cloneElement(s,i):a?r=CT.spinner():Pse(t)&&(r=CT[t](i))),r}var Ose=e=>{let{isRunning:t,preventExitTransition:a,toastRef:s,eventHandlers:r,playToast:i}=Sse(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:x,position:v,className:N,style:b,progressClassName:C,updateId:w,role:S,progress:A,rtl:k,toastId:_,deleteToast:E,isIn:T,isLoading:M,closeOnClick:R,theme:z,ariaLabel:P}=e,I=Pt("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":R}),q=Ml(N)?N({rtl:k,position:v,type:u,defaultClassName:I}):Pt(I,N),Q=Dse(e),V=!!A||!c,X={closeToast:p,type:u,theme:z},W=null;return o===!1||(Ml(o)?W=o(X):h.isValidElement(o)?W=h.cloneElement(o,X):W=cse(X)),bt.createElement(x,{isIn:T,done:E,position:v,preventExitTransition:a,nodeRef:s,playToast:i},bt.createElement("div",{id:_,tabIndex:0,onClick:d,"data-in":T,className:q,...r,style:b,ref:s,...T&&{role:S,"aria-label":P}},Q!=null&&bt.createElement("div",{className:Pt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},Q),bH(l,e,!t),W,!e.customProgressBar&&bt.createElement(dse,{...w&&!V?{key:`p-${w}`}:{},rtl:k,theme:z,delay:c,isRunning:t,isIn:T,closeToast:p,hide:f,type:u,className:C,controlledProgress:V,progress:A||0})))},Mse=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Ise=lse(Mse("bounce",!0)),$se={position:"top-right",transition:Ise,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function Rse(e){let t={...$se,...e},a=e.stacked,[s,r]=h.useState(!0),i=h.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=Cse(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:x}=t;function v(b){let C=Pt("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":f});return Ml(d)?d({position:b,rtl:f,defaultClassName:C}):Pt(C,wT(d))}function N(){a&&(r(!0),G.play())}return _se(()=>{var b;if(a){let C=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(b=t.position)==null?void 0:b.includes("top"),A=0,k=0;Array.from(C).reverse().forEach((_,E)=>{let T=_;T.classList.add("Toastify__toast--stacked"),E>0&&(T.dataset.collapsed=`${s}`),T.dataset.pos||(T.dataset.pos=S?"top":"bot");let M=A*(s?.2:1)+(s?0:w*E);T.style.setProperty("--y",`${S?M:M*-1}px`),T.style.setProperty("--g",`${w}`),T.style.setProperty("--s",`${1-(s?k:0)}`),A+=T.offsetHeight,k+=.025})}},[s,c,a]),h.useEffect(()=>{function b(C){var w;let S=i.current;x(C)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),G.pause()),C.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),G.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[x]),bt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{a&&(r(!1),G.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((b,C)=>{let w=C.length?{...u}:{...u,pointerEvents:"none"};return bt.createElement("div",{tabIndex:-1,className:v(b),"data-stacked":a,style:w,key:`c-${b}`},C.map(({content:S,props:A})=>bt.createElement(Ose,{...A,stacked:a,collapseAll:N,isIn:l(A.toastId,A.containerId),key:`t-${A.key}`},S)))}))}function SH(e,t){return function(){return e.apply(t,arguments)}}const{toString:zse}=Object.prototype,{getPrototypeOf:Yk}=Object,{iterator:Iw,toStringTag:_H}=Symbol,$w=(e=>t=>{const a=zse.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Xi=e=>(e=e.toLowerCase(),t=>$w(t)===e),Rw=e=>t=>typeof t===e,{isArray:qf}=Array,vf=Rw("undefined");function Jp(e){return e!==null&&!vf(e)&&e.constructor!==null&&!vf(e.constructor)&&cr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const AH=Xi("ArrayBuffer");function Use(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&AH(e.buffer),t}const Fse=Rw("string"),cr=Rw("function"),TH=Rw("number"),ex=e=>e!==null&&typeof e=="object",Bse=e=>e===!0||e===!1,$b=e=>{if($w(e)!=="object")return!1;const t=Yk(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(_H in e)&&!(Iw in e)},Hse=e=>{if(!ex(e)||Jp(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},qse=Xi("Date"),Gse=Xi("File"),Wse=Xi("Blob"),Vse=Xi("FileList"),Qse=e=>ex(e)&&cr(e.pipe),Yse=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||cr(e.append)&&((t=$w(e))==="formdata"||t==="object"&&cr(e.toString)&&e.toString()==="[object FormData]"))},Kse=Xi("URLSearchParams"),[Xse,Zse,Jse,ere]=["ReadableStream","Request","Response","Headers"].map(Xi),tre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tx(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),qf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Jp(e))return;const i=a?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function EH(e,t){if(Jp(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,r;for(;s-- >0;)if(r=a[s],t===r.toLowerCase())return r;return null}const su=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,kH=e=>!vf(e)&&e!==su;function ST(){const{caseless:e,skipUndefined:t}=kH(this)&&this||{},a={},s=(r,i)=>{const o=e&&EH(a,i)||i;$b(a[o])&&$b(r)?a[o]=ST(a[o],r):$b(r)?a[o]=ST({},r):qf(r)?a[o]=r.slice():(!t||!vf(r))&&(a[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&tx(arguments[r],s);return a}const nre=(e,t,a,{allOwnKeys:s}={})=>(tx(t,(r,i)=>{a&&cr(r)?e[i]=SH(r,a):e[i]=r},{allOwnKeys:s}),e),are=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),sre=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},rre=(e,t,a,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=a!==!1&&Yk(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},ire=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},ore=e=>{if(!e)return null;if(qf(e))return e;let t=e.length;if(!TH(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},lre=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Yk(Uint8Array)),cre=(e,t)=>{const s=(e&&e[Iw]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},dre=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},ure=Xi("HTMLFormElement"),mre=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,r){return s.toUpperCase()+r}),nI=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),fre=Xi("RegExp"),LH=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};tx(a,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},hre=e=>{LH(e,(t,a)=>{if(cr(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(cr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},gre=(e,t)=>{const a={},s=r=>{r.forEach(i=>{a[i]=!0})};return qf(e)?s(e):s(String(e).split(t)),a},pre=()=>{},xre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function yre(e){return!!(e&&cr(e.append)&&e[_H]==="FormData"&&e[Iw])}const bre=e=>{const t=new Array(10),a=(s,r)=>{if(ex(s)){if(t.indexOf(s)>=0)return;if(Jp(s))return s;if(!("toJSON"in s)){t[r]=s;const i=qf(s)?[]:{};return tx(s,(o,l)=>{const c=a(o,r+1);!vf(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return a(e,0)},vre=Xi("AsyncFunction"),wre=e=>e&&(ex(e)||cr(e))&&cr(e.then)&&cr(e.catch),PH=((e,t)=>e?setImmediate:t?((a,s)=>(su.addEventListener("message",({source:r,data:i})=>{r===su&&i===a&&s.length&&s.shift()()},!1),r=>{s.push(r),su.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",cr(su.postMessage)),Nre=typeof queueMicrotask<"u"?queueMicrotask.bind(su):typeof process<"u"&&process.nextTick||PH,jre=e=>e!=null&&cr(e[Iw]),lt={isArray:qf,isArrayBuffer:AH,isBuffer:Jp,isFormData:Yse,isArrayBufferView:Use,isString:Fse,isNumber:TH,isBoolean:Bse,isObject:ex,isPlainObject:$b,isEmptyObject:Hse,isReadableStream:Xse,isRequest:Zse,isResponse:Jse,isHeaders:ere,isUndefined:vf,isDate:qse,isFile:Gse,isBlob:Wse,isRegExp:fre,isFunction:cr,isStream:Qse,isURLSearchParams:Kse,isTypedArray:lre,isFileList:Vse,forEach:tx,merge:ST,extend:nre,trim:tre,stripBOM:are,inherits:sre,toFlatObject:rre,kindOf:$w,kindOfTest:Xi,endsWith:ire,toArray:ore,forEachEntry:cre,matchAll:dre,isHTMLForm:ure,hasOwnProperty:nI,hasOwnProp:nI,reduceDescriptors:LH,freezeMethods:hre,toObjectSet:gre,toCamelCase:mre,noop:pre,toFiniteNumber:xre,findKey:EH,global:su,isContextDefined:kH,isSpecCompliantForm:yre,toJSONObject:bre,isAsyncFn:vre,isThenable:wre,setImmediate:PH,asap:Nre,isIterable:jre};function sn(e,t,a,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}lt.inherits(sn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lt.toJSONObject(this.config),code:this.code,status:this.status}}});const DH=sn.prototype,OH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{OH[e]={value:e}});Object.defineProperties(sn,OH);Object.defineProperty(DH,"isAxiosError",{value:!0});sn.from=(e,t,a,s,r,i)=>{const o=Object.create(DH);lt.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return sn.call(o,l,c,a,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Cre=null;function _T(e){return lt.isPlainObject(e)||lt.isArray(e)}function MH(e){return lt.endsWith(e,"[]")?e.slice(0,-2):e}function aI(e,t,a){return e?e.concat(t).map(function(r,i){return r=MH(r),!a&&i?"["+r+"]":r}).join(a?".":""):t}function Sre(e){return lt.isArray(e)&&!e.some(_T)}const _re=lt.toFlatObject(lt,{},null,function(t){return/^is[A-Z]/.test(t)});function zw(e,t,a){if(!lt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=lt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,b){return!lt.isUndefined(b[N])});const s=a.metaTokens,r=a.visitor||u,i=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&lt.isSpecCompliantForm(t);if(!lt.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(lt.isDate(v))return v.toISOString();if(lt.isBoolean(v))return v.toString();if(!c&&lt.isBlob(v))throw new sn("Blob is not supported. Use a Buffer instead.");return lt.isArrayBuffer(v)||lt.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,N,b){let C=v;if(v&&!b&&typeof v=="object"){if(lt.endsWith(N,"{}"))N=s?N:N.slice(0,-2),v=JSON.stringify(v);else if(lt.isArray(v)&&Sre(v)||(lt.isFileList(v)||lt.endsWith(N,"[]"))&&(C=lt.toArray(v)))return N=MH(N),C.forEach(function(S,A){!(lt.isUndefined(S)||S===null)&&t.append(o===!0?aI([N],A,i):o===null?N:N+"[]",d(S))}),!1}return _T(v)?!0:(t.append(aI(b,N,i),d(v)),!1)}const f=[],p=Object.assign(_re,{defaultVisitor:u,convertValue:d,isVisitable:_T});function x(v,N){if(!lt.isUndefined(v)){if(f.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));f.push(v),lt.forEach(v,function(C,w){(!(lt.isUndefined(C)||C===null)&&r.call(t,C,lt.isString(w)?w.trim():w,N,p))===!0&&x(C,N?N.concat(w):[w])}),f.pop()}}if(!lt.isObject(e))throw new TypeError("data must be an object");return x(e),t}function sI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Kk(e,t){this._pairs=[],e&&zw(e,this,t)}const IH=Kk.prototype;IH.append=function(t,a){this._pairs.push([t,a])};IH.toString=function(t){const a=t?function(s){return t.call(this,s,sI)}:sI;return this._pairs.map(function(r){return a(r[0])+"="+a(r[1])},"").join("&")};function Are(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $H(e,t,a){if(!t)return e;const s=a&&a.encode||Are;lt.isFunction(a)&&(a={serialize:a});const r=a&&a.serialize;let i;if(r?i=r(t,a):i=lt.isURLSearchParams(t)?t.toString():new Kk(t,a).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class rI{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){lt.forEach(this.handlers,function(s){s!==null&&t(s)})}}const RH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tre=typeof URLSearchParams<"u"?URLSearchParams:Kk,Ere=typeof FormData<"u"?FormData:null,kre=typeof Blob<"u"?Blob:null,Lre={isBrowser:!0,classes:{URLSearchParams:Tre,FormData:Ere,Blob:kre},protocols:["http","https","file","blob","url","data"]},Xk=typeof window<"u"&&typeof document<"u",AT=typeof navigator=="object"&&navigator||void 0,Pre=Xk&&(!AT||["ReactNative","NativeScript","NS"].indexOf(AT.product)<0),Dre=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ore=Xk&&window.location.href||"http://localhost",Mre=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xk,hasStandardBrowserEnv:Pre,hasStandardBrowserWebWorkerEnv:Dre,navigator:AT,origin:Ore},Symbol.toStringTag,{value:"Module"})),Ds={...Mre,...Lre};function Ire(e,t){return zw(e,new Ds.classes.URLSearchParams,{visitor:function(a,s,r,i){return Ds.isNode&&lt.isBuffer(a)?(this.append(s,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function $re(e){return lt.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Rre(e){const t={},a=Object.keys(e);let s;const r=a.length;let i;for(s=0;s<r;s++)i=a[s],t[i]=e[i];return t}function zH(e){function t(a,s,r,i){let o=a[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=a.length;return o=!o&&lt.isArray(r)?r.length:o,c?(lt.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!lt.isObject(r[o]))&&(r[o]=[]),t(a,s,r[o],i)&&lt.isArray(r[o])&&(r[o]=Rre(r[o])),!l)}if(lt.isFormData(e)&&lt.isFunction(e.entries)){const a={};return lt.forEachEntry(e,(s,r)=>{t($re(s),r,a,0)}),a}return null}function zre(e,t,a){if(lt.isString(e))try{return(t||JSON.parse)(e),lt.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const nx={transitional:RH,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",r=s.indexOf("application/json")>-1,i=lt.isObject(t);if(i&&lt.isHTMLForm(t)&&(t=new FormData(t)),lt.isFormData(t))return r?JSON.stringify(zH(t)):t;if(lt.isArrayBuffer(t)||lt.isBuffer(t)||lt.isStream(t)||lt.isFile(t)||lt.isBlob(t)||lt.isReadableStream(t))return t;if(lt.isArrayBufferView(t))return t.buffer;if(lt.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ire(t,this.formSerializer).toString();if((l=lt.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zw(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(a.setContentType("application/json",!1),zre(t)):t}],transformResponse:[function(t){const a=this.transitional||nx.transitional,s=a&&a.forcedJSONParsing,r=this.responseType==="json";if(lt.isResponse(t)||lt.isReadableStream(t))return t;if(t&&lt.isString(t)&&(s&&!this.responseType||r)){const o=!(a&&a.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?sn.from(l,sn.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ds.classes.FormData,Blob:Ds.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};lt.forEach(["delete","get","head","post","put","patch"],e=>{nx.headers[e]={}});const Ure=lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fre=e=>{const t={};let a,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),a=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!a||t[a]&&Ure[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},iI=Symbol("internals");function sg(e){return e&&String(e).trim().toLowerCase()}function Rb(e){return e===!1||e==null?e:lt.isArray(e)?e.map(Rb):String(e)}function Bre(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const Hre=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function jS(e,t,a,s,r){if(lt.isFunction(s))return s.call(this,t,a);if(r&&(t=a),!!lt.isString(t)){if(lt.isString(s))return t.indexOf(s)!==-1;if(lt.isRegExp(s))return s.test(t)}}function qre(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Gre(e,t){const a=lt.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let dr=class{constructor(t){t&&this.set(t)}set(t,a,s){const r=this;function i(l,c,d){const u=sg(c);if(!u)throw new Error("header name must be a non-empty string");const f=lt.findKey(r,u);(!f||r[f]===void 0||d===!0||d===void 0&&r[f]!==!1)&&(r[f||c]=Rb(l))}const o=(l,c)=>lt.forEach(l,(d,u)=>i(d,u,c));if(lt.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(lt.isString(t)&&(t=t.trim())&&!Hre(t))o(Fre(t),a);else if(lt.isObject(t)&&lt.isIterable(t)){let l={},c,d;for(const u of t){if(!lt.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?lt.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,a)}else t!=null&&i(a,t,s);return this}get(t,a){if(t=sg(t),t){const s=lt.findKey(this,t);if(s){const r=this[s];if(!a)return r;if(a===!0)return Bre(r);if(lt.isFunction(a))return a.call(this,r,s);if(lt.isRegExp(a))return a.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=sg(t),t){const s=lt.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||jS(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let r=!1;function i(o){if(o=sg(o),o){const l=lt.findKey(s,o);l&&(!a||jS(s,s[l],l,a))&&(delete s[l],r=!0)}}return lt.isArray(t)?t.forEach(i):i(t),r}clear(t){const a=Object.keys(this);let s=a.length,r=!1;for(;s--;){const i=a[s];(!t||jS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const a=this,s={};return lt.forEach(this,(r,i)=>{const o=lt.findKey(s,i);if(o){a[o]=Rb(r),delete a[i];return}const l=t?qre(i):String(i).trim();l!==i&&delete a[i],a[l]=Rb(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return lt.forEach(this,(s,r)=>{s!=null&&s!==!1&&(a[r]=t&&lt.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[iI]=this[iI]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=sg(o);s[l]||(Gre(r,o),s[l]=!0)}return lt.isArray(t)?t.forEach(i):i(t),this}};dr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);lt.reduceDescriptors(dr.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});lt.freezeMethods(dr);function CS(e,t){const a=this||nx,s=t||a,r=dr.from(s.headers);let i=s.data;return lt.forEach(e,function(l){i=l.call(a,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function UH(e){return!!(e&&e.__CANCEL__)}function Gf(e,t,a){sn.call(this,e??"canceled",sn.ERR_CANCELED,t,a),this.name="CanceledError"}lt.inherits(Gf,sn,{__CANCEL__:!0});function FH(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new sn("Request failed with status code "+a.status,[sn.ERR_BAD_REQUEST,sn.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Wre(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Vre(e,t){e=e||10;const a=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),a[r]=c,s[r]=d;let f=i,p=0;for(;f!==r;)p+=a[f++],f=f%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(p*1e3/x):void 0}}function Qre(e,t){let a=0,s=1e3/t,r,i;const o=(d,u=Date.now())=>{a=u,r=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),f=u-a;f>=s?o(d,u):(r=d,i||(i=setTimeout(()=>{i=null,o(r)},s-f)))},()=>r&&o(r)]}const sv=(e,t,a=3)=>{let s=0;const r=Vre(50,250);return Qre(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=r(c),u=o<=l;s=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},a)},oI=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},lI=e=>(...t)=>lt.asap(()=>e(...t)),Yre=Ds.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Ds.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Ds.origin),Ds.navigator&&/(msie|trident)/i.test(Ds.navigator.userAgent)):()=>!0,Kre=Ds.hasStandardBrowserEnv?{write(e,t,a,s,r,i){const o=[e+"="+encodeURIComponent(t)];lt.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),lt.isString(s)&&o.push("path="+s),lt.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Xre(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Zre(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function BH(e,t,a){let s=!Xre(t);return e&&(s||a==!1)?Zre(e,t):t}const cI=e=>e instanceof dr?{...e}:e;function Cu(e,t){t=t||{};const a={};function s(d,u,f,p){return lt.isPlainObject(d)&&lt.isPlainObject(u)?lt.merge.call({caseless:p},d,u):lt.isPlainObject(u)?lt.merge({},u):lt.isArray(u)?u.slice():u}function r(d,u,f,p){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d,f,p)}else return s(d,u,f,p)}function i(d,u){if(!lt.isUndefined(u))return s(void 0,u)}function o(d,u){if(lt.isUndefined(u)){if(!lt.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,f){if(f in t)return s(d,u);if(f in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,f)=>r(cI(d),cI(u),f,!0)};return lt.forEach(Object.keys({...e,...t}),function(u){const f=c[u]||r,p=f(e[u],t[u],u);lt.isUndefined(p)&&f!==l||(a[u]=p)}),a}const HH=e=>{const t=Cu({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=dr.from(o),t.url=$H(BH(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),lt.isFormData(a)){if(Ds.hasStandardBrowserEnv||Ds.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(lt.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,f])=>{d.includes(u.toLowerCase())&&o.set(u,f)})}}if(Ds.hasStandardBrowserEnv&&(s&&lt.isFunction(s)&&(s=s(t)),s||s!==!1&&Yre(t.url))){const c=r&&i&&Kre.read(i);c&&o.set(r,c)}return t},Jre=typeof XMLHttpRequest<"u",eie=Jre&&function(e){return new Promise(function(a,s){const r=HH(e);let i=r.data;const o=dr.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=r,u,f,p,x,v;function N(){x&&x(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function C(){if(!b)return;const S=dr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};FH(function(E){a(E),N()},function(E){s(E),N()},k),b=null}"onloadend"in b?b.onloadend=C:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(C)},b.onabort=function(){b&&(s(new sn("Request aborted",sn.ECONNABORTED,e,b)),b=null)},b.onerror=function(A){const k=A&&A.message?A.message:"Network Error",_=new sn(k,sn.ERR_NETWORK,e,b);_.event=A||null,s(_),b=null},b.ontimeout=function(){let A=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||RH;r.timeoutErrorMessage&&(A=r.timeoutErrorMessage),s(new sn(A,k.clarifyTimeoutError?sn.ETIMEDOUT:sn.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&lt.forEach(o.toJSON(),function(A,k){b.setRequestHeader(k,A)}),lt.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),l&&l!=="json"&&(b.responseType=r.responseType),d&&([p,v]=sv(d,!0),b.addEventListener("progress",p)),c&&b.upload&&([f,x]=sv(c),b.upload.addEventListener("progress",f),b.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(u=S=>{b&&(s(!S||S.type?new Gf(null,e,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const w=Wre(r.url);if(w&&Ds.protocols.indexOf(w)===-1){s(new sn("Unsupported protocol "+w+":",sn.ERR_BAD_REQUEST,e));return}b.send(i||null)})},tie=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,r;const i=function(d){if(!r){r=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof sn?u:new Gf(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new sn(`timeout ${t} of ms exceeded`,sn.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>lt.asap(l),c}},nie=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,r;for(;s<a;)r=s+t,yield e.slice(s,r),s=r},aie=async function*(e,t){for await(const a of sie(e))yield*nie(a,t)},sie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},dI=(e,t,a,s)=>{const r=aie(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await r.next();if(d){l(),c.close();return}let f=u.byteLength;if(a){let p=i+=f;a(p)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},uI=64*1024,{isFunction:Cy}=lt,rie=(({Request:e,Response:t})=>({Request:e,Response:t}))(lt.global),{ReadableStream:mI,TextEncoder:fI}=lt.global,hI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iie=e=>{e=lt.merge.call({skipUndefined:!0},rie,e);const{fetch:t,Request:a,Response:s}=e,r=t?Cy(t):typeof fetch=="function",i=Cy(a),o=Cy(s);if(!r)return!1;const l=r&&Cy(mI),c=r&&(typeof fI=="function"?(v=>N=>v.encode(N))(new fI):async v=>new Uint8Array(await new a(v).arrayBuffer())),d=i&&l&&hI(()=>{let v=!1;const N=new a(Ds.origin,{body:new mI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),u=o&&l&&hI(()=>lt.isReadableStream(new s("").body)),f={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!f[v]&&(f[v]=(N,b)=>{let C=N&&N[v];if(C)return C.call(N);throw new sn(`Response type '${v}' is not supported`,sn.ERR_NOT_SUPPORT,b)})});const p=async v=>{if(v==null)return 0;if(lt.isBlob(v))return v.size;if(lt.isSpecCompliantForm(v))return(await new a(Ds.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(lt.isArrayBufferView(v)||lt.isArrayBuffer(v))return v.byteLength;if(lt.isURLSearchParams(v)&&(v=v+""),lt.isString(v))return(await c(v)).byteLength},x=async(v,N)=>{const b=lt.toFiniteNumber(v.getContentLength());return b??p(N)};return async v=>{let{url:N,method:b,data:C,signal:w,cancelToken:S,timeout:A,onDownloadProgress:k,onUploadProgress:_,responseType:E,headers:T,withCredentials:M="same-origin",fetchOptions:R}=HH(v),z=t||fetch;E=E?(E+"").toLowerCase():"text";let P=tie([w,S&&S.toAbortSignal()],A),I=null;const q=P&&P.unsubscribe&&(()=>{P.unsubscribe()});let Q;try{if(_&&d&&b!=="get"&&b!=="head"&&(Q=await x(T,C))!==0){let K=new a(N,{method:"POST",body:C,duplex:"half"}),U;if(lt.isFormData(C)&&(U=K.headers.get("content-type"))&&T.setContentType(U),K.body){const[ye,pe]=oI(Q,sv(lI(_)));C=dI(K.body,uI,ye,pe)}}lt.isString(M)||(M=M?"include":"omit");const V=i&&"credentials"in a.prototype,X={...R,signal:P,method:b.toUpperCase(),headers:T.normalize().toJSON(),body:C,duplex:"half",credentials:V?M:void 0};I=i&&new a(N,X);let W=await(i?z(I,R):z(N,X));const ne=u&&(E==="stream"||E==="response");if(u&&(k||ne&&q)){const K={};["status","statusText","headers"].forEach(Ne=>{K[Ne]=W[Ne]});const U=lt.toFiniteNumber(W.headers.get("content-length")),[ye,pe]=k&&oI(U,sv(lI(k),!0))||[];W=new s(dI(W.body,uI,ye,()=>{pe&&pe(),q&&q()}),K)}E=E||"text";let oe=await f[lt.findKey(f,E)||"text"](W,v);return!ne&&q&&q(),await new Promise((K,U)=>{FH(K,U,{data:oe,headers:dr.from(W.headers),status:W.status,statusText:W.statusText,config:v,request:I})})}catch(V){throw q&&q(),V&&V.name==="TypeError"&&/Load failed|fetch/i.test(V.message)?Object.assign(new sn("Network Error",sn.ERR_NETWORK,v,I),{cause:V.cause||V}):sn.from(V,V&&V.code,v,I)}}},oie=new Map,qH=e=>{let t=e?e.env:{};const{fetch:a,Request:s,Response:r}=t,i=[s,r,a];let o=i.length,l=o,c,d,u=oie;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:iie(t)),u=d;return d};qH();const TT={http:Cre,xhr:eie,fetch:{get:qH}};lt.forEach(TT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const gI=e=>`- ${e}`,lie=e=>lt.isFunction(e)||e===null||e===!1,GH={getAdapter:(e,t)=>{e=lt.isArray(e)?e:[e];const{length:a}=e;let s,r;const i={};for(let o=0;o<a;o++){s=e[o];let l;if(r=s,!lie(s)&&(r=TT[(l=String(s)).toLowerCase()],r===void 0))throw new sn(`Unknown adapter '${l}'`);if(r&&(lt.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(gI).join(`
`):" "+gI(o[0]):"as no adapter specified";throw new sn("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:TT};function SS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Gf(null,e)}function pI(e){return SS(e),e.headers=dr.from(e.headers),e.data=CS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),GH.getAdapter(e.adapter||nx.adapter,e)(e).then(function(s){return SS(e),s.data=CS.call(e,e.transformResponse,s),s.headers=dr.from(s.headers),s},function(s){return UH(s)||(SS(e),s&&s.response&&(s.response.data=CS.call(e,e.transformResponse,s.response),s.response.headers=dr.from(s.response.headers))),Promise.reject(s)})}const WH="1.12.2",Uw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Uw[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const xI={};Uw.transitional=function(t,a,s){function r(i,o){return"[Axios v"+WH+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new sn(r(o," has been removed"+(a?" in "+a:"")),sn.ERR_DEPRECATED);return a&&!xI[o]&&(xI[o]=!0,console.warn(r(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,o,l):!0}};Uw.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function cie(e,t,a){if(typeof e!="object")throw new sn("options must be an object",sn.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new sn("option "+i+" must be "+c,sn.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new sn("Unknown option "+i,sn.ERR_BAD_OPTION)}}const zb={assertOptions:cie,validators:Uw},ao=zb.validators;let fu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new rI,response:new rI}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=Cu(this.defaults,a);const{transitional:s,paramsSerializer:r,headers:i}=a;s!==void 0&&zb.assertOptions(s,{silentJSONParsing:ao.transitional(ao.boolean),forcedJSONParsing:ao.transitional(ao.boolean),clarifyTimeoutError:ao.transitional(ao.boolean)},!1),r!=null&&(lt.isFunction(r)?a.paramsSerializer={serialize:r}:zb.assertOptions(r,{encode:ao.function,serialize:ao.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),zb.assertOptions(a,{baseUrl:ao.spelling("baseURL"),withXsrfToken:ao.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=i&&lt.merge(i.common,i[a.method]);i&&lt.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),a.headers=dr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(c=c&&N.synchronous,l.unshift(N.fulfilled,N.rejected))});const d=[];this.interceptors.response.forEach(function(N){d.push(N.fulfilled,N.rejected)});let u,f=0,p;if(!c){const v=[pI.bind(this),void 0];for(v.unshift(...l),v.push(...d),p=v.length,u=Promise.resolve(a);f<p;)u=u.then(v[f++],v[f++]);return u}p=l.length;let x=a;for(;f<p;){const v=l[f++],N=l[f++];try{x=v(x)}catch(b){N.call(this,b);break}}try{u=pI.call(this,x)}catch(v){return Promise.reject(v)}for(f=0,p=d.length;f<p;)u=u.then(d[f++],d[f++]);return u}getUri(t){t=Cu(this.defaults,t);const a=BH(t.baseURL,t.url,t.allowAbsoluteUrls);return $H(a,t.params,t.paramsSerializer)}};lt.forEach(["delete","get","head","options"],function(t){fu.prototype[t]=function(a,s){return this.request(Cu(s||{},{method:t,url:a,data:(s||{}).data}))}});lt.forEach(["post","put","patch"],function(t){function a(s){return function(i,o,l){return this.request(Cu(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}fu.prototype[t]=a(),fu.prototype[t+"Form"]=a(!0)});let die=class VH{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Gf(i,o,l),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new VH(function(r){t=r}),cancel:t}}};function uie(e){return function(a){return e.apply(null,a)}}function mie(e){return lt.isObject(e)&&e.isAxiosError===!0}const ET={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ET).forEach(([e,t])=>{ET[t]=e});function QH(e){const t=new fu(e),a=SH(fu.prototype.request,t);return lt.extend(a,fu.prototype,t,{allOwnKeys:!0}),lt.extend(a,t,null,{allOwnKeys:!0}),a.create=function(r){return QH(Cu(e,r))},a}const Da=QH(nx);Da.Axios=fu;Da.CanceledError=Gf;Da.CancelToken=die;Da.isCancel=UH;Da.VERSION=WH;Da.toFormData=zw;Da.AxiosError=sn;Da.Cancel=Da.CanceledError;Da.all=function(t){return Promise.all(t)};Da.spread=uie;Da.isAxiosError=mie;Da.mergeConfig=Cu;Da.AxiosHeaders=dr;Da.formToJSON=e=>zH(lt.isHTMLForm(e)?new FormData(e):e);Da.getAdapter=GH.getAdapter;Da.HttpStatusCode=ET;Da.default=Da;const{Axios:UWe,AxiosError:FWe,CanceledError:BWe,isCancel:HWe,CancelToken:qWe,VERSION:GWe,all:WWe,Cancel:VWe,isAxiosError:QWe,spread:YWe,toFormData:KWe,AxiosHeaders:XWe,HttpStatusCode:ZWe,formToJSON:JWe,getAdapter:eVe,mergeConfig:tVe}=Da,fie="https://crm.sari-sari.com",ae=Da.create({baseURL:`${fie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});ae.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));ae.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const hie="isLoggedIn",Sy="userRole",Qs=()=>{const[e,t]=h.useState(!!localStorage.getItem(Sy)),[a,s]=h.useState(localStorage.getItem(Sy)||""),r=wt();h.useEffect(()=>{const d=localStorage.getItem(Sy);d?(t(!0),s(d)):o()},[]);const i=d=>{localStorage.setItem(Sy,d.role),localStorage.setItem(hie,!0),t(!0),s(d.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await ae.post("/auth/logout")}catch(d){console.log("Failed to logout from server:",d)}o(),r("/")},userRole:a,setUserRole:s,login:d=>{i(d),d.role==="CEO"||d.role==="Admin"?r("/admin"):d.role==="Manager"?r("/manager/dashboard"):r("/")}}},ul=({children:e,requiredRole:t})=>{const{isLoggedIn:a,userRole:s}=Qs();if(!a)return n.jsx(oi,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?n.jsx(oi,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?n.jsx(oi,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?n.jsx(oi,{to:"/manager/dashboard",replace:!0}):s==="SALES"?n.jsx(oi,{to:"/sales/dashboard",replace:!0}):n.jsx(oi,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?n.jsx(oi,{to:"/",replace:!0}):e};var YH={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yI=bt.createContext&&bt.createContext(YH),gie=["attr","size","title"];function pie(e,t){if(e==null)return{};var a=xie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function xie(e,t){if(e==null)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},rv.apply(this,arguments)}function bI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function iv(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?bI(Object(a),!0).forEach(function(s){yie(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):bI(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function yie(e,t,a){return t=bie(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bie(e){var t=vie(e,"string");return typeof t=="symbol"?t:t+""}function vie(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KH(e){return e&&e.map((t,a)=>bt.createElement(t.tag,iv({key:a},t.attr),KH(t.child)))}function _t(e){return t=>bt.createElement(wie,rv({attr:iv({},e.attr)},t),KH(e.child))}function wie(e){var t=a=>{var{attr:s,size:r,title:i}=e,o=pie(e,gie),l=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),bt.createElement("svg",rv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,s,o,{className:c,style:iv(iv({color:e.color||a.color},a.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&bt.createElement("title",null,i),e.children)};return yI!==void 0?bt.createElement(yI.Consumer,null,a=>t(a)):t(YH)}function Gi(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function qu(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function ui(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function Fw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function kT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function Nie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function Bw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function ax(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function jie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function _S(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function Cie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function sx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Sie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function Hw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function tn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Et(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function XH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function pa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Qt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function Zk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Tt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function _ie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Dt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Aie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function As(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Gs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function ZH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Yl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function ha(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function ma(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Su(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function _u(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function hn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Tie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function _y(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},child:[]}]})(e)}function Eie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function rx(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function vI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function JH(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function Jk(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function So(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function na(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function ix(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function wI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function kie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function Lie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function $s(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Lt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function NI(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function eL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Gt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function LT(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function tL(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function qw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function id(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Kl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function or(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function Wt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function AS(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function ad(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function Pie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Oo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Yn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function Mo(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function nn(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function aa(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Rs(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function Yt(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const e9=()=>{const[e,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{const s=r=>{a.current&&!a.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),h.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),n.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:n.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:" CRM"})]})}),n.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[n.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),n.jsx("a",{href:"#solutions",className:"hover:text-accent transition duration-150",children:"Solutions"}),n.jsx("a",{href:"#insights",className:"hover:text-accent transition duration-150",children:"Insights"}),n.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),n.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[n.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),n.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),n.jsxs("div",{className:"flex sm:hidden items-center relative",ref:a,children:[n.jsx("button",{onClick:()=>t(!e),children:e?n.jsx(Yt,{className:"w-6 h-6 text-white"}):n.jsx(ix,{className:"w-6 h-6 text-white"})}),e&&n.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:n.jsxs("nav",{className:"flex flex-col",children:[n.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),n.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function Die(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function Xl(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Oie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function Gw(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function Mie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Iie(e){return _t({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const $ie=()=>{const e=["/image/Dashboard1.png","/image/lead1.png","/image/dashboard.jpg"],[t,a]=h.useState(0),[s,r]=h.useState(!1),i=h.useRef(null),[o,l]=h.useState(0),[c,d]=h.useState(0);h.useEffect(()=>(s||(i.current=setInterval(()=>{a(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const u=x=>l(x.targetTouches[0].clientX),f=x=>d(x.targetTouches[0].clientX),p=()=>{o-c>75&&a(x=>(x+1)%e.length),c-o>75&&a(x=>(x-1+e.length)%e.length)};return n.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"lg:text-left text-center",children:[n.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",n.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),n.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),n.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),n.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:u,onTouchMove:f,onTouchEnd:p,children:[e.map((x,v)=>n.jsx("img",{src:x,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,v)=>n.jsx("button",{onClick:()=>a(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},Rie=({Icon:e,title:t,description:a})=>n.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[n.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:n.jsx(e,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),n.jsx("p",{className:"text-gray-400",children:a})]}),zie=()=>{const e=[{Icon:Iie,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:Die,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:Mie,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:Oie,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return n.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),n.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,a)=>n.jsx(Rie,{...t},a))})]})})},Uie=()=>n.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[n.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),n.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),n.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),Fie=()=>n.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:n.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-2 md:grid-cols-5 gap-8",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",n.jsx("span",{className:"text-accent",children:"CRM"})]}),n.jsx("p",{className:"text-sm text-white mt-4",children:" 2025 Sari-Sari CRM"})]}),[{title:"Platform",links:["AI Features","Automation","Integrations","APIs"]},{title:"Resources",links:["Case Studies","Webinars","Security","Support"]},{title:"Company",links:["Leadership","Partnerships","Careers","Newsroom"]},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"]}].map((e,t)=>n.jsxs("div",{children:[n.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),n.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((a,s)=>n.jsx("li",{children:n.jsx("a",{href:"#",className:"hover:text-accent",children:a})},s))})]},t))]})}),Bie=()=>(h.useEffect(()=>{document.title="Sari-Sari CRM"},[]),n.jsxs("main",{className:"font-inter",children:[n.jsx(e9,{}),n.jsx($ie,{}),n.jsx(zie,{}),n.jsx(Uie,{}),n.jsx(Fie,{})]}));function Gu(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Kn(e){return _t({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function xd(e){return _t({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class Lg extends Error{}Lg.prototype.name="InvalidTokenError";function Hie(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,a)=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function qie(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Hie(t)}catch{return atob(t)}}function t9(e,t){if(typeof e!="string")throw new Lg("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,s=e.split(".")[a];if(typeof s!="string")throw new Lg(`Invalid token specified: missing part #${a+1}`);let r;try{r=qie(s)}catch(i){throw new Lg(`Invalid token specified: invalid base64 for part #${a+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new Lg(`Invalid token specified: invalid json for part #${a+1} (${i.message})`)}}function Ga(e,t,a=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const d=i[c];d&&(o+=(l===!0?"":" ")+t(d),l=!1,a&&a[d]&&(o+=" "+a[d]))}s[r]=o}return s}function Au(e,...t){const a=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>a.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${a} for the full message.`}function Gn(e){if(typeof e!="string")throw new Error(Au(7));return e.charAt(0).toUpperCase()+e.slice(1)}var TS={exports:{}},Bn={};var jI;function Gie(){if(jI)return Bn;jI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function v(N){if(typeof N=="object"&&N!==null){var b=N.$$typeof;switch(b){case e:switch(N=N.type,N){case a:case r:case s:case c:case d:case p:return N;default:switch(N=N&&N.$$typeof,N){case o:case l:case f:case u:return N;case i:return N;default:return b}}case t:return b}}}return Bn.ContextConsumer=i,Bn.ContextProvider=o,Bn.Element=e,Bn.ForwardRef=l,Bn.Fragment=a,Bn.Lazy=f,Bn.Memo=u,Bn.Portal=t,Bn.Profiler=r,Bn.StrictMode=s,Bn.Suspense=c,Bn.SuspenseList=d,Bn.isContextConsumer=function(N){return v(N)===i},Bn.isContextProvider=function(N){return v(N)===o},Bn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},Bn.isForwardRef=function(N){return v(N)===l},Bn.isFragment=function(N){return v(N)===a},Bn.isLazy=function(N){return v(N)===f},Bn.isMemo=function(N){return v(N)===u},Bn.isPortal=function(N){return v(N)===t},Bn.isProfiler=function(N){return v(N)===r},Bn.isStrictMode=function(N){return v(N)===s},Bn.isSuspense=function(N){return v(N)===c},Bn.isSuspenseList=function(N){return v(N)===d},Bn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===a||N===r||N===s||N===c||N===d||typeof N=="object"&&N!==null&&(N.$$typeof===f||N.$$typeof===u||N.$$typeof===o||N.$$typeof===i||N.$$typeof===l||N.$$typeof===x||N.getModuleId!==void 0)},Bn.typeOf=v,Bn}var CI;function Wie(){return CI||(CI=1,TS.exports=Gie()),TS.exports}var nL=Wie();function wo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function n9(e){if(h.isValidElement(e)||nL.isValidElementType(e)||!wo(e))return e;const t={};return Object.keys(e).forEach(a=>{t[a]=n9(e[a])}),t}function Ir(e,t,a={clone:!0}){const s=a.clone?{...e}:e;return wo(e)&&wo(t)&&Object.keys(t).forEach(r=>{h.isValidElement(t[r])||nL.isValidElementType(t[r])?s[r]=t[r]:wo(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&wo(e[r])?s[r]=Ir(e[r],t[r],a):a.clone?s[r]=wo(t[r])?n9(t[r]):t[r]:s[r]=t[r]}),s}function Wg(e,t){return t?Ir(e,t,{clone:!1}):e}function SI(e,t){if(!e.containerQueries)return t;const a=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return a.length?a.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function Vie(e,t){return t==="@"||t.startsWith("@")&&(e.some(a=>t.startsWith(`@${a}`))||!!t.match(/^@\d/))}function Qie(e,t){const a=t.match(/^@([^/]+)?\/?(.+)?$/);if(!a)return null;const[,s,r]=a,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function Yie(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function a(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(a(s,i),s);return a(r),{...e,containerQueries:r}}const Ww={xs:0,sm:600,md:900,lg:1200,xl:1536},_I={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ww[e]}px)`},Kie={containerQueries:e=>({up:t=>{let a=typeof t=="number"?t:Ww[t]||t;return typeof a=="number"&&(a=`${a}px`),e?`@container ${e} (min-width:${a})`:`@container (min-width:${a})`}})};function Il(e,t,a){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||_I;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=a(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||_I;return Object.keys(t).reduce((o,l)=>{if(Vie(i.keys,l)){const c=Qie(s.containerQueries?s:Kie,l);c&&(o[c]=a(t[l],l))}else if(Object.keys(i.values||Ww).includes(l)){const c=i.up(l);o[c]=a(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return a(t)}function Xie(e={}){return e.keys?.reduce((a,s)=>{const r=e.up(s);return a[r]={},a},{})||{}}function AI(e,t){return e.reduce((a,s)=>{const r=a[s];return(!r||Object.keys(r).length===0)&&delete a[s],a},t)}function Vw(e,t,a=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&a){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function ov(e,t,a,s=a){let r;return typeof e=="function"?r=e(a):Array.isArray(e)?r=e[a]||s:r=Vw(e,a)||s,t&&(r=t(r,s,e)),r}function Oa(e){const{prop:t,cssProperty:a=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,d=Vw(c,s)||{};return Il(o,l,f=>{let p=ov(d,r,f);return f===p&&typeof f=="string"&&(p=ov(d,r,`${t}${f==="default"?"":Gn(f)}`,f)),a===!1?p:{[a]:p}})};return i.propTypes={},i.filterProps=[t],i}function Zie(e){const t={};return a=>(t[a]===void 0&&(t[a]=e(a)),t[a])}const Jie={m:"margin",p:"padding"},eoe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},TI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},toe=Zie(e=>{if(e.length>2)if(TI[e])e=TI[e];else return[e];const[t,a]=e.split(""),s=Jie[t],r=eoe[a]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),aL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],sL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...aL,...sL];function ox(e,t,a,s){const r=Vw(e,t,!0)??a;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function rL(e){return ox(e,"spacing",8)}function lx(e,t){return typeof t=="string"||t==null?t:e(t)}function noe(e,t){return a=>e.reduce((s,r)=>(s[r]=lx(t,a),s),{})}function aoe(e,t,a,s){if(!t.includes(a))return null;const r=toe(a),i=noe(r,s),o=e[a];return Il(e,o,i)}function a9(e,t){const a=rL(e.theme);return Object.keys(e).map(s=>aoe(e,t,s,a)).reduce(Wg,{})}function wa(e){return a9(e,aL)}wa.propTypes={};wa.filterProps=aL;function Na(e){return a9(e,sL)}Na.propTypes={};Na.filterProps=sL;function Qw(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),a=s=>Object.keys(s).reduce((r,i)=>t[i]?Wg(r,t[i](s)):r,{});return a.propTypes={},a.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),a}function di(e){return typeof e!="number"?e:`${e}px solid`}function Ci(e,t){return Oa({prop:e,themeKey:"borders",transform:t})}const soe=Ci("border",di),roe=Ci("borderTop",di),ioe=Ci("borderRight",di),ooe=Ci("borderBottom",di),loe=Ci("borderLeft",di),coe=Ci("borderColor"),doe=Ci("borderTopColor"),uoe=Ci("borderRightColor"),moe=Ci("borderBottomColor"),foe=Ci("borderLeftColor"),hoe=Ci("outline",di),goe=Ci("outlineColor"),Yw=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ox(e.theme,"shape.borderRadius",4),a=s=>({borderRadius:lx(t,s)});return Il(e,e.borderRadius,a)}return null};Yw.propTypes={};Yw.filterProps=["borderRadius"];Qw(soe,roe,ioe,ooe,loe,coe,doe,uoe,moe,foe,Yw,hoe,goe);const Kw=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ox(e.theme,"spacing",8),a=s=>({gap:lx(t,s)});return Il(e,e.gap,a)}return null};Kw.propTypes={};Kw.filterProps=["gap"];const Xw=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ox(e.theme,"spacing",8),a=s=>({columnGap:lx(t,s)});return Il(e,e.columnGap,a)}return null};Xw.propTypes={};Xw.filterProps=["columnGap"];const Zw=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ox(e.theme,"spacing",8),a=s=>({rowGap:lx(t,s)});return Il(e,e.rowGap,a)}return null};Zw.propTypes={};Zw.filterProps=["rowGap"];const poe=Oa({prop:"gridColumn"}),xoe=Oa({prop:"gridRow"}),yoe=Oa({prop:"gridAutoFlow"}),boe=Oa({prop:"gridAutoColumns"}),voe=Oa({prop:"gridAutoRows"}),woe=Oa({prop:"gridTemplateColumns"}),Noe=Oa({prop:"gridTemplateRows"}),joe=Oa({prop:"gridTemplateAreas"}),Coe=Oa({prop:"gridArea"});Qw(Kw,Xw,Zw,poe,xoe,yoe,boe,voe,woe,Noe,joe,Coe);function uf(e,t){return t==="grey"?t:e}const Soe=Oa({prop:"color",themeKey:"palette",transform:uf}),_oe=Oa({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:uf}),Aoe=Oa({prop:"backgroundColor",themeKey:"palette",transform:uf});Qw(Soe,_oe,Aoe);function Dr(e){return e<=1&&e!==0?`${e*100}%`:e}const Toe=Oa({prop:"width",transform:Dr}),iL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=a=>{const s=e.theme?.breakpoints?.values?.[a]||Ww[a];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Dr(a)}};return Il(e,e.maxWidth,t)}return null};iL.filterProps=["maxWidth"];const Eoe=Oa({prop:"minWidth",transform:Dr}),koe=Oa({prop:"height",transform:Dr}),Loe=Oa({prop:"maxHeight",transform:Dr}),Poe=Oa({prop:"minHeight",transform:Dr});Oa({prop:"size",cssProperty:"width",transform:Dr});Oa({prop:"size",cssProperty:"height",transform:Dr});const Doe=Oa({prop:"boxSizing"});Qw(Toe,iL,Eoe,koe,Loe,Poe,Doe);const cx={border:{themeKey:"borders",transform:di},borderTop:{themeKey:"borders",transform:di},borderRight:{themeKey:"borders",transform:di},borderBottom:{themeKey:"borders",transform:di},borderLeft:{themeKey:"borders",transform:di},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:di},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Yw},color:{themeKey:"palette",transform:uf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:uf},backgroundColor:{themeKey:"palette",transform:uf},p:{style:Na},pt:{style:Na},pr:{style:Na},pb:{style:Na},pl:{style:Na},px:{style:Na},py:{style:Na},padding:{style:Na},paddingTop:{style:Na},paddingRight:{style:Na},paddingBottom:{style:Na},paddingLeft:{style:Na},paddingX:{style:Na},paddingY:{style:Na},paddingInline:{style:Na},paddingInlineStart:{style:Na},paddingInlineEnd:{style:Na},paddingBlock:{style:Na},paddingBlockStart:{style:Na},paddingBlockEnd:{style:Na},m:{style:wa},mt:{style:wa},mr:{style:wa},mb:{style:wa},ml:{style:wa},mx:{style:wa},my:{style:wa},margin:{style:wa},marginTop:{style:wa},marginRight:{style:wa},marginBottom:{style:wa},marginLeft:{style:wa},marginX:{style:wa},marginY:{style:wa},marginInline:{style:wa},marginInlineStart:{style:wa},marginInlineEnd:{style:wa},marginBlock:{style:wa},marginBlockStart:{style:wa},marginBlockEnd:{style:wa},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Kw},rowGap:{style:Zw},columnGap:{style:Xw},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Dr},maxWidth:{style:iL},minWidth:{transform:Dr},height:{transform:Dr},maxHeight:{transform:Dr},minHeight:{transform:Dr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Ooe(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),a=new Set(t);return e.every(s=>a.size===Object.keys(s).length)}function Moe(e,t){return typeof e=="function"?e(t):e}function Ioe(){function e(a,s,r,i){const o={[a]:s,theme:r},l=i[a];if(!l)return{[a]:s};const{cssProperty:c=a,themeKey:d,transform:u,style:f}=l;if(s==null)return null;if(d==="typography"&&s==="inherit")return{[a]:s};const p=Vw(r,d)||{};return f?f(o):Il(o,s,v=>{let N=ov(p,u,v);return v===N&&typeof v=="string"&&(N=ov(p,u,`${a}${v==="default"?"":Gn(v)}`,v)),c===!1?N:{[c]:N}})}function t(a){const{sx:s,theme:r={},nested:i}=a||{};if(!s)return null;const o=r.unstable_sxConfig??cx;function l(c){let d=c;if(typeof c=="function")d=c(r);else if(typeof c!="object")return c;if(!d)return null;const u=Xie(r.breakpoints),f=Object.keys(u);let p=u;return Object.keys(d).forEach(x=>{const v=Moe(d[x],r);if(v!=null)if(typeof v=="object")if(o[x])p=Wg(p,e(x,v,r,o));else{const N=Il({theme:r},v,b=>({[x]:b}));Ooe(N,v)?p[x]=t({sx:v,theme:r,nested:!0}):p=Wg(p,N)}else p=Wg(p,e(x,v,r,o))}),!i&&r.modularCssLayers?{"@layer sx":SI(r,AI(f,p))}:SI(r,AI(f,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const wf=Ioe();wf.filterProps=["sx"];const $oe=e=>{const t={systemProps:{},otherProps:{}},a=e?.theme?.unstable_sxConfig??cx;return Object.keys(e).forEach(s=>{a[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function Roe(e){const{sx:t,...a}=e,{systemProps:s,otherProps:r}=$oe(a);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return wo(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function We(){return We=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},We.apply(null,arguments)}function zoe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Uoe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Foe=(function(){function e(a){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Uoe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=zoe(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),Es="-ms-",lv="-moz-",Tn="-webkit-",s9="comm",oL="rule",lL="decl",Boe="@import",r9="@keyframes",Hoe="@layer",qoe=Math.abs,Jw=String.fromCharCode,Goe=Object.assign;function Woe(e,t){return _s(e,0)^45?(((t<<2^_s(e,0))<<2^_s(e,1))<<2^_s(e,2))<<2^_s(e,3):0}function i9(e){return e.trim()}function Voe(e,t){return(e=t.exec(e))?e[0]:e}function En(e,t,a){return e.replace(t,a)}function PT(e,t){return e.indexOf(t)}function _s(e,t){return e.charCodeAt(t)|0}function lp(e,t,a){return e.slice(t,a)}function yo(e){return e.length}function cL(e){return e.length}function Ay(e,t){return t.push(e),e}function Qoe(e,t){return e.map(t).join("")}var eN=1,Nf=1,o9=0,hr=0,Fa=0,Wf="";function tN(e,t,a,s,r,i,o){return{value:e,root:t,parent:a,type:s,props:r,children:i,line:eN,column:Nf,length:o,return:""}}function rg(e,t){return Goe(tN("",null,null,"",null,null,0),e,{length:-e.length},t)}function Yoe(){return Fa}function Koe(){return Fa=hr>0?_s(Wf,--hr):0,Nf--,Fa===10&&(Nf=1,eN--),Fa}function $r(){return Fa=hr<o9?_s(Wf,hr++):0,Nf++,Fa===10&&(Nf=1,eN++),Fa}function To(){return _s(Wf,hr)}function Ub(){return hr}function dx(e,t){return lp(Wf,e,t)}function cp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function l9(e){return eN=Nf=1,o9=yo(Wf=e),hr=0,[]}function c9(e){return Wf="",e}function Fb(e){return i9(dx(hr-1,DT(e===91?e+2:e===40?e+1:e)))}function Xoe(e){for(;(Fa=To())&&Fa<33;)$r();return cp(e)>2||cp(Fa)>3?"":" "}function Zoe(e,t){for(;--t&&$r()&&!(Fa<48||Fa>102||Fa>57&&Fa<65||Fa>70&&Fa<97););return dx(e,Ub()+(t<6&&To()==32&&$r()==32))}function DT(e){for(;$r();)switch(Fa){case e:return hr;case 34:case 39:e!==34&&e!==39&&DT(Fa);break;case 40:e===41&&DT(e);break;case 92:$r();break}return hr}function Joe(e,t){for(;$r()&&e+Fa!==57;)if(e+Fa===84&&To()===47)break;return"/*"+dx(t,hr-1)+"*"+Jw(e===47?e:$r())}function ele(e){for(;!cp(To());)$r();return dx(e,hr)}function tle(e){return c9(Bb("",null,null,null,[""],e=l9(e),0,[0],e))}function Bb(e,t,a,s,r,i,o,l,c){for(var d=0,u=0,f=o,p=0,x=0,v=0,N=1,b=1,C=1,w=0,S="",A=r,k=i,_=s,E=S;b;)switch(v=w,w=$r()){case 40:if(v!=108&&_s(E,f-1)==58){PT(E+=En(Fb(w),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:E+=Fb(w);break;case 9:case 10:case 13:case 32:E+=Xoe(v);break;case 92:E+=Zoe(Ub()-1,7);continue;case 47:switch(To()){case 42:case 47:Ay(nle(Joe($r(),Ub()),t,a),c);break;default:E+="/"}break;case 123*N:l[d++]=yo(E)*C;case 125*N:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+u:C==-1&&(E=En(E,/\f/g,"")),x>0&&yo(E)-f&&Ay(x>32?kI(E+";",s,a,f-1):kI(En(E," ","")+";",s,a,f-2),c);break;case 59:E+=";";default:if(Ay(_=EI(E,t,a,d,u,r,l,S,A=[],k=[],f),i),w===123)if(u===0)Bb(E,t,_,_,A,i,f,l,k);else switch(p===99&&_s(E,3)===110?100:p){case 100:case 108:case 109:case 115:Bb(e,_,_,s&&Ay(EI(e,_,_,0,0,r,l,S,r,A=[],f),k),r,k,f,l,s?A:k);break;default:Bb(E,_,_,_,[""],k,0,l,k)}}d=u=x=0,N=C=1,S=E="",f=o;break;case 58:f=1+yo(E),x=v;default:if(N<1){if(w==123)--N;else if(w==125&&N++==0&&Koe()==125)continue}switch(E+=Jw(w),w*N){case 38:C=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(yo(E)-1)*C,C=1;break;case 64:To()===45&&(E+=Fb($r())),p=To(),u=f=yo(S=E+=ele(Ub())),w++;break;case 45:v===45&&yo(E)==2&&(N=0)}}return i}function EI(e,t,a,s,r,i,o,l,c,d,u){for(var f=r-1,p=r===0?i:[""],x=cL(p),v=0,N=0,b=0;v<s;++v)for(var C=0,w=lp(e,f+1,f=qoe(N=o[v])),S=e;C<x;++C)(S=i9(N>0?p[C]+" "+w:En(w,/&\f/g,p[C])))&&(c[b++]=S);return tN(e,t,a,r===0?oL:l,c,d,u)}function nle(e,t,a){return tN(e,t,a,s9,Jw(Yoe()),lp(e,2,-2),0)}function kI(e,t,a,s){return tN(e,t,a,lL,lp(e,0,s),lp(e,s+1,-1),s)}function mf(e,t){for(var a="",s=cL(e),r=0;r<s;r++)a+=t(e[r],r,e,t)||"";return a}function ale(e,t,a,s){switch(e.type){case Hoe:if(e.children.length)break;case Boe:case lL:return e.return=e.return||e.value;case s9:return"";case r9:return e.return=e.value+"{"+mf(e.children,s)+"}";case oL:e.value=e.props.join(",")}return yo(a=mf(e.children,s))?e.return=e.value+"{"+a+"}":""}function sle(e){var t=cL(e);return function(a,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](a,s,r,i)||"";return o}}function rle(e){return function(t){t.root||(t=t.return)&&e(t)}}function d9(e){var t=Object.create(null);return function(a){return t[a]===void 0&&(t[a]=e(a)),t[a]}}var ile=function(t,a,s){for(var r=0,i=0;r=i,i=To(),r===38&&i===12&&(a[s]=1),!cp(i);)$r();return dx(t,hr)},ole=function(t,a){var s=-1,r=44;do switch(cp(r)){case 0:r===38&&To()===12&&(a[s]=1),t[s]+=ile(hr-1,a,s);break;case 2:t[s]+=Fb(r);break;case 4:if(r===44){t[++s]=To()===58?"&\f":"",a[s]=t[s].length;break}default:t[s]+=Jw(r)}while(r=$r());return t},lle=function(t,a){return c9(ole(l9(t),a))},LI=new WeakMap,cle=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var a=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&a.charCodeAt(0)!==58&&!LI.get(s))&&!r){LI.set(t,!0);for(var i=[],o=lle(a,i),l=s.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},dle=function(t){if(t.type==="decl"){var a=t.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(t.return="",t.value="")}};function u9(e,t){switch(Woe(e,t)){case 5103:return Tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Tn+e+lv+e+Es+e+e;case 6828:case 4268:return Tn+e+Es+e+e;case 6165:return Tn+e+Es+"flex-"+e+e;case 5187:return Tn+e+En(e,/(\w+).+(:[^]+)/,Tn+"box-$1$2"+Es+"flex-$1$2")+e;case 5443:return Tn+e+Es+"flex-item-"+En(e,/flex-|-self/,"")+e;case 4675:return Tn+e+Es+"flex-line-pack"+En(e,/align-content|flex-|-self/,"")+e;case 5548:return Tn+e+Es+En(e,"shrink","negative")+e;case 5292:return Tn+e+Es+En(e,"basis","preferred-size")+e;case 6060:return Tn+"box-"+En(e,"-grow","")+Tn+e+Es+En(e,"grow","positive")+e;case 4554:return Tn+En(e,/([^-])(transform)/g,"$1"+Tn+"$2")+e;case 6187:return En(En(En(e,/(zoom-|grab)/,Tn+"$1"),/(image-set)/,Tn+"$1"),e,"")+e;case 5495:case 3959:return En(e,/(image-set\([^]*)/,Tn+"$1$`$1");case 4968:return En(En(e,/(.+:)(flex-)?(.*)/,Tn+"box-pack:$3"+Es+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Tn+e+e;case 4095:case 3583:case 4068:case 2532:return En(e,/(.+)-inline(.+)/,Tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(yo(e)-1-t>6)switch(_s(e,t+1)){case 109:if(_s(e,t+4)!==45)break;case 102:return En(e,/(.+:)(.+)-([^]+)/,"$1"+Tn+"$2-$3$1"+lv+(_s(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~PT(e,"stretch")?u9(En(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_s(e,t+1)!==115)break;case 6444:switch(_s(e,yo(e)-3-(~PT(e,"!important")&&10))){case 107:return En(e,":",":"+Tn)+e;case 101:return En(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Tn+(_s(e,14)===45?"inline-":"")+"box$3$1"+Tn+"$2$3$1"+Es+"$2box$3")+e}break;case 5936:switch(_s(e,t+11)){case 114:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Tn+e+Es+En(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Tn+e+Es+e+e}return e}var ule=function(t,a,s,r){if(t.length>-1&&!t.return)switch(t.type){case lL:t.return=u9(t.value,t.length);break;case r9:return mf([rg(t,{value:En(t.value,"@","@"+Tn)})],r);case oL:if(t.length)return Qoe(t.props,function(i){switch(Voe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return mf([rg(t,{props:[En(i,/:(read-\w+)/,":"+lv+"$1")]})],r);case"::placeholder":return mf([rg(t,{props:[En(i,/:(plac\w+)/,":"+Tn+"input-$1")]}),rg(t,{props:[En(i,/:(plac\w+)/,":"+lv+"$1")]}),rg(t,{props:[En(i,/:(plac\w+)/,Es+"input-$1")]})],r)}return""})}},mle=[ule],fle=function(t){var a=t.key;if(a==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(N){var b=N.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(N),N.setAttribute("data-s",""))})}var r=t.stylisPlugins||mle,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(N){for(var b=N.getAttribute("data-emotion").split(" "),C=1;C<b.length;C++)i[b[C]]=!0;l.push(N)});var c,d=[cle,dle];{var u,f=[ale,rle(function(N){u.insert(N)})],p=sle(d.concat(r,f)),x=function(b){return mf(tle(b),p)};c=function(b,C,w,S){u=w,x(b?b+"{"+C.styles+"}":C.styles),S&&(v.inserted[C.name]=!0)}}var v={key:a,sheet:new Foe({key:a,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},ES={exports:{}},kn={};var PI;function hle(){if(PI)return kn;PI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,N=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var _=k.$$typeof;switch(_){case t:switch(k=k.type,k){case c:case d:case s:case i:case r:case f:return k;default:switch(k=k&&k.$$typeof,k){case l:case u:case v:case x:case o:return k;default:return _}}case a:return _}}}function A(k){return S(k)===d}return kn.AsyncMode=c,kn.ConcurrentMode=d,kn.ContextConsumer=l,kn.ContextProvider=o,kn.Element=t,kn.ForwardRef=u,kn.Fragment=s,kn.Lazy=v,kn.Memo=x,kn.Portal=a,kn.Profiler=i,kn.StrictMode=r,kn.Suspense=f,kn.isAsyncMode=function(k){return A(k)||S(k)===c},kn.isConcurrentMode=A,kn.isContextConsumer=function(k){return S(k)===l},kn.isContextProvider=function(k){return S(k)===o},kn.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},kn.isForwardRef=function(k){return S(k)===u},kn.isFragment=function(k){return S(k)===s},kn.isLazy=function(k){return S(k)===v},kn.isMemo=function(k){return S(k)===x},kn.isPortal=function(k){return S(k)===a},kn.isProfiler=function(k){return S(k)===i},kn.isStrictMode=function(k){return S(k)===r},kn.isSuspense=function(k){return S(k)===f},kn.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===d||k===i||k===r||k===f||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===u||k.$$typeof===b||k.$$typeof===C||k.$$typeof===w||k.$$typeof===N)},kn.typeOf=S,kn}var DI;function gle(){return DI||(DI=1,ES.exports=hle()),ES.exports}var kS,OI;function ple(){if(OI)return kS;OI=1;var e=gle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(v){return e.isMemo(v)?r:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;function x(v,N,b){if(typeof N!="string"){if(p){var C=f(N);C&&C!==p&&x(v,C,b)}var w=c(N);d&&(w=w.concat(d(N)));for(var S=o(v),A=o(N),k=0;k<w.length;++k){var _=w[k];if(!a[_]&&!(b&&b[_])&&!(A&&A[_])&&!(S&&S[_])){var E=u(N,_);try{l(v,_,E)}catch{}}}}return v}return kS=x,kS}ple();var xle=!0;function m9(e,t,a){var s="";return a.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var dL=function(t,a,s){var r=t.key+"-"+a.name;(s===!1||xle===!1)&&t.registered[r]===void 0&&(t.registered[r]=a.styles)},f9=function(t,a,s){dL(t,a,s);var r=t.key+"-"+a.name;if(t.inserted[a.name]===void 0){var i=a;do t.insert(a===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function yle(e){for(var t=0,a,s=0,r=e.length;r>=4;++s,r-=4)a=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,t=(a&65535)*1540483477+((a>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var ble={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vle=/[A-Z]|^ms/g,wle=/_EMO_([^_]+?)_([^]*?)_EMO_/g,h9=function(t){return t.charCodeAt(1)===45},MI=function(t){return t!=null&&typeof t!="boolean"},LS=d9(function(e){return h9(e)?e:e.replace(vle,"-$&").toLowerCase()}),II=function(t,a){switch(t){case"animation":case"animationName":if(typeof a=="string")return a.replace(wle,function(s,r,i){return bo={name:r,styles:i,next:bo},r})}return ble[t]!==1&&!h9(t)&&typeof a=="number"&&a!==0?a+"px":a};function dp(e,t,a){if(a==null)return"";var s=a;if(s.__emotion_styles!==void 0)return s;switch(typeof a){case"boolean":return"";case"object":{var r=a;if(r.anim===1)return bo={name:r.name,styles:r.styles,next:bo},r.name;var i=a;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)bo={name:o.name,styles:o.styles,next:bo},o=o.next;var l=i.styles+";";return l}return Nle(e,t,a)}case"function":{if(e!==void 0){var c=bo,d=a(e);return bo=c,dp(e,t,d)}break}}var u=a;if(t==null)return u;var f=t[u];return f!==void 0?f:u}function Nle(e,t,a){var s="";if(Array.isArray(a))for(var r=0;r<a.length;r++)s+=dp(e,t,a[r])+";";else for(var i in a){var o=a[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":MI(l)&&(s+=LS(i)+":"+II(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)MI(o[c])&&(s+=LS(i)+":"+II(i,o[c])+";");else{var d=dp(e,t,o);switch(i){case"animation":case"animationName":{s+=LS(i)+":"+d+";";break}default:s+=i+"{"+d+"}"}}}return s}var $I=/label:\s*([^\s;{]+)\s*(;|$)/g,bo;function nN(e,t,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";bo=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=dp(a,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=dp(a,t,e[l]),s){var c=i;r+=c[l]}$I.lastIndex=0;for(var d="",u;(u=$I.exec(r))!==null;)d+="-"+u[1];var f=yle(r)+d;return{name:f,styles:r,next:bo}}var jle=function(t){return t()},Cle=Nu.useInsertionEffect?Nu.useInsertionEffect:!1,g9=Cle||jle,p9=h.createContext(typeof HTMLElement<"u"?fle({key:"css"}):null);p9.Provider;var x9=function(t){return h.forwardRef(function(a,s){var r=h.useContext(p9);return t(a,r,s)})},uL=h.createContext({}),mL={}.hasOwnProperty,OT="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Sle=function(t,a){var s={};for(var r in a)mL.call(a,r)&&(s[r]=a[r]);return s[OT]=t,s},_le=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return dL(a,s,r),g9(function(){return f9(a,s,r)}),null},Ale=x9(function(e,t,a){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[OT],i=[s],o="";typeof e.className=="string"?o=m9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=nN(i,void 0,h.useContext(uL));o+=t.key+"-"+l.name;var c={};for(var d in e)mL.call(e,d)&&d!=="css"&&d!==OT&&(c[d]=e[d]);return c.className=o,a&&(c.ref=a),h.createElement(h.Fragment,null,h.createElement(_le,{cache:t,serialized:l,isStringTag:typeof r=="string"}),h.createElement(r,c))}),Tle=Ale,RI=function(t,a){var s=arguments;if(a==null||!mL.call(a,"css"))return h.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=Tle,i[1]=Sle(t,a);for(var o=2;o<r;o++)i[o]=s[o];return h.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(RI||(RI={}));function fL(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return nN(t)}function ux(){var e=fL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Ele=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,kle=d9(function(e){return Ele.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Lle=kle,Ple=function(t){return t!=="theme"},zI=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Lle:Ple},UI=function(t,a,s){var r;if(a){var i=a.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},Dle=function(t){var a=t.cache,s=t.serialized,r=t.isStringTag;return dL(a,s,r),g9(function(){return f9(a,s,r)}),null},Ole=function e(t,a){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;a!==void 0&&(i=a.label,o=a.target);var l=UI(t,a,s),c=l||zI(r),d=!c("as");return function(){var u=arguments,f=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&f.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{var p=u[0];f.push(p[0]);for(var x=u.length,v=1;v<x;v++)f.push(u[v],p[v])}var N=x9(function(b,C,w){var S=d&&b.as||r,A="",k=[],_=b;if(b.theme==null){_={};for(var E in b)_[E]=b[E];_.theme=h.useContext(uL)}typeof b.className=="string"?A=m9(C.registered,k,b.className):b.className!=null&&(A=b.className+" ");var T=nN(f.concat(k),C.registered,_);A+=C.key+"-"+T.name,o!==void 0&&(A+=" "+o);var M=d&&l===void 0?zI(S):c,R={};for(var z in b)d&&z==="as"||M(z)&&(R[z]=b[z]);return R.className=A,w&&(R.ref=w),h.createElement(h.Fragment,null,h.createElement(Dle,{cache:C,serialized:T,isStringTag:typeof S=="string"}),h.createElement(S,R))});return N.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=r,N.__emotion_styles=f,N.__emotion_forwardProp=l,Object.defineProperty(N,"toString",{value:function(){return"."+o}}),N.withComponent=function(b,C){var w=e(b,We({},a,C,{shouldForwardProp:UI(N,C,!0)}));return w.apply(void 0,f)},N}},Mle=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],MT=Ole.bind(null);Mle.forEach(function(e){MT[e]=MT(e)});function Ile(e,t){return MT(e,t)}function $le(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const FI=[];function hu(e){return FI[0]=e,nN(FI)}const Rle=e=>{const t=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return t.sort((a,s)=>a.val-s.val),t.reduce((a,s)=>({...a,[s.key]:s.val}),{})};function zle(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:s=5,...r}=e,i=Rle(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${a})`}function d(p,x){const v=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${a}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:x)-s/100}${a})`}function u(p){return o.indexOf(p)+1<o.length?d(p,o[o.indexOf(p)+1]):l(p)}function f(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):d(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:d,only:u,not:f,unit:a,...r}}const Ule={borderRadius:4};function y9(e=8,t=rL({spacing:e})){if(e.mui)return e;const a=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return a.mui=!0,a}function Fle(e,t){const a=this;if(a.vars){if(!a.colorSchemes?.[e]||typeof a.getColorSchemeSelector!="function")return{};let s=a.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return a.palette.mode===e?t:{}}function hL(e={},...t){const{breakpoints:a={},palette:s={},spacing:r,shape:i={},...o}=e,l=zle(a),c=y9(r);let d=Ir({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...Ule,...i}},o);return d=Yie(d),d.applyStyles=Fle,d=t.reduce((u,f)=>Ir(u,f),d),d.unstable_sxConfig={...cx,...o?.unstable_sxConfig},d.unstable_sx=function(f){return wf({sx:f,theme:this})},d}function Ble(e){return Object.keys(e).length===0}function b9(e=null){const t=h.useContext(uL);return!t||Ble(t)?e:t}const Hle=hL();function v9(e=Hle){return b9(e)}const BI=e=>e,qle=()=>{let e=BI;return{configure(t){e=t},generate(t){return e(t)},reset(){e=BI}}},Gle=qle(),Wle={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Wa(e,t,a="Mui"){const s=Wle[t];return s?`${a}-${s}`:`${Gle.generate(e)}-${t}`}function _a(e,t,a="Mui"){const s={};return t.forEach(r=>{s[r]=Wa(e,r,a)}),s}function w9(e){const{variants:t,...a}=e,s={variants:t,style:hu(a),isProcessed:!0};return s.style===a||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=hu(r.style))}),s}const Vle=hL();function Hb(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function ru(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function Qle(e){return e?(t,a)=>a[e]:null}function Yle(e,t,a){e.theme=Zle(e.theme)?a:e.theme[t]||e.theme}function qb(e,t,a){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>qb(e,r,a));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=a?ru(s.style,a):s.style;else{const{variants:i,...o}=s;r=a?ru(hu(o),a):o}return N9(e,s.variants,[r],a)}return s?.isProcessed?a?ru(hu(s.style),a):s.style:a?ru(hu(s),a):s}function N9(e,t,a=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},a.push(s?ru(hu(o.style(r)),s):o.style(r))):a.push(s?ru(hu(o.style),s):o.style)}return a}function Kle(e={}){const{themeId:t,defaultTheme:a=Vle,rootShouldForwardProp:s=Hb,slotShouldForwardProp:r=Hb}=e;function i(l){Yle(l,t,a)}return(l,c={})=>{$le(l,_=>_.filter(E=>E!==wf));const{name:d,slot:u,skipVariantsResolver:f,skipSx:p,overridesResolver:x=Qle(ece(u)),...v}=c,N=d&&d.startsWith("Mui")||u?"components":"custom",b=f!==void 0?f:u&&u!=="Root"&&u!=="root"||!1,C=p||!1;let w=Hb;u==="Root"||u==="root"?w=s:u?w=r:Jle(l)&&(w=void 0);const S=Ile(l,{shouldForwardProp:w,label:Xle(),...v}),A=_=>{if(_.__emotion_real===_)return _;if(typeof _=="function")return function(T){return qb(T,_,T.theme.modularCssLayers?N:void 0)};if(wo(_)){const E=w9(_);return function(M){return E.variants?qb(M,E,M.theme.modularCssLayers?N:void 0):M.theme.modularCssLayers?ru(E.style,N):E.style}}return _},k=(..._)=>{const E=[],T=_.map(A),M=[];if(E.push(i),d&&x&&M.push(function(I){const Q=I.theme.components?.[d]?.styleOverrides;if(!Q)return null;const V={};for(const X in Q)V[X]=qb(I,Q[X],I.theme.modularCssLayers?"theme":void 0);return x(I,V)}),d&&!b&&M.push(function(I){const Q=I.theme?.components?.[d]?.variants;return Q?N9(I,Q,[],I.theme.modularCssLayers?"theme":void 0):null}),C||M.push(wf),Array.isArray(T[0])){const P=T.shift(),I=new Array(E.length).fill(""),q=new Array(M.length).fill("");let Q;Q=[...I,...P,...q],Q.raw=[...I,...P.raw,...q],E.unshift(Q)}const R=[...E,...T,...M],z=S(...R);return l.muiName&&(z.muiName=l.muiName),z};return S.withConfig&&(k.withConfig=S.withConfig),k}}function Xle(e,t){return void 0}function Zle(e){for(const t in e)return!1;return!0}function Jle(e){return typeof e=="string"&&e.charCodeAt(0)>96}function ece(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Tu(e,t,a=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=c;s[i][d]=Tu(o[d],l[d],a)}}}else i==="className"&&a&&t.className?s.className=Pt(e?.className,t?.className):i==="style"&&a&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function j9(e){const{theme:t,name:a,props:s}=e;return!t||!t.components||!t.components[a]||!t.components[a].defaultProps?s:Tu(t.components[a].defaultProps,s)}function tce({props:e,name:t,defaultTheme:a,themeId:s}){let r=v9(a);return r=r[s]||r,j9({theme:r,name:t,props:e})}const ss=typeof window<"u"?h.useLayoutEffect:h.useEffect;function nce(e,t,a,s,r){const[i,o]=h.useState(()=>r&&a?a(e).matches:s?s(e).matches:t);return ss(()=>{if(!a)return;const l=a(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,a]),i}const ace={...Nu},C9=ace.useSyncExternalStore;function sce(e,t,a,s,r){const i=h.useCallback(()=>t,[t]),o=h.useMemo(()=>{if(r&&a)return()=>a(e).matches;if(s!==null){const{matches:u}=s(e);return()=>u}return i},[i,e,s,r,a]),[l,c]=h.useMemo(()=>{if(a===null)return[i,()=>()=>{}];const u=a(e);return[()=>u.matches,f=>(u.addEventListener("change",f),()=>{u.removeEventListener("change",f)})]},[i,a,e]);return C9(c,l,o)}function S9(e={}){const{themeId:t}=e;return function(s,r={}){let i=b9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:d=null,noSsr:u=!1}=j9({name:"MuiUseMediaQuery",props:r,theme:i});let f=typeof s=="function"?s(i):s;return f=f.replace(/^@media( ?)/m,""),f.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(C9!==void 0?sce:nce)(f,l,c,d,u)}}S9();function rce(e,t=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,a))}function gL(e,t=0,a=1){return rce(e,t,a)}function ice(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let a=e.match(t);return a&&a[0].length===1&&(a=a.map(s=>s+s)),a?`rgb${a.length===4?"a":""}(${a.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function od(e){if(e.type)return e;if(e.charAt(0)==="#")return od(ice(e));const t=e.indexOf("("),a=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(a))throw new Error(Au(9,e));let s=e.substring(t+1,e.length-1),r;if(a==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Au(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:a,values:s,colorSpace:r}}const oce=e=>{const t=od(e);return t.values.slice(0,3).map((a,s)=>t.type.includes("hsl")&&s!==0?`${a}%`:a).join(" ")},Pg=(e,t)=>{try{return oce(e)}catch{return e}};function aN(e){const{type:t,colorSpace:a}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${a} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function _9(e){e=od(e);const{values:t}=e,a=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(d,u=(d+a/30)%12)=>r-i*Math.max(Math.min(u-3,9-u,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),aN({type:l,values:c})}function IT(e){e=od(e);let t=e.type==="hsl"||e.type==="hsla"?od(_9(e)).values:e.values;return t=t.map(a=>(e.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function lce(e,t){const a=IT(e),s=IT(t);return(Math.max(a,s)+.05)/(Math.min(a,s)+.05)}function A9(e,t){return e=od(e),t=gL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,aN(e)}function Bd(e,t,a){try{return A9(e,t)}catch{return e}}function sN(e,t){if(e=od(e),t=gL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]*=1-t;return aN(e)}function On(e,t,a){try{return sN(e,t)}catch{return e}}function rN(e,t){if(e=od(e),t=gL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let a=0;a<3;a+=1)e.values[a]+=(255-e.values[a])*t;else if(e.type.includes("color"))for(let a=0;a<3;a+=1)e.values[a]+=(1-e.values[a])*t;return aN(e)}function Mn(e,t,a){try{return rN(e,t)}catch{return e}}function cce(e,t=.15){return IT(e)>.5?sN(e,t):rN(e,t)}function Ty(e,t,a){try{return cce(e,t)}catch{return e}}const dce=h.createContext(),mx=()=>h.useContext(dce)??!1,uce=h.createContext(void 0);function mce(e){const{theme:t,name:a,props:s}=e;if(!t||!t.components||!t.components[a])return s;const r=t.components[a];return r.defaultProps?Tu(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Tu(r,s,t.components.mergeClassNameAndStyle):s}function fce({props:e,name:t}){const a=h.useContext(uce);return mce({props:e,name:t,theme:{components:a}})}let HI=0;function hce(e){const[t,a]=h.useState(e),s=e||t;return h.useEffect(()=>{t==null&&(HI+=1,a(`mui-${HI}`))},[t]),s}const gce={...Nu},qI=gce.useId;function iN(e){if(qI!==void 0){const t=qI();return e??t}return hce(e)}const GI={theme:void 0};function pce(e){let t,a;return function(r){let i=t;return(i===void 0||r.theme!==a)&&(GI.theme=r.theme,i=w9(e(GI)),t=i,a=r.theme),i}}function xce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const WI=(e,t,a,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=a:r&&typeof r=="object"&&(r[i]=a):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},yce=(e,t,a)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!a||a&&!a([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},bce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function PS(e,t){const{prefix:a,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return yce(e,(l,c,d)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const u=`--${a?`${a}-`:""}${l.join("-")}`,f=bce(l,c);Object.assign(r,{[u]:f}),WI(i,l,`var(${u})`,d),WI(o,l,`var(${u}, ${f})`,d)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function vce(e,t={}){const{getSelector:a=C,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...d}=e,{vars:u,css:f,varsWithDefaults:p}=PS(d,t);let x=p;const v={},{[c]:N,...b}=o;if(Object.entries(b||{}).forEach(([A,k])=>{const{vars:_,css:E,varsWithDefaults:T}=PS(k,t);x=Ir(x,T),v[A]={css:E,vars:_}}),N){const{css:A,vars:k,varsWithDefaults:_}=PS(N,t);x=Ir(x,_),v[c]={css:A,vars:k}}function C(A,k){let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),A){if(_==="media")return e.defaultColorScheme===A?":root":{[`@media (prefers-color-scheme: ${o[A]?.palette?.mode||A})`]:{":root":k}};if(_)return e.defaultColorScheme===A?`:root, ${_.replace("%s",String(A))}`:_.replace("%s",String(A))}return":root"}return{vars:x,generateThemeVars:()=>{let A={...u};return Object.entries(v).forEach(([,{vars:k}])=>{A=Ir(A,k)}),A},generateStyleSheets:()=>{const A=[],k=e.defaultColorScheme||"light";function _(M,R){Object.keys(R).length&&A.push(typeof M=="string"?{[M]:{...R}}:M)}_(a(void 0,{...f}),f);const{[k]:E,...T}=v;if(E){const{css:M}=E,R=o[k]?.palette?.mode,z=!s&&R?{colorScheme:R,...M}:{...M};_(a(k,{...z}),z)}return Object.entries(T).forEach(([M,{css:R}])=>{const z=o[M]?.palette?.mode,P=!s&&z?{colorScheme:z,...R}:{...R};_(a(M,{...P}),P)}),i&&A.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),A}}}function wce(e){return function(a){return e==="media"?`@media (prefers-color-scheme: ${a})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${a}"] &`:e==="class"?`.${a} &`:e==="data"?`[data-${a}] &`:`${e.replace("%s",a)} &`:"&"}}const up={black:"#000",white:"#fff"},Nce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Im={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},$m={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},ig={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Rm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},zm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Um={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function T9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:up.white,default:up.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const E9=T9();function k9(){return{text:{primary:up.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:up.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const $T=k9();function VI(e,t,a,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(a)?e[t]=e[a]:t==="light"?e.light=rN(e.main,r):t==="dark"&&(e.dark=sN(e.main,i)))}function QI(e,t,a,s,r){const i=r.light||r,o=r.dark||r*1.5;t[a]||(t.hasOwnProperty(s)?t[a]=t[s]:a==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:a==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function jce(e="light"){return e==="dark"?{main:Rm[200],light:Rm[50],dark:Rm[400]}:{main:Rm[700],light:Rm[400],dark:Rm[800]}}function Cce(e="light"){return e==="dark"?{main:Im[200],light:Im[50],dark:Im[400]}:{main:Im[500],light:Im[300],dark:Im[700]}}function Sce(e="light"){return e==="dark"?{main:$m[500],light:$m[300],dark:$m[700]}:{main:$m[700],light:$m[400],dark:$m[800]}}function _ce(e="light"){return e==="dark"?{main:zm[400],light:zm[300],dark:zm[700]}:{main:zm[700],light:zm[500],dark:zm[900]}}function Ace(e="light"){return e==="dark"?{main:Um[400],light:Um[300],dark:Um[700]}:{main:Um[800],light:Um[500],dark:Um[900]}}function Tce(e="light"){return e==="dark"?{main:ig[400],light:ig[300],dark:ig[700]}:{main:"#ed6c02",light:ig[500],dark:ig[900]}}function Ece(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function pL(e){const{mode:t="light",contrastThreshold:a=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||jce(t),l=e.secondary||Cce(t),c=e.error||Sce(t),d=e.info||_ce(t),u=e.success||Ace(t),f=e.warning||Tce(t);function p(b){return r?Ece(b):lce(b,$T.text.primary)>=a?$T.text.primary:E9.text.primary}const x=({color:b,name:C,mainShade:w=500,lightShade:S=300,darkShade:A=700})=>{if(b={...b},!b.main&&b[w]&&(b.main=b[w]),!b.hasOwnProperty("main"))throw new Error(Au(11,C?` (${C})`:"",w));if(typeof b.main!="string")throw new Error(Au(12,C?` (${C})`:"",JSON.stringify(b.main)));return r?(QI(r,b,"light",S,s),QI(r,b,"dark",A,s)):(VI(b,"light",S,s),VI(b,"dark",A,s)),b.contrastText||(b.contrastText=p(b.main)),b};let v;return t==="light"?v=T9():t==="dark"&&(v=k9()),Ir({common:{...up},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:f,name:"warning"}),info:x({color:d,name:"info"}),success:x({color:u,name:"success"}),grey:Nce,contrastThreshold:a,getContrastText:p,augmentColor:x,tonalOffset:s,...v},i)}function kce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function Lce(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Pce(e){return Math.round(e*1e5)/1e5}const YI={textTransform:"uppercase"},KI='"Roboto", "Helvetica", "Arial", sans-serif';function Dce(e,t){const{fontFamily:a=KI,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:d,pxToRem:u,...f}=typeof t=="function"?t(e):t,p=s/14,x=u||(b=>`${b/c*p}rem`),v=(b,C,w,S,A)=>({fontFamily:a,fontWeight:b,fontSize:x(C),lineHeight:w,...a===KI?{letterSpacing:`${Pce(S/C)}em`}:{},...A,...d}),N={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,YI),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,YI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ir({htmlFontSize:c,pxToRem:x,fontFamily:a,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...N},f,{clone:!1})}const Oce=.2,Mce=.14,Ice=.12;function ia(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Oce})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Mce})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Ice})`].join(",")}const $ce=["none",ia(0,2,1,-1,0,1,1,0,0,1,3,0),ia(0,3,1,-2,0,2,2,0,0,1,5,0),ia(0,3,3,-2,0,3,4,0,0,1,8,0),ia(0,2,4,-1,0,4,5,0,0,1,10,0),ia(0,3,5,-1,0,5,8,0,0,1,14,0),ia(0,3,5,-1,0,6,10,0,0,1,18,0),ia(0,4,5,-2,0,7,10,1,0,2,16,1),ia(0,5,5,-3,0,8,10,1,0,3,14,2),ia(0,5,6,-3,0,9,12,1,0,3,16,2),ia(0,6,6,-3,0,10,14,1,0,4,18,3),ia(0,6,7,-4,0,11,15,1,0,4,20,3),ia(0,7,8,-4,0,12,17,2,0,5,22,4),ia(0,7,8,-4,0,13,19,2,0,5,24,4),ia(0,7,9,-4,0,14,21,2,0,5,26,4),ia(0,8,9,-5,0,15,22,2,0,6,28,5),ia(0,8,10,-5,0,16,24,2,0,6,30,5),ia(0,8,11,-5,0,17,26,2,0,6,32,5),ia(0,9,11,-5,0,18,28,2,0,7,34,6),ia(0,9,12,-6,0,19,29,2,0,7,36,6),ia(0,10,13,-6,0,20,31,3,0,8,38,7),ia(0,10,13,-6,0,21,33,3,0,8,40,7),ia(0,10,14,-6,0,22,35,3,0,8,42,7),ia(0,11,14,-7,0,23,36,3,0,9,44,8),ia(0,11,15,-7,0,24,38,3,0,9,46,8)],Rce={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},zce={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function XI(e){return`${Math.round(e)}ms`}function Uce(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Fce(e){const t={...Rce,...e.easing},a={...zce,...e.duration};return{getAutoHeightDuration:Uce,create:(r=["all"],i={})=>{const{duration:o=a.standard,easing:l=t.easeInOut,delay:c=0,...d}=i;return(Array.isArray(r)?r:[r]).map(u=>`${u} ${typeof o=="string"?o:XI(o)} ${l} ${typeof c=="string"?c:XI(c)}`).join(",")},...e,easing:t,duration:a}}const Bce={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Hce(e){return wo(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function L9(e={}){const t={...e};function a(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!Hce(l)||o.startsWith("unstable_")?delete s[o]:wo(l)&&(s[o]={...l},a(s[o]))}}return a(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function ZI(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const qce=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let a=0;for(let s=0;s<t.length;s+=1)a+=+t[s];return a};function Gce(e){Object.assign(e,{alpha(t,a){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof a=="string"?`calc(${a})`:a})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof a=="string"?`calc(${a})`:a})`:A9(t,qce(a))},lighten(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${ZI(a)})`:rN(t,a)},darken(t,a){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${ZI(a)})`:sN(t,a)}})}function RT(e={},...t){const{breakpoints:a,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:d,...u}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Au(20));const f=pL({...i,colorSpace:d}),p=hL(e);let x=Ir(p,{mixins:Lce(p.breakpoints,s),palette:f,shadows:$ce.slice(),typography:Dce(f,l),transitions:Fce(o),zIndex:{...Bce}});return x=Ir(x,u),x=t.reduce((v,N)=>Ir(v,N),x),x.unstable_sxConfig={...cx,...u?.unstable_sxConfig},x.unstable_sx=function(N){return wf({sx:N,theme:this})},x.toRuntimeSource=L9,Gce(x),x}function Wce(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Vce=[...Array(25)].map((e,t)=>{if(t===0)return"none";const a=Wce(t);return`linear-gradient(rgba(255 255 255 / ${a}), rgba(255 255 255 / ${a}))`});function P9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function D9(e){return e==="dark"?Vce:[]}function Qce(e){const{palette:t={mode:"light"},opacity:a,overlays:s,colorSpace:r,...i}=e,o=pL({...t,colorSpace:r});return{palette:o,opacity:{...P9(o.mode),...a},overlays:s||D9(o.mode),...i}}function Yce(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const Kce=e=>[...[...Array(25)].map((t,a)=>`--${e?`${e}-`:""}overlays-${a}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Xce=e=>(t,a)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return Kce(e.cssVarPrefix).forEach(l=>{o[l]=a[l],delete a[l]}),i==="media"?{[s]:a,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:a}:{[s]:{...a,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:a}};if(i)return i.replace("%s",String(t))}return s};function Zce(e,t){t.forEach(a=>{e[a]||(e[a]={})})}function mt(e,t,a){!e[t]&&a&&(e[t]=a)}function Dg(e){return typeof e!="string"||!e.startsWith("hsl")?e:_9(e)}function ml(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Pg(Dg(e[t])))}function Jce(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const so=e=>{try{return e()}catch{}},ede=(e="mui")=>xce(e);function DS(e,t,a,s,r){if(!a)return;a=a===!0?{}:a;const i=r==="dark"?"dark":"light";if(!s){t[r]=Qce({...a,palette:{mode:i,...a?.palette},colorSpace:e});return}const{palette:o,...l}=RT({...s,palette:{mode:i,...a?.palette},colorSpace:e});return t[r]={...a,palette:o,opacity:{...P9(i),...a?.opacity},overlays:a?.overlays||D9(i)},l}function tde(e={},...t){const{colorSchemes:a={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=Yce,colorSchemeSelector:c=a.light&&a.dark?"media":void 0,rootSelector:d=":root",...u}=e,f=Object.keys(a)[0],p=s||(a.light&&f!=="light"?"light":f),x=ede(i),{[p]:v,light:N,dark:b,...C}=a,w={...C};let S=v;if((p==="dark"&&!("dark"in a)||p==="light"&&!("light"in a))&&(S=!0),!S)throw new Error(Au(21,p));let A;o&&(A="oklch");const k=DS(A,w,S,u,p);N&&!w.light&&DS(A,w,N,void 0,"light"),b&&!w.dark&&DS(A,w,b,void 0,"dark");let _={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:d,getCssVar:x,colorSchemes:w,font:{...kce(k.typography),...k.font},spacing:Jce(u.spacing)};Object.keys(_.colorSchemes).forEach(z=>{const P=_.colorSchemes[z].palette,I=Q=>{const V=Q.split("-"),X=V[1],W=V[2];return x(Q,P[X][W])};P.mode==="light"&&(mt(P.common,"background","#fff"),mt(P.common,"onBackground","#000")),P.mode==="dark"&&(mt(P.common,"background","#000"),mt(P.common,"onBackground","#fff"));function q(Q,V,X){if(A){let W;return Q===Bd&&(W=`transparent ${((1-X)*100).toFixed(0)}%`),Q===On&&(W=`#000 ${(X*100).toFixed(0)}%`),Q===Mn&&(W=`#fff ${(X*100).toFixed(0)}%`),`color-mix(in ${A}, ${V}, ${W})`}return Q(V,X)}if(Zce(P,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),P.mode==="light"){mt(P.Alert,"errorColor",q(On,P.error.light,.6)),mt(P.Alert,"infoColor",q(On,P.info.light,.6)),mt(P.Alert,"successColor",q(On,P.success.light,.6)),mt(P.Alert,"warningColor",q(On,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",I("palette-error-main")),mt(P.Alert,"infoFilledBg",I("palette-info-main")),mt(P.Alert,"successFilledBg",I("palette-success-main")),mt(P.Alert,"warningFilledBg",I("palette-warning-main")),mt(P.Alert,"errorFilledColor",so(()=>P.getContrastText(P.error.main))),mt(P.Alert,"infoFilledColor",so(()=>P.getContrastText(P.info.main))),mt(P.Alert,"successFilledColor",so(()=>P.getContrastText(P.success.main))),mt(P.Alert,"warningFilledColor",so(()=>P.getContrastText(P.warning.main))),mt(P.Alert,"errorStandardBg",q(Mn,P.error.light,.9)),mt(P.Alert,"infoStandardBg",q(Mn,P.info.light,.9)),mt(P.Alert,"successStandardBg",q(Mn,P.success.light,.9)),mt(P.Alert,"warningStandardBg",q(Mn,P.warning.light,.9)),mt(P.Alert,"errorIconColor",I("palette-error-main")),mt(P.Alert,"infoIconColor",I("palette-info-main")),mt(P.Alert,"successIconColor",I("palette-success-main")),mt(P.Alert,"warningIconColor",I("palette-warning-main")),mt(P.AppBar,"defaultBg",I("palette-grey-100")),mt(P.Avatar,"defaultBg",I("palette-grey-400")),mt(P.Button,"inheritContainedBg",I("palette-grey-300")),mt(P.Button,"inheritContainedHoverBg",I("palette-grey-A100")),mt(P.Chip,"defaultBorder",I("palette-grey-400")),mt(P.Chip,"defaultAvatarColor",I("palette-grey-700")),mt(P.Chip,"defaultIconColor",I("palette-grey-700")),mt(P.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),mt(P.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),mt(P.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),mt(P.LinearProgress,"primaryBg",q(Mn,P.primary.main,.62)),mt(P.LinearProgress,"secondaryBg",q(Mn,P.secondary.main,.62)),mt(P.LinearProgress,"errorBg",q(Mn,P.error.main,.62)),mt(P.LinearProgress,"infoBg",q(Mn,P.info.main,.62)),mt(P.LinearProgress,"successBg",q(Mn,P.success.main,.62)),mt(P.LinearProgress,"warningBg",q(Mn,P.warning.main,.62)),mt(P.Skeleton,"bg",A?q(Bd,P.text.primary,.11):`rgba(${I("palette-text-primaryChannel")} / 0.11)`),mt(P.Slider,"primaryTrack",q(Mn,P.primary.main,.62)),mt(P.Slider,"secondaryTrack",q(Mn,P.secondary.main,.62)),mt(P.Slider,"errorTrack",q(Mn,P.error.main,.62)),mt(P.Slider,"infoTrack",q(Mn,P.info.main,.62)),mt(P.Slider,"successTrack",q(Mn,P.success.main,.62)),mt(P.Slider,"warningTrack",q(Mn,P.warning.main,.62));const Q=A?q(On,P.background.default,.6825):Ty(P.background.default,.8);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",so(()=>A?$T.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",Ty(P.background.paper,.15)),mt(P.StepConnector,"border",I("palette-grey-400")),mt(P.StepContent,"border",I("palette-grey-400")),mt(P.Switch,"defaultColor",I("palette-common-white")),mt(P.Switch,"defaultDisabledColor",I("palette-grey-100")),mt(P.Switch,"primaryDisabledColor",q(Mn,P.primary.main,.62)),mt(P.Switch,"secondaryDisabledColor",q(Mn,P.secondary.main,.62)),mt(P.Switch,"errorDisabledColor",q(Mn,P.error.main,.62)),mt(P.Switch,"infoDisabledColor",q(Mn,P.info.main,.62)),mt(P.Switch,"successDisabledColor",q(Mn,P.success.main,.62)),mt(P.Switch,"warningDisabledColor",q(Mn,P.warning.main,.62)),mt(P.TableCell,"border",q(Mn,q(Bd,P.divider,1),.88)),mt(P.Tooltip,"bg",q(Bd,P.grey[700],.92))}if(P.mode==="dark"){mt(P.Alert,"errorColor",q(Mn,P.error.light,.6)),mt(P.Alert,"infoColor",q(Mn,P.info.light,.6)),mt(P.Alert,"successColor",q(Mn,P.success.light,.6)),mt(P.Alert,"warningColor",q(Mn,P.warning.light,.6)),mt(P.Alert,"errorFilledBg",I("palette-error-dark")),mt(P.Alert,"infoFilledBg",I("palette-info-dark")),mt(P.Alert,"successFilledBg",I("palette-success-dark")),mt(P.Alert,"warningFilledBg",I("palette-warning-dark")),mt(P.Alert,"errorFilledColor",so(()=>P.getContrastText(P.error.dark))),mt(P.Alert,"infoFilledColor",so(()=>P.getContrastText(P.info.dark))),mt(P.Alert,"successFilledColor",so(()=>P.getContrastText(P.success.dark))),mt(P.Alert,"warningFilledColor",so(()=>P.getContrastText(P.warning.dark))),mt(P.Alert,"errorStandardBg",q(On,P.error.light,.9)),mt(P.Alert,"infoStandardBg",q(On,P.info.light,.9)),mt(P.Alert,"successStandardBg",q(On,P.success.light,.9)),mt(P.Alert,"warningStandardBg",q(On,P.warning.light,.9)),mt(P.Alert,"errorIconColor",I("palette-error-main")),mt(P.Alert,"infoIconColor",I("palette-info-main")),mt(P.Alert,"successIconColor",I("palette-success-main")),mt(P.Alert,"warningIconColor",I("palette-warning-main")),mt(P.AppBar,"defaultBg",I("palette-grey-900")),mt(P.AppBar,"darkBg",I("palette-background-paper")),mt(P.AppBar,"darkColor",I("palette-text-primary")),mt(P.Avatar,"defaultBg",I("palette-grey-600")),mt(P.Button,"inheritContainedBg",I("palette-grey-800")),mt(P.Button,"inheritContainedHoverBg",I("palette-grey-700")),mt(P.Chip,"defaultBorder",I("palette-grey-700")),mt(P.Chip,"defaultAvatarColor",I("palette-grey-300")),mt(P.Chip,"defaultIconColor",I("palette-grey-300")),mt(P.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),mt(P.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),mt(P.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),mt(P.LinearProgress,"primaryBg",q(On,P.primary.main,.5)),mt(P.LinearProgress,"secondaryBg",q(On,P.secondary.main,.5)),mt(P.LinearProgress,"errorBg",q(On,P.error.main,.5)),mt(P.LinearProgress,"infoBg",q(On,P.info.main,.5)),mt(P.LinearProgress,"successBg",q(On,P.success.main,.5)),mt(P.LinearProgress,"warningBg",q(On,P.warning.main,.5)),mt(P.Skeleton,"bg",A?q(Bd,P.text.primary,.13):`rgba(${I("palette-text-primaryChannel")} / 0.13)`),mt(P.Slider,"primaryTrack",q(On,P.primary.main,.5)),mt(P.Slider,"secondaryTrack",q(On,P.secondary.main,.5)),mt(P.Slider,"errorTrack",q(On,P.error.main,.5)),mt(P.Slider,"infoTrack",q(On,P.info.main,.5)),mt(P.Slider,"successTrack",q(On,P.success.main,.5)),mt(P.Slider,"warningTrack",q(On,P.warning.main,.5));const Q=A?q(Mn,P.background.default,.985):Ty(P.background.default,.98);mt(P.SnackbarContent,"bg",Q),mt(P.SnackbarContent,"color",so(()=>A?E9.text.primary:P.getContrastText(Q))),mt(P.SpeedDialAction,"fabHoverBg",Ty(P.background.paper,.15)),mt(P.StepConnector,"border",I("palette-grey-600")),mt(P.StepContent,"border",I("palette-grey-600")),mt(P.Switch,"defaultColor",I("palette-grey-300")),mt(P.Switch,"defaultDisabledColor",I("palette-grey-600")),mt(P.Switch,"primaryDisabledColor",q(On,P.primary.main,.55)),mt(P.Switch,"secondaryDisabledColor",q(On,P.secondary.main,.55)),mt(P.Switch,"errorDisabledColor",q(On,P.error.main,.55)),mt(P.Switch,"infoDisabledColor",q(On,P.info.main,.55)),mt(P.Switch,"successDisabledColor",q(On,P.success.main,.55)),mt(P.Switch,"warningDisabledColor",q(On,P.warning.main,.55)),mt(P.TableCell,"border",q(On,q(Bd,P.divider,1),.68)),mt(P.Tooltip,"bg",q(Bd,P.grey[700],.92))}ml(P.background,"default"),ml(P.background,"paper"),ml(P.common,"background"),ml(P.common,"onBackground"),ml(P,"divider"),Object.keys(P).forEach(Q=>{const V=P[Q];Q!=="tonalOffset"&&V&&typeof V=="object"&&(V.main&&mt(P[Q],"mainChannel",Pg(Dg(V.main))),V.light&&mt(P[Q],"lightChannel",Pg(Dg(V.light))),V.dark&&mt(P[Q],"darkChannel",Pg(Dg(V.dark))),V.contrastText&&mt(P[Q],"contrastTextChannel",Pg(Dg(V.contrastText))),Q==="text"&&(ml(P[Q],"primary"),ml(P[Q],"secondary")),Q==="action"&&(V.active&&ml(P[Q],"active"),V.selected&&ml(P[Q],"selected")))})}),_=t.reduce((z,P)=>Ir(z,P),_);const E={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:Xce(_),enableContrastVars:o},{vars:T,generateThemeVars:M,generateStyleSheets:R}=vce(_,E);return _.vars=T,Object.entries(_.colorSchemes[_.defaultColorScheme]).forEach(([z,P])=>{_[z]=P}),_.generateThemeVars=M,_.generateStyleSheets=R,_.generateSpacing=function(){return y9(u.spacing,rL(this))},_.getColorSchemeSelector=wce(c),_.spacing=_.generateSpacing(),_.shouldSkipGeneratingVar=l,_.unstable_sxConfig={...cx,...u?.unstable_sxConfig},_.unstable_sx=function(P){return wf({sx:P,theme:this})},_.toRuntimeSource=L9,_}function JI(e,t,a){e.colorSchemes&&a&&(e.colorSchemes[t]={...a!==!0&&a,palette:pL({...a===!0?{}:a.palette,mode:t})})}function nde(e={},...t){const{palette:a,cssVariables:s=!1,colorSchemes:r=a?void 0:{light:!0},defaultColorScheme:i=a?.mode,...o}=e,l=i||"light",c=r?.[l],d={...r,...a?{[l]:{...typeof c!="boolean"&&c,palette:a}}:void 0};if(s===!1){if(!("colorSchemes"in e))return RT(e,...t);let u=a;"palette"in e||d[l]&&(d[l]!==!0?u=d[l].palette:l==="dark"&&(u={mode:"dark"}));const f=RT({...e,palette:u},...t);return f.defaultColorScheme=l,f.colorSchemes=d,f.palette.mode==="light"&&(f.colorSchemes.light={...d.light!==!0&&d.light,palette:f.palette},JI(f,"dark",d.dark)),f.palette.mode==="dark"&&(f.colorSchemes.dark={...d.dark!==!0&&d.dark,palette:f.palette},JI(f,"light",d.light)),f}return!a&&!("light"in d)&&l==="light"&&(d.light=!0),tde({...o,colorSchemes:d,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const xL=nde(),oN="$$material";function Ho(){const e=v9(xL);return e[oN]||e}function ade(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const O9=e=>ade(e)&&e!=="classes",un=Kle({themeId:oN,defaultTheme:xL,rootShouldForwardProp:O9});function sde(){return Roe}function yd(e){return fce(e)}function Io(...e){const t=h.useRef(void 0),a=h.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return h.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=a(s))},e)}function rde(e){return typeof e=="string"}function M9(e,t,a){return e===void 0||rde(e)?t:{...t,ownerState:{...t.ownerState,...a}}}function I9(e,t,a){return typeof e=="function"?e(t,a):e}function ide(e,t=[]){if(e===void 0)return{};const a={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{a[s]=e[s]}),a}function e$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(a=>!(a.match(/^on[A-Z]/)&&typeof e[a]=="function")).forEach(a=>{t[a]=e[a]}),t}function $9(e){const{getSlotProps:t,additionalProps:a,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=Pt(a?.className,i,r?.className,s?.className),v={...a?.style,...r?.style,...s?.style},N={...a,...r,...s};return x.length>0&&(N.className=x),Object.keys(v).length>0&&(N.style=v),{props:N,internalRef:void 0}}const o=ide({...r,...s}),l=e$(s),c=e$(r),d=t(o),u=Pt(d?.className,a?.className,i,r?.className,s?.className),f={...d?.style,...a?.style,...r?.style,...s?.style},p={...d,...a,...c,...l};return u.length>0&&(p.className=u),Object.keys(f).length>0&&(p.style=f),{props:p,internalRef:d.ref}}function t$(e,t){const{className:a,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:d,slots:u={[e]:void 0},slotProps:f={[e]:void 0},...p}=i,x=u[e]||s,v=I9(f[e],r),{props:{component:N,...b},internalRef:C}=$9({className:a,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),w=Io(C,v?.ref,t.ref),S=e==="root"?N||d:N,A=M9(x,{...e==="root"&&!d&&!u[e]&&o,...e!=="root"&&!u[e]&&o,...b,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,A]}function xn(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function zT(e,t){return zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},zT(e,t)}function R9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,zT(e,t)}const n$={disabled:!1},cv=bt.createContext(null);var ode=function(t){return t.scrollTop},Og="unmounted",Vd="exited",Qd="entering",tf="entered",UT="exiting",Zl=(function(e){R9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Vd,i.appearStatus=Qd):c=tf:s.unmountOnExit||s.mountOnEnter?c=Og:c=Vd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Og?{status:Vd}:null};var a=t.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Qd&&o!==tf&&(i=Qd):(o===Qd||o===tf)&&(i=UT)}this.updateStatus(!1,i)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},a.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Qd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:jy.findDOMNode(this);o&&ode(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Vd&&this.setState({status:Og})},a.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[jy.findDOMNode(this),l],d=c[0],u=c[1],f=this.getTimeouts(),p=l?f.appear:f.enter;if(!r&&!o||n$.disabled){this.safeSetState({status:tf},function(){i.props.onEntered(d)});return}this.props.onEnter(d,u),this.safeSetState({status:Qd},function(){i.props.onEntering(d,u),i.onTransitionEnd(p,function(){i.safeSetState({status:tf},function(){i.props.onEntered(d,u)})})})},a.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:jy.findDOMNode(this);if(!i||n$.disabled){this.safeSetState({status:Vd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:UT},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Vd},function(){r.props.onExited(l)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},a.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},a.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:jy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],d=c[0],u=c[1];this.props.addEndListener(d,u)}r!=null&&setTimeout(this.nextCallback,r)},a.render=function(){var r=this.state.status;if(r===Og)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=xn(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(cv.Provider,{value:null},typeof o=="function"?o(r,l):bt.cloneElement(bt.Children.only(o),l))},t})(bt.Component);Zl.contextType=cv;Zl.propTypes={};function Fm(){}Zl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Fm,onEntering:Fm,onEntered:Fm,onExit:Fm,onExiting:Fm,onExited:Fm};Zl.UNMOUNTED=Og;Zl.EXITED=Vd;Zl.ENTERING=Qd;Zl.ENTERED=tf;Zl.EXITING=UT;function lde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yL(e,t){var a=function(i){return t&&h.isValidElement(i)?t(i):i},s=Object.create(null);return e&&h.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=a(r)}),s}function cde(e,t){e=e||{},t=t||{};function a(u){return u in t?t[u]:e[u]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var d=s[c][o];l[s[c][o]]=a(d)}l[c]=a(c)}for(o=0;o<r.length;o++)l[r[o]]=a(r[o]);return l}function iu(e,t,a){return a[t]!=null?a[t]:e.props[t]}function dde(e,t){return yL(e.children,function(a){return h.cloneElement(a,{onExited:t.bind(null,a),in:!0,appear:iu(a,"appear",e),enter:iu(a,"enter",e),exit:iu(a,"exit",e)})})}function ude(e,t,a){var s=yL(e.children),r=cde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(h.isValidElement(o)){var l=i in t,c=i in s,d=t[i],u=h.isValidElement(d)&&!d.props.in;c&&(!l||u)?r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:!0,exit:iu(o,"exit",e),enter:iu(o,"enter",e)}):!c&&l&&!u?r[i]=h.cloneElement(o,{in:!1}):c&&l&&h.isValidElement(d)&&(r[i]=h.cloneElement(o,{onExited:a.bind(null,o),in:d.props.in,exit:iu(o,"exit",e),enter:iu(o,"enter",e)}))}}),r}var mde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},fde={component:"div",childFactory:function(t){return t}},bL=(function(e){R9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(lde(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var a=t.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?dde(r,l):ude(r,o,l),firstRender:!1}},a.handleExited=function(r,i){var o=yL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=We({},l.children);return delete c[r.key],{children:c}}))},a.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=xn(r,["component","childFactory"]),c=this.state.contextValue,d=mde(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?bt.createElement(cv.Provider,{value:c},d):bt.createElement(cv.Provider,{value:c},bt.createElement(i,l,d))},t})(bt.Component);bL.propTypes={};bL.defaultProps=fde;function z9(e){return parseInt(h.version,10)>=19?e?.props?.ref||null:e?.ref||null}const hde=e=>e.scrollTop;function a$(e,t){const{timeout:a,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof a=="number"?a:a[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const gde={entering:{opacity:1},entered:{opacity:1}},pde=h.forwardRef(function(t,a){const s=Ho(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:d,onEnter:u,onEntered:f,onEntering:p,onExit:x,onExited:v,onExiting:N,style:b,timeout:C=r,TransitionComponent:w=Zl,...S}=t,A=h.useRef(null),k=Io(A,z9(l),a),_=q=>Q=>{if(q){const V=A.current;Q===void 0?q(V):q(V,Q)}},E=_(p),T=_((q,Q)=>{hde(q);const V=a$({style:b,timeout:C,easing:c},{mode:"enter"});q.style.webkitTransition=s.transitions.create("opacity",V),q.style.transition=s.transitions.create("opacity",V),u&&u(q,Q)}),M=_(f),R=_(N),z=_(q=>{const Q=a$({style:b,timeout:C,easing:c},{mode:"exit"});q.style.webkitTransition=s.transitions.create("opacity",Q),q.style.transition=s.transitions.create("opacity",Q),x&&x(q)}),P=_(v),I=q=>{i&&i(A.current,q)};return n.jsx(w,{appear:o,in:d,nodeRef:A,onEnter:T,onEntered:M,onEntering:E,onExit:z,onExited:P,onExiting:R,addEndListener:I,timeout:C,...S,children:(q,{ownerState:Q,...V})=>h.cloneElement(l,{style:{opacity:0,visibility:q==="exited"&&!d?"hidden":void 0,...gde[q],...b,...l.props.style},ref:k,...V})})});function xde(e){return Wa("MuiBackdrop",e)}_a("MuiBackdrop",["root","invisible"]);const yde=e=>{const{classes:t,invisible:a}=e;return Ga({root:["root",a&&"invisible"]},xde,t)},bde=un("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),vde=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:d={},componentsProps:u={},slotProps:f={},slots:p={},TransitionComponent:x,transitionDuration:v,...N}=s,b={...s,component:o,invisible:l},C=yde(b),w={transition:x,root:d.Root,...p},S={...u,...f},A={component:o,slots:w,slotProps:S},[k,_]=t$("root",{elementType:bde,externalForwardedProps:A,className:Pt(C.root,i),ownerState:b}),[E,T]=t$("transition",{elementType:pde,externalForwardedProps:A,ownerState:b});return n.jsx(E,{in:c,timeout:v,...N,...T,children:n.jsx(k,{"aria-hidden":!0,..._,classes:C,ref:a,children:r})})}),Eu=pce;function wde(e){return typeof e.main=="string"}function Nde(e,t=[]){if(!wde(e))return!1;for(const a of t)if(!e.hasOwnProperty(a)||typeof e[a]!="string")return!1;return!0}function mp(e=[]){return([,t])=>t&&Nde(t,e)}function jde(e){return Wa("MuiCircularProgress",e)}_a("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Pi=44,FT=ux`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,BT=ux`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Cde=typeof FT!="string"?fL`
        animation: ${FT} 1.4s linear infinite;
      `:null,Sde=typeof BT!="string"?fL`
        animation: ${BT} 1.4s ease-in-out infinite;
      `:null,_de=e=>{const{classes:t,variant:a,color:s,disableShrink:r}=e,i={root:["root",a,`color${Gn(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Gn(a)}`,r&&"circleDisableShrink"]};return Ga(i,jde,t)},Ade=un("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`color${Gn(a.color)}`]]}})(Eu(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Cde||{animation:`${FT} 1.4s linear infinite`}},...Object.entries(e.palette).filter(mp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Tde=un("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Ede=un("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.circle,t[`circle${Gn(a.variant)}`],a.disableShrink&&t.circleDisableShrink]}})(Eu(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Sde||{animation:`${BT} 1.4s ease-in-out infinite`}}]}))),kde=un("circle",{name:"MuiCircularProgress",slot:"Track"})(Eu(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),vL=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:d,thickness:u=3.6,value:f=0,variant:p="indeterminate",...x}=s,v={...s,color:i,disableShrink:o,size:c,thickness:u,value:f,variant:p,enableTrackSlot:l},N=_de(v),b={},C={},w={};if(p==="determinate"){const S=2*Math.PI*((Pi-u)/2);b.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(f),b.strokeDashoffset=`${((100-f)/100*S).toFixed(3)}px`,C.transform="rotate(-90deg)"}return n.jsx(Ade,{className:Pt(N.root,r),style:{width:c,height:c,...C,...d},ownerState:v,ref:a,role:"progressbar",...w,...x,children:n.jsxs(Tde,{className:N.svg,ownerState:v,viewBox:`${Pi/2} ${Pi/2} ${Pi} ${Pi}`,children:[l?n.jsx(kde,{className:N.track,ownerState:v,cx:Pi,cy:Pi,r:(Pi-u)/2,fill:"none",strokeWidth:u,"aria-hidden":"true"}):null,n.jsx(Ede,{className:N.circle,style:b,ownerState:v,cx:Pi,cy:Pi,r:(Pi-u)/2,fill:"none",strokeWidth:u})]})})});function U9(e){return n.jsx(vde,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:n.jsx(vL,{color:"inherit"})})}var js={},Ey={},s$;function Lde(){if(s$)return Ey;s$=1,Object.defineProperty(Ey,"__esModule",{value:!0});function e(t,a){return t.reduce((s,r)=>{const i=String(r[a]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return Ey.default=e,Ey}var ky={},r$;function Pde(){if(r$)return ky;r$=1,Object.defineProperty(ky,"__esModule",{value:!0});function e(t,a){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=a[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return ky.default=e,ky}var Ly={},i$;function Dde(){if(i$)return Ly;i$=1,Object.defineProperty(Ly,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return Ly.default=e,Ly}var o$;function Ode(){if(o$)return js;o$=1;var e=js&&js.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(js,"__esModule",{value:!0}),js.customList=js.customArray=js.findOne=js.filter=js.all=js.utils=void 0;const t=e(Lde()),a=e(Pde()),s=e(Dde());js.utils={groupBy:t.default};function r(){return s.default}js.all=r;function i(d,u){return s.default.filter(f=>f[d]===u)}js.filter=i;function o(d,u){return s.default.find(f=>f[d]===u)}js.findOne=o;function l(d={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:u,sortDataBy:f,filter:p}={}){const x=[];let v=s.default;if(typeof p=="function"&&(v=v.filter(p)),f){const N=new Intl.Collator([],{sensitivity:"accent"});v.sort((b,C)=>N.compare(b[f],C[f]))}if(v.forEach(N=>{const b={};for(const C in d)b[C]=(0,a.default)(d[C],N);x.push(b)}),u&&d[u]){const N=new Intl.Collator([],{sensitivity:"accent"});x.sort((b,C)=>N.compare(b[u],C[u]))}return x}js.customArray=l;function c(d="countryCode",u="{countryNameEn} ({countryCode})",{filter:f}={}){const p={};let x=s.default;return typeof f=="function"&&(x=x.filter(f)),x.forEach(v=>{const N=(0,a.default)(u,v);p[String(v[d])]=N}),p}return js.customList=c,js}var Vf=Ode();const HT=(...e)=>e.flat().filter(Boolean).join(" "),Mde=Vf.all(),F9=Mde.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),qT=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],Ide=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},$de=h.memo(({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:d,options:u})=>{const f=t.toLowerCase().includes("password"),p=f?o?"text":"password":s,x=HT("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",f?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),n.jsxs("div",{className:"relative",children:[d?n.jsx("select",{id:t,value:r,onChange:i,required:!0,className:x,children:u.map(v=>n.jsx("option",{value:v,children:v},v))}):n.jsx("input",{id:t,type:p,placeholder:a,value:r,onChange:i,required:!0,className:x}),f&&n.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]}),c&&n.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),tu=$de,Rde=h.memo(({currentStep:e,totalSteps:t})=>n.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:qT.map(a=>n.jsxs(h.Fragment,{children:[n.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[n.jsx("div",{className:HT("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",a.id===e?"bg-amber-500 text-white shadow-lg":a.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:a.id<e?n.jsx(Zk,{className:"size-5"}):a.id}),n.jsx("span",{className:HT("mt-2 text-xs font-medium hidden sm:block",a.id===e?"text-amber-600":"text-gray-500"),children:a.title})]}),a.id<t&&n.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},a.id))})),zde=h.memo(({formData:e,handleChange:t,handleCodeChange:a,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:d,handleSubmit:u,handleGoogleLogin:f})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[n.jsx("div",{className:"md:w-1/2",children:n.jsx(tu,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),n.jsx("div",{className:"md:w-1/2",children:n.jsx(tu,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:a,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:F9.map(p=>n.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),n.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(tu,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),n.jsx(tu,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),n.jsx(tu,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),n.jsxs("div",{className:"flex items-start pt-2",children:[n.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),n.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",n.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&n.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),n.jsx("button",{type:"submit",onClick:u,disabled:d,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),Ude=h.memo(({companyData:e,handleCodeChange1:t,handleSubmit:a,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:d})=>n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx(tu,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:F9.map(u=>n.jsxs("option",{value:u.code,children:[u.name," ",u.code]},u.code))}),n.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),n.jsx(tu,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&n.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),n.jsxs("div",{className:"flex space-x-4 mt-8",children:[n.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),d(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[n.jsx(Nie,{className:"size-4 mr-2"})," Back"]}),n.jsx("button",{onClick:a,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),Fde=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[a,s]=h.useState(1),[r,i]=h.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=h.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,d]=h.useState({}),[u,f]=h.useState(!1),[p,x]=h.useState(null),[v,N]=h.useState(!1),{login:b}=Qs(),[C,w]=h.useState({plan_name:"Free",price:0}),[S,A]=h.useState(!1),[k,_]=h.useState(null);h.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),h.useEffect(()=>{const W=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){W();return}const ne=document.createElement("script");ne.src="https://accounts.google.com/gsi/client",ne.async=!0,ne.defer=!0,ne.onload=W,document.body.appendChild(ne)},[]);const E=async W=>{A(!0);try{const ne=t9(W.credential);console.log("Google user:",ne);try{await ae.post("/auth/email-check",{email:ne.email})}catch(oe){const K=oe.response?.data?.detail||"An error occurred.";_(K),A(!1);return}i(oe=>({...oe,email:ne.email,first_name:ne.given_name||"",last_name:ne.family_name||"",password:"",profilePicture:ne.picture||"",googleId:ne.sub,auth_provider:"google",id_token:W.credential})),s(2)}catch(ne){console.error("Google signup error:",ne),x("Failed to process Google account. Please try again.")}finally{_(null),x(null),A(!1)}},T=h.useCallback(W=>{const{id:ne,value:oe}=W.target;l(K=>({...K,[ne]:oe})),x(null)},[]),M=h.useCallback(W=>{const{id:ne,value:oe}=W.target;N(!1),i(K=>{const U={...K,[ne]:oe};if(a===1){let ye=null;if(ne==="password"&&oe.length>0&&oe.length<8)ye="Password must be at least 8 characters.";else if(ne==="password"||ne==="confirmPassword"){const pe=ne==="password"?oe:U.password,Ne=ne==="confirmPassword"?oe:U.confirmPassword;pe&&Ne&&pe!==Ne&&(ye="Passwords don't match.")}x(ye)}return U})},[a]),R=h.useCallback(W=>i(ne=>({...ne,countryCode:W.target.value})),[]),z=h.useCallback(W=>l(ne=>({...ne,countryCode:W.target.value})),[]),P=h.useCallback(W=>d(ne=>({...ne,[W]:!ne[W]})),[]),I=h.useCallback(W=>f(W.target.checked),[]),q=async W=>{if(W.preventDefault(),N(!1),x(null),a===1){if(!e.every(oe=>r[oe].trim()!=="")||!u){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await ae.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(oe){oe.response&&oe.response.data&&oe.response.data.detail?x(oe.response.data.detail):x("Something went wrong. Please try again.")}finally{A(!1)}}else if(a===2){if(!t.every(oe=>(o[oe]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:oe,...K}=r,U={...o,company_number:`${o.countryCode} ${o.company_number}`},pe=(await ae.post("/company/create",U)).data.id,Ne={...K,company_id:pe,phone_number:`${K.countryCode} ${K.phone_number}`};if(console.log(" Sending payload:",Ne),K.auth_provider==="google"){const Se=await ae.post("/auth/google/signup",Ne),Oe={...C,company_id:pe,status:"Active"},ke=await ae.post("/subscription/subscribe",Oe);x(null),N(!0),b(Se.data)}else{const Se=await ae.post("/auth/signup",Ne),Oe={...C,company_id:pe,status:"Active"},ke=await ae.post("/subscription/subscribe",Oe);x(null),N(!0),b(Se.data)}}catch(oe){if(oe.response?.data?.detail){const K=oe.response.data.detail;if(Array.isArray(K)){const U=K.map(ye=>ye.msg).join(", ");x(U)}else x(typeof K=="object"?K.msg||JSON.stringify(K):K)}else x("Something went wrong. Please try again.")}finally{A(!1)}}},Q=h.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:W=>{const{credential:ne}=W;i(oe=>({...oe,first_name:ne.given_name||"",last_name:ne.family_name||"",email:ne.email||"",profile_picture:ne.picture||"",auth_provider:"google",id_token:ne})),s(2)}}),window.google.accounts.id.prompt()}catch(W){console.error("Google login error:",W),x("Google login failed. Please try again.")}},[i,x,s]),V=h.useMemo(()=>{if(a===1){const W=e.every(K=>(r[K]||"").trim()!==""),ne=r.password.length>=8,oe=r.password===r.confirmPassword;return!u||!!p||!W||!ne||!oe}return a===2?!t.every(ne=>(o[ne]||"").trim()!=="")||!!p:!1},[a,u,p,r,o]),X=qT.find(W=>W.id===a);return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsxs("div",{className:"flex items-center text-gray-800",children:[n.jsx(tn,{className:"size-6 text-amber-500 mr-2"}),n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&n.jsx(U9,{isLoading:S}),n.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:n.jsx(Ide,{})}),n.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:X.title}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:X.subtitle})]}),n.jsx(Rde,{currentStep:a,totalSteps:qT.length}),a===1&&n.jsx("div",{id:"googleSignupBtn"}),n.jsxs("form",{className:"mt-8",children:[a===1&&n.jsx(zde,{formData:r,handleChange:M,handleCodeChange:R,handleTogglePass:P,isPassVisible:c,formError:p,signupError:k,termsAccepted:u,handleTerms:I,isButtonDisabled:V,handleSubmit:q,handleGoogleLogin:Q}),a===2&&n.jsx(Ude,{handleSubmit:q,companyData:o,handleCompanyChange:T,formError:p,isSubmitted:v,isButtonDisabled:V,setStep:s,setIsSubmitted:N,setFormError:x,handleCodeChange1:z}),a===1&&n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",n.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},Bde=()=>{const e=wt();return n.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back to Home"]})},l$=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password"),d=c?o?"text":"password":s;return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:t,type:d,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&n.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]})},Hde=()=>{const[e,t]=h.useState({email:"",password:""}),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(!1),{isLoggedIn:c,login:d,userRole:u}=Qs(),f=wt();h.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),h.useEffect(()=>{c&&(u==="CEO"||u==="Admin"?f("/admin"):u==="Group Manager"?f("/group-manager"):u==="Manager"?f("/manager"):u==="Marketing"?f("/marketing"):u==="Sales"&&f("/sales"))},[c,f,u]);const p=N=>{const{id:b,value:C}=N.target;t(w=>({...w,[b]:C}))},x=async N=>{N.preventDefault(),i(null);try{const b=await ae.post("/auth/login",e);d(b.data),i(null)}catch(b){b.response&&b.response.data&&b.response.data.detail?i(b.response.data.detail):i("Something went wrong. Please try again.")}};h.useEffect(()=>{const N=document.createElement("script");return N.src="https://accounts.google.com/gsi/client",N.async=!0,N.defer=!0,N.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(N),()=>{document.body.contains(N)&&document.body.removeChild(N)}},[]);const v=async N=>{l(!0);try{const b=t9(N.credential),C=await ae.post("/auth/google/login",{id_token:N.credential});d(C.data)}catch(b){console.error("Google login failed:",b);const C=b.response?.data?.detail||"Google login failed. Please try again.";i(C)}finally{l(!1)}};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&n.jsx(U9,{isLoading:o}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(Bde,{}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),n.jsx("div",{id:"googleLoginBtn"}),n.jsxs("div",{className:"flex items-center my-6",children:[n.jsx("div",{className:"flex-grow border-t border-gray-300"}),n.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),n.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[n.jsx(l$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),n.jsx(l$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:a,onTogglePass:()=>s(N=>!N)}),r&&n.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),n.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),n.jsx("div",{className:"text-center mt-1",children:n.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),n.jsx("div",{className:"text-center mt-6",children:n.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",n.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},qde=({onClick:e})=>n.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[n.jsx(Gu,{className:"size-4 mr-1"})," Back"]}),OS=({label:e,id:t,placeholder:a,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=h.useState(!1),d=s==="password";return n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),n.jsxs("div",{className:"relative flex items-center",children:[o&&n.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),n.jsx("input",{id:t,type:d&&l?"text":s,placeholder:a,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),d&&n.jsx("button",{type:"button",onClick:()=>c(u=>!u),className:"absolute right-3 text-gray-500",children:l?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]})},Gde=({otp:e,setOtp:t})=>n.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((a,s)=>n.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),Wde=()=>{const e=wt(),[t,a]=h.useState(1),[s,r]=h.useState(""),[i,o]=h.useState(["","","","","",""]),[l,c]=h.useState(""),[d,u]=h.useState(""),f=N=>{N.preventDefault(),a(2)},p=N=>{N.preventDefault(),a(3)},x=N=>{if(N.preventDefault(),l!==d){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?a(t-1):e("/login")};return n.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[n.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:n.jsx("div",{className:"flex items-center text-gray-800",children:n.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),n.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[n.jsx(qde,{onClick:v}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),n.jsxs("form",{onSubmit:f,className:"space-y-6 cursor-pointer",children:[n.jsx(OS,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:N=>r(N.target.value),icon:na}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",n.jsx("strong",{children:s}),"."]})]}),n.jsxs("form",{onSubmit:p,className:"space-y-6",children:[n.jsx(Gde,{otp:i,setOtp:o}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&n.jsxs(n.Fragment,{children:[n.jsxs("header",{className:"text-center mb-6",children:[n.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),n.jsxs("form",{onSubmit:x,className:"space-y-6",children:[n.jsx(OS,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:N=>c(N.target.value),icon:So}),n.jsx(OS,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:d,onChange:N=>u(N.target.value),icon:So}),n.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},en=()=>{const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(!0),o=wt(),l=async()=>{try{const d=await ae.get("/auth/me");t(d.data),s(!0)}catch(d){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",d)}finally{i(!1)}};return h.useEffect(()=>{l()},[]),{user:e,isLoggedIn:a,loading:r,fetchUser:l,logout:async()=>{try{await ae.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Bt({message:e="Loading..."}){return n.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:n.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),n.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const Vde=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function Py(){const{user:e,loading:t,fetchUser:a}=en(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(!1),[N,b]=h.useState(!1),[C,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(null),E=h.useRef(null),[T,M]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[R,z]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const P=(X,W)=>{M(ne=>({...ne,[X]:W}))},I=(X,W)=>{z(ne=>({...ne,[X]:W}))},q=X=>{const W=X.target.files?.[0];if(!W)return;if(!W.type.startsWith("image/")){G.error("Please select an image file");return}if(W.size>5*1024*1024){G.error("Image size should be less than 5MB");return}const ne=new FileReader;ne.onloadend=()=>{A(ne.result),_(ne.result)},ne.readAsDataURL(W)},Q=async X=>{if(X.preventDefault(),!T.firstName.trim()||!T.lastName.trim()){G.warn("Please fill in all required fields.");return}o(!0);try{const W={first_name:T.firstName.trim(),last_name:T.lastName.trim(),phone_number:T.phoneNumber.trim()||null};S!==null&&(W.profile_picture=S),await ae.put("/users/me",W),await a(),c(!1),A(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),G.success("Account information updated successfully!")}catch(W){console.error("Error updating account:",W);const ne=W.response?.data?.detail||"Failed to update account information. Please try again.";G.error(ne)}finally{o(!1)}},V=async X=>{if(X.preventDefault(),!R.newPassword||!R.confirmPassword){G.warn("Please fill in all password fields.");return}if(R.newPassword.length<8){G.warn("Password must be at least 8 characters long.");return}if(R.newPassword!==R.confirmPassword){G.warn("New password and confirm password do not match.");return}w(!0);try{const W={password:R.newPassword};await ae.put("/users/me",W),await a(),z({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),G.success("Password changed successfully!")}catch(W){console.error("Error changing password:",W);const ne=W.response?.data?.detail||"Failed to change password. Please try again.";G.error(ne)}finally{w(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&n.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ha,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?n.jsx("div",{className:"relative",children:n.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:Vde(e.first_name,e.last_name)}),l&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:E,accept:"image/*",onChange:q,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(XH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?n.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.firstName,onChange:X=>P("firstName",X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:T.lastName,onChange:X=>P("lastName",X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:T.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:T.phoneNumber,onChange:X=>P("phoneNumber",X.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{c(!1),M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),A(null),_(e.profile_picture||null),E.current&&(E.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[n.jsx(eL,{}),i?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(So,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:V,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:R.newPassword,onChange:X=>I("newPassword",X.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>v(X=>!X),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:N?void 0:{WebkitTextSecurity:"disc"},value:R.confirmPassword,onChange:X=>I("confirmPassword",X.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>b(X=>!X),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":N?"Hide password":"Show password",children:N?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:C,children:[n.jsx(So,{}),C?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(JH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const lN=e=>{const t="https://crm.sari-sari.com";try{const a=new URL(t),s=a.protocol==="https:"?"wss":"ws",r=a.hostname,i=a.port||(a.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(a){return console.error("Error parsing API URL:",a),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function Qde({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Zt(),p=wt(),{logout:x}=Qs(),{user:v,fetchUser:N}=en(),C={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[f.pathname]||"Admin Panel";return h.useEffect(()=>{const w=()=>{N()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[N]),h.useEffect(()=>{if(!v?.id)return;const w=lN(v.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let A;const k=()=>{A=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(A)},S.onmessage=_=>{try{const E=JSON.parse(_.data);console.log(" Notification received:",E),o(T=>[E,...T]),c(T=>T+1)}catch(E){console.error("Error parsing notification:",E)}},S.onerror=_=>{console.error(" Admin WS Error:",_)},S.onclose=()=>{console.log(" Admin WS Disconnected"),k()},()=>{clearTimeout(A),S&&S.readyState===WebSocket.OPEN&&S.close()}},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ix,{className:"text-2xl"})}),v?.company?.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(sx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{p("/admin/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/admin/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("button",{onClick:()=>{p("/admin/help"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Help"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Yde(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Zt(),{user:d}=en();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const f=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);h.useEffect(()=>{f&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/admin/dashboard",className:({isActive:v})=>v?p:x,children:[n.jsx(rx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/accounts",className:({isActive:v})=>v?p:x,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs($t,{to:"/admin/contacts",className:({isActive:v})=>v?p:x,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/admin/leads",className:({isActive:v})=>v?p:x,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/admin/deals",className:({isActive:v})=>v?p:x,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/admin/quotes",className:({isActive:v})=>v?p:x,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/admin/targets",className:({isActive:v})=>v?p:x,children:[n.jsx(or,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/tasks",className:({isActive:v})=>v?p:x,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs($t,{to:"/admin/meetings",className:({isActive:v})=>v?p:x,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/admin/calls",className:({isActive:v})=>v?p:x,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/admin/audit",className:({isActive:v})=>v?p:x,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/admin/territory",className:({isActive:v})=>v?p:x,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/admin/users",className:({isActive:v})=>v?p:x,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/admin/manage-account",className:({isActive:v})=>v?p:x,children:[n.jsx(nn,{})," Manage Account"]}),n.jsxs($t,{to:"/admin/company-details",className:({isActive:v})=>v?p:x,children:[n.jsx(qw,{})," Settings"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Qde,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Kp,{})})]})]})}function Kde(e){return _t({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function Xde(e){return _t({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Zde(e){return _t({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function Si({props:e,name:t}){return tce({props:e,name:t,defaultTheme:xL,themeId:oN})}function $l(e){const{elementType:t,externalSlotProps:a,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:I9(a,s),{props:l,internalRef:c}=$9({...i,externalSlotProps:o}),d=Io(c,o?.ref,e.additionalProps?.ref);return M9(t,{...l,ref:d},s)}function hs(e){const t=h.useRef(e);return ss(()=>{t.current=e}),h.useRef((...a)=>(0,t.current)(...a)).current}var dv=Symbol("NOT_FOUND");function Jde(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function eue(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function tue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(a=>typeof a=="function")){const a=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${a}]`)}}var c$=e=>Array.isArray(e)?e:[e];function nue(e){const t=Array.isArray(e[0])?e[0]:e;return tue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function aue(e,t){const a=[],{length:s}=e;for(let r=0;r<s;r++)a.push(e[r].apply(null,t));return a}function sue(e){let t;return{get(a){return t&&e(t.key,a)?t.value:dv},put(a,s){t={key:a,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function rue(e,t){let a=[];function s(l){const c=a.findIndex(d=>t(l,d.key));if(c>-1){const d=a[c];return c>0&&(a.splice(c,1),a.unshift(d)),d.value}return dv}function r(l,c){s(l)===dv&&(a.unshift({key:l,value:c}),a.length>e&&a.pop())}function i(){return a}function o(){a=[]}return{get:s,put:r,getEntries:i,clear:o}}var iue=(e,t)=>e===t;function oue(e){return function(a,s){if(a===null||s===null||a.length!==s.length)return!1;const{length:r}=a;for(let i=0;i<r;i++)if(!e(a[i],s[i]))return!1;return!0}}function lue(e,t){const a=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=iue,maxSize:r=1,resultEqualityCheck:i}=a,o=oue(s);let l=0;const c=r<=1?sue(o):rue(r,o);function d(){let u=c.get(arguments);if(u===dv){if(u=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,u));p&&(u=p.value,l!==0&&l--)}c.put(arguments,u)}return u}return d.clearCache=()=>{c.clear(),d.resetResultsCount()},d.resultsCount=()=>l,d.resetResultsCount=()=>{l=0},d}var cue=class{constructor(e){this.value=e}deref(){return this.value}},due=typeof WeakRef<"u"?WeakRef:cue,uue=0,d$=1;function Dy(){return{s:uue,v:void 0,o:null,p:null}}function B9(e,t={}){let a=Dy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=a;const{length:c}=arguments;for(let f=0,p=c;f<p;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const N=v.get(x);N===void 0?(l=Dy(),v.set(x,l)):l=N}else{let v=l.p;v===null&&(l.p=v=new Map);const N=v.get(x);N===void 0?(l=Dy(),v.set(x,l)):l=N}}const d=l;let u;if(l.s===d$)u=l.v;else if(u=e.apply(null,arguments),i++,s){const f=r?.deref?.()??r;f!=null&&s(f,u)&&(u=f,i!==0&&i--),r=typeof u=="object"&&u!==null||typeof u=="function"?new due(u):u}return d.s=d$,d.v=u,u}return o.clearCache=()=>{a=Dy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function H9(e,...t){const a=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},d=r.pop();typeof d=="object"&&(c=d,d=r.pop()),Jde(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...a,...c},{memoize:f,memoizeOptions:p=[],argsMemoize:x=B9,argsMemoizeOptions:v=[]}=u,N=c$(p),b=c$(v),C=nue(r),w=f(function(){return i++,d.apply(null,arguments)},...N),S=x(function(){o++;const k=aue(C,arguments);return l=w.apply(null,k),l},...b);return Object.assign(S,{resultFunc:d,memoizedResultFunc:w,dependencies:C,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var rt=H9(B9),mue=Object.assign((e,t=rt)=>{eue(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const a=Object.keys(e),s=a.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[a[c]]=l,o),{}))},{withTypes:()=>mue});const fue=H9({memoize:lue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),jt=(e,t,a,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let d;if(e&&t&&a&&s&&r&&i&&o&&l)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x),A=o(u,f,p,x);return l(v,N,b,C,w,S,A,f,p,x)};else if(e&&t&&a&&s&&r&&i&&o)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x),S=i(u,f,p,x);return o(v,N,b,C,w,S,f,p,x)};else if(e&&t&&a&&s&&r&&i)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x),w=r(u,f,p,x);return i(v,N,b,C,w,f,p,x)};else if(e&&t&&a&&s&&r)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x),C=s(u,f,p,x);return r(v,N,b,C,f,p,x)};else if(e&&t&&a&&s)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x),b=a(u,f,p,x);return s(v,N,b,f,p,x)};else if(e&&t&&a)d=(u,f,p,x)=>{const v=e(u,f,p,x),N=t(u,f,p,x);return a(v,N,f,p,x)};else if(e&&t)d=(u,f,p,x)=>{const v=e(u,f,p,x);return t(v,f,p,x)};else if(e)d=e;else throw new Error("Missing arguments");return d},cN=e=>(...t)=>{const a=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,d,u,f)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=a.get(p);if(!x){const v=t.length===1?[C=>C,r]:t;let N=t;const b=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{N=[...v.slice(0,-1),()=>b[0],r];break}case 2:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],r];break}case 3:{N=[...v.slice(0,-1),()=>b[0],()=>b[1],()=>b[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(N=[...N,e]),x=fue(...N),x.selectorArgs=b,a.set(p,x)}switch(o){case 3:x.selectorArgs[2]=f;case 2:x.selectorArgs[1]=u;case 1:x.selectorArgs[0]=d}switch(o){case 0:return x(c);case 1:return x(c,d);case 2:return x(c,d,u);case 3:return x(c,d,u,f);default:throw new Error("unreachable")}}},Ma=cN();var MS={exports:{}},IS={},$S={exports:{}},RS={};var u$;function hue(){if(u$)return RS;u$=1;var e=Uf();function t(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var a=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(f,p){var x=p(),v=s({inst:{value:x,getSnapshot:p}}),N=v[0].inst,b=v[1];return i(function(){N.value=x,N.getSnapshot=p,c(N)&&b({inst:N})},[f,x,p]),r(function(){return c(N)&&b({inst:N}),f(function(){c(N)&&b({inst:N})})},[f]),o(x),x}function c(f){var p=f.getSnapshot;f=f.value;try{var x=p();return!a(f,x)}catch{return!0}}function d(f,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return RS.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,RS}var m$;function gue(){return m$||(m$=1,$S.exports=hue()),$S.exports}var f$;function pue(){if(f$)return IS;f$=1;var e=Uf(),t=gue();function a(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var s=typeof Object.is=="function"?Object.is:a,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return IS.useSyncExternalStoreWithSelector=function(d,u,f,p,x){var v=i(null);if(v.current===null){var N={hasValue:!1,value:null};v.current=N}else N=v.current;v=l(function(){function C(_){if(!w){if(w=!0,S=_,_=p(_),x!==void 0&&N.hasValue){var E=N.value;if(x(E,_))return A=E}return A=_}if(E=A,s(S,_))return E;var T=p(_);return x!==void 0&&x(E,T)?(S=_,E):(S=_,A=T)}var w=!1,S,A,k=f===void 0?null:f;return[function(){return C(u())},k===null?void 0:function(){return C(k())}]},[u,f,p,x]);var b=r(d,v[0],v[1]);return o(function(){N.hasValue=!0,N.value=b},[b]),c(b),b},IS}var h$;function xue(){return h$||(h$=1,MS.exports=pue()),MS.exports}var q9=xue();function yue(e,t,a,s,r){const i=o=>t(o,a,s,r);return q9.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const g$={};function dN(e,t){const a=h.useRef(g$);return a.current===g$&&(a.current=e(t)),a}const bue=[];function G9(e){h.useEffect(e,bue)}const vue=()=>{};function wue(e,t,a){const s=dN(Nue,{store:e,selector:t}).current;s.effect=a,G9(s.onMount)}function Nue(e){const{store:t,selector:a}=e;let s=a(t.state);const r={effect:vue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=a(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class wL{static create(t){return new wL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const a=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(a!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const a in t)if(!Object.is(this.state[a],t[a])){this.setState(We({},this.state,t));return}}set(t,a){Object.is(this.state[t],a)||this.setState(We({},this.state,{[t]:a}))}}const uN=({params:e,store:t})=>{h.useEffect(()=>{t.set("animation",We({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const a=h.useCallback(()=>{let s=!1;return t.set("animation",We({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",We({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return ss(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=a():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[a,t]),{instance:{disableAnimation:a}}};uN.params={skipAnimation:!0};uN.getDefaultizedParams=({params:e})=>We({},e,{skipAnimation:e.skipAnimation??!1});uN.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const jue=e=>e.animation,Cue=jt(jue,e=>e.skip||e.skipAnimationRequests>0);function Sue(e,t){const a=h.useRef(!0);h.useEffect(()=>{if(a.current){a.current=!1;return}return e()},t)}function GT(e){return e&&e.ownerDocument||document}function _ue(e){return GT(e).defaultView||window}const Ft=yue,mN="DEFAULT_X_AXIS_KEY",Aue="DEFAULT_Y_AXIS_KEY",Tue={top:20,bottom:20,left:20,right:20},Eue=45,kue=25,W9=20,qo=e=>e.cartesianAxis?.x,Jl=e=>e.cartesianAxis?.y,Lue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="left"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Pue=jt(Jl,function(t){return(t??[]).reduce((a,s)=>s.position==="right"?a+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Due=jt(qo,function(t){return(t??[]).reduce((a,s)=>s.position==="top"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Oue=jt(qo,function(t){return(t??[]).reduce((a,s)=>s.position==="bottom"?a+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):a,0)}),Mue=Ma(Lue,Pue,Due,Oue,function(t,a,s,r){return{left:t,right:a,top:s,bottom:r}}),fx=e=>e.dimensions,Iue=e=>e.dimensions.margin,gr=Ma(fx,Iue,Mue,function({width:t,height:a},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:d,bottom:u}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:a-s-i-d-u,top:s+d,bottom:i+u}}),$ue=jt(fx,e=>e.width),Rue=jt(fx,e=>e.height),V9=jt(fx,e=>e.propsWidth),Q9=jt(fx,e=>e.propsHeight);function zue(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?We({},t,e):e}const Uue=10,fN=({params:e,store:t,svgRef:a})=>{const s=e.width!==void 0&&e.height!==void 0,r=h.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=h.useState(0),[l,c]=h.useState(0),d=h.useCallback(()=>{const v=a?.current;if(!v)return{};const b=_ue(v).getComputedStyle(v),C=Math.floor(parseFloat(b.height))||0,w=Math.floor(parseFloat(b.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==C)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??C,propsWidth:e.width,propsHeight:e.height}),{height:C,width:w}},[t,a,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);Sue(()=>{const v=e.width??t.state.dimensions.width,N=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:N,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),h.useEffect(()=>{r.current.displayError=!0},[]),ss(()=>{if(s||!r.current.initialCompute||r.current.computeRun>Uue)return;const v=d();v.width!==i||v.height!==l?(r.current.computeRun+=1,v.width!==void 0&&o(v.width),v.height!==void 0&&c(v.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,d,s]),ss(()=>{if(s)return()=>{};d();const v=a.current;if(typeof ResizeObserver>"u")return()=>{};let N;const b=new ResizeObserver(()=>{N=requestAnimationFrame(()=>{d()})});return v&&b.observe(v),()=>{N&&cancelAnimationFrame(N),v&&b.unobserve(v)}},[d,s,a]);const u=Ft(t,gr),f=h.useCallback(v=>v>=u.left-1&&v<=u.left+u.width,[u.left,u.width]),p=h.useCallback(v=>v>=u.top-1&&v<=u.top+u.height,[u.height,u.top]);return{instance:{isPointInside:h.useCallback((v,N,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:f(v)&&p(N),[f,p]),isXInside:f,isYInside:p}}};fN.params={width:!0,height:!0,margin:!0};fN.getDefaultizedParams=({params:e})=>We({},e,{margin:zue(e.margin,Tue)});fN.getInitialState=({width:e,height:t,margin:a})=>({dimensions:{margin:a,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const NL=({params:e,store:t})=>(ss(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});NL.params={experimentalFeatures:!0};NL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const Fue=e=>e.experimentalFeatures,hN=jt(Fue,e=>!!e?.preferStrictDomainInLineCharts);let p$=0;const Bue=()=>(p$+=1,`mui-chart-${p$}`),jL=({params:e,store:t})=>(h.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",We({},t.state.id,{chartId:e.id??Bue()}))},[t,e.id]),{});jL.params={id:!0};jL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const Hue=e=>e.id,que=jt(Hue,e=>e.chartId),Gue=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Wue=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],Y9=e=>e==="dark"?Wue:Gue,K9=({series:e,colors:t,seriesConfig:a})=>{const s={};return e.forEach((r,i)=>{const o=a[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},Vue=(e,t,a)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,a)??i)}),s},gN=({params:e,store:t,seriesConfig:a})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=h.useRef(!0);return h.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",We({},t.state.series,{defaultizedSeries:K9({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:a}),dataset:r}))},[o,r,s,i,a,t]),{}};gN.params={dataset:!0,series:!0,colors:!0,theme:!0};const Que=[];gN.getDefaultizedParams=({params:e})=>We({},e,{series:e.series?.length?e.series:Que,colors:e.colors??Y9,theme:e.theme??"light"});gN.getInitialState=({series:e=[],colors:t,theme:a,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:K9({series:e,colors:typeof t=="function"?t(a):t,seriesConfig:i}),dataset:s}});const CL=e=>e.series,Yue=jt(CL,e=>e.defaultizedSeries),Hr=jt(CL,e=>e.seriesConfig),Kue=jt(CL,e=>e.dataset),xa=Ma(Yue,Hr,Kue,function(t,a,s){return Vue(t,a,s)}),Xue={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class X9{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in Xue)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,a,s,r){this.element=t,this.pointerManager=a,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,a){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return a;const s=this.pointerOptions[t];return s?We({},a,s):a}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const a=`${this.name}ChangeState`;this.element.removeEventListener(a,this.handleStateChange)}}class Zue{activeGestures=new Map;registerActiveGesture(t,a){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:a,element:t};s.add(r)}unregisterActiveGesture(t,a){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===a&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const a=this.activeGestures.get(t);return a?Array.from(a).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,a){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===a):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Jue{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(a=>a==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(a))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class eme{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const a=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(a,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=We({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(a),this.pointers.clear()};handlePointerEvent=t=>{const{type:a,pointerId:s}=t;if(a==="pointerdown"||a==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(a==="pointerup"||a==="pointercancel"||a==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(a=>a(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class tme{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Zue;keyboardManager=new Jue;constructor(t){this.pointerManager=new eme({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(a=>{this.addGestureTemplate(a)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}setGestureState(t,a,s){const r=this.elementGestureMap.get(a);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});a.dispatchEvent(i)}registerElement(t,a,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,a,i)}),a}registerSingleGesture(t,a,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(a)||this.elementGestureMap.set(a,new Map);const i=this.elementGestureMap.get(a);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,a));const o=r.clone(s);return o.init(a,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,a){const s=this.elementGestureMap.get(a);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(a),s.size===0&&this.elementGestureMap.delete(a),!0)}unregisterAllGestures(t){const a=this.elementGestureMap.get(t);if(a){for(const[,s]of a)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Wu extends X9{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,a,s,r){super.init(t,a,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,a){const s=this.getEffectiveConfig(a,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,a){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(a===s.target||s.target===this.originalTarget||a===this.originalTarget||"contains"in a&&a.contains(s.target))||"getRootNode"in a&&a.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(a))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function nme(e,t){const a=t.x-e.x,s=t.y-e.y;return Math.sqrt(a*a+s*s)}function zS(e){if(e.length<2)return 0;let t=0,a=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=nme({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),a+=1;return a>0?t/a:0}function Rl(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((a,s)=>(a.x+=s.clientX,a.y+=s.clientY,a),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function hi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Oy=1e-5,Dc=1e-5,x$=.15;function ame(e,t){const a=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=sme(t,e),o=Math.abs(a)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?Oy:x$,c=i?Oy:o==="horizontal"?x$:Oy;return Math.abs(a)>l&&(r.horizontal=a>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function sme(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,a)*180/Math.PI;return r>=-45+Dc&&r<=-22.5+Dc||r>=22.5+Dc&&r<=45+Dc||r>=135+Dc&&r<=157.5+Dc||r>=-157.5+Dc&&r<=-135+Dc}function rme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const a=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return a&&s}const y$=0,ime=e=>e>y$?1:e<-y$?-1:0,Fc=e=>{e.cancelable&&e.preventDefault()};class SL extends Wu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new SL(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,a)=>{if(a.type!=="pointermove"||a.pointerType!=="mouse"&&a.pointerType!=="pen")return;this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r||!this.isWithinPointerCount(s,a.pointerType))return;if(this.shouldPreventGesture(r,a.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,a);return}const i={x:a.clientX,y:a.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,a)),this.emitMoveEvent(r,"ongoing",s,a)};emitMoveEvent(t,a,s,r){const i=this.state.lastPosition||Rl(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=hi(this.name,a),d=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(d)}}class gu extends Wu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new gu(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=We({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancel(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.cancel(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.cancel(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=Rl(i),this.state.lastCentroid=We({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,a.pointerType)){const o=Rl(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,d=Math.sqrt(l*l+c*c),u=ame(this.state.lastCentroid??this.state.startCentroid,o),f=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&d>=this.threshold&&rme(u,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,a,o),this.emitPanEvent(r,"ongoing",i,a,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:f,y:p},this.state.totalDeltaX+=f,this.state.totalDeltaY+=p,this.state.activeDeltaX+=f,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,a,o)),this.state.lastCentroid=o,this.state.lastDirection=u}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;a.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,a,l),this.emitPanEvent(r,"end",i,a,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,a,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,d=c?(r.timeStamp-c.timeStamp)/1e3:0,u=d>0?o/d:0,f=d>0?l/d:0,p=Math.sqrt(u*u+f*f),x=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:u,velocityY:f,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},N=hi(this.name,a),b=new CustomEvent(N,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(b),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,a,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",a,s,this.state.lastCentroid),this.emitPanEvent(r,"end",a,s,this.state.lastCentroid)}this.resetState()}}class _L extends Wu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(We({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new _L(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=We({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,a),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(a.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=zS(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=a.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,a.pointerType)){const o=zS(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,d=c/this.state.lastScale;this.state.totalScale*=d;const u=(a.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/u;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=a.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,a):(this.isActive=!0,this.emitPinchEvent(r,"start",i,a),this.emitPinchEvent(r,"ongoing",i,a))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,a.pointerType))a.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,a),this.emitPinchEvent(r,"end",i,a),this.resetState();else if(o.length>=2){const l=zS(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,a,s,r){const i=Rl(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),d={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:ime(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const u=hi(this.name,a),f=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:d});t.dispatchEvent(f)}}class pN extends Wu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new pN(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=We({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,a)=>{const s=Array.from(t.values());if(a.type==="forceCancel"){this.cancelPress(a.target,s,a);return}const r=this.getTargetElement(a);if(!r)return;if(this.shouldPreventGesture(r,a.pointerType)){this.isActive&&this.cancelPress(r,s,a);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelPress(r,i,a);return}switch(a.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Rl(i),this.state.lastPosition=We({},this.state.startCentroid),this.state.startTime=a.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,a,o),this.emitPressEvent(r,"ongoing",i,a,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Rl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,a)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,a,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,a);break}};emitPressEvent(t,a,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:a,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},d=hi(this.name,a),u=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(u),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,a,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",a,s,r),this.emitPressEvent(t??this.element,"end",a,s,r)}this.resetState()}}class AL extends Wu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new pN({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new gu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new AL(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.pressGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Fc,{passive:!1}),this.element.addEventListener("touchmove",Fc,{passive:!1}),this.element.addEventListener("touchend",Fc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Fc),this.element.removeEventListener("touchmove",Fc),this.element.removeEventListener("touchend",Fc)}}class fp extends Wu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new fp(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,a)=>{const s=Array.from(t.values()),r=this.getTargetElement(a);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,a.pointerType)||!this.isWithinPointerCount(i,a.pointerType)){this.isActive&&this.cancelTap(r,i,a);return}switch(a.type){case"pointerdown":this.isActive||(this.state.startCentroid=Rl(i),this.state.lastPosition=We({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Rl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,a)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,a);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,a,o),this.resetState()):(this.state.lastTapTime=a.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,a);break}};fireTapEvent(t,a,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,a,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:a,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=hi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class TL extends Wu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new fp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new gu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new TL(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,a,s,r){super.init(t,a,s,r),this.tapGesture.init(t,a,s,r),this.panGesture.init(t,a,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(hi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",Fc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",Fc)}}class uv extends X9{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new uv(We({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,a,s,r){super.init(t,a,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const a=this.pointerManager.getPointers()||new Map,s=Array.from(a.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,a){const s=t.length>0?Rl(t):{x:a.clientX,y:a.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:a.target,srcEvent:a,phase:"ongoing",pointers:t,timeStamp:a.timeStamp,deltaX:a.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:a.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:a.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:a.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&a.preventDefault(),this.stopPropagation&&a.stopPropagation();const o=hi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Bm=e=>e.preventDefault(),EL=({svgRef:e})=>{const t=h.useRef(null);h.useEffect(()=>{const r=e.current;t.current||(t.current=new tme({gestures:[new gu({name:"pan",threshold:0,maxPointers:1}),new SL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new fp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new pN({name:"quickPress",duration:50}),new gu({name:"brush",threshold:0,maxPointers:1}),new gu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new _L({name:"zoomPinch",threshold:5}),new uv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new uv({name:"panTurnWheel",sensitivity:.5}),new TL({name:"zoomTapAndDrag",dragThreshold:10}),new AL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new fp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const a=h.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=h.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return h.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Bm),r?.addEventListener("gesturechange",Bm),r?.addEventListener("gestureend",Bm),()=>{r?.removeEventListener("gesturestart",Bm),r?.removeEventListener("gesturechange",Bm),r?.removeEventListener("gestureend",Bm)}},[e]),{instance:{addInteractionListener:a,updateZoomInteractionListeners:s}}};EL.params={};EL.getInitialState=()=>({});const ome=[jL,NL,fN,gN,EL,uN],lme=["apiRef"],cme=e=>{let{plugins:t}=e,a=xn(e.props,lme);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(a).forEach(o=>{const l=a[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let b$=0;function dme(e,t,a){const s=iN(),r=h.useMemo(()=>[...ome,...e],[e]),i=cme({plugins:r,props:t});i.id=i.id??s;const l=h.useRef({}).current,c=mme(t.apiRef),d=h.useRef(null),u=h.useRef(null),f=h.useRef(null);if(f.current==null){b$+=1;const v={cacheKey:{id:b$}};r.forEach(N=>{N.getInitialState&&Object.assign(v,N.getInitialState(i,v,a))}),f.current=new wL(v)}const p=v=>{const N=v({instance:l,params:i,plugins:r,store:f.current,svgRef:u,chartRootRef:d,seriesConfig:a});N.publicAPI&&Object.assign(c.current,N.publicAPI),N.instance&&Object.assign(l,N.instance)};return r.forEach(p),{contextValue:h.useMemo(()=>({store:f.current,publicAPI:c.current,instance:l,svgRef:u,chartRootRef:d}),[l,c])}}function ume(e){return e.current==null&&(e.current={}),e}function mme(e){const t=h.useRef({});return e?ume(e):t}const Z9=h.createContext(null);const J9=()=>{},eq=4,tq=20+2*eq,fme=40+2*eq,hme="hover",My={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:tq,showTooltip:hme}},kL=(e,t,a,s)=>{if(e)return e===!0?We({axisId:t,axisDirection:a},My,{reverse:s??!1}):We({axisId:t,axisDirection:a},My,{reverse:s??!1},e,{slider:We({},My.slider,{size:e.slider?.preview??My.slider.preview?fme:tq},e.slider)})};function nq(e,t){const a={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:mN,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",d=i.position??c,u=kue+(i.label?W9:0),f=i.id??`defaultized-x-axis-${o}`,p=We({offset:a[d]},i,{id:f,position:d,height:i.height??u,zoom:kL(i.zoom,f,"x",i.reverse)});if(d!=="none"&&(a[d]+=p.height,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return We({},p,{data:t.map(x=>x[l])})})}function aq(e,t){const a={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:Aue,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",d=i.position??c,u=Eue+(i.label?W9:0),f=i.id??`defaultized-y-axis-${o}`,p=We({offset:a[d]},i,{id:f,position:d,width:i.width??u,zoom:kL(i.zoom,f,"y",i.reverse)});if(d!=="none"&&(a[d]+=p.width,p.zoom?.slider.enabled&&(a[d]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return We({},p,{data:t.map(x=>x[l])})})}function gme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Vu(e){return e.scaleType==="band"}function Qu(e){return e.scaleType==="point"}function pme(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function xme(e){return e.scaleType==="symlog"}function hx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function LL(e){let t=e,a=e;e.length===1&&(t=(o,l)=>e(o)-l,a=yme(e));function s(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)<0?c=u+1:d=u}return c}function r(o,l,c,d){for(c==null&&(c=0),d==null&&(d=o.length);c<d;){const u=c+d>>>1;a(o[u],l)>0?d=u:c=u+1}return c}function i(o,l,c,d){c==null&&(c=0),d==null&&(d=o.length);const u=s(o,l,c,d-1);return u>c&&t(o[u-1],l)>-t(o[u],l)?u-1:u}return{left:s,center:i,right:r}}function yme(e){return(t,a)=>hx(e(t),a)}function sq(e){return e===null?NaN:+e}function*bme(e,t){for(let a of e)a!=null&&(a=+a)>=a&&(yield a)}const vme=LL(hx),gx=vme.right;LL(sq).center;class mv extends Map{constructor(t,a=jme){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(v$(this,t))}has(t){return super.has(v$(this,t))}set(t,a){return super.set(wme(this,t),a)}delete(t){return super.delete(Nme(this,t))}}function v$({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):a}function wme({_intern:e,_key:t},a){const s=t(a);return e.has(s)?e.get(s):(e.set(s,a),a)}function Nme({_intern:e,_key:t},a){const s=t(a);return e.has(s)&&(a=e.get(a),e.delete(s)),a}function jme(e){return e!==null&&typeof e=="object"?e.valueOf():e}var WT=Math.sqrt(50),VT=Math.sqrt(10),QT=Math.sqrt(2);function YT(e,t,a){var s,r=-1,i,o,l;if(t=+t,e=+e,a=+a,e===t&&a>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=rq(e,t,a))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),d=Math.round(t/l);for(c*l<e&&++c,d*l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),d=Math.round(t*l);for(c/l<e&&++c,d/l>t&&--d,o=new Array(i=d-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function rq(e,t,a){var s=(t-e)/Math.max(0,a),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=WT?10:i>=VT?5:i>=QT?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=WT?10:i>=VT?5:i>=QT?2:1)}function KT(e,t,a){var s=Math.abs(t-e)/Math.max(0,a),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=WT?r*=10:i>=VT?r*=5:i>=QT&&(r*=2),t<e?-r:r}function w$(e,t){let a;for(const s of e)s!=null&&(a<s||a===void 0&&s>=s)&&(a=s);return a}function N$(e,t){let a;for(const s of e)s!=null&&(a>s||a===void 0&&s>=s)&&(a=s);return a}function iq(e,t,a=0,s=e.length-1,r=hx){for(;s>a;){if(s-a>600){const c=s-a+1,d=t-a+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),x=Math.max(a,Math.floor(t-d*f/c+p)),v=Math.min(s,Math.floor(t+(c-d)*f/c+p));iq(e,t,x,v,r)}const i=e[t];let o=a,l=s;for(og(e,a,t),r(e[s],i)>0&&og(e,a,s);o<l;){for(og(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[a],i)===0?og(e,a,l):(++l,og(e,l,s)),l<=t&&(a=l+1),t<=l&&(s=l-1)}return e}function og(e,t,a){const s=e[t];e[t]=e[a],e[a]=s}function Cme(e,t,a){if(e=Float64Array.from(bme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return N$(e);if(t>=1)return w$(e);var s,r=(s-1)*t,i=Math.floor(r),o=w$(iq(e,i).subarray(0,i+1)),l=N$(e.subarray(i+1));return o+(l-o)*(r-i)}}function Sme(e,t,a=sq){if(s=e.length){if((t=+t)<=0||s<2)return+a(e[0],0,e);if(t>=1)return+a(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+a(e[i],i,e),l=+a(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function oq(e,t,a){e=+e,t=+t,a=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+a;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/a))|0,i=new Array(r);++s<r;)i[s]=e+s*a;return i}function _i(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ec(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const XT=Symbol("implicit");function hp(){var e=new mv,t=[],a=[],s=XT;function r(i){let o=e.get(i);if(o===void 0){if(s!==XT)return s;e.set(i,o=t.push(i)-1)}return a[o%a.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new mv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(a=Array.from(i),r):a.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return hp(t,a).unknown(s)},_i.apply(r,arguments),r}function PL(){var e=hp().unknown(void 0),t=e.domain,a=e.range,s=0,r=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,x=r<s,v=x?r:s,N=x?s:r;i=(N-v)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),v+=(N-v-i*(p-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=oq(p).map(function(C){return v+i*C});return a(x?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,f()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return PL(t(),[s,r]).round(l).paddingInner(c).paddingOuter(d).align(u)},_i.apply(f(),arguments)}function lq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lq(t())},e}function _me(){return lq(PL.apply(null,arguments).paddingInner(1))}function DL(e,t,a){e.prototype=t.prototype=a,a.constructor=e}function cq(e,t){var a=Object.create(e.prototype);for(var s in t)a[s]=t[s];return a}function px(){}var gp=.7,fv=1/gp,ff="\\s*([+-]?\\d+)\\s*",pp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ame=/^#([0-9a-f]{3,8})$/,Tme=new RegExp(`^rgb\\(${ff},${ff},${ff}\\)$`),Eme=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),kme=new RegExp(`^rgba\\(${ff},${ff},${ff},${pp}\\)$`),Lme=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${pp}\\)$`),Pme=new RegExp(`^hsl\\(${pp},${Eo},${Eo}\\)$`),Dme=new RegExp(`^hsla\\(${pp},${Eo},${Eo},${pp}\\)$`),j$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DL(px,xp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:C$,formatHex:C$,formatHex8:Ome,formatHsl:Mme,formatRgb:S$,toString:S$});function C$(){return this.rgb().formatHex()}function Ome(){return this.rgb().formatHex8()}function Mme(){return dq(this).formatHsl()}function S$(){return this.rgb().formatRgb()}function xp(e){var t,a;return e=(e+"").trim().toLowerCase(),(t=Ame.exec(e))?(a=t[1].length,t=parseInt(t[1],16),a===6?_$(t):a===3?new lr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):a===8?Iy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):a===4?Iy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tme.exec(e))?new lr(t[1],t[2],t[3],1):(t=Eme.exec(e))?new lr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kme.exec(e))?Iy(t[1],t[2],t[3],t[4]):(t=Lme.exec(e))?Iy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pme.exec(e))?E$(t[1],t[2]/100,t[3]/100,1):(t=Dme.exec(e))?E$(t[1],t[2]/100,t[3]/100,t[4]):j$.hasOwnProperty(e)?_$(j$[e]):e==="transparent"?new lr(NaN,NaN,NaN,0):null}function _$(e){return new lr(e>>16&255,e>>8&255,e&255,1)}function Iy(e,t,a,s){return s<=0&&(e=t=a=NaN),new lr(e,t,a,s)}function Ime(e){return e instanceof px||(e=xp(e)),e?(e=e.rgb(),new lr(e.r,e.g,e.b,e.opacity)):new lr}function ZT(e,t,a,s){return arguments.length===1?Ime(e):new lr(e,t,a,s??1)}function lr(e,t,a,s){this.r=+e,this.g=+t,this.b=+a,this.opacity=+s}DL(lr,ZT,cq(px,{brighter(e){return e=e==null?fv:Math.pow(fv,e),new lr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gp:Math.pow(gp,e),new lr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lr(pu(this.r),pu(this.g),pu(this.b),hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A$,formatHex:A$,formatHex8:$me,formatRgb:T$,toString:T$}));function A$(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}`}function $me(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}${ou((isNaN(this.opacity)?1:this.opacity)*255)}`}function T$(){const e=hv(this.opacity);return`${e===1?"rgb(":"rgba("}${pu(this.r)}, ${pu(this.g)}, ${pu(this.b)}${e===1?")":`, ${e})`}`}function hv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ou(e){return e=pu(e),(e<16?"0":"")+e.toString(16)}function E$(e,t,a,s){return s<=0?e=t=a=NaN:a<=0||a>=1?e=t=NaN:t<=0&&(e=NaN),new zi(e,t,a,s)}function dq(e){if(e instanceof zi)return new zi(e.h,e.s,e.l,e.opacity);if(e instanceof px||(e=xp(e)),!e)return new zi;if(e instanceof zi)return e;e=e.rgb();var t=e.r/255,a=e.g/255,s=e.b/255,r=Math.min(t,a,s),i=Math.max(t,a,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(a-s)/l+(a<s)*6:a===i?o=(s-t)/l+2:o=(t-a)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new zi(o,l,c,e.opacity)}function Rme(e,t,a,s){return arguments.length===1?dq(e):new zi(e,t,a,s??1)}function zi(e,t,a,s){this.h=+e,this.s=+t,this.l=+a,this.opacity=+s}DL(zi,Rme,cq(px,{brighter(e){return e=e==null?fv:Math.pow(fv,e),new zi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gp:Math.pow(gp,e),new zi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,a=this.l,s=a+(a<.5?a:1-a)*t,r=2*a-s;return new lr(US(e>=240?e-240:e+120,r,s),US(e,r,s),US(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new zi(k$(this.h),$y(this.s),$y(this.l),hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hv(this.opacity);return`${e===1?"hsl(":"hsla("}${k$(this.h)}, ${$y(this.s)*100}%, ${$y(this.l)*100}%${e===1?")":`, ${e})`}`}}));function k$(e){return e=(e||0)%360,e<0?e+360:e}function $y(e){return Math.max(0,Math.min(1,e||0))}function US(e,t,a){return(e<60?t+(a-t)*e/60:e<180?a:e<240?t+(a-t)*(240-e)/60:t)*255}const OL=e=>()=>e;function zme(e,t){return function(a){return e+a*t}}function Ume(e,t,a){return e=Math.pow(e,a),t=Math.pow(t,a)-e,a=1/a,function(s){return Math.pow(e+s*t,a)}}function Fme(e){return(e=+e)==1?uq:function(t,a){return a-t?Ume(t,a,e):OL(isNaN(t)?a:t)}}function uq(e,t){var a=t-e;return a?zme(e,a):OL(isNaN(e)?t:e)}const L$=(function e(t){var a=Fme(t);function s(r,i){var o=a((r=ZT(r)).r,(i=ZT(i)).r),l=a(r.g,i.g),c=a(r.b,i.b),d=uq(r.opacity,i.opacity);return function(u){return r.r=o(u),r.g=l(u),r.b=c(u),r.opacity=d(u),r+""}}return s.gamma=e,s})(1);function Bme(e,t){t||(t=[]);var a=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<a;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function Hme(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function qme(e,t){var a=t?t.length:0,s=e?Math.min(a,e.length):0,r=new Array(s),i=new Array(a),o;for(o=0;o<s;++o)r[o]=Qf(e[o],t[o]);for(;o<a;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function ML(e,t){var a=new Date;return e=+e,t=+t,function(s){return a.setTime(e*(1-s)+t*s),a}}function jf(e,t){return e=+e,t=+t,function(a){return e*(1-a)+t*a}}function Gme(e,t){var a={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?a[r]=Qf(e[r],t[r]):s[r]=t[r];return function(i){for(r in a)s[r]=a[r](i);return s}}var JT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,FS=new RegExp(JT.source,"g");function Wme(e){return function(){return e}}function Vme(e){return function(t){return e(t)+""}}function IL(e,t){var a=JT.lastIndex=FS.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=JT.exec(e))&&(r=FS.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:jf(s,r)})),a=FS.lastIndex;return a<t.length&&(i=t.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Vme(c[0].x):Wme(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function Qf(e,t){var a=typeof t,s;return t==null||a==="boolean"?OL(t):(a==="number"?jf:a==="string"?(s=xp(t))?(t=s,L$):IL:t instanceof xp?L$:t instanceof Date?ML:Hme(t)?Bme:Array.isArray(t)?qme:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Gme:jf)(e,t)}function $L(e,t){return e=+e,t=+t,function(a){return Math.round(e*(1-a)+t*a)}}function Qme(e,t){t===void 0&&(t=e,e=Qf);for(var a=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);a<s;)i[a]=e(r,r=t[++a]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Yme(e){return function(){return e}}function gv(e){return+e}var P$=[0,1];function qs(e){return e}function eE(e,t){return(t-=e=+e)?function(a){return(a-e)/t}:Yme(isNaN(t)?NaN:.5)}function Kme(e,t){var a;return e>t&&(a=e,e=t,t=a),function(s){return Math.max(e,Math.min(t,s))}}function Xme(e,t,a){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=eE(r,s),i=a(o,i)):(s=eE(s,r),i=a(i,o)),function(l){return i(s(l))}}function Zme(e,t,a){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=eE(e[o],e[o+1]),i[o]=a(t[o],t[o+1]);return function(l){var c=gx(e,l,1,s)-1;return i[c](r[c](l))}}function xx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xN(){var e=P$,t=P$,a=Qf,s,r,i,o=qs,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==qs&&(o=Kme(e[0],e[p-1])),l=p>2?Zme:Xme,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,a)))(s(o(p)))}return f.invert=function(p){return o(r((d||(d=l(t,e.map(s),jf)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,gv),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),a=$L,u()},f.clamp=function(p){return arguments.length?(o=p?!0:qs,u()):o!==qs},f.interpolate=function(p){return arguments.length?(a=p,u()):a},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,x){return s=p,r=x,u()}}function RL(){return xN()(qs,qs)}function Jme(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pv(e,t){if((a=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var a,s=e.slice(0,a);return[s.length>1?s[0]+s.slice(2):s,+e.slice(a+1)]}function Cf(e){return e=pv(Math.abs(e)),e?e[1]:NaN}function efe(e,t){return function(a,s){for(var r=a.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(a.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function tfe(e){return function(t){return t.replace(/[0-9]/g,function(a){return e[+a]})}}var nfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yp(e){if(!(t=nfe.exec(e)))throw new Error("invalid format: "+e);var t;return new zL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yp.prototype=zL.prototype;function zL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function afe(e){e:for(var t=e.length,a=1,s=-1,r;a<t;++a)switch(e[a]){case".":s=r=a;break;case"0":s===0&&(s=a),r=a;break;default:if(!+e[a])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var mq;function sfe(e,t){var a=pv(e,t);if(!a)return e+"";var s=a[0],r=a[1],i=r-(mq=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+pv(e,Math.max(0,t+i-1))[0]}function D$(e,t){var a=pv(e,t);if(!a)return e+"";var s=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const O$={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Jme,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>D$(e*100,t),r:D$,s:sfe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function M$(e){return e}var I$=Array.prototype.map,$$=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rfe(e){var t=e.grouping===void 0||e.thousands===void 0?M$:efe(I$.call(e.grouping,Number),e.thousands+""),a=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?M$:tfe(I$.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=yp(f);var p=f.fill,x=f.align,v=f.sign,N=f.symbol,b=f.zero,C=f.width,w=f.comma,S=f.precision,A=f.trim,k=f.type;k==="n"?(w=!0,k="g"):O$[k]||(S===void 0&&(S=12),A=!0,k="g"),(b||p==="0"&&x==="=")&&(b=!0,p="0",x="=");var _=N==="$"?a:N==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=N==="$"?s:/[%p]/.test(k)?o:"",T=O$[k],M=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function R(z){var P=_,I=E,q,Q,V;if(k==="c")I=T(z)+I,z="";else{z=+z;var X=z<0||1/z<0;if(z=isNaN(z)?c:T(Math.abs(z),S),A&&(z=afe(z)),X&&+z==0&&v!=="+"&&(X=!1),P=(X?v==="("?v:l:v==="-"||v==="("?"":v)+P,I=(k==="s"?$$[8+mq/3]:"")+I+(X&&v==="("?")":""),M){for(q=-1,Q=z.length;++q<Q;)if(V=z.charCodeAt(q),48>V||V>57){I=(V===46?r+z.slice(q+1):z.slice(q))+I,z=z.slice(0,q);break}}}w&&!b&&(z=t(z,1/0));var W=P.length+z.length+I.length,ne=W<C?new Array(C-W+1).join(p):"";switch(w&&b&&(z=t(ne+z,ne.length?C-I.length:1/0),ne=""),x){case"<":z=P+z+I+ne;break;case"=":z=P+ne+z+I;break;case"^":z=ne.slice(0,W=ne.length>>1)+P+z+I+ne.slice(W);break;default:z=ne+P+z+I;break}return i(z)}return R.toString=function(){return f+""},R}function u(f,p){var x=d((f=yp(f),f.type="f",f)),v=Math.max(-8,Math.min(8,Math.floor(Cf(p)/3)))*3,N=Math.pow(10,-v),b=$$[8+v/3];return function(C){return x(N*C)+b}}return{format:d,formatPrefix:u}}var Ry,UL,fq;ife({thousands:",",grouping:[3],currency:["$",""]});function ife(e){return Ry=rfe(e),UL=Ry.format,fq=Ry.formatPrefix,Ry}function ofe(e){return Math.max(0,-Cf(Math.abs(e)))}function lfe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cf(t)/3)))*3-Cf(Math.abs(e)))}function cfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cf(t)-Cf(e))+1}function hq(e,t,a,s){var r=KT(e,t,a),i;switch(s=yp(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=lfe(r,o))&&(s.precision=i),fq(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=cfe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=ofe(r))&&(s.precision=i-(s.type==="%")*2);break}}return UL(s)}function bd(e){var t=e.domain;return e.ticks=function(a){var s=t();return YT(s[0],s[s.length-1],a??10)},e.tickFormat=function(a,s){var r=t();return hq(r[0],r[r.length-1],a??10,s)},e.nice=function(a){a==null&&(a=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=r,r=i,i=d);u-- >0;){if(d=rq(o,l,a),d===c)return s[r]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function yN(){var e=RL();return e.copy=function(){return xx(e,yN())},_i.apply(e,arguments),bd(e)}function gq(e){var t;function a(s){return s==null||isNaN(s=+s)?t:s}return a.invert=a,a.domain=a.range=function(s){return arguments.length?(e=Array.from(s,gv),a):e.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return gq(e).unknown(t)},e=arguments.length?Array.from(e,gv):[0,1],bd(a)}function pq(e,t){e=e.slice();var a=0,s=e.length-1,r=e[a],i=e[s],o;return i<r&&(o=a,a=s,s=o,o=r,r=i,i=o),e[a]=t.floor(r),e[s]=t.ceil(i),e}function R$(e){return Math.log(e)}function z$(e){return Math.exp(e)}function dfe(e){return-Math.log(-e)}function ufe(e){return-Math.exp(-e)}function mfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ffe(e){return e===10?mfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function hfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function U$(e){return(t,a)=>-e(-t,a)}function FL(e){const t=e(R$,z$),a=t.domain;let s=10,r,i;function o(){return r=hfe(s),i=ffe(s),a()[0]<0?(r=U$(r),i=U$(i),e(dfe,ufe)):e(R$,z$),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(a(l),o()):a()},t.ticks=l=>{const c=a();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=r(d),x=r(u),v,N;const b=l==null?10:+l;let C=[];if(!(s%1)&&x-p<b){if(p=Math.floor(p),x=Math.ceil(x),d>0){for(;p<=x;++p)for(v=1;v<s;++v)if(N=p<0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}}else for(;p<=x;++p)for(v=s-1;v>=1;--v)if(N=p>0?v/i(-p):v*i(p),!(N<d)){if(N>u)break;C.push(N)}C.length*2<b&&(C=YT(d,u,b))}else C=YT(p,x,Math.min(x-p,b)).map(i);return f?C.reverse():C},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=yp(c)).precision==null&&(c.trim=!0),c=UL(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/i(Math.round(r(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>a(pq(a(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function bp(){const e=FL(xN()).domain([1,10]);return e.copy=()=>xx(e,bp()).base(e.base()),_i.apply(e,arguments),e}function F$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function B$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function BL(e){var t=1,a=e(F$(t),B$(t));return a.constant=function(s){return arguments.length?e(F$(t=+s),B$(t)):t},bd(a)}function HL(){var e=BL(xN());return e.copy=function(){return xx(e,HL()).constant(e.constant())},_i.apply(e,arguments)}function H$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function pfe(e){return e<0?-e*e:e*e}function qL(e){var t=e(qs,qs),a=1;function s(){return a===1?e(qs,qs):a===.5?e(gfe,pfe):e(H$(a),H$(1/a))}return t.exponent=function(r){return arguments.length?(a=+r,s()):a},bd(t)}function bN(){var e=qL(xN());return e.copy=function(){return xx(e,bN()).exponent(e.exponent())},_i.apply(e,arguments),e}function xq(){return bN.apply(null,arguments).exponent(.5)}function q$(e){return Math.sign(e)*e*e}function xfe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function yq(){var e=RL(),t=[0,1],a=!1,s;function r(i){var o=xfe(e(i));return isNaN(o)?s:a?Math.round(o):o}return r.invert=function(i){return e.invert(q$(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,gv)).map(q$)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(a=!!i,r):a},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return yq(e.domain(),t).round(a).clamp(e.clamp()).unknown(s)},_i.apply(r,arguments),bd(r)}function bq(){var e=[],t=[],a=[],s;function r(){var o=0,l=Math.max(1,t.length);for(a=new Array(l-1);++o<l;)a[o-1]=Sme(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[gx(a,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?a[l-1]:e[0],l<a.length?a[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(hx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return a.slice()},i.copy=function(){return bq().domain(e).range(t).unknown(s)},_i.apply(i,arguments)}function vq(){var e=0,t=1,a=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[gx(s,c,0,a)]:i}function l(){var c=-1;for(s=new Array(a);++c<a;)s[c]=((c+1)*t-(c-a)*e)/(a+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(a=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var d=r.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=a?[s[a-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return vq().domain([e,t]).range(r).unknown(i)},_i.apply(bd(o),arguments)}function GL(){var e=[.5],t=[0,1],a,s=1;function r(i){return i!=null&&i<=i?t[gx(e,i,0,s)]:a}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(a=i,r):a},r.copy=function(){return GL().domain(e).range(t).unknown(a)},_i.apply(r,arguments)}const BS=new Date,HS=new Date;function rs(e,t,a,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},r.filter=i=>rs(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),a&&(r.count=(i,o)=>(BS.setTime(+i),HS.setTime(+o),e(BS),e(HS),Math.floor(a(BS,HS))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const xv=rs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?rs(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):xv);xv.range;const Al=1e3,mi=Al*60,Tl=mi*60,zl=Tl*24,WL=zl*7,G$=zl*30,qS=zl*365,lu=rs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Al)},(e,t)=>(t-e)/Al,e=>e.getUTCSeconds());lu.range;const VL=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getMinutes());VL.range;const QL=rs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mi)},(e,t)=>(t-e)/mi,e=>e.getUTCMinutes());QL.range;const YL=rs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Al-e.getMinutes()*mi)},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getHours());YL.range;const KL=rs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Tl)},(e,t)=>(t-e)/Tl,e=>e.getUTCHours());KL.range;const yx=rs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mi)/zl,e=>e.getDate()-1);yx.range;const vN=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>e.getUTCDate()-1);vN.range;const wq=rs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zl,e=>Math.floor(e/zl));wq.range;function Yu(e){return rs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,a)=>{t.setDate(t.getDate()+a*7)},(t,a)=>(a-t-(a.getTimezoneOffset()-t.getTimezoneOffset())*mi)/WL)}const wN=Yu(0),yv=Yu(1),yfe=Yu(2),bfe=Yu(3),Sf=Yu(4),vfe=Yu(5),wfe=Yu(6);wN.range;yv.range;yfe.range;bfe.range;Sf.range;vfe.range;wfe.range;function Ku(e){return rs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCDate(t.getUTCDate()+a*7)},(t,a)=>(a-t)/WL)}const NN=Ku(0),bv=Ku(1),Nfe=Ku(2),jfe=Ku(3),_f=Ku(4),Cfe=Ku(5),Sfe=Ku(6);NN.range;bv.range;Nfe.range;jfe.range;_f.range;Cfe.range;Sfe.range;const XL=rs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());XL.range;const ZL=rs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ZL.range;const Ul=rs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ul.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,a)=>{t.setFullYear(t.getFullYear()+a*e)});Ul.range;const Fl=rs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Fl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:rs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,a)=>{t.setUTCFullYear(t.getUTCFullYear()+a*e)});Fl.range;function Nq(e,t,a,s,r,i){const o=[[lu,1,Al],[lu,5,5*Al],[lu,15,15*Al],[lu,30,30*Al],[i,1,mi],[i,5,5*mi],[i,15,15*mi],[i,30,30*mi],[r,1,Tl],[r,3,3*Tl],[r,6,6*Tl],[r,12,12*Tl],[s,1,zl],[s,2,2*zl],[a,1,WL],[t,1,G$],[t,3,3*G$],[e,1,qS]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const x=f&&typeof f.range=="function"?f:c(d,u,f),v=x?x.range(d,+u+1):[];return p?v.reverse():v}function c(d,u,f){const p=Math.abs(u-d)/f,x=LL(([,,b])=>b).right(o,p);if(x===o.length)return e.every(KT(d/qS,u/qS,f));if(x===0)return xv.every(Math.max(KT(d,u,f),1));const[v,N]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return v.every(N)}return[l,c]}const[_fe,Afe]=Nq(Fl,ZL,NN,wq,KL,QL),[Tfe,Efe]=Nq(Ul,XL,wN,yx,YL,VL);function GS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function WS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lg(e,t,a){return{y:e,m:t,d:a,H:0,M:0,S:0,L:0}}function kfe(e){var t=e.dateTime,a=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=cg(r),u=dg(r),f=cg(i),p=dg(i),x=cg(o),v=dg(o),N=cg(l),b=dg(l),C=cg(c),w=dg(c),S={a:X,A:W,b:ne,B:oe,c:null,d:X$,e:X$,f:Jfe,g:che,G:uhe,H:Kfe,I:Xfe,j:Zfe,L:jq,m:ehe,M:the,p:K,q:U,Q:e6,s:t6,S:nhe,u:ahe,U:she,V:rhe,w:ihe,W:ohe,x:null,X:null,y:lhe,Y:dhe,Z:mhe,"%":J$},A={a:ye,A:pe,b:Ne,B:Se,c:null,d:Z$,e:Z$,f:phe,g:_he,G:The,H:fhe,I:hhe,j:ghe,L:Sq,m:xhe,M:yhe,p:Oe,q:ke,Q:e6,s:t6,S:bhe,u:vhe,U:whe,V:Nhe,w:jhe,W:Che,x:null,X:null,y:She,Y:Ahe,Z:Ehe,"%":J$},k={a:R,A:z,b:P,B:I,c:q,d:Y$,e:Y$,f:Wfe,g:Q$,G:V$,H:K$,I:K$,j:Bfe,L:Gfe,m:Ffe,M:Hfe,p:M,q:Ufe,Q:Qfe,s:Yfe,S:qfe,u:Mfe,U:Ife,V:$fe,w:Ofe,W:Rfe,x:Q,X:V,y:Q$,Y:V$,Z:zfe,"%":Vfe};S.x=_(a,S),S.X=_(s,S),S.c=_(t,S),A.x=_(a,A),A.X=_(s,A),A.c=_(t,A);function _(he,qe){return function(Ce){var xe=[],ee=-1,Ee=0,Ae=he.length,Re,et,De;for(Ce instanceof Date||(Ce=new Date(+Ce));++ee<Ae;)he.charCodeAt(ee)===37&&(xe.push(he.slice(Ee,ee)),(et=W$[Re=he.charAt(++ee)])!=null?Re=he.charAt(++ee):et=Re==="e"?" ":"0",(De=qe[Re])&&(Re=De(Ce,et)),xe.push(Re),Ee=ee+1);return xe.push(he.slice(Ee,ee)),xe.join("")}}function E(he,qe){return function(Ce){var xe=lg(1900,void 0,1),ee=T(xe,he,Ce+="",0),Ee,Ae;if(ee!=Ce.length)return null;if("Q"in xe)return new Date(xe.Q);if("s"in xe)return new Date(xe.s*1e3+("L"in xe?xe.L:0));if(qe&&!("Z"in xe)&&(xe.Z=0),"p"in xe&&(xe.H=xe.H%12+xe.p*12),xe.m===void 0&&(xe.m="q"in xe?xe.q:0),"V"in xe){if(xe.V<1||xe.V>53)return null;"w"in xe||(xe.w=1),"Z"in xe?(Ee=WS(lg(xe.y,0,1)),Ae=Ee.getUTCDay(),Ee=Ae>4||Ae===0?bv.ceil(Ee):bv(Ee),Ee=vN.offset(Ee,(xe.V-1)*7),xe.y=Ee.getUTCFullYear(),xe.m=Ee.getUTCMonth(),xe.d=Ee.getUTCDate()+(xe.w+6)%7):(Ee=GS(lg(xe.y,0,1)),Ae=Ee.getDay(),Ee=Ae>4||Ae===0?yv.ceil(Ee):yv(Ee),Ee=yx.offset(Ee,(xe.V-1)*7),xe.y=Ee.getFullYear(),xe.m=Ee.getMonth(),xe.d=Ee.getDate()+(xe.w+6)%7)}else("W"in xe||"U"in xe)&&("w"in xe||(xe.w="u"in xe?xe.u%7:"W"in xe?1:0),Ae="Z"in xe?WS(lg(xe.y,0,1)).getUTCDay():GS(lg(xe.y,0,1)).getDay(),xe.m=0,xe.d="W"in xe?(xe.w+6)%7+xe.W*7-(Ae+5)%7:xe.w+xe.U*7-(Ae+6)%7);return"Z"in xe?(xe.H+=xe.Z/100|0,xe.M+=xe.Z%100,WS(xe)):GS(xe)}}function T(he,qe,Ce,xe){for(var ee=0,Ee=qe.length,Ae=Ce.length,Re,et;ee<Ee;){if(xe>=Ae)return-1;if(Re=qe.charCodeAt(ee++),Re===37){if(Re=qe.charAt(ee++),et=k[Re in W$?qe.charAt(ee++):Re],!et||(xe=et(he,Ce,xe))<0)return-1}else if(Re!=Ce.charCodeAt(xe++))return-1}return xe}function M(he,qe,Ce){var xe=d.exec(qe.slice(Ce));return xe?(he.p=u.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function R(he,qe,Ce){var xe=x.exec(qe.slice(Ce));return xe?(he.w=v.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function z(he,qe,Ce){var xe=f.exec(qe.slice(Ce));return xe?(he.w=p.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function P(he,qe,Ce){var xe=C.exec(qe.slice(Ce));return xe?(he.m=w.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function I(he,qe,Ce){var xe=N.exec(qe.slice(Ce));return xe?(he.m=b.get(xe[0].toLowerCase()),Ce+xe[0].length):-1}function q(he,qe,Ce){return T(he,t,qe,Ce)}function Q(he,qe,Ce){return T(he,a,qe,Ce)}function V(he,qe,Ce){return T(he,s,qe,Ce)}function X(he){return o[he.getDay()]}function W(he){return i[he.getDay()]}function ne(he){return c[he.getMonth()]}function oe(he){return l[he.getMonth()]}function K(he){return r[+(he.getHours()>=12)]}function U(he){return 1+~~(he.getMonth()/3)}function ye(he){return o[he.getUTCDay()]}function pe(he){return i[he.getUTCDay()]}function Ne(he){return c[he.getUTCMonth()]}function Se(he){return l[he.getUTCMonth()]}function Oe(he){return r[+(he.getUTCHours()>=12)]}function ke(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var qe=_(he+="",S);return qe.toString=function(){return he},qe},parse:function(he){var qe=E(he+="",!1);return qe.toString=function(){return he},qe},utcFormat:function(he){var qe=_(he+="",A);return qe.toString=function(){return he},qe},utcParse:function(he){var qe=E(he+="",!0);return qe.toString=function(){return he},qe}}}var W$={"-":"",_:" ",0:"0"},xs=/^\s*\d+/,Lfe=/^%/,Pfe=/[\\^$*+?|[\]().{}]/g;function _n(e,t,a){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<a?new Array(a-i+1).join(t)+r:r)}function Dfe(e){return e.replace(Pfe,"\\$&")}function cg(e){return new RegExp("^(?:"+e.map(Dfe).join("|")+")","i")}function dg(e){return new Map(e.map((t,a)=>[t.toLowerCase(),a]))}function Ofe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.w=+s[0],a+s[0].length):-1}function Mfe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.u=+s[0],a+s[0].length):-1}function Ife(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.U=+s[0],a+s[0].length):-1}function $fe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.V=+s[0],a+s[0].length):-1}function Rfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.W=+s[0],a+s[0].length):-1}function V$(e,t,a){var s=xs.exec(t.slice(a,a+4));return s?(e.y=+s[0],a+s[0].length):-1}function Q$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),a+s[0].length):-1}function zfe(e,t,a){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(a,a+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),a+s[0].length):-1}function Ufe(e,t,a){var s=xs.exec(t.slice(a,a+1));return s?(e.q=s[0]*3-3,a+s[0].length):-1}function Ffe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.m=s[0]-1,a+s[0].length):-1}function Y$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.d=+s[0],a+s[0].length):-1}function Bfe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.m=0,e.d=+s[0],a+s[0].length):-1}function K$(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.H=+s[0],a+s[0].length):-1}function Hfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.M=+s[0],a+s[0].length):-1}function qfe(e,t,a){var s=xs.exec(t.slice(a,a+2));return s?(e.S=+s[0],a+s[0].length):-1}function Gfe(e,t,a){var s=xs.exec(t.slice(a,a+3));return s?(e.L=+s[0],a+s[0].length):-1}function Wfe(e,t,a){var s=xs.exec(t.slice(a,a+6));return s?(e.L=Math.floor(s[0]/1e3),a+s[0].length):-1}function Vfe(e,t,a){var s=Lfe.exec(t.slice(a,a+1));return s?a+s[0].length:-1}function Qfe(e,t,a){var s=xs.exec(t.slice(a));return s?(e.Q=+s[0],a+s[0].length):-1}function Yfe(e,t,a){var s=xs.exec(t.slice(a));return s?(e.s=+s[0],a+s[0].length):-1}function X$(e,t){return _n(e.getDate(),t,2)}function Kfe(e,t){return _n(e.getHours(),t,2)}function Xfe(e,t){return _n(e.getHours()%12||12,t,2)}function Zfe(e,t){return _n(1+yx.count(Ul(e),e),t,3)}function jq(e,t){return _n(e.getMilliseconds(),t,3)}function Jfe(e,t){return jq(e,t)+"000"}function ehe(e,t){return _n(e.getMonth()+1,t,2)}function the(e,t){return _n(e.getMinutes(),t,2)}function nhe(e,t){return _n(e.getSeconds(),t,2)}function ahe(e){var t=e.getDay();return t===0?7:t}function she(e,t){return _n(wN.count(Ul(e)-1,e),t,2)}function Cq(e){var t=e.getDay();return t>=4||t===0?Sf(e):Sf.ceil(e)}function rhe(e,t){return e=Cq(e),_n(Sf.count(Ul(e),e)+(Ul(e).getDay()===4),t,2)}function ihe(e){return e.getDay()}function ohe(e,t){return _n(yv.count(Ul(e)-1,e),t,2)}function lhe(e,t){return _n(e.getFullYear()%100,t,2)}function che(e,t){return e=Cq(e),_n(e.getFullYear()%100,t,2)}function dhe(e,t){return _n(e.getFullYear()%1e4,t,4)}function uhe(e,t){var a=e.getDay();return e=a>=4||a===0?Sf(e):Sf.ceil(e),_n(e.getFullYear()%1e4,t,4)}function mhe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_n(t/60|0,"0",2)+_n(t%60,"0",2)}function Z$(e,t){return _n(e.getUTCDate(),t,2)}function fhe(e,t){return _n(e.getUTCHours(),t,2)}function hhe(e,t){return _n(e.getUTCHours()%12||12,t,2)}function ghe(e,t){return _n(1+vN.count(Fl(e),e),t,3)}function Sq(e,t){return _n(e.getUTCMilliseconds(),t,3)}function phe(e,t){return Sq(e,t)+"000"}function xhe(e,t){return _n(e.getUTCMonth()+1,t,2)}function yhe(e,t){return _n(e.getUTCMinutes(),t,2)}function bhe(e,t){return _n(e.getUTCSeconds(),t,2)}function vhe(e){var t=e.getUTCDay();return t===0?7:t}function whe(e,t){return _n(NN.count(Fl(e)-1,e),t,2)}function _q(e){var t=e.getUTCDay();return t>=4||t===0?_f(e):_f.ceil(e)}function Nhe(e,t){return e=_q(e),_n(_f.count(Fl(e),e)+(Fl(e).getUTCDay()===4),t,2)}function jhe(e){return e.getUTCDay()}function Che(e,t){return _n(bv.count(Fl(e)-1,e),t,2)}function She(e,t){return _n(e.getUTCFullYear()%100,t,2)}function _he(e,t){return e=_q(e),_n(e.getUTCFullYear()%100,t,2)}function Ahe(e,t){return _n(e.getUTCFullYear()%1e4,t,4)}function The(e,t){var a=e.getUTCDay();return e=a>=4||a===0?_f(e):_f.ceil(e),_n(e.getUTCFullYear()%1e4,t,4)}function Ehe(){return"+0000"}function J$(){return"%"}function e6(e){return+e}function t6(e){return Math.floor(+e/1e3)}var Hm,Aq,Tq;khe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function khe(e){return Hm=kfe(e),Aq=Hm.format,Hm.parse,Tq=Hm.utcFormat,Hm.utcParse,Hm}function Lhe(e){return new Date(e)}function Phe(e){return e instanceof Date?+e:+new Date(+e)}function JL(e,t,a,s,r,i,o,l,c,d){var u=RL(),f=u.invert,p=u.domain,x=d(".%L"),v=d(":%S"),N=d("%I:%M"),b=d("%I %p"),C=d("%a %d"),w=d("%b %d"),S=d("%B"),A=d("%Y");function k(_){return(c(_)<_?x:l(_)<_?v:o(_)<_?N:i(_)<_?b:s(_)<_?r(_)<_?C:w:a(_)<_?S:A)(_)}return u.invert=function(_){return new Date(f(_))},u.domain=function(_){return arguments.length?p(Array.from(_,Phe)):p().map(Lhe)},u.ticks=function(_){var E=p();return e(E[0],E[E.length-1],_??10)},u.tickFormat=function(_,E){return E==null?k:d(E)},u.nice=function(_){var E=p();return(!_||typeof _.range!="function")&&(_=t(E[0],E[E.length-1],_??10)),_?p(pq(E,_)):u},u.copy=function(){return xx(u,JL(e,t,a,s,r,i,o,l,c,d))},u}function e4(){return _i.apply(JL(Tfe,Efe,Ul,XL,wN,yx,YL,VL,lu,Aq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Eq(){return _i.apply(JL(_fe,Afe,Fl,ZL,NN,vN,KL,QL,lu,Tq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function jN(){var e=0,t=1,a,s,r,i,o=qs,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(r===0?.5:(f=(i(f)-a)*r,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,a=i(e=+e),s=i(t=+t),r=a===s?0:1/(s-a),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var x,v;return arguments.length?([x,v]=p,o=f(x,v),d):[o(0),o(1)]}}return d.range=u(Qf),d.rangeRound=u($L),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,a=f(e),s=f(t),r=a===s?0:1/(s-a),d}}function vd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function t4(){var e=bd(jN()(qs));return e.copy=function(){return vd(e,t4())},ec.apply(e,arguments)}function kq(){var e=FL(jN()).domain([1,10]);return e.copy=function(){return vd(e,kq()).base(e.base())},ec.apply(e,arguments)}function Lq(){var e=BL(jN());return e.copy=function(){return vd(e,Lq()).constant(e.constant())},ec.apply(e,arguments)}function n4(){var e=qL(jN());return e.copy=function(){return vd(e,n4()).exponent(e.exponent())},ec.apply(e,arguments)}function Dhe(){return n4.apply(null,arguments).exponent(.5)}function Pq(){var e=[],t=qs;function a(s){if(s!=null&&!isNaN(s=+s))return t((gx(e,s,1)-1)/(e.length-1))}return a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(hx),a},a.interpolator=function(s){return arguments.length?(t=s,a):t},a.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},a.quantiles=function(s){return Array.from({length:s+1},(r,i)=>Cme(e,i/s))},a.copy=function(){return Pq(t).domain(e)},ec.apply(a,arguments)}function CN(){var e=0,t=.5,a=1,s=1,r,i,o,l,c,d=qs,u,f=!1,p;function x(N){return isNaN(N=+N)?p:(N=.5+((N=+u(N))-i)*(s*N<s*i?l:c),d(f?Math.max(0,Math.min(1,N)):N))}x.domain=function(N){return arguments.length?([e,t,a]=N,r=u(e=+e),i=u(t=+t),o=u(a=+a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,a]},x.clamp=function(N){return arguments.length?(f=!!N,x):f},x.interpolator=function(N){return arguments.length?(d=N,x):d};function v(N){return function(b){var C,w,S;return arguments.length?([C,w,S]=b,d=Qme(N,[C,w,S]),x):[d(0),d(.5),d(1)]}}return x.range=v(Qf),x.rangeRound=v($L),x.unknown=function(N){return arguments.length?(p=N,x):p},function(N){return u=N,r=N(e),i=N(t),o=N(a),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function Dq(){var e=bd(CN()(qs));return e.copy=function(){return vd(e,Dq())},ec.apply(e,arguments)}function Oq(){var e=FL(CN()).domain([.1,1,10]);return e.copy=function(){return vd(e,Oq()).base(e.base())},ec.apply(e,arguments)}function Mq(){var e=BL(CN());return e.copy=function(){return vd(e,Mq()).constant(e.constant())},ec.apply(e,arguments)}function a4(){var e=qL(CN());return e.copy=function(){return vd(e,a4()).exponent(e.exponent())},ec.apply(e,arguments)}function Ohe(){return a4.apply(null,arguments).exponent(.5)}function Iq(e){return e.type==="piecewise"?GL(e.thresholds,e.colors):t4([e.min??0,e.max??100],e.color)}function Af(e){return e.values?hp(e.values,e.colors).unknown(e.unknownColor??null):hp(e.colors.map((t,a)=>a),e.colors).unknown(e.unknownColor??null)}function hf(e){return e.type==="ordinal"?Af(e):Iq(e)}function $q(e,t,a){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??a))}function Rq(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function s4(e){return Math.floor(Math.abs(e)/50)}function n6(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function SN(...e){let t=new mv(void 0,n6),a=[],s=[],r=0,i=1,o,l,c=!1,d=0,u=0,f=.5;const p=b=>{const C=t.get(b);if(C!==void 0)return s[C%s.length]},x=()=>{const b=a.length,C=i<r,w=C?i:r,S=C?r:i;o=(S-w)/Math.max(1,b-d+u*2),c&&(o=Math.floor(o));const A=w+(S-w-o*(b-d))*f;l=o*(1-d);const k=c?Math.round(A):A;l=c?Math.round(l):l;const E=oq(b).map(T=>k+o*T);return s=C?E.reverse():E,p};p.domain=function(b){if(!arguments.length)return a.slice();a=[],t=new mv(void 0,n6);for(const C of b)t.has(C)||t.set(C,a.push(C)-1);return x()},p.range=function(b){if(!arguments.length)return[r,i];const[C,w]=b;return r=+C,i=+w,x()},p.rangeRound=function(b){const[C,w]=b;return r=+C,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(b){return arguments.length?(c=!!b,x()):c},p.padding=function(b){return arguments.length?(d=Math.min(1,u=+b),x()):d},p.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),x()):d},p.paddingOuter=function(b){return arguments.length?(u=+b,x()):u},p.align=function(b){return arguments.length?(f=Math.max(0,Math.min(1,b)),x()):f},p.copy=()=>SN(a,[r,i]).round(c).paddingInner(d).paddingOuter(u).align(f);const[v,N]=e;return e.length>1?(p.domain(v),p.range(N)):v?p.range(v):x(),p}function zq(...e){const t=SN(...e).paddingInner(1),a=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=a();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function Uq(...e){const t=HL(...e),a=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=Mhe(t);return t.ticks=o=>{const l=a(o),c=t.constant();let d=0,u=0,f=0;l.forEach(x=>{x>-c&&x<c&&(u+=1),x<=-c&&(d+=1),x>=c&&(f+=1)});const p=[];if(d>0&&p.push(...s.ticks(d)),u>0){const x=r.ticks(u);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(f>0){const x=i.ticks(f);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[d,u]=t.domain(),f=u-d,p=s.domain(),x=p[1]-p[0],N=(f===0?0:x/f)*o,b=r.domain(),C=b[1]-b[0],S=(f===0?0:C/f)*o,A=i.domain(),k=A[1]-A[0],E=(f===0?0:k/f)*o,T=s.tickFormat(N,l),M=r.tickFormat(S,l),R=i.tickFormat(E,l);return z=>(z.valueOf()<=-c?T:z.valueOf()>=c?R:M)(z)},t.copy=()=>Uq(t.domain(),t.range()).constant(t.constant()),t}function Mhe(e){const t=e.constant(),a=e.domain(),s=[a[0],Math.min(a[1],-t)],r=bp(s,e.range()),i=[Math.max(a[0],-t),Math.min(a[1],t)],o=yN(i,e.range()),l=[Math.max(a[0],t),a[1]],c=bp(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function _N(e,t,a){switch(e){case"log":return bp(t,a);case"pow":return bN(t,a);case"sqrt":return xq(t,a);case"time":return e4(t,a);case"utc":return Eq(t,a);case"symlog":return Uq(t,a);default:return yN(t,a)}}const tE=e=>e?.[0]instanceof Date;function nE(e,t,a){const s=e4(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(a)(r):`${r.toLocaleString()}`}let a6,s6;class Ihe{types=new Set;constructor(){if(a6)throw new Error("You can only create one instance!");a6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class $he{types=new Set;constructor(){if(s6)throw new Error("You can only create one instance!");s6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const AN=new Ihe;AN.addType("bar");AN.addType("line");AN.addType("scatter");const Fq=new $he;Fq.addType("radar");function TN(e){return AN.getTypes().has(e)}function vv(e){return TN(e.type)}const Rhe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(TN).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function ys(e){return e.bandwidth!==void 0}function zhe(e){return ys(e)&&e.paddingOuter!==void 0}function Uhe(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a?[s[1],s[0]]:s}const Fhe=.2,Bhe=.1;function Bq({scales:e,drawingArea:t,formattedSeries:a,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=Rhe(i,r,a,s[0].id),d={};return s.forEach(u=>{const f=u,p=e[f.id],x=o?.get(f.id),v=x?[x.start,x.end]:[0,100],N=Uhe(t,i,f.reverse??!1),b=!f.ignoreTooltip&&c.has(f.id),C=f.data??[];if(ys(p)){const _=i==="y"?[N[1],N[0]]:N;if(zhe(p)&&Vu(f)){const E=f.categoryGapRatio??Fhe,T=f.barGapRatio??Bhe;d[f.id]=We({offset:0,height:0,categoryGapRatio:E,barGapRatio:T,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Af(We({values:f.data},f.colorMap)):hf(f.colorMap))})}if(Qu(f)&&(d[f.id]=We({offset:0,height:0,triggerTooltip:b},f,{data:C,scale:p,tickNumber:f.data.length,colorScale:f.colorMap&&(f.colorMap.type==="ordinal"?Af(We({values:f.data},f.colorMap)):hf(f.colorMap))})),tE(f.data)){const E=nE(f.data,_,f.tickNumber);d[f.id].valueFormatter=f.valueFormatter??E}return}if(f.scaleType==="band"||f.scaleType==="point")return;const w=l[f.id].tickNumber,S=f,A=S.scaleType??"linear",k=Rq(w,v);d[f.id]=We({offset:0,height:0,triggerTooltip:b},S,{data:C,scaleType:A,scale:p,tickNumber:k,colorScale:S.colorMap&&Iq(S.colorMap),valueFormatter:f.valueFormatter??gme(k,_N(A,N.map(_=>p.invert(_)),N))})}),{axis:d,axisIds:s.map(({id:u})=>u)}}function Hhe(e){return e!=null}function qhe(e,t,a,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(a*r/100);return function(c,d){return(c[s]??e?.[d])==null?!0:d>=i&&d<o}}function Ghe(e,t,a,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+a*(o-i)/100;return function(u,f){const p=u[s]??r?.[f];return p==null?!0:p>=l&&p<=c}}const Whe=e=>({currentAxisId:t,seriesXAxisId:a,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===a?s:a)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,a].filter(d=>d!==t).map(d=>e[d??""]).filter(Hhe).every(d=>d(i,o)),r6=e=>(t=[])=>t.reduce((a,s)=>{const{zoom:r,id:i,reverse:o}=s,l=kL(r,i,e,o);return l&&(a[i]=l),a},{}),Vhe=.2;function Hq(e,t,a){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return a.reverse?[s[1],s[0]]:s}function qq(e,t){const a=[0,1];if(Vu(e)){const i=e.categoryGapRatio??Vhe;return SN(t,a).paddingInner(i).paddingOuter(i/2)}if(Qu(e))return zq(t,a);const s=e.scaleType??"linear",r=_N(s,t,a);return xme(e)&&e.constant!=null&&r.constant(e.constant),r}const Gq=(e,t)=>{const a=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*a/s,i=e[1]+(100-t[1])*a/s;return[r,i]},Qhe=(e,t,a,s,r,i,o)=>{const l=a==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function EN(e,t,a,s,r,i){const o=Object.keys(a).filter(TN);let l=[1/0,-1/0];for(const c of o){const[d,u]=Qhe(c,e,t,a,s,r,i);l=[Math.min(l[0],d),Math.max(l[1],u)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Yhe=(e,t,a,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&a===0)return"strict"}return"nice"};function Wq(e,t,a){return _N(e??"linear",t,[0,1]).nice(a).domain()}function Vq(e,t,a,s,[r,i],o,l){const c=Yq(e,t,a,s,l);let d=Kq(e,r,i);if(typeof c=="function"){const{min:f,max:p}=c(r.valueOf(),i.valueOf());d[0]=f,d[1]=p}const u=$q(e,d,o);return c==="nice"&&(d=Wq(e.scaleType,d,u)),d=["min"in e?e.min??d[0]:d[0],"max"in e?e.max??d[1]:d[1]],{domain:d,tickNumber:u}}function Qq(e,t,a,s,[r,i],o,l){const c=Yq(e,t,a,s,l);let d=Kq(e,r,i);if(typeof c=="function"){const{min:u,max:f}=c(r.valueOf(),i.valueOf());d[0]=u,d[1]=f}return c==="nice"&&(d=Wq(e.scaleType,d,o)),[e.min??d[0],e.max??d[1]]}function Yq(e,t,a,s,r){return r?Yhe(e,t,a,s):e.domainLimit??"nice"}function Kq(e,t,a){let s=t,r=a;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class Khe{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,a){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(a>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=a}pop(){if(this.length===0)return;const t=this.ids,a=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=a[r];let l=0;const c=r>>1;for(;l<c;){const d=(l<<1)+1,u=d+1,f=d+(+(u<r)&+(a[u]<a[d]));if(a[f]>=o)break;t[l]=t[f],a[l]=a[f],l=f}t[l]=i,a[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const i6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],VS=3;class r4{static from(t,a=0){if(a%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,a+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==VS)throw new Error(`Got v${i} data when expected v${VS}.`);const o=i6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,a+2,1),[c]=new Uint32Array(t,a+4,1);return new r4(c,l,o,void 0,t,a)}constructor(t,a=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+a,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const d=i6.indexOf(s),u=c*4*s.BYTES_PER_ELEMENT;if(d<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+u,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const f=this.data=new r(8+u+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(f,8,c*4),this._indices=new this.IndexArrayType(f,8+u,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(f,0,2).set([251,(VS<<4)+d]),new Uint16Array(f,2,1)[0]=a,new Uint32Array(f,4,1)[0]=t}this._queue=new Khe}add(t,a,s=t,r=a){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=a,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),a<this.minY&&(this.minY=a),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const a=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],d=t[l++],u=t[l++],f=t[l++],p=Math.floor(i*((c+u)/2-this.minX)/a),x=Math.floor(i*((d+f)/2-this.minY)/s);r[o]=Jhe(p,x)}aE(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const d=l;let u=t[l++],f=t[l++],p=t[l++],x=t[l++];for(let v=1;v<this.nodeSize&&l<c;v++)u=Math.min(u,t[l++]),f=Math.min(f,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=d,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=p,t[this._pos++]=x}}}search(t,a,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const d=Math.min(o+this.nodeSize*4,o6(o,this._levelBounds));for(let u=o;u<d;u+=4){if(s<this._boxes[u]||r<this._boxes[u+1]||t>this._boxes[u+2]||a>this._boxes[u+3])continue;const f=this._indices[u>>2]|0;o>=this.numItems*4?l.push(f):(i===void 0||i(f))&&(c.push(f),c.push(this._boxes[u]),c.push(this._boxes[u+1]))}o=l.pop()}return c}neighbors(t,a,s=1/0,r=1/0,i,o=Xhe){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,d=[];e:for(;l!==void 0;){const u=Math.min(l+this.nodeSize*4,o6(l,this._levelBounds));for(let f=l;f<u;f+=4){const p=this._indices[f>>2]|0,x=this._boxes[f],v=this._boxes[f+1],N=this._boxes[f+2],b=this._boxes[f+3],C=t<x?x-t:t>N?t-N:0,w=a<v?v-a:a>b?a-b:0,S=o(C,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(d.push(c.pop()>>1),d.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),d}}function Xhe(e,t){return e*e+t*t}function o6(e,t){let a=0,s=t.length-1;for(;a<s;){const r=a+s>>1;t[r]>e?s=r:a=r+1}return t[a]}function aE(e,t,a,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let d=c;const u=Math.max(o,l);c>u?d=u:u===o?d=Math.max(l,c):u===l&&(d=Math.max(o,c));let f=s-1,p=r+1;for(;;){do f++;while(e[f]<d);do p--;while(e[p]>d);if(f>=p)break;Zhe(e,t,a,f,p)}aE(e,t,a,s,p,i),aE(e,t,a,p+1,r,i)}function Zhe(e,t,a,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],d=t[o+1],u=t[o+2],f=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=d,t[l+2]=u,t[l+3]=f;const p=a[s];a[s]=a[r],a[r]=p}function Jhe(e,t){let a=e^t,s=65535^a,r=65535^(e|t),i=e&(t^65535),o=a|s>>1,l=a>>1^a,c=r>>1^s&i>>1^r,d=a&r>>1^i>>1^i;a=o,s=l,r=c,i=d,o=a&a>>2^s&s>>2,l=a&s>>2^s&(a^s)>>2,c^=a&r>>2^s&i>>2,d^=s&r>>2^(a^s)&i>>2,a=o,s=l,r=c,i=d,o=a&a>>4^s&s>>4,l=a&s>>4^s&(a^s)>>4,c^=a&r>>4^s&i>>4,d^=s&r>>4^(a^s)&i>>4,a=o,s=l,r=c,i=d,c^=a&r>>8^s&i>>8,d^=s&r>>8^(a^s)&i>>8,a=c^c>>1,s=d^d>>1;let u=e^t,f=s|65535^(u|a);return u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,f=(f|f<<1)&1431655765,(f<<1|u)>>>0}const ege=e=>{const t=new Map;return e.forEach(a=>{t.set(a.axisId,a)}),t},Xq=e=>e.zoom,tge=jt(qo,Jl,(e,t)=>e?.some(a=>!!a.zoom)||t?.some(a=>!!a.zoom)||!1),Zq=jt(Xq,e=>e?.isInteracting),wd=Ma(Xq,function(t){return t?.zoomData&&ege(t?.zoomData)}),l6=jt(wd,(e,t)=>e?.get(t)),bx=Ma(qo,Jl,function(t,a){return We({},r6("x")(t),r6("y")(a))});jt(bx,(e,t)=>e[t]);const nge=jt(gr,function(t){return s4(t.width)}),age=jt(gr,function(t){return s4(t.height)}),i4=Ma(qo,xa,Hr,hN,nge,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Vu(u)||Qu(u)){l[u.id]={domain:u.data};return}const f=EN(u,"x",s,d,a);l[u.id]=Vq(u,"x",d,a,f,i,r)}),{axes:t,domains:l}}),o4=Ma(Jl,xa,Hr,hN,age,function(t,a,s,r,i){const l={};return t?.forEach((c,d)=>{const u=c;if(Vu(u)||Qu(u)){l[u.id]={domain:u.data};return}const f=EN(u,"y",s,d,a);l[u.id]=Vq(u,"y",d,a,f,i,r)}),{axes:t,domains:l}}),Jq=Ma(wd,bx,i4,o4,function(t,a,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!a)return;let l=!1;const c={},d=[...s??[],...i??[]];for(let u=0;u<d.length;u+=1){const f=d[u];if(!a[f.id]||a[f.id].filterMode!=="discard")continue;const p=t.get(f.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=u<(s?.length??0)?"x":"y";if(f.scaleType==="band"||f.scaleType==="point")c[f.id]=qhe(f.data,p.start,p.end,x);else{const{domain:v}=x==="x"?r[f.id]:o[f.id];c[f.id]=Ghe(v,p.start,p.end,x,f.data)}l=!0}if(l)return Whe(c)}),sge=Ma(xa,Hr,wd,bx,Jq,hN,i4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Vu(u)||Qu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=EN(u,"x",a,f,t,N);d[u.id]=Qq(u,"x",f,t,C,b,o)}),d}),rge=Ma(xa,Hr,wd,bx,Jq,hN,o4,function(t,a,s,r,i,o,{axes:l,domains:c}){const d={};return l?.forEach((u,f)=>{const p=c[u.id].domain;if(Vu(u)||Qu(u)){d[u.id]=p;return}const x=s?.get(u.id),v=r?.[u.id],N=x===void 0&&!v?i:void 0;if(!N){d[u.id]=p;return}const b=c[u.id].tickNumber,C=EN(u,"y",a,f,t,N);d[u.id]=Qq(u,"y",f,t,C,b,o)}),d}),eG=Ma(qo,sge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=qq(i,o)}),s}),tG=Ma(Jl,rge,function(t,a){const s={};return t?.forEach(r=>{const i=r,o=a[i.id];s[i.id]=qq(i,o)}),s}),ige=Ma(qo,eG,gr,wd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=Hq(s,"x",l),f=a[l.id].copy(),p=Gq(u,d);f.range(p),i[l.id]=f}),i}),oge=Ma(Jl,tG,gr,wd,function(t,a,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),d=c?[c.start,c.end]:[0,100],u=Hq(s,"y",l),f=a[l.id].copy(),p=ys(f)?u.reverse():u,x=Gq(p,d);f.range(x),i[l.id]=f}),i}),Ys=Ma(gr,xa,Hr,wd,i4,ige,function(t,a,s,r,{axes:i,domains:o},l){return Bq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Ks=Ma(gr,xa,Hr,wd,o4,oge,function(t,a,s,r,{axes:i,domains:o},l){return Bq({scales:l,drawingArea:t,formattedSeries:a,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});jt(Ys,Ks,(e,t,a)=>e?.axis[a]??t?.axis[a]);jt(qo,Jl,(e,t,a)=>{const s=e?.find(r=>r.id===a)??t?.find(r=>r.id===a)??null;if(s)return s});const lge=jt(qo,e=>e[0].id),cge=jt(Jl,e=>e[0].id),dge=new Map,uge=()=>dge,mge=Ma(xa,eG,tG,lge,cge,function(t,a,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:d,xAxisId:u=r,yAxisId:f=i}=o.series[c],p=new r4(d.length),x=a[u],v=s[f];for(const N of d)p.add(x(N.x),v(N.y));p.finish(),l.set(c,p)}),l});function qm(e){return e instanceof Date?e.getTime():e}function Tf(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a)){const o=a.invert(t);if(s===void 0)return-1;const l=qm(o);return s?.findIndex((d,u)=>{const f=qm(d);return f>l&&(u===0||Math.abs(l-f)<=Math.abs(l-qm(s[u-1])))||f<=l&&(u===s.length-1||Math.abs(qm(o)-f)<Math.abs(qm(o)-qm(s[u+1])))})}const i=a.bandwidth()===0?Math.floor((t-Math.min(...a.range())+a.step()/2)/a.step()):Math.floor((t-Math.min(...a.range()))/a.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function c6(e,t,a,s){if(!ys(e)){if(s===null){const r=e.invert(a);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function vp(e,t){const a=e.createSVGPoint();return a.x=t.clientX,a.y=t.clientY,a.matrixTransform(e.getScreenCTM().inverse())}const fge=Object.is;function nG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let a=0,s=0;for(const r in e)if(a+=1,!fge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return a===s}const vx=({store:e})=>{const t=hs(function(){e.set("interaction",We({},e.state.interaction,{pointer:null,item:null}))}),a=hs(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",We({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",We({},e.state.interaction,{item:null}))}),s=hs(function(o,l){nG(e.state.interaction.item,o)||e.set("interaction",We({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=hs(function(o){e.set("interaction",We({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:a,setPointerCoordinate:r}}};vx.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});vx.params={};const kN=e=>e.interaction,hge=jt(kN,e=>e!==void 0),aG=jt(kN,e=>e?.item??null),sG=jt(kN,e=>e?.pointer??null),wx=jt(sG,e=>e&&e.x),Nx=jt(sG,e=>e&&e.y),gge=jt(aG,e=>e!==null),jx=jt(kN,e=>e?.lastUpdate),pge=new Set(["bar","line","scatter","pie"]);function rG(e){return pge.has(e)}function iG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):-1,o=s.filter(rG);for(let u=0;u<o.length;u+=1){const f=(r+u)%o.length,p=e[o[f]],x=u===0?i+1:0;for(let v=x;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[v]}}const l=r,c=e[o[l]],d=i;for(let u=0;u<d;u+=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function oG(e,t,a){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&a!==void 0&&e[t]&&e[t].series[a]?e[t].seriesOrder.indexOf(a):1,o=s.filter(rG);for(let u=0;u<o.length;u+=1){const f=(o.length+r-u)%o.length,p=e[o[f]],x=u===0?i+1:p.seriesOrder.length;for(let v=1;v<x;v+=1){const N=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[N]].data.length>0)return{type:o[f],seriesId:p.seriesOrder[N]}}}const l=r,c=e[o[l]],d=c.seriesOrder;for(let u=d.length-1;u>i;u-=1)if(c.series[c.seriesOrder[u]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[u]};return null}function lG(e,t,a){if(t==="sankey")return!1;const s=e[t]?.series[a]?.data;return s&&s.length>0}function xge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!lG(t,a,s)){const i=iG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function yge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};if(a===void 0||a==="sankey"||s===void 0||!lG(t,a,s)){const i=oG(t,a,s);if(i===null)return null;a=i.type,s=i.seriesId}const r=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function bge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=iG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function vge(e){const t=xa(e);let{type:a,seriesId:s}=e.keyboardNavigation.item??{};const r=oG(t,a,s);if(r===null)return null;a=r.type,s=r.seriesId;const i=t[a].series[s].data.length;return{type:a,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const LN=({params:e,store:t,svgRef:a})=>{const s=hs(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",We({},t.state.keyboardNavigation,{item:null}))});return h.useEffect(()=>{const r=a.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=xge(t.state);break;case"ArrowLeft":l=yge(t.state);break;case"ArrowDown":{l=vge(t.state);break}case"ArrowUp":{l=bge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(We({},t.state.highlight&&{highlight:We({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:We({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:We({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[a,s,e.enableKeyboardNavigation,t]),ss(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",We({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};LN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});LN.params={enableKeyboardNavigation:!0};const Xu=e=>e.keyboardNavigation;jt(Xu,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const wge=jt(Xu,e=>e?.item!=null),PN=jt(Xu,e=>e?.item?.type),DN=jt(Xu,e=>e?.item?.seriesId),ON=jt(Xu,e=>e?.item?.dataIndex),Nge=jt(Xu,e=>!!e?.enableKeyboardNavigation),cG=e=>(t,a,s,r,i)=>{if(t===void 0||a===void 0||s===void 0)return;const o=i[t]?.series[a];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},jge=jt(PN,DN,ON,Ys,xa,cG("x")),Cge=jt(PN,DN,ON,Ks,xa,cG("y")),dG=jt(Xu,function(t){if(t?.item==null)return null;const{type:a,seriesId:s}=t.item;return a===void 0||s===void 0?null:t.item}),Sge=jt(PN,DN,ON,function(t,a,s){return a!==void 0&&s!==void 0}),uG=jt(jx,aG,dG,(e,t,a)=>e==="keyboard"?a:t??null),_ge=jt(jx,gge,Sge,(e,t,a)=>e==="keyboard"?a:t),Age=jt(uG,gr,Hr,Ys,Ks,xa,function(t,a,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,d="top"){if(!t)return null;const u=c[t.type]?.series[t.seriesId];if(u){const f={},p=vv(u)?u.xAxisId??i[0]:void 0,x=vv(u)?u.yAxisId??l[0]:void 0;return p!==void 0&&(f.x=r[p]),x!==void 0&&(f.y=o[x]),s[u.type].tooltipItemPositionGetter?.({series:c,drawingArea:a,axesConfig:f,identifier:t,placement:d})??null}return null});function gf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!gf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!gf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const a=Object.keys(e),s=a.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,a[r]))return!1;for(let r=0;r<s;r+=1){const i=a[r];if(!gf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function sE(e,t,a=t.axisIds[0]){return Array.isArray(a)?a.map(s=>Tf(t.axis[s],e)):Tf(t.axis[a],e)}const mG=(e,t,a)=>{if(e===null)return null;const s=sE(e,t,a);return s===-1?null:s},l4=jt(wx,Ys,mG),c4=jt(Nx,Ks,mG),Tge=jt(wx,Nx,Ys,Ks,(e,t,a,s)=>[...e===null?[]:a.axisIds.map(r=>({axisId:r,dataIndex:sE(e,a,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:sE(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function fG(e,t,a,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return c6(o.scale,o.data,e,a[i])}):c6(t.axis[s].scale,t.axis[s].data,e,a)}const Ege=jt(wx,Ys,l4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:fG(e,t,a,s)),kge=jt(Nx,Ks,c4,(e,t,a,s)=>e===null||t.axisIds.length===0?null:fG(e,t,a,s)),hG=[],gG=cN({memoizeOptions:{resultEqualityCheck:gf}})(wx,Ys,(e,t)=>e===null?hG:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Tf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),pG=cN({memoizeOptions:{resultEqualityCheck:gf}})(Nx,Ks,(e,t)=>e===null?hG:t.axisIds.filter(a=>t.axis[a].triggerTooltip).map(a=>({axisId:a,dataIndex:Tf(t.axis[a],e)})).filter(({dataIndex:a})=>a>=0)),Lge=jt(gG,pG,(e,t)=>e.length>0||t.length>0);function Pge(e){return e.setPointerCoordinate!==void 0}const Yf=({params:e,store:t,seriesConfig:a,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,d=Ft(t,gr),u=Ft(t,xa),f=Ft(t,hge),{axis:p,axisIds:x}=Ft(t,Ys),{axis:v,axisIds:N}=Ft(t,Ks);J9({controlled:e.highlightedAxis}),ss(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const b=h.useRef(!0);h.useEffect(()=>{if(b.current){b.current=!1;return}t.set("cartesianAxis",{x:nq(i,l),y:aq(o,l)})},[a,d,i,o,l,t]);const C=x[0],w=N[0];wue(t,Tge,(A,k)=>{if(c&&!Object.is(A,k)){if(A.length!==k.length){c(k);return}A?.some(({axisId:_,dataIndex:E},T)=>k[T].axisId!==_||k[T].dataIndex!==E)&&c(k)}});const S=Pge(r);return h.useEffect(()=>{const A=s.current;if(!f||!S||!A||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",P=>{P.detail.activeGestures.pan||r.cleanInteraction()}),_=r.addInteractionListener("panEnd",P=>{P.detail.activeGestures.move||r.cleanInteraction()}),E=r.addInteractionListener("quickPressEnd",P=>{!P.detail.activeGestures.move&&!P.detail.activeGestures.pan&&r.cleanInteraction()}),T=P=>{const I=P.detail.srcEvent,q=P.detail.target,Q=vp(A,I);if(P.detail.srcEvent.buttons>=1&&q?.hasPointerCapture(P.detail.srcEvent.pointerId)&&!q?.closest("[data-charts-zoom-slider]")&&q?.releasePointerCapture(P.detail.srcEvent.pointerId),!r.isPointInside(Q.x,Q.y,q)){r.cleanInteraction?.();return}r.setPointerCoordinate(Q)},M=r.addInteractionListener("move",T),R=r.addInteractionListener("pan",T),z=r.addInteractionListener("quickPress",T);return()=>{M.cleanup(),k.cleanup(),R.cleanup(),_.cleanup(),z.cleanup(),E.cleanup()}},[s,t,p,C,v,w,r,e.disableAxisListener,f,S]),h.useEffect(()=>{const A=s.current,k=e.onAxisClick;if(A===null||!k)return()=>{};const _=r.addInteractionListener("tap",E=>{let T=null,M=!1;const R=vp(A,E.detail.srcEvent),z=Tf(p[C],R.x);M=z!==-1,T=M?z:Tf(v[w],R.y);const P=M?x[0]:N[0];if(T==null||T===-1)return;const I=(M?p:v)[P].data[T],q={};Object.keys(u).filter(Q=>["bar","line"].includes(Q)).forEach(Q=>{u[Q]?.seriesOrder.forEach(V=>{const X=u[Q].series[V],W=X.xAxisId,ne=X.yAxisId,oe=M?W:ne;(oe===void 0||oe===P)&&(q[V]=X.data[T])})}),k(E.detail.srcEvent,{dataIndex:T,axisValue:I,seriesValues:q})});return()=>{_.cleanup()}},[e.onAxisClick,u,s,p,x,v,N,C,w,r]),{}};Yf.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};Yf.getDefaultizedParams=({params:e})=>We({},e,{colors:e.colors??Y9,theme:e.theme??"light",defaultizedXAxis:nq(e.xAxis,e.dataset),defaultizedYAxis:aq(e.yAxis,e.dataset)});Yf.getInitialState=e=>We({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Go=e=>e.brush;jt(Go,e=>e?.start);jt(Go,e=>e?.current);const Dge=jt(Go,e=>e?.start?.x??null),Oge=jt(Go,e=>e?.start?.y??null),Mge=jt(Go,e=>e?.current?.x??null),Ige=jt(Go,e=>e?.current?.y??null);jt(Dge,Oge,Mge,Ige,(e,t,a,s)=>e===null||t===null||a===null||s===null?null:{start:{x:e,y:t},current:{x:a,y:s}});const $ge=jt(xa,e=>{let t=!1,a=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(a=!0)}),a?"xy":t?"y":"x"}),Rge=jt(bx,function(t){let a=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(a=!0)}),a&&s?"xy":s?"y":a?"x":null});jt($ge,Rge,(e,t)=>t??e);const xG=jt(Go,e=>e?.enabled||e?.isZoomBrushEnabled),yG=jt(xG,Go,(e,t)=>e&&t?.start!==null&&t?.current!==null),MN=jt(Go,yG,(e,t)=>t&&e?.preventHighlight),zge=jt(Go,yG,(e,t)=>t&&e?.preventTooltip),Cx=({store:e,svgRef:t,instance:a,params:s})=>{const r=Ft(e,xG);ss(()=>{e.set("brush",We({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=hs(function(d){e.set("brush",We({},e.state.brush,{start:e.state.brush.start??d,current:d}))}),o=hs(function(){e.set("brush",We({},e.state.brush,{start:null,current:null}))}),l=hs(function(d){e.state.brush.isZoomBrushEnabled!==d&&e.set("brush",We({},e.state.brush,{isZoomBrushEnabled:d}))});return h.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const d=N=>{if(N.detail.target?.closest("[data-charts-zoom-slider]"))return;const b=vp(c,{clientX:N.detail.initialCentroid.x,clientY:N.detail.initialCentroid.y});i(b)},u=N=>{const b=vp(c,{clientX:N.detail.centroid.x,clientY:N.detail.centroid.y});i(b)},f=a.addInteractionListener("brushStart",d),p=a.addInteractionListener("brush",u),x=a.addInteractionListener("brushCancel",o),v=a.addInteractionListener("brushEnd",o);return()=>{f.cleanup(),p.cleanup(),v.cleanup(),x.cleanup()}},[t,a,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Cx.params={brushConfig:!0};Cx.getDefaultizedParams=({params:e})=>We({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Cx.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const Kf=e=>e.controlledCartesianAxisHighlight,bG=(e,t,a,s)=>s?[]:a!==void 0?a.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],vG=Ma(l4,Ys,Kf,MN,bG);Ma(c4,Ks,Kf,MN,bG);const wG=(e,t,a,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(u=>We({},u,{value:a.axis[u.axisId]?.data?.[u.dataIndex]})).filter(({value:u})=>u!==void 0);const l=t!==null&&{axisId:a.axisIds[0],dataIndex:e,value:t},c=r&&a.axis[r.axisId]?.data?.[r.dataIndex],d=r&&c!=null&&We({},r,{value:c});if(i==="pointer"){if(l)return[l];if(d)return[d]}if(i==="keyboard"){if(d)return[d];if(l)return[l]}return[]},Uge=jt(l4,Ege,Ys,Kf,jge,jx,MN,wG),Fge=jt(c4,kge,Ks,Kf,Cge,jx,MN,wG),NG=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);jt(Kf,Ys,NG);jt(Kf,Ks,NG);function d6(e,t){return e.id!==void 0?e:We({id:t},e)}function u6(e){return e.colorMap?We({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Af(We({values:e.data},e.colorMap)):hf(e.colorMap.type==="continuous"?We({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function jG(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const a={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){a[l]=u6(d6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");a[l]=u6(d6(We({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:a,axisIds:s}}const Sx=({params:e,store:t})=>{const{zAxis:a,dataset:s}=e,r=h.useRef(!0);return h.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",jG(a,s))},[a,s,t]),{}};Sx.params={zAxis:!0,dataset:!0};Sx.getInitialState=e=>({zAxis:jG(e.zAxis,e.dataset)});const Bge=e=>e,Hge=jt(Bge,e=>e.zAxis),_x=({store:e,params:t})=>{J9({controlled:t.highlightedItem}),ss(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",We({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const a=hs(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=hs(r=>{const i=e.getSnapshot().highlight;i.isControlled||nG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:a,setHighlight:s}}};_x.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});_x.params={highlightedItem:!0,onHighlightChange:!0};function wv(e){let t=1/0,a=-1/0;for(const s of e??[])s<t&&(t=s),s>a&&(a=s);return[t,a]}const m6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},CG=e=>{const{axis:t,getFilters:a,isDefaultAxis:s}=e,r=a?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return wv(i??[])},SG=e=>t=>{const{series:a,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(a).filter(o=>{const l=e==="x"?a[o].xAxisId:a[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=a[l],d=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:a[l].xAxisId,seriesYAxisId:a[l].yAxisId}),[u,f]=c?.reduce((p,x,v)=>d&&(!d(m6(x[0],e),v)||!d(m6(x[1],e),v))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(u,o[0]),Math.max(f,o[1])]},[1/0,-1/0])},qge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?SG("x")(e):CG(e),Gge=e=>Object.keys(e.series).some(a=>e.series[a].layout==="horizontal")?CG(e):SG("y")(e);function Nn(e){return function(){return e}}const _G=Math.cos,Nv=Math.sin,Zi=Math.sqrt,f6=1e-12,jv=Math.PI,xu=2*jv,rE=Math.PI,iE=2*rE,Yd=1e-6,Wge=iE-Yd;function AG(e){this._+=e[0];for(let t=1,a=e.length;t<a;++t)this._+=arguments[t]+e[t]}function Vge(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return AG;const a=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*a)/a+s[r]}}class Qge{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?AG:Vge(t)}moveTo(t,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,a){this._append`L${this._x1=+t},${this._y1=+a}`}quadraticCurveTo(t,a,s,r){this._append`Q${+t},${+a},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,a,s,r,i,o){this._append`C${+t},${+a},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,a,s,r,i){if(t=+t,a=+a,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=r-a,u=o-t,f=l-a,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=a}`;else if(p>Yd)if(!(Math.abs(f*c-d*u)>Yd)||!i)this._append`L${this._x1=t},${this._y1=a}`;else{let x=s-o,v=r-l,N=c*c+d*d,b=x*x+v*v,C=Math.sqrt(N),w=Math.sqrt(p),S=i*Math.tan((rE-Math.acos((N+p-b)/(2*C*w)))/2),A=S/w,k=S/C;Math.abs(A-1)>Yd&&this._append`L${t+A*u},${a+A*f}`,this._append`A${i},${i},0,0,${+(f*x>u*v)},${this._x1=t+k*c},${this._y1=a+k*d}`}}arc(t,a,s,r,i,o){if(t=+t,a=+a,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),d=t+l,u=a+c,f=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Yd||Math.abs(this._y1-u)>Yd)&&this._append`L${d},${u}`,s&&(p<0&&(p=p%iE+iE),p>Wge?this._append`A${s},${s},0,1,${f},${t-l},${a-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:p>Yd&&this._append`A${s},${s},0,${+(p>=rE)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=a+s*Math.sin(i)}`)}rect(t,a,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+a}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function d4(e){let t=3;return e.digits=function(a){if(!arguments.length)return t;if(a==null)t=null;else{const s=Math.floor(a);if(!(s>=0))throw new RangeError(`invalid digits: ${a}`);t=s}return e},()=>new Qge(t)}function IN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TG(e){this._context=e}TG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ax(e){return new TG(e)}function EG(e){return e[0]}function kG(e){return e[1]}function u4(e,t){var a=Nn(!0),s=null,r=Ax,i=null,o=d4(l);e=typeof e=="function"?e:e===void 0?EG:Nn(e),t=typeof t=="function"?t:t===void 0?kG:Nn(t);function l(c){var d,u=(c=IN(c)).length,f,p=!1,x;for(s==null&&(i=r(x=o())),d=0;d<=u;++d)!(d<u&&a(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nn(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nn(+c),l):t},l.defined=function(c){return arguments.length?(a=typeof c=="function"?c:Nn(!!c),l):a},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Mg(e,t,a){var s=null,r=Nn(!0),i=null,o=Ax,l=null,c=d4(d);e=typeof e=="function"?e:e===void 0?EG:Nn(+e),t=typeof t=="function"?t:Nn(t===void 0?0:+t),a=typeof a=="function"?a:a===void 0?kG:Nn(+a);function d(f){var p,x,v,N=(f=IN(f)).length,b,C=!1,w,S=new Array(N),A=new Array(N);for(i==null&&(l=o(w=c())),p=0;p<=N;++p){if(!(p<N&&r(b=f[p],p,f))===C)if(C=!C)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=x;--v)l.point(S[v],A[v]);l.lineEnd(),l.areaEnd()}C&&(S[p]=+e(b,p,f),A[p]=+t(b,p,f),l.point(s?+s(b,p,f):S[p],a?+a(b,p,f):A[p]))}if(w)return l=null,w+""||null}function u(){return u4().defined(r).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Nn(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:Nn(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),a=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Nn(+f),d):t},d.y1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:Nn(+f),d):a},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(a)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(r=typeof f=="function"?f:Nn(!!f),d):r},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}function Yge(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Kge(e){return e}function Xge(){var e=Kge,t=Yge,a=null,s=Nn(0),r=Nn(xu),i=Nn(0);function o(l){var c,d=(l=IN(l)).length,u,f,p=0,x=new Array(d),v=new Array(d),N=+s.apply(this,arguments),b=Math.min(xu,Math.max(-xu,r.apply(this,arguments)-N)),C,w=Math.min(Math.abs(b)/d,i.apply(this,arguments)),S=w*(b<0?-1:1),A;for(c=0;c<d;++c)(A=v[x[c]=c]=+e(l[c],c,l))>0&&(p+=A);for(t!=null?x.sort(function(k,_){return t(v[k],v[_])}):a!=null&&x.sort(function(k,_){return a(l[k],l[_])}),c=0,f=p?(b-d*S)/p:0;c<d;++c,N=C)u=x[c],A=v[u],C=N+(A>0?A*f:0)+S,v[u]={data:l[u],index:c,value:A,startAngle:N,endAngle:C,padAngle:w};return v}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:Nn(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,a=null,o):t},o.sort=function(l){return arguments.length?(a=l,t=null,o):a},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Nn(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Nn(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:Nn(+l),o):i},o}class LG{constructor(t,a){this._context=t,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,a){switch(t=+t,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,a):this._context.moveTo(t,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,a,t,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,t,this._y0,t,a);break}}this._x0=t,this._y0=a}}function PG(e){return new LG(e,!0)}function DG(e){return new LG(e,!1)}const $N={draw(e,t){const a=Zi(t/jv);e.moveTo(a,0),e.arc(0,0,a,0,xu)}},OG={draw(e,t){const a=Zi(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},MG=Zi(1/3),Zge=MG*2,IG={draw(e,t){const a=Zi(t/Zge),s=a*MG;e.moveTo(0,-a),e.lineTo(s,0),e.lineTo(0,a),e.lineTo(-s,0),e.closePath()}},$G={draw(e,t){const a=Zi(t),s=-a/2;e.rect(s,s,a,a)}},Jge=.8908130915292852,RG=Nv(jv/10)/Nv(7*jv/10),epe=Nv(xu/10)*RG,tpe=-_G(xu/10)*RG,zG={draw(e,t){const a=Zi(t*Jge),s=epe*a,r=tpe*a;e.moveTo(0,-a),e.lineTo(s,r);for(let i=1;i<5;++i){const o=xu*i/5,l=_G(o),c=Nv(o);e.lineTo(c*a,-l*a),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},QS=Zi(3),UG={draw(e,t){const a=-Zi(t/(QS*3));e.moveTo(0,a*2),e.lineTo(-QS*a,-a),e.lineTo(QS*a,-a),e.closePath()}},ti=-.5,ni=Zi(3)/2,oE=1/Zi(12),npe=(oE/2+1)*3,FG={draw(e,t){const a=Zi(t/npe),s=a/2,r=a*oE,i=s,o=a*oE+a,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ti*s-ni*r,ni*s+ti*r),e.lineTo(ti*i-ni*o,ni*i+ti*o),e.lineTo(ti*l-ni*c,ni*l+ti*c),e.lineTo(ti*s+ni*r,ti*r-ni*s),e.lineTo(ti*i+ni*o,ti*o-ni*i),e.lineTo(ti*l+ni*c,ti*c-ni*l),e.closePath()}},BG=[$N,OG,IG,$G,zG,UG,FG];function m4(e,t){let a=null,s=d4(r);e=typeof e=="function"?e:Nn(e||$N),t=typeof t=="function"?t:Nn(t===void 0?64:+t);function r(){let i;if(a||(a=i=s()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),i)return a=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:Nn(+i),r):t},r.context=function(i){return arguments.length?(a=i??null,r):a},r}function Cv(){}function Sv(e,t,a){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+a)/6)}function HG(e){this._context=e}HG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ape(e){return new HG(e)}function qG(e){this._context=e}qG.prototype={areaStart:Cv,areaEnd:Cv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function spe(e){return new qG(e)}function GG(e){this._context=e}GG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(a,s):this._context.moveTo(a,s);break;case 3:this._point=4;default:Sv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rpe(e){return new GG(e)}function h6(e,t,a){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-a),e._x2,e._y2)}function f4(e,t){this._context=e,this._k=(1-t)/6}f4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:h6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:h6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function a(s){return new f4(s,t)}return a.tension=function(s){return e(+s)},a})(0);function ipe(e,t,a){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>f6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>f6){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*d+e._x1*e._l23_2a-t*e._l12_2a)/u,o=(o*d+e._y1*e._l23_2a-a*e._l12_2a)/u}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function WG(e,t){this._context=e,this._alpha=t}WG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var a=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(a*a+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ipe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ope=(function e(t){function a(s){return t?new WG(s,t):new f4(s,0)}return a.alpha=function(s){return e(+s)},a})(.5);function VG(e){this._context=e}VG.prototype={areaStart:Cv,areaEnd:Cv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lpe(e){return new VG(e)}function g6(e){return e<0?-1:1}function p6(e,t,a){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(a-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(g6(i)+g6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function x6(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function YS(e,t,a){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*a,i,o)}function _v(e){this._context=e}_v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:YS(this,this._t0,x6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,YS(this,x6(this,a=p6(this,e,t)),a);break;default:YS(this,this._t0,a=p6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};function QG(e){this._context=new YG(e)}(QG.prototype=Object.create(_v.prototype)).point=function(e,t){_v.prototype.point.call(this,t,e)};function YG(e){this._context=e}YG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,a,s,r,i){this._context.bezierCurveTo(t,e,s,a,i,r)}};function lE(e){return new _v(e)}function KG(e){return new QG(e)}function XG(e){this._context=e}XG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,a=e.length;if(a)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),a===2)this._context.lineTo(e[1],t[1]);else for(var s=y6(e),r=y6(t),i=0,o=1;o<a;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function y6(e){var t,a=e.length-1,s,r=new Array(a),i=new Array(a),o=new Array(a);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<a-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[a-1]=2,i[a-1]=7,o[a-1]=8*e[a-1]+e[a],t=1;t<a;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[a-1]=o[a-1]/i[a-1],t=a-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[a-1]=(e[a]+r[a-1])/2,t=0;t<a-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function ZG(e){return new XG(e)}function RN(e,t){this._context=e,this._t=t}RN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var a=this._x*(1-this._t)+e*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,t)}break}}this._x=e,this._y=t}};function JG(e){return new RN(e,.5)}function eW(e){return new RN(e,0)}function tW(e){return new RN(e,1)}function ld(e,t){if((o=e.length)>1)for(var a=1,s,r,i=e[t[0]],o,l=i.length;a<o;++a)for(r=i,i=e[t[a]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function ku(e){for(var t=e.length,a=new Array(t);--t>=0;)a[t]=t;return a}function cpe(e,t){return e[t]}function dpe(e){const t=[];return t.key=e,t}function h4(){var e=Nn([]),t=ku,a=ld,s=cpe;function r(i){var o=Array.from(e.apply(this,arguments),dpe),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,i)]).data=f;for(l=0,u=IN(t(o));l<c;++l)o[u[l]].index=l;return a(o,u),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Nn(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:Nn(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?ku:typeof i=="function"?i:Nn(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(a=i??ld,r):a},r}function nW(e,t){if((s=e.length)>0){for(var a,s,r=0,i=e[0].length,o;r<i;++r){for(o=a=0;a<s;++a)o+=e[a][r][1]||0;if(o)for(a=0;a<s;++a)e[a][r][1]/=o}ld(e,t)}}function upe(e,t){if((c=e.length)>0)for(var a,s=0,r,i,o,l,c,d=e[t[0]].length;s<d;++s)for(o=l=0,a=0;a<c;++a)(i=(r=e[t[a]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function aW(e,t){if((r=e.length)>0){for(var a=0,s=e[t[0]],r,i=s.length;a<i;++a){for(var o=0,l=0;o<r;++o)l+=e[o][a][1]||0;s[a][1]+=s[a][0]=-l/2}ld(e,t)}}function sW(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var a=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,p=u[s-1][1]||0,x=(f-p)/2,v=0;v<l;++v){var N=e[t[v]],b=N[s][1]||0,C=N[s-1][1]||0;x+=b-C}c+=f,d+=x*f}r[s-1][1]+=r[s-1][0]=a,c&&(a-=d/c)}r[s-1][1]+=r[s-1][0]=a,ld(e,t)}}function rW(e){var t=e.map(mpe);return ku(e).sort(function(a,s){return t[a]-t[s]})}function mpe(e){for(var t=-1,a=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,a=t);return a}function iW(e){var t=e.map(oW);return ku(e).sort(function(a,s){return t[a]-t[s]})}function oW(e){for(var t=0,a=-1,s=e.length,r;++a<s;)(r=+e[a][1])&&(t+=r);return t}function fpe(e){return iW(e).reverse()}function hpe(e){var t=e.length,a,s,r=e.map(oW),i=rW(e),o=0,l=0,c=[],d=[];for(a=0;a<t;++a)s=i[a],o<l?(o+=r[s],c.push(s)):(l+=r[s],d.push(s));return d.reverse().concat(c)}function gpe(e){return ku(e).reverse()}const KS={appearance:rW,ascending:iW,descending:fpe,insideOut:hpe,none:ku,reverse:gpe},XS={expand:nW,diverging:upe,none:ld,silhouette:aW,wiggle:sW},lW=e=>{const{series:t,seriesOrder:a,defaultStrategy:s}=e,r=[],i={};return a.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:d}=t[o];l===void 0?r.push({ids:[o],stackingOrder:KS.none,stackingOffset:XS.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:KS[c??s?.stackOrder??"none"],stackingOffset:XS[d??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=KS[c]),d!==void 0&&(r[i[l]].stackingOffset=XS[d]))}),r},ppe=e=>e==null?"":e.toLocaleString(),xpe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=lW(e),i=t??[];a.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:d,stackingOrder:u}=l,f=h4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=We({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??ppe},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:o}};function Wi(e,t){return typeof e=="function"?e(t):e}const ype=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Wi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])};function g4(e){return e.colorGetter?e.colorGetter:()=>e.color}const bpe=(e,t,a)=>{const s=e.layout==="vertical",r=s?t?.colorScale:a?.colorScale,i=s?a?.colorScale:t?.colorScale,o=s?t?.data:a?.data,l=g4(e);return i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d);return u===null?l({value:d,dataIndex:c}):u}:r&&o?c=>{if(c===void 0)return e.color;const d=o[c],u=d===null?l({value:d,dataIndex:c}):r(d);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},vpe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Wi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},wpe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Qn(){const e=qr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ai(){const e=Qn();return Ft(e,gr)}function zN(){const e=Qn();return Ft(e,que)}function p4(e){return Fq.getTypes().has(e)}const Npe=(e,t,a,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[d,u]=l?.({series:c,axis:a,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[f,p]=e;return[Math.min(d,f),Math.max(u,p)]},jpe=(e,t,a,s,r)=>{const o=Object.keys(a).filter(p4).reduce((l,c)=>Npe(l,c,e,t,a,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Qc=(e,t)=>e===void 0?t:Math.PI*e/180,Cpe=(e,t,a,s)=>{const r=new Set;return Object.keys(t).filter(p4).forEach(o=>{const l=a[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:d,direction:u})=>{u===e&&r.add(d??s)})}),r};function Spe(e,t,a){if(t==="rotation"){if(a.scaleType==="point"){const s=[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/a.data.length),s}return[Qc(a.startAngle,0),Qc(a.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const _pe=.2,Ape=.1;function cW({drawingArea:e,formattedSeries:t,axis:a,seriesConfig:s,axisDirection:r}){if(a===void 0)return{axis:{},axisIds:[]};const i=Cpe(r,s,t,a[0].id),o={};return a.forEach((l,c)=>{const d=l,u=Spe(e,r,d),[f,p]=jpe(d,r,s,c,t),x=!d.ignoreTooltip&&i.has(d.id),v=d.data??[];if(Vu(d)){const M=d.categoryGapRatio??_pe,R=d.barGapRatio??Ape;if(o[d.id]=We({offset:0,categoryGapRatio:M,barGapRatio:R,triggerTooltip:x},d,{data:v,scale:SN(d.data,u).paddingInner(M).paddingOuter(M/2),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Af(We({values:d.data},d.colorMap)):hf(d.colorMap))}),tE(d.data)){const z=nE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??z}}if(Qu(d)&&(o[d.id]=We({offset:0,triggerTooltip:x},d,{data:v,scale:zq(d.data,u),tickNumber:d.data.length,colorScale:d.colorMap&&(d.colorMap.type==="ordinal"?Af(We({values:d.data},d.colorMap)):hf(d.colorMap))}),tE(d.data))){const M=nE(d.data,u,d.tickNumber);o[d.id].valueFormatter=d.valueFormatter??M}if(!pme(d))return;const N=d.scaleType??"linear",b=d.domainLimit??"nice",C=[d.min??f,d.max??p];if(typeof b=="function"){const{min:M,max:R}=b(f,p);C[0]=M,C[1]=R}const w=$q(d,C,s4(Math.abs(u[1]-u[0]))),S=Rq(w,u),A=_N(N,C,u),k=b==="nice"?A.nice(w):A,[_,E]=k.domain(),T=[d.min??_,d.max??E];o[d.id]=We({offset:0,triggerTooltip:x},d,{data:v,scaleType:N,scale:k.domain(T),tickNumber:S,colorScale:d.colorMap&&hf(d.colorMap)})}),{axis:o,axisIds:a.map(({id:l})=>l)}}const dW=e=>e.polarAxis,uW=jt(dW,e=>e?.rotation),Tpe=jt(dW,e=>e?.radius),Zu=jt(uW,gr,xa,Hr,(e,t,a,s)=>cW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"rotation"}));jt(Tpe,gr,xa,Hr,(e,t,a,s)=>cW({drawingArea:t,formattedSeries:a,axis:e,seriesConfig:s,axisDirection:"radius"}));const Epe=jt(gr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),kpe=e=>(t,a)=>Math.atan2(t-e.cx,e.cy-a);function UN(e){return(e%360+360)%360}const ZS=2*Math.PI;function Lpe(e){return(e%ZS+ZS)%ZS}function b6(e,t){const{scale:a,data:s,reverse:r}=e;if(!ys(a))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=Lpe(t-Math.min(...a.range())),o=a.bandwidth()===0?Math.floor((i+a.step()/2)/a.step())%s.length:Math.floor(i/a.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function pr(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Ys);return{xAxis:t,xAxisIds:a}}function xr(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Ks);return{yAxis:t,yAxisIds:a}}function Ppe(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Ys),r=s[0];return a[r]}function Dpe(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Ks),r=s[0];return a[r]}function mW(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Zu);return{rotationAxis:t,rotationAxisIds:a}}function Ope(e){const t=Qn(),{axis:a,axisIds:s}=Ft(t,Zu),r=s[0];return a[r]}function Xf(e){if(ys(e))return a=>(e(a)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?a=>a===t[0]?e(a):NaN:a=>e(a)}function x4(){const e=Qn(),{axis:t,axisIds:a}=Ft(e,Hge)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:a}}function y4(){const e=qr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function FN(){const e=Qn();return Ft(e,xa)}const Mpe=jt(xa,(e,t)=>e[t]);Ma(xa,(e,t,a)=>{if(!a||Array.isArray(a)&&a.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(a))return e[t]?.series?.[a];const s=[];for(const r of a){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const Ipe=e=>{const t=Qn();return Ft(t,Mpe,e)};function Tx(){return Ipe("line")}function $pe(){return!1}function fW(e,t){return!e||!t?$pe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function Rpe(){return!1}function hW(e,t){return!e||!t?Rpe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function b4(e,t,a){return e?.highlight==="series"&&t?.seriesId===a}function zpe(e,t,a){return b4(e,t,a)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===a}function gW(e,t,a){return e?.highlight==="item"&&t?.seriesId===a?t.dataIndex:null}function Upe(e,t,a){return b4(e,t,a)||gW(e,t,a)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===a?t.dataIndex:null}const Fpe=e=>e.highlight,Bpe=jt(xa,e=>{const t=new Map;return Object.keys(e).forEach(a=>{const s=e[a];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),tc=Ma(Fpe,dG,function(t,a){return t.isControlled||t.lastUpdate==="pointer"?t.item:a}),Nd=jt(Bpe,tc,function(t,a){if(!a)return null;const s=t.get(a.seriesId);return s===void 0?null:s}),Hpe=jt(Nd,tc,fW),qpe=jt(Nd,tc,hW),Gpe=jt(Nd,tc,function(t,a,s){return fW(t,a)(s)});jt(Nd,tc,b4);jt(Nd,tc,zpe);jt(Nd,tc,Upe);jt(Nd,tc,gW);const Wpe=jt(Nd,tc,function(t,a,s){return hW(t,a)(s)});function pW(e){const t=Qn(),a=Ft(t,Gpe,e),s=Ft(t,Wpe,e);return{isHighlighted:a,isFaded:!a&&s}}function Vpe(){const e=Qn(),t=Ft(e,Hpe),a=Ft(e,qpe);return{isHighlighted:t,isFaded:a}}function Qpe(e,t){return Object.keys(e).flatMap(a=>{const s=t[a].legendGetter;return s===void 0?[]:s(e[a])})}function Ype(){const e=FN(),t=Qn(),a=Ft(t,Hr);return{items:Qpe(e,a)}}function v4(){const e=zN();return h.useCallback(t=>`${e}-gradient-${t}`,[e])}function Kpe(){const e=zN();return h.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var JS,v6;function Xpe(){if(v6)return JS;v6=1;var e=4,t=.001,a=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(N,b){return 1-3*b+3*N}function c(N,b){return 3*b-6*N}function d(N){return 3*N}function u(N,b,C){return((l(b,C)*N+c(b,C))*N+d(b))*N}function f(N,b,C){return 3*l(b,C)*N*N+2*c(b,C)*N+d(b)}function p(N,b,C,w,S){var A,k,_=0;do k=b+(C-b)/2,A=u(k,w,S)-N,A>0?C=k:b=k;while(Math.abs(A)>a&&++_<s);return k}function x(N,b,C,w){for(var S=0;S<e;++S){var A=f(b,C,w);if(A===0)return b;var k=u(b,C,w)-N;b-=k/A}return b}function v(N){return N}return JS=function(b,C,w,S){if(!(0<=b&&b<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===C&&w===S)return v;for(var A=o?new Float32Array(r):new Array(r),k=0;k<r;++k)A[k]=u(k*i,b,w);function _(E){for(var T=0,M=1,R=r-1;M!==R&&A[M]<=E;++M)T+=i;--M;var z=(E-A[M])/(A[M+1]-A[M]),P=T+z*i,I=f(P,b,w);return I>=t?x(E,P,b,w):I===0?P:p(E,T,T+i,b,w)}return function(T){return T===0?0:T===1?1:u(_(T),C,S)}},JS}var Zpe=Xpe();const Jpe=Ki(Zpe),BN=300,w4="cubic-bezier(0.66, 0, 0.34, 1)",exe=Jpe(.66,0,.34,1);var Ef=0,Ig=0,ug=0,xW=1e3,Av,$g,Tv=0,Lu=0,HN=0,wp=typeof performance=="object"&&performance.now?performance:Date,yW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function N4(){return Lu||(yW(txe),Lu=wp.now()+HN)}function txe(){Lu=0}function Ev(){this._call=this._time=this._next=null}Ev.prototype=bW.prototype={constructor:Ev,restart:function(e,t,a){if(typeof e!="function")throw new TypeError("callback is not a function");a=(a==null?N4():+a)+(t==null?0:+t),!this._next&&$g!==this&&($g?$g._next=this:Av=this,$g=this),this._call=e,this._time=a,cE()},stop:function(){this._call&&(this._call=null,this._time=1/0,cE())}};function bW(e,t,a){var s=new Ev;return s.restart(e,t,a),s}function nxe(){N4(),++Ef;for(var e=Av,t;e;)(t=Lu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ef}function w6(){Lu=(Tv=wp.now())+HN,Ef=Ig=0;try{nxe()}finally{Ef=0,sxe(),Lu=0}}function axe(){var e=wp.now(),t=e-Tv;t>xW&&(HN-=t,Tv=e)}function sxe(){for(var e,t=Av,a,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(a=t._next,t._next=null,t=e?e._next=a:Av=a);$g=e,cE(s)}function cE(e){if(!Ef){Ig&&(Ig=clearTimeout(Ig));var t=e-Lu;t>24?(e<1/0&&(Ig=setTimeout(w6,e-wp.now()-HN)),ug&&(ug=clearInterval(ug))):(ug||(Tv=wp.now(),ug=setInterval(axe,xW)),Ef=1,yW(w6))}}function rxe(e,t,a){var s=new Ev;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,a),s}class ixe{elapsed=0;timer=null;constructor(t,a,s){this.duration=t,this.easingFn=a,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const a=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(a);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=N4()-this.elapsed;return this.timer=bW(a=>this.timerCallback(a),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),rxe(()=>this.timerCallback(this.duration)),this}}function oxe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r+=1){const i=a[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function lxe(e,{createInterpolator:t,applyProps:a,skip:s,initialProps:r=e}){const i=h.useRef(r),o=h.useRef(null),l=h.useRef(null),c=h.useRef(e);ss(()=>{c.current=e},[e]),ss(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const d=h.useCallback(f=>{const p=i.current,x=t(p,e);o.current=new ixe(BN,exe,v=>{const N=x(v);i.current=N,a(f,N)})},[a,t,e]);return[h.useCallback(f=>{if(f===null){o.current?.stop();return}const p=l.current;if(p===f){if(oxe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=f,(o.current||!s)&&d(f)},[d,e,s]),i.current]}function vW(e,{createInterpolator:t,transformProps:a,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=a??(f=>f),[c,d]=lxe(e,{initialProps:i,createInterpolator:t,applyProps:(f,p)=>s(f,l(p)),skip:r}),u=a(r?e:d);return We({},u,{ref:Io(c,o)})}function cxe(e){return vW({d:e.d},{createInterpolator:(t,a)=>{const s=IL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function dxe(e){return vW({d:e.d},{createInterpolator:(t,a)=>{const s=IL(t.d,a.d);return r=>({d:s(r)})},applyProps:(t,{d:a})=>t.setAttribute("d",a),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function uxe(){return qr().chartRootRef}const mxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},fxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:We({},e)}}}}),wW={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${mxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},hxe=wW;fxe(wW);const gxe=["localeText"],dE=h.createContext(null);function pxe(e){const{localeText:t}=e,a=xn(e,gxe),{localeText:s}=h.useContext(dE)??{localeText:void 0},r=Si({props:a,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=h.useMemo(()=>We({},hxe,o,s,t),[o,s,t]),c=h.useMemo(()=>({localeText:l}),[l]);return n.jsx(dE.Provider,{value:c,children:i})}const NW=()=>{const e=h.useContext(dE);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function xxe({bandWidth:e,numberOfGroups:t,gapRatio:a}){if(a===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*a),r=a*s;return{barWidth:s,offset:r}}function yxe(e,t,a){const s=e&&t>0,r=!e&&t<0,i=s||r;return a?!i:i}function bxe(e){const{verticalLayout:t,xAxisConfig:a,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?a:s,d=(t?s.reverse:a.reverse)??!1,{barWidth:u,offset:f}=xxe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(u+f),x=a.scale,v=s.scale,N=c.data[i],b=r.data[i];if(b==null)return null;const w=r.stackedData[i].map(E=>t?v(E):x(E)),S=Math.round(Math.min(...w)),A=Math.round(Math.max(...w)),k=b===0?0:Math.max(r.minBarSize,A-S),_=yxe(t,b,d)?A-k:S;return{x:t?x(N)+p:_,y:t?_:v(N)+p,height:t?k:u,width:t?u:k}}const vxe=e=>{const{series:t,identifier:a,axesConfig:s,placement:r}=e;if(!a||a.dataIndex===void 0)return null;const i=t.bar?.series[a.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=bxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:a.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(f=>f.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:d,height:u}=o;switch(r){case"right":return{x:l+d,y:c+u/2};case"bottom":return{x:l+d/2,y:c+u};case"left":return{x:l,y:c+u/2};default:return{x:l+d/2,y:c}}},wxe=(e,t,a)=>We({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Nxe={seriesProcessor:xpe,colorProcessor:bpe,legendGetter:ype,tooltipGetter:vpe,tooltipItemPositionGetter:vxe,axisTooltipGetter:wpe,xExtremumGetter:qge,yExtremumGetter:Gge,getSeriesWithDefaultValues:wxe},jxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},Cxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===a.id||c===void 0&&s))continue;const d=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),u=t[l].data??[];for(let f=0;f<u.length;f+=1){const p=u[f];d&&!d(p,f)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},Sxe=({series:e,seriesOrder:t},a)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(d=>typeof o?.[d]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(d=>`"${d}"`).join(", ")} are missing.`].join(`
`));const c=o?a?.map(d=>({x:d[o.x]??null,y:d[o.y]??null,z:o.z&&d[o.z],id:o.id&&d[o.id]}))??[]:i.data??[];return[r,We({labelMarkType:"circle",markerSize:4},i,{preview:We({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(d=>d&&`(${d.x}, ${d.y})`)})]})),seriesOrder:t}),_xe=(e,t,a,s)=>{const r=s?.colorScale,i=a?.colorScale,o=t?.colorScale,l=g4(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const f=r(s?.data?.[c]);if(f!==null)return f}const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):r(d.z);return u===null?l({value:d,dataIndex:c}):u}:i?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):i(d.y);return u===null?l({value:d,dataIndex:c}):u}:o?c=>{if(c===void 0)return e.color;const d=e.data[c],u=d===null?l({value:d,dataIndex:c}):o(d.x);return u===null?l({value:d,dataIndex:c}):u}:c=>{if(c===void 0)return e.color;const d=e.data[c];return l({value:d,dataIndex:c})}},Axe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Wi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Txe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Wi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},Exe=(e,t,a)=>We({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),kxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.scatter?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[a.dataIndex].x,o=r.data?.[a.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Lxe={seriesProcessor:Sxe,colorProcessor:_xe,legendGetter:Axe,tooltipGetter:Txe,tooltipItemPositionGetter:kxe,xExtremumGetter:jxe,yExtremumGetter:Cxe,getSeriesWithDefaultValues:Exe},Pxe=e=>{const{axis:t}=e;return wv(t.data??[])};function Dxe(e,t,a,s){return a.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const Oxe=e=>{const{series:t,axis:a,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===a.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:d}=t[o],u=l!==void 0,f=r?.({currentAxisId:a.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=u&&a.scaleType!=="log"&&typeof t[o].baseline!="string"?b=>b:b=>[b[1],b[1]],x=Dxe(p,d,c,f),[v,N]=x;return[Math.min(v,i[0]),Math.max(N,i[1])]},[1/0,-1/0])};function Mxe(e,t){const a={};return Object.keys(e).forEach(s=>{a[s]=We({},e[s],{valueFormatter:e[s].valueFormatter??t})}),a}const Ixe=(e,t)=>{const{seriesOrder:a,series:s}=e,r=lW(We({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];a.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((d,u)=>{i.length<=u?i.push({[l]:d}):i[u][l]=d})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:d,stackingOffset:u}=l,f=h4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=We({labelMarkType:"line"},s[p],{data:v?t.map(N=>{const b=N[v];return typeof b=="number"?b:null}):s[p].data,stackedData:f[x].map(([N,b])=>[N,b])})})}),{seriesOrder:a,stackingGroups:r,series:Mxe(o,l=>l==null?"":l.toLocaleString())}},j4=(e,t,a)=>{const s=a?.colorScale,r=t?.colorScale,i=g4(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},$xe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>{const i=Wi(a[r].label,"legend");return i===void 0||s.push({markType:a[r].labelMarkType,id:r,seriesId:r,color:a[r].color,label:i}),s},[])},Rxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Wi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},zxe=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),Uxe=(e,t,a)=>We({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??a[t%a.length]}),Fxe=e=>{const{series:t,identifier:a,axesConfig:s}=e;if(!a||a.dataIndex===void 0)return null;const r=t.line?.series[a.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[a.dataIndex],o=r.data[a.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},Bxe={colorProcessor:j4,seriesProcessor:Ixe,legendGetter:$xe,tooltipGetter:Rxe,tooltipItemPositionGetter:Fxe,axisTooltipGetter:zxe,xExtremumGetter:Pxe,yExtremumGetter:Oxe,getSeriesWithDefaultValues:Uxe},Hxe=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,a)=>a-t;case"asc":return(t,a)=>t-a;default:return null}},qxe=e=>{const{seriesOrder:t,series:a}=e,s={};return t.forEach(r=>{const i=Xge().startAngle(Qc(a[r].startAngle??0)).endAngle(Qc(a[r].endAngle??360)).padAngle(Qc(a[r].paddingAngle??0)).sortValues(Hxe(a[r].sortingValues??"none"))(a[r].data.map(o=>o.value));s[r]=We({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},a[r],{data:a[r].data.map((o,l)=>We({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>We({labelMarkType:"circle"},o,{formattedValue:a[r].valueFormatter?.(We({},o,{label:Wi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},Gxe=e=>t=>e.data[t].color,Wxe=e=>{const{seriesOrder:t,series:a}=e;return t.reduce((s,r)=>(a[r].data.forEach((i,o)=>{const l=Wi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??a[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},Vxe=e=>{const{series:t,getColor:a,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Wi(r.label,"tooltip"),o=We({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:a(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},Qxe=(e,t,a)=>We({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>We({},s,{color:s.color??a[r%a.length]}))});function kv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function Yxe(e,t){const{height:a,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,a)/2,l=kv(r??"50%",s),c=kv(i??"50%",a);return{cx:l,cy:c,availableRadius:o}}const Kxe=e=>{const{series:t,drawingArea:a,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=Yxe({cx:i.cx,cy:i.cy},a),{data:d,innerRadius:u=0,outerRadius:f}=i,p=Math.max(0,kv(u??0,c)),x=Math.max(0,kv(f??c,c)),v=d[s.dataIndex];if(!v)return null;const N=[[p,v.startAngle],[p,v.endAngle],[x,v.startAngle],[x,v.endAngle]].map(([A,k])=>({x:o+A*Math.sin(k),y:l-A*Math.cos(k)})),[b,C]=wv(N.map(A=>A.x)),[w,S]=wv(N.map(A=>A.y));switch(r){case"bottom":return{x:(C+b)/2,y:S};case"left":return{x:b,y:(S+w)/2};case"right":return{x:C,y:(S+w)/2};default:return{x:(C+b)/2,y:w}}},Xxe={colorProcessor:Gxe,seriesProcessor:qxe,legendGetter:Wxe,tooltipGetter:Vxe,tooltipItemPositionGetter:Kxe,getSeriesWithDefaultValues:Qxe},Zxe={bar:Nxe,scatter:Lxe,line:Bxe,pie:Xxe},Jxe=[Sx,vx,Yf,_x];function e0e(e){const{children:t,plugins:a=Jxe,pluginParams:s={},seriesConfig:r=Zxe}=e,{contextValue:i}=dme(a,s,r);return n.jsx(Z9.Provider,{value:i,children:t})}const qr=()=>{const e=h.useContext(Z9);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function t0e(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const qN=(e,t)=>{const{instance:a}=qr(),s=h.useRef(!1),r=hs(()=>{s.current=!0,a.setItemInteraction(e,{interaction:"pointer"}),a.setHighlight(e)}),i=hs(()=>{s.current=!1,a.removeItemInteraction(e),a.clearHighlight()});return h.useEffect(()=>()=>{s.current&&i()},[i]),h.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:t0e}),[t,r,i])};function jW(e){return e.replace(" ","_")}const CW=_a("MuiAppearingMask",["animate"]),n0e=un("rect")({animationName:"animate-width",animationTimingFunction:w4,animationDuration:"0s",[`&.${CW.animate}`]:{animationDuration:`${BN}ms`},"@keyframes animate-width":{from:{width:0}}});function SW(e){const t=Ai(),a=zN(),s=jW(`${a}-${e.id}`);return n.jsxs(h.Fragment,{children:[n.jsx("clipPath",{id:s,children:n.jsx(n0e,{className:e.skipAnimation?"":CW.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),n.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const a0e=["skipAnimation","ownerState"];function s0e(e){const{skipAnimation:t,ownerState:a}=e,s=xn(e,a0e),r=cxe(e);return n.jsx(SW,{skipAnimation:t,id:`${a.id}-area-clip`,children:n.jsx("path",We({fill:a.gradientId?`url(#${a.gradientId})`:a.color,filter:a.isHighlighted?"brightness(140%)":a.gradientId?void 0:"brightness(120%)",opacity:a.isFaded?.3:1,stroke:"none","data-series":a.id,"data-highlighted":a.isHighlighted||void 0,"data-faded":a.isFaded||void 0},s,r))})}const r0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function i0e(e){return Wa("MuiAreaElement",e)}const o0e=_a("MuiAreaElement",["root","highlighted","faded","series"]),l0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Ga(i,i0e,t)};function c0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,r0e),d=qN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=pW({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=l0e(p),v=i?.area??s0e,N=$l({elementType:v,externalSlotProps:o?.area,additionalProps:We({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,We({},c,N))}function C4(e){const t=Qn(),a=Ft(t,Cue);return e||a}function S4(){const e=Qn();return Ft(e,Zq)}function _W(e){switch(e){case"catmullRom":return ope.alpha(.5);case"linear":return Ax;case"monotoneX":return lE;case"monotoneY":return KG;case"natural":return ZG;case"step":return JG;case"stepBefore":return eW;case"stepAfter":return tW;case"bumpY":return DG;case"bumpX":return PG;default:return lE}}function d0e(e,t){const a=Tx(),s=pr().xAxisIds[0],r=xr().yAxisIds[0],i=v4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(let p=f.length-1;p>=0;p-=1){const x=f[p],{xAxisId:v=s,yAxisId:N=r,stackedData:b,data:C,connectNulls:w,baseline:S,curve:A,strictStepCurve:k,area:_}=l[x];if(!_||!(v in e)||!(N in t))continue;const E=e[v].scale,T=Xf(E),M=t[N].scale,R=e[v].data,z=t[N].colorScale&&i(N)||e[v].colorScale&&i(v)||void 0,P=A?.includes("step")&&!k&&ys(E),I=R?.flatMap((X,W)=>{const ne=C[W]==null;if(P){const oe=[{x:X,y:b[W],nullData:ne,isExtension:!1}];return!ne&&(W===0||C[W-1]==null)&&oe.unshift({x:(E(X)??0)-(E.step()-E.bandwidth())/2,y:b[W],nullData:ne,isExtension:!0}),!ne&&(W===C.length-1||C[W+1]==null)&&oe.push({x:(E(X)??0)+(E.step()+E.bandwidth())/2,y:b[W],nullData:ne,isExtension:!0}),oe}return{x:X,y:b[W],nullData:ne}})??[],q=w?I.filter(X=>!X.nullData):I,V=Mg().x(X=>X.isExtension?X.x:T(X.x)).defined(X=>w||!X.nullData||!!X.isExtension).y0(X=>{if(typeof S=="number")return M(S);if(S==="max")return M.range()[1];if(S==="min")return M.range()[0];const W=X.y&&M(X.y[0]);return Number.isNaN(W)?M.range()[0]:W}).y1(X=>X.y&&M(X.y[1])).curve(_W(A))(q)||"";d.push({area:l[x].area,color:l[x].color,gradientId:z,d:V,seriesId:x})}}return d},[a,s,r,e,t,i])}const u0e=["slots","slotProps","onItemClick","skipAnimation"],m0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${o0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),f0e=()=>{const{xAxis:e}=pr(),{yAxis:t}=xr();return d0e(e,t)};function h0e(e){const{slots:t,slotProps:a,onItemClick:s,skipAnimation:r}=e,i=xn(e,u0e),o=S4(),l=C4(o||r),c=f0e();return n.jsx(m0e,We({},i,{children:c.map(({d,seriesId:u,color:f,area:p,gradientId:x})=>!!p&&n.jsx(c0e,{id:u,d,color:f,gradientId:x,slots:t,slotProps:a,onClick:s&&(v=>s(v,{type:"line",seriesId:u})),skipAnimation:l},u))}))}const g0e=["skipAnimation","ownerState"],p0e=h.forwardRef(function(t,a){const{skipAnimation:s,ownerState:r}=t,i=xn(t,g0e),o=dxe(We({},t,{ref:a}));return n.jsx(SW,{skipAnimation:s,id:`${r.id}-line-clip`,children:n.jsx("path",We({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),x0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function y0e(e){return Wa("MuiLineElement",e)}const b0e=_a("MuiLineElement",["root","highlighted","faded","series"]),v0e=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${a}`,r&&"highlighted",s&&"faded"]};return Ga(i,y0e,t)};function w0e(e){const{id:t,classes:a,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xn(e,x0e),d=qN({type:"line",seriesId:t}),{isFaded:u,isHighlighted:f}=pW({seriesId:t}),p={id:t,classes:a,color:s,gradientId:r,isFaded:u,isHighlighted:f},x=v0e(p),v=i?.line??p0e,N=$l({elementType:v,externalSlotProps:o?.line,additionalProps:We({},d,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return n.jsx(v,We({},c,N))}function N0e(e,t){const a=Tx(),s=pr().xAxisIds[0],r=xr().yAxisIds[0],i=v4();return h.useMemo(()=>{if(a===void 0)return[];const{series:l,stackingGroups:c}=a,d=[];for(const u of c){const f=u.ids;for(const p of f){const{xAxisId:x=s,yAxisId:v=r,stackedData:N,data:b,connectNulls:C,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(v in t))continue;const A=e[x].scale,k=Xf(A),_=t[v].scale,E=e[x].data,T=t[v].colorScale&&i(v)||e[x].colorScale&&i(x)||void 0,M=w?.includes("step")&&!S&&ys(A),R=E?.flatMap((q,Q)=>{const V=b[Q]==null;if(M){const X=[{x:q,y:N[Q],nullData:V,isExtension:!1}];return!V&&(Q===0||b[Q-1]==null)&&X.unshift({x:(A(q)??0)-(A.step()-A.bandwidth())/2,y:N[Q],nullData:V,isExtension:!0}),!V&&(Q===b.length-1||b[Q+1]==null)&&X.push({x:(A(q)??0)+(A.step()+A.bandwidth())/2,y:N[Q],nullData:V,isExtension:!0}),X}return{x:q,y:N[Q],nullData:V}})??[],z=C?R.filter(q=>!q.nullData):R,I=u4().x(q=>q.isExtension?q.x:k(q.x)).defined(q=>C||!q.nullData||!!q.isExtension).y(q=>_(q.y[1])).curve(_W(w))(z)||"";d.push({color:l[p].color,gradientId:T,d:I,seriesId:p})}}return d},[a,s,r,e,t,i])}const j0e=["slots","slotProps","skipAnimation","onItemClick"],C0e=un("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${b0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),S0e=()=>{const{xAxis:e}=pr(),{yAxis:t}=xr();return N0e(e,t)};function _0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,j0e),o=S4(),l=C4(o||s),c=S0e();return n.jsx(C0e,We({},i,{children:c.map(({d,seriesId:u,color:f,gradientId:p})=>n.jsx(w0e,{id:u,d,color:f,gradientId:p,skipAnimation:l,slots:t,slotProps:a,onClick:r&&(x=>r(x,{type:"line",seriesId:u}))},u))}))}function A0e(e){return Wa("MuiMarkElement",e)}const AW=_a("MuiMarkElement",["root","highlighted","faded","animate","series"]),TW=e=>{const{classes:t,id:a,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${a}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Ga(o,A0e,t)},T0e=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],E0e=un("circle")({[`&.${AW.animate}`]:{transitionDuration:`${BN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:w4}});function k0e(e){const{x:t,y:a,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:d=!1,isHighlighted:u=!1}=e,f=xn(e,T0e),p=Ho(),x=qN({type:"line",seriesId:s,dataIndex:o}),N=TW({id:s,classes:r,isHighlighted:u,isFaded:d,skipAnimation:c});return n.jsx(E0e,We({},f,{cx:t,cy:a,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:N.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":u||void 0,"data-faded":d||void 0}))}function EW(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const L0e=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],P0e=un("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${AW.animate}`]:{transitionDuration:`${BN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:w4}}));function D0e(e){const{x:t,y:a,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:d,isFaded:u=!1,isHighlighted:f=!1}=e,p=xn(e,L0e),x=qN({type:"line",seriesId:s,dataIndex:l}),v={id:s,classes:r,isHighlighted:f,isFaded:u,color:i,skipAnimation:d},N=TW(v);return n.jsx(P0e,We({},p,{style:{transform:`translate(${t}px, ${a}px)`,transformOrigin:`${t}px ${a}px`},ownerState:v,className:N.root,d:m4(BG[EW(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":f||void 0,"data-faded":u||void 0}))}const O0e=["slots","slotProps","skipAnimation","onItemClick"];function M0e(e){const{slots:t,slotProps:a,skipAnimation:s,onItemClick:r}=e,i=xn(e,O0e),o=S4(),l=C4(o||s),c=Tx(),{xAxis:d,xAxisIds:u}=pr(),{yAxis:f,yAxisIds:p}=xr(),x=zN(),{instance:v,store:N}=qr(),{isFaded:b,isHighlighted:C}=Vpe(),w=Ft(N,vG),S=h.useMemo(()=>{const T={};for(const{dataIndex:M,axisId:R}of w)T[R]===void 0?T[R]=new Set([M]):T[R].add(M);return T},[w]);if(c===void 0)return null;const{series:A,stackingGroups:k}=c,_=u[0],E=p[0];return n.jsx("g",We({},i,{children:k.flatMap(({ids:T})=>T.map(M=>{const{xAxisId:R=_,yAxisId:z=E,stackedData:P,data:I,showMark:q=!0,shape:Q="circle"}=A[M];if(q===!1)return null;const V=Xf(d[R].scale),X=f[z].scale,W=d[R].data;if(W===void 0)throw new Error(`MUI X Charts: ${R===mN?"The first `xAxis`":`The x-axis with id "${R}"`} should have data property to be able to display a line plot.`);const ne=jW(`${x}-${M}-line-clip`),oe=j4(A[M],d[R],f[z]),K=t?.mark??(Q==="circle"?k0e:D0e),U=C({seriesId:M}),ye=!U&&b({seriesId:M});return n.jsx("g",{clipPath:`url(#${ne})`,"data-series":M,children:W?.map((pe,Ne)=>{const Se=I[Ne]==null?null:P[Ne][1];return{x:V(pe),y:Se===null?null:X(Se),position:pe,value:Se,index:Ne}}).filter(({x:pe,y:Ne,index:Se,position:Oe,value:ke})=>ke===null||Ne===null||!v.isPointInside(pe,Ne)?!1:q===!0?!0:q({x:pe,y:Ne,index:Se,position:Oe,value:ke})).map(({x:pe,y:Ne,index:Se})=>n.jsx(K,We({id:M,dataIndex:Se,shape:Q,color:oe(Se),x:pe,y:Ne,skipAnimation:l,onClick:r&&(Oe=>r(Oe,{type:"line",seriesId:M,dataIndex:Se})),isHighlighted:S[R]?.has(Se)||U,isFaded:ye},a?.mark),`${M}-${Se}`))},M)}))}))}function GN(){const[e,t]=h.useState(typeof window<"u"||!1);return h.useEffect(()=>{t(!0)},[]),e}function _4(e){return typeof e=="number"&&!Number.isFinite(e)}const uE={start:0,extremities:0,end:1,middle:.5};function e2(e,t,a){return e(t)-(e.step()-e.bandwidth())/2+uE[a]*e.step()}function I0e(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(ys(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const N=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,b=t.range()[0]>t.range()[1],C=N.findIndex(S=>l(e2(t,S,b?"start":"end"))),w=N.findLastIndex(S=>l(e2(t,S,b?"end":"start")));return[...N.slice(C,w+1).map(S=>{const A=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:A})??A,offset:e2(t,S,i),labelOffset:x==="tick"?0:t.step()*(uE[x]-uE[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(N=>{const b=`${N}`;return{value:N,formattedValue:s?.(N,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:b})??b,offset:t(N),labelOffset:0}})}if(t.domain().some(_4))return[];const d=o,u=typeof r=="object"?r:$0e(t,a),f=[];for(let p=0;p<u.length;p+=1){const x=u[p],v=t(x);if(l(v)){const N=t.tickFormat(a)(x);f.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:a,defaultTickLabel:N})??N,offset:v,labelOffset:d==="middle"?t(u[p-1]??0)-(v+t(u[p-1]??0))/2:0})}}return f}function $0e(e,t){const a=e.domain();return a[0]===a[1]?[a[0]]:e.ticks(t)}function WN(e){const{scale:t,tickNumber:a,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=qr(),d=l==="x"?c.isXInside:c.isYInside;return h.useMemo(()=>I0e({scale:t,tickNumber:a,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:d}),[t,a,i,r,o,s,d])}function R0e(e=!1){const[t,a]=h.useState(!1);return ss(()=>{e||a(!0)},[e]),h.useEffect(()=>{e&&a(!0)},[e]),t}const kW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function z0e(e){return e.length}function U0e(e){const t=kW.segment(e);let a=0;for(const s of t)a+=1;return a}const F0e=kW?U0e:z0e;function B0e(e){return e*(Math.PI/180)}const LW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function H0e(e,t){return e.slice(0,t)}function q0e(e,t){const a=LW.segment(e);let s="",r=0;for(const i of a)if(s+=i.segment,r+=1,r>=t)break;return s}const G0e=LW?q0e:H0e,N6="";function PW(e,t){const{width:a,height:s,measureText:r}=t,i=B0e(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=a&&c<=s}function DW(e,t){if(t(e))return e;let a=e,s=1,r=1/2;const i=F0e(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;a=G0e(e,o).trim();const d=t(a+N6);s+=1,d?(c=a,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+N6:""}function OW(){return typeof window>"u"}const Yc=new Map,MW=2e3,W0e=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function A4(e,t){return W0e.has(e)&&t===+t?`${t}px`:t}const V0e=/([A-Z])/g;function T4(e){return String(e).replace(V0e,t=>`-${t.toLowerCase()}`)}function IW(e){let t="";for(const a in e)if(Object.hasOwn(e,a)){const s=a,r=e[s];if(r===void 0)continue;t+=`${T4(s)}:${A4(s,r)};`}return t}const Ex=(e,t={})=>{if(e==null||OW())return{width:0,height:0};const a=String(e),s=IW(t),r=`${a}-${s}`,i=Yc.get(r);if(i)return i;try{const o=RW(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(d=>(l.style[T4(d)]=A4(d,t[d]),d)),l.textContent=a,o.replaceChildren(l);const c=$W(l);return Yc.set(r,c),Yc.size+1>MW&&Yc.clear(),c}catch{return{width:0,height:0}}};function Q0e(e,t={}){if(OW())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const a=new Map,s=[],r=IW(t);for(const c of e){const d=`${c}-${r}`,u=Yc.get(d);u?a.set(c,u):s.push(c)}const i=RW(),o=We({},t);Object.keys(o).map(c=>(i.style[T4(c)]=A4(c,o[c]),c));const l=[];for(const c of s){const d=document.createElementNS("http://www.w3.org/2000/svg","text");d.textContent=`${c}`,l.push(d)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const d=s[c],u=i.children[c],f=$W(u),p=`${d}-${r}`;Yc.set(p,f),a.set(d,f)}return Yc.size+1>MW&&Yc.clear(),a}function $W(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let ar=null;function RW(){return ar===null&&(ar=document.createElementNS("http://www.w3.org/2000/svg","svg"),ar.setAttribute("aria-hidden","true"),ar.style.position="absolute",ar.style.top="-20000px",ar.style.left="0",ar.style.padding="0",ar.style.margin="0",ar.style.border="none",ar.style.pointerEvents="none",ar.style.visibility="hidden",ar.style.contain="strict",document.body.appendChild(ar)),ar}function Y0e(e,t,a,s,r){const i=new Map,o=UN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.left+t.width+t.right-d.offset-d.labelOffset)*c),f=p=>PW(p,{width:u,height:a,angle:o,measureText:x=>Ex(x,r)});i.set(d,DW(d.formattedValue.toString(),f))}return i}const j6=5;function K0e(e,t,a=0){const s=Math.min(Math.abs(a)%180,Math.abs(Math.abs(a)%180-180)%180);if(s<j6)return e;if(s>90-j6)return t;const r=Qc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function X0e(e,{tickLabelStyle:t,tickLabelInterval:a,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof a=="function")return new Set(e.filter((f,p)=>a(f.value,p)));let l=0;const c=r?-1:1,d=e.filter(f=>{const{offset:p,labelOffset:x,formattedValue:v}=f;if(v==="")return!1;const N=p+x;return o(N)}),u=J0e(d,t);return new Set(d.filter((f,p)=>{const{offset:x,labelOffset:v}=f,N=x+v;if(p>0&&c*N<c*(l+s))return!1;const{width:b,height:C}=i?Z0e(u,f):{width:0,height:0},w=K0e(b,C,t?.angle),S=N-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=N+c*w/2,!0)}))}function Z0e(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let a=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(a=Math.max(a,i.width),s+=i.height)}return{width:a,height:s}}function J0e(e,t){const a=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>a.add(r));return Q0e(a,t)}function zW(e){return Wa("MuiChartsAxis",e)}const zy=_a("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),UW=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionX",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Ga(r,zW,t)},mE=3,eye=4,FW={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function tye({style:e,needsComputation:t,text:a}){return a.split(`
`).map(s=>We({text:s},t?Ex(s,e):{width:0,height:0}))}const nye=["x","y","style","text","ownerState"],aye=["angle","textAnchor","dominantBaseline"];function VN(e){const{x:t,y:a,style:s,text:r}=e,i=xn(e,nye),o=s??{},{angle:l,textAnchor:c,dominantBaseline:d}=o,u=xn(o,aye),f=GN(),p=h.useMemo(()=>tye({style:u,needsComputation:f&&r.includes(`
`),text:r}),[u,r,f]);let x;switch(d){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return n.jsx("text",We({},i,{transform:l?`rotate(${l}, ${t}, ${a})`:void 0,x:t,y:a,textAnchor:c,dominantBaseline:d,style:u,children:p.map((v,N)=>n.jsx("tspan",{x:t,dy:`${N===0?x:p[0].height}px`,dominantBaseline:d,children:v.text},N))}))}function BW(e){const t=UN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function HW(e){const t=UN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function qW(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const sye=["scale","tickNumber","reverse"];function GW(e){const{xAxis:t,xAxisIds:a}=pr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i,reverse:o}=s,l=xn(s,sye),c=Si({props:We({},l,e),name:"MuiChartsXAxis"}),d=We({},FW,c),{position:u,tickLabelStyle:f,slots:p,slotProps:x}=d,v=Ho(),N=mx(),b=UW(d),C=u==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??VN,A=BW((u==="bottom"?0:180)-(f?.angle??0)),k=HW((u==="bottom"?0:180)-(f?.angle??0)),_=$l({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:We({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:N?qW(A):A,dominantBaseline:k},f)},className:b.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:d,tickNumber:i,positionSign:C,classes:b,Tick:w,TickLabel:S,axisTickLabelProps:_,reverse:o}}function rye(e){const{axisLabelHeight:t}=e,{xScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d,reverse:u}=GW(e),f=mx(),p=R0e(),{disableTicks:x,tickSize:v,valueFormatter:N,slotProps:b,tickInterval:C,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:A,tickLabelMinGap:k,height:_}=s,E=Ai(),{instance:T}=qr(),M=GN(),R=x?4:v,z=WN({scale:a,tickNumber:r,valueFormatter:N,tickInterval:C,tickPlacement:S,tickLabelPlacement:A,direction:"x"}),P=X0e(z,{tickLabelStyle:d.style,tickLabelInterval:w,tickLabelMinGap:k,reverse:u,isMounted:p,isXInside:T.isXInside}),I=Math.max(0,_-(t>0?t+eye:0)-R-mE),q=M?Y0e(P,E,I,f,d.style):new Map(Array.from(P).map(Q=>[Q,Q.formattedValue]));return n.jsx(h.Fragment,{children:z.map((Q,V)=>{const{offset:X,labelOffset:W}=Q,ne=W??0,oe=i*(R+mE),K=T.isXInside(X),U=q.get(Q),ye=P.has(Q);return n.jsxs("g",{transform:`translate(${X}, 0)`,className:o.tickContainer,children:[!x&&K&&n.jsx(l,We({y2:i*R,className:o.tick},b?.axisTick)),U!==void 0&&ye&&n.jsx(c,We({x:ne,y:oe},d,{text:U}))]},V)})})}const mg={start:0,extremities:0,end:1,middle:.5,tick:0};function WW(e){const{scale:t,tickInterval:a,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return h.useMemo(()=>{const o=t.domain(),l=typeof a=="function"&&o.filter(a)||typeof a=="object"&&a||o;if(t.bandwidth()>0){const c=C6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return C6(l,i,r,s,t)},[t,a,i,r,s])}function C6(e,t,a,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let d=0;d<e.length;d+=1){const u=e[d],f=t[c].getValue(u,d),p=i[i.length-1];if(p?.value!==f||p?.groupIndex!==c){l=1;const v=ys(r)?r(u)-(r.step()-r.bandwidth())/2+mg[a]*r.step():r(u),N=r.step()*l*(mg[s]-mg[a]);i.push({value:f,formattedValue:`${f}`,offset:v,groupIndex:c,dataIndex:d,ignoreTick:!1,labelOffset:N}),o.has(d)||o.set(d,new Set);const b=o.get(d);for(const C of b.values())i[C].ignoreTick=!0;b.add(i.length-1)}else{l+=1;const v=r.step()*l*(mg[s]-mg[a]);p.labelOffset=v}}return i}const S6={tickSize:6},iye=(e,t,a)=>{const s=e[t]??{},r=a??S6.tickSize,i=r*t*2+r;return We({},S6,s,{tickSize:s.tickSize??i})};function oye(e){const{xScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=GW(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=qr(),C=WW({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:A,labelOffset:k}=w,_=k??0,E=b.isXInside(A),T=w.formattedValue,M=w.ignoreTick??!1,R=w.groupIndex??0,z=iye(N,R,d),P=s*z.tickSize,I=s*(z.tickSize+mE);return n.jsxs("g",{transform:`translate(${A}, 0)`,className:r.tickContainer,"data-group-index":R,children:[!c&&!M&&E&&n.jsx(i,We({y2:P,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,We({x:_,y:I},l,{style:We({},l.style,z.tickLabelStyle),text:T}))]},S)})})}const VW=un("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${zy.tickLabel}`]:We({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${zy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${zy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${zy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),lye=["axis"],cye=["scale","tickNumber","reverse"],dye=un(VW,{name:"MuiChartsXAxis",slot:"Root"})({});function uye(e){let{axis:t}=e,a=xn(e,lye);const{scale:s}=t,r=xn(t,cye),i=Si({props:We({},r,a),name:"MuiChartsXAxis"}),o=We({},FW,i),{position:l,labelStyle:c,offset:d,slots:u,slotProps:f,sx:p,disableLine:x,label:v,height:N}=o,b=Ho(),C=UW(o),{left:w,top:S,width:A,height:k}=Ai(),_=l==="bottom"?1:-1,E=u?.axisLine??"line",T=u?.axisLabel??VN,M=$l({elementType:T,externalSlotProps:f?.axisLabel,additionalProps:{style:We({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const R=v?Ex(v,M.style).height:0,z=s.domain(),I=ys(s)?z.length===0:z.some(_4);let q=null;I||(q="groups"in t&&Array.isArray(t.groups)?n.jsx(oye,We({},a)):n.jsx(rye,We({},a,{axisLabelHeight:R})));const Q={x:w+A/2,y:_*N};return n.jsxs(dye,{transform:`translate(0, ${l==="bottom"?S+k+d:S-d})`,className:C.root,sx:p,children:[!x&&n.jsx(E,We({x1:w,x2:w+A,className:C.line},f?.axisLine)),q,v&&n.jsx("g",{className:C.label,children:n.jsx(T,We({},Q,M,{text:v}))})]})}function mye(e){const{xAxis:t,xAxisIds:a}=pr(),s=t[e.axisId??a[0]];return s?n.jsx(uye,We({},e,{axis:s})):(`${e.axisId}`,null)}function fye(e,t,a,s,r){const i=new Map,o=UN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const d of e)if(d.formattedValue){const u=Math.min((d.offset+d.labelOffset)*l,(t.top+t.height+t.bottom-d.offset-d.labelOffset)*c),f=p=>PW(p,{width:a,height:u,angle:o,measureText:x=>Ex(x,r)});i.set(d,DW(d.formattedValue.toString(),f))}return i}const QW=e=>{const{classes:t,position:a,id:s}=e,r={root:["root","directionY",a,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Ga(r,zW,t)},fE=2,hye=2,YW={disableLine:!1,disableTicks:!1,tickSize:6},gye=["scale","tickNumber","reverse"];function KW(e){const{yAxis:t,yAxisIds:a}=xr(),s=t[e.axisId??a[0]],{scale:r,tickNumber:i}=s,o=xn(s,gye),l=Si({props:We({},o,e),name:"MuiChartsYAxis"}),c=We({},YW,l),{position:d,tickLabelStyle:u,slots:f,slotProps:p}=c,x=Ho(),v=mx(),N=QW(c),b=d==="right"?1:-1,C=typeof u?.fontSize=="number"?u.fontSize:12,w=f?.axisTick??"line",S=f?.axisTickLabel??VN,A=BW((d==="right"?-90:90)-(u?.angle??0)),k=HW((d==="right"?-90:90)-(u?.angle??0)),_=$l({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:We({},x.typography.caption,{fontSize:C,textAnchor:v?qW(A):A,dominantBaseline:k},u)},className:N.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:b,classes:N,Tick:w,TickLabel:S,axisTickLabelProps:_}}function pye(e){const{axisLabelHeight:t}=e,{yScale:a,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:d}=KW(e),u=mx(),{disableTicks:f,tickSize:p,valueFormatter:x,slotProps:v,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,tickLabelInterval:w,width:S}=s,A=Ai(),{instance:k}=qr(),_=GN(),E=f?4:p,T=WN({scale:a,tickNumber:r,valueFormatter:x,tickPlacement:N,tickLabelPlacement:b,tickInterval:C,direction:"y"}),M=Math.max(0,S-(t>0?t+hye:0)-E-fE),R=_?fye(T,A,M,u,d.style):new Map(Array.from(T).map(z=>[z,z.formattedValue]));return n.jsx(h.Fragment,{children:T.map((z,P)=>{const{offset:I,labelOffset:q,value:Q}=z,V=i*(E+fE),X=q,W=typeof w=="function"&&!w?.(Q,P),ne=k.isYInside(I),oe=R.get(z);return ne?n.jsxs("g",{transform:`translate(0, ${I})`,className:o.tickContainer,children:[!f&&n.jsx(l,We({x2:i*E,className:o.tick},v?.axisTick)),oe!==void 0&&!W&&n.jsx(c,We({x:V,y:X,text:oe},d))]},P):null})})}const _6={tickSize:6},xye=(e,t,a)=>{const s=e[t]??{},r=a??_6.tickSize,i=r*t*2+r;return We({},_6,s,{tickSize:s.tickSize??i})};function yye(e){const{yScale:t,defaultizedProps:a,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=KW(e);if(!ys(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:d,valueFormatter:u,slotProps:f,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=a,N=a.groups,{instance:b}=qr(),C=WW({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:N});return n.jsx(h.Fragment,{children:C.map((w,S)=>{const{offset:A,labelOffset:k}=w,_=k??0,E=b.isYInside(A),T=w.formattedValue,M=w.ignoreTick??!1,R=w.groupIndex??0,z=xye(N,R,d),P=s*z.tickSize,I=s*(z.tickSize+fE);return n.jsxs("g",{transform:`translate(0, ${A})`,className:r.tickContainer,"data-group-index":R,children:[!c&&!M&&E&&n.jsx(i,We({x2:P,className:r.tick},f?.axisTick)),T!==void 0&&n.jsx(o,We({x:I,y:_},l,{style:We({},l.style,z.tickLabelStyle),text:T}))]},S)})})}const bye=["axis"],vye=["scale","tickNumber","reverse"],wye=un(VW,{name:"MuiChartsYAxis",slot:"Root"})({});function Nye(e){let{axis:t}=e,a=xn(e,bye);const{scale:s}=t,r=xn(t,vye),i=GN(),o=Si({props:We({},r,a),name:"MuiChartsYAxis"}),l=We({},YW,o),{position:c,disableLine:d,label:u,labelStyle:f,offset:p,width:x,sx:v,slots:N,slotProps:b}=l,C=Ho(),w=QW(l),{left:S,top:A,width:k,height:_}=Ai(),E=c==="right"?1:-1,T=N?.axisLine??"line",M=N?.axisLabel??VN,R=$l({elementType:T,externalSlotProps:b?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),z=$l({elementType:M,externalSlotProps:b?.axisLabel,additionalProps:{style:We({},C.typography.body1,{lineHeight:1,fontSize:14,angle:E*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},f)},ownerState:{}});if(c==="none")return null;const P={x:E*x,y:A+_/2},I=u==null?0:Ex(u,z.style).height,q=s.domain(),V=ys(s)?q.length===0:q.some(_4);let X=null;return V||(X="groups"in t&&Array.isArray(t.groups)?n.jsx(yye,We({},a)):n.jsx(pye,We({},a,{axisLabelHeight:I}))),n.jsxs(wye,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:w.root,sx:v,children:[!d&&n.jsx(T,We({y1:A,y2:A+_,className:w.line},R)),X,u&&i&&n.jsx("g",{className:w.label,children:n.jsx(M,We({},P,z,{text:u}))})]})}function jye(e){const{yAxis:t,yAxisIds:a}=xr(),s=t[e.axisId??a[0]];return s?n.jsx(Nye,We({},e,{axis:s})):(`${e.axisId}`,null)}function Cye(e){const{slots:t,slotProps:a}=e,{xAxisIds:s,xAxis:r}=pr(),{yAxisIds:i,yAxis:o}=xr();return n.jsxs(h.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:n.jsx(mye,{slots:t,slotProps:a,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:n.jsx(jye,{slots:t,slotProps:a,axisId:l},l))]})}function Sye(e){return Wa("MuiTypography",e)}_a("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const _ye={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Aye=sde(),Tye=e=>{const{align:t,gutterBottom:a,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Gn(t)}`,a&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Ga(l,Sye,o)},Eye=un("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${Gn(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(Eu(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,a])=>t!=="inherit"&&a&&typeof a=="object").map(([t,a])=>({props:{variant:t},style:a})),...Object.entries(e.palette).filter(mp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Gn(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),A6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},E4=h.forwardRef(function(t,a){const{color:s,...r}=yd({props:t,name:"MuiTypography"}),i=!_ye[s],o=Aye({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:d,gutterBottom:u=!1,noWrap:f=!1,paragraph:p=!1,variant:x="body1",variantMapping:v=A6,...N}=o,b={...o,align:l,color:s,className:c,component:d,gutterBottom:u,noWrap:f,paragraph:p,variant:x,variantMapping:v},C=d||(p?"p":v[x]||A6[x])||"span",w=Tye(b);return n.jsx(Eye,{as:C,ref:a,className:Pt(w.root,c),...N,ownerState:b,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...N.style}})});function kye(e){return Wa("MuiChartsTooltip",e)}const nf=_a("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),QN=e=>Ga({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},kye,e);function Lye(){const e=Qn(),t=Ft(e,uG),a=Ft(e,Hr),s=FN(),{xAxis:r,xAxisIds:i}=pr(),{yAxis:o,yAxisIds:l}=xr(),{zAxis:c,zAxisIds:d}=x4(),{rotationAxis:u,rotationAxisIds:f}=mW();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=vv(p)?p.xAxisId??i[0]:void 0,v=vv(p)?p.yAxisId??l[0]:void 0,N="zAxisId"in p?p.zAxisId??d[0]:d[0],b=f[0],C=a[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,v!==void 0?o[v]:void 0,N!==void 0?c[N]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),v!==void 0&&(w.y=o[v]),b!==void 0&&(w.rotation=u[b]),a[p.type].tooltipGetter({series:p,axesConfig:w,getColor:C,identifier:t})}const hE=un("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),gE=un("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${nf.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),pE=un("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),sf=un(E4,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${nf.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${nf.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${nf.valueCell}, &.${nf.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${nf.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function Pye(e){return Wa("MuiChartsLabelMark",e)}const Gm=_a("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),Dye=e=>{const{type:t}=e;return Ga({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},Pye,e.classes)},XW=(e,t,a)=>h.forwardRef(function(r,i){const o=Si({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Tu(l,o),d=Ho(),u=t.classesResolver?.(c,d),f=h.forwardRef(a);return n.jsx(f,We({},c,{classes:u,ref:i}))}),Oye=["type","color","className","classes"],Mye=un("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Gm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Gm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Gm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Gm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Gm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Gm.mask}`]:{height:"100%",width:"100%"}})),Lv=XW("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:Dye},function(t,a){const{type:s,color:r,className:i,classes:o}=t,l=xn(t,Oye),c=s;return n.jsx(Mye,We({className:Pt(o?.root,i),ownerState:t,"aria-hidden":"true",ref:a},l,{children:n.jsx("div",{className:o?.mask,children:typeof c=="function"?n.jsx(c,{className:o?.fill,color:r}):n.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?n.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):n.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function Iye(e){const{classes:t,sx:a}=e,s=Lye(),r=QN(t);if(!s)return null;if("values"in s){const{label:d,color:u,markType:f}=s;return n.jsx(hE,{sx:a,className:r.paper,children:n.jsxs(gE,{className:r.table,children:[n.jsxs(E4,{component:"caption",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Lv,{type:f,color:u,className:r.mark})}),d]}),n.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>n.jsxs(pE,{className:r.row,children:[n.jsx(sf,{className:Pt(r.labelCell,r.cell),component:"th",children:x}),n.jsx(sf,{className:Pt(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return n.jsx(hE,{sx:a,className:r.paper,children:n.jsx(gE,{className:r.table,children:n.jsx("tbody",{children:n.jsxs(pE,{className:r.row,children:[n.jsxs(sf,{className:Pt(r.labelCell,r.cell),component:"th",children:[n.jsx("div",{className:r.markContainer,children:n.jsx(Lv,{type:c,color:i,className:r.mark})}),o]}),n.jsx(sf,{className:Pt(r.valueCell,r.cell),component:"td",children:l})]})})})})}function $ye(e){const t=Qn(),a=Ft(t,Hr);return h.useMemo(()=>{const r={};return Object.keys(a).forEach(i=>{r[i]=a[i].colorProcessor}),r},[a])}const Rye=S9({themeId:oN});function zye(){const e=y4(),[t,a]=h.useState(null);return h.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&a(null)},i=o=>{a({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function Uye(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const Fye="@media (pointer: fine)",Bye=()=>Rye(Fye,{defaultMatches:!0}),ZW=(e,t)=>t,JW=(e,t)=>t;function eV(e,t,a){return Array.isArray(a)?a.map(s=>b6(t.axis[s],e)):b6(t.axis[a],e)}const tV=jt(wx,Nx,Epe,(e,t,a)=>e===null||t===null?null:kpe(a)(e,t)),Hye=jt(tV,Zu,ZW,(e,t,a=t.axisIds[0])=>e===null?null:eV(e,t,a)),nV=jt(tV,Zu,JW,(e,t,a=t.axisIds)=>e===null?null:eV(e,t,a));jt(Zu,Hye,ZW,(e,t,a=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[a]?.data;return s?s[t]:null});jt(Zu,nV,JW,(e,t,a=e.axisIds)=>t===null?null:a.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const aV=cN({memoizeOptions:{resultEqualityCheck:gf}})(nV,Zu,(e,t)=>e===null?[]:t.axisIds.map((a,s)=>({axisId:a,dataIndex:e[s]})).filter(({axisId:a,dataIndex:s})=>t.axis[a].triggerTooltip&&s>=0)),qye=jt(aV,e=>e.length>0);function t2(e,t,a){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?Uye(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:a,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Gye(e={}){const{multipleAxes:t,directions:a}=e,s=Ppe(),r=Dpe(),i=Ope(),o=Qn(),l=Ft(o,gG),c=Ft(o,pG),d=Ft(o,aV),u=FN(),{xAxis:f}=pr(),{yAxis:p}=xr(),{zAxis:x,zAxisIds:v}=x4(),{rotationAxis:N}=mW(),b=$ye();if(l.length===0&&c.length===0&&d.length===0)return null;const C=[];return(a===void 0||a.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(t2(f[w],S,"x"))}),(a===void 0||a.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(t2(p[w],S,"y"))}),(a===void 0||a.includes("rotation"))&&d.forEach(({axisId:w,dataIndex:S})=>{!t&&C.length>1||C.push(t2(N[w],S,"rotation"))}),Object.keys(u).filter(TN).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.xAxisId??s.id,E=k.yAxisId??r.id,T=C.findIndex(({axisDirection:M,axisId:R})=>M==="x"&&R===_||M==="y"&&R===E);if(T>=0){const M="zAxisId"in k?k.zAxisId:v[0],{dataIndex:R}=C[T],z=b[w]?.(k,f[_],p[E],M?x[M]:void 0)(R)??"",P=k.data[R]??null,I=k.valueFormatter(P,{dataIndex:R}),q=Wi(k.label,"tooltip")??null;C[T].seriesItems.push({seriesId:A,color:z,value:P,formattedValue:I,formattedLabel:q,markType:k.labelMarkType})}}):[]}),Object.keys(u).filter(p4).forEach(w=>{const S=u[w];return S?S.seriesOrder.forEach(A=>{const k=S.series[A],_=k.rotationAxisId??i?.id,E=C.findIndex(({axisDirection:T,axisId:M})=>T==="rotation"&&M===_);if(E>=0){const{dataIndex:T}=C[E],M=b[w]?.(k)(T)??"",R=k.data[T]??null,z=k.valueFormatter(R,{dataIndex:T}),P=Wi(k.label,"tooltip")??null;C[E].seriesItems.push({seriesId:A,color:M,value:R,formattedValue:z,formattedLabel:P,markType:k.labelMarkType})}}):[]}),t?C:C.length===0?C[0]:null}function Wye(e){return Gye(We({},e,{multipleAxes:!0}))}function Vye(e){const t=QN(e.classes),a=Wye();return a===null?null:n.jsx(hE,{sx:e.sx,className:t.paper,children:a.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>n.jsxs(gE,{className:t.table,children:[i!=null&&!r.hideTooltip&&n.jsx(E4,{component:"caption",children:o}),n.jsx("tbody",{children:l.map(({seriesId:c,color:d,formattedValue:u,formattedLabel:f,markType:p})=>u==null?null:n.jsxs(pE,{className:t.row,children:[n.jsxs(sf,{className:Pt(t.labelCell,t.cell),component:"th",children:[n.jsx("div",{className:t.markContainer,children:n.jsx(Lv,{type:p,color:d,className:t.mark})}),f||null]}),n.jsx(sf,{className:Pt(t.valueCell,t.cell),component:"td",children:u})]},c))})]},s))})}var ur="top",xi="bottom",yi="right",mr="left",k4="auto",kx=[ur,xi,yi,mr],kf="start",Np="end",Qye="clippingParents",sV="viewport",fg="popper",Yye="reference",T6=kx.reduce(function(e,t){return e.concat([t+"-"+kf,t+"-"+Np])},[]),rV=[].concat(kx,[k4]).reduce(function(e,t){return e.concat([t,t+"-"+kf,t+"-"+Np])},[]),Kye="beforeRead",Xye="read",Zye="afterRead",Jye="beforeMain",ebe="main",tbe="afterMain",nbe="beforeWrite",abe="write",sbe="afterWrite",rbe=[Kye,Xye,Zye,Jye,ebe,tbe,nbe,abe,sbe];function $o(e){return e?(e.nodeName||"").toLowerCase():null}function zr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pu(e){var t=zr(e).Element;return e instanceof t||e instanceof Element}function gi(e){var t=zr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function L4(e){if(typeof ShadowRoot>"u")return!1;var t=zr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ibe(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var s=t.styles[a]||{},r=t.attributes[a]||{},i=t.elements[a];!gi(i)||!$o(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function obe(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:a[s]),l=o.reduce(function(c,d){return c[d]="",c},{});!gi(r)||!$o(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const lbe={name:"applyStyles",enabled:!0,phase:"write",fn:ibe,effect:obe,requires:["computeStyles"]};function ko(e){return e.split("-")[0]}var yu=Math.max,Pv=Math.min,Lf=Math.round;function xE(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function iV(){return!/^((?!chrome|android).)*safari/i.test(xE())}function Pf(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&gi(e)&&(r=e.offsetWidth>0&&Lf(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Lf(s.height)/e.offsetHeight||1);var o=Pu(e)?zr(e):window,l=o.visualViewport,c=!iV()&&a,d=(s.left+(c&&l?l.offsetLeft:0))/r,u=(s.top+(c&&l?l.offsetTop:0))/i,f=s.width/r,p=s.height/i;return{width:f,height:p,top:u,right:d+f,bottom:u+p,left:d,x:d,y:u}}function P4(e){var t=Pf(e),a=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:s}}function oV(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&L4(a)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Bl(e){return zr(e).getComputedStyle(e)}function cbe(e){return["table","td","th"].indexOf($o(e))>=0}function jd(e){return((Pu(e)?e.ownerDocument:e.document)||window.document).documentElement}function YN(e){return $o(e)==="html"?e:e.assignedSlot||e.parentNode||(L4(e)?e.host:null)||jd(e)}function E6(e){return!gi(e)||Bl(e).position==="fixed"?null:e.offsetParent}function dbe(e){var t=/firefox/i.test(xE()),a=/Trident/i.test(xE());if(a&&gi(e)){var s=Bl(e);if(s.position==="fixed")return null}var r=YN(e);for(L4(r)&&(r=r.host);gi(r)&&["html","body"].indexOf($o(r))<0;){var i=Bl(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Lx(e){for(var t=zr(e),a=E6(e);a&&cbe(a)&&Bl(a).position==="static";)a=E6(a);return a&&($o(a)==="html"||$o(a)==="body"&&Bl(a).position==="static")?t:a||dbe(e)||t}function D4(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Vg(e,t,a){return yu(e,Pv(t,a))}function ube(e,t,a){var s=Vg(e,t,a);return s>a?a:s}function lV(){return{top:0,right:0,bottom:0,left:0}}function cV(e){return Object.assign({},lV(),e)}function dV(e,t){return t.reduce(function(a,s){return a[s]=e,a},{})}var mbe=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,cV(typeof t!="number"?t:dV(t,kx))};function fbe(e){var t,a=e.state,s=e.name,r=e.options,i=a.elements.arrow,o=a.modifiersData.popperOffsets,l=ko(a.placement),c=D4(l),d=[mr,yi].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var f=mbe(r.padding,a),p=P4(i),x=c==="y"?ur:mr,v=c==="y"?xi:yi,N=a.rects.reference[u]+a.rects.reference[c]-o[c]-a.rects.popper[u],b=o[c]-a.rects.reference[c],C=Lx(i),w=C?c==="y"?C.clientHeight||0:C.clientWidth||0:0,S=N/2-b/2,A=f[x],k=w-p[u]-f[v],_=w/2-p[u]/2+S,E=Vg(A,_,k),T=c;a.modifiersData[s]=(t={},t[T]=E,t.centerOffset=E-_,t)}}function hbe(e){var t=e.state,a=e.options,s=a.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||oV(t.elements.popper,r)&&(t.elements.arrow=r))}const gbe={name:"arrow",enabled:!0,phase:"main",fn:fbe,effect:hbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Df(e){return e.split("-")[1]}var pbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xbe(e,t){var a=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:Lf(a*r)/r||0,y:Lf(s*r)/r||0}}function k6(e){var t,a=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,f=e.isFixed,p=o.x,x=p===void 0?0:p,v=o.y,N=v===void 0?0:v,b=typeof u=="function"?u({x,y:N}):{x,y:N};x=b.x,N=b.y;var C=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=mr,A=ur,k=window;if(d){var _=Lx(a),E="clientHeight",T="clientWidth";if(_===zr(a)&&(_=jd(a),Bl(_).position!=="static"&&l==="absolute"&&(E="scrollHeight",T="scrollWidth")),_=_,r===ur||(r===mr||r===yi)&&i===Np){A=xi;var M=f&&_===k&&k.visualViewport?k.visualViewport.height:_[E];N-=M-s.height,N*=c?1:-1}if(r===mr||(r===ur||r===xi)&&i===Np){S=yi;var R=f&&_===k&&k.visualViewport?k.visualViewport.width:_[T];x-=R-s.width,x*=c?1:-1}}var z=Object.assign({position:l},d&&pbe),P=u===!0?xbe({x,y:N},zr(a)):{x,y:N};if(x=P.x,N=P.y,c){var I;return Object.assign({},z,(I={},I[A]=w?"0":"",I[S]=C?"0":"",I.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+N+"px)":"translate3d("+x+"px, "+N+"px, 0)",I))}return Object.assign({},z,(t={},t[A]=w?N+"px":"",t[S]=C?x+"px":"",t.transform="",t))}function ybe(e){var t=e.state,a=e.options,s=a.gpuAcceleration,r=s===void 0?!0:s,i=a.adaptive,o=i===void 0?!0:i,l=a.roundOffsets,c=l===void 0?!0:l,d={placement:ko(t.placement),variation:Df(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,k6(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,k6(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const bbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ybe,data:{}};var Uy={passive:!0};function vbe(e){var t=e.state,a=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=zr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",a.update,Uy)}),l&&c.addEventListener("resize",a.update,Uy),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",a.update,Uy)}),l&&c.removeEventListener("resize",a.update,Uy)}}const wbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:vbe,data:{}};var Nbe={left:"right",right:"left",bottom:"top",top:"bottom"};function Gb(e){return e.replace(/left|right|bottom|top/g,function(t){return Nbe[t]})}var jbe={start:"end",end:"start"};function L6(e){return e.replace(/start|end/g,function(t){return jbe[t]})}function O4(e){var t=zr(e),a=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:a,scrollTop:s}}function M4(e){return Pf(jd(e)).left+O4(e).scrollLeft}function Cbe(e,t){var a=zr(e),s=jd(e),r=a.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var d=iV();(d||!d&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+M4(e),y:c}}function Sbe(e){var t,a=jd(e),s=O4(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=yu(a.scrollWidth,a.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=yu(a.scrollHeight,a.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+M4(e),c=-s.scrollTop;return Bl(r||a).direction==="rtl"&&(l+=yu(a.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function I4(e){var t=Bl(e),a=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+r+s)}function uV(e){return["html","body","#document"].indexOf($o(e))>=0?e.ownerDocument.body:gi(e)&&I4(e)?e:uV(YN(e))}function Qg(e,t){var a;t===void 0&&(t=[]);var s=uV(e),r=s===((a=e.ownerDocument)==null?void 0:a.body),i=zr(s),o=r?[i].concat(i.visualViewport||[],I4(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(Qg(YN(o)))}function yE(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function _be(e,t){var a=Pf(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function P6(e,t,a){return t===sV?yE(Cbe(e,a)):Pu(t)?_be(t,a):yE(Sbe(jd(e)))}function Abe(e){var t=Qg(YN(e)),a=["absolute","fixed"].indexOf(Bl(e).position)>=0,s=a&&gi(e)?Lx(e):e;return Pu(s)?t.filter(function(r){return Pu(r)&&oV(r,s)&&$o(r)!=="body"}):[]}function Tbe(e,t,a,s){var r=t==="clippingParents"?Abe(e):[].concat(t),i=[].concat(r,[a]),o=i[0],l=i.reduce(function(c,d){var u=P6(e,d,s);return c.top=yu(u.top,c.top),c.right=Pv(u.right,c.right),c.bottom=Pv(u.bottom,c.bottom),c.left=yu(u.left,c.left),c},P6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function mV(e){var t=e.reference,a=e.element,s=e.placement,r=s?ko(s):null,i=s?Df(s):null,o=t.x+t.width/2-a.width/2,l=t.y+t.height/2-a.height/2,c;switch(r){case ur:c={x:o,y:t.y-a.height};break;case xi:c={x:o,y:t.y+t.height};break;case yi:c={x:t.x+t.width,y:l};break;case mr:c={x:t.x-a.width,y:l};break;default:c={x:t.x,y:t.y}}var d=r?D4(r):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case kf:c[d]=c[d]-(t[u]/2-a[u]/2);break;case Np:c[d]=c[d]+(t[u]/2-a[u]/2);break}}return c}function jp(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=s===void 0?e.placement:s,i=a.strategy,o=i===void 0?e.strategy:i,l=a.boundary,c=l===void 0?Qye:l,d=a.rootBoundary,u=d===void 0?sV:d,f=a.elementContext,p=f===void 0?fg:f,x=a.altBoundary,v=x===void 0?!1:x,N=a.padding,b=N===void 0?0:N,C=cV(typeof b!="number"?b:dV(b,kx)),w=p===fg?Yye:fg,S=e.rects.popper,A=e.elements[v?w:p],k=Tbe(Pu(A)?A:A.contextElement||jd(e.elements.popper),c,u,o),_=Pf(e.elements.reference),E=mV({reference:_,element:S,placement:r}),T=yE(Object.assign({},S,E)),M=p===fg?T:_,R={top:k.top-M.top+C.top,bottom:M.bottom-k.bottom+C.bottom,left:k.left-M.left+C.left,right:M.right-k.right+C.right},z=e.modifiersData.offset;if(p===fg&&z){var P=z[r];Object.keys(R).forEach(function(I){var q=[yi,xi].indexOf(I)>=0?1:-1,Q=[ur,xi].indexOf(I)>=0?"y":"x";R[I]+=P[Q]*q})}return R}function Ebe(e,t){t===void 0&&(t={});var a=t,s=a.placement,r=a.boundary,i=a.rootBoundary,o=a.padding,l=a.flipVariations,c=a.allowedAutoPlacements,d=c===void 0?rV:c,u=Df(s),f=u?l?T6:T6.filter(function(v){return Df(v)===u}):kx,p=f.filter(function(v){return d.indexOf(v)>=0});p.length===0&&(p=f);var x=p.reduce(function(v,N){return v[N]=jp(e,{placement:N,boundary:r,rootBoundary:i,padding:o})[ko(N)],v},{});return Object.keys(x).sort(function(v,N){return x[v]-x[N]})}function kbe(e){if(ko(e)===k4)return[];var t=Gb(e);return[L6(e),t,L6(t)]}function Lbe(e){var t=e.state,a=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!0:o,c=a.fallbackPlacements,d=a.padding,u=a.boundary,f=a.rootBoundary,p=a.altBoundary,x=a.flipVariations,v=x===void 0?!0:x,N=a.allowedAutoPlacements,b=t.options.placement,C=ko(b),w=C===b,S=c||(w||!v?[Gb(b)]:kbe(b)),A=[b].concat(S).reduce(function(pe,Ne){return pe.concat(ko(Ne)===k4?Ebe(t,{placement:Ne,boundary:u,rootBoundary:f,padding:d,flipVariations:v,allowedAutoPlacements:N}):Ne)},[]),k=t.rects.reference,_=t.rects.popper,E=new Map,T=!0,M=A[0],R=0;R<A.length;R++){var z=A[R],P=ko(z),I=Df(z)===kf,q=[ur,xi].indexOf(P)>=0,Q=q?"width":"height",V=jp(t,{placement:z,boundary:u,rootBoundary:f,altBoundary:p,padding:d}),X=q?I?yi:mr:I?xi:ur;k[Q]>_[Q]&&(X=Gb(X));var W=Gb(X),ne=[];if(i&&ne.push(V[P]<=0),l&&ne.push(V[X]<=0,V[W]<=0),ne.every(function(pe){return pe})){M=z,T=!1;break}E.set(z,ne)}if(T)for(var oe=v?3:1,K=function(Ne){var Se=A.find(function(Oe){var ke=E.get(Oe);if(ke)return ke.slice(0,Ne).every(function(he){return he})});if(Se)return M=Se,"break"},U=oe;U>0;U--){var ye=K(U);if(ye==="break")break}t.placement!==M&&(t.modifiersData[s]._skip=!0,t.placement=M,t.reset=!0)}}const Pbe={name:"flip",enabled:!0,phase:"main",fn:Lbe,requiresIfExists:["offset"],data:{_skip:!1}};function D6(e,t,a){return a===void 0&&(a={x:0,y:0}),{top:e.top-t.height-a.y,right:e.right-t.width+a.x,bottom:e.bottom-t.height+a.y,left:e.left-t.width-a.x}}function O6(e){return[ur,yi,xi,mr].some(function(t){return e[t]>=0})}function Dbe(e){var t=e.state,a=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=jp(t,{elementContext:"reference"}),l=jp(t,{altBoundary:!0}),c=D6(o,s),d=D6(l,r,i),u=O6(c),f=O6(d);t.modifiersData[a]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const Obe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Dbe};function Mbe(e,t,a){var s=ko(e),r=[mr,ur].indexOf(s)>=0?-1:1,i=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[mr,yi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function Ibe(e){var t=e.state,a=e.options,s=e.name,r=a.offset,i=r===void 0?[0,0]:r,o=rV.reduce(function(u,f){return u[f]=Mbe(f,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=o}const $be={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ibe};function Rbe(e){var t=e.state,a=e.name;t.modifiersData[a]=mV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const zbe={name:"popperOffsets",enabled:!0,phase:"read",fn:Rbe,data:{}};function Ube(e){return e==="x"?"y":"x"}function Fbe(e){var t=e.state,a=e.options,s=e.name,r=a.mainAxis,i=r===void 0?!0:r,o=a.altAxis,l=o===void 0?!1:o,c=a.boundary,d=a.rootBoundary,u=a.altBoundary,f=a.padding,p=a.tether,x=p===void 0?!0:p,v=a.tetherOffset,N=v===void 0?0:v,b=jp(t,{boundary:c,rootBoundary:d,padding:f,altBoundary:u}),C=ko(t.placement),w=Df(t.placement),S=!w,A=D4(C),k=Ube(A),_=t.modifiersData.popperOffsets,E=t.rects.reference,T=t.rects.popper,M=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,R=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),z=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(_){if(i){var I,q=A==="y"?ur:mr,Q=A==="y"?xi:yi,V=A==="y"?"height":"width",X=_[A],W=X+b[q],ne=X-b[Q],oe=x?-T[V]/2:0,K=w===kf?E[V]:T[V],U=w===kf?-T[V]:-E[V],ye=t.elements.arrow,pe=x&&ye?P4(ye):{width:0,height:0},Ne=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:lV(),Se=Ne[q],Oe=Ne[Q],ke=Vg(0,E[V],pe[V]),he=S?E[V]/2-oe-ke-Se-R.mainAxis:K-ke-Se-R.mainAxis,qe=S?-E[V]/2+oe+ke+Oe+R.mainAxis:U+ke+Oe+R.mainAxis,Ce=t.elements.arrow&&Lx(t.elements.arrow),xe=Ce?A==="y"?Ce.clientTop||0:Ce.clientLeft||0:0,ee=(I=z?.[A])!=null?I:0,Ee=X+he-ee-xe,Ae=X+qe-ee,Re=Vg(x?Pv(W,Ee):W,X,x?yu(ne,Ae):ne);_[A]=Re,P[A]=Re-X}if(l){var et,De=A==="x"?ur:mr,tt=A==="x"?xi:yi,Je=_[k],H=k==="y"?"height":"width",be=Je+b[De],le=Je-b[tt],Z=[ur,mr].indexOf(C)!==-1,_e=(et=z?.[k])!=null?et:0,te=Z?be:Je-E[H]-T[H]-_e+R.altAxis,Ue=Z?Je+E[H]+T[H]-_e-R.altAxis:le,Ie=x&&Z?ube(te,Je,Ue):Vg(x?te:be,Je,x?Ue:le);_[k]=Ie,P[k]=Ie-Je}t.modifiersData[s]=P}}const Bbe={name:"preventOverflow",enabled:!0,phase:"main",fn:Fbe,requiresIfExists:["offset"]};function Hbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function qbe(e){return e===zr(e)||!gi(e)?O4(e):Hbe(e)}function Gbe(e){var t=e.getBoundingClientRect(),a=Lf(t.width)/e.offsetWidth||1,s=Lf(t.height)/e.offsetHeight||1;return a!==1||s!==1}function Wbe(e,t,a){a===void 0&&(a=!1);var s=gi(t),r=gi(t)&&Gbe(t),i=jd(t),o=Pf(e,r,a),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!a)&&(($o(t)!=="body"||I4(i))&&(l=qbe(t)),gi(t)?(c=Pf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=M4(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function Vbe(e){var t=new Map,a=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){a.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!a.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){a.has(i.name)||r(i)}),s}function Qbe(e){var t=Vbe(e);return rbe.reduce(function(a,s){return a.concat(t.filter(function(r){return r.phase===s}))},[])}function Ybe(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function Kbe(e){var t=e.reduce(function(a,s){var r=a[s.name];return a[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,a},{});return Object.keys(t).map(function(a){return t[a]})}var M6={placement:"bottom",modifiers:[],strategy:"absolute"};function I6(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Xbe(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,s=a===void 0?[]:a,r=t.defaultOptions,i=r===void 0?M6:r;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},M6,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},f=[],p=!1,x={state:u,setOptions:function(C){var w=typeof C=="function"?C(u.options):C;N(),u.options=Object.assign({},i,u.options,w),u.scrollParents={reference:Pu(l)?Qg(l):l.contextElement?Qg(l.contextElement):[],popper:Qg(c)};var S=Qbe(Kbe([].concat(s,u.options.modifiers)));return u.orderedModifiers=S.filter(function(A){return A.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var C=u.elements,w=C.reference,S=C.popper;if(I6(w,S)){u.rects={reference:Wbe(w,Lx(S),u.options.strategy==="fixed"),popper:P4(S)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var A=0;A<u.orderedModifiers.length;A++){if(u.reset===!0){u.reset=!1,A=-1;continue}var k=u.orderedModifiers[A],_=k.fn,E=k.options,T=E===void 0?{}:E,M=k.name;typeof _=="function"&&(u=_({state:u,options:T,name:M,instance:x})||u)}}}},update:Ybe(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){N(),p=!0}};if(!I6(l,c))return x;x.setOptions(d).then(function(b){!p&&d.onFirstUpdate&&d.onFirstUpdate(b)});function v(){u.orderedModifiers.forEach(function(b){var C=b.name,w=b.options,S=w===void 0?{}:w,A=b.effect;if(typeof A=="function"){var k=A({state:u,name:C,instance:x,options:S}),_=function(){};f.push(k||_)}})}function N(){f.forEach(function(b){return b()}),f=[]}return x}}var Zbe=[wbe,zbe,bbe,lbe,$be,Pbe,Bbe,gbe,Obe],Jbe=Xbe({defaultModifiers:Zbe});function $6(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function eve(e){return typeof e=="function"?e():e}const tve=h.forwardRef(function(t,a){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=h.useState(null),c=Io(h.isValidElement(s)?z9(s):null,a);if(ss(()=>{i||l(eve(r)||document.body)},[r,i]),ss(()=>{if(o&&!i)return $6(a,o),()=>{$6(a,null)}},[a,o,i]),i){if(h.isValidElement(s)){const d={ref:c};return h.cloneElement(s,d)}return s}return o&&Bi.createPortal(s,o)});function nve(e){return Wa("MuiPopper",e)}_a("MuiPopper",["root"]);function ave(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function bE(e){return typeof e=="function"?e():e}function sve(e){return e.nodeType!==void 0}const rve=e=>{const{classes:t}=e;return Ga({root:["root"]},nve,t)},ive={},ove=h.forwardRef(function(t,a){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:d,popperOptions:u,popperRef:f,slotProps:p={},slots:x={},TransitionProps:v,ownerState:N,...b}=t,C=h.useRef(null),w=Io(C,a),S=h.useRef(null),A=Io(S,f),k=h.useRef(A);ss(()=>{k.current=A},[A]),h.useImperativeHandle(f,()=>S.current,[]);const _=ave(d,i),[E,T]=h.useState(_),[M,R]=h.useState(bE(s));h.useEffect(()=>{S.current&&S.current.forceUpdate()}),h.useEffect(()=>{s&&R(bE(s))},[s]),ss(()=>{if(!M||!c)return;const Q=W=>{T(W.placement)};let V=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:W})=>{Q(W)}}];l!=null&&(V=V.concat(l)),u&&u.modifiers!=null&&(V=V.concat(u.modifiers));const X=Jbe(M,C.current,{placement:_,...u,modifiers:V});return k.current(X),()=>{X.destroy(),k.current(null)}},[M,o,l,c,u,_]);const z={placement:E};v!==null&&(z.TransitionProps=v);const P=rve(t),I=x.root??"div",q=$l({elementType:I,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:P.root});return n.jsx(I,{...q,children:typeof r=="function"?r(z):r})}),lve=h.forwardRef(function(t,a){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:d,open:u,placement:f="bottom",popperOptions:p=ive,popperRef:x,style:v,transition:N=!1,slotProps:b={},slots:C={},...w}=t,[S,A]=h.useState(!0),k=()=>{A(!1)},_=()=>{A(!0)};if(!c&&!u&&(!N||S))return null;let E;if(i)E=i;else if(s){const R=bE(s);E=R&&sve(R)?GT(R).body:GT(null).body}const T=!u&&c&&(!N||S)?"none":void 0,M=N?{in:u,onEnter:k,onExited:_}:void 0;return n.jsx(tve,{disablePortal:l,container:E,children:n.jsx(ove,{anchorEl:s,direction:o,disablePortal:l,modifiers:d,ref:a,open:N?!S:u,placement:f,popperOptions:p,popperRef:x,slotProps:b,slots:C,...w,style:{position:"fixed",top:0,left:0,display:T,...v},TransitionProps:M,children:r})})}),cve=un(lve,{name:"MuiPopper",slot:"Root"})({}),dve=h.forwardRef(function(t,a){const s=mx(),r=yd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,slots:w,slotProps:S,...A}=r,k=w?.root??l?.Root,_={anchorEl:i,container:d,disablePortal:u,keepMounted:f,modifiers:p,open:x,placement:v,popperOptions:N,popperRef:b,transition:C,...A};return n.jsx(cve,{as:o,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,..._,ref:a})});function uve(e){const{children:t,defer:a=!1,fallback:s=null}=e,[r,i]=h.useState(!1);return ss(()=>{a||i(!0)},[a]),h.useEffect(()=>{a&&i(!0)},[a]),r?t:s}function R6(e){let t,a;const s=()=>{a=null,e(...t)};function r(...i){t=i,a||(a=requestAnimationFrame(s))}return r.clear=()=>{a&&(cancelAnimationFrame(a),a=null)},r}function mve(){const e=Qn(),t=Ft(e,uW),a=Ft(e,qo);return t!==void 0?"polar":a!==void 0?"cartesian":"none"}const fve=["trigger","position","anchor","classes","children"],z6=()=>!1;function hve(e,t,a){return a?z6:e==="item"?_ge:t==="polar"?qye:t==="cartesian"?Lge:z6}const gve=un(dve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function pve(e){const t=Si({props:e,name:"MuiChartsTooltipContainer"}),{trigger:a="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=xn(t,fve),c=y4(),d=QN(i),u=zye(),f=Bye(),p=h.useRef(null),x=dN(()=>({x:0,y:0})),v=mve(),N=Qn(),b=Ft(N,zge),C=Ft(N,hve(a,v,b)),S=Ft(N,jx)==="keyboard"?"node":r,A=Ft(N,a==="item"&&S==="node"?Age:()=>null,s);h.useEffect(()=>{const M=c.current;if(M===null)return()=>{};if(A!==null){const P=R6(()=>{x.current={x:M.getBoundingClientRect().left+(A?.x??0),y:M.getBoundingClientRect().top+(A?.y??0)},p.current?.update()});return P(),()=>P.clear()}const R=R6((P,I)=>{x.current={x:P,y:I},p.current?.update()}),z=P=>{R(P.clientX,P.clientY)};return M.addEventListener("pointerdown",z),M.addEventListener("pointermove",z),M.addEventListener("pointerenter",z),()=>{M.removeEventListener("pointerdown",z),M.removeEventListener("pointermove",z),M.removeEventListener("pointerenter",z),R.clear()}},[c,x,A]);const k=h.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),_=u?.pointerType==="mouse"||f,E=u?.pointerType==="touch"||!f,T=h.useMemo(()=>[{name:"offset",options:{offset:()=>E?[0,64]:[0,8]}},..._?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[_,E]);return a==="none"?null:n.jsx(uve,{children:C&&n.jsx(gve,We({},l,{className:d?.root,open:C,placement:l.placement??s??(_?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:T,children:o}))})}function xve(e){const{classes:t,trigger:a="axis"}=e,s=QN(t);return n.jsx(pve,We({},e,{classes:t,children:a==="axis"?n.jsx(Vye,{classes:s}):n.jsx(Iye,{classes:s})}))}const yve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function bve(e){return Wa("MuiChartsLegend",e)}const vve=e=>{const{classes:t,direction:a}=e;return Ga({root:["root",a],item:["item"],mark:["mark"],label:["label"],series:["series"]},bve,t)},U6=_a("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),wve=["slots","slotProps"],Nve=["ownerState"],jve=(e,t,a,s)=>{function r(i,o){const l=Si({props:i,name:e}),c=typeof a.defaultProps=="function"?a.defaultProps(l):a.defaultProps??{},d=Tu(c,l),u=d,{slots:f,slotProps:p}=u,x=xn(u,wve),v=Ho(),N=a.classesResolver?.(d,v),b=f?.[t]??s,C=a.propagateSlots&&!f?.[t],w=$l({elementType:b,externalSlotProps:p?.[t],additionalProps:We({},x,{classes:N},C&&{slots:f,slotProps:p}),ownerState:{}}),S=xn(w,Nve),A=We({},S);for(const k of a.omitProps??[])delete A[k];return n.jsx(b,We({},A,{ref:o}))}return h.forwardRef(r)};function Cve(e){return Wa("MuiChartsLabel",e)}_a("MuiChartsLabel",["root"]);const Sve=e=>Ga({root:["root"]},Cve,e.classes),_ve=["children","className","classes"],Ave=XW("MuiChartsLabel",{classesResolver:Sve},function(t,a){const{children:s,className:r,classes:i}=t,o=xn(t,_ve);return n.jsx("span",We({className:Pt(i?.root,r),ref:a},o,{children:s}))}),Tve=["direction","onItemClick","className","classes"],Eve=un("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>We({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${U6.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${U6.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),kve=jve("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:vve},h.forwardRef(function(t,a){const s=Ype(),{onItemClick:r,className:i,classes:o}=t,l=xn(t,Tve);if(s.items.length===0)return null;const c=r?"button":"div";return n.jsx(Eve,We({className:Pt(o?.root,i),ref:a},l,{ownerState:t,children:s.items.map((d,u)=>n.jsx("li",{className:o?.item,"data-series":d.id,children:n.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(f=>r(f,yve(d),u)):void 0,children:[n.jsx(Lv,{className:o?.mark,color:d.color,type:d.markType}),n.jsx(Ave,{className:o?.label,children:d.label})]})},d.id))}))}));function Lve(e){return Wa("MuiChartsAxisHighlight",e)}_a("MuiChartsAxisHighlight",["root"]);const Dv=un("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:We({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:We({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function Pve(e){const{type:t,classes:a}=e,{left:s,width:r}=Ai(),i=Qn(),o=Ft(i,Fge),l=Ft(i,Ks);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Xf(f),x=t==="band"&&d!==null&&ys(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Dv,{d:`M ${s} ${f(d)-(f.step()-f.bandwidth())/2} l 0 ${f.step()} l ${r} 0 l 0 ${-f.step()} Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Dv,{d:`M ${s} ${p(d)} L ${s+r} ${p(d)}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}function Dve(e){const{type:t,classes:a}=e,{top:s,height:r}=Ai(),i=Qn(),o=Ft(i,Uge),l=Ft(i,Ys);return o.length===0?null:o.map(({axisId:c,value:d})=>{const f=l.axis[c].scale,p=Xf(f),x=t==="band"&&d!==null&&ys(f);return n.jsxs(h.Fragment,{children:[x&&f(d)!==void 0&&n.jsx(Dv,{d:`M ${f(d)-(f.step()-f.bandwidth())/2} ${s} l ${f.step()} 0 l 0 ${r} l ${-f.step()} 0 Z`,className:a.root,ownerState:{axisHighlight:"band"}}),t==="line"&&d!==null&&n.jsx(Dv,{d:`M ${p(d)} ${s} L ${p(d)} ${s+r}`,className:a.root,ownerState:{axisHighlight:"line"}})]},`${c}-${d}`)})}const Ove=()=>Ga({root:["root"]},Lve);function Mve(e){const{x:t,y:a}=e,s=Ove();return n.jsxs(h.Fragment,{children:[t&&t!=="none"&&n.jsx(Dve,{type:t,classes:s}),a&&a!=="none"&&n.jsx(Pve,{type:a,classes:s})]})}function Ive(e){const{id:t,offset:a}=e,{left:s,top:r,width:i,height:o}=Ai(),l=We({top:0,right:0,bottom:0,left:0},a);return n.jsx("clipPath",{id:t,children:n.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const $ve=parseInt(h.version,10),Rve=["x","y","id","classes","color","shape"];function zve(e){return Wa("MuiHighlightElement",e)}_a("MuiHighlightElement",["root"]);const Uve=e=>{const{classes:t,id:a}=e,s={root:["root",`series-${a}`]};return Ga(s,zve,t)};function Fve(e){const{x:t,y:a,color:s,shape:r}=e,i=xn(e,Rve),o=Uve(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:m4(BG[EW(r)])()},d=$ve>18?{transformOrigin:`${t} ${a}`}:{"transform-origin":`${t} ${a}`};return n.jsx(l,We({pointerEvents:"none",className:o.root,transform:`translate(${t} ${a})`,fill:s},d,c,i))}const Bve=["slots","slotProps"];function Hve(e){const{slots:t,slotProps:a}=e,s=xn(e,Bve),r=Tx(),{xAxis:i,xAxisIds:o}=pr(),{yAxis:l,yAxisIds:c}=xr(),{instance:d}=qr(),u=Qn(),f=Ft(u,vG);if(f.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,v=o[0],N=c[0],b=t?.lineHighlight??Fve;return n.jsx("g",We({},s,{children:f.flatMap(({dataIndex:C,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(A=>{const{xAxisId:k=v,yAxisId:_=N,stackedData:E,data:T,disableHighlight:M,shape:R="circle"}=p[A];if(M||T[C]==null||w!==k)return null;const z=Xf(i[k].scale),P=l[_].scale,I=i[k].data;if(I===void 0)throw new Error(`MUI X Charts: ${k===mN?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const q=z(I[C]),Q=P(E[C][1]);if(!d.isPointInside(q,Q))return null;const V=j4(p[A],i[k],l[_]);return n.jsx(b,We({id:A,color:V(C),x:q,y:Q,shape:R},a?.lineHighlight),`${A}`)})))}))}function qve(e){return Wa("MuiChartsGrid",e)}const F6=_a("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Gve=un("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${F6.verticalLine}`]:t.verticalLine},{[`&.${F6.horizontalLine}`]:t.horizontalLine},t.root]})({}),fV=un("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Wve(e){const{instance:t}=qr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=WN({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isXInside(f)?n.jsx(fV,{y1:s,y2:r,x1:f,x2:f,className:i.verticalLine},`vertical-${u?.getTime?.()??u}`):null)})}function Vve(e){const{instance:t}=qr(),{axis:a,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=a,d=WN({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return n.jsx(h.Fragment,{children:d.map(({value:u,offset:f})=>t.isYInside(f)?n.jsx(fV,{y1:f,y2:f,x1:s,x2:r,className:i.horizontalLine},`horizontal-${u?.getTime?.()??u}`):null)})}const Qve=["vertical","horizontal"],Yve=({classes:e})=>Ga({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},qve,e);function Kve(e){const t=Si({props:e,name:"MuiChartsGrid"}),a=Ai(),{vertical:s,horizontal:r}=t,i=xn(t,Qve),{xAxis:o,xAxisIds:l}=pr(),{yAxis:c,yAxisIds:d}=xr(),u=Yve(t),f=c[d[0]],p=o[l[0]];return n.jsxs(Gve,We({},i,{className:u.root,children:[s&&n.jsx(Wve,{axis:p,start:a.top,end:a.height+a.top,classes:u}),r&&n.jsx(Vve,{axis:f,start:a.left,end:a.width+a.left,classes:u})]}))}const Xve=["message"],Zve=un("text")(({theme:e})=>We({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Jve(e){const{message:t}=e,a=xn(e,Xve),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=NW();return n.jsx(Zve,We({x:r+o/2,y:s+i/2},a,{children:t??l.loading}))}const ewe=["message"],twe=un("text")(({theme:e})=>We({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function nwe(e){const{message:t}=e,a=xn(e,ewe),{top:s,left:r,height:i,width:o}=Ai(),{localeText:l}=NW();return n.jsx(twe,We({x:r+o/2,y:s+i/2},a,{children:t??l.noData}))}function awe(){const e=FN();return Object.values(e).every(t=>{if(!t)return!0;const{series:a,seriesOrder:s}=t;return s.every(r=>{const i=a[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function swe(e){const t=awe();if(e.loading){const a=e.slots?.loadingOverlay??Jve;return n.jsx(a,We({},e.slotProps?.loadingOverlay))}if(t){const a=e.slots?.noDataOverlay??nwe;return n.jsx(a,We({},e.slotProps?.noDataOverlay))}return null}const rwe=[Sx,Cx,vx,Yf,_x,LN],iwe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],owe=e=>{const{xAxis:t,yAxis:a,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:d,onAreaClick:u,onLineClick:f,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:v,grid:N,children:b,slots:C,slotProps:w,skipAnimation:S,loading:A,highlightedItem:k,onHighlightChange:_,className:E,brushConfig:T}=e,M=xn(e,iwe),z=`${iN()}-clip-path`,P=h.useMemo(()=>s.map(Se=>We({disableHighlight:!!v,type:"line"},Se)),[v,s]),I=We({},M,{series:P,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:mN,scaleType:"point",data:Array.from({length:Math.max(...s.map(Se=>(Se.data??c??[]).length))},(Se,Oe)=>Oe)}],yAxis:a,highlightedItem:k,onHighlightChange:_,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:E,skipAnimation:S,brushConfig:T,plugins:rwe}),q={vertical:N?.vertical,horizontal:N?.horizontal},Q={clipPath:`url(#${z})`},V={id:z},X={slots:C,slotProps:w,onItemClick:u},W={slots:C,slotProps:w,onItemClick:f},ne={slots:C,slotProps:w,onItemClick:p,skipAnimation:S},oe={slots:C,slotProps:w,loading:A},K={slots:C,slotProps:w},U=We({x:"line"},x),ye={slots:C,slotProps:w},pe={slots:C,slotProps:w};return{chartsWrapperProps:{sx:d,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:I,gridProps:q,clipPathProps:V,clipPathGroupProps:Q,areaPlotProps:X,linePlotProps:W,markPlotProps:ne,overlayProps:oe,chartsAxisProps:K,axisHighlightProps:U,lineHighlightPlotProps:ye,legendProps:pe,children:b}};function lwe(e,t,a,s,r,i,o,l,c,d,u,f=1/0,p=1){const x=s.copy(),v=r.copy();x.range([0,1]),v.range([0,1]);const N=function(T){const M=x(a[T].x),R=v(a[T].y);return M>=i&&M<=o&&R>=l&&R<=c},b=s.range()[1]-s.range()[0],C=r.range()[1]-r.range()[0],w=b*b,S=C*C;function A(E,T){return w*E*E+S*T*T}const k=x(B6(s,d,E=>a[E]?.x)),_=v(B6(r,u,E=>a[E]?.y));return e.neighbors(k,_,p,f!=null?f*f:1/0,N,A)}function B6(e,t,a){if(ys(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return a(s)}return e.invert(t)}const KN=({svgRef:e,params:t,store:a,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=Ft(a,gr),{axis:c,axisIds:d}=Ft(a,Ys),{axis:u,axisIds:f}=Ft(a,Ks),p=Ft(a,Zq),{series:x,seriesOrder:v}=Ft(a,xa)?.scatter??{},N=Ft(a,p?uge:mge),b=d[0],C=f[0];ss(()=>{a.set("voronoi",{isVoronoiEnabled:!r})},[a,r]),h.useEffect(()=>{if(e.current===null||r)return;const A=e.current;function k(q){const Q=vp(A,q);if(!s.isPointInside(Q.x,Q.y))return"outside-chart";let V;for(const X of v??[]){const W=(x??{})[X],ne=N.get(X);if(!ne)continue;const oe=W.xAxisId??b,K=W.yAxisId??C,U=l6(a.getSnapshot(),oe),ye=l6(a.getSnapshot(),K),pe=i==="item"?W.markerSize:i,Ne=(U?.start??0)/100,Se=(U?.end??100)/100,Oe=(ye?.start??0)/100,ke=(ye?.end??100)/100,he=c[oe].scale,qe=u[K].scale,Ce=lwe(ne,l,W.data,he,qe,Ne,Se,Oe,ke,Q.x,Q.y,pe)[0];if(Ce===void 0)continue;const xe=W.data[Ce],ee=he(xe.x),Ee=qe(xe.y),Ae=(ee-Q.x)**2+(Ee-Q.y)**2;(V===void 0||Ae<V.distanceSq)&&(V={dataIndex:Ce,seriesId:X,distanceSq:Ae})}return V===void 0?"no-point-found":{seriesId:V.seriesId,dataIndex:V.dataIndex}}const _=s.addInteractionListener("moveEnd",q=>{q.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),E=s.addInteractionListener("panEnd",q=>{q.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),T=s.addInteractionListener("quickPressEnd",q=>{!q.detail.activeGestures.move&&!q.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),M=q=>{const Q=k(q.detail.srcEvent);if(Q==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(Q==="outside-voronoi-max-radius"||Q==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:V,dataIndex:X}=Q;s.setItemInteraction?.({type:"scatter",seriesId:V,dataIndex:X},{interaction:"pointer"}),s.setHighlight?.({seriesId:V,dataIndex:X})},R=s.addInteractionListener("tap",q=>{const Q=k(q.detail.srcEvent);if(typeof Q!="string"&&o){const{seriesId:V,dataIndex:X}=Q;o(q.detail.srcEvent,{type:"scatter",seriesId:V,dataIndex:X})}}),z=s.addInteractionListener("move",M),P=s.addInteractionListener("pan",M),I=s.addInteractionListener("quickPress",M);return()=>{R.cleanup(),z.cleanup(),_.cleanup(),P.cleanup(),E.cleanup(),I.cleanup(),T.cleanup()}},[e,u,c,i,o,r,l,s,v,x,N,b,C,a]);const w=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!0})}),S=hs(()=>{a.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};KN.getDefaultizedParams=({params:e})=>We({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});KN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});KN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const hV=[Sx,Cx,vx,Yf,_x,KN,LN],cwe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],dwe=(e,t)=>{const a=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:d,desc:u,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,sx:A,title:k,xAxis:_,yAxis:E,zAxis:T,rotationAxis:M,radiusAxis:R,skipAnimation:z,seriesConfig:P,plugins:I,localeText:q,slots:Q,slotProps:V,experimentalFeatures:X,enableKeyboardNavigation:W,brushConfig:ne}=a,oe=xn(a,cwe),K=We({title:k,desc:u,sx:A,ref:t},oe);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:d,disableAxisListener:C,highlightedItem:w,onHighlightChange:S,onAxisClick:f,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:N,onItemClick:b,xAxis:_,yAxis:E,zAxis:T,rotationAxis:M,radiusAxis:R,skipAnimation:z,width:s,height:r,localeText:q,seriesConfig:P,experimentalFeatures:X,enableKeyboardNavigation:W,brushConfig:ne,plugins:I??hV,slots:Q,slotProps:V},chartsSurfaceProps:K,children:o}};function H6(e){try{return e.matches(":focus-visible")}catch{}return!1}class Ov{static create(){return new Ov}static use(){const t=dN(Ov.create).current,[a,s]=h.useState(!1);return t.shouldMount=a,t.setShouldMount=s,h.useEffect(t.mountEffect,[a]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=mwe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function uwe(){return Ov.use()}function mwe(){let e,t;const a=new Promise((s,r)=>{e=s,t=r});return a.resolve=e,a.reject=t,a}class $4{static create(){return new $4}currentId=null;start(t,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function fwe(){const e=dN($4.create).current;return G9(e.disposeEffect),e}function hwe(e){const{className:t,classes:a,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:d}=e,[u,f]=h.useState(!1),p=Pt(t,a.ripple,a.rippleVisible,s&&a.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},v=Pt(a.child,u&&a.childLeaving,s&&a.childPulsate);return!l&&!u&&f(!0),h.useEffect(()=>{if(!l&&c!=null){const N=setTimeout(c,d);return()=>{clearTimeout(N)}}},[c,l,d]),n.jsx("span",{className:p,style:x,children:n.jsx("span",{className:v})})}const li=_a("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),vE=550,gwe=80,pwe=ux`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,xwe=ux`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,ywe=ux`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,bwe=un("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),vwe=un(hwe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${li.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${pwe};
    animation-duration: ${vE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${li.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${li.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${li.childLeaving} {
    opacity: 0;
    animation-name: ${xwe};
    animation-duration: ${vE}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${li.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${ywe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,wwe=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,d]=h.useState([]),u=h.useRef(0),f=h.useRef(null);h.useEffect(()=>{f.current&&(f.current(),f.current=null)},[c]);const p=h.useRef(!1),x=fwe(),v=h.useRef(null),N=h.useRef(null),b=h.useCallback(A=>{const{pulsate:k,rippleX:_,rippleY:E,rippleSize:T,cb:M}=A;d(R=>[...R,n.jsx(vwe,{classes:{ripple:Pt(i.ripple,li.ripple),rippleVisible:Pt(i.rippleVisible,li.rippleVisible),ripplePulsate:Pt(i.ripplePulsate,li.ripplePulsate),child:Pt(i.child,li.child),childLeaving:Pt(i.childLeaving,li.childLeaving),childPulsate:Pt(i.childPulsate,li.childPulsate)},timeout:vE,pulsate:k,rippleX:_,rippleY:E,rippleSize:T},u.current)]),u.current+=1,f.current=M},[i]),C=h.useCallback((A={},k={},_=()=>{})=>{const{pulsate:E=!1,center:T=r||k.pulsate,fakeElement:M=!1}=k;if(A?.type==="mousedown"&&p.current){p.current=!1;return}A?.type==="touchstart"&&(p.current=!0);const R=M?null:N.current,z=R?R.getBoundingClientRect():{width:0,height:0,left:0,top:0};let P,I,q;if(T||A===void 0||A.clientX===0&&A.clientY===0||!A.clientX&&!A.touches)P=Math.round(z.width/2),I=Math.round(z.height/2);else{const{clientX:Q,clientY:V}=A.touches&&A.touches.length>0?A.touches[0]:A;P=Math.round(Q-z.left),I=Math.round(V-z.top)}if(T)q=Math.sqrt((2*z.width**2+z.height**2)/3),q%2===0&&(q+=1);else{const Q=Math.max(Math.abs((R?R.clientWidth:0)-P),P)*2+2,V=Math.max(Math.abs((R?R.clientHeight:0)-I),I)*2+2;q=Math.sqrt(Q**2+V**2)}A?.touches?v.current===null&&(v.current=()=>{b({pulsate:E,rippleX:P,rippleY:I,rippleSize:q,cb:_})},x.start(gwe,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:E,rippleX:P,rippleY:I,rippleSize:q,cb:_})},[r,b,x]),w=h.useCallback(()=>{C({},{pulsate:!0})},[C]),S=h.useCallback((A,k)=>{if(x.clear(),A?.type==="touchend"&&v.current){v.current(),v.current=null,x.start(0,()=>{S(A,k)});return}v.current=null,d(_=>_.length>0?_.slice(1):_),f.current=k},[x]);return h.useImperativeHandle(a,()=>({pulsate:w,start:C,stop:S}),[w,C,S]),n.jsx(bwe,{className:Pt(li.root,i.root,o),ref:N,...l,children:n.jsx(bL,{component:null,exit:!0,children:c})})});function Nwe(e){return Wa("MuiButtonBase",e)}const jwe=_a("MuiButtonBase",["root","disabled","focusVisible"]),Cwe=e=>{const{disabled:t,focusVisible:a,focusVisibleClassName:s,classes:r}=e,o=Ga({root:["root",t&&"disabled",a&&"focusVisible"]},Nwe,r);return a&&s&&(o.root+=` ${s}`),o},Swe=un("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${jwe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),gV=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:d=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:v="a",onBlur:N,onClick:b,onContextMenu:C,onDragLeave:w,onFocus:S,onFocusVisible:A,onKeyDown:k,onKeyUp:_,onMouseDown:E,onMouseLeave:T,onMouseUp:M,onTouchEnd:R,onTouchMove:z,onTouchStart:P,tabIndex:I=0,TouchRippleProps:q,touchRippleRef:Q,type:V,...X}=s,W=h.useRef(null),ne=uwe(),oe=Io(ne.ref,Q),[K,U]=h.useState(!1);d&&K&&U(!1),h.useImperativeHandle(r,()=>({focusVisible:()=>{U(!0),W.current.focus()}}),[]);const ye=ne.shouldMount&&!u&&!d;h.useEffect(()=>{K&&p&&!u&&ne.pulsate()},[u,p,K,ne]);const pe=fl(ne,"start",E,f),Ne=fl(ne,"stop",C,f),Se=fl(ne,"stop",w,f),Oe=fl(ne,"stop",M,f),ke=fl(ne,"stop",be=>{K&&be.preventDefault(),T&&T(be)},f),he=fl(ne,"start",P,f),qe=fl(ne,"stop",R,f),Ce=fl(ne,"stop",z,f),xe=fl(ne,"stop",be=>{H6(be.target)||U(!1),N&&N(be)},!1),ee=hs(be=>{W.current||(W.current=be.currentTarget),H6(be.target)&&(U(!0),A&&A(be)),S&&S(be)}),Ee=()=>{const be=W.current;return c&&c!=="button"&&!(be.tagName==="A"&&be.href)},Ae=hs(be=>{p&&!be.repeat&&K&&be.key===" "&&ne.stop(be,()=>{ne.start(be)}),be.target===be.currentTarget&&Ee()&&be.key===" "&&be.preventDefault(),k&&k(be),be.target===be.currentTarget&&Ee()&&be.key==="Enter"&&!d&&(be.preventDefault(),b&&b(be))}),Re=hs(be=>{p&&be.key===" "&&K&&!be.defaultPrevented&&ne.stop(be,()=>{ne.pulsate(be)}),_&&_(be),b&&be.target===be.currentTarget&&Ee()&&be.key===" "&&!be.defaultPrevented&&b(be)});let et=c;et==="button"&&(X.href||X.to)&&(et=v);const De={};et==="button"?(De.type=V===void 0?"button":V,De.disabled=d):(!X.href&&!X.to&&(De.role="button"),d&&(De["aria-disabled"]=d));const tt=Io(a,W),Je={...s,centerRipple:i,component:c,disabled:d,disableRipple:u,disableTouchRipple:f,focusRipple:p,tabIndex:I,focusVisible:K},H=Cwe(Je);return n.jsxs(Swe,{as:et,className:Pt(H.root,l),ownerState:Je,onBlur:xe,onClick:b,onContextMenu:Ne,onFocus:ee,onKeyDown:Ae,onKeyUp:Re,onMouseDown:pe,onMouseLeave:ke,onMouseUp:Oe,onDragLeave:Se,onTouchEnd:qe,onTouchMove:Ce,onTouchStart:he,ref:tt,tabIndex:d?-1:I,type:V,...De,...X,children:[o,ye?n.jsx(wwe,{ref:oe,center:i,...q}):null]})});function fl(e,t,a,s=!1){return hs(r=>(a&&a(r),s||e[t](r),!0))}function _we(e){return Wa("MuiIconButton",e)}const q6=_a("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Awe=e=>{const{classes:t,disabled:a,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",a&&"disabled",s!=="default"&&`color${Gn(s)}`,r&&`edge${Gn(r)}`,`size${Gn(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Ga(l,_we,t)},Twe=un(gV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.loading&&t.loading,a.color!=="default"&&t[`color${Gn(a.color)}`],a.edge&&t[`edge${Gn(a.edge)}`],t[`size${Gn(a.size)}`]]}})(Eu(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Eu(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(mp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(mp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${q6.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${q6.loading}`]:{color:"transparent"}}))),Ewe=un("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),kwe=h.forwardRef(function(t,a){const s=yd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:d=!1,size:u="medium",id:f,loading:p=null,loadingIndicator:x,...v}=s,N=iN(f),b=x??n.jsx(vL,{"aria-labelledby":N,color:"inherit",size:16}),C={...s,edge:r,color:l,disabled:c,disableFocusRipple:d,loading:p,loadingIndicator:b,size:u},w=Awe(C);return n.jsxs(Twe,{id:p?N:f,className:Pt(w.root,o),centerRipple:!0,focusRipple:!d,disabled:c||p,ref:a,...v,ownerState:C,children:[typeof p=="boolean"&&n.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:n.jsx(Ewe,{className:w.loadingIndicator,ownerState:C,children:p&&b})}),i]})});function Lwe(e){return Wa("MuiButton",e)}const Hd=_a("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Pwe=h.createContext({}),Dwe=h.createContext(void 0),Owe=e=>{const{color:t,disableElevation:a,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,d={root:["root",o&&"loading",i,`${i}${Gn(t)}`,`size${Gn(r)}`,`${i}Size${Gn(r)}`,`color${Gn(t)}`,a&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Gn(l)}`],startIcon:["icon","startIcon",`iconSize${Gn(r)}`],endIcon:["icon","endIcon",`iconSize${Gn(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},u=Ga(d,Lwe,c);return{...c,...u}},pV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Mwe=un(gV,{shouldForwardProp:e=>O9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`${a.variant}${Gn(a.color)}`],t[`size${Gn(a.size)}`],t[`${a.variant}Size${Gn(a.size)}`],a.color==="inherit"&&t.colorInherit,a.disableElevation&&t.disableElevation,a.fullWidth&&t.fullWidth,a.loading&&t.loading]}})(Eu(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Hd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Hd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Hd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Hd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(mp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Hd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Hd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Hd.loading}`]:{color:"transparent"}}}]}})),Iwe=un("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.startIcon,a.loading&&t.startIconLoadingStart,t[`iconSize${Gn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...pV]})),$we=un("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.endIcon,a.loading&&t.endIconLoadingEnd,t[`iconSize${Gn(a.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...pV]})),Rwe=un("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),G6=un("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),zwe=h.forwardRef(function(t,a){const s=h.useContext(Pwe),r=h.useContext(Dwe),i=Tu(s,t),o=yd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:d="button",className:u,disabled:f=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:v,focusVisibleClassName:N,fullWidth:b=!1,id:C,loading:w=null,loadingIndicator:S,loadingPosition:A="center",size:k="medium",startIcon:_,type:E,variant:T="text",...M}=o,R=iN(C),z=S??n.jsx(vL,{"aria-labelledby":R,color:"inherit",size:16}),P={...o,color:c,component:d,disabled:f,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:w,loadingIndicator:z,loadingPosition:A,size:k,type:E,variant:T},I=Owe(P),q=(_||w&&A==="start")&&n.jsx(Iwe,{className:I.startIcon,ownerState:P,children:_||n.jsx(G6,{className:I.loadingIconPlaceholder,ownerState:P})}),Q=(v||w&&A==="end")&&n.jsx($we,{className:I.endIcon,ownerState:P,children:v||n.jsx(G6,{className:I.loadingIconPlaceholder,ownerState:P})}),V=r||"",X=typeof w=="boolean"?n.jsx("span",{className:I.loadingWrapper,style:{display:"contents"},children:w&&n.jsx(Rwe,{className:I.loadingIndicator,ownerState:P,children:z})}):null;return n.jsxs(Mwe,{ownerState:P,className:Pt(s.className,I.root,u,V),component:d,disabled:f||w,focusRipple:!x,focusVisibleClassName:Pt(I.focusVisible,N),ref:a,type:E,id:w?R:C,...M,classes:I,children:[q,A!=="end"&&X,l,A==="end"&&X,Q]})}),Uwe={baseButton:zwe,baseIconButton:kwe},Fwe={},Bwe=We({},Uwe,Fwe),Hwe=h.createContext(null);function qwe(e){const{slots:t,slotProps:a={},defaultSlots:s,children:r}=e,i=h.useMemo(()=>({slots:We({},s,t),slotProps:a}),[s,t,a]);return n.jsx(Hwe.Provider,{value:i,children:r})}const Gwe=["children","localeText","plugins","seriesConfig","slots","slotProps"],Wwe=e=>{const t=Si({props:e,name:"MuiChartDataProvider"}),{children:a,localeText:s,plugins:r=hV,seriesConfig:i,slots:o,slotProps:l}=t,c=xn(t,Gwe),d=Ho(),u={plugins:r,seriesConfig:i,pluginParams:We({theme:d.palette.mode},c)};return{children:a,localeText:s,chartProviderProps:u,slots:o,slotProps:l}};function Vwe(e){const{children:t,localeText:a,chartProviderProps:s,slots:r,slotProps:i}=Wwe(e);return n.jsx(e0e,We({},s,{children:n.jsx(pxe,{localeText:a,children:n.jsx(qwe,{slots:r,slotProps:i,defaultSlots:Bwe,children:t})})}))}function W6(e){const{isReversed:t,gradientId:a,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:n.jsx("linearGradient",{id:a,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const d=i(l);if(d===void 0)return null;const u=t?1-d/s:d/s;return Number.isNaN(u)?null:n.jsxs(h.Fragment,{children:[n.jsx("stop",{offset:u,stopColor:o.colors[c],stopOpacity:1}),n.jsx("stop",{offset:u,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const Qwe=10;function V6(e){const{gradientUnits:t,isReversed:a,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,d=[c.min??0,c.max??100],u=d.map(o).filter(v=>v!==void 0);if(u.length!==2)return null;const f=typeof d[0]=="number"?jf(d[0],d[1]):ML(d[0],d[1]),p=Math.round((Math.max(...u)-Math.min(...u))/Qwe),x=`${d[0]}-${d[1]}-`;return n.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${a?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,N)=>{const b=f(N/p);if(b===void 0)return null;const C=o(b);if(C===void 0)return null;const w=a?1-C/r:C/r,S=l(b);return S===null?null:n.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+N)})})}const Ywe=10,Kwe=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function n2(e){const{isReversed:t,gradientId:a,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?jf(i[0],i[1]):ML(i[0],i[1]),l=Ywe,c=`${i[0]}-${i[1]}-`;return n.jsx("linearGradient",We({id:a},Kwe(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(d,u)=>{const f=u/l,p=o(f);if(p===void 0)return null;const x=s(p);return x===null?null:n.jsx("stop",{offset:f,stopColor:x,stopOpacity:1},c+u)})}))}function Xwe(){const{top:e,height:t,bottom:a,left:s,width:r,right:i}=Ai(),o=e+t+a,l=s+r+i,c=v4(),d=Kpe(),{xAxis:u,xAxisIds:f}=pr(),{yAxis:p,yAxisIds:x}=xr(),{zAxis:v,zAxisIds:N}=x4(),b=x.filter(S=>p[S].colorMap!==void 0),C=f.filter(S=>u[S].colorMap!==void 0),w=N.filter(S=>v[S].colorMap!==void 0);return b.length===0&&C.length===0&&w.length===0?null:n.jsxs("defs",{children:[b.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:E,colorScale:T,reverse:M}=p[S];return _?.type==="piecewise"?n.jsx(W6,{isReversed:!M,scale:E,colorMap:_,size:o,gradientId:A,direction:"y"},A):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(V6,{isReversed:!M,scale:E,colorScale:T,colorMap:_,size:o,gradientId:A,direction:"y"}),n.jsx(n2,{isReversed:M,colorScale:T,colorMap:_,gradientId:k})]},A):null}),C.map(S=>{const A=c(S),k=d(S),{colorMap:_,scale:E,reverse:T,colorScale:M}=u[S];return _?.type==="piecewise"?n.jsx(W6,{isReversed:T,scale:E,colorMap:_,size:l,gradientId:A,direction:"x"},A):_?.type==="continuous"?n.jsxs(h.Fragment,{children:[n.jsx(V6,{isReversed:T,scale:E,colorScale:M,colorMap:_,size:l,gradientId:A,direction:"x"}),n.jsx(n2,{isReversed:T,colorScale:M,colorMap:_,gradientId:k})]},A):null}),w.map(S=>{const A=d(S),{colorMap:k,colorScale:_}=v[S];return k?.type==="continuous"?n.jsx(n2,{colorScale:_,colorMap:k,gradientId:A},A):null})]})}function Zwe(e){return Wa("MuiChartsSurface",e)}const Jwe=()=>Ga({root:["root"]},Zwe);_a("MuiChartsSurface",["root"]);const eNe=["children","className","title","desc"],tNe=un("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),nNe=h.forwardRef(function(t,a){const s=Qn(),r=Ft(s,$ue),i=Ft(s,Rue),o=Ft(s,V9),l=Ft(s,Q9),c=Ft(s,Nge),d=Ft(s,wge),u=Ft(s,tge),f=y4(),p=Io(f,a),x=Si({props:t,name:"MuiChartsSurface"}),{children:v,className:N,title:b,desc:C}=x,w=xn(x,eNe),S=Jwe(),A=i>0&&r>0;return n.jsxs(tNe,We({ownerState:{width:o,height:l,hasZoom:u},viewBox:`0 0 ${r} ${i}`,className:Pt(S.root,N),tabIndex:c?0:void 0,"data-has-focused-item":d||void 0},w,{ref:p,children:[b&&n.jsx("title",{children:b}),C&&n.jsx("desc",{children:C}),n.jsx(Xwe,{}),A&&v]}))}),Q6=_a("MuiChartsToolbar",["root"]),aNe=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",sNe=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",rNe=(e,t,a)=>e?'"chart"':t==="vertical"?a?.horizontal==="start"?'"legend chart"':'"chart legend"':a?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,iNe=(e=!1,t="horizontal",a="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:a==="start"?`auto ${r}`:`${r} auto`},oNe=(e=!1,t="horizontal",a="top")=>t==="vertical"||e?"1fr":a==="bottom"?"1fr auto":"auto 1fr",lNe=un("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>Hb(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const a=iNe(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=oNe(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=rNe(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:a,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${Q6.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${a.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${Q6.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:aNe(e.legendPosition),alignItems:sNe(e.legendPosition)}});function cNe(e){const{children:t,sx:a,extendVertically:s}=e,r=uxe(),i=Qn(),o=Ft(i,V9),l=Ft(i,Q9);return n.jsx(lNe,{ref:r,ownerState:e,sx:a,extendVertically:s??l===void 0,width:o,children:t})}function dNe(){const e=Qn(),t=Ft(e,PN),a=Ft(e,DN),s=Ft(e,ON);return h.useMemo(()=>t===void 0||a===void 0||s===void 0?null:{seriesType:t,seriesId:a,dataIndex:s},[t,a,s])}const Fy=6;function uNe(){const e=Ho(),t=dNe(),a=Tx(),{xAxis:s,xAxisIds:r}=pr(),{yAxis:i,yAxisIds:o}=xr();if(t===null||t.seriesType!=="line"||!a)return null;const l=a?.series[t.seriesId],c=l.xAxisId??r[0],d=l.yAxisId??o[0];return n.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-Fy,y:i[d].scale(l.stackedData[t.dataIndex][1])-Fy,width:2*Fy,height:2*Fy,rx:3,ry:3})}const XN=h.forwardRef(function(t,a){const s=Si({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:d,linePlotProps:u,markPlotProps:f,overlayProps:p,chartsAxisProps:x,axisHighlightProps:v,lineHighlightPlotProps:N,legendProps:b,children:C}=owe(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=dwe(i,a),A=s.slots?.tooltip??xve,k=s.slots?.toolbar;return n.jsx(Vwe,We({},w,{children:n.jsxs(cNe,We({},r,{children:[s.showToolbar&&k?n.jsx(k,We({},s.slotProps?.toolbar)):null,!s.hideLegend&&n.jsx(kve,We({},b)),n.jsxs(nNe,We({},S,{children:[n.jsx(Kve,We({},o)),n.jsxs("g",We({},c,{children:[n.jsx(h0e,We({},d)),n.jsx(_0e,We({},u)),n.jsx(swe,We({},p)),n.jsx(Mve,We({},v))]})),n.jsx(uNe,{}),n.jsx(Cye,We({},x)),n.jsx("g",{"data-drawing-container":!0,children:n.jsx(M0e,We({},f))}),n.jsx(Hve,We({},N)),n.jsx(Ive,We({},l)),C]})),!s.loading&&n.jsx(A,We({},s.slotProps?.tooltip))]}))}))});function mNe(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const ZN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Zf(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function R4(e){return"nodeType"in e}function yr(e){var t,a;return e?Zf(e)?e:R4(e)&&(t=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?t:window:window}function z4(e){const{Document:t}=yr(e);return e instanceof t}function Px(e){return Zf(e)?!1:e instanceof yr(e).HTMLElement}function xV(e){return e instanceof yr(e).SVGElement}function Jf(e){return e?Zf(e)?e.document:R4(e)?z4(e)?e:Px(e)||xV(e)?e.ownerDocument:document:document:document}const Ro=ZN?h.useLayoutEffect:h.useEffect;function U4(e){const t=h.useRef(e);return Ro(()=>{t.current=e}),h.useCallback(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function fNe(){const e=h.useRef(null),t=h.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),a=h.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,a]}function Cp(e,t){t===void 0&&(t=[e]);const a=h.useRef(e);return Ro(()=>{a.current!==e&&(a.current=e)},t),a}function Dx(e,t){const a=h.useRef();return h.useMemo(()=>{const s=e(a.current);return a.current=s,s},[...t])}function Mv(e){const t=U4(e),a=h.useRef(null),s=h.useCallback(r=>{r!==a.current&&t?.(r,a.current),a.current=r},[]);return[a,s]}function wE(e){const t=h.useRef();return h.useEffect(()=>{t.current=e},[e]),t.current}let a2={};function Ox(e,t){return h.useMemo(()=>{if(t)return t;const a=a2[e]==null?0:a2[e]+1;return a2[e]=a,e+"-"+a},[e,t])}function yV(e){return function(t){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const pf=yV(1),Sp=yV(-1);function hNe(e){return"clientX"in e&&"clientY"in e}function F4(e){if(!e)return!1;const{KeyboardEvent:t}=yr(e.target);return t&&e instanceof t}function gNe(e){if(!e)return!1;const{TouchEvent:t}=yr(e.target);return t&&e instanceof t}function NE(e){if(gNe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return hNe(e)?{x:e.clientX,y:e.clientY}:null}const _p=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[_p.Translate.toString(e),_p.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:s}=e;return t+" "+a+"ms "+s}}}),Y6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pNe(e){return e.matches(Y6)?e:e.querySelector(Y6)}const xNe={display:"none"};function yNe(e){let{id:t,value:a}=e;return bt.createElement("div",{id:t,style:xNe},a)}function bNe(e){let{id:t,announcement:a,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},a)}function vNe(){const[e,t]=h.useState("");return{announce:h.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const bV=h.createContext(null);function wNe(e){const t=h.useContext(bV);h.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function NNe(){const[e]=h.useState(()=>new Set),t=h.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[h.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const jNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},CNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function SNe(e){let{announcements:t=CNe,container:a,hiddenTextDescribedById:s,screenReaderInstructions:r=jNe}=e;const{announce:i,announcement:o}=vNe(),l=Ox("DndLiveRegion"),[c,d]=h.useState(!1);if(h.useEffect(()=>{d(!0)},[]),wNe(h.useMemo(()=>({onDragStart(f){let{active:p}=f;i(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:x}=f;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(f){let{active:p,over:x}=f;i(t.onDragOver({active:p,over:x}))},onDragEnd(f){let{active:p,over:x}=f;i(t.onDragEnd({active:p,over:x}))},onDragCancel(f){let{active:p,over:x}=f;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const u=bt.createElement(bt.Fragment,null,bt.createElement(yNe,{id:s,value:r.draggable}),bt.createElement(bNe,{id:l,announcement:o}));return a?Bi.createPortal(u,a):u}var es;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(es||(es={}));function Iv(){}function K6(e,t){return h.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function _Ne(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return h.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Vi=Object.freeze({x:0,y:0});function vV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wV(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return a-s}function ANe(e,t){let{data:{value:a}}=e,{data:{value:s}}=t;return s-a}function X6(e){let{left:t,top:a,height:s,width:r}=e;return[{x:t,y:a},{x:t+r,y:a},{x:t,y:a+s},{x:t+r,y:a+s}]}function NV(e,t){if(!e||e.length===0)return null;const[a]=e;return a[t]}function Z6(e,t,a){return t===void 0&&(t=e.left),a===void 0&&(a=e.top),{x:t+e.width*.5,y:a+e.height*.5}}const TNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=Z6(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=vV(Z6(c),r);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(wV)},ENe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=X6(t),i=[];for(const o of s){const{id:l}=o,c=a.get(l);if(c){const d=X6(c),u=r.reduce((p,x,v)=>p+vV(d[v],x),0),f=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(wV)};function kNe(e,t){const a=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-a;if(s<r&&a<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const LNe=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=a.get(o);if(l){const c=kNe(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(ANe)};function PNe(e,t,a){return{...e,scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1}}function jV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Vi}function DNe(e){return function(a){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...a})}}const ONe=DNe(1);function MNe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function INe(e,t,a){const s=MNe(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(a),d=e.top-l-(1-i)*parseFloat(a.slice(a.indexOf(" ")+1)),u=r?e.width/r:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const $Ne={ignoreTransform:!1};function eh(e,t){t===void 0&&(t=$Ne);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=yr(e).getComputedStyle(e);d&&(a=INe(a,d,u))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=a;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function J6(e){return eh(e,{ignoreTransform:!0})}function RNe(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}function zNe(e,t){return t===void 0&&(t=yr(e).getComputedStyle(e)),t.position==="fixed"}function UNe(e,t){t===void 0&&(t=yr(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?a.test(i):!1})}function JN(e,t){const a=[];function s(r){if(t!=null&&a.length>=t||!r)return a;if(z4(r)&&r.scrollingElement!=null&&!a.includes(r.scrollingElement))return a.push(r.scrollingElement),a;if(!Px(r)||xV(r)||a.includes(r))return a;const i=yr(e).getComputedStyle(r);return r!==e&&UNe(r,i)&&a.push(r),zNe(r,i)?a:s(r.parentNode)}return e?s(e):a}function CV(e){const[t]=JN(e,1);return t??null}function s2(e){return!ZN||!e?null:Zf(e)?e:R4(e)?z4(e)||e===Jf(e).scrollingElement?window:Px(e)?e:null:null}function SV(e){return Zf(e)?e.scrollX:e.scrollLeft}function _V(e){return Zf(e)?e.scrollY:e.scrollTop}function jE(e){return{x:SV(e),y:_V(e)}}var fs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(fs||(fs={}));function AV(e){return!ZN||!e?!1:e===document.scrollingElement}function TV(e){const t={x:0,y:0},a=AV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const FNe={x:.2,y:.2};function BNe(e,t,a,s,r){let{top:i,left:o,right:l,bottom:c}=a;s===void 0&&(s=10),r===void 0&&(r=FNe);const{isTop:d,isBottom:u,isLeft:f,isRight:p}=TV(e),x={x:0,y:0},v={x:0,y:0},N={height:t.height*r.y,width:t.width*r.x};return!d&&i<=t.top+N.height?(x.y=fs.Backward,v.y=s*Math.abs((t.top+N.height-i)/N.height)):!u&&c>=t.bottom-N.height&&(x.y=fs.Forward,v.y=s*Math.abs((t.bottom-N.height-c)/N.height)),!p&&l>=t.right-N.width?(x.x=fs.Forward,v.x=s*Math.abs((t.right-N.width-l)/N.width)):!f&&o<=t.left+N.width&&(x.x=fs.Backward,v.x=s*Math.abs((t.left+N.width-o)/N.width)),{direction:x,speed:v}}function HNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:a,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:a,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function EV(e){return e.reduce((t,a)=>pf(t,jE(a)),Vi)}function qNe(e){return e.reduce((t,a)=>t+SV(a),0)}function GNe(e){return e.reduce((t,a)=>t+_V(a),0)}function WNe(e,t){if(t===void 0&&(t=eh),!e)return;const{top:a,left:s,bottom:r,right:i}=t(e);CV(e)&&(r<=0||i<=0||a>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const VNe=[["x",["left","right"],qNe],["y",["top","bottom"],GNe]];class B4{constructor(t,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=JN(a),r=EV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of VNe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=r[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yg{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...a)})},this.target=t}add(t,a,s){var r;(r=this.target)==null||r.addEventListener(t,a,s),this.listeners.push([t,a,s])}}function QNe(e){const{EventTarget:t}=yr(e);return e instanceof t?e:Jf(e)}function r2(e,t){const a=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(a**2+s**2)>t:"x"in t&&"y"in t?a>t.x&&s>t.y:"x"in t?a>t.x:"y"in t?s>t.y:!1}var ci;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ci||(ci={}));function eR(e){e.preventDefault()}function YNe(e){e.stopPropagation()}var vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(vn||(vn={}));const kV={start:[vn.Space,vn.Enter],cancel:[vn.Esc],end:[vn.Space,vn.Enter,vn.Tab]},KNe=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case vn.Right:return{...a,x:a.x+25};case vn.Left:return{...a,x:a.x-25};case vn.Down:return{...a,y:a.y+25};case vn.Up:return{...a,y:a.y-25}}};class H4{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:a}}=t;this.props=t,this.listeners=new Yg(Jf(a)),this.windowListeners=new Yg(yr(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ci.Resize,this.handleCancel),this.windowListeners.add(ci.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ci.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:a}=this.props,s=t.node.current;s&&WNe(s),a(Vi)}handleKeyDown(t){if(F4(t)){const{active:a,context:s,options:r}=this.props,{keyboardCodes:i=kV,coordinateGetter:o=KNe,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:Vi;this.referenceCoordinates||(this.referenceCoordinates=u);const f=o(t,{active:a,context:s.current,currentCoordinates:u});if(f){const p=Sp(f,u),x={x:0,y:0},{scrollableAncestors:v}=s.current;for(const N of v){const b=t.code,{isTop:C,isRight:w,isLeft:S,isBottom:A,maxScroll:k,minScroll:_}=TV(N),E=HNe(N),T={x:Math.min(b===vn.Right?E.right-E.width/2:E.right,Math.max(b===vn.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(b===vn.Down?E.bottom-E.height/2:E.bottom,Math.max(b===vn.Down?E.top:E.top+E.height/2,f.y))},M=b===vn.Right&&!w||b===vn.Left&&!S,R=b===vn.Down&&!A||b===vn.Up&&!C;if(M&&T.x!==f.x){const z=N.scrollLeft+p.x,P=b===vn.Right&&z<=k.x||b===vn.Left&&z>=_.x;if(P&&!p.y){N.scrollTo({left:z,behavior:l});return}P?x.x=N.scrollLeft-z:x.x=b===vn.Right?N.scrollLeft-k.x:N.scrollLeft-_.x,x.x&&N.scrollBy({left:-x.x,behavior:l});break}else if(R&&T.y!==f.y){const z=N.scrollTop+p.y,P=b===vn.Down&&z<=k.y||b===vn.Up&&z>=_.y;if(P&&!p.x){N.scrollTo({top:z,behavior:l});return}P?x.y=N.scrollTop-z:x.y=b===vn.Down?N.scrollTop-k.y:N.scrollTop-_.y,x.y&&N.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,pf(Sp(f,this.referenceCoordinates),x))}}}handleMove(t,a){const{onMove:s}=this.props;t.preventDefault(),s(a)}handleEnd(t){const{onEnd:a}=this.props;t.preventDefault(),this.detach(),a()}handleCancel(t){const{onCancel:a}=this.props;t.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}H4.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:s=kV,onActivation:r}=t,{active:i}=a;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function tR(e){return!!(e&&"distance"in e)}function nR(e){return!!(e&&"delay"in e)}class q4{constructor(t,a,s){var r;s===void 0&&(s=QNe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=a;const{event:i}=t,{target:o}=i;this.props=t,this.events=a,this.document=Jf(o),this.documentListeners=new Yg(this.document),this.listeners=new Yg(s),this.windowListeners=new Yg(yr(o)),this.initialCoordinates=(r=NE(i))!=null?r:Vi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:a,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ci.Resize,this.handleCancel),this.windowListeners.add(ci.DragStart,eR),this.windowListeners.add(ci.VisibilityChange,this.handleCancel),this.windowListeners.add(ci.ContextMenu,eR),this.documentListeners.add(ci.Keydown,this.handleKeydown),a){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(nR(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(tR(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,a){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:t}=this,{onStart:a}=this.props;t&&(this.activated=!0,this.documentListeners.add(ci.Click,YNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ci.SelectionChange,this.removeTextSelection),a(t))}handleMove(t){var a;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(a=NE(t))!=null?a:Vi,d=Sp(r,c);if(!s&&l){if(tR(l)){if(l.tolerance!=null&&r2(d,l.tolerance))return this.handleCancel();if(r2(d,l.distance))return this.handleStart()}if(nR(l)&&r2(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleCancel(){const{onAbort:t,onCancel:a}=this.props;this.detach(),this.activated||t(this.props.active),a()}handleKeydown(t){t.code===vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const XNe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class G4 extends q4{constructor(t){const{event:a}=t,s=Jf(a.target);super(t,XNe,s)}}G4.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return!a.isPrimary||a.button!==0?!1:(s?.({event:a}),!0)}}];const ZNe={move:{name:"mousemove"},end:{name:"mouseup"}};var CE;(function(e){e[e.RightClick=2]="RightClick"})(CE||(CE={}));class JNe extends q4{constructor(t){super(t,ZNe,Jf(t.event.target))}}JNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;return a.button===CE.RightClick?!1:(s?.({event:a}),!0)}}];const i2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eje extends q4{constructor(t){super(t,i2)}static setup(){return window.addEventListener(i2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(i2.move.name,t)};function t(){}}}eje.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:s}=t;const{touches:r}=a;return r.length>1?!1:(s?.({event:a}),!0)}}];var Kg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Kg||(Kg={}));var $v;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})($v||($v={}));function tje(e){let{acceleration:t,activator:a=Kg.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=$v.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const x=aje({delta:f,disabled:!i}),[v,N]=fNe(),b=h.useRef({x:0,y:0}),C=h.useRef({x:0,y:0}),w=h.useMemo(()=>{switch(a){case Kg.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Kg.DraggableRect:return r}},[a,r,c]),S=h.useRef(null),A=h.useCallback(()=>{const _=S.current;if(!_)return;const E=b.current.x*C.current.x,T=b.current.y*C.current.y;_.scrollBy(E,T)},[]),k=h.useMemo(()=>l===$v.TreeOrder?[...d].reverse():d,[l,d]);h.useEffect(()=>{if(!i||!d.length||!w){N();return}for(const _ of k){if(s?.(_)===!1)continue;const E=d.indexOf(_),T=u[E];if(!T)continue;const{direction:M,speed:R}=BNe(_,T,w,t,p);for(const z of["x","y"])x[z][M[z]]||(R[z]=0,M[z]=0);if(R.x>0||R.y>0){N(),S.current=_,v(A,o),b.current=R,C.current=M;return}}b.current={x:0,y:0},C.current={x:0,y:0},N()},[t,A,s,N,i,o,JSON.stringify(w),JSON.stringify(x),v,d,k,u,JSON.stringify(p)])}const nje={x:{[fs.Backward]:!1,[fs.Forward]:!1},y:{[fs.Backward]:!1,[fs.Forward]:!1}};function aje(e){let{delta:t,disabled:a}=e;const s=wE(t);return Dx(r=>{if(a||!s||!r)return nje;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[fs.Backward]:r.x[fs.Backward]||i.x===-1,[fs.Forward]:r.x[fs.Forward]||i.x===1},y:{[fs.Backward]:r.y[fs.Backward]||i.y===-1,[fs.Forward]:r.y[fs.Forward]||i.y===1}}},[a,t,s])}function sje(e,t){const a=t!=null?e.get(t):void 0,s=a?a.node.current:null;return Dx(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function rje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...a,...i]},[]),[e,t])}var Ap;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ap||(Ap={}));var SE;(function(e){e.Optimized="optimized"})(SE||(SE={}));const aR=new Map;function ije(e,t){let{dragging:a,dependencies:s,config:r}=t;const[i,o]=h.useState(null),{frequency:l,measure:c,strategy:d}=r,u=h.useRef(e),f=b(),p=Cp(f),x=h.useCallback(function(C){C===void 0&&(C=[]),!p.current&&o(w=>w===null?C:w.concat(C.filter(S=>!w.includes(S))))},[p]),v=h.useRef(null),N=Dx(C=>{if(f&&!a)return aR;if(!C||C===aR||u.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const A=S.node.current,k=A?new B4(c(A),A):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return C},[e,i,a,f,c]);return h.useEffect(()=>{u.current=e},[e]),h.useEffect(()=>{f||x()},[a,f]),h.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),h.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},l))},[l,f,x,...s]),{droppableRects:N,measureDroppableContainers:x,measuringScheduled:i!=null};function b(){switch(d){case Ap.Always:return!1;case Ap.BeforeDragging:return a;default:return!a}}}function LV(e,t){return Dx(a=>e?a||(typeof t=="function"?t(e):e):null,[t,e])}function oje(e,t){return LV(e,t)}function lje(e){let{callback:t,disabled:a}=e;const s=U4(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function ej(e){let{callback:t,disabled:a}=e;const s=U4(t),r=h.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[a]);return h.useEffect(()=>()=>r?.disconnect(),[r]),r}function cje(e){return new B4(eh(e),e)}function sR(e,t,a){t===void 0&&(t=cje);const[s,r]=h.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??a)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=lje({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=ej({callback:i});return Ro(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function dje(e){const t=LV(e);return jV(e,t)}const rR=[];function uje(e){const t=h.useRef(e),a=Dx(s=>e?s&&s!==rR&&e&&t.current&&e.parentNode===t.current.parentNode?s:JN(e):rR,[e]);return h.useEffect(()=>{t.current=e},[e]),a}function mje(e){const[t,a]=h.useState(null),s=h.useRef(e),r=h.useCallback(i=>{const o=s2(i.target);o&&a(l=>l?(l.set(o,jE(o)),new Map(l)):null)},[]);return h.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=s2(c);return d?(d.addEventListener("scroll",r,{passive:!0}),[d,jE(d)]):null}).filter(c=>c!=null);a(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=s2(c);d?.removeEventListener("scroll",r)})}},[r,e]),h.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>pf(i,o),Vi):EV(e):Vi,[e,t])}function iR(e,t){t===void 0&&(t=[]);const a=h.useRef(null);return h.useEffect(()=>{a.current=null},t),h.useEffect(()=>{const s=e!==Vi;s&&!a.current&&(a.current=e),!s&&a.current&&(a.current=null)},[e]),a.current?Sp(e,a.current):Vi}function fje(e){h.useEffect(()=>{if(!ZN)return;const t=e.map(a=>{let{sensor:s}=a;return s.setup==null?void 0:s.setup()});return()=>{for(const a of t)a?.()}},e.map(t=>{let{sensor:a}=t;return a}))}function hje(e,t){return h.useMemo(()=>e.reduce((a,s)=>{let{eventName:r,handler:i}=s;return a[r]=o=>{i(o,t)},a},{}),[e,t])}function PV(e){return h.useMemo(()=>e?RNe(e):null,[e])}const oR=[];function gje(e,t){t===void 0&&(t=eh);const[a]=e,s=PV(a?yr(a):null),[r,i]=h.useState(oR);function o(){i(()=>e.length?e.map(c=>AV(c)?s:new B4(t(c),c)):oR)}const l=ej({callback:o});return Ro(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function pje(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Px(t)?t:e}function xje(e){let{measure:t}=e;const[a,s]=h.useState(null),r=h.useCallback(d=>{for(const{target:u}of d)if(Px(u)){s(f=>{const p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),i=ej({callback:r}),o=h.useCallback(d=>{const u=pje(d);i?.disconnect(),u&&i?.observe(u),s(u?t(u):null)},[t,i]),[l,c]=Mv(o);return h.useMemo(()=>({nodeRef:l,rect:a,setRef:c}),[a,l,c])}const yje=[{sensor:G4,options:{}},{sensor:H4,options:{}}],bje={current:{}},Wb={draggable:{measure:J6},droppable:{measure:J6,strategy:Ap.WhileDragging,frequency:SE.Optimized},dragOverlay:{measure:eh}};class Xg extends Map{get(t){var a;return t!=null&&(a=super.get(t))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:a}=t;return!a})}getNodeFor(t){var a,s;return(a=(s=this.get(t))==null?void 0:s.node.current)!=null?a:void 0}}const vje={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xg,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Iv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wb,measureDroppableContainers:Iv,windowRect:null,measuringScheduled:!1},wje={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Iv,draggableNodes:new Map,over:null,measureDroppableContainers:Iv},tj=h.createContext(wje),DV=h.createContext(vje);function Nje(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xg}}}function jje(e,t){switch(t.type){case es.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case es.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case es.DragEnd:case es.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case es.RegisterDroppable:{const{element:a}=t,{id:s}=a,r=new Xg(e.droppable.containers);return r.set(s,a),{...e,droppable:{...e.droppable,containers:r}}}case es.SetDroppableDisabled:{const{id:a,key:s,disabled:r}=t,i=e.droppable.containers.get(a);if(!i||s!==i.key)return e;const o=new Xg(e.droppable.containers);return o.set(a,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case es.UnregisterDroppable:{const{id:a,key:s}=t,r=e.droppable.containers.get(a);if(!r||s!==r.key)return e;const i=new Xg(e.droppable.containers);return i.delete(a),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Cje(e){let{disabled:t}=e;const{active:a,activatorEvent:s,draggableNodes:r}=h.useContext(tj),i=wE(s),o=wE(a?.id);return h.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!F4(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=pNe(u);if(f){f.focus();break}}})}},[s,t,r,o,i]),null}function Sje(e,t){let{transform:a,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),a):a}function _je(e){return h.useMemo(()=>({draggable:{...Wb.draggable,...e?.draggable},droppable:{...Wb.droppable,...e?.droppable},dragOverlay:{...Wb.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Aje(e){let{activeNode:t,measure:a,initialRect:s,config:r=!0}=e;const i=h.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Ro(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=a(d),f=jV(u,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=CV(d);p&&p.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,a])}const OV=h.createContext({...Vi,scaleX:1,scaleY:1});var Bc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Bc||(Bc={}));const Tje=h.memo(function(t){var a,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=yje,collisionDetection:f=LNe,measuring:p,modifiers:x,...v}=t;const N=h.useReducer(jje,void 0,Nje),[b,C]=N,[w,S]=NNe(),[A,k]=h.useState(Bc.Uninitialized),_=A===Bc.Initialized,{draggable:{active:E,nodes:T,translate:M},droppable:{containers:R}}=b,z=E!=null?T.get(E):null,P=h.useRef({initial:null,translated:null}),I=h.useMemo(()=>{var de;return E!=null?{id:E,data:(de=z?.data)!=null?de:bje,rect:P}:null},[E,z]),q=h.useRef(null),[Q,V]=h.useState(null),[X,W]=h.useState(null),ne=Cp(v,Object.values(v)),oe=Ox("DndDescribedBy",o),K=h.useMemo(()=>R.getEnabled(),[R]),U=_je(p),{droppableRects:ye,measureDroppableContainers:pe,measuringScheduled:Ne}=ije(K,{dragging:_,dependencies:[M.x,M.y],config:U.droppable}),Se=sje(T,E),Oe=h.useMemo(()=>X?NE(X):null,[X]),ke=J(),he=oje(Se,U.draggable.measure);Aje({activeNode:E!=null?T.get(E):null,config:ke.layoutShiftCompensation,initialRect:he,measure:U.draggable.measure});const qe=sR(Se,U.draggable.measure,he),Ce=sR(Se?Se.parentElement:null),xe=h.useRef({activatorEvent:null,active:null,activeNode:Se,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ee=R.getNodeFor((a=xe.current.over)==null?void 0:a.id),Ee=xje({measure:U.dragOverlay.measure}),Ae=(s=Ee.nodeRef.current)!=null?s:Se,Re=_?(r=Ee.rect)!=null?r:qe:null,et=!!(Ee.nodeRef.current&&Ee.rect),De=dje(et?null:qe),tt=PV(Ae?yr(Ae):null),Je=uje(_?ee??Se:null),H=gje(Je),be=Sje(x,{transform:{x:M.x-De.x,y:M.y-De.y,scaleX:1,scaleY:1},activatorEvent:X,active:I,activeNodeRect:qe,containerNodeRect:Ce,draggingNodeRect:Re,over:xe.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Je,scrollableAncestorRects:H,windowRect:tt}),le=Oe?pf(Oe,M):null,Z=mje(Je),_e=iR(Z),te=iR(Z,[qe]),Ue=pf(be,_e),Ie=Re?ONe(Re,be):null,Ge=I&&Ie?f({active:I,collisionRect:Ie,droppableRects:ye,droppableContainers:K,pointerCoordinates:le}):null,gt=NV(Ge,"id"),[ve,Be]=h.useState(null),nt=et?be:pf(be,te),Te=PNe(nt,(i=ve?.rect)!=null?i:null,qe),Qe=h.useRef(null),ct=h.useCallback((de,D)=>{let{sensor:B,options:ie}=D;if(q.current==null)return;const ue=T.get(q.current);if(!ue)return;const se=de.nativeEvent,Pe=new B({active:q.current,activeNode:ue,event:se,options:ie,context:xe,onAbort(fe){if(!T.get(fe))return;const{onDragAbort:Xe}=ne.current,pt={id:fe};Xe?.(pt),w({type:"onDragAbort",event:pt})},onPending(fe,Fe,Xe,pt){if(!T.get(fe))return;const{onDragPending:St}=ne.current,Ht={id:fe,constraint:Fe,initialCoordinates:Xe,offset:pt};St?.(Ht),w({type:"onDragPending",event:Ht})},onStart(fe){const Fe=q.current;if(Fe==null)return;const Xe=T.get(Fe);if(!Xe)return;const{onDragStart:pt}=ne.current,Nt={activatorEvent:se,active:{id:Fe,data:Xe.data,rect:P}};Bi.unstable_batchedUpdates(()=>{pt?.(Nt),k(Bc.Initializing),C({type:es.DragStart,initialCoordinates:fe,active:Fe}),w({type:"onDragStart",event:Nt}),V(Qe.current),W(se)})},onMove(fe){C({type:es.DragMove,coordinates:fe})},onEnd:ge(es.DragEnd),onCancel:ge(es.DragCancel)});Qe.current=Pe;function ge(fe){return async function(){const{active:Xe,collisions:pt,over:Nt,scrollAdjustedTranslate:St}=xe.current;let Ht=null;if(Xe&&St){const{cancelDrop:on}=ne.current;Ht={activatorEvent:se,active:Xe,collisions:pt,delta:St,over:Nt},fe===es.DragEnd&&typeof on=="function"&&await Promise.resolve(on(Ht))&&(fe=es.DragCancel)}q.current=null,Bi.unstable_batchedUpdates(()=>{C({type:fe}),k(Bc.Uninitialized),Be(null),V(null),W(null),Qe.current=null;const on=fe===es.DragEnd?"onDragEnd":"onDragCancel";if(Ht){const cn=ne.current[on];cn?.(Ht),w({type:on,event:Ht})}})}}},[T]),ht=h.useCallback((de,D)=>(B,ie)=>{const ue=B.nativeEvent,se=T.get(ie);if(q.current!==null||!se||ue.dndKit||ue.defaultPrevented)return;const Pe={active:se};de(B,D.options,Pe)===!0&&(ue.dndKit={capturedBy:D.sensor},q.current=ie,ct(B,D))},[T,ct]),je=rje(u,ht);fje(u),Ro(()=>{qe&&A===Bc.Initializing&&k(Bc.Initialized)},[qe,A]),h.useEffect(()=>{const{onDragMove:de}=ne.current,{active:D,activatorEvent:B,collisions:ie,over:ue}=xe.current;if(!D||!B)return;const se={active:D,activatorEvent:B,collisions:ie,delta:{x:Ue.x,y:Ue.y},over:ue};Bi.unstable_batchedUpdates(()=>{de?.(se),w({type:"onDragMove",event:se})})},[Ue.x,Ue.y]),h.useEffect(()=>{const{active:de,activatorEvent:D,collisions:B,droppableContainers:ie,scrollAdjustedTranslate:ue}=xe.current;if(!de||q.current==null||!D||!ue)return;const{onDragOver:se}=ne.current,Pe=ie.get(gt),ge=Pe&&Pe.rect.current?{id:Pe.id,rect:Pe.rect.current,data:Pe.data,disabled:Pe.disabled}:null,fe={active:de,activatorEvent:D,collisions:B,delta:{x:ue.x,y:ue.y},over:ge};Bi.unstable_batchedUpdates(()=>{Be(ge),se?.(fe),w({type:"onDragOver",event:fe})})},[gt]),Ro(()=>{xe.current={activatorEvent:X,active:I,activeNode:Se,collisionRect:Ie,collisions:Ge,droppableRects:ye,draggableNodes:T,draggingNode:Ae,draggingNodeRect:Re,droppableContainers:R,over:ve,scrollableAncestors:Je,scrollAdjustedTranslate:Ue},P.current={initial:Re,translated:Ie}},[I,Se,Ge,Ie,T,Ae,Re,ye,R,ve,Je,Ue]),tje({...ke,delta:M,draggingRect:Ie,pointerCoordinates:le,scrollableAncestors:Je,scrollableAncestorRects:H});const Ze=h.useMemo(()=>({active:I,activeNode:Se,activeNodeRect:qe,activatorEvent:X,collisions:Ge,containerNodeRect:Ce,dragOverlay:Ee,draggableNodes:T,droppableContainers:R,droppableRects:ye,over:ve,measureDroppableContainers:pe,scrollableAncestors:Je,scrollableAncestorRects:H,measuringConfiguration:U,measuringScheduled:Ne,windowRect:tt}),[I,Se,qe,X,Ge,Ce,Ee,T,R,ye,ve,pe,Je,H,U,Ne,tt]),ce=h.useMemo(()=>({activatorEvent:X,activators:je,active:I,activeNodeRect:qe,ariaDescribedById:{draggable:oe},dispatch:C,draggableNodes:T,over:ve,measureDroppableContainers:pe}),[X,je,I,qe,C,oe,T,ve,pe]);return bt.createElement(bV.Provider,{value:S},bt.createElement(tj.Provider,{value:ce},bt.createElement(DV.Provider,{value:Ze},bt.createElement(OV.Provider,{value:Te},d)),bt.createElement(Cje,{disabled:l?.restoreFocus===!1})),bt.createElement(SNe,{...l,hiddenTextDescribedById:oe}));function J(){const de=Q?.autoScrollEnabled===!1,D=typeof c=="object"?c.enabled===!1:c===!1,B=_&&!de&&!D;return typeof c=="object"?{...c,enabled:B}:{enabled:B}}}),Eje=h.createContext(null),lR="button",kje="Draggable";function Lje(e){let{id:t,data:a,disabled:s=!1,attributes:r}=e;const i=Ox(kje),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=h.useContext(tj),{role:x=lR,roleDescription:v="draggable",tabIndex:N=0}=r??{},b=c?.id===t,C=h.useContext(b?OV:Eje),[w,S]=Mv(),[A,k]=Mv(),_=hje(o,t),E=Cp(a);Ro(()=>(f.set(t,{id:t,key:i,node:w,activatorNode:A,data:E}),()=>{const M=f.get(t);M&&M.key===i&&f.delete(t)}),[f,t]);const T=h.useMemo(()=>({role:x,tabIndex:N,"aria-disabled":s,"aria-pressed":b&&x===lR?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[s,x,N,b,v,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:T,isDragging:b,listeners:s?void 0:_,node:w,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:C}}function Pje(){return h.useContext(DV)}const Dje="Droppable",Oje={timeout:25};function Mje(e){let{data:t,disabled:a=!1,id:s,resizeObserverConfig:r}=e;const i=Ox(Dje),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=h.useContext(tj),u=h.useRef({disabled:a}),f=h.useRef(!1),p=h.useRef(null),x=h.useRef(null),{disabled:v,updateMeasurementsFor:N,timeout:b}={...Oje,...r},C=Cp(N??s),w=h.useCallback(()=>{if(!f.current){f.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),x.current=null},b)},[b]),S=ej({callback:w,disabled:v||!o}),A=h.useCallback((T,M)=>{S&&(M&&(S.unobserve(M),f.current=!1),T&&S.observe(T))},[S]),[k,_]=Mv(A),E=Cp(t);return h.useEffect(()=>{!S||!k.current||(S.disconnect(),f.current=!1,S.observe(k.current))},[k,S]),h.useEffect(()=>(l({type:es.RegisterDroppable,element:{id:s,key:i,disabled:a,node:k,rect:p,data:E}}),()=>l({type:es.UnregisterDroppable,key:i,id:s})),[s]),h.useEffect(()=>{a!==u.current.disabled&&(l({type:es.SetDroppableDisabled,id:s,key:i,disabled:a}),u.current.disabled=a)},[s,i,a,l]),{active:o,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:_}}function W4(e,t,a){const s=e.slice();return s.splice(a<0?s.length+a:a,0,s.splice(t,1)[0]),s}function Ije(e,t){return e.reduce((a,s,r)=>{const i=t.get(s);return i&&(a[r]=i),a},Array(e.length))}function By(e){return e!==null&&e>=0}function $je(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}function Rje(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const V4=e=>{let{rects:t,activeIndex:a,overIndex:s,index:r}=e;const i=W4(t,s,a),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},MV="Sortable",IV=bt.createContext({activeIndex:-1,containerId:MV,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:V4,disabled:{draggable:!1,droppable:!1}});function zje(e){let{children:t,id:a,items:s,strategy:r=V4,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=Pje(),f=Ox(MV,a),p=l.rect!==null,x=h.useMemo(()=>s.map(_=>typeof _=="object"&&"id"in _?_.id:_),[s]),v=o!=null,N=o?x.indexOf(o.id):-1,b=d?x.indexOf(d.id):-1,C=h.useRef(x),w=!$je(x,C.current),S=b!==-1&&N===-1||w,A=Rje(i);Ro(()=>{w&&v&&u(x)},[w,x,v,u]),h.useEffect(()=>{C.current=x},[x]);const k=h.useMemo(()=>({activeIndex:N,containerId:f,disabled:A,disableTransforms:S,items:x,overIndex:b,useDragOverlay:p,sortedRects:Ije(x,c),strategy:r}),[N,f,A.draggable,A.droppable,S,x,b,c,p,r]);return bt.createElement(IV.Provider,{value:k},t)}const Uje=e=>{let{id:t,items:a,activeIndex:s,overIndex:r}=e;return W4(a,s,r).indexOf(t)},Fje=e=>{let{containerId:t,isSorting:a,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&r===o?!1:a?!0:o!==r&&t===c},Bje={duration:200,easing:"ease"},$V="transform",Hje=_p.Transition.toString({property:$V,duration:0,easing:"linear"}),qje={roleDescription:"sortable"};function Gje(e){let{disabled:t,index:a,node:s,rect:r}=e;const[i,o]=h.useState(null),l=h.useRef(a);return Ro(()=>{if(!t&&a!==l.current&&s.current){const c=r.current;if(c){const d=eh(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}a!==l.current&&(l.current=a)},[t,a,s,r]),h.useEffect(()=>{i&&o(null)},[i]),i}function Wje(e){let{animateLayoutChanges:t=Fje,attributes:a,disabled:s,data:r,getNewIndex:i=Uje,id:o,strategy:l,resizeObserverConfig:c,transition:d=Bje}=e;const{items:u,containerId:f,activeIndex:p,disabled:x,disableTransforms:v,sortedRects:N,overIndex:b,useDragOverlay:C,strategy:w}=h.useContext(IV),S=Vje(s,x),A=u.indexOf(o),k=h.useMemo(()=>({sortable:{containerId:f,index:A,items:u},...r}),[f,r,A,u]),_=h.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:E,node:T,isOver:M,setNodeRef:R}=Mje({id:o,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:z,activatorEvent:P,activeNodeRect:I,attributes:q,setNodeRef:Q,listeners:V,isDragging:X,over:W,setActivatorNodeRef:ne,transform:oe}=Lje({id:o,data:k,attributes:{...qje,...a},disabled:S.draggable}),K=mNe(R,Q),U=!!z,ye=U&&!v&&By(p)&&By(b),pe=!C&&X,Ne=pe&&ye?oe:null,Oe=ye?Ne??(l??w)({rects:N,activeNodeRect:I,activeIndex:p,overIndex:b,index:A}):null,ke=By(p)&&By(b)?i({id:o,items:u,activeIndex:p,overIndex:b}):A,he=z?.id,qe=h.useRef({activeId:he,items:u,newIndex:ke,containerId:f}),Ce=u!==qe.current.items,xe=t({active:z,containerId:f,isDragging:X,isSorting:U,id:o,index:A,items:u,newIndex:qe.current.newIndex,previousItems:qe.current.items,previousContainerId:qe.current.containerId,transition:d,wasDragging:qe.current.activeId!=null}),ee=Gje({disabled:!xe,index:A,node:T,rect:E});return h.useEffect(()=>{U&&qe.current.newIndex!==ke&&(qe.current.newIndex=ke),f!==qe.current.containerId&&(qe.current.containerId=f),u!==qe.current.items&&(qe.current.items=u)},[U,ke,f,u]),h.useEffect(()=>{if(he===qe.current.activeId)return;if(he!=null&&qe.current.activeId==null){qe.current.activeId=he;return}const Ae=setTimeout(()=>{qe.current.activeId=he},50);return()=>clearTimeout(Ae)},[he]),{active:z,activeIndex:p,attributes:q,data:k,rect:E,index:A,newIndex:ke,items:u,isOver:M,isSorting:U,isDragging:X,listeners:V,node:T,overIndex:b,over:W,setNodeRef:K,setActivatorNodeRef:ne,setDroppableNodeRef:R,setDraggableNodeRef:Q,transform:ee??Oe,transition:Ee()};function Ee(){if(ee||Ce&&qe.current.newIndex===A)return Hje;if(!(pe&&!F4(P)||!d)&&(U||xe))return _p.Transition.toString({...d,property:$V})}}function Vje(e,t){var a,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function Rv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Qje=[vn.Down,vn.Right,vn.Up,vn.Left],Yje=(e,t)=>{let{context:{active:a,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(Qje.includes(e.code)){if(e.preventDefault(),!a||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=r.get(f.id);if(p)switch(e.code){case vn.Down:s.top<p.top&&c.push(f);break;case vn.Up:s.top>p.top&&c.push(f);break;case vn.Left:s.left>p.left&&c.push(f);break;case vn.Right:s.left<p.left&&c.push(f);break}});const d=ENe({collisionRect:s,droppableRects:r,droppableContainers:c});let u=NV(d,"id");if(u===o?.id&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(a.id),p=i.get(u),x=p?r.get(p.id):null,v=p?.node.current;if(v&&x&&f&&p){const b=JN(v).some((_,E)=>l[E]!==_),C=RV(f,p),w=Kje(f,p),S=b||!C?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},A={x:x.left,y:x.top};return S.x&&S.y?A:Sp(A,S)}}}};function RV(e,t){return!Rv(e)||!Rv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Kje(e,t){return!Rv(e)||!Rv(t)||!RV(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Lo=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,_E=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",Xje=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},Zje=(e,t)=>{if(!e||e.length===0)return;const a=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:_E(c.created_at)})),s=Object.keys(a[0]).join(","),r=a.map(c=>Object.values(c).map(d=>typeof d=="string"?`"${d.replace(/"/g,'""')}"`:d).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},AE=({label:e,count:t,value:a,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:d,conversionRate:u,compact:f=!1})=>n.jsxs("div",{className:"flex flex-col items-center w-full",children:[u&&n.jsx("div",{className:`flex justify-center relative z-0 ${f?"-my-1":"-my-2 mb-1"}`,children:n.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${f?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[n.jsx(kT,{className:"mr-1"})," ",u,"%"]})}),n.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[n.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),n.jsx("span",{className:`${f?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),n.jsxs("div",{className:`${f?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[n.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:n.jsx("span",{className:`z-10 drop-shadow-md ${f?"text-xs":"text-sm"}`,children:l?t:Lo(a,d)})}),!l&&c>0&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/a*parseFloat(s)}%`}})]})]})]}),Jje=({id:e,children:t})=>{const{attributes:a,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=Wje({id:e}),c={transform:_p.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return n.jsx("div",{ref:r,style:c,className:"h-full",children:bt.cloneElement(t,{dragHandleProps:{...a,...s}})})},e1e=({user:e,metrics:t,stages:a,currencySymbol:s,target:r,dragHandleProps:i})=>{t.filteredDeals.reduce((f,p)=>f+parseFloat(p.amount||0)*((p.probability||0)/100),0);const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,d=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,u=r>0?o/r*100:0;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[n.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),n.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[n.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",d,"%"]}),n.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Lo(l,s)]})]})]})]}),i&&n.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:n.jsx(kie,{size:16})})]}),r>0?n.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[n.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),n.jsxs("span",{className:u>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[u.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${u>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(u,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Lo(o,s)})]}),n.jsxs("span",{children:["Target: ",Lo(r,s)]})]})]}):n.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),n.jsx("div",{className:"flex-grow space-y-2",children:a.map((f,p)=>{const x=t.metrics[f.key];let v=null;if(p>0){const N=a[p-1].key,b=t.metrics[N].count;b>0&&(v=(x.count/b*100).toFixed(0))}return n.jsx(AE,{label:f.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!f.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:v,compact:!0,onClick:()=>{},isActive:!1},f.key)})})]})},t1e=({data:e,stageKey:t,currencySymbol:a})=>{const s=wt(),[r,i]=h.useState({key:null,direction:"desc"}),o=t==="LEADS",l=t==="CLOSED_WON",c=t==="CLOSED_LOST",d=!o&&!l&&!c,u=h.useMemo(()=>r.key?[...e].sort((x,v)=>{let N=x[r.key],b=v[r.key];return(r.key==="amount"||r.key==="probability")&&(N=parseFloat(x[r.key]||0),b=parseFloat(v[r.key]||0)),N<b?r.direction==="asc"?-1:1:N>b?r.direction==="asc"?1:-1:0}):e,[e,r]),f=x=>{i({key:x,direction:r.key===x&&r.direction==="desc"?"asc":"desc"})},p=({columnKey:x})=>r.key!==x?n.jsx(kT,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):r.direction==="asc"?n.jsx(jie,{className:"inline ml-1 text-blue-600"}):n.jsx(kT,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[n.jsx(Jk,{size:48,className:"mb-4 opacity-50"}),n.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:n.jsx("div",{className:"overflow-x-auto flex-grow",children:n.jsxs("table",{className:"w-full text-left border-collapse",children:[n.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:n.jsxs("tr",{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>f("name"),children:["Name ",n.jsx(p,{columnKey:"name"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),o&&n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>f("amount"),children:["Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>f("probability"),children:["Prob. ",n.jsx(p,{columnKey:"probability"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),l&&n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>f("amount"),children:["Booked ",n.jsx(p,{columnKey:"amount"})]}),c&&n.jsxs(n.Fragment,{children:[n.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>f("amount"),children:["Lost Value ",n.jsx(p,{columnKey:"amount"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),n.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:u.map(x=>{const v=o?0:Xje(x.stage_updated_at||x.created_at),N=v>30&&d;return n.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>s(o?`/admin/leads/${x.id}`:`/admin/deals/info?id=${x.id}`),children:[n.jsxs("td",{className:"p-4",children:[n.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:o?`${x.first_name} ${x.last_name}`:x.name}),n.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:_E(x.created_at)})]}),n.jsx("td",{className:"p-4 text-sm text-gray-600",children:o?x.company_name:x.account?.name}),o&&n.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[x.email&&n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(na,{className:"mr-1"})," ",x.email]}),x.phone&&n.jsxs("div",{className:"flex items-center",children:[n.jsx(Lt,{className:"mr-1"})," ",x.phone]})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Lo(x.amount,a)}),n.jsx("td",{className:"p-4 text-center",children:n.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${x.probability>=80?"bg-green-100 text-green-700":x.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[x.probability,"%"]})}),n.jsx("td",{className:"p-4 text-center",children:N?n.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[n.jsx(Gi,{size:14,className:"mr-1"}),n.jsxs("span",{className:"text-xs font-bold",children:[v,"d"]})]}):n.jsxs("span",{className:"text-xs text-gray-400",children:[v,"d"]})})]}),l&&n.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Lo(x.amount,a)}),c&&n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Lo(x.amount,a)}),n.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:_E(x.stage_updated_at)})]}),n.jsx("td",{className:"p-4 text-right",children:n.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[n.jsx(nn,{className:"mr-1"}),o?x.lead_owner?.first_name||x.owner?.first_name||x.assigned_to?.first_name||"Unassigned":x.assigned_deals?.first_name||x.deal_creator?.first_name||"Unassigned"]})})]},x.id)})})]})})})},n1e=({leads:e,deals:t,currencySymbol:a,targets:s=[]})=>{const[r,i]=h.useState("ALL"),[o,l]=h.useState("ALL"),[c,d]=h.useState("ALL"),[u,f]=h.useState("AGGREGATE"),[p,x]=h.useState([]),v=_Ne(K6(G4,{activationConstraint:{distance:5}}),K6(H4,{coordinateGetter:Yje})),N=h.useMemo(()=>{const E=new Date;if(o==="THIS_MONTH")return{start:new Date(E.getFullYear(),E.getMonth(),1),end:new Date(E.getFullYear(),E.getMonth()+1,0)};if(o==="THIS_QUARTER"){const T=Math.floor(E.getMonth()/3)*3;return{start:new Date(E.getFullYear(),T,1),end:new Date(E.getFullYear(),T+3,0)}}return o==="THIS_YEAR"?{start:new Date(E.getFullYear(),0,1),end:new Date(E.getFullYear(),11,31)}:null},[o]),b=h.useMemo(()=>s.filter(E=>{if(c!=="ALL"){const T=E.user?.id||E.user_id||E.assigned_to;if(parseInt(T)!==parseInt(c))return!1}if(N){const T=new Date(E.start_date),M=new Date(E.end_date);return T<=N.end&&M>=N.start}return!0}),[s,c,N]),C=h.useMemo(()=>{const E=new Map,T=M=>{M&&M.id&&E.set(M.id,`${M.first_name} ${M.last_name}`)};return e.forEach(M=>T(M.lead_owner||M.owner||M.assigned_to)),t.forEach(M=>{T(M.assigned_deals),T(M.deal_creator)}),Array.from(E.entries()).map(([M,R])=>({id:M,name:R}))},[e,t]),w=h.useMemo(()=>{const E=new Date;let T=null;o==="THIS_MONTH"?T=new Date(E.getFullYear(),E.getMonth(),1):o==="THIS_QUARTER"?T=new Date(E.getFullYear(),Math.floor(E.getMonth()/3)*3,1):o==="THIS_YEAR"&&(T=new Date(E.getFullYear(),0,1));const M=V=>{const X=new Date(V.created_at);if(T&&X<T)return!1;if(c!=="ALL"){const W=parseInt(c);return!!(V.lead_owner&&(V.lead_owner.id||V.lead_owner)===W||V.assigned_to?.id===W||V.owner?.id===W||V.assigned_deals?.id===W||V.created_by===W)}return!0},R=e.filter(M),z=t.filter(M),P=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],I=(V,X)=>{const W=P.reduce((oe,K)=>(oe[K.key]={...K,count:0,value:0,weightedValue:0,items:[]},oe),{});W.LEADS.count=V.length,W.LEADS.items=V,X.forEach(oe=>{const K=(oe.stage||"").toUpperCase();if(W[K]){W[K].count++,W[K].items.push(oe);const U=parseFloat(oe.amount||0);W[K].value+=U,W[K].weightedValue+=U*((oe.probability||0)/100)}});const ne=Math.max(...Object.values(W).map(oe=>oe.count),1);return Object.keys(W).forEach(oe=>{const K=W[oe];K.width=K.count===0?"0%":`${Math.max(K.count/ne*100,15)}%`}),{metrics:W,filteredDeals:X,filteredLeads:V}},q=I(R,z),Q=[];return u==="COMPARE"&&(c==="ALL"?C:C.filter(X=>X.id===parseInt(c))).forEach(X=>{const W=parseInt(X.id),ne=R.filter(ye=>(ye.lead_owner?.id||ye.lead_owner||ye.assigned_to?.id||ye.owner?.id)===W),oe=z.filter(ye=>(ye.assigned_deals?.id||ye.created_by)===W),K=b.find(ye=>{const pe=ye.user?.id||ye.user_id||ye.assigned_to;return parseInt(pe)===W}),U=parseFloat(K?.amount||K?.target_amount||K?.value||0);(ne.length>0||oe.length>0||U>0)&&Q.push({user:X,data:I(ne,oe),target:U})}),{stages:P,aggregate:q,userGroups:Q}},[t,e,o,c,u,C,b]),S=h.useMemo(()=>{if(!w.userGroups.length)return[];const E=[...w.userGroups];return p.length>0&&E.sort((T,M)=>{const R=p.indexOf(T.user.id),z=p.indexOf(M.user.id);return R!==-1&&z!==-1?R-z:R!==-1?-1:z!==-1?1:0}),E},[w.userGroups,p]),A=E=>{const{active:T,over:M}=E;T.id!==M.id&&x(R=>{const z=S.map(q=>q.user.id),P=z.indexOf(T.id),I=z.indexOf(M.id);return W4(z,P,I)})},k=h.useMemo(()=>{const E=b.reduce((W,ne)=>W+parseFloat(ne.amount||ne.target_amount||ne.value||0),0),T=w.aggregate.metrics,M=T.CLOSED_WON?.value||0,R=T.CLOSED_WON?.count||0,z=T.CLOSED_LOST?.value||0,P=T.CLOSED_LOST?.count||0,I=T.LEADS?.count||0,q=E>0?M/E*100:0,Q=R+P,V=Q>0?R/Q*100:0,X=I>0?R/I*100:0;return{totalTarget:E,totalWon:M,totalLost:z,progress:q,winRate:V,conversionRate:X}},[b,w]),_=h.useMemo(()=>r==="ALL"?[]:w.aggregate.metrics[r]?.items||[],[r,w]);return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[n.jsx(Jk,{className:"mr-2"})," Pipeline Intelligence"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"Analyze pipeline velocity and bottlenecks."})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[n.jsxs("select",{value:o,onChange:E=>l(E.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Time"}),n.jsx("option",{value:"THIS_MONTH",children:"This Month"}),n.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),n.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),n.jsxs("select",{value:c,onChange:E=>d(E.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"ALL",children:"All Users"}),C.map(E=>n.jsx("option",{value:E.id,children:E.name},E.id))]}),n.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[n.jsx("button",{onClick:()=>f("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),n.jsx("button",{onClick:()=>f("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${u==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]}),u==="COMPARE"?n.jsx(Tje,{sensors:v,collisionDetection:TNe,onDragEnd:A,children:n.jsx(zje,{items:S.map(E=>E.user.id),strategy:V4,children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[S.map(E=>n.jsx(Jje,{id:E.user.id,children:n.jsx(e1e,{user:E.user,metrics:E.data,stages:w.stages.filter(T=>T.key!=="CLOSED_LOST"),currencySymbol:a,target:E.target})},E.user.id)),S.length===0&&n.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[n.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),w.stages.filter(E=>E.key!=="CLOSED_LOST").map((E,T)=>{const M=w.aggregate.metrics[E.key];let R=null;if(T>0){const z=w.stages[T-1].key,P=w.aggregate.metrics[z].count;P>0&&(R=(M.count/P*100).toFixed(0))}return n.jsx(AE,{label:E.label,count:M.count,value:M.value,width:M.width,color:M.color,isLead:!E.isDeal,weightedValue:M.weightedValue,currencySymbol:a,isActive:r===E.key,conversionRate:R,onClick:()=>i(E.key)},E.key)})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[n.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[n.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[n.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.winRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[n.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),n.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[k.conversionRate.toFixed(0),"%"]})]}),n.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[n.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),n.jsx("p",{className:"text-sm font-bold text-gray-800",children:Lo(k.totalLost,a)})]})]}),n.jsx(AE,{label:"Closed Lost",count:w.aggregate.metrics.CLOSED_LOST.count,value:w.aggregate.metrics.CLOSED_LOST.value,width:w.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:a,isActive:r==="CLOSED_LOST",onClick:()=>i("CLOSED_LOST")},"CLOSED_LOST"),n.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[n.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[n.jsx(or,{className:"mr-1"})," Total Target"]}),n.jsxs("span",{className:k.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[k.progress.toFixed(0),"%"]})]}),n.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:n.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${k.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(k.progress,100)}%`}})}),n.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[n.jsxs("span",{children:["Achieved: ",n.jsx("span",{className:"text-gray-700 font-medium",children:Lo(k.totalWon,a)})]}),n.jsxs("span",{children:["Goal: ",Lo(k.totalTarget,a)]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:r==="ALL"?n.jsx("span",{children:"Select a stage to view details"}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${w.aggregate.metrics[r]?.color}`}),w.stages.find(E=>E.key===r)?.label," Details",n.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[_.length," records"]})]})}),r!=="ALL"&&_.length>0&&n.jsxs("button",{onClick:()=>Zje(_,`Funnel_${r}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[n.jsx(Yl,{className:"mr-1"})," Export"]})]}),r==="ALL"?n.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[n.jsx(Tie,{size:48,className:"mb-4 text-blue-100"}),n.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):n.jsx(t1e,{data:_,stageKey:r,currencySymbol:a})]})]})]})},a1e=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,s1e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-a);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},r1e=({currencySymbol:e=""})=>{const[t,a]=h.useState("month"),[s,r]=h.useState([]),[i,o]=h.useState([]),[l,c]=h.useState([]),[d,u]=h.useState(!1),f=new Date,p=f.getFullYear(),x=f.getMonth()+1,v=s1e(f),N=h.useCallback(async()=>{u(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const A=await ae.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(A.data?.entries||[]);const k=new URLSearchParams;k.append("period_type","ANNUAL"),k.append("period_year",p);const _=await ae.get(`/targets/leaderboard?${k.toString()}`).catch(()=>({data:{entries:[]}}));c(_.data?.entries||[]);const E=new Date,T=new Date;T.setDate(T.getDate()-7);const M=new URLSearchParams;M.append("start_date",T.toISOString().split("T")[0]),M.append("end_date",E.toISOString().split("T")[0]);const R=await ae.get(`/targets/leaderboard?${M.toString()}`).catch(()=>({data:{entries:[]}}));r(R.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{u(!1)}},[p,x]);h.useEffect(()=>{N()},[N]);const b=h.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),C=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsx("div",{className:"flex justify-between items-center mb-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ad,{className:"text-blue-500",size:20}),n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),n.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:C.map(S=>n.jsx("button",{onClick:()=>a(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),d?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):b.length>0?n.jsx("div",{className:"space-y-3 flex-1",children:b.map((S,A)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(A)}`,children:A+1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),n.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),n.jsx("p",{className:"text-sm font-bold text-gray-900",children:a1e(S.achieved_amount||0,e)})]},S.user_id||A))}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[n.jsx(Et,{size:32,className:"mb-2 opacity-50"}),n.jsx("p",{className:"text-sm",children:"No data for this period"})]}),n.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:n.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${v}, ${p}`,t==="month"&&`${f.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},i1e=e=>n.jsx(Gt,{...e}),o1e=e=>n.jsx(xd,{...e}),Q4=e=>n.jsx(Gs,{...e}),l1e=e=>n.jsx(ax,{...e}),c1e=e=>n.jsx(Fw,{...e}),d1e=e=>n.jsx(Et,{...e}),u1e=e=>n.jsx(Lt,{...e}),m1e=e=>n.jsx(Hw,{...e}),zV=e=>n.jsx(Bw,{...e}),f1e=e=>n.jsx(aa,{...e}),UV=e=>n.jsx(nn,{...e}),h1e=e=>n.jsx(Yn,{...e}),FV=e=>n.jsx(tn,{...e}),g1e=e=>n.jsx(hn,{...e}),BV=e=>n.jsx(or,{...e}),p1e=e=>n.jsx(pa,{...e}),x1e=e=>n.jsx(Et,{...e}),y1e=e=>n.jsx($s,{...e}),b1e=e=>n.jsx(Xl,{...e}),v1e=e=>n.jsx(As,{...e}),HV=(e,t="")=>{const a=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(a).replace(/^/,`${t} `)},w1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},N1e=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},j1e=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},C1e=e=>{switch(e){case"call":return{Icon:u1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:m1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:d1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},S1e=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},_1e=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:o1e,label:"Account"},{icon:UV,label:"Contact"},{icon:h1e,label:"Leads"},{icon:FV,label:"Deals"},{icon:g1e,label:"Quotes"},{icon:BV,label:"Target"},{icon:p1e,label:"Task"},{icon:x1e,label:"Meeting"},{icon:y1e,label:"Call"},{icon:v1e,label:"Audit"},{icon:b1e,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(i1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[f.label]&&r(x[f.label])},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},A1e=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},T1e=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(zV,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(A1e,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},E1e=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),k1e=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(!e||e.length===0){const N=new Date().getMonth(),b=[],C=[];for(let w=0;w<=N;w++)b.push(s[w]),C.push(0);return{labels:b,revenues:C,maxRevenue:0}}const l={};e.forEach(v=>{const N=v.close_date||v.closeDate||null,b=v.stage||"",C=b.toUpperCase()==="CLOSED_WON"||b==="CLOSED_WON";let w=v.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(N&&N!==null&&C&&S)try{let A=new Date(N);if(isNaN(A.getTime())){const k=String(N).split("T")[0];A=new Date(k+"T00:00:00")}if(!isNaN(A.getTime())){const k=A.getFullYear(),_=A.getMonth()+1,E=`${k}-${String(_).padStart(2,"0")}`;l[E]||(l[E]=0),l[E]+=w}}catch(A){console.error("Error parsing deal date:",N,A)}});const c=Object.keys(l).map(v=>parseInt(v.split("-")[0])),d=c.length>0?[...new Set(c)].sort():[],u=new Date().getFullYear(),f=[],p=[];for(let v=0;v<12;v++){const N=`${u}-${String(v+1).padStart(2,"0")}`;f.push(s[v]),p.push(l[N]||0)}if(d.length>0){const v=Math.max(...d);if(v>u)for(let N=u+1;N<=v;N++)for(let b=0;b<12;b++){const C=`${N}-${String(b+1).padStart(2,"0")}`,w=l[C]||0;f.push(`${s[b]} ${N}`),p.push(w)}}const x=Math.max(...p,1);return{labels:f,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/admin/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(zV,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?n.jsx(XN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},o2=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},L1e=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=j1e(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},P1e=({name:e,amount:t,account:a,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const d=wt(),f={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=N1e(f),v=w1e(i||r),N=v>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",b=parseFloat(t||0),C=l?b>=l?"up":"down":"up",w=C==="up"?l1e:c1e,S=C==="up"?"text-green-400":"text-red-400",A=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&d(`/admin/deals/info?id=${o}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),N&&n.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[n.jsx(Q4,{size:10,className:"mr-1"})," ",v," days stuck"]})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A}),n.jsx("div",{className:"mt-1 flex items-center space-x-2",children:n.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:f})})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:HV(b,c)}),n.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},D1e=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=C1e(f),{text:N,bg:b}=S1e(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),M=E-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/admin/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/admin/meetings/info?id=${o}`)):d("/admin/tasks"):d(f==="call"?`/admin/calls/info?id=${o}`:f==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(Q4,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(UV,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},O1e=()=>{const e=wt(),{user:t}=en(),a=t?.company?.currency||"",[s,r]=h.useState([]),[i,o]=h.useState(0),[l,c]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[d,u]=h.useState([]),[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState([]),[C,w]=h.useState([]),[S,A]=h.useState(!0),[k,_]=h.useState(null),[E,T]=h.useState(""),[M,R]=h.useState([]),[z,P]=h.useState([]),[I,q]=h.useState([]),[Q,V]=h.useState(new Date),X=h.useRef(null);h.useRef(null);const W=h.useMemo(()=>{try{if(!E.trim())return[];const U=E.toLowerCase().trim(),ye=[];return Array.isArray(M)&&M.forEach(pe=>{const Ne=`${pe.first_name||""} ${pe.last_name||""}`.trim().toLowerCase(),Se=(pe.company_name||"").toLowerCase(),Oe=(pe.email||"").toLowerCase(),ke=(pe.phone||"").toLowerCase();(Ne.includes(U)||Se.includes(U)||Oe.includes(U)||ke.includes(U))&&ye.push({id:pe.id,name:`${pe.first_name||""} ${pe.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:pe.company_name||"No company",route:`/admin/leads/${pe.id}`})}),Array.isArray(z)&&z.forEach(pe=>{const Ne=(pe.name||"").toLowerCase(),Se=(pe.account?.name||"").toLowerCase(),Oe=(pe.description||"").toLowerCase();(Ne.includes(U)||Se.includes(U)||Oe.includes(U))&&ye.push({id:pe.id,name:pe.name||"Unnamed Deal",type:"Deal",details:pe.account?.name||"No account",route:`/admin/deals/info?id=${pe.id}`})}),Array.isArray(I)&&I.forEach(pe=>{const Ne=(pe.name||"").toLowerCase(),Se=(pe.email||"").toLowerCase(),Oe=(pe.phone||"").toLowerCase(),ke=(pe.website||"").toLowerCase();(Ne.includes(U)||Se.includes(U)||Oe.includes(U)||ke.includes(U))&&ye.push({id:pe.id,name:pe.name||"Unnamed Account",type:"Account",details:pe.email||pe.phone||"No contact info",route:"/admin/accounts"})}),ye.slice(0,10)}catch(U){return console.error("Error in search:",U),[]}},[E,M,z,I]),ne=U=>{U.route&&(e(U.route),T(""))},oe=h.useCallback(async()=>{A(!0),_(null);try{const[U,ye,pe,Ne,Se,Oe,ke,he]=await Promise.all([ae.get("/leads/admin/getLeads").catch(_e=>(console.error("Error fetching leads:",_e),{data:[]})),ae.get("/deals/admin/fetch-all").catch(_e=>(console.error("Error fetching deals:",_e),{data:[]})),ae.get("/accounts/admin/fetch-all").catch(_e=>(console.error("Error fetching accounts:",_e),{data:[]})),ae.get("/tasks/all").catch(_e=>(console.error("Error fetching tasks:",_e),{data:[]})),ae.get("/meetings/admin/fetch-all").catch(_e=>(console.error("Error fetching meetings:",_e),{data:[]})),ae.get("/calls/admin/fetch-all").catch(_e=>(console.error("Error fetching calls:",_e),{data:[]})),ae.get("/logs/read-all").catch(_e=>(console.error("Error fetching logs:",_e),{data:[]})),ae.get("/targets/admin/fetch-all").catch(_e=>(console.error("Error fetching targets:",_e),{data:[]}))]),qe=Array.isArray(U.data)?U.data:[],Ce=Array.isArray(ye.data)?ye.data:[],xe=Array.isArray(pe.data)?pe.data:[],ee=Array.isArray(Ne.data)?Ne.data:[],Ee=Array.isArray(Se.data)?Se.data:[],Ae=Array.isArray(Oe.data)?Oe.data:[],Re=Array.isArray(ke.data)?ke.data:[],et=Array.isArray(he.data)?he.data:[];R(qe),P(Ce),q(xe),r(et);const De=et.reduce((_e,te)=>{const Ue=te.amount||te.value||te.target_amount||0,Ie=parseFloat(typeof Ue=="string"?Ue.replace(/[^\d.-]/g,""):Ue);return _e+(isNaN(Ie)?0:Ie)},0);o(De),c({activeLeads:qe.filter(_e=>_e.status&&!["Lost","Converted"].includes(_e.status)).length,totalDeals:Ce.length,activeAccounts:xe.length,overdueTasks:ee.filter(_e=>!_e.dueDate||_e.status==="Completed"?!1:new Date(_e.dueDate)<new Date).length});const tt=[...qe].sort((_e,te)=>new Date(te.created_at||0)-new Date(_e.created_at||0)).slice(0,5);u(tt);const Je=[...Ce].sort((_e,te)=>new Date(te.created_at||0)-new Date(_e.created_at||0)).slice(0,5);p(Je);const H=[];Ae.forEach(_e=>{const te=_e.due_date||_e.call_time,Ue=(_e.status||"").toUpperCase();te&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(Ue)&&H.push({type:"Call",title:_e.subject||"Untitled Call",assignedTo:_e.assigned_to||(_e.call_assign_to?`${_e.call_assign_to.first_name||""} ${_e.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:te,priority:(_e.priority||"MEDIUM").toUpperCase(),id:_e.id,activityType:"call",fullData:_e})}),Ee.forEach(_e=>{const te=_e.dueDate||_e.start_time,Ue=(_e.status||"").toUpperCase();te&&!["COMPLETED","CANCELLED","DONE"].includes(Ue)&&H.push({type:"Meeting",title:_e.subject||_e.activity||"Untitled Meeting",assignedTo:_e.assignedTo||(_e.meet_assign_to?`${_e.meet_assign_to.first_name||""} ${_e.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:te,priority:(_e.priority||"MEDIUM").toUpperCase(),id:_e.id,activityType:"meeting",fullData:_e})});const be={HIGH:1,MEDIUM:2,LOW:3},le=H.sort((_e,te)=>{const Ue=be[_e.priority]||3,Ie=be[te.priority]||3;return Ue!==Ie?Ue-Ie:new Date(_e.scheduledDate||0)-new Date(te.scheduledDate||0)}).slice(0,5);v(le),w(Ce);const Z=[...Re].sort((_e,te)=>new Date(te.timestamp||0)-new Date(_e.timestamp||0));b(Z)}catch(U){console.error("Error fetching dashboard data:",U),_("Failed to load dashboard data. Please refresh the page.")}finally{A(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",oe(),X.current=setInterval(()=>{oe(),V(new Date)},3e4),()=>{X.current&&clearInterval(X.current)}),[oe]);const K=[{icon:f1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:BV,title:"Total Targets",value:HV(i,a),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:FV,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:Q4,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:k})}),n.jsx("div",{className:"mb-8",children:n.jsx(_1e,{searchQuery:E,onSearchChange:T,searchResults:W,onSearchResultClick:ne})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:K.map(U=>n.jsx(E1e,{...U,loading:S},U.title))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[n.jsx(T1e,{logs:N,loading:S}),n.jsx(r1e,{currencySymbol:a})]}),n.jsx("div",{className:"mb-8",children:n.jsx(n1e,{leads:M,deals:z,targets:s,currencySymbol:a})}),n.jsx("div",{className:"grid grid-cols-1 mb-8",children:n.jsx(k1e,{revenueData:C,loading:S})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(o2,{title:"Latest Leads",children:d.length>0?d.map((U,ye)=>n.jsx(L1e,{...U},U.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(o2,{title:"Latest Deals",children:f.length>0?f.map((U,ye)=>n.jsx(P1e,{...U,stage_updated_at:U.stage_updated_at,currencySymbol:a},U.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(o2,{title:"Upcoming Activities",children:x.length>0?x.map((U,ye)=>n.jsx(D1e,{...U},U.id||ye)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function rn({totalItems:e=0,pageSize:t=10,currentPage:a=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const d=e===0?1:Math.ceil(e/t),u=e===0?0:(a-1)*t+1,f=Math.min(a*t,e),p=a<=1||e===0,x=a>=d||e===0,v="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",N="bg-black text-white hover:bg-gray-900",b="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return n.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[n.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:u,"-",f," of ",e," ",c]}),i&&n.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[n.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),n.jsx("select",{value:t,onChange:C=>i(Number(C.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(C=>n.jsx("option",{value:C,children:C},C))})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[n.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${v} ${p?b:N}`,children:[n.jsx(_ie,{className:"text-base"}),"Prev"]}),n.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:a," of"," ",e===0?0:d]}),n.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${v} ${x?b:N}`,children:["Next",n.jsx(Dt,{className:"text-base"})]})]})]})}const M1e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I1e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,a,s)=>s?s.toUpperCase():a.toLowerCase()),cR=e=>{const t=I1e(e);return t.charAt(0).toUpperCase()+t.slice(1)},qV=(...e)=>e.filter((t,a,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===a).join(" ").trim(),$1e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var R1e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const z1e=h.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>h.createElement("svg",{ref:c,...R1e,width:t,height:t,stroke:e,strokeWidth:s?Number(a)*24/Number(t):a,className:qV("lucide",r),...!i&&!$1e(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>h.createElement(d,u)),...Array.isArray(i)?i:[i]]));const th=(e,t)=>{const a=h.forwardRef(({className:s,...r},i)=>h.createElement(z1e,{ref:i,iconNode:t,className:qV(`lucide-${M1e(cR(e))}`,`lucide-${e}`,s),...r}));return a.displayName=cR(e),a};const U1e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],F1e=th("globe",U1e);const B1e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],dR=th("lock",B1e);const H1e=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],q1e=th("message-circle",H1e);const G1e=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],W1e=th("message-square",G1e);const V1e=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Q1e=th("send",V1e);const Y1e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nj=th("x",Y1e);function Aa({comments:e=[],onAddComment:t,currentUser:a}){const[s,r]=h.useState(""),[i,o]=h.useState(!1),[l,c]=h.useState(!1),d=async u=>{if(u.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(f){console.error("Failed to add comment:",f)}finally{c(!1)}}};return n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[n.jsx(W1e,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&n.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),n.jsx("div",{className:"mt-4",children:e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(q1e,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),n.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):n.jsx("div",{className:"space-y-3",children:e.map(u=>n.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:u.comment_creator?.profile_picture?n.jsx("img",{src:`${u.comment_creator.profile_picture}`,alt:`${u.comment_creator?.first_name||u.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):u.comment_creator?.first_name?.[0]||u.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:u.comment_creator?.first_name||u.comment_creator?.email||"Unknown User"}),n.jsx("span",{className:"text-xs text-gray-400",children:new Date(u.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),u.is_private&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[n.jsx(dR,{className:"w-3 h-3"}),"Private"]})]}),n.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:u.comment})]})]},u.id))})}),n.jsxs("form",{onSubmit:d,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[n.jsx("div",{className:"relative",children:n.jsx("textarea",{value:s,onChange:u=>r(u.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),n.jsxs("div",{className:"flex items-center justify-between mt-3",children:[n.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(dR,{className:"w-4 h-4"}),"Private"]}):n.jsxs(n.Fragment,{children:[n.jsx(F1e,{className:"w-4 h-4"}),"Public"]})}),n.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[n.jsx(Q1e,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function K1e({relatedType:e,relatedId:t}){const a=await ae.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(a.data)?a.data:[]}async function X1e({relatedType:e,relatedId:t,comment:a,isPrivate:s}){return(await ae.post("/comments",{related_type:e,related_id:t,comment:a,is_private:!!s})).data}function Ta({relatedType:e,relatedId:t}){const[a,s]=h.useState([]),[r,i]=h.useState(!1),o=h.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await K1e({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=h.useCallback(async({comment:c,is_private:d})=>{!e||!t||(await X1e({relatedType:e,relatedId:t,comment:c,isPrivate:d}),await o())},[e,t,o]);return h.useEffect(()=>{o()},[o]),{comments:a,loading:r,refresh:o,addComment:l}}const l2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],c2={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},rr=e=>e?e.toUpperCase():"",d2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",Z1e=e=>{switch(rr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},J1e=e=>{switch(rr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function eCe(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(c2),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[E,T]=h.useState([]),[M,R]=h.useState([]),[z,P]=h.useState("Filter by Status"),[I,q]=h.useState(""),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState(1),[K,U]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,qe]=h.useState([]),[Ce,xe]=h.useState({}),[ee,Ee]=h.useState(null),{comments:Ae,addComment:Re,refresh:et}=Ta({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&et()},[x?.id,et]);const De=h.useCallback(async(Me=null)=>{w(!0);try{const vt=await ae.get("/accounts/admin/fetch-all"),$=[...Array.isArray(vt.data)?vt.data:[]].sort((me,Le)=>{const $e=me?.created_at||me?.updated_at||0,Ve=Le?.created_at||Le?.updated_at||0;return new Date(Ve)-new Date($e)});if(b($),Me){const me=$.find(Le=>Le.id===Me);v(me||null)}}catch(vt){console.error(vt),b([]),vt.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),tt=h.useCallback(async()=>{try{const Me=await ae.get("/users/all");A(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),Je=h.useCallback(async()=>{try{const Me=await ae.get("/territories/fetch");T(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&G.warn("Unable to load territories (permission denied).")}},[]),H=h.useCallback(async()=>{try{const Me=await ae.get("/accounts/admin/parent-companies");R(Array.isArray(Me.data)?Me.data:[])}catch(Me){console.error(Me),Me.response?.status===403&&G.warn("Unable to load parent companies (permission denied).")}},[]),be=h.useCallback(async Me=>{try{const vt=await ae.get(`/activities/accounts/${Me}`);xe(vt.data&&typeof vt.data=="object"?vt.data:{})}catch(vt){console.error(vt),vt.response?.status===404&&(console.warn("No activities found for this account."),xe({}))}},[]);h.useEffect(()=>{De(),tt(),Je(),H()},[De,tt,Je,H]),h.useEffect(()=>{oe(1)},[I,z,K]);const le=h.useMemo(()=>{const Me=I.toLowerCase(),vt=z;return N.filter(F=>{const $=F.name?.toLowerCase().includes(Me)||F.website?.toLowerCase().includes(Me)||F.phone_number?.toLowerCase().includes(Me)||F.industry?.toLowerCase().includes(Me)||F.parent_company?.toLowerCase().includes(Me)||F.territory?.name?.toLowerCase().includes(Me),me=vt==="Filter by Status"||rr(F.status)===rr(vt);return $&&me})},[N,I,z]),Z=Math.max(1,Math.ceil(le.length/K)||1);h.useEffect(()=>{oe(Me=>{const vt=Math.max(1,Math.ceil(le.length/K)||1);return Me>vt?vt:Me})},[le.length,K]);const _e=h.useMemo(()=>{const Me=(ne-1)*K;return le.slice(Me,Me+K)},[le,ne,K]),te=Me=>{if(Me.target.checked){const vt=_e.map(F=>F.id);qe(vt)}else qe([])},Ue=Me=>{qe(vt=>vt.includes(Me)?vt.filter(F=>F!==Me):[...vt,Me])},Ie=async()=>{he.length!==0&&V({title:"Delete Accounts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:he.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${he.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:he}})};le.length===0||(ne-1)*K+1,Math.min(ne*K,le.length);const Ge=()=>oe(Me=>Math.max(Me-1,1)),gt=()=>oe(Me=>Math.min(Me+1,Z));h.useEffect(()=>{x&&Se(rr(x.status)||"PROSPECT")},[x]);const ve=N.length,Be=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="customer").length,[N]),nt=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="prospect").length,[N]),Te=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="partner").length,[N]),Qe=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="active").length,[N]),ct=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="inactive").length,[N]),ht=h.useMemo(()=>N.filter(Me=>Me.status?.toLowerCase()==="former").length,[N]),je=h.useMemo(()=>[{title:"Total",value:ve,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Be,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:nt,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Te,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Qe,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ct,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ht,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[ve,Be,nt,Te,Qe,ct,ht]),Ze=Me=>{v(Me),pe("Overview"),Se(rr(Me?.status)||"PROSPECT")},ce=()=>v(null),J=Me=>{Me.target.id==="accountModalBackdrop"&&!X&&ce()},de=()=>{a(!1),r(!1),u(null),p(c2),o(!1),_(null)},D=Me=>{Me.target.id==="modalBackdrop"&&de()},B=Me=>Me?new Date(Me).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ie=Me=>{const{name:vt,value:F}=Me.target;p($=>({...$,[vt]:F}))},ue=()=>{p(c2),r(!1),u(null),a(!0)},se=Me=>{v(null),Me.assigned_accs?_(Me.assigned_accs):_(null),p({name:Me.name||"",website:Me.website||"",phone_number:Me.phone_number||"",billing_address:Me.billing_address||"",shipping_address:Me.shipping_address||"",industry:Me.industry||"",status:rr(Me.status)||"PROSPECT",territory_id:Me.territory?.id?String(Me.territory.id):"",assigned_to:Me.assigned_accs?.id?String(Me.assigned_accs.id):""}),r(!0),u(Me.id),a(!0)},Pe=Me=>{Me&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:Me.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Me.id,name:Me.name}})},ge=async()=>{if(!Q?.action){V(null);return}const{action:Me}=Q,{type:vt,payload:F,targetId:$,name:me,accountIds:Le}=Me;W(!0);try{if(vt==="create"){o(!0);const $e=await ae.post("/accounts/admin",F);H(),G.success(`Account "${me}" created successfully.`);const Ve=x?.id||null;de(),await De(Ve),!x&&$e.data?.id}else if(vt==="update"){if(!$)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${$}`,F),G.success(`Account "${me}" updated successfully.`);const $e=x?.id&&x.id===$?$:null;de(),await De($e),x?.id===$&&v(null)}else if(vt==="delete"){if(!$)throw new Error("Missing account identifier for deletion.");const $e=x?.id;c($),await ae.delete(`/accounts/admin/${$}`),G.success(`Account "${me}" deleted successfully.`),await De($e&&$e!==$?$e:null),$e===$&&v(null)}else vt==="bulk-delete"&&(await ae.delete("/accounts/admin/bulk-delete",{data:{account_ids:Le}}),G.success(`Successfully deleted ${Le.length} accounts`),qe([]),await De())}catch($e){console.error($e);const Ve=vt==="create"?"Failed to create account. Please review the details and try again.":vt==="update"?"Failed to update account. Please review the details and try again.":vt==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ye=$e.response?.data?.detail||Ve;G.error(Ye),(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null)}finally{(vt==="create"||vt==="update")&&o(!1),vt==="delete"&&c(null),W(!1),V(null)}},fe=()=>{X||V(null)},Fe=async()=>{if(!x||!Ne)return;const Me=rr(Ne),vt=rr(x.status);if(Me!==vt){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:Me}),G.success(`Account status updated to ${d2(Me)}`),b(F=>F.map($=>$.id===x.id?{...$,status:Me}:$)),v(null)}catch(F){console.error(F);const $=F.response?.data?.detail||"Failed to update account status. Please try again.";G.error($)}finally{ke(!1)}}},[Xe,pt]=h.useState(!1),Nt=Me=>{Me.preventDefault(),pt(!0);const vt=f.name.trim();if(!vt){G.error("Account name is required.");return}if(!f.assigned_to){G.error("Assigned To is required.");return}const $={name:vt,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},me=s&&d?"update":"create";V({title:me==="create"?"Confirm New Account":"Confirm Update",message:me==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:vt}),"?"]}),confirmLabel:me==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:me,payload:$,targetId:d||null,name:vt}})},St=[{label:"Filter by Status",value:"Filter by Status"},...l2.map(Me=>({label:Me.label,value:Me.value}))],Ht=Q?.action?.type==="delete"?Q.action.targetId:null,on=x&&(l===x.id||Ht===x.id),cn=x&&l===x.id,re=x?Z1e(x.status):"",ot=x?n.jsx("div",{id:"accountModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Me=>Me.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:ce,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${re}`,children:d2(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Pe(x),disabled:!!on,children:cn?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Me=>n.jsx("button",{onClick:()=>pe(Me),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===Me?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Me},Me))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:B(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:B(x.updated_at)||"N/A"})]})]})}),n.jsx(Aa,{comments:Ae,onAddComment:Re})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[Ce.tasks&&Ce.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",Ce.tasks.length,")"]})]}),ee==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.tasks.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||"No description"}),Me.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Me.assigned_to.first_name," ",Me.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.due_date||Me.created_at)})]},`task-${vt}`))})]}),Ce.meetings&&Ce.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",Ce.meetings.length,")"]})]}),ee==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.meetings.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.description||Me.location||"No description"}),Me.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Me.host.first_name," ",Me.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.start_time||Me.created_at)})]},`meeting-${vt}`))})]}),Ce.calls&&Ce.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",Ce.calls.length,")"]})]}),ee==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.calls.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Me.subject||Me.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:Me.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.call_time||Me.created_at)})]},`call-${vt}`))})]}),Ce.contacts&&Ce.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",Ce.contacts.length,")"]})]}),ee==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.contacts.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.first_name?`${Me.first_name} `:"",Me.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.created_at)})]},`contact-${vt}`))})]}),Ce.deals&&Ce.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",Ce.deals.length,")"]})]}),ee==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.deals.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Me.deal_id?Me.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Me.name||Me.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Me.stage||Me.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.close_date||Me.created_at)})]},`deal-${vt}`))})]}),Ce.quotes&&Ce.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ee(ee==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",Ce.quotes.length,")"]})]}),ee==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),ee==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:Ce.quotes.map((Me,vt)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Me.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Me.quote_id?Me.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Me.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:B(Me.presented_date)||""})]},`quote-${vt}`))})]}),(!Ce||(!Ce.tasks||Ce.tasks.length===0)&&(!Ce.meetings||Ce.meetings.length===0)&&(!Ce.calls||Ce.calls.length===0)&&(!Ce.quotes||Ce.quotes.length===0)&&(!Ce.deals||Ce.deals.length===0)&&(!Ce.contacts||Ce.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||rr(x?.status)||"PROSPECT",onChange:Me=>Se(Me.target.value),children:l2.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))}),n.jsx("button",{onClick:Fe,disabled:Oe||!Ne||rr(Ne)===rr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||rr(Ne)===rr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,zt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:je.map(Me=>n.jsx(tCe,{...Me},Me.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:Me=>q(Me.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:z,onChange:Me=>P(Me.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:St.map(Me=>n.jsx("option",{value:Me.value,children:Me.label},Me.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:_e.length>0&&_e.every(Me=>he.includes(Me.id)),onChange:te,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:he.length>0?n.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${he.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):le.length>0?_e.map(Me=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Ze(Me),be(Me.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("input",{type:"checkbox",checked:he.includes(Me.id),onChange:()=>Ue(Me.id),onClick:vt=>vt.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Me.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:Me.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${J1e(Me.status)}`,children:d2(Me.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:Me.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:Me.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},Me.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:le.length,pageSize:K,currentPage:ne,onPrev:Ge,onNext:gt,onPageSizeChange:Me=>{U(Me),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),kt=t?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Me=>Me.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Wm,{label:"Name",name:"name",value:f.name,onChange:ie,placeholder:"Company name",required:!0,isSubmitted:Xe})}),n.jsx(mR,{label:"Parent Company",value:f.parent_company,onChange:Me=>{p(vt=>({...vt,parent_company:Me}))},items:M.map(Me=>({id:Me,name:Me})),getLabel:Me=>Me?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Wm,{label:"Website",name:"website",value:f.website,onChange:ie,placeholder:"https://example.com",disabled:i}),n.jsx(Wm,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ie,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Wm,{label:"Industry",name:"industry",value:f.industry,onChange:ie,placeholder:"Industry",disabled:i}),n.jsx(Wm,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ie,placeholder:"Billing address",disabled:i}),n.jsx(Wm,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ie,placeholder:"Shipping address",disabled:i}),n.jsx(uR,{label:"Status",name:"status",value:f.status,onChange:ie,options:[{value:"",label:"Select status"},...l2],required:!0,disabled:i}),n.jsx(mR,{label:"Assigned To",value:f.assigned_to,onChange:Me=>{const vt=S.find($=>String($.id)===String(Me));_(vt);let F=null;vt&&vt.assigned_territory&&vt.assigned_territory.length===1&&(F=vt.assigned_territory[0].id),p($=>({...$,assigned_to:Me,territory_id:F}))},items:S||[],getLabel:Me=>`${Me?.first_name??""} ${Me?.last_name??""} (${Me?.role?.toUpperCase()==="CEO"?"Admin":Me?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Xe,disabled:i||S.length===0}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(uR,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ie,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(Me=>({value:String(Me.id),label:Me.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{de(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,Kt=Q?n.jsx(aCe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:ge,onCancel:fe,loading:X}):null;return n.jsxs(n.Fragment,{children:[zt,ot,kt,Kt]})}function tCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Wm({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function uR({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function mR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(nCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function nCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function aCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Mx(e){return _t({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const u2={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},hl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),ro=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function sCe(){const e=wt(),t=Zt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(u2),[R,z]=h.useState(""),[P,I]=h.useState("Filter by Accounts"),[q,Q]=h.useState(null),[V,X]=h.useState("Overview"),[W,ne]=h.useState(1),[oe,K]=h.useState(10),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState([]),[ke,he]=h.useState(null),{comments:qe,addComment:Ce,refresh:xe}=Ta({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&xe()},[u?.id,xe]),h.useEffect(()=>{const se=t.state?.contactID;se&&(he(se),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ke&&a.length>0&&!r){const se=a.find(Pe=>Pe.id===ke);se?f(se):G.error("Contact not found."),he(null)}},[ke,a,r]);const ee=h.useCallback(async(se=null)=>{i(!0);try{const Pe=await ae.get("/contacts/admin/fetch-all"),fe=[...Array.isArray(Pe.data)?Pe.data:[]].sort((Fe,Xe)=>{const pt=Fe?.created_at||Fe?.updated_at||0,Nt=Xe?.created_at||Xe?.updated_at||0;return new Date(Nt)-new Date(pt)});if(s(fe),se){const Fe=fe.find(Xe=>Xe.id===se);f(Fe||null)}}catch(Pe){console.error(Pe),s([]),Pe.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Ee=h.useCallback(async()=>{try{const se=await ae.get("/accounts/admin/fetch-all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((fe,Fe)=>(fe?.name||"").localeCompare(Fe?.name||""));l(ge)}catch(se){console.error(se),l([]),se.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),Ae=h.useCallback(async()=>{try{const se=await ae.get("/users/all"),ge=[...Array.isArray(se.data)?se.data:[]].sort((fe,Fe)=>hl(fe).localeCompare(hl(Fe)));d(ge)}catch(se){console.error(se),d([]),se.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),Re=h.useCallback(async se=>{try{const Pe=await ae.get(`/activities/contact/${se}`);ye(Pe.data&&typeof Pe.data=="object"?Pe.data:{})}catch(Pe){console.error(Pe),Pe.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{ee(),Ee(),Ae()},[ee,Ee,Ae]);const et=h.useMemo(()=>{const se=new Map;o.forEach(ge=>{ge?.id&&ge?.name&&se.set(String(ge.id),ge.name)}),a.forEach(ge=>{ge?.account_id&&ge?.account?.name&&se.set(String(ge.account_id),ge.account.name)});const Pe=Array.from(se.entries()).sort((ge,fe)=>ge[1].localeCompare(fe[1])).map(([ge,fe])=>({value:ge,label:fe}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Pe]},[o,a]),De=h.useMemo(()=>{const se=R.trim().toLowerCase(),Pe=P.trim();return a.filter(ge=>{const fe=[ge?.first_name,ge?.last_name,ge?.email,ge?.title,ge?.department,ge?.account?.name,ge?.account?.status,ge?.work_phone,ge?.mobile_phone_1,ge?.mobile_phone_2,ge?.assigned_contact?.first_name,ge?.assigned_contact?.last_name,ge?.contact_creator?.first_name,ge?.contact_creator?.last_name,ge?.notes,ro(ge?.created_at),ro(ge?.updated_at)],Fe=se===""||fe.some(pt=>pt==null?!1:pt.toString().toLowerCase().includes(se)),Xe=Pe==="Filter by Accounts"||String(ge.account_id)===Pe;return Fe&&Xe})},[a,R,P]),tt=Math.max(1,Math.ceil(De.length/oe)||1);h.useEffect(()=>{ne(1)},[R,P,oe]),h.useEffect(()=>{ne(se=>{const Pe=Math.max(1,Math.ceil(De.length/oe)||1);return se>Pe?Pe:se})},[De.length,oe]);const Je=h.useMemo(()=>{const se=(W-1)*oe;return De.slice(se,se+oe)},[De,W,oe]),H=()=>ne(se=>Math.max(se-1,1)),be=()=>ne(se=>Math.min(se+1,tt)),le=se=>{if(se.target.checked){const Pe=Je.map(ge=>ge.id);Oe(Pe)}else Oe([])},Z=se=>{Oe(Pe=>Pe.includes(se)?Pe.filter(ge=>ge!==se):[...Pe,se])},_e=async()=>{Se.length!==0&&S({title:"Delete Contacts",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Se.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${Se.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:Se}})},te=h.useCallback(()=>{x(!1),N(!1),E(null),M(u2),C(!1),nt(!1)},[]),Ue=se=>{se.target.id==="modalBackdrop"&&!b&&!A&&te()},Ie=se=>{const{name:Pe,value:ge}=se.target;M(fe=>({...fe,[Pe]:ge}))},Ge=()=>{M(u2),N(!1),E(null),x(!0)},gt=se=>{se&&(M({first_name:se.first_name||"",last_name:se.last_name||"",account_id:se.account_id?String(se.account_id):"",title:se.title||"",department:se.department||"",email:se.email||"",work_phone:se.work_phone||"",mobile_phone_1:se.mobile_phone_1||"",mobile_phone_2:se.mobile_phone_2||"",notes:se.notes||"",assigned_to:se.assigned_to?String(se.assigned_to):""}),N(!0),E(se.id),x(!0),f(null))},ve=se=>{if(!se)return;const Pe=hl(se)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Pe}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:se.id,name:Pe}})},[Be,nt]=h.useState(!1),Te=se=>{se.preventDefault(),nt(!0);const Pe=T.first_name.trim(),ge=T.last_name.trim();if(!Pe||!ge){G.error("First name and last name are required.");return}if(!T.account_id){G.error("Account is required.");return}if(!T.assigned_to){G.error("Assigned To is required.");return}const Fe=T.email?.trim();if(!Fe){G.error("Email is required.");return}if(!Fe.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Fe)){G.error("Please enter a valid email address.");return}const pt={first_name:Pe,last_name:ge,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},Nt=v&&_?"update":"create",St=`${Pe} ${ge}`.trim();S({title:Nt==="create"?"Confirm New Contact":"Confirm Update",message:Nt==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:St})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:St}),"?"]}),confirmLabel:Nt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Nt,payload:pt,targetId:_||null,name:St}})},Qe=async()=>{if(!w?.action){S(null);return}const{action:se}=w,{type:Pe,payload:ge,targetId:fe,name:Fe}=se;k(!0);try{if(Pe==="create"){C(!0),await ae.post("/contacts/admin",ge),G.success(`Contact "${Fe}" created successfully.`);const Xe=u?.id||null;te(),await ee(Xe)}else if(Pe==="update"){if(!fe)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${fe}`,ge),G.success(`Contact "${Fe}" updated successfully.`);const Xe=u?.id&&u.id===fe?fe:u?.id||null;te(),await ee(Xe),u?.id===fe&&f(null)}else if(Pe==="delete"){if(!fe)throw new Error("Missing contact identifier for deletion.");const Xe=u?.id;Q(fe),await ae.delete(`/contacts/admin/${fe}`),G.success(`Contact "${Fe}" deleted successfully.`),await ee(Xe&&Xe!==fe?Xe:null),Xe===fe&&f(null)}else if(Pe==="bulk-delete"){const Xe=se.contact_ids;await ae.delete("/contacts/admin/bulk-delete",{data:{contact_ids:Xe}}),G.success(`Successfully deleted ${Xe.length} contacts`),Oe([]),await ee()}}catch(Xe){console.error(Xe);const pt=Pe==="create"?"Failed to create contact. Please review the details and try again.":Pe==="update"?"Failed to update contact. Please review the details and try again.":Pe==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",Nt=Xe.response?.data?.detail||pt;G.error(Nt)}finally{(Pe==="create"||Pe==="update")&&C(!1),Pe==="delete"&&Q(null),k(!1),S(null)}},ct=()=>{A||S(null)},ht=se=>{f(se),X("Overview")},je=()=>f(null),Ze=se=>{se.target.id==="contactModalBackdrop"&&!A&&je()},ce=w?.action?.type==="delete"?w.action.targetId:null,J=u&&(q===u.id||ce===u.id),de=u&&q===u.id,D=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Ze,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:se=>se.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:je,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:hl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>gt(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ve(u),disabled:!!J,children:de?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(se=>n.jsx("button",{onClick:()=>X(se),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===se?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:se},se))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:hl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ro(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ro(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:qe,onAddComment:Ce})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||"No description"}),se.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",se.assigned_to.first_name," ",se.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(se.due_date||se.created_at)})]},`task-${Pe}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.description||se.location||"No description"}),se.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",se.host.first_name," ",se.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(se.start_time||se.created_at)})]},`meeting-${Pe}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:se.subject||se.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:se.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(se.call_time||se.created_at)})]},`call-${Pe}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[se.deal_id?se.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",se.name||se.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:se.stage||se.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(se.close_date||se.created_at)})]},`deal-${Pe}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((se,Pe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:se.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(se.quote_id?se.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:ro(se.presented_date)||""})]},`quote-${Pe}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const se=encodeURIComponent(u.email),Pe=encodeURIComponent(""),ge=encodeURIComponent(""),fe=`mailto:${se}?subject=${Pe}&body=${ge}`;window.location.href=fe},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${hl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,B=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ge(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:se=>z(se.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:se=>I(se.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:et.map(se=>n.jsx("option",{value:se.value,children:se.label},se.value??se.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Je.length>0&&Se.length===Je.length,onChange:le})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Se.length>0?n.jsx("button",{onClick:_e,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Se.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):De.length>0?Je.map(se=>{const Pe=[{Icon:na,value:se.email,key:"email"},{Icon:Lt,value:se.work_phone,key:"work_phone"},{Icon:id,value:se.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:se.mobile_phone_2,key:"mobile_phone_2"}].filter(ge=>!!ge.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:ge=>{ge.target.closest('input[type="checkbox"]')||ge.target.closest("button")||(ht(se),Re(se.id))},children:[n.jsx("td",{className:"py-3 px-4 text-center align-top",children:n.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Se.includes(se.id),onChange:()=>Z(se.id)})}),n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:hl(se)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:se.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Mx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:se.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:Pe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Pe.map(({Icon:ge,value:fe,key:Fe})=>{const Xe=bt.createElement(ge,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Xe,n.jsx("span",{children:fe})]},Fe)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:se.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:se.assigned_contact?`${se.assigned_contact.first_name} ${se.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:ro(se.created_at)||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${se.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:se.status||"Active"})}),n.jsx("td",{className:"py-3 px-4 align-top"})]},se.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:De.length,pageSize:oe,currentPage:W,onPrev:H,onNext:be,onPageSizeChange:se=>{K(se),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),ie=p?n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:se=>se.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Te,noValidate:!0,children:[n.jsx(Oc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ie,placeholder:"First name",required:!0,isSubmitted:Be}),n.jsx(Oc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ie,placeholder:"Last name",required:!0,isSubmitted:Be}),n.jsx(fR,{label:"Account",value:T.account_id,onChange:se=>M(Pe=>({...Pe,account_id:se})),items:o||[],getLabel:se=>se?.name??"",placeholder:"Search account...",required:!0,isSubmitted:Be,disabled:b||o.length===0}),n.jsx(fR,{label:"Assigned To",value:T.assigned_to,onChange:se=>M(Pe=>({...Pe,assigned_to:se})),items:c||[],getLabel:se=>`${se?.first_name??""} ${se?.last_name??""} (${se?.role?.toUpperCase()==="CEO"?"Admin":se?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Be,disabled:b||c.length===0}),n.jsx(Oc,{label:"Title",name:"title",value:T.title,onChange:Ie,placeholder:"Job title",disabled:b}),n.jsx(Oc,{label:"Department",name:"department",value:T.department,onChange:Ie,placeholder:"Department",disabled:b}),n.jsx(Oc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ie,placeholder:"example@email.com",required:!0,isSubmitted:Be}),n.jsx(Oc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Oc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Oc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(iCe,{label:"Notes",name:"notes",value:T.notes,onChange:Ie,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{te(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,ue=w?n.jsx(oCe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Qe,onCancel:ct,loading:A}):null;return n.jsxs(n.Fragment,{children:[B,D,ie,ue]})}function Oc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function fR({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(rCe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function rCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function iCe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function oCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const m2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function GV({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const I=await ae.get(`/leads/get/${c}`);u(I.data),v(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){G.error("Lead must be Qualified before it can be converted.");return}const I=await ae.put(`/leads/${d.id}/update/status`,{status:x});G.success("Lead status updated successfully");const q={...d,status:I.data.status};u(q),i&&i(q),a&&a(),t&&t()}catch(I){console.error(I),G.error("Failed to update lead status")}},R=async I=>{const q={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",q),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const V=(await ae.post("/accounts/convertedLead",q)).data.id,X={...A,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",U),pe=await ae.put(`/leads/convert/${I.id}`);i&&i(null),a(),G.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";G.error(V)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,q=>q.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:m2(I.due_date||I.created_at)})]},`task-${q}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:m2(I.start_time||I.created_at)})]},`meeting-${q}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:m2(I.call_time||I.created_at)})]},`call-${q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),q=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${I}?subject=${q}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>v(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const lCe=Vf.all(),f2=lCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),cCe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),dCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},h2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function uCe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(""),[A,k]=h.useState(1),[_,E]=h.useState(10),[T,M]=h.useState(h2),[R,z]=h.useState(!1),[P,I]=h.useState(null),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState(!1),[oe,K]=h.useState([]),[U,ye]=h.useState({});h.useRef(null);const[pe,Ne]=h.useState(!1),[Se,Oe]=h.useState(null),[ke,he]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[qe,Ce]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[xe,ee]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Ee=async()=>{try{const ue=await ae.get("/leads/getUsers");l(ue.data)}catch(ue){console.error(`Error fetching users: ${ue}`)}},Ae=async()=>{x(!0);try{const ue=await ae.get("/leads/admin/getLeads");f(ue.data),console.log(ue.data)}catch(ue){console.error(`Error fetching leads: ${ue}`)}finally{x(!1)}};h.useEffect(()=>{Ee(),Ae()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!R){const ue=u.find(se=>se.id===Number(t));ue&&s(ue)}else!t&&!a&&s(null)},[t,u,r,R]),h.useEffect(()=>{if(Se){const se=(fe=>{if(!fe)return{code:"+63",number:""};const Fe=fe.match(/^(\+\d+)\s(.+)$/);if(Fe)return{code:Fe[1],number:Fe[2]};if(fe.startsWith("+")){const Xe=fe.match(/^(\+\d{1,3})/);if(Xe)return{code:Xe[1],number:fe.substring(Xe[1].length).trim()}}return{code:"+63",number:fe}})(Se.work_phone),Pe=[];Se.work_phone&&Pe.push(`Work: ${Se.work_phone}`),Se.mobile_phone_1&&Pe.push(`Mobile 1: ${Se.mobile_phone_1}`),Se.mobile_phone_2&&Pe.push(`Mobile 2: ${Se.mobile_phone_2}`);const ge=Pe.length>0?Pe.join(" | "):"";he({name:Se.company_name||"",website:"",countryCode:se.code,phone_number:se.number,combinedPhoneNumbers:ge,billing_address:Se.address||"",shipping_address:Se.address||"",industry:"",status:"Prospect",territory_id:Se.assigned_to?.territory?.id||null,assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),Ce({last_name:Se.last_name||"",first_name:Se.first_name||"",account_id:null,title:Se.title||"",department:Se.department||"",email:Se.email||"",work_phone:Se.work_phone||"",mobile_phone_1:Se.mobile_phone_1||"",mobile_phone_2:Se.mobile_phone_2||"",notes:Se.notes||"",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null}),ee({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Se.assigned_to?.id||null,created_by:Se.creator?.id||null})}},[Se]);const Re=ue=>N(ue.target.value),et=h.useMemo(()=>{let ue=[...u];const se=v.trim().toLowerCase();se&&(ue=ue.filter(ge=>[ge?.first_name,ge?.last_name,ge?.company_name,ge?.title,ge?.email,ge?.work_phone,ge?.assigned_to?`${ge.assigned_to.first_name} ${ge.assigned_to.last_name}`:""].some(Fe=>Fe&&Fe.toString().toLowerCase().includes(se))));const Pe=b.trim().toUpperCase();return Pe&&Pe!=="FILTER BY STATUS"?ue=ue.filter(ge=>(ge.status?ge.status.toUpperCase():"")===Pe):ue=ue.filter(ge=>(ge.status?ge.status.toUpperCase():"")!=="CONVERTED"),w&&ue.sort((ge,fe)=>{const Fe=`${ge.first_name} ${ge.last_name}`,Xe=`${fe.first_name} ${fe.last_name}`;return w==="asc"?Fe.localeCompare(Xe):Xe.localeCompare(Fe)}),ue},[u,v,b,w]),De=Math.max(1,Math.ceil(et.length/_)||1);h.useEffect(()=>{k(1)},[v,b]),h.useEffect(()=>{k(ue=>{const se=Math.max(1,Math.ceil(et.length/_)||1);return ue>se?se:ue})},[et.length,_]);const tt=h.useMemo(()=>{const ue=(A-1)*_;return et.slice(ue,ue+_)},[et,A,_]),Je=()=>k(ue=>Math.max(ue-1,1)),H=()=>k(ue=>Math.min(ue+1,De)),be=ue=>{E(ue),k(1)},le=h.useCallback(async ue=>{try{const se=await ae.get(`/activities/lead/${ue}`);ye(se.data&&typeof se.data=="object"?se.data:{})}catch(se){console.error(se),se.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Z=ue=>{s(ue),le(ue.id)},_e=()=>{s(null),t&&e("/admin/leads",{replace:!0})},te=()=>{i(!1),M(h2),z(!1),I(null),Q(!1),d(null),sessionStorage.removeItem("editLeadData")},Ue=ue=>{ue.target.id==="modalBackdrop"&&te()},Ie=()=>{M(h2),z(!1),I(null),d(null),i(!0)},Ge=ue=>{if(!ue){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ue),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const se=Xe=>{if(!Xe)return{code:"+63",number:""};const pt=Xe.match(/^(\+\d+)\s(.+)$/);return pt?{code:pt[1],number:pt[2]}:{code:"+63",number:Xe}},Pe=se(ue.work_phone),ge=se(ue.mobile_phone_1),fe=se(ue.mobile_phone_2);let Fe="";if(ue.assigned_to){Fe=String(ue.assigned_to.id);const Xe=o?.find(pt=>pt.id===ue.assigned_to.id);d(Xe)}M({first_name:ue.first_name||"",last_name:ue.last_name||"",company_name:ue.company_name||"",title:ue.title||"",department:ue.department||"",email:ue.email||"",work_ccode:Pe.code,work_phone:Pe.number,m1_ccode:ge.code,mobile_phone_1:ge.number,m2_ccode:fe.code,mobile_phone_2:fe.number,address:ue.address||"",notes:ue.notes||"",source:ue.source||"",territory_id:ue.territory?.id||null,lead_owner:Fe,status:ue.status||"New"}),z(!0),I(ue.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},gt=ue=>{if(!ue){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ue);const se=`${ue.first_name} ${ue.last_name}`||"this lead";X({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:se}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ue.id,name:se}})},ve=ue=>{const{name:se,value:Pe}=ue.target;if(M(ge=>({...ge,[se]:Pe})),se==="lead_owner"){const ge=o.find(fe=>fe.id===parseInt(Pe));d(ge)}},[Be,nt]=h.useState(!1),Te=ue=>{if(ue.preventDefault(),nt(!0),!T.last_name?.trim()){G.error("Last name is required.");return}if(!T.company_name?.trim()){G.error("Company is required.");return}if(!T.title?.trim()){G.error("Job title is required.");return}if(!T.email?.trim()){G.error("Email is required.");return}if(!T.email.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){G.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){G.error("Please assign a lead owner.");return}const Pe={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},ge=R&&P?"update":"create",fe=`${T.first_name} ${T.last_name}`;X({title:ge==="create"?"Confirm New Lead":"Confirm Update",message:ge==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:ge==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:ge,payload:Pe,targetId:P||null,name:fe}})},Qe=ue=>{if(ue.target.checked){const se=tt.map(Pe=>Pe.id);K(se)}else K([])},ct=ue=>{K(se=>se.includes(ue)?se.filter(Pe=>Pe!==ue):[...se,ue])},ht=async()=>{oe.length!==0&&X({title:"Delete Leads",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:oe.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${oe.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:oe}})},je=async()=>{if(!V?.action){X(null);return}const{action:ue}=V,{type:se,payload:Pe,targetId:ge,name:fe,lead:Fe,leadIds:Xe}=ue;console.log(Pe),ne(!0);try{if(se==="create")Q(!0),await ae.post("/leads/create",Pe),G.success(`Lead "${fe}" created successfully.`),te(),await Ae();else if(se==="update"){if(!ge)throw new Error("Missing lead identifier for update.");Q(!0);const pt=await ae.put(`/leads/${ge}`,Pe);G.success(`Lead "${fe}" updated successfully.`),a&&a.id===ge&&s(null),te(),await Ae()}else if(se==="delete"){if(!ge)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${ge}`),G.success(`Lead "${fe}" deleted successfully.`),a?.id===ge&&s(null),await Ae()}else se==="bulk-delete"&&(await ae.delete("/leads/admin/bulk-delete",{data:{lead_ids:Xe}}),G.success(`Successfully deleted ${Xe.length} leads`),K([]),await Ae())}catch(pt){console.error(pt);const Nt=se==="create"?"Failed to create lead. Please review the details and try again.":se==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",St=pt.response?.data?.detail||Nt;G.error(St)}finally{(se==="create"||se==="update")&&Q(!1),se!=="edit"&&(ne(!1),X(null))}},Ze=()=>{W||X(null)},ce=u.filter(ue=>ue.status==="New").length,J=u.filter(ue=>ue.status==="Contacted").length,de=u.filter(ue=>ue.status==="Qualified").length,D=u.filter(ue=>ue.status==="Converted").length,B=u.filter(ue=>ue.status==="Lost").length,ie=[{title:"New",value:ce,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:J,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:de,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:D,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:B,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{G.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{Ie(),nt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(ue=>n.jsx(fCe,{...ue},ue.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Re,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ue=>C(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:w,onChange:ue=>S(ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"",children:"Sort by Name"}),n.jsx("option",{value:"asc",children:"A-Z"}),n.jsx("option",{value:"desc",children:"Z-A"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:tt.length>0&&tt.every(ue=>oe.includes(ue.id)),onChange:Qe})}),n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?n.jsx("button",{onClick:ht,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${oe.length} selected leads`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:et.length>0?tt.map(ue=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:se=>se.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(ue.id),onChange:()=>ct(ue.id)})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ue.first_name," ",ue.last_name]})}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ue.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>Z(ue),children:ue.assigned_to?`${ue.assigned_to.first_name} ${ue.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",onClick:()=>Z(ue),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${dCe(ue.status||"New")}`,children:cCe(ue.status||"New")})}),n.jsx("td",{})]},ue.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:et.length,pageSize:_,currentPage:A,onPrev:Je,onNext:H,onPageSizeChange:be,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ue=>ue.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),nt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:R?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:ve,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:T.last_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${Be&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:ve,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:ve,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Be&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:f2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:f2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:ve,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:f2.map(ue=>n.jsx("option",{value:ue.code,children:ue.code},ue.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:ve,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:T.address,onChange:ve,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Be&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(hCe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",getLabel:ue=>`${ue.first_name} ${ue.last_name}`,onChange:ue=>{const se=o.find(ge=>String(ge.id)===String(ue));d(se);let Pe=null;se&&se.assigned_territory&&se.assigned_territory.length===1&&(Pe=se.assigned_territory[0].id),M(ge=>({...ge,lead_owner:ue,territory_id:Pe}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:ve,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ue=>n.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:ve,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:ve,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{te(),nt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:q||W,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Te,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:q||W,children:q||W?"Processing...":R?"Update Lead":"Save Lead"})]})]})]})}),V&&n.jsx(mCe,{open:!0,title:V.title,message:V.message,confirmLabel:V.confirmLabel,cancelLabel:V.cancelLabel,variant:V.variant,onConfirm:je,onCancel:Ze,loading:W}),a&&!r&&!R&&n.jsx(GV,{relatedActs:U,lead:a,onBack:_e,fetchLeads:Ae,setSelectedLead:s,onEdit:Ge,onDelete:gt})]})}function mCe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function fCe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function hCe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let gCe={data:""},pCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||gCe},xCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yCe=/\/\*[^]*?\*\/|  +/g,hR=/\n+/g,Gc=(e,t)=>{let a="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?a=i+" "+o+";":s+=i[1]=="f"?Gc(o,i):i+"{"+Gc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Gc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Gc.p?Gc.p(i,o):i+":"+o+";")}return a+(t&&r?t+"{"+r+"}":r)+s},gl={},WV=e=>{if(typeof e=="object"){let t="";for(let a in e)t+=a+WV(e[a]);return t}return e},bCe=(e,t,a,s,r)=>{let i=WV(e),o=gl[i]||(gl[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!gl[o]){let c=i!==e?e:(d=>{let u,f,p=[{}];for(;u=xCe.exec(d.replace(yCe,""));)u[4]?p.shift():u[3]?(f=u[3].replace(hR," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][u[1]]=u[2].replace(hR," ").trim();return p[0]})(e);gl[o]=Gc(r?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&gl.g?gl.g:null;return a&&(gl.g=gl[o]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(gl[o],t,s,l),o},vCe=(e,t,a)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Gc(l,""):l===!1?"":l}return s+r+(o??"")},"");function aj(e){let t=this||{},a=e.call?e(t.p):e;return bCe(a.unshift?a.raw?vCe(a,[].slice.call(arguments,1),t.p):a.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):a,pCe(t.target),t.g,t.o,t.k)}let VV,TE,EE;aj.bind({g:1});let Hl=aj.bind({k:1});function wCe(e,t,a,s){Gc.p=t,VV=e,TE=a,EE=s}function Cd(e,t){let a=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;a.p=Object.assign({theme:TE&&TE()},l),a.o=/ *go\d+/.test(c),l.className=aj.apply(a,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),EE&&d[0]&&EE(l),VV(d,l)}return r}}var NCe=e=>typeof e=="function",zv=(e,t)=>NCe(e)?e(t):e,jCe=(()=>{let e=0;return()=>(++e).toString()})(),QV=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),CCe=20,Y4="default",YV=(e,t)=>{let{toastLimit:a}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,a)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return YV(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Vb=[],KV={toasts:[],pausedAt:void 0,settings:{toastLimit:CCe}},_o={},XV=(e,t=Y4)=>{_o[t]=YV(_o[t]||KV,e),Vb.forEach(([a,s])=>{a===t&&s(_o[t])})},ZV=e=>Object.keys(_o).forEach(t=>XV(e,t)),SCe=e=>Object.keys(_o).find(t=>_o[t].toasts.some(a=>a.id===e)),sj=(e=Y4)=>t=>{XV(t,e)},_Ce={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ACe=(e={},t=Y4)=>{let[a,s]=h.useState(_o[t]||KV),r=h.useRef(_o[t]);h.useEffect(()=>(r.current!==_o[t]&&s(_o[t]),Vb.push([t,s]),()=>{let o=Vb.findIndex(([l])=>l===t);o>-1&&Vb.splice(o,1)}),[t]);let i=a.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||_Ce[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:i}},TCe=(e,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||jCe()}),Ix=e=>(t,a)=>{let s=TCe(t,e,a);return sj(s.toasterId||SCe(s.id))({type:2,toast:s}),s.id},ts=(e,t)=>Ix("blank")(e,t);ts.error=Ix("error");ts.success=Ix("success");ts.loading=Ix("loading");ts.custom=Ix("custom");ts.dismiss=(e,t)=>{let a={type:3,toastId:e};t?sj(t)(a):ZV(a)};ts.dismissAll=e=>ts.dismiss(void 0,e);ts.remove=(e,t)=>{let a={type:4,toastId:e};t?sj(t)(a):ZV(a)};ts.removeAll=e=>ts.remove(void 0,e);ts.promise=(e,t,a)=>{let s=ts.loading(t.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?zv(t.success,r):void 0;return i?ts.success(i,{id:s,...a,...a?.success}):ts.dismiss(s),r}).catch(r=>{let i=t.error?zv(t.error,r):void 0;i?ts.error(i,{id:s,...a,...a?.error}):ts.dismiss(s)}),e};var ECe=1e3,kCe=(e,t="default")=>{let{toasts:a,pausedAt:s}=ACe(e,t),r=h.useRef(new Map).current,i=h.useCallback((f,p=ECe)=>{if(r.has(f))return;let x=setTimeout(()=>{r.delete(f),o({type:4,toastId:f})},p);r.set(f,x)},[]);h.useEffect(()=>{if(s)return;let f=Date.now(),p=a.map(x=>{if(x.duration===1/0)return;let v=(x.duration||0)+x.pauseDuration-(f-x.createdAt);if(v<0){x.visible&&ts.dismiss(x.id);return}return setTimeout(()=>ts.dismiss(x.id,t),v)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[a,s,t]);let o=h.useCallback(sj(t),[t]),l=h.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=h.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),d=h.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=h.useCallback((f,p)=>{let{reverseOrder:x=!1,gutter:v=8,defaultPosition:N}=p||{},b=a.filter(S=>(S.position||N)===(f.position||N)&&S.height),C=b.findIndex(S=>S.id===f.id),w=b.filter((S,A)=>A<C&&S.visible).length;return b.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,A)=>S+(A.height||0)+v,0)},[a]);return h.useEffect(()=>{a.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=r.get(f.id);p&&(clearTimeout(p),r.delete(f.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},LCe=Hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PCe=Hl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DCe=Hl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,OCe=Cd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LCe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PCe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${DCe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,MCe=Hl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,ICe=Cd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${MCe} 1s linear infinite;
`,$Ce=Hl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,RCe=Hl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zCe=Cd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$Ce} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${RCe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,UCe=Cd("div")`
  position: absolute;
`,FCe=Cd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,BCe=Hl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,HCe=Cd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${BCe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qCe=({toast:e})=>{let{icon:t,type:a,iconTheme:s}=e;return t!==void 0?typeof t=="string"?h.createElement(HCe,null,t):t:a==="blank"?null:h.createElement(FCe,null,h.createElement(ICe,{...s}),a!=="loading"&&h.createElement(UCe,null,a==="error"?h.createElement(OCe,{...s}):h.createElement(zCe,{...s})))},GCe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,WCe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,VCe="0%{opacity:0;} 100%{opacity:1;}",QCe="0%{opacity:1;} 100%{opacity:0;}",YCe=Cd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KCe=Cd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,XCe=(e,t)=>{let a=e.includes("top")?1:-1,[s,r]=QV()?[VCe,QCe]:[GCe(a),WCe(a)];return{animation:t?`${Hl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},ZCe=h.memo(({toast:e,position:t,style:a,children:s})=>{let r=e.height?XCe(e.position||t||"top-center",e.visible):{opacity:0},i=h.createElement(qCe,{toast:e}),o=h.createElement(KCe,{...e.ariaProps},zv(e.message,e));return h.createElement(YCe,{className:e.className,style:{...r,...a,...e.style}},typeof s=="function"?s({icon:i,message:o}):h.createElement(h.Fragment,null,i,o))});wCe(h.createElement);var JCe=({id:e,className:t,style:a,onHeightUpdate:s,children:r})=>{let i=h.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return h.createElement("div",{ref:i,className:t,style:a},r)},eSe=(e,t)=>{let a=e.includes("top"),s=a?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:QV()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...s,...r}},tSe=aj`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Hy=16,$x=({reverseOrder:e,position:t="top-center",toastOptions:a,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=kCe(a,i);return h.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Hy,left:Hy,right:Hy,bottom:Hy,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,p=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),x=eSe(f,p);return h.createElement(JCe,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?tSe:"",style:x},u.type==="custom"?zv(u.message,u):r?r(u):h.createElement(ZCe,{toast:u,position:f}))}))},Rx=ts;function nSe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,E,k.description],R=w===""||M.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Rx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx($x,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var aSe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function K4(e){if(typeof e!="string")return!1;var t=aSe;return t.includes(e)}var sSe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rSe=new Set(sSe);function JV(e){return typeof e!="string"?!1:rSe.has(e)}function eQ(e){return typeof e=="string"&&e.startsWith("data-")}function Ur(e){if(typeof e!="object"||e===null)return{};var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(JV(a)||eQ(a))&&(t[a]=e[a]);return t}function Du(e){if(e==null)return null;if(h.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ur(t)}return typeof e=="object"&&!Array.isArray(e)?Ur(e):null}function Ws(e){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(JV(a)||eQ(a)||K4(a))&&(t[a]=e[a]);return t}function iSe(e){return e==null?null:h.isValidElement(e)?Ws(e.props):typeof e=="object"&&!Array.isArray(e)?Ws(e):null}var oSe=["children","width","height","viewBox","className","style","title","desc"];function kE(){return kE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},kE.apply(null,arguments)}function lSe(e,t){if(e==null)return{};var a,s,r=cSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function cSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var X4=h.forwardRef((e,t)=>{var{children:a,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=lSe(e,oSe),f=i||{width:s,height:r,x:0,y:0},p=Pt("recharts-surface",o);return h.createElement("svg",kE({},Ws(u),{className:p,width:s,height:r,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),h.createElement("title",null,c),h.createElement("desc",null,d),a)}),dSe=["children","className"];function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},LE.apply(null,arguments)}function uSe(e,t){if(e==null)return{};var a,s,r=mSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mSe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var ps=h.forwardRef((e,t)=>{var{children:a,className:s}=e,r=uSe(e,dSe),i=Pt("recharts-layer",s);return h.createElement("g",LE({className:i},Ws(r),{ref:t}),a)}),tQ=h.createContext(null),fSe=()=>h.useContext(tQ),g2={},p2={},gR;function hSe(){return gR||(gR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==="__proto__"}e.isUnsafeProperty=t})(p2)),p2}var x2={},pR;function nQ(){return pR||(pR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){switch(typeof a){case"number":case"symbol":return!1;case"string":return a.includes(".")||a.includes("[")||a.includes("]")}}e.isDeepKey=t})(x2)),x2}var y2={},xR;function Z4(){return xR||(xR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="string"||typeof a=="symbol"?a:Object.is(a?.valueOf?.(),-0)?"-0":String(a)}e.toKey=t})(y2)),y2}var b2={},v2={},yR;function gSe(){return yR||(yR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(a==null)return"";if(typeof a=="string")return a;if(Array.isArray(a))return a.map(t).join(",");const s=String(a);return s==="0"&&Object.is(Number(a),-0)?"-0":s}e.toString=t})(v2)),v2}var bR;function J4(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gSe(),a=Z4();function s(r){if(Array.isArray(r))return r.map(a.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",d="",u=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const f=r[l];d?f==="\\"&&l+1<o?(l++,c+=r[l]):f===d?d="":c+=f:u?f==='"'||f==="'"?d=f:f==="]"?(u=!1,i.push(c),c=""):c+=f:f==="["?(u=!0,c&&(i.push(c),c="")):f==="."?c&&(i.push(c),c=""):c+=f,l++}return c&&i.push(c),i}e.toPath=s})(b2)),b2}var vR;function eP(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hSe(),a=nQ(),s=Z4(),r=J4();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?a.isDeepKey(c)?i(l,r.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let f=0;f<c.length;f++){if(u==null||t.isUnsafeProperty(c[f]))return d;u=u[c[f]]}return u===void 0?d:u}e.get=i})(g2)),g2}var w2,wR;function pSe(){return wR||(wR=1,w2=eP().get),w2}var xSe=pSe();const Ou=Ki(xSe);var ySe=4;function Kc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ySe,a=10**t,s=Math.round(e*a)/a;return Object.is(s,-0)?0:s}function ja(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=a[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Kc(l)+i:r+i},"")}var gs=e=>e===0?0:e>0?1:-1,Qi=e=>typeof e=="number"&&e!=+e,ql=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,It=e=>(typeof e=="number"||e instanceof Number)&&!Qi(e),zo=e=>It(e)||typeof e=="string",bSe=0,Tp=e=>{var t=++bSe;return"".concat(e||"").concat(t)},Is=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!It(t)&&typeof t!="string")return s;var i;if(ql(t)){if(a==null)return s;var o=t.indexOf("%");i=a*parseFloat(t.slice(0,o))/100}else i=+t;return Qi(i)&&(i=s),r&&a!=null&&i>a&&(i=a),i},aQ=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,a={},s=0;s<t;s++)if(!a[String(e[s])])a[String(e[s])]=!0;else return!0;return!1};function la(e,t,a){return It(e)&&It(t)?Kc(e+a*(t-e)):t}function sQ(e,t,a){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Ou(s,t))===a)}var ua=e=>e===null||typeof e>"u",zx=e=>ua(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function vSe(e){return e!=null}function Ux(){}var wSe=["type","size","sizeType"];function PE(){return PE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},PE.apply(null,arguments)}function NR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function jR(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(a),!0).forEach(function(s){NSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NSe(e,t,a){return(t=jSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jSe(e){var t=CSe(e,"string");return typeof t=="symbol"?t:t+""}function CSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SSe(e,t){if(e==null)return{};var a,s,r=_Se(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function _Se(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var rQ={symbolCircle:$N,symbolCross:OG,symbolDiamond:IG,symbolSquare:$G,symbolStar:zG,symbolTriangle:UG,symbolWye:FG},ASe=Math.PI/180,TSe=e=>{var t="symbol".concat(zx(e));return rQ[t]||$N},ESe=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*ASe;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kSe=(e,t)=>{rQ["symbol".concat(zx(e))]=t},tP=e=>{var{type:t="circle",size:a=64,sizeType:s="area"}=e,r=SSe(e,wSe),i=jR(jR({},r),{},{type:t,size:a,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=TSe(o),x=m4().type(p).size(ESe(a,s,o)),v=x();if(v!==null)return v},{className:c,cx:d,cy:u}=i,f=Ws(i);return It(d)&&It(u)&&It(a)?h.createElement("path",PE({},f,{className:Pt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:l()})):null};tP.registerSymbol=kSe;var iQ=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,nP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(h.isValidElement(e)&&(a=e.props),typeof a!="object"&&typeof a!="function")return null;var s={};return Object.keys(a).forEach(r=>{K4(r)&&(s[r]=(i=>a[r](a,i)))}),s},LSe=(e,t,a)=>s=>(e(t,a,s),null),Fx=(e,t,a)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];K4(r)&&typeof i=="function"&&(s||(s={}),s[r]=LSe(i,t,a))}),s};function CR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function PSe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?CR(Object(a),!0).forEach(function(s){DSe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):CR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function DSe(e,t,a){return(t=OSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function OSe(e){var t=MSe(e,"string");return typeof t=="symbol"?t:t+""}function MSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Va(e,t){var a=PSe({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),a);return i}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uv.apply(null,arguments)}function SR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function ISe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?SR(Object(a),!0).forEach(function(s){$Se(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):SR(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function $Se(e,t,a){return(t=RSe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function RSe(e){var t=zSe(e,"string");return typeof t=="symbol"?t:t+""}function zSe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ii=32,USe={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function FSe(e){var{data:t,iconType:a,inactiveColor:s}=e,r=ii/2,i=ii/6,o=ii/3,l=t.inactive?s:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var d;return h.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=t.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:r,x2:ii,y2:r,className:"recharts-legend-icon"})}if(c==="line")return h.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(ii,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return h.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ii/8,"h").concat(ii,"v").concat(ii*3/4,"h").concat(-ii,"z"),className:"recharts-legend-icon"});if(h.isValidElement(t.legendIcon)){var u=ISe({},t);return delete u.legendIcon,h.cloneElement(t.legendIcon,u)}return h.createElement(tP,{fill:l,cx:r,cy:r,size:ii,sizeType:"diameter",type:c})}function BSe(e){var{payload:t,iconSize:a,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:ii,height:ii},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,f)=>{var p=u.formatter||r,x=Pt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,N=p?p(u.value,u,f):u.value;return h.createElement("li",Uv({className:x,style:c,key:"legend-item-".concat(f)},Fx(e,u,f)),h.createElement(X4,{width:a,height:a,viewBox:l,style:d,"aria-label":"".concat(N," legend icon")},h.createElement(FSe,{data:u,iconType:o,inactiveColor:i})),h.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},N))})}var HSe=e=>{var t=Va(e,USe),{payload:a,layout:s,align:r}=t;if(!a||!a.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return h.createElement("ul",{className:"recharts-default-legend",style:i},h.createElement(BSe,Uv({},t,{payload:a})))},N2={},j2={},_R;function qSe(){return _R||(_R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){const r=new Map;for(let i=0;i<a.length;i++){const o=a[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(j2)),j2}var C2={},AR;function oQ(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a}e.identity=t})(C2)),C2}var S2={},_2={},A2={},TR;function GSe(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Number.isSafeInteger(a)&&a>=0}e.isLength=t})(A2)),A2}var ER;function aP(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GSe();function a(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=a})(_2)),_2}var T2={},kR;function WSe(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="object"&&a!==null}e.isObjectLike=t})(T2)),T2}var LR;function VSe(){return LR||(LR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aP(),a=WSe();function s(r){return a.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(S2)),S2}var E2={},k2={},PR;function QSe(){return PR||(PR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eP();function a(s){return function(r){return t.get(r,s)}}e.property=a})(k2)),k2}var L2={},P2={},D2={},O2={},DR;function lQ(){return DR||(DR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a!==null&&(typeof a=="object"||typeof a=="function")}e.isObject=t})(O2)),O2}var M2={},OR;function cQ(){return OR||(OR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null||typeof a!="object"&&typeof a!="function"}e.isPrimitive=t})(M2)),M2}var I2={},MR;function dQ(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s){return a===s||Number.isNaN(a)&&Number.isNaN(s)}e.eq=t})(I2)),I2}var IR;function YSe(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lQ(),a=cQ(),s=dQ();function r(u,f,p){return typeof p!="function"?r(u,f,()=>{}):i(u,f,function x(v,N,b,C,w,S){const A=p(v,N,b,C,w,S);return A!==void 0?!!A:i(v,N,x,S)},new Map)}function i(u,f,p,x){if(f===u)return!0;switch(typeof f){case"object":return o(u,f,p,x);case"function":return Object.keys(f).length>0?i(u,{...f},p,x):s.eq(u,f);default:return t.isObject(u)?typeof f=="string"?f==="":!0:s.eq(u,f)}}function o(u,f,p,x){if(f==null)return!0;if(Array.isArray(f))return c(u,f,p,x);if(f instanceof Map)return l(u,f,p,x);if(f instanceof Set)return d(u,f,p,x);const v=Object.keys(f);if(u==null||a.isPrimitive(u))return v.length===0;if(v.length===0)return!0;if(x?.has(f))return x.get(f)===u;x?.set(f,u);try{for(let N=0;N<v.length;N++){const b=v[N];if(!a.isPrimitive(u)&&!(b in u)||f[b]===void 0&&u[b]!==void 0||f[b]===null&&u[b]!==null||!p(u[b],f[b],b,u,f,x))return!1}return!0}finally{x?.delete(f)}}function l(u,f,p,x){if(f.size===0)return!0;if(!(u instanceof Map))return!1;for(const[v,N]of f.entries()){const b=u.get(v);if(p(b,N,v,u,f,x)===!1)return!1}return!0}function c(u,f,p,x){if(f.length===0)return!0;if(!Array.isArray(u))return!1;const v=new Set;for(let N=0;N<f.length;N++){const b=f[N];let C=!1;for(let w=0;w<u.length;w++){if(v.has(w))continue;const S=u[w];let A=!1;if(p(S,b,N,u,f,x)&&(A=!0),A){v.add(w),C=!0;break}}if(!C)return!1}return!0}function d(u,f,p,x){return f.size===0?!0:u instanceof Set?c([...u],[...f],p,x):!1}e.isMatchWith=r,e.isSetMatch=d})(D2)),D2}var $R;function uQ(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YSe();function a(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=a})(P2)),P2}var $2={},R2={},z2={},RR;function KSe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Object.getOwnPropertySymbols(a).filter(s=>Object.prototype.propertyIsEnumerable.call(a,s))}e.getSymbols=t})(z2)),z2}var U2={},zR;function mQ(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}e.getTag=t})(U2)),U2}var F2={},UR;function fQ(){return UR||(UR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",a="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",f="[object Function]",p="[object ArrayBuffer]",x="[object Object]",v="[object Error]",N="[object DataView]",b="[object Uint8Array]",C="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",A="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",M="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=A,e.booleanTag=r,e.dataViewTag=N,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=M,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=d,e.stringTag=a,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=C})(F2)),F2}var B2={},FR;function XSe(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}e.isTypedArray=t})(B2)),B2}var BR;function hQ(){return BR||(BR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KSe(),a=mQ(),s=fQ(),r=cQ(),i=XSe();function o(u,f){return l(u,void 0,u,new Map,f)}function l(u,f,p,x=new Map,v=void 0){const N=v?.(u,f,p,x);if(N!==void 0)return N;if(r.isPrimitive(u))return u;if(x.has(u))return x.get(u);if(Array.isArray(u)){const b=new Array(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;x.set(u,b);for(const[C,w]of u)b.set(C,l(w,C,p,x,v));return b}if(u instanceof Set){const b=new Set;x.set(u,b);for(const C of u)b.add(l(C,void 0,p,x,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);x.set(u,b);for(let C=0;C<u.length;C++)b[C]=l(u[C],C,p,x,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return x.set(u,b),c(b,u,p,x,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(typeof Blob<"u"&&u instanceof Blob){const b=new Blob([u],{type:u.type});return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Error){const b=new u.constructor;return x.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,p,x,v),b}if(u instanceof Boolean){const b=new Boolean(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof Number){const b=new Number(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(u instanceof String){const b=new String(u.valueOf());return x.set(u,b),c(b,u,p,x,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return x.set(u,b),c(b,u,p,x,v),b}return u}function c(u,f,p=u,x,v){const N=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<N.length;b++){const C=N[b],w=Object.getOwnPropertyDescriptor(u,C);(w==null||w.writable)&&(u[C]=l(f[C],C,p,x,v))}}function d(u){switch(a.getTag(u)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(R2)),R2}var HR;function ZSe(){return HR||(HR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hQ();function a(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=a})($2)),$2}var qR;function JSe(){return qR||(qR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uQ(),a=ZSe();function s(r){return r=a.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(L2)),L2}var H2={},q2={},G2={},GR;function e2e(){return GR||(GR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hQ(),a=fQ();function s(r,i){return t.cloneDeepWith(r,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!==void 0)return u;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case a.numberTag:case a.stringTag:case a.booleanTag:{const f=new r.constructor(r?.valueOf());return t.copyProperties(f,r),f}case a.argumentsTag:{const f={};return t.copyProperties(f,r),f.length=r.length,f[Symbol.iterator]=r[Symbol.iterator],f}default:return}})}e.cloneDeepWith=s})(G2)),G2}var WR;function t2e(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e2e();function a(s){return t.cloneDeepWith(s)}e.cloneDeep=a})(q2)),q2}var W2={},V2={},VR;function gQ(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function a(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=a})(V2)),V2}var Q2={},QR;function n2e(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mQ();function a(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=a})(Q2)),Q2}var YR;function a2e(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nQ(),a=gQ(),s=n2e(),r=J4();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const f=c[u];if((d==null||!Object.hasOwn(d,f))&&!((Array.isArray(d)||s.isArguments(d))&&a.isIndex(f)&&f<d.length))return!1;d=d[f]}return!0}e.has=i})(W2)),W2}var KR;function s2e(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uQ(),a=Z4(),s=t2e(),r=eP(),i=a2e();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=a.toKey(l);break}}return c=s.cloneDeep(c),function(d){const u=r.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o})(H2)),H2}var XR;function r2e(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oQ(),a=QSe(),s=JSe(),r=s2e();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return a.property(o)}}e.iteratee=i})(E2)),E2}var ZR;function i2e(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qSe(),a=oQ(),s=VSe(),r=r2e();function i(o,l=a.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(N2)),N2}var Y2,JR;function o2e(){return JR||(JR=1,Y2=i2e().uniqBy),Y2}var l2e=o2e();const ez=Ki(l2e);function pQ(e,t,a){return t===!0?ez(e,a):typeof t=="function"?ez(e,t):e}var sP=h.createContext(null),c2e=e=>e,Xn=()=>{var e=h.useContext(sP);return e?e.store.dispatch:c2e},Qb=()=>{},d2e=()=>Qb,u2e=(e,t)=>e===t;function Rt(e){var t=h.useContext(sP);return q9.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:d2e,t?t.store.getState:Qb,t?t.store.getState:Qb,t?e:Qb,u2e)}var K2={},X2={},Z2={},tz;function m2e(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const a=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=a})(Z2)),Z2}var J2={},e_={},nz;function xQ(){return nz||(nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"||a instanceof Symbol}e.isSymbol=t})(e_)),e_}var az;function f2e(){return az||(az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xQ(),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!a.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(J2)),J2}var sz;function h2e(){return sz||(sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=m2e(),a=f2e(),s=J4();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const d=(x,v)=>{let N=x;for(let b=0;b<v.length&&N!=null;++b)N=N[v[b]];return N},u=(x,v)=>v==null||x==null?v:typeof x=="object"&&"key"in x?Object.hasOwn(v,x.key)?v[x.key]:d(v,x.path):typeof x=="function"?x(v):Array.isArray(x)?d(v,x):typeof v=="object"?v[x]:v,f=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||a.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:f.map(v=>u(v,x))})).slice().sort((x,v)=>{for(let N=0;N<f.length;N++){const b=t.compareValues(x.criteria[N],v.criteria[N],l[N]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=r})(X2)),X2}var t_={},rz;function g2e(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):r.push(u)}};return o(a,0),r}e.flatten=t})(t_)),t_}var n_={},iz;function yQ(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gQ(),a=aP(),s=lQ(),r=dQ();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&a.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(n_)),n_}var oz;function p2e(){return oz||(oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h2e(),a=g2e(),s=yQ();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,a.flatten(o),["asc"])}e.sortBy=r})(K2)),K2}var a_,lz;function x2e(){return lz||(lz=1,a_=p2e().sortBy),a_}var y2e=x2e();const rj=Ki(y2e);var bQ=e=>e.legend.settings,b2e=e=>e.legend.size,v2e=e=>e.legend.payload,w2e=rt([v2e,bQ],(e,t)=>{var{itemSorter:a}=t,s=e.flat(1);return a?rj(s,a):s});function N2e(){return Rt(w2e)}var qy=1;function vQ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,a]=h.useState({height:0,left:0,top:0,width:0}),s=h.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>qy||Math.abs(o.left-t.left)>qy||Math.abs(o.top-t.top)>qy||Math.abs(o.width-t.width)>qy)&&a({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Cs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var j2e=typeof Symbol=="function"&&Symbol.observable||"@@observable",cz=j2e,s_=()=>Math.random().toString(36).substring(7).split("").join("."),C2e={INIT:`@@redux/INIT${s_()}`,REPLACE:`@@redux/REPLACE${s_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${s_()}`},Fv=C2e;function rP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wQ(e,t,a){if(typeof e!="function")throw new Error(Cs(2));if(typeof t=="function"&&typeof a=="function"||typeof a=="function"&&typeof arguments[3]=="function")throw new Error(Cs(0));if(typeof t=="function"&&typeof a>"u"&&(a=t,t=void 0),typeof a<"u"){if(typeof a!="function")throw new Error(Cs(1));return a(wQ)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,C)=>{o.set(C,b)}))}function u(){if(c)throw new Error(Cs(3));return r}function f(b){if(typeof b!="function")throw new Error(Cs(4));if(c)throw new Error(Cs(5));let C=!0;d();const w=l++;return o.set(w,b),function(){if(C){if(c)throw new Error(Cs(6));C=!1,d(),o.delete(w),i=null}}}function p(b){if(!rP(b))throw new Error(Cs(7));if(typeof b.type>"u")throw new Error(Cs(8));if(typeof b.type!="string")throw new Error(Cs(17));if(c)throw new Error(Cs(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=o).forEach(w=>{w()}),b}function x(b){if(typeof b!="function")throw new Error(Cs(10));s=b,p({type:Fv.REPLACE})}function v(){const b=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Cs(11));function w(){const A=C;A.next&&A.next(u())}return w(),{unsubscribe:b(w)}},[cz](){return this}}}return p({type:Fv.INIT}),{dispatch:p,subscribe:f,getState:u,replaceReducer:x,[cz]:v}}function S2e(e){Object.keys(e).forEach(t=>{const a=e[t];if(typeof a(void 0,{type:Fv.INIT})>"u")throw new Error(Cs(12));if(typeof a(void 0,{type:Fv.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Cs(13))})}function NQ(e){const t=Object.keys(e),a={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(a[o]=e[o])}const s=Object.keys(a);let r;try{S2e(a)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let u=0;u<s.length;u++){const f=s[u],p=a[f],x=o[f],v=p(x,l);if(typeof v>"u")throw l&&l.type,new Error(Cs(14));d[f]=v,c=c||v!==x}return c=c||s.length!==Object.keys(o).length,c?d:o}}function Bv(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,a)=>(...s)=>t(a(...s)))}function _2e(...e){return t=>(a,s)=>{const r=t(a,s);let i=()=>{throw new Error(Cs(15))};const o={getState:r.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=Bv(...l)(r.dispatch),{...r,dispatch:i}}}function jQ(e){return rP(e)&&"type"in e&&typeof e.type=="string"}var CQ=Symbol.for("immer-nothing"),dz=Symbol.for("immer-draftable"),Vs=Symbol.for("immer-state");function Ui(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Mr=Object,Of=Mr.getPrototypeOf,Hv="constructor",ij="prototype",DE="configurable",qv="enumerable",Yb="writable",Ep="value",Gl=e=>!!e&&!!e[Vs];function Yi(e){return e?SQ(e)||oj(e)||!!e[dz]||!!e[Hv]?.[dz]||lj(e)||cj(e):!1}var A2e=Mr[ij][Hv].toString(),uz=new WeakMap;function SQ(e){if(!e||!iP(e))return!1;const t=Of(e);if(t===null||t===Mr[ij])return!0;const a=Mr.hasOwnProperty.call(t,Hv)&&t[Hv];if(a===Object)return!0;if(!af(a))return!1;let s=uz.get(a);return s===void 0&&(s=Function.toString.call(a),uz.set(a,s)),s===A2e}function Bx(e,t,a=!0){Hx(e)===0?(a?Reflect.ownKeys(e):Mr.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function Hx(e){const t=e[Vs];return t?t.type_:oj(e)?1:lj(e)?2:cj(e)?3:0}var mz=(e,t,a=Hx(e))=>a===2?e.has(t):Mr[ij].hasOwnProperty.call(e,t),OE=(e,t,a=Hx(e))=>a===2?e.get(t):e[t],Gv=(e,t,a,s=Hx(e))=>{s===2?e.set(t,a):s===3?e.add(a):e[t]=a};function T2e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var oj=Array.isArray,lj=e=>e instanceof Map,cj=e=>e instanceof Set,iP=e=>typeof e=="object",af=e=>typeof e=="function",r_=e=>typeof e=="boolean";function E2e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Nl=e=>e.copy_||e.base_,oP=e=>e.modified_?e.copy_:e.base_;function ME(e,t){if(lj(e))return new Map(e);if(cj(e))return new Set(e);if(oj(e))return Array[ij].slice.call(e);const a=SQ(e);if(t===!0||t==="class_only"&&!a){const s=Mr.getOwnPropertyDescriptors(e);delete s[Vs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[Yb]===!1&&(l[Yb]=!0,l[DE]=!0),(l.get||l.set)&&(s[o]={[DE]:!0,[Yb]:!0,[qv]:l[qv],[Ep]:e[o]})}return Mr.create(Of(e),s)}else{const s=Of(e);if(s!==null&&a)return{...e};const r=Mr.create(s);return Mr.assign(r,e)}}function lP(e,t=!1){return dj(e)||Gl(e)||!Yi(e)||(Hx(e)>1&&Mr.defineProperties(e,{set:Gy,add:Gy,clear:Gy,delete:Gy}),Mr.freeze(e),t&&Bx(e,(a,s)=>{lP(s,!0)},!1)),e}function k2e(){Ui(2)}var Gy={[Ep]:k2e};function dj(e){return e===null||!iP(e)?!0:Mr.isFrozen(e)}var Wv="MapSet",IE="Patches",fz="ArrayMethods",_Q={};function Mu(e){const t=_Q[e];return t||Ui(0,e),t}var hz=e=>!!_Q[e],kp,AQ=()=>kp,L2e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hz(Wv)?Mu(Wv):void 0,arrayMethodsPlugin_:hz(fz)?Mu(fz):void 0});function gz(e,t){t&&(e.patchPlugin_=Mu(IE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $E(e){RE(e),e.drafts_.forEach(P2e),e.drafts_=null}function RE(e){e===kp&&(kp=e.parent_)}var pz=e=>kp=L2e(kp,e);function P2e(e){const t=e[Vs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];if(e!==void 0&&e!==a){a[Vs].modified_&&($E(t),Ui(4)),Yi(e)&&(e=yz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(a[Vs].base_,e,t)}else e=yz(t,a);return D2e(t,e,!0),$E(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==CQ?e:void 0}function yz(e,t){if(dj(t))return t;const a=t[Vs];if(!a)return cP(t,e.handledSet_,e);if(!uj(a,e))return t;if(!a.modified_)return a.base_;if(!a.finalized_){const{callbacks_:s}=a;if(s)for(;s.length>0;)s.pop()(e);kQ(a,e)}return a.copy_}function D2e(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lP(t,a)}function TQ(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var uj=(e,t)=>e.scope_===t,O2e=[];function EQ(e,t,a,s){const r=Nl(e),i=e.type_;if(s!==void 0&&OE(r,s,i)===t){Gv(r,s,a,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;Bx(r,(c,d)=>{if(Gl(d)){const u=l.get(d)||[];u.push(c),l.set(d,u)}})}const o=e.draftLocations_.get(t)??O2e;for(const l of o)Gv(r,l,a,i)}function M2e(e,t,a){e.callbacks_.push(function(r){const i=t;if(!i||!uj(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=oP(i);EQ(e,i.draft_??i,o,a),kQ(i,r)})}function kQ(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}TQ(e)}}function I2e(e,t,a){const{scope_:s}=e;if(Gl(a)){const r=a[Vs];uj(r,s)&&r.callbacks_.push(function(){Kb(e);const o=oP(r);EQ(e,a,o,t)})}else Yi(a)&&e.callbacks_.push(function(){const i=Nl(e);OE(i,t,e.type_)===a&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&cP(OE(e.copy_,t,e.type_),s.handledSet_,s)})}function cP(e,t,a){return!a.immer_.autoFreeze_&&a.unfinalizedDrafts_<1||Gl(e)||t.has(e)||!Yi(e)||dj(e)||(t.add(e),Bx(e,(s,r)=>{if(Gl(r)){const i=r[Vs];if(uj(i,a)){const o=oP(i);Gv(e,s,o,e.type_),TQ(i)}}else Yi(r)&&cP(r,t,a)})),e}function $2e(e,t){const a=oj(e),s={type_:a?1:0,scope_:t?t.scope_:AQ(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=dP;a&&(r=[s],i=Lp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var dP={get(e,t){if(t===Vs)return e;let a=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&a?.isArrayOperationMethod(t))return a.createMethodInterceptor(e,t);const r=Nl(e);if(!mz(r,t,e.type_))return R2e(e,r,t);const i=r[t];if(e.finalized_||!Yi(i)||s&&e.operationMethod&&a?.isMutatingArrayMethod(e.operationMethod)&&E2e(t))return i;if(i===i_(e.base_,t)){Kb(e);const o=e.type_===1?+t:t,l=UE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in Nl(e)},ownKeys(e){return Reflect.ownKeys(Nl(e))},set(e,t,a){const s=LQ(Nl(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=i_(Nl(e),t),i=r?.[Vs];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_.set(t,!1),!0;if(T2e(a,r)&&(a!==void 0||mz(e.base_,t,e.type_)))return!0;Kb(e),zE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_.set(t,!0),I2e(e,t,a)),!0},deleteProperty(e,t){return Kb(e),i_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),zE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Nl(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{[Yb]:!0,[DE]:e.type_!==1||t!=="length",[qv]:s[qv],[Ep]:a[t]}},defineProperty(){Ui(11)},getPrototypeOf(e){return Of(e.base_)},setPrototypeOf(){Ui(12)}},Lp={};Bx(dP,(e,t)=>{Lp[e]=function(){const a=arguments;return a[0]=a[0][0],t.apply(this,a)}});Lp.deleteProperty=function(e,t){return Lp.set.call(this,e,t,void 0)};Lp.set=function(e,t,a){return dP.set.call(this,e[0],t,a,e[0])};function i_(e,t){const a=e[Vs];return(a?Nl(a):e)[t]}function R2e(e,t,a){const s=LQ(t,a);return s?Ep in s?s[Ep]:s.get?.call(e.draft_):void 0}function LQ(e,t){if(!(t in e))return;let a=Of(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Of(a)}}function zE(e){e.modified_||(e.modified_=!0,e.parent_&&zE(e.parent_))}function Kb(e){e.copy_||(e.assigned_=new Map,e.copy_=ME(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var z2e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(a,s,r)=>{if(af(a)&&!af(s)){const o=s;s=a;const l=this;return function(d=o,...u){return l.produce(d,f=>s.call(this,f,...u))}}af(s)||Ui(6),r!==void 0&&!af(r)&&Ui(7);let i;if(Yi(a)){const o=pz(this),l=UE(o,a,void 0);let c=!0;try{i=s(l),c=!1}finally{c?$E(o):RE(o)}return gz(o,r),xz(i,o)}else if(!a||!iP(a)){if(i=s(a),i===void 0&&(i=a),i===CQ&&(i=void 0),this.autoFreeze_&&lP(i,!0),r){const o=[],l=[];Mu(IE).generateReplacementPatches_(a,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Ui(1,a)},this.produceWithPatches=(a,s)=>{if(af(a))return(l,...c)=>this.produceWithPatches(l,d=>a(d,...c));let r,i;return[this.produce(a,s,(l,c)=>{r=l,i=c}),r,i]},r_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),r_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),r_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Yi(t)||Ui(8),Gl(t)&&(t=qi(t));const a=pz(this),s=UE(a,t,void 0);return s[Vs].isManual_=!0,RE(a),s}finishDraft(t,a){const s=t&&t[Vs];(!s||!s.isManual_)&&Ui(9);const{scope_:r}=s;return gz(r,a),xz(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,a){let s;for(s=a.length-1;s>=0;s--){const i=a[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(a=a.slice(s+1));const r=Mu(IE).applyPatches_;return Gl(t)?r(t,a):this.produce(t,i=>r(i,a))}};function UE(e,t,a,s){const[r,i]=lj(t)?Mu(Wv).proxyMap_(t,a):cj(t)?Mu(Wv).proxySet_(t,a):$2e(t,a);return(a?.scope_??AQ()).drafts_.push(r),i.callbacks_=a?.callbacks_??[],i.key_=s,a&&s!==void 0?M2e(a,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:d}=c;i.modified_&&d&&d.generatePatches_(i,[],c)}),r}function qi(e){return Gl(e)||Ui(10,e),PQ(e)}function PQ(e){if(!Yi(e)||dj(e))return e;const t=e[Vs];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=ME(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=ME(e,!0);return Bx(a,(r,i)=>{Gv(a,r,PQ(i))},s),t&&(t.finalized_=!1),a}var U2e=new z2e,DQ=U2e.produce;function OQ(e){return({dispatch:a,getState:s})=>r=>i=>typeof i=="function"?i(a,s,e):r(i)}var F2e=OQ(),B2e=OQ,H2e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bv:Bv.apply(null,arguments)};function bi(e,t){function a(...s){if(t){let r=t(...s);if(!r)throw new Error(Rr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return a.toString=()=>`${e}`,a.type=e,a.match=s=>jQ(s)&&s.type===e,a}var MQ=class Rg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Rg.prototype)}static get[Symbol.species](){return Rg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Rg(...t[0].concat(this)):new Rg(...t.concat(this))}};function bz(e){return Yi(e)?DQ(e,()=>{}):e}function Wy(e,t,a){return e.has(t)?e.get(t):e.set(t,a(t)).get(t)}function q2e(e){return typeof e=="boolean"}var G2e=()=>function(t){const{thunk:a=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new MQ;return a&&(q2e(a)?o.push(F2e):o.push(B2e(a.extraArgument))),o},IQ="RTK_autoBatch",oa=()=>e=>({payload:e,meta:{[IQ]:!0}}),vz=e=>t=>{setTimeout(t,e)},$Q=(e={type:"raf"})=>t=>(...a)=>{const s=t(...a);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vz(10):e.type==="callback"?e.queueNotification:vz(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},s,{subscribe(u){const f=()=>r&&u(),p=s.subscribe(f);return l.add(u),()=>{p(),l.delete(u)}},dispatch(u){try{return r=!u?.meta?.[IQ],i=!r,i&&(o||(o=!0,c(d))),s.dispatch(u)}finally{r=!0}}})},W2e=e=>function(a){const{autoBatch:s=!0}=a??{};let r=new MQ(e);return s&&r.push($Q(typeof s=="object"?s:void 0)),r};function V2e(e){const t=G2e(),{reducer:a=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof a=="function")l=a;else if(rP(a))l=NQ(a);else throw new Error(Rr(1));let c;typeof s=="function"?c=s(t):c=t();let d=Bv;r&&(d=H2e({trace:!1,...typeof r=="object"&&r}));const u=_2e(...c),f=W2e(u);let p=typeof o=="function"?o(f):f();const x=d(...p);return wQ(l,i,x)}function RQ(e){const t={},a=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Rr(28));if(l in t)throw new Error(Rr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&a.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return a.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,a,s]}function Q2e(e){return typeof e=="function"}function Y2e(e,t){let[a,s,r]=RQ(t),i;if(Q2e(e))i=()=>bz(e());else{const l=bz(e);i=()=>l}function o(l=i(),c){let d=[a[c.type],...s.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[r]),d.reduce((u,f)=>{if(f)if(Gl(u)){const x=f(u,c);return x===void 0?u:x}else{if(Yi(u))return DQ(u,p=>f(p,c));{const p=f(u,c);if(p===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return u},l)}return o.getInitialState=i,o}var K2e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",X2e=(e=21)=>{let t="",a=e;for(;a--;)t+=K2e[Math.random()*64|0];return t},Z2e=Symbol.for("rtk-slice-createasyncthunk");function J2e(e,t){return`${e}/${t}`}function e_e({creators:e}={}){const t=e?.asyncThunk?.[Z2e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Rr(11));const o=(typeof s.reducers=="function"?s.reducers(n_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(S,A){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(Rr(12));if(k in c.sliceCaseReducersByType)throw new Error(Rr(13));return c.sliceCaseReducersByType[k]=A,d},addMatcher(S,A){return c.sliceMatchers.push({matcher:S,reducer:A}),d},exposeAction(S,A){return c.actionCreators[S]=A,d},exposeCaseReducer(S,A){return c.sliceCaseReducersByName[S]=A,d}};l.forEach(S=>{const A=o[S],k={reducerName:S,type:J2e(r,S),createNotation:typeof s.reducers=="function"};s_e(A)?i_e(k,A,d,t):a_e(k,A,d)});function u(){const[S={},A=[],k=void 0]=typeof s.extraReducers=="function"?RQ(s.extraReducers):[s.extraReducers],_={...S,...c.sliceCaseReducersByType};return Y2e(s.initialState,E=>{for(let T in _)E.addCase(T,_[T]);for(let T of c.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of A)E.addMatcher(T.matcher,T.reducer);k&&E.addDefaultCase(k)})}const f=S=>S,p=new Map,x=new WeakMap;let v;function N(S,A){return v||(v=u()),v(S,A)}function b(){return v||(v=u()),v.getInitialState()}function C(S,A=!1){function k(E){let T=E[S];return typeof T>"u"&&A&&(T=Wy(x,k,b)),T}function _(E=f){const T=Wy(p,A,()=>new WeakMap);return Wy(T,E,()=>{const M={};for(const[R,z]of Object.entries(s.selectors??{}))M[R]=t_e(z,E,()=>Wy(x,E,b),A);return M})}return{reducerPath:S,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const w={name:r,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...C(i),injectInto(S,{reducerPath:A,...k}={}){const _=A??i;return S.inject({reducerPath:_,reducer:N},k),{...w,...C(_,!0)}}};return w}}function t_e(e,t,a,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=a()),e(l,...o)}return r.unwrapped=e,r}var br=e_e();function n_e(){function e(t,a){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...a}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...a){return t(...a)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,a){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:a}},asyncThunk:e}}function a_e({type:e,reducerName:t,createNotation:a},s,r){let i,o;if("reducer"in s){if(a&&!r_e(s))throw new Error(Rr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?bi(e,o):bi(e))}function s_e(e){return e._reducerDefinitionType==="asyncThunk"}function r_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function i_e({type:e,reducerName:t},a,s,r){if(!r)throw new Error(Rr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=a,f=r(e,i,u);s.exposeAction(t,f),o&&s.addCase(f.fulfilled,o),l&&s.addCase(f.pending,l),c&&s.addCase(f.rejected,c),d&&s.addMatcher(f.settled,d),s.exposeCaseReducer(t,{fulfilled:o||Vy,pending:l||Vy,rejected:c||Vy,settled:d||Vy})}function Vy(){}var o_e="task",zQ="listener",UQ="completed",uP="cancelled",l_e=`task-${uP}`,c_e=`task-${UQ}`,FE=`${zQ}-${uP}`,d_e=`${zQ}-${UQ}`,mj=class{constructor(e){this.code=e,this.message=`${o_e} ${uP} (reason: ${e})`}name="TaskAbortError";message},mP=(e,t)=>{if(typeof e!="function")throw new TypeError(Rr(32))},Vv=()=>{},FQ=(e,t=Vv)=>(e.catch(t),e),BQ=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),bu=e=>{if(e.aborted)throw new mj(e.reason)};function HQ(e,t){let a=Vv;return new Promise((s,r)=>{const i=()=>r(new mj(e.reason));if(e.aborted){i();return}a=BQ(e,i),t.finally(()=>a()).then(s,r)}).finally(()=>{a=Vv})}var u_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(a){return{status:a instanceof mj?"cancelled":"rejected",error:a}}finally{t?.()}},Qv=e=>t=>FQ(HQ(e,t).then(a=>(bu(e),a))),qQ=e=>{const t=Qv(e);return a=>t(new Promise(s=>setTimeout(s,a)))},{assign:xf}=Object,wz={},fj="listenerMiddleware",m_e=(e,t)=>{const a=s=>BQ(e,()=>s.abort(e.reason));return(s,r)=>{mP(s);const i=new AbortController;a(i);const o=u_e(async()=>{bu(e),bu(i.signal);const l=await s({pause:Qv(i.signal),delay:qQ(i.signal),signal:i.signal});return bu(i.signal),l},()=>i.abort(c_e));return r?.autoJoin&&t.push(o.catch(Vv)),{result:Qv(e)(o),cancel(){i.abort(l_e)}}}},f_e=(e,t)=>{const a=async(s,r)=>{bu(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:s,effect:(f,p)=>{p.unsubscribe(),c([f,p.getState(),p.getOriginalState()])}});i=()=>{u(),d()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await HQ(t,Promise.race(l));return bu(t),c}finally{i()}};return(s,r)=>FQ(a(s,r))},GQ=e=>{let{type:t,actionCreator:a,matcher:s,predicate:r,effect:i}=e;if(t)r=bi(t).match;else if(a)t=a.type,r=a.match;else if(s)r=s;else if(!r)throw new Error(Rr(21));return mP(i),{predicate:r,type:t,effect:i}},WQ=xf(e=>{const{type:t,predicate:a,effect:s}=GQ(e);return{id:X2e(),effect:s,type:t,predicate:a,pending:new Set,unsubscribe:()=>{throw new Error(Rr(22))}}},{withTypes:()=>WQ}),Nz=(e,t)=>{const{type:a,effect:s,predicate:r}=GQ(t);return Array.from(e.values()).find(i=>(typeof a=="string"?i.type===a:i.predicate===r)&&i.effect===s)},BE=e=>{e.pending.forEach(t=>{t.abort(FE)})},h_e=(e,t)=>()=>{for(const a of t.keys())BE(a);e.clear()},jz=(e,t,a)=>{try{e(t,a)}catch(s){setTimeout(()=>{throw s},0)}},VQ=xf(bi(`${fj}/add`),{withTypes:()=>VQ}),g_e=bi(`${fj}/removeAll`),QQ=xf(bi(`${fj}/remove`),{withTypes:()=>QQ}),p_e=(...e)=>{console.error(`${fj}/error`,...e)},qx=(e={})=>{const t=new Map,a=new Map,s=x=>{const v=a.get(x)??0;a.set(x,v+1)},r=x=>{const v=a.get(x)??1;v===1?a.delete(x):a.set(x,v-1)},{extra:i,onError:o=p_e}=e;mP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),v=>{x.unsubscribe(),v?.cancelActive&&BE(x)}),c=x=>{const v=Nz(t,x)??WQ(x);return l(v)};xf(c,{withTypes:()=>c});const d=x=>{const v=Nz(t,x);return v&&(v.unsubscribe(),x.cancelActive&&BE(v)),!!v};xf(d,{withTypes:()=>d});const u=async(x,v,N,b)=>{const C=new AbortController,w=f_e(c,C.signal),S=[];try{x.pending.add(C),s(x),await Promise.resolve(x.effect(v,xf({},N,{getOriginalState:b,condition:(A,k)=>w(A,k).then(Boolean),take:w,delay:qQ(C.signal),pause:Qv(C.signal),extra:i,signal:C.signal,fork:m_e(C.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,k,_)=>{A!==C&&(A.abort(FE),_.delete(A))})},cancel:()=>{C.abort(FE),x.pending.delete(C)},throwIfCancelled:()=>{bu(C.signal)}})))}catch(A){A instanceof mj||jz(o,A,{raisedBy:"effect"})}finally{await Promise.all(S),C.abort(d_e),r(x),x.pending.delete(C)}},f=h_e(t,a);return{middleware:x=>v=>N=>{if(!jQ(N))return v(N);if(VQ.match(N))return c(N.payload);if(g_e.match(N)){f();return}if(QQ.match(N))return d(N.payload);let b=x.getState();const C=()=>{if(b===wz)throw new Error(Rr(23));return b};let w;try{if(w=v(N),t.size>0){const S=x.getState(),A=Array.from(t.values());for(const k of A){let _=!1;try{_=k.predicate(N,S,b)}catch(E){_=!1,jz(o,E,{raisedBy:"predicate"})}_&&u(k,N,x,C)}}}finally{b=wz}return w},startListening:c,stopListening:d,clearListeners:f}};function Rr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},YQ=br({name:"chartLayout",initialState:x_e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var a,s,r,i;e.margin.top=(a=t.payload.top)!==null&&a!==void 0?a:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:y_e,setLayout:b_e,setChartSize:v_e,setScale:w_e}=YQ.actions,N_e=YQ.reducer;function KQ(e,t,a){return Array.isArray(e)&&e&&t+a!==0?e.slice(t,a+1):e}function ga(e){return Number.isFinite(e)}function Uo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Cz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function rf(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(a),!0).forEach(function(s){j_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function j_e(e,t,a){return(t=C_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function C_e(e){var t=S_e(e,"string");return typeof t=="symbol"?t:t+""}function S_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hn(e,t,a){return ua(e)||ua(t)?a:zo(t)?Ou(e,t,a):typeof t=="function"?t(e):a}var __e=(e,t,a)=>{if(t&&a){var{width:s,height:r}=a,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&It(e[i]))return rf(rf({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&It(e[o]))return rf(rf({},e),{},{[o]:e[o]+(r||0)})}return e},Sd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",XQ=(e,t,a,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===a&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(a),o},ZQ=(e,t,a)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:f,niceTicks:p,axisType:x}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,N=r==="category"&&o.bandwidth?o.bandwidth()/v:0;if(N=x==="angleAxis"&&i&&i.length>=2?gs(i[0]-i[1])*2*N:N,f||p){var b=(f||p||[]).map((C,w)=>{var S=s?s.indexOf(C):C;return{coordinate:o(S)+N,value:C,offset:N,index:w}});return b.filter(C=>!Qi(C.coordinate))}return c&&d?d.map((C,w)=>({coordinate:o(C)+N,value:C,index:w,offset:N})):o.ticks&&u!=null?o.ticks(u).map((C,w)=>({coordinate:o(C)+N,value:C,offset:N,index:w})):o.domain().map((C,w)=>({coordinate:o(C)+N,value:s?s[C]:C,index:w,offset:N}))},Sz=1e-4,A_e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var a=t.length,s=e.range(),r=Math.min(s[0],s[1])-Sz,i=Math.max(s[0],s[1])+Sz,o=e(t[0]),l=e(t[a-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[a-1]])}},T_e=(e,t)=>{if(!t||t.length!==2||!It(t[0])||!It(t[1]))return e;var a=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!It(e[0])||e[0]<a)&&(r[0]=a),(!It(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<a&&(r[1]=a),r},E_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<a;++l){var c=e[l],d=c?.[r];if(d!=null){var u=d[1],f=d[0],p=Qi(u)?f:u;p>=0?(d[0]=i,d[1]=i+p,i=u):(d[0]=o,d[1]=o+p,o=u)}}}},k_e=e=>{var t,a=e.length;if(!(a<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<a;++o){var l=e[o],c=l?.[r];if(c!=null){var d=Qi(c[1])?c[0]:c[1];d>=0?(c[0]=i,c[1]=i+d,i=c[1]):(c[0]=0,c[1]=0)}}}},L_e={sign:E_e,expand:nW,none:ld,silhouette:aW,wiggle:sW,positive:k_e},P_e=(e,t,a)=>{var s,r=(s=L_e[a])!==null&&s!==void 0?s:ld,i=h4().keys(t).value((l,c)=>Number(Hn(l,c,0))).order(ku).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((d,u)=>{var f=Hn(e[u],t[c],0);Array.isArray(f)&&f.length===2&&It(f[0])&&It(f[1])&&(d[0]=f[0],d[1]=f[1])})}),o};function D_e(e){return e==null?void 0:String(e)}function _z(e){var{axis:t,ticks:a,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ua(r[t.dataKey])){var l=sQ(a,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return a[i]?a[i].coordinate+s/2:null}var c=Hn(r,ua(o)?t.dataKey:o);return ua(c)?null:t.scale(c)}var Az=e=>{var{axis:t,ticks:a,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return a[o]?a[o].coordinate+s:null;var l=Hn(i,t.dataKey,t.scale.domain()[o]);return ua(l)?null:t.scale(l)-r/2+s},O_e=e=>{var{numericAxis:t}=e,a=t.scale.domain();if(t.type==="number"){var s=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return s<=0&&r>=0?0:r<0?r:s}return a[0]},M_e=e=>{var t=e.flat(2).filter(It);return[Math.min(...t),Math.max(...t)]},I_e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],$_e=(e,t,a)=>{if(e!=null)return I_e(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,d)=>{var u=KQ(d,t,a),f=M_e(u);return!ga(f[0])||!ga(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},Tz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ez=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mf=(e,t,a)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!a||s>0)return s}if(e&&t&&t.length>=2){for(var r=rj(t,u=>u.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],d=r[o-1];i=Math.min((c?.coordinate||0)-(d?.coordinate||0),i)}return i===1/0?0:i}return a?void 0:0};function kz(e){var{tooltipEntrySettings:t,dataKey:a,payload:s,value:r,name:i}=e;return rf(rf({},t),{},{dataKey:a,payload:s,value:r,name:i})}function nh(e,t){if(e)return String(e);if(typeof t=="string")return t}var R_e=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},z_e=(e,t)=>t==="centric"?e.angle:e.radius,nc=e=>e.layout.width,ac=e=>e.layout.height,U_e=e=>e.layout.scale,JQ=e=>e.layout.margin,hj=rt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),gj=rt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),eY="data-recharts-item-index",tY="data-recharts-item-id",Gx=60;function Lz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(a),!0).forEach(function(s){F_e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function F_e(e,t,a){return(t=B_e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B_e(e){var t=H_e(e,"string");return typeof t=="symbol"?t:t+""}function H_e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_e=e=>e.brush.height;function G_e(e){var t=gj(e);return t.reduce((a,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Gx;return a+r}return a},0)}function W_e(e){var t=gj(e);return t.reduce((a,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:Gx;return a+r}return a},0)}function V_e(e){var t=hj(e);return t.reduce((a,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?a+s.height:a,0)}function Q_e(e){var t=hj(e);return t.reduce((a,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?a+s.height:a,0)}var is=rt([nc,ac,JQ,q_e,G_e,W_e,V_e,Q_e,bQ,b2e],(e,t,a,s,r,i,o,l,c,d)=>{var u={left:(a.left||0)+r,right:(a.right||0)+i},f={top:(a.top||0)+o,bottom:(a.bottom||0)+l},p=Qy(Qy({},f),u),x=p.bottom;p.bottom+=s,p=__e(p,c,d);var v=e-p.left-p.right,N=t-p.top-p.bottom;return Qy(Qy({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(N,0)})}),Y_e=rt(is,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),fP=rt(nc,ac,(e,t)=>({x:0,y:0,width:e,height:t})),K_e=h.createContext(null),Us=()=>h.useContext(K_e)!=null,pj=e=>e.brush,xj=rt([pj,is,JQ],(e,t,a)=>({height:e.height,x:It(e.x)?e.x:t.left,y:It(e.y)?e.y:t.top+t.height+t.brushBottom-(a?.bottom||0),width:It(e.width)?e.width:t.width})),o_={},l_={},c_={},Pz;function X_e(){return Pz||(Pz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),u=()=>{l!==null&&(a.apply(o,l),o=void 0,l=null)},f=()=>{d&&u(),N()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,f()},s)},v=()=>{p!==null&&(clearTimeout(p),p=null)},N=()=>{v(),o=void 0,l=null},b=()=>{u()},C=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&u()};return C.schedule=x,C.cancel=N,C.flush=b,r?.addEventListener("abort",N,{once:!0}),C}e.debounce=t})(c_)),c_}var Dz;function Z_e(){return Dz||(Dz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X_e();function a(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,d=Array(2);o&&(d[0]="leading"),l&&(d[1]="trailing");let u,f=null;const p=t.debounce(function(...N){u=s.apply(this,N),f=null},r,{edges:d}),x=function(...N){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(u=s.apply(this,N),f=Date.now(),p.cancel(),p.schedule(),u):(p.apply(this,N),u)},v=()=>(p.flush(),u);return x.cancel=p.cancel,x.flush=v,x}e.debounce=a})(l_)),l_}var Oz;function J_e(){return Oz||(Oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z_e();function a(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=a})(o_)),o_}var d_,Mz;function eAe(){return Mz||(Mz=1,d_=J_e().throttle),d_}var tAe=eAe();const nAe=Ki(tAe);var Yv=function(t,a){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(a===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(a===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(a.replace(/%s/g,()=>r[o++]))}},nY=(e,t,a)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=a,l=ql(s)?e:Number(s),c=ql(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},aAe={width:0,height:0,overflow:"visible"},sAe={width:0,overflowX:"visible"},rAe={height:0,overflowY:"visible"},iAe={},oAe=e=>{var{width:t,height:a}=e,s=ql(t),r=ql(a);return s&&r?aAe:s?sAe:r?rAe:iAe};function lAe(e){var{width:t,height:a,aspect:s}=e,r=t,i=a;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},HE.apply(null,arguments)}function Iz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Iz(Object(a),!0).forEach(function(s){cAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Iz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cAe(e,t,a){return(t=dAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dAe(e){var t=uAe(e,"string");return typeof t=="symbol"?t:t+""}function uAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aY=h.createContext({width:-1,height:-1});function mAe(e){return Uo(e.width)&&Uo(e.height)}function sY(e){var{children:t,width:a,height:s}=e,r=h.useMemo(()=>({width:a,height:s}),[a,s]);return mAe(r)?h.createElement(aY.Provider,{value:r},t):null}var hP=()=>h.useContext(aY),fAe=h.forwardRef((e,t)=>{var{aspect:a,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:x,style:v={}}=e,N=h.useRef(null),b=h.useRef();b.current=x,h.useImperativeHandle(t,()=>N.current);var[C,w]=h.useState({containerWidth:s.width,containerHeight:s.height}),S=h.useCallback((T,M)=>{w(R=>{var z=Math.round(T),P=Math.round(M);return R.containerWidth===z&&R.containerHeight===P?R:{containerWidth:z,containerHeight:P}})},[]);h.useEffect(()=>{if(N.current==null||typeof ResizeObserver>"u")return Ux;var T=P=>{var I,{width:q,height:Q}=P[0].contentRect;S(q,Q),(I=b.current)===null||I===void 0||I.call(b,q,Q)};u>0&&(T=nAe(T,u,{trailing:!0,leading:!1}));var M=new ResizeObserver(T),{width:R,height:z}=N.current.getBoundingClientRect();return S(R,z),M.observe(N.current),()=>{M.disconnect()}},[S,u]);var{containerWidth:A,containerHeight:k}=C;Yv(!a||a>0,"The aspect(%s) must be greater than zero.",a);var{calculatedWidth:_,calculatedHeight:E}=nY(A,k,{width:r,height:i,aspect:a,maxHeight:c});return Yv(_!=null&&_>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,E,r,i,o,l,a),h.createElement("div",{id:f?"".concat(f):void 0,className:Pt("recharts-responsive-container",p),style:$z($z({},v),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:N},h.createElement("div",{style:oAe({width:r,height:i})},h.createElement(sY,{width:_,height:E},d)))}),u_=h.forwardRef((e,t)=>{var a=hP();if(Uo(a.width)&&Uo(a.height))return e.children;var{width:s,height:r}=lAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=nY(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return It(i)&&It(o)?h.createElement(sY,{width:i,height:o},e.children):h.createElement(fAe,HE({},e,{width:s,height:r,ref:t}))});function rY(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var yj=()=>{var e,t=Us(),a=Rt(Y_e),s=Rt(xj),r=(e=Rt(pj))===null||e===void 0?void 0:e.padding;return!t||!s||!r?a:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},hAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iY=()=>{var e;return(e=Rt(is))!==null&&e!==void 0?e:hAe},gP=()=>Rt(nc),pP=()=>Rt(ac),gAe=()=>Rt(e=>e.layout.margin),wn=e=>e.layout.layoutType,ah=()=>Rt(wn),pAe=()=>{var e=ah();return e!==void 0},bj=e=>{var t=Xn(),a=Us(),{width:s,height:r}=e,i=hP(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),h.useEffect(()=>{!a&&Uo(o)&&Uo(l)&&t(v_e({width:o,height:l}))},[t,a,o,l]),null},oY=Symbol.for("immer-nothing"),Rz=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state");function Fi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pp=Object.getPrototypeOf;function If(e){return!!e&&!!e[Fr]}function Iu(e){return e?lY(e)||Array.isArray(e)||!!e[Rz]||!!e.constructor?.[Rz]||Wx(e)||wj(e):!1}var xAe=Object.prototype.constructor.toString(),zz=new WeakMap;function lY(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const a=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(a===Object)return!0;if(typeof a!="function")return!1;let s=zz.get(a);return s===void 0&&(s=Function.toString.call(a),zz.set(a,s)),s===xAe}function Kv(e,t,a=!0){vj(e)===0?(a?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function vj(e){const t=e[Fr];return t?t.type_:Array.isArray(e)?1:Wx(e)?2:wj(e)?3:0}function qE(e,t){return vj(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cY(e,t,a){const s=vj(e);s===2?e.set(t,a):s===3?e.add(a):e[t]=a}function yAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Wx(e){return e instanceof Map}function wj(e){return e instanceof Set}function Kd(e){return e.copy_||e.base_}function GE(e,t){if(Wx(e))return new Map(e);if(wj(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const a=lY(e);if(t===!0||t==="class_only"&&!a){const s=Object.getOwnPropertyDescriptors(e);delete s[Fr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Pp(e),s)}else{const s=Pp(e);if(s!==null&&a)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function xP(e,t=!1){return Nj(e)||If(e)||!Iu(e)||(vj(e)>1&&Object.defineProperties(e,{set:Yy,add:Yy,clear:Yy,delete:Yy}),Object.freeze(e),t&&Object.values(e).forEach(a=>xP(a,!0))),e}function bAe(){Fi(2)}var Yy={value:bAe};function Nj(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var vAe={};function $u(e){const t=vAe[e];return t||Fi(0,e),t}var Dp;function dY(){return Dp}function wAe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Uz(e,t){t&&($u("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function WE(e){VE(e),e.drafts_.forEach(NAe),e.drafts_=null}function VE(e){e===Dp&&(Dp=e.parent_)}function Fz(e){return Dp=wAe(Dp,e)}function NAe(e){const t=e[Fr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Bz(e,t){t.unfinalizedDrafts_=t.drafts_.length;const a=t.drafts_[0];return e!==void 0&&e!==a?(a[Fr].modified_&&(WE(t),Fi(4)),Iu(e)&&(e=Xv(t,e),t.parent_||Zv(t,e)),t.patches_&&$u("Patches").generateReplacementPatches_(a[Fr].base_,e,t.patches_,t.inversePatches_)):e=Xv(t,a,[]),WE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==oY?e:void 0}function Xv(e,t,a){if(Nj(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Fr];if(!r)return Kv(t,(i,o)=>Hz(e,r,t,i,o,a),s),t;if(r.scope_!==e)return t;if(!r.modified_)return Zv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),Kv(o,(c,d)=>Hz(e,r,i,c,d,a,l),s),Zv(e,i,!1),a&&e.patches_&&$u("Patches").generatePatches_(r,a,e.patches_,e.inversePatches_)}return r.copy_}function Hz(e,t,a,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=Nj(r);if(!(l&&!o)){if(If(r)){const c=i&&t&&t.type_!==3&&!qE(t.assigned_,s)?i.concat(s):void 0,d=Xv(e,r,c);if(cY(a,s,d),If(d))e.canAutoFreeze_=!1;else return}else o&&a.add(r);if(Iu(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;Xv(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Wx(a)?a.has(s):Object.prototype.propertyIsEnumerable.call(a,s))&&Zv(e,r)}}}function Zv(e,t,a=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xP(t,a)}function jAe(e,t){const a=Array.isArray(e),s={type_:a?1:0,scope_:t?t.scope_:dY(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=yP;a&&(r=[s],i=Op);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var yP={get(e,t){if(t===Fr)return e;const a=Kd(e);if(!qE(a,t))return CAe(e,a,t);const s=a[t];return e.finalized_||!Iu(s)?s:s===m_(e.base_,t)?(f_(e),e.copy_[t]=YE(s,e)):s},has(e,t){return t in Kd(e)},ownKeys(e){return Reflect.ownKeys(Kd(e))},set(e,t,a){const s=uY(Kd(e),t);if(s?.set)return s.set.call(e.draft_,a),!0;if(!e.modified_){const r=m_(Kd(e),t),i=r?.[Fr];if(i&&i.base_===a)return e.copy_[t]=a,e.assigned_[t]=!1,!0;if(yAe(a,r)&&(a!==void 0||qE(e.base_,t)))return!0;f_(e),QE(e)}return e.copy_[t]===a&&(a!==void 0||t in e.copy_)||Number.isNaN(a)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=a,e.assigned_[t]=!0),!0},deleteProperty(e,t){return m_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,f_(e),QE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const a=Kd(e),s=Reflect.getOwnPropertyDescriptor(a,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:a[t]}},defineProperty(){Fi(11)},getPrototypeOf(e){return Pp(e.base_)},setPrototypeOf(){Fi(12)}},Op={};Kv(yP,(e,t)=>{Op[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Op.deleteProperty=function(e,t){return Op.set.call(this,e,t,void 0)};Op.set=function(e,t,a){return yP.set.call(this,e[0],t,a,e[0])};function m_(e,t){const a=e[Fr];return(a?Kd(a):e)[t]}function CAe(e,t,a){const s=uY(t,a);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function uY(e,t){if(!(t in e))return;let a=Pp(e);for(;a;){const s=Object.getOwnPropertyDescriptor(a,t);if(s)return s;a=Pp(a)}}function QE(e){e.modified_||(e.modified_=!0,e.parent_&&QE(e.parent_))}function f_(e){e.copy_||(e.copy_=GE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var SAe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,a,s)=>{if(typeof t=="function"&&typeof a!="function"){const i=a;a=t;const o=this;return function(c=i,...d){return o.produce(c,u=>a.call(this,u,...d))}}typeof a!="function"&&Fi(6),s!==void 0&&typeof s!="function"&&Fi(7);let r;if(Iu(t)){const i=Fz(this),o=YE(t,void 0);let l=!0;try{r=a(o),l=!1}finally{l?WE(i):VE(i)}return Uz(i,s),Bz(r,i)}else if(!t||typeof t!="object"){if(r=a(t),r===void 0&&(r=t),r===oY&&(r=void 0),this.autoFreeze_&&xP(r,!0),s){const i=[],o=[];$u("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else Fi(1,t)},this.produceWithPatches=(t,a)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,a,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Iu(e)||Fi(8),If(e)&&(e=_Ae(e));const t=Fz(this),a=YE(e,void 0);return a[Fr].isManual_=!0,VE(t),a}finishDraft(e,t){const a=e&&e[Fr];(!a||!a.isManual_)&&Fi(9);const{scope_:s}=a;return Uz(s,t),Bz(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let a;for(a=t.length-1;a>=0;a--){const r=t[a];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}a>-1&&(t=t.slice(a+1));const s=$u("Patches").applyPatches_;return If(e)?s(e,t):this.produce(e,r=>s(r,t))}};function YE(e,t){const a=Wx(e)?$u("MapSet").proxyMap_(e,t):wj(e)?$u("MapSet").proxySet_(e,t):jAe(e,t);return(t?t.scope_:dY()).drafts_.push(a),a}function _Ae(e){return If(e)||Fi(10,e),mY(e)}function mY(e){if(!Iu(e)||Nj(e))return e;const t=e[Fr];let a,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,a=GE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else a=GE(e,!0);return Kv(a,(r,i)=>{cY(a,r,mY(i))},s),t&&(t.finalized_=!1),a}var AAe=new SAe;AAe.produce;var TAe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},fY=br({name:"legend",initialState:TAe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:oa()},replaceLegendPayload:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).payload.indexOf(a);r>-1&&(e.payload[r]=s)},prepare:oa()},removeLegendPayload:{reducer(e,t){var a=qi(e).payload.indexOf(t.payload);a>-1&&e.payload.splice(a,1)},prepare:oa()}}}),{setLegendSize:qz,setLegendSettings:EAe,addLegendPayload:hY,replaceLegendPayload:gY,removeLegendPayload:pY}=fY.actions,kAe=fY.reducer,LAe=["contextPayload"];function KE(){return KE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},KE.apply(null,arguments)}function Gz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function $f(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(a),!0).forEach(function(s){PAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Gz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PAe(e,t,a){return(t=DAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DAe(e){var t=OAe(e,"string");return typeof t=="symbol"?t:t+""}function OAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MAe(e,t){if(e==null)return{};var a,s,r=IAe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function IAe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function $Ae(e){return e.value}function RAe(e){var{contextPayload:t}=e,a=MAe(e,LAe),s=pQ(t,e.payloadUniqBy,$Ae),r=$f($f({},a),{},{payload:s});return h.isValidElement(e.content)?h.cloneElement(e.content,r):typeof e.content=="function"?h.createElement(e.content,r):h.createElement(HSe,r)}function zAe(e,t,a,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((s||0)-i.width)/2}:d=l==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((r||0)-i.height)/2}:u=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),$f($f({},d),u)}function UAe(e){var t=Xn();return h.useEffect(()=>{t(EAe(e))},[t,e]),null}function FAe(e){var t=Xn();return h.useEffect(()=>(t(qz(e)),()=>{t(qz({width:0,height:0}))}),[t,e]),null}function BAe(e,t,a,s){return e==="vertical"&&It(t)?{height:t}:e==="horizontal"?{width:a||s}:null}var HAe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function xY(e){var t=Va(e,HAe),a=N2e(),s=fSe(),r=gAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[d,u]=vQ([a]),f=gP(),p=pP();if(f==null||p==null)return null;var x=f-(r?.left||0)-(r?.right||0),v=BAe(t.layout,o,i,x),N=c?l:$f($f({position:"absolute",width:v?.width||i||"auto",height:v?.height||o||"auto"},zAe(l,t,r,f,p,d)),l),b=c??s;if(b==null||a==null)return null;var C=h.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:u},h.createElement(UAe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&h.createElement(FAe,{width:d.width,height:d.height}),h.createElement(RAe,KE({},t,v,{margin:r,chartWidth:f,chartHeight:p,contextPayload:a})));return Bi.createPortal(C,b)}xY.displayName="Legend";function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},XE.apply(null,arguments)}function Wz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function h_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Wz(Object(a),!0).forEach(function(s){qAe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qAe(e,t,a){return(t=GAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GAe(e){var t=WAe(e,"string");return typeof t=="symbol"?t:t+""}function WAe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VAe(e){return Array.isArray(e)&&zo(e[0])&&zo(e[1])?e.join(" ~ "):e}var QAe=e=>{var{separator:t=" : ",contentStyle:a={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},_=(l?rj(i,l):i).map((E,T)=>{if(E.type==="none")return null;var M=E.formatter||o||VAe,{value:R,name:z}=E,P=R,I=z;if(M){var q=M(R,z,E,T,i);if(Array.isArray(q))[P,I]=q;else if(q!=null)P=q;else return null}var Q=h_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},s);return h.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Q},zo(I)?h.createElement("span",{className:"recharts-tooltip-item-name"},I):null,zo(I)?h.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,h.createElement("span",{className:"recharts-tooltip-item-value"},P),h.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return h.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},v=h_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=h_({margin:0},r),b=!ua(u),C=b?u:"",w=Pt("recharts-default-tooltip",c),S=Pt("recharts-tooltip-label",d);b&&f&&i!==void 0&&i!==null&&(C=f(u,i));var A=p?{role:"status","aria-live":"assertive"}:{};return h.createElement("div",XE({className:w,style:v},A),h.createElement("p",{className:S,style:N},h.isValidElement(C)?C:"".concat(C)),x())},hg="recharts-tooltip-wrapper",YAe={visibility:"hidden"};function KAe(e){var{coordinate:t,translateX:a,translateY:s}=e;return Pt(hg,{["".concat(hg,"-right")]:It(a)&&t&&It(t.x)&&a>=t.x,["".concat(hg,"-left")]:It(a)&&t&&It(t.x)&&a<t.x,["".concat(hg,"-bottom")]:It(s)&&t&&It(t.y)&&s>=t.y,["".concat(hg,"-top")]:It(s)&&t&&It(t.y)&&s<t.y})}function Vz(e){var{allowEscapeViewBox:t,coordinate:a,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&It(i[s]))return i[s];var u=a[s]-l-(r>0?r:0),f=a[s]+r;if(t[s])return o[s]?u:f;var p=c[s];if(p==null)return 0;if(o[s]){var x=u,v=p;return x<v?Math.max(f,p):Math.max(u,p)}if(d==null)return 0;var N=f+l,b=p+d;return N>b?Math.max(u,p):Math.max(f,p)}function XAe(e){var{translateX:t,translateY:a,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(a,"px, 0)"):"translate(".concat(t,"px, ").concat(a,"px)")}}function ZAe(e){var{allowEscapeViewBox:t,coordinate:a,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,f;return o.height>0&&o.width>0&&a?(u=Vz({allowEscapeViewBox:t,coordinate:a,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Vz({allowEscapeViewBox:t,coordinate:a,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=XAe({translateX:u,translateY:f,useTranslate3d:l})):d=YAe,{cssProperties:d,cssClasses:KAe({translateX:u,translateY:f,coordinate:a})}}function Qz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ky(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(a),!0).forEach(function(s){ZE(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ZE(e,t,a){return(t=JAe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function JAe(e){var t=eTe(e,"string");return typeof t=="symbol"?t:t+""}function eTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tTe extends h.PureComponent{constructor(){super(...arguments),ZE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ZE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var a,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&a!==void 0?a:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,a;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:a,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:f,useTranslate3d:p,viewBox:x,wrapperStyle:v,lastBoundingBox:N,innerRef:b,hasPortalFromProps:C}=this.props,{cssClasses:w,cssProperties:S}=ZAe({allowEscapeViewBox:a,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:f,tooltipBox:{height:N.height,width:N.width},useTranslate3d:p,viewBox:x}),A=C?{}:Ky(Ky({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=Ky(Ky({},A),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return h.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var yY=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function JE(){return JE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},JE.apply(null,arguments)}function Yz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Kz(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(a),!0).forEach(function(s){nTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function nTe(e,t,a){return(t=aTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function aTe(e){var t=sTe(e,"string");return typeof t=="symbol"?t:t+""}function sTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xz={curveBasisClosed:spe,curveBasisOpen:rpe,curveBasis:ape,curveBumpX:PG,curveBumpY:DG,curveLinearClosed:lpe,curveLinear:Ax,curveMonotoneX:lE,curveMonotoneY:KG,curveNatural:ZG,curveStep:JG,curveStepAfter:tW,curveStepBefore:eW},Jv=e=>ga(e.x)&&ga(e.y),Zz=e=>e.base!=null&&Jv(e.base)&&Jv(e),gg=e=>e.x,pg=e=>e.y,rTe=(e,t)=>{if(typeof e=="function")return e;var a="curve".concat(zx(e));return(a==="curveMonotone"||a==="curveBump")&&t?Xz["".concat(a).concat(t==="vertical"?"Y":"X")]:Xz[a]||Ax},iTe=e=>{var{type:t="linear",points:a=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=rTe(t,r),l=i?a.filter(Jv):a,c;if(Array.isArray(s)){var d=a.map((x,v)=>Kz(Kz({},x),{},{base:s[v]}));r==="vertical"?c=Mg().y(pg).x1(gg).x0(x=>x.base.x):c=Mg().x(gg).y1(pg).y0(x=>x.base.y);var u=c.defined(Zz).curve(o),f=i?d.filter(Zz):d;return u(f)}r==="vertical"&&It(s)?c=Mg().y(pg).x1(gg).x0(s):It(s)?c=Mg().x(gg).y1(pg).y0(s):c=u4().x(gg).y(pg);var p=c.defined(Jv).curve(o);return p(l)},bP=e=>{var{className:t,points:a,path:s,pathRef:r}=e,i=ah();if((!a||!a.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=a&&a.length?iTe(o):s;return h.createElement("path",JE({},Ur(e),nP(e),{className:Pt("recharts-curve",t),d:l===null?void 0:l,ref:r}))},oTe=["x","y","top","left","width","height","className"];function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ek.apply(null,arguments)}function Jz(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function lTe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(a),!0).forEach(function(s){cTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jz(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cTe(e,t,a){return(t=dTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dTe(e){var t=uTe(e,"string");return typeof t=="symbol"?t:t+""}function uTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mTe(e,t){if(e==null)return{};var a,s,r=fTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var hTe=(e,t,a,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(a),gTe=e=>{var{x:t=0,y:a=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=mTe(e,oTe),d=lTe({x:t,y:a,top:s,left:r,width:i,height:o},c);return!It(t)||!It(a)||!It(i)||!It(o)||!It(s)||!It(r)?null:h.createElement("path",ek({},Ws(d),{className:Pt("recharts-cross",l),d:hTe(t,a,i,o,s,r)}))};function pTe(e,t,a,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:a.left+.5,y:e==="horizontal"?a.top+.5:t.y-r,width:e==="horizontal"?s:a.width-1,height:e==="horizontal"?a.height-1:s}}function eU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function tU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?eU(Object(a),!0).forEach(function(s){xTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function xTe(e,t,a){return(t=yTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function yTe(e){var t=bTe(e,"string");return typeof t=="symbol"?t:t+""}function bTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),bY=(e,t,a)=>e.map(s=>"".concat(vTe(s)," ").concat(t,"ms ").concat(a)).join(","),wTe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((a,s)=>a.filter(r=>s.includes(r))),Mp=(e,t)=>Object.keys(t).reduce((a,s)=>tU(tU({},a),{},{[s]:e(s,t[s])}),{});function nU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ya(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?nU(Object(a),!0).forEach(function(s){NTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NTe(e,t,a){return(t=jTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jTe(e){var t=CTe(e,"string");return typeof t=="symbol"?t:t+""}function CTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ew=(e,t,a)=>e+(t-e)*a,tk=e=>{var{from:t,to:a}=e;return t!==a},vY=(e,t,a)=>{var s=Mp((r,i)=>{if(tk(i)){var[o,l]=e(i.from,i.to,i.velocity);return Ya(Ya({},i),{},{from:o,velocity:l})}return i},t);return a<1?Mp((r,i)=>tk(i)&&s[r]!=null?Ya(Ya({},i),{},{velocity:ew(i.velocity,s[r].velocity,a),from:ew(i.from,s[r].from,a)}):i,t):vY(e,s,a-1)};function STe(e,t,a,s,r,i){var o,l=s.reduce((p,x)=>Ya(Ya({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Mp((p,x)=>x.from,l),d=()=>!Object.values(l).filter(tk).length,u=null,f=p=>{o||(o=p);var x=p-o,v=x/a.dt;l=vY(a,l,v),r(Ya(Ya(Ya({},e),t),c())),o=p,d()||(u=i.setTimeout(f))};return()=>(u=i.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}function _Te(e,t,a,s,r,i,o){var l=null,c=r.reduce((f,p)=>{var x=e[p],v=t[p];return x==null||v==null?f:Ya(Ya({},f),{},{[p]:[x,v]})},{}),d,u=f=>{d||(d=f);var p=(f-d)/s,x=Mp((N,b)=>ew(...b,a(p)),c);if(i(Ya(Ya(Ya({},e),t),x)),p<1)l=o.setTimeout(u);else{var v=Mp((N,b)=>ew(...b,a(1)),c);i(Ya(Ya(Ya({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{var f;(f=l)===null||f===void 0||f()})}const ATe=(e,t,a,s,r,i)=>{var o=wTe(e,t);return a==null?()=>(r(Ya(Ya({},e),t)),()=>{}):a.isStepper===!0?STe(e,t,a,o,r,i):_Te(e,t,a,s,o,r,i)};var tw=1e-4,wY=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],NY=(e,t)=>e.map((a,s)=>a*t**s).reduce((a,s)=>a+s),aU=(e,t)=>a=>{var s=wY(e,t);return NY(s,a)},TTe=(e,t)=>a=>{var s=wY(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return NY(r,a)},ETe=e=>{var t,a=e.split("(");if(a.length!==2||a[0]!=="cubic-bezier")return null;var s=(t=a[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},kTe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(a.length===1)switch(a[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=ETe(a[0]);if(r)return r}}return a.length===4?a:[0,0,1,1]},LTe=(e,t,a,s)=>{var r=aU(e,a),i=aU(t,s),o=TTe(e,a),l=d=>d>1?1:d<0?0:d,c=d=>{for(var u=d>1?1:d,f=u,p=0;p<8;++p){var x=r(f)-u,v=o(f);if(Math.abs(x-u)<tw||v<tw)return i(f);f=l(f-x/v)}return i(f)};return c.isStepper=!1,c},sU=function(){return LTe(...kTe(...arguments))},PTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:a=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var d=-(o-l)*a,u=c*s,f=c+(d-u)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<tw&&Math.abs(f)<tw?[l,0]:[p,f]};return i.isStepper=!0,i.dt=r,i},DTe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return sU(e);case"spring":return PTe();default:if(e.split("(")[0]==="cubic-bezier")return sU(e)}return typeof e=="function"?e:null};function OTe(e){var t,a=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,d),c);return}i(c),r=e.setTimeout(i.bind(null,d));return}typeof o=="string"&&(t=o,a(t)),typeof o=="object"&&(t=o,a(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(a=o,()=>{a=()=>null}),getTimeoutController:()=>e}}class MTe{setTimeout(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=a?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function ITe(){return OTe(new MTe)}var $Te=h.createContext(ITe);function RTe(e,t){var a=h.useContext($Te);return h.useMemo(()=>t??a(e),[e,t,a])}var zTe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),jj={isSsr:zTe()},UTe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},rU={t:0},g_={t:1};function Vx(e){var t=Va(e,UTe),{isActive:a,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=a==="auto"?!jj.isSsr:a,f=RTe(t.animationId,t.animationManager),[p,x]=h.useState(u?rU:g_),v=h.useRef(null);return h.useEffect(()=>{u||x(g_)},[u]),h.useEffect(()=>{if(!u||!s)return Ux;var N=ATe(rU,g_,DTe(i),r,x,f.getTimeoutController()),b=()=>{v.current=N()};return f.start([c,o,b,r,l]),()=>{f.stop(),v.current&&v.current(),l()}},[u,s,r,i,o,c,l,f]),d(p.t)}function Qx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",a=h.useRef(Tp(t)),s=h.useRef(e);return s.current!==e&&(a.current=Tp(t),s.current=e),a.current}var FTe=["radius"],BTe=["radius"],iU,oU,lU,cU,dU,uU,mU,fU,hU,gU;function pU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function xU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?pU(Object(a),!0).forEach(function(s){HTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function HTe(e,t,a){return(t=qTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qTe(e){var t=GTe(e,"string");return typeof t=="symbol"?t:t+""}function GTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nw.apply(null,arguments)}function yU(e,t){if(e==null)return{};var a,s,r=WTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WTe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function io(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bU=(e,t,a,s,r)=>{var i=Kc(a),o=Kc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,d=i>=0?1:-1,u=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,v=4;x<v;x++)p[x]=r[x]>l?l:r[x];f=ja(iU||(iU=io(["M",",",""])),e,t+c*p[0]),p[0]>0&&(f+=ja(oU||(oU=io(["A ",",",",0,0,",",",",",""])),p[0],p[0],u,e+d*p[0],t)),f+=ja(lU||(lU=io(["L ",",",""])),e+a-d*p[1],t),p[1]>0&&(f+=ja(cU||(cU=io(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],u,e+a,t+c*p[1])),f+=ja(dU||(dU=io(["L ",",",""])),e+a,t+s-c*p[2]),p[2]>0&&(f+=ja(uU||(uU=io(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],u,e+a-d*p[2],t+s)),f+=ja(mU||(mU=io(["L ",",",""])),e+d*p[3],t+s),p[3]>0&&(f+=ja(fU||(fU=io(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],u,e,t+s-c*p[3])),f+="Z"}else if(l>0&&r===+r&&r>0){var N=Math.min(l,r);f=ja(hU||(hU=io(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*N,N,N,u,e+d*N,t,e+a-d*N,t,N,N,u,e+a,t+c*N,e+a,t+s-c*N,N,N,u,e+a-d*N,t+s,e+d*N,t+s,N,N,u,e,t+s-c*N)}else f=ja(gU||(gU=io(["M ",","," h "," v "," h "," Z"])),e,t,a,s,-a);return f},vU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jY=e=>{var t=Va(e,vU),a=h.useRef(null),[s,r]=h.useState(-1);h.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var X=a.current.getTotalLength();X&&r(X)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:x,isAnimationActive:v,isUpdateAnimationActive:N}=t,b=h.useRef(l),C=h.useRef(c),w=h.useRef(i),S=h.useRef(o),A=h.useMemo(()=>({x:i,y:o,width:l,height:c,radius:d}),[i,o,l,c,d]),k=Qx(A,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var _=Pt("recharts-rectangle",u);if(!N){var E=Ws(t),{radius:T}=E,M=yU(E,FTe);return h.createElement("path",nw({},M,{x:Kc(i),y:Kc(o),width:Kc(l),height:Kc(c),radius:typeof d=="number"?d:void 0,className:_,d:bU(i,o,l,c,d)}))}var R=b.current,z=C.current,P=w.current,I=S.current,q="0px ".concat(s===-1?1:s,"px"),Q="".concat(s,"px 0px"),V=bY(["strokeDasharray"],p,typeof f=="string"?f:vU.animationEasing);return h.createElement(Vx,{animationId:k,key:k,canBegin:s>0,duration:p,easing:f,isActive:N,begin:x},X=>{var W=la(R,l,X),ne=la(z,c,X),oe=la(P,i,X),K=la(I,o,X);a.current&&(b.current=W,C.current=ne,w.current=oe,S.current=K);var U;v?X>0?U={transition:V,strokeDasharray:Q}:U={strokeDasharray:q}:U={strokeDasharray:Q};var ye=Ws(t),{radius:pe}=ye,Ne=yU(ye,BTe);return h.createElement("path",nw({},Ne,{radius:typeof d=="number"?d:void 0,className:_,d:bU(oe,K,W,ne,d),ref:a,style:xU(xU({},U),t.style)}))})};function wU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function NU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(a),!0).forEach(function(s){VTe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):wU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function VTe(e,t,a){return(t=QTe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function QTe(e){var t=YTe(e,"string");return typeof t=="symbol"?t:t+""}function YTe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aw=Math.PI/180,KTe=e=>e*180/Math.PI,Ba=(e,t,a,s)=>({x:e+Math.cos(-aw*s)*a,y:t+Math.sin(-aw*s)*a}),CY=function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(a-(s.top||0)-(s.bottom||0)))/2},XTe=(e,t)=>{var{x:a,y:s}=e,{x:r,y:i}=t;return Math.sqrt((a-r)**2+(s-i)**2)},ZTe=(e,t)=>{var{x:a,y:s}=e,{cx:r,cy:i}=t,o=XTe({x:a,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(a-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:KTe(c),angleInRadian:c}},JTe=e=>{var{startAngle:t,endAngle:a}=e,s=Math.floor(t/360),r=Math.floor(a/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:a-i*360}},eEe=(e,t)=>{var{startAngle:a,endAngle:s}=t,r=Math.floor(a/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},tEe=(e,t)=>{var{chartX:a,chartY:s}=e,{radius:r,angle:i}=ZTe({x:a,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:d}=JTe(t),u=i,f;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;f=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;f=u>=d&&u<=c}return f?NU(NU({},t),{},{radius:r,angle:eEe(u,t)}):null};function SY(e){var{cx:t,cy:a,radius:s,startAngle:r,endAngle:i}=e,o=Ba(t,a,s,r),l=Ba(t,a,s,i);return{points:[o,l],cx:t,cy:a,radius:s,startAngle:r,endAngle:i}}var jU,CU,SU,_U,AU,TU,EU;function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},nk.apply(null,arguments)}function cu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var nEe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),359.999);return a*s},Xy=e=>{var{cx:t,cy:a,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+s,u=Math.asin(l/d)/aw,f=c?r:r+i*u,p=Ba(t,a,d,f),x=Ba(t,a,s,f),v=c?r-i*u:r,N=Ba(t,a,d*Math.cos(u*aw),v);return{center:p,circleTangency:x,lineTangency:N,theta:u}},_Y=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=nEe(i,o),c=i+l,d=Ba(t,a,r,i),u=Ba(t,a,r,c),f=ja(jU||(jU=cu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,r,r,+(Math.abs(l)>180),+(i>c),u.x,u.y);if(s>0){var p=Ba(t,a,s,i),x=Ba(t,a,s,c);f+=ja(CU||(CU=cu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else f+=ja(SU||(SU=cu(["L ",","," Z"])),t,a);return f},aEe=e=>{var{cx:t,cy:a,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=gs(d-c),{circleTangency:f,lineTangency:p,theta:x}=Xy({cx:t,cy:a,radius:r,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:N,theta:b}=Xy({cx:t,cy:a,radius:r,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),C=l?Math.abs(c-d):Math.abs(c-d)-x-b;if(C<0)return o?ja(_U||(_U=cu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):_Y({cx:t,cy:a,innerRadius:s,outerRadius:r,startAngle:c,endAngle:d});var w=ja(AU||(AU=cu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(u<0),f.x,f.y,r,r,+(C>180),+(u<0),v.x,v.y,i,i,+(u<0),N.x,N.y);if(s>0){var{circleTangency:S,lineTangency:A,theta:k}=Xy({cx:t,cy:a,radius:s,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:E,theta:T}=Xy({cx:t,cy:a,radius:s,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),M=l?Math.abs(c-d):Math.abs(c-d)-k-T;if(M<0&&i===0)return"".concat(w,"L").concat(t,",").concat(a,"Z");w+=ja(TU||(TU=cu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,i,i,+(u<0),_.x,_.y,s,s,+(M>180),+(u>0),S.x,S.y,i,i,+(u<0),A.x,A.y)}else w+=ja(EU||(EU=cu(["L",",","Z"])),t,a);return w},sEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},AY=e=>{var t=Va(e,sEe),{cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(i<r||d===u)return null;var p=Pt("recharts-sector",f),x=i-r,v=Is(o,x,0,!0),N;return v>0&&Math.abs(d-u)<360?N=aEe({cx:a,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(v,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):N=_Y({cx:a,cy:s,innerRadius:r,outerRadius:i,startAngle:d,endAngle:u}),h.createElement("path",nk({},Ws(t),{className:p,d:N}))};function rEe(e,t,a){if(e==="horizontal")return[{x:t.x,y:a.top},{x:t.x,y:a.top+a.height}];if(e==="vertical")return[{x:a.left,y:t.y},{x:a.left+a.width,y:t.y}];if(iQ(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=Ba(s,r,i,l),d=Ba(s,r,o,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return SY(t)}}var p_={},x_={},y_={},kU;function iEe(){return kU||(kU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xQ();function a(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=a})(y_)),y_}var LU;function oEe(){return LU||(LU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iEe();function a(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=a})(x_)),x_}var PU;function lEe(){return PU||(PU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yQ(),a=oEe();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=a.toFinite(r),i===void 0?(i=r,r=0):i=a.toFinite(i),o=o===void 0?r<i?1:-1:a.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=r,r+=o;return c}e.range=s})(p_)),p_}var b_,DU;function cEe(){return DU||(DU=1,b_=lEe().range),b_}var dEe=cEe();const TY=Ki(dEe),zg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:PL,scaleDiverging:Dq,scaleDivergingLog:Oq,scaleDivergingPow:a4,scaleDivergingSqrt:Ohe,scaleDivergingSymlog:Mq,scaleIdentity:gq,scaleImplicit:XT,scaleLinear:yN,scaleLog:bp,scaleOrdinal:hp,scalePoint:_me,scalePow:bN,scaleQuantile:bq,scaleQuantize:vq,scaleRadial:yq,scaleSequential:t4,scaleSequentialLog:kq,scaleSequentialPow:n4,scaleSequentialQuantile:Pq,scaleSequentialSqrt:Dhe,scaleSequentialSymlog:Lq,scaleSqrt:xq,scaleSymlog:HL,scaleThreshold:GL,scaleTime:e4,scaleUtc:Eq,tickFormat:hq},Symbol.toStringTag,{value:"Module"}));var sc=e=>e.chartData,Cj=rt([sc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),vP=(e,t,a,s)=>s?Cj(e):sc(e),uEe=(e,t,a)=>a?Cj(e):sc(e);function cd(e){if(Array.isArray(e)&&e.length===2){var[t,a]=e;if(ga(t)&&ga(a))return!0}return!1}function OU(e,t,a){return a?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function EY(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[a,s]=e,r,i;if(ga(a))r=a;else if(typeof a=="function")return;if(ga(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(cd(o))return o}}function mEe(e,t,a){if(!(!a&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,a);if(cd(s))return OU(s,t,a)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(It(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&Tz.test(r)){var c=Tz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(It(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Ez.test(i)){var u=Ez.exec(i);if(u==null||u[1]==null||t==null)l=void 0;else{var f=+u[1];l=t[1]+f}}else l=t?.[1];var p=[o,l];if(cd(p))return t==null?p:OU(p,t,a)}}}var sh=1e9,fEe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},NP,ca=!0,vi="[DecimalError] ",vu=vi+"Invalid argument: ",wP=vi+"Exponent out of range: ",rh=Math.floor,Xd=Math.pow,hEe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Or,ms=1e7,ta=7,kY=9007199254740991,sw=rh(kY/ta),Ot={};Ot.absoluteValue=Ot.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ot.comparedTo=Ot.cmp=function(e){var t,a,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,a=s<r?s:r;t<a;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};Ot.decimalPlaces=Ot.dp=function(){var e=this,t=e.d.length-1,a=(t-e.e)*ta;if(t=e.d[t],t)for(;t%10==0;t/=10)a--;return a<0?0:a};Ot.dividedBy=Ot.div=function(e){return Ll(this,new this.constructor(e))};Ot.dividedToIntegerBy=Ot.idiv=function(e){var t=this,a=t.constructor;return Wn(Ll(t,new a(e),0,1),a.precision)};Ot.equals=Ot.eq=function(e){return!this.cmp(e)};Ot.exponent=function(){return qa(this)};Ot.greaterThan=Ot.gt=function(e){return this.cmp(e)>0};Ot.greaterThanOrEqualTo=Ot.gte=function(e){return this.cmp(e)>=0};Ot.isInteger=Ot.isint=function(){return this.e>this.d.length-2};Ot.isNegative=Ot.isneg=function(){return this.s<0};Ot.isPositive=Ot.ispos=function(){return this.s>0};Ot.isZero=function(){return this.s===0};Ot.lessThan=Ot.lt=function(e){return this.cmp(e)<0};Ot.lessThanOrEqualTo=Ot.lte=function(e){return this.cmp(e)<1};Ot.logarithm=Ot.log=function(e){var t,a=this,s=a.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Or))throw Error(vi+"NaN");if(a.s<1)throw Error(vi+(a.s?"NaN":"-Infinity"));return a.eq(Or)?new s(0):(ca=!1,t=Ll(Ip(a,i),Ip(e,i),i),ca=!0,Wn(t,r))};Ot.minus=Ot.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?DY(t,e):LY(t,(e.s=-e.s,e))};Ot.modulo=Ot.mod=function(e){var t,a=this,s=a.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(vi+"NaN");return a.s?(ca=!1,t=Ll(a,e,0,1).times(e),ca=!0,a.minus(t)):Wn(new s(a),r)};Ot.naturalExponential=Ot.exp=function(){return PY(this)};Ot.naturalLogarithm=Ot.ln=function(){return Ip(this)};Ot.negated=Ot.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ot.plus=Ot.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LY(t,e):DY(t,(e.s=-e.s,e))};Ot.precision=Ot.sd=function(e){var t,a,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vu+e);if(t=qa(r)+1,s=r.d.length-1,a=s*ta+1,s=r.d[s],s){for(;s%10==0;s/=10)a--;for(s=r.d[0];s>=10;s/=10)a++}return e&&t>a?t:a};Ot.squareRoot=Ot.sqrt=function(){var e,t,a,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(vi+"NaN")}for(e=qa(l),ca=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=Ao(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=rh((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),a=c.precision,r=o=a+3;;)if(i=s,s=i.plus(Ll(l,i,o+2)).times(.5),Ao(i.d).slice(0,o)===(t=Ao(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Wn(i,a+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return ca=!0,Wn(s,a)};Ot.times=Ot.mul=function(e){var t,a,s,r,i,o,l,c,d,u=this,f=u.constructor,p=u.d,x=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,a=u.e+e.e,c=p.length,d=x.length,c<d&&(i=p,p=x,x=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%ms|0,t=l/ms|0;i[r]=(i[r]+t)%ms|0}for(;!i[--o];)i.pop();return t?++a:i.shift(),e.d=i,e.e=a,ca?Wn(e,f.precision):e};Ot.toDecimalPlaces=Ot.todp=function(e,t){var a=this,s=a.constructor;return a=new s(a),e===void 0?a:(Fo(e,0,sh),t===void 0?t=s.rounding:Fo(t,0,8),Wn(a,e+qa(a)+1,t))};Ot.toExponential=function(e,t){var a,s=this,r=s.constructor;return e===void 0?a=Ru(s,!0):(Fo(e,0,sh),t===void 0?t=r.rounding:Fo(t,0,8),s=Wn(new r(s),e+1,t),a=Ru(s,!0,e+1)),a};Ot.toFixed=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?Ru(r):(Fo(e,0,sh),t===void 0?t=i.rounding:Fo(t,0,8),s=Wn(new i(r),e+qa(r)+1,t),a=Ru(s.abs(),!1,e+qa(s)+1),r.isneg()&&!r.isZero()?"-"+a:a)};Ot.toInteger=Ot.toint=function(){var e=this,t=e.constructor;return Wn(new t(e),qa(e)+1,t.rounding)};Ot.toNumber=function(){return+this};Ot.toPower=Ot.pow=function(e){var t,a,s,r,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Or);if(l=new c(l),!l.s){if(e.s<1)throw Error(vi+"Infinity");return l}if(l.eq(Or))return l;if(s=c.precision,e.eq(Or))return Wn(l,s);if(t=e.e,a=e.d.length-1,o=t>=a,i=l.s,o){if((a=u<0?-u:u)<=kY){for(r=new c(Or),t=Math.ceil(s/ta+4),ca=!1;a%2&&(r=r.times(l),IU(r.d,t)),a=rh(a/2),a!==0;)l=l.times(l),IU(l.d,t);return ca=!0,e.s<0?new c(Or).div(r):Wn(r,s)}}else if(i<0)throw Error(vi+"NaN");return i=i<0&&e.d[Math.max(t,a)]&1?-1:1,l.s=1,ca=!1,r=e.times(Ip(l,s+d)),ca=!0,r=PY(r),r.s=i,r};Ot.toPrecision=function(e,t){var a,s,r=this,i=r.constructor;return e===void 0?(a=qa(r),s=Ru(r,a<=i.toExpNeg||a>=i.toExpPos)):(Fo(e,1,sh),t===void 0?t=i.rounding:Fo(t,0,8),r=Wn(new i(r),e,t),a=qa(r),s=Ru(r,e<=a||a<=i.toExpNeg,e)),s};Ot.toSignificantDigits=Ot.tosd=function(e,t){var a=this,s=a.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Fo(e,1,sh),t===void 0?t=s.rounding:Fo(t,0,8)),Wn(new s(a),e,t)};Ot.toString=Ot.valueOf=Ot.val=Ot.toJSON=Ot[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qa(e),a=e.constructor;return Ru(e,t<=a.toExpNeg||t>=a.toExpPos)};function LY(e,t){var a,s,r,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),ca?Wn(t,f):t;if(c=e.d,d=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,r=o,l=c.length),o=Math.ceil(f/ta),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),a=0;i;)a=(c[--i]=c[i]+d[i]+a)/ms|0,c[i]%=ms;for(a&&(c.unshift(a),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,ca?Wn(t,f):t}function Fo(e,t,a){if(e!==~~e||e<t||e>a)throw Error(vu+e)}function Ao(e){var t,a,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",a=ta-s.length,a&&(i+=Hc(a)),i+=s;o=e[t],s=o+"",a=ta-s.length,a&&(i+=Hc(a))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ll=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%ms|0,o=i/ms|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function a(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*ms+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,d,u,f,p,x,v,N,b,C,w,S,A,k,_,E,T,M=s.constructor,R=s.s==r.s?1:-1,z=s.d,P=r.d;if(!s.s)return new M(s);if(!r.s)throw Error(vi+"Division by zero");for(c=s.e-r.e,E=P.length,k=z.length,x=new M(R),v=x.d=[],d=0;P[d]==(z[d]||0);)++d;if(P[d]>(z[d]||0)&&--c,i==null?w=i=M.precision:o?w=i+(qa(s)-qa(r))+1:w=i,w<0)return new M(0);if(w=w/ta+2|0,d=0,E==1)for(u=0,P=P[0],w++;(d<k||u)&&w--;d++)S=u*ms+(z[d]||0),v[d]=S/P|0,u=S%P|0;else{for(u=ms/(P[0]+1)|0,u>1&&(P=e(P,u),z=e(z,u),E=P.length,k=z.length),A=E,N=z.slice(0,E),b=N.length;b<E;)N[b++]=0;T=P.slice(),T.unshift(0),_=P[0],P[1]>=ms/2&&++_;do u=0,l=t(P,N,E,b),l<0?(C=N[0],E!=b&&(C=C*ms+(N[1]||0)),u=C/_|0,u>1?(u>=ms&&(u=ms-1),f=e(P,u),p=f.length,b=N.length,l=t(f,N,p,b),l==1&&(u--,a(f,E<p?T:P,p))):(u==0&&(l=u=1),f=P.slice()),p=f.length,p<b&&f.unshift(0),a(N,f,b),l==-1&&(b=N.length,l=t(P,N,E,b),l<1&&(u++,a(N,E<b?T:P,b))),b=N.length):l===0&&(u++,N=[0]),v[d++]=u,l&&N[0]?N[b++]=z[A]||0:(N=[z[A]],b=1);while((A++<k||N[0]!==void 0)&&w--)}return v[0]||v.shift(),x.e=c,Wn(x,o?i+qa(x)+1:i)}})();function PY(e,t){var a,s,r,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(qa(e)>16)throw Error(wP+qa(e));if(!e.s)return new u(Or);for(ca=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Xd(2,d))/Math.LN10*2+5|0,l+=s,a=r=i=new u(Or),u.precision=l;;){if(r=Wn(r.times(e),l),a=a.times(++c),o=i.plus(Ll(r,a,l)),Ao(o.d).slice(0,l)===Ao(i.d).slice(0,l)){for(;d--;)i=Wn(i.times(i),l);return u.precision=f,t==null?(ca=!0,Wn(i,f)):i}i=o}}function qa(e){for(var t=e.e*ta,a=e.d[0];a>=10;a/=10)t++;return t}function v_(e,t,a){if(t>e.LN10.sd())throw ca=!0,a&&(e.precision=a),Error(vi+"LN10 precision limit exceeded");return Wn(new e(e.LN10),t)}function Hc(e){for(var t="";e--;)t+="0";return t}function Ip(e,t){var a,s,r,i,o,l,c,d,u,f=1,p=10,x=e,v=x.d,N=x.constructor,b=N.precision;if(x.s<1)throw Error(vi+(x.s?"NaN":"-Infinity"));if(x.eq(Or))return new N(0);if(t==null?(ca=!1,d=b):d=t,x.eq(10))return t==null&&(ca=!0),v_(N,d);if(d+=p,N.precision=d,a=Ao(v),s=a.charAt(0),i=qa(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&a.charAt(1)>3;)x=x.times(e),a=Ao(x.d),s=a.charAt(0),f++;i=qa(x),s>1?(x=new N("0."+a),i++):x=new N(s+"."+a.slice(1))}else return c=v_(N,d+2,b).times(i+""),x=Ip(new N(s+"."+a.slice(1)),d-p).plus(c),N.precision=b,t==null?(ca=!0,Wn(x,b)):x;for(l=o=x=Ll(x.minus(Or),x.plus(Or),d),u=Wn(x.times(x),d),r=3;;){if(o=Wn(o.times(u),d),c=l.plus(Ll(o,new N(r),d)),Ao(c.d).slice(0,d)===Ao(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(v_(N,d+2,b).times(i+""))),l=Ll(l,new N(f),d),N.precision=b,t==null?(ca=!0,Wn(l,b)):l;l=c,r+=2}}function MU(e,t){var a,s,r;for((a=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(a<0&&(a=s),a+=+t.slice(s+1),t=t.substring(0,s)):a<0&&(a=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,a=a-s-1,e.e=rh(a/ta),e.d=[],s=(a+1)%ta,a<0&&(s+=ta),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=ta;s<r;)e.d.push(+t.slice(s,s+=ta));t=t.slice(s),s=ta-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),ca&&(e.e>sw||e.e<-sw))throw Error(wP+a)}else e.s=0,e.e=0,e.d=[0];return e}function Wn(e,t,a){var s,r,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=ta,r=t,d=f[u=0];else{if(u=Math.ceil((s+1)/ta),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;s%=ta,r=s-ta+o}if(a!==void 0&&(i=Xd(10,o-r-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=a<4?(l||c)&&(a==0||a==(e.s<0?3:2)):l>5||l==5&&(a==4||c||a==6&&(s>0?r>0?d/Xd(10,o-r):0:f[u-1])%10&1||a==(e.s<0?8:7))),t<1||!f[0])return c?(i=qa(e),f.length=1,t=t-i-1,f[0]=Xd(10,(ta-t%ta)%ta),e.e=rh(-t/ta)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=Xd(10,ta-s),f[u]=r>0?(d/Xd(10,o-r)%Xd(10,r)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==ms&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=ms)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(ca&&(e.e>sw||e.e<-sw))throw Error(wP+qa(e));return e}function DY(e,t){var a,s,r,i,o,l,c,d,u,f,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),ca?Wn(t,x):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(a=c,o=-o,l=f.length):(a=f,s=d,l=c.length),r=Math.max(Math.ceil(x/ta),l)+2,o>r&&(o=r,a.length=1),a.reverse(),r=o;r--;)a.push(0);a.reverse()}else{for(r=c.length,l=f.length,u=r<l,u&&(l=r),r=0;r<l;r++)if(c[r]!=f[r]){u=c[r]<f[r];break}o=0}for(u&&(a=c,c=f,f=a,t.s=-t.s),l=c.length,r=f.length-l;r>0;--r)c[l++]=0;for(r=f.length;r>o;){if(c[--r]<f[r]){for(i=r;i&&c[--i]===0;)c[i]=ms-1;--c[i],c[r]+=ms}c[r]-=f[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,ca?Wn(t,x):t):new p(0)}function Ru(e,t,a){var s,r=qa(e),i=Ao(e.d),o=i.length;return t?(a&&(s=a-o)>0?i=i.charAt(0)+"."+i.slice(1)+Hc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Hc(-r-1)+i,a&&(s=a-o)>0&&(i+=Hc(s))):r>=o?(i+=Hc(r+1-o),a&&(s=a-r-1)>0&&(i=i+"."+Hc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),a&&(s=a-o)>0&&(r+1===o&&(i+="."),i+=Hc(s))),e.s<0?"-"+i:i}function IU(e,t){if(e.length>t)return e.length=t,!0}function OY(e){var t,a,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(vu+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return MU(o,i.toString())}else if(typeof i!="string")throw Error(vu+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,hEe.test(i))MU(o,i);else throw Error(vu+i)}if(r.prototype=Ot,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=OY,r.config=r.set=gEe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(a=s[t++])||(e[a]=this[a]);return r.config(e),r}function gEe(e){if(!e||typeof e!="object")throw Error(vi+"Object expected");var t,a,s,r=["precision",1,sh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[a=r[t]])!==void 0)if(rh(s)===s&&s>=r[t+1]&&s<=r[t+2])this[a]=s;else throw Error(vu+a+": "+s);if((s=e[a="LN10"])!==void 0)if(s==Math.LN10)this[a]=new this(s);else throw Error(vu+a+": "+s);return this}var NP=OY(fEe);Or=new NP(1);const $n=NP;var pEe=e=>e,MY={},IY=e=>e===MY,$U=e=>function t(){return arguments.length===0||arguments.length===1&&IY(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},$Y=(e,t)=>e===1?t:$U(function(){for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];var i=s.filter(o=>o!==MY).length;return i>=e?t(...s):$Y(e-i,$U(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=s.map(u=>IY(u)?l.shift():u);return t(...d,...l)}))}),xEe=e=>$Y(e.length,e),ak=(e,t)=>{for(var a=[],s=e;s<t;++s)a[s-e]=s;return a},yEe=xEe((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(a=>t[a]).map(e)),bEe=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];if(!a.length)return pEe;var r=a.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function RY(e){var t;return e===0?t=1:t=Math.floor(new $n(e).abs().log(10).toNumber())+1,t}function zY(e,t,a){for(var s=new $n(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(a),r++;return i}var UY=e=>{var[t,a]=e,[s,r]=[t,a];return t>a&&([s,r]=[a,t]),[s,r]},FY=(e,t,a)=>{if(e.lte(0))return new $n(0);var s=RY(e.toNumber()),r=new $n(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new $n(Math.ceil(i.div(o).toNumber())).add(a).mul(o),c=l.mul(r);return t?new $n(c.toNumber()):new $n(Math.ceil(c.toNumber()))},vEe=(e,t,a)=>{var s=new $n(1),r=new $n(e);if(!r.isint()&&a){var i=Math.abs(e);i<1?(s=new $n(10).pow(RY(e)-1),r=new $n(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new $n(Math.floor(e)))}else e===0?r=new $n(Math.floor((t-1)/2)):a||(r=new $n(Math.floor(e)));var o=Math.floor((t-1)/2),l=bEe(yEe(c=>r.add(new $n(c-o).mul(s)).toNumber()),ak);return l(0,t)},BY=function(t,a,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((a-t)/(s-1)))return{step:new $n(0),tickMin:new $n(0),tickMax:new $n(0)};var o=FY(new $n(a).sub(t).div(s-1),r,i),l;t<=0&&a>=0?l=new $n(0):(l=new $n(t).add(a).div(2),l=l.sub(new $n(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new $n(a).sub(l).div(o).toNumber()),u=c+d+1;return u>s?BY(t,a,s,r,i+1):(u<s&&(d=a>0?d+(s-u):d,c=a>0?c:c+(s-u)),{step:o,tickMin:l.sub(new $n(c).mul(o)),tickMax:l.add(new $n(d).mul(o))})},wEe=function(t){var[a,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=UY([a,s]);if(l===-1/0||c===1/0){var d=c===1/0?[l,...ak(0,r-1).map(()=>1/0)]:[...ak(0,r-1).map(()=>-1/0),c];return a>s?d.reverse():d}if(l===c)return vEe(l,r,i);var{step:u,tickMin:f,tickMax:p}=BY(l,c,o,i,0),x=zY(f,p.add(new $n(.1).mul(u)),u);return a>s?x.reverse():x},NEe=function(t,a){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=UY([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(a,2),d=FY(new $n(l).sub(o).div(c-1),i,0),u=[...zY(new $n(o),new $n(l),d),l];return i===!1&&(u=u.map(f=>Math.round(f))),s>r?u.reverse():u},HY=e=>e.rootProps.maxBarSize,jEe=e=>e.rootProps.barGap,qY=e=>e.rootProps.barCategoryGap,CEe=e=>e.rootProps.barSize,Yx=e=>e.rootProps.stackOffset,GY=e=>e.rootProps.reverseStackOrder,jP=e=>e.options.chartName,CP=e=>e.rootProps.syncId,WY=e=>e.rootProps.syncMethod,SP=e=>e.options.eventEmitter,Ha={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Pr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sj=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},SEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cl.angleAxisId,includeHidden:!1,name:void 0,reversed:Cl.reversed,scale:Cl.scale,tick:Cl.tick,tickCount:void 0,ticks:void 0,type:Cl.type,unit:void 0},_Ee={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:Pr.type,unit:void 0},AEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},TEe={allowDataOverflow:Pr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Pr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Pr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Pr.scale,tick:Pr.tick,tickCount:Pr.tickCount,ticks:void 0,type:"category",unit:void 0},_P=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?AEe:SEe,AP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?TEe:_Ee,_j=e=>e.polarOptions,TP=rt([nc,ac,is],CY),VY=rt([_j,TP],(e,t)=>{if(e!=null)return Is(e.innerRadius,t,0)}),QY=rt([_j,TP],(e,t)=>{if(e!=null)return Is(e.outerRadius,t,t*.8)}),EEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:a}=e;return[t,a]},YY=rt([_j],EEe);rt([_P,YY],Sj);var KY=rt([TP,VY,QY],(e,t,a)=>{if(!(e==null||t==null||a==null))return[t,a]});rt([AP,KY],Sj);var XY=rt([wn,_j,VY,QY,nc,ac],(e,t,a,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||a==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Is(o,r,r/2),cy:Is(l,i,i/2),innerRadius:a,outerRadius:s,startAngle:c,endAngle:d,clockWise:!1}}}),fa=(e,t)=>t,Kx=(e,t,a)=>a;function EP(e){return e?.id}function ZY(e,t,a){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=a,o=new Map;return e.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:s;if(!(d==null||d.length===0)){var u=EP(l);d.forEach((f,p)=>{var x=i==null||r?p:String(Hn(f,i,null)),v=Hn(f,l.dataKey,0),N;o.has(x)?N=o.get(x):N={},Object.assign(N,{[u]:v}),o.set(x,N)})}}),Array.from(o.values())}function Aj(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Tj=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ej(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function kEe(e,t){if(e.length===t.length){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}return!1}var os=e=>{var t=wn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ih=e=>e.tooltip.settings.axisId;function RU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function rw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(a),!0).forEach(function(s){LEe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function LEe(e,t,a){return(t=PEe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function PEe(e){var t=DEe(e,"string");return typeof t=="symbol"?t:t+""}function DEe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sk=[0,"auto"],ds={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},JY=(e,t)=>e.cartesianAxis.xAxis[t],rc=(e,t)=>{var a=JY(e,t);return a??ds},us={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gx},eK=(e,t)=>e.cartesianAxis.yAxis[t],ic=(e,t)=>{var a=eK(e,t);return a??us},OEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},kP=(e,t)=>{var a=e.cartesianAxis.zAxis[t];return a??OEe},ya=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"zAxis":return kP(e,a);case"angleAxis":return _P(e,a);case"radiusAxis":return AP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},MEe=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},Xx=(e,t,a)=>{switch(t){case"xAxis":return rc(e,a);case"yAxis":return ic(e,a);case"angleAxis":return _P(e,a);case"radiusAxis":return AP(e,a);default:throw new Error("Unexpected axis type: ".concat(t))}},tK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function LP(e,t){return a=>{switch(e){case"xAxis":return"xAxisId"in a&&a.xAxisId===t;case"yAxis":return"yAxisId"in a&&a.yAxisId===t;case"zAxis":return"zAxisId"in a&&a.zAxisId===t;case"angleAxis":return"angleAxisId"in a&&a.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in a&&a.radiusAxisId===t;default:return!1}}}var kj=e=>e.graphicalItems.cartesianItems,IEe=rt([fa,Kx],LP),PP=(e,t,a)=>e.filter(a).filter(s=>t?.includeHidden===!0?!0:!s.hide),Zx=rt([kj,ya,IEe],PP,{memoizeOptions:{resultEqualityCheck:Ej}}),nK=rt([Zx],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Aj)),aK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$Ee=rt([Zx],aK),DP=e=>e.map(t=>t.data).filter(Boolean).flat(1),REe=rt([Zx],DP,{memoizeOptions:{resultEqualityCheck:Ej}}),OP=(e,t)=>{var{chartData:a=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:a.slice(s,r+1)},MP=rt([REe,vP],OP),IP=(e,t,a)=>t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey)})):a.length>0?a.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:Hn(r,s)}))):e.map(s=>({value:s})),Lj=rt([MP,ya,Zx],IP);function sK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Xb(e){if(zo(e)||e instanceof Date){var t=Number(e);if(ga(t))return t}}function zU(e){if(Array.isArray(e)){var t=[Xb(e[0]),Xb(e[1])];return cd(t)?t:void 0}var a=Xb(e);if(a!=null)return[a,a]}function Wl(e){return e.map(Xb).filter(vSe)}function zEe(e,t,a){return!a||typeof t!="number"||Qi(t)?[]:a.length?Wl(a.flatMap(s=>{var r=Hn(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!ga(i)||!ga(o)))return[t-i,t+o]})):[]}var ls=e=>{var t=os(e),a=ih(e);return Xx(e,t,a)},Jx=rt([ls],e=>e?.dataKey),UEe=rt([nK,vP,ls],ZY),rK=(e,t,a,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,d=s?[...c].reverse():c,u=d.map(EP);return[l,{stackedData:P_e(e,u,a),graphicalItems:d}]}))},rk=rt([UEe,nK,Yx,GY],rK),iK=(e,t,a,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&a!=="zAxis"){var o=$_e(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},FEe=rt([ya],e=>e.allowDataOverflow),$P=e=>{var t;if(e==null||!("domain"in e))return sk;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var a=Wl(e.ticks);return[Math.min(...a),Math.max(...a)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:sk},RP=rt([ya],$P),zP=rt([RP,FEe],EY),BEe=rt([rk,sc,fa,zP],iK,{memoizeOptions:{resultEqualityCheck:Tj}}),Pj=e=>e.errorBars,HEe=(e,t,a)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>sK(a,s)),iw=function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var r=a.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},UP=(e,t,a,s,r)=>{var i,o;if(a.length>0&&e.forEach(l=>{a.forEach(c=>{var d,u,f=(d=s[c.id])===null||d===void 0?void 0:d.filter(C=>sK(r,C)),p=Hn(l,(u=t.dataKey)!==null&&u!==void 0?u:c.dataKey),x=zEe(l,p,f);if(x.length>=2){var v=Math.min(...x),N=Math.max(...x);(i==null||v<i)&&(i=v),(o==null||N>o)&&(o=N)}var b=zU(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=zU(Hn(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),ga(i)&&ga(o))return[i,o]},qEe=rt([MP,ya,$Ee,Pj,fa],UP,{memoizeOptions:{resultEqualityCheck:Tj}});function GEe(e){var{value:t}=e;if(zo(t)||t instanceof Date)return t}var WEe=(e,t,a)=>{var s=e.map(GEe).filter(r=>r!=null);return a&&(t.dataKey==null||t.allowDuplicatedCategory&&aQ(s))?TY(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},oK=e=>e.referenceElements.dots,oh=(e,t,a)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===a:s.yAxisId===a),VEe=rt([oK,fa,Kx],oh),lK=e=>e.referenceElements.areas,QEe=rt([lK,fa,Kx],oh),cK=e=>e.referenceElements.lines,YEe=rt([cK,fa,Kx],oh),dK=(e,t)=>{if(e!=null){var a=Wl(e.map(s=>t==="xAxis"?s.x:s.y));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},KEe=rt(VEe,fa,dK),uK=(e,t)=>{if(e!=null){var a=Wl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},XEe=rt([QEe,fa],uK);function ZEe(e){var t;if(e.x!=null)return Wl([e.x]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return a==null||a.length===0?[]:Wl(a)}function JEe(e){var t;if(e.y!=null)return Wl([e.y]);var a=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return a==null||a.length===0?[]:Wl(a)}var mK=(e,t)=>{if(e!=null){var a=e.flatMap(s=>t==="xAxis"?ZEe(s):JEe(s));if(a.length!==0)return[Math.min(...a),Math.max(...a)]}},eke=rt([YEe,fa],mK),tke=rt(KEe,eke,XEe,(e,t,a)=>iw(e,a,t)),FP=(e,t,a,s,r,i,o,l)=>{if(a!=null)return a;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",d=c?iw(s,i,r):iw(i,r);return mEe(t,d,e.allowDataOverflow)},nke=rt([ya,RP,zP,BEe,qEe,tke,wn,fa],FP,{memoizeOptions:{resultEqualityCheck:Tj}}),ake=[0,1],BP=(e,t,a,s,r,i,o)=>{if(!((e==null||a==null||a.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,d=Sd(t,i);if(d&&l==null){var u;return TY(0,(u=a?.length)!==null&&u!==void 0?u:0)}return c==="category"?WEe(s,e,d):r==="expand"?ake:o}},HP=rt([ya,wn,MP,Lj,Yx,fa,nke],BP),fK=(e,t,a,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!a)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(zx(i));return l in zg?l:"point"}}},lh=rt([ya,wn,tK,jP,fa],fK);function ske(e){if(e!=null){if(e in zg)return zg[e]();var t="scale".concat(zx(e));if(t in zg)return zg[t]()}}function qP(e,t,a,s){if(!(a==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(a).range(s);var r=ske(t);if(r!=null){var i=r.domain(a).range(s);return A_e(i),i}}}var GP=(e,t,a)=>{var s=$P(t);if(!(a!=="auto"&&a!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&cd(e))return wEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&cd(e))return NEe(e,t.tickCount,t.allowDecimals)}},WP=rt([HP,Xx,lh],GP),VP=(e,t,a,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&cd(t)&&Array.isArray(a)&&a.length>0){var r=t[0],i=a[0],o=t[1],l=a[a.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},rke=rt([ya,HP,WP,fa],VP),ike=rt(Lj,ya,(e,t)=>{if(!(!t||t.type!=="number")){var a=1/0,s=Array.from(Wl(e.map(f=>f.value))).sort((f,p)=>f-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];if(!(c==null||d==null)){var u=d-c;a=Math.min(a,u)}}return a/o}}),hK=rt(ike,wn,qY,is,(e,t,a,s,r)=>r,(e,t,a,s,r)=>{if(!ga(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=Is(a,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),oke=(e,t,a)=>{var s=rc(e,t);return s==null||typeof s.padding!="string"?0:hK(e,"xAxis",t,a,s.padding)},lke=(e,t,a)=>{var s=ic(e,t);return s==null||typeof s.padding!="string"?0:hK(e,"yAxis",t,a,s.padding)},cke=rt(rc,oke,(e,t)=>{var a,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((a=r.left)!==null&&a!==void 0?a:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),dke=rt(ic,lke,(e,t)=>{var a,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((a=r.top)!==null&&a!==void 0?a:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),uke=rt([is,cke,xj,pj,(e,t,a)=>a],(e,t,a,s,r)=>{var{padding:i}=s;return r?[i.left,a.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),mke=rt([is,wn,dke,xj,pj,(e,t,a)=>a],(e,t,a,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-a.bottom,e.top+a.top]:[e.top+a.top,e.top+e.height-a.bottom]}),e0=(e,t,a,s)=>{var r;switch(t){case"xAxis":return uke(e,a,s);case"yAxis":return mke(e,a,s);case"zAxis":return(r=kP(e,a))===null||r===void 0?void 0:r.range;case"angleAxis":return YY(e);case"radiusAxis":return KY(e,a);default:return}},gK=rt([ya,e0],Sj),Dj=rt([ya,lh,rke,gK],qP);rt([Zx,Pj,fa],HEe);function pK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Oj=(e,t)=>t,Mj=(e,t,a)=>a,fke=rt(hj,Oj,Mj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(pK)),hke=rt(gj,Oj,Mj,(e,t,a)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===a).sort(pK)),xK=(e,t)=>({width:e.width,height:t.height}),gke=(e,t)=>{var a=typeof t.width=="number"?t.width:Gx;return{width:a,height:e.height}},yK=rt(is,rc,xK),pke=(e,t,a)=>{switch(t){case"top":return e.top;case"bottom":return a-e.bottom;default:return 0}},xke=(e,t,a)=>{switch(t){case"left":return e.left;case"right":return a-e.right;default:return 0}},yke=rt(ac,is,fke,Oj,Mj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=xK(t,l);o==null&&(o=pke(t,s,e));var d=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),bke=rt(nc,is,hke,Oj,Mj,(e,t,a,s,r)=>{var i={},o;return a.forEach(l=>{var c=gke(t,l);o==null&&(o=xke(t,s,e));var d=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),vke=(e,t)=>{var a=rc(e,t);if(a!=null)return yke(e,a.orientation,a.mirror)},wke=rt([is,rc,vke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),Nke=(e,t)=>{var a=ic(e,t);if(a!=null)return bke(e,a.orientation,a.mirror)},jke=rt([is,ic,Nke,(e,t)=>t],(e,t,a,s)=>{if(t!=null){var r=a?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),bK=rt(is,ic,(e,t)=>{var a=typeof t.width=="number"?t.width:Gx;return{width:a,height:e.height}}),UU=(e,t,a)=>{switch(t){case"xAxis":return yK(e,a).width;case"yAxis":return bK(e,a).height;default:return}},vK=(e,t,a,s)=>{if(a!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=a,l=Sd(e,s),c=t.map(d=>d.value);if(o&&l&&i==="category"&&r&&aQ(c))return c}},QP=rt([wn,Lj,ya,fa],vK),wK=(e,t,a,s)=>{if(!(a==null||a.dataKey==null)){var{type:r,scale:i}=a,o=Sd(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},YP=rt([wn,Lj,Xx,fa],wK),FU=rt([wn,MEe,lh,Dj,QP,YP,e0,WP,fa],(e,t,a,s,r,i,o,l,c)=>{if(t!=null){var d=Sd(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:d,niceTicks:l,range:o,realScaleType:a,scale:s}}}),Cke=(e,t,a,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var d=Sd(e,c),{type:u,ticks:f,tickCount:p}=t,x=a==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=u==="category"&&s.bandwidth?s.bandwidth()/x:0;v=c==="angleAxis"&&i!=null&&i.length>=2?gs(i[0]-i[1])*2*v:v;var N=f||r;if(N){var b=N.map((C,w)=>{var S=o?o.indexOf(C):C;return{index:w,coordinate:s(S)+v,value:C,offset:v}});return b.filter(C=>ga(C.coordinate))}return d&&l?l.map((C,w)=>({coordinate:s(C)+v,value:C,index:w,offset:v})).filter(C=>ga(C.coordinate)):s.ticks?s.ticks(p).map(C=>({coordinate:s(C)+v,value:C,offset:v})):s.domain().map((C,w)=>({coordinate:s(C)+v,value:o?o[C]:C,index:w,offset:v}))}},NK=rt([wn,Xx,lh,Dj,WP,e0,QP,YP,fa],Cke),Ske=(e,t,a,s,r,i,o)=>{if(!(t==null||a==null||s==null||s[0]===s[1])){var l=Sd(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&s?.length>=2?gs(s[0]-s[1])*2*d:d,l&&i?i.map((u,f)=>({coordinate:a(u)+d,value:u,index:f,offset:d})):a.ticks?a.ticks(c).map(u=>({coordinate:a(u)+d,value:u,offset:d})):a.domain().map((u,f)=>({coordinate:a(u)+d,value:r?r[u]:u,index:f,offset:d}))}},dd=rt([wn,Xx,Dj,e0,QP,YP,fa],Ske),ud=rt(ya,Dj,(e,t)=>{if(!(e==null||t==null))return rw(rw({},e),{},{scale:t})}),_ke=rt([ya,lh,HP,gK],qP);rt((e,t,a)=>kP(e,a),_ke,(e,t)=>{if(!(e==null||t==null))return rw(rw({},e),{},{scale:t})});var Ake=rt([wn,hj,gj],(e,t,a)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return a.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),jK=e=>e.options.defaultTooltipEventType,CK=e=>e.options.validateTooltipEventTypes;function SK(e,t,a){if(e==null)return t;var s=e?"axis":"item";return a==null?t:a.includes(s)?s:t}function KP(e,t){var a=jK(e),s=CK(e);return SK(t,a,s)}function Tke(e){return Rt(t=>KP(t,e))}var _K=(e,t)=>{var a,s=Number(t);if(!(Qi(s)||t==null))return s>=0?e==null||(a=e[s])===null||a===void 0?void 0:a.value:void 0},Eke=e=>e.tooltip.settings,Wc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},kke={itemInteraction:{click:Wc,hover:Wc},axisInteraction:{click:Wc,hover:Wc},keyboardInteraction:Wc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},AK=br({name:"tooltip",initialState:kke,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:oa()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).tooltipItemPayloads.indexOf(a);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:oa()},removeTooltipEntrySettings:{reducer(e,t){var a=qi(e).tooltipItemPayloads.indexOf(t.payload);a>-1&&e.tooltipItemPayloads.splice(a,1)},prepare:oa()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:Lke,replaceTooltipEntrySettings:Pke,removeTooltipEntrySettings:Dke,setTooltipSettingsState:Oke,setActiveMouseOverItemIndex:TK,mouseLeaveItem:Mke,mouseLeaveChart:EK,setActiveClickItemIndex:Ike,setMouseOverAxisIndex:kK,setMouseClickAxisIndex:$ke,setSyncInteraction:ik,setKeyboardInteraction:ok}=AK.actions,Rke=AK.reducer;function BU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Zy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(a),!0).forEach(function(s){zke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function zke(e,t,a){return(t=Uke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Uke(e){var t=Fke(e,"string");return typeof t=="symbol"?t:t+""}function Fke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bke(e,t,a){return t==="axis"?a==="click"?e.axisInteraction.click:e.axisInteraction.hover:a==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Hke(e){return e.index!=null}var LK=(e,t,a,s)=>{if(t==null)return Wc;var r=Bke(e,t,a);if(r==null)return Wc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Hke(r)){if(i)return Zy(Zy({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return Zy(Zy({},Wc),{},{coordinate:r.coordinate})};function qke(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var a=Number(e);return Number.isFinite(a)?a:void 0}function Gke(e,t){var a=qke(e),s=t[0],r=t[1];if(a===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return a>=i&&a<=o}function Wke(e,t,a){if(a==null||t==null)return!0;var s=Hn(e,t);return s==null||!cd(a)?!0:Gke(s,a)}var XP=(e,t,a,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!ga(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),d=t[c];return d==null||Wke(d,a,s)?String(c):null},PK=(e,t,a,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=r?.[Number(i)];if(u)return a==="horizontal"?{x:u.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:u.coordinate}}},DK=(e,t,a,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(a==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},t0=e=>e.options.tooltipPayloadSearcher,ch=e=>e.tooltip;function HU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function qU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?HU(Object(a),!0).forEach(function(s){Vke(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):HU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Vke(e,t,a){return(t=Qke(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qke(e){var t=Yke(e,"string");return typeof t=="symbol"?t:t+""}function Yke(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kke(e,t){return e??t}var OK=(e,t,a,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=a,f=[];return e.reduce((p,x)=>{var v,{dataDefinedOnItem:N,settings:b}=x,C=Kke(N,l),w=Array.isArray(C)?KQ(C,d,u):C,S=(v=b?.dataKey)!==null&&v!==void 0?v:s,A=b?.nameKey,k;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=sQ(w,s,r):k=i(w,t,c,A),Array.isArray(k))k.forEach(E=>{var T=qU(qU({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});p.push(kz({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:Hn(E.payload,E.dataKey),name:E.name}))});else{var _;p.push(kz({tooltipEntrySettings:b,dataKey:S,payload:k,value:Hn(k,S),name:(_=Hn(k,A))!==null&&_!==void 0?_:b?.name}))}return p},f)}},ZP=rt([ls,wn,tK,jP,os],fK),Xke=rt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Zke=rt([os,ih],LP),dh=rt([Xke,ls,Zke],PP,{memoizeOptions:{resultEqualityCheck:Ej}}),Jke=rt([dh],e=>e.filter(Aj)),eLe=rt([dh],DP,{memoizeOptions:{resultEqualityCheck:Ej}}),uh=rt([eLe,sc],OP),tLe=rt([Jke,sc,ls],ZY),JP=rt([uh,ls,dh],IP),MK=rt([ls],$P),nLe=rt([ls],e=>e.allowDataOverflow),IK=rt([MK,nLe],EY),aLe=rt([dh],e=>e.filter(Aj)),sLe=rt([tLe,aLe,Yx,GY],rK),rLe=rt([sLe,sc,os,IK],iK),iLe=rt([dh],aK),oLe=rt([uh,ls,iLe,Pj,os],UP,{memoizeOptions:{resultEqualityCheck:Tj}}),lLe=rt([oK,os,ih],oh),cLe=rt([lLe,os],dK),dLe=rt([lK,os,ih],oh),uLe=rt([dLe,os],uK),mLe=rt([cK,os,ih],oh),fLe=rt([mLe,os],mK),hLe=rt([cLe,fLe,uLe],iw),gLe=rt([ls,MK,IK,rLe,oLe,hLe,wn,os],FP),n0=rt([ls,wn,uh,JP,Yx,os,gLe],BP),pLe=rt([n0,ls,ZP],GP),xLe=rt([ls,n0,pLe,os],VP),$K=e=>{var t=os(e),a=ih(e),s=!1;return e0(e,t,a,s)},RK=rt([ls,$K],Sj),zK=rt([ls,ZP,xLe,RK],qP),yLe=rt([wn,JP,ls,os],vK),bLe=rt([wn,JP,ls,os],wK),vLe=(e,t,a,s,r,i,o,l)=>{if(t){var{type:c}=t,d=Sd(e,l);if(s){var u=a==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,f=c==="category"&&s.bandwidth?s.bandwidth()/u:0;return f=l==="angleAxis"&&r!=null&&r?.length>=2?gs(r[0]-r[1])*2*f:f,d&&o?o.map((p,x)=>({coordinate:s(p)+f,value:p,index:x,offset:f})):s.domain().map((p,x)=>({coordinate:s(p)+f,value:i?i[p]:p,index:x,offset:f}))}}},oc=rt([wn,ls,ZP,zK,$K,yLe,bLe,os],vLe),eD=rt([jK,CK,Eke],(e,t,a)=>SK(a.shared,e,t)),UK=e=>e.tooltip.settings.trigger,tD=e=>e.tooltip.settings.defaultIndex,a0=rt([ch,eD,UK,tD],LK),md=rt([a0,uh,Jx,n0],XP),FK=rt([oc,md],_K),nD=rt([a0],e=>{if(e)return e.dataKey}),wLe=rt([a0],e=>{if(e)return e.graphicalItemId}),BK=rt([ch,eD,UK,tD],DK),NLe=rt([nc,ac,wn,is,oc,tD,BK,t0],PK),jLe=rt([a0,NLe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),CLe=rt([a0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),SLe=rt([BK,md,sc,Jx,FK,t0,eD],OK),_Le=rt([SLe],e=>{if(e!=null){var t=e.map(a=>a.payload).filter(a=>a!=null);return Array.from(new Set(t))}});function GU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function WU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?GU(Object(a),!0).forEach(function(s){ALe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function ALe(e,t,a){return(t=TLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function TLe(e){var t=ELe(e,"string");return typeof t=="symbol"?t:t+""}function ELe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kLe=()=>Rt(ls),LLe=()=>{var e=kLe(),t=Rt(oc),a=Rt(zK);return Mf(!e||!a?void 0:WU(WU({},e),{},{scale:a}),t)};function VU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Vm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(a),!0).forEach(function(s){PLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function PLe(e,t,a){return(t=DLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DLe(e){var t=OLe(e,"string");return typeof t=="symbol"?t:t+""}function OLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MLe=(e,t,a,s)=>{var r=t.find(i=>i&&i.index===a);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},ILe=(e,t,a,s)=>{var r=t.find(d=>d&&d.index===a);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Vm(Vm(Vm({},s),Ba(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Vm(Vm(Vm({},s),Ba(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function $Le(e,t){var{chartX:a,chartY:s}=e;return a>=t.left&&a<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var HK=(e,t,a,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,d,u,f,p,x=l>0?(c=a[l-1])===null||c===void 0?void 0:c.coordinate:(d=a[o-1])===null||d===void 0?void 0:d.coordinate,v=(u=a[l])===null||u===void 0?void 0:u.coordinate,N=l>=o-1?(f=a[0])===null||f===void 0?void 0:f.coordinate:(p=a[l+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(x==null||v==null||N==null))if(gs(v-x)!==gs(N-v)){var C=[];if(gs(N-v)===gs(r[1]-r[0])){b=N;var w=v+r[1]-r[0];C[0]=Math.min(w,(w+x)/2),C[1]=Math.max(w,(w+x)/2)}else{b=x;var S=N+r[1]-r[0];C[0]=Math.min(v,(S+v)/2),C[1]=Math.max(v,(S+v)/2)}var A=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(e>A[0]&&e<=A[1]||e>=C[0]&&e<=C[1]){var k;return(k=a[l])===null||k===void 0?void 0:k.index}}else{var _=Math.min(x,N),E=Math.max(x,N);if(e>(_+v)/2&&e<=(E+v)/2){var T;return(T=a[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var M=0;M<o;M++){var R=t[M];if(R!=null){var z=t[M+1],P=t[M-1];if(M===0&&z!=null&&e<=(R.coordinate+z.coordinate)/2||M===o-1&&P!=null&&e>(R.coordinate+P.coordinate)/2||M>0&&M<o-1&&P!=null&&z!=null&&e>(R.coordinate+P.coordinate)/2&&e<=(R.coordinate+z.coordinate)/2)return R.index}}return-1},RLe=()=>Rt(jP),aD=(e,t)=>t,qK=(e,t,a)=>a,sD=(e,t,a,s)=>s,zLe=rt(oc,e=>rj(e,t=>t.coordinate)),rD=rt([ch,aD,qK,sD],LK),iD=rt([rD,uh,Jx,n0],XP),ULe=(e,t,a)=>{if(t!=null){var s=ch(e);return t==="axis"?a==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:a==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},GK=rt([ch,aD,qK,sD],DK),ow=rt([nc,ac,wn,is,oc,sD,GK,t0],PK),FLe=rt([rD,ow],(e,t)=>{var a;return(a=e.coordinate)!==null&&a!==void 0?a:t}),WK=rt([oc,iD],_K),BLe=rt([GK,iD,sc,Jx,WK,t0,aD],OK),HLe=rt([rD,iD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),qLe=(e,t,a,s,r,i,o)=>{if(!(!e||!a||!s||!r)&&$Le(e,o)){var l=R_e(e,t),c=HK(l,i,r,a,s),d=MLe(t,r,c,e);return{activeIndex:String(c),activeCoordinate:d}}},GLe=(e,t,a,s,r,i,o)=>{if(!(!e||!s||!r||!i||!a)){var l=tEe(e,a);if(l){var c=z_e(l,t),d=HK(c,o,i,s,r),u=ILe(t,i,d,l);return{activeIndex:String(d),activeCoordinate:u}}}},WLe=(e,t,a,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?qLe(e,t,s,r,i,o,l):GLe(e,t,a,s,r,i,o)},VLe=rt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,a)=>a,(e,t,a)=>{if(t!=null){var s=e[t];if(s!=null)return a?s.panoramaElement:s.element}}),QLe=rt(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ha)),a=Array.from(new Set(t));return a.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:kEe}});function QU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function YU(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QU(Object(a),!0).forEach(function(s){YLe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function YLe(e,t,a){return(t=KLe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function KLe(e){var t=XLe(e,"string");return typeof t=="symbol"?t:t+""}function XLe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZLe={},JLe={zIndexMap:Object.values(Ha).reduce((e,t)=>YU(YU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),ZLe)},e4e=new Set(Object.values(Ha));function t4e(e){return e4e.has(e)}var VK=br({name:"zIndex",initialState:JLe,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]?e.zIndexMap[a].consumers+=1:e.zIndexMap[a]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:oa()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(e.zIndexMap[a].consumers-=1,e.zIndexMap[a].consumers<=0&&!t4e(a)&&delete e.zIndexMap[a])},prepare:oa()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a,element:s,isPanorama:r}=t.payload;e.zIndexMap[a]?r?e.zIndexMap[a].panoramaElement=s:e.zIndexMap[a].element=s:e.zIndexMap[a]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:oa()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:a}=t.payload;e.zIndexMap[a]&&(t.payload.isPanorama?e.zIndexMap[a].panoramaElement=void 0:e.zIndexMap[a].element=void 0)},prepare:oa()}}}),{registerZIndexPortal:n4e,unregisterZIndexPortal:a4e,registerZIndexPortalElement:s4e,unregisterZIndexPortalElement:r4e}=VK.actions,i4e=VK.reducer;function vr(e){var{zIndex:t,children:a}=e,s=pAe(),r=s&&t!==void 0&&t!==0,i=Us(),o=Xn();h.useLayoutEffect(()=>r?(o(n4e({zIndex:t})),()=>{o(a4e({zIndex:t}))}):Ux,[o,t,r]);var l=Rt(c=>VLe(c,t,i));return r?l?Bi.createPortal(a,l):null:a}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lk.apply(null,arguments)}function KU(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Jy(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?KU(Object(a),!0).forEach(function(s){o4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):KU(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function o4e(e,t,a){return(t=l4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l4e(e){var t=c4e(e,"string");return typeof t=="symbol"?t:t+""}function c4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d4e(e){var{cursor:t,cursorComp:a,cursorProps:s}=e;return h.isValidElement(t)?h.cloneElement(t,s):h.createElement(a,s)}function u4e(e){var t,{coordinate:a,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:d,chartName:u}=e,f=a,p=s,x=r;if(!c||!f||u!=="ScatterChart"&&d!=="axis")return null;var v,N,b;if(u==="ScatterChart")v=f,N=gTe,b=Ha.cursorLine;else if(u==="BarChart")v=pTe(l,f,i,o),N=jY,b=Ha.cursorRectangle;else if(l==="radial"&&iQ(f)){var{cx:C,cy:w,radius:S,startAngle:A,endAngle:k}=SY(f);v={cx:C,cy:w,startAngle:A,endAngle:k,innerRadius:S,outerRadius:S},N=AY,b=Ha.cursorLine}else v={points:rEe(l,f,i)},N=bP,b=Ha.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,E=Jy(Jy(Jy(Jy({stroke:"#ccc",pointerEvents:"none"},i),v),Du(c)),{},{payload:p,payloadIndex:x,className:Pt("recharts-tooltip-cursor",_)});return h.createElement(vr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},h.createElement(d4e,{cursor:c,cursorComp:N,cursorProps:E}))}function m4e(e){var t=LLe(),a=iY(),s=ah(),r=RLe();return t==null||a==null||s==null||r==null?null:h.createElement(u4e,lk({},e,{offset:a,layout:s,tooltipAxisBandSize:t,chartName:r}))}var QK=h.createContext(null),f4e=()=>h.useContext(QK),w_={exports:{}},XU;function h4e(){return XU||(XU=1,(function(e){var t=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function r(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new r(u,f||c,p),v=a?a+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(a?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=a?a+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,x=f.length,v=new Array(x);p<x;p++)v[p]=f[p].fn;return v},l.prototype.listenerCount=function(d){var u=a?a+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,x,v){var N=a?a+d:d;if(!this._events[N])return!1;var b=this._events[N],C=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),C){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,f),!0;case 4:return b.fn.call(b.context,u,f,p),!0;case 5:return b.fn.call(b.context,u,f,p,x),!0;case 6:return b.fn.call(b.context,u,f,p,x,v),!0}for(S=1,w=new Array(C-1);S<C;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var A=b.length,k;for(S=0;S<A;S++)switch(b[S].once&&this.removeListener(d,b[S].fn,void 0,!0),C){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,u);break;case 3:b[S].fn.call(b[S].context,u,f);break;case 4:b[S].fn.call(b[S].context,u,f,p);break;default:if(!w)for(k=1,w=new Array(C-1);k<C;k++)w[k-1]=arguments[k];b[S].fn.apply(b[S].context,w)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===u&&(!p||v.once)&&(!f||v.context===f)&&o(this,x);else{for(var N=0,b=[],C=v.length;N<C;N++)(v[N].fn!==u||p&&!v[N].once||f&&v[N].context!==f)&&b.push(v[N]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l})(w_)),w_.exports}var g4e=h4e();const p4e=Ki(g4e);var $p=new p4e,ck="recharts.syncEvent.tooltip",ZU="recharts.syncEvent.brush";function oD(e,t){if(t){var a=Number.parseInt(t,10);if(!Qi(a))return e?.[a]}}var x4e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},YK=br({name:"options",initialState:x4e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),y4e=YK.reducer,{createEventEmitter:b4e}=YK.actions;function v4e(e){return e.tooltip.syncInteraction}var w4e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KK=br({name:"chartData",initialState:w4e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:a,endIndex:s}=t.payload;a!=null&&(e.dataStartIndex=a),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:JU,setDataStartEndIndexes:N4e,setComputedData:aVe}=KK.actions,j4e=KK.reducer,C4e=["x","y"];function eF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Qm(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?eF(Object(a),!0).forEach(function(s){S4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function S4e(e,t,a){return(t=_4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _4e(e){var t=A4e(e,"string");return typeof t=="symbol"?t:t+""}function A4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T4e(e,t){if(e==null)return{};var a,s,r=E4e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function E4e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function k4e(){var e=Rt(CP),t=Rt(SP),a=Xn(),s=Rt(WY),r=Rt(oc),i=ah(),o=yj(),l=Rt(c=>c.rootProps.className);h.useEffect(()=>{if(e==null)return Ux;var c=(d,u,f)=>{if(t!==f&&e===d){if(s==="index"){var p;if(o&&u!==null&&u!==void 0&&(p=u.payload)!==null&&p!==void 0&&p.coordinate&&u.payload.sourceViewBox){var x=u.payload.coordinate,{x:v,y:N}=x,b=T4e(x,C4e),{x:C,y:w,width:S,height:A}=u.payload.sourceViewBox,k=Qm(Qm({},b),{},{x:o.x+(S?(v-C)/S:0)*o.width,y:o.y+(A?(N-w)/A:0)*o.height});a(Qm(Qm({},u),{},{payload:Qm(Qm({},u.payload),{},{coordinate:k})}))}else a(u);return}if(r!=null){var _;if(typeof s=="function"){var E={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},T=s(r,E);_=r[T]}else s==="value"&&(_=r.find(V=>String(V.value)===u.payload.label));var{coordinate:M}=u.payload;if(_==null||u.payload.active===!1||M==null||o==null){a(ik({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:R,y:z}=M,P=Math.min(R,o.x+o.width),I=Math.min(z,o.y+o.height),q={x:i==="horizontal"?_.coordinate:P,y:i==="horizontal"?I:_.coordinate},Q=ik({active:u.payload.active,coordinate:q,dataKey:u.payload.dataKey,index:String(_.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox,graphicalItemId:u.payload.graphicalItemId});a(Q)}}};return $p.on(ck,c),()=>{$p.off(ck,c)}},[l,a,t,e,s,r,i,o])}function L4e(){var e=Rt(CP),t=Rt(SP),a=Xn();h.useEffect(()=>{if(e==null)return Ux;var s=(r,i,o)=>{t!==o&&e===r&&a(N4e(i))};return $p.on(ZU,s),()=>{$p.off(ZU,s)}},[a,t,e])}function P4e(){var e=Xn();h.useEffect(()=>{e(b4e())},[e]),k4e(),L4e()}function D4e(e,t,a,s,r,i){var o=Rt(x=>ULe(x,e,t)),l=Rt(SP),c=Rt(CP),d=Rt(WY),u=Rt(v4e),f=u?.active,p=yj();h.useEffect(()=>{if(!f&&c!=null&&l!=null){var x=ik({active:i,coordinate:a,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});$p.emit(ck,c,x,l)}},[f,a,o,r,s,l,c,d,i,p])}function tF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function nF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?tF(Object(a),!0).forEach(function(s){O4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function O4e(e,t,a){return(t=M4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function M4e(e){var t=I4e(e,"string");return typeof t=="symbol"?t:t+""}function I4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $4e(e){return e.dataKey}function R4e(e,t){return h.isValidElement(e)?h.cloneElement(e,t):typeof e=="function"?h.createElement(e,t):h.createElement(QAe,t)}var aF=[],z4e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function N_(e){var t,a,s=Va(e,z4e),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:x,reverseDirection:v,useTranslate3d:N,wrapperStyle:b,cursor:C,shared:w,trigger:S,defaultIndex:A,portal:k,axisId:_}=s,E=Xn(),T=typeof A=="number"?String(A):A;h.useEffect(()=>{E(Oke({shared:w,trigger:S,axisId:_,active:r,defaultIndex:T}))},[E,w,S,_,r,T]);var M=yj(),R=yY(),z=Tke(w),{activeIndex:P,isActive:I}=(t=Rt(Oe=>HLe(Oe,z,S,T)))!==null&&t!==void 0?t:{},q=Rt(Oe=>BLe(Oe,z,S,T)),Q=Rt(Oe=>WK(Oe,z,S,T)),V=Rt(Oe=>FLe(Oe,z,S,T)),X=q,W=f4e(),ne=(a=r??I)!==null&&a!==void 0?a:!1,[oe,K]=vQ([X,ne]),U=z==="axis"?Q:void 0;D4e(z,S,V,U,P,ne);var ye=k??W;if(ye==null||M==null||z==null)return null;var pe=X??aF;ne||(pe=aF),d&&pe.length&&(pe=pQ(pe.filter(Oe=>Oe.value!=null&&(Oe.hide!==!0||s.includeHidden)),p,$4e));var Ne=pe.length>0,Se=h.createElement(tTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:u,active:ne,coordinate:V,hasPayload:Ne,offset:f,position:x,reverseDirection:v,useTranslate3d:N,viewBox:M,wrapperStyle:b,lastBoundingBox:oe,innerRef:K,hasPortalFromProps:!!k},R4e(c,nF(nF({},s),{},{payload:pe,label:U,active:ne,activeIndex:P,coordinate:V,accessibilityLayer:R})));return h.createElement(h.Fragment,null,Bi.createPortal(Se,ye),ne&&h.createElement(m4e,{cursor:C,tooltipEventType:z,coordinate:V,payload:pe,index:P}))}var Ij=e=>null;Ij.displayName="Cell";function U4e(e,t,a){return(t=F4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function F4e(e){var t=B4e(e,"string");return typeof t=="symbol"?t:t+""}function B4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H4e{constructor(t){U4e(this,"cache",new Map),this.maxSize=t}get(t){var a=this.cache.get(t);return a!==void 0&&(this.cache.delete(t),this.cache.set(t,a)),a}set(t,a){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,a)}clear(){this.cache.clear()}size(){return this.cache.size}}function sF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function q4e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?sF(Object(a),!0).forEach(function(s){G4e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function G4e(e,t,a){return(t=W4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function W4e(e){var t=V4e(e,"string");return typeof t=="symbol"?t:t+""}function V4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q4e={cacheSize:2e3,enableCache:!0},XK=q4e({},Q4e),rF=new H4e(XK.cacheSize),Y4e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},iF="recharts_measurement_span";function K4e(e,t){var a=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(a,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var oF=(e,t)=>{try{var a=document.getElementById(iF);a||(a=document.createElement("span"),a.setAttribute("id",iF),a.setAttribute("aria-hidden","true"),document.body.appendChild(a)),Object.assign(a.style,Y4e,t),a.textContent="".concat(e);var s=a.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Zg=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||jj.isSsr)return{width:0,height:0};if(!XK.enableCache)return oF(t,a);var s=K4e(t,a),r=rF.get(s);if(r)return r;var i=oF(t,a);return rF.set(s,i),i},ZK;function X4e(e,t,a){return(t=Z4e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Z4e(e){var t=J4e(e,"string");return typeof t=="symbol"?t:t+""}function J4e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cF=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ePe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,nPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},aPe=["cm","mm","pt","pc","in","Q","px"];function sPe(e){return aPe.includes(e)}var of="NaN";function rPe(e,t){return e*nPe[t]}class Ss{static parse(t){var a,[,s,r]=(a=tPe.exec(t))!==null&&a!==void 0?a:[];return s==null?Ss.NaN:new Ss(parseFloat(s),r??"")}constructor(t,a){this.num=t,this.unit=a,this.num=t,this.unit=a,Qi(t)&&(this.unit=""),a!==""&&!ePe.test(a)&&(this.num=NaN,this.unit=""),sPe(a)&&(this.num=rPe(t,a),this.unit="px")}add(t){return this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ss(NaN,""):new Ss(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qi(this.num)}}ZK=Ss;X4e(Ss,"NaN",new ZK(NaN,""));function JK(e){if(e==null||e.includes(of))return of;for(var t=e;t.includes("*")||t.includes("/");){var a,[,s,r,i]=(a=lF.exec(t))!==null&&a!==void 0?a:[],o=Ss.parse(s??""),l=Ss.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return of;t=t.replace(lF,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,f,p]=(d=cF.exec(t))!==null&&d!==void 0?d:[],x=Ss.parse(u??""),v=Ss.parse(p??""),N=f==="+"?x.add(v):x.subtract(v);if(N.isNaN())return of;t=t.replace(cF,N.toString())}return t}var dF=/\(([^()]*)\)/;function iPe(e){for(var t=e,a;(a=dF.exec(t))!=null;){var[,s]=a;t=t.replace(dF,JK(s))}return t}function oPe(e){var t=e.replace(/\s+/g,"");return t=iPe(t),t=JK(t),t}function lPe(e){try{return oPe(e)}catch{return of}}function j_(e){var t=lPe(e.slice(5,-1));return t===of?"":t}var cPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dPe=["dx","dy","angle","className","breakAll"];function dk(){return dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},dk.apply(null,arguments)}function uF(e,t){if(e==null)return{};var a,s,r=uPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function uPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var eX=/[ \f\n\r\t\v\u2028\u2029]+/,tX=e=>{var{children:t,breakAll:a,style:s}=e;try{var r=[];ua(t)||(a?r=t.toString().split(""):r=t.toString().split(eX));var i=r.map(l=>({word:l,width:Zg(l,s).width})),o=a?0:Zg("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function mPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var nX=(e,t,a,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+a<Number(t)))c.words.push(o),c.width+=l+a;else{var d={words:[o],width:l};r.push(d)}return r},[]),aX=e=>e.reduce((t,a)=>t.width>a.width?t:a),fPe="",mF=(e,t,a,s,r,i,o,l)=>{var c=e.slice(0,t),d=tX({breakAll:a,style:s,children:c+fPe});if(!d)return[!1,[]];var u=nX(d.wordsWithComputedWidth,i,o,l),f=u.length>r||aX(u).width>Number(i);return[f,u]},hPe=(e,t,a,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=It(i),u=String(o),f=nX(t,s,a,r);if(!d||r)return f;var p=f.length>i||aX(f).width>Number(s);if(!p)return f;for(var x=0,v=u.length-1,N=0,b;x<=v&&N<=u.length-1;){var C=Math.floor((x+v)/2),w=C-1,[S,A]=mF(u,w,c,l,i,s,a,r),[k]=mF(u,C,c,l,i,s,a,r);if(!S&&!k&&(x=C+1),S&&k&&(v=C-1),!S&&k){b=A;break}N++}return b||f},fF=e=>{var t=ua(e)?[]:e.toString().split(eX);return[{words:t,width:void 0}]},gPe=e=>{var{width:t,scaleToFit:a,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||a)&&!jj.isSsr){var l,c,d=tX({breakAll:i,children:s,style:r});if(d){var{wordsWithComputedWidth:u,spaceWidth:f}=d;l=u,c=f}else return fF(s);return hPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!a)}return fF(s)},sX="#808080",pPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:sX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},$j=h.forwardRef((e,t)=>{var a=Va(e,pPe),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=a,f=uF(a,cPe),p=h.useMemo(()=>gPe({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:x,dy:v,angle:N,className:b,breakAll:C}=f,w=uF(f,dPe);if(!zo(s)||!zo(r)||p.length===0)return null;var S=Number(s)+(It(x)?x:0),A=Number(r)+(It(v)?v:0);if(!ga(S)||!ga(A))return null;var k;switch(u){case"start":k=j_("calc(".concat(o,")"));break;case"middle":k=j_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:k=j_("calc(".concat(p.length-1," * -").concat(i,")"));break}var _=[];if(c){var E=p[0].width,{width:T}=f;_.push("scale(".concat(It(T)&&It(E)?T/E:1,")"))}return N&&_.push("rotate(".concat(N,", ").concat(S,", ").concat(A,")")),_.length&&(w.transform=_.join(" ")),h.createElement("text",dk({},Ws(w),{ref:t,x:S,y:A,className:Pt("recharts-text",b),textAnchor:d,fill:l.includes("url")?sX:l}),p.map((M,R)=>{var z=M.words.join(C?"":" ");return h.createElement("tspan",{x:S,dy:R===0?k:i,key:"".concat(z,"-").concat(R)},z)}))});$j.displayName="Text";var xPe=["labelRef"],yPe=["content"];function hF(e,t){if(e==null)return{};var a,s,r=bPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function gF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function La(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?gF(Object(a),!0).forEach(function(s){vPe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):gF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vPe(e,t,a){return(t=wPe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wPe(e){var t=NPe(e,"string");return typeof t=="symbol"?t:t+""}function NPe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Sl.apply(null,arguments)}var rX=h.createContext(null),jPe=e=>{var{x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=h.useMemo(()=>({x:t,y:a,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,a,s,r,i,o]);return h.createElement(rX.Provider,{value:c},l)},iX=()=>{var e=h.useContext(rX),t=yj();return e||rY(t)},CPe=h.createContext(null),SPe=()=>{var e=h.useContext(CPe),t=Rt(XY);return e||t},_Pe=e=>{var{value:t,formatter:a}=e,s=ua(e.children)?t:e.children;return typeof a=="function"?a(s):s},lD=e=>e!=null&&typeof e=="function",APe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s},TPe=(e,t,a,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:f,endAngle:p,clockWise:x}=r,v=(d+u)/2,N=APe(f,p),b=N>=0?1:-1,C,w;switch(t){case"insideStart":C=f+b*i,w=x;break;case"insideEnd":C=p-b*i,w=!x;break;case"end":C=p+b*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=N<=0?w:!w;var S=Ba(l,c,v,C),A=Ba(l,c,v,C+(w?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(A.x,",").concat(A.y),_=ua(e.id)?Tp("recharts-radial-line-"):e.id;return h.createElement("text",Sl({},s,{dominantBaseline:"central",className:Pt("recharts-radial-bar-label",o)}),h.createElement("defs",null,h.createElement("path",{id:_,d:k})),h.createElement("textPath",{xlinkHref:"#".concat(_)},a))},EPe=(e,t,a)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,d=(l+c)/2;if(a==="outside"){var{x:u,y:f}=Ba(s,r,o+t,d);return{x:u,y:f,textAnchor:u>=s?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y:v}=Ba(s,r,p,d);return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},uk=e=>"cx"in e&&It(e.cx),kPe=(e,t)=>{var{parentViewBox:a,offset:s,position:r}=e,i;a!=null&&!uk(a)&&(i=a);var{x:o,y:l,upperWidth:c,lowerWidth:d,height:u}=t,f=o,p=o+(c-d)/2,x=(f+p)/2,v=(c+d)/2,N=f+c/2,b=u>=0?1:-1,C=b*s,w=b>0?"end":"start",S=b>0?"start":"end",A=c>=0?1:-1,k=A*s,_=A>0?"end":"start",E=A>0?"start":"end";if(r==="top"){var T={x:f+c/2,y:l-C,textAnchor:"middle",verticalAnchor:w};return La(La({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var M={x:p+d/2,y:l+u+C,textAnchor:"middle",verticalAnchor:S};return La(La({},M),i?{height:Math.max(i.y+i.height-(l+u),0),width:d}:{})}if(r==="left"){var R={x:x-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"};return La(La({},R),i?{width:Math.max(R.x-i.x,0),height:u}:{})}if(r==="right"){var z={x:x+v+k,y:l+u/2,textAnchor:E,verticalAnchor:"middle"};return La(La({},z),i?{width:Math.max(i.x+i.width-z.x,0),height:u}:{})}var P=i?{width:v,height:u}:{};return r==="insideLeft"?La({x:x+k,y:l+u/2,textAnchor:E,verticalAnchor:"middle"},P):r==="insideRight"?La({x:x+v-k,y:l+u/2,textAnchor:_,verticalAnchor:"middle"},P):r==="insideTop"?La({x:f+c/2,y:l+C,textAnchor:"middle",verticalAnchor:S},P):r==="insideBottom"?La({x:p+d/2,y:l+u-C,textAnchor:"middle",verticalAnchor:w},P):r==="insideTopLeft"?La({x:f+k,y:l+C,textAnchor:E,verticalAnchor:S},P):r==="insideTopRight"?La({x:f+c-k,y:l+C,textAnchor:_,verticalAnchor:S},P):r==="insideBottomLeft"?La({x:p+k,y:l+u-C,textAnchor:E,verticalAnchor:w},P):r==="insideBottomRight"?La({x:p+d-k,y:l+u-C,textAnchor:_,verticalAnchor:w},P):r&&typeof r=="object"&&(It(r.x)||ql(r.x))&&(It(r.y)||ql(r.y))?La({x:o+Is(r.x,v),y:l+Is(r.y,u),textAnchor:"end",verticalAnchor:"end"},P):La({x:N,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},LPe={angle:0,offset:5,zIndex:Ha.label,position:"middle",textBreakAll:!1};function qc(e){var t=Va(e,LPe),{viewBox:a,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=SPe(),f=iX(),p=s==="center"?f:u??f,x,v,N;if(a==null?x=p:uk(a)?x=a:x=rY(a),!x||ua(r)&&ua(i)&&!h.isValidElement(o)&&typeof o!="function")return null;var b=La(La({},t),{},{viewBox:x});if(h.isValidElement(o)){var{labelRef:C}=b,w=hF(b,xPe);return h.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=b,A=hF(b,yPe);if(v=h.createElement(o,A),h.isValidElement(v))return v}else v=_Pe(t);var k=Ws(t);if(uk(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return TPe(t,s,v,k,x);N=EPe(x,t.offset,t.position)}else N=kPe(t,x);return h.createElement(vr,{zIndex:t.zIndex},h.createElement($j,Sl({ref:d,className:Pt("recharts-label",l)},k,N,{textAnchor:mPe(k.textAnchor)?k.textAnchor:N.textAnchor,breakAll:c}),v))}qc.displayName="Label";var PPe=(e,t,a)=>{if(!e)return null;var s={viewBox:t,labelRef:a};return e===!0?h.createElement(qc,Sl({key:"label-implicit"},s)):zo(e)?h.createElement(qc,Sl({key:"label-implicit",value:e},s)):h.isValidElement(e)?e.type===qc?h.cloneElement(e,La({key:"label-implicit"},s)):h.createElement(qc,Sl({key:"label-implicit",content:e},s)):lD(e)?h.createElement(qc,Sl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?h.createElement(qc,Sl({},e,{key:"label-implicit"},s)):null};function DPe(e){var{label:t,labelRef:a}=e,s=iX();return PPe(t,s,a)||null}var C_={},S_={},pF;function OPe(){return pF||(pF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return a[a.length-1]}e.last=t})(S_)),S_}var __={},xF;function MPe(){return xF||(xF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return Array.isArray(a)?a:Array.from(a)}e.toArray=t})(__)),__}var yF;function IPe(){return yF||(yF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OPe(),a=MPe(),s=aP();function r(i){if(s.isArrayLike(i))return t.last(a.toArray(i))}e.last=r})(C_)),C_}var A_,bF;function $Pe(){return bF||(bF=1,A_=IPe().last),A_}var RPe=$Pe();const zPe=Ki(RPe);var UPe=["valueAccessor"],FPe=["dataKey","clockWise","id","textBreakAll","zIndex"];function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},lw.apply(null,arguments)}function vF(e,t){if(e==null)return{};var a,s,r=BPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function BPe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var HPe=e=>Array.isArray(e.value)?zPe(e.value):e.value,oX=h.createContext(void 0),lX=oX.Provider,cX=h.createContext(void 0),qPe=cX.Provider;function GPe(){return h.useContext(oX)}function WPe(){return h.useContext(cX)}function Zb(e){var{valueAccessor:t=HPe}=e,a=vF(e,UPe),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=a,c=vF(a,FPe),d=GPe(),u=WPe(),f=d||u;return!f||!f.length?null:h.createElement(vr,{zIndex:l??Ha.label},h.createElement(ps,{className:"recharts-label-list"},f.map((p,x)=>{var v,N=ua(s)?t(p,x):Hn(p&&p.payload,s),b=ua(i)?{}:{id:"".concat(i,"-").concat(x)};return h.createElement(qc,lw({key:"label-".concat(x)},Ws(p),c,b,{fill:(v=a.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}Zb.displayName="LabelList";function cD(e){var{label:t}=e;return t?t===!0?h.createElement(Zb,{key:"labelList-implicit"}):h.isValidElement(t)||lD(t)?h.createElement(Zb,{key:"labelList-implicit",content:t}):typeof t=="object"?h.createElement(Zb,lw({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},mk.apply(null,arguments)}var dX=e=>{var{cx:t,cy:a,r:s,className:r}=e,i=Pt("recharts-dot",r);return It(t)&&It(a)&&It(s)?h.createElement("circle",mk({},Ur(e),nP(e),{className:i,cx:t,cy:a,r:s})):null},uX=e=>e.graphicalItems.polarItems,VPe=rt([fa,Kx],LP),Rj=rt([uX,ya,VPe],PP),QPe=rt([Rj],DP),zj=rt([QPe,Cj],OP),YPe=rt([zj,ya,Rj],IP);rt([zj,ya,Rj],(e,t,a)=>a.length>0?e.flatMap(s=>a.flatMap(r=>{var i,o=Hn(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Hn(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var wF=()=>{},KPe=rt([zj,ya,Rj,Pj,fa],UP),XPe=rt([ya,RP,zP,wF,KPe,wF,wn,fa],FP),mX=rt([ya,wn,zj,YPe,Yx,fa,XPe],BP),ZPe=rt([mX,ya,lh],GP);rt([ya,mX,ZPe,fa],VP);var JPe={radiusAxis:{},angleAxis:{}},fX=br({name:"polarAxis",initialState:JPe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:sVe,removeRadiusAxis:rVe,addAngleAxis:iVe,removeAngleAxis:oVe}=fX.actions,eDe=fX.reducer;function NF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function jF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(a),!0).forEach(function(s){tDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):NF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function tDe(e,t,a){return(t=nDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nDe(e){var t=aDe(e,"string");return typeof t=="symbol"?t:t+""}function aDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sDe=(e,t)=>t,dD=rt([uX,sDe],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),rDe=[],uD=(e,t,a)=>a?.length===0?rDe:a,hX=rt([Cj,dD,uD],(e,t,a)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&a!=null&&(r=a.map(i=>jF(jF({},t.presentationProps),i.props))),r!=null)return r}}),iDe=rt([hX,dD,uD],(e,t,a)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=Hn(s,t.nameKey,t.name),l;return a!=null&&(i=a[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=a[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:nh(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),oDe=rt([hX,dD,uD,is],(e,t,a,s)=>{if(!(t==null||e==null))return i3e({offset:s,pieSettings:t,displayedData:e,cells:a})}),CF=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",SF=null,T_=null,gX=e=>{if(e===SF&&Array.isArray(T_))return T_;var t=[];return h.Children.forEach(e,a=>{ua(a)||(nL.isFragment(a)?t=t.concat(gX(a.props.children)):t.push(a))}),T_=t,SF=e,t};function mD(e,t){var a=[],s=[];return Array.isArray(t)?s=t.map(r=>CF(r)):s=[CF(t)],gX(e).forEach(r=>{var i=Ou(r,"type.displayName")||Ou(r,"type.name");i&&s.indexOf(i)!==-1&&a.push(r)}),a}var pX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,E_={},_F;function lDe(){return _F||(_F=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const r=a[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${r}]`}let s=a;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(a)===s}e.isPlainObject=t})(E_)),E_}var k_,AF;function cDe(){return AF||(AF=1,k_=lDe().isPlainObject),k_}var dDe=cDe();const uDe=Ki(dDe);var TF,EF,kF,LF,PF;function DF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function OF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(a),!0).forEach(function(s){mDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):DF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function mDe(e,t,a){return(t=fDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function fDe(e){var t=hDe(e,"string");return typeof t=="symbol"?t:t+""}function hDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},cw.apply(null,arguments)}function xg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var MF=(e,t,a,s,r)=>{var i=a-s,o;return o=ja(TF||(TF=xg(["M ",",",""])),e,t),o+=ja(EF||(EF=xg(["L ",",",""])),e+a,t),o+=ja(kF||(kF=xg(["L ",",",""])),e+a-i/2,t+r),o+=ja(LF||(LF=xg(["L ",",",""])),e+a-i/2-s,t+r),o+=ja(PF||(PF=xg(["L ",","," Z"])),e,t),o},gDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pDe=e=>{var t=Va(e,gDe),{x:a,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=h.useRef(null),[x,v]=h.useState(-1),N=h.useRef(r),b=h.useRef(i),C=h.useRef(o),w=h.useRef(a),S=h.useRef(s),A=Qx(e,"trapezoid-");if(h.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var q=p.current.getTotalLength();q&&v(q)}catch{}},[]),a!==+a||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var k=Pt("recharts-trapezoid",l);if(!f)return h.createElement("g",null,h.createElement("path",cw({},Ws(t),{className:k,d:MF(a,s,r,i,o)})));var _=N.current,E=b.current,T=C.current,M=w.current,R=S.current,z="0px ".concat(x===-1?1:x,"px"),P="".concat(x,"px 0px"),I=bY(["strokeDasharray"],d,c);return h.createElement(Vx,{animationId:A,key:A,canBegin:x>0,duration:d,easing:c,isActive:f,begin:u},q=>{var Q=la(_,r,q),V=la(E,i,q),X=la(T,o,q),W=la(M,a,q),ne=la(R,s,q);p.current&&(N.current=Q,b.current=V,C.current=X,w.current=W,S.current=ne);var oe=q>0?{transition:I,strokeDasharray:P}:{strokeDasharray:z};return h.createElement("path",cw({},Ws(t),{className:k,d:MF(W,ne,Q,V,X),ref:p,style:OF(OF({},oe),t.style)}))})},xDe=["option","shapeType","activeClassName"];function yDe(e,t){if(e==null)return{};var a,s,r=bDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function IF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function dw(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?IF(Object(a),!0).forEach(function(s){vDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):IF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function vDe(e,t,a){return(t=wDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wDe(e){var t=NDe(e,"string");return typeof t=="symbol"?t:t+""}function NDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jDe(e,t){return dw(dw({},t),e)}function CDe(e,t){return e==="symbols"}function $F(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return h.createElement(jY,a);case"trapezoid":return h.createElement(pDe,a);case"sector":return h.createElement(AY,a);case"symbols":if(CDe(t))return h.createElement(tP,a);break;case"curve":return h.createElement(bP,a);default:return null}}function SDe(e){return h.isValidElement(e)?e.props:e}function fD(e){var{option:t,shapeType:a,activeClassName:s="recharts-active-shape"}=e,r=yDe(e,xDe),i;if(h.isValidElement(t))i=h.cloneElement(t,dw(dw({},r),SDe(t)));else if(typeof t=="function")i=t(r,r.index);else if(uDe(t)&&typeof t!="boolean"){var o=jDe(t,r);i=h.createElement($F,{shapeType:a,elementProps:o})}else{var l=r;i=h.createElement($F,{shapeType:a,elementProps:l})}return r.isActive?h.createElement(ps,{className:s},i):i}var hD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(TK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}},gD=e=>{var t=Xn();return(a,s)=>r=>{e?.(a,s,r),t(Mke())}},pD=(e,t,a)=>{var s=Xn();return(r,i)=>o=>{e?.(r,i,o),s(Ike({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:a}))}};function xD(e){var{tooltipEntrySettings:t}=e,a=Xn(),s=Us(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(Lke(t)):r.current!==t&&a(Pke({prev:r.current,next:t})),r.current=t)},[t,a,s]),h.useLayoutEffect(()=>()=>{r.current&&(a(Dke(r.current)),r.current=null)},[a]),null}function xX(e){var{legendPayload:t}=e,a=Xn(),s=Us(),r=h.useRef(null);return h.useLayoutEffect(()=>{s||(r.current===null?a(hY(t)):r.current!==t&&a(gY({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(pY(r.current)),r.current=null)},[a]),null}function _De(e){var{legendPayload:t}=e,a=Xn(),s=Rt(wn),r=h.useRef(null);return h.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?a(hY(t)):r.current!==t&&a(gY({prev:r.current,next:t})),r.current=t)},[a,s,t]),h.useLayoutEffect(()=>()=>{r.current&&(a(pY(r.current)),r.current=null)},[a]),null}var L_,ADe=()=>{var[e]=h.useState(()=>Tp("uid-"));return e},TDe=(L_=Nu.useId)!==null&&L_!==void 0?L_:ADe;function EDe(e,t){var a=TDe();return t||(e?"".concat(e,"-").concat(a):a)}var kDe=h.createContext(void 0),yD=e=>{var{id:t,type:a,children:s}=e,r=EDe("recharts-".concat(a),t);return h.createElement(kDe.Provider,{value:r},s(r))},LDe={cartesianItems:[],polarItems:[]},yX=br({name:"graphicalItems",initialState:LDe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:oa()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:a,next:s}=t.payload,r=qi(e).cartesianItems.indexOf(a);r>-1&&(e.cartesianItems[r]=s)},prepare:oa()},removeCartesianGraphicalItem:{reducer(e,t){var a=qi(e).cartesianItems.indexOf(t.payload);a>-1&&e.cartesianItems.splice(a,1)},prepare:oa()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:oa()},removePolarGraphicalItem:{reducer(e,t){var a=qi(e).polarItems.indexOf(t.payload);a>-1&&e.polarItems.splice(a,1)},prepare:oa()}}}),{addCartesianGraphicalItem:PDe,replaceCartesianGraphicalItem:DDe,removeCartesianGraphicalItem:ODe,addPolarGraphicalItem:MDe,removePolarGraphicalItem:IDe}=yX.actions,$De=yX.reducer,RDe=e=>{var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(PDe(e)):a.current!==e&&t(DDe({prev:a.current,next:e})),a.current=e},[t,e]),h.useLayoutEffect(()=>()=>{a.current&&(t(ODe(a.current)),a.current=null)},[t]),null},bX=h.memo(RDe);function zDe(e){var t=Xn();return h.useLayoutEffect(()=>(t(MDe(e)),()=>{t(IDe(e))}),[t,e]),null}var UDe=["key"],FDe=["onMouseEnter","onClick","onMouseLeave"],BDe=["id"],HDe=["id"];function RF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?RF(Object(a),!0).forEach(function(s){qDe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):RF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function qDe(e,t,a){return(t=GDe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function GDe(e){var t=WDe(e,"string");return typeof t=="symbol"?t:t+""}function WDe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fd(){return fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},fd.apply(null,arguments)}function Uj(e,t){if(e==null)return{};var a,s,r=VDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function VDe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function QDe(e){var t=h.useMemo(()=>mD(e.children,Ij),[e.children]),a=Rt(s=>iDe(s,e.id,t));return a==null?null:h.createElement(_De,{legendPayload:a})}var YDe=h.memo(e=>{var{dataKey:t,nameKey:a,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:a,name:nh(l,t),hide:c,type:d,color:o,unit:"",graphicalItemId:u}};return h.createElement(xD,{tooltipEntrySettings:f})}),KDe=(e,t)=>e>t?"start":e<t?"end":"middle",XDe=(e,t,a)=>Is(typeof t=="function"?t(e):t,a,a*.8),ZDe=(e,t,a)=>{var{top:s,left:r,width:i,height:o}=t,l=CY(i,o),c=r+Is(e.cx,i,i/2),d=s+Is(e.cy,o,o/2),u=Is(e.innerRadius,l,0),f=XDe(a,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:d,innerRadius:u,outerRadius:f,maxRadius:p}},JDe=(e,t)=>{var a=gs(t-e),s=Math.min(Math.abs(t-e),360);return a*s};function e3e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var t3e=(e,t)=>{if(h.isValidElement(e))return h.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Pt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=Uj(t,UDe);return h.createElement(bP,fd({},r,{type:"linear",className:a}))},n3e=(e,t,a)=>{if(h.isValidElement(e))return h.cloneElement(e,t);var s=a;if(typeof e=="function"&&(s=e(t),h.isValidElement(s)))return s;var r=Pt("recharts-pie-label-text",e3e(e));return h.createElement($j,fd({},t,{alignmentBaseline:"middle",className:r}),s)};function a3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=a;if(!s||!r||!t)return null;var l=Ur(a),c=Du(r),d=Du(i),u=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,f=t.map((p,x)=>{var v=(p.startAngle+p.endAngle)/2,N=Ba(p.cx,p.cy,p.outerRadius+u,v),b=Ca(Ca(Ca(Ca({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:KDe(N.x,p.cx)},N),C=Ca(Ca(Ca(Ca({},l),p),{},{fill:"none",stroke:p.fill},d),{},{index:x,points:[Ba(p.cx,p.cy,p.outerRadius,v),N],key:"line"});return h.createElement(vr,{zIndex:Ha.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},h.createElement(ps,null,i&&t3e(i,C),n3e(r,b,Hn(p,o))))});return h.createElement(ps,{className:"recharts-pie-labels"},f)}function s3e(e){var{sectors:t,props:a,showLabels:s}=e,{label:r}=a;return typeof r=="object"&&r!=null&&"position"in r?h.createElement(cD,{label:r}):h.createElement(a3e,{sectors:t,props:a,showLabels:s})}function r3e(e){var{sectors:t,activeShape:a,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Rt(md),c=Rt(nD),d=Rt(wLe),{onMouseEnter:u,onClick:f,onMouseLeave:p}=r,x=Uj(r,FDe),v=hD(u,r.dataKey,o),N=gD(p),b=pD(f,r.dataKey,o);return t==null||t.length===0?null:h.createElement(h.Fragment,null,t.map((C,w)=>{if(C?.startAngle===0&&C?.endAngle===0&&t.length!==1)return null;var S=d==null||d===o,A=String(w)===l&&(c==null||r.dataKey===c)&&S,k=l?s:null,_=a&&A?a:k,E=Ca(Ca({},C),{},{stroke:C.stroke,tabIndex:-1,[eY]:w,[tY]:o});return h.createElement(ps,fd({key:"sector-".concat(C?.startAngle,"-").concat(C?.endAngle,"-").concat(C.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Fx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),h.createElement(fD,fd({option:i??_,index:w,shapeType:"sector",isActive:A},E)))}))}function i3e(e){var t,{pieSettings:a,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:d,nameKey:u,tooltipType:f}=a,p=Math.abs(a.minAngle),x=JDe(l,c),v=Math.abs(x),N=s.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,b=s.filter(_=>Hn(_,d,0)!==0).length,C=(v>=360?b:b-1)*N,w=v-b*p-C,S=s.reduce((_,E)=>{var T=Hn(E,d,0);return _+(It(T)?T:0)},0),A;if(S>0){var k;A=s.map((_,E)=>{var T=Hn(_,d,0),M=Hn(_,u,E),R=ZDe(a,i,_),z=(It(T)?T:0)/S,P,I=Ca(Ca({},_),r&&r[E]&&r[E].props);E?P=k.endAngle+gs(x)*N*(T!==0?1:0):P=l;var q=P+gs(x)*((T!==0?p:0)+z*w),Q=(P+q)/2,V=(R.innerRadius+R.outerRadius)/2,X=[{name:M,value:T,payload:I,dataKey:d,type:f,graphicalItemId:a.id}],W=Ba(R.cx,R.cy,V,Q);return k=Ca(Ca(Ca(Ca({},a.presentationProps),{},{percent:z,cornerRadius:typeof o=="string"?parseFloat(o):o,name:M,tooltipPayload:X,midAngle:Q,middleRadius:V,tooltipPosition:W},I),R),{},{value:T,dataKey:d,startAngle:P,endAngle:q,payload:I,paddingAngle:gs(x)*N}),k})}return A}function o3e(e){var{showLabels:t,sectors:a,children:s}=e,r=h.useMemo(()=>!t||!a?[]:a.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[a,t]);return h.createElement(qPe,{value:t?r:void 0},s)}function l3e(e){var{props:t,previousSectorsRef:a,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:f,onAnimationEnd:p}=t,x=Qx(t,"recharts-pie-"),v=a.current,[N,b]=h.useState(!1),C=h.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),w=h.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return h.createElement(o3e,{showLabels:!N,sectors:r},h.createElement(Vx,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:C,key:x},S=>{var A=[],k=r&&r[0],_=k?.startAngle;return r?.forEach((E,T)=>{var M=v&&v[T],R=T>0?Ou(E,"paddingAngle",0):0;if(M){var z=la(M.endAngle-M.startAngle,E.endAngle-E.startAngle,S),P=Ca(Ca({},E),{},{startAngle:_+R,endAngle:_+z+R});A.push(P),_=P.endAngle}else{var{endAngle:I,startAngle:q}=E,Q=la(0,I-q,S),V=Ca(Ca({},E),{},{startAngle:_+R,endAngle:_+Q+R});A.push(V),_=V.endAngle}}),a.current=A,h.createElement(ps,null,h.createElement(r3e,{sectors:A,activeShape:d,inactiveShape:u,allOtherPieProps:t,shape:t.shape,id:s}))}),h.createElement(s3e,{showLabels:!N,sectors:r,props:t}),t.children)}var c3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ha.area};function d3e(e){var{id:t}=e,a=Uj(e,BDe),{hide:s,className:r,rootTabIndex:i}=e,o=h.useMemo(()=>mD(e.children,Ij),[e.children]),l=Rt(u=>oDe(u,t,o)),c=h.useRef(null),d=Pt("recharts-pie",r);return s||l==null?(c.current=null,h.createElement(ps,{tabIndex:i,className:d})):h.createElement(vr,{zIndex:e.zIndex},h.createElement(YDe,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),h.createElement(ps,{tabIndex:i,className:d},h.createElement(l3e,{props:Ca(Ca({},a),{},{sectors:l}),previousSectorsRef:c,id:t})))}function vX(e){var t=Va(e,c3e),{id:a}=t,s=Uj(t,HDe),r=Ur(s);return h.createElement(yD,{id:a,type:"pie"},i=>h.createElement(h.Fragment,null,h.createElement(zDe,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),h.createElement(QDe,fd({},s,{id:i})),h.createElement(d3e,fd({},s,{id:i}))))}vX.displayName="Pie";var u3e=["points"];function zF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function P_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?zF(Object(a),!0).forEach(function(s){m3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):zF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function m3e(e,t,a){return(t=f3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function f3e(e){var t=h3e(e,"string");return typeof t=="symbol"?t:t+""}function h3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uw(){return uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},uw.apply(null,arguments)}function g3e(e,t){if(e==null)return{};var a,s,r=p3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function p3e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function x3e(e){var{option:t,dotProps:a,className:s}=e;if(h.isValidElement(t))return h.cloneElement(t,a);if(typeof t=="function")return t(a);var r=Pt(s,typeof t!="boolean"?t.className:""),i=a??{},{points:o}=i,l=g3e(i,u3e);return h.createElement(dX,uw({},l,{className:r}))}function y3e(e,t){return e==null?!1:t?!0:e.length===1}function b3e(e){var{points:t,dot:a,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:d=Ha.scatter}=e;if(!y3e(t,a))return null;var u=pX(a),f=iSe(a),p=t.map((v,N)=>{var b,C,w=P_(P_(P_({r:3},o),f),{},{index:N,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(C=v.y)!==null&&C!==void 0?C:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return h.createElement(x3e,{key:"dot-".concat(N),option:a,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(u?"":"dots-").concat(c,")")),h.createElement(vr,{zIndex:d},h.createElement(ps,uw({className:s},x),p))}function UF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function FF(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(a),!0).forEach(function(s){v3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):UF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function v3e(e,t,a){return(t=w3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w3e(e){var t=N3e(e,"string");return typeof t=="symbol"?t:t+""}function N3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wX=0,j3e={xAxis:{},yAxis:{},zAxis:{}},NX=br({name:"cartesianAxis",initialState:j3e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:oa()},replaceXAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.xAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.xAxis[a.id],e.xAxis[s.id]=s)},prepare:oa()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:oa()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:oa()},replaceYAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.yAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.yAxis[a.id],e.yAxis[s.id]=s)},prepare:oa()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:oa()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:oa()},replaceZAxis:{reducer(e,t){var{prev:a,next:s}=t.payload;e.zAxis[a.id]!==void 0&&(a.id!==s.id&&delete e.zAxis[a.id],e.zAxis[s.id]=s)},prepare:oa()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:oa()},updateYAxisWidth(e,t){var{id:a,width:s}=t.payload,r=e.yAxis[a];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[a]=FF(FF({},e.yAxis[a]),{},{width:s,widthHistory:o})}}}}),{addXAxis:C3e,replaceXAxis:S3e,removeXAxis:_3e,addYAxis:A3e,replaceYAxis:T3e,removeYAxis:E3e,addZAxis:lVe,replaceZAxis:cVe,removeZAxis:dVe,updateYAxisWidth:k3e}=NX.actions,L3e=NX.reducer,P3e=rt([is],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),D3e=rt([P3e,nc,ac],(e,t,a)=>{if(!(!e||t==null||a==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,a-e.top-e.bottom)}}),bD=()=>Rt(D3e),O3e=()=>Rt(_Le);function BF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function D_(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(a),!0).forEach(function(s){M3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):BF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function M3e(e,t,a){return(t=I3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function I3e(e){var t=$3e(e,"string");return typeof t=="symbol"?t:t+""}function $3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R3e=e=>{var{point:t,childIndex:a,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:a,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=D_(D_(D_({},l),Du(r)),nP(r)),d;return h.isValidElement(r)?d=h.cloneElement(r,c):typeof r=="function"?d=r(c):d=h.createElement(dX,c),h.createElement(ps,{className:"recharts-active-dot",clipPath:o},d)};function z3e(e){var{points:t,mainColor:a,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Ha.activeDot}=e,l=Rt(md),c=O3e();if(t==null||c==null)return null;var d=t.find(u=>c.includes(u.payload));return ua(d)?null:h.createElement(vr,{zIndex:o},h.createElement(R3e,{point:d,childIndex:Number(l),mainColor:a,dataKey:r,activeDot:s,clipPath:i}))}var HF=(e,t,a)=>{var s=a??e;if(!ua(s))return Is(s,t,0)},U3e=(e,t,a)=>{var s={},r=e.filter(Aj),i=e.filter(d=>d.stackId==null),o=r.reduce((d,u)=>(d[u.stackId]||(d[u.stackId]=[]),d[u.stackId].push(u),d),s),l=Object.entries(o).map(d=>{var[u,f]=d,p=f.map(v=>v.dataKey),x=HF(t,a,f[0].barSize);return{stackId:u,dataKeys:p,barSize:x}}),c=i.map(d=>{var u=[d.dataKey].filter(p=>p!=null),f=HF(t,a,d.barSize);return{stackId:void 0,dataKeys:u,barSize:f}});return[...l,...c]};function qF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function eb(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(a),!0).forEach(function(s){F3e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function F3e(e,t,a){return(t=B3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function B3e(e){var t=H3e(e,"string");return typeof t=="symbol"?t:t+""}function H3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q3e(e,t,a,s,r){var i=s.length;if(!(i<1)){var o=Is(e,a,0,!0),l,c=[];if(ga(s[0].barSize)){var d=!1,u=a/i,f=s.reduce((C,w)=>C+(w.barSize||0),0);f+=(i-1)*o,f>=a&&(f-=(i-1)*o,o=0),f>=a&&u>0&&(d=!0,u*=.9,f=i*u);var p=(a-f)/2>>0,x={offset:p-o,size:0};l=s.reduce((C,w)=>{var S,A={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:d?u:(S=w.barSize)!==null&&S!==void 0?S:0}},k=[...C,A];return x=k[k.length-1].position,k},c)}else{var v=Is(t,a,0,!0);a-2*v-(i-1)*o<=0&&(o=0);var N=(a-2*v-(i-1)*o)/i;N>1&&(N>>=0);var b=ga(r)?Math.min(N,r):N;l=s.reduce((C,w,S)=>[...C,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:v+(N+o)*S+(N-b)/2,size:b}}],c)}return l}}var G3e=(e,t,a,s,r,i,o)=>{var l=ua(o)?t:o,c=q3e(a,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(d=>eb(eb({},d),{},{position:eb(eb({},d.position),{},{offset:d.position.offset-r/2})}))),c},W3e=(e,t)=>{var a=EP(t);if(!(!e||a==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===a)}}}};function V3e(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ga(e.zIndex)?e.zIndex:t}var jX=e=>{var{chartData:t}=e,a=Xn(),s=Us();return h.useEffect(()=>s?()=>{}:(a(JU(t)),()=>{a(JU(void 0))}),[t,a,s]),null},GF={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},CX=br({name:"brush",initialState:GF,reducers:{setBrushSettings(e,t){return t.payload==null?GF:t.payload}}}),{setBrushSettings:uVe}=CX.actions,Q3e=CX.reducer;function Y3e(e,t,a){return(t=K3e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function K3e(e){var t=X3e(e,"string");return typeof t=="symbol"?t:t+""}function X3e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vD{static create(t){return new vD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:a,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(a){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var a=this.range(),s=a[0],r=a[a.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}Y3e(vD,"EPS",1e-4);function Z3e(e){return(e%180+180)%180}var J3e=function(t){var{width:a,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Z3e(r),o=i*Math.PI/180,l=Math.atan(s/a),c=o>l&&o<Math.PI-l?s/Math.sin(o):a/Math.cos(o);return Math.abs(c)},eOe={dots:[],areas:[],lines:[]},SX=br({name:"referenceElements",initialState:eOe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var a=qi(e).dots.findIndex(s=>s===t.payload);a!==-1&&e.dots.splice(a,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var a=qi(e).areas.findIndex(s=>s===t.payload);a!==-1&&e.areas.splice(a,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var a=qi(e).lines.findIndex(s=>s===t.payload);a!==-1&&e.lines.splice(a,1)}}}),{addDot:mVe,removeDot:fVe,addArea:hVe,removeArea:gVe,addLine:pVe,removeLine:xVe}=SX.actions,tOe=SX.reducer,nOe=h.createContext(void 0),aOe=e=>{var{children:t}=e,[a]=h.useState("".concat(Tp("recharts"),"-clip")),s=bD();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return h.createElement(nOe.Provider,{value:a},h.createElement("defs",null,h.createElement("clipPath",{id:a},h.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function _X(e,t){if(t<1)return[];if(t===1)return e;for(var a=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&a.push(r)}return a}function sOe(e,t,a){var s={width:e.width+t.width,height:e.height+t.height};return J3e(s,a)}function rOe(e,t,a){var s=a==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function Rp(e,t,a,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=a();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function iOe(e,t){return _X(e,t+1)}function oOe(e,t,a,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,f=function(){var v=s?.[c];if(v===void 0)return{v:_X(s,d)};var N=c,b,C=()=>(b===void 0&&(b=a(v,N)),b),w=v.coordinate,S=c===0||Rp(e,w,C,u,l);S||(c=0,u=o,d+=1),S&&(u=w+e*(C()/2+r),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function lOe(e,t,a,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,d=1;d<=o;d++){for(var u=(o-1)%d,f=l,p=!0,x=function(){var w=s[v],S=v,A,k=()=>(A===void 0&&(A=a(w,S)),A),_=w.coordinate,E=v===u||Rp(e,_,k,f,c);if(!E)return p=!1,1;E&&(f=_+e*(k()/2+r))},v=u;v<o&&!x();v+=d);if(p){for(var N=[],b=u;b<o;b+=d)N.push(s[b]);return N}}return[]}function WF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ls(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?WF(Object(a),!0).forEach(function(s){cOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function cOe(e,t,a){return(t=dOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function dOe(e){var t=uOe(e,"string");return typeof t=="symbol"?t:t+""}function uOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mOe(e,t,a,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(p){var x=i[p],v,N=()=>(v===void 0&&(v=a(x,p)),v);if(p===o-1){var b=e*(x.coordinate+e*N()/2-c);i[p]=x=Ls(Ls({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[p]=x=Ls(Ls({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var C=Rp(e,x.tickCoord,N,l,c);C&&(c=x.tickCoord-e*(N()/2+r),i[p]=Ls(Ls({},x),{},{isShow:!0}))}},u=o-1;u>=0;u--)d(u);return i}function fOe(e,t,a,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=s[l-1],f=a(u,l-1),p=e*(u.coordinate+e*f/2-d);if(o[l-1]=u=Ls(Ls({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate}),u.tickCoord!=null){var x=Rp(e,u.tickCoord,()=>f,c,d);x&&(d=u.tickCoord-e*(f/2+r),o[l-1]=Ls(Ls({},u),{},{isShow:!0}))}}for(var v=i?l-1:l,N=function(w){var S=o[w],A,k=()=>(A===void 0&&(A=a(S,w)),A);if(w===0){var _=e*(S.coordinate-e*k()/2-c);o[w]=S=Ls(Ls({},S),{},{tickCoord:_<0?S.coordinate-_*e:S.coordinate})}else o[w]=S=Ls(Ls({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var E=Rp(e,S.tickCoord,k,c,d);E&&(c=S.tickCoord+e*(k()/2+r),o[w]=Ls(Ls({},S),{},{isShow:!0}))}},b=0;b<v;b++)N(b);return o}function wD(e,t,a){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!r||!r.length||!s)return[];if(It(c)||jj.isSsr){var p;return(p=iOe(r,It(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],v=l==="top"||l==="bottom"?"width":"height",N=u&&v==="width"?Zg(u,{fontSize:t,letterSpacing:a}):{width:0,height:0},b=(S,A)=>{var k=typeof d=="function"?d(S.value,A):S.value;return v==="width"?sOe(Zg(k,{fontSize:t,letterSpacing:a}),N,f):Zg(k,{fontSize:t,letterSpacing:a})[v]},C=r.length>=2?gs(r[1].coordinate-r[0].coordinate):1,w=rOe(i,C,v);return c==="equidistantPreserveStart"?oOe(C,w,b,r,o):c==="equidistantPreserveEnd"?lOe(C,w,b,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=fOe(C,w,b,r,o,c==="preserveStartEnd"):x=mOe(C,w,b,r,o),x.filter(S=>S.isShow))}var hOe=e=>{var{ticks:t,label:a,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var f=u.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=a?a.getBoundingClientRect().width:0,c=r+i,d=o+c+l+(a?s:0);return Math.round(d)}return 0},gOe=["axisLine","width","height","className","hide","ticks","axisType"];function pOe(e,t){if(e==null)return{};var a,s,r=xOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zu.apply(null,arguments)}function VF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ua(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?VF(Object(a),!0).forEach(function(s){yOe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function yOe(e,t,a){return(t=bOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function bOe(e){var t=vOe(e,"string");return typeof t=="symbol"?t:t+""}function vOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ha.axis};function wOe(e){var{x:t,y:a,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=Ua(Ua(Ua({},c),Ur(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);d=Ua(Ua({},d),{},{x1:t,y1:a+u*r,x2:t+s,y2:a+u*r})}else{var f=+(i==="left"&&!o||i==="right"&&o);d=Ua(Ua({},d),{},{x1:t+f*s,y1:a,x2:t+f*s,y2:a+r})}return h.createElement("line",zu({},d,{className:Pt("recharts-cartesian-axis-line",Ou(l,"className"))}))}function NOe(e,t,a,s,r,i,o,l,c){var d,u,f,p,x,v,N=l?-1:1,b=e.tickSize||o,C=It(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=u=e.coordinate,p=a+ +!l*r,f=p-N*b,v=f-N*c,x=C;break;case"left":f=p=e.coordinate,u=t+ +!l*s,d=u-N*b,x=d-N*c,v=C;break;case"right":f=p=e.coordinate,u=t+ +l*s,d=u+N*b,x=d+N*c,v=C;break;default:d=u=e.coordinate,p=a+ +l*r,f=p+N*b,v=f+N*c,x=C;break}return{line:{x1:d,y1:f,x2:u,y2:p},tick:{x,y:v}}}function jOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function COe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function SOe(e){var{option:t,tickProps:a,value:s}=e,r,i=Pt(a.className,"recharts-cartesian-axis-tick-value");if(h.isValidElement(t))r=h.cloneElement(t,Ua(Ua({},a),{},{className:i}));else if(typeof t=="function")r=t(Ua(Ua({},a),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Pt(o,t?.className)),r=h.createElement($j,zu({},a,{className:o}),s)}return r}var _Oe=h.forwardRef((e,t)=>{var{ticks:a=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:x,width:v,height:N,tickSize:b,tickMargin:C,fontSize:w,letterSpacing:S,getTicksConfig:A,events:k,axisType:_}=e,E=wD(Ua(Ua({},A),{},{ticks:a}),w,S),T=jOe(u,f),M=COe(u,f),R=Ur(A),z=Du(s),P={};typeof r=="object"&&(P=r);var I=Ua(Ua({},R),{},{fill:"none"},P),q=E.map(X=>Ua({entry:X},NOe(X,p,x,v,N,u,b,f,C))),Q=q.map(X=>{var{entry:W,line:ne}=X;return h.createElement(ps,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},r&&h.createElement("line",zu({},I,ne,{className:Pt("recharts-cartesian-axis-tick-line",Ou(r,"className"))})))}),V=q.map((X,W)=>{var{entry:ne,tick:oe}=X,K=Ua(Ua(Ua(Ua({textAnchor:T,verticalAnchor:M},R),{},{stroke:"none",fill:i},z),oe),{},{index:W,payload:ne,visibleTicksCount:E.length,tickFormatter:o,padding:c},d);return h.createElement(ps,zu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},Fx(k,ne,W)),s&&h.createElement(SOe,{option:s,tickProps:K,value:"".concat(typeof o=="function"?o(ne.value,W):ne.value).concat(l||"")}))});return h.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},V.length>0&&h.createElement(vr,{zIndex:Ha.label},h.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},V)),Q.length>0&&h.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},Q))}),AOe=h.forwardRef((e,t)=>{var{axisLine:a,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,d=pOe(e,gOe),[u,f]=h.useState(""),[p,x]=h.useState(""),v=h.useRef(null);h.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return hOe({ticks:v.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=h.useCallback(b=>{if(b){var C=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=C;var w=C[0];if(w){var S=window.getComputedStyle(w),A=S.fontSize,k=S.letterSpacing;(A!==u||k!==p)&&(f(A),x(k))}}},[u,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:h.createElement(vr,{zIndex:e.zIndex},h.createElement(ps,{className:Pt("recharts-cartesian-axis",i)},h.createElement(wOe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:a,otherSvgProps:Ur(e)}),h.createElement(_Oe,{ref:N,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),h.createElement(jPe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},h.createElement(DPe,{label:e.label,labelRef:e.labelRef}),e.children)))}),ND=h.forwardRef((e,t)=>{var a=Va(e,Pl);return h.createElement(AOe,zu({},a,{ref:t}))});ND.displayName="CartesianAxis";var TOe=["x1","y1","x2","y2","key"],EOe=["offset"],kOe=["xAxisId","yAxisId"],LOe=["xAxisId","yAxisId"];function QF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Ps(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(a),!0).forEach(function(s){POe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):QF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function POe(e,t,a){return(t=DOe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function DOe(e){var t=OOe(e,"string");return typeof t=="symbol"?t:t+""}function OOe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},du.apply(null,arguments)}function mw(e,t){if(e==null)return{};var a,s,r=MOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function MOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var IOe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:a,x:s,y:r,width:i,height:o,ry:l}=e;return h.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function AX(e){var{option:t,lineItemProps:a}=e,s;if(h.isValidElement(t))s=h.cloneElement(t,a);else if(typeof t=="function")s=t(a);else{var r,{x1:i,y1:o,x2:l,y2:c,key:d}=a,u=mw(a,TOe),f=(r=Ur(u))!==null&&r!==void 0?r:{},{offset:p}=f,x=mw(f,EOe);s=h.createElement("line",du({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:d}))}return s}function $Oe(e){var{x:t,width:a,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=mw(e,kOe),c=r.map((d,u)=>{var f=Ps(Ps({},l),{},{x1:t,y1:d,x2:t+a,y2:d,key:"line-".concat(u),index:u});return h.createElement(AX,{key:"line-".concat(u),option:s,lineItemProps:f})});return h.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function ROe(e){var{y:t,height:a,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=mw(e,LOe),c=r.map((d,u)=>{var f=Ps(Ps({},l),{},{x1:d,y1:t,x2:d,y2:t+a,key:"line-".concat(u),index:u});return h.createElement(AX,{option:s,lineItemProps:f,key:"line-".concat(u)})});return h.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function zOe(e){var{horizontalFill:t,fillOpacity:a,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var d=l.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%t.length;return h.createElement("rect",{key:"react-".concat(p),y:f,x:s,height:v,width:i,stroke:"none",fill:t[N],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function UOe(e){var{vertical:t=!0,verticalFill:a,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!a||!a.length)return null;var d=c.map(f=>Math.round(f+r-r)).sort((f,p)=>f-p);r!==d[0]&&d.unshift(0);var u=d.map((f,p)=>{var x=!d[p+1],v=x?r+o-f:d[p+1]-f;if(v<=0)return null;var N=p%a.length;return h.createElement("rect",{key:"react-".concat(p),x:f,y:i,width:v,height:l,stroke:"none",fill:a[N],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return h.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var FOe=(e,t)=>{var{xAxis:a,width:s,height:r,offset:i}=e;return XQ(wD(Ps(Ps(Ps({},Pl),a),{},{ticks:ZQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},BOe=(e,t)=>{var{yAxis:a,width:s,height:r,offset:i}=e;return XQ(wD(Ps(Ps(Ps({},Pl),a),{},{ticks:ZQ(a),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},HOe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ha.grid};function fk(e){var t=gP(),a=pP(),s=iY(),r=Ps(Ps({},Va(e,HOe)),{},{x:It(e.x)?e.x:s.left,y:It(e.y)?e.y:s.top,width:It(e.width)?e.width:s.width,height:It(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:x}=r,v=Us(),N=Rt(M=>FU(M,"xAxis",i,v)),b=Rt(M=>FU(M,"yAxis",o,v));if(!Uo(d)||!Uo(u)||!It(l)||!It(c))return null;var C=r.verticalCoordinatesGenerator||FOe,w=r.horizontalCoordinatesGenerator||BOe,{horizontalPoints:S,verticalPoints:A}=r;if((!S||!S.length)&&typeof w=="function"){var k=p&&p.length,_=w({yAxis:b?Ps(Ps({},b),{},{ticks:k?p:b.ticks}):void 0,width:t??d,height:a??u,offset:s},k?!0:f);Yv(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(S=_)}if((!A||!A.length)&&typeof C=="function"){var E=x&&x.length,T=C({xAxis:N?Ps(Ps({},N),{},{ticks:E?x:N.ticks}):void 0,width:t??d,height:a??u,offset:s},E?!0:f);Yv(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(A=T)}return h.createElement(vr,{zIndex:r.zIndex},h.createElement("g",{className:"recharts-cartesian-grid"},h.createElement(IOe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),h.createElement(zOe,du({},r,{horizontalPoints:S})),h.createElement(UOe,du({},r,{verticalPoints:A})),h.createElement($Oe,du({},r,{offset:s,horizontalPoints:S,xAxis:N,yAxis:b})),h.createElement(ROe,du({},r,{offset:s,verticalPoints:A,xAxis:N,yAxis:b}))))}fk.displayName="CartesianGrid";var qOe={},TX=br({name:"errorBars",initialState:qOe,reducers:{addErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]||(e[a]=[]),e[a].push(s)},replaceErrorBar:(e,t)=>{var{itemId:a,prev:s,next:r}=t.payload;e[a]&&(e[a]=e[a].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:a,errorBar:s}=t.payload;e[a]&&(e[a]=e[a].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:yVe,replaceErrorBar:bVe,removeErrorBar:vVe}=TX.actions,GOe=TX.reducer,WOe=["children"];function VOe(e,t){if(e==null)return{};var a,s,r=QOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function QOe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var YOe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},KOe=h.createContext(YOe);function EX(e){var{children:t}=e,a=VOe(e,WOe);return h.createElement(KOe.Provider,{value:a},t)}function jD(e,t){var a,s,r=Rt(d=>rc(d,e)),i=Rt(d=>ic(d,t)),o=(a=r?.allowDataOverflow)!==null&&a!==void 0?a:ds.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:us.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function kX(e){var{xAxisId:t,yAxisId:a,clipPathId:s}=e,r=bD(),{needClipX:i,needClipY:o,needClip:l}=jD(t,a);if(!l||!r)return null;var{x:c,y:d,width:u,height:f}=r;return h.createElement("clipPath",{id:"clipPath-".concat(s)},h.createElement("rect",{x:i?c:c-u/2,y:o?d:d-f/2,width:i?u:u*2,height:o?f:f*2}))}var LX=(e,t,a,s)=>ud(e,"xAxis",t,s),PX=(e,t,a,s)=>dd(e,"xAxis",t,s),DX=(e,t,a,s)=>ud(e,"yAxis",a,s),OX=(e,t,a,s)=>dd(e,"yAxis",a,s),XOe=rt([wn,LX,DX,PX,OX],(e,t,a,s,r)=>Sd(e,"xAxis")?Mf(t,s,!1):Mf(a,r,!1)),ZOe=(e,t,a,s,r)=>r;function JOe(e){return e.type==="line"}var e5e=rt([kj,ZOe],(e,t)=>e.filter(JOe).find(a=>a.id===t)),t5e=rt([wn,LX,DX,PX,OX,e5e,XOe,vP],(e,t,a,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:u}=l;if(!(i==null||t==null||a==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(d,u+1),x!=null)return H5e({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataKey:f,bandSize:o,displayedData:x})}});function n5e(e){var t=Du(e),a=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=a),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:a,strokeWidth:s}}var O_={exports:{}},M_={};var YF;function a5e(){if(YF)return M_;YF=1;var e=Uf();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var a=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return M_.useSyncExternalStoreWithSelector=function(c,d,u,f,p){var x=r(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function b(k){if(!C){if(C=!0,w=k,k=f(k),p!==void 0&&v.hasValue){var _=v.value;if(p(_,k))return S=_}return S=k}if(_=S,a(w,k))return _;var E=f(k);return p!==void 0&&p(_,E)?(w=k,_):(w=k,S=E)}var C=!1,w,S,A=u===void 0?null:u;return[function(){return b(d())},A===null?void 0:function(){return b(A())}]},[d,u,f,p]);var N=s(c,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=N},[N]),l(N),N},M_}var KF;function s5e(){return KF||(KF=1,O_.exports=a5e()),O_.exports}var r5e=s5e();function i5e(e){e()}function o5e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){i5e(()=>{let a=e;for(;a;)a.callback(),a=a.next})},get(){const a=[];let s=e;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0;const r=t={callback:a,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var XF={notify(){},get:()=>[]};function l5e(e,t){let a,s=XF,r=0,i=!1;function o(N){u();const b=s.subscribe(N);let C=!1;return()=>{C||(C=!0,b(),f())}}function l(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){r++,a||(a=e.subscribe(c),s=o5e())}function f(){r--,a&&r===0&&(a(),a=void 0,s.clear(),s=XF)}function p(){i||(i=!0,u())}function x(){i&&(i=!1,f())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return v}var c5e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",d5e=c5e(),u5e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",m5e=u5e(),f5e=()=>d5e||m5e?h.useLayoutEffect:h.useEffect,h5e=f5e();function ZF(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function g5e(e,t){if(ZF(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(let r=0;r<a.length;r++)if(!Object.prototype.hasOwnProperty.call(t,a[r])||!ZF(e[a[r]],t[a[r]]))return!1;return!0}var p5e=Symbol.for("react-redux-context"),x5e=typeof globalThis<"u"?globalThis:{};function y5e(){if(!h.createContext)return{};const e=x5e[p5e]??=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var b5e=y5e();function v5e(e){const{children:t,context:a,serverState:s,store:r}=e,i=h.useMemo(()=>{const c=l5e(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=h.useMemo(()=>r.getState(),[r]);h5e(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=a||b5e;return h.createElement(l.Provider,{value:i},t)}var w5e=v5e,N5e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function j5e(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Fj(e,t){var a=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of a)if(N5e.has(s)){if(e[s]==null&&t[s]==null)continue;if(!g5e(e[s],t[s]))return!1}else if(!j5e(e[s],t[s]))return!1;return!0}var C5e=["id"],S5e=["type","layout","connectNulls","needClip","shape"],_5e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function zp(){return zp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},zp.apply(null,arguments)}function JF(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function vo(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(a),!0).forEach(function(s){A5e(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):JF(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function A5e(e,t,a){return(t=T5e(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function T5e(e){var t=E5e(e,"string");return typeof t=="symbol"?t:t+""}function E5e(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CD(e,t){if(e==null)return{};var a,s,r=k5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function k5e(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var L5e=e=>{var{dataKey:t,name:a,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:nh(a,t),payload:e}]},P5e=h.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:d,id:u}=e,f={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:nh(o,t),hide:l,type:d,color:s,unit:c,graphicalItemId:u}};return h.createElement(xD,{tooltipEntrySettings:f})}),MX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function D5e(e,t){for(var a=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...a];return s}var O5e=(e,t,a)=>{var s=a.reduce((f,p)=>f+p);if(!s)return MX(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,d=0;c<a.length;d+=a[c],++c)if(d+a[c]>i){l=[...a.slice(0,c),i-d];break}var u=l.length%2===0?[0,o]:[o];return[...D5e(a,r),...l,...u].map(f=>"".concat(f,"px")).join(", ")};function M5e(e){var{clipPathId:t,points:a,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=CD(s,C5e),d=Ur(c);return h.createElement(b3e,{points:a,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:d,needClip:o,clipPathId:t})}function I5e(e){var{showLabels:t,children:a,points:s}=e,r=h.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return vo(vo({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return h.createElement(lX,{value:t?r:void 0},a)}function e7(e){var{clipPathId:t,pathRef:a,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:d,shape:u}=i,f=CD(i,S5e),p=vo(vo({},Ws(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return h.createElement(h.Fragment,null,s?.length>1&&h.createElement(fD,zp({shapeType:"curve",option:u},p,{pathRef:a})),h.createElement(M5e,{points:s,clipPathId:t,props:i}))}function $5e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function R5e(e){var{clipPathId:t,props:a,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:x,height:v,onAnimationEnd:N,onAnimationStart:b}=a,C=r.current,w=Qx(o,"recharts-line-"),S=h.useRef(w),[A,k]=h.useState(!1),_=!A,E=h.useCallback(()=>{typeof N=="function"&&N(),k(!1)},[N]),T=h.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]),M=$5e(s.current),R=h.useRef(0);S.current!==w&&(R.current=i.current,S.current=w);var z=R.current;return h.createElement(I5e,{points:o,showLabels:_},a.children,h.createElement(Vx,{animationId:w,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:E,onAnimationStart:T,key:w},P=>{var I=la(z,M+z,P),q=Math.min(I,M),Q;if(c)if(l){var V="".concat(l).split(/[,\s]+/gim).map(ne=>parseFloat(ne));Q=O5e(q,M,V)}else Q=MX(M,q);else Q=l==null?void 0:String(l);if(P>0&&M>0&&(r.current=o,i.current=Math.max(i.current,q)),C){var X=C.length/o.length,W=P===1?o:o.map((ne,oe)=>{var K=Math.floor(oe*X);if(C[K]){var U=C[K];return vo(vo({},ne),{},{x:la(U.x,ne.x,P),y:la(U.y,ne.y,P)})}return p?vo(vo({},ne),{},{x:la(x*2,ne.x,P),y:la(v/2,ne.y,P)}):vo(vo({},ne),{},{x:ne.x,y:ne.y})});return r.current=W,h.createElement(e7,{props:a,points:W,clipPathId:t,pathRef:s,strokeDasharray:Q})}return h.createElement(e7,{props:a,points:o,clipPathId:t,pathRef:s,strokeDasharray:Q})}),h.createElement(cD,{label:a.label}))}function z5e(e){var{clipPathId:t,props:a}=e,s=h.useRef(null),r=h.useRef(0),i=h.useRef(null);return h.createElement(R5e,{props:a,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var U5e=(e,t)=>{var a,s;return{x:(a=e.x)!==null&&a!==void 0?a:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:Hn(e.payload,t)}};class F5e extends h.Component{render(){var{hide:t,dot:a,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:d,height:u,id:f,needClip:p,zIndex:x}=this.props;if(t)return null;var v=Pt("recharts-line",r),N=f,{r:b,strokeWidth:C}=n5e(a),w=pX(a),S=b*2+C,A=p?"url(#clipPath-".concat(w?"":"dots-").concat(N,")"):void 0;return h.createElement(vr,{zIndex:x},h.createElement(ps,{className:v},p&&h.createElement("defs",null,h.createElement(kX,{clipPathId:N,xAxisId:i,yAxisId:o}),!w&&h.createElement("clipPath",{id:"clipPath-dots-".concat(N)},h.createElement("rect",{x:c-S/2,y:l-S/2,width:d+S,height:u+S}))),h.createElement(EX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:U5e,errorBarOffset:0},h.createElement(z5e,{props:this.props,clipPathId:N}))),h.createElement(z3e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:A}))}}var IX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ha.line,type:"linear"};function B5e(e){var t=Va(e,IX),{activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:x,yAxisId:v,id:N}=t,b=CD(t,_5e),{needClip:C}=jD(x,v),w=bD(),S=ah(),A=Us(),k=Rt(R=>t5e(R,x,v,A,N));if(S!=="horizontal"&&S!=="vertical"||k==null||w==null)return null;var{height:_,width:E,x:T,y:M}=w;return h.createElement(F5e,zp({},b,{id:N,connectNulls:l,dot:c,activeDot:a,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:x,yAxisId:v,points:k,layout:S,height:_,width:E,left:T,top:M,needClip:C}))}function H5e(e){var{layout:t,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((d,u)=>{var f=Hn(d,o);if(t==="horizontal"){var p=_z({axis:a,ticks:r,bandSize:l,entry:d,index:u}),x=ua(f)?null:s.scale(f);return{x:p,y:x,value:f,payload:d}}var v=ua(f)?null:a.scale(f),N=_z({axis:s,ticks:i,bandSize:l,entry:d,index:u});return v==null||N==null?null:{x:v,y:N,value:f,payload:d}}).filter(Boolean)}function q5e(e){var t=Va(e,IX),a=Us();return h.createElement(yD,{id:t.id,type:"line"},s=>h.createElement(h.Fragment,null,h.createElement(xX,{legendPayload:L5e(t)}),h.createElement(P5e,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),h.createElement(bX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),h.createElement(B5e,zp({},t,{id:s}))))}var hk=h.memo(q5e,Fj);hk.displayName="Line";function Ju(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&a!==void 0?a:wX}function em(e,t){var a,s;return(a=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&a!==void 0?a:wX}var G5e="Invariant failed";function W5e(e,t){throw new Error(G5e)}function gk(){return gk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gk.apply(null,arguments)}function fw(e){return h.createElement(fD,gk({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var V5e=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(It(t))return t;var i=It(s)||ua(s);return i?t(s,r):(i||W5e(),a)}},Q5e=(e,t,a)=>a,Y5e=(e,t)=>t,s0=rt([kj,Y5e],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),K5e=rt([s0],e=>e?.maxBarSize),X5e=(e,t,a,s)=>s,Z5e=rt([wn,kj,Ju,em,Q5e],(e,t,a,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===a:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),J5e=(e,t,a)=>{var s=wn(e),r=Ju(e,t),i=em(e,t);if(!(r==null||i==null))return s==="horizontal"?rk(e,"yAxis",i,a):rk(e,"xAxis",r,a)},eMe=(e,t)=>{var a=wn(e),s=Ju(e,t),r=em(e,t);if(!(s==null||r==null))return a==="horizontal"?UU(e,"xAxis",s):UU(e,"yAxis",r)},tMe=rt([Z5e,CEe,eMe],U3e),nMe=(e,t,a)=>{var s,r,i=s0(e,t);if(i!=null){var o=Ju(e,t),l=em(e,t);if(!(o==null||l==null)){var c=wn(e),d=HY(e),{maxBarSize:u}=i,f=ua(u)?d:u,p,x;return c==="horizontal"?(p=ud(e,"xAxis",o,a),x=dd(e,"xAxis",o,a)):(p=ud(e,"yAxis",l,a),x=dd(e,"yAxis",l,a)),(s=(r=Mf(p,x,!0))!==null&&r!==void 0?r:f)!==null&&s!==void 0?s:0}}},$X=(e,t,a)=>{var s=wn(e),r=Ju(e,t),i=em(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=ud(e,"xAxis",r,a),l=dd(e,"xAxis",r,a)):(o=ud(e,"yAxis",i,a),l=dd(e,"yAxis",i,a)),Mf(o,l)}},aMe=rt([tMe,HY,jEe,qY,nMe,$X,K5e],G3e),sMe=(e,t,a)=>{var s=Ju(e,t);if(s!=null)return ud(e,"xAxis",s,a)},rMe=(e,t,a)=>{var s=em(e,t);if(s!=null)return ud(e,"yAxis",s,a)},iMe=(e,t,a)=>{var s=Ju(e,t);if(s!=null)return dd(e,"xAxis",s,a)},oMe=(e,t,a)=>{var s=em(e,t);if(s!=null)return dd(e,"yAxis",s,a)},lMe=rt([aMe,s0],(e,t)=>{if(!(e==null||t==null)){var a=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),cMe=rt([J5e,s0],W3e),dMe=rt([is,fP,sMe,rMe,iMe,oMe,lMe,wn,uEe,$X,cMe,s0,X5e],(e,t,a,s,r,i,o,l,c,d,u,f,p)=>{var{chartData:x,dataStartIndex:v,dataEndIndex:N}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||a==null||s==null||r==null||i==null||d==null)){var{data:b}=f,C;if(b!=null&&b.length>0?C=b:C=x?.slice(v,N+1),C!=null)return zMe({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:d,xAxis:a,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:u,displayedData:C,offset:e,cells:p,dataStartIndex:v})}}),uMe=["index"];function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},pk.apply(null,arguments)}function mMe(e,t){if(e==null)return{};var a,s,r=fMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function fMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var RX=h.createContext(void 0),hMe=e=>{var t=h.useContext(RX);if(t!=null)return t.stackId;if(e!=null)return D_e(e)},gMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),pMe=e=>{var t=h.useContext(RX);if(t!=null){var{stackId:a}=t;return"url(#".concat(gMe(a,e),")")}},xMe=e=>{var{index:t}=e,a=mMe(e,uMe),s=pMe(t);return h.createElement(ps,pk({className:"recharts-bar-stack-layer",clipPath:s},a))},yMe=["onMouseEnter","onMouseLeave","onClick"],bMe=["value","background","tooltipPosition"],vMe=["id"],wMe=["onMouseEnter","onClick","onMouseLeave"];function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Vl.apply(null,arguments)}function t7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function Bs(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?t7(Object(a),!0).forEach(function(s){NMe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function NMe(e,t,a){return(t=jMe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function jMe(e){var t=CMe(e,"string");return typeof t=="symbol"?t:t+""}function CMe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hw(e,t){if(e==null)return{};var a,s,r=SMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function SMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var _Me=e=>{var{dataKey:t,name:a,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:nh(a,t),payload:e}]},AMe=h.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:d}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:nh(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:d}};return h.createElement(xD,{tooltipEntrySettings:u})});function TMe(e){var t=Rt(md),{data:a,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,d=hw(i,yMe),u=hD(o,s,i.id),f=gD(l),p=pD(c,s,i.id);if(!r||a==null)return null;var x=Du(r);return h.createElement(vr,{zIndex:V3e(r,Ha.barBackground)},a.map((v,N)=>{var{value:b,background:C,tooltipPosition:w}=v,S=hw(v,bMe);if(!C)return null;var A=u(v,N),k=f(v,N),_=p(v,N),E=Bs(Bs(Bs(Bs(Bs({option:r,isActive:String(N)===t},S),{},{fill:"#eee"},C),x),Fx(d,v,N)),{},{onMouseEnter:A,onMouseLeave:k,onClick:_,dataKey:s,index:N,className:"recharts-bar-background-rectangle"});return h.createElement(fw,Vl({key:"background-bar-".concat(N)},E))}))}function EMe(e){var{showLabels:t,children:a,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Bs(Bs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return h.createElement(lX,{value:t?r:void 0},a)}function kMe(e){var{shape:t,activeBar:a,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Rt(md),c=Rt(nD),d=a&&String(i)===l&&(c==null||o===c),u=d?a:t;return d?h.createElement(vr,{zIndex:Ha.activeBar},h.createElement(fw,Vl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))):h.createElement(fw,Vl({},s,{name:String(s.name)},r,{isActive:d,option:u,index:i,dataKey:o}))}function LMe(e){var{shape:t,baseProps:a,entry:s,index:r,dataKey:i}=e;return h.createElement(fw,Vl({},a,{name:String(a.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function PMe(e){var t,{data:a,props:s}=e,r=(t=Ur(s))!==null&&t!==void 0?t:{},{id:i}=r,o=hw(r,vMe),{shape:l,dataKey:c,activeBar:d}=s,{onMouseEnter:u,onClick:f,onMouseLeave:p}=s,x=hw(s,wMe),v=hD(u,c,i),N=gD(p),b=pD(f,c,i);return a?h.createElement(h.Fragment,null,a.map((C,w)=>h.createElement(xMe,Vl({index:w,key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(w),className:"recharts-bar-rectangle"},Fx(x,C,w),{onMouseEnter:v(C,w),onMouseLeave:N(C,w),onClick:b(C,w)}),d?h.createElement(kMe,{shape:l,activeBar:d,baseProps:o,entry:C,index:w,dataKey:c}):h.createElement(LMe,{shape:l,baseProps:o,entry:C,index:w,dataKey:c})))):null}function DMe(e){var{props:t,previousRectanglesRef:a}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:d,onAnimationStart:u}=t,f=a.current,p=Qx(t,"recharts-bar-"),[x,v]=h.useState(!1),N=!x,b=h.useCallback(()=>{typeof d=="function"&&d(),v(!1)},[d]),C=h.useCallback(()=>{typeof u=="function"&&u(),v(!0)},[u]);return h.createElement(EMe,{showLabels:N,rects:s},h.createElement(Vx,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:C,key:p},w=>{var S=w===1?s:s?.map((A,k)=>{var _=f&&f[k];if(_)return Bs(Bs({},A),{},{x:la(_.x,A.x,w),y:la(_.y,A.y,w),width:la(_.width,A.width,w),height:la(_.height,A.height,w)});if(r==="horizontal"){var E=la(0,A.height,w),T=la(A.stackedBarStart,A.y,w);return Bs(Bs({},A),{},{y:T,height:E})}var M=la(0,A.width,w),R=la(A.stackedBarStart,A.x,w);return Bs(Bs({},A),{},{width:M,x:R})});return w>0&&(a.current=S??null),S==null?null:h.createElement(ps,null,h.createElement(PMe,{props:t,data:S}))}),h.createElement(cD,{label:t.label}),t.children)}function OMe(e){var t=h.useRef(null);return h.createElement(DMe,{previousRectanglesRef:t,props:e})}var zX=0,MMe=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:Hn(e,t)}};class IMe extends h.PureComponent{render(){var{hide:t,data:a,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:d}=this.props;if(t||a==null)return null;var u=Pt("recharts-bar",r),f=d;return h.createElement(ps,{className:u,id:d},l&&h.createElement("defs",null,h.createElement(kX,{clipPathId:f,xAxisId:i,yAxisId:o})),h.createElement(ps,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},h.createElement(TMe,{data:a,dataKey:s,background:c,allOtherBarProps:this.props}),h.createElement(OMe,this.props)))}}var $Me={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:zX,xAxisId:0,yAxisId:0,zIndex:Ha.bar};function RMe(e){var{xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u}=e,{needClip:f}=jD(t,a),p=ah(),x=Us(),v=mD(e.children,Ij),N=Rt(w=>dMe(w,e.id,x,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,C=N?.[0];return C==null||C.height==null||C.width==null?b=0:b=p==="vertical"?C.height/2:C.width/2,h.createElement(EX,{xAxisId:t,yAxisId:a,data:N,dataPointFormatter:MMe,errorBarOffset:b},h.createElement(IMe,Vl({},e,{layout:p,needClip:f,data:N,xAxisId:t,yAxisId:a,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:d,isAnimationActive:u})))}function zMe(e){var{layout:t,barSettings:{dataKey:a,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:d,stackedData:u,displayedData:f,offset:p,cells:x,parentViewBox:v,dataStartIndex:N}=e,b=t==="horizontal"?l:o,C=u?b.scale.domain():null,w=O_e({numericAxis:b}),S=b.scale(w);return f.map((A,k)=>{var _,E,T,M,R,z;if(u){var P=u[k+N];if(P==null)return null;_=T_e(P,C)}else _=Hn(A,a),Array.isArray(_)||(_=[w,_]);var I=V5e(s,zX)(_[1],k);if(t==="horizontal"){var q,[Q,V]=[l.scale(_[0]),l.scale(_[1])];E=Az({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:A,index:k}),T=(q=V??Q)!==null&&q!==void 0?q:void 0,M=r.size;var X=Q-V;if(R=Qi(X)?0:X,z={x:E,y:p.top,width:M,height:p.height},Math.abs(I)>0&&Math.abs(R)<Math.abs(I)){var W=gs(R||I)*(Math.abs(I)-Math.abs(R));T-=W,R+=W}}else{var[ne,oe]=[o.scale(_[0]),o.scale(_[1])];if(E=ne,T=Az({axis:l,ticks:d,bandSize:i,offset:r.offset,entry:A,index:k}),M=oe-ne,R=r.size,z={x:p.left,y:T,width:p.width,height:R},Math.abs(I)>0&&Math.abs(M)<Math.abs(I)){var K=gs(M||I)*(Math.abs(I)-Math.abs(M));M+=K}}if(E==null||T==null||M==null||R==null)return null;var U=Bs(Bs({},A),{},{stackedBarStart:S,x:E,y:T,width:M,height:R,value:u?_:_[1],payload:A,background:z,tooltipPosition:{x:E+M/2,y:T+R/2},parentViewBox:v},x&&x[k]&&x[k].props);return U}).filter(Boolean)}function UMe(e){var t=Va(e,$Me),a=hMe(t.stackId),s=Us();return h.createElement(yD,{id:t.id,type:"bar"},r=>h.createElement(h.Fragment,null,h.createElement(xX,{legendPayload:_Me(t)}),h.createElement(AMe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),h.createElement(bX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:a,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),h.createElement(vr,{zIndex:t.zIndex},h.createElement(RMe,Vl({},t,{id:r})))))}var xk=h.memo(UMe,Fj);xk.displayName="Bar";var FMe=["domain","range"],BMe=["domain","range"];function n7(e,t){if(e==null)return{};var a,s,r=HMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function HMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function a7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function UX(e,t){if(e===t)return!0;var{domain:a,range:s}=e,r=n7(e,FMe),{domain:i,range:o}=t,l=n7(t,BMe);return!a7(a,i)||!a7(s,o)?!1:Fj(r,l)}var qMe=["dangerouslySetInnerHTML","ticks","scale"],GMe=["id","scale"];function yk(){return yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},yk.apply(null,arguments)}function s7(e,t){if(e==null)return{};var a,s,r=WMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function WMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function VMe(e){var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(C3e(e)):a.current!==e&&t(S3e({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(_3e(a.current)),a.current=null)},[t]),null}var QMe=e=>{var{xAxisId:t,className:a}=e,s=Rt(fP),r=Us(),i="xAxis",o=Rt(C=>NK(C,i,t,r)),l=Rt(C=>yK(C,t)),c=Rt(C=>wke(C,t)),d=Rt(C=>JY(C,t));if(l==null||c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:f,scale:p}=e,x=s7(e,qMe),{id:v,scale:N}=d,b=s7(d,GMe);return h.createElement(ND,yk({},x,b,{x:c.x,y:c.y,width:l.width,height:l.height,className:Pt("recharts-".concat(i," ").concat(i),a),viewBox:s,ticks:o,axisType:i}))},YMe={allowDataOverflow:ds.allowDataOverflow,allowDecimals:ds.allowDecimals,allowDuplicatedCategory:ds.allowDuplicatedCategory,angle:ds.angle,axisLine:Pl.axisLine,height:ds.height,hide:!1,includeHidden:ds.includeHidden,interval:ds.interval,minTickGap:ds.minTickGap,mirror:ds.mirror,orientation:ds.orientation,padding:ds.padding,reversed:ds.reversed,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,tickLine:Pl.tickLine,tickSize:Pl.tickSize,type:ds.type,xAxisId:0},KMe=e=>{var t=Va(e,YMe);return h.createElement(h.Fragment,null,h.createElement(VMe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),h.createElement(QMe,t))},bk=h.memo(KMe,UX);bk.displayName="XAxis";var XMe=["dangerouslySetInnerHTML","ticks","scale"],ZMe=["id","scale"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},vk.apply(null,arguments)}function r7(e,t){if(e==null)return{};var a,s,r=JMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function JMe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function eIe(e){var t=Xn(),a=h.useRef(null);return h.useLayoutEffect(()=>{a.current===null?t(A3e(e)):a.current!==e&&t(T3e({prev:a.current,next:e})),a.current=e},[e,t]),h.useLayoutEffect(()=>()=>{a.current&&(t(E3e(a.current)),a.current=null)},[t]),null}var tIe=e=>{var{yAxisId:t,className:a,width:s,label:r}=e,i=h.useRef(null),o=h.useRef(null),l=Rt(fP),c=Us(),d=Xn(),u="yAxis",f=Rt(_=>bK(_,t)),p=Rt(_=>jke(_,t)),x=Rt(_=>NK(_,u,t,c)),v=Rt(_=>eK(_,t));if(h.useLayoutEffect(()=>{if(!(s!=="auto"||!f||lD(r)||h.isValidElement(r)||v==null)){var _=i.current;if(_){var E=_.getCalculatedWidth();Math.round(f.width)!==Math.round(E)&&d(k3e({id:t,width:E}))}}},[x,f,d,r,t,s,v]),f==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:N,ticks:b,scale:C}=e,w=r7(e,XMe),{id:S,scale:A}=v,k=r7(v,ZMe);return h.createElement(ND,vk({},w,k,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:f.width,height:f.height,className:Pt("recharts-".concat(u," ").concat(u),a),viewBox:l,ticks:x,axisType:u}))},nIe={allowDataOverflow:us.allowDataOverflow,allowDecimals:us.allowDecimals,allowDuplicatedCategory:us.allowDuplicatedCategory,angle:us.angle,axisLine:Pl.axisLine,hide:!1,includeHidden:us.includeHidden,interval:us.interval,minTickGap:us.minTickGap,mirror:us.mirror,orientation:us.orientation,padding:us.padding,reversed:us.reversed,scale:us.scale,tick:us.tick,tickCount:us.tickCount,tickLine:Pl.tickLine,tickSize:Pl.tickSize,type:us.type,width:us.width,yAxisId:0},aIe=e=>{var t=Va(e,nIe);return h.createElement(h.Fragment,null,h.createElement(eIe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),h.createElement(tIe,t))},wk=h.memo(aIe,UX);wk.displayName="YAxis";var sIe=(e,t)=>t,SD=rt([sIe,wn,XY,os,RK,oc,zLe,is],WLe),_D=e=>{var t=e.currentTarget.getBoundingClientRect(),a=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/a),chartY:Math.round((e.clientY-t.top)/s)}},FX=bi("mouseClick"),BX=qx();BX.startListening({actionCreator:FX,effect:(e,t)=>{var a=e.payload,s=SD(t.getState(),_D(a));s?.activeIndex!=null&&t.dispatch($ke({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var Nk=bi("mouseMove"),HX=qx(),tb=null;HX.startListening({actionCreator:Nk,effect:(e,t)=>{var a=e.payload;tb!==null&&cancelAnimationFrame(tb);var s=_D(a);tb=requestAnimationFrame(()=>{var r=t.getState(),i=KP(r,r.tooltip.settings.shared);if(i==="axis"){var o=SD(r,s);o?.activeIndex!=null?t.dispatch(kK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(EK())}tb=null})}});function rIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var i7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},qX=br({name:"rootProps",initialState:i7,reducers:{updateOptions:(e,t)=>{var a;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(a=t.payload.barGap)!==null&&a!==void 0?a:i7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),iIe=qX.reducer,{updateOptions:oIe}=qX.actions,GX=br({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:lIe}=GX.actions,cIe=GX.reducer,WX=bi("keyDown"),VX=bi("focus"),AD=qx();AD.startListening({actionCreator:WX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=XP(r,uh(a),Jx(a),n0(a)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=oc(a);if(i==="Enter"){var d=ow(a,"axis","hover",String(r.index));t.dispatch(ok({active:!r.active,activeIndex:r.index,activeCoordinate:d}));return}var u=Ake(a),f=u==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*f;if(!(c==null||x>=c.length||x<0)){var v=ow(a,"axis","hover",String(x));t.dispatch(ok({active:!0,activeIndex:x.toString(),activeCoordinate:v}))}}}}}});AD.startListening({actionCreator:VX,effect:(e,t)=>{var a=t.getState(),s=a.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=a.tooltip;if(!r.active&&r.index==null){var i="0",o=ow(a,"axis","hover",String(i));t.dispatch(ok({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var ri=bi("externalEvent"),QX=qx(),I_=new Map;QX.startListening({actionCreator:ri,effect:(e,t)=>{var{handler:a,reactEvent:s}=e.payload;if(a!=null){s.persist();var r=s.type,i=I_.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:jLe(l),activeDataKey:nD(l),activeIndex:md(l),activeLabel:FK(l),activeTooltipIndex:md(l),isTooltipActive:CLe(l)};a(c,s)}finally{I_.delete(r)}});I_.set(r,o)}}});var dIe=rt([ch],e=>e.tooltipItemPayloads),uIe=rt([dIe,t0,(e,t)=>t,(e,t,a)=>a],(e,t,a,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,a);return o}}}),YX=bi("touchMove"),KX=qx();KX.startListening({actionCreator:YX,effect:(e,t)=>{var a=e.payload;if(!(a.touches==null||a.touches.length===0)){var s=t.getState(),r=KP(s,s.tooltip.settings.shared);if(r==="axis"){var i=a.touches[0];if(i==null)return;var o=SD(s,_D({clientX:i.clientX,clientY:i.clientY,currentTarget:a.currentTarget}));o?.activeIndex!=null&&t.dispatch(kK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=a.touches[0];if(document.elementFromPoint==null||c==null)return;var d=document.elementFromPoint(c.clientX,c.clientY);if(!d||!d.getAttribute)return;var u=d.getAttribute(eY),f=(l=d.getAttribute(tY))!==null&&l!==void 0?l:void 0,p=dh(s).find(N=>N.id===f);if(u==null||p==null||f==null)return;var{dataKey:x}=p,v=uIe(s,u,f);t.dispatch(TK({activeDataKey:x,activeIndex:u,activeCoordinate:v,activeGraphicalItemId:f}))}}}});var mIe=NQ({brush:Q3e,cartesianAxis:L3e,chartData:j4e,errorBars:GOe,graphicalItems:$De,layout:N_e,legend:kAe,options:y4e,polarAxis:eDe,polarOptions:cIe,referenceElements:tOe,rootProps:iIe,tooltip:Rke,zIndex:i4e}),fIe=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return V2e({reducer:mIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([BX.middleware,HX.middleware,AD.middleware,QX.middleware,KX.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat($Q({type:"raf"}))},devTools:{serialize:{replacer:rIe},name:"recharts-".concat(a)}})};function XX(e){var{preloadedState:t,children:a,reduxStoreName:s}=e,r=Us(),i=h.useRef(null);if(r)return a;i.current==null&&(i.current=fIe(t,s));var o=sP;return h.createElement(w5e,{context:o,store:i.current},a)}function hIe(e){var{layout:t,margin:a}=e,s=Xn(),r=Us();return h.useEffect(()=>{r||(s(b_e(t)),s(y_e(a)))},[s,r,t,a]),null}var ZX=h.memo(hIe,Fj);function JX(e){var t=Xn();return h.useEffect(()=>{t(oIe(e))},[t,e]),null}function o7(e){var{zIndex:t,isPanorama:a}=e,s=h.useRef(null),r=Xn();return h.useLayoutEffect(()=>(s.current&&r(s4e({zIndex:t,element:s.current,isPanorama:a})),()=>{r(r4e({zIndex:t,isPanorama:a}))}),[r,t,a]),h.createElement("g",{tabIndex:-1,ref:s})}function l7(e){var{children:t,isPanorama:a}=e,s=Rt(QLe);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return h.createElement(h.Fragment,null,r.map(o=>h.createElement(o7,{key:o,zIndex:o,isPanorama:a})),t,i.map(o=>h.createElement(o7,{key:o,zIndex:o,isPanorama:a})))}var gIe=["children"];function pIe(e,t){if(e==null)return{};var a,s,r=xIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function xIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}function gw(){return gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},gw.apply(null,arguments)}var yIe={width:"100%",height:"100%",display:"block"},bIe=h.forwardRef((e,t)=>{var a=gP(),s=pP(),r=yY();if(!Uo(a)||!Uo(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=r?0:void 0,typeof o.role=="string"?u=o.role:u=r?"application":void 0),h.createElement(X4,gw({},o,{title:l,desc:c,role:u,tabIndex:d,width:a,height:s,style:yIe,ref:t}),i)}),vIe=e=>{var{children:t}=e,a=Rt(xj);if(!a)return null;var{width:s,height:r,y:i,x:o}=a;return h.createElement(X4,{width:s,height:r,x:o,y:i},t)},c7=h.forwardRef((e,t)=>{var{children:a}=e,s=pIe(e,gIe),r=Us();return r?h.createElement(vIe,null,h.createElement(l7,{isPanorama:!0},a)):h.createElement(bIe,gw({ref:t},s),h.createElement(l7,{isPanorama:!1},a))});function wIe(){var e=Xn(),[t,a]=h.useState(null),s=Rt(U_e);return h.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;ga(i)&&i!==s&&e(w_e(i))}},[t,e,s]),a}function d7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function NIe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?d7(Object(a),!0).forEach(function(s){jIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function jIe(e,t,a){return(t=CIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function CIe(e){var t=SIe(e,"string");return typeof t=="symbol"?t:t+""}function SIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uu(){return Uu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Uu.apply(null,arguments)}var _Ie=()=>(P4e(),null);function pw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var AIe=h.forwardRef((e,t)=>{var a,s,r=h.useRef(null),[i,o]=h.useState({containerWidth:pw((a=e.style)===null||a===void 0?void 0:a.width),containerHeight:pw((s=e.style)===null||s===void 0?void 0:s.height)}),l=h.useCallback((d,u)=>{o(f=>{var p=Math.round(d),x=Math.round(u);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),c=h.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null&&typeof ResizeObserver<"u"){var{width:u,height:f}=d.getBoundingClientRect();l(u,f);var p=v=>{var{width:N,height:b}=v[0].contentRect;l(N,b)},x=new ResizeObserver(p);x.observe(d),r.current=x}},[t,l]);return h.useEffect(()=>()=>{var d=r.current;d?.disconnect()},[l]),h.createElement(h.Fragment,null,h.createElement(bj,{width:i.containerWidth,height:i.containerHeight}),h.createElement("div",Uu({ref:c},e)))}),TIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e,[r,i]=h.useState({containerWidth:pw(a),containerHeight:pw(s)}),o=h.useCallback((c,d)=>{i(u=>{var f=Math.round(c),p=Math.round(d);return u.containerWidth===f&&u.containerHeight===p?u:{containerWidth:f,containerHeight:p}})},[]),l=h.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:u}=c.getBoundingClientRect();o(d,u)}},[t,o]);return h.createElement(h.Fragment,null,h.createElement(bj,{width:r.containerWidth,height:r.containerHeight}),h.createElement("div",Uu({ref:l},e)))}),EIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return h.createElement(h.Fragment,null,h.createElement(bj,{width:a,height:s}),h.createElement("div",Uu({ref:t},e)))}),kIe=h.forwardRef((e,t)=>{var{width:a,height:s}=e;return ql(a)||ql(s)?h.createElement(TIe,Uu({},e,{ref:t})):h.createElement(EIe,Uu({},e,{ref:t}))});function LIe(e){return e===!0?AIe:kIe}var PIe=h.forwardRef((e,t)=>{var{children:a,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:x,onTouchMove:v,onTouchStart:N,style:b,width:C,responsive:w,dispatchTouchEvents:S=!0}=e,A=h.useRef(null),k=Xn(),[_,E]=h.useState(null),[T,M]=h.useState(null),R=wIe(),z=hP(),P=z?.width>0?z.width:C,I=z?.height>0?z.height:r,q=h.useCallback(he=>{R(he),typeof t=="function"&&t(he),E(he),M(he),he!=null&&(A.current=he)},[R,t,E,M]),Q=h.useCallback(he=>{k(FX(he)),k(ri({handler:i,reactEvent:he}))},[k,i]),V=h.useCallback(he=>{k(Nk(he)),k(ri({handler:d,reactEvent:he}))},[k,d]),X=h.useCallback(he=>{k(EK()),k(ri({handler:u,reactEvent:he}))},[k,u]),W=h.useCallback(he=>{k(Nk(he)),k(ri({handler:f,reactEvent:he}))},[k,f]),ne=h.useCallback(()=>{k(VX())},[k]),oe=h.useCallback(he=>{k(WX(he.key))},[k]),K=h.useCallback(he=>{k(ri({handler:o,reactEvent:he}))},[k,o]),U=h.useCallback(he=>{k(ri({handler:l,reactEvent:he}))},[k,l]),ye=h.useCallback(he=>{k(ri({handler:c,reactEvent:he}))},[k,c]),pe=h.useCallback(he=>{k(ri({handler:p,reactEvent:he}))},[k,p]),Ne=h.useCallback(he=>{k(ri({handler:N,reactEvent:he}))},[k,N]),Se=h.useCallback(he=>{S&&k(YX(he)),k(ri({handler:v,reactEvent:he}))},[k,S,v]),Oe=h.useCallback(he=>{k(ri({handler:x,reactEvent:he}))},[k,x]),ke=LIe(w);return h.createElement(QK.Provider,{value:_},h.createElement(tQ.Provider,{value:T},h.createElement(ke,{width:P??b?.width,height:I??b?.height,className:Pt("recharts-wrapper",s),style:NIe({position:"relative",cursor:"default",width:P,height:I},b),onClick:Q,onContextMenu:K,onDoubleClick:U,onFocus:ne,onKeyDown:oe,onMouseDown:ye,onMouseEnter:V,onMouseLeave:X,onMouseMove:W,onMouseUp:pe,onTouchEnd:Oe,onTouchMove:Se,onTouchStart:Ne,ref:q},h.createElement(_Ie,null),a)))}),DIe=["width","height","responsive","children","className","style","compact","title","desc"];function OIe(e,t){if(e==null)return{};var a,s,r=MIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function MIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var eZ=h.forwardRef((e,t)=>{var{width:a,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:d,desc:u}=e,f=OIe(e,DIe),p=Ur(f);return c?h.createElement(h.Fragment,null,h.createElement(bj,{width:a,height:s}),h.createElement(c7,{otherAttributes:p,title:d,desc:u},i)):h.createElement(PIe,{className:o,style:l,width:a,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},h.createElement(c7,{otherAttributes:p,title:d,desc:u,ref:t},h.createElement(aOe,null,i)))});function jk(){return jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},jk.apply(null,arguments)}var IIe={top:5,right:5,bottom:5,left:5},$Ie={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:IIe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},tZ=h.forwardRef(function(t,a){var s,r=Va(t.categoricalChartProps,$Ie),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return h.createElement(XX,{preloadedState:{options:u},reduxStoreName:(s=d.id)!==null&&s!==void 0?s:i},h.createElement(jX,{chartData:d.data}),h.createElement(ZX,{layout:r.layout,margin:r.margin}),h.createElement(JX,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(eZ,jk({},r,{ref:a})))}),RIe=["axis"],zIe=h.forwardRef((e,t)=>h.createElement(tZ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RIe,tooltipPayloadSearcher:oD,categoricalChartProps:e,ref:t})),UIe=["axis","item"],FIe=h.forwardRef((e,t)=>h.createElement(tZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:UIe,tooltipPayloadSearcher:oD,categoricalChartProps:e,ref:t}));function BIe(e){var t=Xn();return h.useEffect(()=>{t(lIe(e))},[t,e]),null}var HIe=["layout"];function Ck(){return Ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Ck.apply(null,arguments)}function qIe(e,t){if(e==null)return{};var a,s,r=GIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function GIe(e,t){if(e==null)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;a[s]=e[s]}return a}var WIe={top:5,right:5,bottom:5,left:5},nZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:WIe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},VIe=h.forwardRef(function(t,a){var s,r=Va(t.categoricalChartProps,nZ),{layout:i}=r,o=qIe(r,HIe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:u,eventEmitter:void 0};return h.createElement(XX,{preloadedState:{options:f},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},h.createElement(jX,{chartData:r.data}),h.createElement(ZX,{layout:i,margin:r.margin}),h.createElement(JX,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),h.createElement(BIe,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),h.createElement(eZ,Ck({},o,{ref:a})))});function u7(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,s)}return a}function m7(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?u7(Object(a),!0).forEach(function(s){QIe(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u7(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function QIe(e,t,a){return(t=YIe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function YIe(e){var t=KIe(e,"string");return typeof t=="symbol"?t:t+""}function KIe(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var s=a.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XIe=["item"],ZIe=m7(m7({},nZ),{},{layout:"centric",startAngle:0,endAngle:360}),JIe=h.forwardRef((e,t)=>{var a=Va(e,ZIe);return h.createElement(VIe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:XIe,tooltipPayloadSearcher:oD,categoricalChartProps:a,ref:t})});const f7={user_id:"",start_date:"",end_date:"",target_amount:"",period_type:"CUSTOM",period_year:new Date().getFullYear(),period_number:1},e$e=[{value:"MONTHLY",label:"Monthly"},{value:"QUARTERLY",label:"Quarterly"},{value:"SEMIANNUAL",label:"Semi-Annual"},{value:"ANNUAL",label:"Annual"},{value:"CUSTOM",label:"Custom"}],h7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function t$e({name:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=t.find(C=>String(C.id)===String(a)),v=x?r(x):"",N=o&&l&&!a,b=h.useMemo(()=>{const C=u.toLowerCase();return C?t.filter(w=>r(w).toLowerCase().includes(C)):t},[t,u,r]);return h.useEffect(()=>{const C=w=>{p.current&&!p.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),n.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[n.jsx("input",{value:c?u:v,placeholder:i,onFocus:()=>d(!0),onChange:C=>{f(C.target.value),d(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${N?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&n.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(C=>n.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(C.id)}}),d(!1),f("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(C)},C.id)):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function Bj({currentUserRole:e,currentUserId:t}){const{user:a,mutate:s}=en(),r=a?.company?.currency||"",i=r==="$"?Kde:Zde;h.useEffect(()=>{s&&s()},[s]),h.useEffect(()=>{a?.company&&console.log("Dashboard detected Company Settings:",a.company)},[a]),h.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(!1),[p,x]=h.useState(""),[v,N]=h.useState(1),[b,C]=h.useState(10),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(f7),[P,I]=h.useState(null),[q,Q]=h.useState(null),[V,X]=h.useState(!1),[W,ne]=h.useState([]),[oe,K]=h.useState(!1),[U,ye]=h.useState("annual"),[pe,Ne]=h.useState(1),[Se,Oe]=h.useState("overview"),[ke,he]=h.useState(null),[qe,Ce]=h.useState(!1),[xe,ee]=h.useState(null),[Ee,Ae]=h.useState(!1),[Re,et]=h.useState(null),[De,tt]=h.useState(null),[Je,H]=h.useState(new Date().getFullYear()),[be,le]=h.useState(""),[Z,_e]=h.useState(1),te=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Ue=h.useMemo(()=>["CEO","ADMIN","GROUP MANAGER","MANAGER"].includes(e?.toUpperCase()),[e]),Ie=h.useCallback(async()=>{f(!0);try{const ge=await ae.get("/targets/admin/fetch-all");l(ge.data)}catch(ge){console.error(ge),G.error("Failed to load targets.")}finally{f(!1)}},[]),Ge=h.useCallback(async()=>{try{if(te){const ge=await ae.get("/targets/admin/get-users");d(ge.data)}}catch(ge){console.error(ge)}},[te]),gt=h.useCallback(async()=>{try{const ge=await ae.get("/targets/fiscal-settings");tt(ge.data)}catch(ge){console.error("Failed to fetch fiscal settings:",ge)}},[]),ve=h.useCallback(async()=>{Ce(!0);try{const ge=new URLSearchParams;be&&ge.append("period_type",be),Je&&ge.append("period_year",Je),Z&&ge.append("period_number",Z);const fe=await ae.get(`/targets/leaderboard?${ge.toString()}`);he(fe.data)}catch(ge){console.error(ge),G.error("Failed to load leaderboard.")}finally{Ce(!1)}},[be,Je,Z]),Be=h.useCallback(async()=>{try{const ge=new URLSearchParams;be&&ge.append("period_type",be),Je&&ge.append("period_year",Je),Z&&ge.append("period_number",Z);const fe=await ae.get(`/targets/team-summary?${ge.toString()}`);et(fe.data)}catch(ge){console.error(ge)}},[be,Je,Z]),nt=h.useCallback(async ge=>{Ae(!0);try{const fe=await ae.get(`/targets/history/${ge}`);ee(fe.data)}catch(fe){console.error(fe),G.error("Failed to load user history.")}finally{Ae(!1)}},[]);h.useEffect(()=>{Ie(),Ge(),gt()},[Ie,Ge,gt]),h.useEffect(()=>{Se==="leaderboard"&&(ve(),Be())},[Se,ve,Be]);const Te=h.useMemo(()=>{const ge=o.reduce((pt,Nt)=>pt+(Number(Nt.target_amount)||0),0),fe=o.reduce((pt,Nt)=>pt+(Number(Nt.achieved_amount)||0),0),Fe=ge>0?(fe/ge*100).toFixed(1):0,Xe=Math.max(0,ge-fe);return{totalTarget:ge,totalAchieved:fe,achievement:Fe,remaining:Xe,totalCount:o.length}},[o]),Qe=h.useCallback(()=>(fe=>U==="annual"?fe:fe.filter(Fe=>{const Xe=new Date(Fe.start_date),pt=new Date(Fe.end_date),Nt=Xe.getMonth(),St=pt.getMonth();let Ht=!1;if(U==="semiannual")pe===1?Ht=Nt<=5&&St>=0:Ht=Nt<=11&&St>=6;else if(U==="trimester"){const cn=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][pe-1];Ht=Nt<=cn.end&&St>=cn.start}else if(U==="quarterly"){const cn=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][pe-1];Ht=Nt<=cn.end&&St>=cn.start}return Ht}))(o),[o,U,pe]),ct=h.useMemo(()=>{const ge=Qe(),fe={};ge.forEach(Nt=>{const St=Nt.user_id,Ht=Nt.user?`${Nt.user.first_name} ${Nt.user.last_name}`:"Unknown";fe[St]||(fe[St]={userId:St,name:Ht,targetAmount:0,achievedAmount:0}),fe[St].targetAmount+=Number(Nt.target_amount)||0,fe[St].achievedAmount+=Number(Nt.achieved_amount)||0});const Fe=Object.values(fe).map((Nt,St)=>({...Nt,fill:h7[St%h7.length]})),Xe=Fe.reduce((Nt,St)=>Nt+St.targetAmount,0);return Fe.map(Nt=>({...Nt,percentage:Xe>0?(Nt.targetAmount/Xe*100).toFixed(1):0}))},[Qe]),ht=h.useMemo(()=>ct.slice(0,8).map(ge=>({name:ge.name.split(" ")[0],achievement:Number(ge.achievedAmount),target:Number(ge.targetAmount)})),[ct]),je=h.useMemo(()=>{const ge=p.toLowerCase();return o.filter(fe=>(fe.user?`${fe.user.first_name} ${fe.user.last_name}`.toLowerCase():"").includes(ge)||fe.start_date?.includes(ge)||fe.end_date?.includes(ge))},[o,p]),Ze=Math.max(1,Math.ceil(je.length/b)),ce=h.useMemo(()=>{const ge=(v-1)*b;return je.slice(ge,ge+b)},[je,v,b]),J=ge=>{const{name:fe,value:Fe}=ge.target;z(Xe=>({...Xe,[fe]:Fe}))},de=()=>{z(f7),k(!1),M(null),K(!1),S(!0)},D=ge=>{z({user_id:ge.user?.id?String(ge.user.id):"",start_date:ge.start_date||"",end_date:ge.end_date||"",target_amount:ge.target_amount?.toString()||"",period_type:ge.period_type||"CUSTOM",period_year:ge.period_year||new Date().getFullYear(),period_number:ge.period_number||1}),k(!0),M(ge.id),K(!1),S(!0),I(null)},B=ge=>{const fe=ge.user?`${ge.user.first_name} ${ge.user.last_name}`:"Unknown";Q({title:"Delete Target",message:n.jsxs("span",{children:["Are you sure you want to delete the target for"," ",n.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:async()=>{await ae.delete(`/targets/admin/${ge.id}`),G.success("Target deleted successfully."),Ie(),I(null)}})},ie=()=>{if(ce.every(ge=>W.includes(ge.id)))ne(W.filter(ge=>!ce.map(fe=>fe.id).includes(ge)));else{const ge=ce.map(fe=>fe.id);ne([...new Set([...W,...ge])])}},ue=ge=>{ne(fe=>fe.includes(ge)?fe.filter(Fe=>Fe!==ge):[...fe,ge])},se=async()=>{W.length!==0&&Q({title:"Delete Targets",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected targets? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Target(s)`,cancelLabel:"Cancel",variant:"danger",action:async()=>{await ae.post("/targets/admin/bulk-delete",{target_ids:W}),G.success(`Successfully deleted ${W.length} targets`),ne([]),Ie()}})},Pe=ge=>{if(ge.preventDefault(),K(!0),!R.user_id){G.error("Assign User is required.");return}if(!R.period_type){G.error("Period Type is required.");return}if(R.period_type==="CUSTOM"){G.error("Period Type cannot be Custom. Please select a valid period type.");return}if(R.period_type!=="CUSTOM"&&R.period_type!=="ANNUAL"&&!R.period_number){G.error("Please select a period.");return}if(!R.target_amount||Number(R.target_amount)<=0){G.error("Target amount must be greater than 0.");return}if(new Date(R.end_date)<new Date(R.start_date)){G.error("End date must be after start date.");return}const fe={user_id:Number(R.user_id),target_amount:Number(R.target_amount),start_date:R.start_date,end_date:R.end_date,period_type:R.period_type||"CUSTOM",period_year:R.period_year||new Date().getFullYear(),period_number:R.period_number||null},Fe=A?"Update Target":"Create Target";Q({title:Fe,message:"Are you sure you want to proceed?",confirmLabel:Fe,cancelLabel:"Cancel",variant:"primary",action:async()=>{E(!0);try{A?(await ae.put(`/targets/admin/${T}`,fe),G.success("Target updated successfully.")):(await ae.post("/targets/admin/create",fe),G.success("Target created successfully.")),S(!1),Ie()}catch(Xe){console.error(Xe);const pt=Xe.response?.data?.detail||Xe.message||"Operation failed.";G.error(pt)}finally{E(!1)}}})};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&n.jsx(Bt,{message:"Loading targets..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[n.jsx(or,{className:"mr-2 text-blue-600"})," Targets"]}),te&&n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:de,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&n.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[n.jsxs("button",{onClick:()=>Oe("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(NI,{className:"inline mr-2"}),"Overview"]}),n.jsxs("button",{onClick:()=>Oe("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(_S,{className:"inline mr-2"}),"Leaderboard"]}),n.jsxs("button",{onClick:()=>Oe("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${Se==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(Gs,{className:"inline mr-2"}),"History"]})]}),Se==="overview"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[n.jsx(Mc,{title:"Total Targets",value:Te.totalCount,icon:n.jsx(or,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Target Amount",value:`${r}${Te.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(i,{size:22}),color:"green"}),n.jsx(Mc,{title:"Achieved Amount",value:`${r}${Te.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:n.jsx(ad,{size:22}),color:"purple"}),n.jsx(Mc,{title:"Achievement Rate",value:`${Te.achievement}%`,icon:n.jsx(or,{size:22}),color:"orange"})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"mb-4 text-center",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),n.jsx("div",{className:"h-[38px] w-full invisible"})]}),ht.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(u_,{width:"100%",height:"100%",children:n.jsxs(FIe,{data:ht,children:[n.jsx(fk,{strokeDasharray:"3 3",vertical:!1}),n.jsx(bk,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(wk,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,ge=>Math.ceil(ge/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),n.jsx(N_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:ge=>`Sales: ${ge}`,formatter:(ge,fe,Fe)=>{if(!Fe||!Fe.payload)return[ge,fe];const Xe=Fe.payload,pt=Number(Xe.achievement)||0,Nt=Number(Xe.target)||0,St=Math.max(0,Nt-pt),Ht=Nt>0?(pt/Nt*100).toFixed(1):0;return fe==="Achieved"?[`${r}${pt.toLocaleString()} (${Ht}%)`,"Achieved"]:fe==="Remaining"?[`${r}${St.toLocaleString()}`,"Remaining"]:[ge,fe]}}),n.jsx(xk,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:ge,y:fe,width:Fe,value:Xe,payload:pt})=>{if(!pt||pt.target===void 0)return null;const Nt=(Xe/pt.target*100).toFixed(0),St=fe-10<0?10:fe-10;return n.jsxs("text",{x:ge+Fe/2,y:St,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[Nt,"%"]})}}),n.jsx(xk,{dataKey:ge=>Math.max(0,ge.target-ge.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(Cie,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[n.jsxs("select",{value:U,onChange:ge=>{ye(ge.target.value),Ne(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"annual",children:"Annual"}),n.jsx("option",{value:"semiannual",children:"Every 6 Months"}),n.jsx("option",{value:"trimester",children:"Every 4 Months"}),n.jsx("option",{value:"quarterly",children:"Quarterly"})]}),U!=="annual"&&n.jsxs("select",{value:pe,onChange:ge=>Ne(parseInt(ge.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[U==="semiannual"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Jun"}),n.jsx("option",{value:2,children:"Jul - Dec"})]}),U==="trimester"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Jan - Apr"}),n.jsx("option",{value:2,children:"May - Aug"}),n.jsx("option",{value:3,children:"Sep - Dec"})]}),U==="quarterly"&&n.jsxs(n.Fragment,{children:[n.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),n.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),n.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),n.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),ct.length>0?n.jsx("div",{className:"flex-1 min-h-0 w-full",children:n.jsx(u_,{width:"100%",height:"100%",children:n.jsxs(JIe,{children:[n.jsx(N_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:ge,payload:fe})=>{if(ge&&fe&&fe.length>0){const Fe=fe[0].payload;return n.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-800",children:Fe.name}),n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[n.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",r,Number(Fe.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),n.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",Fe.percentage,"%"]})]})}return null}}),n.jsx(vX,{data:ct,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:ge,percentage:fe,fill:Fe})=>n.jsxs("text",{fill:Fe,fontSize:12,fontWeight:600,children:[ge.split(" ")[0],": ",fe,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):n.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[n.jsx(NI,{size:48,className:"mb-2 opacity-20"}),n.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),te&&n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search targets...",value:p,onChange:ge=>x(ge.target.value),className:"w-full outline-none"})]})}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:n.jsxs("tr",{children:[Ue&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:ce.length>0&&ce.every(ge=>W.includes(ge.id)),onChange:ie})}),n.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),n.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),Ue&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:se,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected targets`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:ce.length>0?ce.map(ge=>{const fe=Number(ge.target_amount)>0?(Number(ge.achieved_amount)/Number(ge.target_amount)*100).toFixed(1):0;return n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[Ue&&n.jsx("td",{className:"py-3 px-4",onClick:Fe=>Fe.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(ge.id),onChange:()=>ue(ge.id)})}),n.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>I(ge),children:ge.user?`${ge.user.first_name} ${ge.user.last_name}`:"Unknown"}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(ge),children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>I(ge),children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(ge),children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${fe>=100?"bg-green-500":fe>=75?"bg-blue-500":fe>=50?"bg-yellow-500":"bg-red-500"}`,children:[fe,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(ge),children:ge.start_date}),n.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>I(ge),children:ge.end_date}),n.jsx("td",{})]},ge.id)}):n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:je.length,pageSize:b,currentPage:v,onPrev:()=>N(ge=>Math.max(ge-1,1)),onNext:()=>N(ge=>Math.min(ge+1,Ze)),onPageSizeChange:ge=>{C(ge),N(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),Se==="leaderboard"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),n.jsx("select",{value:Je,onChange:ge=>H(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((ge,fe)=>{const Fe=new Date().getFullYear()-fe;return n.jsx("option",{value:Fe,children:Fe},Fe)})}),n.jsxs("select",{value:be,onChange:ge=>{le(ge.target.value),_e(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:"",children:"All Periods"}),n.jsx("option",{value:"MONTHLY",children:"Monthly"}),n.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),n.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),n.jsx("option",{value:"ANNUAL",children:"Annual"})]}),be==="QUARTERLY"&&n.jsxs("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"Q1"}),n.jsx("option",{value:2,children:"Q2"}),n.jsx("option",{value:3,children:"Q3"}),n.jsx("option",{value:4,children:"Q4"})]}),be==="SEMIANNUAL"&&n.jsxs("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[n.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),n.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),be==="MONTHLY"&&n.jsx("select",{value:Z,onChange:ge=>_e(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((ge,fe)=>n.jsx("option",{value:fe+1,children:ge},fe))}),n.jsx("button",{onClick:ve,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Re&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Mc,{title:"Sales Reps",value:Re.total_sales_reps,icon:n.jsx(aa,{size:22}),color:"blue"}),n.jsx(Mc,{title:"Met Quota",value:Re.above_target_count,icon:n.jsx(ad,{size:22}),color:"green"}),n.jsx(Mc,{title:"Below Quota",value:Re.below_target_count,icon:n.jsx(AS,{size:22}),color:"orange"}),n.jsx(Mc,{title:"Team Achievement",value:`${Re.overall_achievement}%`,icon:n.jsx(or,{size:22}),color:"purple"})]}),qe?n.jsx(Bt,{message:"Loading leaderboard..."}):ke?.entries?.length>0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[n.jsx(_S,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",ke.period_type!=="ALL"&&n.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",ke.period_type," ",ke.period_year,")"]})]})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),n.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),n.jsx("tbody",{children:ke.entries.map(ge=>n.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${ge.rank===1?"bg-yellow-100 text-yellow-700":ge.rank===2?"bg-gray-100 text-gray-700":ge.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:ge.rank})}),n.jsx("td",{className:"py-3 px-4 font-medium",children:ge.user_name}),n.jsx("td",{className:"py-3 px-4 text-gray-500",children:ge.role}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ge.achievement_percentage>=100?"bg-green-500":ge.achievement_percentage>=75?"bg-blue-500":ge.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[ge.achievement_percentage,"%"]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("button",{onClick:()=>{nt(ge.user_id),Oe("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},ge.user_id))})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(_S,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Re?.needs_attention?.length>0&&n.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[n.jsx(AS,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Re.needs_attention.map(ge=>n.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[n.jsx("p",{className:"font-medium text-gray-800",children:ge.user_name}),n.jsx("p",{className:"text-sm text-gray-500",children:ge.role}),n.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[n.jsxs("span",{className:"text-red-600 font-semibold",children:[ge.achievement_percentage,"%"]}),n.jsxs("span",{className:"text-xs text-gray-500",children:[r,Number(ge.remaining_amount).toLocaleString()," remaining"]})]})]},ge.user_id))})]})]}),Se==="history"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),n.jsx("div",{className:"flex gap-4 flex-wrap",children:n.jsxs("select",{onChange:ge=>ge.target.value&&nt(Number(ge.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:xe?.user_id||"",children:[n.jsx("option",{value:"",children:"-- Select User --"}),c.map(ge=>n.jsxs("option",{value:ge.id,children:[ge.first_name," ",ge.last_name]},ge.id))]})})]}),Ee?n.jsx(Bt,{message:"Loading history..."}):xe?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:xe.user_name}),xe.current_period&&xe.previous_period&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:xe.current_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[xe.current_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(xe.current_period.achieved_amount).toLocaleString()," / ",r,Number(xe.current_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),n.jsx("p",{className:"text-xs text-gray-500",children:xe.previous_period.period_label}),n.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[xe.previous_period.achievement_percentage,"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[r,Number(xe.previous_period.achieved_amount).toLocaleString()," / ",r,Number(xe.previous_period.target_amount).toLocaleString()]})]}),n.jsxs("div",{className:`rounded-lg p-4 ${xe.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[n.jsx("p",{className:"text-sm font-medium",style:{color:xe.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),n.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${xe.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[xe.growth_percentage>=0?n.jsx(ad,{className:"mr-2"}):n.jsx(AS,{className:"mr-2"}),xe.growth_percentage>=0?"+":"",xe.growth_percentage?.toFixed(1),"%"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[xe.growth_amount>=0?"+":"",r,Number(xe.growth_amount||0).toLocaleString()]})]})]}),xe.periods?.length>0&&n.jsx("div",{className:"h-64",children:n.jsx(u_,{width:"100%",height:"100%",children:n.jsxs(zIe,{data:[...xe.periods].reverse(),children:[n.jsx(fk,{strokeDasharray:"3 3"}),n.jsx(bk,{dataKey:"period_label",tick:{fontSize:12}}),n.jsx(wk,{tick:{fontSize:12}}),n.jsx(N_,{formatter:(ge,fe)=>[`${r}${Number(ge).toLocaleString()}`,fe==="achieved_amount"?"Achieved":"Target"]}),n.jsx(xY,{}),n.jsx(hk,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2}),n.jsx(hk,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2})]})})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),n.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),n.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),n.jsx("tbody",{children:xe.periods.map((ge,fe)=>n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium",children:ge.period_label}),n.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[ge.start_date," - ",ge.end_date]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.target_amount).toLocaleString()]}),n.jsxs("td",{className:"py-3 px-4 text-right",children:[r,Number(ge.achieved_amount).toLocaleString()]}),n.jsx("td",{className:"py-3 px-4 text-right",children:n.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${ge.achievement_percentage>=100?"bg-green-500":ge.achievement_percentage>=75?"bg-blue-500":ge.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[ge.achievement_percentage,"%"]})})]},fe))})]})]})]}):n.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[n.jsx(Gs,{size:48,className:"mx-auto mb-4 opacity-20"}),n.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),P&&n.jsx(n$e,{target:P,currencySymbol:r,onClose:()=>I(null),onEdit:()=>D(P),onDelete:()=>B(P),canEdit:te,canDelete:Ue}),w&&te&&n.jsx(a$e,{formData:R,users:c,isEditing:A,isSubmitting:_,isSubmitted:oe,onChange:J,onClose:()=>S(!1),onSubmit:Pe,fiscalSettings:De}),q&&n.jsx(s$e,{...q,loading:V,onConfirm:async()=>{X(!0),await q.action(),X(!1),Q(null)},onCancel:()=>Q(null)})]})}function Mc({title:e,value:t,icon:a,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[n.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:a}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),n.jsx("p",{className:"text-2xl font-bold",children:t})]})]})}function n$e({target:e,onClose:t,onEdit:a,onDelete:s,canEdit:r,canDelete:i,currencySymbol:o}){const l=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:c=>c.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),n.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:n.jsx(Yt,{size:25})})]}),r&&n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:a,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),i&&n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:s,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"})]}),n.jsxs("div",{className:"p-4 lg:p-6",children:[n.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),n.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),n.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),n.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),n.jsxs("p",{className:`font-semibold ${l>=100?"text-green-600":l>=75?"text-blue-600":l>=50?"text-yellow-600":"text-red-600"}`,children:[l,"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),n.jsx("p",{children:e.start_date})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),n.jsx("p",{children:e.end_date})]})]})})]})]})})}function a$e({formData:e,users:t,isEditing:a,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const d=l?.fiscal_start_month||1,u=c&&(!e.target_amount||Number(e.target_amount)<=0),f=c&&(e.period_type==="CUSTOM"||!e.period_type),p=C=>{const w=C.getFullYear(),S=String(C.getMonth()+1).padStart(2,"0"),A=String(C.getDate()).padStart(2,"0");return`${w}-${S}-${A}`},x=(C,w,S)=>{let A,k;if(C==="MONTHLY")A=new Date(w,S-1,1),k=new Date(w,S,0);else if(C==="QUARTERLY"){const _=(S-1)*3,E=(d-1+_)%12;let T=w;d>1&&(E>=d-1?T=w-1:T=w),A=new Date(T,E,1);const M=(E+2)%12,R=E+2>=12?T+1:T;k=new Date(R,M+1,0)}else if(C==="SEMIANNUAL"){const _=(S-1)*6,E=(d-1+_)%12;let T=w;d>1&&(E>=d-1?T=w-1:T=w),A=new Date(T,E,1);const M=(E+5)%12,R=E+5>=12?T+1:T;k=new Date(R,M+1,0)}else if(C==="ANNUAL"){const _=d-1;let E=d>1?w-1:w;A=new Date(E,_,1);const T=(d-2+12)%12;k=new Date(E+1,T+1,0)}return{startDate:A,endDate:k}},v=C=>{const w=C.target.value;if(r({target:{name:"period_type",value:w}}),w!=="CUSTOM"){const S=e.period_year||new Date().getFullYear(),A=e.period_number||1,{startDate:k,endDate:_}=x(w,S,A);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},N=C=>{const w=Number(C.target.value);r({target:{name:"period_number",value:w}});const S=e.period_year||new Date().getFullYear(),A=e.period_type;if(A!=="CUSTOM"){const{startDate:k,endDate:_}=x(A,S,w);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}},b=C=>{const w=Number(C.target.value);r({target:{name:"period_year",value:w}});const S=e.period_type,A=e.period_number||1;if(S!=="CUSTOM"){const{startDate:k,endDate:_}=x(S,w,A);k&&_&&(r({target:{name:"start_date",value:p(k)}}),r({target:{name:"end_date",value:p(_)}}))}};return h.useEffect(()=>{if(e.period_type!=="CUSTOM"&&!e.start_date){const C=e.period_year||new Date().getFullYear(),w=e.period_number||1,{startDate:S,endDate:A}=x(e.period_type,C,w);S&&A&&(r({target:{name:"start_date",value:p(S)}}),r({target:{name:"end_date",value:p(A)}}))}},[l]),n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:n.jsx(Yt,{size:24})}),n.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:a?"Edit Target":"Add New Target"}),n.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[n.jsxs("div",{className:"flex flex-col gap-1 relative",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(t$e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:C=>`${C.first_name} ${C.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:"period_type",value:e.period_type,onChange:v,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${f?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:e$e.map(C=>n.jsx("option",{value:C.value,children:C.label},C.value))})]}),e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),n.jsxs("select",{name:"period_number",value:e.period_number,onChange:N,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((C,w)=>n.jsx("option",{value:w+1,children:C},w)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(C=>n.jsxs("option",{value:C,children:["Q",C," ",l?.quarters?.[`Q${C}`]?`(${l.quarters[`Q${C}`]})`:""]},C)),e.period_type==="SEMIANNUAL"&&[1,2].map(C=>n.jsxs("option",{value:C,children:["H",C," ",l?.halves?.[`H${C}`]?`(${l.halves[`H${C}`]})`:`(${C===1?"Jan-Jun":"Jul-Dec"})`]},C))]})]}),e.period_type!=="CUSTOM"&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:d!==1?"Fiscal Year":"Year"}),n.jsx("select",{name:"period_year",value:e.period_year,onChange:b,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((C,w)=>{const S=new Date().getFullYear()+1-w;return n.jsx("option",{value:S,children:d!==1?`FY${S}`:S},S)})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
        ${u?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Start Date ",e.period_type!=="CUSTOM"&&n.jsx("span",{className:"text-gray-400 text-xs",children:"(auto-calculated)"})]}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),n.jsx("div",{className:"flex justify-center w-full",children:n.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),n.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":"Save Target"})]})]})]})})}function s$e({title:e,message:t,confirmLabel:a,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),n.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":a})]})]})})}function r$e(){const{userRole:e}=Qs();return n.jsx(Bj,{currentUserRole:e,currentUserId:null})}const g7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],$_={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},nb=e=>{const t=parseFloat(e.quantity)||0,a=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*a,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},Ic=(e,t="")=>{const a=parseFloat(e)||0;return`${t}${a.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function hd({items:e=[],onChange:t,currencySymbol:a="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,d]=h.useState(null),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState({...$_});h.useEffect(()=>{if(l){const T=e.reduce((I,q)=>I+(parseFloat(q.line_total)||0),0);let M=0;i==="percentage"&&o?M=T*(parseFloat(o)/100):i==="fixed"&&o&&(M=parseFloat(o));const R=T-M,z=R*(parseFloat(r)/100),P=R+z;l({subtotal:T,discount_amount:M,tax_amount:z,total_amount:P})}},[e,r,i,o,l]);const b=h.useCallback(()=>{if(!v.name.trim()){G.error("Item name is required");return}if(parseFloat(v.unit_price)<=0){G.error("Unit price must be greater than 0");return}if(parseFloat(v.quantity)<=0){G.error("Quantity must be greater than 0");return}const T=nb(v),M={...v,...T,sort_order:e.length};t([...e,M]),N({...$_}),x(!1),G.success("Item added")},[v,e,t]),C=T=>{if(!u){G.error("No item being edited");return}if(!u.name.trim()){G.error("Item name is required");return}if(parseFloat(u.unit_price)<=0){G.error("Unit price must be greater than 0");return}if(parseFloat(u.quantity)<=0){G.error("Quantity must be greater than 0");return}const M=nb(u),R={...u,...M},z=e.map((P,I)=>I===T?R:P);t(z),d(null),f(null),G.success("Item updated")},w=h.useCallback(T=>{const M=e.filter((R,z)=>z!==T);M.forEach((R,z)=>{R.sort_order=z}),t(M),G.success("Item removed")},[e,t]),S=h.useCallback((T,M)=>{const R=M==="up"?T-1:T+1;if(R<0||R>=e.length)return;const z=[...e];[z[T],z[R]]=[z[R],z[T]],z.forEach((P,I)=>{P.sort_order=I}),t(z)},[e,t]),A=T=>{d(T),f({...e[T]})},k=()=>{d(null),f(null)},_=e.reduce((T,M)=>T+(parseFloat(M.line_total)||0),0),E=(T,M)=>c===M&&!s?n.jsxs("tr",{className:"bg-blue-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("select",{value:u.item_type,onChange:z=>f(P=>({...P,item_type:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:g7.map(z=>n.jsx("option",{value:z.value,children:z.label},z.value))})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("input",{type:"text",value:u.name,onChange:z=>f(P=>({...P,name:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),n.jsx("input",{type:"text",value:u.variant||"",onChange:z=>f(P=>({...P,variant:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"text",value:u.sku||"",onChange:z=>f(P=>({...P,sku:z.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"number",value:u.quantity,onChange:z=>f(P=>({...P,quantity:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:u.unit||"",onChange:z=>f(P=>({...P,unit:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),n.jsx("td",{className:"px-3 py-2",children:n.jsx("input",{type:"number",value:u.unit_price,onChange:z=>f(P=>({...P,unit_price:z.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"number",value:u.discount_percent||0,onChange:z=>f(P=>({...P,discount_percent:z.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),n.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(nb(u).line_total,a)}),n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>C(M),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:n.jsx(Zk,{size:16})}),n.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:n.jsx(Yt,{size:16})})]})})]},T.id||`edit-${M}`):n.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[n.jsx("td",{className:"px-3 py-2",children:n.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${T.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:T.item_type})}),n.jsxs("td",{className:"px-3 py-2",children:[n.jsx("div",{className:"font-medium text-gray-900",children:T.name}),T.variant&&n.jsx("div",{className:"text-xs text-gray-500",children:T.variant}),T.description&&n.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:T.description})]}),n.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:T.sku||"-"}),n.jsxs("td",{className:"px-3 py-2 text-center",children:[n.jsx("span",{className:"font-medium",children:parseFloat(T.quantity).toLocaleString()}),T.unit&&n.jsx("span",{className:"text-gray-500 text-sm ml-1",children:T.unit})]}),n.jsx("td",{className:"px-3 py-2 text-right",children:Ic(T.unit_price,a)}),n.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(T.discount_percent)>0?n.jsxs("span",{className:"text-red-600",children:["-",parseFloat(T.discount_percent).toFixed(1),"%"]}):n.jsx("span",{className:"text-gray-400",children:"-"})}),n.jsx("td",{className:"px-3 py-2 text-right font-medium",children:Ic(T.line_total,a)}),!s&&n.jsx("td",{className:"px-3 py-2",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("button",{type:"button",onClick:()=>S(M,"up"),disabled:M===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:n.jsx(Aie,{size:14})}),n.jsx("button",{type:"button",onClick:()=>S(M,"down"),disabled:M===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:n.jsx(Tt,{size:14})}),n.jsx("button",{type:"button",onClick:()=>A(M),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:n.jsx(ha,{size:14})}),n.jsx("button",{type:"button",onClick:()=>w(M),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:n.jsx(Wt,{size:14})})]})})]},T.id||`row-${M}`);return n.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[n.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&n.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&n.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[n.jsx(yn,{size:14}),"Add Item"]})]}),p&&!s&&n.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),n.jsx("select",{value:v.item_type,onChange:T=>N({...v,item_type:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:g7.map(T=>n.jsx("option",{value:T.value,children:T.label},T.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),n.jsx("input",{type:"text",value:v.name,onChange:T=>N({...v,name:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),n.jsx("input",{type:"text",value:v.sku,onChange:T=>N({...v,sku:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),n.jsx("input",{type:"text",value:v.variant,onChange:T=>N({...v,variant:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"number",value:v.quantity,onChange:T=>N({...v,quantity:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),n.jsx("input",{type:"text",value:v.unit,onChange:T=>N({...v,unit:T.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:a}),n.jsx("input",{type:"number",value:v.unit_price,onChange:T=>N({...v,unit_price:T.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),n.jsx("input",{type:"number",value:v.discount_percent,onChange:T=>N({...v,discount_percent:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),n.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:Ic(nb(v).line_total,a)})]})]}),n.jsxs("div",{className:"mt-3",children:[n.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),n.jsx("textarea",{value:v.description,onChange:T=>N({...v,description:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[n.jsx("button",{onClick:()=>{x(!1),N({...$_})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),n.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-50 border-b",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),n.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),n.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),n.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&n.jsx("th",{className:"px-3 py-2 w-28"})]})}),n.jsx("tbody",{children:e.map((T,M)=>E(T,M))})]})}):n.jsxs("div",{className:"p-8 text-center text-gray-500",children:[n.jsx("p",{children:"No items added yet."}),!s&&n.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&n.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:n.jsx("div",{className:"flex justify-end",children:n.jsxs("div",{className:"w-64 space-y-1",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),n.jsx("span",{className:"font-medium",children:Ic(_,a)})]}),parseFloat(o)>0&&n.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[n.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),n.jsxs("span",{children:["-",Ic(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o),a)]})]}),parseFloat(r)>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),n.jsx("span",{children:Ic((_-(i==="percentage"?_*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),a)})]}),n.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[n.jsx("span",{children:"Total:"}),n.jsx("span",{children:Ic((()=>{let T=0;i==="percentage"&&o?T=_*(parseFloat(o)/100):i==="fixed"&&o&&(T=parseFloat(o));const M=_-T,R=M*(parseFloat(r)/100);return M+R})(),a)})]})]})})})]})}const R_=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],z_={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Oi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},U_=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",i$e=e=>{switch(Oi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},o$e=e=>{switch(Oi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},ab=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",yg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",l$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},F_=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},p7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},B_=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},xw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},c$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=xw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=xw(t);return a||null},d$e=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},u$e=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function m$e(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState(z_),[oe,K]=h.useState(""),[U,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const $=(await ae.get("/company/invoice-info"))?.data;e(`/admin/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:$}})}catch(F){const $=F?.response?.data?.detail||F?.message||"Failed to open print page.";G.error($)}finally{Q(!1)}},[w,s]),[Oe,ke]=h.useState(1),[he,qe]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ta({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const $=t.state?.quoteID;if($){De($),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const F=r.find($=>$.id===et);F?S(F):G.error("Quote not found."),De(null)}},[et,p,o]),h.useEffect(()=>{let F=!0;return(async()=>{const me=c$e();if(me&&F){C(me);return}try{const Le=await ae.get("/auth/me"),$e=xw(Le?.data);if($e&&F){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=xw(Le?.data);if($e&&F){C($e);return}}catch{}F&&C(null)})(),()=>{F=!1}},[]);const be=h.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),le=h.useCallback(F=>{if(!F)return"";const $=p.find(me=>String(me.id)===String(F));return $?`${$.first_name} ${$.last_name}`.trim():""},[p]),Z=h.useCallback(F=>{if(!F)return"--";const $=c.find(me=>String(me.id)===String(F));return $?.deal_name||$?.name||`Deal #${p7(F)}`},[c]),_e=h.useCallback(F=>{const $=c.find($e=>String($e.id)===String(F)),me=d$e($);let Le=u$e($);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const $=F.deal_id||F.deal?.id;return $?Z($):"--"},[Z]),Ue=h.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let $=F.account_id||F.account?.id;if(!$){const me=F.deal_id||F.deal?.id;me&&($=_e(me).accountId)}return $?be($)||`Account #${$}`:"--"},[_e,be]),Ie=h.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let $=F.contact_id||F.contact?.id;if(!$){const Le=F.deal_id||F.deal?.id;Le&&($=_e(Le).contactId)}return($?le($):"")||($?`Contact #${$}`:"--")},[_e,le]),Ge=h.useCallback(async(F=null)=>{l(!0);try{const $=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray($.data)?$.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),F){const $e=Le.find(Ve=>Ve.id===F);S($e||null)}}catch($){console.error($),i([]),$.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const F=await ae.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const F=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const F=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const F=await ae.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Ge(),gt(),ve(),Be(),nt()},[Ge,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const F=oe.trim().toLowerCase(),$=U.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=F_(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?yg(me.presented_date):"",Ye?yg(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,ab(me.created_at),ab(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=$==="Filter by Status"||Oi(me.status)===$;return Ct&&Xt})},[r,oe,U,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,U]),h.useEffect(()=>{ke(F=>{const $=Math.max(1,Math.ceil(Te.length/he)||1);return F>$?$:F})},[Te.length,he]);const ct=h.useMemo(()=>{const F=(Oe-1)*he;return Te.slice(F,F+he)},[Te,Oe,he]),ht=()=>ke(F=>Math.max(F-1,1)),je=()=>ke(F=>Math.min(F+1,Qe)),Ze=F=>{S(F),xe("Overview"),Ee(Oi(F?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),E(!1),X(null),ne(z_),M(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:$,value:me}=F.target;if($==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[$]:me}))},ie=()=>{const F=a?.company?.tax_rate??0;ne({...z_,tax_rate:F}),E(!1),X(null),k(!0)},ue=F=>{if(!F)return;S(null);const $=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=$?_e($):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,$e=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Ve=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";ne({deal_id:$,account_id:Le||"",contact_id:$e||"",total_amount:F.total_amount?.toString()||"",presented_date:l$e(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Oi(F.status)||"Draft",assigned_to:Ve,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),E(!0),X(F.id),k(!0)},se=F=>{if(F.target.checked){const $=ct.map(me=>me.id);Re($)}else Re([])},Pe=F=>{Re($=>$.includes(F)?$.filter(me=>me!==F):[...$,F])},ge=F=>{if(!F)return;const $=F.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:$}})},fe=async()=>{Ae.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=F=>{if(F.preventDefault(),Xe(!0),!b){G.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){G.error("Deal is required.");return}if(!W.assigned_to){G.error("Assigned To is required.");return}const me=_e(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),$e={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(W.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;z({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!R?.action){z(null);return}const{action:F}=R,{type:$,payload:me,targetId:Le,name:$e}=F;I(!0);try{if($==="create")M(!0),await ae.post("/quotes/admin",me),G.success("Quote created successfully."),de(),await Ge();else if($==="update"){if(!Le)throw new Error("Missing quote identifier for update.");M(!0),await ae.put(`/quotes/admin/${Le}`,me),G.success("Quote updated successfully."),de(),await Ge(),w?.id===Le&&S(null)}else if($==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),G.success(`Quote "${$e}" deleted successfully.`),await Ge(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else $==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),G.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await Ge())}catch(Ve){console.error(Ve);const Ye=$==="create"?"Failed to create quote. Please review the details and try again.":$==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";G.error(Ye),($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null)}finally{($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null),I(!1),z(null)}},St=()=>{P||z(null)},Ht=h.useCallback((F,$)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=F?.account_id??F?.account?.id??$e.accountId??null,Ye=F?.contact_id??F?.contact?.id??$e.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:$,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const F=Oi(ee),$=[F,F.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of $)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,F);if(!$e.deal_id){G.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){G.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}G.success(`Quote status updated to ${F}`),S(null),xe("Overview"),await Ge()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";G.error($e)}},[w,ee,Ge,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...R_.map(F=>({label:F.label,value:F.value}))],re=R?.action?.type==="delete"?R.action.targetId:null,ot=w&&(pe===w.id||re===w.id),zt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${o$e(w.status)}`,children:U_(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:q||T||P,children:[n.jsx(hn,{className:"mr-2"}),q?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>xe(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:B_(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:yg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:yg(F_(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:U_(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:ab(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:ab(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${B_(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Oi(w.status)||"Draft",onChange:F=>Ee(F.target.value),children:R_.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Oi(ee)===Oi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oi(ee)===Oi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:F=>K(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>ye(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(F=>{const $=F_(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:B_(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${i$e(F.status)}`,children:U_(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:yg($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:F=>{qe(F),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(b7,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:$,contactId:me}=_e(F);ne(Le=>({...Le,deal_id:F,account_id:$,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${p7(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(y7,{label:"Account",value:be(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(y7,{label:"Contact",value:le(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:W.items,onChange:F=>ne($=>({...$,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{ne($=>({...$,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>ne($=>({...$,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>ne($=>({...$,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate??"",onChange:F=>ne($=>({...$,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(x7,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(x7,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(b7,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>ne($=>({...$,assigned_to:F})),items:Array.isArray(v)?v:[],getLabel:F=>{const $=`${F?.first_name??""} ${F?.last_name??""}`.trim();if(!$)return F?.email||"";const me=F?.role?.toUpperCase()==="CEO"?"Admin":F?.role;return me?`${$} (${me})`:$},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(f$e,{label:"Status",name:"status",value:W.status,onChange:B,options:R_,required:!0,disabled:T}),n.jsx(g$e,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=R?n.jsx(p$e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function x7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function y7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function f$e({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function b7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(h$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function h$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function g$e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function p$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const Hj=[{value:"CEO",label:"CEO"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],bg={firstName:"",lastName:"",email:"",password:"",role:""},x$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},No=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",y$e=e=>{const t=No(e),a=Hj.find(s=>No(s.value)===t);return a?a.value:e||""},Sk=e=>{const t=No(e),a=Hj.find(s=>No(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},v7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},H_=(e,{size:t="sm"}={})=>{const a=No(e),s=x$e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Sk(e)})},b$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},w7=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function v$e(){const{user:e,loading:t}=en(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(bg),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[P,I]=h.useState(10),[q,Q]=h.useState("Overview"),[V,X]=h.useState(""),[W,ne]=h.useState(!1),[oe,K]=h.useState([]),U=No(e?.role),ye=["ADMIN","CEO"].includes(U),pe=!t&&ye,Ne=h.useMemo(()=>{const ve=Hj.filter(Be=>No(Be.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ve]},[]),Se=h.useCallback(ve=>{ve&&(s(Be=>Be.map(nt=>nt.id===ve?{...nt,highlight:!0}:nt)),setTimeout(()=>{s(Be=>Be.map(nt=>nt.id===ve?{...nt,highlight:!1}:nt))},2e3))},[]),Oe=h.useCallback(async()=>{i(!0);try{const ve=await ae.get("/users/all"),Be=Array.isArray(ve.data)?ve.data:[],nt=w7(Be);s(nt),f(Te=>Te&&(nt.find(ct=>ct.id===Te.id)||null)),console.log(ve.data)}catch(ve){console.error("Error fetching users:",ve);const Be=ve.response?.data?.detail||"Failed to load users. Please try again later.";G.error(Be)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!ye&&e&&G.error("You are not authorized to access User Management.")},[ye,t,e]),h.useEffect(()=>{t||!ye||Oe()},[t,ye,Oe]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const ke=h.useMemo(()=>{const ve=o.trim().toLowerCase(),Be=No(c);return w7(a.filter(nt=>{if(!nt)return!1;const Te=ve===""||[nt.first_name,nt.last_name,`${nt.first_name||""} ${nt.last_name||""}`,nt.email,Sk(nt.role)].filter(Boolean).some(ct=>ct.toString().toLowerCase().includes(ve)),Qe=Be===""||Be==="CEO"&&["CEO","ADMIN"].includes(No(nt.role))||No(nt.role)===Be;return Te&&Qe}))},[a,o,c]),he=Math.max(1,Math.ceil(ke.length/P)||1);h.useEffect(()=>{z(1)},[o,c,P]),h.useEffect(()=>{z(ve=>{const Be=Math.max(1,Math.ceil(ke.length/P)||1);return ve>Be?Be:ve})},[ke.length,P]);const qe=h.useMemo(()=>{const ve=(R-1)*P;return ke.slice(ve,ve+P)},[ke,R,P]);ke.length===0||(R-1)*P+1,Math.min(R*P,ke.length);const Ce=()=>z(ve=>Math.max(ve-1,1)),xe=()=>z(ve=>Math.min(ve+1,he)),ee=()=>{S(bg),N(!1),C(null),x(!0)},Ee=ve=>{f(ve),Q("Overview"),X(ve?.is_active?"Active":"Inactive")},Ae=ve=>{ve.target.id==="userModalBackdrop"&&!T&&Re()},Re=()=>{f(null)},et=(ve,Be)=>{S(nt=>({...nt,[ve]:Be}))},De=()=>{const ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Be="";for(let nt=0;nt<10;nt+=1)Be+=ve.charAt(Math.floor(Math.random()*ve.length));et("password",Be)},tt=()=>{A||T||(x(!1),S(bg),C(null),N(!1))},Je=ve=>{S({firstName:ve.first_name||"",lastName:ve.last_name||"",email:ve.email||"",password:"",role:y$e(ve.role)}),N(!0),C(ve.id),x(!0),f(null)},H=ve=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[ve.first_name," ",ve.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:`${ve.first_name||""} ${ve.last_name||""}`.trim()||ve.email||"user"}})},be=ve=>{ve.preventDefault();const Be=w.firstName.trim(),nt=w.lastName.trim(),Te=w.email.trim(),Qe=w.password.trim(),ct=w.role,ht=!(v&&b);if(!Be||!Te||!ct){G.warn("Please fill in all required fields.");return}if(ht&&!Qe){G.warn("Please fill in all required fields.");return}if(Qe&&Qe.length<8){G.warn("Password should be at least 8 characters long.");return}const je={first_name:Be,last_name:nt,email:Te,role:ct};(ht||Qe)&&(je.password=Qe);const Ze=`${Be} ${nt}`.trim(),ce=ht?"create":"update";E({title:ce==="create"?"Confirm New User":"Confirm User Update",message:ce==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Ze})," with role"," ",n.jsx("span",{className:"font-semibold",children:Sk(ct)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Ze||Te}),"?"]}),confirmLabel:ce==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:ce,payload:je,targetId:b,name:Ze||Te}})},le=async()=>{oe.length!==0&&E({title:"Delete Users",message:n.jsxs("span",{children:["Are you sure you want to deactivate"," ",n.jsx("span",{className:"font-semibold",children:oe.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${oe.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:oe}})},Z=ve=>{if(ve.target.checked){const Be=qe.map(nt=>nt.id);K(Be)}else K([])},_e=ve=>{K(Be=>Be.includes(ve)?Be.filter(nt=>nt!==ve):[...Be,ve])},te=async()=>{if(!_?.action){E(null);return}const{action:ve}=_,{type:Be,payload:nt,targetId:Te,name:Qe}=ve;M(!0),(Be==="create"||Be==="update")&&k(!0);try{if(Be==="create"){const ht=(await ae.post("/users/createuser",nt)).data;await Oe(),Se(ht.id),G.success(`User "${Qe}" created successfully.`),x(!1),S(bg),C(null),N(!1)}else if(Be==="update"){if(!Te)throw new Error("Missing user identifier for update.");const ht=(await ae.put(`/users/updateuser/${Te}`,nt)).data;await Oe(),f(null),Se(ht.id),G.success(`User "${Qe}" updated successfully.`),x(!1),S(bg),C(null),N(!1)}else if(Be==="delete"){if(!Te)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${Te}`),s(ct=>ct.map(ht=>ht.id===Te?{...ht,is_active:!1}:ht)),u&&u.id===Te&&(f(null),X("")),G.success(`User "${Qe}" deactivated successfully.`)}else Be==="bulk-delete"&&(await ae.delete("/users/admin/bulk-delete",{data:{user_ids:ve.user_ids}}),s(ct=>ct.map(ht=>ve.user_ids.includes(ht.id)?{...ht,is_active:!1}:ht)),u&&ve.user_ids.includes(u.id)&&(f(null),X("")),G.success(`Successfully deactivated ${ve.user_ids.length} users`),K([]))}catch(ct){console.error("User management error:",ct);const ht=Be==="create"?"Failed to create user. Please review the details and try again.":Be==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",je=ct.response?.data?.detail||ht;G.error(je)}finally{(Be==="create"||Be==="update")&&k(!1),M(!1),E(null)}},Ue=()=>{T||E(null)},Ie=async()=>{if(!u||!V)return;const ve=u.is_active?"Active":"Inactive";if(V===ve)return;const Be=V==="Active";ne(!0);try{const Te=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Be})).data;s(Qe=>Qe.map(ct=>ct.id===Te.id?Te:ct)),f(null),X(""),G.success(`User status updated to ${V}`)}catch(nt){console.error("Failed to update user status:",nt);const Te=nt.response?.data?.detail||"Failed to update user status. Please try again.";G.error(Te)}finally{ne(!1)}},Ge=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!pe)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(qw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:ee,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ve=>l(ve.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:ve=>d(ve.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ne.map(ve=>n.jsx("option",{value:ve.value,children:ve.label},ve.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:qe.length>0&&qe.every(ve=>oe.includes(ve.id)),onChange:Z})}),n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:oe.length>0?n.jsx("button",{onClick:le,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${oe.length} selected users`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):ke.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):qe.map(ve=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ve.highlight?"bg-green-50":""} ${ve.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4",onClick:Be=>Be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:oe.includes(ve.id),onChange:()=>_e(ve.id)})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ve.first_name," ",ve.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>Ee(ve),children:ve.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:H_(ve.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>Ee(ve),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ve.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ve.is_active?"Active":"Inactive"})})]},ve.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:ke.length,pageSize:P,currentPage:R,onPrev:Ce,onNext:xe,onPageSizeChange:ve=>{I(ve),z(1)},label:"users"})]}),gt=u?n.jsx("div",{id:"userModalBackdrop",onClick:Ae,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Re,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:b$e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),H_(u.role,{size:"md"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Je(u),disabled:T,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>H(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ve=>n.jsx("button",{onClick:()=>Q(ve),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${q===ve?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ve},ve))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:q==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:H_(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,ve=>ve.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:v7(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?v7(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const ve=encodeURIComponent(u.email),Be=encodeURIComponent(""),nt=encodeURIComponent(""),Te=`https://mail.google.com/mail/?view=cm&fs=1&to=${ve}&su=${Be}&body=${nt}`;window.open(Te,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:ve=>X(ve.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:Ie,disabled:W||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Ge,gt,n.jsx(w$e,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:T,formData:w,onClose:tt,onSubmit:be,onChange:et,onGeneratePassword:De}),n.jsx(N$e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:te,onCancel:Ue})]})}function w$e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(sb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(sb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(sb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(sb,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...Hj],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function sb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function N$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const j$e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"};function C$e(){const{user:e,loading:t,fetchUser:a}=en(),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(!1),[f,p]=h.useState(!1),[x,v]=h.useState(null),[N,b]=h.useState(null),C=h.useRef(null),[w,S]=h.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[A,k]=h.useState({currentPassword:"",newPassword:"",confirmPassword:""});h.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(e.profile_picture||null))},[e]),h.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const _=(z,P)=>{S(I=>({...I,[z]:P}))},E=(z,P)=>{k(I=>({...I,[z]:P}))},T=z=>{const P=z.target.files?.[0];if(!P)return;if(!P.type.startsWith("image/")){G.error("Please select an image file");return}if(P.size>5*1024*1024){G.error("Image size should be less than 5MB");return}const I=new FileReader;I.onloadend=()=>{v(I.result),b(I.result)},I.readAsDataURL(P)},M=async z=>{if(z.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){G.warn("Please fill in all required fields.");return}r(!0);try{const P={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(P.profile_picture=x),await ae.put("/users/me",P),await a(),o(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),G.success("Account information updated successfully!")}catch(P){console.error("Error updating account:",P);const I=P.response?.data?.detail||"Failed to update account information. Please try again.";G.error(I)}finally{r(!1)}},R=async z=>{if(z.preventDefault(),!A.newPassword||!A.confirmPassword){G.warn("Please fill in all password fields.");return}if(A.newPassword.length<8){G.warn("Password must be at least 8 characters long.");return}if(A.newPassword!==A.confirmPassword){G.warn("New password and confirm password do not match.");return}p(!0);try{const P={password:A.newPassword};await ae.put("/users/me",P),await a(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),G.success("Password changed successfully!")}catch(P){console.error("Error changing password:",P);const I=P.response?.data?.detail||"Failed to change password. Please try again.";G.error(I)}finally{p(!1)}};return n.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&n.jsx(Bt,{}),e&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Account"}),n.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(nn,{className:"text-blue-600"}),"Profile Information"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[n.jsx(ha,{}),"Edit Profile"]})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[n.jsxs("div",{className:"flex-shrink-0 relative group",children:[N?n.jsx("div",{className:"relative",children:n.jsx("img",{src:N,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):n.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:j$e(e.first_name,e.last_name)}),i&&n.jsxs("div",{className:"absolute bottom-0 right-0",children:[n.jsx("input",{type:"file",ref:C,accept:"image/*",onChange:T,className:"hidden",id:"profile-picture-upload"}),n.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:n.jsx(XH,{size:14})})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),n.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),n.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?n.jsxs("form",{onSubmit:M,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.firstName,onChange:z=>_("firstName",z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",value:w.lastName,onChange:z=>_("lastName",z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(Lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"tel",value:w.phoneNumber,onChange:z=>_("phoneNumber",z.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[n.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),b(e.profile_picture||null),C.current&&(C.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[n.jsx(eL,{}),s?"Saving...":"Save Changes"]})]})]}):n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(So,{className:"text-blue-600"}),"Change Password"]}),n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:A.newPassword,onChange:z=>E("newPassword",z.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>c(z=>!z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(So,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),n.jsx("input",{type:"text",style:d?void 0:{WebkitTextSecurity:"disc"},value:A.confirmPassword,onChange:z=>E("confirmPassword",z.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),n.jsx("button",{type:"button",onClick:()=>u(z=>!z),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":d?"Hide password":"Show password",children:d?n.jsx(Su,{className:"size-5"}):n.jsx(_u,{className:"size-5"})})]})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:n.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:f,children:[n.jsx(So,{}),f?"Changing Password...":"Change Password"]})})]})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[n.jsx(JH,{className:"text-blue-600"}),"Account Information"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),n.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),n.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),n.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),n.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function aZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){G.error("No deal selected");return}if(!s||s===e.stage){G.info("Please select a different stage");return}const u=e.id;o(!0);try{await ae.put(`/deals/admin/${u}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{G.success("Deal status updated successfully")},300)}catch(f){console.error(f);const p=f.response?.data?.detail||"Failed to update deal status";G.error(p)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const u=encodeURIComponent(e.contact.email),f=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${u}?subject=${f}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const u=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:u,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:u=>r(u.target.value),disabled:i,children:c.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))}),n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function sZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const d=wt(),[u]=zs(),f=u.get("id"),[p,x]=h.useState(e||null),[v,N]=h.useState(s||"Overview"),[b,C]=h.useState(null),[w,S]=h.useState(""),{userRole:A}=Qs(),{comments:k,addComment:_,refresh:E}=Ta({relatedType:"deal",relatedId:p?.id});h.useEffect(()=>{p?.id&&E()},[p?.id,E]);const T=s!==void 0?s:v;if(h.useEffect(()=>{A.toLowerCase()==="ceo"||A.toLowerCase()==="admin"?S("admin"):A.toLowerCase()==="group manager"||A.toLowerCase()==="group_manager"?S("group-manager"):A.toLowerCase()==="manager"?S("manager"):A.toLowerCase()==="sales"?S("sales"):S("guest")},[A]),h.useEffect(()=>{(async()=>{if(f&&!e)try{const q=((await ae.get("/deals/admin/fetch-all")).data||[]).find(Q=>Q.id===parseInt(f));if(q){const Q={...q,amount:typeof q.amount=="number"?q.amount:parseFloat(q.amount||0),probability:q.probability||0};x(Q)}else console.warn("Deal not found with ID:",f)}catch(P){console.error("Error fetching deal:",P)}})()},[f,e]),!p&&!f||f&&!p)return null;const M=z=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[z]||"bg-gray-100 text-gray-700";function R(z){return z?new Date(z).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():d(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Yt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${M(p.stage)}`,children:p.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",R(p.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>n.jsx("button",{onClick:()=>{r?r(z):N(z)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",p.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const z=(p?.stage||"PROSPECTING").toUpperCase(),I=(Q=>Q==="PROSPECTING"?0:Q==="QUALIFICATION"?1:Q==="PROPOSAL"?2:Q==="NEGOTIATION"?3:Q==="CLOSED_WON"||Q==="CLOSED_LOST"?4:-1)(z);return[0,1,2,3,4].map(Q=>I===Q?"orange":I>Q?"green":"gray").map((Q,V)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${Q==="green"?"bg-green-500 border-green-500":Q==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),V<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},V))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((z,P)=>n.jsx("span",{className:"text-center flex-1 break-words",children:z},P))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",p.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),n.jsx(Aa,{comments:k,onAddComment:_})]}),s==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((z,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/tasks`,{state:{taskID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.due_date||z.created_at)})]},`task-${P}`))})]}),c.meetings&&c.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((z,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/meetings`,{state:{meetingID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.start_time||z.created_at)})]},`meeting-${P}`))})]}),c.calls&&c.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((z,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/calls`,{state:{callID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.call_time||z.created_at)})]},`call-${P}`))})]}),c.quotes&&c.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),b==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((z,P)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>d(`/${w}/quotes`,{state:{quoteID:z.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(z.quote_id?z.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:z.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:R(z.presented_date)||""})]},`quote-${P}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(aZ,{selectedDeal:p,onStatusUpdate:l,onClose:a})})]})]})]})})}function S$e(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[P,I]=h.useState([]),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState([]),[oe,K]=h.useState([]),[U,ye]=h.useState([]),[pe,Ne]=h.useState({}),[Se,Oe]=h.useState(null);h.useEffect(()=>{const de=t.state,D=de?.dealID;if(D&&!de?.openDealModal){Oe(D),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(Se&&v?.length>0&&!b){const de=v.find(D=>D.id===Se);de?d(de):G.error("Deal not found."),Oe(null)}},[Se,v,b]);const[ke,he]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),qe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ce=de=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[de]||de||"--",xe=de=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[de]||"bg-gray-100 text-gray-700",ee=h.useCallback(async de=>{try{const D=await ae.get(`/activities/deal/${de}`);Ne(D.data&&typeof D.data=="object"?D.data:{})}catch(D){console.error(D),D.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),Ee=h.useMemo(()=>{const de=a.trim().toLowerCase(),D=r.trim(),B=o.trim();return(v??[]).filter(ie=>{const ue=[ie?.name,ie?.description,ie?.account?.name,ie?.contact?.first_name,ie?.contact?.last_name,ie?.assigned_deals?.first_name,ie?.assigned_deals?.last_name],se=de===""||ue.some(fe=>fe==null||fe===""?!1:fe.toString().toLowerCase().includes(de)),Pe=D==="Filter by Stage"||D===""||ie.stage===qe[D]||ie.stage===D,ge=B==="Filter by Owner"||B===""||`${ie.assigned_deals?.first_name||""} ${ie.assigned_deals?.last_name||""}`.trim().toLowerCase()===B.toLowerCase();return se&&Pe&&ge})},[v,a,r,o]),Ae=Math.max(1,Math.ceil(Ee.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o,A]),h.useEffect(()=>{S(de=>{const D=Math.max(1,Math.ceil(Ee.length/A)||1);return de>D?D:de})},[Ee.length,A]);const Re=h.useMemo(()=>{const de=(w-1)*A;return Ee.slice(de,de+A)},[Ee,w,A]),et=()=>S(de=>Math.max(de-1,1)),De=()=>S(de=>Math.min(de+1,Ae)),tt=()=>{he({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),X(null),x(!0)},Je=async()=>{C(!0);try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});N(B)}catch(de){de.response&&de.response.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch deals. Please try again later."),console.error(de)}finally{C(!1)}},H=async()=>{try{const de=await ae.get("/accounts/admin/fetch-all");ne(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},be=async()=>{try{const de=await ae.get("/contacts/admin/fetch-all");K(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},le=async()=>{try{const de=await ae.get("/users/all");ye(Array.isArray(de.data)?de.data:[])}catch(de){console.error(de),de.response?.status===403&&G.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{Je(),H(),be(),le()},[]);const Z=de=>{de&&(he({id:de.id||null,name:de.name||"",account_id:de.account_id?.toString()||"",primary_contact_id:de.primary_contact_id?.toString()||"",stage:de.stage||"PROPOSAL",amount:de.amount?.toString()||"",close_date:de.close_date?new Date(de.close_date).toISOString().split("T")[0]:"",assigned_to:de.assigned_to?.toString()||"",currency:de.currency||"PHP",description:de.description||""}),Q(!0),X(de.id),d(null),x(!0))},_e=async(de=!1)=>{try{const D=await ae.get("/deals/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(se?.created_at?new Date(se.created_at).getTime():0)-Pe});if(N(ie),!de&&c&&c.id){const ue=ie.find(se=>se.id===c.id);ue&&d({...ue})}}catch(D){console.error("Failed to refresh deal data:",D),await Je()}},te=de=>{const D=de.name.trim();if(!D){G.error("Deal name is required.");return}if(!de.account_id){G.error("Account is required.");return}const B=q&&V?"update":"create",ie=D;M({title:B==="create"?"Confirm New Deal":"Confirm Update",message:B==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ie}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ie}),"?"]}),confirmLabel:B==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:B,formData:de,targetId:V||null,name:ie}})},Ue=de=>{if(!de)return;const D=de.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:D}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:de.id,name:D}})},Ie=de=>{if(de.target.checked){const D=Re.map(B=>B.id);I(D)}else I([])},Ge=de=>{I(D=>D.includes(de)?D.filter(B=>B!==de):[...D,de])},gt=async()=>{P.length!==0&&M({title:"Delete Deals",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:P.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${P.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:P}})},ve=async()=>{if(!T?.action){M(null);return}const{action:de}=T,{type:D,formData:B,targetId:ie,name:ue}=de;z(!0);try{if(D==="create"){E(!0);const se={name:B.name.trim(),account_id:parseInt(B.account_id),primary_contact_id:B.primary_contact_id?parseInt(B.primary_contact_id):null,stage:B.stage,amount:B.amount?parseFloat(B.amount):null,currency:B.currency||"PHP",close_date:B.close_date||null,description:B.description||null,assigned_to:B.assigned_to?parseInt(B.assigned_to):null};await ae.post("/deals/admin/create",se),G.success(`Deal "${ue}" created successfully.`),x(!1),await Je()}else if(D==="update"){if(!ie)throw new Error("Missing deal identifier for update.");E(!0);const se={};B.name!==void 0&&(se.name=B.name.trim()),B.account_id!==void 0&&B.account_id!==""&&(se.account_id=parseInt(B.account_id)),B.primary_contact_id!==void 0&&(se.primary_contact_id=B.primary_contact_id?parseInt(B.primary_contact_id):null),B.stage!==void 0&&(se.stage=B.stage),B.amount!==void 0&&B.amount!==""&&(se.amount=parseFloat(B.amount)),B.currency!==void 0&&(se.currency=B.currency),B.close_date!==void 0&&(se.close_date=B.close_date||null),B.description!==void 0&&(se.description=B.description||null),B.assigned_to!==void 0&&(se.assigned_to=B.assigned_to?parseInt(B.assigned_to):null),await ae.put(`/deals/admin/${ie}`,se),G.success(`Deal "${ue}" updated successfully.`),x(!1),await Je()}else if(D==="delete"){if(!ie)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${ie}`),G.success(`Deal "${ue}" deleted successfully.`),c?.id===ie&&d(null),await Je()}else if(D==="bulk-delete"){const{dealIds:se}=de;await ae.delete("/deals/admin/bulk-delete",{data:{deal_ids:se}}),G.success(`Successfully deleted ${se.length} deals`),I([]),await Je()}}catch(se){console.error(se);const Pe=D==="create"?"Failed to create deal. Please review the details and try again.":D==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",ge=se.response?.data?.detail||Pe;G.error(ge)}finally{(D==="create"||D==="update")&&E(!1),z(!1),M(null)}},Be=()=>{R||M(null)},nt=()=>{x(!1),he({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Q(!1),X(null),E(!1)},Te=(v??[]).filter(de=>de.stage==="PROSPECTING").length,Qe=(v??[]).filter(de=>de.stage==="QUALIFICATION").length,ct=(v??[]).filter(de=>de.stage==="PROPOSAL").length,ht=(v??[]).filter(de=>de.stage==="NEGOTIATION").length,je=(v??[]).filter(de=>de.stage==="CLOSED_WON").length,Ze=(v??[]).filter(de=>de.stage==="CLOSED_LOST").length,ce=(v??[]).filter(de=>de.stage==="CLOSED_CANCELLED").length,J=[{title:"Prospecting",value:Te,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Qe,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ct,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ht,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:je,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Ze,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ce,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:tt,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:J.map(de=>n.jsx(A$e,{...de},de.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:de=>s(de.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:de=>i(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:de=>l(de.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(de=>`${de.assigned_deals?.first_name} ${de.assigned_deals?.last_name}`))].map((de,D)=>n.jsx("option",{value:de,children:de},D))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Re.length>0&&Re.every(de=>P.includes(de.id)),onChange:Ie})}),n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:P.length>0?n.jsx("button",{onClick:gt,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${P.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ee.length>0?Re.map(de=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...de}),ee(de.id)},children:[n.jsx("td",{className:"py-3 px-4",onClick:D=>D.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:P.includes(de.id),onChange:()=>Ge(de.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.deal_id?de.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:de.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:de.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.contact?.first_name&&de.contact?.last_name?`${de.contact.first_name} ${de.contact.last_name}`:de.contact?.first_name||de.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${xe(de.stage)}`,children:Ce(de.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",de.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:de.assigned_deals?.first_name&&de.assigned_deals?.last_name?`${de.assigned_deals.first_name} ${de.assigned_deals.last_name}`:de.assigned_deals?.first_name||de.assigned_deals?.last_name||"--"})]},de.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ee.length,pageSize:A,currentPage:w,onPrev:et,onNext:De,onPageSizeChange:de=>{k(de),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(T$e,{onClose:nt,formData:ke,setFormData:he,isEditing:q,onSubmit:te,isSubmitting:_||R,accounts:W,contacts:oe,users:U}),c&&n.jsx(sZ,{relatedActs:pe,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Z,onDelete:Ue,onStatusUpdate:_e}),T&&n.jsx(_$e,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ve,onCancel:Be,loading:R})]})}function _$e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function A$e({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function T$e({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[]}){const[d,u]=h.useState(!1),f=v=>{if(v.preventDefault(),u(!0),!t.name?.trim()){G.error("Deal name is required.");return}const N=Number(t.amount);if(!t.amount||isNaN(N)||N<=0){G.error("Amount must be a number greater than 0.");return}if(!t.account_id){G.error("Please select an account.");return}if(!t.primary_contact_id){G.error("Please select a primary contact.");return}if(!t.assigned_to){G.error("Please assign this deal to a user.");return}r?.(t)},p=v=>{v.target.id==="modalBackdrop"&&e()},x=h.useMemo(()=>{const v=String(t.account_id||"").trim(),N=Array.isArray(l)?l:[];return v?N.filter(b=>{const w=[b?.account_id,b?.accountId,b?.account?.id,b?.account?.account_id,b?.account?.accountId].find(S=>S!=null&&String(S).trim()!=="");return w?String(w)===v:!1}):N},[l,t.account_id]);return h.useEffect(()=>{const v=String(t.account_id||"").trim(),N=String(t.primary_contact_id||"").trim();if(!N||!v)return;x.some(C=>String(C?.id)===N)||a(C=>({...C,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,x,a]),n.jsx("div",{id:"modalBackdrop",onClick:p,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:v=>v.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:f,noValidate:!0,children:[n.jsx(q_,{label:"Deal Name",name:"name",value:t.name,onChange:v=>a({...t,name:v.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(G_,{label:"Account",value:t.account_id||"",onChange:v=>a({...t,account_id:v}),items:o||[],getLabel:v=>v?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:d}),n.jsx(G_,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:v=>a({...t,primary_contact_id:v}),items:x||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:d,disabled:i}),n.jsx(N7,{label:"Stage",name:"stage",value:t.stage,onChange:v=>a({...t,stage:v.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(q_,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:v=>a({...t,amount:v.target.value}),placeholder:"0",required:!0,isSubmitted:d}),n.jsx(N7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:v=>a({...t,currency:v.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(q_,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:v=>a({...t,close_date:v.target.value}),disabled:i}),n.jsx(G_,{label:"Assign To",value:t.assigned_to||"",onChange:v=>a({...t,assigned_to:v}),items:c||[],getLabel:v=>`${v?.first_name??""} ${v?.last_name??""}`.trim()||v?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:d,className:"md:col-span-2"}),n.jsx(k$e,{label:"Description",name:"description",value:t.description,onChange:v=>a({...t,description:v.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function q_({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function N7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function G_({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(E$e,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function E$e({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function k$e({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var L$e=Object.defineProperty,P$e=(e,t,a)=>t in e?L$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,W_=(e,t,a)=>(P$e(e,typeof t!="symbol"?t+"":t,a),a);let D$e=class{constructor(){W_(this,"current",this.detect()),W_(this,"handoffState","pending"),W_(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Po=new D$e;function r0(e){var t;return Po.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function _k(e){var t,a;return Po.isServer?null:e==null?document:(a=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?a:document}function rZ(e){var t,a;return(a=(t=_k(e))==null?void 0:t.activeElement)!=null?a:null}function O$e(e){return rZ(e)===e}function qj(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function lc(){let e=[],t={addEventListener(a,s,r,i){return a.addEventListener(s,r,i),t.add(()=>a.removeEventListener(s,r,i))},requestAnimationFrame(...a){let s=requestAnimationFrame(...a);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...a){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...a))},setTimeout(...a){let s=setTimeout(...a);return t.add(()=>clearTimeout(s))},microTask(...a){let s={current:!0};return qj(()=>{s.current&&a[0]()}),t.add(()=>{s.current=!1})},style(a,s,r){let i=a.style.getPropertyValue(s);return Object.assign(a.style,{[s]:r}),this.add(()=>{Object.assign(a.style,{[s]:i})})},group(a){let s=lc();return a(s),this.add(()=>s.dispose())},add(a){return e.includes(a)||e.push(a),()=>{let s=e.indexOf(a);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let a of e.splice(0))a()}};return t}function Gj(){let[e]=h.useState(lc);return h.useEffect(()=>()=>e.dispose(),[e]),e}let fr=(e,t)=>{Po.isServer?h.useEffect(e,t):h.useLayoutEffect(e,t)};function tm(e){let t=h.useRef(e);return fr(()=>{t.current=e},[e]),t}let Vn=function(e){let t=tm(e);return bt.useCallback((...a)=>t.current(...a),[t])};function i0(e){return h.useMemo(()=>e,Object.values(e))}let M$e=h.createContext(void 0);function I$e(){return h.useContext(M$e)}function Ak(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Ql(e,t,...a){if(e in t){let r=t[e];return typeof r=="function"?r(...a):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Ql),s}var yw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(yw||{}),Xc=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Xc||{});function Ti(){let e=R$e();return h.useCallback(t=>$$e({mergeRefs:e,...t}),[e])}function $$e({ourProps:e,theirProps:t,slot:a,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??z$e;let c=iZ(t,e);if(i)return rb(c,a,s,o,l);let d=r??0;if(d&2){let{static:u=!1,...f}=c;if(u)return rb(f,a,s,o,l)}if(d&1){let{unmount:u=!0,...f}=c;return Ql(u?0:1,{0(){return null},1(){return rb({...f,hidden:!0,style:{display:"none"}},a,s,o,l)}})}return rb(c,a,s,o,l)}function rb(e,t={},a,s,r){let{as:i=a,children:o,refName:l="ref",...c}=V_(e,["unmount","static"]),d=e.ref!==void 0?{[l]:e.ref}:{},u=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let p=!1,x=[];for(let[v,N]of Object.entries(t))typeof N=="boolean"&&(p=!0),N===!0&&x.push(v.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(p){f["data-headlessui-state"]=x.join(" ");for(let v of x)f[`data-${v}`]=""}}if(Jg(i)&&(Object.keys(Zd(c)).length>0||Object.keys(Zd(f)).length>0))if(!h.isValidElement(u)||Array.isArray(u)&&u.length>1||F$e(u)){if(Object.keys(Zd(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Zd(c)).concat(Object.keys(Zd(f))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=u.props,x=p?.className,v=typeof x=="function"?(...C)=>Ak(x(...C),c.className):Ak(x,c.className),N=v?{className:v}:{},b=iZ(u.props,Zd(V_(c,["ref"])));for(let C in f)C in b&&delete f[C];return h.cloneElement(u,Object.assign({},b,f,d,{ref:r(U$e(u),d.ref)},N))}return h.createElement(i,Object.assign({},V_(c,["ref"]),!Jg(i)&&d,!Jg(i)&&f),u)}function R$e(){let e=h.useRef([]),t=h.useCallback(a=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(a):s.current=a)},[]);return(...a)=>{if(!a.every(s=>s==null))return e.current=a,t}}function z$e(...e){return e.every(t=>t==null)?void 0:t=>{for(let a of e)a!=null&&(typeof a=="function"?a(t):a.current=t)}}function iZ(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(a[r]!=null||(a[r]=[]),a[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in a)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(a[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in a)Object.assign(t,{[s](r,...i){let o=a[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function wr(e){var t;return Object.assign(h.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Zd(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function V_(e,t=[]){let a=Object.assign({},e);for(let s of t)s in a&&delete a[s];return a}function U$e(e){return bt.version.split(".")[0]>="19"?e.props.ref:e.ref}function Jg(e){return e===h.Fragment||e===Symbol.for("react.fragment")}function F$e(e){return Jg(e.type)}let B$e="span";var bw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(bw||{});function H$e(e,t){var a;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(a=r["aria-hidden"])!=null?a:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Ti()({ourProps:i,theirProps:r,slot:{},defaultTag:B$e,name:"Hidden"})}let Tk=wr(H$e);function q$e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function sd(e){return q$e(e)&&"tagName"in e}function Fu(e){return sd(e)&&"accessKey"in e}function Zc(e){return sd(e)&&"tabIndex"in e}function G$e(e){return sd(e)&&"style"in e}function W$e(e){return Fu(e)&&e.nodeName==="IFRAME"}function V$e(e){return Fu(e)&&e.nodeName==="INPUT"}let oZ=Symbol();function Q$e(e,t=!0){return Object.assign(e,{[oZ]:t})}function Wo(...e){let t=h.useRef(e);h.useEffect(()=>{t.current=e},[e]);let a=Vn(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[oZ])?void 0:a}let TD=h.createContext(null);TD.displayName="DescriptionContext";function lZ(){let e=h.useContext(TD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,lZ),t}return e}function Y$e(){let[e,t]=h.useState([]);return[e.length>0?e.join(" "):void 0,h.useMemo(()=>function(a){let s=Vn(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=h.useMemo(()=>({register:s,slot:a.slot,name:a.name,props:a.props,value:a.value}),[s,a.slot,a.name,a.props,a.value]);return bt.createElement(TD.Provider,{value:r},a.children)},[t])]}let K$e="p";function X$e(e,t){let a=h.useId(),s=I$e(),{id:r=`headlessui-description-${a}`,...i}=e,o=lZ(),l=Wo(t);fr(()=>o.register(r),[r,o.register]);let c=i0({...o.slot,disabled:s||!1}),d={ref:l,...o.props,id:r};return Ti()({ourProps:d,theirProps:i,slot:c,defaultTag:K$e,name:o.name||"Description"})}let Z$e=wr(X$e),J$e=Object.assign(Z$e,{});var cZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(cZ||{});let e6e=h.createContext(()=>{});function t6e({value:e,children:t}){return bt.createElement(e6e.Provider,{value:e},t)}let dZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let a=super.get(t);return a===void 0&&(a=this.factory(t),this.set(t,a)),a}};var n6e=Object.defineProperty,a6e=(e,t,a)=>t in e?n6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,s6e=(e,t,a)=>(a6e(e,t+"",a),a),uZ=(e,t,a)=>{if(!t.has(e))throw TypeError("Cannot "+a)},ai=(e,t,a)=>(uZ(e,t,"read from private field"),a?a.call(e):t.get(e)),Q_=(e,t,a)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,a)},j7=(e,t,a,s)=>(uZ(e,t,"write to private field"),t.set(e,a),a),go,Ug,Fg;let r6e=class{constructor(t){Q_(this,go,{}),Q_(this,Ug,new dZ(()=>new Set)),Q_(this,Fg,new Set),s6e(this,"disposables",lc()),j7(this,go,t),Po.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ai(this,go)}subscribe(t,a){if(Po.isServer)return()=>{};let s={selector:t,callback:a,current:t(ai(this,go))};return ai(this,Fg).add(s),this.disposables.add(()=>{ai(this,Fg).delete(s)})}on(t,a){return Po.isServer?()=>{}:(ai(this,Ug).get(t).add(a),this.disposables.add(()=>{ai(this,Ug).get(t).delete(a)}))}send(t){let a=this.reduce(ai(this,go),t);if(a!==ai(this,go)){j7(this,go,a);for(let s of ai(this,Fg)){let r=s.selector(ai(this,go));mZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of ai(this,Ug).get(t.type))s(ai(this,go),t)}}};go=new WeakMap,Ug=new WeakMap,Fg=new WeakMap;function mZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:Y_(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:Y_(e.entries(),t.entries()):C7(e)&&C7(t)?Y_(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function Y_(e,t){do{let a=e.next(),s=t.next();if(a.done&&s.done)return!0;if(a.done||s.done||!Object.is(a.value,s.value))return!1}while(!0)}function C7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var i6e=Object.defineProperty,o6e=(e,t,a)=>t in e?i6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,S7=(e,t,a)=>(o6e(e,typeof t!="symbol"?t+"":t,a),a),l6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(l6e||{});let c6e={0(e,t){let a=t.id,s=e.stack,r=e.stack.indexOf(a);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(a),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,a]}},1(e,t){let a=t.id,s=e.stack.indexOf(a);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},d6e=class fZ extends r6e{constructor(){super(...arguments),S7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),S7(this,"selectors",{isTop:(t,a)=>t.stack[t.stack.length-1]===a,inStack:(t,a)=>t.stack.includes(a)})}static new(){return new fZ({stack:[]})}reduce(t,a){return Ql(a.type,c6e,t,a)}};const hZ=new dZ(()=>d6e.new());function gZ(e,t,a=mZ){return r5e.useSyncExternalStoreWithSelector(Vn(s=>e.subscribe(u6e,s)),Vn(()=>e.state),Vn(()=>e.state),Vn(t),a)}function u6e(e){return e}function o0(e,t){let a=h.useId(),s=hZ.get(t),[r,i]=gZ(s,h.useCallback(o=>[s.selectors.isTop(o,a),s.selectors.inStack(o,a)],[s,a]));return fr(()=>{if(e)return s.actions.push(a),()=>s.actions.pop(a)},[s,e,a]),e?i?r:!0:!1}let Ek=new Map,ep=new Map;function _7(e){var t;let a=(t=ep.get(e))!=null?t:0;return ep.set(e,a+1),a!==0?()=>A7(e):(Ek.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>A7(e))}function A7(e){var t;let a=(t=ep.get(e))!=null?t:1;if(a===1?ep.delete(e):ep.set(e,a-1),a!==1)return;let s=Ek.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,Ek.delete(e))}function m6e(e,{allowed:t,disallowed:a}={}){let s=o0(e,"inert-others");fr(()=>{var r,i;if(!s)return;let o=lc();for(let c of(r=a?.())!=null?r:[])c&&o.add(_7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let d=r0(c);if(!d)continue;let u=c.parentElement;for(;u&&u!==d.body;){for(let f of u.children)l.some(p=>f.contains(p))||o.add(_7(f));u=u.parentElement}}return o.dispose},[s,t,a])}function f6e(e,t,a){let s=tm(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&a()});h.useEffect(()=>{if(!e)return;let r=t===null?null:Fu(t)?t:t.current;if(!r)return;let i=lc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let vw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),h6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var _l=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(_l||{}),kk=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(kk||{}),g6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(g6e||{});function p6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(vw)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}function x6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(h6e)).sort((t,a)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(a.tabIndex||Number.MAX_SAFE_INTEGER)))}var pZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(pZ||{});function y6e(e,t=0){var a;return e===((a=r0(e))==null?void 0:a.body)?!1:Ql(t,{0(){return e.matches(vw)},1(){let s=e;for(;s!==null;){if(s.matches(vw))return!0;s=s.parentElement}return!1}})}var b6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(b6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Dl(e){e?.focus({preventScroll:!0})}let v6e=["textarea","input"].join(",");function w6e(e){var t,a;return(a=(t=e?.matches)==null?void 0:t.call(e,v6e))!=null?a:!1}function N6e(e,t=a=>a){return e.slice().sort((a,s)=>{let r=t(a),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function tp(e,t,{sorted:a=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?_k(e[0]):document:_k(e),o=Array.isArray(e)?a?N6e(e):e:t&64?x6e(e):p6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(v=>v!=null&&"current"in v?v?.current===x:v===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=t&32?{preventScroll:!0}:{},u=0,f=o.length,p;do{if(u>=f||u+f<=0)return 0;let x=c+u;if(t&16)x=(x+f)%f;else{if(x<0)return 3;if(x>=f)return 1}p=o[x],p?.focus(d),u+=l}while(p!==rZ(p));return t&6&&w6e(p)&&p.select(),2}function xZ(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function j6e(){return/Android/gi.test(window.navigator.userAgent)}function T7(){return xZ()||j6e()}function ib(e,t,a,s){let r=tm(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function yZ(e,t,a,s){let r=tm(a);h.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const E7=30;function C6e(e,t,a){let s=tm(a),r=h.useCallback(function(l,c){if(l.defaultPrevented)return;let d=c(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=(function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let f of u)if(f!==null&&(f.contains(d)||l.composed&&l.composedPath().includes(f)))return;return!y6e(d,pZ.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),i=h.useRef(null);ib(e,"pointerdown",l=>{var c,d;T7()||(i.current=((d=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:d[0])||l.target)},!0),ib(e,"pointerup",l=>{if(T7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=h.useRef({x:0,y:0});ib(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),ib(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=E7||Math.abs(c.y-o.current.y)>=E7))return r(l,()=>Zc(l.target)?l.target:null)},!0),yZ(e,"blur",l=>r(l,()=>W$e(window.document.activeElement)?window.document.activeElement:null),!0)}function ED(...e){return h.useMemo(()=>r0(...e),[...e])}function bZ(e,t,a,s){let r=tm(a);h.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function S6e(e){return h.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function _6e(e,t){let a=e(),s=new Set;return{getSnapshot(){return a},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(a,...i);o&&(a=o,s.forEach(l=>l()))}}}function A6e(){let e;return{before({doc:t}){var a;let s=t.documentElement,r=(a=t.defaultView)!=null?a:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:a}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);a.style(s,"paddingRight",`${i}px`)}}}function T6e(){return xZ()?{before({doc:e,d:t,meta:a}){function s(r){for(let i of a().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=lc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(Zc(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:d}=new URL(c.href),u=e.querySelector(d);Zc(u)&&!s(u)&&(o=u)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),Zc(c.target)&&G$e(c.target))if(s(c.target)){let d=c.target;for(;d.parentElement&&s(d.parentElement);)d=d.parentElement;l.style(d,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(Zc(l.target)){if(V$e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function E6e(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function k7(e){let t={};for(let a of e)Object.assign(t,a(t));return t}let uu=_6e(()=>new Map,{PUSH(e,t){var a;let s=(a=this.get(e))!=null?a:{doc:e,count:0,d:lc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=k7(s.meta),this.set(e,s),this},POP(e,t){let a=this.get(e);return a&&(a.count--,a.meta.delete(t),a.computedMeta=k7(a.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},a=[T6e(),A6e(),E6e()];a.forEach(({before:s})=>s?.(t)),a.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});uu.subscribe(()=>{let e=uu.getSnapshot(),t=new Map;for(let[a]of e)t.set(a,a.documentElement.style.overflow);for(let a of e.values()){let s=t.get(a.doc)==="hidden",r=a.count!==0;(r&&!s||!r&&s)&&uu.dispatch(a.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",a),a.count===0&&uu.dispatch("TEARDOWN",a)}});function k6e(e,t,a=()=>({containers:[]})){let s=S6e(uu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return fr(()=>{if(!(!t||!e))return uu.dispatch("PUSH",t,a),()=>uu.dispatch("POP",t,a)},[e,t]),i}function L6e(e,t,a=()=>[document.body]){let s=o0(e,"scroll-lock");k6e(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],a]}})}function P6e(e=0){let[t,a]=h.useState(e),s=h.useCallback(c=>a(c),[]),r=h.useCallback(c=>a(d=>d|c),[]),i=h.useCallback(c=>(t&c)===c,[t]),o=h.useCallback(c=>a(d=>d&~c),[]),l=h.useCallback(c=>a(d=>d^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var D6e={},L7,P7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((L7=process==null?void 0:D6e)==null?void 0:L7.NODE_ENV)==="test"&&typeof((P7=Element?.prototype)==null?void 0:P7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var O6e=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(O6e||{});function M6e(e){let t={};for(let a in e)e[a]===!0&&(t[`data-${a}`]="");return t}function I6e(e,t,a,s){let[r,i]=h.useState(a),{hasFlag:o,addFlag:l,removeFlag:c}=P6e(e&&r?3:0),d=h.useRef(!1),u=h.useRef(!1),f=Gj();return fr(()=>{var p;if(e){if(a&&i(!0),!t){a&&l(3);return}return(p=s?.start)==null||p.call(s,a),$6e(t,{inFlight:d,prepare(){u.current?u.current=!1:u.current=d.current,d.current=!0,!u.current&&(a?(l(3),c(4)):(l(4),c(2)))},run(){u.current?a?(c(3),l(4)):(c(4),l(3)):a?c(1):l(1)},done(){var x;u.current&&U6e(t)||(d.current=!1,c(7),a||i(!1),(x=s?.end)==null||x.call(s,a))}})}},[e,a,t,f]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[a,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function $6e(e,{prepare:t,run:a,done:s,inFlight:r}){let i=lc();return z6e(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{a(),i.requestAnimationFrame(()=>{i.add(R6e(e,s))})}),i.dispose}function R6e(e,t){var a,s;let r=lc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(a=e.getAnimations)==null?void 0:a.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function z6e(e,{inFlight:t,prepare:a}){if(t!=null&&t.current){a();return}let s=e.style.transition;e.style.transition="none",a(),e.offsetHeight,e.style.transition=s}function U6e(e){var t,a;return((a=(t=e.getAnimations)==null?void 0:t.call(e))!=null?a:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function kD(e,t){let a=h.useRef([]),s=Vn(e);h.useEffect(()=>{let r=[...a.current];for(let[i,o]of t.entries())if(a.current[i]!==o){let l=s(t,r);return a.current=t,l}},[s,...t])}let Wj=h.createContext(null);Wj.displayName="OpenClosedContext";var Hi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Hi||{});function Vj(){return h.useContext(Wj)}function F6e({value:e,children:t}){return bt.createElement(Wj.Provider,{value:e},t)}function B6e({children:e}){return bt.createElement(Wj.Provider,{value:null},e)}function H6e(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Vc=[];H6e(()=>{function e(t){if(!Zc(t.target)||t.target===document.body||Vc[0]===t.target)return;let a=t.target;a=a.closest(vw),Vc.unshift(a??t.target),Vc=Vc.filter(s=>s!=null&&s.isConnected),Vc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function vZ(e){let t=Vn(e),a=h.useRef(!1);h.useEffect(()=>(a.current=!1,()=>{a.current=!0,qj(()=>{a.current&&t()})}),[t])}let wZ=h.createContext(!1);function q6e(){return h.useContext(wZ)}function D7(e){return bt.createElement(wZ.Provider,{value:e.force},e.children)}function G6e(e){let t=q6e(),a=h.useContext(jZ),[s,r]=h.useState(()=>{var i;if(!t&&a!==null)return(i=a.current)!=null?i:null;if(Po.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return h.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),h.useEffect(()=>{t||a!==null&&r(a.current)},[a,r,t]),s}let NZ=h.Fragment,W6e=wr(function(e,t){let{ownerDocument:a=null,...s}=e,r=h.useRef(null),i=Wo(Q$e(p=>{r.current=p}),t),o=ED(r.current),l=a??o,c=G6e(l),d=h.useContext(Lk),u=Gj(),f=Ti();return vZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Bi.createPortal(bt.createElement("div",{"data-headlessui-portal":"",ref:p=>{u.dispose(),d&&p&&u.add(d.register(p))}},f({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:NZ,name:"Portal"})),c):null});function V6e(e,t){let a=Wo(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=Ti();return s?bt.createElement(W6e,{...i,ownerDocument:r,ref:a}):o({ourProps:{ref:a},theirProps:i,slot:{},defaultTag:NZ,name:"Portal"})}let Q6e=h.Fragment,jZ=h.createContext(null);function Y6e(e,t){let{target:a,...s}=e,r={ref:Wo(t)},i=Ti();return bt.createElement(jZ.Provider,{value:a},i({ourProps:r,theirProps:s,defaultTag:Q6e,name:"Popover.Group"}))}let Lk=h.createContext(null);function K6e(){let e=h.useContext(Lk),t=h.useRef([]),a=Vn(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Vn(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=h.useMemo(()=>({register:a,unregister:s,portals:t}),[a,s,t]);return[t,h.useMemo(()=>function({children:i}){return bt.createElement(Lk.Provider,{value:r},i)},[r])]}let X6e=wr(V6e),CZ=wr(Y6e),Z6e=Object.assign(X6e,{Group:CZ});function J6e(e,t=typeof document<"u"?document.defaultView:null,a){let s=o0(e,"escape");bZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===cZ.Escape&&a(r))})}function eRe(){var e;let[t]=h.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[a,s]=h.useState((e=t?.matches)!=null?e:!1);return fr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),a}function tRe({defaultContainers:e=[],portals:t,mainTreeNode:a}={}){let s=Vn(()=>{var r,i;let o=r0(a),l=[];for(let c of e)c!==null&&(sd(c)?l.push(c):"current"in c&&sd(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&sd(c)&&c.id!=="headlessui-portal-root"&&(a&&(c.contains(a)||c.contains((i=a?.getRootNode())==null?void 0:i.host))||l.some(d=>c.contains(d))||l.push(c));return l});return{resolveContainers:s,contains:Vn(r=>s().some(i=>i.contains(r)))}}let SZ=h.createContext(null);function O7({children:e,node:t}){let[a,s]=h.useState(null),r=_Z(t??a);return bt.createElement(SZ.Provider,{value:r},e,r===null&&bt.createElement(Tk,{features:bw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=r0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&sd(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function _Z(e=null){var t;return(t=h.useContext(SZ))!=null?t:e}function nRe(){let e=typeof document>"u";return"useSyncExternalStore"in Nu?(t=>t.useSyncExternalStore)(Nu)(()=>()=>{},()=>!1,()=>!e):!1}function Qj(){let e=nRe(),[t,a]=h.useState(Po.isHandoffComplete);return t&&Po.isHandoffComplete===!1&&a(!1),h.useEffect(()=>{t!==!0&&a(!0)},[t]),h.useEffect(()=>Po.handoff(),[]),e?!1:t}function LD(){let e=h.useRef(!1);return fr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Bg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Bg||{});function aRe(){let e=h.useRef(0);return yZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function AZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let a of e.current)sd(a.current)&&t.add(a.current);return t}let sRe="div";var nu=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(nu||{});function rRe(e,t){let a=h.useRef(null),s=Wo(a,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;Qj()||(l=0);let d=ED(a.current);cRe(l,{ownerDocument:d});let u=dRe(l,{ownerDocument:d,container:a,initialFocus:r,initialFocusFallback:i});uRe(l,{ownerDocument:d,container:a,containers:o,previousActiveElement:u});let f=aRe(),p=Vn(w=>{if(!Fu(a.current))return;let S=a.current;(A=>A())(()=>{Ql(f.current,{[Bg.Forwards]:()=>{tp(S,_l.First,{skipElements:[w.relatedTarget,i]})},[Bg.Backwards]:()=>{tp(S,_l.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=o0(!!(l&2),"focus-trap#tab-lock"),v=Gj(),N=h.useRef(!1),b={ref:s,onKeyDown(w){w.key=="Tab"&&(N.current=!0,v.requestAnimationFrame(()=>{N.current=!1}))},onBlur(w){if(!(l&4))return;let S=AZ(o);Fu(a.current)&&S.add(a.current);let A=w.relatedTarget;Zc(A)&&A.dataset.headlessuiFocusGuard!=="true"&&(TZ(S,A)||(N.current?tp(a.current,Ql(f.current,{[Bg.Forwards]:()=>_l.Next,[Bg.Backwards]:()=>_l.Previous})|_l.WrapAround,{relativeTo:w.target}):Zc(w.target)&&Dl(w.target)))}},C=Ti();return bt.createElement(bt.Fragment,null,x&&bt.createElement(Tk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:bw.Focusable}),C({ourProps:b,theirProps:c,defaultTag:sRe,name:"FocusTrap"}),x&&bt.createElement(Tk,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:bw.Focusable}))}let iRe=wr(rRe),oRe=Object.assign(iRe,{features:nu});function lRe(e=!0){let t=h.useRef(Vc.slice());return kD(([a],[s])=>{s===!0&&a===!1&&qj(()=>{t.current.splice(0)}),s===!1&&a===!0&&(t.current=Vc.slice())},[e,Vc,t]),Vn(()=>{var a;return(a=t.current.find(s=>s!=null&&s.isConnected))!=null?a:null})}function cRe(e,{ownerDocument:t}){let a=!!(e&8),s=lRe(a);kD(()=>{a||O$e(t?.body)&&Dl(s())},[a]),vZ(()=>{a&&Dl(s())})}function dRe(e,{ownerDocument:t,container:a,initialFocus:s,initialFocusFallback:r}){let i=h.useRef(null),o=o0(!!(e&1),"focus-trap#initial-focus"),l=LD();return kD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&Dl(r.current);return}let c=a.current;c&&qj(()=>{if(!l.current)return;let d=t?.activeElement;if(s!=null&&s.current){if(s?.current===d){i.current=d;return}}else if(c.contains(d)){i.current=d;return}if(s!=null&&s.current)Dl(s.current);else{if(e&16){if(tp(c,_l.First|_l.AutoFocus)!==kk.Error)return}else if(tp(c,_l.First)!==kk.Error)return;if(r!=null&&r.current&&(Dl(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function uRe(e,{ownerDocument:t,container:a,containers:s,previousActiveElement:r}){let i=LD(),o=!!(e&4);bZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=AZ(s);Fu(a.current)&&c.add(a.current);let d=r.current;if(!d)return;let u=l.target;Fu(u)?TZ(c,u)?(r.current=u,Dl(u)):(l.preventDefault(),l.stopPropagation(),Dl(d)):Dl(r.current)},!0)}function TZ(e,t){for(let a of e)if(a.contains(t))return!0;return!1}function EZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Jg((t=e.as)!=null?t:LZ)||bt.Children.count(e.children)===1}let Yj=h.createContext(null);Yj.displayName="TransitionContext";var mRe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(mRe||{});function fRe(){let e=h.useContext(Yj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function hRe(){let e=h.useContext(Kj);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Kj=h.createContext(null);Kj.displayName="NestingContext";function Xj(e){return"children"in e?Xj(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function kZ(e,t){let a=tm(e),s=h.useRef([]),r=LD(),i=Gj(),o=Vn((x,v=Xc.Hidden)=>{let N=s.current.findIndex(({el:b})=>b===x);N!==-1&&(Ql(v,{[Xc.Unmount](){s.current.splice(N,1)},[Xc.Hidden](){s.current[N].state="hidden"}}),i.microTask(()=>{var b;!Xj(s)&&r.current&&((b=a.current)==null||b.call(a))}))}),l=Vn(x=>{let v=s.current.find(({el:N})=>N===x);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,Xc.Unmount)}),c=h.useRef([]),d=h.useRef(Promise.resolve()),u=h.useRef({enter:[],leave:[]}),f=Vn((x,v,N)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([b])=>b!==x)),t?.chains.current[v].push([x,new Promise(b=>{c.current.push(b)})]),t?.chains.current[v].push([x,new Promise(b=>{Promise.all(u.current[v].map(([C,w])=>w)).then(()=>b())})]),v==="enter"?d.current=d.current.then(()=>t?.wait.current).then(()=>N(v)):N(v)}),p=Vn((x,v,N)=>{Promise.all(u.current[v].splice(0).map(([b,C])=>C)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>N(v))});return h.useMemo(()=>({children:s,register:l,unregister:o,onStart:f,onStop:p,wait:d,chains:u}),[l,o,s,f,p,u,d])}let LZ=h.Fragment,PZ=yw.RenderStrategy;function gRe(e,t){var a,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:d,enterFrom:u,enterTo:f,entered:p,leave:x,leaveFrom:v,leaveTo:N,...b}=e,[C,w]=h.useState(null),S=h.useRef(null),A=EZ(e),k=Wo(...A?[S,t,w]:t===null?[]:[t]),_=(a=b.unmount)==null||a?Xc.Unmount:Xc.Hidden,{show:E,appear:T,initial:M}=fRe(),[R,z]=h.useState(E?"visible":"hidden"),P=hRe(),{register:I,unregister:q}=P;fr(()=>I(S),[I,S]),fr(()=>{if(_===Xc.Hidden&&S.current){if(E&&R!=="visible"){z("visible");return}return Ql(R,{hidden:()=>q(S),visible:()=>I(S)})}},[R,S,I,q,E,_]);let Q=Qj();fr(()=>{if(A&&Q&&R==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,R,Q,A]);let V=M&&!T,X=T&&E&&M,W=h.useRef(!1),ne=kZ(()=>{W.current||(z("hidden"),q(S))},P),oe=Vn(Oe=>{W.current=!0;let ke=Oe?"enter":"leave";ne.onStart(S,ke,he=>{he==="enter"?i?.():he==="leave"&&l?.()})}),K=Vn(Oe=>{let ke=Oe?"enter":"leave";W.current=!1,ne.onStop(S,ke,he=>{he==="enter"?o?.():he==="leave"&&c?.()}),ke==="leave"&&!Xj(ne)&&(z("hidden"),q(S))});h.useEffect(()=>{A&&r||(oe(E),K(E))},[E,A,r]);let U=!(!r||!A||!Q||V),[,ye]=I6e(U,C,E,{start:oe,end:K}),pe=Zd({ref:k,className:((s=Ak(b.className,X&&d,X&&u,ye.enter&&d,ye.enter&&ye.closed&&u,ye.enter&&!ye.closed&&f,ye.leave&&x,ye.leave&&!ye.closed&&v,ye.leave&&ye.closed&&N,!ye.transition&&E&&p))==null?void 0:s.trim())||void 0,...M6e(ye)}),Ne=0;R==="visible"&&(Ne|=Hi.Open),R==="hidden"&&(Ne|=Hi.Closed),E&&R==="hidden"&&(Ne|=Hi.Opening),!E&&R==="visible"&&(Ne|=Hi.Closing);let Se=Ti();return bt.createElement(Kj.Provider,{value:ne},bt.createElement(F6e,{value:Ne},Se({ourProps:pe,theirProps:b,defaultTag:LZ,features:PZ,visible:R==="visible",name:"Transition.Child"})))}function pRe(e,t){let{show:a,appear:s=!1,unmount:r=!0,...i}=e,o=h.useRef(null),l=EZ(e),c=Wo(...l?[o,t]:t===null?[]:[t]);Qj();let d=Vj();if(a===void 0&&d!==null&&(a=(d&Hi.Open)===Hi.Open),a===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=h.useState(a?"visible":"hidden"),p=kZ(()=>{a||f("hidden")}),[x,v]=h.useState(!0),N=h.useRef([a]);fr(()=>{x!==!1&&N.current[N.current.length-1]!==a&&(N.current.push(a),v(!1))},[N,a]);let b=h.useMemo(()=>({show:a,appear:s,initial:x}),[a,s,x]);fr(()=>{a?f("visible"):!Xj(p)&&o.current!==null&&f("hidden")},[a,p]);let C={unmount:r},w=Vn(()=>{var k;x&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Vn(()=>{var k;x&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),A=Ti();return bt.createElement(Kj.Provider,{value:p},bt.createElement(Yj.Provider,{value:b},A({ourProps:{...C,as:h.Fragment,children:bt.createElement(DZ,{ref:c,...C,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:h.Fragment,features:PZ,visible:u==="visible",name:"Transition"})))}function xRe(e,t){let a=h.useContext(Yj)!==null,s=Vj()!==null;return bt.createElement(bt.Fragment,null,!a&&s?bt.createElement(Pk,{ref:t,...e}):bt.createElement(DZ,{ref:t,...e}))}let Pk=wr(pRe),DZ=wr(gRe),PD=wr(xRe),Jb=Object.assign(Pk,{Child:PD,Root:Pk});var yRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(yRe||{}),bRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(bRe||{});let vRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},DD=h.createContext(null);DD.displayName="DialogContext";function Zj(e){let t=h.useContext(DD);if(t===null){let a=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,Zj),a}return t}function wRe(e,t){return Ql(t.type,vRe,e,t)}let M7=wr(function(e,t){let a=h.useId(),{id:s=`headlessui-dialog-${a}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:d=!1,unmount:u=!1,...f}=e,p=h.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=Vj();r===void 0&&x!==null&&(r=(x&Hi.Open)===Hi.Open);let v=h.useRef(null),N=Wo(v,t),b=ED(v.current),C=r?0:1,[w,S]=h.useReducer(wRe,{titleId:null,descriptionId:null,panelRef:h.createRef()}),A=Vn(()=>i(!1)),k=Vn(ye=>S({type:0,id:ye})),_=Qj()?C===0:!1,[E,T]=K6e(),M={get current(){var ye;return(ye=w.panelRef.current)!=null?ye:v.current}},R=_Z(),{resolveContainers:z}=tRe({mainTreeNode:R,portals:E,defaultContainers:[M]}),P=x!==null?(x&Hi.Closing)===Hi.Closing:!1;m6e(d||P?!1:_,{allowed:Vn(()=>{var ye,pe;return[(pe=(ye=v.current)==null?void 0:ye.closest("[data-headlessui-portal]"))!=null?pe:null]}),disallowed:Vn(()=>{var ye;return[(ye=R?.closest("body > *:not(#headlessui-portal-root)"))!=null?ye:null]})});let I=hZ.get(null);fr(()=>{if(_)return I.actions.push(s),()=>I.actions.pop(s)},[I,s,_]);let q=gZ(I,h.useCallback(ye=>I.selectors.isTop(ye,s),[I,s]));C6e(q,z,ye=>{ye.preventDefault(),A()}),J6e(q,b?.defaultView,ye=>{ye.preventDefault(),ye.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),A()}),L6e(d||P?!1:_,b,z),f6e(_,v,A);let[Q,V]=Y$e(),X=h.useMemo(()=>[{dialogState:C,close:A,setTitleId:k,unmount:u},w],[C,A,k,u,w]),W=i0({open:C===0}),ne={ref:N,id:s,role:l,tabIndex:-1,"aria-modal":d?void 0:C===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":Q,unmount:u},oe=!eRe(),K=nu.None;_&&!d&&(K|=nu.RestoreFocus,K|=nu.TabLock,c&&(K|=nu.AutoFocus),oe&&(K|=nu.InitialFocus));let U=Ti();return bt.createElement(B6e,null,bt.createElement(D7,{force:!0},bt.createElement(Z6e,null,bt.createElement(DD.Provider,{value:X},bt.createElement(CZ,{target:v},bt.createElement(D7,{force:!1},bt.createElement(V,{slot:W},bt.createElement(T,null,bt.createElement(oRe,{initialFocus:o,initialFocusFallback:v,containers:z,features:K},bt.createElement(t6e,{value:A},U({ourProps:ne,theirProps:f,slot:W,defaultTag:NRe,features:jRe,visible:C===0,name:"Dialog"})))))))))))}),NRe="div",jRe=yw.RenderStrategy|yw.Static;function CRe(e,t){let{transition:a=!1,open:s,...r}=e,i=Vj(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||a)&&!r.static?bt.createElement(O7,null,bt.createElement(Jb,{show:s,transition:a,unmount:r.unmount},bt.createElement(M7,{ref:t,...r}))):bt.createElement(O7,null,bt.createElement(M7,{ref:t,open:s,...r}))}let SRe="div";function _Re(e,t){let a=h.useId(),{id:s=`headlessui-dialog-panel-${a}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=Zj("Dialog.Panel"),d=Wo(t,c.panelRef),u=i0({open:o===0}),f=Vn(b=>{b.stopPropagation()}),p={ref:d,id:s,onClick:f},x=r?PD:h.Fragment,v=r?{unmount:l}:{},N=Ti();return bt.createElement(x,{...v},N({ourProps:p,theirProps:i,slot:u,defaultTag:SRe,name:"Dialog.Panel"}))}let ARe="div";function TRe(e,t){let{transition:a=!1,...s}=e,[{dialogState:r,unmount:i}]=Zj("Dialog.Backdrop"),o=i0({open:r===0}),l={ref:t,"aria-hidden":!0},c=a?PD:h.Fragment,d=a?{unmount:i}:{},u=Ti();return bt.createElement(c,{...d},u({ourProps:l,theirProps:s,slot:o,defaultTag:ARe,name:"Dialog.Backdrop"}))}let ERe="h2";function kRe(e,t){let a=h.useId(),{id:s=`headlessui-dialog-title-${a}`,...r}=e,[{dialogState:i,setTitleId:o}]=Zj("Dialog.Title"),l=Wo(t);h.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=i0({open:i===0}),d={ref:l,id:s};return Ti()({ourProps:d,theirProps:r,slot:c,defaultTag:ERe,name:"Dialog.Title"})}let LRe=wr(CRe),PRe=wr(_Re);wr(TRe);let DRe=wr(kRe),I7=Object.assign(LRe,{Panel:PRe,Title:DRe,Description:J$e});function l0({isOpen:e,onClose:t,onSave:a,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:d,onDelete:u}){const[f,p]=h.useState([]),[x,v]=h.useState([]),[N,b]=h.useState({}),{comments:C,addComment:w,refresh:S}=Ta({relatedType:"task",relatedId:i?.id});h.useEffect(()=>{i?.id&&S()},[i?.id,S]);const A=R=>{if(!R)return"";const z=String(R).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(R)},k=R=>{const{name:z,value:P}=R.target;z==="subject"&&P.trim()&&b(I=>({...I,subject:!1})),r(I=>{const q={...I,[z]:P};return z==="relatedType1"&&(q.relatedTo1="",P==="Lead"?(q.relatedType2=null,q.relatedTo2=null,v([])):P==="Account"&&(q.relatedType2="Contact")),z==="relatedType2"&&(q.relatedTo2=""),q})};h.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let z;i.relatedType1==="Lead"?z=await ae.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(z=await ae.get("/accounts/admin/fetch-all"));let P=[];if(z&&Array.isArray(z.data)&&(P=z.data),o&&i.relatedTo1)try{let I;i.relatedType1==="Lead"?I=await ae.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(I=await ae.get(`/accounts/get/${i.relatedTo1}`)),I&&I.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo1))||(P=[I.data,...P]))}catch(I){console.error("Error fetching specific related item:",I)}p(P)}catch(z){console.error("Error fetching related 1 data:",z),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),h.useEffect(()=>{if(!e||l)return;(async()=>{try{if(v([]),i.relatedType1==="Account"&&i.relatedTo1){let z;i.relatedType2==="Contact"?z=await ae.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?z=await ae.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(z=await ae.get(`/quotes/from-acc/${i.relatedTo1}`));let P=[];if(z&&Array.isArray(z.data)&&(P=z.data),o&&i.relatedTo2)try{let I;i.relatedType2==="Contact"?I=await ae.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?I=await ae.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(I=await ae.get(`/quotes/get/${i.relatedTo2}`)),I&&I.data&&(P.some(Q=>String(Q.id)===String(i.relatedTo2))||(P=[I.data,...P]))}catch(I){console.error("Error fetching specific related item:",I)}v(P)}}catch(z){console.error("Error fetching related 2 data:",z),v([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[_,E]=h.useState(!1);h.useEffect(()=>{e&&(E(!1),b({}))},[e]);const T=R=>{R.preventDefault(),E(!0);const z={};i.subject?.trim()||(z.subject=!0,G.error("Title is required")),b(z),i.relatedTo1||(z.relatedTo1=!0,G.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(z.assignedTo=!0,G.error("Assigned To is required.")),!(Object.keys(z).length>0)&&a?.(i)},M=l?"Task Details":o?"Edit Task":"Create Task";return n.jsx(Jb,{appear:!0,show:e,as:h.Fragment,children:n.jsxs(I7,{as:"div",className:"relative z-50",onClose:t,children:[n.jsx(Jb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:n.jsx("div",{className:"fixed inset-0 bg-black/40"})}),n.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:n.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:n.jsx(Jb.Child,{as:h.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:n.jsx(I7.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:n.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[n.jsx("button",{onClick:()=>{t(),E(!1),b({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Kn,{size:25})}),n.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:R=>R.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),n.jsx("button",{onClick:()=>{t(),E(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"p-6 lg:p-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:"Edit"}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>u(i),children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:n.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),n.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),n.jsx("p",{children:i.relatedTo2Text})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Priority:"}),n.jsx("p",{children:i.priority||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:i.status||""})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Due Date:"}),n.jsx("p",{children:i.dueDate||""})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"font-semibold",children:"Description:"}),n.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),n.jsx(Aa,{comments:C,onAddComment:w})]})]})]})}),!l&&n.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:k,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${N.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:k,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(K_,{disabled:!1,items:Array.isArray(f)?f:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:R=>i.relatedType1==="Lead"?R.title:R.name??"",onChange:R=>r(z=>({...z,relatedTo1:R})),required:!0,isSubmitted:_})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:k,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(K_,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:R=>i.relatedType2==="Contact"?`${R.first_name??""} ${R.last_name??""}`.trim():i.relatedType2==="Quote"?A(R.quote_id)??"":R.name??"",onChange:R=>r(z=>({...z,relatedTo2:R}))})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),n.jsx("textarea",{name:"description",value:i.description,onChange:k,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),n.jsxs("select",{name:"priority",value:i.priority,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Normal",children:"Normal"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),n.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",d?.role!=="Sales"&&n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx(K_,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:d?.role==="Sales"?`${d.first_name} ${d.last_name}`:"Search an account...",getLabel:R=>`${R.first_name} ${R.last_name}`,onChange:R=>r(z=>({...z,assignedTo:R})),disabled:l||d?.role==="Sales",required:d?.role!=="Sales",isSubmitted:_})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",value:i.status,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Not started",children:"Not started"}),n.jsx("option",{value:"In progress",children:"In Progress"}),n.jsx("option",{value:"Deferred",children:"Deferred"}),n.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{t(),E(!1),b({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function K_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const $7=["Not started","In progress","Deferred","Completed"],R7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},OZ=e=>e&&(R7[e]||R7[String(e).toUpperCase()])||"Not started",ORe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},z7=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},MRe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),OZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},IRe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=q=>{if(!q)return"";const Q=String(q).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(q)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",E="",T="",M="";const R=c(),z=v(),P=l(),I=x();if(R){w="Account",_="Account",E=z,S=String(R);const q=d(),Q=u(),V=N(),X=b(),W=f(),ne=C();q?(A="Contact",T="Contact",M=V,k=String(q)):Q?(T="Deal",A="Deal",M=X,k=String(Q)):W&&(T="Quote",A="Quote",M=ne,k=String(W))}else P?(_="Lead",E=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:OZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function $Re(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,E]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState([]),V=wt(),X=Zt(),[W,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):G.error("Task not found."),K(null)}},[oe,u,p]);const U=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),G.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(IRe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&E(1)}catch(H){console.error("Failed to load tasks:",H),G.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){U(),ye();const H=lN(e.id),be=new WebSocket(H);return be.onopen=()=>{console.log(" Connected to task notifications")},be.onmessage=le=>{try{const Z=JSON.parse(le.data);Z.type==="task_status_updated"&&(G.info(` ${Z.message}`,{position:"top-right",autoClose:4e3}),ye())}catch(Z){console.error("Error parsing notification:",Z)}},be.onerror=le=>{console.error(" WebSocket error:",le)},be.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{be&&be.readyState===WebSocket.OPEN&&be.close()}}},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:ORe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=MRe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),G.success("Task updated successfully.")):(await ae.post("/tasks/create",be),G.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";G.error(Z)}},ke=H=>{H&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>q.includes(H.id)))Q(q.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...q,...H])])}},qe=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{q.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${q.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:q}})},xe=async()=>{if(!R?.action){z(null);return}const{action:H}=R;I(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),G.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),G.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),G.error("Failed to delete task.")}finally{I(!1),z(null)}},ee=()=>{P||z(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{E(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&E(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(RRe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),$7.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:$7.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?z7(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>q.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:q.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${q.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:q.includes(H.id),onChange:()=>qe(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?z7(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>E(H=>Math.max(H-1,1)),onNext:()=>E(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{M(H),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(l0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:ke}),R&&n.jsx(zRe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function RRe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function zRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function URe(e){return _t({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const X_={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function FRe({label:e,options:t,selectedValues:a,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null);h.useEffect(()=>{function C(w){p.current&&!p.current.contains(w.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const x=t.filter(C=>C.label.toLowerCase().includes(u.toLowerCase())),v=C=>{const w=a.includes(C);let S;w?S=a.filter(A=>A!==C):S=[...a,C],s(S)},N=(C,w)=>{C.stopPropagation(),s(a.filter(S=>S!==w))},b=t.filter(C=>a.includes(C.value));return n.jsxs("div",{className:"relative",ref:p,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsxs("div",{onClick:()=>!r&&d(!c),className:`w-full border ${l&&o&&a.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[a.length===0&&n.jsx("span",{className:"text-gray-400 select-none",children:i}),b.map(C=>n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[C.label,!r&&n.jsx(Yt,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>N(w,C.value)})]},C.value)),n.jsx("div",{className:"ml-auto text-gray-400",children:n.jsx(Tt,{})})]}),c&&!r&&n.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[n.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:n.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[n.jsx(Gt,{className:"text-gray-400 mr-2"}),n.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:u,onChange:C=>f(C.target.value),autoFocus:!0})]})}),n.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(C=>{const w=a.includes(C.value);return n.jsxs("div",{onClick:()=>v(C.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[n.jsx("span",{children:C.label}),w&&n.jsx(Zk,{className:"text-indigo-600"})]},C.value)}):n.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function $c(){h.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=wt(),{id:t}=Bo(),[a,s]=h.useState(""),[r,i]=h.useState(""),[o,l]=h.useState(""),[c,d]=h.useState(null),[u,f]=h.useState(!1),[p,x]=h.useState([]),[v,N]=h.useState(!1),[b,C]=h.useState([]),[w,S]=h.useState(X_),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(null),[P,I]=h.useState("board"),[q,Q]=h.useState(null),[V,X]=h.useState(!1),[W,ne]=h.useState(null),[oe,K]=h.useState(1),[U,ye]=h.useState(10),[pe,Ne]=h.useState([]),Se=h.useRef(!1),{userRole:Oe}=Qs(),ke=h.useMemo(()=>{const ve=new Map;return p.forEach(Be=>{const nt=`${Be.name}-${Be.manager_id||"no-manager"}`;if(!ve.has(nt))ve.set(nt,{...Be,assigned_users_list:Be.assigned_to?[Be.assigned_to]:[]});else{const Te=ve.get(nt);Be.assigned_to&&(Te.assigned_users_list.some(Qe=>Qe.id===Be.assigned_to.id)||Te.assigned_users_list.push(Be.assigned_to))}}),Array.from(ve.values())},[p]),he=h.useMemo(()=>{const ve=a.trim().toLowerCase(),Be=r.trim().toLowerCase(),nt=o.trim();return[...ke].sort((Qe,ct)=>{const ht=Qe?.created_at?new Date(Qe.created_at):0;return(ct?.created_at?new Date(ct.created_at):0)-ht}).filter(Qe=>{const ct=Qe.name?.toLowerCase()||"",ht=Qe.description?.toLowerCase()||"",je=Qe.managed_by?`${Qe.managed_by.first_name} ${Qe.managed_by.last_name}`.toLowerCase():"",Ze=Qe.status?.toString().toLowerCase()||"",ce=Qe.assigned_users_list.map(ie=>`${ie.first_name} ${ie.last_name}`.toLowerCase()).join(" "),de=ve===""||[ct,ht,je,Ze,ce].some(ie=>ie&&ie.includes(ve)),D=Be===""||Ze===Be,B=nt===""||String(Qe.managed_by?.id||"")===nt||Qe.assigned_users_list.some(ie=>String(ie.id)===nt);return de&&D&&B})},[ke,a,r,o]);h.useEffect(()=>{if(Se.current){Se.current=!1;return}if(t&&ke.length>0&&!A&&!u&&!_){const ve=ke.find(Be=>Be.id===parseInt(t));ve&&d(ve)}!t&&!A&&!u&&d(null)},[t,ke,A,u,_]),h.useEffect(()=>{K(1)},[a,r,o]),h.useEffect(()=>{K(ve=>{const Be=Math.max(1,Math.ceil(he.length/U)||1);return ve>Be?Be:ve})},[he.length,U]);const qe=async()=>{try{const ve=await ae.get("/users/read/territory");C(ve.data)}catch(ve){console.error("Error fetching users:",ve)}},Ce=async()=>{N(!0);try{const ve=await ae.get("/territories/fetch"),Be=Array.isArray(ve.data)?ve.data:[];x(Be),console.log(ve.data)}catch(ve){console.error("Error fetching territories:",ve)}finally{N(!1)}};h.useEffect(()=>{qe(),Ce()},[]);const xe=ve=>{const{name:Be,value:nt}=ve.target;S(Te=>({...Te,[Be]:nt}))},ee=ve=>{S(Be=>({...Be,user_ids:ve}))},Ee=()=>{S(X_),k(!1),M(null),f(!0)},Ae=(ve=!0)=>{f(!1),k(!1),M(null),S(X_)},Re=ve=>{if(!ve)return;const Be=ve.assigned_users_list?ve.assigned_users_list.map(nt=>String(nt.id)):[];S({name:ve.name||"",description:ve.description||"",manager_id:ve.managed_by?String(ve.managed_by.id):"",user_ids:Be,company_id:ve.company_id?String(ve.company_id):""}),k(!0),M(ve.id),d(null),f(!0)},[et,De]=h.useState(!1),tt=ve=>{ve.preventDefault(),De(!0);const Be=w.name.trim();if(!Be){G.error("Territory name is required.");return}if(!w.manager_id){G.error("Territory manager is required.");return}if(w.user_ids.length===0){G.error("Please assign at least one user.");return}let nt=w.company_id?Number(w.company_id):null;if(!nt&&w.user_ids.length>0){const ct=w.user_ids[0],ht=b.find(je=>String(je.id)===String(ct));ht&&ht.company&&(nt=ht.company.id)}const Te={name:Be,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:w.user_ids.map(ct=>Number(ct)),company_id:nt},Qe=A&&T?"update":"create";Q({title:Qe==="create"?"Confirm New Territory":"Confirm Update",message:n.jsxs("span",{children:[Qe==="create"?"Create":"Update"," territory ",n.jsx("span",{className:"font-semibold",children:Be})," with ",Te.user_ids.length," assigned users?"]}),confirmLabel:Qe==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Te,targetId:T,name:Be}})},Je=ve=>{ve&&Q({title:"Delete Territory Group",message:n.jsxs("span",{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:ve.name}),"?",n.jsx("br",{}),n.jsxs("span",{className:"text-xs text-red-500",children:["This will remove assignments for all ",ve.assigned_users_list.length," users in this group."]})]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ve.id,name:ve.name}})},H=async()=>{pe.length!==0&&Q({title:"Delete Territories",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:pe.length})," selected territories? This action cannot be undone."]}),confirmLabel:`Delete ${pe.length} Territory(ies)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",territory_ids:pe}})},be=ve=>{if(ve.target.checked){const Be=te.map(nt=>nt.id);Ne(Be)}else Ne([])},le=ve=>{Ne(Be=>Be.includes(ve)?Be.filter(nt=>nt!==ve):[...Be,ve])},Z=async()=>{if(!q?.action){Q(null);return}const{action:ve}=q,{type:Be,payload:nt,targetId:Te,name:Qe}=ve;X(!0);try{Be==="create"?(E(!0),await ae.post("/territories/assign",nt),G.success(`Territory "${Qe}" created.`),await Ce(),await qe(),Ae(!1)):Be==="update"?(E(!0),await ae.put(`/territories/${Te}`,nt),G.success(`Territory "${Qe}" updated.`),Se.current=!0,Ae(!1),d(null),t&&e("/admin/territory"),await Ce(),await qe()):Be==="delete"?(ne(Te),await ae.delete(`/territories/${Te}`),G.success(`Territory "${Qe}" deleted.`),await Ce(),c?.id===Te&&d(null)):Be==="bulk-delete"&&(await ae.delete("/territories/admin/bulk-delete",{data:{territory_ids:ve.territory_ids}}),G.success(`Successfully deleted ${ve.territory_ids.length} territories`),Ne([]),await Ce())}catch(ct){console.error(ct),G.error("An error occurred.")}finally{E(!1),De(!1),ne(null),X(!1),Q(null)}},_e=()=>{V||Q(null)},te=h.useMemo(()=>{if(P==="board")return he;const ve=(oe-1)*U;return he.slice(ve,ve+U)},[he,oe,U,P]),Ue=he.length>0,Ie=()=>K(ve=>Math.max(ve-1,1)),Ge=()=>K(ve=>Math.min(ve+1,Math.ceil(he.length/U)||1)),gt=ve=>!ve||ve.length===0?"Unassigned":ve.length===1?`${ve[0].first_name} ${ve[0].last_name}`:`${ve[0].first_name} ${ve[0].last_name} +${ve.length-1} more`;return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&n.jsx(Bt,{message:"Loading territories..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[n.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[n.jsx(Xl,{className:"mr-2 text-blue-600"})," Territory"]}),n.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Oe.toLowerCase())&&(Array.isArray(b)&&b.length>0?n.jsxs("button",{onClick:Ee,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[n.jsx(yn,{})," Create Territory"]}):n.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[n.jsx(URe,{})," Add users to assign territories"]}))})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:a,onChange:ve=>s(ve.target.value)})]}),Oe.toLowerCase()!=="sales"&&n.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:n.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:ve=>l(ve.target.value),children:[n.jsx("option",{value:"",children:"Filter by Users"}),b.map(ve=>n.jsxs("option",{value:String(ve.id),children:[ve.first_name," ",ve.last_name]},ve.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>I("board"),className:`px-4 py-2 rounded-full text-sm ${P==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),n.jsx("button",{onClick:()=>I("list"),className:`px-4 py-2 rounded-full text-sm ${P==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),P==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Ue?te.map(ve=>n.jsxs("div",{onClick:()=>{d(ve);let Be;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Be="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Be="group-manager":Oe.toLowerCase()==="manager"?Be="manager":Be="sales",e(`/${Be}/territory/${ve.id}`)},className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative cursor-pointer hover:shadow-md transition",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:ve.name}),ve.description&&n.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:ve.description}),n.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[n.jsx(nn,{})," ",gt(ve.assigned_users_list)]}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),n.jsx("div",{className:"text-gray-400 text-xs text-right",children:ve.created_at?new Date(ve.created_at).toLocaleDateString():""})]},ve.id)):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),P==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:te.length>0&&te.every(ve=>pe.includes(ve.id)),onChange:be})}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Manager"}),Oe.toLowerCase()!=="sales"&&n.jsx("th",{className:"py-3 px-4 text-center w-24",children:pe.length>0?n.jsx("button",{onClick:H,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${pe.length} selected territories`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ue?te.map(ve=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[Oe.toLowerCase()!=="sales"&&n.jsx("td",{className:"py-3 px-4",onClick:Be=>Be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:pe.includes(ve.id),onChange:()=>le(ve.id)})}),n.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{d(ve);let Be;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Be="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Be="group-manager":Oe.toLowerCase()==="manager"?Be="manager":Be="sales",e(`/${Be}/territory/${ve.id}`)},children:ve.name}),n.jsx("td",{className:"py-3 px-4",children:gt(ve.assigned_users_list)}),n.jsx("td",{className:"py-3 px-4",children:ve.managed_by?`${ve.managed_by.first_name}`:""}),n.jsx("td",{})]},ve.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[n.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{d(null);let ve;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ve="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ve="group-manager":Oe.toLowerCase()==="manager"?ve="manager":ve="sales",e(`/${ve}/territory`)},children:n.jsx(Yt,{size:24})}),n.jsx("h2",{className:"text-3xl font-semibold mb-1",children:c.name}),n.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),n.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),n.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Manager"}),n.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500",children:"Assigned To"}),n.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(ve=>n.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[n.jsx(nn,{})," ",ve.first_name," ",ve.last_name]},ve.id)):"Unassigned"})]})]}),!["sales","manager"].includes(Oe.toLowerCase())&&n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:()=>Re(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{onClick:()=>Je(c),className:"bg-red-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[n.jsx(Wt,{})," Delete"]})]})]})}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[n.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{Ae(),De(!1)},children:[n.jsx(Yt,{size:22})," "]}),n.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:A?"Edit Territory":"Create Territory"}),n.jsxs("form",{className:"space-y-4",onSubmit:tt,noValidate:!0,children:[n.jsx(BRe,{label:"Territory Name",name:"name",value:w.name,onChange:xe,required:!0,isSubmitted:et}),n.jsx(HRe,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:xe,options:[{value:"",label:"Assign Manager"},...b.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`}))],required:!0,isSubmitted:et}),n.jsx(FRe,{label:n.jsxs(n.Fragment,{children:["Assign Users ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:b.map(ve=>({value:String(ve.id),label:`${ve.first_name} ${ve.last_name}`})),selectedValues:w.user_ids,onChange:ee,required:!0,isSubmitted:et}),n.jsx(qRe,{label:"Description",name:"description",value:w.description,onChange:xe}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>{Ae(),De(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-tertiary text-white rounded",children:_?"Saving...":"Save Territory"})]})]})]})}),P==="list"&&n.jsx(rn,{className:"mt-4",totalItems:he.length,pageSize:U,currentPage:oe,onPrev:Ie,onNext:Ge,onPageSizeChange:ve=>{ye(ve),K(1)},label:"territories"}),q&&n.jsx(GRe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:Z,onCancel:_e,loading:V})]})})}function BRe({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${d}
`})]})}function HRe({label:e,name:t,value:a,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!a;return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(d=>n.jsx("option",{value:d.value,children:d.label},d.value))})]})}function qRe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function GRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const WRe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],VRe=e=>e?String(e).toUpperCase():"",au=e=>{const t=VRe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},Z_=e=>{const t=au(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},U7=e=>{switch(au(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},F7=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function B7(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[P,I]=h.useState(10),[q,Q]=h.useState(1),[V,X]=h.useState([]),[W,ne]=h.useState(null),{comments:oe,addComment:K,refresh:U}=Ta({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&U()},[a?.id,U]),zs();const ye=wt(),pe=Zt(),Ne=B=>{if(!B)return"";const ie=String(B).split("-");return ie.length===3?`${ie[0]}-${ie[2]}`:String(B)},Oe={subject:"",call_time:(()=>{const B=new Date,ie=B.getFullYear(),ue=String(B.getMonth()+1).padStart(2,"0"),se=String(B.getDate()).padStart(2,"0");return`${ie}-${ue}-${se}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[ke,he]=h.useState(Oe);h.useEffect(()=>{const B=pe.state,ie=B?.callID;if(ie&&!B?.openCallModal){ne(ie),ye(pe.pathname,{replace:!0,state:{}});return}!B?.openCallModal||!B?.initialCallData||B.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||B.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),he(ue=>({...ue,...B.initialCallData,relatedTo1:B.initialCallData.relatedTo1?String(B.initialCallData.relatedTo1):"",relatedTo2:B.initialCallData.relatedTo2?String(B.initialCallData.relatedTo2):""})),ye(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),h.useEffect(()=>{if(W&&u.length>0&&!R){const B=u.find(ie=>ie.id===W);B?s(B):G.error("Call not found."),ne(null)}},[W,u,R]);const qe=async()=>{try{z(!0);const B=await ae.get("/calls/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at?new Date(se.created_at):0;return(Pe?.created_at?new Date(Pe.created_at):0)-ge});f(ue)}catch(B){console.error("Error fetching calls:",B),G.error("Failed to load calls")}finally{z(!1)}},Ce=async()=>{try{const B=await ae.get("/users/all");x(B.data)}catch(B){console.error("Error fetching users: ",B)}};h.useEffect(()=>{Ce(),qe()},[]);const[xe,ee]=h.useState(""),[Ee,Ae]=h.useState("Filter by Status"),[Re,et]=h.useState("Filter by Users");h.useEffect(()=>{Q(1)},[xe,Ee,Re,P]);const De=h.useMemo(()=>u.filter(B=>{const ie=!xe||[B.subject,B.notes,B.lead?.title,B.account?.name,B.contact?.first_name,B.contact?.last_name,B.deal?.name].some(ge=>ge&&String(ge).toLowerCase().includes(xe.toLowerCase())),ue=Ee==="Filter by Status"||au(B.status)===Ee,se=B.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"";return ie&&ue&&(Re==="Filter by Users"||se===Re)}),[u,xe,Ee,Re]),tt=h.useMemo(()=>{const B=(q-1)*P;return De.slice(B,B+P)},[De,q,P]),Je=Array.isArray(p)?p.map(B=>({id:B.id,name:`${B.first_name} ${B.last_name}`})):[],H=()=>Q(B=>Math.max(1,B-1)),be=()=>Q(B=>Math.min(B+1,Math.ceil(De.length/P)||1)),le=B=>{if(B.target.checked){const ie=tt.map(ue=>ue.id);X(ie)}else X([])},Z=B=>{X(ie=>ie.includes(B)?ie.filter(ue=>ue!==B):[...ie,B])},_e=u.length,te=u.filter(B=>au(B.status)==="PLANNED").length,Ue=u.filter(B=>au(B.status)==="HELD").length,Ie=u.filter(B=>au(B.status)==="NOT_HELD").length,Ge=[{title:"Total",value:_e,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:te,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ue,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Ie,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[gt,ve]=h.useState("Overview"),Be=B=>{const{name:ie,value:ue}=B.target;he(se=>{const Pe={...se,[ie]:ue};return ie==="relatedType1"&&(Pe.relatedTo1="",ue==="Lead"?(Pe.relatedType2=null,Pe.relatedTo2=null,d([])):ue==="Account"&&(Pe.relatedType2="Contact")),ie==="relatedType2"&&(Pe.relatedTo2=""),Pe})};h.useEffect(()=>{const B=async()=>{try{l([]);let ie;ke.relatedType1==="Lead"?ie=await ae.get("/leads/admin/getLeads"):ke.relatedType1==="Account"&&(ie=await ae.get("/accounts/admin/fetch-all")),ie&&Array.isArray(ie.data)?l(ie.data):l([])}catch(ie){console.error("Error fetching data:",ie),l([])}};ke.relatedType1&&B()},[ke.relatedType1]),h.useEffect(()=>{const B=async()=>{try{d([]);let ie;if(ke.relatedType1==="Account"&&ke.relatedTo1)ke.relatedType2==="Contact"?ie=await ae.get(`/contacts/from-acc/${ke.relatedTo1}`):ke.relatedType2==="Deal"?ie=await ae.get(`/deals/from-acc/${ke.relatedTo1}`):ke.relatedType2==="Quote"&&(ie=await ae.get(`/quotes/from-acc/${ke.relatedTo1}`));else{d([]);return}ie&&Array.isArray(ie.data)?d(ie.data):d([])}catch(ie){console.error("Error fetching data:",ie),d([])}};ke.relatedType2&&B()},[ke.relatedType2,ke.relatedTo1,ke.relatedType1]);const[nt,Te]=h.useState(!1),Qe=B=>{B.preventDefault(),Te(!0);const ie=ke.subject;if(!ie||ie.trim()===""){G.error("Subject is required.");return}if(!ke.relatedTo1){G.error(`Please select a ${ke.relatedType1||"Lead/Account"}.`);return}if(!ke.assigned_to){G.error("Subject is required.");return}const se={...ke,duration_minutes:ke.duration_minutes?parseInt(ke.duration_minutes,10):null,relatedTo1:ke.relatedTo1?parseInt(ke.relatedTo1,10):null,relatedTo2:ke.relatedType1==="Lead"?null:ke.relatedTo2?parseInt(ke.relatedTo2,10):null,relatedType2:ke.relatedType1==="Lead"?null:ke.relatedType2,assigned_to:ke.assigned_to?parseInt(ke.assigned_to,10):null},Pe=v&&b?"update":"create",ge=(ke.subject||"").trim()||"Untitled Call";i({title:Pe==="create"?"Confirm New Call":"Confirm Update",message:Pe==="create"?`Create "${ge}"?`:`Save changes to "${ge}"?`,confirmLabel:Pe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Pe,payload:se,targetId:b||null,name:ge}})},ct=B=>s(B),ht=()=>{t(!1),N(!1),C(null)},je=async()=>{V.length!==0&&i({title:"Delete Calls",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:V.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${V.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:V}})},Ze=async()=>{if(!r?.action){i(null);return}const{action:B}=r,{type:ie,payload:ue,targetId:se,name:Pe}=B;k(!0);try{if(ie==="create")S(!0),await ae.post("/calls/create",ue),G.success(`Call "${Pe}" created successfully.`),t(!1),he(Oe),N(!1),C(null),await qe();else if(ie==="update"){if(!se)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${se}`,ue),G.success(`Call "${Pe}" updated successfully.`),t(!1),he(Oe),N(!1),C(null),await qe()}else if(ie==="delete"){if(!se)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${se}`),G.success(`Call "${Pe}" deleted successfully.`),a?.id===se&&s(null),await qe()}else ie==="bulk-delete"&&(await ae.delete("/calls/admin/bulk-delete",{data:{call_ids:V}}),G.success(`Successfully deleted ${V.length} calls`),X([]),await qe())}catch(ge){const fe=ie==="create"?"Failed to create call. Please review the details and try again.":ie==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",Fe=ge?.response?.data?.detail||fe;G.error(Fe)}finally{(ie==="create"||ie==="update")&&S(!1),k(!1),i(null)}},ce=()=>{A||i(null)},J=async()=>{if(a?.id)try{M(!0),await ae.put(`/calls/${a.id}`,{status:_}),G.success(`Status updated to ${Z_(_)}`),f(B=>Array.isArray(B)?B.map(ie=>ie.id===a.id?{...ie,status:_}:ie):B),s(null)}catch(B){const ie=B.response?.data?.detail||"Failed to update status.";G.error(ie)}finally{M(!1)}};h.useEffect(()=>{a&&E(au(a.status))},[a]);const de=a?n.jsxs("div",{id:"callModalBackdrop",onClick:B=>B.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${U7(a.status)}`,children:Z_(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const B=ge=>{if(!ge)return"";const fe=new Date(ge),Fe=fe.getFullYear(),Xe=String(fe.getMonth()+1).padStart(2,"0"),pt=String(fe.getDate()).padStart(2,"0"),Nt=String(fe.getHours()).padStart(2,"0"),St=String(fe.getMinutes()).padStart(2,"0");return`${Fe}-${Xe}-${pt}T${Nt}:${St}`},ie=a.lead?"Lead":a.account?"Account":"Lead",ue=a.lead?a.lead.id:a.account?a.account.id:null,se=ie==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",Pe=ie==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;he({subject:a.subject||"",call_time:B(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:ie,relatedType2:se,relatedTo1:ue?String(ue):"",relatedTo2:Pe?String(Pe):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const B=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${B}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:B}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(B=>n.jsx("button",{onClick:()=>ve(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${gt===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[gt==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(oo,{label:"Call Time",value:F7(a.call_time)}),n.jsx(oo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(oo,{label:"Direction",value:a.direction||"--"}),n.jsx(oo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(oo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(oo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(oo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(oo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(oo,{label:"Quote",value:Ne(a.quote.quote_id)}),n.jsx(oo,{label:"Created At",value:F7(a.created_at)})]})}),gt==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:oe,onAddComment:K})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:B=>E(B.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:J,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,D=e?n.jsx("div",{id:"modalBackdrop",onClick:B=>B.target.id==="modalBackdrop"&&ht(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{ht(),Te(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Qe,noValidate:!0,children:[n.jsx(YRe,{label:"Subject",className:"md:col-span-2",name:"subject",value:ke.subject,onChange:Be,isSubmitted:nt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Be,value:ke.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||v,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(J_,{items:Array.isArray(o)?o:[],value:ke.relatedTo1??"",placeholder:`Search ${ke.relatedType1||"here"}...`,getLabel:B=>ke.relatedType1==="Lead"?B.title:B.name??"",onChange:B=>he(ie=>({...ie,relatedTo1:B})),required:!0,isSubmitted:nt,disabled:w||v})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Be,value:ke.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:ke.relatedType1==="Lead"||w||v,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(J_,{disabled:ke.relatedType1==="Lead"||w||v,items:Array.isArray(c)?c:[],value:ke.relatedTo2??"",placeholder:ke.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${ke.relatedType2||"Contact"}...`:`No ${ke.relatedType2||""} data found`,getLabel:B=>ke.relatedType2==="Contact"?`${B.first_name??""} ${B.last_name??""}`.trim():ke.relatedType2==="Quote"?Ne(B.quote_id)??"":B.name??"",onChange:B=>he(ie=>({...ie,relatedTo2:B}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:ke.call_time,onChange:Be,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:ke.duration_minutes,onChange:Be,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(J_,{items:Array.isArray(p)?p:[],value:ke.assigned_to??"",placeholder:"Search an account...",getLabel:B=>`${B.first_name} ${B.last_name}`,onChange:B=>he(ie=>({...ie,assigned_to:B})),required:!0,isSubmitted:nt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Be,value:ke.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Be,value:ke.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(KRe,{className:"col-span-2",label:"Notes",value:ke.notes,onChange:Be,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Te(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{he(Oe),N(!1),C(null),t(!0),Te(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ge.map(B=>n.jsx(QRe,{...B},B.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:xe,onChange:B=>ee(B.target.value)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:Ee,onChange:B=>Ae(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),WRe.map(B=>n.jsx("option",{value:B.value,children:B.label},B.value))]}),n.jsxs("select",{value:Re,onChange:B=>et(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Je.map(B=>n.jsx("option",{value:B.name,children:B.name},B.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:tt.length>0&&V.length===tt.length,onChange:le,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:V.length>0?n.jsx("button",{onClick:je,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${V.length} selected calls`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):tt.length>0?tt.map(B=>n.jsxs("tr",{onClick:()=>ct(B),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:ie=>ie.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:V.includes(B.id),onChange:()=>Z(B.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:B.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[B.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.lead.title}),B.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.account.name}),B.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[B.contact.first_name," ",B.contact.last_name]}),B.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:B.deal.name}),B.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(B.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B.call_time?new Date(B.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:B?.call_assign_to?`${B.call_assign_to.first_name} ${B.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${U7(B.status)}`,children:Z_(B.status)})}),n.jsx("td",{className:"py-3 px-4"})]},B.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:De.length,pageSize:P,currentPage:q,onPrev:H,onNext:be,onPageSizeChange:B=>{I(B),Q(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),de,D,r&&n.jsx(XRe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Ze,onCancel:ce,loading:A})]})}function QRe({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function YRe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function KRe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function oo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function XRe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function J_({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Jj=({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const E=new Date,T=E.getFullYear(),M=String(E.getMonth()+1).padStart(2,"0"),R=String(E.getDate()).padStart(2,"0");return{startTime:`${T}-${M}-${R}T08:00`,endTime:`${T}-${M}-${R}T09:00`}})(),[d,u]=h.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[f,p]=h.useState([]),[x,v]=h.useState([]);h.useEffect(()=>{t!==void 0&&a&&(!t.startTime||!t.endTime)&&a(E=>({...E,startTime:E.startTime||c.startTime,endTime:E.endTime||c.endTime}))},[]);const N=E=>{if(!E)return"";const T=String(E).split("-");return T.length===3?`${T[0]}-${T[2]}`:String(E)},b=t!==void 0?t:d,C=a||u,{userRole:w}=Qs();h.useEffect(()=>{const E=async()=>{try{p([]);let T;b.relatedType1==="Lead"?T=await ae.get("/leads/admin/getLeads"):b.relatedType1==="Account"&&(T=await ae.get("/accounts/admin/fetch-all"));let M=[];if(T&&Array.isArray(T.data)&&(M=T.data),s&&b.relatedTo1)try{let R;b.relatedType1==="Lead"?R=await ae.get(`/leads/get/${b.relatedTo1}`):b.relatedType1==="Account"&&(R=await ae.get(`/accounts/get/${b.relatedTo1}`)),R&&R.data&&(M.some(P=>String(P.id)===String(b.relatedTo1))||(M=[R.data,...M]))}catch(R){console.error("Error fetching specific related item:",R)}p(M)}catch(T){console.error("Error fetching relatedTo1 data:",T),p([])}};b.relatedType1&&E()},[b.relatedType1,w,s,b.relatedTo1]),h.useEffect(()=>{const E=async()=>{try{if(v([]),b.relatedType1==="Account"&&b.relatedTo1){let T;b.relatedType2==="Contact"?T=await ae.get(`/contacts/from-acc/${b.relatedTo1}`):b.relatedType2==="Deal"?T=await ae.get(`/deals/from-acc/${b.relatedTo1}`):b.relatedType2==="Quote"&&(T=await ae.get(`/quotes/from-acc/${b.relatedTo1}`)),T&&Array.isArray(T.data)?v(T.data):v([])}else v([])}catch(T){console.error("Error fetching relatedTo2 data:",T),v([])}};b.relatedType2&&E()},[b.relatedType2,b.relatedTo1,b.relatedType1]);const S=E=>{const{name:T,value:M}=E.target;C(R=>{const z={...R,[T]:M};return T==="relatedType1"&&(R.relatedType1!==M&&(z.relatedTo1=""),M==="Lead"?(z.relatedType2=null,z.relatedTo2=null,v([])):M==="Account"&&(z.relatedType2="Contact",z.relatedTo2="")),T==="relatedType2"&&R.relatedType2!==M&&(z.relatedTo2=""),z})},[A,k]=h.useState(!1),_=E=>{if(E.preventDefault(),k(!0),b.status==="--"){G.warn("Please select a valid status.");return}const T=b.subject;if(!T||T.trim()===""){G.error("Subject is required.");return}if(!b.assignedTo){G.error("Assigned To is required.");return}if(!b.relatedTo1){G.error(`Please select a ${b.relatedType1||"Lead/Account"}.`);return}r?r(b):e()};return n.jsx("div",{id:"modalBackdrop",onClick:E=>E.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:_,noValidate:!0,children:[n.jsx(ob,{label:"Subject",name:"subject",value:b.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:A,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:S,value:b.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(eA,{items:Array.isArray(f)?f:[],disabled:i,value:b.relatedTo1??"",placeholder:`Search ${b.relatedType1||"here"}...`,getLabel:E=>b.relatedType1==="Lead"?E.title:E.name??"",onChange:E=>C(T=>({...T,relatedTo1:E})),required:!0,isSubmitted:A})]}),n.jsxs("div",{className:"flex flex-col w-full",children:[n.jsx("div",{className:"relative w-25",children:n.jsxs("select",{name:"relatedType2",onChange:S,value:b.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||b.relatedType1==="Lead",children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]})}),n.jsx(eA,{items:Array.isArray(x)?x:[],value:b.relatedTo2??"",placeholder:b.relatedType1==="Lead"?"":x?.length?`Search ${b.relatedType2}...`:`No ${b.relatedType2} data found`,getLabel:E=>b.relatedType2==="Contact"?`${E.first_name??""} ${E.last_name??""}`.trim():b.relatedType2==="Quote"?N(E.quote_id)??"":E.name??"",onChange:E=>C(T=>({...T,relatedTo2:E})),disabled:b.relatedType1==="Lead"})]}),n.jsx(ob,{label:"Location",name:"location",className:"md:col-span-2",value:b.location,onChange:S,disabled:i}),n.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[n.jsx(ob,{label:"Start Time",name:"startTime",type:"datetime-local",value:b.startTime,onChange:S,disabled:i}),n.jsx(ob,{label:"End Time",name:"endTime",type:"datetime-local",value:b.endTime,onChange:S,disabled:i})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(eA,{items:Array.isArray(o)?o:[],value:b.assignedTo??"",placeholder:"Search an account...",getLabel:E=>`${E.first_name} ${E.last_name}`,onChange:E=>C(T=>({...T,assignedTo:E})),disabled:w==="Sales",required:!0,isSubmitted:A})]}),n.jsx(ZRe,{label:"Status",name:"status",value:b.status,onChange:S,options:["--","Planned","Held","Not held"].map(E=>({value:E,label:E.replace("_"," ")})),disabled:i}),n.jsx(JRe,{label:"Notes",name:"notes",value:b.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function ob({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function ZRe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const d=c&&i&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,hasError:d,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(u=>n.jsx("option",{value:u.value,children:u.label},u.value))})]})}function JRe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function eA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const gd=({meeting:e,onClose:t,onEdit:a,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{wt();const[l,c]=h.useState("Overview"),d=A=>{if(!A)return"";const k=String(A).split("-");return k.length===3?`${k[0]}-${k[2]}`:String(A)},u=A=>{const k=(A||"").toUpperCase();return k==="PLANNED"||k==="IN PROGRESS"?"PLANNED":k==="HELD"||k==="DONE"?"HELD":k==="NOT HELD"?"NOT_HELD":"PLANNED"},f=A=>{const k=(A||"").toUpperCase();return k==="PLANNED"?"PLANNED":k==="HELD"?"HELD":k==="NOT HELD"||k==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=h.useState(u(e?.status||"PENDING")),[v,N]=h.useState(!1),{comments:b,addComment:C,refresh:w}=Ta({relatedType:"meeting",relatedId:e?.id});if(h.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=A=>{const k=(A||"").toUpperCase(),_=k==="PLANNED"?"PENDING":k==="HELD"?"COMPLETED":k==="NOT_HELD"?"CANCELLED":k;switch(k){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(_){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),n.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(u(e.status))}`,children:u(e.status||"PENDING").replace("_"," ")})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!o||e.created_by===i?.id)&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{a&&a(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?n.jsx(ui,{className:"mr-2"}):n.jsx(Wt,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(A=>n.jsx("button",{onClick:()=>c(A),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===A?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:A},A))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Start Time:"}),n.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"End Time:"}),n.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),n.jsx("p",{children:e.subject||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Location:"}),n.jsx("p",{children:e.location||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Lead:"}),n.jsx("p",{children:e.lead.title})]}),e.account&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:e.account.name})]}),e.contact&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:e.deal.name})]}),e.quote&&n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote:"}),n.jsx("p",{children:d(e.quote.quote_id)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),n.jsx(Aa,{comments:b,onAddComment:C})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:A=>x(A.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const A=f(p);if(u(e.status)!==p){N(!0);try{await r(e.id,A)}catch(k){console.error("Failed to update status:",k)}finally{N(!1)}}},disabled:p===e.status||v,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||v?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:v?"Updating...":"Update"})]})]})]})]})})})},MZ=e=>e?e.toUpperCase():"",lb=e=>{const t=MZ(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},eze=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},tze=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},nze=e=>{const t=MZ(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},tA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},H7=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[E,T]=h.useState(tA),[M,R]=h.useState(!1),[z,P]=h.useState(null),[I,q]=h.useState(!1),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState([]),[K,U]=h.useState(null);h.useEffect(()=>{const De=t.state?.openMeetingModal,tt=t.state?.initialMeetingData?.relatedTo||a.get("id"),Je=t.state?.meetingID;De||tt?(b(!0),t.state?.initialMeetingData&&T(H=>({...H,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Je&&(U(Je),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(K&&i.length>0&&!l){const De=i.find(tt=>tt.id===K);De?w(De):G.error("Meeting not found."),U(null)}},[K,i,l]);const ye=async()=>{if(s&&r){const De=sessionStorage.getItem("meetingDetailData");if(De)try{const tt=JSON.parse(De);if(tt.id===parseInt(s)){w(tt),sessionStorage.removeItem("meetingDetailData");return}}catch(tt){console.error(tt)}}c(!0);try{const De=await ae.get("/meetings/admin/fetch-all"),Je=[...Array.isArray(De.data)?De.data:[]].sort((H,be)=>{const le=H?.created_at?new Date(H.created_at).getTime():0;return(be?.created_at?new Date(be.created_at).getTime():0)-le});if(o(Je),s&&!C){const H=Je.find(be=>be.id===parseInt(s));H&&w(H)}}catch{G.error("Failed to load meetings.")}finally{c(!1)}},pe=async()=>{try{const De=await ae.get("/users/all");u(Array.isArray(De.data)?De.data:[])}catch(De){console.error(De)}};h.useEffect(()=>{ye(),pe()},[]);const Ne=De=>p(De.target.value),Se=De=>{if(De.target.checked){const tt=he.map(Je=>Je.id);oe(tt)}else oe([])},Oe=De=>{oe(tt=>tt.includes(De)?tt.filter(Je=>Je!==De):[...tt,De])},ke=h.useMemo(()=>{const De=f.trim().toLowerCase(),tt=x.trim().toUpperCase();return i.filter(Je=>{const H=[Je?.activity,Je?.description,Je?.relatedTo,Je?.assignedTo],be=De===""||H.some(Z=>Z&&Z.toString().toLowerCase().includes(De)),le=tt==="FILTER BY STATUS"||lb(Je.status||"PENDING")===tt;return be&&le})},[i,f,x]);h.useEffect(()=>{A(1)},[f,x,k]);const he=h.useMemo(()=>{const De=(S-1)*k;return ke.slice(De,De+k)},[ke,S,k]),qe=()=>{b(!1),T(tA),R(!1),P(null),q(!1)},Ce=()=>{T(tA),R(!1),P(null),b(!0)},xe=De=>{let tt="";if(De.meet_assign_to?.id)tt=String(De.meet_assign_to.id);else if(De.assignedTo){const Ie=d.find(Ge=>`${Ge.first_name} ${Ge.last_name}`===De.assignedTo);tt=Ie?String(Ie.id):""}const Je=Ie=>{if(!Ie)return"";try{const Ge=new Date(Ie),gt=Ge.getTimezoneOffset()*6e4;return new Date(Ge.getTime()-gt).toISOString().slice(0,16)}catch{return""}};let H="Lead",be="",le="Contact",Z="";if(De.lead)H="Lead",be=String(De.lead.id);else if(De.account)H="Account",be=String(De.account.id),De.contact?(le="Contact",Z=String(De.contact.id)):De.deal?(le="Deal",Z=String(De.deal.id)):De.quote&&(le="Quote",Z=String(De.quote.id));else if(De.relatedType||De.related_type){const Ie=De.relatedType||De.related_type,Ge=De.related_to||De.relatedToId;Ie==="Lead"?(H="Lead",be=String(Ge)):(H="Account",be=De.account_id?String(De.account_id):"")}const _e={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},te=lb(De.status),Ue=_e[te]||"Planned";T({subject:De.subject||De.activity||"",location:De.location||"",startTime:Je(De.start_time||De.startTime),endTime:Je(De.end_time||De.endTime),status:Ue,notes:De.description||De.notes||"",assignedTo:tt,relatedType1:H,relatedTo1:be,relatedType2:le,relatedTo2:Z}),R(!0),P(De.id),w(null),b(!0)},ee=De=>{if(!De.subject?.trim())return G.error("Subject is required.");if(!De.startTime)return G.error("Start time is required.");if(De.endTime&&!(new Date(De.endTime)-new Date(De.startTime)>0))return G.error("End time must be after start time.");De.relatedType1,De.relatedTo1,De.relatedType1==="Account"&&De.relatedType2&&De.relatedTo2&&(De.relatedType2,De.relatedTo2);const tt={...De,assignedTo:parseInt(De.assignedTo),relatedTo1:parseInt(De.relatedTo1),relatedTo2:parseInt(De.relatedTo2)},Je=M&&z?"update":"create";V({title:Je==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Je} "${tt.subject}"?`,confirmLabel:Je==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Je,payload:tt,targetId:z,name:tt.subject}})},Ee=async()=>{if(!Q?.action)return;const{type:De,payload:tt,targetId:Je,name:H}=Q.action;W(!0);try{if(De==="create")q(!0),await ae.post("/meetings/create",tt),G.success(`Meeting "${H}" created.`),qe(),await ye();else if(De==="update")q(!0),await ae.put(`/meetings/${Je}`,tt),G.success(`Meeting "${H}" updated.`),qe(),await ye();else if(De==="delete")await ae.delete(`/meetings/${Je}`),G.success(`Meeting "${H}" deleted.`),C?.id===Je&&w(null),await ye();else if(De==="bulk-delete"){const{meeting_ids:be}=Q.action;await ae.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:be}}),G.success(`${be.length} meetings deleted.`),oe([]),await ye()}}catch(be){const le=be.response?.data?.detail||"Action failed.";G.error(typeof le=="string"?le:JSON.stringify(le)),console.error(le)}finally{q(!1),W(!1),V(null)}},Ae=async()=>{ne.length!==0&&V({title:"Delete Meetings",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:ne.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${ne.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:ne}})},Re=De=>{V({title:"Delete Meeting",message:`Permanently delete "${De.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:De.id,name:De.subject}})},et=async(De,tt)=>{try{await ae.put(`/meetings/${De}`,{status:tt}),G.success("Status updated"),ye(),w(null)}catch{G.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:xe,onDelete:Re,onStatusUpdate:et,isSalesView:!1}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Ce,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:Ne,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:De=>v(De.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:he.length>0&&ne.length===he.length,onChange:Se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ne.length>0?n.jsx("button",{onClick:Ae,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${ne.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:he.length>0?he.map(De=>n.jsxs("tr",{onClick:()=>w(De),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:tt=>tt.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:ne.includes(De.id),onChange:()=>Oe(De.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:De.subject}),n.jsxs("td",{className:"py-3 px-4",children:[De.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.lead.title}),De.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.account.name}),De.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[De.contact.first_name," ",De.contact.last_name]}),De.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:De.deal.name}),De.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:tze(De.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:eze(De.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[De.meet_assign_to.first_name," ",De.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${nze(lb(De.status))}`,children:lb(De.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4 text-center"})]},De.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:ke.length,pageSize:k,currentPage:S,onPrev:()=>A(De=>Math.max(1,De-1)),onNext:()=>A(De=>Math.min(De+1,Math.ceil(ke.length/k)||1)),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(Jj,{onClose:qe,formData:E,setFormData:T,isEditing:M,onSubmit:ee,isSubmitting:I||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:xe,onDelete:Re,onStatusUpdate:et,isSalesView:!1}),Q&&n.jsx(aze,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:Ee,onCancel:()=>V(null),loading:X})]})};function aze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}function sze(){const{user:e,mutate:t}=en(),a=h.useRef(null),[s,r]=h.useState(""),[i,o]=h.useState(""),[l,c]=h.useState("January"),[d,u]=h.useState(0),[f,p]=h.useState(null),[x,v]=h.useState(null),[N,b]=h.useState(!1),[C,w]=h.useState({type:"",text:""}),S=["January","February","March","April","May","June","July","August","September","October","November","December"];h.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&u(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo))},[e]);const A=T=>{const M=T.target.files?.[0];if(!M)return;if(!M.type.startsWith("image/")){w({type:"error",text:"Please select an image file"});return}if(M.size>2*1024*1024){w({type:"error",text:"Image size should be less than 2MB"});return}const R=new FileReader;R.onloadend=()=>{v(R.result)},R.readAsDataURL(M)},k=()=>{v(""),p(null)},_=async T=>{T.preventDefault(),b(!0),w({type:"",text:""});try{const M={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(d)};x!==null&&(M.company_logo=x),await ae.put("/company/update-name",M),t&&await t(),v(null),w({type:"success",text:"Company settings updated successfully!"})}catch(M){console.error("Update error:",M);const R=M.response?.data?.detail||"Failed to update settings.";w({type:"error",text:R})}finally{b(!1)}},E=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return n.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[n.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[n.jsx(tn,{})," Company Details"]}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),n.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[!E&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[n.jsx(qu,{}),n.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),n.jsx("input",{type:"text",value:s,onChange:T=>r(T.target.value),disabled:!E||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(vI,{className:"text-gray-500"})," Company Logo"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:x||f?n.jsx("img",{src:x||f,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):n.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:n.jsx(vI,{className:"text-gray-400 text-xl"})})}),E&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("input",{type:"file",ref:a,accept:"image/*",onChange:A,className:"hidden",id:"company-logo-upload"}),n.jsxs("button",{type:"button",onClick:()=>a.current?.click(),disabled:N,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[n.jsx(Pie,{className:"text-gray-500"}),x||f?"Change Logo":"Upload Logo"]}),(x||f)&&n.jsx("button",{type:"button",onClick:k,disabled:N,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Et,{className:"text-gray-500"})," Fiscal Year Start"]}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:l,onChange:T=>c(T.target.value),disabled:!E||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:S.map(T=>n.jsx("option",{value:T,children:T},T))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:n.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(Lie,{className:"text-gray-500"})," Default Tax Rate"]}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"number",step:"0.01",value:d,onChange:T=>u(T.target.value),disabled:!E||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[n.jsx(ZH,{className:"text-gray-500"})," Currency"]}),n.jsxs("div",{className:"flex gap-3 max-w-xs",children:[n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!E||N?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!E||N,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),n.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!E||N?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!E||N,className:"hidden"}),n.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),C.text&&n.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${C.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:C.text}),n.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:E&&n.jsxs("button",{type:"submit",disabled:N,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[n.jsx(eL,{}),N?"Updating...":"Save Settings"]})})]})]})}function rze(){const[e,t]=h.useState(null),[a,s]=h.useState({subject:"",category:"",description:"",priority:"medium"}),[r,i]=h.useState(""),[o,l]=h.useState(!1),[c,d]=h.useState([{id:1,sender:"support",message:"Hello! Welcome to Sari-Sari CRM Support. How can I help you today?",timestamp:new Date}]),[u,f]=h.useState(""),[p,x]=h.useState(!1),v=h.useRef(null);h.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[c]),h.useEffect(()=>{document.title="Help Center | Sari-Sari CRM"},[]);const N=[{id:1,category:"Getting Started",title:"How to create your first account?",content:"Navigate to the Accounts page from the sidebar, click the 'Add Account' button, fill in the required information such as company name, email, and phone number, then click Save."},{id:2,category:"Getting Started",title:"How to add new contacts?",content:"Go to Contacts in the sidebar, click 'Add Contact', enter the contact details including name, email, phone, and associated account, then save the contact."},{id:3,category:"Leads & Deals",title:"How to convert a lead to a deal?",content:"Open the lead you want to convert, click on the 'Convert to Deal' button, review the pre-filled information, make any necessary adjustments, and confirm the conversion."},{id:4,category:"Leads & Deals",title:"How to manage deal stages?",content:"Deals progress through stages: Prospecting, Qualification, Proposal, Negotiation, and Closed. Update the stage by editing the deal and selecting the appropriate stage from the dropdown."},{id:5,category:"Tasks & Activities",title:"How to create and assign tasks?",content:"Navigate to Tasks, click 'Add Task', fill in the task details, assign it to a team member, set the due date and priority, then save. The assigned user will be notified."},{id:6,category:"Tasks & Activities",title:"How to schedule meetings?",content:"Go to Meetings, click 'Schedule Meeting', select participants, set the date and time, add an agenda, and save. All participants will receive calendar invites."},{id:7,category:"Reports & Analytics",title:"How to view sales performance?",content:"Access the Dashboard to see key metrics. For detailed reports, navigate to Targets to view individual and team performance against set goals."},{id:8,category:"Account Settings",title:"How to manage user permissions?",content:"Go to Users in the sidebar, select a user, and edit their role. Different roles (Admin, Manager, Sales, Marketing) have different access levels and permissions."}],b=["Technical Issue","Login Problem","Data Issue","Feature Request","Performance Issue","Other"],w=N.filter(M=>M.title.toLowerCase().includes(r.toLowerCase())||M.content.toLowerCase().includes(r.toLowerCase())||M.category.toLowerCase().includes(r.toLowerCase())).reduce((M,R)=>(M[R.category]||(M[R.category]=[]),M[R.category].push(R),M),{}),S=(M,R)=>{s(z=>({...z,[M]:R}))},A=async M=>{if(M.preventDefault(),!a.subject.trim()||!a.category||!a.description.trim()){G.warn("Please fill in all required fields.");return}l(!0),setTimeout(()=>{G.success("Your issue has been submitted successfully! We'll get back to you soon."),s({subject:"",category:"",description:"",priority:"medium"}),t(null),l(!1)},1500)},[k,_]=h.useState(null),E=M=>{if(M.preventDefault(),!u.trim())return;const R={id:c.length+1,sender:"user",message:u.trim(),timestamp:new Date};d(z=>[...z,R]),f(""),x(!0),setTimeout(()=>{const z=["Thank you for your message. Let me look into that for you.","I understand your concern. Can you provide more details?","That's a great question! Here's what I can help you with...","I'm checking our system now. Please hold on for a moment.","Thanks for reaching out! I'll make sure to assist you with this."],P=z[Math.floor(Math.random()*z.length)];d(I=>[...I,{id:I.length+1,sender:"support",message:P,timestamp:new Date}]),x(!1)},1500)},T=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Help Center"}),n.jsx("p",{className:"text-gray-600",children:"How can we help you today?"})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{onClick:()=>t(e==="report"?null:"report"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="report"?"border-red-400 ring-2 ring-red-100":"border-transparent hover:border-red-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(qu,{className:"w-7 h-7 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Report an Issue"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Having a problem? Let us know"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="report"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="solutions"?null:"solutions"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="solutions"?"border-blue-400 ring-2 ring-blue-100":"border-transparent hover:border-blue-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Sie,{className:"w-7 h-7 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Browse Solutions"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Find answers to common questions"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="solutions"?"rotate-90":""}`})]})})}),n.jsx("div",{onClick:()=>t(e==="chat"?null:"chat"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="chat"?"border-green-400 ring-2 ring-green-100":"border-transparent hover:border-green-200"}`,children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center relative",children:[n.jsx(_y,{className:"w-7 h-7 text-green-600"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Live Chat Support"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"Chat with our support team"})]})]}),n.jsx(Dt,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="chat"?"rotate-90":""}`})]})})})]}),e==="report"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(wI,{className:"text-red-500"}),"Report an Issue"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Yt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("form",{onSubmit:A,className:"space-y-5",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a.subject,onChange:M=>S("subject",M.target.value),placeholder:"Brief description of the issue",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:a.category,onChange:M=>S("category",M.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition bg-white",children:[n.jsx("option",{value:"",children:"Select a category"}),b.map(M=>n.jsx("option",{value:M,children:M},M))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),n.jsx("div",{className:"flex gap-3",children:["low","medium","high"].map(M=>n.jsx("button",{type:"button",onClick:()=>S("priority",M),className:`px-4 py-2 rounded-lg border transition capitalize ${a.priority===M?M==="high"?"bg-red-500 text-white border-red-500":M==="medium"?"bg-yellow-500 text-white border-yellow-500":"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:M},M))})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:a.description,onChange:M=>S("description",M.target.value),placeholder:"Please describe the issue in detail. Include steps to reproduce if applicable.",rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition resize-none"})]}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{type:"submit",disabled:o,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2.5 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(LT,{className:"w-4 h-4"}),"Submit Issue"]})})})]})]}),e==="solutions"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Eie,{className:"text-blue-500"}),"Browse Solutions"]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:n.jsx(Yt,{className:"w-5 h-5 text-gray-500"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Gt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),placeholder:"Search for solutions...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-400 outline-none transition"})]}),n.jsx("div",{className:"space-y-6",children:Object.keys(w).length>0?Object.entries(w).map(([M,R])=>n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:M}),n.jsx("div",{className:"space-y-2",children:R.map(z=>n.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>_(k===z.id?null:z.id),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition text-left",children:[n.jsx("span",{className:"font-medium text-gray-700",children:z.title}),n.jsx(Dt,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${k===z.id?"rotate-90":""}`})]}),k===z.id&&n.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[n.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:z.content}),n.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[n.jsx(pa,{className:"text-green-500"}),"Was this helpful?",n.jsx("button",{className:"text-blue-500 hover:underline ml-1",children:"Yes"}),n.jsx("span",{children:"|"}),n.jsx("button",{className:"text-blue-500 hover:underline",children:"No"})]})]})]},z.id))})]},M)):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Gt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),n.jsxs("p",{className:"text-gray-500",children:['No solutions found matching "',r,'"']}),n.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Try a different search term or"," ",n.jsx("button",{onClick:()=>t("report"),className:"text-blue-500 hover:underline",children:"report an issue"})]})]})})]}),e==="chat"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8 animate-fade-in overflow-hidden",children:[n.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(_y,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold",children:"Live Chat Support"}),n.jsxs("p",{className:"text-green-100 text-xs flex items-center gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Online - Typically replies in minutes"]})]})]}),n.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-white/10 rounded-full transition",children:n.jsx(Yt,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"h-80 overflow-y-auto p-4 bg-gray-50 space-y-4",children:[c.map(M=>n.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-end gap-2 max-w-[80%] ${M.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${M.sender==="user"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:M.sender==="user"?n.jsx(nn,{className:"w-4 h-4"}):n.jsx(_y,{className:"w-4 h-4"})}),n.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${M.sender==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white shadow-sm border border-gray-200 text-gray-700 rounded-bl-md"}`,children:[n.jsx("p",{className:"text-sm",children:M.message}),n.jsx("p",{className:`text-[10px] mt-1 ${M.sender==="user"?"text-blue-100":"text-gray-400"}`,children:T(M.timestamp)})]})]})},M.id)),p&&n.jsx("div",{className:"flex justify-start",children:n.jsxs("div",{className:"flex items-end gap-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:n.jsx(_y,{className:"w-4 h-4"})}),n.jsx("div",{className:"bg-white shadow-sm border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-md",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),n.jsx("div",{ref:v})]}),n.jsx("form",{onSubmit:E,className:"p-4 border-t border-gray-200 bg-white",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"text",value:u,onChange:M=>f(M.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none transition"}),n.jsxs("button",{type:"submit",disabled:!u.trim(),className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(LT,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}),!e&&n.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Need more help?"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Contact our support team for personalized assistance"}),n.jsx("div",{className:"flex justify-center gap-4",children:n.jsxs("a",{href:"mailto:support@example.com",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md transition text-gray-700",children:[n.jsx(wI,{className:"w-4 h-4"}),"Email Support"]})})]})]})}function ize({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Zt(),p=wt(),{logout:x}=Qs(),{user:v,fetchUser:N}=en(),C={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[f.pathname]||"Sales Panel";h.useEffect(()=>{N();const _=()=>{N()};return window.addEventListener("userProfileUpdated",_),()=>{window.removeEventListener("userProfileUpdated",_)}},[]),h.useEffect(()=>{const _=async()=>{try{const E=await ae.get("/logs/notifications");console.log(" Fetched notifications from DB:",E.data);const T=(E.data||[]).map(M=>{const R=M.entity_id||M.new_data?.id,z=(M.entity_type||"").toLowerCase();return S({id:M.id,type:M.notif_type||M.notification_type||M.type||w(M),title:M.title||M.description,assignedBy:M.assignedBy||M.name,createdAt:M.createdAt||M.timestamp,read:M.is_read??M.read??!1,leadId:z==="lead"?R:M.leadId||M.lead_id,taskId:z==="task"?R:M.taskId||M.task_id,contactId:z==="contact"?R:M.contactId||M.contact_id,dealId:z==="deal"?R:M.dealId||M.deal_id,accountId:z==="account"?R:M.accountId||M.account_id})});o(T),c(T.filter(M=>!M.read).length)}catch(E){console.error("Failed to load history notifications",E)}};v?.id&&_()},[v?.id]);const w=_=>{const E=String(_.action||_.type||"").toUpperCase(),T={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(T[E])return T[E];const M=String(_.title||_.description||"").toLowerCase(),R=String(_.entity_type||"").toLowerCase(),z=E.includes("UPDATE"),P=E.includes("CREATE");return E.includes("DELETE"),M.includes("task")||R==="task"?z?"task_update":"task_assignment":M.includes("territory")||R==="territory"?"territory_assignment":M.includes("lead")||R==="lead"?z?"lead_update":P?"lead_assignment":"lead_update":M.includes("contact")||R==="contact"?z?"contact_update":P?"contact_assignment":"contact_update":M.includes("deal")||R==="deal"?z?"deal_update":P?"deal_assignment":"deal_update":M.includes("account")||R==="account"?z?"account_update":P?"account_assignment":"account_update":M.includes("quote")||R==="quote"?"quote":M.includes("meeting")||R==="meeting"?"meeting":M.includes("call")||R==="call"?"call":"info"},S=_=>{const E={..._};switch(E.read=!!E.read,E.type){case"territory_assignment":E.title=E.title||`You have been assigned to ${E.territoryName||"a territory"}`;break;case"lead_assigned":E.type="lead_assignment",E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_assignment":E.title=E.title||`New lead assigned: ${E.leadName||E.company||"Lead"}`;break;case"lead_update":E.title=E.title||`Lead updated: ${E.leadName||E.company||"Lead"}`;break;case"task_assignment":case"task_update":E.title=E.title||`Task: ${E.taskTitle||"Task"}`;break;case"contact_assignment":E.title=E.title||`New contact assigned: ${E.contactName||E.contact||"Contact"}`;break;case"contact_update":E.title=E.title||`Contact updated: ${E.contactName||E.contact||"Contact"}`;break;case"deal_assignment":E.title=E.title||`New deal assigned: ${E.dealName||E.name||"Deal"}`;break;case"deal_update":E.title=E.title||`Deal updated: ${E.dealName||E.name||"Deal"}`;break;case"account_assignment":E.title=E.title||`New account assigned: ${E.accountName||E.name||"Account"}`;break;case"account_update":E.title=E.title||`Account updated: ${E.accountName||E.name||"Account"}`;break;case"quote":E.title=E.title||"Quote activity";break;case"meeting":E.title=E.title||"Meeting activity";break;case"call":E.title=E.title||"Call activity";break;default:E.title=E.title||"Activity"}return E},A=_=>{switch(_.type){case"task_assignment":p(`/sales/tasks/${_.taskId||_.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${_.leadId||_.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${_.contactId||_.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${_.dealId||_.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${_.accountId||_.account_id||""}`);break;default:p("/sales/overview")}},k=async _=>{if(_.read){A(_);return}try{await ae.patch(`/logs/mark-read/${_.id}`),o(E=>E.map(T=>T.id===_.id?{...T,read:!0}:T)),c(E=>E>0?E-1:0),A(_)}catch(E){console.error("Failed to mark notification as read",E),A(_)}};return h.useEffect(()=>{if(!v?.id)return;const _=lN(v.id);console.log(" Connecting to WebSocket:",_);const E=new WebSocket(_);let T;const M=()=>{T=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return E.onopen=()=>{console.log(" Sales WS Connected to:",_),clearTimeout(T)},E.onmessage=R=>{try{const z=JSON.parse(R.data);console.log(" Notification received:",z);const P=S(z);o(I=>[P,...I]),c(I=>I+1)}catch(z){console.error("Error parsing notification:",z)}},E.onclose=()=>{console.log(" Sales WS Disconnected"),M()},E.onerror=R=>{console.error(" Sales WS Error:",R)},()=>{clearTimeout(T),E&&E.readyState===WebSocket.OPEN&&E.close()}},[v?.id]),h.useEffect(()=>{function _(E){d.current&&!d.current.contains(E.target)&&a(!1),u.current&&!u.current.contains(E.target)&&r(!1)}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ix,{className:"text-2xl"})}),v?.company?.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),n.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(sx,{className:"text-xl sm:text-2xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&n.jsx("button",{onClick:async()=>{try{await ae.patch("/logs/mark-all-read"),o(_=>_.map(E=>({...E,read:!0}))),c(0)}catch(_){console.error("Failed to mark all notifications as read",_)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),n.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((_,E)=>n.jsxs("div",{onClick:()=>k(_),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${_.read?"bg-gray-50":"bg-white"}`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${_.type==="task_assignment"||_.type==="task_update"?"bg-purple-100 text-purple-700":_.type==="lead_assignment"||_.type==="lead_update"?"bg-green-100 text-green-700":_.type==="contact_assignment"||_.type==="contact_update"?"bg-amber-100 text-amber-700":_.type==="deal_assignment"||_.type==="deal_update"?"bg-indigo-100 text-indigo-700":_.type==="account_assignment"||_.type==="account_update"?"bg-cyan-100 text-cyan-700":_.type==="territory_assignment"?"bg-blue-100 text-blue-700":_.type==="quote"?"bg-pink-100 text-pink-700":_.type==="meeting"?"bg-teal-100 text-teal-700":_.type==="call"?"bg-red-100 text-red-700":_.type==="create"?"bg-emerald-100 text-emerald-700":_.type==="update"?"bg-yellow-100 text-yellow-700":_.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:_.type==="task_assignment"||_.type==="task_update"?"Task":_.type==="lead_assignment"?"Lead":_.type==="lead_update"?"Lead Update":_.type==="contact_assignment"?"Contact":_.type==="contact_update"?"Contact Update":_.type==="deal_assignment"?"Deal":_.type==="deal_update"?"Deal Update":_.type==="account_assignment"?"Account":_.type==="account_update"?"Account Update":_.type==="territory_assignment"?"Territory":_.type==="quote"?"Quote":_.type==="meeting"?"Meeting":_.type==="call"?"Call":_.type==="create"?"Created":_.type==="update"?"Updated":_.type==="delete"?"Deleted":"Activity"}),!_.read&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium text-gray-800 text-sm",children:_.title}),n.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:_.assignedBy?`Assigned by ${_.assignedBy}`:"System"}),n.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:_.createdAt?new Date(_.createdAt).toLocaleString():""})]})]},_.id??E)):n.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),v?.company&&n.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[v.company.company_logo&&n.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),n.jsx("span",{className:"text-xs text-gray-500 truncate",children:v.company.company_name})]})]}),n.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[n.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),a(!1)},children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function oze(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),{user:r}=en(),[i,o]=h.useState(!1);h.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Zt(),d=l.includes(c.pathname);h.useEffect(()=>{d&&o(!0)},[c.pathname]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/sales/overview",className:({isActive:p})=>p?u:f,children:[n.jsx(rx,{})," Dashboard"]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/accounts",className:({isActive:p})=>p?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs($t,{to:"/sales/contacts",className:({isActive:p})=>p?u:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/sales/leads",className:({isActive:p})=>p?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/sales/deals",className:({isActive:p})=>p?u:f,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/sales/quotes",className:({isActive:p})=>p?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/sales/targets",className:({isActive:p})=>p?u:f,children:[n.jsx(or,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/sales/tasks",className:({isActive:p})=>p?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs($t,{to:"/sales/meetings",className:({isActive:p})=>p?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/sales/calls",className:({isActive:p})=>p?u:f,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/sales/audit",className:({isActive:p})=>p?u:f,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/sales/territory",className:({isActive:p})=>p?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs($t,{to:"/sales/manage-account",className:({isActive:p})=>p?u:f,children:[n.jsx(nn,{className:"text-lg"}),n.jsx("span",{children:"Manage Account"})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(ize,{toggleSidebar:()=>t(!0)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Kp,{})})]})]})}const lze=e=>n.jsx(Gt,{...e}),IZ=e=>n.jsx(xd,{...e}),$Z=e=>n.jsx(Gs,{...e}),cze=e=>n.jsx(ax,{...e}),dze=e=>n.jsx(Fw,{...e}),uze=e=>n.jsx(Et,{...e}),mze=e=>n.jsx(Lt,{...e}),fze=e=>n.jsx(Hw,{...e}),RZ=e=>n.jsx(Bw,{...e}),hze=e=>n.jsx(aa,{...e}),zZ=e=>n.jsx(nn,{...e}),gze=e=>n.jsx(Yn,{...e}),UZ=e=>n.jsx(tn,{...e}),pze=e=>n.jsx(hn,{...e}),xze=e=>n.jsx(or,{...e}),yze=e=>n.jsx(pa,{...e}),bze=e=>n.jsx(Et,{...e}),vze=e=>n.jsx($s,{...e}),wze=e=>n.jsx(Xl,{...e}),Nze=e=>n.jsx(As,{...e}),FZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,jze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Cze=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Sze=e=>{switch(e){case"call":return{Icon:mze,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:fze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:uze,color:"text-blue-500",bgColor:"bg-blue-100"}}},_ze=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},Aze=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:IZ,label:"Account"},{icon:zZ,label:"Contact"},{icon:gze,label:"Leads"},{icon:UZ,label:"Deals"},{icon:pze,label:"Quotes"},{icon:xze,label:"Target"},{icon:yze,label:"Task"},{icon:bze,label:"Meeting"},{icon:vze,label:"Call"},{icon:Nze,label:"Audit"},{icon:wze,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(lze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},Tze=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},Eze=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(RZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(Tze,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},kze=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),Lze=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let A=0;A<=C;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(b)})),S&&k&&E)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${b.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[w]} ${C} (${S}): ${A}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/sales/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(RZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(XN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},Pze=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/sales/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/sales/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:FZ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},nA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},Dze=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=Cze(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},Oze=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=jze(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?cze:dze,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/sales/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:FZ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},Mze=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=Sze(f),{text:N,bg:b}=_ze(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),M=E-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/sales/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/sales/meetings/info?id=${o}`)):d("/sales/tasks"):d(f==="call"?`/sales/calls/info?id=${o}`:f==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx($Z,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(zZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},Ize=()=>{const e=wt(),{user:t}=en(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[A,k]=h.useState(""),[_,E]=h.useState([]),[T,M]=h.useState([]),[R,z]=h.useState([]),[P,I]=h.useState(new Date),q=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(U=>{const ye=`${U.first_name||""} ${U.last_name||""}`.trim().toLowerCase(),pe=(U.company_name||"").toLowerCase(),Ne=(U.email||"").toLowerCase(),Se=(U.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:`${U.first_name||""} ${U.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:U.company_name||"No company",route:`/sales/leads/${U.id}`})}),Array.isArray(T)&&T.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.account?.name||"").toLowerCase(),Ne=(U.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Deal",type:"Deal",details:U.account?.name||"No account",route:`/sales/deals/info?id=${U.id}`})}),Array.isArray(R)&&R.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.email||"").toLowerCase(),Ne=(U.phone||"").toLowerCase(),Se=(U.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Account",type:"Account",details:U.email||U.phone||"No contact info",route:"/sales/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,T,R]),X=oe=>{oe.route&&(e(oe.route),k(""))},W=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,U,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/sales/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/sales/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/sales/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/sales/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/sales/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(U.data)?U.data:[],qe=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),E(Oe),M(ke),z(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=qe.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),Ge=new Date(_e.scheduledDate||0);return Ie-Ge}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),W(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),W(),I(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[W]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let U=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),W(),I(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,U=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{U&&clearTimeout(U),Q.current&&(Q.current.close(),Q.current=null)}},[t,W]);const ne=[{icon:hze,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:UZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:IZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/accounts")},{icon:$Z,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")}];return console.log("SalesOverview rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(Aze,{searchQuery:A,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(kze,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(Eze,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(Lze,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(Pze,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(nA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(Dze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(nA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(Oze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(nA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(Mze,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},aA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],sA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Er=e=>e?e.toUpperCase():"",rA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",$ze=e=>{switch(Er(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},Rze=e=>{switch(Er(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function zze(){const e=wt(),{user:t}=en(),a=t?.role==="Sales";h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(!1),[d,u]=h.useState(null),[f,p]=h.useState(null),[x,v]=h.useState(sA),[N,b]=h.useState(null),[C,w]=h.useState([]),[S,A]=h.useState(!1),[k,_]=h.useState([]),[E,T]=h.useState(null),[M,R]=h.useState([]),[z,P]=h.useState([]),[I,q]=h.useState("Filter by Status"),[Q,V]=h.useState(""),[X,W]=h.useState(null),[ne,oe]=h.useState(!1),[K,U]=h.useState(1),[ye,pe]=h.useState(10),[Ne,Se]=h.useState("Overview"),[Oe,ke]=h.useState(""),[he,qe]=h.useState(!1),[Ce,xe]=h.useState([]),[ee,Ee]=h.useState({}),[Ae,Re]=h.useState(null);h.useEffect(()=>{s&&!i&&a&&t&&!x.assigned_to&&v($=>({...$,assigned_to:t.id}))},[s,i,a,t,x.assigned_to]);const{comments:et,addComment:De,refresh:tt}=Ta({relatedType:"account",relatedId:N?.id});h.useEffect(()=>{N?.id&&tt()},[N?.id,tt]);const Je=h.useCallback(async($=null)=>{A(!0);try{const me=await ae.get("/accounts/admin/fetch-all"),$e=[...Array.isArray(me.data)?me.data:[]].sort((Ve,Ye)=>{const At=Ve?.created_at||Ve?.updated_at||0,Ct=Ye?.created_at||Ye?.updated_at||0;return new Date(Ct)-new Date(At)});if(w($e),$){const Ve=$e.find(Ye=>Ye.id===$);b(Ve||null)}}catch(me){console.error(me),w([]),me.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch accounts. Please try again later.")}finally{A(!1)}},[b]),H=h.useCallback(async()=>{try{const $=await ae.get("/users/all");_(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),be=h.useCallback(async()=>{try{const $=await ae.get("/territories/fetch");R(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load territories (permission denied).")}},[]),le=h.useCallback(async()=>{try{const $=await ae.get("/accounts/admin/parent-companies");P(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load parent companies (permission denied).")}},[]),Z=h.useCallback(async $=>{try{const me=await ae.get(`/activities/accounts/${$}`);Ee(me.data&&typeof me.data=="object"?me.data:{})}catch(me){console.error(me),me.response?.status===404&&(console.warn("No activities found for this account."),Ee({}))}},[]);h.useEffect(()=>{Je(),H(),be(),le()},[Je,H,be,le]),h.useEffect(()=>{N&&ke(Er(N.status)||"PROSPECT")},[N]);const _e=C.filter($=>$.acc_creator?.id===t?.id&&$.assigned_accs?.id===t?.id),te=_e.length,Ue=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="customer").length,[_e]),Ie=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="prospect").length,[_e]),Ge=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="partner").length,[_e]),gt=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="active").length,[_e]),ve=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="inactive").length,[_e]),Be=h.useMemo(()=>_e.filter($=>$.status?.toLowerCase()==="former").length,[_e]),nt=h.useMemo(()=>[{title:"Total",value:te,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Ue,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:Ie,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Ge,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:gt,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:ve,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Be,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[te,Ue,Ie,Ge,gt,ve,Be]),Te=h.useMemo(()=>{const $=Q.trim().toLowerCase(),me=I.trim().toUpperCase();return C.filter(Le=>{if(!(t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER")&&Le.status?.toUpperCase()==="INACTIVE")return!1;const Ve=[Le?.name,Le?.website,Le?.industry,Le?.territory?.name,Le?.phone_number],Ye=$===""||Ve.some(Ct=>Ct==null?!1:Ct.toString().toLowerCase().includes($)),At=me==="FILTER BY STATUS"||Er(Le.status)===me;return Ye&&At})},[C,Q,I,t]),Qe=Math.max(1,Math.ceil(Te.length/ye)||1);h.useEffect(()=>{U(1)},[Q,I]),h.useEffect(()=>{U($=>{const me=Math.max(1,Math.ceil(Te.length/ye)||1);return $>me?me:$})},[Te.length,ye]);const ct=h.useMemo(()=>{const $=(K-1)*ye;return Te.slice($,$+ye)},[Te,K,ye]),ht=$=>{if($.target.checked){const me=ct.filter(Le=>Le.assigned_accs?.id===t?.id&&Le.acc_creator?.id===t?.id).map(Le=>Le.id);xe(me)}else xe([])},je=$=>{xe(me=>me.includes($)?me.filter(Le=>Le!==$):[...me,$])},Ze=async()=>{if(Ce.length===0)return;const $=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",me=$?"delete":"archive",Le=$?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",$e=!$;W({title:`${me.charAt(0).toUpperCase()+me.slice(1)} Accounts`,message:n.jsxs("span",{children:["Are you sure you want to ",me," ",n.jsx("span",{className:"font-semibold",children:Ce.length})," selected accounts? ",Le]}),confirmLabel:`${me.charAt(0).toUpperCase()+me.slice(1)} ${Ce.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:$e?ui:null,isArchive:$e,action:{type:"bulk-delete",accountIds:Ce}})};Te.length===0||(K-1)*ye+1,Math.min(K*ye,Te.length);const ce=()=>U($=>Math.max($-1,1)),J=()=>U($=>Math.min($+1,Qe)),de=$=>{b($),Se("Overview"),ke(Er($?.status)||"PROSPECT")},D=()=>b(null),B=$=>{$.target.id==="accountModalBackdrop"&&!ne&&D()},ie=()=>{r(!1),o(!1),p(null),v(sA),c(!1),T(null)},ue=$=>{$.target.id==="modalBackdrop"&&ie()},se=$=>$?new Date($).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Pe=$=>{const{name:me,value:Le}=$.target;v($e=>({...$e,[me]:Le}))},ge=()=>{v(sA),o(!1),p(null),r(!0)},fe=$=>{b(null),$.assigned_accs?T($.assigned_accs):T(null),v({name:$.name||"",website:$.website||"",phone_number:$.phone_number||"",billing_address:$.billing_address||"",shipping_address:$.shipping_address||"",industry:$.industry||"",status:Er($.status)||"PROSPECT",territory_id:$.territory?.id?String($.territory.id):"",assigned_to:$.assigned_accs?.id?String($.assigned_accs.id):""}),o(!0),p($.id),r(!0)},Fe=$=>{if(!$)return;const me=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER",Le=me?"delete":"archive",$e=me?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Ve=!me;W({title:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,message:n.jsxs("span",{children:["Are you sure you want to ",Le," the account"," ",n.jsx("span",{className:"font-semibold",children:$.name}),"? ",$e]}),confirmLabel:`${Le.charAt(0).toUpperCase()+Le.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Ve?ui:null,isArchive:Ve,action:{type:"delete",targetId:$.id,name:$.name}})},Xe=async()=>{if(!X?.action){W(null);return}const{action:$}=X,{type:me,payload:Le,targetId:$e,name:Ve}=$;oe(!0);try{if(me==="create"){c(!0);const Ye=await ae.post("/accounts/admin",Le);le(),G.success(`Account "${Ve}" created successfully.`);const At=N?.id||null;ie(),await Je(At),!N&&Ye.data?.id}else if(me==="update"){if(!$e)throw new Error("Missing account identifier for update.");c(!0),await ae.put(`/accounts/admin/${$e}`,Le),G.success(`Account "${Ve}" updated successfully.`);const Ye=N?.id&&N.id===$e?$e:null;ie(),await Je(Ye),N?.id===$e&&b(null)}else if(me==="delete"){if(!$e)throw new Error("Missing account identifier for deletion.");const Ye=N?.id;u($e);const Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?`Account "${Ve}" deleted successfully.`:`Account "${Ve}" archived successfully.`;await ae.delete(`/accounts/admin/${$e}`),G.success(Ct),await Je(Ye&&Ye!==$e?Ye:null),Ye===$e&&b(null)}else if(me==="bulk-delete"){const{accountIds:Ye}=$,Ct=t?.role==="Admin"||t?.role==="CEO"||t?.role==="MANAGER"||t?.role==="GROUP MANAGER"?"deleted":"archived";await ae.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ye}}),G.success(`Successfully ${Ct} ${Ye.length} accounts`),xe([]),await Je()}}catch(Ye){console.error(Ye);const At=me==="create"?"Failed to create account. Please review the details and try again.":me==="update"?"Failed to update account. Please review the details and try again.":me==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",Ct=Ye.response?.data?.detail||At;G.error(Ct),(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null)}finally{(me==="create"||me==="update")&&c(!1),me==="delete"&&u(null),oe(!1),W(null)}},pt=()=>{ne||W(null)},Nt=async()=>{if(!N||!Oe)return;const $=Er(Oe),me=Er(N.status);if($!==me){qe(!0);try{await ae.put(`/accounts/admin/${N.id}`,{status:$}),G.success(`Account status updated to ${rA($)}`),w(Le=>Le.map($e=>$e.id===N.id?{...$e,status:$}:$e)),b(null)}catch(Le){console.error(Le);const $e=Le.response?.data?.detail||"Failed to update account status. Please try again.";G.error($e)}finally{qe(!1)}}},[St,Ht]=h.useState(!1),on=$=>{$.preventDefault(),Ht(!0);const me=x.name.trim();if(!me){G.error("Account name is required.");return}if(!x.assigned_to){G.error("Assigned To is required.");return}const $e={name:me,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},Ve=i&&f?"update":"create";W({title:Ve==="create"?"Confirm New Account":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:me}),"?"]}),confirmLabel:Ve==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:$e,targetId:f||null,name:me}})},cn=[{label:"Filter by Status",value:"Filter by Status"},...aA.map($=>({label:$.label,value:$.value}))],re=X?.action?.type==="delete"?X.action.targetId:null,ot=N&&(d===N.id||re===N.id),zt=N&&d===N.id,kt=N?$ze(N.status):"",Kt=N?n.jsx("div",{id:"accountModalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:D,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:N.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${kt}`,children:rA(N.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:N.assigned_accs&&N.assigned_accs.id===t?.id&&N.acc_creator&&N.acc_creator.id===t?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(N),disabled:X?.action?.type==="update"&&X.action.targetId===N.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Fe(N),disabled:!!ot,children:zt?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(ui,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map($=>n.jsx("button",{onClick:()=>Se($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:N.website?n.jsx("a",{href:N.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:N.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:N.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:N.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:N.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:N.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:N.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:N.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:N.assigned_accs?`${N.assigned_accs.first_name} ${N.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:N.acc_creator?`${N.acc_creator.first_name} ${N.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:se(N.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:se(N.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:et,onAddComment:De})]}),Ne==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:C.notes||"No notes available."})]})]}),Ne==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[ee.tasks&&ee.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ee.tasks.length,")"]})]}),Ae==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.tasks.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||"No description"}),$.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",$.assigned_to.first_name," ",$.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.due_date||$.created_at)})]},`task-${me}`))})]}),ee.meetings&&ee.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ee.meetings.length,")"]})]}),Ae==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.meetings.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||$.location||"No description"}),$.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",$.host.first_name," ",$.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.start_time||$.created_at)})]},`meeting-${me}`))})]}),ee.calls&&ee.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ee.calls.length,")"]})]}),Ae==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.calls.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.call_time||$.created_at)})]},`call-${me}`))})]}),ee.contacts&&ee.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ee.contacts.length,")"]})]}),Ae==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.contacts.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.first_name?`${$.first_name} `:"",$.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.created_at)})]},`contact-${me}`))})]}),ee.deals&&ee.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ee.deals.length,")"]})]}),Ae==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.deals.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",$.name||$.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:$.stage||$.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.close_date||$.created_at)})]},`deal-${me}`))})]}),ee.quotes&&ee.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Re(Ae==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ee.quotes.length,")"]})]}),Ae==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ae==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ee.quotes.map(($,me)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:$.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:($.quote_id?$.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:se($.presented_date)||""})]},`quote-${me}`))})]}),(!ee||(!ee.tasks||ee.tasks.length===0)&&(!ee.meetings||ee.meetings.length===0)&&(!ee.calls||ee.calls.length===0)&&(!ee.quotes||ee.quotes.length===0)&&(!ee.deals||ee.deals.length===0)&&(!ee.contacts||ee.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assigned_to:N.assigned_accs?.id?String(N.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${N.name}`,relatedType1:"Account",relatedTo1:String(N.id),relatedType2:null,relatedTo2:null,assignedTo:N.assigned_accs?.id?String(N.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Oe||Er(N?.status)||"PROSPECT",onChange:$=>ke($.target.value),children:aA.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))}),n.jsx("button",{onClick:Nt,disabled:he||!Oe||Er(Oe)===Er(N?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${he||!Oe||Er(Oe)===Er(N?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:he?"Updating...":"Update"})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ge(),Ht(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:nt.map($=>n.jsx(Uze,{...$},$.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:Q,onChange:$=>V($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:I,onChange:$=>q($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&ct.filter($=>$.assigned_accs?.id===t?.id&&$.acc_creator?.id===t?.id).every($=>Ce.includes($.id))&&ct.some($=>$.assigned_accs?.id===t?.id&&$.acc_creator?.id===t?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ce.length>0?n.jsx("button",{onClick:Ze,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Ce.length} selected accounts`,children:n.jsx(ui,{size:18})}):""})]})}),n.jsx("tbody",{children:S?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):Te.length>0?ct.map($=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{de($),Z($.id)},children:[n.jsx("td",{className:"py-3 px-4 text-center",children:$.assigned_accs?.id===t?.id&&$.acc_creator?.id===t?.id?n.jsx("input",{type:"checkbox",checked:Ce.includes($.id),onChange:()=>je($.id),onClick:me=>me.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:$.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:$.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Rze($.status)}`,children:rA($.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:$.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:$.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:$.phone_number||"--"})]})}),n.jsx("td",{className:"py-3 px-4"})]},$.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:ye,currentPage:K,onPrev:ce,onNext:J,onPageSizeChange:$=>{pe($),U(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),vt=s?n.jsx("div",{id:"modalBackdrop",onClick:ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ie(),Ht(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||ne,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:on,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Ym,{label:"Name",name:"name",value:x.name,onChange:Pe,placeholder:"Company name",required:!0,isSubmitted:St})}),n.jsx(G7,{label:"Parent Company",value:x.parent_company,onChange:$=>{v(me=>({...me,parent_company:$}))},items:z.map($=>({id:$,name:$})),getLabel:$=>$?.name||"",placeholder:"Select parent company...",disabled:l}),n.jsx(Ym,{label:"Website",name:"website",value:x.website,onChange:Pe,placeholder:"https://example.com",disabled:l}),n.jsx(Ym,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Pe,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),n.jsx(Ym,{label:"Industry",name:"industry",value:x.industry,onChange:Pe,placeholder:"Industry",disabled:l}),n.jsx(Ym,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Pe,placeholder:"Billing address",disabled:l}),n.jsx(Ym,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Pe,placeholder:"Shipping address",disabled:l}),n.jsx(q7,{label:"Status",name:"status",value:x.status,onChange:Pe,options:[{value:"",label:"Select status"},...aA],required:!0,disabled:l}),n.jsx(G7,{label:"Assigned To",value:x.assigned_to,onChange:$=>{const me=k.find($e=>String($e.id)===String($));T(me);let Le=null;me&&me.assigned_territory&&me.assigned_territory.length===1&&(Le=me.assigned_territory[0].id),v($e=>({...$e,assigned_to:$,territory_id:Le}))},items:k||[],getLabel:$=>`${$?.first_name??""} ${$?.last_name??""} (${$?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:St,disabled:l||k.length===0||a}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(q7,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Pe,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map($=>({value:String($.id),label:$.name}))||[]],disabled:l||!E||!E.assigned_territory||E.assigned_territory.length===0})}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ie(),Ht(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||ne,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||ne,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,F=X?n.jsx(Bze,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,cancelLabel:X.cancelLabel,variant:X.variant,onConfirm:Xe,onCancel:pt,loading:ne,icon:X.icon,isArchive:X.isArchive}):null;return n.jsxs(n.Fragment,{children:[Me,Kt,vt,F]})}function Uze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Ym({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function q7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function G7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(Fze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function Fze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Bze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const iA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},pl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Di=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function Hze(){const e=wt(),t=Zt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(iA),[R,z]=h.useState(""),[P,I]=h.useState("Filter by Accounts"),[q,Q]=h.useState(null),[V,X]=h.useState("Overview"),[W,ne]=h.useState(1),[oe,K]=h.useState(10),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),[ke,he]=h.useState(null),[qe,Ce]=h.useState([]),{comments:xe,addComment:ee,refresh:Ee}=Ta({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&Ee()},[u?.id,Ee]),h.useEffect(()=>{const fe=t.state?.contactID;fe&&(he(fe),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(ke&&a.length>0&&!r){const fe=a.find(Fe=>Fe.id===ke);fe?f(fe):G.error("Contact not found."),he(null)}},[ke,a,r]),h.useEffect(()=>{async function fe(){try{const Fe=await ae.get("/auth/me");Oe(Fe.data)}catch(Fe){console.error("Failed to fetch current user",Fe)}}fe()},[]);const Ae=h.useCallback(async(fe=null)=>{i(!0);try{const Fe=await ae.get("/contacts/admin/fetch-all"),pt=[...Array.isArray(Fe.data)?Fe.data:[]].sort((Nt,St)=>{const Ht=Nt?.created_at||Nt?.updated_at||0,on=St?.created_at||St?.updated_at||0;return new Date(on)-new Date(Ht)});if(s(pt),fe){const Nt=pt.find(St=>St.id===fe);f(Nt||null)}}catch(Fe){console.error(Fe),s([]),Fe.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),Re=h.useCallback(async()=>{try{const fe=await ae.get("/accounts/admin/fetch-all"),Xe=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>(pt?.name||"").localeCompare(Nt?.name||""));l(Xe)}catch(fe){console.error(fe),l([]),fe.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),et=h.useCallback(async()=>{try{const fe=await ae.get("/users/all"),Xe=[...Array.isArray(fe.data)?fe.data:[]].sort((pt,Nt)=>pl(pt).localeCompare(pl(Nt)));d(Xe)}catch(fe){console.error(fe),d([]),fe.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async fe=>{try{const Fe=await ae.get(`/activities/contact/${fe}`);ye(Fe.data&&typeof Fe.data=="object"?Fe.data:{})}catch(Fe){console.error(Fe),Fe.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ae(),Re(),et()},[Ae,Re,et]);const tt=h.useMemo(()=>{const fe=new Map;o.forEach(Xe=>{Xe?.id&&Xe?.name&&fe.set(String(Xe.id),Xe.name)}),a.forEach(Xe=>{Xe?.account_id&&Xe?.account?.name&&fe.set(String(Xe.account_id),Xe.account.name)});const Fe=Array.from(fe.entries()).sort((Xe,pt)=>Xe[1].localeCompare(pt[1])).map(([Xe,pt])=>({value:Xe,label:pt}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...Fe]},[o,a]),Je=h.useMemo(()=>{const fe=R.trim().toLowerCase(),Fe=P.trim();return a.filter(Xe=>{const pt=[Xe?.first_name,Xe?.last_name,Xe?.email,Xe?.title,Xe?.department,Xe?.account?.name,Xe?.account?.status,Xe?.work_phone,Xe?.mobile_phone_1,Xe?.mobile_phone_2,Xe?.assigned_contact?.first_name,Xe?.assigned_contact?.last_name,Xe?.contact_creator?.first_name,Xe?.contact_creator?.last_name,Xe?.notes,Di(Xe?.created_at),Di(Xe?.updated_at)],Nt=fe===""||pt.some(Ht=>Ht==null?!1:Ht.toString().toLowerCase().includes(fe)),St=Fe==="Filter by Accounts"||String(Xe.account_id)===Fe;return Nt&&St})},[a,R,P]),H=Math.max(1,Math.ceil(Je.length/oe)||1);h.useEffect(()=>{ne(1)},[R,P]),h.useEffect(()=>{ne(fe=>{const Fe=Math.max(1,Math.ceil(Je.length/oe)||1);return fe>Fe?Fe:fe})},[Je.length,oe]);const be=h.useMemo(()=>{const fe=(W-1)*oe;return Je.slice(fe,fe+oe)},[Je,W,oe]),le=()=>ne(fe=>Math.max(fe-1,1)),Z=()=>ne(fe=>Math.min(fe+1,H)),_e=h.useMemo(()=>{if(!v||!_)return o;const fe=a.find(Xe=>Xe.id===_);return!fe||!fe.account||o.some(Xe=>Xe.id===fe.account.id)?o:[...o,fe.account]},[o,v,_,a]),te=h.useCallback(()=>{x(!1),N(!1),E(null),M(iA),C(!1),ct(!1)},[]),Ue=fe=>{fe.target.id==="modalBackdrop"&&!b&&!A&&te()},Ie=fe=>{const{name:Fe,value:Xe}=fe.target;M(pt=>({...pt,[Fe]:Xe}))},Ge=()=>{M(iA),N(!1),E(null),x(!0),Se?.role==="Sales"&&M(fe=>({...fe,assigned_to:Se.id}))},gt=async fe=>{if(!fe)return;const Fe=await ae.get(`/accounts/get/${fe.account_id}`);M({first_name:fe.first_name||"",last_name:fe.last_name||"",account_id:Fe.data.id?Fe.data.id:"",title:fe.title||"",department:fe.department||"",email:fe.email||"",work_phone:fe.work_phone||"",mobile_phone_1:fe.mobile_phone_1||"",mobile_phone_2:fe.mobile_phone_2||"",notes:fe.notes||"",assigned_to:fe.assigned_to?String(fe.assigned_to):""}),N(!0),E(fe.id),x(!0),f(null)},ve=fe=>{if(!fe)return;const Fe=pl(fe)||"this contact",Xe=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER",pt=Xe?"delete":"archive",Nt=Xe?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",St=!Xe;S({title:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,message:n.jsxs("span",{children:["Are you sure you want to ",pt," ",n.jsx("span",{className:"font-semibold",children:Fe}),"? ",Nt]}),confirmLabel:`${pt.charAt(0).toUpperCase()+pt.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:St?ui:null,isArchive:St,action:{type:"delete",targetId:fe.id,name:Fe}})},Be=()=>{const fe=be.filter(Fe=>Fe.assigned_contact?.id===Se?.id&&Fe.contact_creator?.id===Se?.id);qe.length===fe.length&&fe.length>0?Ce([]):Ce(fe.map(Fe=>Fe.id))},nt=fe=>{Ce(Fe=>Fe.includes(fe)?Fe.filter(Xe=>Xe!==fe):[...Fe,fe])},Te=async()=>{if(qe.length===0)return;const fe=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER",Fe=fe?"delete":"archive",Xe=fe?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",pt=!fe;S({title:`${Fe.charAt(0).toUpperCase()+Fe.slice(1)} Contacts`,message:n.jsxs("span",{children:["Are you sure you want to ",Fe," ",n.jsx("span",{className:"font-semibold",children:qe.length})," selected contacts? ",Xe]}),confirmLabel:`${Fe.charAt(0).toUpperCase()+Fe.slice(1)} ${qe.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:pt?ui:null,isArchive:pt,action:{type:"bulk-delete",contactIds:qe}})},[Qe,ct]=h.useState(!1),ht=fe=>{fe.preventDefault(),ct(!0);const Fe=T.first_name.trim(),Xe=T.last_name.trim();if(!Fe||!Xe){G.error("First name and last name are required.");return}if(!T.account_id){G.error("Account is required.");return}if(!T.assigned_to){G.error("Assigned To is required.");return}const Nt=T.email?.trim();if(!Nt){G.error("Email is required.");return}if(!Nt.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Nt)){G.error("Please enter a valid email address.");return}const Ht={first_name:Fe,last_name:Xe,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},on=v&&_?"update":"create",cn=`${Fe} ${Xe}`.trim();S({title:on==="create"?"Confirm New Contact":"Confirm Update",message:on==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:cn})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:cn}),"?"]}),confirmLabel:on==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:on,payload:Ht,targetId:_||null,name:cn}})},je=async()=>{if(!w?.action){S(null);return}const{action:fe}=w,{type:Fe,payload:Xe,targetId:pt,name:Nt}=fe;k(!0);try{if(Fe==="create"){C(!0),await ae.post("/contacts/admin",Xe),G.success(`Contact "${Nt}" created successfully.`);const St=u?.id||null;te(),await Ae(St)}else if(Fe==="update"){if(!pt)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${pt}`,Xe),G.success(`Contact "${Nt}" updated successfully.`);const St=u?.id&&u.id===pt?pt:u?.id||null;te(),await Ae(St),u?.id===pt&&f(null)}else if(Fe==="delete"){if(!pt)throw new Error("Missing contact identifier for deletion.");const St=u?.id;Q(pt);const on=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER"?`Contact "${Nt}" deleted successfully.`:`Contact "${Nt}" archived successfully.`;await ae.delete(`/contacts/admin/${pt}`),G.success(on),await Ae(St&&St!==pt?St:null),St===pt&&f(null)}else if(Fe==="bulk-delete"){const{contactIds:St}=fe;if(!St||St.length===0)throw new Error("No contacts provided for bulk deletion.");const on=Se?.role==="Admin"||Se?.role==="CEO"||Se?.role==="MANAGER"||Se?.role==="GROUP MANAGER"?`Successfully deleted ${St.length} contact(s).`:`Successfully archived ${St.length} contact(s).`;await ae.delete("/contacts/admin/bulk-delete",{data:{contact_ids:St}}),G.success(on),Ce([]),await Ae(),f(null)}}catch(St){console.error(St);const Ht=Fe==="create"?"Failed to create contact. Please review the details and try again.":Fe==="update"?"Failed to update contact. Please review the details and try again.":Fe==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",on=St.response?.data?.detail||Ht;G.error(on)}finally{(Fe==="create"||Fe==="update")&&C(!1),Fe==="delete"&&Q(null),k(!1),S(null)}},Ze=()=>{A||S(null)},ce=fe=>{f(fe),X("Overview")},J=()=>f(null),de=fe=>{fe.target.id==="contactModalBackdrop"&&!A&&J()},D=w?.action?.type==="delete"?w.action.targetId:null,B=u&&(q===u.id||D===u.id),ie=u&&q===u.id,ue=u?n.jsx("div",{id:"contactModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:fe=>fe.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:J,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:pl(u)||"Unnamed contact"})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:u.assigned_contact&&u.assigned_contact.id===Se?.id&&u.contact_creator&&u.contact_creator.id===Se?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>gt(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>ve(u),disabled:!!B,children:ie?"Archiving...":n.jsxs(n.Fragment,{children:[n.jsx(ui,{className:"mr-2"}),"Archive"]})})]})})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(fe=>n.jsx("button",{onClick:()=>X(fe),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===fe?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:fe},fe))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:pl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Di(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Di(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:xe,onAddComment:ee})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||"No description"}),fe.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",fe.assigned_to.first_name," ",fe.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.due_date||fe.created_at)})]},`task-${Fe}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.description||fe.location||"No description"}),fe.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",fe.host.first_name," ",fe.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.start_time||fe.created_at)})]},`meeting-${Fe}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:fe.subject||fe.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:fe.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.call_time||fe.created_at)})]},`call-${Fe}`))})]}),U.contacts&&U.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",U.contacts.length,")"]})]}),pe==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.contacts.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.first_name?`${fe.first_name} `:"",fe.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.created_at)})]},`contact-${Fe}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[fe.deal_id?fe.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",fe.name||fe.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:fe.stage||fe.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.close_date||fe.created_at)})]},`deal-${Fe}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((fe,Fe)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(fe.quote_id?fe.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fe.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Di(fe.presented_date)||""})]},`quote-${Fe}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const fe=encodeURIComponent(u.email),Fe=encodeURIComponent(""),Xe=encodeURIComponent(""),pt=`mailto:${fe}?subject=${Fe}&body=${Xe}`;window.location.href=pt},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${pl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,se=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{Ge(),ct(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:fe=>z(fe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:fe=>I(fe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map(fe=>n.jsx("option",{value:fe.value,children:fe.label},fe.value??fe.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:be.length>0&&be.filter(fe=>fe.assigned_contact?.id===Se?.id&&fe.contact_creator?.id===Se?.id).every(fe=>qe.includes(fe.id))&&be.some(fe=>fe.assigned_contact?.id===Se?.id&&fe.contact_creator?.id===Se?.id),onChange:Be,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:qe.length>0?n.jsx("button",{onClick:Te,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${qe.length} selected contacts`,children:n.jsx(ui,{size:18})}):""})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Je.length>0?be.map(fe=>{const Fe=[{Icon:na,value:fe.email,key:"email"},{Icon:Lt,value:fe.work_phone,key:"work_phone"},{Icon:id,value:fe.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:fe.mobile_phone_2,key:"mobile_phone_2"}].filter(Xe=>!!Xe.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:Xe=>Xe.stopPropagation(),children:fe.assigned_contact&&fe.assigned_contact.id===Se?.id&&fe.contact_creator&&fe.contact_creator.id===Se?.id?n.jsx("input",{type:"checkbox",checked:qe.includes(fe.id),onChange:()=>nt(fe.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Xe=>Xe.stopPropagation()}):null}),n.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:pl(fe)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:fe.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Mx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:fe.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:Fe.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:Fe.map(({Icon:Xe,value:pt,key:Nt})=>{const St=bt.createElement(Xe,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[St,n.jsx("span",{children:pt})]},Nt)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:fe.assigned_contact?`${fe.assigned_contact.first_name} ${fe.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{ce(fe),De(fe.id)},children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:Di(fe.created_at)||"--"})]})})]},fe.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Je.length,pageSize:oe,currentPage:W,onPrev:le,onNext:Z,onPageSizeChange:fe=>{K(fe),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Pe=p?n.jsx("div",{id:"modalBackdrop",onClick:Ue,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:fe=>fe.stopPropagation(),children:[n.jsx("button",{onClick:()=>{te(),ct(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ht,noValidate:!0,children:[n.jsx(Rc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Ie,placeholder:"First name",required:!0,isSubmitted:Qe}),n.jsx(Rc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Ie,placeholder:"Last name",required:!0,isSubmitted:Qe}),n.jsx(W7,{label:"Account",value:T.account_id,onChange:fe=>M(Fe=>({...Fe,account_id:fe})),items:v?_e:o||[],getLabel:fe=>fe?.name??"",placeholder:"Search account...",disabled:b||(v?_e.length===0:o.length===0),required:!0,isSubmitted:Qe}),n.jsx(W7,{label:"Assigned To",value:T.assigned_to,onChange:fe=>M(Fe=>({...Fe,assigned_to:fe})),items:c||[],getLabel:fe=>`${fe?.first_name??""} ${fe?.last_name??""} (${fe?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Qe,disabled:b||c.length===0||Se?.role==="Sales"}),n.jsx(Rc,{label:"Title",name:"title",value:T.title,onChange:Ie,placeholder:"Job title",disabled:b}),n.jsx(Rc,{label:"Department",name:"department",value:T.department,onChange:Ie,placeholder:"Department",disabled:b}),n.jsx(Rc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Ie,placeholder:"example@email.com",required:!0,isSubmitted:Qe}),n.jsx(Rc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Rc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Rc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ie,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Gze,{label:"Notes",name:"notes",value:T.notes,onChange:Ie,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{te(),ct(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,ge=w?n.jsx(Wze,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:je,onCancel:Ze,loading:A,icon:w.icon,isArchive:w.isArchive}):null;return n.jsxs(n.Fragment,{children:[se,ue,Pe,ge]})}function Rc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function W7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(qze,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function qze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function Gze({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Wze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:d=null,isArchive:u=!1}){if(!e)return null;const f=u?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${f}`,disabled:o,children:[d&&n.jsx(d,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const oA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function BZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const I=await ae.get(`/leads/get/${c}`);u(I.data),v(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){G.error("Lead must be Qualified before it can be converted.");return}const I=await ae.put(`/leads/${d.id}/update/status`,{status:x});G.success("Lead status updated successfully");const q={...d,status:I.data.status};u(q),i&&i(q),a&&a(),t&&t()}catch(I){console.error(I),G.error("Failed to update lead status")}},R=async I=>{const q={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",q),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const V=(await ae.post("/accounts/convertedLead",q)).data.id,X={...A,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",U),pe=await ae.put(`/leads/convert/${I.id}`);i&&i(null),a(),G.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";G.error(V)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,q=>q.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oA(I.due_date||I.created_at)})]},`task-${q}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oA(I.start_time||I.created_at)})]},`meeting-${q}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:oA(I.call_time||I.created_at)})]},`call-${q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),q=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${I}?subject=${q}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>v(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const Vze=Vf.all(),lA=Vze.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),Qze=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),Yze=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},cA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function Kze(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(cA),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState(!1),[W,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[U,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const qe=async()=>{try{const ce=await ae.get("/leads/getUsers");l(ce.data)}catch(ce){console.error(`Error fetching users: ${ce}`)}},Ce=async()=>{x(!0);try{const ce=await ae.get("/leads/admin/getLeads");f(ce.data),console.log(ce.data)}catch(ce){console.error(`Error fetching leads: ${ce}`)}finally{x(!1)}};h.useEffect(()=>{qe(),Ce()},[]);const{user:xe}=en(),ee=xe?.role==="Sales";h.useEffect(()=>{r&&!T&&ee&&xe&&!_.lead_owner&&E(ce=>({...ce,lead_owner:xe.id}))},[r,T,ee,xe,_.lead_owner]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const ce=u.find(J=>J.id===Number(t));ce&&s(ce)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(U){const J=(B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);if(ie)return{code:ie[1],number:ie[2]};if(B.startsWith("+")){const ue=B.match(/^(\+\d{1,3})/);if(ue)return{code:ue[1],number:B.substring(ue[1].length).trim()}}return{code:"+63",number:B}})(U.work_phone),de=[];U.work_phone&&de.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&de.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&de.push(`Mobile 2: ${U.mobile_phone_2}`);const D=de.length>0?de.join(" | "):"";Ne({name:U.company_name||"",website:"",countryCode:J.code,phone_number:J.number,combinedPhoneNumbers:D,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Oe({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const Ee=ce=>N(ce.target.value),Ae=h.useMemo(()=>{const ce=v.trim().toLowerCase(),J=b.trim().toUpperCase();return u.filter(de=>{const D=[de?.first_name,de?.last_name,de?.company_name,de?.title,de?.email,de?.work_phone,de?.assigned_to?`${de.assigned_to.first_name} ${de.assigned_to.last_name}`:""],B=ce===""||D.some(ue=>ue==null||ue===""?!1:ue.toString().toLowerCase().includes(ce));let ie=!1;return J==="FILTER BY STATUS"?ie=(de.status?de.status.toUpperCase():"")!=="CONVERTED":ie=(de.status?de.status.toUpperCase():"")===J,B&&ie})},[u,v,b]),Re=Math.max(1,Math.ceil(Ae.length/A)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(ce=>{const J=Math.max(1,Math.ceil(Ae.length/A)||1);return ce>J?J:ce})},[Ae.length,A]);const et=h.useMemo(()=>{const ce=(w-1)*A;return Ae.slice(ce,ce+A)},[Ae,w,A]),De=()=>S(ce=>Math.max(ce-1,1)),tt=()=>S(ce=>Math.min(ce+1,Re)),Je=h.useCallback(async ce=>{try{const J=await ae.get(`/activities/lead/${ce}`);ne(J.data&&typeof J.data=="object"?J.data:{})}catch(J){console.error(J),J.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),H=ce=>{s(ce),Je(ce.id)},be=()=>{s(null),t&&e("/admin/leads",{replace:!0})},le=()=>{i(!1),E(cA),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},Z=ce=>{ce.target.id==="modalBackdrop"&&le()},_e=()=>{E(cA),M(!1),z(null),d(null),i(!0)},te=ce=>{if(!ce){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",ce),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const J=ue=>{if(!ue)return{code:"+63",number:""};const se=ue.match(/^(\+\d+)\s(.+)$/);return se?{code:se[1],number:se[2]}:{code:"+63",number:ue}},de=J(ce.work_phone),D=J(ce.mobile_phone_1),B=J(ce.mobile_phone_2);let ie="";if(ce.assigned_to){ie=String(ce.assigned_to.id);const ue=o?.find(se=>se.id===ce.assigned_to.id);d(ue)}E({first_name:ce.first_name||"",last_name:ce.last_name||"",company_name:ce.company_name||"",title:ce.title||"",department:ce.department||"",email:ce.email||"",work_ccode:de.code,work_phone:de.number,m1_ccode:D.code,mobile_phone_1:D.number,m2_ccode:B.code,mobile_phone_2:B.number,address:ce.address||"",notes:ce.notes||"",source:ce.source||"",territory_id:ce.territory?.id||null,lead_owner:ie,status:ce.status||"New"}),M(!0),z(ce.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Ue=ce=>{if(!ce){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",ce);const J=`${ce.first_name} ${ce.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:J}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ce.id,name:J}})},Ie=ce=>{const{name:J,value:de}=ce.target;if(E(D=>({...D,[J]:de})),J==="lead_owner"){const D=o.find(B=>B.id===parseInt(de));d(D)}},[Ge,gt]=h.useState(!1),ve=ce=>{if(ce.preventDefault(),gt(!0),!_.last_name?.trim()){G.error("Last name is required.");return}if(!_.company_name?.trim()){G.error("Company is required.");return}if(!_.email?.trim()){G.error("Email is required.");return}if(!_.email.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){G.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){G.error("Please assign a lead owner.");return}const de={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},D=T&&R?"update":"create",B=`${_.first_name} ${_.last_name}`;Q({title:D==="create"?"Confirm New Lead":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:D,payload:de,targetId:R||null,name:B}})},Be=async()=>{if(!q?.action){Q(null);return}const{action:ce}=q,{type:J,payload:de,targetId:D,name:B,lead:ie}=ce;console.log(de),X(!0);try{if(J==="create")I(!0),await ae.post("/leads/create",de),G.success(`Lead "${B}" created successfully.`),le(),await Ce();else if(J==="update"){if(!D)throw new Error("Missing lead identifier for update.");I(!0);const ue=await ae.put(`/leads/${D}`,de);G.success(`Lead "${B}" updated successfully.`),a&&a.id===D&&s(null),le(),await Ce()}else if(J==="delete"){if(!D)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${D}`),G.success(`Lead "${B}" deleted successfully.`),a?.id===D&&s(null),await Ce()}}catch(ue){console.error(ue);const se=J==="create"?"Failed to create lead. Please review the details and try again.":J==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",Pe=ue.response?.data?.detail||se;G.error(Pe)}finally{(J==="create"||J==="update")&&I(!1),J!=="edit"&&(X(!1),Q(null))}},nt=()=>{V||Q(null)},Te=u.filter(ce=>ce.status==="New").length,Qe=u.filter(ce=>ce.status==="Contacted").length,ct=u.filter(ce=>ce.status==="Qualified").length,ht=u.filter(ce=>ce.status==="Converted").length,je=u.filter(ce=>ce.status==="Lost").length,Ze=[{title:"New",value:Te,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:Qe,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ct,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:ht,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:je,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),gt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ze.map(ce=>n.jsx(Zze,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ee,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:ce=>C(ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ae.length>0?et.map(ce=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>H(ce),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[ce.first_name," ",ce.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:ce.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:ce.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Yze(ce.status||"New")}`,children:Qze(ce.status||"New")})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ae.length,pageSize:A,currentPage:w,onPrev:De,onNext:tt,onPageSizeChange:ce=>{k(ce),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:Z,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:ce=>ce.stopPropagation(),children:[n.jsx("button",{onClick:()=>{le(),gt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:Ie,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ge&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ge&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ge&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:Ie,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:Ie,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ge&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:lA.map(ce=>n.jsx("option",{value:ce.code,children:ce.code},ce.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:Ie,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ge&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(Jze,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",disabled:P||ee,getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>{const J=o.find(D=>String(D.id)===String(ce));d(J);let de=null;J&&J.assigned_territory&&J.assigned_territory.length===1&&(de=J.assigned_territory[0].id),E(D=>({...D,lead_owner:ce,territory_id:de}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:Ie,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(ce=>n.jsx("option",{value:ce.id,children:ce.name},ce.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:Ie,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:Ie,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{le(),gt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:ve,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),q&&n.jsx(Xze,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:Be,onCancel:nt,loading:V}),a&&!r&&!T&&n.jsx(BZ,{relatedActs:W,lead:a,onBack:be,fetchLeads:Ce,setSelectedLead:s,onEdit:te,onDelete:Ue})]})}function Xze({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Zze({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Jze({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const cb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ka=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),eUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ka,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ka,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ka,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ka,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ka,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),tUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ka,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ka,{label:"Department",name:"department",value:e.department}),n.jsx(Ka,{label:"Title",name:"title",value:e.title}),n.jsx(Ka,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ka,{label:"Email",name:"email",value:e.email}),n.jsx(Ka,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ka,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),nUe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ka,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ka,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ka,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ka,{label:"Description",name:"description",value:e.description}),n.jsx(Ka,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function aUe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(eUe,{data:cb});case 2:return n.jsx(tUe,{data:cb});case 3:return n.jsx(nUe,{data:cb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:cb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(nj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function HZ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=en();h.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){G.error("No deal selected");return}if(!s||s===e.stage){G.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{G.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";G.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function qZ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=en(),{comments:b,addComment:C,refresh:w}=Ta({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ae.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Yt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Aa,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},E))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(HZ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function sUe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState([]),[W,ne]=h.useState([]),[oe,K]=h.useState([]),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const D=t.state,B=D?.dealID;if(B&&!D?.openDealModal){Ne(B),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const D=v.find(B=>B.id===pe);D?d(D):G.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[qe,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=D=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[D]||D||"--",Ee=D=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[D]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async D=>{try{const B=await ae.get(`/activities/deal/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const D=a.trim().toLowerCase(),B=r.trim(),ie=o.trim();return(v??[]).filter(ue=>{const se=[ue?.name,ue?.description,ue?.account?.name,ue?.contact?.first_name,ue?.contact?.last_name,ue?.assigned_deals?.first_name,ue?.assigned_deals?.last_name],Pe=D===""||se.some(Fe=>Fe==null||Fe===""?!1:Fe.toString().toLowerCase().includes(D)),ge=B==="Filter by Stage"||B===""||ue.stage===xe[B]||ue.stage===B,fe=ie==="Filter by Owner"||ie===""||`${ue.assigned_deals?.first_name||""} ${ue.assigned_deals?.last_name||""}`.trim().toLowerCase()===ie.toLowerCase();return Pe&&ge&&fe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(D=>{const B=Math.max(1,Math.ceil(Re.length/A)||1);return D>B?B:D})},[Re.length,A]);const De=h.useMemo(()=>{const D=(w-1)*A;return Re.slice(D,D+A)},[Re,w,A]),tt=()=>S(D=>Math.max(D-1,1)),Je=()=>S(D=>Math.min(D+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const D=await ae.get("/deals/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at).getTime():0;return(se?.created_at?new Date(se.created_at).getTime():0)-Pe});N(ie)}catch(D){D.response&&D.response.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch deals. Please try again later."),console.error(D)}finally{C(!1)}},le=async()=>{try{const D=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const D=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const D=await ae.get("/users/all");K(Array.isArray(D.data)?D.data:[])}catch(D){console.error(D),D.response?.status===403&&G.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const{user:te}=en(),Ue=te?.role==="Sales";h.useEffect(()=>{p&&!P&&Ue&&te&&!Se.assigned_to&&Oe(D=>({...D,assigned_to:te.id}))},[p,P,Ue,te,Se.assigned_to]);const Ie=async D=>{D&&(Oe({id:D.id||null,name:D.name||"",account_id:D.account_id?.toString()||"",primary_contact_id:D.primary_contact_id?.toString()||"",stage:D.stage||"PROPOSAL",amount:D.amount?.toString()||"",close_date:D.close_date?new Date(D.close_date).toISOString().split("T")[0]:"",assigned_to:D.assigned_to?.toString()||"",currency:D.currency||"PHP",description:D.description||""}),he(D.account||null),Ce(D.contact||null),I(!0),Q(D.id),d(null),x(!0))},Ge=async(D=!1)=>{try{const B=await ae.get("/deals/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at?new Date(se.created_at).getTime():0;return(Pe?.created_at?new Date(Pe.created_at).getTime():0)-ge});if(N(ue),!D&&c&&c.id){const se=ue.find(Pe=>Pe.id===c.id);se&&d({...se})}}catch(B){console.error("Failed to refresh deal data:",B),await be()}},gt=D=>{const B=D.name.trim();if(!B){G.error("Deal name is required.");return}if(!D.account_id){G.error("Account is required.");return}const ie=P&&q?"update":"create",ue=B;M({title:ie==="create"?"Confirm New Deal":"Confirm Update",message:ie==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:ue}),"?"]}),confirmLabel:ie==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:ie,formData:D,targetId:q||null,name:ue}})},ve=D=>{if(!D)return;const B=D.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},Be=async()=>{if(!T?.action){M(null);return}const{action:D}=T,{type:B,formData:ie,targetId:ue,name:se}=D;z(!0);try{if(B==="create"){E(!0);const Pe={name:ie.name.trim(),account_id:parseInt(ie.account_id),primary_contact_id:ie.primary_contact_id?parseInt(ie.primary_contact_id):null,stage:ie.stage,amount:ie.amount?parseFloat(ie.amount):null,currency:ie.currency||"PHP",close_date:ie.close_date||null,description:ie.description||null,assigned_to:ie.assigned_to?parseInt(ie.assigned_to):null};await ae.post("/deals/admin/create",Pe),G.success(`Deal "${se}" created successfully.`),x(!1),await be()}else if(B==="update"){if(!ue)throw new Error("Missing deal identifier for update.");E(!0);const Pe={};ie.name!==void 0&&(Pe.name=ie.name.trim()),ie.account_id!==void 0&&ie.account_id!==""&&(Pe.account_id=parseInt(ie.account_id)),ie.primary_contact_id!==void 0&&(Pe.primary_contact_id=ie.primary_contact_id?parseInt(ie.primary_contact_id):null),ie.stage!==void 0&&(Pe.stage=ie.stage),ie.amount!==void 0&&ie.amount!==""&&(Pe.amount=parseFloat(ie.amount)),ie.currency!==void 0&&(Pe.currency=ie.currency),ie.close_date!==void 0&&(Pe.close_date=ie.close_date||null),ie.description!==void 0&&(Pe.description=ie.description||null),ie.assigned_to!==void 0&&(Pe.assigned_to=ie.assigned_to?parseInt(ie.assigned_to):null),await ae.put(`/deals/admin/${ue}`,Pe),G.success(`Deal "${se}" updated successfully.`),x(!1),await be()}else if(B==="delete"){if(!ue)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${ue}`),G.success(`Deal "${se}" deleted successfully.`),c?.id===ue&&d(null),await be()}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create deal. Please review the details and try again.":B==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",fe=Pe.response?.data?.detail||ge;G.error(fe)}finally{(B==="create"||B==="update")&&E(!1),z(!1),M(null)}},nt=()=>{R||M(null)},Te=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),I(!1),Q(null),E(!1)},Qe=(v??[]).filter(D=>D.stage==="PROSPECTING").length,ct=(v??[]).filter(D=>D.stage==="QUALIFICATION").length,ht=(v??[]).filter(D=>D.stage==="PROPOSAL").length,je=(v??[]).filter(D=>D.stage==="NEGOTIATION").length,Ze=(v??[]).filter(D=>D.stage==="CLOSED_WON").length,ce=(v??[]).filter(D=>D.stage==="CLOSED_LOST").length,J=(v??[]).filter(D=>D.stage==="CLOSED_CANCELLED").length,de=[{title:"Prospecting",value:Qe,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:ct,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:ht,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:je,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:Ze,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ce,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:J,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:de.map(D=>n.jsx(iUe,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:D=>s(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:D=>i(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:D=>l(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(D=>`${D.assigned_deals?.first_name} ${D.assigned_deals?.last_name}`))].map((D,B)=>n.jsx("option",{value:D,children:D},B))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(D=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...D}),Ae(D.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:D.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:D.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.contact?.first_name&&D.contact?.last_name?`${D.contact.first_name} ${D.contact.last_name}`:D.contact?.first_name||D.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(D.stage)}`,children:ee(D.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",D.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:D.assigned_deals?.first_name&&D.assigned_deals?.last_name?`${D.assigned_deals.first_name} ${D.assigned_deals.last_name}`:D.assigned_deals?.first_name||D.assigned_deals?.last_name||"--"})]},D.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:A,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:D=>{k(D),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(oUe,{onClose:Te,formData:Se,setFormData:Oe,isEditing:P,onSubmit:gt,isSubmitting:_||R,accounts:V,contacts:W,users:oe,currentAccount:ke,currentContact:qe}),c&&n.jsx(qZ,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:Ie,onDelete:ve,onStatusUpdate:Ge}),T&&n.jsx(rUe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:Be,onCancel:nt,loading:R})]})}function rUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function iUe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function oUe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const{user:f}=en(),p=f?.role==="Sales";h.useEffect(()=>{!s&&p&&f&&!t.assigned_to&&a(w=>({...w,assigned_to:f.id}))},[s,p,f,t.assigned_to,a]);const[x,v]=h.useState(!1),N=w=>{if(w.preventDefault(),v(!0),!t.name?.trim()){G.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){G.error("Amount must be a number greater than 0.");return}if(!t.account_id){G.error("Please select an account.");return}if(!t.primary_contact_id){G.error("Please select a primary contact.");return}r?.(t)},b=w=>{w.target.id==="modalBackdrop"&&e()},C=h.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(A=>{const _=[A?.account_id,A?.accountId,A?.account?.id,A?.account?.account_id,A?.account?.accountId].find(E=>E!=null&&String(E).trim()!=="");return _?String(_)===w:!1}):S},[l,t.account_id]);return h.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;C.some(k=>String(k?.id)===S)||a(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,C,a]),n.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[n.jsx(dA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>a({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),n.jsx(uA,{label:"Account",value:t.account_id||"",onChange:w=>a({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:x}),n.jsx(uA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>a({...t,primary_contact_id:w}),items:C||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:x}),n.jsx(V7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>a({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(dA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:w=>a({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),n.jsx(V7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>a({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(dA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>a({...t,close_date:w.target.value}),disabled:i}),n.jsx(uA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>a({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||p,className:"md:col-span-2"}),n.jsx(cUe,{label:"Description",name:"description",value:t.description,onChange:w=>a({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function dA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function V7({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function uA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(lUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function lUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function cUe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const mA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],fA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Mi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},hA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",dUe=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},uUe=e=>{switch(Mi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},db=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",vg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",mUe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},gA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},Q7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},pA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},ww=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},fUe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=ww(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=ww(t);return a||null},hUe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},gUe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function pUe(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState(fA),[oe,K]=h.useState(""),[U,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const $=(await ae.get("/company/invoice-info"))?.data;e(`/sales/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:$}})}catch(F){const $=F?.response?.data?.detail||F?.message||"Failed to open print page.";G.error($)}finally{Q(!1)}},[w,e]),[Oe,ke]=h.useState(1),[he,qe]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ta({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const $=t.state?.quoteID;if($){De($),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const F=r.find($=>$.id===et);F?S(F):G.error("Quote not found."),De(null)}},[et,r,o]),h.useEffect(()=>{let F=!0;return(async()=>{const me=fUe();if(me&&F){C(me);return}try{const Le=await ae.get("/auth/me"),$e=ww(Le?.data);if($e&&F){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=ww(Le?.data);if($e&&F){C($e);return}}catch{}F&&C(null)})(),()=>{F=!1}},[]);const be=h.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),le=h.useCallback(F=>{if(!F)return"";const $=p.find(me=>String(me.id)===String(F));return $?`${$.first_name} ${$.last_name}`.trim():""},[p]),Z=h.useCallback(F=>{if(!F)return"--";const $=c.find(me=>String(me.id)===String(F));return $?.deal_name||$?.name||`Deal #${Q7(F)}`},[c]),_e=h.useCallback(F=>{const $=c.find($e=>String($e.id)===String(F)),me=hUe($);let Le=gUe($);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const $=F.deal_id||F.deal?.id;return $?Z($):"--"},[Z]),Ue=h.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let $=F.account_id||F.account?.id;if(!$){const me=F.deal_id||F.deal?.id;me&&($=_e(me).accountId)}return $?be($)||`Account #${$}`:"--"},[_e,be]),Ie=h.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let $=F.contact_id||F.contact?.id;if(!$){const Le=F.deal_id||F.deal?.id;Le&&($=_e(Le).contactId)}return($?le($):"")||($?`Contact #${$}`:"--")},[_e,le]),Ge=h.useCallback(async(F=null)=>{l(!0);try{const $=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray($.data)?$.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),F){const $e=Le.find(Ve=>Ve.id===F);S($e||null)}}catch($){console.error($),i([]),$.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const F=await ae.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const F=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const F=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const F=await ae.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Ge(),gt(),ve(),Be(),nt()},[Ge,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const F=oe.trim().toLowerCase(),$=U.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=gA(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?vg(me.presented_date):"",Ye?vg(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,db(me.created_at),db(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=$==="Filter by Status"||Mi(me.status)===$;return Ct&&Xt})},[r,oe,U,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,U]),h.useEffect(()=>{ke(F=>{const $=Math.max(1,Math.ceil(Te.length/he)||1);return F>$?$:F})},[Te.length,he]);const ct=h.useMemo(()=>{const F=(Oe-1)*he;return Te.slice(F,F+he)},[Te,Oe,he]),ht=()=>ke(F=>Math.max(F-1,1)),je=()=>ke(F=>Math.min(F+1,Qe)),Ze=F=>{S(F),xe("Overview"),Ee(Mi(F?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),E(!1),X(null),ne(fA),M(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:$,value:me}=F.target;if($==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[$]:me}))},ie=()=>{const F={...fA};a?.role?.toUpperCase()==="SALES"&&b&&(F.assigned_to=String(b)),ne(F),E(!1),X(null),k(!0)},ue=F=>{if(!F)return;S(null);const $=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=$?_e($):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,$e=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Ve=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";ne({deal_id:$,account_id:Le||"",contact_id:$e||"",total_amount:F.total_amount?.toString()||"",presented_date:mUe(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Mi(F.status)||"Draft",assigned_to:Ve,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),E(!0),X(F.id),k(!0)},se=F=>{if(F.target.checked){const $=ct.map(me=>me.id);Re($)}else Re([])},Pe=F=>{Re($=>$.includes(F)?$.filter(me=>me!==F):[...$,F])},ge=F=>{if(!F)return;const $=F.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:$}})},fe=async()=>{Ae.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=F=>{if(F.preventDefault(),Xe(!0),!b){G.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){G.error("Deal is required.");return}if(!W.assigned_to&&a?.role?.toUpperCase()!=="SALES"){G.error("Assigned To is required.");return}const me=_e(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),$e={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(W.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;z({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!R?.action){z(null);return}const{action:F}=R,{type:$,payload:me,targetId:Le,name:$e}=F;I(!0);try{if($==="create")M(!0),await ae.post("/quotes/admin",me),G.success("Quote created successfully."),de(),await Ge();else if($==="update"){if(!Le)throw new Error("Missing quote identifier for update.");M(!0),await ae.put(`/quotes/admin/${Le}`,me),G.success("Quote updated successfully."),de(),await Ge(),w?.id===Le&&S(null)}else if($==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),G.success(`Quote "${$e}" deleted successfully.`),await Ge(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else $==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),G.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await Ge())}catch(Ve){console.error(Ve);const Ye=$==="create"?"Failed to create quote. Please review the details and try again.":$==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";G.error(Ye),($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null)}finally{($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null),I(!1),z(null)}},St=()=>{P||z(null)},Ht=h.useCallback((F,$)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=F?.account_id??F?.account?.id??$e.accountId??null,Ye=F?.contact_id??F?.contact?.id??$e.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:$,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const F=Mi(ee),$=[F,F.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of $)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,F);if(!$e.deal_id){G.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){G.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}G.success(`Quote status updated to ${F}`),S(null),xe("Overview"),await Ge()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";G.error($e)}},[w,ee,Ge,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...mA.map(F=>({label:F.label,value:F.value}))],re=R?.action?.type==="delete"?R.action.targetId:null,ot=w&&(pe===w.id||re===w.id),zt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${uUe(w.status)}`,children:hA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:q||T||P,children:[n.jsx(hn,{className:"mr-2"}),q?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>xe(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:pA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:vg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:vg(gA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:hA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:db(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:db(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${pA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Mi(w.status)||"Draft",onChange:F=>Ee(F.target.value),children:mA.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Mi(ee)===Mi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Mi(ee)===Mi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:F=>K(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>ye(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(F=>{const $=gA(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:pA(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${dUe(F.status)}`,children:hA(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:vg($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:F=>{qe(F),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(X7,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:$,contactId:me}=_e(F);ne(Le=>({...Le,deal_id:F,account_id:$,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${Q7(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(K7,{label:"Account",value:be(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(K7,{label:"Contact",value:le(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:W.items,onChange:F=>ne($=>({...$,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{ne($=>({...$,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>ne($=>({...$,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>ne($=>({...$,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:F=>ne($=>({...$,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(Y7,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(Y7,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),a?.role?.toUpperCase()==="SALES"?n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const F=v.find($=>String($.id)===W.assigned_to);return F?`${F.first_name} ${F.last_name}`:"Assigning..."})()})]}):n.jsx(X7,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>ne($=>({...$,assigned_to:F})),items:Array.isArray(v)?v:[],getLabel:F=>{const $=`${F?.first_name??""} ${F?.last_name??""}`.trim();return $?F?.role?`${$} (${F.role})`:$:F?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(xUe,{label:"Status",name:"status",value:W.status,onChange:B,options:mA,required:!0,disabled:T}),n.jsx(bUe,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=R?n.jsx(vUe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function Y7({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function K7({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function xUe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function X7({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(yUe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function yUe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function bUe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function vUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function wUe(){const{userRole:e}=Qs();return n.jsx(Bj,{currentUserRole:e,currentUserId:null})}function NUe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,E,k.description],R=w===""||M.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Rx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx($x,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const Z7=["Not started","In progress","Deferred","Completed"],J7={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},GZ=e=>e&&(J7[e]||J7[String(e).toUpperCase()])||"Not started",jUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},e8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},CUe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),GZ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},SUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=q=>{if(!q)return"";const Q=String(q).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(q)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",E="",T="",M="";const R=c(),z=v(),P=l(),I=x();if(R){w="Account",_="Account",E=z,S=String(R);const q=d(),Q=u(),V=N(),X=b(),W=f(),ne=C();q?(A="Contact",T="Contact",M=V,k=String(q)):Q?(T="Deal",A="Deal",M=X,k=String(Q)):W&&(T="Quote",A="Quote",M=ne,k=String(W))}else P?(_="Lead",E=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:GZ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function _Ue(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,E]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState([]),V=wt(),X=Zt(),[W,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):G.error("Task not found."),K(null)}},[oe,u,p]);const U=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),G.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(SUe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&E(1)}catch(H){console.error("Failed to load tasks:",H),G.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{if(!t&&e){U(),ye();const H=lN(e.id),be=new WebSocket(H);return be.onopen=()=>{console.log(" Connected to task notifications")},be.onmessage=le=>{try{const Z=JSON.parse(le.data);Z.type==="task_status_updated"&&(G.info(` ${Z.message}`,{position:"top-right",autoClose:4e3}),ye())}catch(Z){console.error("Error parsing notification:",Z)}},be.onerror=le=>{console.error(" WebSocket error:",le)},be.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{be.readyState===WebSocket.OPEN&&be.close()}}},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:jUe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=CUe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),G.success("Task updated successfully.")):(await ae.post("/tasks/create",be),G.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";G.error(Z)}},ke=H=>{H&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>q.includes(H.id)))Q(q.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...q,...H])])}},qe=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{q.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${q.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:q}})},xe=async()=>{if(!R?.action){z(null);return}const{action:H}=R;I(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),G.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),G.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),G.error("Failed to delete task.")}finally{I(!1),z(null)}},ee=()=>{P||z(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{E(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&E(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(AUe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),Z7.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:Z7.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?e8(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>q.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:q.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${q.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:q.includes(H.id),onChange:()=>qe(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?e8(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>E(H=>Math.max(H-1,1)),onNext:()=>E(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{M(H),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(l0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:ke}),R&&n.jsx(TUe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function AUe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function TUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const WZ=e=>e?e.toUpperCase():"",ub=e=>{const t=WZ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},EUe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},kUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},LUe=e=>{const t=WZ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},xA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},PUe=()=>{const e=wt(),t=Zt(),{user:a}=en(),s=a?.role==="Sales",[r]=zs(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=h.useState([]),[d,u]=h.useState(!1),[f,p]=h.useState([]),[x,v]=h.useState(""),[N,b]=h.useState("Filter by Status"),[C,w]=h.useState(!1),[S,A]=h.useState(null),[k,_]=h.useState(1),[E,T]=h.useState(10),[M,R]=h.useState(xA),[z,P]=h.useState(!1),[I,q]=h.useState(null),[Q,V]=h.useState(!1),[X,W]=h.useState(null),[ne,oe]=h.useState(!1),[K,U]=h.useState(null),[ye,pe]=h.useState([]),[Ne,Se]=h.useState(null);h.useEffect(()=>{C&&!z&&s&&a&&!M.assignedTo&&R(le=>({...le,assignedTo:a.id}))},[C,z,a,s]),h.useEffect(()=>{const le=t.state?.openMeetingModal,Z=t.state?.initialMeetingData?.relatedTo||r.get("id"),_e=t.state?.meetingID;le||Z?(w(!0),t.state?.initialMeetingData&&R(te=>({...te,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):_e&&(U(_e),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),h.useEffect(()=>{if(K&&l.length>0&&!d){const le=l.find(Z=>Z.id===K);le?A(le):G.error("Meeting not found."),U(null)}},[K,l,d]);const Oe=async()=>{if(i&&o){const le=sessionStorage.getItem("meetingDetailData");if(le)try{const Z=JSON.parse(le);if(Z.id===parseInt(i)){A(Z),sessionStorage.removeItem("meetingDetailData");return}}catch(Z){console.error(Z)}}u(!0);try{const le=await ae.get("/meetings/admin/fetch-all"),_e=[...Array.isArray(le.data)?le.data:[]].sort((te,Ue)=>{const Ie=te?.created_at?new Date(te.created_at).getTime():0;return(Ue?.created_at?new Date(Ue.created_at).getTime():0)-Ie});if(c(_e),i&&!S){const te=_e.find(Ue=>Ue.id===parseInt(i));te&&A(te)}}catch{G.error("Failed to load meetings.")}finally{u(!1)}},ke=async()=>{try{const le=await ae.get("/users/all");p(Array.isArray(le.data)?le.data:[])}catch(le){console.error(le)}};h.useEffect(()=>{async function le(){try{const Z=await ae.get("/auth/me");Se(Z.data)}catch(Z){console.error("Failed to fetch current user",Z)}}le()},[]),h.useEffect(()=>{Oe(),ke()},[]);const he=le=>v(le.target.value),qe=h.useMemo(()=>{const le=x.trim().toLowerCase(),Z=N.trim().toUpperCase();return l.filter(_e=>{const te=[_e?.activity,_e?.description,_e?.relatedTo,_e?.assignedTo],Ue=le===""||te.some(Ge=>Ge&&Ge.toString().toLowerCase().includes(le)),Ie=Z==="FILTER BY STATUS"||ub(_e.status||"PENDING")===Z;return Ue&&Ie})},[l,x,N]),Ce=h.useMemo(()=>{const le=(k-1)*E;return qe.slice(le,le+E)},[qe,k,E]),xe=()=>{w(!1),R(xA),P(!1),q(null),V(!1)},ee=()=>{R(xA),P(!1),q(null),w(!0)},Ee=le=>{let Z="";if(le.meet_assign_to?.id)Z=String(le.meet_assign_to.id);else if(le.assignedTo){const nt=f.find(Te=>`${Te.first_name} ${Te.last_name}`===le.assignedTo);Z=nt?String(nt.id):""}const _e=nt=>{if(!nt)return"";try{const Te=new Date(nt),Qe=Te.getTimezoneOffset()*6e4;return new Date(Te.getTime()-Qe).toISOString().slice(0,16)}catch{return""}};let te="Lead",Ue="",Ie="Contact",Ge="";if(le.lead)te="Lead",Ue=String(le.lead.id);else if(le.account)te="Account",Ue=String(le.account.id),le.contact?(Ie="Contact",Ge=String(le.contact.id)):le.deal?(Ie="Deal",Ge=String(le.deal.id)):le.quote&&(Ie="Quote",Ge=String(le.quote.id));else if(le.relatedType||le.related_type){const nt=le.relatedType||le.related_type,Te=le.related_to||le.relatedToId;nt==="Lead"?(te="Lead",Ue=String(Te)):(te="Account",Ue=le.account_id?String(le.account_id):"")}const gt={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ve=ub(le.status),Be=gt[ve]||"Planned";R({subject:le.subject||le.activity||"",location:le.location||"",startTime:_e(le.start_time||le.startTime),endTime:_e(le.end_time||le.endTime),status:Be,notes:le.description||le.notes||"",assignedTo:Z,relatedType1:te,relatedTo1:Ue,relatedType2:Ie,relatedTo2:Ge}),P(!0),q(le.id),A(null),w(!0)},Ae=le=>{if(!le.subject?.trim())return G.error("Subject is required.");if(!le.startTime)return G.error("Start time is required.");if(le.endTime&&!(new Date(le.endTime)-new Date(le.startTime)>0))return G.error("End time must be after start time.");le.relatedType1,le.relatedTo1,le.relatedType1==="Account"&&le.relatedType2&&le.relatedTo2&&(le.relatedType2,le.relatedTo2);const Z={...le,assignedTo:parseInt(le.assignedTo),relatedTo1:parseInt(le.relatedTo1),relatedTo2:parseInt(le.relatedTo2)},_e=z&&I?"update":"create";W({title:_e==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${_e} "${Z.subject}"?`,confirmLabel:_e==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:_e,payload:Z,targetId:I,name:Z.subject}})},Re=async()=>{if(!X?.action)return;const{type:le,payload:Z,targetId:_e,name:te}=X.action;oe(!0);try{le==="create"?(V(!0),await ae.post("/meetings/create",Z),G.success(`Meeting "${te}" created.`),xe(),await Oe()):le==="update"?(V(!0),await ae.put(`/meetings/${_e}`,Z),G.success(`Meeting "${te}" updated.`),xe(),await Oe()):le==="delete"?(await ae.delete(`/meetings/${_e}`),G.success(`Meeting "${te}" archived.`),S?.id===_e&&A(null),await Oe()):le==="bulk-delete"&&(await ae.post("/meetings/sales/bulk-delete",{meeting_ids:X.action.meetingIds}),G.success(`Successfully archived ${X.action.meetingIds.length} meeting(s)`),pe([]),await Oe())}catch(Ue){const Ie=Ue.response?.data?.detail||"Action failed.";G.error(typeof Ie=="string"?Ie:JSON.stringify(Ie)),console.error(Ie)}finally{V(!1),oe(!1),W(null)}},et=le=>{Je("single")},De=()=>{const le=Ce.filter(Z=>Z.created_by===Ne?.id);ye.length===le.length&&le.length>0?pe([]):pe(le.map(Z=>Z.id))},tt=le=>{pe(Z=>Z.includes(le)?Z.filter(_e=>_e!==le):[...Z,le])},Je=le=>{if(le==="single"){const Z=S.subject||"this meeting";W({title:"Archive Meeting",message:`Are you sure you want to archive "${Z}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:Z}})}else if(le==="bulk"){if(ye.length===0)return;W({title:"Archive Meetings",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:ye.length})," selected meetings?"]}),confirmLabel:`Archive ${ye.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:ye}})}},H=()=>{Je("bulk")},be=async(le,Z)=>{try{await ae.put(`/meetings/${le}`,{status:Z}),G.success("Status updated"),Oe(),A(null)}catch{G.error("Failed to update status")}};return o&&i?S?n.jsx(gd,{meeting:S,onClose:()=>{A(null),e("/admin/dashboard")},onEdit:Ee,onDelete:et,onStatusUpdate:be,currentUser:Ne,isSalesView:!0}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[d&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:ee,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:he,className:"w-full outline-none"})]}),n.jsxs("select",{value:N,onChange:le=>b(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Ce.length>0&&Ce.filter(le=>le.created_by===Ne?.id).every(le=>ye.includes(le.id))&&Ce.some(le=>le.created_by===Ne?.id),onChange:De,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:ye.length>0?n.jsx("button",{onClick:H,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${ye.length} selected meetings`,children:n.jsx(ui,{size:18})}):""})]})}),n.jsx("tbody",{children:Ce.length>0?Ce.map(le=>n.jsxs("tr",{onClick:()=>A(le),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-center",onClick:Z=>Z.stopPropagation(),children:Ne&&le.created_by===Ne.id?n.jsx("input",{type:"checkbox",checked:ye.includes(le.id),onChange:()=>tt(le.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:Z=>Z.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:le.subject}),n.jsxs("td",{className:"py-3 px-4",children:[le.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.lead.title}),le.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.account.name}),le.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[le.contact.first_name," ",le.contact.last_name]}),le.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:le.deal.name}),le.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:EUe(le.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:kUe(le.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[le.meet_assign_to.first_name," ",le.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${LUe(ub(le.status))}`,children:ub(le.status).replace("_"," ")})}),n.jsx("td",{className:"py-3 px-4"})]},le.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:qe.length,pageSize:E,currentPage:k,onPrev:()=>_(le=>Math.max(1,le-1)),onNext:()=>_(le=>le+1),onPageSizeChange:le=>{T(le),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),C&&n.jsx(Jj,{onClose:xe,formData:M,setFormData:R,isEditing:z,onSubmit:Ae,isSubmitting:Q||ne,users:f,currentUser:a}),S&&n.jsx(gd,{meeting:S,onClose:()=>A(null),onEdit:Ee,onDelete:et,onStatusUpdate:be,currentUser:Ne,isSalesView:!0}),X&&n.jsx(DUe,{open:!0,title:X.title,message:X.message,confirmLabel:X.confirmLabel,variant:X.variant,onConfirm:Re,onCancel:()=>W(null),loading:ne})]})};function DUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const OUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],MUe=e=>e?String(e).toUpperCase():"",lf=e=>{const t=MUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},yA=e=>{const t=lf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},t8=e=>{switch(lf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},bA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},n8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function IUe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[P,I]=h.useState(1),[q,Q]=h.useState(10),[V,X]=h.useState(null),[W,ne]=h.useState([]),[oe,K]=h.useState(null),{comments:U,addComment:ye,refresh:pe}=Ta({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&pe()},[a?.id,pe]),zs();const Ne=wt(),Se=Zt(),{user:Oe}=en(),ke=Oe?.role==="Sales",qe={subject:"",call_time:(()=>{const D=new Date,B=D.getFullYear(),ie=String(D.getMonth()+1).padStart(2,"0"),ue=String(D.getDate()).padStart(2,"0");return`${B}-${ie}-${ue}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Ce,xe]=h.useState(qe);h.useEffect(()=>{e&&!v&&ke&&Oe&&!Ce.assigned_to&&xe(D=>({...D,assigned_to:Oe.id}))},[e,v,Oe,ke]),h.useEffect(()=>{const D=Se.state,B=D?.callID;if(B&&!D?.openCallModal){X(B),Ne(Se.pathname,{replace:!0,state:{}});return}!D?.openCallModal||!D?.initialCallData||D.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||D.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),xe(ie=>({...ie,...D.initialCallData,relatedTo1:D.initialCallData.relatedTo1?String(D.initialCallData.relatedTo1):"",relatedTo2:D.initialCallData.relatedTo2?String(D.initialCallData.relatedTo2):""})),Ne(Se.pathname,{replace:!0,state:{}}))},[Se.state,o]),h.useEffect(()=>{if(V&&u.length>0&&!R){const D=u.find(B=>B.id===V);D?s(D):G.error("Call not found."),X(null)}},[V,u,R]);const ee=async()=>{try{z(!0);const D=await ae.get("/calls/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>{const Pe=ue?.created_at?new Date(ue.created_at):0;return(se?.created_at?new Date(se.created_at):0)-Pe});f(ie)}catch(D){console.error("Error fetching calls:",D),G.error("Failed to load calls")}finally{z(!1)}},Ee=async()=>{try{const D=await ae.get("/users/all");x(D.data)}catch(D){console.error("Error fetching users: ",D)}};h.useEffect(()=>{async function D(){try{const B=await ae.get("/auth/me");K(B.data)}catch(B){console.error("Failed to fetch current user",B)}}D()},[]),h.useEffect(()=>{Ee(),ee()},[]);const Ae=[],Re="",et="Filter by Status",De="Filter by Users",tt=u,Je=h.useMemo(()=>{const D=(P-1)*q;return tt.slice(D,D+q)},[tt,P,q]),H=u.length,be=u.filter(D=>lf(D.status)==="PLANNED").length,le=u.filter(D=>lf(D.status)==="HELD").length,Z=u.filter(D=>lf(D.status)==="NOT_HELD").length,_e=[{title:"Total",value:H,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:be,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:le,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Z,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[te,Ue]=h.useState("Overview"),Ie=D=>{const{name:B,value:ie}=D.target;xe(ue=>{const se={...ue,[B]:ie};return B==="relatedType1"&&(se.relatedTo1="",ie==="Lead"?(se.relatedType2=null,se.relatedTo2=null,d([])):ie==="Account"&&(se.relatedType2="Contact")),B==="relatedType2"&&(se.relatedTo2=""),se})};h.useEffect(()=>{const D=async()=>{try{l([]);let B;Ce.relatedType1==="Lead"?B=await ae.get("/leads/admin/getLeads"):Ce.relatedType1==="Account"&&(B=await ae.get("/accounts/admin/fetch-all"));let ie=[];if(B&&Array.isArray(B.data)?ie=B.data:ie=[],v&&Ce.relatedTo1)try{let ue;Ce.relatedType1==="Lead"?ue=await ae.get(`/leads/get/${Ce.relatedTo1}`):Ce.relatedType1==="Account"&&(ue=await ae.get(`/accounts/get/${Ce.relatedTo1}`)),ue&&ue.data&&(ie.some(Pe=>String(Pe.id)===String(Ce.relatedTo1))||(ie=[ue.data,...ie]))}catch(ue){console.error("Error fetching specific related item:",ue)}l(ie)}catch(B){console.error("Error fetching data:",B),l([])}};Ce.relatedType1&&D()},[Ce.relatedType1,v,Ce.relatedTo1]),h.useEffect(()=>{const D=async()=>{try{d([]);let B;if(Ce.relatedType1==="Account"&&Ce.relatedTo1)Ce.relatedType2==="Contact"?B=await ae.get(`/contacts/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Deal"?B=await ae.get(`/deals/from-acc/${Ce.relatedTo1}`):Ce.relatedType2==="Quote"&&(B=await ae.get(`/quotes/from-acc/${Ce.relatedTo1}`));else{d([]);return}B&&Array.isArray(B.data)?d(B.data):d([])}catch(B){console.error("Error fetching data:",B),d([])}};Ce.relatedType2&&D()},[Ce.relatedType2,Ce.relatedTo1,Ce.relatedType1]);const[Ge,gt]=h.useState(!1),ve=D=>{D.preventDefault(),gt(!0);const B=Ce.subject;if(!B||B.trim()===""){G.error("Subject is required.");return}if(!Ce.relatedTo1){G.error(`Please select a ${Ce.relatedType1||"Lead/Account"}.`);return}if(!Ce.assigned_to){G.error("Subject is required.");return}const ue={...Ce,duration_minutes:Ce.duration_minutes?parseInt(Ce.duration_minutes,10):null,relatedTo1:Ce.relatedTo1?parseInt(Ce.relatedTo1,10):null,relatedTo2:Ce.relatedType1==="Lead"?null:Ce.relatedTo2?parseInt(Ce.relatedTo2,10):null,relatedType2:Ce.relatedType1==="Lead"?null:Ce.relatedType2,assigned_to:Ce.assigned_to?parseInt(Ce.assigned_to,10):null},se=v&&b?"update":"create",Pe=(Ce.subject||"").trim()||"Untitled Call";i({title:se==="create"?"Confirm New Call":"Confirm Update",message:se==="create"?`Create "${Pe}"?`:`Save changes to "${Pe}"?`,confirmLabel:se==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:se,payload:ue,targetId:b||null,name:Pe}})},Be=D=>s(D),nt=()=>{t(!1),N(!1),C(null)},Te=async()=>{if(!r?.action){i(null);return}const{action:D}=r,{type:B,payload:ie,targetId:ue,name:se,callIds:Pe}=D;k(!0);try{if(B==="bulk-delete")await ae.post("/calls/bulk-delete",{call_ids:Pe}),G.success(`Successfully archived ${Pe.length} call(s).`),ne([]),await ee();else if(B==="create")S(!0),await ae.post("/calls/create",ie),G.success(`Call "${se}" created successfully.`),t(!1),xe(qe),N(!1),C(null),await ee();else if(B==="update"){if(!ue)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${ue}`,ie),G.success(`Call "${se}" updated successfully.`),t(!1),xe(qe),N(!1),C(null),await ee()}else if(B==="delete"){if(!ue)throw new Error("Missing call identifier for archival.");await ae.delete(`/calls/${ue}`),G.success(`Call "${se}" archived successfully.`),a?.id===ue&&s(null),await ee()}}catch(ge){const fe=B==="create"?"Failed to create call. Please review the details and try again.":B==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",Fe=ge?.response?.data?.detail||fe;G.error(Fe)}finally{(B==="create"||B==="update")&&S(!1),k(!1),i(null)}},Qe=()=>{A||i(null)},ct=async()=>{if(a?.id)try{M(!0),await ae.put(`/calls/${a.id}`,{status:_}),G.success(`Status updated to ${yA(_)}`),f(D=>Array.isArray(D)?D.map(B=>B.id===a.id?{...B,status:_}:B):D),s(null)}catch(D){const B=D.response?.data?.detail||"Failed to update status.";G.error(B)}finally{M(!1)}},ht=()=>{const D=Je.filter(B=>B.call_creator?.id===oe?.id);W.length===D.length&&D.length>0?ne([]):ne(D.map(B=>B.id))},je=D=>{ne(B=>B.includes(D)?B.filter(ie=>ie!==D):[...B,D])},Ze=D=>{if(D==="single"){const B=a.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${B}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:a.id,name:B}})}else if(D==="bulk"){if(W.length===0)return;i({title:"Archive Calls",message:n.jsxs("span",{children:["Are you sure you want to archive"," ",n.jsx("span",{className:"font-semibold",children:W.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${W.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:W}})}},ce=()=>{Ze("bulk")};h.useEffect(()=>{a&&E(lf(a.status))},[a]);const J=a?n.jsxs("div",{id:"callModalBackdrop",onClick:D=>D.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${t8(a.status)}`,children:yA(a.status)})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:a.call_creator?.id===oe?.id&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const D=Pe=>{if(!Pe)return"";const ge=new Date(Pe),fe=ge.getFullYear(),Fe=String(ge.getMonth()+1).padStart(2,"0"),Xe=String(ge.getDate()).padStart(2,"0"),pt=String(ge.getHours()).padStart(2,"0"),Nt=String(ge.getMinutes()).padStart(2,"0");return`${fe}-${Fe}-${Xe}T${pt}:${Nt}`},B=a.lead?"Lead":a.account?"Account":"Lead",ie=a.lead?a.lead.id:a.account?a.account.id:null,ue=B==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",se=B==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;xe({subject:a.subject||"",call_time:D(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:B,relatedType2:ue,relatedTo1:ie?String(ie):"",relatedTo2:se?String(se):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Ze("single"),children:[n.jsx(ui,{className:"mr-2"}),"Archive"]})]})})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(D=>n.jsx("button",{onClick:()=>Ue(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${te===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[te==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(lo,{label:"Call Time",value:n8(a.call_time)}),n.jsx(lo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(lo,{label:"Direction",value:a.direction||"--"}),n.jsx(lo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(lo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(lo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(lo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(lo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(lo,{label:"Quote",value:bA(a.quote.quote_id)}),n.jsx(lo,{label:"Created At",value:n8(a.created_at)})]})}),te==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:U,onAddComment:ye})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:D=>E(D.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ct,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,de=e?n.jsx("div",{id:"modalBackdrop",onClick:D=>D.target.id==="modalBackdrop"&&nt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{nt(),gt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ve,noValidate:!0,children:[n.jsx(RUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:Ce.subject,onChange:Ie,isSubmitted:Ge,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Ie,value:Ce.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(vA,{items:Array.isArray(o)?o:[],value:Ce.relatedTo1??"",placeholder:`Search ${Ce.relatedType1||"here"}...`,getLabel:D=>Ce.relatedType1==="Lead"?D.title:D.name??"",onChange:D=>xe(B=>({...B,relatedTo1:D})),required:!0,isSubmitted:Ge,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Ie,value:Ce.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Ce.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(vA,{disabled:Ce.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:Ce.relatedTo2??"",placeholder:Ce.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Ce.relatedType2||"Contact"}...`:`No ${Ce.relatedType2||""} data found`,getLabel:D=>Ce.relatedType2==="Contact"?`${D.first_name??""} ${D.last_name??""}`.trim():Ce.relatedType2==="Quote"?bA(D.quote_id)??"":D.name??"",onChange:D=>xe(B=>({...B,relatedTo2:D}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:Ce.call_time,onChange:Ie,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:Ce.duration_minutes,onChange:Ie,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(vA,{items:Array.isArray(p)?p:[],value:Ce.assigned_to??"",placeholder:"Search an account...",getLabel:D=>`${D.first_name} ${D.last_name}`,onChange:D=>xe(B=>({...B,assigned_to:D})),disabled:ke,required:!0,isSubmitted:Ge})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Ie,value:Ce.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Ie,value:Ce.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(zUe,{className:"col-span-2",label:"Notes",value:Ce.notes,onChange:Ie,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{nt(),gt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{xe(qe),N(!1),C(null),t(!0),gt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:_e.map(D=>n.jsx($Ue,{...D},D.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Re})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:et,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),OUe.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value))]}),n.jsxs("select",{defaultValue:De,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ae.map(D=>n.jsx("option",{value:D.name,children:D.name},D.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 text-center w-12",children:n.jsx("input",{type:"checkbox",checked:Je.length>0&&Je.filter(D=>D.call_creator?.id===oe?.id).every(D=>W.includes(D.id))&&Je.some(D=>D.call_creator?.id===oe?.id),onChange:ht,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:W.length>0?n.jsx("button",{onClick:ce,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${W.length} selected calls`,children:n.jsx(ui,{size:18})}):""})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):Je.length>0?Je.map(D=>n.jsxs("tr",{onClick:()=>Be(D),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:B=>B.stopPropagation(),children:D.call_creator?.id===oe?.id?n.jsx("input",{type:"checkbox",checked:W.includes(D.id),onChange:()=>je(D.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:B=>B.stopPropagation()}):null}),n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:D.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[D.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.lead.title}),D.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.account.name}),D.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[D.contact.first_name," ",D.contact.last_name]}),D.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:D.deal.name}),D.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:bA(D.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D.call_time?new Date(D.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:D?.call_assign_to?`${D.call_assign_to.first_name} ${D.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t8(D.status)}`,children:yA(D.status)})}),n.jsx("td",{})]},D.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:tt.length,pageSize:q,currentPage:P,onPrev:()=>I(D=>Math.max(D-1,1)),onNext:()=>I(D=>Math.min(D+1,Math.max(1,Math.ceil(tt.length/q)||1))),onPageSizeChange:D=>{Q(D),I(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),J,de,r&&n.jsx(UUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:Te,onCancel:Qe,loading:A})]})}function $Ue({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function RUe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function zUe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function lo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function UUe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function vA({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function FUe({toggleSidebar:e}){const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState([]),[l,c]=h.useState(0),d=h.useRef(null),u=h.useRef(null),f=Zt(),p=wt(),{logout:x}=Qs(),{user:v,fetchUser:N}=en(),C={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[f.pathname]||"Manager Panel";return h.useEffect(()=>{N()},[]),h.useEffect(()=>{const w=()=>N();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[N]),h.useEffect(()=>{if(!v?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",A=w?"localhost:8000":window.location.host,k=`${S}//${A}/ws/notifications?user_id=${v.id}`,_=new WebSocket(k);return _.onmessage=E=>{const T=JSON.parse(E.data);o(M=>[T,...M]),c(M=>M+1)},()=>_.close()},[v?.id]),h.useEffect(()=>{function w(S){d.current&&!d.current.contains(S.target)&&a(!1),u.current&&!u.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ix,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:C})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"relative",ref:u,children:[n.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[n.jsx(sx,{className:"text-xl"}),l>0&&n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&n.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),n.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),n.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>n.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):n.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),n.jsxs("div",{className:"relative",ref:d,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[n.jsx("button",{onClick:()=>{p("/manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{p("/manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-100 my-2"}),n.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function BUe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Zt(),{user:d}=en();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(rx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs($t,{to:"/manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(or,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs($t,{to:"/manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(nn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(FUe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Kp,{})})]})]})}const HUe=e=>n.jsx(Gt,{...e}),VZ=e=>n.jsx(xd,{...e}),QZ=e=>n.jsx(Gs,{...e}),qUe=e=>n.jsx(ax,{...e}),GUe=e=>n.jsx(Fw,{...e}),WUe=e=>n.jsx(Et,{...e}),VUe=e=>n.jsx(Lt,{...e}),QUe=e=>n.jsx(Hw,{...e}),YZ=e=>n.jsx(Bw,{...e}),YUe=e=>n.jsx(aa,{...e}),KZ=e=>n.jsx(nn,{...e}),KUe=e=>n.jsx(Yn,{...e}),XZ=e=>n.jsx(tn,{...e}),XUe=e=>n.jsx(hn,{...e}),ZUe=e=>n.jsx(or,{...e}),JUe=e=>n.jsx(pa,{...e}),eFe=e=>n.jsx(Et,{...e}),tFe=e=>n.jsx($s,{...e}),nFe=e=>n.jsx(Xl,{...e}),aFe=e=>n.jsx(As,{...e}),ZZ=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,sFe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},rFe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},iFe=e=>{switch(e){case"call":return{Icon:VUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:QUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:WUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},oFe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},lFe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:VZ,label:"Account"},{icon:KZ,label:"Contact"},{icon:KUe,label:"Leads"},{icon:XZ,label:"Deals"},{icon:XUe,label:"Quotes"},{icon:ZUe,label:"Target"},{icon:JUe,label:"Task"},{icon:eFe,label:"Meeting"},{icon:tFe,label:"Call"},{icon:aFe,label:"Audit"},{icon:nFe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(HUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},cFe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},dFe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(YZ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(cFe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},uFe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),mFe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let A=0;A<=C;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(b)})),S&&k&&E)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${b.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[w]} ${C} (${S}): ${A}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(YZ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(XN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},fFe=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:ZZ(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},wA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},hFe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=rFe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},gFe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=sFe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?qUe:GUe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:ZZ(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},pFe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=iFe(f),{text:N,bg:b}=oFe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),M=E-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/manager/meetings/info?id=${o}`)):d("/manager/tasks"):d(f==="call"?`/manager/calls/info?id=${o}`:f==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(QZ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(KZ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},xFe=()=>{const e=wt(),{user:t}=en(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[A,k]=h.useState(""),[_,E]=h.useState([]),[T,M]=h.useState([]),[R,z]=h.useState([]),[P,I]=h.useState(new Date),q=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(U=>{const ye=`${U.first_name||""} ${U.last_name||""}`.trim().toLowerCase(),pe=(U.company_name||"").toLowerCase(),Ne=(U.email||"").toLowerCase(),Se=(U.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:`${U.first_name||""} ${U.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:U.company_name||"No company",route:`/manager/leads/${U.id}`})}),Array.isArray(T)&&T.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.account?.name||"").toLowerCase(),Ne=(U.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Deal",type:"Deal",details:U.account?.name||"No account",route:`/manager/deals/info?id=${U.id}`})}),Array.isArray(R)&&R.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.email||"").toLowerCase(),Ne=(U.phone||"").toLowerCase(),Se=(U.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Account",type:"Account",details:U.email||U.phone||"No contact info",route:"/manager/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,T,R]),X=oe=>{oe.route&&(e(oe.route),k(""))},W=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,U,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/manager/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/manager/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/manager/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/manager/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/manager/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(U.data)?U.data:[],qe=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),E(Oe),M(ke),z(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=qe.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),Ge=new Date(_e.scheduledDate||0);return Ie-Ge}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),W(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),W(),I(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[W]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let U=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),W(),I(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,U=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{U&&clearTimeout(U),Q.current&&(Q.current.close(),Q.current=null)}},[t,W]);const ne=[{icon:YUe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:XZ,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:VZ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/manager/accounts")},{icon:QZ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(lFe,{searchQuery:A,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(uFe,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(dFe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(mFe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(fFe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(wA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(hFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(wA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(gFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(wA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(pFe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},NA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],jA={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},kr=e=>e?e.toUpperCase():"",CA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",yFe=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},bFe=e=>{switch(kr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function vFe(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(jA),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[E,T]=h.useState([]),[M,R]=h.useState([]),[z,P]=h.useState("Filter by Status"),[I,q]=h.useState(""),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState(1),[K,U]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,qe]=h.useState({}),[Ce,xe]=h.useState(null),{comments:ee,addComment:Ee,refresh:Ae}=Ta({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&Ae()},[x?.id,Ae]);const Re=h.useCallback(async(re=null)=>{w(!0);try{const ot=await ae.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(ot.data)?ot.data:[]].sort((Kt,Me)=>{const vt=Kt?.created_at||Kt?.updated_at||0,F=Me?.created_at||Me?.updated_at||0;return new Date(F)-new Date(vt)});if(b(kt),re){const Kt=kt.find(Me=>Me.id===re);v(Kt||null)}}catch(ot){console.error(ot),b([]),ot.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),et=h.useCallback(async()=>{try{const re=await ae.get("/users/all");A(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async()=>{try{const re=await ae.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load territories (permission denied).")}},[]),tt=h.useCallback(async()=>{try{const re=await ae.get("/accounts/admin/parent-companies");R(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load parent companies (permission denied).")}},[]),Je=h.useCallback(async re=>{try{const ot=await ae.get(`/activities/accounts/${re}`);qe(ot.data&&typeof ot.data=="object"?ot.data:{})}catch(ot){console.error(ot),ot.response?.status===404&&(console.warn("No activities found for this account."),qe({}))}},[]);h.useEffect(()=>{Re(),et(),De(),tt()},[Re,et,De,tt]),h.useEffect(()=>{x&&Se(kr(x.status)||"PROSPECT")},[x]);const H=N.length,be=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),le=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Z=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),_e=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),te=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Ue=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),Ie=h.useMemo(()=>[{title:"Total",value:H,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:be,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:le,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Z,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:_e,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:te,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ue,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[H,be,le,Z,_e,te,Ue]),Ge=h.useMemo(()=>{const re=I.trim().toLowerCase(),ot=z.trim().toUpperCase();return N.filter(zt=>{const kt=[zt?.name,zt?.website,zt?.industry,zt?.territory?.name,zt?.phone_number],Kt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=ot==="FILTER BY STATUS"||kr(zt.status)===ot;return Kt&&Me})},[N,I,z]),gt=Math.max(1,Math.ceil(Ge.length/K)||1);h.useEffect(()=>{oe(1)},[I,z]),h.useEffect(()=>{oe(re=>{const ot=Math.max(1,Math.ceil(Ge.length/K)||1);return re>ot?ot:re})},[Ge.length]);const ve=h.useMemo(()=>{const re=(ne-1)*K;return Ge.slice(re,re+K)},[Ge,ne]);Ge.length===0||(ne-1)*K+1,Math.min(ne*K,Ge.length);const Be=()=>oe(re=>Math.max(re-1,1)),nt=()=>oe(re=>Math.min(re+1,gt)),Te=re=>{v(re),pe("Overview"),Se(kr(re?.status)||"PROSPECT")},Qe=()=>v(null),ct=re=>{re.target.id==="accountModalBackdrop"&&!X&&Qe()},ht=()=>{a(!1),r(!1),u(null),p(jA),o(!1),_(null)},je=re=>{re.target.id==="modalBackdrop"&&ht()},Ze=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:ot,value:zt}=re.target;p(kt=>({...kt,[ot]:zt}))},J=()=>{p(jA),r(!1),u(null),a(!0)},de=re=>{v(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",industry:re.industry||"",status:kr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){V(null);return}const{action:re}=Q,{type:ot,payload:zt,targetId:kt,name:Kt}=re;W(!0);try{if(ot==="create"){o(!0);const Me=await ae.post("/accounts/admin",zt);tt(),G.success(`Account "${Kt}" created successfully.`);const vt=x?.id||null;ht(),await Re(vt),!x&&Me.data?.id}else if(ot==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${kt}`,zt),G.success(`Account "${Kt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await Re(Me),x?.id===kt&&v(null)}else if(ot==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await ae.delete(`/accounts/admin/${kt}`),G.success(`Account "${Kt}" deleted successfully.`),await Re(Me&&Me!==kt?Me:null),Me===kt&&v(null)}}catch(Me){console.error(Me);const vt=ot==="create"?"Failed to create account. Please review the details and try again.":ot==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",F=Me.response?.data?.detail||vt;G.error(F),(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null)}finally{(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null),W(!1),V(null)}},ie=()=>{X||V(null)},ue=async()=>{if(!x||!Ne)return;const re=kr(Ne),ot=kr(x.status);if(re!==ot){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:re}),G.success(`Account status updated to ${CA(re)}`),b(zt=>zt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),v(null)}catch(zt){console.error(zt);const kt=zt.response?.data?.detail||"Failed to update account status. Please try again.";G.error(kt)}finally{ke(!1)}}},[se,Pe]=h.useState(!1),ge=re=>{re.preventDefault(),Pe(!0);const ot=f.name.trim();if(!ot){G.error("Account name is required.");return}if(!f.assigned_to){G.error("Assigned To is required.");return}const kt={name:ot,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Kt=s&&d?"update":"create";V({title:Kt==="create"?"Confirm New Account":"Confirm Update",message:Kt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}),confirmLabel:Kt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Kt,payload:kt,targetId:d||null,name:ot}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...NA.map(re=>({label:re.label,value:re.value}))],Fe=Q?.action?.type==="delete"?Q.action.targetId:null,Xe=x&&(l===x.id||Fe===x.id),pt=x&&l===x.id,Nt=x?yFe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ct,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Qe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:CA(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Xe,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>pe(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ze(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ze(x.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:ee,onAddComment:Ee})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[he.tasks&&he.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",he.tasks.length,")"]})]}),Ce==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.tasks.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.due_date||re.created_at)})]},`task-${ot}`))})]}),he.meetings&&he.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",he.meetings.length,")"]})]}),Ce==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.meetings.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.start_time||re.created_at)})]},`meeting-${ot}`))})]}),he.calls&&he.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",he.calls.length,")"]})]}),Ce==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.calls.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.call_time||re.created_at)})]},`call-${ot}`))})]}),he.contacts&&he.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",he.contacts.length,")"]})]}),Ce==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.contacts.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.created_at)})]},`contact-${ot}`))})]}),he.deals&&he.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",he.deals.length,")"]})]}),Ce==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.deals.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.close_date||re.created_at)})]},`deal-${ot}`))})]}),he.quotes&&he.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",he.quotes.length,")"]})]}),Ce==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.quotes.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.presented_date)||""})]},`quote-${ot}`))})]}),(!he||(!he.tasks||he.tasks.length===0)&&(!he.meetings||he.meetings.length===0)&&(!he.calls||he.calls.length===0)&&(!he.quotes||he.quotes.length===0)&&(!he.deals||he.deals.length===0)&&(!he.contacts||he.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||kr(x?.status)||"PROSPECT",onChange:re=>Se(re.target.value),children:NA.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Oe||!Ne||kr(Ne)===kr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||kr(Ne)===kr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{J(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(re=>n.jsx(wFe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:re=>q(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:z,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ge.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Te(re),Je(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${bFe(re.status)}`,children:CA(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ge.length,pageSize:K,currentPage:ne,onPrev:Be,onNext:nt,onPageSizeChange:re=>{U(re),oe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(Km,{label:"Name",name:"name",value:f.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:se})}),n.jsx(s8,{label:"Parent Company",value:f.parent_company,onChange:re=>{p(ot=>({...ot,parent_company:re}))},items:M.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(Km,{label:"Website",name:"website",value:f.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(Km,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(Km,{label:"Industry",name:"industry",value:f.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(Km,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(Km,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(a8,{label:"Status",name:"status",value:f.status,onChange:ce,options:[{value:"",label:"Select status"},...NA],required:!0,disabled:i}),n.jsx(s8,{label:"Assigned To",value:f.assigned_to,onChange:re=>{const ot=S.find(kt=>String(kt.id)===String(re));_(ot);let zt=null;ot&&ot.assigned_territory&&ot.assigned_territory.length===1&&(zt=ot.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:zt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:se,disabled:i||S.length===0}),n.jsx(a8,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ce,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(jFe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:ie,loading:X}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function wFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Km({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function a8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function s8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(NFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function NFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function jFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const SA={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},xl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),co=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function CFe(){const e=wt(),t=Zt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(SA),[R,z]=h.useState(""),[P,I]=h.useState("Filter by Accounts"),[q,Q]=h.useState(null),[V,X]=h.useState("Overview"),[W,ne]=h.useState(1),[oe,K]=h.useState(10),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),{comments:ke,addComment:he,refresh:qe}=Ta({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&qe()},[u?.id,qe]),h.useEffect(()=>{const D=t.state?.contactID;D&&(Oe(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const D=a.find(B=>B.id===Se);D?f(D):G.error("Contact not found."),Oe(null)}},[Se,a,r]);const Ce=h.useCallback(async(D=null)=>{i(!0);try{const B=await ae.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at||se?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(ge)});if(s(ue),D){const se=ue.find(Pe=>Pe.id===D);f(se||null)}}catch(B){console.error(B),s([]),B.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),xe=h.useCallback(async()=>{try{const D=await ae.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>(ue?.name||"").localeCompare(se?.name||""));l(ie)}catch(D){console.error(D),l([]),D.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),ee=h.useCallback(async()=>{try{const D=await ae.get("/users/all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>xl(ue).localeCompare(xl(se)));d(ie)}catch(D){console.error(D),d([]),D.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),Ee=h.useCallback(async D=>{try{const B=await ae.get(`/activities/contact/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ce(),xe(),ee()},[Ce,xe,ee]);const Ae=h.useMemo(()=>{const D=new Map;o.forEach(ie=>{ie?.id&&ie?.name&&D.set(String(ie.id),ie.name)}),a.forEach(ie=>{ie?.account_id&&ie?.account?.name&&D.set(String(ie.account_id),ie.account.name)});const B=Array.from(D.entries()).sort((ie,ue)=>ie[1].localeCompare(ue[1])).map(([ie,ue])=>({value:ie,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),Re=h.useMemo(()=>{const D=R.trim().toLowerCase(),B=P.trim();return a.filter(ie=>{const ue=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,co(ie?.created_at),co(ie?.updated_at)],se=D===""||ue.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(ie.account_id)===B;return se&&Pe})},[a,R,P]),et=Math.max(1,Math.ceil(Re.length/oe)||1);h.useEffect(()=>{ne(1)},[R,P]),h.useEffect(()=>{ne(D=>{const B=Math.max(1,Math.ceil(Re.length/oe)||1);return D>B?B:D})},[Re.length]);const De=h.useMemo(()=>{const D=(W-1)*oe;return Re.slice(D,D+oe)},[Re,W]),tt=()=>ne(D=>Math.max(D-1,1)),Je=()=>ne(D=>Math.min(D+1,et)),H=h.useMemo(()=>{if(!v||!_)return o;const D=a.find(ie=>ie.id===_);return!D||!D.account||o.some(ie=>ie.id===D.account.id)?o:[...o,D.account]},[o,v,_,a]),be=h.useCallback(()=>{x(!1),N(!1),E(null),M(SA),C(!1),Ge(!1)},[]),le=D=>{D.target.id==="modalBackdrop"&&!b&&!A&&be()},Z=D=>{const{name:B,value:ie}=D.target;M(ue=>({...ue,[B]:ie}))},_e=()=>{M(SA),N(!1),E(null),x(!0)},te=async D=>{if(!D)return;const B=await ae.get(`/accounts/get/${D.account_id}`);M({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),E(D.id),x(!0),f(null)},Ue=D=>{if(!D)return;const B=xl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[Ie,Ge]=h.useState(!1),gt=D=>{D.preventDefault(),Ge(!0);const B=T.first_name.trim(),ie=T.last_name.trim();if(!B||!ie){G.error("First name and last name are required.");return}if(!T.account_id){G.error("Account is required.");return}if(!T.assigned_to){G.error("Assigned To is required.");return}const se=T.email?.trim();if(!se){G.error("Email is required.");return}if(!se.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)){G.error("Please enter a valid email address.");return}const ge={first_name:B,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=v&&_?"update":"create",Fe=`${B} ${ie}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Fe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:_||null,name:Fe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:ie,targetId:ue,name:se}=D;k(!0);try{if(B==="create"){C(!0),await ae.post("/contacts/admin",ie),G.success(`Contact "${se}" created successfully.`);const Pe=u?.id||null;be(),await Ce(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${ue}`,ie),G.success(`Contact "${se}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;be(),await Ce(Pe),u?.id===ue&&f(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await ae.delete(`/contacts/admin/${ue}`),G.success(`Contact "${se}" deleted successfully.`),await Ce(Pe&&Pe!==ue?Pe:null),Pe===ue&&f(null)}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||ge;G.error(fe)}finally{(B==="create"||B==="update")&&C(!1),B==="delete"&&Q(null),k(!1),S(null)}},Be=()=>{A||S(null)},nt=D=>{f(D),X("Overview")},Te=()=>f(null),Qe=D=>{D.target.id==="contactModalBackdrop"&&!A&&Te()},ct=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(q===u.id||ct===u.id),je=u&&q===u.id,Ze=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Te,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:xl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>te(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ue(u),disabled:!!ht,children:je?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>X(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:xl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:co(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:co(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:ke,onAddComment:he})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.due_date||D.created_at)})]},`task-${B}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.call_time||D.created_at)})]},`call-${B}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.close_date||D.created_at)})]},`deal-${B}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(D.presented_date)||""})]},`quote-${B}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),ie=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${ie}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${xl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),Ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:D=>z(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>I(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Re.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:id,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{nt(D),Ee(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:xl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Mx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:ie,value:ue,key:se})=>{const Pe=bt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},se)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:co(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:oe,currentPage:W,onPrev:tt,onNext:Je,onPageSizeChange:D=>{K(D),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),J=p?n.jsx("div",{id:"modalBackdrop",onClick:le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{be(),Ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx(zc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Z,placeholder:"First name",required:!0,isSubmitted:Ie}),n.jsx(zc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Z,placeholder:"Last name",required:!0,isSubmitted:Ie}),n.jsx(r8,{label:"Account",value:T.account_id,onChange:D=>M(B=>({...B,account_id:D})),items:v?H:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:b||(v?H.length===0:o.length===0),required:!0,isSubmitted:Ie}),n.jsx(r8,{label:"Assigned To",value:T.assigned_to,onChange:D=>M(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:b||c.length===0}),n.jsx(zc,{label:"Title",name:"title",value:T.title,onChange:Z,placeholder:"Job title",disabled:b}),n.jsx(zc,{label:"Department",name:"department",value:T.department,onChange:Z,placeholder:"Department",disabled:b}),n.jsx(zc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Z,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),n.jsx(zc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(zc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(zc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(_Fe,{label:"Notes",name:"notes",value:T.notes,onChange:Z,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{be(),Ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(AFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:Be,loading:A}):null;return n.jsxs(n.Fragment,{children:[ce,Ze,J,de]})}function zc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function r8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(SFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function SFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function _Fe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function AFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const _A=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function JZ({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const I=await ae.get(`/leads/get/${c}`);u(I.data),v(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){G.error("Lead must be Qualified before it can be converted.");return}const I=await ae.put(`/leads/${d.id}/update/status`,{status:x});G.success("Lead status updated successfully");const q={...d,status:I.data.status};u(q),i&&i(q),a&&a(),t&&t()}catch(I){console.error(I),G.error("Failed to update lead status")}},R=async I=>{const q={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",q),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const V=(await ae.post("/accounts/convertedLead",q)).data.id,X={...A,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",U),pe=await ae.put(`/leads/convert/${I.id}`);i&&i(null),a(),G.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";G.error(V)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,q=>q.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_A(I.due_date||I.created_at)})]},`task-${q}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_A(I.start_time||I.created_at)})]},`meeting-${q}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:_A(I.call_time||I.created_at)})]},`call-${q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),q=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${I}?subject=${q}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>v(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const TFe=Vf.all(),AA=TFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),EFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),kFe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},TA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function LFe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(TA),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState(!1),[W,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[U,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const qe=async()=>{try{const je=await ae.get("/leads/getUsers");l(je.data)}catch(je){console.error(`Error fetching users: ${je}`)}},Ce=async()=>{x(!0);try{const je=await ae.get("/leads/admin/getLeads");f(je.data),console.log(je.data)}catch(je){console.error(`Error fetching leads: ${je}`)}finally{x(!1)}};h.useEffect(()=>{qe(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const je=u.find(Ze=>Ze.id===Number(t));je&&s(je)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(U){const Ze=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(U.work_phone),ce=[];U.work_phone&&ce.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&ce.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&ce.push(`Mobile 2: ${U.mobile_phone_2}`);const J=ce.length>0?ce.join(" | "):"";Ne({name:U.company_name||"",website:"",countryCode:Ze.code,phone_number:Ze.number,combinedPhoneNumbers:J,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Oe({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const xe=je=>N(je.target.value),ee=h.useMemo(()=>{const je=v.trim().toLowerCase(),Ze=b.trim().toUpperCase();return u.filter(ce=>{const J=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=je===""||J.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(je));let D=!1;return Ze==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Ze,de&&D})},[u,v,b]),Ee=Math.max(1,Math.ceil(ee.length/A)||1);h.useEffect(()=>{S(1)},[v,b]),h.useEffect(()=>{S(je=>{const Ze=Math.max(1,Math.ceil(ee.length/A)||1);return je>Ze?Ze:je})},[ee.length]);const Ae=h.useMemo(()=>{const je=(w-1)*A;return ee.slice(je,je+A)},[ee,w]),Re=()=>S(je=>Math.max(je-1,1)),et=()=>S(je=>Math.min(je+1,Ee)),De=h.useCallback(async je=>{try{const Ze=await ae.get(`/activities/lead/${je}`);ne(Ze.data&&typeof Ze.data=="object"?Ze.data:{})}catch(Ze){console.error(Ze),Ze.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),tt=je=>{s(je),De(je.id)},Je=()=>{s(null),t&&e("/admin/leads",{replace:!0})},H=()=>{i(!1),E(TA),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},be=je=>{je.target.id==="modalBackdrop"&&H()},le=()=>{E(TA),M(!1),z(null),d(null),i(!0)},Z=je=>{if(!je){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",je),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ze=B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);return ie?{code:ie[1],number:ie[2]}:{code:"+63",number:B}},ce=Ze(je.work_phone),J=Ze(je.mobile_phone_1),de=Ze(je.mobile_phone_2);let D="";if(je.assigned_to){D=String(je.assigned_to.id);const B=o?.find(ie=>ie.id===je.assigned_to.id);d(B)}E({first_name:je.first_name||"",last_name:je.last_name||"",company_name:je.company_name||"",title:je.title||"",department:je.department||"",email:je.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:J.code,mobile_phone_1:J.number,m2_ccode:de.code,mobile_phone_2:de.number,address:je.address||"",notes:je.notes||"",source:je.source||"",territory_id:je.territory?.id||null,lead_owner:D,status:je.status||"New"}),M(!0),z(je.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},_e=je=>{if(!je){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",je);const Ze=`${je.first_name} ${je.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ze}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:je.id,name:Ze}})},te=je=>{const{name:Ze,value:ce}=je.target;if(E(J=>({...J,[Ze]:ce})),Ze==="lead_owner"){const J=o.find(de=>de.id===parseInt(ce));d(J)}},[Ue,Ie]=h.useState(!1),Ge=je=>{if(je.preventDefault(),Ie(!0),!_.last_name?.trim()){G.error("Last name is required.");return}if(!_.company_name?.trim()){G.error("Company is required.");return}if(!_.email?.trim()){G.error("Email is required.");return}if(!_.email.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){G.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){G.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},J=T&&R?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:J==="create"?"Confirm New Lead":"Confirm Update",message:J==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:J==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:ce,targetId:R||null,name:de}})},gt=async()=>{if(!q?.action){Q(null);return}const{action:je}=q,{type:Ze,payload:ce,targetId:J,name:de,lead:D}=je;console.log(ce),X(!0);try{if(Ze==="create")I(!0),await ae.post("/leads/create",ce),G.success(`Lead "${de}" created successfully.`),H(),await Ce();else if(Ze==="update"){if(!J)throw new Error("Missing lead identifier for update.");I(!0);const B=await ae.put(`/leads/${J}`,ce);G.success(`Lead "${de}" updated successfully.`),a&&a.id===J&&s(null),H(),await Ce()}else if(Ze==="delete"){if(!J)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${J}`),G.success(`Lead "${de}" deleted successfully.`),a?.id===J&&s(null),await Ce()}}catch(B){console.error(B);const ie=Ze==="create"?"Failed to create lead. Please review the details and try again.":Ze==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||ie;G.error(ue)}finally{(Ze==="create"||Ze==="update")&&I(!1),Ze!=="edit"&&(X(!1),Q(null))}},ve=()=>{V||Q(null)},Be=u.filter(je=>je.status==="New").length,nt=u.filter(je=>je.status==="Contacted").length,Te=u.filter(je=>je.status==="Qualified").length,Qe=u.filter(je=>je.status==="Converted").length,ct=u.filter(je=>je.status==="Lost").length,ht=[{title:"New",value:Be,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:nt,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Te,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ct,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{le(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(je=>n.jsx(DFe,{...je},je.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:xe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:je=>C(je.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ee.length>0?Ae.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>tt(je),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[je.first_name," ",je.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:je.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.assigned_to?`${je.assigned_to.first_name} ${je.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${kFe(je.status||"New")}`,children:EFe(je.status||"New")})})]},je.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ee.length,pageSize:A,currentPage:w,onPrev:Re,onNext:et,onPageSizeChange:je=>{k(je),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:je=>je.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:te,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ue&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:te,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:te,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:AA.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:te,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ue&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(OFe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:je=>`${je.first_name} ${je.last_name}`,onChange:je=>{const Ze=o.find(J=>String(J.id)===String(je));d(Ze);let ce=null;Ze&&Ze.assigned_territory&&Ze.assigned_territory.length===1&&(ce=Ze.assigned_territory[0].id),E(J=>({...J,lead_owner:je,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:te,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(je=>n.jsx("option",{value:je.id,children:je.name},je.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:te,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:te,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{H(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ge,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),q&&n.jsx(PFe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:gt,onCancel:ve,loading:V}),a&&!r&&!T&&n.jsx(JZ,{relatedActs:W,lead:a,onBack:Je,fetchLeads:Ce,setSelectedLead:s,onEdit:Z,onDelete:_e})]})}function PFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function DFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function OFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const mb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Xa=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),MFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Xa,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Xa,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Xa,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Xa,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Xa,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),IFe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Xa,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Xa,{label:"Department",name:"department",value:e.department}),n.jsx(Xa,{label:"Title",name:"title",value:e.title}),n.jsx(Xa,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Xa,{label:"Email",name:"email",value:e.email}),n.jsx(Xa,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Xa,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),$Fe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Xa,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Xa,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Xa,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Xa,{label:"Description",name:"description",value:e.description}),n.jsx(Xa,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function RFe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(MFe,{data:mb});case 2:return n.jsx(IFe,{data:mb});case 3:return n.jsx($Fe,{data:mb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:mb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(nj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function eJ({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=en();h.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){G.error("No deal selected");return}if(!s||s===e.stage){G.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{G.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";G.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function tJ({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=en(),{comments:b,addComment:C,refresh:w}=Ta({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ae.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Yt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Aa,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},E))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(eJ,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}function zFe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState([]),[W,ne]=h.useState([]),[oe,K]=h.useState([]),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const J=t.state,de=J?.dealID;if(de&&!J?.openDealModal){Ne(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const J=v.find(de=>de.id===pe);J?d(J):G.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[qe,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=J=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[J]||J||"--",Ee=J=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[J]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async J=>{try{const de=await ae.get(`/activities/deal/${J}`);ye(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const J=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(v??[]).filter(B=>{const ie=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=J===""||ie.some(ge=>ge==null||ge===""?!1:ge.toString().toLowerCase().includes(J)),se=de==="Filter by Stage"||de===""||B.stage===xe[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&se&&Pe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/A)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(J=>{const de=Math.max(1,Math.ceil(Re.length/A)||1);return J>de?de:J})},[Re.length]);const De=h.useMemo(()=>{const J=(w-1)*A;return Re.slice(J,J+A)},[Re,w]),tt=()=>S(J=>Math.max(J-1,1)),Je=()=>S(J=>Math.min(J+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const J=await ae.get("/deals/admin/fetch-all"),D=[...Array.isArray(J.data)?J.data:[]].sort((B,ie)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-ue});N(D)}catch(J){J.response&&J.response.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch deals. Please try again later."),console.error(J)}finally{C(!1)}},le=async()=>{try{const J=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const J=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const J=await ae.get("/users/all");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const te=async J=>{J&&(Oe({id:J.id||null,name:J.name||"",account_id:J.account_id?.toString()||"",primary_contact_id:J.primary_contact_id?.toString()||"",stage:J.stage||"PROPOSAL",amount:J.amount?.toString()||"",close_date:J.close_date?new Date(J.close_date).toISOString().split("T")[0]:"",assigned_to:J.assigned_to?.toString()||"",currency:J.currency||"PHP",description:J.description||""}),he(J.account||null),Ce(J.contact||null),I(!0),Q(J.id),d(null),x(!0))},Ue=async(J=!1)=>{try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});if(N(B),!J&&c&&c.id){const ie=B.find(ue=>ue.id===c.id);ie&&d({...ie})}}catch(de){console.error("Failed to refresh deal data:",de),await be()}},Ie=J=>{const de=J.name.trim();if(!de){G.error("Deal name is required.");return}if(!J.account_id){G.error("Account is required.");return}const D=P&&q?"update":"create",B=de;M({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:J,targetId:q||null,name:B}})},Ge=J=>{if(!J)return;const de=J.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:de}})},gt=async()=>{if(!T?.action){M(null);return}const{action:J}=T,{type:de,formData:D,targetId:B,name:ie}=J;z(!0);try{if(de==="create"){E(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await ae.post("/deals/admin/create",ue),G.success(`Deal "${ie}" created successfully.`),x(!1),await be()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");E(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await ae.put(`/deals/admin/${B}`,ue),G.success(`Deal "${ie}" updated successfully.`),x(!1),await be()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${B}`),G.success(`Deal "${ie}" deleted successfully.`),c?.id===B&&d(null),await be()}}catch(ue){console.error(ue);const se=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||se;G.error(Pe)}finally{(de==="create"||de==="update")&&E(!1),z(!1),M(null)}},ve=()=>{R||M(null)},Be=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),I(!1),Q(null),E(!1)},nt=(v??[]).filter(J=>J.stage==="PROSPECTING").length,Te=(v??[]).filter(J=>J.stage==="QUALIFICATION").length,Qe=(v??[]).filter(J=>J.stage==="PROPOSAL").length,ct=(v??[]).filter(J=>J.stage==="NEGOTIATION").length,ht=(v??[]).filter(J=>J.stage==="CLOSED_WON").length,je=(v??[]).filter(J=>J.stage==="CLOSED_LOST").length,Ze=(v??[]).filter(J=>J.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:nt,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Te,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ct,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:je,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ze,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(J=>n.jsx(FFe,{...J},J.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:J=>s(J.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:J=>i(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:J=>l(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(J=>`${J.assigned_deals?.first_name} ${J.assigned_deals?.last_name}`))].map((J,de)=>n.jsx("option",{value:J,children:J},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(J=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...J}),Ae(J.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.contact?.first_name&&J.contact?.last_name?`${J.contact.first_name} ${J.contact.last_name}`:J.contact?.first_name||J.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(J.stage)}`,children:ee(J.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",J.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.assigned_deals?.first_name&&J.assigned_deals?.last_name?`${J.assigned_deals.first_name} ${J.assigned_deals.last_name}`:J.assigned_deals?.first_name||J.assigned_deals?.last_name||"--"})]},J.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:A,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:J=>{k(J),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&n.jsx(BFe,{onClose:Be,formData:Se,setFormData:Oe,isEditing:P,onSubmit:Ie,isSubmitting:_||R,accounts:V,contacts:W,users:oe,currentAccount:ke,currentContact:qe}),c&&n.jsx(tJ,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:te,onDelete:Ge,onStatusUpdate:Ue}),T&&n.jsx(UFe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:gt,onCancel:ve,loading:R})]})}function UFe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function FFe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function BFe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){G.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){G.error("Amount must be a number greater than 0.");return}if(!t.account_id){G.error("Please select an account.");return}if(!t.primary_contact_id){G.error("Please select a primary contact.");return}if(!t.assigned_to){G.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(EA,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(kA,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(kA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(i8,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(EA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(i8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(EA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(kA,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(qFe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function EA({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function i8({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function kA({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(HFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function HFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function qFe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const LA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],PA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ii=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},DA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",GFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},WFe=e=>{switch(Ii(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},fb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",wg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",VFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},OA=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},o8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},MA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Nw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},QFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Nw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=Nw(t);return a||null},YFe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},KFe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function XFe(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState(PA),[oe,K]=h.useState(""),[U,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const $=(await ae.get("/company/invoice-info"))?.data;e(`/manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:$}})}catch(F){const $=F?.response?.data?.detail||F?.message||"Failed to open print page.";G.error($)}finally{Q(!1)}},[w,e]),[Oe,ke]=h.useState(1),[he,qe]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),{comments:tt,addComment:Je,refresh:H}=Ta({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&H()},[w?.id,H]),h.useEffect(()=>{const $=t.state?.quoteID;if($){De($),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const F=r.find($=>$.id===et);F?S(F):G.error("Quote not found."),De(null)}},[et,r,o]),h.useEffect(()=>{let F=!0;return(async()=>{const me=QFe();if(me&&F){C(me);return}try{const Le=await ae.get("/auth/me"),$e=Nw(Le?.data);if($e&&F){C($e);return}}catch{}try{const Le=await ae.get("/users/me"),$e=Nw(Le?.data);if($e&&F){C($e);return}}catch{}F&&C(null)})(),()=>{F=!1}},[]);const be=h.useCallback(F=>F&&u.find(me=>String(me.id)===String(F))?.name||"",[u]),le=h.useCallback(F=>{if(!F)return"";const $=p.find(me=>String(me.id)===String(F));return $?`${$.first_name} ${$.last_name}`.trim():""},[p]),Z=h.useCallback(F=>{if(!F)return"--";const $=c.find(me=>String(me.id)===String(F));return $?.deal_name||$?.name||`Deal #${o8(F)}`},[c]),_e=h.useCallback(F=>{const $=c.find($e=>String($e.id)===String(F)),me=YFe($);let Le=KFe($);if(!Le&&me){const $e=p.filter(Ve=>String(Ve.account_id||"")===String(me));if($e.length>0){const Ve=[...$e].sort((Ye,At)=>{const Ct=`${Ye.first_name||""} ${Ye.last_name||""}`.trim().toLowerCase(),Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase();return Ct.localeCompare(Xt)});Le=String(Ve[0].id)}}if(me&&Le){const $e=p.find(Ve=>String(Ve.id)===String(Le));$e?.account_id&&String($e.account_id)!==String(me)&&(Le="")}return{accountId:me||"",contactId:Le||""}},[c,p]),te=h.useCallback(F=>{if(!F)return"--";if(F.deal?.deal_name)return F.deal.deal_name;if(F.deal?.name)return F.deal.name;const $=F.deal_id||F.deal?.id;return $?Z($):"--"},[Z]),Ue=h.useCallback(F=>{if(!F)return"--";if(F.account?.name)return F.account.name;let $=F.account_id||F.account?.id;if(!$){const me=F.deal_id||F.deal?.id;me&&($=_e(me).accountId)}return $?be($)||`Account #${$}`:"--"},[_e,be]),Ie=h.useCallback(F=>{if(!F)return"--";if(F.contact?.first_name||F.contact?.last_name)return`${F.contact?.first_name||""} ${F.contact?.last_name||""}`.trim()||"--";let $=F.contact_id||F.contact?.id;if(!$){const Le=F.deal_id||F.deal?.id;Le&&($=_e(Le).contactId)}return($?le($):"")||($?`Contact #${$}`:"--")},[_e,le]),Ge=h.useCallback(async(F=null)=>{l(!0);try{const $=await ae.get("/quotes/admin/fetch-all"),Le=[...Array.isArray($.data)?$.data:[]].sort(($e,Ve)=>{const Ye=$e?.created_at||$e?.updated_at||0,At=Ve?.created_at||Ve?.updated_at||0;return new Date(At)-new Date(Ye)});if(i(Le),F){const $e=Le.find(Ve=>Ve.id===F);S($e||null)}}catch($){console.error($),i([]),$.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),gt=h.useCallback(async()=>{try{const F=await ae.get("/deals/admin/fetch-all");d(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load deals (permission denied).")}},[]),ve=h.useCallback(async()=>{try{const F=await ae.get("/accounts/admin/fetch-all");f(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const F=await ae.get("/contacts/admin/fetch-all");x(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const F=await ae.get("/users/all");N(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&G.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{Ge(),gt(),ve(),Be(),nt()},[Ge,gt,ve,Be,nt]);const Te=h.useMemo(()=>{const F=oe.trim().toLowerCase(),$=U.trim();return r.filter(me=>{const Le=te(me),$e=Ue(me),Ve=Ie(me),Ye=OA(me.presented_date,me.validity_days),At=[me.quote_id,Le,$e,Ve,me.total_amount?.toString(),me.validity_days?.toString(),me.presented_date?wg(me.presented_date):"",Ye?wg(Ye):"",me.assigned_user?.first_name,me.assigned_user?.last_name,me.creator?.first_name,me.creator?.last_name,me.status,me.notes,fb(me.created_at),fb(me.updated_at)],Ct=F===""||At.some(sa=>sa==null?!1:sa.toString().toLowerCase().includes(F)),Xt=$==="Filter by Status"||Ii(me.status)===$;return Ct&&Xt})},[r,oe,U,te,Ue,Ie]),Qe=Math.max(1,Math.ceil(Te.length/he)||1);h.useEffect(()=>ke(1),[oe,U]),h.useEffect(()=>{ke(F=>{const $=Math.max(1,Math.ceil(Te.length/he)||1);return F>$?$:F})},[Te.length,he]);const ct=h.useMemo(()=>{const F=(Oe-1)*he;return Te.slice(F,F+he)},[Te,Oe,he]),ht=()=>ke(F=>Math.max(F-1,1)),je=()=>ke(F=>Math.min(F+1,Qe)),Ze=F=>{S(F),xe("Overview"),Ee(Ii(F?.status)||"Draft")},ce=()=>{S(null),xe("Overview")},J=F=>{F.target.id==="quoteModalBackdrop"&&!P&&ce()},de=h.useCallback(()=>{k(!1),E(!1),X(null),ne(PA),M(!1)},[]),D=F=>{F.target.id==="modalBackdrop"&&!T&&!P&&de()},B=F=>{const{name:$,value:me}=F.target;if($==="deal_id"){const{accountId:Le,contactId:$e}=_e(me);ne(Ve=>({...Ve,deal_id:me,account_id:Le,contact_id:$e}));return}ne(Le=>({...Le,[$]:me}))},ie=()=>{ne(PA),E(!1),X(null),k(!0)},ue=F=>{if(!F)return;S(null);const $=F.deal?.id?String(F.deal.id):F.deal_id?String(F.deal_id):"",me=$?_e($):{accountId:"",contactId:""},Le=F.account?.id?String(F.account.id):F.account_id?String(F.account_id):me.accountId,$e=F.contact?.id?String(F.contact.id):F.contact_id?String(F.contact_id):me.contactId,Ve=F.assigned_user?.id?String(F.assigned_user.id):F.assigned_to?String(F.assigned_to):"";ne({deal_id:$,account_id:Le||"",contact_id:$e||"",total_amount:F.total_amount?.toString()||"",presented_date:VFe(F.presented_date),validity_days:F.validity_days!==null&&F.validity_days!==void 0?String(F.validity_days):"",status:Ii(F.status)||"Draft",assigned_to:Ve,notes:F.notes||"",subtotal:parseFloat(F.subtotal)||0,tax_rate:parseFloat(F.tax_rate)||0,tax_amount:parseFloat(F.tax_amount)||0,discount_type:F.discount_type||"",discount_value:parseFloat(F.discount_value)||0,discount_amount:parseFloat(F.discount_amount)||0,currency:F.currency||"PHP",items:Array.isArray(F.items)?F.items.map(Ye=>({id:Ye.id,item_type:Ye.item_type||"Product",name:Ye.name||"",description:Ye.description||"",sku:Ye.sku||"",variant:Ye.variant||"",unit:Ye.unit||"pcs",quantity:parseFloat(Ye.quantity)||1,unit_price:parseFloat(Ye.unit_price)||0,discount_percent:parseFloat(Ye.discount_percent)||0,discount_amount:parseFloat(Ye.discount_amount)||0,line_total:parseFloat(Ye.line_total)||0,sort_order:Ye.sort_order||0})):[]}),E(!0),X(F.id),k(!0)},se=F=>{if(F.target.checked){const $=ct.map(me=>me.id);Re($)}else Re([])},Pe=F=>{Re($=>$.includes(F)?$.filter(me=>me!==F):[...$,F])},ge=F=>{if(!F)return;const $=F.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:$}})},fe=async()=>{Ae.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Fe,Xe]=h.useState(!1),pt=F=>{if(F.preventDefault(),Xe(!0),!b){G.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){G.error("Deal is required.");return}if(!W.assigned_to){G.error("Assigned To is required.");return}const me=_e(W.deal_id),Le=W.items.map((Ct,Xt)=>({item_type:Ct.item_type||"Product",name:Ct.name,description:Ct.description||null,sku:Ct.sku||null,variant:Ct.variant||null,unit:Ct.unit||null,quantity:parseFloat(Ct.quantity)||1,unit_price:parseFloat(Ct.unit_price)||0,discount_percent:parseFloat(Ct.discount_percent)||0,sort_order:Ct.sort_order??Xt})),$e={deal_id:Number(W.deal_id),account_id:me.accountId?Number(me.accountId):null,contact_id:me.contactId?Number(me.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:Le},Ve=_&&V?"update":"create",Ye=Z(W.deal_id),At=Ve==="create"?{...$e,created_by_id:Number(b)}:$e;z({title:Ve==="create"?"Confirm New Quote":"Confirm Update",message:Ve==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:Ye}),"?"]}),confirmLabel:Ve==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ve,payload:At,targetId:V||null,name:Ye}})},Nt=async()=>{if(!R?.action){z(null);return}const{action:F}=R,{type:$,payload:me,targetId:Le,name:$e}=F;I(!0);try{if($==="create")M(!0),await ae.post("/quotes/admin",me),G.success("Quote created successfully."),de(),await Ge();else if($==="update"){if(!Le)throw new Error("Missing quote identifier for update.");M(!0),await ae.put(`/quotes/admin/${Le}`,me),G.success("Quote updated successfully."),de(),await Ge(),w?.id===Le&&S(null)}else if($==="delete"){if(!Le)throw new Error("Missing quote identifier for deletion.");const Ve=w?.id;Ne(Le),await ae.delete(`/quotes/admin/${Le}`),G.success(`Quote "${$e}" deleted successfully.`),await Ge(Ve&&Ve!==Le?Ve:null),Ve===Le&&S(null)}else $==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),G.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await Ge())}catch(Ve){console.error(Ve);const Ye=$==="create"?"Failed to create quote. Please review the details and try again.":$==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";G.error(Ye),($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null)}finally{($==="create"||$==="update")&&M(!1),$==="delete"&&Ne(null),I(!1),z(null)}},St=()=>{P||z(null)},Ht=h.useCallback((F,$)=>{const me=F?.deal_id??F?.deal?.id??"",Le=me?Number(me):null,$e=Le?_e(String(Le)):{accountId:"",contactId:""},Ve=F?.account_id??F?.account?.id??$e.accountId??null,Ye=F?.contact_id??F?.contact?.id??$e.contactId??null,At=F?.total_amount??0,Ct=F?.assigned_to??F?.assigned_user?.id??null;return{deal_id:Le,account_id:Ve!=null&&String(Ve).trim()!==""?Number(Ve):null,contact_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,total_amount:Number(At),presented_date:F?.presented_date||null,validity_days:F?.validity_days===""||F?.validity_days===void 0||F?.validity_days===null?null:Number(F.validity_days),status:$,assigned_to:Ct!=null&&String(Ct).trim()!==""?Number(Ct):null,notes:F?.notes?.trim()||null}},[_e]),on=h.useCallback(async()=>{if(!w?.id)return;const F=Ii(ee),$=[F,F.toLowerCase()],me=async Le=>ae.patch(`/quotes/admin/${w.id}/status`,{status:Le},{headers:{"Content-Type":"application/json"}});try{let Le=!1;for(const $e of $)try{await me($e),Le=!0;break}catch(Ve){if(Ve?.response?.status===422)continue;throw Ve}if(!Le){const $e=Ht(w,F);if(!$e.deal_id){G.error("Cannot update status: missing deal_id on selected quote.");return}if(!$e.total_amount||$e.total_amount<=0){G.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,$e)}G.success(`Quote status updated to ${F}`),S(null),xe("Overview"),await Ge()}catch(Le){console.error(Le);const $e=Le?.response?.data?.message||(Le?.response?.data?.errors?Object.values(Le.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";G.error($e)}},[w,ee,Ge,Ht]),cn=[{label:"Filter by Status",value:"Filter by Status"},...LA.map(F=>({label:F.label,value:F.value}))],re=R?.action?.type==="delete"?R.action.targetId:null,ot=w&&(pe===w.id||re===w.id),zt=w&&pe===w.id,kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:J,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:ce,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:te(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${WFe(w.status)}`,children:DA(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:q||T||P,children:[n.jsx(hn,{className:"mr-2"}),q?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ue(w),disabled:P||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>ge(w),disabled:!!ot,children:zt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(F=>n.jsx("button",{onClick:()=>xe(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:MA(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:te(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:wg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:wg(OA(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:DA(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:fb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:fb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:tt,onAddComment:Je})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${MA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||Ii(w.status)||"Draft",onChange:F=>Ee(F.target.value),children:LA.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))}),n.jsx("button",{onClick:on,disabled:Ii(ee)===Ii(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ii(ee)===Ii(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Kt=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ie(),Xe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:F=>K(F.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:F=>ye(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:cn.map(F=>n.jsx("option",{value:F.value,children:F.label},F.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ct.length>0&&Ae.length===ct.length,onChange:se,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Te.length>0?ct.map(F=>{const $=OA(F.presented_date,F.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ze(F),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:me=>me.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes(F.id),onChange:()=>Pe(F.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:MA(F.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:te(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ue(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ie(F)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:F.total_amount?`${s}${Number(F.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${GFe(F.status)}`,children:DA(F.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:F.assigned_user?`${F.assigned_user.first_name} ${F.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:wg($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},F.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Te.length,pageSize:he,currentPage:Oe,onPrev:ht,onNext:je,onPageSizeChange:F=>{qe(F),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Me=A?n.jsx("div",{id:"modalBackdrop",onClick:D,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[n.jsx("button",{onClick:()=>{de(),Xe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:pt,children:[n.jsx(d8,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:F=>{const{accountId:$,contactId:me}=_e(F);ne(Le=>({...Le,deal_id:F,account_id:$,contact_id:me}))},items:Array.isArray(c)?c:[],getLabel:F=>`${o8(F?.deal_id??"")} ${F?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Fe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(c8,{label:"Account",value:be(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(c8,{label:"Contact",value:le(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:W.items,onChange:F=>ne($=>({...$,items:F})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:F=>{ne($=>({...$,subtotal:F.subtotal,discount_amount:F.discount_amount,tax_amount:F.tax_amount,total_amount:F.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:F=>ne($=>({...$,discount_type:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:F=>ne($=>({...$,discount_value:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:F=>ne($=>({...$,tax_rate:F.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(l8,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:B,disabled:T}),n.jsx(l8,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:B,placeholder:"30",disabled:T}),n.jsx(d8,{label:"Assigned To",value:W.assigned_to||"",onChange:F=>ne($=>({...$,assigned_to:F})),items:Array.isArray(v)?v:[],getLabel:F=>{const $=`${F?.first_name??""} ${F?.last_name??""}`.trim();return $?F?.role?`${$} (${F.role})`:$:F?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Fe,disabled:T}),n.jsx(ZFe,{label:"Status",name:"status",value:W.status,onChange:B,options:LA,required:!0,disabled:T}),n.jsx(e7e,{label:"Notes",name:"notes",value:W.notes,onChange:B,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{de(),Xe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,vt=R?n.jsx(t7e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:Nt,onCancel:St,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?kt:Kt,Me,vt]})}function l8({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function c8({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function ZFe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function d8({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(JFe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function JFe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function e7e({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function t7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function n7e(){const{userRole:e}=Qs();return n.jsx(Bj,{currentUserRole:e,currentUserId:null})}function a7e(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,E,k.description],R=w===""||M.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,r]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Rx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx($x,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:w=>{d(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const s7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],r7e=e=>e?String(e).toUpperCase():"",cf=e=>{const t=r7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},IA=e=>{const t=cf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},u8=e=>{switch(cf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},m8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function i7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[P,I]=h.useState(null),{comments:q,addComment:Q,refresh:V}=Ta({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&V()},[a?.id,V]),zs();const X=wt(),W=Zt(),ne=Te=>{if(!Te)return"";const Qe=String(Te).split("-");return Qe.length===3?`${Qe[0]}-${Qe[2]}`:String(Te)},K={subject:"",call_time:(()=>{const Te=new Date,Qe=Te.getFullYear(),ct=String(Te.getMonth()+1).padStart(2,"0"),ht=String(Te.getDate()).padStart(2,"0");return`${Qe}-${ct}-${ht}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[U,ye]=h.useState(K);h.useEffect(()=>{const Te=W.state,Qe=Te?.callID;if(Qe&&!Te?.openCallModal){I(Qe),X(W.pathname,{replace:!0,state:{}});return}!Te?.openCallModal||!Te?.initialCallData||Te.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||Te.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ye(ct=>({...ct,...Te.initialCallData,relatedTo1:Te.initialCallData.relatedTo1?String(Te.initialCallData.relatedTo1):"",relatedTo2:Te.initialCallData.relatedTo2?String(Te.initialCallData.relatedTo2):""})),X(W.pathname,{replace:!0,state:{}}))},[W.state,o]),h.useEffect(()=>{if(P&&u.length>0&&!R){const Te=u.find(Qe=>Qe.id===P);Te?s(Te):G.error("Call not found."),I(null)}},[P,u,R]);const pe=async()=>{try{z(!0);const Te=await ae.get("/calls/admin/fetch-all"),ct=[...Array.isArray(Te.data)?Te.data:[]].sort((ht,je)=>{const Ze=ht?.created_at?new Date(ht.created_at):0;return(je?.created_at?new Date(je.created_at):0)-Ze});f(ct)}catch(Te){console.error("Error fetching calls:",Te),G.error("Failed to load calls")}finally{z(!1)}},Ne=async()=>{try{const Te=await ae.get("/users/all");x(Te.data)}catch(Te){console.error("Error fetching users: ",Te)}};h.useEffect(()=>{Ne(),pe()},[]);const Se=[],Oe="",ke="Filter by Status",he="Filter by Users",[qe,Ce]=h.useState(1),[xe,ee]=h.useState(10),Ee=u,Ae=u,Re=u.length,et=u.filter(Te=>cf(Te.status)==="PLANNED").length,De=u.filter(Te=>cf(Te.status)==="HELD").length,tt=u.filter(Te=>cf(Te.status)==="NOT_HELD").length,Je=[{title:"Total",value:Re,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:et,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:De,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:tt,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[H,be]=h.useState("Overview"),le=Te=>{const{name:Qe,value:ct}=Te.target;ye(ht=>{const je={...ht,[Qe]:ct};return Qe==="relatedType1"&&(je.relatedTo1="",ct==="Lead"?(je.relatedType2=null,je.relatedTo2=null,d([])):ct==="Account"&&(je.relatedType2="Contact")),Qe==="relatedType2"&&(je.relatedTo2=""),je})};h.useEffect(()=>{const Te=async()=>{try{l([]);let Qe;U.relatedType1==="Lead"?Qe=await ae.get("/leads/admin/getLeads"):U.relatedType1==="Account"&&(Qe=await ae.get("/accounts/admin/fetch-all"));let ct=[];if(Qe&&Array.isArray(Qe.data)?ct=Qe.data:ct=[],v&&U.relatedTo1)try{let ht;U.relatedType1==="Lead"?ht=await ae.get(`/leads/get/${U.relatedTo1}`):U.relatedType1==="Account"&&(ht=await ae.get(`/accounts/get/${U.relatedTo1}`)),ht&&ht.data&&(ct.some(Ze=>String(Ze.id)===String(U.relatedTo1))||(ct=[ht.data,...ct]))}catch(ht){console.error("Error fetching specific related item:",ht)}l(ct)}catch(Qe){console.error("Error fetching data:",Qe),l([])}};U.relatedType1&&Te()},[U.relatedType1,v,U.relatedTo1]),h.useEffect(()=>{const Te=async()=>{try{d([]);let Qe;if(U.relatedType1==="Account"&&U.relatedTo1)U.relatedType2==="Contact"?Qe=await ae.get(`/contacts/from-acc/${U.relatedTo1}`):U.relatedType2==="Deal"?Qe=await ae.get(`/deals/from-acc/${U.relatedTo1}`):U.relatedType2==="Quote"&&(Qe=await ae.get(`/quotes/from-acc/${U.relatedTo1}`));else{d([]);return}Qe&&Array.isArray(Qe.data)?d(Qe.data):d([])}catch(Qe){console.error("Error fetching data:",Qe),d([])}};U.relatedType2&&Te()},[U.relatedType2,U.relatedTo1,U.relatedType1]);const[Z,_e]=h.useState(!1),te=Te=>{Te.preventDefault(),_e(!0);const Qe=U.subject;if(!Qe||Qe.trim()===""){G.error("Subject is required.");return}if(!U.relatedTo1){G.error(`Please select a ${U.relatedType1||"Lead/Account"}.`);return}if(!U.assigned_to){G.error("Subject is required.");return}const ht={...U,duration_minutes:U.duration_minutes?parseInt(U.duration_minutes,10):null,relatedTo1:U.relatedTo1?parseInt(U.relatedTo1,10):null,relatedTo2:U.relatedType1==="Lead"?null:U.relatedTo2?parseInt(U.relatedTo2,10):null,relatedType2:U.relatedType1==="Lead"?null:U.relatedType2,assigned_to:U.assigned_to?parseInt(U.assigned_to,10):null},je=v&&b?"update":"create",Ze=(U.subject||"").trim()||"Untitled Call";i({title:je==="create"?"Confirm New Call":"Confirm Update",message:je==="create"?`Create "${Ze}"?`:`Save changes to "${Ze}"?`,confirmLabel:je==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:je,payload:ht,targetId:b||null,name:Ze}})},Ue=Te=>s(Te),Ie=()=>{t(!1),N(!1),C(null)},Ge=async()=>{if(!r?.action){i(null);return}const{action:Te}=r,{type:Qe,payload:ct,targetId:ht,name:je}=Te;k(!0);try{if(Qe==="create")S(!0),await ae.post("/calls/create",ct),G.success(`Call "${je}" created successfully.`),t(!1),ye(K),N(!1),C(null),await pe();else if(Qe==="update"){if(!ht)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${ht}`,ct),G.success(`Call "${je}" updated successfully.`),t(!1),ye(K),N(!1),C(null),await pe()}else if(Qe==="delete"){if(!ht)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${ht}`),G.success(`Call "${je}" deleted successfully.`),a?.id===ht&&s(null),await pe()}}catch(Ze){const ce=Qe==="create"?"Failed to create call. Please review the details and try again.":Qe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",J=Ze?.response?.data?.detail||ce;G.error(J)}finally{(Qe==="create"||Qe==="update")&&S(!1),k(!1),i(null)}},gt=()=>{A||i(null)},ve=async()=>{if(a?.id)try{M(!0),await ae.put(`/calls/${a.id}`,{status:_}),G.success(`Status updated to ${IA(_)}`),f(Te=>Array.isArray(Te)?Te.map(Qe=>Qe.id===a.id?{...Qe,status:_}:Qe):Te),s(null)}catch(Te){const Qe=Te.response?.data?.detail||"Failed to update status.";G.error(Qe)}finally{M(!1)}};h.useEffect(()=>{a&&E(cf(a.status))},[a]);const Be=a?n.jsxs("div",{id:"callModalBackdrop",onClick:Te=>Te.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${u8(a.status)}`,children:IA(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const Te=Ze=>{if(!Ze)return"";const ce=new Date(Ze),J=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0"),B=String(ce.getHours()).padStart(2,"0"),ie=String(ce.getMinutes()).padStart(2,"0");return`${J}-${de}-${D}T${B}:${ie}`},Qe=a.lead?"Lead":a.account?"Account":"Lead",ct=a.lead?a.lead.id:a.account?a.account.id:null,ht=Qe==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",je=Qe==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ye({subject:a.subject||"",call_time:Te(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:Qe,relatedType2:ht,relatedTo1:ct?String(ct):"",relatedTo2:je?String(je):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const Te=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${Te}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:Te}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Te=>n.jsx("button",{onClick:()=>be(Te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${H===Te?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Te},Te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[H==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(uo,{label:"Call Time",value:m8(a.call_time)}),n.jsx(uo,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(uo,{label:"Direction",value:a.direction||"--"}),n.jsx(uo,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(uo,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(uo,{label:"Account",value:a.account.name}),a.contact&&n.jsx(uo,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(uo,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(uo,{label:"Quote",value:ne(a.quote.quote_id)}),n.jsx(uo,{label:"Created At",value:m8(a.created_at)})]})}),H==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:q,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:Te=>E(Te.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ve,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,nt=e?n.jsx("div",{id:"modalBackdrop",onClick:Te=>Te.target.id==="modalBackdrop"&&Ie(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Ie(),_e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:te,noValidate:!0,children:[n.jsx(l7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:U.subject,onChange:le,isSubmitted:Z,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:le,value:U.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx($A,{items:Array.isArray(o)?o:[],value:U.relatedTo1??"",placeholder:`Search ${U.relatedType1||"here"}...`,getLabel:Te=>U.relatedType1==="Lead"?Te.title:Te.name??"",onChange:Te=>ye(Qe=>({...Qe,relatedTo1:Te})),required:!0,isSubmitted:Z,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:le,value:U.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:U.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx($A,{disabled:U.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:U.relatedTo2??"",placeholder:U.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${U.relatedType2||"Contact"}...`:`No ${U.relatedType2||""} data found`,getLabel:Te=>U.relatedType2==="Contact"?`${Te.first_name??""} ${Te.last_name??""}`.trim():U.relatedType2==="Quote"?ne(Te.quote_id)??"":Te.name??"",onChange:Te=>ye(Qe=>({...Qe,relatedTo2:Te}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:U.call_time,onChange:le,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:U.duration_minutes,onChange:le,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),n.jsx($A,{items:Array.isArray(p)?p:[],value:U.assigned_to??"",placeholder:"Search an account...",getLabel:Te=>`${Te.first_name} ${Te.last_name}`,onChange:Te=>ye(Qe=>({...Qe,assigned_to:Te})),required:!0,isSubmitted:Z})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:le,value:U.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:le,value:U.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(c7e,{className:"col-span-2",label:"Notes",value:U.notes,onChange:le,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Ie(),_e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ye(K),N(!1),C(null),t(!0),_e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(Te=>n.jsx(o7e,{...Te},Te.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Oe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:ke,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),s7e.map(Te=>n.jsx("option",{value:Te.value,children:Te.label},Te.value))]}),n.jsxs("select",{defaultValue:he,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Se.map(Te=>n.jsx("option",{value:Te.name,children:Te.name},Te.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):Ae.length>0?Ae.map(Te=>n.jsxs("tr",{onClick:()=>Ue(Te),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:Te.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[Te.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.lead.title}),Te.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.account.name}),Te.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Te.contact.first_name," ",Te.contact.last_name]}),Te.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Te.deal.name}),Te.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne(Te.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Te.call_time?new Date(Te.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:Te?.call_assign_to?`${Te.call_assign_to.first_name} ${Te.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u8(Te.status)}`,children:IA(Te.status)})})]},Te.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:Ee.length,pageSize:xe,currentPage:qe,onPrev:()=>Ce(Te=>Math.max(1,Te-1)),onNext:()=>Ce(Te=>Te+1),onPageSizeChange:Te=>{ee(Te),Ce(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),Be,nt,r&&n.jsx(d7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Ge,onCancel:gt,loading:A})]})}function o7e({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function l7e({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function c7e(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function uo({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function d7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function $A({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const f8=["Not started","In progress","Deferred","Completed"],h8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},nJ=e=>e&&(h8[e]||h8[String(e).toUpperCase()])||"Not started",u7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},g8=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},m7e=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),nJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},f7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=q=>{if(!q)return"";const Q=String(q).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(q)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",E="",T="",M="";const R=c(),z=v(),P=l(),I=x();if(R){w="Account",_="Account",E=z,S=String(R);const q=d(),Q=u(),V=N(),X=b(),W=f(),ne=C();q?(A="Contact",T="Contact",M=V,k=String(q)):Q?(T="Deal",A="Deal",M=X,k=String(Q)):W&&(T="Quote",A="Quote",M=ne,k=String(W))}else P?(_="Lead",E=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:nJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function h7e(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,E]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState([]),V=wt(),X=Zt(),[W,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):G.error("Task not found."),K(null)}},[oe,u,p]);const U=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),G.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(f7e);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&E(1)}catch(H){console.error("Failed to load tasks:",H),G.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(U(),ye())},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:u7e(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=m7e(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),G.success("Task updated successfully.")):(await ae.post("/tasks/create",be),G.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";G.error(Z)}},ke=H=>{H&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>q.includes(H.id)))Q(q.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...q,...H])])}},qe=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{q.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${q.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:q}})},xe=async()=>{if(!R?.action){z(null);return}const{action:H}=R;I(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),G.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),G.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),G.error("Failed to delete task.")}finally{I(!1),z(null)}},ee=()=>{P||z(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{E(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&E(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(g7e,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),f8.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:f8.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?g8(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>q.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:q.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${q.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:q.includes(H.id),onChange:()=>qe(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?g8(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>E(H=>Math.max(H-1,1)),onNext:()=>E(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{M(H),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(l0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:ke}),R&&n.jsx(p7e,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function g7e({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function p7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const aJ=e=>e?e.toUpperCase():"",hb=e=>{const t=aJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},x7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},y7e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},b7e=e=>{const t=aJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},RA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},v7e=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[E,T]=h.useState(RA),[M,R]=h.useState(!1),[z,P]=h.useState(null),[I,q]=h.useState(!1),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState(null);h.useEffect(()=>{const ee=t.state?.openMeetingModal,Ee=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ae=t.state?.meetingID;ee||Ee?(b(!0),t.state?.initialMeetingData&&T(Re=>({...Re,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ae&&(oe(Ae),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ne&&i.length>0&&!l){const ee=i.find(Ee=>Ee.id===ne);ee?w(ee):G.error("Meeting not found."),oe(null)}},[ne,i,l]);const K=async()=>{if(s&&r){const ee=sessionStorage.getItem("meetingDetailData");if(ee)try{const Ee=JSON.parse(ee);if(Ee.id===parseInt(s)){w(Ee),sessionStorage.removeItem("meetingDetailData");return}}catch(Ee){console.error(Ee)}}c(!0);try{const ee=await ae.get("/meetings/admin/fetch-all"),Ae=[...Array.isArray(ee.data)?ee.data:[]].sort((Re,et)=>{const De=Re?.createdAt?new Date(Re.createdAt).getTime():0;return(et?.createdAt?new Date(et.createdAt).getTime():0)-De});if(o(Ae),s&&!C){const Re=Ae.find(et=>et.id===parseInt(s));Re&&w(Re)}}catch{G.error("Failed to load meetings.")}finally{c(!1)}},U=async()=>{try{const ee=await ae.get("/users/all");u(Array.isArray(ee.data)?ee.data:[])}catch(ee){console.error(ee)}};h.useEffect(()=>{K(),U()},[]);const ye=ee=>p(ee.target.value),pe=h.useMemo(()=>{const ee=f.trim().toLowerCase(),Ee=x.trim().toUpperCase();return i.filter(Ae=>{const Re=[Ae?.activity,Ae?.description,Ae?.relatedTo,Ae?.assignedTo],et=ee===""||Re.some(tt=>tt&&tt.toString().toLowerCase().includes(ee)),De=Ee==="FILTER BY STATUS"||hb(Ae.status||"PENDING")===Ee;return et&&De})},[i,f,x]),Ne=h.useMemo(()=>{const ee=(S-1)*k;return pe.slice(ee,ee+k)},[pe,S]),Se=()=>{b(!1),T(RA),R(!1),P(null),q(!1)},Oe=()=>{T(RA),R(!1),P(null),b(!0)},ke=ee=>{let Ee="";if(ee.meet_assign_to?.id)Ee=String(ee.meet_assign_to.id);else if(ee.assignedTo){const le=d.find(Z=>`${Z.first_name} ${Z.last_name}`===ee.assignedTo);Ee=le?String(le.id):""}const Ae=le=>{if(!le)return"";try{const Z=new Date(le),_e=Z.getTimezoneOffset()*6e4;return new Date(Z.getTime()-_e).toISOString().slice(0,16)}catch{return""}};let Re="Lead",et="",De="Contact",tt="";if(ee.lead)Re="Lead",et=String(ee.lead.id);else if(ee.account)Re="Account",et=String(ee.account.id),ee.contact?(De="Contact",tt=String(ee.contact.id)):ee.deal?(De="Deal",tt=String(ee.deal.id)):ee.quote&&(De="Quote",tt=String(ee.quote.id));else if(ee.relatedType||ee.related_type){const le=ee.relatedType||ee.related_type,Z=ee.related_to||ee.relatedToId;le==="Lead"?(Re="Lead",et=String(Z)):(Re="Account",et=ee.account_id?String(ee.account_id):"")}const Je={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},H=hb(ee.status),be=Je[H]||"Planned";T({subject:ee.subject||ee.activity||"",location:ee.location||"",startTime:Ae(ee.start_time||ee.startTime),endTime:Ae(ee.end_time||ee.endTime),status:be,notes:ee.description||ee.notes||"",assignedTo:Ee,relatedType1:Re,relatedTo1:et,relatedType2:De,relatedTo2:tt}),R(!0),P(ee.id),w(null),b(!0)},he=ee=>{if(!ee.subject?.trim())return G.error("Subject is required.");if(!ee.startTime)return G.error("Start time is required.");if(ee.endTime&&!(new Date(ee.endTime)-new Date(ee.startTime)>0))return G.error("End time must be after start time.");ee.relatedType1,ee.relatedTo1,ee.relatedType1==="Account"&&ee.relatedType2&&ee.relatedTo2&&(ee.relatedType2,ee.relatedTo2);const Ee={...ee,assignedTo:parseInt(ee.assignedTo),relatedTo1:parseInt(ee.relatedTo1),relatedTo2:parseInt(ee.relatedTo2)},Ae=M&&z?"update":"create";V({title:Ae==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ae} "${Ee.subject}"?`,confirmLabel:Ae==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ae,payload:Ee,targetId:z,name:Ee.subject}})},qe=async()=>{if(!Q?.action)return;const{type:ee,payload:Ee,targetId:Ae,name:Re}=Q.action;W(!0);try{ee==="create"?(q(!0),await ae.post("/meetings/create",Ee),G.success(`Meeting "${Re}" created.`),Se(),await K()):ee==="update"?(q(!0),await ae.put(`/meetings/${Ae}`,Ee),G.success(`Meeting "${Re}" updated.`),Se(),await K()):ee==="delete"&&(await ae.delete(`/meetings/${Ae}`),G.success(`Meeting "${Re}" deleted.`),C?.id===Ae&&w(null),await K())}catch(et){const De=et.response?.data?.detail||"Action failed.";G.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{q(!1),W(!1),V(null)}},Ce=ee=>{V({title:"Delete Meeting",message:`Permanently delete "${ee.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ee.id,name:ee.activity}})},xe=async(ee,Ee)=>{try{await ae.put(`/meetings/${ee}`,{status:Ee}),G.success("Status updated"),K(),w(null)}catch{G.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:ke,onDelete:Ce,onStatusUpdate:xe}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ee=>v(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ne.length>0?Ne.map(ee=>n.jsxs("tr",{onClick:()=>w(ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ee.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.lead.title}),ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.account.name}),ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ee.contact.first_name," ",ee.contact.last_name]}),ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.deal.name}),ee.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:x7e(ee.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:y7e(ee.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ee.meet_assign_to.first_name," ",ee.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b7e(hb(ee.status))}`,children:hb(ee.status).replace("_"," ")})})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:pe.length,pageSize:k,currentPage:S,onPrev:()=>A(ee=>Math.max(1,ee-1)),onNext:()=>A(ee=>ee+1),onPageSizeChange:ee=>{_(ee),A(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&n.jsx(Jj,{onClose:Se,formData:E,setFormData:T,isEditing:M,onSubmit:he,isSubmitting:I||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:ke,onDelete:Ce,onStatusUpdate:xe}),Q&&n.jsx(w7e,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:qe,onCancel:()=>V(null),loading:X})]})};function w7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const e1=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Ng={firstName:"",lastName:"",email:"",password:"",role:""},N7e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},jo=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",j7e=e=>{const t=jo(e),a=e1.find(s=>jo(s.value)===t);return a?a.value:e||""},Dk=e=>{const t=jo(e),a=e1.find(s=>jo(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},p8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},zA=(e,{size:t="sm"}={})=>{const a=jo(e),s=N7e[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Dk(e)})},C7e=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},x8=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function S7e(){const{user:e,loading:t}=en(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(Ng),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[P,I]=h.useState(10),[q,Q]=h.useState("Overview"),[V,X]=h.useState(""),[W,ne]=h.useState(!1),oe=jo(e?.role),K=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(oe),U=!t&&K,ye=h.useMemo(()=>{const te=e1.filter(Ue=>jo(Ue.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...te]},[]),pe=h.useCallback(te=>{te&&(s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!0}:Ie)),setTimeout(()=>{s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!1}:Ie))},2e3))},[]),Ne=h.useCallback(async()=>{i(!0);try{const te=await ae.get("/users/all"),Ue=Array.isArray(te.data)?te.data:[],Ie=x8(Ue);s(Ie),f(Ge=>Ge&&(Ie.find(ve=>ve.id===Ge.id)||null)),console.log(te.data)}catch(te){console.error("Error fetching users:",te);const Ue=te.response?.data?.detail||"Failed to load users. Please try again later.";G.error(Ue)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!K&&e&&G.error("You are not authorized to access User Management.")},[K,t,e]),h.useEffect(()=>{t||!K||Ne()},[t,K,Ne]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Se=h.useMemo(()=>{const te=o.trim().toLowerCase(),Ue=jo(c);return x8(a.filter(Ie=>{if(!Ie)return!1;const Ge=te===""||[Ie.first_name,Ie.last_name,`${Ie.first_name||""} ${Ie.last_name||""}`,Ie.email,Dk(Ie.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(te)),gt=Ue===""||Ue==="CEO"&&["CEO","ADMIN"].includes(jo(Ie.role))||jo(Ie.role)===Ue;return Ge&&gt}))},[a,o,c]),Oe=Math.max(1,Math.ceil(Se.length/P)||1);h.useEffect(()=>{z(1)},[o,c]),h.useEffect(()=>{z(te=>{const Ue=Math.max(1,Math.ceil(Se.length/P)||1);return te>Ue?Ue:te})},[Se.length]);const ke=h.useMemo(()=>{const te=(R-1)*P;return Se.slice(te,te+P)},[Se,R]);Se.length===0||(R-1)*P+1,Math.min(R*P,Se.length);const he=()=>z(te=>Math.max(te-1,1)),qe=()=>z(te=>Math.min(te+1,Oe)),Ce=()=>{S(Ng),N(!1),C(null),x(!0)},xe=te=>{console.log(te),f(te),Q("Overview"),X(te?.is_active?"Active":"Inactive")},ee=te=>{te.target.id==="userModalBackdrop"&&!T&&Ee()},Ee=()=>{f(null)},Ae=(te,Ue)=>{S(Ie=>({...Ie,[te]:Ue}))},Re=()=>{const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Ue="";for(let Ie=0;Ie<10;Ie+=1)Ue+=te.charAt(Math.floor(Math.random()*te.length));Ae("password",Ue)},et=()=>{A||T||(x(!1),S(Ng),C(null),N(!1))},De=te=>{S({firstName:te.first_name||"",lastName:te.last_name||"",email:te.email||"",password:"",role:j7e(te.role)}),N(!0),C(te.id),x(!0),f(null)},tt=te=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[te.first_name," ",te.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:`${te.first_name||""} ${te.last_name||""}`.trim()||te.email||"user"}})},Je=te=>{te.preventDefault();const Ue=w.firstName.trim(),Ie=w.lastName.trim(),Ge=w.email.trim(),gt=w.password.trim(),ve="Sales",Be=!(v&&b);if(!Ue||!Ge||!ve){G.warn("Please fill in all required fields.");return}if(Be&&!gt){G.warn("Please fill in all required fields.");return}if(gt&&gt.length<8){G.warn("Password should be at least 8 characters long.");return}const nt={first_name:Ue,last_name:Ie,email:Ge,role:ve};console.log(nt),(Be||gt)&&(nt.password=gt);const Te=`${Ue} ${Ie}`.trim(),Qe=Be?"create":"update";E({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Te})," with role"," ",n.jsx("span",{className:"font-semibold",children:Dk(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Te||Ge}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:nt,targetId:b,name:Te||Ge}})},H=async()=>{if(!_?.action){E(null);return}const{action:te}=_,{type:Ue,payload:Ie,targetId:Ge,name:gt}=te;M(!0),(Ue==="create"||Ue==="update")&&k(!0);try{if(Ue==="create"){const Be=(await ae.post("/users/createuser",Ie)).data;await Ne(),pe(Be.id),G.success(`User "${gt}" created successfully.`),x(!1),S(Ng),C(null),N(!1)}else if(Ue==="update"){if(!Ge)throw new Error("Missing user identifier for update.");const Be=(await ae.put(`/users/updateuser/${Ge}`,Ie)).data;await Ne(),f(null),pe(Be.id),G.success(`User "${gt}" updated successfully.`),x(!1),S(Ng),C(null),N(!1)}else if(Ue==="delete"){if(!Ge)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${Ge}`),s(ve=>ve.map(Be=>Be.id===Ge?{...Be,is_active:!1}:Be)),u&&u.id===Ge&&(f(null),X("")),G.success(`User "${gt}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const Be=Ue==="create"?"Failed to create user. Please review the details and try again.":Ue==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",nt=ve.response?.data?.detail||Be;G.error(nt)}finally{(Ue==="create"||Ue==="update")&&k(!1),M(!1),E(null)}},be=()=>{T||E(null)},le=async()=>{if(!u||!V)return;const te=u.is_active?"Active":"Inactive";if(V===te)return;const Ue=V==="Active";ne(!0);try{const Ge=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Ue})).data;s(gt=>gt.map(ve=>ve.id===Ge.id?Ge:ve)),f(null),X(""),G.success(`User status updated to ${V}`)}catch(Ie){console.error("Failed to update user status:",Ie);const Ge=Ie.response?.data?.detail||"Failed to update user status. Please try again.";G.error(Ge)}finally{ne(!1)}},Z=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!U)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(qw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:te=>l(te.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:te=>d(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(te=>n.jsx("option",{value:te.value,children:te.label},te.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Se.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(te=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${te.highlight?"bg-green-50":""} ${te.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[te.first_name," ",te.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>xe(te),children:te.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:zA(te.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${te.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.is_active?"Active":"Inactive"})})]},te.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Se.length,pageSize:P,currentPage:R,onPrev:he,onNext:qe,onPageSizeChange:te=>{I(te),z(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),_e=u?n.jsx("div",{id:"userModalBackdrop",onClick:ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ee,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:C7e(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),zA(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>tt(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(te=>n.jsx("button",{onClick:()=>Q(te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${q===te?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:te},te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:q==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:zA(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,te=>te.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:p8(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?p8(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const te=encodeURIComponent(u.email),Ue=encodeURIComponent(""),Ie=encodeURIComponent(""),Ge=`https://mail.google.com/mail/?view=cm&fs=1&to=${te}&su=${Ue}&body=${Ie}`;window.open(Ge,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:te=>X(te.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:le,disabled:W||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Z,_e,n.jsx(_7e,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:T,formData:w,onClose:et,onSubmit:Je,onChange:Ae,onGeneratePassword:Re}),n.jsx(A7e,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:H,onCancel:be})]})}function _7e({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(gb,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(gb,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(gb,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(gb,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...e1],required:!0}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function gb({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function A7e({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function T7e({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Zt(),{logout:i}=Qs(),{user:o,fetchUser:l}=en(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};h.useEffect(()=>{l()},[]);const d=c[r.pathname]||"Marketing Panel";return h.useEffect(()=>{function u(f){s.current&&!s.current.contains(f.target)&&a(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx(ix,{className:"text-2xl"})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:d})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(sx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&n.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),n.jsx("div",{className:"border-t my-1"}),n.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function E7e(){const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Zt(),{fetchUser:d}=en();h.useEffect(()=>{d()},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],N=p.includes(c.pathname),b=x.includes(c.pathname),C=v.includes(c.pathname);return h.useEffect(()=>{N&&t(!0),b&&s(!0),C&&i(!0)},[N,b,C]),n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[n.jsxs($t,{to:"/marketing/dashboard",className:({isActive:w})=>w?u:f,children:[n.jsx(rx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/accounts",className:({isActive:w})=>w?u:f,children:[n.jsx(aa,{})," Accounts"]}),n.jsxs($t,{to:"/marketing/contacts",className:({isActive:w})=>w?u:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/marketing/leads",className:({isActive:w})=>w?u:f,children:[n.jsx(Yn,{})," Leads"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(or,{className:"text-lg"}),"Tools"]}),n.jsx(Tt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/marketing/campaigns",className:({isActive:w})=>w?u:f,children:[n.jsx(LT,{})," Campaign"]}),n.jsxs($t,{to:"/marketing/templates",className:({isActive:w})=>w?u:f,children:[n.jsx(Jk,{})," Templates"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsx("div",{className:"ml-6 mt-2 space-y-1",children:n.jsxs($t,{to:"/marketing/tasks",className:({isActive:w})=>w?u:f,children:[n.jsx(Qt,{})," Tasks"]})})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(T7e,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:n.jsx(Kp,{})})]})]})}function c0(e){return e+.5|0}const Jc=(e,t,a)=>Math.max(Math.min(e,a),t);function Hg(e){return Jc(c0(e*2.55),0,255)}function rd(e){return Jc(c0(e*255),0,255)}function jl(e){return Jc(c0(e/2.55)/100,0,1)}function y8(e){return Jc(c0(e*100),0,100)}const si={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ok=[..."0123456789ABCDEF"],k7e=e=>Ok[e&15],L7e=e=>Ok[(e&240)>>4]+Ok[e&15],pb=e=>(e&240)>>4===(e&15),P7e=e=>pb(e.r)&&pb(e.g)&&pb(e.b)&&pb(e.a);function D7e(e){var t=e.length,a;return e[0]==="#"&&(t===4||t===5?a={r:255&si[e[1]]*17,g:255&si[e[2]]*17,b:255&si[e[3]]*17,a:t===5?si[e[4]]*17:255}:(t===7||t===9)&&(a={r:si[e[1]]<<4|si[e[2]],g:si[e[3]]<<4|si[e[4]],b:si[e[5]]<<4|si[e[6]],a:t===9?si[e[7]]<<4|si[e[8]]:255})),a}const O7e=(e,t)=>e<255?t(e):"";function M7e(e){var t=P7e(e)?k7e:L7e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+O7e(e.a,t):void 0}const I7e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function sJ(e,t,a){const s=t*Math.min(a,1-a),r=(i,o=(i+e/30)%12)=>a-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function $7e(e,t,a){const s=(r,i=(r+e/60)%6)=>a-a*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function R7e(e,t,a){const s=sJ(e,1,.5);let r;for(t+a>1&&(r=1/(t+a),t*=r,a*=r),r=0;r<3;r++)s[r]*=1-t-a,s[r]+=t;return s}function z7e(e,t,a,s,r){return e===r?(t-a)/s+(t<a?6:0):t===r?(a-e)/s+2:(e-t)/s+4}function OD(e){const a=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(a,s,r),o=Math.min(a,s,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=z7e(a,s,r,u,i),c=c*60+.5),[c|0,d||0,l]}function MD(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(rd)}function ID(e,t,a){return MD(sJ,e,t,a)}function U7e(e,t,a){return MD(R7e,e,t,a)}function F7e(e,t,a){return MD($7e,e,t,a)}function rJ(e){return(e%360+360)%360}function B7e(e){const t=I7e.exec(e);let a=255,s;if(!t)return;t[5]!==s&&(a=t[6]?Hg(+t[5]):rd(+t[5]));const r=rJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=U7e(r,i,o):t[1]==="hsv"?s=F7e(r,i,o):s=ID(r,i,o),{r:s[0],g:s[1],b:s[2],a}}function H7e(e,t){var a=OD(e);a[0]=rJ(a[0]+t),a=ID(a),e.r=a[0],e.g=a[1],e.b=a[2]}function q7e(e){if(!e)return;const t=OD(e),a=t[0],s=y8(t[1]),r=y8(t[2]);return e.a<255?`hsla(${a}, ${s}%, ${r}%, ${jl(e.a)})`:`hsl(${a}, ${s}%, ${r}%)`}const b8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},v8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function G7e(){const e={},t=Object.keys(v8),a=Object.keys(b8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<a.length;r++)i=a[r],l=l.replace(i,b8[i]);i=parseInt(v8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let xb;function W7e(e){xb||(xb=G7e(),xb.transparent=[0,0,0,0]);const t=xb[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const V7e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Q7e(e){const t=V7e.exec(e);let a=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];a=t[8]?Hg(o):Jc(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Hg(s):Jc(s,0,255)),r=255&(t[4]?Hg(r):Jc(r,0,255)),i=255&(t[6]?Hg(i):Jc(i,0,255)),{r:s,g:r,b:i,a}}}function Y7e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${jl(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const UA=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Xm=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function K7e(e,t,a){const s=Xm(jl(e.r)),r=Xm(jl(e.g)),i=Xm(jl(e.b));return{r:rd(UA(s+a*(Xm(jl(t.r))-s))),g:rd(UA(r+a*(Xm(jl(t.g))-r))),b:rd(UA(i+a*(Xm(jl(t.b))-i))),a:e.a+a*(t.a-e.a)}}function yb(e,t,a){if(e){let s=OD(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,t===0?360:1)),s=ID(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function iJ(e,t){return e&&Object.assign(t||{},e)}function w8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=rd(e[3]))):(t=iJ(e,{r:0,g:0,b:0,a:1}),t.a=rd(t.a)),t}function X7e(e){return e.charAt(0)==="r"?Q7e(e):B7e(e)}class Up{constructor(t){if(t instanceof Up)return t;const a=typeof t;let s;a==="object"?s=w8(t):a==="string"&&(s=D7e(t)||W7e(t)||X7e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=iJ(this._rgb);return t&&(t.a=jl(t.a)),t}set rgb(t){this._rgb=w8(t)}rgbString(){return this._valid?Y7e(this._rgb):void 0}hexString(){return this._valid?M7e(this._rgb):void 0}hslString(){return this._valid?q7e(this._rgb):void 0}mix(t,a){if(t){const s=this.rgb,r=t.rgb;let i;const o=a===i?.5:a,l=2*o-1,c=s.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*r.r+.5,s.g=255&d*s.g+i*r.g+.5,s.b=255&d*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,a){return t&&(this._rgb=K7e(this._rgb,t._rgb,a)),this}clone(){return new Up(this.rgb)}alpha(t){return this._rgb.a=rd(t),this}clearer(t){const a=this._rgb;return a.a*=1-t,this}greyscale(){const t=this._rgb,a=c0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=a,this}opaquer(t){const a=this._rgb;return a.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return yb(this._rgb,2,t),this}darken(t){return yb(this._rgb,2,-t),this}saturate(t){return yb(this._rgb,1,t),this}desaturate(t){return yb(this._rgb,1,-t),this}rotate(t){return H7e(this._rgb,t),this}}function yl(){}const Z7e=(()=>{let e=0;return()=>e++})();function Ln(e){return e==null}function ns(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function jn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function wi(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function mo(e,t){return wi(e)?e:t}function dn(e,t){return typeof e>"u"?t:e}const J7e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,oJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ea(e,t,a){if(e&&typeof e.call=="function")return e.apply(a,t)}function In(e,t,a,s){let r,i,o;if(ns(e))for(i=e.length,r=0;r<i;r++)t.call(a,e[r],r);else if(jn(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(a,e[o[r]],o[r])}function jw(e,t){let a,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(r=e[a],i=t[a],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Cw(e){if(ns(e))return e.map(Cw);if(jn(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let r=0;for(;r<s;++r)t[a[r]]=Cw(e[a[r]]);return t}return e}function lJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function e8e(e,t,a,s){if(!lJ(e))return;const r=t[e],i=a[e];jn(r)&&jn(i)?Fp(r,i,s):t[e]=Cw(i)}function Fp(e,t,a){const s=ns(t)?t:[t],r=s.length;if(!jn(e))return e;a=a||{};const i=a.merger||e8e;let o;for(let l=0;l<r;++l){if(o=s[l],!jn(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,a)}return e}function np(e,t){return Fp(e,t,{merger:t8e})}function t8e(e,t,a){if(!lJ(e))return;const s=t[e],r=a[e];jn(s)&&jn(r)?np(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Cw(r))}const N8={"":e=>e,x:e=>e.x,y:e=>e.y};function n8e(e){const t=e.split("."),a=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}function a8e(e){const t=n8e(e);return a=>{for(const s of t){if(s==="")break;a=a&&a[s]}return a}}function Bu(e,t){return(N8[t]||(N8[t]=a8e(t)))(e)}function $D(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Bp=e=>typeof e<"u",pd=e=>typeof e=="function",j8=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function s8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Rn=Math.PI,Sa=2*Rn,r8e=Sa+Rn,Sw=Number.POSITIVE_INFINITY,i8e=Rn/180,as=Rn/2,qd=Rn/4,C8=Rn*2/3,cJ=Math.log10,Do=Math.sign;function ap(e,t,a){return Math.abs(e-t)<a}function S8(e){const t=Math.round(e);e=ap(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(cJ(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function o8e(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(a|0)&&t.push(a),t.sort((r,i)=>r-i).pop(),t}function l8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Hp(e){return!l8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function c8e(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function d8e(e,t,a){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][a],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function El(e){return e*(Rn/180)}function u8e(e){return e*(180/Rn)}function _8(e){if(!wi(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function dJ(e,t){const a=t.x-e.x,s=t.y-e.y,r=Math.sqrt(a*a+s*s);let i=Math.atan2(s,a);return i<-.5*Rn&&(i+=Sa),{angle:i,distance:r}}function Mk(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function m8e(e,t){return(e-t+r8e)%Sa-Rn}function Ri(e){return(e%Sa+Sa)%Sa}function qp(e,t,a,s){const r=Ri(e),i=Ri(t),o=Ri(a),l=Ri(i-r),c=Ri(o-r),d=Ri(r-i),u=Ri(r-o);return r===i||r===o||s&&i===o||l>c&&d<u}function Os(e,t,a){return Math.max(t,Math.min(a,e))}function f8e(e){return Os(e,-32768,32767)}function ed(e,t,a,s=1e-6){return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function RD(e,t,a){a=a||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,a(i)?r=i:s=i;return{lo:r,hi:s}}const mu=(e,t,a,s)=>RD(e,a,s?r=>{const i=e[r][t];return i<a||i===a&&e[r+1][t]===a}:r=>e[r][t]<a),h8e=(e,t,a)=>RD(e,a,s=>e[s][t]>=a);function g8e(e,t,a){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>a;)r--;return s>0||r<e.length?e.slice(s,r):e}const uJ=["push","pop","shift","splice","unshift"];function p8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),uJ.forEach(a=>{const s="_onData"+$D(a),r=e[a];Object.defineProperty(e,a,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function A8(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(uJ.forEach(i=>{delete e[i]}),delete e._chartjs)}function mJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const fJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function hJ(e,t){let a=[],s=!1;return function(...r){a=r,s||(s=!0,fJ.call(window,()=>{s=!1,e.apply(t,a)}))}}function x8e(e,t){let a;return function(...s){return t?(clearTimeout(a),a=setTimeout(e,t,s)):e.apply(this,s),t}}const zD=e=>e==="start"?"left":e==="end"?"right":"center",ks=(e,t,a)=>e==="start"?t:e==="end"?a:(t+a)/2,y8e=(e,t,a,s)=>e===(s?"left":"right")?a:e==="center"?(t+a)/2:t;function b8e(e,t,a){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:x,maxDefined:v}=o.getUserBounds();if(x){if(r=Math.min(mu(c,u,f).lo,a?s:mu(t,u,o.getPixelForValue(f)).lo),d){const N=c.slice(0,r+1).reverse().findIndex(b=>!Ln(b[l.axis]));r-=Math.max(0,N)}r=Os(r,0,s-1)}if(v){let N=Math.max(mu(c,o.axis,p,!0).hi+1,a?0:mu(t,u,o.getPixelForValue(p),!0).hi+1);if(d){const b=c.slice(N-1).findIndex(C=>!Ln(C[l.axis]));N+=Math.max(0,b)}i=Os(N,r,s)-r}else i=s-r}return{start:r,count:i}}function v8e(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,r),i}const bb=e=>e===0||e===1,T8=(e,t,a)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Sa/a)),E8=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*Sa/a)+1,sp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*as)+1,easeOutSine:e=>Math.sin(e*as),easeInOutSine:e=>-.5*(Math.cos(Rn*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>bb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>bb(e)?e:T8(e,.075,.3),easeOutElastic:e=>bb(e)?e:E8(e,.075,.3),easeInOutElastic(e){return bb(e)?e:e<.5?.5*T8(e*2,.1125,.45):.5+.5*E8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-sp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?sp.easeInBounce(e*2)*.5:sp.easeOutBounce(e*2-1)*.5+.5};function UD(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function k8(e){return UD(e)?e:new Up(e)}function FA(e){return UD(e)?e:new Up(e).saturate(.5).darken(.1).hexString()}const w8e=["x","y","borderWidth","radius","tension"],N8e=["color","borderColor","backgroundColor"];function j8e(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:N8e},numbers:{type:"number",properties:w8e}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function C8e(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const L8=new Map;function S8e(e,t){t=t||{};const a=e+JSON.stringify(t);let s=L8.get(a);return s||(s=new Intl.NumberFormat(e,t),L8.set(a,s)),s}function FD(e,t,a){return S8e(t,a).format(e)}const _8e={values(e){return ns(e)?e:""+e},numeric(e,t,a){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(a.length>1){const d=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=A8e(e,a)}const o=cJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),FD(e,s,c)}};function A8e(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e)),a}var gJ={formatters:_8e};function T8e(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,a)=>a.lineWidth,tickColor:(t,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gJ.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Hu=Object.create(null),Ik=Object.create(null);function rp(e,t){if(!t)return e;const a=t.split(".");for(let s=0,r=a.length;s<r;++s){const i=a[s];e=e[i]||(e[i]=Object.create(null))}return e}function BA(e,t,a){return typeof t=="string"?Fp(rp(e,t),a):Fp(rp(e,""),t)}class E8e{constructor(t,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>FA(r.backgroundColor),this.hoverBorderColor=(s,r)=>FA(r.borderColor),this.hoverColor=(s,r)=>FA(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(a)}set(t,a){return BA(this,t,a)}get(t){return rp(this,t)}describe(t,a){return BA(Ik,t,a)}override(t,a){return BA(Hu,t,a)}route(t,a,s,r){const i=rp(this,t),o=rp(this,s),l="_"+a;Object.defineProperties(i,{[l]:{value:i[a],writable:!0},[a]:{enumerable:!0,get(){const c=this[l],d=o[r];return jn(c)?Object.assign({},d,c):dn(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(a=>a(this))}}var Pa=new E8e({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[j8e,C8e,T8e]);function k8e(e){return!e||Ln(e.size)||Ln(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function P8(e,t,a,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,a.push(r)),i>s&&(s=i),s}function Gd(e,t,a){const s=e.currentDevicePixelRatio,r=a!==0?Math.max(a/2,.5):0;return Math.round((t-r)*s)/s+r}function D8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function $k(e,t,a,s){pJ(e,t,a,s,null)}function pJ(e,t,a,s,r){let i,o,l,c,d,u,f,p;const x=t.pointStyle,v=t.rotation,N=t.radius;let b=(v||0)*i8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(a,s),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(N)||N<=0)){switch(e.beginPath(),x){default:r?e.ellipse(a,s,r/2,N,0,0,Sa):e.arc(a,s,N,0,Sa),e.closePath();break;case"triangle":u=r?r/2:N,e.moveTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=C8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),b+=C8,e.lineTo(a+Math.sin(b)*u,s-Math.cos(b)*N),e.closePath();break;case"rectRounded":d=N*.516,c=N-d,o=Math.cos(b+qd)*c,f=Math.cos(b+qd)*(r?r/2-d:c),l=Math.sin(b+qd)*c,p=Math.sin(b+qd)*(r?r/2-d:c),e.arc(a-f,s-l,d,b-Rn,b-as),e.arc(a+p,s-o,d,b-as,b),e.arc(a+f,s+l,d,b,b+as),e.arc(a-p,s+o,d,b+as,b+Rn),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*N,u=r?r/2:c,e.rect(a-u,s-c,2*u,2*c);break}b+=qd;case"rectRot":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+p,s-o),e.lineTo(a+f,s+l),e.lineTo(a-p,s+o),e.closePath();break;case"crossRot":b+=qd;case"cross":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"star":f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o),b+=qd,f=Math.cos(b)*(r?r/2:N),o=Math.cos(b)*N,l=Math.sin(b)*N,p=Math.sin(b)*(r?r/2:N),e.moveTo(a-f,s-l),e.lineTo(a+f,s+l),e.moveTo(a+p,s-o),e.lineTo(a-p,s+o);break;case"line":o=r?r/2:Math.cos(b)*N,l=Math.sin(b)*N,e.moveTo(a-o,s-l),e.lineTo(a+o,s+l);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(b)*(r?r/2:N),s+Math.sin(b)*N);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Gp(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function BD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function HD(e){e.restore()}function L8e(e,t,a,s,r){if(!t)return e.lineTo(a.x,a.y);if(r==="middle"){const i=(t.x+a.x)/2;e.lineTo(i,t.y),e.lineTo(i,a.y)}else r==="after"!=!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function P8e(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function D8e(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ln(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function O8e(e,t,a,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=a-i.actualBoundingBoxAscent,d=a+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function M8e(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Wp(e,t,a,s,r,i={}){const o=ns(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=r.string,D8e(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&M8e(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ln(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,a,s,i.maxWidth)),e.fillText(d,a,s,i.maxWidth),O8e(e,a,s,d,i),s+=Number(r.lineHeight);e.restore()}function _w(e,t){const{x:a,y:s,w:r,h:i,radius:o}=t;e.arc(a+o.topLeft,s+o.topLeft,o.topLeft,1.5*Rn,Rn,!0),e.lineTo(a,s+i-o.bottomLeft),e.arc(a+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Rn,as,!0),e.lineTo(a+r-o.bottomRight,s+i),e.arc(a+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,as,0,!0),e.lineTo(a+r,s+o.topRight),e.arc(a+r-o.topRight,s+o.topRight,o.topRight,0,-as,!0),e.lineTo(a+o.topLeft,s)}const I8e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$8e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function R8e(e,t){const a=(""+e).match(I8e);if(!a||a[1]==="normal")return t*1.2;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100;break}return t*e}const z8e=e=>+e||0;function qD(e,t){const a={},s=jn(t),r=s?Object.keys(t):t,i=jn(e)?s?o=>dn(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)a[o]=z8e(i(o));return a}function xJ(e){return qD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function yf(e){return qD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ni(e){const t=xJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ms(e,t){e=e||{},t=t||Pa.font;let a=dn(e.size,t.size);typeof a=="string"&&(a=parseInt(a,10));let s=dn(e.style,t.style);s&&!(""+s).match($8e)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:dn(e.family,t.family),lineHeight:R8e(dn(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:dn(e.weight,t.weight),string:""};return r.string=k8e(r),r}function vb(e,t,a,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function U8e(e,t,a){const{min:s,max:r}=e,i=oJ(t,(r-s)/2),o=(l,c)=>a&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function nm(e,t){return Object.assign(Object.create(e),t)}function GD(e,t=[""],a,s,r=()=>e[0]){const i=a||e;typeof s>"u"&&(s=wJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>GD([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return bJ(l,c,()=>Q8e(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return M8(l).includes(c)},ownKeys(l){return M8(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Rf(e,t,a,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:yJ(e,s),setContext:i=>Rf(e,i,a,s),override:i=>Rf(e.override(i),t,a,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return bJ(i,o,()=>B8e(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function yJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:a,indexable:s,isScriptable:pd(a)?a:()=>a,isIndexable:pd(s)?s:()=>s}}const F8e=(e,t)=>e?e+$D(t):t,WD=(e,t)=>jn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function bJ(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=a();return e[t]=s,s}function B8e(e,t,a){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return pd(l)&&o.isScriptable(t)&&(l=H8e(t,l,e,a)),ns(l)&&l.length&&(l=q8e(t,l,e,o.isIndexable)),WD(t,l)&&(l=Rf(l,r,i&&i[t],o)),l}function H8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=a;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),WD(e,c)&&(c=VD(r._scopes,r,e,c)),c}function q8e(e,t,a,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=a;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(jn(t[0])){const c=t,d=r._scopes.filter(u=>u!==c);t=[];for(const u of c){const f=VD(d,r,e,u);t.push(Rf(f,i,o&&o[e],l))}}return t}function vJ(e,t,a){return pd(e)?e(t,a):e}const G8e=(e,t)=>e===!0?t:typeof e=="string"?Bu(t,e):void 0;function W8e(e,t,a,s,r){for(const i of t){const o=G8e(a,i);if(o){e.add(o);const l=vJ(o._fallback,a,r);if(typeof l<"u"&&l!==a&&l!==s)return l}else if(o===!1&&typeof s<"u"&&a!==s)return null}return!1}function VD(e,t,a,s){const r=t._rootScopes,i=vJ(t._fallback,a,s),o=[...e,...r],l=new Set;l.add(s);let c=O8(l,o,a,i||a,s);return c===null||typeof i<"u"&&i!==a&&(c=O8(l,o,i,c,s),c===null)?!1:GD(Array.from(l),[""],r,i,()=>V8e(t,a,s))}function O8(e,t,a,s,r){for(;a;)a=W8e(e,t,a,s,r);return a}function V8e(e,t,a){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ns(r)&&jn(a)?a:r||{}}function Q8e(e,t,a,s){let r;for(const i of t)if(r=wJ(F8e(i,e),a),typeof r<"u")return WD(e,r)?VD(a,s,e,r):r}function wJ(e,t){for(const a of t){if(!a)continue;const s=a[e];if(typeof s<"u")return s}}function M8(e){let t=e._keys;return t||(t=e._keys=Y8e(e._scopes)),t}function Y8e(e){const t=new Set;for(const a of e)for(const s of Object.keys(a).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const K8e=Number.EPSILON||1e-14,zf=(e,t)=>t<e.length&&!e[t].skip&&e[t],NJ=e=>e==="x"?"y":"x";function X8e(e,t,a,s){const r=e.skip?t:e,i=t,o=a.skip?t:a,l=Mk(i,r),c=Mk(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const f=s*d,p=s*u;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function Z8e(e,t,a){const s=e.length;let r,i,o,l,c,d=zf(e,0);for(let u=0;u<s-1;++u)if(c=d,d=zf(e,u+1),!(!c||!d)){if(ap(t[u],0,K8e)){a[u]=a[u+1]=0;continue}r=a[u]/t[u],i=a[u+1]/t[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),a[u]=r*o*t[u],a[u+1]=i*o*t[u])}}function J8e(e,t,a="x"){const s=NJ(a),r=e.length;let i,o,l,c=zf(e,0);for(let d=0;d<r;++d){if(o=l,l=c,c=zf(e,d+1),!l)continue;const u=l[a],f=l[s];o&&(i=(u-o[a])/3,l[`cp1${a}`]=u-i,l[`cp1${s}`]=f-i*t[d]),c&&(i=(c[a]-u)/3,l[`cp2${a}`]=u+i,l[`cp2${s}`]=f+i*t[d])}}function eBe(e,t="x"){const a=NJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,d=zf(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=zf(e,o+1),!!c){if(d){const u=d[t]-c[t];r[o]=u!==0?(d[a]-c[a])/u:0}i[o]=l?d?Do(r[o-1])!==Do(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Z8e(e,r,i),J8e(e,i,t)}function wb(e,t,a){return Math.max(Math.min(e,a),t)}function tBe(e,t){let a,s,r,i,o,l=Gp(e[0],t);for(a=0,s=e.length;a<s;++a)o=i,i=l,l=a<s-1&&Gp(e[a+1],t),i&&(r=e[a],o&&(r.cp1x=wb(r.cp1x,t.left,t.right),r.cp1y=wb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=wb(r.cp2x,t.left,t.right),r.cp2y=wb(r.cp2y,t.top,t.bottom)))}function nBe(e,t,a,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")eBe(e,r);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=X8e(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&tBe(e,a)}function QD(){return typeof window<"u"&&typeof document<"u"}function YD(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Aw(e,t,a){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[a])):s=e,s}const t1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function aBe(e,t){return t1(e).getPropertyValue(t)}const sBe=["top","right","bottom","left"];function wu(e,t,a){const s={};a=a?"-"+a:"";for(let r=0;r<4;r++){const i=sBe[r];s[i]=parseFloat(e[t+"-"+i+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const rBe=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function iBe(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(rBe(r,i,e.target))l=r,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Jd(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,r=t1(a),i=r.boxSizing==="border-box",o=wu(r,"padding"),l=wu(r,"border","width"),{x:c,y:d,box:u}=iBe(e,a),f=o.left+(u&&l.left),p=o.top+(u&&l.top);let{width:x,height:v}=t;return i&&(x-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-f)/x*a.width/s),y:Math.round((d-p)/v*a.height/s)}}function oBe(e,t,a){let s,r;if(t===void 0||a===void 0){const i=e&&YD(e);if(!i)t=e.clientWidth,a=e.clientHeight;else{const o=i.getBoundingClientRect(),l=t1(i),c=wu(l,"border","width"),d=wu(l,"padding");t=o.width-d.width-c.width,a=o.height-d.height-c.height,s=Aw(l.maxWidth,i,"clientWidth"),r=Aw(l.maxHeight,i,"clientHeight")}}return{width:t,height:a,maxWidth:s||Sw,maxHeight:r||Sw}}const td=e=>Math.round(e*10)/10;function lBe(e,t,a,s){const r=t1(e),i=wu(r,"margin"),o=Aw(r.maxWidth,e,"clientWidth")||Sw,l=Aw(r.maxHeight,e,"clientHeight")||Sw,c=oBe(e,t,a);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const p=wu(r,"border","width"),x=wu(r,"padding");d-=x.width+p.width,u-=x.height+p.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=td(Math.min(d,o,c.maxWidth)),u=td(Math.min(u,l,c.maxHeight)),d&&!u&&(u=td(d/2)),(t!==void 0||a!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=td(Math.floor(u*s))),{width:d,height:u}}function I8(e,t,a){const s=t||1,r=td(e.height*s),i=td(e.width*s);e.height=td(e.height),e.width=td(e.width);const o=e.canvas;return o.style&&(a||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const cBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};QD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function $8(e,t){const a=aBe(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function eu(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function dBe(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:s==="middle"?a<.5?e.y:t.y:s==="after"?a<1?e.y:t.y:a>0?t.y:e.y}}function uBe(e,t,a,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=eu(e,r,a),l=eu(r,i,a),c=eu(i,t,a),d=eu(o,l,a),u=eu(l,c,a);return eu(d,u,a)}const mBe=function(e,t){return{x(a){return e+e+t-a},setWidth(a){t=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,s){return a-s},leftForLtr(a,s){return a-s}}},fBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function bf(e,t,a){return e?mBe(t,a):fBe()}function jJ(e,t){let a,s;(t==="ltr"||t==="rtl")&&(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function CJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function SJ(e){return e==="angle"?{between:qp,compare:m8e,normalize:Ri}:{between:ed,compare:(t,a)=>t-a,normalize:t=>t}}function R8({start:e,end:t,count:a,loop:s,style:r}){return{start:e%a,end:t%a,loop:s&&(t-e+1)%a===0,style:r}}function hBe(e,t,a){const{property:s,start:r,end:i}=a,{between:o,normalize:l}=SJ(s),c=t.length;let{start:d,end:u,loop:f}=e,p,x;if(f){for(d+=c,u+=c,p=0,x=c;p<x&&o(l(t[d%c][s]),r,i);++p)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:f,style:e.style}}function gBe(e,t,a){if(!a)return[e];const{property:s,start:r,end:i}=a,o=t.length,{compare:l,between:c,normalize:d}=SJ(s),{start:u,end:f,loop:p,style:x}=hBe(e,t,a),v=[];let N=!1,b=null,C,w,S;const A=()=>c(r,S,C)&&l(r,S)!==0,k=()=>l(i,C)===0||c(i,S,C),_=()=>N||A(),E=()=>!N||k();for(let T=u,M=u;T<=f;++T)w=t[T%o],!w.skip&&(C=d(w[s]),C!==S&&(N=c(C,r,i),b===null&&_()&&(b=l(C,r)===0?T:M),b!==null&&E()&&(v.push(R8({start:b,end:T,loop:p,count:o,style:x})),b=null),M=T,S=C));return b!==null&&v.push(R8({start:b,end:f,loop:p,count:o,style:x})),v}function pBe(e,t){const a=[],s=e.segments;for(let r=0;r<s.length;r++){const i=gBe(s[r],e.points,t);i.length&&a.push(...i)}return a}function xBe(e,t,a,s){let r=0,i=t-1;if(a&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,a&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function yBe(e,t,a,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=a;++c){const d=e[c%r];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function bBe(e,t){const a=e.points,s=e.options.spanGaps,r=a.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=xBe(a,r,i,s);if(s===!0)return z8(e,[{start:o,end:l,loop:i}],a,t);const c=l<o?l+r:l,d=!!e._fullLoop&&o===0&&l===r-1;return z8(e,yBe(a,o,c,d),a,t)}function z8(e,t,a,s){return!s||!s.setContext||!a?t:vBe(e,t,a,s)}function vBe(e,t,a,s){const r=e._chart.getContext(),i=U8(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=a.length,d=[];let u=i,f=t[0].start,p=f;function x(v,N,b,C){const w=l?-1:1;if(v!==N){for(v+=c;a[v%c].skip;)v-=w;for(;a[N%c].skip;)N+=w;v%c!==N%c&&(d.push({start:v%c,end:N%c,loop:b,style:C}),u=C,f=N%c)}}for(const v of t){f=l?f:v.start;let N=a[f%c],b;for(p=f+1;p<=v.end;p++){const C=a[p%c];b=U8(s.setContext(nm(r,{type:"segment",p0:N,p1:C,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),wBe(b,u)&&x(f,p-1,v.loop,u),N=C,u=b}f<p-1&&x(f,p-1,v.loop,u)}return d}function U8(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function wBe(e,t){if(!t)return!1;const a=[],s=function(r,i){return UD(i)?(a.includes(i)||a.push(i),a.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Nb(e,t,a){return e.options.clip?e[a]:t[a]}function NBe(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:Nb(a,t,"left"),right:Nb(a,t,"right"),top:Nb(s,t,"top"),bottom:Nb(s,t,"bottom")}:t}function jBe(e,t){const a=t._clip;if(a.disabled)return!1;const s=NBe(t,e.chartArea);return{left:a.left===!1?0:s.left-(a.left===!0?0:a.left),right:a.right===!1?e.width:s.right+(a.right===!0?0:a.right),top:a.top===!1?0:s.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?e.height:s.bottom+(a.bottom===!0?0:a.bottom)}}class CBe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,a,s,r){const i=a.listeners[r],o=a.duration;i.forEach(l=>l({chart:t,initial:a.initial,numSteps:o,currentStep:Math.min(s-a.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=fJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let a=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),a+=i.length}),this._lastDate=t,a===0&&(this._running=!1)}_getAnims(t){const a=this._charts;let s=a.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(t,s)),s}listen(t,a,s){this._getAnims(t).listeners[a].push(s)}add(t,a){!a||!a.length||this._getAnims(t).items.push(...a)}has(t){return this._getAnims(t).items.length>0}start(t){const a=this._charts.get(t);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const a=this._charts.get(t);return!(!a||!a.running||!a.items.length)}stop(t){const a=this._charts.get(t);if(!a||!a.items.length)return;const s=a.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();a.items=[],this._notify(t,a,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var vl=new CBe;const F8="transparent",SBe={boolean(e,t,a){return a>.5?t:e},color(e,t,a){const s=k8(e||F8),r=s.valid&&k8(t||F8);return r&&r.valid?r.mix(s,a).hexString():t},number(e,t,a){return e+(t-e)*a}};class _Be{constructor(t,a,s,r){const i=a[s];r=vb([t.to,r,i,t.from]);const o=vb([t.from,i,r]);this._active=!0,this._fn=t.fn||SBe[t.type||typeof o],this._easing=sp[t.easing]||sp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=a,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,a,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=vb([t.to,a,r,t.from]),this._from=vb([t.from,r,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const a=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||a<s),!this._active){this._target[r]=l,this._notify(!0);return}if(a<0){this._target[r]=i;return}c=a/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((a,s)=>{t.push({res:a,rej:s})})}_notify(t){const a=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][a]()}}class _J{constructor(t,a){this._chart=t,this._properties=new Map,this.configure(a)}configure(t){if(!jn(t))return;const a=Object.keys(Pa.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!jn(i))return;const o={};for(const l of a)o[l]=i[l];(ns(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,a){const s=a.options,r=TBe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&ABe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,a){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(a),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(t,a));continue}const u=a[d];let f=i[d];const p=s.get(d);if(f)if(p&&f.active()){f.update(p,u,l);continue}else f.cancel();if(!p||!p.duration){t[d]=u;continue}i[d]=f=new _Be(p,t,d,u),r.push(f)}return r}update(t,a){if(this._properties.size===0){Object.assign(t,a);return}const s=this._createAnimations(t,a);if(s.length)return vl.add(this._chart,s),!0}}function ABe(e,t){const a=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&a.push(i.wait())}return Promise.all(a)}function TBe(e,t){if(!t)return;let a=e.options;if(!a){e.options=t;return}return a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function B8(e,t){const a=e&&e.options||{},s=a.reverse,r=a.min===void 0?t:0,i=a.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function EBe(e,t,a){if(a===!1)return!1;const s=B8(e,a),r=B8(t,a);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function kBe(e){let t,a,s,r;return jn(e)?(t=e.top,a=e.right,s=e.bottom,r=e.left):t=a=s=r=e,{top:t,right:a,bottom:s,left:r,disabled:e===!1}}function AJ(e,t){const a=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)a.push(s[r].index);return a}function H8(e,t,a,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],wi(d)&&(i||t===0||Do(t)===Do(d))&&(t+=d)}return!u&&!s.all?0:t}function LBe(e,t){const{iScale:a,vScale:s}=t,r=a.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:e[u]};return l}function HA(e,t){const a=e&&e.options.stacked;return a||a===void 0&&t.stack!==void 0}function PBe(e,t,a){return`${e.id}.${t.id}.${a.stack||a.type}`}function DBe(e){const{min:t,max:a,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?a:Number.POSITIVE_INFINITY}}function OBe(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function q8(e,t,a,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(a&&i>0||!a&&i<0)return r.index}return null}function G8(e,t){const{chart:a,_cachedMeta:s}=e,r=a._stacks||(a._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=PBe(i,o,s),f=t.length;let p;for(let x=0;x<f;++x){const v=t[x],{[c]:N,[d]:b}=v,C=v._stacks||(v._stacks={});p=C[d]=OBe(r,u,N),p[l]=b,p._top=q8(p,o,!0,s.type),p._bottom=q8(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=b}}function qA(e,t){const a=e.scales;return Object.keys(a).filter(s=>a[s].axis===t).shift()}function MBe(e,t){return nm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function IBe(e,t,a){return nm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}function jg(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][a]===void 0)return;delete i[s][a],i[s]._visualValues!==void 0&&i[s]._visualValues[a]!==void 0&&delete i[s]._visualValues[a]}}}const GA=e=>e==="reset"||e==="none",W8=(e,t)=>t?e:Object.assign({},e),$Be=(e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:AJ(a,!0),values:null};class n1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,a){this.chart=t,this._ctx=t.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=HA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&jg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,a=this._cachedMeta,s=this.getDataset(),r=(f,p,x,v)=>f==="x"?p:f==="r"?v:x,i=a.xAxisID=dn(s.xAxisID,qA(t,"x")),o=a.yAxisID=dn(s.yAxisID,qA(t,"y")),l=a.rAxisID=dn(s.rAxisID,qA(t,"r")),c=a.indexAxis,d=a.iAxisID=r(c,i,o,l),u=a.vAxisID=r(c,o,i,l);a.xScale=this.getScaleForId(i),a.yScale=this.getScaleForId(o),a.rScale=this.getScaleForId(l),a.iScale=this.getScaleForId(d),a.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const a=this._cachedMeta;return t===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&A8(this._data,this),t._stacked&&jg(t)}_dataCheck(){const t=this.getDataset(),a=t.data||(t.data=[]),s=this._data;if(jn(a)){const r=this._cachedMeta;this._data=LBe(a,r)}else if(s!==a){if(s){A8(s,this);const r=this._cachedMeta;jg(r),r._parsed=[]}a&&Object.isExtensible(a)&&p8e(a,this),this._syncList=[],this._data=a}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const a=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=a._stacked;a._stacked=HA(a.vScale,a),a.stack!==s.stack&&(r=!0,jg(a),a.stack=s.stack),this._resyncElements(t),(r||i!==a._stacked)&&(G8(this,a._parsed),a._stacked=HA(a.vScale,a))}configure(){const t=this.chart.config,a=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),a,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,a){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&a===r.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{ns(r[t])?p=this.parseArrayData(s,r,t,a):jn(r[t])?p=this.parseObjectData(s,r,t,a):p=this.parsePrimitiveData(s,r,t,a);const x=()=>f[l]===null||d&&f[l]<d[l];for(u=0;u<a;++u)s._parsed[u+t]=f=p[u],c&&(x()&&(c=!1),d=f);s._sorted=c}o&&G8(this,p)}parsePrimitiveData(t,a,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,f=new Array(r);let p,x,v;for(p=0,x=r;p<x;++p)v=p+s,f[p]={[l]:u||i.parse(d[v],v),[c]:o.parse(a[v],v)};return f}parseArrayData(t,a,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,d,u,f;for(c=0,d=r;c<d;++c)u=c+s,f=a[u],l[c]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return l}parseObjectData(t,a,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,f,p,x;for(u=0,f=r;u<f;++u)p=u+s,x=a[p],d[u]={x:i.parse(Bu(x,l),p),y:o.parse(Bu(x,c),p)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,a,s){const r=this.chart,i=this._cachedMeta,o=a[t.axis],l={keys:AJ(r,!0),values:a._stacks[t.axis]._visualValues};return H8(l,o,i.index,{mode:s})}updateRangeFromParsed(t,a,s,r){const i=s[a.axis];let o=i===null?NaN:i;const l=r&&s._stacks[a.axis];r&&l&&(r.values=l,o=H8(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,a){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=$Be(a,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=DBe(l);let p,x;function v(){x=r[p];const N=x[l.axis];return!wi(x[t.axis])||u>N||f<N}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(d,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(d,t,x,c);break}}return d}getAllParsedValues(t){const a=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=a.length;r<i;++r)o=a[r][t.axis],wi(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const a=this._cachedMeta,s=a.iScale,r=a.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const a=this._cachedMeta;this.update(t||"default"),a._clip=kBe(dn(this.options.clip,EBe(a.xScale,a.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,a=this.chart,s=this._cachedMeta,r=s.data||[],i=a.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const f=r[u];f.hidden||(f.active&&d?o.push(f):f.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,a){const s=a?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,a,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=IBe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=MBe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!a,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,a){return this._resolveElementOptions(this.dataElementType.id,a,t)}_resolveElementOptions(t,a="default",s){const r=a==="active",i=this._cachedDataOpts,o=t+"-"+a,l=i[o],c=this.enableOptionSharing&&Bp(s);if(l)return W8(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),f=r?[`${t}Hover`,"hover",t,""]:[t,""],p=d.getOptionScopes(this.getDataset(),u),x=Object.keys(Pa.elements[t]),v=()=>this.getContext(s,r,a),N=d.resolveNamedOptions(p,x,v,f);return N.$shared&&(N.$shared=c,i[o]=Object.freeze(W8(N,c))),N}_resolveAnimations(t,a,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${a}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,a),p=u.getOptionScopes(this.getDataset(),f);c=u.createResolver(p,this.getContext(t,s,a))}const d=new _J(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,a){return!a||GA(t)||this.chart._animationsDisabled}_getSharedOptions(t,a){const s=this.resolveDataElementOptions(t,a),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(a,i)||i!==r;return this.updateSharedOptions(i,a,s),{sharedOptions:i,includeOptions:o}}updateElement(t,a,s,r){GA(r)?Object.assign(t,s):this._resolveAnimations(a,r).update(t,s)}updateSharedOptions(t,a,s){t&&!GA(a)&&this._resolveAnimations(void 0,a).update(t,s)}_setStyle(t,a,s,r){t.active=r;const i=this.getStyle(a,r);this._resolveAnimations(a,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,a,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,a,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const a=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=s.length,i=a.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,a,s=!0){const r=this._cachedMeta,i=r.data,o=t+a;let l;const c=d=>{for(d.length+=a,l=d.length-1;l>=o;l--)d[l]=d[l-a]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,a),s&&this.updateElements(i,t,a,"reset")}updateElements(t,a,s,r){}_removeElements(t,a){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,a);s._stacked&&jg(s,r)}s.data.splice(t,a)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[a,s,r]=t;this[a](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,a){a&&this._sync(["_removeElements",t,a]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function RBe(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=a.length;r<i;r++)s=s.concat(a[r].controller.getAllParsedValues(e));e._cache.$bar=mJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function zBe(e){const t=e.iScale,a=RBe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Bp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=a.length;r<i;++r)o=t.getPixelForValue(a[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function UBe(e,t,a,s){const r=a.barThickness;let i,o;return Ln(r)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function FBe(e,t,a,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=a.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:a.barPercentage,start:d}}function BBe(e,t,a,s){const r=a.parse(e[0],s),i=a.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[a.axis]=d,t._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function TJ(e,t,a,s){return ns(e)?BBe(e,t,a,s):t[a.axis]=a.parse(e,s),t}function V8(e,t,a,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,f,p;for(d=a,u=a+s;d<u;++d)p=t[d],f={},f[r.axis]=l||r.parse(o[d],d),c.push(TJ(p,f,i,d));return c}function WA(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function HBe(e,t,a){return e!==0?Do(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}function qBe(e){let t,a,s,r,i;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:a,end:s,reverse:t,top:r,bottom:i}}function GBe(e,t,a,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=qBe(e);r==="middle"&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?r=d:(a._bottom||0)===s?r=u:(i[Q8(u,o,l,c)]=!0,r=d)),i[Q8(r,o,l,c)]=!0,e.borderSkipped=i}function Q8(e,t,a,s){return s?(e=WBe(e,t,a),e=Y8(e,a,t)):e=Y8(e,t,a),e}function WBe(e,t,a){return e===t?a:e===a?t:e}function Y8(e,t,a){return e==="start"?t:e==="end"?a:e}function VBe(e,{inflateAmount:t},a){e.inflateAmount=t==="auto"?a===1?.33:0:t}class QBe extends n1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,a,s,r){return V8(t,a,s,r)}parseArrayData(t,a,s,r){return V8(t,a,s,r)}parseObjectData(t,a,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,f=[];let p,x,v,N;for(p=s,x=s+r;p<x;++p)N=a[p],v={},v[i.axis]=i.parse(Bu(N,d),p),f.push(TJ(Bu(N,u),v,o,p));return f}updateRangeFromParsed(t,a,s,r){super.updateRangeFromParsed(t,a,s,r);const i=s._custom;i&&a===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const a=this._cachedMeta,{iScale:s,vScale:r}=a,i=this.getParsed(t),o=i._custom,l=WA(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,t)}updateElements(t,a,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(a,r);for(let x=a;x<a+s;x++){const v=this.getParsed(x),N=i||Ln(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,u),C=(v._stacks||{})[l.axis],w={horizontal:d,base:N.base,enableBorderRadius:!C||WA(v._custom)||o===C._top||o===C._bottom,x:d?N.head:b.center,y:d?b.center:N.head,height:d?b.size:Math.abs(N.size),width:d?Math.abs(N.size):b.size};p&&(w.options=f||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;GBe(w,S,C,o),VBe(w,S,u.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,a){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(a),c=l&&l[s.axis],d=u=>{const f=u._parsed.find(x=>x[s.axis]===c),p=f&&f[u.vScale.axis];if(Ln(p)||isNaN(p))return!0};for(const u of r)if(!(a!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===a).shift()}_getAxis(){const t={},a=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[dn(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,a)]=!0;return Object.keys(t)}_getStackIndex(t,a,s){const r=this._getStacks(t,s),i=a!==void 0?r.indexOf(a):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,a=this._cachedMeta,s=a.iScale,r=[];let i,o;for(i=0,o=a.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||zBe(a),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:a,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=WA(d);let f=c[a.axis],p=0,x=s?this.applyStack(a,c,s):f,v,N;x!==f&&(p=x-f,x=f),u&&(f=d.barStart,x=d.barEnd-d.barStart,f!==0&&Do(f)!==Do(d.barEnd)&&(p=0),p+=f);const b=!Ln(i)&&!u?i:p;let C=a.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=a.getPixelForValue(p+x):v=C,N=v-C,Math.abs(N)<o){N=HBe(N,a,l)*o,f===l&&(C-=N/2);const w=a.getPixelForDecimal(0),S=a.getPixelForDecimal(1),A=Math.min(w,S),k=Math.max(w,S);C=Math.max(Math.min(C,k),A),v=C+N,s&&!u&&(c._stacks[a.axis]._visualValues[r]=a.getValueForPixel(v)-a.getValueForPixel(C))}if(C===a.getPixelForValue(l)){const w=Do(N)*a.getLineWidthForValue(l)/2;C+=w,N-=w}return{size:N,base:C,head:v,center:v+N/2}}_calculateBarIndexPixels(t,a){const s=a.scale,r=this.options,i=r.skipNull,o=dn(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(a.grouped){const u=i?this._getStackCount(t):a.stackCount,f=r.barThickness==="flex"?FBe(t,a,r,u*d):UBe(t,a,r,u*d),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(dn(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=f.start+f.chunk*v+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,a.min*a.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,a=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[a.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function YBe(e,t,a){let s=1,r=1,i=0,o=0;if(t<Sa){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),f=Math.cos(c),p=Math.sin(c),x=(S,A,k)=>qp(S,l,c,!0)?1:Math.max(A,A*a,k,k*a),v=(S,A,k)=>qp(S,l,c,!0)?-1:Math.min(A,A*a,k,k*a),N=x(0,d,f),b=x(as,u,p),C=v(Rn,d,f),w=v(Rn+as,u,p);s=(N-C)/2,r=(b-w)/2,i=-(N+C)/2,o=-(b+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class KBe extends n1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const a=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((c,d)=>{const f=t.getDatasetMeta(0).controller.getStyle(d);return{text:c,fillStyle:f.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(d),lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:f.borderWidth,strokeStyle:f.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||f.borderRadius),index:d}}):[]}},onClick(t,a,s){s.chart.toggleDataVisibility(a.index),s.chart.update()}}}};constructor(t,a){super(t,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,a){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(jn(s[t])){const{key:c="value"}=this._parsing;i=d=>+Bu(s[d],c)}let o,l;for(o=t,l=t+a;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return El(this.options.rotation-90)}_getCircumference(){return El(this.options.circumference)}_getRotationExtents(){let t=Sa,a=-Sa;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),a=Math.max(a,i+o)}return{rotation:t,circumference:a-t}}update(t){const a=this.chart,{chartArea:s}=a,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(J7e(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:N}=YBe(f,u,c),b=(s.width-o)/p,C=(s.height-o)/x,w=Math.max(Math.min(b,C)/2,0),S=oJ(this.options.radius,w),A=Math.max(S*c,0),k=(S-A)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=N*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(i,0,i.length,t)}_circumference(t,a){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return a&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/Sa)}updateElements(t,a,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,d=o.options.animation,u=(l.left+l.right)/2,f=(l.top+l.bottom)/2,p=i&&d.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:N,includeOptions:b}=this._getSharedOptions(a,r);let C=this._getRotation(),w;for(w=0;w<a;++w)C+=this._circumference(w,i);for(w=a;w<a+s;++w){const S=this._circumference(w,i),A=t[w],k={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+S,circumference:S,outerRadius:v,innerRadius:x};b&&(k.options=N||this.resolveDataElementOptions(w,A.active?"active":r)),C+=S,this.updateElement(A,w,k,r)}}calculateTotal(){const t=this._cachedMeta,a=t.data;let s=0,r;for(r=0;r<a.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!a[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const a=this._cachedMeta.total;return a>0&&!isNaN(t)?Sa*(Math.abs(t)/a):0}getLabelAndValue(t){const a=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=FD(a._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let a=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(a=Math.max(a,c.borderWidth||0,c.hoverBorderWidth||0));return a}getMaxOffset(t){let a=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);a=Math.max(a,i.offset||0,i.hoverOffset||0)}return a}_getRingWeightOffset(t){let a=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(a+=this._getRingWeight(s));return a}_getRingWeight(t){return Math.max(dn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class XBe extends n1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const a=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=a,o=this.chart._animationsDisabled;let{start:l,count:c}=b8e(a,r,o);this._drawStart=l,this._drawCount=c,v8e(a)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(r,l,c,t)}updateElements(t,a,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(a,r),p=o.axis,x=l.axis,{spanGaps:v,segment:N}=this.options,b=Hp(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||r==="none",w=a+s,S=t.length;let A=a>0&&this.getParsed(a-1);for(let k=0;k<S;++k){const _=t[k],E=C?_:{};if(k<a||k>=w){E.skip=!0;continue}const T=this.getParsed(k),M=Ln(T[x]),R=E[p]=o.getPixelForValue(T[p],k),z=E[x]=i||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[x],k);E.skip=isNaN(R)||isNaN(z)||M,E.stop=k>0&&Math.abs(T[p]-A[p])>b,N&&(E.parsed=T,E.raw=d.data[k]),f&&(E.options=u||this.resolveDataElementOptions(k,_.active?"active":r)),C||this.updateElement(_,k,E,r),A=T}}getMaxOverflow(){const t=this._cachedMeta,a=t.dataset,s=a.options&&a.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class ZBe extends KBe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Wd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class KD{static override(t){Object.assign(KD.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Wd()}parse(){return Wd()}format(){return Wd()}add(){return Wd()}diff(){return Wd()}startOf(){return Wd()}endOf(){return Wd()}}var JBe={_date:KD};function eHe(e,t,a,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?h8e:mu;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(t);if(f){const p=d(i,t,a-f),x=d(i,t,a+f);return{lo:p.lo,hi:x.hi}}}}else{const u=d(i,t,a);if(c){const{vScale:f}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,u.lo+1).reverse().findIndex(N=>!Ln(N[f.axis]));u.lo-=Math.max(0,x);const v=p.slice(u.hi).findIndex(N=>!Ln(N[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function a1(e,t,a,s,r){const i=e.getSortedVisibleDatasetMetas(),o=a[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:f,hi:p}=eHe(i[l],t,o,r);for(let x=f;x<=p;++x){const v=u[x];v.skip||s(v,d,x)}}}function tHe(e){const t=e.indexOf("x")!==-1,a=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=a?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function VA(e,t,a,s,r){const i=[];return!r&&!e.isPointInArea(t)||a1(e,a,t,function(l,c,d){!r&&!Gp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function nHe(e,t,a,s){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=dJ(o,{x:t.x,y:t.y});qp(f,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return a1(e,a,t,i),r}function aHe(e,t,a,s,r,i){let o=[];const l=tHe(a);let c=Number.POSITIVE_INFINITY;function d(u,f,p){const x=u.inRange(t.x,t.y,r);if(s&&!x)return;const v=u.getCenterPoint(r);if(!(!!i||e.isPointInArea(v))&&!x)return;const b=l(t,v);b<c?(o=[{element:u,datasetIndex:f,index:p}],c=b):b===c&&o.push({element:u,datasetIndex:f,index:p})}return a1(e,a,t,d),o}function QA(e,t,a,s,r,i){return!i&&!e.isPointInArea(t)?[]:a==="r"&&!s?nHe(e,t,a,r):aHe(e,t,a,s,r,i)}function K8(e,t,a,s,r){const i=[],o=a==="x"?"inXRange":"inYRange";let l=!1;return a1(e,a,t,(c,d,u)=>{c[o]&&c[o](t[a],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var sHe={modes:{index(e,t,a,s){const r=Jd(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?VA(e,r,i,s,o):QA(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,f=d.data[u];f&&!f.skip&&c.push({element:f,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?VA(e,r,i,s,o):QA(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return VA(e,r,i,s,o)},nearest(e,t,a,s){const r=Jd(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return QA(e,r,i,a.intersect,s,o)},x(e,t,a,s){const r=Jd(t,e);return K8(e,r,"x",a.intersect,s)},y(e,t,a,s){const r=Jd(t,e);return K8(e,r,"y",a.intersect,s)}}};const EJ=["left","top","right","bottom"];function Cg(e,t){return e.filter(a=>a.pos===t)}function X8(e,t){return e.filter(a=>EJ.indexOf(a.pos)===-1&&a.box.axis===t)}function Sg(e,t){return e.sort((a,s)=>{const r=t?s:a,i=t?a:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function rHe(e){const t=[];let a,s,r,i,o,l;for(a=0,s=(e||[]).length;a<s;++a)r=e[a],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:a,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function iHe(e){const t={};for(const a of e){const{stack:s,pos:r,stackWeight:i}=a;if(!s||!EJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function oHe(e,t){const a=iHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=a[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=u?u*r:c&&t.availableHeight)}return a}function lHe(e){const t=rHe(e),a=Sg(t.filter(d=>d.box.fullSize),!0),s=Sg(Cg(t,"left"),!0),r=Sg(Cg(t,"right")),i=Sg(Cg(t,"top"),!0),o=Sg(Cg(t,"bottom")),l=X8(t,"x"),c=X8(t,"y");return{fullSize:a,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Cg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function Z8(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function kJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function cHe(e,t,a,s){const{pos:r,box:i}=a,o=e.maxPadding;if(!jn(r)){a.size&&(e[r]-=a.size);const f=s[a.stack]||{size:0,count:1};f.size=Math.max(f.size,a.horizontal?i.height:i.width),a.size=f.size/f.count,e[r]+=a.size}i.getPadding&&kJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-Z8(o,e,"left","right")),c=Math.max(0,t.outerHeight-Z8(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function dHe(e){const t=e.maxPadding;function a(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}function uHe(e,t){const a=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],a[o])}),i}return s(e?["left","right"]:["top","bottom"])}function qg(e,t,a,s){const r=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,uHe(l.horizontal,t));const{same:f,other:p}=cHe(t,a,l,s);d|=f&&r.length,u=u||p,c.fullSize||r.push(l)}return d&&qg(r,t,a,s)||u}function jb(e,t,a,s,r){e.top=a,e.left=t,e.right=t+s,e.bottom=a+r,e.width=s,e.height=r}function J8(e,t,a,s){const r=a.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const f=t.w*u,p=d.size||c.height;Bp(d.start)&&(o=d.start),c.fullSize?jb(c,r.left,o,a.outerWidth-r.right-r.left,p):jb(c,t.left+d.placed,o,f,p),d.start=o,d.placed+=f,o=c.bottom}else{const f=t.h*u,p=d.size||c.width;Bp(d.start)&&(i=d.start),c.fullSize?jb(c,i,r.top,p,a.outerHeight-r.bottom-r.top):jb(c,i,t.top+d.placed,p,f),d.start=i,d.placed+=f,i=c.right}}t.x=i,t.y=o}var fi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(a){t.draw(a)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;a!==-1&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const r=Ni(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(a-r.height,0),l=lHe(e.boxes),c=l.vertical,d=l.horizontal;In(e.boxes,N=>{typeof N.beforeLayout=="function"&&N.beforeLayout()});const u=c.reduce((N,b)=>b.box.options&&b.box.options.display===!1?N:N+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:a,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);kJ(p,Ni(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),v=oHe(c.concat(d),f);qg(l.fullSize,x,f,v),qg(c,x,f,v),qg(d,x,f,v)&&qg(c,x,f,v),dHe(x),J8(l.leftAndTop,x,f,v),x.x+=x.w,x.y+=x.h,J8(l.rightAndBottom,x,f,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},In(l.chartArea,N=>{const b=N.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class LJ{acquireContext(t,a){}releaseContext(t){return!1}addEventListener(t,a,s){}removeEventListener(t,a,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,a,s,r){return a=Math.max(0,a||t.width),s=s||t.height,{width:a,height:Math.max(0,r?Math.floor(a/r):s)}}isAttached(t){return!0}updateConfig(t){}}class mHe extends LJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ev="$chartjs",fHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},eB=e=>e===null||e==="";function hHe(e,t){const a=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[ev]={initial:{height:s,width:r,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",eB(r)){const i=$8(e,"width");i!==void 0&&(e.width=i)}if(eB(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=$8(e,"height");i!==void 0&&(e.height=i)}return e}const PJ=cBe?{passive:!0}:!1;function gHe(e,t,a){e&&e.addEventListener(t,a,PJ)}function pHe(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,PJ)}function xHe(e,t){const a=fHe[e.type]||e.type,{x:s,y:r}=Jd(e,t);return{type:a,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Tw(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function yHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Tw(l.addedNodes,s),o=o&&!Tw(l.removedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}function bHe(e,t,a){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Tw(l.removedNodes,s),o=o&&!Tw(l.addedNodes,s);o&&a()});return r.observe(document,{childList:!0,subtree:!0}),r}const Vp=new Map;let tB=0;function DJ(){const e=window.devicePixelRatio;e!==tB&&(tB=e,Vp.forEach((t,a)=>{a.currentDevicePixelRatio!==e&&t()}))}function vHe(e,t){Vp.size||window.addEventListener("resize",DJ),Vp.set(e,t)}function wHe(e){Vp.delete(e),Vp.size||window.removeEventListener("resize",DJ)}function NHe(e,t,a){const s=e.canvas,r=s&&YD(s);if(!r)return;const i=hJ((l,c)=>{const d=r.clientWidth;a(l,c),d<r.clientWidth&&a()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),vHe(e,i),o}function YA(e,t,a){a&&a.disconnect(),t==="resize"&&wHe(e)}function jHe(e,t,a){const s=e.canvas,r=hJ(i=>{e.ctx!==null&&a(xHe(i,e))},e);return gHe(s,t,r),r}class CHe extends LJ{acquireContext(t,a){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(hHe(t,a),s):null}releaseContext(t){const a=t.canvas;if(!a[ev])return!1;const s=a[ev].initial;["height","width"].forEach(i=>{const o=s[i];Ln(o)?a.removeAttribute(i):a.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{a.style[i]=r[i]}),a.width=a.width,delete a[ev],!0}addEventListener(t,a,s){this.removeEventListener(t,a);const r=t.$proxies||(t.$proxies={}),o={attach:yHe,detach:bHe,resize:NHe}[a]||jHe;r[a]=o(t,a,s)}removeEventListener(t,a){const s=t.$proxies||(t.$proxies={}),r=s[a];if(!r)return;({attach:YA,detach:YA,resize:YA}[a]||pHe)(t,a,r),s[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,a,s,r){return lBe(t,a,s,r)}isAttached(t){const a=t&&YD(t);return!!(a&&a.isConnected)}}function SHe(e){return!QD()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?mHe:CHe}let cc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}hasValue(){return Hp(this.x)&&Hp(this.y)}getProps(t,a){const s=this.$animations;if(!a||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function _He(e,t){const a=e.options.ticks,s=AHe(e),r=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?EHe(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return kHe(t,d,i,o/r),d;const u=THe(i,t,r);if(o>0){let f,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Cb(t,d,u,Ln(x)?0:l-x,l),f=0,p=o-1;f<p;f++)Cb(t,d,u,i[f],i[f+1]);return Cb(t,d,u,c,Ln(x)?t.length:c+x),d}return Cb(t,d,u),d}function AHe(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),r=e._maxLength/a;return Math.floor(Math.min(s,r))}function THe(e,t,a){const s=LHe(e),r=t.length/a;if(!s)return Math.max(r,1);const i=o8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function EHe(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}function kHe(e,t,a,s){let r=0,i=a[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=a[r*s])}function Cb(e,t,a,s,r){const i=dn(s,0),o=Math.min(dn(r,e.length),e.length);let l=0,c,d,u;for(a=Math.ceil(a),r&&(c=r-s,a=c/Math.floor(c/a)),u=i;u<0;)l++,u=Math.round(i+l*a);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*a))}function LHe(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}const PHe=e=>e==="left"?"right":e==="right"?"left":e,nB=(e,t,a)=>t==="top"||t==="left"?e[t]+a:e[t]-a,aB=(e,t)=>Math.min(t||e,e);function sB(e,t){const a=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)a.push(e[Math.floor(i)]);return a}function DHe(e,t,a){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),d;if(!(a&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(r-1))/2,c+=r<t?d:-d,c<i-l||c>o+l)))return c}function OHe(e,t){In(e,a=>{const s=a.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete a.data[s[i]];s.splice(0,r)}})}function _g(e){return e.drawTicks?e.tickLength:0}function rB(e,t){if(!e.display)return 0;const a=Ms(e.font,t),s=Ni(e.padding);return(ns(e.text)?e.text.length:1)*a.lineHeight+s.height}function MHe(e,t){return nm(e,{scale:t,type:"scale"})}function IHe(e,t,a){return nm(e,{tick:a,index:t,type:"tick"})}function $He(e,t,a){let s=zD(e);return(a&&t!=="right"||!a&&t==="right")&&(s=PHe(s)),s}function RHe(e,t,a,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let f=0,p,x,v;const N=o-r,b=l-i;if(e.isHorizontal()){if(x=ks(s,i,l),jn(a)){const C=Object.keys(a)[0],w=a[C];v=u[C].getPixelForValue(w)+N-t}else a==="center"?v=(d.bottom+d.top)/2+N-t:v=nB(e,a,t);p=l-i}else{if(jn(a)){const C=Object.keys(a)[0],w=a[C];x=u[C].getPixelForValue(w)-b+t}else a==="center"?x=(d.left+d.right)/2-b+t:x=nB(e,a,t);v=ks(s,o,r),f=a==="left"?-as:as}return{titleX:x,titleY:v,maxWidth:p,rotation:f}}class mh extends cc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,a){return t}getUserBounds(){let{_userMin:t,_userMax:a,_suggestedMin:s,_suggestedMax:r}=this;return t=mo(t,Number.POSITIVE_INFINITY),a=mo(a,Number.NEGATIVE_INFINITY),s=mo(s,Number.POSITIVE_INFINITY),r=mo(r,Number.NEGATIVE_INFINITY),{min:mo(t,s),max:mo(a,r),minDefined:wi(t),maxDefined:wi(a)}}getMinMax(t){let{min:a,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:a,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),r||(a=Math.min(a,o.min)),i||(s=Math.max(s,o.max));return a=i&&a>s?s:a,s=r&&a>s?a:s,{min:mo(a,mo(s,a)),max:mo(s,mo(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ea(this.options.beforeUpdate,[this])}update(t,a,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=a,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=U8e(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?sB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_He(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,a,s;this.isHorizontal()?(a=this.left,s=this.right):(a=this.top,s=this.bottom,t=!t),this._startPixel=a,this._endPixel=s,this._reversePixels=t,this._length=s-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ea(this.options.afterUpdate,[this])}beforeSetDimensions(){ea(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ea(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ea(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ea(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const a=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=ea(a.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ea(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ea(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,a=t.ticks,s=aB(this.ticks.length,t.ticks.maxTicksLimit),r=a.minRotation||0,i=a.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!a.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,x=Os(this.chart.width-f,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),f+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-_g(t.grid)-a.padding-rB(t.title,this.chart.options.font),d=Math.sqrt(f*f+p*p),o=u8e(Math.min(Math.asin(Os((u.highest.height+6)/l,-1,1)),Math.asin(Os(c/d,-1,1))-Math.asin(Os(p/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ea(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ea(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:a,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=rB(r,a.options.font);if(l?(t.width=this.maxWidth,t.height=_g(i)+c):(t.height=this.maxHeight,t.width=_g(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:f,highest:p}=this._getLabelSizes(),x=s.padding*2,v=El(this.labelRotation),N=Math.cos(v),b=Math.sin(v);if(l){const C=s.mirror?0:b*f.width+N*p.height;t.height=Math.min(this.maxHeight,t.height+C+x)}else{const C=s.mirror?0:N*f.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+C+x)}this._calculatePadding(d,u,b,N)}}this._handleMargins(),l?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,a,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?d?(p=r*t.width,x=s*a.height):(p=s*t.height,x=r*a.width):i==="start"?x=a.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=a.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-f+o)*this.width/(this.width-f),0)}else{let u=a.height/2,f=t.height/2;i==="start"?(u=0,f=t.height):i==="end"&&(u=a.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ea(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:a}=this.options;return a==="top"||a==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let a,s;for(a=0,s=t.length;a<s;a++)Ln(t[a].label)&&(t.splice(a,1),s--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const a=this.options.ticks.sampleSize;let s=this.ticks;a<s.length&&(s=sB(s,a)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,a,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(a/aB(a,s));let d=0,u=0,f,p,x,v,N,b,C,w,S,A,k;for(f=0;f<a;f+=c){if(v=t[f].label,N=this._resolveTickFontOptions(f),r.font=b=N.string,C=i[b]=i[b]||{data:{},gc:[]},w=N.lineHeight,S=A=0,!Ln(v)&&!ns(v))S=P8(r,C.data,C.gc,S,v),A=w;else if(ns(v))for(p=0,x=v.length;p<x;++p)k=v[p],!Ln(k)&&!ns(k)&&(S=P8(r,C.data,C.gc,S,k),A+=w);o.push(S),l.push(A),d=Math.max(S,d),u=Math.max(A,u)}OHe(i,a);const _=o.indexOf(d),E=l.indexOf(u),T=M=>({width:o[M]||0,height:l[M]||0});return{first:T(0),last:T(a-1),widest:T(_),highest:T(E),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,a){return NaN}getValueForPixel(t){}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const a=this._startPixel+t*this._length;return f8e(this._alignToPixels?Gd(this.chart,a,0):a)}getDecimalForPixel(t){const a=(t-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:a}=this;return t<0&&a<0?a:t>0&&a>0?t:0}getContext(t){const a=this.ticks||[];if(t>=0&&t<a.length){const s=a[t];return s.$context||(s.$context=IHe(this.getContext(),t,s))}return this.$context||(this.$context=MHe(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,a=El(this.labelRotation),s=Math.abs(Math.cos(a)),r=Math.abs(Math.sin(a)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const a=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=_g(i),x=[],v=l.setContext(this.getContext()),N=v.display?v.width:0,b=N/2,C=function(V){return Gd(s,V,N)};let w,S,A,k,_,E,T,M,R,z,P,I;if(o==="top")w=C(this.bottom),E=this.bottom-p,M=w-b,z=C(t.top)+b,I=t.bottom;else if(o==="bottom")w=C(this.top),z=t.top,I=C(t.bottom)-b,E=w+b,M=this.top+p;else if(o==="left")w=C(this.right),_=this.right-p,T=w-b,R=C(t.left)+b,P=t.right;else if(o==="right")w=C(this.left),R=t.left,P=C(t.right)-b,_=w+b,T=this.left+p;else if(a==="x"){if(o==="center")w=C((t.top+t.bottom)/2+.5);else if(jn(o)){const V=Object.keys(o)[0],X=o[V];w=C(this.chart.scales[V].getPixelForValue(X))}z=t.top,I=t.bottom,E=w+b,M=E+p}else if(a==="y"){if(o==="center")w=C((t.left+t.right)/2);else if(jn(o)){const V=Object.keys(o)[0],X=o[V];w=C(this.chart.scales[V].getPixelForValue(X))}_=w-b,T=_-p,R=t.left,P=t.right}const q=dn(r.ticks.maxTicksLimit,f),Q=Math.max(1,Math.ceil(f/q));for(S=0;S<f;S+=Q){const V=this.getContext(S),X=i.setContext(V),W=l.setContext(V),ne=X.lineWidth,oe=X.color,K=W.dash||[],U=W.dashOffset,ye=X.tickWidth,pe=X.tickColor,Ne=X.tickBorderDash||[],Se=X.tickBorderDashOffset;A=DHe(this,S,c),A!==void 0&&(k=Gd(s,A,ne),d?_=T=R=P=k:E=M=z=I=k,x.push({tx1:_,ty1:E,tx2:T,ty2:M,x1:R,y1:z,x2:P,y2:I,width:ne,color:oe,borderDash:K,borderDashOffset:U,tickWidth:ye,tickColor:pe,tickBorderDash:Ne,tickBorderDashOffset:Se}))}return this._ticksLength=f,this._borderValue=w,x}_computeLabelItems(t){const a=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:f}=i,p=_g(s.grid),x=p+u,v=f?-u:x,N=-El(this.labelRotation),b=[];let C,w,S,A,k,_,E,T,M,R,z,P,I="middle";if(r==="top")_=this.bottom-v,E=this._getXAxisLabelAlignment();else if(r==="bottom")_=this.top+v,E=this._getXAxisLabelAlignment();else if(r==="left"){const Q=this._getYAxisLabelAlignment(p);E=Q.textAlign,k=Q.x}else if(r==="right"){const Q=this._getYAxisLabelAlignment(p);E=Q.textAlign,k=Q.x}else if(a==="x"){if(r==="center")_=(t.top+t.bottom)/2+x;else if(jn(r)){const Q=Object.keys(r)[0],V=r[Q];_=this.chart.scales[Q].getPixelForValue(V)+x}E=this._getXAxisLabelAlignment()}else if(a==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(jn(r)){const Q=Object.keys(r)[0],V=r[Q];k=this.chart.scales[Q].getPixelForValue(V)}E=this._getYAxisLabelAlignment(p).textAlign}a==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));const q=this._getLabelSizes();for(C=0,w=l.length;C<w;++C){S=l[C],A=S.label;const Q=i.setContext(this.getContext(C));T=this.getPixelForTick(C)+i.labelOffset,M=this._resolveTickFontOptions(C),R=M.lineHeight,z=ns(A)?A.length:1;const V=z/2,X=Q.color,W=Q.textStrokeColor,ne=Q.textStrokeWidth;let oe=E;o?(k=T,E==="inner"&&(C===w-1?oe=this.options.reverse?"left":"right":C===0?oe=this.options.reverse?"right":"left":oe="center"),r==="top"?d==="near"||N!==0?P=-z*R+R/2:d==="center"?P=-q.highest.height/2-V*R+R:P=-q.highest.height+R/2:d==="near"||N!==0?P=R/2:d==="center"?P=q.highest.height/2-V*R:P=q.highest.height-z*R,f&&(P*=-1),N!==0&&!Q.showLabelBackdrop&&(k+=R/2*Math.sin(N))):(_=T,P=(1-z)*R/2);let K;if(Q.showLabelBackdrop){const U=Ni(Q.backdropPadding),ye=q.heights[C],pe=q.widths[C];let Ne=P-U.top,Se=0-U.left;switch(I){case"middle":Ne-=ye/2;break;case"bottom":Ne-=ye;break}switch(E){case"center":Se-=pe/2;break;case"right":Se-=pe;break;case"inner":C===w-1?Se-=pe:C>0&&(Se-=pe/2);break}K={left:Se,top:Ne,width:pe+U.width,height:ye+U.height,color:Q.backdropColor}}b.push({label:A,font:M,textOffset:P,options:{rotation:N,color:X,strokeColor:W,strokeWidth:ne,textAlign:oe,textBaseline:I,translation:[k,_],backdrop:K}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:a}=this.options;if(-El(this.labelRotation))return t==="top"?"left":"right";let r="center";return a.align==="start"?r="left":a.align==="end"?r="right":a.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:a,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return a==="left"?r?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):a==="right"?r?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:a},left:s,top:r,width:i,height:o}=this;a&&(t.save(),t.fillStyle=a,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?a.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const a=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(a.display)for(i=0,o=r.length;i<o;++i){const c=r[i];a.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),a.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:a,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,f,p;this.isHorizontal()?(d=Gd(t,this.left,o)-o/2,u=Gd(t,this.right,l)+l/2,f=p=c):(f=Gd(t,this.top,o)-o/2,p=Gd(t,this.bottom,l)+l/2,d=u=c),a.save(),a.lineWidth=i.width,a.strokeStyle=i.color,a.beginPath(),a.moveTo(d,f),a.lineTo(u,p),a.stroke(),a.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&BD(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;Wp(s,d,0,u,c,l)}r&&HD(s)}drawTitle(){const{ctx:t,options:{position:a,title:s,reverse:r}}=this;if(!s.display)return;const i=Ms(s.font),o=Ni(s.padding),l=s.align;let c=i.lineHeight/2;a==="bottom"||a==="center"||jn(a)?(c+=o.bottom,ns(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:f,rotation:p}=RHe(this,c,a,l);Wp(t,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:$He(l,a,r),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,a=t.ticks&&t.ticks.z||0,s=dn(t.grid&&t.grid.z,-1),r=dn(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==mh.prototype.draw?[{z:a,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:a,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const a=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=a.length;i<o;++i){const l=a[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const a=this.options.ticks.setContext(this.getContext(t));return Ms(a.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Sb{constructor(t,a,s){this.type=t,this.scope=a,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const a=Object.getPrototypeOf(t);let s;FHe(a)&&(s=this.register(a));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,zHe(t,o,s),this.override&&Pa.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const a=this.items,s=t.id,r=this.scope;s in a&&delete a[s],r&&s in Pa[r]&&(delete Pa[r][s],this.override&&delete Hu[s])}}function zHe(e,t,a){const s=Fp(Object.create(null),[a?Pa.get(a):{},Pa.get(t),e.defaults]);Pa.set(t,s),e.defaultRoutes&&UHe(t,e.defaultRoutes),e.descriptors&&Pa.describe(t,e.descriptors)}function UHe(e,t){Object.keys(t).forEach(a=>{const s=a.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");Pa.route(i,r,c,l)})}function FHe(e){return"id"in e&&"defaults"in e}class BHe{constructor(){this.controllers=new Sb(n1,"datasets",!0),this.elements=new Sb(cc,"elements"),this.plugins=new Sb(Object,"plugins"),this.scales=new Sb(mh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,a,s){[...a].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):In(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,a,s){const r=$D(t);ea(s["before"+r],[],s),a[t](s),ea(s["after"+r],[],s)}_getRegistryForType(t){for(let a=0;a<this._typedRegistries.length;a++){const s=this._typedRegistries[a];if(s.isForType(t))return s}return this.plugins}_get(t,a,s){const r=a.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var xo=new BHe;class HHe{constructor(){this._init=void 0}notify(t,a,s,r){if(a==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,a,s);return a==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,a,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[a,r,i.options];if(ea(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ln(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),a}_createDescriptors(t,a){const s=t&&t.config,r=dn(s.options&&s.options.plugins,{}),i=qHe(s);return r===!1&&!a?[]:WHe(t,i,r,a)}_notifyStateChanges(t){const a=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(a,s),t,"stop"),this._notify(r(s,a),t,"start")}}function qHe(e){const t={},a=[],s=Object.keys(xo.plugins.items);for(let i=0;i<s.length;i++)a.push(xo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];a.indexOf(o)===-1&&(a.push(o),t[o.id]=!0)}return{plugins:a,localIds:t}}function GHe(e,t){return!t&&e===!1?null:e===!0?{}:e}function WHe(e,{plugins:t,localIds:a},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=GHe(s[c],r);d!==null&&i.push({plugin:l,options:VHe(e.config,{plugin:l,local:a[c]},d,o)})}return i}function VHe(e,{plugin:t,local:a},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return a&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Rk(e,t){const a=Pa.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function QHe(e,t){let a=e;return e==="_index_"?a=t:e==="_value_"&&(a=t==="x"?"y":"x"),a}function YHe(e,t){return e===t?"_index_":"_value_"}function iB(e){if(e==="x"||e==="y"||e==="r")return e}function KHe(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function zk(e,...t){if(iB(e))return e;for(const a of t){const s=a.axis||KHe(a.position)||e.length>1&&iB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function oB(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function XHe(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(a.length)return oB(e,"x",a[0])||oB(e,"y",a[0])}return{}}function ZHe(e,t){const a=Hu[e.type]||{scales:{}},s=t.scales||{},r=Rk(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!jn(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=zk(o,l,XHe(o,e),Pa.scales[l.type]),d=YHe(c,r),u=a.scales||{};i[o]=np(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Rk(l,t),u=(Hu[l]||{}).scales||{};Object.keys(u).forEach(f=>{const p=QHe(f,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),np(i[x],[{axis:p},s[x],u[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];np(l,[Pa.scales[l.type],Pa.scale])}),i}function OJ(e){const t=e.options||(e.options={});t.plugins=dn(t.plugins,{}),t.scales=ZHe(e,t)}function MJ(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function JHe(e){return e=e||{},e.data=MJ(e.data),OJ(e),e}const lB=new Map,IJ=new Set;function _b(e,t){let a=lB.get(e);return a||(a=t(),lB.set(e,a),IJ.add(a)),a}const Ag=(e,t,a)=>{const s=Bu(t,a);s!==void 0&&e.add(s)};class e9e{constructor(t){this._config=JHe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=MJ(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),OJ(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return _b(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,a){return _b(`${t}.transition.${a}`,()=>[[`datasets.${t}.transitions.${a}`,`transitions.${a}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,a){return _b(`${t}-${a}`,()=>[[`datasets.${t}.elements.${a}`,`datasets.${t}`,`elements.${a}`,""]])}pluginScopeKeys(t){const a=t.id,s=this.type;return _b(`${s}-plugin-${a}`,()=>[[`plugins.${a}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,a){const s=this._scopeCache;let r=s.get(t);return(!r||a)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,a,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(a);if(l)return l;const c=new Set;a.forEach(u=>{t&&(c.add(t),u.forEach(f=>Ag(c,t,f))),u.forEach(f=>Ag(c,r,f)),u.forEach(f=>Ag(c,Hu[i]||{},f)),u.forEach(f=>Ag(c,Pa,f)),u.forEach(f=>Ag(c,Ik,f))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),IJ.has(a)&&o.set(a,d),d}chartOptionScopes(){const{options:t,type:a}=this;return[t,Hu[a]||{},Pa.datasets[a]||{},{type:a},Pa,Ik]}resolveNamedOptions(t,a,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=cB(this._resolverCache,t,r);let c=o;if(n9e(o,a)){i.$shared=!1,s=pd(s)?s():s;const d=this.createResolver(t,s,l);c=Rf(o,s,d)}for(const d of a)i[d]=c[d];return i}createResolver(t,a,s=[""],r){const{resolver:i}=cB(this._resolverCache,t,s);return jn(a)?Rf(i,a,void 0,r):i}}function cB(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=a.join();let i=s.get(r);return i||(i={resolver:GD(t,a),subPrefixes:a.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const t9e=e=>jn(e)&&Object.getOwnPropertyNames(e).some(t=>pd(e[t]));function n9e(e,t){const{isScriptable:a,isIndexable:s}=yJ(e);for(const r of t){const i=a(r),o=s(r),l=(o||i)&&e[r];if(i&&(pd(l)||t9e(l))||o&&ns(l))return!0}return!1}var a9e="4.5.1";const s9e=["top","bottom","left","right","chartArea"];function dB(e,t){return e==="top"||e==="bottom"||s9e.indexOf(e)===-1&&t==="x"}function uB(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function mB(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),ea(a&&a.onComplete,[e],t)}function r9e(e){const t=e.chart,a=t.options.animation;ea(a&&a.onProgress,[e],t)}function $J(e){return QD()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const tv={},fB=e=>{const t=$J(e);return Object.values(tv).filter(a=>a.canvas===t).pop()};function i9e(e,t,a){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(a>0||i>t)&&(e[i+a]=o)}}}function o9e(e,t,a,s){return!a||e.type==="mouseout"?null:s?t:e}let s1=class{static defaults=Pa;static instances=tv;static overrides=Hu;static registry=xo;static version=a9e;static getChart=fB;static register(...t){xo.add(...t),hB()}static unregister(...t){xo.remove(...t),hB()}constructor(t,a){const s=this.config=new e9e(a),r=$J(t),i=fB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||SHe(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=Z7e(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new HHe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=x8e(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],tv[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}vl.listen(this,"complete",mB),vl.listen(this,"progress",r9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:a},width:s,height:r,_aspectRatio:i}=this;return Ln(t)?a&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return xo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():I8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return D8(this.canvas,this.ctx),this}stop(){return vl.stop(this),this}resize(t,a){vl.running(this)?this._resizeBeforeDraw={width:t,height:a}:this._resize(t,a)}_resize(t,a){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,a,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,I8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ea(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};In(a,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,a=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];a&&(i=i.concat(Object.keys(a).map(o=>{const l=a[o],c=zk(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),In(i,o=>{const l=o.options,c=l.id,d=zk(c,l),u=dn(l.type,o.dtype);(l.position===void 0||dB(l.position,d)!==dB(o.dposition))&&(l.position=o.dposition),r[c]=!0;let f=null;if(c in s&&s[c].type===u)f=s[c];else{const p=xo.getScale(u);f=new p({id:c,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(l,t)}),In(r,(o,l)=>{o||delete s[l]}),In(s,o=>{fi.configure(this,o,o.options),fi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,a=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>a){for(let r=a;r<s;++r)this._destroyDatasetMeta(r);t.splice(a,s-a)}this._sortedMetasets=t.slice(0).sort(uB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:a}}=this;t.length>a.length&&delete this._stacks,t.forEach((s,r)=>{a.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],a=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=a.length;s<r;s++){const i=a[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Rk(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=xo.getController(l),{datasetElementType:d,dataElementType:u}=Pa.datasets[l];Object.assign(c,{dataElementType:xo.getElement(u),datasetElementType:d&&xo.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){In(this.data.datasets,(t,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const a=this.config;a.update();const s=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:f}=this.getDatasetMeta(d),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||In(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(uB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){In(this.scales,t=>{fi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,a=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!j8(a,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,a=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of a){const o=s==="_removeElements"?-i:i;i9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const a=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<a;i++)if(!j8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fi.update(this,this.width,this.height,t);const a=this.chartArea,s=a.width<=0||a.height<=0;this._layers=[],In(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let a=0,s=this.data.datasets.length;a<s;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,s=this.data.datasets.length;a<s;++a)this._updateDataset(a,pd(t)?t({datasetIndex:a}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,a){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(a),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vl.has(this)?this.attached&&!vl.running(this)&&vl.start(this):(this.draw(),mB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(t=0;t<a.length&&a[t].z<=0;++t)a[t].draw(this.chartArea);for(this._drawDatasets();t<a.length;++t)a[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const a=this._sortedMetasets,s=[];let r,i;for(r=0,i=a.length;r<i;++r){const o=a[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let a=t.length-1;a>=0;--a)this._drawDataset(t[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const a=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=jBe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&BD(a,r),t.controller.draw(),r&&HD(a),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Gp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,a,s,r){const i=sHe.modes[a];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const a=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===a).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:t,_dataset:a,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=nm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const a=this.data.datasets[t];if(!a)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!a.hidden}setDatasetVisibility(t,a){const s=this.getDatasetMeta(t);s.hidden=!a}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,a,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Bp(a)?(i.data[a].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,a){this._updateVisibility(t,a,!1)}show(t,a){this._updateVisibility(t,a,!0)}_destroyDatasetMeta(t){const a=this._metasets[t];a&&a.controller&&a.controller._destroy(),delete this._metasets[t]}_stop(){let t,a;for(this.stop(),vl.remove(this),t=0,a=this.data.datasets.length;t<a;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:a}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),D8(t,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete tv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,a=this.platform,s=(i,o)=>{a.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};In(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,a=this.platform,s=(c,d)=>{a.addEventListener(this,c,d),t[c]=d},r=(c,d)=>{t[c]&&(a.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},a.isAttached(this.canvas)?l():o()}unbindEvents(){In(this._listeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._listeners={},In(this._responsiveListeners,(t,a)=>{this.platform.removeEventListener(this,a,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,a,s){const r=s?"set":"remove";let i,o,l,c;for(a==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const a=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!jw(s,a)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,a))}notifyPlugins(t,a,s){return this._plugins.notify(this,t,a,s)}isPluginEnabled(t){return this._plugins._cache.filter(a=>a.plugin.id===t).length===1}_updateHoverStyles(t,a,s){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(a,t),l=s?t:i(t,a);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,a){const s={event:t,replay:a,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,a,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,a,s){const{_active:r=[],options:i}=this,o=a,l=this._getActiveElements(t,r,s,o),c=s8e(t),d=o9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ea(i.onHover,[t,l,this],this),c&&ea(i.onClick,[t,l,this],this));const u=!jw(l,r);return(u||a)&&(this._active=l,this._updateHoverStyles(l,r,a)),this._lastEvent=d,u}_getActiveElements(t,a,s,r){if(t.type==="mouseout")return[];if(!s)return a;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function hB(){return In(s1.instances,e=>e._plugins.invalidate())}function l9e(e,t,a){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,f=Math.min(d/o,Ri(s-a));if(e.beginPath(),e.arc(r,i,o-d/2,s+f/2,a-f/2),l>0){const p=Math.min(d/l,Ri(s-a));e.arc(r,i,l+d/2,a-p/2,s+p/2,!0)}else{const p=Math.min(d/2,o*Ri(s-a));if(u==="round")e.arc(r,i,p,a-Rn/2,s+Rn/2,!0);else if(u==="bevel"){const x=2*p*p,v=-x*Math.cos(a+Rn/2)+r,N=-x*Math.sin(a+Rn/2)+i,b=x*Math.cos(s+Rn/2)+r,C=x*Math.sin(s+Rn/2)+i;e.lineTo(v,N),e.lineTo(b,C)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function c9e(e,t,a){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=r/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>r?(d=r/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,r,a+as,s-as),e.closePath(),e.clip()}function d9e(e){return qD(e,["outerStart","outerEnd","innerStart","innerEnd"])}function u9e(e,t,a,s){const r=d9e(e.options.borderRadius),i=(a-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(a-Math.min(i,c))*s/2;return Os(c,0,Math.min(i,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Os(r.innerStart,0,o),innerEnd:Os(r.innerEnd,0,o)}}function Zm(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function Ew(e,t,a,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,f=Math.max(t.outerRadius+s+a-d,0),p=u>0?u+s+a+d:0;let x=0;const v=r-c;if(s){const Q=u>0?u-s:0,V=f>0?f-s:0,X=(Q+V)/2,W=X!==0?v*X/(X+s):v;x=(v-W)/2}const N=Math.max(.001,v*f-a/Rn)/f,b=(v-N)/2,C=c+b+x,w=r-b-x,{outerStart:S,outerEnd:A,innerStart:k,innerEnd:_}=u9e(t,p,f,w-C),E=f-S,T=f-A,M=C+S/E,R=w-A/T,z=p+k,P=p+_,I=C+k/z,q=w-_/P;if(e.beginPath(),i){const Q=(M+R)/2;if(e.arc(o,l,f,M,Q),e.arc(o,l,f,Q,R),A>0){const ne=Zm(T,R,o,l);e.arc(ne.x,ne.y,A,R,w+as)}const V=Zm(P,w,o,l);if(e.lineTo(V.x,V.y),_>0){const ne=Zm(P,q,o,l);e.arc(ne.x,ne.y,_,w+as,q+Math.PI)}const X=(w-_/p+(C+k/p))/2;if(e.arc(o,l,p,w-_/p,X,!0),e.arc(o,l,p,X,C+k/p,!0),k>0){const ne=Zm(z,I,o,l);e.arc(ne.x,ne.y,k,I+Math.PI,C-as)}const W=Zm(E,C,o,l);if(e.lineTo(W.x,W.y),S>0){const ne=Zm(E,M,o,l);e.arc(ne.x,ne.y,S,C-as,M)}}else{e.moveTo(o,l);const Q=Math.cos(M)*f+o,V=Math.sin(M)*f+l;e.lineTo(Q,V);const X=Math.cos(R)*f+o,W=Math.sin(R)*f+l;e.lineTo(X,W)}e.closePath()}function m9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){Ew(e,t,a,s,c,r);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%Sa||Sa))}return Ew(e,t,a,s,c,r),e.fill(),c}function f9e(e,t,a,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:f,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!d)return;e.setLineDash(f||[]),e.lineDashOffset=p,v?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let N=t.endAngle;if(i){Ew(e,t,a,s,N,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(N=o+(l%Sa||Sa))}v&&c9e(e,t,N),c.selfJoin&&N-o>=Rn&&x===0&&u!=="miter"&&l9e(e,t,N),i||(Ew(e,t,a,s,N,r),e.stroke())}class h9e extends cc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=dJ(r,{x:t,y:a}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=dn(f,c-l),v=qp(i,l,c)&&l!==c,N=x>=Sa||v,b=ed(o,d+p,u+p);return N&&b}getCenterPoint(t){const{x:a,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:d}=this.options,u=(r+i)/2,f=(o+l+d+c)/2;return{x:a+Math.cos(u)*f,y:s+Math.sin(u)*f}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:a,circumference:s}=this,r=(a.offset||0)/4,i=(a.spacing||0)/2,o=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=s>Sa?Math.floor(s/Sa):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(Rn,s||0)),d=r*c;t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,m9e(t,this,d,i,o),f9e(t,this,d,i,o),t.restore()}}function RJ(e,t,a=t){e.lineCap=dn(a.borderCapStyle,t.borderCapStyle),e.setLineDash(dn(a.borderDash,t.borderDash)),e.lineDashOffset=dn(a.borderDashOffset,t.borderDashOffset),e.lineJoin=dn(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=dn(a.borderWidth,t.borderWidth),e.strokeStyle=dn(a.borderColor,t.borderColor)}function g9e(e,t,a){e.lineTo(a.x,a.y)}function p9e(e){return e.stepped?L8e:e.tension||e.cubicInterpolationMode==="monotone"?P8e:g9e}function zJ(e,t,a={}){const s=e.length,{start:r=0,end:i=s-1}=a,{start:o,end:l}=t,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function x9e(e,t,a,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:d}=zJ(r,a,s),u=p9e(i);let{move:f=!0,reverse:p}=s||{},x,v,N;for(x=0;x<=d;++x)v=r[(l+(p?d-x:x))%o],!v.skip&&(f?(e.moveTo(v.x,v.y),f=!1):u(e,N,v,p,i.stepped),N=v);return c&&(v=r[(l+(p?d:0))%o],u(e,N,v,p,i.stepped)),!!c}function y9e(e,t,a,s){const r=t.points,{count:i,start:o,ilen:l}=zJ(r,a,s),{move:c=!0,reverse:d}=s||{};let u=0,f=0,p,x,v,N,b,C;const w=A=>(o+(d?l-A:A))%i,S=()=>{N!==b&&(e.lineTo(u,b),e.lineTo(u,N),e.lineTo(u,C))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const A=x.x,k=x.y,_=A|0;_===v?(k<N?N=k:k>b&&(b=k),u=(f*u+A)/++f):(S(),e.lineTo(A,k),v=_,f=0,N=b=k),C=k}S()}function Uk(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!a?y9e:x9e}function b9e(e){return e.stepped?dBe:e.tension||e.cubicInterpolationMode==="monotone"?uBe:eu}function v9e(e,t,a,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,a,s)&&r.closePath()),RJ(e,t.options),e.stroke(r)}function w9e(e,t,a,s){const{segments:r,options:i}=t,o=Uk(t);for(const l of r)RJ(e,i,l.style),e.beginPath(),o(e,t,l,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}const N9e=typeof Path2D=="function";function j9e(e,t,a,s){N9e&&!t.options.segment?v9e(e,t,a,s):w9e(e,t,a,s)}class C9e extends cc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,a){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;nBe(this._points,s,t,r,a),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bBe(this,this.options.segment))}first(){const t=this.segments,a=this.points;return t.length&&a[t[0].start]}last(){const t=this.segments,a=this.points,s=t.length;return s&&a[t[s-1].end]}interpolate(t,a){const s=this.options,r=t[a],i=this.points,o=pBe(this,{property:a,start:r,end:r});if(!o.length)return;const l=[],c=b9e(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:f,end:p}=o[d],x=i[f],v=i[p];if(x===v){l.push(x);continue}const N=Math.abs((r-x[a])/(v[a]-x[a])),b=c(x,v,N,s.stepped);b[a]=t[a],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,a,s){return Uk(this)(t,this,a,s)}path(t,a,s){const r=this.segments,i=Uk(this);let o=this._loop;a=a||0,s=s||this.points.length-a;for(const l of r)o&=i(t,this,l,{start:a,end:a+s-1});return!!o}draw(t,a,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),j9e(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function gB(e,t,a,s){const r=e.options,{[a]:i}=e.getProps([a],s);return Math.abs(t-i)<r.radius+r.hitRadius}class S9e extends cc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,a,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(a-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,a){return gB(this,t,"x",a)}inYRange(t,a){return gB(this,t,"y",a)}getCenterPoint(t){const{x:a,y:s}=this.getProps(["x","y"],t);return{x:a,y:s}}size(t){t=t||this.options||{};let a=t.radius||0;a=Math.max(a,a&&t.hoverRadius||0);const s=a&&t.borderWidth||0;return(a+s)*2}draw(t,a){const s=this.options;this.skip||s.radius<.1||!Gp(this,a,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,$k(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function UJ(e,t){const{x:a,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,f;return e.horizontal?(f=o/2,l=Math.min(a,r),c=Math.max(a,r),d=s-f,u=s+f):(f=i/2,l=a-f,c=a+f,d=Math.min(s,r),u=Math.max(s,r)),{left:l,top:d,right:c,bottom:u}}function nd(e,t,a,s){return e?0:Os(t,a,s)}function _9e(e,t,a){const s=e.options.borderWidth,r=e.borderSkipped,i=xJ(s);return{t:nd(r.top,i.top,0,a),r:nd(r.right,i.right,0,t),b:nd(r.bottom,i.bottom,0,a),l:nd(r.left,i.left,0,t)}}function A9e(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=yf(r),o=Math.min(t,a),l=e.borderSkipped,c=s||jn(r);return{topLeft:nd(!c||l.top||l.left,i.topLeft,0,o),topRight:nd(!c||l.top||l.right,i.topRight,0,o),bottomLeft:nd(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:nd(!c||l.bottom||l.right,i.bottomRight,0,o)}}function T9e(e){const t=UJ(e),a=t.right-t.left,s=t.bottom-t.top,r=_9e(e,a/2,s/2),i=A9e(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:a-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function KA(e,t,a,s){const r=t===null,i=a===null,l=e&&!(r&&i)&&UJ(e,s);return l&&(r||ed(t,l.left,l.right))&&(i||ed(a,l.top,l.bottom))}function E9e(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function k9e(e,t){e.rect(t.x,t.y,t.w,t.h)}function XA(e,t,a={}){const s=e.x!==a.x?-t:0,r=e.y!==a.y?-t:0,i=(e.x+e.w!==a.x+a.w?t:0)-s,o=(e.y+e.h!==a.y+a.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class L9e extends cc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:a,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=T9e(this),l=E9e(o.radius)?_w:k9e;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,XA(o,a,i)),t.clip(),l(t,XA(i,-a,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,XA(i,a)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,a,s){return KA(this,t,a,s)}inXRange(t,a){return KA(this,t,null,a)}inYRange(t,a){return KA(this,null,t,a)}getCenterPoint(t){const{x:a,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(a+r)/2:a,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const pB=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}},P9e=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class xB extends cc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a,s){this.maxWidth=t,this.maxHeight=a,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let a=ea(t.generateLabels,[this.chart],this)||[];t.filter&&(a=a.filter(s=>t.filter(s,this.chart.data))),t.sort&&(a=a.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:t,ctx:a}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=Ms(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=pB(s,i);let d,u;a.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,a,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((v,N)=>{const b=s+a/2+i.measureText(v.text).width;(N===0||d[d.length-1]+b+2*l>o)&&(f+=u,d[d.length-(N>0?0:1)]=0,x+=u,p++),c[N]={left:0,top:x,row:p,width:b,height:r},d[d.length-1]+=b+l}),f}_fitCols(t,a,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let f=l,p=0,x=0,v=0,N=0;return this.legendItems.forEach((b,C)=>{const{itemWidth:w,itemHeight:S}=D9e(s,a,i,b,r);C>0&&x+S+2*l>u&&(f+=p+l,d.push({width:p,height:x}),v+=p+l,N++,p=x=0),c[C]={left:v,top:x,col:N,width:w,height:S},p=Math.max(p,w),x+=S+l}),f+=p,d.push({width:p,height:x}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:s,labels:{padding:r},rtl:i}}=this,o=bf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=ks(s,this.left+r,this.right-this.lineWidths[l]);for(const d of a)l!==d.row&&(l=d.row,c=ks(s,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+t+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=ks(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const d of a)d.col!==l&&(l=d.col,c=ks(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;BD(t,this),this._draw(),HD(t)}}_draw(){const{options:t,columnSizes:a,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=Pa.color,c=bf(t.rtl,this.left,this.width),d=Ms(o.font),{padding:u}=o,f=d.size,p=f/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:v,boxHeight:N,itemHeight:b}=pB(o,f),C=function(_,E,T){if(isNaN(v)||v<=0||isNaN(N)||N<0)return;r.save();const M=dn(T.lineWidth,1);if(r.fillStyle=dn(T.fillStyle,l),r.lineCap=dn(T.lineCap,"butt"),r.lineDashOffset=dn(T.lineDashOffset,0),r.lineJoin=dn(T.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=dn(T.strokeStyle,l),r.setLineDash(dn(T.lineDash,[])),o.usePointStyle){const R={radius:N*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:M},z=c.xPlus(_,v/2),P=E+p;pJ(r,R,z,P,o.pointStyleWidth&&v)}else{const R=E+Math.max((f-N)/2,0),z=c.leftForLtr(_,v),P=yf(T.borderRadius);r.beginPath(),Object.values(P).some(I=>I!==0)?_w(r,{x:z,y:R,w:v,h:N,radius:P}):r.rect(z,R,v,N),r.fill(),M!==0&&r.stroke()}r.restore()},w=function(_,E,T){Wp(r,T.text,_,E+b/2,d,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},S=this.isHorizontal(),A=this._computeTitleHeight();S?x={x:ks(i,this.left+u,this.right-s[0]),y:this.top+u+A,line:0}:x={x:this.left+u,y:ks(i,this.top+A+u,this.bottom-a[0].height),line:0},jJ(this.ctx,t.textDirection);const k=b+u;this.legendItems.forEach((_,E)=>{r.strokeStyle=_.fontColor,r.fillStyle=_.fontColor;const T=r.measureText(_.text).width,M=c.textAlign(_.textAlign||(_.textAlign=o.textAlign)),R=v+p+T;let z=x.x,P=x.y;c.setWidth(this.width),S?E>0&&z+R+u>this.right&&(P=x.y+=k,x.line++,z=x.x=ks(i,this.left+u,this.right-s[x.line])):E>0&&P+k>this.bottom&&(z=x.x=z+a[x.line].width+u,x.line++,P=x.y=ks(i,this.top+A+u,this.bottom-a[x.line].height));const I=c.x(z);if(C(I,P,_),z=y8e(M,z+v+p,S?z+R:this.right,t.rtl),w(c.x(z),P,_),S)x.x+=R+u;else if(typeof _.text!="string"){const q=d.lineHeight;x.y+=FJ(_,q)+u}else x.y+=k}),CJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,a=t.title,s=Ms(a.font),r=Ni(a.padding);if(!a.display)return;const i=bf(t.rtl,this.left,this.width),o=this.ctx,l=a.position,c=s.size/2,d=r.top+c;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+d,f=ks(t.align,f,this.right-p);else{const v=this.columnSizes.reduce((N,b)=>Math.max(N,b.height),0);u=d+ks(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=ks(l,f,f+p);o.textAlign=i.textAlign(zD(l)),o.textBaseline="middle",o.strokeStyle=a.color,o.fillStyle=a.color,o.font=s.string,Wp(o,a.text,x,u,s)}_computeTitleHeight(){const t=this.options.title,a=Ms(t.font),s=Ni(t.padding);return t.display?a.lineHeight+s.height:0}_getLegendItemAt(t,a){let s,r,i;if(ed(t,this.left,this.right)&&ed(a,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],ed(t,r.left,r.left+r.width)&&ed(a,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const a=this.options;if(!I9e(t.type,a))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=P9e(r,s);r&&!i&&ea(a.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&ea(a.onHover,[t,s,this],this)}else s&&ea(a.onClick,[t,s,this],this)}}function D9e(e,t,a,s,r){const i=O9e(s,e,t,a),o=M9e(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function O9e(e,t,a,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+a.size/2+s.measureText(r).width}function M9e(e,t,a){let s=e;return typeof t.text!="string"&&(s=FJ(t,a)),s}function FJ(e,t){const a=e.text?e.text.length:0;return t*a}function I9e(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var $9e={id:"legend",_element:xB,start(e,t,a){const s=e.legend=new xB({ctx:e.ctx,options:a,chart:e});fi.configure(e,s,a),fi.addBox(e,s)},stop(e){fi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;fi.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,r=a.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(a?0:void 0),u=Ni(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class BJ extends cc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,a){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=a;const r=ns(s.text)?s.text.length:1;this._padding=Ni(s.padding);const i=r*Ms(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:a,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,f;return this.isHorizontal()?(u=ks(l,s,i),f=a+t,d=i-s):(o.position==="left"?(u=s+t,f=ks(l,r,a),c=Rn*-.5):(u=i-t,f=ks(l,a,r),c=Rn*.5),d=r-a),{titleX:u,titleY:f,maxWidth:d,rotation:c}}draw(){const t=this.ctx,a=this.options;if(!a.display)return;const s=Ms(a.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);Wp(t,a.text,0,0,s,{color:a.color,maxWidth:c,rotation:d,textAlign:zD(a.align),textBaseline:"middle",translation:[o,l]})}}function R9e(e,t){const a=new BJ({ctx:e.ctx,options:t,chart:e});fi.configure(e,a,t),fi.addBox(e,a),e.titleBlock=a}var z9e={id:"title",_element:BJ,start(e,t,a){R9e(e,a)},stop(e){const t=e.titleBlock;fi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;fi.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Gg={average(e){if(!e.length)return!1;let t,a,s=new Set,r=0,i=0;for(t=0,a=e.length;t<a;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let a=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Mk(t,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();a=c.x,s=c.y}return{x:a,y:s}}};function po(e,t){return t&&(ns(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function wl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function U9e(e,t){const{element:a,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:a}}function yB(e,t){const a=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Ms(t.bodyFont),d=Ms(t.titleFont),u=Ms(t.footerFont),f=i.length,p=r.length,x=s.length,v=Ni(t.padding);let N=v.height,b=0,C=s.reduce((A,k)=>A+k.before.length+k.lines.length+k.after.length,0);if(C+=e.beforeBody.length+e.afterBody.length,f&&(N+=f*d.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),C){const A=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;N+=x*A+(C-x)*c.lineHeight+(C-1)*t.bodySpacing}p&&(N+=t.footerMarginTop+p*u.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(A){b=Math.max(b,a.measureText(A).width+w)};return a.save(),a.font=d.string,In(e.title,S),a.font=c.string,In(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,In(s,A=>{In(A.before,S),In(A.lines,S),In(A.after,S)}),w=0,a.font=u.string,In(e.footer,S),a.restore(),b+=v.width,{width:b,height:N}}function F9e(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}function B9e(e,t,a,s){const{x:r,width:i}=s,o=a.caretSize+a.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function H9e(e,t,a,s){const{x:r,width:i}=a,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),B9e(d,e,t,a)&&(d="center"),d}function bB(e,t,a){const s=a.yAlign||t.yAlign||F9e(e,a);return{xAlign:a.xAlign||t.xAlign||H9e(e,t,a,s),yAlign:s}}function q9e(e,t){let{x:a,width:s}=e;return t==="right"?a-=s:t==="center"&&(a-=s/2),a}function G9e(e,t,a){let{y:s,height:r}=e;return t==="top"?s+=a:t==="bottom"?s-=r+a:s-=r/2,s}function vB(e,t,a,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:x}=yf(o);let v=q9e(t,l);const N=G9e(t,c,d);return c==="center"?l==="left"?v+=d:l==="right"&&(v-=d):l==="left"?v-=Math.max(u,p)+r:l==="right"&&(v+=Math.max(f,x)+r),{x:Os(v,0,s.width-t.width),y:Os(N,0,s.height-t.height)}}function Ab(e,t,a){const s=Ni(a.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function wB(e){return po([],wl(e))}function W9e(e,t,a){return nm(e,{tooltip:t,tooltipItems:a,type:"tooltip"})}function NB(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const HJ={beforeTitle:yl,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:yl,beforeBody:yl,beforeLabel:yl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return Ln(a)||(t+=a),t},labelColor(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const a=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:yl,afterBody:yl,beforeFooter:yl,footer:yl,afterFooter:yl};function sr(e,t,a,s){const r=e[t].call(a,s);return typeof r>"u"?HJ[t].call(a,s):r}class jB extends cc{static positioners=Gg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const a=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&a.options.animation&&s.animations,i=new _J(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=W9e(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,a){const{callbacks:s}=a,r=sr(s,"beforeTitle",this,t),i=sr(s,"title",this,t),o=sr(s,"afterTitle",this,t);let l=[];return l=po(l,wl(r)),l=po(l,wl(i)),l=po(l,wl(o)),l}getBeforeBody(t,a){return wB(sr(a.callbacks,"beforeBody",this,t))}getBody(t,a){const{callbacks:s}=a,r=[];return In(t,i=>{const o={before:[],lines:[],after:[]},l=NB(s,i);po(o.before,wl(sr(l,"beforeLabel",this,i))),po(o.lines,sr(l,"label",this,i)),po(o.after,wl(sr(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,a){return wB(sr(a.callbacks,"afterBody",this,t))}getFooter(t,a){const{callbacks:s}=a,r=sr(s,"beforeFooter",this,t),i=sr(s,"footer",this,t),o=sr(s,"afterFooter",this,t);let l=[];return l=po(l,wl(r)),l=po(l,wl(i)),l=po(l,wl(o)),l}_createItems(t){const a=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=a.length;c<d;++c)l.push(U9e(this.chart,a[c]));return t.filter&&(l=l.filter((u,f,p)=>t.filter(u,f,p,s))),t.itemSort&&(l=l.sort((u,f)=>t.itemSort(u,f,s))),In(l,u=>{const f=NB(t.callbacks,u);r.push(sr(f,"labelColor",this,u)),i.push(sr(f,"labelPointStyle",this,u)),o.push(sr(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,a){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Gg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=yB(this,s),d=Object.assign({},l,c),u=bB(this.chart,s,d),f=vB(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(t,a,s,r){const i=this.getCaretPosition(t,s,r);a.lineTo(i.x1,i.y1),a.lineTo(i.x2,i.y2),a.lineTo(i.x3,i.y3)}getCaretPosition(t,a,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=yf(l),{x:p,y:x}=t,{width:v,height:N}=a;let b,C,w,S,A,k;return i==="center"?(A=x+N/2,r==="left"?(b=p,C=b-o,S=A+o,k=A-o):(b=p+v,C=b+o,S=A-o,k=A+o),w=b):(r==="left"?C=p+Math.max(c,u)+o:r==="right"?C=p+v-Math.max(d,f)-o:C=this.caretX,i==="top"?(S=x,A=S-o,b=C-o,w=C+o):(S=x+N,A=S+o,b=C+o,w=C-o),k=S),{x1:b,x2:C,x3:w,y1:S,y2:A,y3:k}}drawTitle(t,a,s){const r=this.title,i=r.length;let o,l,c;if(i){const d=bf(s.rtl,this.x,this.width);for(t.x=Ab(this,s.titleAlign,s),a.textAlign=d.textAlign(s.titleAlign),a.textBaseline="middle",o=Ms(s.titleFont),l=s.titleSpacing,a.fillStyle=s.titleColor,a.font=o.string,c=0;c<i;++c)a.fillText(r[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,a,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Ms(i.bodyFont),f=Ab(this,"left",i),p=r.x(f),x=c<u.lineHeight?(u.lineHeight-c)/2:0,v=a.y+x;if(i.usePointStyle){const N={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(p,d)+d/2,C=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,$k(t,N,b,C),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,$k(t,N,b,C)}else{t.lineWidth=jn(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const N=r.leftForLtr(p,d),b=r.leftForLtr(r.xPlus(p,1),d-2),C=yf(o.borderRadius);Object.values(C).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,_w(t,{x:N,y:v,w:d,h:c,radius:C}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),_w(t,{x:b,y:v+1,w:d-2,h:c-2,radius:C}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(N,v,d,c),t.strokeRect(N,v,d,c),t.fillStyle=o.backgroundColor,t.fillRect(b,v+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,a,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,f=Ms(s.bodyFont);let p=f.lineHeight,x=0;const v=bf(s.rtl,this.x,this.width),N=function(T){a.fillText(T,v.x(t.x+x),t.y+p/2),t.y+=p+i},b=v.textAlign(o);let C,w,S,A,k,_,E;for(a.textAlign=o,a.textBaseline="middle",a.font=f.string,t.x=Ab(this,b,s),a.fillStyle=s.bodyColor,In(this.beforeBody,N),x=l&&b!=="right"?o==="center"?d/2+u:d+2+u:0,A=0,_=r.length;A<_;++A){for(C=r[A],w=this.labelTextColors[A],a.fillStyle=w,In(C.before,N),S=C.lines,l&&S.length&&(this._drawColorBox(a,t,A,v,s),p=Math.max(f.lineHeight,c)),k=0,E=S.length;k<E;++k)N(S[k]),p=f.lineHeight;In(C.after,N)}x=0,p=f.lineHeight,In(this.afterBody,N),t.y-=i}drawFooter(t,a,s){const r=this.footer,i=r.length;let o,l;if(i){const c=bf(s.rtl,this.x,this.width);for(t.x=Ab(this,s.footerAlign,s),t.y+=s.footerMarginTop,a.textAlign=c.textAlign(s.footerAlign),a.textBaseline="middle",o=Ms(s.footerFont),a.fillStyle=s.footerColor,a.font=o.string,l=0;l<i;++l)a.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,a,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:f,topRight:p,bottomLeft:x,bottomRight:v}=yf(r.cornerRadius);a.fillStyle=r.backgroundColor,a.strokeStyle=r.borderColor,a.lineWidth=r.borderWidth,a.beginPath(),a.moveTo(l+f,c),o==="top"&&this.drawCaret(t,a,s,r),a.lineTo(l+d-p,c),a.quadraticCurveTo(l+d,c,l+d,c+p),o==="center"&&i==="right"&&this.drawCaret(t,a,s,r),a.lineTo(l+d,c+u-v),a.quadraticCurveTo(l+d,c+u,l+d-v,c+u),o==="bottom"&&this.drawCaret(t,a,s,r),a.lineTo(l+x,c+u),a.quadraticCurveTo(l,c+u,l,c+u-x),o==="center"&&i==="left"&&this.drawCaret(t,a,s,r),a.lineTo(l,c+f),a.quadraticCurveTo(l,c,l+f,c),a.closePath(),a.fill(),r.borderWidth>0&&a.stroke()}_updateAnimationTarget(t){const a=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Gg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=yB(this,t),c=Object.assign({},o,this._size),d=bB(a,t,c),u=vB(t,c,d,a);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const a=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(a);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ni(a.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,a),jJ(t,a.textDirection),i.y+=o.top,this.drawTitle(i,t,a),this.drawBody(i,t,a),this.drawFooter(i,t,a),CJ(t,a.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,a){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!jw(s,r),o=this._positionChanged(r,a);(i||o)&&(this._active=r,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,a,s=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,a,s),l=this._positionChanged(o,t),c=a||!jw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,a))),c}_getActiveElements(t,a,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return a.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,a){const{caretX:s,caretY:r,options:i}=this,o=Gg[i.position].call(this,t,a);return o!==!1&&(s!==o.x||r!==o.y)}}var V9e={id:"tooltip",_element:jB,positioners:Gg,afterInit(e,t,a){a&&(e.tooltip=new jB({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HJ},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Q9e=(e,t,a,s)=>(typeof t=="string"?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a);function Y9e(e,t,a,s){const r=e.indexOf(t);if(r===-1)return Q9e(e,t,a,s);const i=e.lastIndexOf(t);return r!==i?a:r}const K9e=(e,t)=>e===null?null:Os(Math.round(e),0,t);function CB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class X9e extends mh{static id="category";static defaults={ticks:{callback:CB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const a=this._addedLabels;if(a.length){const s=this.getLabels();for(const{index:r,label:i}of a)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,a){if(Ln(t))return null;const s=this.getLabels();return a=isFinite(a)&&s[a]===t?a:Y9e(s,t,dn(a,t),this._addedLabels),K9e(a,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),a||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,a=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&a===i.length-1?i:i.slice(t,a+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=a;o++)r.push({value:o});return r}getLabelForValue(t){return CB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const a=this.ticks;return t<0||t>a.length-1?null:this.getPixelForValue(a[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Z9e(e,t){const a=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:f,includeBounds:p}=e,x=i||1,v=u-1,{min:N,max:b}=t,C=!Ln(o),w=!Ln(l),S=!Ln(d),A=(b-N)/(f+1);let k=S8((b-N)/v/x)*x,_,E,T,M;if(k<1e-14&&!C&&!w)return[{value:N},{value:b}];M=Math.ceil(b/k)-Math.floor(N/k),M>v&&(k=S8(M*k/v/x)*x),Ln(c)||(_=Math.pow(10,c),k=Math.ceil(k*_)/_),r==="ticks"?(E=Math.floor(N/k)*k,T=Math.ceil(b/k)*k):(E=N,T=b),C&&w&&i&&c8e((l-o)/i,k/1e3)?(M=Math.round(Math.min((l-o)/k,u)),k=(l-o)/M,E=o,T=l):S?(E=C?o:E,T=w?l:T,M=d-1,k=(T-E)/M):(M=(T-E)/k,ap(M,Math.round(M),k/1e3)?M=Math.round(M):M=Math.ceil(M));const R=Math.max(_8(k),_8(E));_=Math.pow(10,Ln(c)?R:c),E=Math.round(E*_)/_,T=Math.round(T*_)/_;let z=0;for(C&&(p&&E!==o?(a.push({value:o}),E<o&&z++,ap(Math.round((E+z*k)*_)/_,o,SB(o,A,e))&&z++):E<o&&z++);z<M;++z){const P=Math.round((E+z*k)*_)/_;if(w&&P>l)break;a.push({value:P})}return w&&p&&T!==l?a.length&&ap(a[a.length-1].value,l,SB(l,A,e))?a[a.length-1].value=l:a.push({value:l}):(!w||T===l)&&a.push({value:T}),a}function SB(e,t,{horizontal:a,minRotation:s}){const r=El(s),i=(a?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class J9e extends mh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,a){return Ln(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:a,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=a?r:c,l=c=>i=s?i:c;if(t){const c=Do(r),d=Do(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:a,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),a=a||11),a&&(r=Math.min(a,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,a=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},i=this._range||this,o=Z9e(r,i);return t.bounds==="ticks"&&d8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let a=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-a)/Math.max(t.length-1,1)/2;a-=r,s+=r}this._startValue=a,this._endValue=s,this._valueRange=s-a}getLabelForValue(t){return FD(t,this.chart.options.locale,this.options.ticks.format)}}class eqe extends J9e{static id="linear";static defaults={ticks:{callback:gJ.formatters.numeric}};determineDataLimits(){const{min:t,max:a}=this.getMinMax(!0);this.min=wi(t)?t:0,this.max=wi(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),a=t?this.width:this.height,s=El(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const r1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ir=Object.keys(r1);function _B(e,t){return e-t}function AB(e,t){if(Ln(t))return null;const a=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),wi(o)||(o=typeof s=="string"?a.parse(o,s):a.parse(o)),o===null?null:(r&&(o=r==="week"&&(Hp(i)||i===!0)?a.startOf(o,"isoWeek",i):a.startOf(o,r)),+o)}function TB(e,t,a,s){const r=ir.length;for(let i=ir.indexOf(e);i<r-1;++i){const o=r1[ir[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((a-t)/(l*o.size))<=s)return ir[i]}return ir[r-1]}function tqe(e,t,a,s,r){for(let i=ir.length-1;i>=ir.indexOf(a);i--){const o=ir[i];if(r1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return ir[a?ir.indexOf(a):0]}function nqe(e){for(let t=ir.indexOf(e)+1,a=ir.length;t<a;++t)if(r1[ir[t]].common)return ir[t]}function EB(e,t,a){if(!a)e[t]=!0;else if(a.length){const{lo:s,hi:r}=RD(a,t),i=a[s]>=t?a[s]:a[r];e[i]=!0}}function aqe(e,t,a,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=a[l],c>=0&&(t[c].major=!0);return t}function kB(e,t,a){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!a?s:aqe(e,s,r,a)}class LB extends mh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,a={}){const s=t.time||(t.time={}),r=this._adapter=new JBe._date(t.adapters.date);r.init(a),np(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=a.normalized}parse(t,a){return t===void 0?null:AB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,a=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=wi(r)&&!isNaN(r)?r:+a.startOf(Date.now(),s),i=wi(i)&&!isNaN(i)?i:+a.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(a=t[0],s=t[t.length-1]),{min:a,max:s}}buildTicks(){const t=this.options,a=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=g8e(r,i,o);return this._unit=a.unit||(s.autoSkip?TB(a.minUnit,this.min,this.max,this._getLabelCapacity(i)):tqe(this,l.length,a.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:nqe(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),kB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let a=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?a=1-r:a=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;a=Os(a,0,o),s=Os(s,0,o),this._offsets={start:a,end:s,factor:1/(a+1+s)}}_generate(){const t=this._adapter,a=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||TB(i.minUnit,a,s,this._getLabelCapacity(a)),l=dn(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Hp(c)||c===!0,u={};let f=a,p,x;if(d&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,d?"day":o),t.diff(s,a,o)>1e5*l)throw new Error(a+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,x=0;p<s;p=+t.add(p,l,o),x++)EB(u,p,v);return(p===s||r.bounds==="ticks"||x===1)&&EB(u,p,v),Object.keys(u).sort(_B).map(N=>+N)}getLabelForValue(t){const a=this._adapter,s=this.options.time;return s.tooltipFormat?a.format(t,s.tooltipFormat):a.format(t,s.displayFormats.datetime)}format(t,a){const r=this.options.time.displayFormats,i=this._unit,o=a||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,a,s,r){const i=this.options,o=i.ticks.callback;if(o)return ea(o,[t,a,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],f=d&&l[d],p=s[a],x=d&&f&&p&&p.major;return this._adapter.format(t,r||(x?f:u))}generateTickLabels(t){let a,s,r;for(a=0,s=t.length;a<s;++a)r=t[a],r.label=this._tickFormatFunction(r.value,a,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const a=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((a.start+s)*a.factor)}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const a=this.options.ticks,s=this.ctx.measureText(t).width,r=El(this.isHorizontal()?a.maxRotation:a.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const a=this.options.time,s=a.displayFormats,r=s[a.unit]||s.millisecond,i=this._tickFormatFunction(t,0,kB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],a,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(a=0,s=r.length;a<s;++a)t=t.concat(r[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let a,s;if(t.length)return t;const r=this.getLabels();for(a=0,s=r.length;a<s;++a)t.push(AB(this,r[a]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return mJ(t.sort(_B))}}function Tb(e,t,a){let s=0,r=e.length-1,i,o,l,c;a?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=mu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=mu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class _Ve extends LB{static id="timeseries";static defaults=LB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(t);this._minPos=Tb(a,this.min),this._tableRange=Tb(a,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:a,max:s}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=a&&d<=s&&r.push(d);if(r.length<2)return[{time:a,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,a=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(a)||s.length===1)&&s.push(a),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const a=this.getDataTimestamps(),s=this.getLabelTimestamps();return a.length&&s.length?t=this.normalize(a.concat(s)):t=a.length?a:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Tb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const a=this._offsets,s=this.getDecimalForPixel(t)/a.factor-a.end;return Tb(this._table,s*this._tableRange+this._minPos,!0)}}const qJ="label";function PB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function sqe(e,t){const a=e.options;a&&t&&Object.assign(a,t)}function GJ(e,t){e.labels=t}function WJ(e,t,a=qJ){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[a]===r[a]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function rqe(e,t=qJ){const a={labels:[],datasets:[]};return GJ(a,e.labels),WJ(a,e.datasets,t),a}function iqe(e,t){const{height:a=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:f,...p}=e,x=h.useRef(null),v=h.useRef(null),N=()=>{x.current&&(v.current=new s1(x.current,{type:o,data:rqe(l,i),options:c&&{...c},plugins:d}),PB(t,v.current))},b=()=>{PB(t,null),v.current&&(v.current.destroy(),v.current=null)};return h.useEffect(()=>{!r&&v.current&&c&&sqe(v.current,c)},[r,c]),h.useEffect(()=>{!r&&v.current&&GJ(v.current.config.data,l.labels)},[r,l.labels]),h.useEffect(()=>{!r&&v.current&&l.datasets&&WJ(v.current.config.data,l.datasets,i)},[r,l.datasets]),h.useEffect(()=>{v.current&&(r?(b(),setTimeout(N)):v.current.update(f))},[r,c,l.labels,l.datasets,f]),h.useEffect(()=>{v.current&&(b(),setTimeout(N))},[o]),h.useEffect(()=>(N(),()=>b()),[]),n.jsx("canvas",{ref:x,role:"img",height:a,width:s,...p,children:u})}const oqe=h.forwardRef(iqe);function XD(e,t){return s1.register(t),h.forwardRef((a,s)=>n.jsx(oqe,{...a,ref:s,type:e}))}const lqe=XD("line",XBe),cqe=XD("bar",QBe),dqe=XD("pie",ZBe);s1.register(X9e,eqe,L9e,C9e,S9e,h9e,z9e,V9e,$9e);const VJ=e=>n.jsx(aa,{...e}),uqe=e=>n.jsx(ZH,{...e}),mqe=e=>n.jsx(ax,{...e}),fqe=e=>n.jsx(pa,{...e}),QJ=e=>n.jsx(hn,{...e}),hqe=e=>n.jsx(Xde,{...e}),gqe=[{icon:VJ,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:QJ,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:mqe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:uqe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],pqe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],xqe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},yqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},bqe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},vqe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},wqe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},Nqe=()=>{const e=[{icon:VJ,label:"New Contact"},{icon:QJ,label:"New Campaign"},{icon:fqe,label:"New Task"},{icon:hqe,label:"New Leads"}];return n.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,a)=>n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:n.jsx(t.icon,{size:20})}),n.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},a))})]})},jqe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]}),Cqe=({name:e,company:t,assignedBy:a,source:s,date:r})=>{const{text:i,bg:o}=wqe(s);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:e}),n.jsx("p",{className:"text-xs text-gray-500",children:t}),a&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",n.jsx("span",{className:"font-semibold text-gray-700",children:a})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:r}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},Sqe=({title:e,children:t})=>n.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),_qe=({title:e,chartData:t,chartOptions:a})=>{const[s,r]=h.useState("bar"),i=s==="pie"?bqe:t,o=s==="pie"?vqe:a,l=s==="line"?lqe:s==="pie"?dqe:cqe,c=s==="pie"?250:300;return n.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),n.jsxs("select",{value:s,onChange:d=>r(d.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[n.jsx("option",{value:"bar",children:"Bar"}),n.jsx("option",{value:"line",children:"Line"}),n.jsx("option",{value:"pie",children:"Pie"})]})]}),n.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:n.jsx(l,{data:i,options:o})})]})};function Aqe(){const{user:e}=en();return h.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),n.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:n.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),n.jsx(Nqe,{}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:gqe.map(t=>n.jsx(jqe,{...t},t.title))}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsx(_qe,{title:"Leads & Conversions",chartData:xqe,chartOptions:yqe}),n.jsx(Sqe,{title:"Latest Leads",children:pqe.map((t,a)=>n.jsx(Cqe,{...t},a))})]})]})})}function Tqe(){h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("All Statuses"),o=h.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=f=>t(f),c=()=>t(null),d=h.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:aa},{title:"Customers",value:o.filter(f=>f.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Oo},{title:"Prospects",value:o.filter(f=>f.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Yn},{title:"Partners",value:o.filter(f=>f.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:nn},{title:"Active",value:o.filter(f=>f.status==="CUSTOMER"||f.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Oo},{title:"Inactive",value:o.filter(f=>f.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:Mo},{title:"Former",value:o.filter(f=>f.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:Mo}],[o]);if(e)return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:n.jsx("div",{children:n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,n.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Website:"})," ",n.jsx("br",{}),n.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Industry:"})," ",n.jsx("br",{}),e.industry]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Territory:"})," ",n.jsx("br",{}),e.territory]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",n.jsx("br",{}),e.phone_number]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",n.jsx("br",{}),e.billing_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",n.jsx("br",{}),e.shipping_address]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),e.created_by," on ",e.created_date]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),e.last_updated]})]})]})]});const u=o.filter(f=>{const p=f.company.toLowerCase().includes(a.toLowerCase())||f.url.toLowerCase().includes(a.toLowerCase())||f.industry.toLowerCase().includes(a.toLowerCase())||f.territory.toLowerCase().includes(a.toLowerCase())||f.phone_number.toLowerCase().includes(a.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(f.status==="CUSTOMER"||f.status==="PARTNER")||r==="Inactive"&&f.status==="INACTIVE"||r==="Former"&&f.status==="FORMER"||f.status.toLowerCase()===r.toLowerCase();return p&&x});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[n.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:d.map(f=>n.jsx(Eqe,{...f},f.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:a,onChange:f=>s(f.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:f=>i(f.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Customer"}),n.jsx("option",{children:"Prospect"}),n.jsx("option",{children:"Partner"}),n.jsx("option",{children:"Active"}),n.jsx("option",{children:"Inactive"}),n.jsx("option",{children:"Former"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsxs("tbody",{children:[u.map((f,p)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(f),children:[n.jsx("td",{className:"py-3 px-4 break-words",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:f.company}),n.jsx("div",{className:"text-gray-500 text-xs break-words",children:f.url})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${f.status==="CUSTOMER"?"bg-green-100 text-green-700":f.status==="PROSPECT"?"bg-purple-100 text-purple-700":f.status==="PARTNER"?"bg-pink-100 text-pink-700":f.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:f.status})}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.industry}),n.jsx("td",{className:"py-3 px-4 break-words",children:f.territory}),n.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:f.phone_number})]})]},p)),u.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const Eqe=({icon:e,title:t,value:a,color:s,bgColor:r})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]});function kqe(){h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState("All Contacts"),[u,f]=h.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=h.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=k=>{k.target.id==="modalBackdrop"&&t(!1)},N=k=>{s(k)},b=()=>{s(null)},C=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(k,_)=>{_.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:_,value:E}=k.target;x(T=>({...T,[_]:E}))},A=k=>{if(k.preventDefault(),r)f(_=>_.map(E=>E.id===p.id?{...p}:E));else{const _={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};f(E=>[...E,_])}t(!1)};return a?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:b,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.account}),n.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:n.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[n.jsx(Yl,{}),"Export"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",n.jsx("br",{}),a.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Email:"})," ",n.jsx("br",{}),a.email]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),a.createdBy," on ",a.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Title:"})," ",n.jsx("br",{}),a.title]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",n.jsx("br",{}),a.assigned]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",n.jsx("br",{}),a.workPhone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Account:"})," ",n.jsx("br",{}),a.account]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",n.jsx("br",{}),a.phone1]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",n.jsx("br",{}),a.lastUpdated]})]}),n.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[n.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.notes?a.notes:"No additional notes were provided for this contact."})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:k=>d(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Contacts"}),n.jsx("option",{children:"Option 1"}),n.jsx("option",{children:"Option 2"}),n.jsx("option",{children:"Option 3"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-xs text-gray-700",children:u.map((k,_)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>N(k),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),n.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Mx,{className:"text-gray-500"}),n.jsx("span",{children:k.account})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(na,{className:"text-gray-500"}),n.jsx("span",{children:k.email})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone1})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:k.phone2})]})]})}),n.jsx("td",{className:"py-3 px-4",children:k.department}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(nn,{className:"text-gray-500"}),n.jsx("span",{children:k.assigned})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Et,{className:"text-gray-500"}),n.jsx("span",{children:k.created})]})}),n.jsx("td",{className:"py-3 px-4 text-center",children:n.jsx("div",{className:"flex justify-center",children:n.jsx("button",{onClick:E=>w(k,E),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})})})})]},_))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),n.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),n.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),n.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),n.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),n.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",children:"Assign To"}),n.jsx("option",{value:"Smith",children:"Smith"}),n.jsx("option",{value:"Doe",children:"Doe"}),n.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),n.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Eb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Za=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),Lqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Za,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Za,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Za,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Za,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Za,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),Pqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Za,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Za,{label:"Department",name:"department",value:e.department}),n.jsx(Za,{label:"Title",name:"title",value:e.title}),n.jsx(Za,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Za,{label:"Email",name:"email",value:e.email}),n.jsx(Za,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Za,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),Dqe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Za,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Za,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Za,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Za,{label:"Description",name:"description",value:e.description}),n.jsx(Za,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function YJ({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(Lqe,{data:Eb});case 2:return n.jsx(Pqe,{data:Eb});case 3:return n.jsx(Dqe,{data:Eb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Eb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(nj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const Oqe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function KJ({lead:e=Oqe,onBack:t}){const[a,s]=h.useState(!1);return e?n.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[n.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),n.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),n.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:n.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsx("p",{children:e.name})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:e.company})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:e.title})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:e.department})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:e.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:e.territory})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assign To:"}),n.jsx("p",{children:e.assignedTo})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:e.createdBy})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:e.workPhone})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:e.phone1})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:e.phone2})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:e.source})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),n.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",n.jsx("br",{}),e.addressLine2," ",n.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),n.jsx("p",{children:"Schedule follow-up call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),n.jsxs("div",{className:"space-y-1 text-gray-700",children:[n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),n.jsx("p",{children:"Initial discovery call"}),n.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),n.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),n.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),n.jsx(YJ,{isOpen:a,onClose:()=>s(!1)})]}):null}const Mqe=Vf.all(),ZA=Mqe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function Iqe(){const[e,t]=h.useState(null),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,d]=h.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[u,f]=h.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=E=>t(E),x=()=>t(null),[v,N]=h.useState(""),[b,C]=h.useState("All Accounts"),w=()=>{s(!1),i(null),f({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=E=>{i(E),s(!0),f({work_ccode:E.work_ccode||"+63",work_phone:E.workPhone||"",m1_ccode:E.m1_ccode||"+63",mobile_phone_1:E.phone1||"",m2_ccode:E.m2_ccode||"+63",mobile_phone_2:E.phone2||""})},A=E=>{window.confirm("Are you sure you want to delete this lead?")&&d(c.filter(T=>T.id!==E))},k=E=>{const{name:T,value:M}=E.target;f(R=>({...R,[T]:M}))},_=E=>{E.preventDefault();const T=new FormData(E.target),M=Object.fromEntries(T.entries());M.name=`${M.firstName} ${M.lastName}`,M.assignedTo=o.find(R=>R.id.toString()===M.assignedTo)?.first_name+" "+o.find(R=>R.id.toString()===M.assignedTo)?.last_name,M.work_ccode=u.work_ccode,M.workPhone=u.work_phone,M.m1_ccode=u.m1_ccode,M.phone1=u.mobile_phone_1,M.m2_ccode=u.m2_ccode,M.phone2=u.mobile_phone_2,d(r?c.map(R=>R.id===r.id?{...R,...M}:R):[...c,{...M,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?n.jsx(KJ,{lead:e,onBack:x}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"})," Leads"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[n.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[n.jsx(Yl,{})," Download"]}),n.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:E=>N(E.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:E=>C(E.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Leads"}),n.jsx("option",{children:"New"}),n.jsx("option",{children:"Contacted"}),n.jsx("option",{children:"Qualified"}),n.jsx("option",{children:"Converted"}),n.jsx("option",{children:"Lost"})]})})]}),n.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Account"}),n.jsx("div",{children:"Title"}),n.jsx("div",{children:"Department"}),n.jsx("div",{children:"Email"}),n.jsx("div",{children:"Work Phone"}),n.jsx("div",{children:"Assigned To"}),n.jsx("div",{children:"Updated"}),n.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(E=>n.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(E),children:[n.jsx("div",{className:"truncate",children:E.name}),n.jsx("div",{className:"truncate",children:E.company}),n.jsx("div",{className:"truncate",children:E.title}),n.jsx("div",{className:"truncate",children:E.department}),n.jsx("div",{className:"truncate",children:E.email}),n.jsxs("div",{className:"truncate",children:[E.work_ccode," ",E.workPhone]}),n.jsx("div",{className:"truncate",children:E.assignedTo}),n.jsx("div",{className:"truncate",children:E.lastUpdated}),n.jsxs("div",{className:"flex justify-center space-x-2",children:[n.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:T=>{T.stopPropagation(),S(E)},children:n.jsx(ma,{})}),n.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:T=>{T.stopPropagation(),A(E.id)},children:n.jsx(Wt,{})})]})]},E.id))]}),a&&n.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Yt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:_,children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),n.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),n.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),n.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),n.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),n.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),n.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"work_ccode",value:u.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:ZA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:u.work_phone,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m1_ccode",value:u.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:ZA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:u.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),n.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[n.jsx("select",{name:"m2_ccode",value:u.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:ZA.map(E=>n.jsx("option",{value:E.code,children:E.code},E.code))}),n.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:u.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),n.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),n.jsxs("select",{name:"assignedTo",defaultValue:o.find(E=>`${E.first_name} ${E.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(E=>n.jsxs("option",{value:E.id,children:[E.first_name," ",E.last_name]},E.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),n.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),n.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),n.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const DB=["To Do","In Progress","Review","Completed"],Tg=10,$qe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},OB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Rqe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,u=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:u}},zqe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,u=()=>e.task_assign_to?.id||e.assigned_to,f=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let N="Lead",b="",C="",w="",S="Lead",A="",k="",_="";const E=l(),T=p(),M=o(),R=f();if(E){N="Account",S="Account",A=T,b=String(E);const z=c(),P=d(),I=x(),q=v();z?(C="Contact",k="Contact",_=I,w=String(z)):P&&(k="Deal",C="Deal",_=q,w=String(P))}else M?(S="Lead",A=R,N="Lead",b=String(M)):e.related_type==="Account"&&(N="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:u()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:A,relatedType2Text:k,relatedTo2Text:_,subject:e.title,relatedType1:N,relatedTo1:b,relatedType2:C,relatedTo2:w}};function Uqe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,E]=h.useState(1),[T,M]=h.useState(null),[R,z]=h.useState(!1),P=wt(),I=Zt(),[q,Q]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});h.useEffect(()=>{const xe=I.state?.openTaskModal,ee=I.state?.initialTaskData;xe&&(i(!0),ee&&Q(Ee=>({...Ee,...ee})),P(I.pathname,{replace:!0,state:{}}))},[I,P]);const V=async()=>{try{const xe=await ae.get("/users/all");k(Array.isArray(xe.data)?xe.data:[])}catch(xe){console.error("Failed to fetch users:",xe),G.error("Failed to fetch users.")}},X=async()=>{try{x(!0);const xe=await ae.get("/tasks/all"),Ee=(Array.isArray(xe.data)?xe.data:[]).map(zqe);Ee.sort((Ae,Re)=>{const et=Ae.createdAt?new Date(Ae.createdAt):0;return(Re.createdAt?new Date(Re.createdAt):0)-et}),console.log("Fetched Tasks:",Ee),f(Ee),a==="list"&&E(1)}catch(xe){console.error("Failed to load tasks:",xe),G.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(V(),X())},[t,e]);const W=()=>{l(null),Q({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},ne=(xe=null,ee=!1)=>{l(xe),d(ee),xe?Q({id:xe.id,subject:xe.title||"",description:xe.description||"",priority:xe.priority||"Normal",status:xe.status||"Not started",dueDate:$qe(xe.dueDate),assignedTo:xe.assignedToId?String(xe.assignedToId):"",notes:xe.notes||"",relatedType1Text:xe.relatedType1Text||"",relatedTo1Text:xe.relatedTo1Text||"",relatedType2Text:xe.relatedType2Text||"",relatedTo2Text:xe.relatedTo2Text||"",relatedType1:xe.relatedType1||"",relatedTo1:xe.relatedTo1||"",relatedType2:xe.relatedType2||"",relatedTo2:xe.relatedTo2||""}):W(),i(!0)},oe=()=>{i(!1),l(null),d(!1),W()},K=async xe=>{const ee=Rqe(xe);try{o&&!c?(await ae.put(`/tasks/${o.id}`,ee),G.success("Task updated successfully.")):(await ae.post("/tasks/create",ee),G.success("Task created successfully.")),i(!1),await X()}catch(Ee){console.error("Failed to save task:",Ee);const Ae=Ee.response?.data?.detail||"Failed to save task.";G.error(Ae)}},U=xe=>{xe&&M({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:xe.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:xe.id}})},ye=async()=>{if(!T?.action){M(null);return}const{action:xe}=T;z(!0);try{xe.type==="delete"&&(await ae.delete(`/tasks/${xe.targetId}`),G.success("Task deleted successfully."),await X())}catch(ee){console.error("Task action failed:",ee),G.error("Failed to delete task.")}finally{z(!1),M(null)}},pe=()=>{R||M(null)},Ne=h.useMemo(()=>{const xe=v.trim().toLowerCase();return[...u].sort((Ee,Ae)=>{const Re=Ee.createdAt?new Date(Ee.createdAt):0;return(Ae.createdAt?new Date(Ae.createdAt):0)-Re}).filter(Ee=>{const Ae=xe===""||Ee.title?.toLowerCase().includes(xe)||Ee.description?.toLowerCase().includes(xe)||Ee.assignedToName?.toLowerCase().includes(xe)||Ee.createdBy?.toLowerCase().includes(xe),Re=b==="Filter by Status"||Ee.status===b,et=w==="Filter by Priority"||Ee.priority===w;return Ae&&Re&&et})},[u,v,b,w]);h.useEffect(()=>{E(1)},[v,b,w,a]),h.useEffect(()=>{if(a==="list"){const xe=Ne.length===0?1:Math.ceil(Ne.length/Tg);_>xe&&E(xe)}},[Ne.length,_,a]);const Se=h.useMemo(()=>{if(a==="board")return Ne;const xe=(_-1)*Tg;return Ne.slice(xe,xe+Tg)},[Ne,_,a]),Oe=h.useMemo(()=>{const xe=new Date;return[{title:"To Do",value:u.filter(ee=>ee.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(ee=>ee.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(ee=>ee.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(ee=>ee.dueDate&&new Date(ee.dueDate)<xe&&ee.status!=="Completed").length,icon:qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(ee=>ee.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),ke=xe=>xe.dueDate&&new Date(xe.dueDate)<new Date&&xe.status!=="Completed",he=xe=>{switch(xe.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},qe=xe=>{switch(xe){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Ce=xe=>{switch(xe){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Oe.map(xe=>n.jsx(Fqe,{...xe},xe.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:xe=>N(xe.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:xe=>C(xe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),DB.map(xe=>n.jsx("option",{children:xe},xe))]}),n.jsxs("select",{value:w,onChange:xe=>S(xe.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&Ne.length===0&&n.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&Ne.length>0&&a==="board"&&n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:DB.map(xe=>{const ee=Se.filter(Ee=>Ee.status===xe);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:xe}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:ee.length})]}),n.jsx("div",{className:`space-y-3 ${ee.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:ee.length>0?ee.map(Ee=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${he(Ee)}`,onClick:()=>ne(Ee,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Ee.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",Ee.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",Ee.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:ke(Ee)?"text-red-600":"text-gray-600",children:Ee.dateAssigned?OB(Ee.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),ne(Ee)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:Ae=>{Ae.stopPropagation(),U(Ee)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},Ee.id)):n.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},xe)})}),!p&&!t&&Ne.length>0&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),n.jsx("tbody",{children:Se.map(xe=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",xe),ne(xe,!0)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:xe.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${qe(xe.status||"To Do")}`,children:xe.status||"To Do"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Ce(xe.priority||"Low")}`,children:xe.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:xe.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${ke(xe)?"text-red-600 font-medium":""}`,children:xe.dateAssigned?OB(xe.dateAssigned):""}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",onClick:ee=>ee.stopPropagation(),children:[n.jsxs("button",{type:"button",onClick:()=>ne(xe),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{type:"button",onClick:()=>U(xe),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[n.jsx(Wt,{})," Delete"]})]})})]},xe.id))})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ne.length,pageSize:Tg,currentPage:Ne.length===0?0:_,onPrev:()=>E(xe=>Math.max(xe-1,1)),onNext:()=>E(xe=>Math.min(xe+1,Math.max(1,Math.ceil(Ne.length/Tg)||1))),label:"tasks"}),n.jsx(l0,{isOpen:r,onClose:oe,onSave:K,onEdit:()=>d(!1),setFormData:Q,formData:q,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:U}),T&&n.jsx(Bqe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:ye,onCancel:pe,loading:R})]})}function Fqe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function Bqe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function Hqe(){h.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=h.useState(!1),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(""),[c,d]=h.useState("All Statuses"),[u,f]=h.useState({show:!1,action:null,campaign:null}),[p,x]=h.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,N]=h.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),b=p.filter(z=>{const P=c==="All Statuses"||z.status===c,I=z.name.toLowerCase().includes(o.toLowerCase())||z.subject.toLowerCase().includes(o.toLowerCase());return P&&I}),C=()=>{s(!1),N({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(z,P)=>{P.stopPropagation(),s(!0),N(z),t(!0)},S=(z,P)=>{P.stopPropagation(),f({show:!0,action:"delete",campaign:z})},A=z=>{z.preventDefault(),f({show:!0,action:a?"edit":"add",campaign:{...v}})},k=()=>{if(u.action==="add"){const z={...u.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(P=>[...P,z]),t(!1)}else u.action==="edit"?(x(z=>z.map(P=>P.id===u.campaign.id?{...u.campaign}:P)),t(!1)):u.action==="delete"&&x(z=>z.filter(P=>P.id!==u.campaign.id));f({show:!1,action:null,campaign:null})},_=()=>{f({show:!1,action:null,campaign:null})},E=z=>i(z),T=()=>i(null),M=z=>{const{name:P,value:I}=z.target;N(q=>({...q,[P]:I}))},R=z=>{z.target.id==="modalBackdrop"&&t(!1)};return r?n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("button",{onClick:T,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[n.jsx(Gu,{className:"mr-1 w-5 h-5"})," Back"]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),n.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),n.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Subject:"})," ",n.jsx("br",{}),r.subject]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created By:"})," ",n.jsx("br",{}),r.createdBy]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Created On:"})," ",n.jsx("br",{}),r.created]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",n.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),n.jsxs("p",{className:"sm:col-span-2",children:[n.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",n.jsx("br",{}),r.content]}),r.status==="Scheduled"&&n.jsxs("p",{children:[n.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",n.jsx("br",{}),r.recipients]})]})]})]}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(na,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),n.jsx("button",{onClick:C,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:z=>l(z.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Statuses"}),n.jsx("option",{children:"Draft"}),n.jsx("option",{children:"Scheduled"}),n.jsx("option",{children:"Sent"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),n.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Recipients"}),n.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),n.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),n.jsx("tbody",{className:"text-sm text-gray-700",children:b.map((z,P)=>n.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>E(z),children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:z.name}),n.jsx("td",{className:"py-3 px-4",children:z.subject}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${z.status==="Scheduled"?"bg-yellow-100 text-yellow-700":z.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:z.status})}),n.jsx("td",{className:"py-3 px-4",children:z.recipients?`${z.recipients} emails`:""}),n.jsx("td",{className:"py-3 px-4",children:z.scheduleDate?new Date(z.scheduleDate).toLocaleString():""}),n.jsx("td",{className:"py-3 px-4 text-center",onClick:I=>I.stopPropagation(),children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:I=>w(z,I),className:"text-blue-500 hover:text-blue-700",children:n.jsx(ma,{})}),n.jsx("button",{onClick:I=>S(z,I),className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})})]},P))})]})}),e&&n.jsx("div",{id:"modalBackdrop",onClick:R,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:z=>z.stopPropagation(),children:[n.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Yt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:a?"Edit Campaign":"Add New Campaign"}),n.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:v.name,onChange:M,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:M,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"status",value:v.status,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[n.jsx("option",{value:"Draft",children:"Draft"}),n.jsx("option",{value:"Scheduled",children:"Scheduled"}),n.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:M,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:M,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),u.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:_,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Yt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:u.action==="delete"?"Confirm Delete":u.action==="edit"?"Confirm Edit":"Confirm Add"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:u.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):u.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]}):n.jsxs(n.Fragment,{children:["Add new campaign"," ",n.jsx("span",{className:"font-semibold",children:u.campaign.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const qqe=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],MB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function Gqe(){h.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=h.useState(qqe),[a,s]=h.useState(!1),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(""),[u,f]=h.useState("All Categories"),[p,x]=h.useState({name:"",category:"",subject:"",body:""}),[v,N]=h.useState({show:!1,action:null,template:null}),b=()=>{l(null),i(null),s(!1)},C=P=>{x({...p,[P.target.name]:P.target.value})},w=()=>{N({show:!0,action:"add",template:{...p}})},S=P=>{i(P),x({name:P.name,category:P.category,subject:P.subject,body:P.body})},A=()=>{N({show:!0,action:"edit",template:{...p,id:r.id}})},k=P=>{N({show:!0,action:"delete",template:P})},_=P=>{Rx.success(`Template "${P.name}" selected for use!`),N({show:!1,action:null,template:null})},E=()=>{const P=v.template;if(v.action==="add"){const I={...P,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(q=>[I,...q]),s(!1),x({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(I=>I.map(q=>q.id===P.id?{...P}:q).sort((q,Q)=>new Date(Q.date).getTime()-new Date(q.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):v.action==="delete"&&(t(I=>I.filter(q=>q.id!==P.id)),l(null));N({show:!1,action:null,template:null})},T=()=>{N({show:!1,action:null,template:null})},M=P=>l(P),R=e.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())&&(u==="All Categories"||P.category===u)),z=(P,I=!1)=>n.jsxs("div",{className:"flex flex-col justify-between h-full",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:P.name}),n.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${MB[P.category]||MB.default}`,children:P.category})]}),n.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:P.subject}),n.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${I?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:I?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:P.body})]}),n.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!I&&n.jsxs("button",{onClick:q=>{q.stopPropagation(),_(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(hn,{})," Use Template"]}),I&&n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:q=>{q.stopPropagation(),S(P)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[n.jsx(ha,{})," Edit"]}),n.jsxs("button",{onClick:q=>{q.stopPropagation(),k(P)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[n.jsx(Wt,{})," Delete"]})]}),n.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",P.createdBy," | ",P.date]})]})]});return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[n.jsx($x,{position:"top-center",reverseOrder:!1}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-black"})," Templates"]}),n.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:P=>d(P.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:u,onChange:P=>f(P.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"All Categories"}),n.jsx("option",{children:"Welcome"}),n.jsx("option",{children:"Follow-up"}),n.jsx("option",{children:"Newsletter"}),n.jsx("option",{children:"Promotional"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R.map(P=>n.jsxs("div",{onClick:()=>M(P),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow",children:z(P)})]},P.id))}),(a||r)&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:P=>P.stopPropagation(),children:[n.jsx("button",{onClick:b,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Yt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),n.jsxs("form",{onSubmit:P=>{P.preventDefault(),r?A():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{name:"category",value:p.category,onChange:C,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[n.jsx("option",{value:"",children:"Select Category"}),n.jsx("option",{value:"Welcome",children:"Welcome"}),n.jsx("option",{value:"Follow-up",children:"Follow-up"}),n.jsx("option",{value:"Newsletter",children:"Newsletter"}),n.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:C,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),n.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[n.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:C,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[n.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&n.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:P=>P.stopPropagation(),children:[n.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),n.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:z(o,!0)})]})}),v.show&&n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[n.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:n.jsx(Yt,{size:20})}),n.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),n.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?n.jsxs(n.Fragment,{children:["Are you sure you want to delete the template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?n.jsxs(n.Fragment,{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?n.jsxs(n.Fragment,{children:["Add new template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):n.jsxs(n.Fragment,{children:["Use template"," ",n.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),n.jsxs("div",{className:"flex justify-center gap-4",children:[n.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),n.jsx("button",{onClick:E,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const nv=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},Jm=(e,t="")=>{const a=nv(e);return`${t}${a.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},IB=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`},Wqe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"2-digit"})},Vqe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},$B=(e,t,a)=>{const s=new Date,r=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",i=e?.validity_days?String(e.validity_days):"";return{issuedDate:IB(e?.presented_date)||IB(s),subject:"Price Quotation",forName:e?.account?.name||"",attn:r,intro:"We are pleased to submit our proposal as follows:",notes:e?.notes||"",terms:{validity:i?`${i} days from the date of quotation.`:"",payment:"",deliveryPeriod:"",deliveryPoint:""},preparedBy:t?`${t.first_name||""} ${t.last_name||""}`.trim():"",approvedBy:a?.ceo_email||"Admin"}};function kb(){const e=wt(),t=Zt(),{quoteId:a}=Bo(),{user:s}=en(),r=s?.company?.currency||"",i=h.useMemo(()=>`quote-print:${a||""}`,[a]),[o,l]=h.useState(()=>{const A=t.state?.quote;return A&&String(A.id)===String(a)?A:null}),[c,d]=h.useState(()=>t.state?.companyInfo||null),[u,f]=h.useState(!1),[p,x]=h.useState(()=>{try{const A=sessionStorage.getItem(i);return A?JSON.parse(A):null}catch{return null}});h.useEffect(()=>{if(!a)return;let A=!0;return(async()=>{try{f(!0);const E=!c?await ae.get("/company/invoice-info"):null;if(!A)return;if(E?.data&&d(E.data),!o){const T=await ae.get("/quotes/admin/fetch-all"),R=(Array.isArray(T?.data)?T.data:[]).find(z=>String(z.id)===String(a));R&&l(R)}}catch(_){const E=_?.response?.data?.detail||_?.message||"Failed to load quotation.";G.error(E)}finally{A&&f(!1)}})(),()=>{A=!1}},[a]),h.useEffect(()=>{o&&x(A=>{if(A)return A;try{const _=sessionStorage.getItem(i);if(_)return JSON.parse(_)}catch{}const k=$B(o,s,c);try{sessionStorage.setItem(i,JSON.stringify(k))}catch{}return k})},[o,s,c,i]);const v=A=>{x(A);try{sessionStorage.setItem(i,JSON.stringify(A))}catch{}},N=Array.isArray(o?.items)?o.items:[],b=nv(o?.discount_amount),C=nv(o?.tax_rate);if(!p)return n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"text-gray-700",children:u?"Loading...":""})});const w=p.preparedBy||(s?`${s.first_name||""} ${s.last_name||""}`.trim():""),S=p.approvedBy||c?.ceo_email||"Admin";return n.jsxs("div",{className:"min-h-screen bg-gray-50 quote-print-root",children:[n.jsx("style",{children:`
        @page { size: A4; margin: 5mm; }
        @media print {
          html, body { margin: 0 !important; padding: 0 !important; }
          .no-print { display: none !important; }
          .print-surface { box-shadow: none !important; border: none !important; }
          body { background: white !important; }
          .quote-print-root { background: white !important; }

          /* Remove screen gutters/max-width so print is tight */
          .quote-print-page { max-width: none !important; margin: 0 !important; padding: 0 !important; }

          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

          /* Keep the quote meta proportions while printing (left 2 cols + fixed quotation col) */
          .quote-meta-grid { grid-template-columns: 1fr 1fr 240px !important; padding: 0px; }
        }
      `}),n.jsx("div",{className:"no-print sticky top-0 z-10 bg-white border-b border-gray-200",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>e(-1),children:"Back"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>{if(!o)return;const A=$B(o,s,c);v(A)},disabled:!o,children:"Reset fields"}),n.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-sm disabled:opacity-70",onClick:()=>window.print(),disabled:!o||u,children:"Print"})]})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 quote-print-page",children:[n.jsx("div",{className:"no-print bg-white border border-gray-200 rounded-xl p-4 mb-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Date"}),n.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.issuedDate||"",onChange:A=>v({...p,issuedDate:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.subject||"",onChange:A=>v({...p,subject:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"For"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.forName||"",onChange:A=>v({...p,forName:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attn"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.attn||"",onChange:A=>v({...p,attn:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Intro"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.intro||"",onChange:A=>v({...p,intro:A.target.value})})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes"}),n.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.notes||"",onChange:A=>v({...p,notes:A.target.value})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Validity"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.validity||"",onChange:A=>v({...p,terms:{...p.terms,validity:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Payment"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.payment||"",onChange:A=>v({...p,terms:{...p.terms,payment:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Period"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPeriod||"",onChange:A=>v({...p,terms:{...p.terms,deliveryPeriod:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Point"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPoint||"",onChange:A=>v({...p,terms:{...p.terms,deliveryPoint:A.target.value}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Approved by"}),n.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.approvedBy||"",onChange:A=>v({...p,approvedBy:A.target.value})})]})]})}),n.jsxs("div",{className:"print-surface bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pb-3",children:[n.jsxs("div",{className:"min-w-0 w-4/5",children:[n.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase",children:c?.company_name||""}),c?.company_number?n.jsx("div",{className:"text-sm text-gray-700",children:c.company_number}):null,c?.ceo_email?n.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",c.ceo_email]}):null,c?.company_website?n.jsxs("div",{className:"text-sm text-gray-700",children:["Web: ",c.company_website]}):null]}),n.jsx("div",{className:"flex items-start gap-3 w-1/5",children:c?.company_logo?n.jsx("img",{src:c.company_logo,alt:"Company logo",className:"w-full h-auto object-contain"}):null})]}),n.jsxs("div",{className:"mt-4",children:[n.jsxs("div",{className:"quote-meta-grid grid grid-cols-3 text-sm border border-gray-600",children:[n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-600 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"For:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.forName||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-1 border-b border-t border-r border-gray-600",children:n.jsx("div",{className:"text-xl font-bold text-gray-900",children:"QUOTATION"})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-600 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Attn:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.attn||""})]}),n.jsx("div",{className:"quote-meta-quote justify-center text-center p-2 border-t border-r border-gray-600",children:n.jsxs("div",{className:"text-sm text-gray-700",children:["No."," ",n.jsx("span",{className:"font-semibold",children:Vqe(o?.quote_id||o?.id)})]})}),n.jsxs("div",{className:"flex gap-2 p-2 border border-gray-600 col-span-2",children:[n.jsx("div",{className:"w-16 font-semibold",children:"Subject:"}),n.jsx("div",{className:"min-w-0 break-words",children:p.subject||""})]}),n.jsx("div",{className:"quote-meta-quote md:justify-center border-r border-b border-gray-600 text-center p-2",children:n.jsx("div",{className:"text-sm text-gray-700",children:Wqe(p.issuedDate)})})]}),n.jsx("div",{className:"mt-4 text-sm text-gray-900 whitespace-pre-wrap",children:p.intro||""})]}),n.jsx("div",{className:"mt-4 overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm border border-gray-400 border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-gray-100",children:[n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-14",children:"Item"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left",children:"Description"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Qty"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Unit"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Unit Price"}),n.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Total Cost"})]})}),n.jsx("tbody",{children:N.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"border border-gray-400 px-2 py-4 text-center text-gray-600",children:"No line items."})}):N.map((A,k)=>{const _=A?.name?String(A.name).trim():"",E=A?.description?String(A.description).trim():"",T=A?.variant?String(A.variant).trim():"",M=A?.sku?String(A.sku).trim():"",R=T&&M?`${T} (${M})`:M?`(${M})`:T,P=[_,E,R].map(I=>I?String(I).trim():"").filter(Boolean).join(`
`);return n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:k+1}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 whitespace-pre-wrap",children:P}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:nv(A?.quantity)||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:A?.unit||""}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:Jm(A?.unit_price,r)}),n.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:Jm(A?.line_total,r)})]},A?.id??k)})})]})}),n.jsx("div",{className:"mt-4 flex justify-end",children:n.jsx("table",{className:"text-sm border border-gray-400 border-collapse min-w-[280px]",children:n.jsxs("tbody",{children:[n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"SUB TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:Jm(o?.subtotal,r)})]}),b>0?n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"Less: Discount"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:Jm(o?.discount_amount,r)})]}):null,n.jsxs("tr",{children:[n.jsxs("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:["Tax ",C.toFixed(0),"%"]}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:Jm(o?.tax_amount,r)})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-400 px-3 py-2 font-bold",children:"TOTAL"}),n.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right font-bold",children:Jm(o?.total_amount,r)})]})]})})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"TERMS & CONDITIONS:"}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Validity"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.validity||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Payment"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.payment||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Period"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPeriod||""]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"w-28 font-semibold",children:"Delivery Point"}),n.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPoint||""]})]})]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"NOTE:"}),n.jsx("div",{className:"text-sm whitespace-pre-wrap text-gray-900",children:p.notes||""})]})]}),n.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-10 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Prepared by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:w})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-gray-700",children:"Approved by:"}),n.jsx("div",{className:"mt-8 border-b border-gray-400"}),n.jsx("div",{className:"mt-2 font-semibold",children:S})]})]}),n.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"Generated from Sari-Sari CRM quotation."})]})]})]})}function Qqe({toggleSidebar:e}){const[t,a]=h.useState(!1),s=h.useRef(null),r=Zt(),i=wt(),{logout:o}=Qs(),{user:l,fetchUser:c}=en(),d={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"};h.useEffect(()=>{c()},[]),h.useEffect(()=>{const f=()=>{c()};return window.addEventListener("userProfileUpdated",f),()=>{window.removeEventListener("userProfileUpdated",f)}},[c]);const u=d[r.pathname]||"Group Manager Panel";return h.useEffect(()=>{function f(p){s.current&&!s.current.contains(p.target)&&a(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),n.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})})}),n.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[n.jsx(sx,{className:"text-xl"}),n.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),n.jsxs("div",{className:"relative",ref:s,children:[n.jsxs("button",{onClick:()=>a(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),n.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[l?.first_name," ",l?.last_name]})]}),t&&n.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[n.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[n.jsx("img",{src:l?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[l?.first_name," ",l?.middle_name," ",l?.last_name]}),n.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),n.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[n.jsx("button",{onClick:()=>{i("/group-manager/users"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),n.jsx("button",{onClick:()=>{i("/group-manager/manage-account"),a(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),n.jsx("div",{className:"border-t border-gray-200 my-2"}),n.jsx("button",{onClick:o,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Yqe(){const[e,t]=h.useState(!0),[a,s]=h.useState(!1),[r,i]=h.useState(!1),[o,l]=h.useState(!1),c=Zt(),{user:d}=en();h.useEffect(()=>{d&&console.log("Fetched user:",d)},[d]),h.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),h.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",f="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",x=["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname);return n.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[n.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[n.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[n.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",n.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),d&&d.company&&n.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:d.company.company_name})]}),n.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[n.jsxs($t,{to:"/group-manager/dashboard",className:({isActive:v})=>v?u:f,children:[n.jsx(rx,{className:"text-lg"}),n.jsx("span",{children:"Dashboard"})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-lg"}),"Sales"]}),n.jsx(Tt,{className:`transition-transform ${e||x?"rotate-180":""}`})]}),(e||x)&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/accounts",className:({isActive:v})=>v?u:f,children:[n.jsx(xd,{})," Accounts"]}),n.jsxs($t,{to:"/group-manager/contacts",className:({isActive:v})=>v?u:f,children:[n.jsx(nn,{})," Contacts"]}),n.jsxs($t,{to:"/group-manager/leads",className:({isActive:v})=>v?u:f,children:[n.jsx(Yn,{})," Leads"]}),n.jsxs($t,{to:"/group-manager/deals",className:({isActive:v})=>v?u:f,children:[n.jsx(tn,{})," Deals"]}),n.jsxs($t,{to:"/group-manager/quotes",className:({isActive:v})=>v?u:f,children:[n.jsx(hn,{})," Quotes"]}),n.jsxs($t,{to:"/group-manager/targets",className:({isActive:v})=>v?u:f,children:[n.jsx(or,{})," Targets"]})]})]}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!a),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(As,{className:"text-lg"}),"Activity"]}),n.jsx(Tt,{className:`transition-transform ${a?"rotate-180":""}`})]}),a&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/tasks",className:({isActive:v})=>v?u:f,children:[n.jsx(Qt,{})," Tasks"]}),n.jsxs($t,{to:"/group-manager/meetings",className:({isActive:v})=>v?u:f,children:[n.jsx(Et,{})," Meetings"]}),n.jsxs($t,{to:"/group-manager/calls",className:({isActive:v})=>v?u:f,children:[n.jsx($s,{})," Calls"]}),n.jsxs($t,{to:"/group-manager/audit",className:({isActive:v})=>v?u:f,children:[n.jsx(As,{})," Audit"]})]})]}),n.jsx("div",{children:n.jsx($t,{to:"/group-manager/territory",className:({isActive:v})=>v?u:f,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Xl,{className:"text-lg"}),"Territory"]})})}),n.jsxs("div",{children:[n.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tL,{className:"text-lg"}),"User Management"]}),n.jsx(Tt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&n.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[n.jsxs($t,{to:"/group-manager/users",className:({isActive:v})=>v?u:f,children:[n.jsx(aa,{})," Users"]}),n.jsxs($t,{to:"/group-manager/manage-account",className:({isActive:v})=>v?u:f,children:[n.jsx(nn,{})," Manage Account"]})]})]})]}),n.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),n.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[n.jsx(Qqe,{toggleSidebar:()=>l(!o)}),n.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:n.jsx(Kp,{})})]})]})}const Kqe=e=>n.jsx(Gt,{...e}),XJ=e=>n.jsx(xd,{...e}),ZJ=e=>n.jsx(Gs,{...e}),Xqe=e=>n.jsx(ax,{...e}),Zqe=e=>n.jsx(Fw,{...e}),Jqe=e=>n.jsx(Et,{...e}),eGe=e=>n.jsx(Lt,{...e}),tGe=e=>n.jsx(Hw,{...e}),JJ=e=>n.jsx(Bw,{...e}),nGe=e=>n.jsx(aa,{...e}),eee=e=>n.jsx(nn,{...e}),aGe=e=>n.jsx(Yn,{...e}),tee=e=>n.jsx(tn,{...e}),sGe=e=>n.jsx(hn,{...e}),rGe=e=>n.jsx(or,{...e}),iGe=e=>n.jsx(pa,{...e}),oGe=e=>n.jsx(Et,{...e}),lGe=e=>n.jsx($s,{...e}),cGe=e=>n.jsx(Xl,{...e}),dGe=e=>n.jsx(As,{...e}),nee=e=>`P ${new Intl.NumberFormat("en-PH",{minimumFractionDigits:0}).format(e)}`,uGe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},mGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},fGe=e=>{switch(e){case"call":return{Icon:eGe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:tGe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:Jqe,color:"text-blue-500",bgColor:"bg-blue-100"}}},hGe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},gGe=({searchQuery:e,onSearchChange:t,searchResults:a,onSearchResultClick:s})=>{const r=wt(),[i,o]=h.useState(!1),l=h.useRef(null),c=[{icon:XJ,label:"Account"},{icon:eee,label:"Contact"},{icon:aGe,label:"Leads"},{icon:tee,label:"Deals"},{icon:sGe,label:"Quotes"},{icon:rGe,label:"Target"},{icon:iGe,label:"Task"},{icon:oGe,label:"Meeting"},{icon:lGe,label:"Call"},{icon:dGe,label:"Audit"},{icon:cGe,label:"Territory"}];h.useEffect(()=>{const f=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=f=>{t(f.target.value),o(f.target.value.trim().length>0)},u=f=>{s&&s(f),o(!1)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[n.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[n.jsx(Kqe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),n.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:d,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(a)&&a.length>0&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:a.map((f,p)=>n.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>u(f),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:f.name}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:f.type}),f.details&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.details})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f.type==="Lead"?"bg-blue-100 text-blue-600":f.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:f.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(a)||a.length===0)&&n.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),n.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:n.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((f,p)=>n.jsxs("div",{className:"relative flex-shrink-0 group",children:[n.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":f.label,title:f.label,onClick:()=>{switch(f.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${f.label}`)}},children:n.jsx(f.icon,{size:24,className:"lg:scale-95"})}),n.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[f.label,n.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},pGe=({action:e,description:t,entity_type:a,entity_name:s,timestamp:r})=>{const i=wt(),o=u=>{if(!u)return"Unknown";const f=new Date(u),x=new Date-f,v=Math.floor(x/6e4),N=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:N<24?`${N} hour${N>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:f.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||a||"System",d=o(r);return n.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[n.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",n.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),n.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:d})]})},xGe=({logs:e,loading:t})=>{const a=wt();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/audit"),children:[n.jsx("span",{children:"See All"}),n.jsx(JJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?n.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>n.jsx(pGe,{...s},r))}):n.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},yGe=({icon:e,title:t,value:a,color:s,bgColor:r,loading:i,onClick:o})=>n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:20})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a||0})]})]}),bGe=({revenueData:e,loading:t})=>{const a=wt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=h.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const C=b.getMonth(),w=[],S=[];for(let A=0;A<=C;A++)w.push(s[A]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,d=0;console.log("Processing deals:",e.length),e.forEach((b,C)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",A=b.stage||"",k=A.toUpperCase()==="CLOSED_WON"||A==="CLOSED_WON";let _=b.amount;_&&typeof _=="object"&&_.toString?_=parseFloat(_.toString()):_=parseFloat(_)||0;const E=_>0;if(k&&(d++,console.log(`Deal ${C+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:A,close_date:w,close_date_type:typeof w,amount:_,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:E,willBeAdded:S&&E,allFields:Object.keys(b)})),S&&k&&E)try{let T=new Date(w);if(isNaN(T.getTime())){const M=String(w).split("T")[0];T=new Date(M+"T00:00:00")}if(isNaN(T.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=T.getFullYear(),R=T.getMonth()+1,z=`${M}-${String(R).padStart(2,"0")}`;l[z]||(l[z]=0),l[z]+=_,c++,console.log(` Added deal ${b.id} to month ${z}: ${_}, total: ${l[z]}`),console.log(`  - Close date: ${w} -> Parsed: ${T.toISOString()} -> Month: ${z} (Year: ${M}, Month: ${R})`)}}catch(T){console.error("Error parsing deal date:",w,T)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:E,closeDate:w,amount:_,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:d,validDealsForGraph:c,monthlyRevenue:l});const u=Object.keys(l).map(b=>parseInt(b.split("-")[0])),f=u.length>0?[...new Set(u)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const C=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[C]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${C}): ${w}`)}if(f.length>0){const b=Math.max(...f);if(b>p)for(let C=p+1;C<=b;C++)for(let w=0;w<12;w++){const S=`${C}-${String(w+1).padStart(2,"0")}`,A=l[S]||0;x.push(`${s[w]} ${C}`),v.push(A),A>0&&console.log(`Month ${s[w]} ${C} (${S}): ${A}`)}}const N=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:N,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:N}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),n.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>a("/group-manager/deals"),children:[n.jsx("span",{children:"See All"}),n.jsx(JJ,{size:14,className:"transform -rotate-45"})]})]}),n.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:n.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?n.jsx(XN,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"No revenue data available"}),n.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},vGe=({pipelineData:e,loading:t})=>{const a=wt(),s=o=>{const l=(o||"").toUpperCase(),c={PROSPECTING:{name:"Prospecting",color:"bg-blue-500"},QUALIFICATION:{name:"Qualification",color:"bg-yellow-500"},PROPOSAL:{name:"Proposal",color:"bg-orange-500"},NEGOTIATION:{name:"Negotiation",color:"bg-purple-500"},CLOSED_WON:{name:"Closed Won",color:"bg-green-500"},CLOSED_LOST:{name:"Closed Lost",color:"bg-red-500"}};if(c[l])return c[l];const d=["bg-blue-500","bg-yellow-500","bg-orange-500","bg-purple-500","bg-green-500","bg-red-500"],u=Math.abs(l.split("").reduce((f,p)=>f+p.charCodeAt(0),0))%d.length;return{name:o||"Unknown",color:d[u]}},i=(()=>{if(!e||e.length===0)return["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"].map(f=>{const p=s(f);return{stage:p.name,value:0,deals:0,color:p.color}});const o={};e.forEach(u=>{const f=u.stage||"PROSPECTING";o[f]||(o[f]={deals:0,value:0}),o[f].deals+=1,o[f].value+=parseFloat(u.amount||0)});const l=Math.max(...Object.values(o).map(u=>u.value),1),c=["PROSPECTING","QUALIFICATION","PROPOSAL","NEGOTIATION","CLOSED_WON","CLOSED_LOST"],d=[];return c.forEach(u=>{const f=s(u),p=o[u]||{deals:0,value:0};d.push({stage:f.name,value:p.value,deals:p.deals,color:f.color,percentage:l>0?p.value/l*100:0})}),d})();return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Sales Pipeline"}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:()=>a("/group-manager/deals"),children:"See All"})]}),n.jsx("div",{className:"space-y-4 flex-grow",children:i.slice(0,6).map(o=>n.jsxs("div",{className:"flex flex-col cursor-pointer hover:opacity-85 transition duration-150",onClick:()=>a("/group-manager/deals"),children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-700",children:o.stage}),n.jsx("span",{className:"font-semibold text-gray-800",children:nee(o.value)})]}),n.jsx("div",{className:"relative h-2 rounded-full bg-gray-200",children:n.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full ${o.color}`,style:{width:`${Math.min(o.percentage,100)}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[o.deals," Deals"]})]},o.stage))})]})},JA=({title:e,items:t,children:a,onSeeAll:s})=>{const r=wt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return n.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),n.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),a]})},wGe=({first_name:e,last_name:t,company_name:a,source:s,created_at:r,id:i})=>{const o=wt(),{text:l,bg:c}=mGe(s||"Website"),d=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,C=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return C<60?`${C} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},u=`${e||""} ${t||""}`.trim()||"Unknown",f=a||"Unknown Company",p=d(r);return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u}),n.jsx("p",{className:"text-xs text-gray-500",children:f})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-400",children:p}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},NGe=({name:e,amount:t,account:a,stage:s,created_at:r,id:i,previousAmount:o})=>{const l=wt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:u,bg:f}=uGe(d),p=parseFloat(t||0),x=o?p>=o?"up":"down":"up",v=x==="up"?Xqe:Zqe,N=x==="up"?"text-green-400":"text-red-400",b=a?.name||"Unknown Company";return n.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&l(`/group-manager/deals/info?id=${i}`),children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex-shrink",children:[n.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),n.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:b}),n.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${u} ${f} px-2 py-0.5 rounded-full`,children:d})]}),n.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[n.jsx("p",{className:"text-md font-bold text-gray-800",children:nee(p)}),n.jsx(v,{size:16,className:`${N} mt-1`})]})]})})},jGe=({type:e,title:t,assignedTo:a,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const d=wt(),f=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=fGe(f),{text:N,bg:b}=hGe(i||"MEDIUM"),S=(_=>{if(!_)return"No date set";const E=new Date(_),M=E-new Date,R=Math.floor(M/864e5);return R===0?`Today, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===1?`Tomorrow, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:R===-1?`Yesterday, ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),A=a||"Unassigned",k=()=>{o&&(c?f==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),d(`/group-manager/calls/info?id=${o}`)):f==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),d(`/group-manager/meetings/info?id=${o}`)):d("/group-manager/tasks"):d(f==="call"?`/group-manager/calls/info?id=${o}`:f==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return n.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[n.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:n.jsx(p,{size:20,className:`${x}`})}),n.jsxs("div",{className:"flex-grow",children:[n.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[n.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),n.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[n.jsxs("p",{className:"flex items-center",children:[n.jsx(ZJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),n.jsxs("p",{className:"flex items-center",children:[n.jsx(eee,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",A]})]})]}),n.jsx("span",{className:`inline-block text-xs font-medium ${N} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},CGe=()=>{const e=wt(),{user:t}=en(),[a,s]=h.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[r,i]=h.useState([]),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(!0),[w,S]=h.useState(null),[A,k]=h.useState(""),[_,E]=h.useState([]),[T,M]=h.useState([]),[R,z]=h.useState([]),[P,I]=h.useState(new Date),q=h.useRef(null),Q=h.useRef(null),V=h.useMemo(()=>{try{if(!A.trim())return[];const oe=A.toLowerCase().trim(),K=[];return Array.isArray(_)&&_.forEach(U=>{const ye=`${U.first_name||""} ${U.last_name||""}`.trim().toLowerCase(),pe=(U.company_name||"").toLowerCase(),Ne=(U.email||"").toLowerCase(),Se=(U.phone||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:`${U.first_name||""} ${U.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:U.company_name||"No company",route:`/group-manager/leads/${U.id}`})}),Array.isArray(T)&&T.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.account?.name||"").toLowerCase(),Ne=(U.description||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Deal",type:"Deal",details:U.account?.name||"No account",route:`/group-manager/deals/info?id=${U.id}`})}),Array.isArray(R)&&R.forEach(U=>{const ye=(U.name||"").toLowerCase(),pe=(U.email||"").toLowerCase(),Ne=(U.phone||"").toLowerCase(),Se=(U.website||"").toLowerCase();(ye.includes(oe)||pe.includes(oe)||Ne.includes(oe)||Se.includes(oe))&&K.push({id:U.id,name:U.name||"Unnamed Account",type:"Account",details:U.email||U.phone||"No contact info",route:"/group-manager/accounts"})}),K.slice(0,10)}catch(oe){return console.error("Error in search:",oe),[]}},[A,_,T,R]),X=oe=>{oe.route&&(e(oe.route),k(""))},W=h.useCallback(async()=>{C(!0),S(null);try{const[oe,K,U,ye,pe,Ne,Se]=await Promise.all([ae.get("/leads/group-manager/getLeads").catch(Z=>(console.error("Error fetching leads:",Z),{data:[]})),ae.get("/deals/group-manager/fetch-all").catch(Z=>(console.error("Error fetching deals:",Z),{data:[]})),ae.get("/accounts/group-manager/fetch-all").catch(Z=>(console.error("Error fetching accounts:",Z),{data:[]})),ae.get("/tasks/all").catch(Z=>(console.error("Error fetching tasks:",Z),{data:[]})),ae.get("/meetings/group-manager/fetch-all").catch(Z=>(console.error("Error fetching meetings:",Z),{data:[]})),ae.get("/calls/group-manager/fetch-all").catch(Z=>(console.error("Error fetching calls:",Z),{data:[]})),ae.get("/logs/read-all").catch(Z=>(console.error("Error fetching logs:",Z),{data:[]}))]),Oe=Array.isArray(oe.data)?oe.data:[],ke=Array.isArray(K.data)?K.data:[],he=Array.isArray(U.data)?U.data:[],qe=Array.isArray(ye.data)?ye.data:[],Ce=Array.isArray(pe.data)?pe.data:[],xe=Array.isArray(Ne.data)?Ne.data:[],ee=Array.isArray(Se.data)?Se.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),E(Oe),M(ke),z(he);const Ee=Oe.filter(Z=>Z.status&&!["Lost","Converted"].includes(Z.status)).length,Ae=qe.filter(Z=>!Z.dueDate||Z.status==="Completed"?!1:new Date(Z.dueDate)<new Date).length;s({activeLeads:Ee,totalDeals:ke.length,activeAccounts:he.length,overdueTasks:Ae});const Re=[...Oe].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);i(Re);const et=[...ke].sort((Z,_e)=>new Date(_e.created_at||0)-new Date(Z.created_at||0)).slice(0,5);l(et);const De=new Date,tt=[];xe.forEach(Z=>{const _e=Z.due_date||Z.call_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="MISSED"||te==="NOT_HELD"||te==="HELD"||tt.push({type:"Call",title:Z.subject||"Untitled Call",assignedTo:Z.assigned_to||(Z.call_assign_to?`${Z.call_assign_to.first_name||""} ${Z.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"call",fullData:Z})}}),Ce.forEach(Z=>{const _e=Z.dueDate||Z.start_time,te=(Z.status||"").toUpperCase();if(_e){const Ue=new Date(_e);te==="COMPLETED"||te==="CANCELLED"||te==="DONE"||tt.push({type:"Meeting",title:Z.subject||Z.activity||"Untitled Meeting",assignedTo:Z.assignedTo||(Z.meet_assign_to?`${Z.meet_assign_to.first_name||""} ${Z.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:_e,priority:(Z.priority||"MEDIUM").toUpperCase(),id:Z.id,activityType:"meeting",fullData:Z})}});const Je={HIGH:1,MEDIUM:2,LOW:3},H=tt.sort((Z,_e)=>{const te=Je[Z.priority]||3,Ue=Je[_e.priority]||3;if(te!==Ue)return te-Ue;const Ie=new Date(Z.scheduledDate||0),Ge=new Date(_e.scheduledDate||0);return Ie-Ge}).slice(0,5);d(H),f(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const be=ke.filter(Z=>(Z.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",be.length),be.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),be.forEach((Z,_e)=>{let te=Z.amount;te&&typeof te=="object"?te.toString?te=parseFloat(te.toString()):te=parseFloat(te):te=parseFloat(te)||0,console.log(`Deal ${_e+1}:`,{id:Z.id,name:Z.name,stage:Z.stage,stage_upper:(Z.stage||"").toUpperCase(),amount:Z.amount,amount_parsed:te,amount_type:typeof Z.amount,close_date:Z.close_date,close_date_type:typeof Z.close_date,close_date_value:Z.close_date?new Date(Z.close_date):null,has_close_date:!!Z.close_date,has_amount:te>0,all_keys:Object.keys(Z),full_deal:Z})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(Z=>Z.stage))),N(ke);const le=[...ee].sort((Z,_e)=>new Date(_e.timestamp||0)-new Date(Z.timestamp||0));x(le)}catch(oe){console.error("Error fetching dashboard data:",oe),S("Failed to load dashboard data. Please refresh the page.")}finally{C(!1)}},[]);h.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),W(),q.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),W(),I(new Date)},3e4),()=>{q.current&&clearInterval(q.current)}),[W]),h.useEffect(()=>{if(!t||!t.id)return;let oe=0;const K=3;let U=null;const ye=()=>{const pe=window.location.protocol==="https:"?"wss:":"ws:",Ne=window.location.hostname==="localhost"?"localhost:8000":window.location.host,Se=`${pe}//${Ne}/ws/notifications?user_id=${t.id}`;try{const Oe=new WebSocket(Se);Q.current=Oe,Oe.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),oe=0},Oe.onmessage=ke=>{try{const he=JSON.parse(ke.data);console.log(" Real-time notification received:",he),he.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(he.event)&&(console.log(" Refreshing dashboard due to:",he.event),W(),I(new Date))}catch(he){console.error("Error parsing WebSocket message:",he)}},Oe.onerror=ke=>{oe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},Oe.onclose=()=>{oe<K&&(oe++,U=setTimeout(()=>{t&&t.id&&ye()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ye(),()=>{U&&clearTimeout(U),Q.current&&(Q.current.close(),Q.current=null)}},[t,W]);const ne=[{icon:nGe,title:"Active Leads",value:a.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:tee,title:"Total Deals",value:a.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:XJ,title:"Active Account",value:a.activeAccounts,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/group-manager/accounts")},{icon:ZJ,title:"Overdue Tasks",value:a.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",b,"error:",w),n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[b&&n.jsx(Bt,{}),n.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[w&&n.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:n.jsx("p",{className:"font-medium",children:w})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 mb-8",children:[n.jsxs("div",{className:"lg:col-span-9 flex flex-col space-y-4",children:[n.jsx(gGe,{searchQuery:A,onSearchChange:k,searchResults:V,onSearchResultClick:X}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:ne.map(oe=>n.jsx(yGe,{...oe,loading:b},oe.title))})]}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx(xGe,{logs:p,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(bGe,{revenueData:v,loading:b})}),n.jsx("div",{children:n.jsx(vGe,{pipelineData:u,loading:b})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx(JA,{title:"Latest Leads",children:r.length>0?r.map((oe,K)=>n.jsx(wGe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),n.jsx(JA,{title:"Latest Deals",children:b?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):o.length>0?o.map((oe,K)=>n.jsx(NGe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),n.jsx(JA,{title:"Upcoming Activities",children:c.length>0?c.map((oe,K)=>n.jsx(jGe,{...oe},oe.id||K)):n.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},eT=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],tT={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Lr=e=>e?e.toUpperCase():"",nT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",SGe=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},_Ge=e=>{switch(Lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function AGe(){const e=wt();h.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[t,a]=h.useState(!1),[s,r]=h.useState(!1),[i,o]=h.useState(!1),[l,c]=h.useState(null),[d,u]=h.useState(null),[f,p]=h.useState(tT),[x,v]=h.useState(null),[N,b]=h.useState([]),[C,w]=h.useState(!1),[S,A]=h.useState([]),[k,_]=h.useState(null),[E,T]=h.useState([]),[M,R]=h.useState([]),[z,P]=h.useState("Filter by Status"),[I,q]=h.useState(""),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState(1),[K,U]=h.useState(10),[ye,pe]=h.useState("Overview"),[Ne,Se]=h.useState(""),[Oe,ke]=h.useState(!1),[he,qe]=h.useState({}),[Ce,xe]=h.useState(null),{comments:ee,addComment:Ee,refresh:Ae}=Ta({relatedType:"account",relatedId:x?.id});h.useEffect(()=>{x?.id&&Ae()},[x?.id,Ae]);const Re=h.useCallback(async(re=null)=>{w(!0);try{const ot=await ae.get("/accounts/admin/fetch-all"),kt=[...Array.isArray(ot.data)?ot.data:[]].sort((Kt,Me)=>{const vt=Kt?.created_at||Kt?.updated_at||0,F=Me?.created_at||Me?.updated_at||0;return new Date(F)-new Date(vt)});if(b(kt),re){const Kt=kt.find(Me=>Me.id===re);v(Kt||null)}}catch(ot){console.error(ot),b([]),ot.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch accounts. Please try again later.")}finally{w(!1)}},[v]),et=h.useCallback(async()=>{try{const re=await ae.get("/users/all");A(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),De=h.useCallback(async()=>{try{const re=await ae.get("/territories/fetch");T(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load territories (permission denied).")}},[]),tt=h.useCallback(async()=>{try{const re=await ae.get("/accounts/admin/parent-companies");R(Array.isArray(re.data)?re.data:[])}catch(re){console.error(re),re.response?.status===403&&G.warn("Unable to load parent companies (permission denied).")}},[]),Je=h.useCallback(async re=>{try{const ot=await ae.get(`/activities/accounts/${re}`);qe(ot.data&&typeof ot.data=="object"?ot.data:{})}catch(ot){console.error(ot),ot.response?.status===404&&(console.warn("No activities found for this account."),qe({}))}},[]);h.useEffect(()=>{Re(),et(),De(),tt()},[Re,et,De,tt]),h.useEffect(()=>{x&&Se(Lr(x.status)||"PROSPECT")},[x]);const H=N.length,be=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="customer").length,[N]),le=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="prospect").length,[N]),Z=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="partner").length,[N]),_e=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="active").length,[N]),te=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="inactive").length,[N]),Ue=h.useMemo(()=>N.filter(re=>re.status?.toLowerCase()==="former").length,[N]),Ie=h.useMemo(()=>[{title:"Total",value:H,icon:aa,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:be,icon:Oo,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:le,icon:Yn,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:Z,icon:nn,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:_e,icon:Oo,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:te,icon:Mo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Ue,icon:Mo,color:"text-orange-600",bgColor:"bg-orange-100"}],[H,be,le,Z,_e,te,Ue]),Ge=h.useMemo(()=>{const re=I.trim().toLowerCase(),ot=z.trim().toUpperCase();return N.filter(zt=>{const kt=[zt?.name,zt?.website,zt?.industry,zt?.territory?.name,zt?.phone_number],Kt=re===""||kt.some(vt=>vt==null?!1:vt.toString().toLowerCase().includes(re)),Me=ot==="FILTER BY STATUS"||Lr(zt.status)===ot;return Kt&&Me})},[N,I,z]),gt=Math.max(1,Math.ceil(Ge.length/K)||1);h.useEffect(()=>{oe(1)},[I,z,K]),h.useEffect(()=>{oe(re=>{const ot=Math.max(1,Math.ceil(Ge.length/K)||1);return re>ot?ot:re})},[Ge.length,K]);const ve=h.useMemo(()=>{const re=(ne-1)*K;return Ge.slice(re,re+K)},[Ge,ne,K]);Ge.length===0||(ne-1)*K+1,Math.min(ne*K,Ge.length);const Be=()=>oe(re=>Math.max(re-1,1)),nt=()=>oe(re=>Math.min(re+1,gt)),Te=re=>{v(re),pe("Overview"),Se(Lr(re?.status)||"PROSPECT")},Qe=()=>v(null),ct=re=>{re.target.id==="accountModalBackdrop"&&!X&&Qe()},ht=()=>{a(!1),r(!1),u(null),p(tT),o(!1),_(null)},je=re=>{re.target.id==="modalBackdrop"&&ht()},Ze=re=>re?new Date(re).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",ce=re=>{const{name:ot,value:zt}=re.target;p(kt=>({...kt,[ot]:zt}))},J=()=>{p(tT),r(!1),u(null),a(!0)},de=re=>{v(null),re.assigned_accs?_(re.assigned_accs):_(null),p({name:re.name||"",website:re.website||"",phone_number:re.phone_number||"",billing_address:re.billing_address||"",shipping_address:re.shipping_address||"",industry:re.industry||"",status:Lr(re.status)||"PROSPECT",territory_id:re.territory?.id?String(re.territory.id):"",assigned_to:re.assigned_accs?.id?String(re.assigned_accs.id):""}),r(!0),u(re.id),a(!0)},D=re=>{re&&V({title:"Delete Account",message:n.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",n.jsx("span",{className:"font-semibold",children:re.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:re.id,name:re.name}})},B=async()=>{if(!Q?.action){V(null);return}const{action:re}=Q,{type:ot,payload:zt,targetId:kt,name:Kt}=re;W(!0);try{if(ot==="create"){o(!0);const Me=await ae.post("/accounts/admin",zt);tt(),G.success(`Account "${Kt}" created successfully.`);const vt=x?.id||null;ht(),await Re(vt),!x&&Me.data?.id}else if(ot==="update"){if(!kt)throw new Error("Missing account identifier for update.");o(!0),await ae.put(`/accounts/admin/${kt}`,zt),G.success(`Account "${Kt}" updated successfully.`);const Me=x?.id&&x.id===kt?kt:null;ht(),await Re(Me),x?.id===kt&&v(null)}else if(ot==="delete"){if(!kt)throw new Error("Missing account identifier for deletion.");const Me=x?.id;c(kt),await ae.delete(`/accounts/admin/${kt}`),G.success(`Account "${Kt}" deleted successfully.`),await Re(Me&&Me!==kt?Me:null),Me===kt&&v(null)}}catch(Me){console.error(Me);const vt=ot==="create"?"Failed to create account. Please review the details and try again.":ot==="update"?"Failed to update account. Please review the details and try again.":"Failed to delete account. Please try again.",F=Me.response?.data?.detail||vt;G.error(F),(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null)}finally{(ot==="create"||ot==="update")&&o(!1),ot==="delete"&&c(null),W(!1),V(null)}},ie=()=>{X||V(null)},ue=async()=>{if(!x||!Ne)return;const re=Lr(Ne),ot=Lr(x.status);if(re!==ot){ke(!0);try{await ae.put(`/accounts/admin/${x.id}`,{status:re}),G.success(`Account status updated to ${nT(re)}`),b(zt=>zt.map(kt=>kt.id===x.id?{...kt,status:re}:kt)),v(null)}catch(zt){console.error(zt);const kt=zt.response?.data?.detail||"Failed to update account status. Please try again.";G.error(kt)}finally{ke(!1)}}},[se,Pe]=h.useState(!1),ge=re=>{re.preventDefault(),Pe(!0);const ot=f.name.trim();if(!ot){G.error("Account name is required.");return}if(!f.assigned_to){G.error("Assigned To is required.");return}const kt={name:ot,website:f.website?.trim()||null,phone_number:f.phone_number?.trim()||null,billing_address:f.billing_address?.trim()||null,shipping_address:f.shipping_address?.trim()||null,industry:f.industry?.trim()||null,parent_company:f.parent_company?.trim()||null,status:f.status||"PROSPECT",territory_id:f.territory_id?Number(f.territory_id):null,assigned_to:f.assigned_to?Number(f.assigned_to):null},Kt=s&&d?"update":"create";V({title:Kt==="create"?"Confirm New Account":"Confirm Update",message:Kt==="create"?n.jsxs("span",{children:["Are you sure you want to create the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}):n.jsxs("span",{children:["Save changes to the account"," ",n.jsx("span",{className:"font-semibold",children:ot}),"?"]}),confirmLabel:Kt==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Kt,payload:kt,targetId:d||null,name:ot}})},fe=[{label:"Filter by Status",value:"Filter by Status"},...eT.map(re=>({label:re.label,value:re.value}))],Fe=Q?.action?.type==="delete"?Q.action.targetId:null,Xe=x&&(l===x.id||Fe===x.id),pt=x&&l===x.id,Nt=x?SGe(x.status):"",St=x?n.jsx("div",{id:"accountModalBackdrop",onClick:ct,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:re=>re.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),n.jsx("button",{onClick:Qe,className:"text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:x.name}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Nt}`,children:nT(x.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>de(x),disabled:Q?.action?.type==="update"&&Q.action.targetId===x.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>D(x),disabled:!!Xe,children:pt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(re=>n.jsx("button",{onClick:()=>pe(re),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${ye===re?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:re},re))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[ye==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Website:"}),n.jsx("p",{children:x.website?n.jsx("a",{href:x.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:x.website}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Industry:"}),n.jsx("p",{children:x.industry||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Parent Company:"}),n.jsx("p",{children:x.parent_company||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:x.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:x.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Billing Address:"}),n.jsx("p",{children:x.billing_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),n.jsx("p",{children:x.shipping_address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:x.assigned_accs?`${x.assigned_accs.first_name} ${x.assigned_accs.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:x.acc_creator?`${x.acc_creator.first_name} ${x.acc_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Ze(x.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Ze(x.updated_at)||"N/A"})]})]}),n.jsx(Aa,{comments:ee,onAddComment:Ee})]}),ye==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),ye==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[he.tasks&&he.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",he.tasks.length,")"]})]}),Ce==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.tasks.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||"No description"}),re.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",re.assigned_to.first_name," ",re.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.due_date||re.created_at)})]},`task-${ot}`))})]}),he.meetings&&he.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",he.meetings.length,")"]})]}),Ce==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.meetings.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.description||re.location||"No description"}),re.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",re.host.first_name," ",re.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.start_time||re.created_at)})]},`meeting-${ot}`))})]}),he.calls&&he.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",he.calls.length,")"]})]}),Ce==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.calls.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:re.subject||re.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:re.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.call_time||re.created_at)})]},`call-${ot}`))})]}),he.contacts&&he.contacts.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"text-teal-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",he.contacts.length,")"]})]}),Ce==="contacts"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="contacts"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.contacts.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-teal-600 mt-1",children:n.jsx(nn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.first_name?`${re.first_name} `:"",re.last_name]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.title||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.created_at)})]},`contact-${ot}`))})]}),he.deals&&he.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",he.deals.length,")"]})]}),Ce==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.deals.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[re.deal_id?re.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",re.name||re.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:re.stage||re.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.close_date||re.created_at)})]},`deal-${ot}`))})]}),he.quotes&&he.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>xe(Ce==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",he.quotes.length,")"]})]}),Ce==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),Ce==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:he.quotes.map((re,ot)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:re.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(re.quote_id?re.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:re.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ze(re.presented_date)||""})]},`quote-${ot}`))})]}),(!he||(!he.tasks||he.tasks.length===0)&&(!he.meetings||he.meetings.length===0)&&(!he.calls||he.calls.length===0)&&(!he.quotes||he.quotes.length===0)&&(!he.deals||he.deals.length===0)&&(!he.contacts||he.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assigned_to:x.assigned_accs?.id?String(x.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${x.name}`,relatedType1:"Account",relatedTo1:String(x.id),relatedType2:null,relatedTo2:null,assignedTo:x.assigned_accs?.id?String(x.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Ne||Lr(x?.status)||"PROSPECT",onChange:re=>Se(re.target.value),children:eT.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))}),n.jsx("button",{onClick:ue,disabled:Oe||!Ne||Lr(Ne)===Lr(x?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Ne||Lr(Ne)===Lr(x?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Ht=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[C&&n.jsx(Bt,{message:"Loading accounts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{J(),Pe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Account"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ie.map(re=>n.jsx(TGe,{...re},re.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search accounts",value:I,onChange:re=>q(re.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:z,onChange:re=>P(re.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:fe.map(re=>n.jsx("option",{value:re.value,children:re.label},re.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Industry"}),n.jsx("th",{className:"py-3 px-4",children:"Territory"}),n.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),n.jsx("tbody",{children:C?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"Loading accounts..."})}):Ge.length>0?ve.map(re=>n.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{Te(re),Je(re.id)},children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:re.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:re.website||"--"})]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${_Ge(re.status)}`,children:nT(re.status)})}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.industry||"--"}),n.jsx("td",{className:"py-3 px-4 text-sm",children:re.territory?.name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(Lt,{className:"text-gray-500"}),n.jsx("span",{children:re.phone_number||"--"})]})})]},re.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:5,children:"No accounts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Ge.length,pageSize:K,currentPage:ne,onPrev:Be,onNext:nt,onPageSizeChange:U,label:"accounts"})]}),on=t?n.jsx("div",{id:"modalBackdrop",onClick:je,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:re=>re.stopPropagation(),children:[n.jsx("button",{onClick:()=>{ht(),Pe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:i||X,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Account":"Add New Account"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ge,noValidate:!0,children:[n.jsx("div",{className:"md:col-span-2",children:n.jsx(ef,{label:"Name",name:"name",value:f.name,onChange:ce,placeholder:"Company name",required:!0,isSubmitted:se})}),n.jsx(zB,{label:"Parent Company",value:f.parent_company,onChange:re=>{p(ot=>({...ot,parent_company:re}))},items:M.map(re=>({id:re,name:re})),getLabel:re=>re?.name||"",placeholder:"Select parent company...",disabled:i}),n.jsx(ef,{label:"Website",name:"website",value:f.website,onChange:ce,placeholder:"https://example.com",disabled:i}),n.jsx(ef,{label:"Phone Number",name:"phone_number",value:f.phone_number,onChange:ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:i}),n.jsx(ef,{label:"Industry",name:"industry",value:f.industry,onChange:ce,placeholder:"Industry",disabled:i}),n.jsx(ef,{label:"Billing Address",name:"billing_address",value:f.billing_address,onChange:ce,placeholder:"Billing address",disabled:i}),n.jsx(ef,{label:"Shipping Address",name:"shipping_address",value:f.shipping_address,onChange:ce,placeholder:"Shipping address",disabled:i}),n.jsx(RB,{label:"Status",name:"status",value:f.status,onChange:ce,options:[{value:"",label:"Select status"},...eT],required:!0,disabled:i}),n.jsx(zB,{label:"Assigned To",value:f.assigned_to,onChange:re=>{const ot=S.find(kt=>String(kt.id)===String(re));_(ot);let zt=null;ot&&ot.assigned_territory&&ot.assigned_territory.length===1&&(zt=ot.assigned_territory[0].id),p(kt=>({...kt,assigned_to:re,territory_id:zt}))},items:S||[],getLabel:re=>`${re?.first_name??""} ${re?.last_name??""} (${re?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:se,disabled:i||S.length===0}),n.jsx(RB,{label:"Territory",name:"territory_id",value:f.territory_id||"",onChange:ce,options:[{value:"",label:k?k.assigned_territory&&k.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...k&&k.assigned_territory&&k.assigned_territory.map(re=>({value:String(re.id),label:re.name}))||[]],disabled:i||!k||!k.assigned_territory||k.assigned_territory.length===0}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{ht(),Pe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i||X,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i||X,children:i?"Saving...":s?"Update Account":"Save Account"})]})]})]})}):null,cn=Q?n.jsx(kGe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:B,onCancel:ie,loading:X}):null;return n.jsxs(n.Fragment,{children:[Ht,St,on,cn]})}function TGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function ef({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function RB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>n.jsx("option",{value:l.value,children:l.label},l.value))})]})}function zB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1,allowFreeText:u=!1}){const f=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(EGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:f,allowFreeText:u})]})}function EGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(C=>String(C.id)===String(t)),N=v?s(v):t,b=h.useMemo(()=>{const C=f.trim().toLowerCase();return(C?e.filter(S=>(s(S)||"").toLowerCase().includes(C)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const C=w=>{x.current&&!x.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:C=>{p(C.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&f.trim()&&!b.some(C=>s(C).toLowerCase()===f.trim().toLowerCase())&&n.jsxs("button",{type:"button",onClick:()=>{a(f.trim()),u(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',f.trim(),'" as new parent company']}),b.length>0?b.map(C=>{const w=String(C.id),S=s(C),A=String(t)===w;return n.jsx("button",{type:"button",onClick:()=>{a(w),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${A?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!f.trim()?n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function kGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const aT={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},bl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),fo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function LGe(){const e=wt(),t=Zt();h.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState([]),[c,d]=h.useState([]),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(!1),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(aT),[R,z]=h.useState(""),[P,I]=h.useState("Filter by Accounts"),[q,Q]=h.useState(null),[V,X]=h.useState("Overview"),[W,ne]=h.useState(1),[oe,K]=h.useState(10),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null),[Se,Oe]=h.useState(null),{comments:ke,addComment:he,refresh:qe}=Ta({relatedType:"contact",relatedId:u?.id});h.useEffect(()=>{u?.id&&qe()},[u?.id,qe]),h.useEffect(()=>{const D=t.state?.contactID;D&&(Oe(D),e(t.pathname,{replace:!0,state:{}}))},[t,e]),h.useEffect(()=>{if(Se&&a.length>0&&!r){const D=a.find(B=>B.id===Se);D?f(D):G.error("Contact not found."),Oe(null)}},[Se,a,r]);const Ce=h.useCallback(async(D=null)=>{i(!0);try{const B=await ae.get("/contacts/admin/fetch-all"),ue=[...Array.isArray(B.data)?B.data:[]].sort((se,Pe)=>{const ge=se?.created_at||se?.updated_at||0,fe=Pe?.created_at||Pe?.updated_at||0;return new Date(fe)-new Date(ge)});if(s(ue),D){const se=ue.find(Pe=>Pe.id===D);f(se||null)}}catch(B){console.error(B),s([]),B.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[f]),xe=h.useCallback(async()=>{try{const D=await ae.get("/accounts/admin/fetch-all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>(ue?.name||"").localeCompare(se?.name||""));l(ie)}catch(D){console.error(D),l([]),D.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),ee=h.useCallback(async()=>{try{const D=await ae.get("/users/all"),ie=[...Array.isArray(D.data)?D.data:[]].sort((ue,se)=>bl(ue).localeCompare(bl(se)));d(ie)}catch(D){console.error(D),d([]),D.response?.status===403&&G.warn("Unable to load users for assignment (permission denied).")}},[]),Ee=h.useCallback(async D=>{try{const B=await ae.get(`/activities/contact/${D}`);ye(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]);h.useEffect(()=>{Ce(),xe(),ee()},[Ce,xe,ee]);const Ae=h.useMemo(()=>{const D=new Map;o.forEach(ie=>{ie?.id&&ie?.name&&D.set(String(ie.id),ie.name)}),a.forEach(ie=>{ie?.account_id&&ie?.account?.name&&D.set(String(ie.account_id),ie.account.name)});const B=Array.from(D.entries()).sort((ie,ue)=>ie[1].localeCompare(ue[1])).map(([ie,ue])=>({value:ie,label:ue}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,a]),Re=h.useMemo(()=>{const D=R.trim().toLowerCase(),B=P.trim();return a.filter(ie=>{const ue=[ie?.first_name,ie?.last_name,ie?.email,ie?.title,ie?.department,ie?.account?.name,ie?.account?.status,ie?.work_phone,ie?.mobile_phone_1,ie?.mobile_phone_2,ie?.assigned_contact?.first_name,ie?.assigned_contact?.last_name,ie?.contact_creator?.first_name,ie?.contact_creator?.last_name,ie?.notes,fo(ie?.created_at),fo(ie?.updated_at)],se=D===""||ue.some(ge=>ge==null?!1:ge.toString().toLowerCase().includes(D)),Pe=B==="Filter by Accounts"||String(ie.account_id)===B;return se&&Pe})},[a,R,P]),et=Math.max(1,Math.ceil(Re.length/oe)||1);h.useEffect(()=>{ne(1)},[R,P,oe]),h.useEffect(()=>{ne(D=>{const B=Math.max(1,Math.ceil(Re.length/oe)||1);return D>B?B:D})},[Re.length,oe]);const De=h.useMemo(()=>{const D=(W-1)*oe;return Re.slice(D,D+oe)},[Re,W,oe]),tt=()=>ne(D=>Math.max(D-1,1)),Je=()=>ne(D=>Math.min(D+1,et)),H=h.useMemo(()=>{if(!v||!_)return o;const D=a.find(ie=>ie.id===_);return!D||!D.account||o.some(ie=>ie.id===D.account.id)?o:[...o,D.account]},[o,v,_,a]),be=h.useCallback(()=>{x(!1),N(!1),E(null),M(aT),C(!1),Ge(!1)},[]),le=D=>{D.target.id==="modalBackdrop"&&!b&&!A&&be()},Z=D=>{const{name:B,value:ie}=D.target;M(ue=>({...ue,[B]:ie}))},_e=()=>{M(aT),N(!1),E(null),x(!0)},te=async D=>{if(!D)return;const B=await ae.get(`/accounts/get/${D.account_id}`);M({first_name:D.first_name||"",last_name:D.last_name||"",account_id:B.data.id?B.data.id:"",title:D.title||"",department:D.department||"",email:D.email||"",work_phone:D.work_phone||"",mobile_phone_1:D.mobile_phone_1||"",mobile_phone_2:D.mobile_phone_2||"",notes:D.notes||"",assigned_to:D.assigned_to?String(D.assigned_to):""}),N(!0),E(D.id),x(!0),f(null)},Ue=D=>{if(!D)return;const B=bl(D)||"this contact";S({title:"Delete Contact",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:B}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:D.id,name:B}})},[Ie,Ge]=h.useState(!1),gt=D=>{D.preventDefault(),Ge(!0);const B=T.first_name.trim(),ie=T.last_name.trim();if(!B||!ie){G.error("First name and last name are required.");return}if(!T.account_id){G.error("Account is required.");return}if(!T.assigned_to){G.error("Assigned To is required.");return}const se=T.email?.trim();if(!se){G.error("Email is required.");return}if(!se.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(se)){G.error("Please enter a valid email address.");return}const ge={first_name:B,last_name:ie,account_id:Number(T.account_id),title:T.title?.trim()||null,department:T.department?.trim()||null,email:T.email?.trim().toLowerCase()||null,work_phone:T.work_phone?.trim()||null,mobile_phone_1:T.mobile_phone_1?.trim()||null,mobile_phone_2:T.mobile_phone_2?.trim()||null,notes:T.notes?.trim()||null,assigned_to:T.assigned_to?Number(T.assigned_to):null},fe=v&&_?"update":"create",Fe=`${B} ${ie}`.trim();S({title:fe==="create"?"Confirm New Contact":"Confirm Update",message:fe==="create"?n.jsxs("span",{children:["Are you sure you want to add"," ",n.jsx("span",{className:"font-semibold",children:Fe})," to your contacts?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:Fe}),"?"]}),confirmLabel:fe==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:fe,payload:ge,targetId:_||null,name:Fe}})},ve=async()=>{if(!w?.action){S(null);return}const{action:D}=w,{type:B,payload:ie,targetId:ue,name:se}=D;k(!0);try{if(B==="create"){C(!0),await ae.post("/contacts/admin",ie),G.success(`Contact "${se}" created successfully.`);const Pe=u?.id||null;be(),await Ce(Pe)}else if(B==="update"){if(!ue)throw new Error("Missing contact identifier for update.");C(!0),await ae.put(`/contacts/admin/${ue}`,ie),G.success(`Contact "${se}" updated successfully.`);const Pe=u?.id&&u.id===ue?ue:u?.id||null;be(),await Ce(Pe),u?.id===ue&&f(null)}else if(B==="delete"){if(!ue)throw new Error("Missing contact identifier for deletion.");const Pe=u?.id;Q(ue),await ae.delete(`/contacts/admin/${ue}`),G.success(`Contact "${se}" deleted successfully.`),await Ce(Pe&&Pe!==ue?Pe:null),Pe===ue&&f(null)}}catch(Pe){console.error(Pe);const ge=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":"Failed to delete contact. Please try again.",fe=Pe.response?.data?.detail||ge;G.error(fe)}finally{(B==="create"||B==="update")&&C(!1),B==="delete"&&Q(null),k(!1),S(null)}},Be=()=>{A||S(null)},nt=D=>{f(D),X("Overview")},Te=()=>f(null),Qe=D=>{D.target.id==="contactModalBackdrop"&&!A&&Te()},ct=w?.action?.type==="delete"?w.action.targetId:null,ht=u&&(q===u.id||ct===u.id),je=u&&q===u.id,Ze=u?n.jsx("div",{id:"contactModalBackdrop",onClick:Qe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:D=>D.stopPropagation(),children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),n.jsx("button",{onClick:Te,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:n.jsx(Kn,{size:25})})]}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:bl(u)||"Unnamed contact"})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>te(u),disabled:A||w?.action?.type==="update"&&w.action.targetId===u.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ue(u),disabled:!!ht,children:je?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:n.jsx("p",{className:"text-sm text-gray-500",children:u.account?.name||"No associated account"})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(D=>n.jsx("button",{onClick:()=>X(D),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${V===D?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:D},D))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[V==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact Name:"}),n.jsx("p",{children:bl(u)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Title:"}),n.jsx("p",{children:u.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email?n.jsx("a",{href:`mailto:${u.email}`,className:"text-blue-600 hover:underline break-all",children:u.email}):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:u.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:u.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:u.assigned_contact?`${u.assigned_contact.first_name} ${u.assigned_contact.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:u.contact_creator?`${u.contact_creator.first_name} ${u.contact_creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:fo(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:fo(u.updated_at)||"N/A"})]})]})}),V==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]}),n.jsx(Aa,{comments:ke,onAddComment:he})]}),V==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[U.tasks&&U.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",U.tasks.length,")"]})]}),pe==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.tasks.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||"No description"}),D.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",D.assigned_to.first_name," ",D.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.due_date||D.created_at)})]},`task-${B}`))})]}),U.meetings&&U.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",U.meetings.length,")"]})]}),pe==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.meetings.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.description||D.location||"No description"}),D.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",D.host.first_name," ",D.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.start_time||D.created_at)})]},`meeting-${B}`))})]}),U.calls&&U.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",U.calls.length,")"]})]}),pe==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.calls.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:D.subject||D.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:D.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.call_time||D.created_at)})]},`call-${B}`))})]}),U.deals&&U.deals.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tn,{className:"text-indigo-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",U.deals.length,")"]})]}),pe==="deals"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="deals"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.deals.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-indigo-600 mt-1",children:n.jsx(tn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[D.deal_id?D.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",D.name||D.title||"Deal"]}),n.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:D.stage||D.description||"No description"})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.close_date||D.created_at)})]},`deal-${B}`))})]}),U.quotes&&U.quotes.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>Ne(pe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"text-orange-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",U.quotes.length,")"]})]}),pe==="quotes"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),pe==="quotes"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:U.quotes.map((D,B)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:D.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-orange-600 mt-1",children:n.jsx(hn,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(D.quote_id?D.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:D.status||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:fo(D.presented_date)||""})]},`quote-${B}`))})]}),(!U||(!U.tasks||U.tasks.length===0)&&(!U.meetings||U.meetings.length===0)&&(!U.calls||U.calls.length===0)&&(!U.quotes||U.quotes.length===0)&&(!U.deals||U.deals.length===0)&&(!U.contacts||U.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsx("div",{className:"flex flex-col gap-4",children:n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assigned_to:u?.assigned_contact?.id?String(u.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const D=encodeURIComponent(u.email),B=encodeURIComponent(""),ie=encodeURIComponent(""),ue=`mailto:${D}?subject=${B}&body=${ie}`;window.location.href=ue},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${bl(u)||""}`.trim(),relatedType1:"Account",relatedTo1:u?.account_id?String(u.account_id):u?.account?.id?String(u.account.id):"",relatedType2:"Contact",relatedTo2:u?.id?String(u.id):"",assignedTo:u?.assigned_contact?.id?String(u.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,ce=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&n.jsx(Bt,{message:"Loading contacts..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(aa,{className:"mr-2 text-blue-600"})," Contacts Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{_e(),Ge(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Contact"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search contacts",value:R,onChange:D=>z(D.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:P,onChange:D=>I(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ae.map(D=>n.jsx("option",{value:D.value,children:D.label},D.value??D.label))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),n.jsx("th",{className:"py-3 px-4",children:"Department"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Created"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"Loading contacts..."})}):Re.length>0?De.map(D=>{const B=[{Icon:na,value:D.email,key:"email"},{Icon:Lt,value:D.work_phone,key:"work_phone"},{Icon:id,value:D.mobile_phone_1,key:"mobile_phone_1"},{Icon:id,value:D.mobile_phone_2,key:"mobile_phone_2"}].filter(ie=>!!ie.value);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>{nt(D),Ee(D.id)},children:[n.jsxs("td",{className:"py-3 px-4 align-top",children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:bl(D)||"--"}),n.jsx("div",{className:"text-xs text-gray-500",children:D.title||"No title"})]}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[n.jsx(Mx,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"break-words",children:D.account?.name||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:B.length>0?n.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:ie,value:ue,key:se})=>{const Pe=bt.createElement(ie,{className:"text-gray-500 flex-shrink-0"});return n.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[Pe,n.jsx("span",{children:ue})]},se)})}):n.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[n.jsx(tn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.department||"--"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[n.jsx(nn,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{children:D.assigned_contact?`${D.assigned_contact.first_name} ${D.assigned_contact.last_name}`:"Unassigned"})]})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[n.jsx(Et,{className:"text-gray-500 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:fo(D.created_at)||"--"})]})})]},D.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:6,children:"No contacts found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:oe,currentPage:W,onPrev:tt,onNext:Je,onPageSizeChange:K,label:"contacts"})]}),J=p?n.jsx("div",{id:"modalBackdrop",onClick:le,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:D=>D.stopPropagation(),children:[n.jsx("button",{onClick:()=>{be(),Ge(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||A,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:gt,noValidate:!0,children:[n.jsx(Uc,{label:"First Name",name:"first_name",value:T.first_name,onChange:Z,placeholder:"First name",required:!0,isSubmitted:Ie}),n.jsx(Uc,{label:"Last Name",name:"last_name",value:T.last_name,onChange:Z,placeholder:"Last name",required:!0,isSubmitted:Ie}),n.jsx(UB,{label:"Account",value:T.account_id,onChange:D=>M(B=>({...B,account_id:D})),items:v?H:o||[],getLabel:D=>D?.name??"",placeholder:"Search account...",disabled:b||(v?H.length===0:o.length===0),required:!0,isSubmitted:Ie}),n.jsx(UB,{label:"Assigned To",value:T.assigned_to,onChange:D=>M(B=>({...B,assigned_to:D})),items:c||[],getLabel:D=>`${D?.first_name??""} ${D?.last_name??""} (${D?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:b||c.length===0}),n.jsx(Uc,{label:"Title",name:"title",value:T.title,onChange:Z,placeholder:"Job title",disabled:b}),n.jsx(Uc,{label:"Department",name:"department",value:T.department,onChange:Z,placeholder:"Department",disabled:b}),n.jsx(Uc,{label:"Email",name:"email",type:"email",value:T.email,onChange:Z,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),n.jsx(Uc,{label:"Work Phone",name:"work_phone",value:T.work_phone,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(Uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Z,placeholder:"09xx xxx xxxx",disabled:b}),n.jsx(DGe,{label:"Notes",name:"notes",value:T.notes,onChange:Z,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{be(),Ge(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||A,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||A,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,de=w?n.jsx(OGe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:ve,onCancel:Be,loading:A}):null;return n.jsxs(n.Fragment,{children:[ce,Ze,J,de]})}function Uc({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&!a?.trim();return n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${d}
        `})]})}function UB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(PGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function PGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function DGe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function OGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const sT=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function aee({lead:e,onBack:t,fetchLeads:a,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=wt(),{leadID:c}=Bo(),[d,u]=h.useState(e||null),[f,p]=h.useState("Overview"),[x,v]=h.useState(""),N=d?.status?.toUpperCase()==="QUALIFIED",[b,C]=h.useState(null),[w,S]=h.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[A,k]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[_,E]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),T=async()=>{try{if(e){u(e),v(e.status||"New");return}if(!c)return;const I=await ae.get(`/leads/get/${c}`);u(I.data),v(I.data.status||"New"),S({name:I.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:I.data.territory?.id||null,assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),k({last_name:I.data.last_name||"",first_name:I.data.first_name||"",account_id:null,title:I.data.title||"",department:I.data.department||"",email:I.data.email||"",work_phone:I.data.work_phone||"",mobile_phone_1:I.data.mobile_phone_1||"",mobile_phone_2:I.data.mobile_phone_2||"",notes:"",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null}),E({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:I.data.assigned_to?.id||null,created_by:I.data.creator?.id||null})}catch(I){console.error(I)}};h.useEffect(()=>{e?(u(e),v(e.status||"New")):c&&T()},[c,e]);const M=async()=>{try{if(x==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){G.error("Lead must be Qualified before it can be converted.");return}const I=await ae.put(`/leads/${d.id}/update/status`,{status:x});G.success("Lead status updated successfully");const q={...d,status:I.data.status};u(q),i&&i(q),a&&a(),t&&t()}catch(I){console.error(I),G.error("Failed to update lead status")}},R=async I=>{const q={...w,assigned_to:I.assigned_to?.id,billing_address:I.address,shipping_address:I.address,created_by:I.creator?.id,industry:null,name:I.company_name,phone_number:I.work_phone,status:"Prospect",territory_id:I.territory?.id,website:""};console.log("Account data: ",q),console.log("Contact data: ",A),console.log("Deal data: ",_),console.log("Lead data: ",I);try{const V=(await ae.post("/accounts/convertedLead",q)).data.id,X={...A,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,department:I.department,email:I.email,first_name:I.first_name,last_name:I.last_name,mobile_phone_1:I.mobile_phone_1,mobile_phone_2:I.mobile_phone_2,notes:I.notes,title:I.title,work_phone:I.work_phone},ne=(await ae.post("/contacts/convertedLead",X)).data.id,oe=()=>{switch(_.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},K=_.amount&&_.amount!==""?parseFloat(_.amount):0,U={..._,account_id:V,assigned_to:I.assigned_to?.id,created_by:I.creator?.id,primary_contact_id:ne,probability:oe(),stage:"Prospecting"},ye=await ae.post("/deals/convertedLead",U),pe=await ae.put(`/leads/convert/${I.id}`);i&&i(null),a(),G.success("Lead converted successfully!"),t()}catch(Q){console.error("Error during conversion:",Q);const V=Q.response?.data?.detail||Q.message||"Failed to convert lead. Please try again.";G.error(V)}},z=I=>{switch((I||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},P=I=>I.toString().toLowerCase().replace(/\b\w/g,q=>q.toUpperCase());return d?n.jsx(n.Fragment,{children:n.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),n.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z(d.status)}`,children:P(d.status||"New")}),n.jsx("div",{className:"flex flex-col",children:n.jsx("button",{onClick:()=>R(d),disabled:!N,title:N?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${N?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-4 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>n.jsx("button",{onClick:()=>p(I),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${f===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[f==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Name:"}),n.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:d.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Job Title:"}),n.jsx("p",{children:d.title||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Department:"}),n.jsx("p",{children:d.department||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:d.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Territory:"}),n.jsx("p",{children:d.territory?.name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Work Phone:"}),n.jsx("p",{children:d.work_phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),n.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),n.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Source:"}),n.jsx("p",{children:d.source||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Address:"}),n.jsx("p",{children:d.address||"N/A"})]})]})}),f==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),f==="Activities"&&n.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),n.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qt,{className:"text-blue-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="tasks"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(Qt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:sT(I.due_date||I.created_at)})]},`task-${q}`))})]}),o.meetings&&o.meetings.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Et,{className:"text-green-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="meetings"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-green-600 mt-1",children:n.jsx(Et,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&n.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:sT(I.start_time||I.created_at)})]},`meeting-${q}`))})]}),o.calls&&o.calls.length>0&&n.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[n.jsxs("button",{type:"button",onClick:()=>C(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"text-purple-600"}),n.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?n.jsx(Tt,{className:"text-gray-500"}):n.jsx(Dt,{className:"text-gray-500"})]}),b==="calls"&&n.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((I,q)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:I.id}}),children:[n.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-purple-600 mt-1",children:n.jsx(Lt,{size:20})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),n.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),n.jsx("p",{className:"text-xs text-gray-500 break-words",children:sT(I.call_time||I.created_at)})]},`call-${q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&n.jsx("div",{className:"text-center py-8 text-gray-500",children:n.jsx("p",{children:"No related activities found for this account."})})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const I=encodeURIComponent(d.email),q=encodeURIComponent(""),Q=encodeURIComponent(""),V=`mailto:${I}?subject=${q}&body=${Q}`;window.location.href=V},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:I=>v(I.target.value),children:[n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),n.jsx("button",{onClick:M,disabled:x===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const MGe=Vf.all(),rT=MGe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),IGe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),$Ge=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},iT={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function RGe(){const e=wt(),{leadID:t}=Bo();zs();const[a,s]=h.useState(null),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(!1),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(iT),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState(!1),[W,ne]=h.useState({});h.useRef(null);const[oe,K]=h.useState(!1),[U,ye]=h.useState(null),[pe,Ne]=h.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Se,Oe]=h.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,he]=h.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});h.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const qe=async()=>{try{const je=await ae.get("/leads/getUsers");l(je.data)}catch(je){console.error(`Error fetching users: ${je}`)}},Ce=async()=>{x(!0);try{const je=await ae.get("/leads/admin/getLeads");f(je.data),console.log(je.data)}catch(je){console.error(`Error fetching leads: ${je}`)}finally{x(!1)}};h.useEffect(()=>{qe(),Ce()},[]),h.useEffect(()=>{if(t&&u.length>0&&!r&&!T){const je=u.find(Ze=>Ze.id===Number(t));je&&s(je)}else!t&&!a&&s(null)},[t,u,r,T]),h.useEffect(()=>{if(U){const Ze=(de=>{if(!de)return{code:"+63",number:""};const D=de.match(/^(\+\d+)\s(.+)$/);if(D)return{code:D[1],number:D[2]};if(de.startsWith("+")){const B=de.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:de.substring(B[1].length).trim()}}return{code:"+63",number:de}})(U.work_phone),ce=[];U.work_phone&&ce.push(`Work: ${U.work_phone}`),U.mobile_phone_1&&ce.push(`Mobile 1: ${U.mobile_phone_1}`),U.mobile_phone_2&&ce.push(`Mobile 2: ${U.mobile_phone_2}`);const J=ce.length>0?ce.join(" | "):"";Ne({name:U.company_name||"",website:"",countryCode:Ze.code,phone_number:Ze.number,combinedPhoneNumbers:J,billing_address:U.address||"",shipping_address:U.address||"",industry:"",status:"Prospect",territory_id:U.assigned_to?.territory?.id||null,assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),Oe({last_name:U.last_name||"",first_name:U.first_name||"",account_id:null,title:U.title||"",department:U.department||"",email:U.email||"",work_phone:U.work_phone||"",mobile_phone_1:U.mobile_phone_1||"",mobile_phone_2:U.mobile_phone_2||"",notes:U.notes||"",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null}),he({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:U.assigned_to?.id||null,created_by:U.creator?.id||null})}},[U]);const xe=je=>N(je.target.value),ee=h.useMemo(()=>{const je=v.trim().toLowerCase(),Ze=b.trim().toUpperCase();return u.filter(ce=>{const J=[ce?.first_name,ce?.last_name,ce?.company_name,ce?.title,ce?.email,ce?.work_phone,ce?.assigned_to?`${ce.assigned_to.first_name} ${ce.assigned_to.last_name}`:""],de=je===""||J.some(B=>B==null||B===""?!1:B.toString().toLowerCase().includes(je));let D=!1;return Ze==="FILTER BY STATUS"?D=(ce.status?ce.status.toUpperCase():"")!=="CONVERTED":D=(ce.status?ce.status.toUpperCase():"")===Ze,de&&D})},[u,v,b]),Ee=Math.max(1,Math.ceil(ee.length/A)||1);h.useEffect(()=>{S(1)},[v,b,A]),h.useEffect(()=>{S(je=>{const Ze=Math.max(1,Math.ceil(ee.length/A)||1);return je>Ze?Ze:je})},[ee.length,A]);const Ae=h.useMemo(()=>{const je=(w-1)*A;return ee.slice(je,je+A)},[ee,w,A]),Re=()=>S(je=>Math.max(je-1,1)),et=()=>S(je=>Math.min(je+1,Ee)),De=h.useCallback(async je=>{try{const Ze=await ae.get(`/activities/lead/${je}`);ne(Ze.data&&typeof Ze.data=="object"?Ze.data:{})}catch(Ze){console.error(Ze),Ze.response?.status===404&&(console.warn("No activities found for this account."),ne({}))}},[]),tt=je=>{s(je),De(je.id)},Je=()=>{s(null),t&&e("/admin/leads",{replace:!0})},H=()=>{i(!1),E(iT),M(!1),z(null),I(!1),d(null),sessionStorage.removeItem("editLeadData")},be=je=>{je.target.id==="modalBackdrop"&&H()},le=()=>{E(iT),M(!1),z(null),d(null),i(!0)},Z=je=>{if(!je){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",je),console.log("Current state - leadID:",t,"selectedLead:",a,"showModal:",r);const Ze=B=>{if(!B)return{code:"+63",number:""};const ie=B.match(/^(\+\d+)\s(.+)$/);return ie?{code:ie[1],number:ie[2]}:{code:"+63",number:B}},ce=Ze(je.work_phone),J=Ze(je.mobile_phone_1),de=Ze(je.mobile_phone_2);let D="";if(je.assigned_to){D=String(je.assigned_to.id);const B=o?.find(ie=>ie.id===je.assigned_to.id);d(B)}E({first_name:je.first_name||"",last_name:je.last_name||"",company_name:je.company_name||"",title:je.title||"",department:je.department||"",email:je.email||"",work_ccode:ce.code,work_phone:ce.number,m1_ccode:J.code,mobile_phone_1:J.number,m2_ccode:de.code,mobile_phone_2:de.number,address:je.address||"",notes:je.notes||"",source:je.source||"",territory_id:je.territory?.id||null,lead_owner:D,status:je.status||"New"}),M(!0),z(je.id),a?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},_e=je=>{if(!je){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",je);const Ze=`${je.first_name} ${je.last_name}`||"this lead";Q({title:"Delete Lead",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:Ze}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:je.id,name:Ze}})},te=je=>{const{name:Ze,value:ce}=je.target;if(E(J=>({...J,[Ze]:ce})),Ze==="lead_owner"){const J=o.find(de=>de.id===parseInt(ce));d(J)}},[Ue,Ie]=h.useState(!1),Ge=je=>{if(je.preventDefault(),Ie(!0),!_.last_name?.trim()){G.error("Last name is required.");return}if(!_.company_name?.trim()){G.error("Company is required.");return}if(!_.title?.trim()){G.error("Job title is required.");return}if(!_.email?.trim()){G.error("Email is required.");return}if(!_.email.includes("@")){G.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_.email)){G.error("Please enter a valid email address with a dot in the domain.");return}if(!_.lead_owner){G.error("Please assign a lead owner.");return}const ce={..._,territory_id:_.territory_id?parseInt(_.territory_id):null,lead_owner:parseInt(_.lead_owner),work_phone:`${_.work_ccode} ${_.work_phone}`,mobile_phone_1:`${_.m1_ccode} ${_.mobile_phone_1}`,mobile_phone_2:`${_.m2_ccode} ${_.mobile_phone_2}`},J=T&&R?"update":"create",de=`${_.first_name} ${_.last_name}`;Q({title:J==="create"?"Confirm New Lead":"Confirm Update",message:J==="create"?n.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:de}),"?"]}),confirmLabel:J==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:J,payload:ce,targetId:R||null,name:de}})},gt=async()=>{if(!q?.action){Q(null);return}const{action:je}=q,{type:Ze,payload:ce,targetId:J,name:de,lead:D}=je;console.log(ce),X(!0);try{if(Ze==="create")I(!0),await ae.post("/leads/create",ce),G.success(`Lead "${de}" created successfully.`),H(),await Ce();else if(Ze==="update"){if(!J)throw new Error("Missing lead identifier for update.");I(!0);const B=await ae.put(`/leads/${J}`,ce);G.success(`Lead "${de}" updated successfully.`),a&&a.id===J&&s(null),H(),await Ce()}else if(Ze==="delete"){if(!J)throw new Error("Missing lead identifier for deletion.");await ae.delete(`/leads/${J}`),G.success(`Lead "${de}" deleted successfully.`),a?.id===J&&s(null),await Ce()}}catch(B){console.error(B);const ie=Ze==="create"?"Failed to create lead. Please review the details and try again.":Ze==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",ue=B.response?.data?.detail||ie;G.error(ue)}finally{(Ze==="create"||Ze==="update")&&I(!1),Ze!=="edit"&&(X(!1),Q(null))}},ve=()=>{V||Q(null)},Be=u.filter(je=>je.status==="New").length,nt=u.filter(je=>je.status==="Contacted").length,Te=u.filter(je=>je.status==="Qualified").length,Qe=u.filter(je=>je.status==="Converted").length,ct=u.filter(je=>je.status==="Lost").length,ht=[{title:"New",value:Be,icon:Yn,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:nt,icon:Lt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Te,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Qe,icon:Kl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ct,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&n.jsx(Bt,{message:"Loading leads..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(Yn,{className:"mr-2 text-blue-600"}),"Leads"]}),n.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[n.jsxs("button",{onClick:()=>{G.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yl,{className:"mr-2"})," Download"]}),n.jsxs("button",{onClick:()=>{le(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Lead"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ht.map(je=>n.jsx(UGe,{...je},je.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:xe,className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:b,onChange:je=>C(je.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),n.jsx("option",{value:"New",children:"New"}),n.jsx("option",{value:"Contacted",children:"Contacted"}),n.jsx("option",{value:"Qualified",children:"Qualified"}),n.jsx("option",{value:"Converted",children:"Converted"}),n.jsx("option",{value:"Lost",children:"Lost"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Name"}),n.jsx("th",{className:"py-3 px-4",children:"Company"}),n.jsx("th",{className:"py-3 px-4",children:"Job Title"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:ee.length>0?Ae.map(je=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>tt(je),children:[n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[je.first_name," ",je.last_name]})}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:je.company_name||"--"})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.title||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.email||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:je.assigned_to?`${je.assigned_to.first_name} ${je.assigned_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${$Ge(je.status||"New")}`,children:IGe(je.status||"New")})})]},je.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No leads found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:ee.length,pageSize:A,currentPage:w,onPrev:Re,onNext:et,onPageSizeChange:k,label:"leads"}),r&&n.jsx("div",{id:"modalBackdrop",onClick:be,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:je=>je.stopPropagation(),children:[n.jsx("button",{onClick:()=>{H(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Lead":"Add New Lead"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),n.jsx("input",{type:"text",name:"first_name",value:_.first_name,onChange:te,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:_.last_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ue&&!_.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:_.company_name,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:_.title,onChange:te,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),n.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:_.department,onChange:te,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:_.email,onChange:te,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ue&&!_.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"work_ccode",value:_.work_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:rT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:_.work_phone,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m1_ccode",value:_.m1_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:rT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:_.mobile_phone_1,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[n.jsx("select",{name:"m2_ccode",value:_.m2_ccode,onChange:te,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:rT.map(je=>n.jsx("option",{value:je.code,children:je.code},je.id))}),n.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:_.mobile_phone_2,onChange:te,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),n.jsx("input",{type:"text",name:"address",value:_.address,onChange:te,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),n.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:`w-full rounded-lg ${Ue&&!_.lead_owner?"border border-red-400":"border border-gray-300"}`,children:n.jsx(FGe,{items:Array.isArray(o)?o:[],value:_.lead_owner??"",placeholder:"Search a user...",getLabel:je=>`${je.first_name} ${je.last_name}`,onChange:je=>{const Ze=o.find(J=>String(J.id)===String(je));d(Ze);let ce=null;Ze&&Ze.assigned_territory&&Ze.assigned_territory.length===1&&(ce=Ze.assigned_territory[0].id),E(J=>({...J,lead_owner:je,territory_id:ce}))}})})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),n.jsxs("select",{name:"territory_id",value:_.territory_id||"",onChange:te,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[n.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(je=>n.jsx("option",{value:je.id,children:je.name},je.id))]})]}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),n.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:_.source,onChange:te,children:[n.jsx("option",{value:"",disabled:!0,children:"Select Source"}),n.jsx("option",{value:"Website",children:"Website"}),n.jsx("option",{value:"Referral",children:"Referral"}),n.jsx("option",{value:"Cold call",children:"Cold call"}),n.jsx("option",{value:"Event",children:"Event"}),n.jsx("option",{value:"Other",children:"Other"})]})]}),n.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),n.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:_.notes,onChange:te,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[n.jsx("button",{type:"button",onClick:()=>{H(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:P||V,children:"Cancel"}),n.jsx("button",{type:"submit",onClick:Ge,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:P||V,children:P||V?"Processing...":T?"Update Lead":"Save Lead"})]})]})]})}),q&&n.jsx(zGe,{open:!0,title:q.title,message:q.message,confirmLabel:q.confirmLabel,cancelLabel:q.cancelLabel,variant:q.variant,onConfirm:gt,onCancel:ve,loading:V}),a&&!r&&!T&&n.jsx(aee,{relatedActs:W,lead:a,onBack:Je,fetchLeads:Ce,setSelectedLead:s,onEdit:Z,onDelete:_e})]})}function zGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function UGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function FGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=h.useState(!1),[d,u]=h.useState(""),f=h.useRef(null),p=e.find(N=>String(N.id)===String(t)),x=p?s(p):"",v=h.useMemo(()=>{const N=d.trim().toLowerCase();return(N?e.filter(C=>(s(C)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,d,s,o]);return h.useEffect(()=>{const N=b=>{f.current&&!f.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),h.useEffect(()=>{l||u("")},[l]),n.jsxs("div",{ref:f,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:l?d:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:N=>{u(N.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(N=>{const b=String(N.id),C=s(N),w=String(t)===b;return n.jsx("button",{type:"button",onClick:()=>{a(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:C||"--"},b)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Lb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Ja=({label:e,value:t,name:a,className:s=""})=>n.jsxs("div",{className:`flex flex-col ${s}`,children:[n.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),n.jsx("input",{type:"text",name:a,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),BGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ja,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),n.jsx(Ja,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),n.jsx(Ja,{label:"Industry",name:"industry",value:e.industry})]}),n.jsx(Ja,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),n.jsx(Ja,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),HGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"First Name",name:"firstName",value:e.firstName}),n.jsx(Ja,{label:"Last Name",name:"lastName",value:e.lastName}),n.jsx(Ja,{label:"Department",name:"department",value:e.department}),n.jsx(Ja,{label:"Title",name:"title",value:e.title}),n.jsx(Ja,{label:"Work Phone",name:"workPhone",value:e.workPhone}),n.jsx(Ja,{label:"Email",name:"email",value:e.email}),n.jsx(Ja,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),n.jsx(Ja,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),qGe=({data:e})=>n.jsxs("div",{className:"space-y-6 p-4",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Deal Name",name:"dealName",value:e.dealName}),n.jsxs("div",{className:"flex",children:[n.jsx(Ja,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),n.jsx("div",{className:"flex flex-col justify-end ml-1",children:n.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),n.jsx(Ja,{label:"Stage",name:"stage",value:e.stage}),n.jsx(Ja,{label:"Territory",name:"territory",value:e.territory})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Ja,{label:"Description",name:"description",value:e.description}),n.jsx(Ja,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function GGe({isOpen:e,onClose:t}){const[a,s]=h.useState(1),r=3;if(!e)return null;const i=()=>{a<r?s(a+1):(t(),s(1))},o=()=>{a>1&&s(a-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(a){case 1:return n.jsx(BGe,{data:Lb});case 2:return n.jsx(HGe,{data:Lb});case 3:return n.jsx(qGe,{data:Lb});default:return null}};return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Lb.accountName})]}),n.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:n.jsx(nj,{className:"w-6 h-6"})})]}),n.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(d=>n.jsx("button",{onClick:()=>s(d.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${a===d.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:d.name},d.id))}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),n.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[a>1&&n.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),a<r?n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):n.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function see({selectedDeal:e,onStatusUpdate:t,onClose:a}){const[s,r]=h.useState(e?.stage||""),[i,o]=h.useState(!1),l=wt(),{user:c}=en();h.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const d=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];h.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){G.error("No deal selected");return}if(!s||s===e.stage){G.info("Please select a different stage");return}const f=e.id;o(!0);try{await ae.put(`/deals/admin/${f}`,{stage:s}),a&&a(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{G.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";G.error(x)}finally{o(!1)}};return e?n.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const f=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${f}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>{const f=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:f,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:f=>r(f.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:d.map(f=>n.jsx("option",{value:f.value,children:f.label},f.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&n.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function ree({selectedDeal:e,show:t,onClose:a,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l}){const c=wt(),[d]=zs(),u=d.get("id"),[f,p]=h.useState(e||null),[x,v]=h.useState(s||"Overview"),{user:N}=en(),{comments:b,addComment:C,refresh:w}=Ta({relatedType:"deal",relatedId:f?.id});h.useEffect(()=>{f?.id&&w()},[f?.id,w]);const S=s!==void 0?s:x;if(h.useEffect(()=>{(async()=>{if(u&&!e)try{const M=((await ae.get("/deals/admin/fetch-all")).data||[]).find(R=>R.id===parseInt(u));if(M){const R={...M,amount:typeof M.amount=="number"?M.amount:parseFloat(M.amount||0),probability:M.probability||0};p(R)}else console.warn("Deal not found with ID:",u)}catch(E){console.error("Error fetching deal:",E)}})()},[u,e]),!f&&!u||u&&!f)return null;const A=_=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700";function k(_){return _?new Date(_).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:n.jsxs("div",{className:"flex items-start justify-between w-full",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),n.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:n.jsx("button",{onClick:()=>{a?a():c(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:n.jsx(Yt,{size:25})})})]})}),n.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:n.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[n.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:f.name}),n.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${A(f.stage)}`,children:f.stage})]}),n.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",k(f.created_at)]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-2",children:[n.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",f.amount?f.amount.toLocaleString():"0"]}),n.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${f.probability}%`}})}),n.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",f.probability,"% Complete "]}),(f.created_by===N?.id||f.assigned_to===N?.id)&&n.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[n.jsxs("button",{type:"button",onClick:()=>{i&&i(f)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[n.jsx(ha,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),n.jsxs("button",{type:"button",onClick:()=>{o&&o(f)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[n.jsx(Wt,{className:"mr-1 sm:mr-2",size:16}),n.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(_=>n.jsx("button",{onClick:()=>{r?r(_):v(_)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${S===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[S==="Overview"&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Description:"})," ",f.description]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[n.jsx("strong",{children:"Expected Close Date:"})," ",f.close_date]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("div",{className:"mt-4 py-3 w-full",children:[n.jsxs("div",{className:"relative flex flex-col w-full",children:[n.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const _=(f?.stage||"PROSPECTING").toUpperCase(),T=(R=>R==="PROSPECTING"?0:R==="QUALIFICATION"?1:R==="PROPOSAL"?2:R==="NEGOTIATION"?3:R==="CLOSED_WON"||R==="CLOSED_LOST"?4:-1)(_);return[0,1,2,3,4].map(R=>T===R?"orange":T>R?"green":"gray").map((R,z)=>n.jsxs(bt.Fragment,{children:[n.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${R==="green"?"bg-green-500 border-green-500":R==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&n.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),n.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((_,E)=>n.jsx("span",{className:"text-center flex-1 break-words",children:_},E))})]}),n.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:f.stage})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),n.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Account:"})," ",f.account?.name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Primary Contact:"})," ",f.contact?.first_name," ",f.contact?.last_name]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Phone:"})," ",f.contact?.work_phone]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Email:"})," ",f.contact?.email]}),n.jsx("div",{className:"h-px bg-gray-200 w-full"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Assigned To:"})," ",f.assigned_deals?.first_name," ",f.assigned_deals?.last_name]})]})]})]}),S==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:f.description||"No notes available."})]}),n.jsx(Aa,{comments:b,onAddComment:C})]}),S==="Activities"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Recent Activities"}),[{icon:Lt,title:"Schedule Call",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"},{icon:Et,title:"Meeting regarding Enterprise Software License",desc:"Discuss implementation timeline and pricing",user:"Lester James",date:"December 12, 2025 at 8:00 AM"}].map((_,E)=>n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-200 rounded-lg p-4 shadow-sm bg-white w-full break-words",children:[n.jsxs("div",{className:"flex gap-4 mb-2 sm:mb-0 flex-1 min-w-0",children:[n.jsx("div",{className:"text-gray-600 mt-1",children:n.jsx(_.icon,{size:24})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-gray-900 break-words",children:_.title}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.desc}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-200 shrink-0"}),n.jsx("p",{className:"text-sm text-gray-700 break-words",children:_.user})]})]})]}),n.jsx("p",{className:"text-sm text-gray-500 break-words",children:_.date})]},E))]}),S==="Edit"&&n.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),n.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.name})]}),n.jsxs("label",{className:"block mb-3 break-words",children:[n.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),n.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:f.description})]}),n.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),n.jsx("div",{className:"w-full lg:w-auto",children:n.jsx(see,{selectedDeal:f,onStatusUpdate:l,onClose:a})})]})]})]})})}const WGe=10;function VGe(){h.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=wt(),t=Zt(),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Stage"),[o,l]=h.useState("Filter by Owner"),[c,d]=h.useState(null),[u,f]=h.useState("Overview"),[p,x]=h.useState(!1),[v,N]=h.useState(null),[b,C]=h.useState(!1),[w,S]=h.useState(1),[A,k]=h.useState(10),[_,E]=h.useState(!1),[T,M]=h.useState(null),[R,z]=h.useState(!1),[P,I]=h.useState(!1),[q,Q]=h.useState(null),[V,X]=h.useState([]),[W,ne]=h.useState([]),[oe,K]=h.useState([]),[U,ye]=h.useState({}),[pe,Ne]=h.useState(null);h.useEffect(()=>{const J=t.state,de=J?.dealID;if(de&&!J?.openDealModal){Ne(de),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(pe&&v?.length>0&&!b){const J=v.find(de=>de.id===pe);J?d(J):G.error("Deal not found."),Ne(null)}},[pe,v,b]);const[Se,Oe]=h.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[ke,he]=h.useState(null),[qe,Ce]=h.useState(null),xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},ee=J=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[J]||J||"--",Ee=J=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[J]||"bg-gray-100 text-gray-700",Ae=h.useCallback(async J=>{try{const de=await ae.get(`/activities/deal/${J}`);ye(de.data&&typeof de.data=="object"?de.data:{})}catch(de){console.error(de),de.response?.status===404&&(console.warn("No activities found for this account."),ye({}))}},[]),Re=h.useMemo(()=>{const J=a.trim().toLowerCase(),de=r.trim(),D=o.trim();return(v??[]).filter(B=>{const ie=[B?.name,B?.description,B?.account?.name,B?.contact?.first_name,B?.contact?.last_name,B?.assigned_deals?.first_name,B?.assigned_deals?.last_name],ue=J===""||ie.some(ge=>ge==null||ge===""?!1:ge.toString().toLowerCase().includes(J)),se=de==="Filter by Stage"||de===""||B.stage===xe[de]||B.stage===de,Pe=D==="Filter by Owner"||D===""||`${B.assigned_deals?.first_name||""} ${B.assigned_deals?.last_name||""}`.trim().toLowerCase()===D.toLowerCase();return ue&&se&&Pe})},[v,a,r,o]),et=Math.max(1,Math.ceil(Re.length/WGe)||1);h.useEffect(()=>{S(1)},[a,r,o]),h.useEffect(()=>{S(J=>{const de=Math.max(1,Math.ceil(Re.length/A)||1);return J>de?de:J})},[Re.length,A]);const De=h.useMemo(()=>{const J=(w-1)*A;return Re.slice(J,J+A)},[Re,w,A]),tt=()=>S(J=>Math.max(J-1,1)),Je=()=>S(J=>Math.min(J+1,et)),H=()=>{Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),I(!1),Q(null),x(!0)},be=async()=>{C(!0);try{const J=await ae.get("/deals/admin/fetch-all"),D=[...Array.isArray(J.data)?J.data:[]].sort((B,ie)=>{const ue=B?.created_at?new Date(B.created_at).getTime():0;return(ie?.created_at?new Date(ie.created_at).getTime():0)-ue});N(D)}catch(J){J.response&&J.response.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch deals. Please try again later."),console.error(J)}finally{C(!1)}},le=async()=>{try{const J=await ae.get("/accounts/admin/fetch-all");X(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},Z=async()=>{try{const J=await ae.get("/contacts/admin/fetch-all");ne(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},_e=async()=>{try{const J=await ae.get("/users/all");K(Array.isArray(J.data)?J.data:[])}catch(J){console.error(J),J.response?.status===403&&G.warn("Unable to load users (permission denied).")}};h.useEffect(()=>{be(),le(),Z(),_e()},[]);const te=async J=>{J&&(Oe({id:J.id||null,name:J.name||"",account_id:J.account_id?.toString()||"",primary_contact_id:J.primary_contact_id?.toString()||"",stage:J.stage||"PROPOSAL",amount:J.amount?.toString()||"",close_date:J.close_date?new Date(J.close_date).toISOString().split("T")[0]:"",assigned_to:J.assigned_to?.toString()||"",currency:J.currency||"PHP",description:J.description||""}),he(J.account||null),Ce(J.contact||null),I(!0),Q(J.id),d(null),x(!0))},Ue=async(J=!1)=>{try{const de=await ae.get("/deals/admin/fetch-all"),B=[...Array.isArray(de.data)?de.data:[]].sort((ie,ue)=>{const se=ie?.created_at?new Date(ie.created_at).getTime():0;return(ue?.created_at?new Date(ue.created_at).getTime():0)-se});if(N(B),!J&&c&&c.id){const ie=B.find(ue=>ue.id===c.id);ie&&d({...ie})}}catch(de){console.error("Failed to refresh deal data:",de),await be()}},Ie=J=>{const de=J.name.trim();if(!de){G.error("Deal name is required.");return}if(!J.account_id){G.error("Account is required.");return}const D=P&&q?"update":"create",B=de;M({title:D==="create"?"Confirm New Deal":"Confirm Update",message:D==="create"?n.jsxs("span",{children:["Are you sure you want to create"," ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}):n.jsxs("span",{children:["Save changes to ",n.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:D==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:D,formData:J,targetId:q||null,name:B}})},Ge=J=>{if(!J)return;const de=J.name||"this deal";M({title:"Delete Deal",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:de}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:J.id,name:de}})},gt=async()=>{if(!T?.action){M(null);return}const{action:J}=T,{type:de,formData:D,targetId:B,name:ie}=J;z(!0);try{if(de==="create"){E(!0);const ue={name:D.name.trim(),account_id:parseInt(D.account_id),primary_contact_id:D.primary_contact_id?parseInt(D.primary_contact_id):null,stage:D.stage,amount:D.amount?parseFloat(D.amount):null,currency:D.currency||"PHP",close_date:D.close_date||null,description:D.description||null,assigned_to:D.assigned_to?parseInt(D.assigned_to):null};await ae.post("/deals/admin/create",ue),G.success(`Deal "${ie}" created successfully.`),x(!1),await be()}else if(de==="update"){if(!B)throw new Error("Missing deal identifier for update.");E(!0);const ue={};D.name!==void 0&&(ue.name=D.name.trim()),D.account_id!==void 0&&D.account_id!==""&&(ue.account_id=parseInt(D.account_id)),D.primary_contact_id!==void 0&&(ue.primary_contact_id=D.primary_contact_id?parseInt(D.primary_contact_id):null),D.stage!==void 0&&(ue.stage=D.stage),D.amount!==void 0&&D.amount!==""&&(ue.amount=parseFloat(D.amount)),D.currency!==void 0&&(ue.currency=D.currency),D.close_date!==void 0&&(ue.close_date=D.close_date||null),D.description!==void 0&&(ue.description=D.description||null),D.assigned_to!==void 0&&(ue.assigned_to=D.assigned_to?parseInt(D.assigned_to):null),await ae.put(`/deals/admin/${B}`,ue),G.success(`Deal "${ie}" updated successfully.`),x(!1),await be()}else if(de==="delete"){if(!B)throw new Error("Missing deal identifier for deletion.");await ae.delete(`/deals/admin/${B}`),G.success(`Deal "${ie}" deleted successfully.`),c?.id===B&&d(null),await be()}}catch(ue){console.error(ue);const se=de==="create"?"Failed to create deal. Please review the details and try again.":de==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",Pe=ue.response?.data?.detail||se;G.error(Pe)}finally{(de==="create"||de==="update")&&E(!1),z(!1),M(null)}},ve=()=>{R||M(null)},Be=()=>{x(!1),Oe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),he(null),Ce(null),I(!1),Q(null),E(!1)},nt=(v??[]).filter(J=>J.stage==="PROSPECTING").length,Te=(v??[]).filter(J=>J.stage==="QUALIFICATION").length,Qe=(v??[]).filter(J=>J.stage==="PROPOSAL").length,ct=(v??[]).filter(J=>J.stage==="NEGOTIATION").length,ht=(v??[]).filter(J=>J.stage==="CLOSED_WON").length,je=(v??[]).filter(J=>J.stage==="CLOSED_LOST").length,Ze=(v??[]).filter(J=>J.stage==="CLOSED_CANCELLED").length,ce=[{title:"Prospecting",value:nt,icon:Gw,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:Te,icon:ma,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:Qe,icon:tn,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ct,icon:ad,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ht,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:je,icon:Rs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ze,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}];return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&n.jsx(Bt,{message:"Loading deals..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(tn,{className:"mr-2 text-blue-600"}),"Deals"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:H,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Deal"]})})]}),n.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:ce.map(J=>n.jsx(YGe,{...J},J.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search deals",value:a,onChange:J=>s(J.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[n.jsxs("select",{value:r,onChange:J=>i(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),n.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),n.jsx("option",{value:"Qualification Stage",children:"Qualification"}),n.jsx("option",{value:"Proposal Stage",children:"Proposal"}),n.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),n.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),n.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),n.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),n.jsxs("select",{value:o,onChange:J=>l(J.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(J=>`${J.assigned_deals?.first_name} ${J.assigned_deals?.last_name}`))].map((J,de)=>n.jsx("option",{value:J,children:J},de))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),n.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Stage"}),n.jsx("th",{className:"py-3 px-4",children:"Value"}),n.jsx("th",{className:"py-3 px-4",children:"Close Date"}),n.jsx("th",{className:"py-3 px-4",children:"Owner"})]})}),n.jsx("tbody",{children:Re.length>0?De.map(J=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...J}),Ae(J.id)},children:[n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.deal_id?J.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:J.name}),n.jsx("div",{className:"text-gray-500 text-xs break-all",children:J.description||"--"})]})}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.account?.name||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.contact?.first_name&&J.contact?.last_name?`${J.contact.first_name} ${J.contact.last_name}`:J.contact?.first_name||J.contact?.last_name||"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ee(J.stage)}`,children:ee(J.stage)})}),n.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",J.amount?.toLocaleString()||"0"]}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.close_date||"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:J.assigned_deals?.first_name&&J.assigned_deals?.last_name?`${J.assigned_deals.first_name} ${J.assigned_deals.last_name}`:J.assigned_deals?.first_name||J.assigned_deals?.last_name||"--"})]},J.id)):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Re.length,pageSize:A,currentPage:w,onPrev:tt,onNext:Je,onPageSizeChange:k,label:"deals"}),p&&n.jsx(KGe,{onClose:Be,formData:Se,setFormData:Oe,isEditing:P,onSubmit:Ie,isSubmitting:_||R,accounts:V,contacts:W,users:oe,currentAccount:ke,currentContact:qe}),c&&n.jsx(ree,{relatedActs:U,selectedDeal:c,show:!!c,onClose:()=>d(null),activeTab:u,setActiveTab:f,onEdit:te,onDelete:Ge,onStatusUpdate:Ue}),T&&n.jsx(QGe,{open:!0,title:T.title,message:T.message,confirmLabel:T.confirmLabel,cancelLabel:T.cancelLabel,variant:T.variant,onConfirm:gt,onCancel:ve,loading:R})]})}function QGe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function YGe({icon:e,title:t,value:a,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function KGe({onClose:e,formData:t,setFormData:a,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:d=null,currentContact:u=null}){const[f,p]=h.useState(!1),x=b=>{if(b.preventDefault(),p(!0),!t.name?.trim()){G.error("Deal name is required.");return}const C=Number(t.amount);if(!t.amount||isNaN(C)||C<=0){G.error("Amount must be a number greater than 0.");return}if(!t.account_id){G.error("Please select an account.");return}if(!t.primary_contact_id){G.error("Please select a primary contact.");return}if(!t.assigned_to){G.error("Please assign this deal to a user.");return}r?.(t)},v=b=>{b.target.id==="modalBackdrop"&&e()},N=h.useMemo(()=>{const b=String(t.account_id||"").trim(),C=Array.isArray(l)?l:[];return b?C.filter(w=>{const A=[w?.account_id,w?.accountId,w?.account?.id,w?.account?.account_id,w?.account?.accountId].find(k=>k!=null&&String(k).trim()!=="");return A?String(A)===b:!1}):C},[l,t.account_id]);return h.useEffect(()=>{const b=String(t.account_id||"").trim(),C=String(t.primary_contact_id||"").trim();if(!C||!b)return;N.some(S=>String(S?.id)===C)||a(S=>({...S,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,a]),n.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:b=>b.stopPropagation(),children:[n.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:x,noValidate:!0,children:[n.jsx(oT,{label:"Deal Name",name:"name",value:t.name,onChange:b=>a({...t,name:b.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(lT,{label:"Account",value:t.account_id||"",onChange:b=>a({...t,account_id:b}),items:o||[],getLabel:b=>b?.name??"",placeholder:"Search account...",disabled:i,currentItem:d,required:!0,isSubmitted:f}),n.jsx(lT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:b=>a({...t,primary_contact_id:b}),items:N||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search contact...",disabled:i,currentItem:u,required:!0,isSubmitted:f}),n.jsx(FB,{label:"Stage",name:"stage",value:t.stage,onChange:b=>a({...t,stage:b.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),n.jsx(oT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:b=>a({...t,amount:b.target.value}),placeholder:"0",required:!0,isSubmitted:f}),n.jsx(FB,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:b=>a({...t,currency:b.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),n.jsx(oT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:b=>a({...t,close_date:b.target.value}),disabled:i}),n.jsx(lT,{label:"Assign To",value:t.assigned_to||"",onChange:b=>a({...t,assigned_to:b}),items:c||[],getLabel:b=>`${b?.first_name??""} ${b?.last_name??""}`.trim()||b?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:f,className:"md:col-span-2"}),n.jsx(ZGe,{label:"Description",name:"description",value:t.description,onChange:b=>a({...t,description:b.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function oT({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function FB({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:a??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))})]})}function lT({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:d=!1,isSubmitted:u=!1}){const f=u&&d&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",d&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(XGe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:f})]})}function XGe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),N=e.find(w=>String(w.id)===String(t))||l,b=N?s(N):"",C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:b,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function ZGe({label:e,name:t,value:a,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const cT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],dT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},uT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",JGe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},eWe=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Pb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Eg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",tWe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${a}-${s}-${r}`}catch{return""}},mT=(e,t)=>{if(!e||t==null||t==="")return"";const a=Number(t);if(Number.isNaN(a))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+a),s.toISOString().slice(0,10))},BB=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},fT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},kw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},nWe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=kw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),a=kw(t);return a||null},aWe=e=>{if(!e)return"";const a=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},sWe=e=>{if(!e)return"";const a=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""},rWe=e=>{if(!e)return"";const a=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return a?String(a):""};function iWe(){const e=wt(),t=Zt(),{user:a}=en(),s=a?.company?.currency||"";h.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=h.useState([]),[o,l]=h.useState(!1),[c,d]=h.useState([]),[u,f]=h.useState([]),[p,x]=h.useState([]),[v,N]=h.useState([]),[b,C]=h.useState(null),[w,S]=h.useState(null),[A,k]=h.useState(!1),[_,E]=h.useState(!1),[T,M]=h.useState(!1),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState(!1),[V,X]=h.useState(null),[W,ne]=h.useState(dT),[oe,K]=h.useState(""),[U,ye]=h.useState("Filter by Status"),[pe,Ne]=h.useState(null),Se=h.useCallback(async()=>{if(w)try{Q(!0);const me=(await ae.get("/company/invoice-info"))?.data;e(`/group-manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:me}})}catch($){const me=$?.response?.data?.detail||$?.message||"Failed to open print page.";G.error(me)}finally{Q(!1)}},[w,e]),[Oe,ke]=h.useState(1),[he,qe]=h.useState(10),[Ce,xe]=h.useState("Overview"),[ee,Ee]=h.useState("Draft"),[Ae,Re]=h.useState([]),[et,De]=h.useState(null),tt=h.useMemo(()=>rWe(w),[w]),{comments:Je,addComment:H,refresh:be}=Ta({relatedType:"quote",relatedId:w?.id});h.useEffect(()=>{w?.id&&be()},[w?.id,be]),h.useEffect(()=>{const me=t.state?.quoteID;if(me){De(me),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),h.useEffect(()=>{if(et&&r.length>0&&!o){const $=r.find(me=>me.id===et);$?S($):G.error("Quote not found."),De(null)}},[et,r,o]),h.useEffect(()=>{let $=!0;return(async()=>{const Le=nWe();if(Le&&$){C(Le);return}try{const $e=await ae.get("/auth/me"),Ve=kw($e?.data);if(Ve&&$){C(Ve);return}}catch{}try{const $e=await ae.get("/users/me"),Ve=kw($e?.data);if(Ve&&$){C(Ve);return}}catch{}$&&C(null)})(),()=>{$=!1}},[]);const le=h.useCallback($=>$&&u.find(Le=>String(Le.id)===String($))?.name||"",[u]),Z=h.useCallback($=>{if(!$)return"";const me=p.find(Le=>String(Le.id)===String($));return me?`${me.first_name} ${me.last_name}`.trim():""},[p]),_e=h.useCallback($=>{if(!$)return"--";const me=c.find(Le=>String(Le.id)===String($));return me?.deal_name||me?.name||`Deal #${BB($)}`},[c]),te=h.useCallback($=>{const me=c.find(Ve=>String(Ve.id)===String($)),Le=aWe(me);let $e=sWe(me);if(!$e&&Le){const Ve=p.filter(Ye=>String(Ye.account_id||"")===String(Le));if(Ve.length>0){const Ye=[...Ve].sort((At,Ct)=>{const Xt=`${At.first_name||""} ${At.last_name||""}`.trim().toLowerCase(),sa=`${Ct.first_name||""} ${Ct.last_name||""}`.trim().toLowerCase();return Xt.localeCompare(sa)});$e=String(Ye[0].id)}}if(Le&&$e){const Ve=p.find(Ye=>String(Ye.id)===String($e));Ve?.account_id&&String(Ve.account_id)!==String(Le)&&($e="")}return{accountId:Le||"",contactId:$e||""}},[c,p]),Ue=h.useCallback($=>{if(!$)return"--";if($.deal?.deal_name)return $.deal.deal_name;if($.deal?.name)return $.deal.name;const me=$.deal_id||$.deal?.id;return me?_e(me):"--"},[_e]),Ie=h.useCallback($=>{if(!$)return"--";if($.account?.name)return $.account.name;let me=$.account_id||$.account?.id;if(!me){const Le=$.deal_id||$.deal?.id;Le&&(me=te(Le).accountId)}return me?le(me)||`Account #${me}`:"--"},[te,le]),Ge=h.useCallback($=>{if(!$)return"--";if($.contact?.first_name||$.contact?.last_name)return`${$.contact?.first_name||""} ${$.contact?.last_name||""}`.trim()||"--";let me=$.contact_id||$.contact?.id;if(!me){const $e=$.deal_id||$.deal?.id;$e&&(me=te($e).contactId)}return(me?Z(me):"")||(me?`Contact #${me}`:"--")},[te,Z]),gt=h.useCallback(async($=null)=>{l(!0);try{const me=await ae.get("/quotes/admin/fetch-all"),$e=[...Array.isArray(me.data)?me.data:[]].sort((Ve,Ye)=>{const At=Ve?.created_at||Ve?.updated_at||0,Ct=Ye?.created_at||Ye?.updated_at||0;return new Date(Ct)-new Date(At)});if(i($e),$){const Ve=$e.find(Ye=>Ye.id===$);S(Ve||null)}}catch(me){console.error(me),i([]),me.response?.status===403?G.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):G.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),ve=h.useCallback(async()=>{try{const $=await ae.get("/deals/admin/fetch-all");d(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load deals (permission denied).")}},[]),Be=h.useCallback(async()=>{try{const $=await ae.get("/accounts/admin/fetch-all");f(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load accounts (permission denied).")}},[]),nt=h.useCallback(async()=>{try{const $=await ae.get("/contacts/admin/fetch-all");x(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load contacts (permission denied).")}},[]),Te=h.useCallback(async()=>{try{const $=await ae.get("/users/all");N(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&G.warn("Unable to load users (permission denied).")}},[]);h.useEffect(()=>{gt(),ve(),Be(),nt(),Te()},[gt,ve,Be,nt,Te]);const Qe=h.useMemo(()=>{const $=oe.trim().toLowerCase(),me=U.trim();return r.filter(Le=>{const $e=Ue(Le),Ve=Ie(Le),Ye=Ge(Le),At=mT(Le.presented_date,Le.validity_days),Ct=[Le.quote_id,$e,Ve,Ye,Le.total_amount?.toString(),Le.validity_days?.toString(),Le.presented_date?Eg(Le.presented_date):"",At?Eg(At):"",Le.assigned_user?.first_name,Le.assigned_user?.last_name,Le.creator?.first_name,Le.creator?.last_name,Le.status,Le.notes,Pb(Le.created_at),Pb(Le.updated_at)],Xt=$===""||Ct.some(fh=>fh==null?!1:fh.toString().toLowerCase().includes($)),sa=me==="Filter by Status"||$i(Le.status)===me;return Xt&&sa})},[r,oe,U,Ue,Ie,Ge]),ct=Math.max(1,Math.ceil(Qe.length/he)||1);h.useEffect(()=>ke(1),[oe,U]),h.useEffect(()=>{ke($=>{const me=Math.max(1,Math.ceil(Qe.length/he)||1);return $>me?me:$})},[Qe.length,he]);const ht=h.useMemo(()=>{const $=(Oe-1)*he;return Qe.slice($,$+he)},[Qe,Oe,he]),je=()=>ke($=>Math.max($-1,1)),Ze=()=>ke($=>Math.min($+1,ct)),ce=$=>{S($),xe("Overview"),Ee($i($?.status)||"Draft")},J=()=>{S(null),xe("Overview")},de=$=>{$.target.id==="quoteModalBackdrop"&&!P&&J()},D=h.useCallback(()=>{k(!1),E(!1),X(null),ne(dT),M(!1)},[]),B=$=>{$.target.id==="modalBackdrop"&&!T&&!P&&D()},ie=$=>{const{name:me,value:Le}=$.target;if(me==="deal_id"){const{accountId:$e,contactId:Ve}=te(Le);ne(Ye=>({...Ye,deal_id:Le,account_id:$e,contact_id:Ve}));return}ne($e=>({...$e,[me]:Le}))},ue=()=>{ne(dT),E(!1),X(null),k(!0)},se=$=>{if(!$)return;S(null);const me=$.deal?.id?String($.deal.id):$.deal_id?String($.deal_id):"",Le=me?te(me):{accountId:"",contactId:""},$e=$.account?.id?String($.account.id):$.account_id?String($.account_id):Le.accountId,Ve=$.contact?.id?String($.contact.id):$.contact_id?String($.contact_id):Le.contactId,Ye=$.assigned_user?.id?String($.assigned_user.id):$.assigned_to?String($.assigned_to):"";ne({deal_id:me,account_id:$e||"",contact_id:Ve||"",total_amount:$.total_amount?.toString()||"",presented_date:tWe($.presented_date),validity_days:$.validity_days!==null&&$.validity_days!==void 0?String($.validity_days):"",status:$i($.status)||"Draft",assigned_to:Ye,notes:$.notes||"",subtotal:parseFloat($.subtotal)||0,tax_rate:parseFloat($.tax_rate)||0,tax_amount:parseFloat($.tax_amount)||0,discount_type:$.discount_type||"",discount_value:parseFloat($.discount_value)||0,discount_amount:parseFloat($.discount_amount)||0,currency:$.currency||"PHP",items:Array.isArray($.items)?$.items.map(At=>({id:At.id,item_type:At.item_type||"Product",name:At.name||"",description:At.description||"",sku:At.sku||"",variant:At.variant||"",unit:At.unit||"pcs",quantity:parseFloat(At.quantity)||1,unit_price:parseFloat(At.unit_price)||0,discount_percent:parseFloat(At.discount_percent)||0,discount_amount:parseFloat(At.discount_amount)||0,line_total:parseFloat(At.line_total)||0,sort_order:At.sort_order||0})):[]}),E(!0),X($.id),k(!0)},Pe=$=>{if($.target.checked){const me=ht.map(Le=>Le.id);Re(me)}else Re([])},ge=$=>{Re(me=>me.includes($)?me.filter(Le=>Le!==$):[...me,$])},fe=$=>{if(!$)return;const me=$.quote_id||"this quote";z({title:"Delete Quote",message:n.jsxs("span",{children:["Are you sure you want to permanently delete"," ",n.jsx("span",{className:"font-semibold",children:me}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:me}})},Fe=async()=>{Ae.length!==0&&z({title:"Delete Quotes",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:Ae.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${Ae.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:Ae}})},[Xe,pt]=h.useState(!1),Nt=$=>{if($.preventDefault(),pt(!0),!b){G.error("Unable to determine current user. Please log in again.");return}if(!W.deal_id){G.error("Deal is required.");return}if(!W.assigned_to){G.error("Assigned To is required.");return}const Le=te(W.deal_id),$e=W.items.map((Xt,sa)=>({item_type:Xt.item_type||"Product",name:Xt.name,description:Xt.description||null,sku:Xt.sku||null,variant:Xt.variant||null,unit:Xt.unit||null,quantity:parseFloat(Xt.quantity)||1,unit_price:parseFloat(Xt.unit_price)||0,discount_percent:parseFloat(Xt.discount_percent)||0,sort_order:Xt.sort_order??sa})),Ve={deal_id:Number(W.deal_id),account_id:Le.accountId?Number(Le.accountId):null,contact_id:Le.contactId?Number(Le.contactId):null,subtotal:parseFloat(W.subtotal)||0,tax_rate:parseFloat(W.tax_rate)||0,tax_amount:parseFloat(W.tax_amount)||0,discount_type:W.discount_type||null,discount_value:parseFloat(W.discount_value)||0,discount_amount:parseFloat(W.discount_amount)||0,total_amount:parseFloat(W.total_amount)||0,currency:W.currency||"PHP",presented_date:W.presented_date||null,validity_days:W.validity_days===""?null:Number(W.validity_days),status:W.status||"Draft",assigned_to:W.assigned_to?Number(W.assigned_to):null,notes:W.notes?.trim()||null,items:$e},Ye=_&&V?"update":"create",At=_e(W.deal_id),Ct=Ye==="create"?{...Ve,created_by_id:Number(b)}:Ve;z({title:Ye==="create"?"Confirm New Quote":"Confirm Update",message:Ye==="create"?n.jsxs("span",{children:["Are you sure you want to create a quote for"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}):n.jsxs("span",{children:["Save changes to"," ",n.jsx("span",{className:"font-semibold",children:At}),"?"]}),confirmLabel:Ye==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Ye,payload:Ct,targetId:V||null,name:At}})},St=async()=>{if(!R?.action){z(null);return}const{action:$}=R,{type:me,payload:Le,targetId:$e,name:Ve}=$;I(!0);try{if(me==="create")M(!0),await ae.post("/quotes/admin",Le),G.success("Quote created successfully."),D(),await gt();else if(me==="update"){if(!$e)throw new Error("Missing quote identifier for update.");M(!0),await ae.put(`/quotes/admin/${$e}`,Le),G.success("Quote updated successfully."),D(),await gt(),w?.id===$e&&S(null)}else if(me==="delete"){if(!$e)throw new Error("Missing quote identifier for deletion.");const Ye=w?.id;Ne($e),await ae.delete(`/quotes/admin/${$e}`),G.success(`Quote "${Ve}" deleted successfully.`),await gt(Ye&&Ye!==$e?Ye:null),Ye===$e&&S(null)}else me==="bulk-delete"&&(await ae.post("/quotes/admin/bulk-delete",{quote_ids:Ae}),G.success(`Successfully deleted ${Ae.length} quotes`),Re([]),await gt())}catch(Ye){console.error(Ye);const At=me==="create"?"Failed to create quote. Please review the details and try again.":me==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";G.error(At),(me==="create"||me==="update")&&M(!1),me==="delete"&&Ne(null)}finally{(me==="create"||me==="update")&&M(!1),me==="delete"&&Ne(null),I(!1),z(null)}},Ht=()=>{P||z(null)},on=h.useCallback(($,me)=>{const Le=$?.deal_id??$?.deal?.id??"",$e=Le?Number(Le):null,Ve=$e?te(String($e)):{accountId:"",contactId:""},Ye=$?.account_id??$?.account?.id??Ve.accountId??null,At=$?.contact_id??$?.contact?.id??Ve.contactId??null,Ct=$?.total_amount??0,Xt=$?.assigned_to??$?.assigned_user?.id??null;return{deal_id:$e,account_id:Ye!=null&&String(Ye).trim()!==""?Number(Ye):null,contact_id:At!=null&&String(At).trim()!==""?Number(At):null,total_amount:Number(Ct),presented_date:$?.presented_date||null,validity_days:$?.validity_days===""||$?.validity_days===void 0||$?.validity_days===null?null:Number($.validity_days),status:me,assigned_to:Xt!=null&&String(Xt).trim()!==""?Number(Xt):null,notes:$?.notes?.trim()||null}},[te]),cn=h.useCallback(async()=>{if(!w?.id)return;const $=$i(ee),me=[$,$.toLowerCase()],Le=async $e=>ae.patch(`/quotes/admin/${w.id}/status`,{status:$e},{headers:{"Content-Type":"application/json"}});try{let $e=!1;for(const Ve of me)try{await Le(Ve),$e=!0;break}catch(Ye){if(Ye?.response?.status===422)continue;throw Ye}if(!$e){const Ve=on(w,$);if(!Ve.deal_id){G.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ve.total_amount||Ve.total_amount<=0){G.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await ae.put(`/quotes/admin/${w.id}`,Ve)}G.success(`Quote status updated to ${$}`),S(null),xe("Overview"),await gt()}catch($e){console.error($e);const Ve=$e?.response?.data?.message||($e?.response?.data?.errors?Object.values($e.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";G.error(Ve)}},[w,ee,gt,on]),re=[{label:"Filter by Status",value:"Filter by Status"},...cT.map($=>({label:$.label,value:$.value}))],ot=R?.action?.type==="delete"?R.action.targetId:null,zt=w&&(pe===w.id||ot===w.id),kt=w&&pe===w.id,Kt=w?n.jsx("div",{id:"quoteModalBackdrop",onClick:de,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[n.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:n.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),n.jsx("button",{onClick:J,className:"text-gray-500 hover:text-white transition cursor-pointer",children:n.jsx(Kn,{size:25})})]})}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Ue(w)}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${eWe(w.status)}`,children:uT(w.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:Se,disabled:q||T||P,children:[n.jsx(hn,{className:"mr-2"}),q?"Preparing...":"Print Quotation"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>se(w),disabled:P||R?.action?.type==="update"&&R.action.targetId===w.id,children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>fe(w),disabled:!!zt,children:kt?"Deleting...":n.jsxs(n.Fragment,{children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})})]})]}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-1 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>n.jsx("button",{onClick:()=>xe($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${Ce===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ce==="Overview"&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Quote ID:"}),n.jsx("p",{children:fT(w.quote_id)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Deal:"}),n.jsx("p",{children:Ue(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Account:"}),n.jsx("p",{children:Ie(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Contact:"}),n.jsx("p",{children:Ge(w)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Total Amount:"}),n.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Presented Date:"}),n.jsx("p",{children:Eg(w.presented_date)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Validity Days:"}),n.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),n.jsx("p",{children:Eg(mT(w.presented_date,w.validity_days))||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:uT(w.status)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Assigned To:"}),n.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created By:"}),n.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:Pb(w.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Updated:"}),n.jsx("p",{children:Pb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&n.jsx("div",{className:"mt-6",children:n.jsx(hd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),Ce==="Notes"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),n.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),n.jsx(Aa,{comments:Je,onAddComment:H})]})]}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[n.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${fT(w.quote_id)}`,assigned_to:tt,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Lt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),n.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:tt,status:"Planned"}}}),children:[n.jsx(Et,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),n.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:tt,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(Qt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:ee||$i(w.status)||"Draft",onChange:$=>Ee($.target.value),children:cT.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))}),n.jsx("button",{onClick:cn,disabled:$i(ee)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(ee)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Me=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&n.jsx(Bt,{message:"Loading quotes..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(hn,{className:"mr-2 text-blue-600"})," Quotes"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:n.jsxs("button",{onClick:()=>{ue(),pt(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Quote"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search quotes",value:oe,onChange:$=>K($.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:U,onChange:$=>ye($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:re.map($=>n.jsx("option",{value:$.value,children:$.label},$.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-12",children:n.jsx("input",{type:"checkbox",checked:ht.length>0&&Ae.length===ht.length,onChange:Pe,className:"cursor-pointer"})}),n.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),n.jsx("th",{className:"py-3 px-4",children:"Deal"}),n.jsx("th",{className:"py-3 px-4",children:"Account"}),n.jsx("th",{className:"py-3 px-4",children:"Contact"}),n.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),n.jsx("th",{className:"py-3 px-4",children:"Status"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),n.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ae.length>0?n.jsx("button",{onClick:Fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Ae.length} selected items`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:o?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):Qe.length>0?ht.map($=>{const me=mT($.presented_date,$.validity_days);return n.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>ce($),children:[n.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Le=>Le.stopPropagation(),children:n.jsx("input",{type:"checkbox",checked:Ae.includes($.id),onChange:()=>ge($.id),className:"cursor-pointer"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:fT($.quote_id)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ue($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-sm text-gray-700 break-words",children:Ie($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"break-words",children:Ge($)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-700",children:$.total_amount?`${s}${Number($.total_amount).toLocaleString()}`:"--"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${JGe($.status)}`,children:uT($.status)})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{children:$.assigned_user?`${$.assigned_user.first_name} ${$.assigned_user.last_name}`:"Unassigned"})}),n.jsx("td",{className:"py-3 px-4 align-top",children:n.jsx("div",{className:"text-gray-500 text-xs",children:Eg(me)||"--"})}),n.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},$.id)}):n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:Qe.length,pageSize:he,currentPage:Oe,onPrev:je,onNext:Ze,onPageSizeChange:$=>{qe($),ke(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),vt=A?n.jsx("div",{id:"modalBackdrop",onClick:B,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[n.jsx("button",{onClick:()=>{D(),pt(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:T||P,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:_?"Edit Quote":"Add New Quote"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Nt,children:[n.jsx(GB,{label:"Deal",name:"deal_id",value:W.deal_id,onChange:$=>{const{accountId:me,contactId:Le}=te($);ne($e=>({...$e,deal_id:$,account_id:me,contact_id:Le}))},items:Array.isArray(c)?c:[],getLabel:$=>`${BB($?.deal_id??"")} ${$?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:Xe,disabled:T||c.length===0,className:"md:col-span-2"}),n.jsx(qB,{label:"Account",value:le(W.account_id)||(W.account_id?`Account #${W.account_id}`:""),disabled:!0}),n.jsx(qB,{label:"Contact",value:Z(W.contact_id)||(W.contact_id?`Contact #${W.contact_id}`:""),disabled:!0}),n.jsx("div",{className:"md:col-span-2 mt-2",children:n.jsx(hd,{items:W.items,onChange:$=>ne(me=>({...me,items:$})),currencySymbol:s,readOnly:T,taxRate:W.tax_rate,discountType:W.discount_type,discountValue:W.discount_value,onTotalsChange:$=>{ne(me=>({...me,subtotal:$.subtotal,discount_amount:$.discount_amount,tax_amount:$.tax_amount,total_amount:$.total_amount}))}})}),n.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),n.jsxs("select",{value:W.discount_type||"",onChange:$=>ne(me=>({...me,discount_type:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:T,children:[n.jsx("option",{value:"",children:"No Discount"}),n.jsx("option",{value:"percentage",children:"Percentage (%)"}),n.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",W.discount_type==="percentage"?"%":"Amount"]}),n.jsx("input",{type:"number",value:W.discount_value||"",onChange:$=>ne(me=>({...me,discount_value:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:W.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:T||!W.discount_type})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),n.jsx("input",{type:"number",value:W.tax_rate||"",onChange:$=>ne(me=>({...me,tax_rate:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:T})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),n.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(W.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),n.jsx(HB,{label:"Presented Date",name:"presented_date",type:"date",value:W.presented_date,onChange:ie,disabled:T}),n.jsx(HB,{label:"Validity Days",name:"validity_days",type:"number",value:W.validity_days,onChange:ie,placeholder:"30",disabled:T}),n.jsx(GB,{label:"Assigned To",value:W.assigned_to||"",onChange:$=>ne(me=>({...me,assigned_to:$})),items:Array.isArray(v)?v:[],getLabel:$=>{const me=`${$?.first_name??""} ${$?.last_name??""}`.trim();return me?$?.role?`${me} (${$.role})`:me:$?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:Xe,disabled:T}),n.jsx(oWe,{label:"Status",name:"status",value:W.status,onChange:ie,options:cT,required:!0,disabled:T}),n.jsx(cWe,{label:"Notes",name:"notes",value:W.notes,onChange:ie,placeholder:"Additional details...",rows:3,disabled:T,className:"md:col-span-2"}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:()=>{D(),pt(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:T||P,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:T||P,children:T?"Saving...":_?"Update Quote":"Save Quote"})]})]})]})}):null,F=R?n.jsx(dWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:St,onCancel:Ht,loading:P}):null;return n.jsxs(n.Fragment,{children:[w?Kt:Me,vt,F]})}function HB({label:e,name:t,value:a,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:d=!1}){const u=d&&!a?.trim();return n.jsxs("div",{className:c,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function qB({label:e,value:t,className:a="",disabled:s=!0}){return n.jsxs("div",{className:a,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function oWe({label:e,name:t,value:a,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=a!=null?String(a):"",u=r.some(f=>String(f.value)===c)?c:"";return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("select",{name:t,value:u,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(f=>n.jsx("option",{value:String(f.value??""),children:f.label},f.value??f.label))})]})}function GB({label:e,items:t=[],value:a="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:d=!1}){const u=d&&c&&!a;return n.jsxs("div",{className:l,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(lWe,{items:t,value:a??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:u})]})}function lWe({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,d]=h.useState(!1),[u,f]=h.useState(""),p=h.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",N=h.useMemo(()=>{const b=u.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,u,s,o]);return h.useEffect(()=>{const b=C=>{p.current&&!p.current.contains(C.target)&&d(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),h.useEffect(()=>{c||f("")},[c]),n.jsxs("div",{ref:p,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:c?u:v,placeholder:r,onFocus:()=>!i&&d(!0),onChange:b=>{f(b.target.value),c||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(b=>{const C=String(b.id),w=s(b),S=String(t)===C;return n.jsx("button",{type:"button",onClick:()=>{a(C),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},C)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function cWe({label:e,name:t,value:a,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return n.jsxs("div",{className:l,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),n.jsx("textarea",{name:t,value:a??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function dWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function uWe(){const{userRole:e}=Qs();return n.jsx(Bj,{currentUserRole:e,currentUserId:null})}const WB=["Not started","In progress","Deferred","Completed"],VB={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},iee=e=>e&&(VB[e]||VB[String(e).toUpperCase()])||"Not started",mWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const a=t.getTimezoneOffset();return new Date(t.getTime()-a*60*1e3).toISOString().slice(0,16)},QB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},fWe=e=>{const t=e.subject?.trim()??"",a=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),iee(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const d=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,f=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:a,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:d,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:f}},hWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",a=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=q=>{if(!q)return"";const Q=String(q).split("-");return Q.length===3?`${Q[0]}-${Q[2]}`:String(q)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,d=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,f=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,N=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,C=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",A="",k="",_="Lead",E="",T="",M="";const R=c(),z=v(),P=l(),I=x();if(R){w="Account",_="Account",E=z,S=String(R);const q=d(),Q=u(),V=N(),X=b(),W=f(),ne=C();q?(A="Contact",T="Contact",M=V,k=String(q)):Q?(T="Deal",A="Deal",M=X,k=String(Q)):W&&(T="Quote",A="Quote",M=ne,k=String(W))}else P?(_="Lead",E=I,w="Lead",S=String(P)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:iee(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:a,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:_,relatedTo1Text:E,relatedType2Text:T,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:A,relatedTo2:k}};function gWe(){h.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=en(),[a,s]=h.useState("board"),[r,i]=h.useState(!1),[o,l]=h.useState(null),[c,d]=h.useState(!1),[u,f]=h.useState([]),[p,x]=h.useState(!0),[v,N]=h.useState(""),[b,C]=h.useState("Filter by Status"),[w,S]=h.useState("Filter by Priority"),[A,k]=h.useState([]),[_,E]=h.useState(1),[T,M]=h.useState(10),[R,z]=h.useState(null),[P,I]=h.useState(!1),[q,Q]=h.useState([]),V=wt(),X=Zt(),[W,ne]=h.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[oe,K]=h.useState(null);h.useEffect(()=>{const H=X.state?.openTaskModal,be=X.state?.initialTaskData,le=X.state?.taskID;H?(i(!0),be&&ne(Z=>({...Z,...be})),V(X.pathname,{replace:!0,state:{}})):le&&(K(le),V(X.pathname,{replace:!0,state:{}}))},[X,V]),h.useEffect(()=>{if(oe&&u.length>0&&!p){const H=u.find(be=>be.id===oe);H?Ne(H,!0):G.error("Task not found."),K(null)}},[oe,u,p]);const U=async()=>{try{const H=await ae.get("/users/all");k(Array.isArray(H.data)?H.data:[])}catch(H){console.error("Failed to fetch users:",H),G.error("Failed to fetch users.")}},ye=async()=>{try{x(!0);const H=await ae.get("/tasks/all"),le=(Array.isArray(H.data)?H.data:[]).map(hWe);le.sort((Z,_e)=>{const te=Z.createdAt?new Date(Z.createdAt):0;return(_e.createdAt?new Date(_e.createdAt):0)-te}),f(le),a==="list"&&E(1)}catch(H){console.error("Failed to load tasks:",H),G.error("Failed to load tasks.")}finally{x(!1)}};h.useEffect(()=>{!t&&e&&(U(),ye())},[t,e]);const pe=()=>{l(null),ne({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},Ne=(H=null,be=!1)=>{l(H),d(be),H?ne({id:H.id,subject:H.title||"",description:H.description||"",priority:H.priority||"Normal",status:H.status||"Not started",dueDate:mWe(H.dueDate),assignedTo:H.assignedToId?String(H.assignedToId):"",notes:H.notes||"",relatedType1Text:H.relatedType1Text||"",relatedTo1Text:H.relatedTo1Text||"",relatedType2Text:H.relatedType2Text||"",relatedTo2Text:H.relatedTo2Text||"",relatedType1:H.relatedType1||"",relatedTo1:H.relatedTo1||"",relatedType2:H.relatedType2||"",relatedTo2:H.relatedTo2||""}):pe(),i(!0)},Se=()=>{i(!1),l(null),d(!1),pe()},Oe=async H=>{const be=fWe(H);try{o&&!c?(await ae.put(`/tasks/${o.id}`,be),G.success("Task updated successfully.")):(await ae.post("/tasks/create",be),G.success("Task created successfully.")),i(!1),await ye()}catch(le){console.error("Failed to save task:",le);const Z=le.response?.data?.detail||"Failed to save task.";G.error(Z)}},ke=H=>{H&&z({title:"Delete Task",message:n.jsxs(n.Fragment,{children:["Are you sure you want to delete ",n.jsx("span",{className:"font-semibold",children:H.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:H.id}})},he=()=>{if(Ae.every(H=>q.includes(H.id)))Q(q.filter(H=>!Ae.map(be=>be.id).includes(H)));else{const H=Ae.map(be=>be.id);Q([...new Set([...q,...H])])}},qe=H=>{Q(be=>be.includes(H)?be.filter(le=>le!==H):[...be,H])},Ce=async()=>{q.length!==0&&z({title:"Delete Tasks",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsx("span",{className:"font-semibold",children:q.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${q.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:q}})},xe=async()=>{if(!R?.action){z(null);return}const{action:H}=R;I(!0);try{H.type==="delete"?(await ae.delete(`/tasks/${H.targetId}`),G.success("Task deleted successfully."),await ye()):H.type==="bulk-delete"&&(await ae.delete("/tasks/admin/bulk-delete",{data:{task_ids:H.task_ids}}),G.success(`Successfully deleted ${H.task_ids.length} tasks`),Q([]),await ye())}catch(be){console.error("Task action failed:",be),G.error("Failed to delete task.")}finally{I(!1),z(null)}},ee=()=>{P||z(null)},Ee=h.useMemo(()=>{const H=v.trim().toLowerCase();return[...u].sort((le,Z)=>{const _e=le.createdAt?new Date(le.createdAt):0;return(Z.createdAt?new Date(Z.createdAt):0)-_e}).filter(le=>{const Z=H===""||le.title?.toLowerCase().includes(H)||le.description?.toLowerCase().includes(H)||le.assignedToName?.toLowerCase().includes(H)||le.createdBy?.toLowerCase().includes(H),_e=b==="Filter by Status"||le.status===b,te=w==="Filter by Priority"||le.priority===w;return Z&&_e&&te})},[u,v,b,w]);h.useEffect(()=>{E(1)},[v,b,w,a,T]),h.useEffect(()=>{if(a==="list"){const H=Ee.length===0?1:Math.ceil(Ee.length/T);_>H&&E(H)}},[Ee.length,_,a,T]);const Ae=h.useMemo(()=>{if(a==="board")return Ee;const H=(_-1)*T;return Ee.slice(H,H+T)},[Ee,_,a,T]),Re=h.useMemo(()=>{const H=new Date;return[{title:"To Do",value:u.filter(be=>be.status==="Not started").length,icon:Gs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:u.filter(be=>be.status==="In progress").length,icon:Gi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:u.filter(be=>be.status==="Completed").length,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:u.filter(be=>be.dueDate&&new Date(be.dueDate)<H&&be.status!=="Completed").length,icon:qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:u.filter(be=>be.priority==="High").length,icon:Kl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[u]),et=H=>H.dueDate&&new Date(H.dueDate)<new Date&&H.status!=="Completed",De=H=>{switch(H.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},tt=H=>{switch(H){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},Je=H=>{switch(H){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&n.jsx(Bt,{message:"Loading tasks..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(Gi,{className:"text-blue-600"})," Tasks Board"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:()=>Ne(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[n.jsx(yn,{})," Create Task"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Re.map(H=>n.jsx(pWe,{...H},H.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:H=>N(H.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{value:b,onChange:H=>C(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Status"}),WB.map(H=>n.jsx("option",{children:H},H))]}),n.jsxs("select",{value:w,onChange:H=>S(H.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{children:"Filter by Priority"}),n.jsx("option",{children:"High"}),n.jsx("option",{children:"Normal"}),n.jsx("option",{children:"Low"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${a==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),n.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${a==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&a==="board"&&(Ee.length>0?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:WB.map(H=>{const be=Ae.filter(le=>le.status===H);return n.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative rounded-md",children:[n.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),n.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:H}),n.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:be.length})]}),n.jsx("div",{className:`space-y-3 ${be.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:be.length>0?be.map(le=>n.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${De(le)}`,onClick:()=>Ne(le,!0),children:[n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800 text-sm",children:le.title}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",le.priority]}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",le.assignedToName]}),n.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",n.jsx("span",{className:et(le)?"text-red-600":"text-gray-600",children:le.dateAssigned?QB(le.dateAssigned):""})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),Ne(le)},className:"text-blue-500 hover:text-blue-700",children:n.jsx(ha,{})}),n.jsx("button",{type:"button",onClick:Z=>{Z.stopPropagation(),ke(le)},className:"text-red-500 hover:text-red-700",children:n.jsx(Wt,{})})]})]},le.id)):n.jsx("div",{className:"text-center py-10 text-gray-500",children:"No tasks"})})]},H)})}):n.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&a==="list"&&n.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4 w-10",children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ae.length>0&&Ae.every(H=>q.includes(H.id)),onChange:he})}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),n.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:q.length>0?n.jsx("button",{onClick:Ce,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${q.length} selected tasks`,children:n.jsx(Wt,{size:18})}):""})]})}),n.jsx("tbody",{children:Ae.length>0?Ae.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[n.jsx("td",{className:"py-3 px-4",onClick:be=>be.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:q.includes(H.id),onChange:()=>qe(H.id)})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>Ne(H,!0),children:H.title}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${tt(H.status||"Not started")}`,children:H.status||"Not started"})}),n.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>Ne(H,!0),children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Je(H.priority||"Low")}`,children:H.priority||"Low"})}),n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>Ne(H,!0),children:H.assignedToName||"Unassigned"}),n.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${et(H)?"text-red-600 font-medium":""}`,onClick:()=>Ne(H,!0),children:H.dateAssigned?QB(H.dateAssigned):""}),n.jsx("td",{})]},H.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&a==="list"&&n.jsx(rn,{className:"mt-6",totalItems:Ee.length,pageSize:T,currentPage:Ee.length===0?0:_,onPrev:()=>E(H=>Math.max(H-1,1)),onNext:()=>E(H=>Math.min(H+1,Math.max(1,Math.ceil(Ee.length/T)||1))),onPageSizeChange:H=>{M(H),E(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),n.jsx(l0,{isOpen:r,onClose:Se,onSave:Oe,onEdit:()=>d(!1),setFormData:ne,formData:W,isEditing:!c&&!!o,viewMode:c,users:A,currentUser:e,onDelete:ke}),R&&n.jsx(xWe,{open:!0,title:R.title,message:R.message,confirmLabel:R.confirmLabel,cancelLabel:R.cancelLabel,variant:R.variant,onConfirm:xe,onCancel:ee,loading:P})]})}function pWe({icon:e,title:t,value:a,color:s,bgColor:r,onClick:i}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[n.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?n.jsx(e,{size:22}):null}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function xWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}const oee=e=>e?e.toUpperCase():"",Db=e=>{const t=oee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},yWe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},bWe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},vWe=e=>{const t=oee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},hT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},wWe=()=>{const e=wt(),t=Zt(),[a]=zs(),s=a.get("id"),r=t.pathname==="/admin/meetings/info";h.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=h.useState([]),[l,c]=h.useState(!1),[d,u]=h.useState([]),[f,p]=h.useState(""),[x,v]=h.useState("Filter by Status"),[N,b]=h.useState(!1),[C,w]=h.useState(null),[S,A]=h.useState(1),[k,_]=h.useState(10),[E,T]=h.useState(hT),[M,R]=h.useState(!1),[z,P]=h.useState(null),[I,q]=h.useState(!1),[Q,V]=h.useState(null),[X,W]=h.useState(!1),[ne,oe]=h.useState(null);h.useEffect(()=>{const ee=t.state?.openMeetingModal,Ee=t.state?.initialMeetingData?.relatedTo||a.get("id"),Ae=t.state?.meetingID;ee||Ee?(b(!0),t.state?.initialMeetingData&&T(Re=>({...Re,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ae&&(oe(Ae),e(t.pathname,{replace:!0,state:{}}))},[t,a,e]),h.useEffect(()=>{if(ne&&i.length>0&&!l){const ee=i.find(Ee=>Ee.id===ne);ee?w(ee):G.error("Meeting not found."),oe(null)}},[ne,i,l]);const K=async()=>{if(s&&r){const ee=sessionStorage.getItem("meetingDetailData");if(ee)try{const Ee=JSON.parse(ee);if(Ee.id===parseInt(s)){w(Ee),sessionStorage.removeItem("meetingDetailData");return}}catch(Ee){console.error(Ee)}}c(!0);try{const ee=await ae.get("/meetings/admin/fetch-all"),Ae=[...Array.isArray(ee.data)?ee.data:[]].sort((Re,et)=>{const De=Re?.createdAt?new Date(Re.createdAt).getTime():0;return(et?.createdAt?new Date(et.createdAt).getTime():0)-De});if(o(Ae),s&&!C){const Re=Ae.find(et=>et.id===parseInt(s));Re&&w(Re)}}catch{G.error("Failed to load meetings.")}finally{c(!1)}},U=async()=>{try{const ee=await ae.get("/users/all");u(Array.isArray(ee.data)?ee.data:[])}catch(ee){console.error(ee)}};h.useEffect(()=>{K(),U()},[]);const ye=ee=>p(ee.target.value),pe=h.useMemo(()=>{const ee=f.trim().toLowerCase(),Ee=x.trim().toUpperCase();return i.filter(Ae=>{const Re=[Ae?.activity,Ae?.description,Ae?.relatedTo,Ae?.assignedTo],et=ee===""||Re.some(tt=>tt&&tt.toString().toLowerCase().includes(ee)),De=Ee==="FILTER BY STATUS"||Db(Ae.status||"PENDING")===Ee;return et&&De})},[i,f,x]),Ne=h.useMemo(()=>{const ee=(S-1)*k;return pe.slice(ee,ee+k)},[pe,S,k]),Se=()=>{b(!1),T(hT),R(!1),P(null),q(!1)},Oe=()=>{T(hT),R(!1),P(null),b(!0)},ke=ee=>{let Ee="";if(ee.meet_assign_to?.id)Ee=String(ee.meet_assign_to.id);else if(ee.assignedTo){const le=d.find(Z=>`${Z.first_name} ${Z.last_name}`===ee.assignedTo);Ee=le?String(le.id):""}const Ae=le=>{if(!le)return"";try{const Z=new Date(le),_e=Z.getTimezoneOffset()*6e4;return new Date(Z.getTime()-_e).toISOString().slice(0,16)}catch{return""}};let Re="Lead",et="",De="Contact",tt="";if(ee.lead)Re="Lead",et=String(ee.lead.id);else if(ee.account)Re="Account",et=String(ee.account.id),ee.contact?(De="Contact",tt=String(ee.contact.id)):ee.deal?(De="Deal",tt=String(ee.deal.id)):ee.quote&&(De="Quote",tt=String(ee.quote.id));else if(ee.relatedType||ee.related_type){const le=ee.relatedType||ee.related_type,Z=ee.related_to||ee.relatedToId;le==="Lead"?(Re="Lead",et=String(Z)):(Re="Account",et=ee.account_id?String(ee.account_id):"")}const Je={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},H=Db(ee.status),be=Je[H]||"Planned";T({subject:ee.subject||ee.activity||"",location:ee.location||"",startTime:Ae(ee.start_time||ee.startTime),endTime:Ae(ee.end_time||ee.endTime),status:be,notes:ee.description||ee.notes||"",assignedTo:Ee,relatedType1:Re,relatedTo1:et,relatedType2:De,relatedTo2:tt}),R(!0),P(ee.id),w(null),b(!0)},he=ee=>{if(!ee.subject?.trim())return G.error("Subject is required.");if(!ee.startTime)return G.error("Start time is required.");if(ee.endTime&&!(new Date(ee.endTime)-new Date(ee.startTime)>0))return G.error("End time must be after start time.");ee.relatedType1,ee.relatedTo1,ee.relatedType1==="Account"&&ee.relatedType2&&ee.relatedTo2&&(ee.relatedType2,ee.relatedTo2);const Ee={...ee,assignedTo:parseInt(ee.assignedTo),relatedTo1:parseInt(ee.relatedTo1),relatedTo2:parseInt(ee.relatedTo2)},Ae=M&&z?"update":"create";V({title:Ae==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ae} "${Ee.subject}"?`,confirmLabel:Ae==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ae,payload:Ee,targetId:z,name:Ee.subject}})},qe=async()=>{if(!Q?.action)return;const{type:ee,payload:Ee,targetId:Ae,name:Re}=Q.action;W(!0);try{ee==="create"?(q(!0),await ae.post("/meetings/create",Ee),G.success(`Meeting "${Re}" created.`),Se(),await K()):ee==="update"?(q(!0),await ae.put(`/meetings/${Ae}`,Ee),G.success(`Meeting "${Re}" updated.`),Se(),await K()):ee==="delete"&&(await ae.delete(`/meetings/${Ae}`),G.success(`Meeting "${Re}" deleted.`),C?.id===Ae&&w(null),await K())}catch(et){const De=et.response?.data?.detail||"Action failed.";G.error(typeof De=="string"?De:JSON.stringify(De)),console.error(De)}finally{q(!1),W(!1),V(null)}},Ce=ee=>{V({title:"Delete Meeting",message:`Permanently delete "${ee.activity}"?`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ee.id,name:ee.activity}})},xe=async(ee,Ee)=>{try{await ae.put(`/meetings/${ee}`,{status:Ee}),G.success("Status updated"),K(),w(null)}catch{G.error("Failed to update status")}};return r&&s?C?n.jsx(gd,{meeting:C,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:ke,onDelete:Ce,onStatusUpdate:xe}):n.jsx(Bt,{message:"Loading meeting..."}):n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&n.jsx(Bt,{message:"Loading meetings..."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[n.jsx(Et,{className:"mr-2 text-blue-600"})," Meetings"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:Oe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[n.jsx(yn,{className:"mr-2"})," Add Meeting"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[n.jsx(Gt,{className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search meetings",value:f,onChange:ye,className:"w-full outline-none"})]}),n.jsxs("select",{value:x,onChange:ee=>v(ee.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[n.jsx("option",{children:"Filter by Status"}),n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Start Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:Ne.length>0?Ne.map(ee=>n.jsxs("tr",{onClick:()=>w(ee),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ee.subject}),n.jsxs("td",{className:"py-3 px-4",children:[ee.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.lead.title}),ee.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.account.name}),ee.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ee.contact.first_name," ",ee.contact.last_name]}),ee.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ee.deal.name}),ee.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:yWe(ee.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4",children:bWe(ee.start_time)}),n.jsxs("td",{className:"py-3 px-4",children:[ee.meet_assign_to.first_name," ",ee.meet_assign_to.last_name]}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${vWe(Db(ee.status))}`,children:Db(ee.status).replace("_"," ")})})]},ee.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),n.jsx(rn,{totalItems:pe.length,pageSize:k,currentPage:S,onPrev:()=>A(ee=>Math.max(1,ee-1)),onNext:()=>A(ee=>ee+1),onPageSizeChange:_,label:"meetings"}),N&&n.jsx(Jj,{onClose:Se,formData:E,setFormData:T,isEditing:M,onSubmit:he,isSubmitting:I||X,users:d}),C&&n.jsx(gd,{meeting:C,onClose:()=>w(null),onEdit:ke,onDelete:Ce,onStatusUpdate:xe}),Q&&n.jsx(NWe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,variant:Q.variant,onConfirm:qe,onCancel:()=>V(null),loading:X})]})};function NWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),n.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${d}`,children:o?"...":s})]})]})})}const jWe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],CWe=e=>e?String(e).toUpperCase():"",df=e=>{const t=CWe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},gT=e=>{const t=df(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},YB=e=>{switch(df(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},KB=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function SWe(){const[e,t]=h.useState(!1),[a,s]=h.useState(null),[r,i]=h.useState(null),[o,l]=h.useState(null),[c,d]=h.useState(null),[u,f]=h.useState([]),[p,x]=h.useState(null),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(!1),[A,k]=h.useState(!1),[_,E]=h.useState("PLANNED"),[T,M]=h.useState(!1),[R,z]=h.useState(!1),[P,I]=h.useState(null),{comments:q,addComment:Q,refresh:V}=Ta({relatedType:"call",relatedId:a?.id});h.useEffect(()=>{a?.id&&V()},[a?.id,V]),zs();const X=wt(),W=Zt(),ne=ce=>{if(!ce)return"";const J=String(ce).split("-");return J.length===3?`${J[0]}-${J[2]}`:String(ce)},K={subject:"",call_time:(()=>{const ce=new Date,J=ce.getFullYear(),de=String(ce.getMonth()+1).padStart(2,"0"),D=String(ce.getDate()).padStart(2,"0");return`${J}-${de}-${D}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[U,ye]=h.useState(K);h.useEffect(()=>{const ce=W.state,J=ce?.callID;if(J&&!ce?.openCallModal){I(J),X(W.pathname,{replace:!0,state:{}});return}!ce?.openCallModal||!ce?.initialCallData||ce.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ce.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ye(de=>({...de,...ce.initialCallData,relatedTo1:ce.initialCallData.relatedTo1?String(ce.initialCallData.relatedTo1):"",relatedTo2:ce.initialCallData.relatedTo2?String(ce.initialCallData.relatedTo2):""})),X(W.pathname,{replace:!0,state:{}}))},[W.state,o]),h.useEffect(()=>{if(P&&u.length>0&&!R){const ce=u.find(J=>J.id===P);ce?s(ce):G.error("Call not found."),I(null)}},[P,u,R]);const pe=async()=>{try{z(!0);const ce=await ae.get("/calls/admin/fetch-all"),de=[...Array.isArray(ce.data)?ce.data:[]].sort((D,B)=>{const ie=D?.created_at?new Date(D.created_at):0;return(B?.created_at?new Date(B.created_at):0)-ie});f(de)}catch(ce){console.error("Error fetching calls:",ce),G.error("Failed to load calls")}finally{z(!1)}},Ne=async()=>{try{const ce=await ae.get("/users/all");x(ce.data)}catch(ce){console.error("Error fetching users: ",ce)}};h.useEffect(()=>{Ne(),pe()},[]);const Se=[],[Oe,ke]=h.useState(""),[he,qe]=h.useState("Filter by Status"),[Ce,xe]=h.useState("Filter by Users"),[ee,Ee]=h.useState(1),[Ae,Re]=h.useState(10),et=u,De=Math.max(1,Math.ceil(et.length/Ae)||1);h.useEffect(()=>{Ee(1)},[Oe,he,Ae]),h.useEffect(()=>{Ee(ce=>{const J=Math.max(1,Math.ceil(et.length/Ae)||1);return ce>J?J:ce})},[et.length,Ae]);const tt=h.useMemo(()=>{const ce=(ee-1)*Ae;return et.slice(ce,ce+Ae)},[et,ee,Ae]),Je=()=>Ee(ce=>Math.max(ce-1,1)),H=()=>Ee(ce=>Math.min(ce+1,De)),be=u.length,le=u.filter(ce=>df(ce.status)==="PLANNED").length,Z=u.filter(ce=>df(ce.status)==="HELD").length,_e=u.filter(ce=>df(ce.status)==="NOT_HELD").length,te=[{title:"Total",value:be,icon:$s,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:le,icon:Gs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Z,icon:pa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:_e,icon:Rs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Ue,Ie]=h.useState("Overview"),Ge=ce=>{const{name:J,value:de}=ce.target;ye(D=>{const B={...D,[J]:de};return J==="relatedType1"&&(B.relatedTo1="",de==="Lead"?(B.relatedType2=null,B.relatedTo2=null,d([])):de==="Account"&&(B.relatedType2="Contact")),J==="relatedType2"&&(B.relatedTo2=""),B})};h.useEffect(()=>{const ce=async()=>{try{l([]);let J;U.relatedType1==="Lead"?J=await ae.get("/leads/admin/getLeads"):U.relatedType1==="Account"&&(J=await ae.get("/accounts/admin/fetch-all"));let de=[];if(J&&Array.isArray(J.data)?de=J.data:de=[],v&&U.relatedTo1)try{let D;U.relatedType1==="Lead"?D=await ae.get(`/leads/get/${U.relatedTo1}`):U.relatedType1==="Account"&&(D=await ae.get(`/accounts/get/${U.relatedTo1}`)),D&&D.data&&(de.some(ie=>String(ie.id)===String(U.relatedTo1))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}l(de)}catch(J){console.error("Error fetching data:",J),l([])}};U.relatedType1&&ce()},[U.relatedType1,v,U.relatedTo1]),h.useEffect(()=>{const ce=async()=>{try{d([]);let J;if(U.relatedType1==="Account"&&U.relatedTo1)U.relatedType2==="Contact"?J=await ae.get(`/contacts/from-acc/${U.relatedTo1}`):U.relatedType2==="Deal"?J=await ae.get(`/deals/from-acc/${U.relatedTo1}`):U.relatedType2==="Quote"&&(J=await ae.get(`/quotes/from-acc/${U.relatedTo1}`));else{d([]);return}let de=[];if(J&&Array.isArray(J.data)?de=J.data:de=[],v&&U.relatedTo2)try{let D;U.relatedType2==="Contact"?D=await ae.get(`/contacts/get/${U.relatedTo2}`):U.relatedType2==="Deal"?D=await ae.get(`/deals/get/${U.relatedTo2}`):U.relatedType2==="Quote"&&(D=await ae.get(`/quotes/get/${U.relatedTo2}`)),D&&D.data&&(de.some(ie=>String(ie.id)===String(U.relatedTo2))||(de=[D.data,...de]))}catch(D){console.error("Error fetching specific related item:",D)}d(de)}catch(J){console.error("Error fetching data:",J),d([])}};U.relatedType2&&ce()},[U.relatedType2,U.relatedTo1,U.relatedType1,v,U.relatedTo2]);const[gt,ve]=h.useState(!1),Be=ce=>{ce.preventDefault(),ve(!0);const J=U.subject;if(!J||J.trim()===""){G.error("Subject is required.");return}if(!U.relatedTo1){G.error(`Please select a ${U.relatedType1||"Lead/Account"}.`);return}if(!U.assigned_to){G.error("Subject is required.");return}const D={...U,duration_minutes:U.duration_minutes?parseInt(U.duration_minutes,10):null,relatedTo1:U.relatedTo1?parseInt(U.relatedTo1,10):null,relatedTo2:U.relatedType1==="Lead"?null:U.relatedTo2?parseInt(U.relatedTo2,10):null,relatedType2:U.relatedType1==="Lead"?null:U.relatedType2,assigned_to:U.assigned_to?parseInt(U.assigned_to,10):null},B=v&&b?"update":"create",ie=(U.subject||"").trim()||"Untitled Call";i({title:B==="create"?"Confirm New Call":"Confirm Update",message:B==="create"?`Create "${ie}"?`:`Save changes to "${ie}"?`,confirmLabel:B==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:B,payload:D,targetId:b||null,name:ie}})},nt=ce=>s(ce),Te=()=>{t(!1),N(!1),C(null)},Qe=async()=>{if(!r?.action){i(null);return}const{action:ce}=r,{type:J,payload:de,targetId:D,name:B}=ce;k(!0);try{if(J==="create")S(!0),await ae.post("/calls/create",de),G.success(`Call "${B}" created successfully.`),t(!1),ye(K),N(!1),C(null),await pe();else if(J==="update"){if(!D)throw new Error("Missing call identifier for update.");S(!0),await ae.put(`/calls/${D}`,de),G.success(`Call "${B}" updated successfully.`),t(!1),ye(K),N(!1),C(null),await pe()}else if(J==="delete"){if(!D)throw new Error("Missing call identifier for deletion.");await ae.delete(`/calls/${D}`),G.success(`Call "${B}" deleted successfully.`),a?.id===D&&s(null),await pe()}}catch(ie){const ue=J==="create"?"Failed to create call. Please review the details and try again.":J==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",se=ie?.response?.data?.detail||ue;G.error(se)}finally{(J==="create"||J==="update")&&S(!1),k(!1),i(null)}},ct=()=>{A||i(null)},ht=async()=>{if(a?.id)try{M(!0),await ae.put(`/calls/${a.id}`,{status:_}),G.success(`Status updated to ${gT(_)}`),f(ce=>Array.isArray(ce)?ce.map(J=>J.id===a.id?{...J,status:_}:J):ce),s(null)}catch(ce){const J=ce.response?.data?.detail||"Failed to update status.";G.error(J)}finally{M(!1)}};h.useEffect(()=>{a&&E(df(a.status))},[a]);const je=a?n.jsxs("div",{id:"callModalBackdrop",onClick:ce=>ce.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[R&&n.jsx(Bt,{message:"Loading call details..."}),n.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[n.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[n.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),n.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:n.jsx(Kn,{size:25})})]}),n.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:a.subject}),n.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${YB(a.status)}`,children:gT(a.status)})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ce=ie=>{if(!ie)return"";const ue=new Date(ie),se=ue.getFullYear(),Pe=String(ue.getMonth()+1).padStart(2,"0"),ge=String(ue.getDate()).padStart(2,"0"),fe=String(ue.getHours()).padStart(2,"0"),Fe=String(ue.getMinutes()).padStart(2,"0");return`${se}-${Pe}-${ge}T${fe}:${Fe}`},J=a.lead?"Lead":a.account?"Account":"Lead",de=a.lead?a.lead.id:a.account?a.account.id:null,D=J==="Lead"?null:a.contact?"Contact":a.deal?"Deal":a.quote?"Quote":"Contact",B=J==="Lead"?null:a.contact?a.contact.id:a.deal?a.deal.id:a.quote?a.quote.id:null;ye({subject:a.subject||"",call_time:ce(a.call_time),duration_minutes:a.duration_minutes?String(a.duration_minutes):"",direction:a.direction||"Outgoing",status:a.status||"Planned",notes:a.notes||"",relatedType1:J,relatedType2:D,relatedTo1:de?String(de):"",relatedTo2:B?String(B):"",assigned_to:a.call_assign_to?.id?String(a.call_assign_to.id):""}),N(!0),C(a.id),s(null),t(!0)},children:[n.jsx(ma,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ce=a.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ce}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:a.id,name:ce}})},children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]})}),n.jsx("div",{className:"border-b border-gray-200 my-5"}),n.jsxs("div",{className:"p-6 lg:p-4",children:[n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ce=>n.jsx("button",{onClick:()=>Ie(ce),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Ue===ce?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ce},ce))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsxs("div",{className:"lg:col-span-3",children:[Ue==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsx(ho,{label:"Call Time",value:KB(a.call_time)}),n.jsx(ho,{label:"Duration",value:a.duration_minutes?`${a.duration_minutes} min`:null}),n.jsx(ho,{label:"Direction",value:a.direction||"--"}),n.jsx(ho,{label:"Assigned To",value:`${a.call_assign_to.first_name} ${a.call_assign_to.last_name}`}),a.lead&&n.jsx(ho,{label:"Lead",value:a.lead.title}),a.account&&n.jsx(ho,{label:"Account",value:a.account.name}),a.contact&&n.jsx(ho,{label:"Contact",value:`${a.contact.first_name} ${a.contact.last_name}`}),a.deal&&n.jsx(ho,{label:"Deal",value:a.deal.name}),a.quote&&n.jsx(ho,{label:"Quote",value:ne(a.quote.quote_id)}),n.jsx(ho,{label:"Created At",value:KB(a.created_at)})]})}),Ue==="Notes"&&n.jsxs("div",{className:"mt-4 w-full",children:[n.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),n.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:a.notes||"No notes available."})]}),n.jsx(Aa,{comments:q,onAddComment:Q})]})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:_,onChange:ce=>E(ce.target.value),children:[n.jsx("option",{value:"PLANNED",children:"PLANNED"}),n.jsx("option",{value:"HELD",children:"HELD"}),n.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),n.jsx("button",{onClick:ht,disabled:T,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:T?"Updating...":"Update"})]})]})]})]})]}):null,Ze=e?n.jsx("div",{id:"modalBackdrop",onClick:ce=>ce.target.id==="modalBackdrop"&&Te(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[n.jsx("button",{onClick:()=>{Te(),ve(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[n.jsx(AWe,{label:"Subject",className:"md:col-span-2",name:"subject",value:U.subject,onChange:Ge,isSubmitted:gt,required:!0}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("div",{className:"relative w-25",children:[n.jsxs("select",{name:"relatedType1",onChange:Ge,value:U.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[n.jsx("option",{value:"Lead",children:"Lead"}),n.jsx("option",{value:"Account",children:"Account"})]}),n.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),n.jsx(pT,{items:Array.isArray(o)?o:[],value:U.relatedTo1??"",placeholder:`Search ${U.relatedType1||"here"}...`,getLabel:ce=>U.relatedType1==="Lead"?ce.title:ce.name??"",onChange:ce=>ye(J=>({...J,relatedTo1:ce})),required:!0,isSubmitted:gt,disabled:w})]}),n.jsxs("div",{className:"w-full flex flex-col",children:[n.jsxs("select",{name:"relatedType2",onChange:Ge,value:U.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:U.relatedType1==="Lead"||w,children:[n.jsx("option",{value:"Contact",children:"Contact"}),n.jsx("option",{value:"Deal",children:"Deal"}),n.jsx("option",{value:"Quote",children:"Quote"})]}),n.jsx(pT,{disabled:U.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:U.relatedTo2??"",placeholder:U.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${U.relatedType2||"Contact"}...`:`No ${U.relatedType2||""} data found`,getLabel:ce=>U.relatedType2==="Contact"?`${ce.first_name??""} ${ce.last_name??""}`.trim():U.relatedType2==="Quote"?ne(ce.quote_id)??"":ce.name??"",onChange:ce=>ye(J=>({...J,relatedTo2:ce}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),n.jsx("input",{type:"datetime-local",value:U.call_time,onChange:Ge,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),n.jsxs("div",{className:"w-full",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),n.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[n.jsx("input",{type:"tel",value:U.duration_minutes,onChange:Ge,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),n.jsx("p",{children:"minutes"})]})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",n.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),n.jsx(pT,{items:Array.isArray(p)?p:[],value:U.assigned_to??"",placeholder:"Search an account...",getLabel:ce=>`${ce.first_name} ${ce.last_name}`,onChange:ce=>ye(J=>({...J,assigned_to:ce})),required:!0,isSubmitted:gt})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),n.jsxs("select",{name:"direction",onChange:Ge,value:U.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Incoming",children:"Incoming"}),n.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),n.jsxs("select",{name:"status",onChange:Ge,value:U.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[n.jsx("option",{value:"Planned",children:"Planned"}),n.jsx("option",{value:"Held",children:"Held"}),n.jsx("option",{value:"Not held",children:"Not held"})]})]}),n.jsx(TWe,{className:"col-span-2",label:"Notes",value:U.notes,onChange:Ge,name:"notes"}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[n.jsx("button",{type:"button",onClick:()=>{Te(),ve(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx($s,{className:"mr-2 text-blue-600"})," Calls"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{onClick:()=>{ye(K),N(!1),C(null),t(!0),ve(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[n.jsx(yn,{className:"mr-2"})," Add Call"]})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:te.map(ce=>n.jsx(_We,{...ce},ce.title))}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Oe})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[n.jsxs("select",{defaultValue:he,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),jWe.map(ce=>n.jsx("option",{value:ce.value,children:ce.label},ce.value))]}),n.jsxs("select",{defaultValue:Ce,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[n.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Se.map(ce=>n.jsx("option",{value:ce.name,children:ce.name},ce.id))]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Subject"}),n.jsx("th",{className:"py-3 px-4",children:"Related To"}),n.jsx("th",{className:"py-3 px-4",children:"Call Time"}),n.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:R?n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"py-10",children:n.jsx(Bt,{message:"Loading calls..."})})}):tt.length>0?tt.map(ce=>n.jsxs("tr",{onClick:()=>nt(ce),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[n.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ce.subject||"--"}),n.jsxs("td",{className:"py-3 px-4",children:[ce.lead&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.lead.title}),ce.account&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.account.name}),ce.contact&&n.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ce.contact.first_name," ",ce.contact.last_name]}),ce.deal&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ce.deal.name}),ce.quote&&n.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ne(ce.quote.quote_id)})]}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce.call_time?new Date(ce.call_time).toLocaleString():"--"}),n.jsx("td",{className:"py-3 px-4 text-gray-800",children:ce?.call_assign_to?`${ce.call_assign_to.first_name} ${ce.call_assign_to.last_name}`:"--"}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${YB(ce.status)}`,children:gT(ce.status)})})]},ce.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),n.jsx(rn,{totalItems:et.length,pageSize:Ae,currentPage:ee,onPrev:Je,onNext:H,onPageSizeChange:Re,label:"calls"})]}),je,Ze,r&&n.jsx(EWe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,onConfirm:Qe,onCancel:ct,loading:A})]})}function _We({icon:e,title:t,value:a,color:s,bgColor:r}){return n.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[n.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:n.jsx(e,{size:22})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:a})]})]})}function AWe({label:e,name:t,value:a,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:d=""}){const u=c&&o&&!a;return n.jsxs("div",{className:d,children:[n.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:i,name:t,value:a??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${u?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function TWe(e){return n.jsxs("div",{className:e.className,children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),n.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function ho({label:e,value:t}){return n.jsxs("p",{children:[n.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",n.jsx("br",{}),n.jsx("span",{className:"break-words",children:t||"--"})]})}function EWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function pT({items:e=[],value:t="",onChange:a,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[d,u]=h.useState(!1),[f,p]=h.useState(""),x=h.useRef(null),v=e.find(w=>String(w.id)===String(t)),N=v?s(v):"",b=l&&c&&!t,C=h.useMemo(()=>{const w=f.trim().toLowerCase();return(w?e.filter(A=>(s(A)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,f,s,o]);return h.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),h.useEffect(()=>{d||p("")},[d]),n.jsxs("div",{ref:x,className:"relative w-full",children:[n.jsx("input",{disabled:i,value:d?f:N,placeholder:r,onFocus:()=>!i&&u(!0),onChange:w=>{p(w.target.value),d||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),d&&!i&&n.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[n.jsx("div",{className:"max-h-56 overflow-y-auto",children:C.length>0?C.map(w=>{const S=String(w.id),A=s(w),k=String(t)===S;return n.jsx("button",{type:"button",onClick:()=>{a(S),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:A||"--"},S)}):n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&n.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function kWe(){h.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=h.useState(null),[a,s]=h.useState(""),[r,i]=h.useState("Filter by Actions"),[o,l]=h.useState(1),[c,d]=h.useState(10),u=async()=>{try{const w=await ae.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};h.useEffect(()=>{u()},[]);const f=h.useMemo(()=>{if(!Array.isArray(e))return[];const w=a.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const _=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",E=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,T=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[_,T,k.action,k.entity_type,E,k.description],R=w===""||M.some(P=>P==null?!1:P.toString().toLowerCase().includes(w)),z=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return R&&z}).sort((k,_)=>{const E=k.timestamp?new Date(k.timestamp).getTime():0;return(_.timestamp?new Date(_.timestamp).getTime():0)-E})},[e,a,r]),p=Math.max(1,Math.ceil(f.length/c)||1);h.useEffect(()=>{l(1)},[a,c]),h.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(f.length/c)||1);return w>S?S:w})},[f.length,c]);const x=h.useMemo(()=>{const w=(o-1)*c;return f.slice(w,w+c)},[f,o,c]);f.length===0||(o-1)*c+1,Math.min(o*c,f.length);const v=()=>l(w=>Math.max(w-1,1)),N=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!f.length){Rx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=f.map(T=>[new Date(T.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${T.logger?.first_name||""} ${T.logger?.last_name||""}`.trim(),T.action,`${T.entity_type}: ${T.entity_id}`,T.description||""]),A=[w.join(","),...S.map(T=>T.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([A],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(k),E=document.createElement("a");E.href=_,E.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)},C=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&n.jsx(Bt,{message:"Loading audit logs..."}),n.jsx($x,{toastOptions:{duration:1e3}}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[n.jsx(Et,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(As,{className:"text-blue-600",size:20}),n.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[n.jsx(Yl,{className:"mr-2"}),"Export Logs"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search audit logs",value:a,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[n.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),n.jsx("option",{value:"CREATE",children:"CREATE"}),n.jsx("option",{value:"DELETE",children:"DELETE"}),n.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),n.jsx("th",{className:"py-3 px-4",children:"User"}),n.jsx("th",{className:"py-3 px-4",children:"Action"}),n.jsx("th",{className:"py-3 px-4",children:"Resource"}),n.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),n.jsx("tbody",{children:Array.isArray(f)&&f.length>0?x.map((w,S)=>n.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[n.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),n.jsx("td",{className:"py-3 px-4",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${C(w.action)}`,children:w.action})}),n.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),n.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):n.jsx("tr",{children:n.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),n.jsx(rn,{className:"mt-4",totalItems:f.length,pageSize:c,currentPage:o,onPrev:v,onNext:N,onPageSizeChange:d,label:"logs"})]})}const i1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],kg={firstName:"",lastName:"",email:"",password:"",role:""},LWe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Co=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",PWe=e=>{const t=Co(e),a=i1.find(s=>Co(s.value)===t);return a?a.value:e||""},Fk=e=>{const t=Co(e),a=i1.find(s=>Co(s.value)===t);return a?a.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},XB=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},xT=(e,{size:t="sm"}={})=>{const a=Co(e),s=LWe[a]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return n.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:Fk(e)})},DWe=(e,t)=>{const a=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${a}${s}`.toUpperCase()||"U"},ZB=e=>[...e].sort((t,a)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(a.created_at?new Date(a.created_at).getTime():0)-s});function OWe(){const{user:e,loading:t}=en(),[a,s]=h.useState([]),[r,i]=h.useState(!1),[o,l]=h.useState(""),[c,d]=h.useState(""),[u,f]=h.useState(null),[p,x]=h.useState(!1),[v,N]=h.useState(!1),[b,C]=h.useState(null),[w,S]=h.useState(kg),[A,k]=h.useState(!1),[_,E]=h.useState(null),[T,M]=h.useState(!1),[R,z]=h.useState(1),[P,I]=h.useState(10),[q,Q]=h.useState("Overview"),[V,X]=h.useState(""),[W,ne]=h.useState(!1),oe=Co(e?.role);console.log("meow",e);const K=["ADMIN","CEO","GROUP_MANAGER"].includes(oe),U=!t&&K,ye=h.useMemo(()=>{const te=i1.filter(Ue=>Co(Ue.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...te]},[]),pe=h.useCallback(te=>{te&&(s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!0}:Ie)),setTimeout(()=>{s(Ue=>Ue.map(Ie=>Ie.id===te?{...Ie,highlight:!1}:Ie))},2e3))},[]),Ne=h.useCallback(async()=>{i(!0);try{const te=await ae.get("/users/all"),Ue=Array.isArray(te.data)?te.data:[],Ie=ZB(Ue);s(Ie),f(Ge=>Ge&&(Ie.find(ve=>ve.id===Ge.id)||null)),console.log(te.data)}catch(te){console.error("Error fetching users:",te);const Ue=te.response?.data?.detail||"Failed to load users. Please try again later.";G.error(Ue)}finally{i(!1)}},[]);h.useEffect(()=>{!t&&!K&&e&&G.error("You are not authorized to access User Management.")},[K,t,e]),h.useEffect(()=>{t||!K||Ne()},[t,K,Ne]),h.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Se=h.useMemo(()=>{const te=o.trim().toLowerCase(),Ue=Co(c);return ZB(a.filter(Ie=>{if(!Ie)return!1;const Ge=te===""||[Ie.first_name,Ie.last_name,`${Ie.first_name||""} ${Ie.last_name||""}`,Ie.email,Fk(Ie.role)].filter(Boolean).some(ve=>ve.toString().toLowerCase().includes(te)),gt=Ue===""||Ue==="CEO"&&["CEO","ADMIN"].includes(Co(Ie.role))||Co(Ie.role)===Ue;return Ge&&gt}))},[a,o,c]),Oe=Math.max(1,Math.ceil(Se.length/P)||1);h.useEffect(()=>{z(1)},[o,c,P]),h.useEffect(()=>{z(te=>{const Ue=Math.max(1,Math.ceil(Se.length/P)||1);return te>Ue?Ue:te})},[Se.length,P]);const ke=h.useMemo(()=>{const te=(R-1)*P;return Se.slice(te,te+P)},[Se,R,P]);Se.length===0||(R-1)*P+1,Math.min(R*P,Se.length);const he=()=>z(te=>Math.max(te-1,1)),qe=()=>z(te=>Math.min(te+1,Oe)),Ce=()=>{S(kg),N(!1),C(null),x(!0)},xe=te=>{f(te),Q("Overview"),X(te?.is_active?"Active":"Inactive")},ee=te=>{te.target.id==="userModalBackdrop"&&!T&&Ee()},Ee=()=>{f(null)},Ae=(te,Ue)=>{S(Ie=>({...Ie,[te]:Ue}))},Re=()=>{const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let Ue="";for(let Ie=0;Ie<10;Ie+=1)Ue+=te.charAt(Math.floor(Math.random()*te.length));Ae("password",Ue)},et=()=>{A||T||(x(!1),S(kg),C(null),N(!1))},De=te=>{S({firstName:te.first_name||"",lastName:te.last_name||"",email:te.email||"",password:"",role:PWe(te.role)}),N(!0),C(te.id),x(!0),f(null)},tt=te=>{E({title:"Delete User",message:n.jsxs("span",{children:["Are you sure you want to delete"," ",n.jsxs("span",{className:"font-semibold",children:[te.first_name," ",te.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:te.id,name:`${te.first_name||""} ${te.last_name||""}`.trim()||te.email||"user"}})},Je=te=>{te.preventDefault();const Ue=w.firstName.trim(),Ie=w.lastName.trim(),Ge=w.email.trim(),gt=w.password.trim(),ve=w.role,Be=!(v&&b);if(!Ue||!Ge||!ve){G.warn("Please fill in all required fields.");return}if(Be&&!gt){G.warn("Please fill in all required fields.");return}if(gt&&gt.length<8){G.warn("Password should be at least 8 characters long.");return}const nt={first_name:Ue,last_name:Ie,email:Ge,role:ve};(Be||gt)&&(nt.password=gt);const Te=`${Ue} ${Ie}`.trim(),Qe=Be?"create":"update";E({title:Qe==="create"?"Confirm New User":"Confirm User Update",message:Qe==="create"?n.jsxs("span",{children:["Create user ",n.jsx("span",{className:"font-semibold",children:Te})," with role"," ",n.jsx("span",{className:"font-semibold",children:Fk(ve)}),"?"]}):n.jsxs("span",{children:["Save changes for"," ",n.jsx("span",{className:"font-semibold",children:Te||Ge}),"?"]}),confirmLabel:Qe==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:nt,targetId:b,name:Te||Ge}})},H=async()=>{if(!_?.action){E(null);return}const{action:te}=_,{type:Ue,payload:Ie,targetId:Ge,name:gt}=te;M(!0),(Ue==="create"||Ue==="update")&&k(!0);try{if(Ue==="create"){const Be=(await ae.post("/users/createuser",Ie)).data;await Ne(),pe(Be.id),G.success(`User "${gt}" created successfully.`),x(!1),S(kg),C(null),N(!1)}else if(Ue==="update"){if(!Ge)throw new Error("Missing user identifier for update.");const Be=(await ae.put(`/users/updateuser/${Ge}`,Ie)).data;await Ne(),f(null),pe(Be.id),G.success(`User "${gt}" updated successfully.`),x(!1),S(kg),C(null),N(!1)}else if(Ue==="delete"){if(!Ge)throw new Error("Missing user identifier for deletion.");await ae.delete(`/users/deleteuser/${Ge}`),s(ve=>ve.map(Be=>Be.id===Ge?{...Be,is_active:!1}:Be)),u&&u.id===Ge&&(f(null),X("")),G.success(`User "${gt}" deactivated successfully.`)}}catch(ve){console.error("User management error:",ve);const Be=Ue==="create"?"Failed to create user. Please review the details and try again.":Ue==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",nt=ve.response?.data?.detail||Be;G.error(nt)}finally{(Ue==="create"||Ue==="update")&&k(!1),M(!1),E(null)}},be=()=>{T||E(null)},le=async()=>{if(!u||!V)return;const te=u.is_active?"Active":"Inactive";if(V===te)return;const Ue=V==="Active";ne(!0);try{const Ge=(await ae.put(`/users/updateuser/${u.id}`,{is_active:Ue})).data;s(gt=>gt.map(ve=>ve.id===Ge.id?Ge:ve)),f(null),X(""),G.success(`User status updated to ${V}`)}catch(Ie){console.error("Failed to update user status:",Ie);const Ge=Ie.response?.data?.detail||"Failed to update user status. Please try again.";G.error(Ge)}finally{ne(!1)}},Z=n.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!U)&&n.jsx(Bt,{}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[n.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[n.jsx(qw,{className:"mr-2 text-blue-600"}),"User Management"]}),n.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:n.jsxs("button",{type:"button",onClick:Ce,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[n.jsx(Yn,{className:"mr-2"})," Add User"]})})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[n.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[n.jsx(Gt,{size:20,className:"text-gray-400 mr-3"}),n.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:te=>l(te.target.value),className:"focus:outline-none text-base w-full"})]}),n.jsx("div",{className:"w-full lg:w-1/4",children:n.jsx("select",{value:c,onChange:te=>d(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ye.map(te=>n.jsx("option",{value:te.value,children:te.label},te.value))})})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[n.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:n.jsxs("tr",{children:[n.jsx("th",{className:"py-3 px-4",children:"Fullname"}),n.jsx("th",{className:"py-3 px-4",children:"Email"}),n.jsx("th",{className:"py-3 px-4",children:"Role"}),n.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),n.jsx("tbody",{children:r?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Se.length===0?n.jsx("tr",{children:n.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):ke.map(te=>n.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${te.highlight?"bg-green-50":""} ${te.is_active?"":"opacity-60 bg-gray-50"}`,children:[n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[te.first_name," ",te.last_name]})}),n.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>xe(te),children:te.email}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:xT(te.role)}),n.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>xe(te),children:n.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${te.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:te.is_active?"Active":"Inactive"})})]},te.id))})]})}),n.jsx(rn,{className:"mt-4",totalItems:Se.length,pageSize:P,currentPage:R,onPrev:he,onNext:qe,onPageSizeChange:I,label:"users"})]}),_e=u?n.jsx("div",{id:"userModalBackdrop",onClick:ee,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[n.jsx("div",{className:"flex justify-end w-full",children:n.jsx("button",{onClick:Ee,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:n.jsx(Kn,{size:30})})}),n.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[u.profile_picture?n.jsx("img",{src:u.profile_picture,alt:`${u.first_name} ${u.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):n.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:DWe(u.first_name,u.last_name)}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),n.jsx("p",{className:"text-sm text-gray-500 break-all",children:u.email})]})]}),xT(u.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(u.role.toUpperCase())&&n.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>De(u),disabled:T,children:[n.jsx(ha,{className:"mr-2"}),"Edit"]}),n.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>tt(u),disabled:T,children:[n.jsx(Wt,{className:"mr-2"}),"Delete"]})]})]}),n.jsx("div",{className:"border-b border-gray-200 mb-6"}),n.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(te=>n.jsx("button",{onClick:()=>Q(te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${q===te?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:te},te))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[n.jsx("div",{className:"lg:col-span-3",children:q==="Overview"&&n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Email:"}),n.jsx("p",{children:u.email||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Role:"}),n.jsx("p",{children:xT(u.role,{size:"sm"})})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Status:"}),n.jsx("p",{children:u.is_active?"Active":"Inactive"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),n.jsx("p",{children:u.auth_provider?u.auth_provider.toString().replace(/\b\w/g,te=>te.toUpperCase()):"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Phone Number:"}),n.jsx("p",{children:u.phone_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company:"}),n.jsx("p",{children:u.company?.company_name||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Company Number:"}),n.jsx("p",{children:u.company?.company_number||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),n.jsx("p",{children:u.manager?`${u.manager.first_name} ${u.manager.last_name}`:"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Created At:"}),n.jsx("p",{children:XB(u.created_at)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Last Login:"}),n.jsx("p",{children:u.last_login?XB(u.last_login):"Never"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),n.jsx("p",{children:u.profile_picture?n.jsx("a",{href:u.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),n.jsxs("div",{className:"flex flex-col gap-4",children:[n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),n.jsx("div",{className:"flex flex-col gap-2 w-full",children:n.jsxs("button",{type:"button",onClick:()=>{if(!u.email){alert("No email address available");return}const te=encodeURIComponent(u.email),Ue=encodeURIComponent(""),Ie=encodeURIComponent(""),Ge=`https://mail.google.com/mail/?view=cm&fs=1&to=${te}&su=${Ue}&body=${Ie}`;window.open(Ge,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[n.jsx(na,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),n.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),n.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:V||(u.is_active?"Active":"Inactive"),onChange:te=>X(te.target.value),children:[n.jsx("option",{value:"Active",children:"Active"}),n.jsx("option",{value:"Inactive",children:"Inactive"})]}),n.jsx("button",{onClick:le,disabled:W||V===(u.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${W||V===(u.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:W?"Updating...":"Update"})]})]})]})]})}):null;return n.jsxs(n.Fragment,{children:[Z,_e,n.jsx(MWe,{open:p,isEditing:v,isSubmitting:A,confirmProcessing:T,formData:w,onClose:et,onSubmit:Je,onChange:Ae,onGeneratePassword:Re}),n.jsx(IWe,{open:!!_,title:_?.title,message:_?.message,confirmLabel:_?.confirmLabel,cancelLabel:_?.cancelLabel,variant:_?.variant,loading:T,onConfirm:H,onCancel:be})]})}function MWe({open:e,isEditing:t,isSubmitting:a,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const d=a||s;return n.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[n.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:d,children:n.jsx(Yt,{size:22})}),n.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),n.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[n.jsx(Ob,{label:"First Name",value:r.firstName,onChange:u=>l("firstName",u),placeholder:"John",required:!0,disabled:d}),n.jsx(Ob,{label:"Last Name",value:r.lastName,onChange:u=>l("lastName",u),placeholder:"Doe",required:!0,disabled:d}),n.jsx(Ob,{label:"Email",type:"email",value:r.email,onChange:u=>l("email",u),placeholder:"john.doe@company.com",required:!0,disabled:d||t}),n.jsx(Ob,{label:"Role",type:"select",value:r.role,onChange:u=>l("role",u),options:[{value:"",label:"Select role"},...i1],required:!0,disabled:d}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[n.jsx("input",{type:"text",value:r.password,onChange:u=>l("password",u.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:d,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),n.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:d,children:"Generate"})]}),t?n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[n.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:d,children:"Cancel"}),n.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:d,children:a?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Ob({label:e,type:t="text",value:a,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?n.jsx("select",{value:a??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>n.jsx("option",{value:c.value,children:c.label},c.value))}):n.jsx("input",{type:t,value:a??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function IWe({open:e,title:t,message:a,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const d=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:n.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),n.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:a}),n.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[n.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),n.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${d}`,disabled:o,children:o?"Processing...":s})]})]})})}function $We(){return n.jsxs(Yae,{children:[n.jsx(Rse,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),n.jsxs(Cae,{children:[n.jsx(yt,{path:"/",element:n.jsx(Bie,{})}),n.jsx(yt,{path:"/header",element:n.jsx(e9,{})}),n.jsx(yt,{path:"/signup",element:n.jsx(Fde,{})}),n.jsx(yt,{path:"/login",element:n.jsx(Hde,{})}),n.jsx(yt,{path:"/forgot-password",element:n.jsx(Wde,{})}),n.jsx(yt,{path:"/admin/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"ceo",children:n.jsx(kb,{})})}),n.jsx(yt,{path:"/sales/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"sales",children:n.jsx(kb,{})})}),n.jsx(yt,{path:"/manager/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"manager",children:n.jsx(kb,{})})}),n.jsx(yt,{path:"/group-manager/quotes/:quoteId/print",element:n.jsx(ul,{requiredRole:"group manager",children:n.jsx(kb,{})})}),n.jsxs(yt,{path:"/admin",element:n.jsx(ul,{requiredRole:"ceo",children:n.jsx(Yde,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(oi,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(O1e,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(eCe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(sCe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(uCe,{})}),n.jsx(yt,{path:"leads/:leadID",element:n.jsx(GV,{})}),n.jsx(yt,{path:"audit",element:n.jsx(nSe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(r$e,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(m$e,{})}),n.jsx(yt,{path:"users",element:n.jsx(v$e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(C$e,{})}),n.jsx(yt,{path:"company-details",element:n.jsx(sze,{})}),n.jsx(yt,{path:"deals",element:n.jsx(S$e,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(sZ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(aZ,{})}),n.jsx(yt,{path:"tasks",element:n.jsx($Re,{})}),n.jsxs(yt,{path:"/admin/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"calls",element:n.jsx(B7,{})}),n.jsx(yt,{path:"calls/info",element:n.jsx(B7,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(H7,{})}),n.jsx(yt,{path:"meetings/info",element:n.jsx(H7,{})}),n.jsx(yt,{path:"help",element:n.jsx(rze,{})})]}),n.jsxs(yt,{path:"/sales",element:n.jsx(ul,{requiredRole:"sales",children:n.jsx(oze,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(oi,{to:"overview",replace:!0})}),n.jsx(yt,{path:"overview",element:n.jsx(Ize,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(zze,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(Hze,{})}),n.jsx(yt,{path:"leads",element:n.jsx(Kze,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(BZ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(aUe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(sUe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(qZ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(HZ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(pUe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(wUe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(NUe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Py,{})}),n.jsxs(yt,{path:"/sales/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(PUe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(IUe,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(_Ue,{})})]}),n.jsxs(yt,{path:"/manager",element:n.jsx(ul,{requiredRole:"manager",children:n.jsx(BUe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(oi,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(xFe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(vFe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(CFe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(LFe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(JZ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(RFe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(zFe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(tJ,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(eJ,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(XFe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(n7e,{})}),n.jsx(yt,{path:"meetings",element:n.jsx(v7e,{})}),n.jsx(yt,{path:"audit",element:n.jsx(a7e,{})}),n.jsx(yt,{path:"calls",element:n.jsx(i7e,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(h7e,{})}),n.jsxs(yt,{path:"/manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"users",element:n.jsx(S7e,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Py,{})})]}),n.jsx(yt,{children:n.jsxs(yt,{path:"/marketing",element:n.jsx(ul,{requiredRole:"marketing",children:n.jsx(E7e,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(oi,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(Aqe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(Tqe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(kqe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(Iqe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(KJ,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(YJ,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(Uqe,{})}),n.jsx(yt,{path:"campaigns",element:n.jsx(Hqe,{})}),n.jsx(yt,{path:"templates",element:n.jsx(Gqe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Py,{})})]})}),n.jsxs(yt,{path:"/group-manager",element:n.jsx(ul,{requiredRole:"group manager",children:n.jsx(Yqe,{})}),children:[n.jsx(yt,{index:!0,element:n.jsx(oi,{to:"dashboard",replace:!0})}),n.jsx(yt,{path:"dashboard",element:n.jsx(CGe,{})}),n.jsx(yt,{path:"accounts",element:n.jsx(AGe,{})}),n.jsx(yt,{path:"contacts",element:n.jsx(LGe,{})}),n.jsx(yt,{path:"leads",element:n.jsx(RGe,{})}),n.jsx(yt,{path:"leads/info",element:n.jsx(aee,{})}),n.jsx(yt,{path:"leads/convert",element:n.jsx(GGe,{})}),n.jsx(yt,{path:"deals",element:n.jsx(VGe,{})}),n.jsx(yt,{path:"deals/info",element:n.jsx(ree,{})}),n.jsx(yt,{path:"deals/quickaction",element:n.jsx(see,{})}),n.jsx(yt,{path:"quotes",element:n.jsx(iWe,{})}),n.jsx(yt,{path:"targets",element:n.jsx(uWe,{})}),n.jsx(yt,{path:"tasks",element:n.jsx(gWe,{})}),n.jsxs(yt,{path:"/group-manager/territory",children:[n.jsx(yt,{index:!0,element:n.jsx($c,{})}),n.jsx(yt,{path:":id",element:n.jsx($c,{})})]}),n.jsx(yt,{path:"meetings",element:n.jsx(wWe,{})}),n.jsx(yt,{path:"calls",element:n.jsx(SWe,{})}),n.jsx(yt,{path:"audit",element:n.jsx(kWe,{})}),n.jsx(yt,{path:"users",element:n.jsx(OWe,{})}),n.jsx(yt,{path:"manage-account",element:n.jsx(Py,{})})]})]})]})}Sne.createRoot(document.getElementById("root")).render(n.jsx(h.StrictMode,{children:n.jsx($We,{})}));
