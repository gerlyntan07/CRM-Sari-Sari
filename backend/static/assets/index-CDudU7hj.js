function Rae(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function eo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HS={exports:{}},cg={};var rI;function zae(){if(rI)return cg;rI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,r,i){var o=null;if(i!==void 0&&(o=""+i),r.key!==void 0&&(o=""+r.key),"key"in r){i={};for(var l in r)l!=="key"&&(i[l]=r[l])}else i=r;return r=i.ref,{$$typeof:e,type:s,key:o,ref:r!==void 0?r:null,props:i}}return cg.Fragment=t,cg.jsx=n,cg.jsxs=n,cg}var iI;function Fae(){return iI||(iI=1,HS.exports=zae()),HS.exports}var a=Fae(),qS={exports:{}},aa={};var oI;function Uae(){if(oI)return aa;oI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function x(Z){return Z===null||typeof Z!="object"?null:(Z=p&&Z[p]||Z["@@iterator"],typeof Z=="function"?Z:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function N(Z,ne,pe){this.props=Z,this.context=ne,this.refs=b,this.updater=pe||v}N.prototype.isReactComponent={},N.prototype.setState=function(Z,ne){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,ne,"setState")},N.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function w(){}w.prototype=N.prototype;function S(Z,ne,pe){this.props=Z,this.context=ne,this.refs=b,this.updater=pe||v}var _=S.prototype=new w;_.constructor=S,j(_,N.prototype),_.isPureReactComponent=!0;var k=Array.isArray;function T(){}var A={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function M(Z,ne,pe){var Ne=pe.ref;return{$$typeof:e,type:Z,key:ne,ref:Ne!==void 0?Ne:null,props:pe}}function O(Z,ne){return M(Z.type,ne,Z.props)}function I(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e}function D(Z){var ne={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(pe){return ne[pe]})}var H=/\/+/g;function W(Z,ne){return typeof Z=="object"&&Z!==null&&Z.key!=null?D(""+Z.key):ne.toString(36)}function z(Z){switch(Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason;default:switch(typeof Z.status=="string"?Z.then(T,T):(Z.status="pending",Z.then(function(ne){Z.status==="pending"&&(Z.status="fulfilled",Z.value=ne)},function(ne){Z.status==="pending"&&(Z.status="rejected",Z.reason=ne)})),Z.status){case"fulfilled":return Z.value;case"rejected":throw Z.reason}}throw Z}function Q(Z,ne,pe,Ne,de){var be=typeof Z;(be==="undefined"||be==="boolean")&&(Z=null);var oe=!1;if(Z===null)oe=!0;else switch(be){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(Z.$$typeof){case e:case t:oe=!0;break;case d:return oe=Z._init,Q(oe(Z._payload),ne,pe,Ne,de)}}if(oe)return de=de(Z),oe=Ne===""?"."+W(Z,0):Ne,k(de)?(pe="",oe!=null&&(pe=oe.replace(H,"$&/")+"/"),Q(de,ne,pe,"",function(Oe){return Oe})):de!=null&&(I(de)&&(de=O(de,pe+(de.key==null||Z&&Z.key===de.key?"":(""+de.key).replace(H,"$&/")+"/")+oe)),ne.push(de)),1;oe=0;var Te=Ne===""?".":Ne+":";if(k(Z))for(var ue=0;ue<Z.length;ue++)Ne=Z[ue],be=Te+W(Ne,ue),oe+=Q(Ne,ne,pe,be,de);else if(ue=x(Z),typeof ue=="function")for(Z=ue.call(Z),ue=0;!(Ne=Z.next()).done;)Ne=Ne.value,be=Te+W(Ne,ue++),oe+=Q(Ne,ne,pe,be,de);else if(be==="object"){if(typeof Z.then=="function")return Q(z(Z),ne,pe,Ne,de);throw ne=String(Z),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return oe}function J(Z,ne,pe){if(Z==null)return Z;var Ne=[],de=0;return Q(Z,Ne,"","",function(be){return ne.call(pe,be,de++)}),Ne}function Y(Z){if(Z._status===-1){var ne=Z._result;ne=ne(),ne.then(function(pe){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=pe)},function(pe){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=pe)}),Z._status===-1&&(Z._status=0,Z._result=ne)}if(Z._status===1)return Z._result.default;throw Z._result}var re=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)},we={map:J,forEach:function(Z,ne,pe){J(Z,function(){ne.apply(this,arguments)},pe)},count:function(Z){var ne=0;return J(Z,function(){ne++}),ne},toArray:function(Z){return J(Z,function(ne){return ne})||[]},only:function(Z){if(!I(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}};return aa.Activity=h,aa.Children=we,aa.Component=N,aa.Fragment=n,aa.Profiler=r,aa.PureComponent=S,aa.StrictMode=s,aa.Suspense=c,aa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,aa.__COMPILER_RUNTIME={__proto__:null,c:function(Z){return A.H.useMemoCache(Z)}},aa.cache=function(Z){return function(){return Z.apply(null,arguments)}},aa.cacheSignal=function(){return null},aa.cloneElement=function(Z,ne,pe){if(Z==null)throw Error("The argument must be a React element, but you passed "+Z+".");var Ne=j({},Z.props),de=Z.key;if(ne!=null)for(be in ne.key!==void 0&&(de=""+ne.key),ne)!E.call(ne,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&ne.ref===void 0||(Ne[be]=ne[be]);var be=arguments.length-2;if(be===1)Ne.children=pe;else if(1<be){for(var oe=Array(be),Te=0;Te<be;Te++)oe[Te]=arguments[Te+2];Ne.children=oe}return M(Z.type,de,Ne)},aa.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null},Z.Provider=Z,Z.Consumer={$$typeof:i,_context:Z},Z},aa.createElement=function(Z,ne,pe){var Ne,de={},be=null;if(ne!=null)for(Ne in ne.key!==void 0&&(be=""+ne.key),ne)E.call(ne,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(de[Ne]=ne[Ne]);var oe=arguments.length-2;if(oe===1)de.children=pe;else if(1<oe){for(var Te=Array(oe),ue=0;ue<oe;ue++)Te[ue]=arguments[ue+2];de.children=Te}if(Z&&Z.defaultProps)for(Ne in oe=Z.defaultProps,oe)de[Ne]===void 0&&(de[Ne]=oe[Ne]);return M(Z,be,de)},aa.createRef=function(){return{current:null}},aa.forwardRef=function(Z){return{$$typeof:l,render:Z}},aa.isValidElement=I,aa.lazy=function(Z){return{$$typeof:d,_payload:{_status:-1,_result:Z},_init:Y}},aa.memo=function(Z,ne){return{$$typeof:u,type:Z,compare:ne===void 0?null:ne}},aa.startTransition=function(Z){var ne=A.T,pe={};A.T=pe;try{var Ne=Z(),de=A.S;de!==null&&de(pe,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(T,re)}catch(be){re(be)}finally{ne!==null&&pe.types!==null&&(ne.types=pe.types),A.T=ne}},aa.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},aa.use=function(Z){return A.H.use(Z)},aa.useActionState=function(Z,ne,pe){return A.H.useActionState(Z,ne,pe)},aa.useCallback=function(Z,ne){return A.H.useCallback(Z,ne)},aa.useContext=function(Z){return A.H.useContext(Z)},aa.useDebugValue=function(){},aa.useDeferredValue=function(Z,ne){return A.H.useDeferredValue(Z,ne)},aa.useEffect=function(Z,ne){return A.H.useEffect(Z,ne)},aa.useEffectEvent=function(Z){return A.H.useEffectEvent(Z)},aa.useId=function(){return A.H.useId()},aa.useImperativeHandle=function(Z,ne,pe){return A.H.useImperativeHandle(Z,ne,pe)},aa.useInsertionEffect=function(Z,ne){return A.H.useInsertionEffect(Z,ne)},aa.useLayoutEffect=function(Z,ne){return A.H.useLayoutEffect(Z,ne)},aa.useMemo=function(Z,ne){return A.H.useMemo(Z,ne)},aa.useOptimistic=function(Z,ne){return A.H.useOptimistic(Z,ne)},aa.useReducer=function(Z,ne,pe){return A.H.useReducer(Z,ne,pe)},aa.useRef=function(Z){return A.H.useRef(Z)},aa.useState=function(Z){return A.H.useState(Z)},aa.useSyncExternalStore=function(Z,ne,pe){return A.H.useSyncExternalStore(Z,ne,pe)},aa.useTransition=function(){return A.H.useTransition()},aa.version="19.2.0",aa}var lI;function Vf(){return lI||(lI=1,qS.exports=Uae()),qS.exports}var f=Vf();const bt=eo(f),Au=Rae({__proto__:null,default:bt},[f]);var GS={exports:{}},dg={},WS={exports:{}},VS={};var cI;function Bae(){return cI||(cI=1,(function(e){function t(Q,J){var Y=Q.length;Q.push(J);e:for(;0<Y;){var re=Y-1>>>1,we=Q[re];if(0<r(we,J))Q[re]=J,Q[Y]=we,Y=re;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var J=Q[0],Y=Q.pop();if(Y!==J){Q[0]=Y;e:for(var re=0,we=Q.length,Z=we>>>1;re<Z;){var ne=2*(re+1)-1,pe=Q[ne],Ne=ne+1,de=Q[Ne];if(0>r(pe,Y))Ne<we&&0>r(de,pe)?(Q[re]=de,Q[Ne]=Y,re=Ne):(Q[re]=pe,Q[ne]=Y,re=ne);else if(Ne<we&&0>r(de,Y))Q[re]=de,Q[Ne]=Y,re=Ne;else break e}}return J}function r(Q,J){var Y=Q.sortIndex-J.sortIndex;return Y!==0?Y:Q.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,p=3,x=!1,v=!1,j=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(Q){for(var J=n(u);J!==null;){if(J.callback===null)s(u);else if(J.startTime<=Q)s(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=n(u)}}function k(Q){if(j=!1,_(Q),!v)if(n(c)!==null)v=!0,T||(T=!0,D());else{var J=n(u);J!==null&&z(k,J.startTime-Q)}}var T=!1,A=-1,E=5,M=-1;function O(){return b?!0:!(e.unstable_now()-M<E)}function I(){if(b=!1,T){var Q=e.unstable_now();M=Q;var J=!0;try{e:{v=!1,j&&(j=!1,w(A),A=-1),x=!0;var Y=p;try{t:{for(_(Q),h=n(c);h!==null&&!(h.expirationTime>Q&&O());){var re=h.callback;if(typeof re=="function"){h.callback=null,p=h.priorityLevel;var we=re(h.expirationTime<=Q);if(Q=e.unstable_now(),typeof we=="function"){h.callback=we,_(Q),J=!0;break t}h===n(c)&&s(c),_(Q)}else s(c);h=n(c)}if(h!==null)J=!0;else{var Z=n(u);Z!==null&&z(k,Z.startTime-Q),J=!1}}break e}finally{h=null,p=Y,x=!1}J=void 0}}finally{J?D():T=!1}}}var D;if(typeof S=="function")D=function(){S(I)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,W=H.port2;H.port1.onmessage=I,D=function(){W.postMessage(null)}}else D=function(){N(I,0)};function z(Q,J){A=N(function(){Q(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var Y=p;p=J;try{return Q()}finally{p=Y}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(Q,J){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var Y=p;p=Q;try{return J()}finally{p=Y}},e.unstable_scheduleCallback=function(Q,J,Y){var re=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?re+Y:re):Y=re,Q){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Y+we,Q={id:d++,callback:J,priorityLevel:Q,startTime:Y,expirationTime:we,sortIndex:-1},Y>re?(Q.sortIndex=Y,t(u,Q),n(c)===null&&Q===n(u)&&(j?(w(A),A=-1):j=!0,z(k,Y-re))):(Q.sortIndex=we,t(c,Q),v||x||(v=!0,T||(T=!0,D()))),Q},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(Q){var J=p;return function(){var Y=p;p=J;try{return Q.apply(this,arguments)}finally{p=Y}}}})(VS)),VS}var dI;function Hae(){return dI||(dI=1,WS.exports=Bae()),WS.exports}var YS={exports:{}},Es={};var uI;function qae(){if(uI)return Es;uI=1;var e=Vf();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function i(c,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:c,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Es.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(c,u,null,d)},Es.flushSync=function(c){var u=o.T,d=s.p;try{if(o.T=null,s.p=2,c)return c()}finally{o.T=u,s.p=d,s.d.f()}},Es.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,s.d.C(c,u))},Es.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},Es.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,h=l(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?s.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:x}):d==="script"&&s.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Es.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=l(u.as,u.crossOrigin);s.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&s.d.M(c)},Es.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=l(d,u.crossOrigin);s.d.L(c,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Es.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=l(u.as,u.crossOrigin);s.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else s.d.m(c)},Es.requestFormReset=function(c){s.d.r(c)},Es.unstable_batchedUpdates=function(c,u){return c(u)},Es.useFormState=function(c,u,d){return o.H.useFormState(c,u,d)},Es.useFormStatus=function(){return o.H.useHostTransitionStatus()},Es.version="19.2.0",Es}var mI;function gH(){if(mI)return YS.exports;mI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),YS.exports=qae(),YS.exports}var fI;function Gae(){if(fI)return dg;fI=1;var e=Hae(),t=Vf(),n=gH();function s(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function i(m){var g=m,y=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,(g.flags&4098)!==0&&(y=g.return),m=g.return;while(m)}return g.tag===3?y:null}function o(m){if(m.tag===13){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function l(m){if(m.tag===31){var g=m.memoizedState;if(g===null&&(m=m.alternate,m!==null&&(g=m.memoizedState)),g!==null)return g.dehydrated}return null}function c(m){if(i(m)!==m)throw Error(s(188))}function u(m){var g=m.alternate;if(!g){if(g=i(m),g===null)throw Error(s(188));return g!==m?null:m}for(var y=m,C=g;;){var P=y.return;if(P===null)break;var R=P.alternate;if(R===null){if(C=P.return,C!==null){y=C;continue}break}if(P.child===R.child){for(R=P.child;R;){if(R===y)return c(P),m;if(R===C)return c(P),g;R=R.sibling}throw Error(s(188))}if(y.return!==C.return)y=P,C=R;else{for(var ae=!1,Se=P.child;Se;){if(Se===y){ae=!0,y=P,C=R;break}if(Se===C){ae=!0,C=P,y=R;break}Se=Se.sibling}if(!ae){for(Se=R.child;Se;){if(Se===y){ae=!0,y=R,C=P;break}if(Se===C){ae=!0,C=R,y=P;break}Se=Se.sibling}if(!ae)throw Error(s(189))}}if(y.alternate!==C)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?m:g}function d(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m;for(m=m.child;m!==null;){if(g=d(m),g!==null)return g;m=m.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function D(m){return m===null||typeof m!="object"?null:(m=I&&m[I]||m["@@iterator"],typeof m=="function"?m:null)}var H=Symbol.for("react.client.reference");function W(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===H?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case j:return"Fragment";case N:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case T:return"SuspenseList";case M:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case v:return"Portal";case S:return m.displayName||"Context";case w:return(m._context.displayName||"Context")+".Consumer";case _:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case A:return g=m.displayName||null,g!==null?g:W(m.type)||"Memo";case E:g=m._payload,m=m._init;try{return W(m(g))}catch{}}return null}var z=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},re=[],we=-1;function Z(m){return{current:m}}function ne(m){0>we||(m.current=re[we],re[we]=null,we--)}function pe(m,g){we++,re[we]=m.current,m.current=g}var Ne=Z(null),de=Z(null),be=Z(null),oe=Z(null);function Te(m,g){switch(pe(be,g),pe(de,m),pe(Ne,null),g.nodeType){case 9:case 11:m=(m=g.documentElement)&&(m=m.namespaceURI)?TM(m):0;break;default:if(m=g.tagName,g=g.namespaceURI)g=TM(g),m=kM(g,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}ne(Ne),pe(Ne,m)}function ue(){ne(Ne),ne(de),ne(be)}function Oe(m){m.memoizedState!==null&&pe(oe,m);var g=Ne.current,y=kM(g,m.type);g!==y&&(pe(de,m),pe(Ne,y))}function xe(m){de.current===m&&(ne(Ne),ne(de)),oe.current===m&&(ne(oe),rg._currentValue=Y)}var le,Fe;function ke(m){if(le===void 0)try{throw Error()}catch(y){var g=y.stack.trim().match(/\n( *(at )?)/);le=g&&g[1]||"",Fe=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+m+Fe}var He=!1;function Xe(m,g){if(!m||He)return"";He=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(g){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(gt){var mt=gt}Reflect.construct(m,[],vt)}else{try{vt.call()}catch(gt){mt=gt}m.call(vt.prototype)}}else{try{throw Error()}catch(gt){mt=gt}(vt=m())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(gt){if(gt&&mt&&typeof gt.stack=="string")return[gt.stack,mt.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=C.DetermineComponentFrameRoot(),ae=R[0],Se=R[1];if(ae&&Se){var Ye=ae.split(`
`),dt=Se.split(`
`);for(P=C=0;C<Ye.length&&!Ye[C].includes("DetermineComponentFrameRoot");)C++;for(;P<dt.length&&!dt[P].includes("DetermineComponentFrameRoot");)P++;if(C===Ye.length||P===dt.length)for(C=Ye.length-1,P=dt.length-1;1<=C&&0<=P&&Ye[C]!==dt[P];)P--;for(;1<=C&&0<=P;C--,P--)if(Ye[C]!==dt[P]){if(C!==1||P!==1)do if(C--,P--,0>P||Ye[C]!==dt[P]){var pt=`
`+Ye[C].replace(" at new "," at ");return m.displayName&&pt.includes("<anonymous>")&&(pt=pt.replace("<anonymous>",m.displayName)),pt}while(1<=C&&0<=P);break}}}finally{He=!1,Error.prepareStackTrace=y}return(y=m?m.displayName||m.name:"")?ke(y):""}function it(m,g){switch(m.tag){case 26:case 27:case 5:return ke(m.type);case 16:return ke("Lazy");case 13:return m.child!==g&&g!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return Xe(m.type,!1);case 11:return Xe(m.type.render,!1);case 1:return Xe(m.type,!0);case 31:return ke("Activity");default:return""}}function ze(m){try{var g="",y=null;do g+=it(m,y),y=m,m=m.return;while(m);return g}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var at=Object.prototype.hasOwnProperty,Ve=e.unstable_scheduleCallback,Ze=e.unstable_cancelCallback,Je=e.unstable_shouldYield,Ue=e.unstable_requestPaint,_e=e.unstable_now,he=e.unstable_getCurrentPriorityLevel,ie=e.unstable_ImmediatePriority,G=e.unstable_UserBlockingPriority,X=e.unstable_NormalPriority,ve=e.unstable_LowPriority,$e=e.unstable_IdlePriority,Le=e.log,me=e.unstable_setDisableYieldValue,Re=null,qe=null;function rt(m){if(typeof Le=="function"&&me(m),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Re,m)}catch{}}var st=Math.clz32?Math.clz32:Ct,Ie=Math.log,ot=Math.LN2;function Ct(m){return m>>>=0,m===0?32:31-(Ie(m)/ot|0)|0}var kt=256,At=262144,jt=4194304;function ge(m){var g=m&42;if(g!==0)return g;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function ye(m,g,y){var C=m.pendingLanes;if(C===0)return 0;var P=0,R=m.suspendedLanes,ae=m.pingedLanes;m=m.warmLanes;var Se=C&134217727;return Se!==0?(C=Se&~R,C!==0?P=ge(C):(ae&=Se,ae!==0?P=ge(ae):y||(y=Se&~m,y!==0&&(P=ge(y))))):(Se=C&~R,Se!==0?P=ge(Se):ae!==0?P=ge(ae):y||(y=C&~m,y!==0&&(P=ge(y)))),P===0?0:g!==0&&g!==P&&(g&R)===0&&(R=P&-P,y=g&-g,R>=y||R===32&&(y&4194048)!==0)?g:P}function Pe(m,g){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&g)===0}function Ce(m,g){switch(m){case 1:case 2:case 4:case 8:case 64:return g+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qe(){var m=jt;return jt<<=1,(jt&62914560)===0&&(jt=4194304),m}function F(m){for(var g=[],y=0;31>y;y++)g.push(m);return g}function q(m,g){m.pendingLanes|=g,g!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function fe(m,g,y,C,P,R){var ae=m.pendingLanes;m.pendingLanes=y,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=y,m.entangledLanes&=y,m.errorRecoveryDisabledLanes&=y,m.shellSuspendCounter=0;var Se=m.entanglements,Ye=m.expirationTimes,dt=m.hiddenUpdates;for(y=ae&~y;0<y;){var pt=31-st(y),vt=1<<pt;Se[pt]=0,Ye[pt]=-1;var mt=dt[pt];if(mt!==null)for(dt[pt]=null,pt=0;pt<mt.length;pt++){var gt=mt[pt];gt!==null&&(gt.lane&=-536870913)}y&=~vt}C!==0&&te(m,C,0),R!==0&&P===0&&m.tag!==0&&(m.suspendedLanes|=R&~(ae&~g))}function te(m,g,y){m.pendingLanes|=g,m.suspendedLanes&=~g;var C=31-st(g);m.entangledLanes|=g,m.entanglements[C]=m.entanglements[C]|1073741824|y&261930}function B(m,g){var y=m.entangledLanes|=g;for(m=m.entanglements;y;){var C=31-st(y),P=1<<C;P&g|m[C]&g&&(m[C]|=g),y&=~P}}function ce(m,g){var y=g&-g;return y=(y&42)!==0?1:De(y),(y&(m.suspendedLanes|g))!==0?0:y}function De(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function U(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function K(){var m=J.p;return m!==0?m:(m=window.event,m===void 0?32:ZM(m.type))}function je(m,g){var y=J.p;try{return J.p=m,g()}finally{J.p=y}}var Be=Math.random().toString(36).slice(2),tt="__reactFiber$"+Be,lt="__reactProps$"+Be,Nt="__reactContainer$"+Be,Ft="__reactEvents$"+Be,da="__reactListeners$"+Be,Pa="__reactHandles$"+Be,Ge="__reactResources$"+Be,Ae="__reactMarker$"+Be;function $(m){delete m[tt],delete m[lt],delete m[Ft],delete m[da],delete m[Pa]}function L(m){var g=m[tt];if(g)return g;for(var y=m.parentNode;y;){if(g=y[Nt]||y[tt]){if(y=g.alternate,g.child!==null||y!==null&&y.child!==null)for(m=IM(m);m!==null;){if(y=m[tt])return y;m=IM(m)}return g}m=y,y=m.parentNode}return null}function ee(m){if(m=m[tt]||m[Nt]){var g=m.tag;if(g===5||g===6||g===13||g===31||g===26||g===27||g===3)return m}return null}function Ee(m){var g=m.tag;if(g===5||g===26||g===27||g===6)return m.stateNode;throw Error(s(33))}function Me(m){var g=m[Ge];return g||(g=m[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),g}function We(m){m[Ae]=!0}var ft=new Set,St={};function _t(m,g){Vt(m,g),Vt(m+"Capture",g)}function Vt(m,g){for(St[m]=g,m=0;m<g.length;m++)ft.add(g[m])}var En=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vr={},j0={};function Eee(m){return at.call(j0,m)?!0:at.call(Vr,m)?!1:En.test(m)?j0[m]=!0:(Vr[m]=!0,!1)}function N0(m,g,y){if(Eee(g))if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":m.removeAttribute(g);return;case"boolean":var C=g.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){m.removeAttribute(g);return}}m.setAttribute(g,""+y)}}function C0(m,g,y){if(y===null)m.removeAttribute(g);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(g);return}m.setAttribute(g,""+y)}}function Xo(m,g,y,C){if(C===null)m.removeAttribute(y);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(y);return}m.setAttributeNS(g,y,""+C)}}function Yr(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function v3(m){var g=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Lee(m,g,y){var C=Object.getOwnPropertyDescriptor(m.constructor.prototype,g);if(!m.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var P=C.get,R=C.set;return Object.defineProperty(m,g,{configurable:!0,get:function(){return P.call(this)},set:function(ae){y=""+ae,R.call(this,ae)}}),Object.defineProperty(m,g,{enumerable:C.enumerable}),{getValue:function(){return y},setValue:function(ae){y=""+ae},stopTracking:function(){m._valueTracker=null,delete m[g]}}}}function I1(m){if(!m._valueTracker){var g=v3(m)?"checked":"value";m._valueTracker=Lee(m,g,""+m[g])}}function w3(m){if(!m)return!1;var g=m._valueTracker;if(!g)return!0;var y=g.getValue(),C="";return m&&(C=v3(m)?m.checked?"true":"false":m.value),m=C,m!==y?(g.setValue(m),!0):!1}function S0(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var Pee=/[\n"\\]/g;function Qr(m){return m.replace(Pee,function(g){return"\\"+g.charCodeAt(0).toString(16)+" "})}function $1(m,g,y,C,P,R,ae,Se){m.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?m.type=ae:m.removeAttribute("type"),g!=null?ae==="number"?(g===0&&m.value===""||m.value!=g)&&(m.value=""+Yr(g)):m.value!==""+Yr(g)&&(m.value=""+Yr(g)):ae!=="submit"&&ae!=="reset"||m.removeAttribute("value"),g!=null?R1(m,ae,Yr(g)):y!=null?R1(m,ae,Yr(y)):C!=null&&m.removeAttribute("value"),P==null&&R!=null&&(m.defaultChecked=!!R),P!=null&&(m.checked=P&&typeof P!="function"&&typeof P!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?m.name=""+Yr(Se):m.removeAttribute("name")}function j3(m,g,y,C,P,R,ae,Se){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(m.type=R),g!=null||y!=null){if(!(R!=="submit"&&R!=="reset"||g!=null)){I1(m);return}y=y!=null?""+Yr(y):"",g=g!=null?""+Yr(g):y,Se||g===m.value||(m.value=g),m.defaultValue=g}C=C??P,C=typeof C!="function"&&typeof C!="symbol"&&!!C,m.checked=Se?m.checked:!!C,m.defaultChecked=!!C,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(m.name=ae),I1(m)}function R1(m,g,y){g==="number"&&S0(m.ownerDocument)===m||m.defaultValue===""+y||(m.defaultValue=""+y)}function cm(m,g,y,C){if(m=m.options,g){g={};for(var P=0;P<y.length;P++)g["$"+y[P]]=!0;for(y=0;y<m.length;y++)P=g.hasOwnProperty("$"+m[y].value),m[y].selected!==P&&(m[y].selected=P),P&&C&&(m[y].defaultSelected=!0)}else{for(y=""+Yr(y),g=null,P=0;P<m.length;P++){if(m[P].value===y){m[P].selected=!0,C&&(m[P].defaultSelected=!0);return}g!==null||m[P].disabled||(g=m[P])}g!==null&&(g.selected=!0)}}function N3(m,g,y){if(g!=null&&(g=""+Yr(g),g!==m.value&&(m.value=g),y==null)){m.defaultValue!==g&&(m.defaultValue=g);return}m.defaultValue=y!=null?""+Yr(y):""}function C3(m,g,y,C){if(g==null){if(C!=null){if(y!=null)throw Error(s(92));if(z(C)){if(1<C.length)throw Error(s(93));C=C[0]}y=C}y==null&&(y=""),g=y}y=Yr(g),m.defaultValue=y,C=m.textContent,C===y&&C!==""&&C!==null&&(m.value=C),I1(m)}function dm(m,g){if(g){var y=m.firstChild;if(y&&y===m.lastChild&&y.nodeType===3){y.nodeValue=g;return}}m.textContent=g}var Dee=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function S3(m,g,y){var C=g.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?C?m.setProperty(g,""):g==="float"?m.cssFloat="":m[g]="":C?m.setProperty(g,y):typeof y!="number"||y===0||Dee.has(g)?g==="float"?m.cssFloat=y:m[g]=(""+y).trim():m[g]=y+"px"}function _3(m,g,y){if(g!=null&&typeof g!="object")throw Error(s(62));if(m=m.style,y!=null){for(var C in y)!y.hasOwnProperty(C)||g!=null&&g.hasOwnProperty(C)||(C.indexOf("--")===0?m.setProperty(C,""):C==="float"?m.cssFloat="":m[C]="");for(var P in g)C=g[P],g.hasOwnProperty(P)&&y[P]!==C&&S3(m,P,C)}else for(var R in g)g.hasOwnProperty(R)&&S3(m,R,g[R])}function z1(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oee=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mee=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _0(m){return Mee.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Zo(){}var F1=null;function U1(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var um=null,mm=null;function A3(m){var g=ee(m);if(g&&(m=g.stateNode)){var y=m[lt]||null;e:switch(m=g.stateNode,g.type){case"input":if($1(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),g=y.name,y.type==="radio"&&g!=null){for(y=m;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Qr(""+g)+'"][type="radio"]'),g=0;g<y.length;g++){var C=y[g];if(C!==m&&C.form===m.form){var P=C[lt]||null;if(!P)throw Error(s(90));$1(C,P.value,P.defaultValue,P.defaultValue,P.checked,P.defaultChecked,P.type,P.name)}}for(g=0;g<y.length;g++)C=y[g],C.form===m.form&&w3(C)}break e;case"textarea":N3(m,y.value,y.defaultValue);break e;case"select":g=y.value,g!=null&&cm(m,!!y.multiple,g,!1)}}}var B1=!1;function T3(m,g,y){if(B1)return m(g,y);B1=!0;try{var C=m(g);return C}finally{if(B1=!1,(um!==null||mm!==null)&&(fy(),um&&(g=um,m=mm,mm=um=null,A3(g),m)))for(g=0;g<m.length;g++)A3(m[g])}}function jh(m,g){var y=m.stateNode;if(y===null)return null;var C=y[lt]||null;if(C===null)return null;y=C[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(m=m.type,C=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!C;break e;default:m=!1}if(m)return null;if(y&&typeof y!="function")throw Error(s(231,g,typeof y));return y}var Jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H1=!1;if(Jo)try{var Nh={};Object.defineProperty(Nh,"passive",{get:function(){H1=!0}}),window.addEventListener("test",Nh,Nh),window.removeEventListener("test",Nh,Nh)}catch{H1=!1}var fc=null,q1=null,A0=null;function k3(){if(A0)return A0;var m,g=q1,y=g.length,C,P="value"in fc?fc.value:fc.textContent,R=P.length;for(m=0;m<y&&g[m]===P[m];m++);var ae=y-m;for(C=1;C<=ae&&g[y-C]===P[R-C];C++);return A0=P.slice(m,1<C?1-C:void 0)}function T0(m){var g=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&g===13&&(m=13)):m=g,m===10&&(m=13),32<=m||m===13?m:0}function k0(){return!0}function E3(){return!1}function er(m){function g(y,C,P,R,ae){this._reactName=y,this._targetInst=P,this.type=C,this.nativeEvent=R,this.target=ae,this.currentTarget=null;for(var Se in m)m.hasOwnProperty(Se)&&(y=m[Se],this[Se]=y?y(R):R[Se]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?k0:E3,this.isPropagationStopped=E3,this}return h(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=k0)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=k0)},persist:function(){},isPersistent:k0}),g}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E0=er(Ld),Ch=h({},Ld,{view:0,detail:0}),Iee=er(Ch),G1,W1,Sh,L0=h({},Ch,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Y1,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Sh&&(Sh&&m.type==="mousemove"?(G1=m.screenX-Sh.screenX,W1=m.screenY-Sh.screenY):W1=G1=0,Sh=m),G1)},movementY:function(m){return"movementY"in m?m.movementY:W1}}),L3=er(L0),$ee=h({},L0,{dataTransfer:0}),Ree=er($ee),zee=h({},Ch,{relatedTarget:0}),V1=er(zee),Fee=h({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),Uee=er(Fee),Bee=h({},Ld,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Hee=er(Bee),qee=h({},Ld,{data:0}),P3=er(qee),Gee={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vee={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yee(m){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(m):(m=Vee[m])?!!g[m]:!1}function Y1(){return Yee}var Qee=h({},Ch,{key:function(m){if(m.key){var g=Gee[m.key]||m.key;if(g!=="Unidentified")return g}return m.type==="keypress"?(m=T0(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?Wee[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Y1,charCode:function(m){return m.type==="keypress"?T0(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?T0(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Kee=er(Qee),Xee=h({},L0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D3=er(Xee),Zee=h({},Ch,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Y1}),Jee=er(Zee),ete=h({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),tte=er(ete),ate=h({},L0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),nte=er(ate),ste=h({},Ld,{newState:0,oldState:0}),rte=er(ste),ite=[9,13,27,32],Q1=Jo&&"CompositionEvent"in window,_h=null;Jo&&"documentMode"in document&&(_h=document.documentMode);var ote=Jo&&"TextEvent"in window&&!_h,O3=Jo&&(!Q1||_h&&8<_h&&11>=_h),M3=" ",I3=!1;function $3(m,g){switch(m){case"keyup":return ite.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R3(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var fm=!1;function lte(m,g){switch(m){case"compositionend":return R3(g);case"keypress":return g.which!==32?null:(I3=!0,M3);case"textInput":return m=g.data,m===M3&&I3?null:m;default:return null}}function cte(m,g){if(fm)return m==="compositionend"||!Q1&&$3(m,g)?(m=k3(),A0=q1=fc=null,fm=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return O3&&g.locale!=="ko"?null:g.data;default:return null}}var dte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function z3(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g==="input"?!!dte[m.type]:g==="textarea"}function F3(m,g,y,C){um?mm?mm.push(C):mm=[C]:um=C,g=vy(g,"onChange"),0<g.length&&(y=new E0("onChange","change",null,y,C),m.push({event:y,listeners:g}))}var Ah=null,Th=null;function ute(m){jM(m,0)}function P0(m){var g=Ee(m);if(w3(g))return m}function U3(m,g){if(m==="change")return g}var B3=!1;if(Jo){var K1;if(Jo){var X1="oninput"in document;if(!X1){var H3=document.createElement("div");H3.setAttribute("oninput","return;"),X1=typeof H3.oninput=="function"}K1=X1}else K1=!1;B3=K1&&(!document.documentMode||9<document.documentMode)}function q3(){Ah&&(Ah.detachEvent("onpropertychange",G3),Th=Ah=null)}function G3(m){if(m.propertyName==="value"&&P0(Th)){var g=[];F3(g,Th,m,U1(m)),T3(ute,g)}}function mte(m,g,y){m==="focusin"?(q3(),Ah=g,Th=y,Ah.attachEvent("onpropertychange",G3)):m==="focusout"&&q3()}function fte(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return P0(Th)}function hte(m,g){if(m==="click")return P0(g)}function gte(m,g){if(m==="input"||m==="change")return P0(g)}function pte(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var _r=typeof Object.is=="function"?Object.is:pte;function kh(m,g){if(_r(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var y=Object.keys(m),C=Object.keys(g);if(y.length!==C.length)return!1;for(C=0;C<y.length;C++){var P=y[C];if(!at.call(g,P)||!_r(m[P],g[P]))return!1}return!0}function W3(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function V3(m,g){var y=W3(m);m=0;for(var C;y;){if(y.nodeType===3){if(C=m+y.textContent.length,m<=g&&C>=g)return{node:y,offset:g-m};m=C}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=W3(y)}}function Y3(m,g){return m&&g?m===g?!0:m&&m.nodeType===3?!1:g&&g.nodeType===3?Y3(m,g.parentNode):"contains"in m?m.contains(g):m.compareDocumentPosition?!!(m.compareDocumentPosition(g)&16):!1:!1}function Q3(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var g=S0(m.document);g instanceof m.HTMLIFrameElement;){try{var y=typeof g.contentWindow.location.href=="string"}catch{y=!1}if(y)m=g.contentWindow;else break;g=S0(m.document)}return g}function Z1(m){var g=m&&m.nodeName&&m.nodeName.toLowerCase();return g&&(g==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||g==="textarea"||m.contentEditable==="true")}var xte=Jo&&"documentMode"in document&&11>=document.documentMode,hm=null,J1=null,Eh=null,eC=!1;function K3(m,g,y){var C=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;eC||hm==null||hm!==S0(C)||(C=hm,"selectionStart"in C&&Z1(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Eh&&kh(Eh,C)||(Eh=C,C=vy(J1,"onSelect"),0<C.length&&(g=new E0("onSelect","select",null,g,y),m.push({event:g,listeners:C}),g.target=hm)))}function Pd(m,g){var y={};return y[m.toLowerCase()]=g.toLowerCase(),y["Webkit"+m]="webkit"+g,y["Moz"+m]="moz"+g,y}var gm={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionrun:Pd("Transition","TransitionRun"),transitionstart:Pd("Transition","TransitionStart"),transitioncancel:Pd("Transition","TransitionCancel"),transitionend:Pd("Transition","TransitionEnd")},tC={},X3={};Jo&&(X3=document.createElement("div").style,"AnimationEvent"in window||(delete gm.animationend.animation,delete gm.animationiteration.animation,delete gm.animationstart.animation),"TransitionEvent"in window||delete gm.transitionend.transition);function Dd(m){if(tC[m])return tC[m];if(!gm[m])return m;var g=gm[m],y;for(y in g)if(g.hasOwnProperty(y)&&y in X3)return tC[m]=g[y];return m}var Z3=Dd("animationend"),J3=Dd("animationiteration"),e5=Dd("animationstart"),yte=Dd("transitionrun"),bte=Dd("transitionstart"),vte=Dd("transitioncancel"),t5=Dd("transitionend"),a5=new Map,aC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");aC.push("scrollEnd");function Pi(m,g){a5.set(m,g),_t(g,[m])}var D0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},Kr=[],pm=0,nC=0;function O0(){for(var m=pm,g=nC=pm=0;g<m;){var y=Kr[g];Kr[g++]=null;var C=Kr[g];Kr[g++]=null;var P=Kr[g];Kr[g++]=null;var R=Kr[g];if(Kr[g++]=null,C!==null&&P!==null){var ae=C.pending;ae===null?P.next=P:(P.next=ae.next,ae.next=P),C.pending=P}R!==0&&n5(y,P,R)}}function M0(m,g,y,C){Kr[pm++]=m,Kr[pm++]=g,Kr[pm++]=y,Kr[pm++]=C,nC|=C,m.lanes|=C,m=m.alternate,m!==null&&(m.lanes|=C)}function sC(m,g,y,C){return M0(m,g,y,C),I0(m)}function Od(m,g){return M0(m,null,null,g),I0(m)}function n5(m,g,y){m.lanes|=y;var C=m.alternate;C!==null&&(C.lanes|=y);for(var P=!1,R=m.return;R!==null;)R.childLanes|=y,C=R.alternate,C!==null&&(C.childLanes|=y),R.tag===22&&(m=R.stateNode,m===null||m._visibility&1||(P=!0)),m=R,R=R.return;return m.tag===3?(R=m.stateNode,P&&g!==null&&(P=31-st(y),m=R.hiddenUpdates,C=m[P],C===null?m[P]=[g]:C.push(g),g.lane=y|536870912),R):null}function I0(m){if(50<Zh)throw Zh=0,fS=null,Error(s(185));for(var g=m.return;g!==null;)m=g,g=m.return;return m.tag===3?m.stateNode:null}var xm={};function wte(m,g,y,C){this.tag=m,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(m,g,y,C){return new wte(m,g,y,C)}function rC(m){return m=m.prototype,!(!m||!m.isReactComponent)}function el(m,g){var y=m.alternate;return y===null?(y=Ar(m.tag,g,m.key,m.mode),y.elementType=m.elementType,y.type=m.type,y.stateNode=m.stateNode,y.alternate=m,m.alternate=y):(y.pendingProps=g,y.type=m.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=m.flags&65011712,y.childLanes=m.childLanes,y.lanes=m.lanes,y.child=m.child,y.memoizedProps=m.memoizedProps,y.memoizedState=m.memoizedState,y.updateQueue=m.updateQueue,g=m.dependencies,y.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},y.sibling=m.sibling,y.index=m.index,y.ref=m.ref,y.refCleanup=m.refCleanup,y}function s5(m,g){m.flags&=65011714;var y=m.alternate;return y===null?(m.childLanes=0,m.lanes=g,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=y.childLanes,m.lanes=y.lanes,m.child=y.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=y.memoizedProps,m.memoizedState=y.memoizedState,m.updateQueue=y.updateQueue,m.type=y.type,g=y.dependencies,m.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),m}function $0(m,g,y,C,P,R){var ae=0;if(C=m,typeof m=="function")rC(m)&&(ae=1);else if(typeof m=="string")ae=_ae(m,y,Ne.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case M:return m=Ar(31,y,g,P),m.elementType=M,m.lanes=R,m;case j:return Md(y.children,P,R,g);case b:ae=8,P|=24;break;case N:return m=Ar(12,y,g,P|2),m.elementType=N,m.lanes=R,m;case k:return m=Ar(13,y,g,P),m.elementType=k,m.lanes=R,m;case T:return m=Ar(19,y,g,P),m.elementType=T,m.lanes=R,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case S:ae=10;break e;case w:ae=9;break e;case _:ae=11;break e;case A:ae=14;break e;case E:ae=16,C=null;break e}ae=29,y=Error(s(130,m===null?"null":typeof m,"")),C=null}return g=Ar(ae,y,g,P),g.elementType=m,g.type=C,g.lanes=R,g}function Md(m,g,y,C){return m=Ar(7,m,C,g),m.lanes=y,m}function iC(m,g,y){return m=Ar(6,m,null,g),m.lanes=y,m}function r5(m){var g=Ar(18,null,null,0);return g.stateNode=m,g}function oC(m,g,y){return g=Ar(4,m.children!==null?m.children:[],m.key,g),g.lanes=y,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}var i5=new WeakMap;function Xr(m,g){if(typeof m=="object"&&m!==null){var y=i5.get(m);return y!==void 0?y:(g={value:m,source:g,stack:ze(g)},i5.set(m,g),g)}return{value:m,source:g,stack:ze(g)}}var ym=[],bm=0,R0=null,Lh=0,Zr=[],Jr=0,hc=null,no=1,so="";function tl(m,g){ym[bm++]=Lh,ym[bm++]=R0,R0=m,Lh=g}function o5(m,g,y){Zr[Jr++]=no,Zr[Jr++]=so,Zr[Jr++]=hc,hc=m;var C=no;m=so;var P=32-st(C)-1;C&=~(1<<P),y+=1;var R=32-st(g)+P;if(30<R){var ae=P-P%5;R=(C&(1<<ae)-1).toString(32),C>>=ae,P-=ae,no=1<<32-st(g)+P|y<<P|C,so=R+m}else no=1<<R|y<<P|C,so=m}function lC(m){m.return!==null&&(tl(m,1),o5(m,1,0))}function cC(m){for(;m===R0;)R0=ym[--bm],ym[bm]=null,Lh=ym[--bm],ym[bm]=null;for(;m===hc;)hc=Zr[--Jr],Zr[Jr]=null,so=Zr[--Jr],Zr[Jr]=null,no=Zr[--Jr],Zr[Jr]=null}function l5(m,g){Zr[Jr++]=no,Zr[Jr++]=so,Zr[Jr++]=hc,no=g.id,so=g.overflow,hc=m}var ws=null,en=null,ya=!1,gc=null,ei=!1,dC=Error(s(519));function pc(m){var g=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ph(Xr(g,m)),dC}function c5(m){var g=m.stateNode,y=m.type,C=m.memoizedProps;switch(g[tt]=m,g[lt]=C,y){case"dialog":ha("cancel",g),ha("close",g);break;case"iframe":case"object":case"embed":ha("load",g);break;case"video":case"audio":for(y=0;y<eg.length;y++)ha(eg[y],g);break;case"source":ha("error",g);break;case"img":case"image":case"link":ha("error",g),ha("load",g);break;case"details":ha("toggle",g);break;case"input":ha("invalid",g),j3(g,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":ha("invalid",g);break;case"textarea":ha("invalid",g),C3(g,C.value,C.defaultValue,C.children)}y=C.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||g.textContent===""+y||C.suppressHydrationWarning===!0||_M(g.textContent,y)?(C.popover!=null&&(ha("beforetoggle",g),ha("toggle",g)),C.onScroll!=null&&ha("scroll",g),C.onScrollEnd!=null&&ha("scrollend",g),C.onClick!=null&&(g.onclick=Zo),g=!0):g=!1,g||pc(m,!0)}function d5(m){for(ws=m.return;ws;)switch(ws.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:ws=ws.return}}function vm(m){if(m!==ws)return!1;if(!ya)return d5(m),ya=!0,!1;var g=m.tag,y;if((y=g!==3&&g!==27)&&((y=g===5)&&(y=m.type,y=!(y!=="form"&&y!=="button")||TS(m.type,m.memoizedProps)),y=!y),y&&en&&pc(m),d5(m),g===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));en=MM(m)}else if(g===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));en=MM(m)}else g===27?(g=en,Ec(m.type)?(m=DS,DS=null,en=m):en=g):en=ws?ai(m.stateNode.nextSibling):null;return!0}function Id(){en=ws=null,ya=!1}function uC(){var m=gc;return m!==null&&(sr===null?sr=m:sr.push.apply(sr,m),gc=null),m}function Ph(m){gc===null?gc=[m]:gc.push(m)}var mC=Z(null),$d=null,al=null;function xc(m,g,y){pe(mC,g._currentValue),g._currentValue=y}function nl(m){m._currentValue=mC.current,ne(mC)}function fC(m,g,y){for(;m!==null;){var C=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,C!==null&&(C.childLanes|=g)):C!==null&&(C.childLanes&g)!==g&&(C.childLanes|=g),m===y)break;m=m.return}}function hC(m,g,y,C){var P=m.child;for(P!==null&&(P.return=m);P!==null;){var R=P.dependencies;if(R!==null){var ae=P.child;R=R.firstContext;e:for(;R!==null;){var Se=R;R=P;for(var Ye=0;Ye<g.length;Ye++)if(Se.context===g[Ye]){R.lanes|=y,Se=R.alternate,Se!==null&&(Se.lanes|=y),fC(R.return,y,m),C||(ae=null);break e}R=Se.next}}else if(P.tag===18){if(ae=P.return,ae===null)throw Error(s(341));ae.lanes|=y,R=ae.alternate,R!==null&&(R.lanes|=y),fC(ae,y,m),ae=null}else ae=P.child;if(ae!==null)ae.return=P;else for(ae=P;ae!==null;){if(ae===m){ae=null;break}if(P=ae.sibling,P!==null){P.return=ae.return,ae=P;break}ae=ae.return}P=ae}}function wm(m,g,y,C){m=null;for(var P=g,R=!1;P!==null;){if(!R){if((P.flags&524288)!==0)R=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var ae=P.alternate;if(ae===null)throw Error(s(387));if(ae=ae.memoizedProps,ae!==null){var Se=P.type;_r(P.pendingProps.value,ae.value)||(m!==null?m.push(Se):m=[Se])}}else if(P===oe.current){if(ae=P.alternate,ae===null)throw Error(s(387));ae.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(m!==null?m.push(rg):m=[rg])}P=P.return}m!==null&&hC(g,m,y,C),g.flags|=262144}function z0(m){for(m=m.firstContext;m!==null;){if(!_r(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function Rd(m){$d=m,al=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function js(m){return u5($d,m)}function F0(m,g){return $d===null&&Rd(m),u5(m,g)}function u5(m,g){var y=g._currentValue;if(g={context:g,memoizedValue:y,next:null},al===null){if(m===null)throw Error(s(308));al=g,m.dependencies={lanes:0,firstContext:g},m.flags|=524288}else al=al.next=g;return y}var jte=typeof AbortController<"u"?AbortController:function(){var m=[],g=this.signal={aborted:!1,addEventListener:function(y,C){m.push(C)}};this.abort=function(){g.aborted=!0,m.forEach(function(y){return y()})}},Nte=e.unstable_scheduleCallback,Cte=e.unstable_NormalPriority,Rn={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gC(){return{controller:new jte,data:new Map,refCount:0}}function Dh(m){m.refCount--,m.refCount===0&&Nte(Cte,function(){m.controller.abort()})}var Oh=null,pC=0,jm=0,Nm=null;function Ste(m,g){if(Oh===null){var y=Oh=[];pC=0,jm=bS(),Nm={status:"pending",value:void 0,then:function(C){y.push(C)}}}return pC++,g.then(m5,m5),g}function m5(){if(--pC===0&&Oh!==null){Nm!==null&&(Nm.status="fulfilled");var m=Oh;Oh=null,jm=0,Nm=null;for(var g=0;g<m.length;g++)(0,m[g])()}}function _te(m,g){var y=[],C={status:"pending",value:null,reason:null,then:function(P){y.push(P)}};return m.then(function(){C.status="fulfilled",C.value=g;for(var P=0;P<y.length;P++)(0,y[P])(g)},function(P){for(C.status="rejected",C.reason=P,P=0;P<y.length;P++)(0,y[P])(void 0)}),C}var f5=Q.S;Q.S=function(m,g){KO=_e(),typeof g=="object"&&g!==null&&typeof g.then=="function"&&Ste(m,g),f5!==null&&f5(m,g)};var zd=Z(null);function xC(){var m=zd.current;return m!==null?m:Ga.pooledCache}function U0(m,g){g===null?pe(zd,zd.current):pe(zd,g.pool)}function h5(){var m=xC();return m===null?null:{parent:Rn._currentValue,pool:m}}var Cm=Error(s(460)),yC=Error(s(474)),B0=Error(s(542)),H0={then:function(){}};function g5(m){return m=m.status,m==="fulfilled"||m==="rejected"}function p5(m,g,y){switch(y=m[y],y===void 0?m.push(g):y!==g&&(g.then(Zo,Zo),g=y),g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,y5(m),m;default:if(typeof g.status=="string")g.then(Zo,Zo);else{if(m=Ga,m!==null&&100<m.shellSuspendCounter)throw Error(s(482));m=g,m.status="pending",m.then(function(C){if(g.status==="pending"){var P=g;P.status="fulfilled",P.value=C}},function(C){if(g.status==="pending"){var P=g;P.status="rejected",P.reason=C}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw m=g.reason,y5(m),m}throw Ud=g,Cm}}function Fd(m){try{var g=m._init;return g(m._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Ud=y,Cm):y}}var Ud=null;function x5(){if(Ud===null)throw Error(s(459));var m=Ud;return Ud=null,m}function y5(m){if(m===Cm||m===B0)throw Error(s(483))}var Sm=null,Mh=0;function q0(m){var g=Mh;return Mh+=1,Sm===null&&(Sm=[]),p5(Sm,m,g)}function Ih(m,g){g=g.props.ref,m.ref=g!==void 0?g:null}function G0(m,g){throw g.$$typeof===p?Error(s(525)):(m=Object.prototype.toString.call(g),Error(s(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m)))}function b5(m){function g(nt,Ke){if(m){var ct=nt.deletions;ct===null?(nt.deletions=[Ke],nt.flags|=16):ct.push(Ke)}}function y(nt,Ke){if(!m)return null;for(;Ke!==null;)g(nt,Ke),Ke=Ke.sibling;return null}function C(nt){for(var Ke=new Map;nt!==null;)nt.key!==null?Ke.set(nt.key,nt):Ke.set(nt.index,nt),nt=nt.sibling;return Ke}function P(nt,Ke){return nt=el(nt,Ke),nt.index=0,nt.sibling=null,nt}function R(nt,Ke,ct){return nt.index=ct,m?(ct=nt.alternate,ct!==null?(ct=ct.index,ct<Ke?(nt.flags|=67108866,Ke):ct):(nt.flags|=67108866,Ke)):(nt.flags|=1048576,Ke)}function ae(nt){return m&&nt.alternate===null&&(nt.flags|=67108866),nt}function Se(nt,Ke,ct,yt){return Ke===null||Ke.tag!==6?(Ke=iC(ct,nt.mode,yt),Ke.return=nt,Ke):(Ke=P(Ke,ct),Ke.return=nt,Ke)}function Ye(nt,Ke,ct,yt){var Qt=ct.type;return Qt===j?pt(nt,Ke,ct.props.children,yt,ct.key):Ke!==null&&(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===E&&Fd(Qt)===Ke.type)?(Ke=P(Ke,ct.props),Ih(Ke,ct),Ke.return=nt,Ke):(Ke=$0(ct.type,ct.key,ct.props,null,nt.mode,yt),Ih(Ke,ct),Ke.return=nt,Ke)}function dt(nt,Ke,ct,yt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==ct.containerInfo||Ke.stateNode.implementation!==ct.implementation?(Ke=oC(ct,nt.mode,yt),Ke.return=nt,Ke):(Ke=P(Ke,ct.children||[]),Ke.return=nt,Ke)}function pt(nt,Ke,ct,yt,Qt){return Ke===null||Ke.tag!==7?(Ke=Md(ct,nt.mode,yt,Qt),Ke.return=nt,Ke):(Ke=P(Ke,ct),Ke.return=nt,Ke)}function vt(nt,Ke,ct){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ke=iC(""+Ke,nt.mode,ct),Ke.return=nt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case x:return ct=$0(Ke.type,Ke.key,Ke.props,null,nt.mode,ct),Ih(ct,Ke),ct.return=nt,ct;case v:return Ke=oC(Ke,nt.mode,ct),Ke.return=nt,Ke;case E:return Ke=Fd(Ke),vt(nt,Ke,ct)}if(z(Ke)||D(Ke))return Ke=Md(Ke,nt.mode,ct,null),Ke.return=nt,Ke;if(typeof Ke.then=="function")return vt(nt,q0(Ke),ct);if(Ke.$$typeof===S)return vt(nt,F0(nt,Ke),ct);G0(nt,Ke)}return null}function mt(nt,Ke,ct,yt){var Qt=Ke!==null?Ke.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Qt!==null?null:Se(nt,Ke,""+ct,yt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:return ct.key===Qt?Ye(nt,Ke,ct,yt):null;case v:return ct.key===Qt?dt(nt,Ke,ct,yt):null;case E:return ct=Fd(ct),mt(nt,Ke,ct,yt)}if(z(ct)||D(ct))return Qt!==null?null:pt(nt,Ke,ct,yt,null);if(typeof ct.then=="function")return mt(nt,Ke,q0(ct),yt);if(ct.$$typeof===S)return mt(nt,Ke,F0(nt,ct),yt);G0(nt,ct)}return null}function gt(nt,Ke,ct,yt,Qt){if(typeof yt=="string"&&yt!==""||typeof yt=="number"||typeof yt=="bigint")return nt=nt.get(ct)||null,Se(Ke,nt,""+yt,Qt);if(typeof yt=="object"&&yt!==null){switch(yt.$$typeof){case x:return nt=nt.get(yt.key===null?ct:yt.key)||null,Ye(Ke,nt,yt,Qt);case v:return nt=nt.get(yt.key===null?ct:yt.key)||null,dt(Ke,nt,yt,Qt);case E:return yt=Fd(yt),gt(nt,Ke,ct,yt,Qt)}if(z(yt)||D(yt))return nt=nt.get(ct)||null,pt(Ke,nt,yt,Qt,null);if(typeof yt.then=="function")return gt(nt,Ke,ct,q0(yt),Qt);if(yt.$$typeof===S)return gt(nt,Ke,ct,F0(Ke,yt),Qt);G0(Ke,yt)}return null}function Rt(nt,Ke,ct,yt){for(var Qt=null,Ca=null,Ht=Ke,ca=Ke=0,pa=null;Ht!==null&&ca<ct.length;ca++){Ht.index>ca?(pa=Ht,Ht=null):pa=Ht.sibling;var Sa=mt(nt,Ht,ct[ca],yt);if(Sa===null){Ht===null&&(Ht=pa);break}m&&Ht&&Sa.alternate===null&&g(nt,Ht),Ke=R(Sa,Ke,ca),Ca===null?Qt=Sa:Ca.sibling=Sa,Ca=Sa,Ht=pa}if(ca===ct.length)return y(nt,Ht),ya&&tl(nt,ca),Qt;if(Ht===null){for(;ca<ct.length;ca++)Ht=vt(nt,ct[ca],yt),Ht!==null&&(Ke=R(Ht,Ke,ca),Ca===null?Qt=Ht:Ca.sibling=Ht,Ca=Ht);return ya&&tl(nt,ca),Qt}for(Ht=C(Ht);ca<ct.length;ca++)pa=gt(Ht,nt,ca,ct[ca],yt),pa!==null&&(m&&pa.alternate!==null&&Ht.delete(pa.key===null?ca:pa.key),Ke=R(pa,Ke,ca),Ca===null?Qt=pa:Ca.sibling=pa,Ca=pa);return m&&Ht.forEach(function(Mc){return g(nt,Mc)}),ya&&tl(nt,ca),Qt}function Xt(nt,Ke,ct,yt){if(ct==null)throw Error(s(151));for(var Qt=null,Ca=null,Ht=Ke,ca=Ke=0,pa=null,Sa=ct.next();Ht!==null&&!Sa.done;ca++,Sa=ct.next()){Ht.index>ca?(pa=Ht,Ht=null):pa=Ht.sibling;var Mc=mt(nt,Ht,Sa.value,yt);if(Mc===null){Ht===null&&(Ht=pa);break}m&&Ht&&Mc.alternate===null&&g(nt,Ht),Ke=R(Mc,Ke,ca),Ca===null?Qt=Mc:Ca.sibling=Mc,Ca=Mc,Ht=pa}if(Sa.done)return y(nt,Ht),ya&&tl(nt,ca),Qt;if(Ht===null){for(;!Sa.done;ca++,Sa=ct.next())Sa=vt(nt,Sa.value,yt),Sa!==null&&(Ke=R(Sa,Ke,ca),Ca===null?Qt=Sa:Ca.sibling=Sa,Ca=Sa);return ya&&tl(nt,ca),Qt}for(Ht=C(Ht);!Sa.done;ca++,Sa=ct.next())Sa=gt(Ht,nt,ca,Sa.value,yt),Sa!==null&&(m&&Sa.alternate!==null&&Ht.delete(Sa.key===null?ca:Sa.key),Ke=R(Sa,Ke,ca),Ca===null?Qt=Sa:Ca.sibling=Sa,Ca=Sa);return m&&Ht.forEach(function($ae){return g(nt,$ae)}),ya&&tl(nt,ca),Qt}function Ba(nt,Ke,ct,yt){if(typeof ct=="object"&&ct!==null&&ct.type===j&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case x:e:{for(var Qt=ct.key;Ke!==null;){if(Ke.key===Qt){if(Qt=ct.type,Qt===j){if(Ke.tag===7){y(nt,Ke.sibling),yt=P(Ke,ct.props.children),yt.return=nt,nt=yt;break e}}else if(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===E&&Fd(Qt)===Ke.type){y(nt,Ke.sibling),yt=P(Ke,ct.props),Ih(yt,ct),yt.return=nt,nt=yt;break e}y(nt,Ke);break}else g(nt,Ke);Ke=Ke.sibling}ct.type===j?(yt=Md(ct.props.children,nt.mode,yt,ct.key),yt.return=nt,nt=yt):(yt=$0(ct.type,ct.key,ct.props,null,nt.mode,yt),Ih(yt,ct),yt.return=nt,nt=yt)}return ae(nt);case v:e:{for(Qt=ct.key;Ke!==null;){if(Ke.key===Qt)if(Ke.tag===4&&Ke.stateNode.containerInfo===ct.containerInfo&&Ke.stateNode.implementation===ct.implementation){y(nt,Ke.sibling),yt=P(Ke,ct.children||[]),yt.return=nt,nt=yt;break e}else{y(nt,Ke);break}else g(nt,Ke);Ke=Ke.sibling}yt=oC(ct,nt.mode,yt),yt.return=nt,nt=yt}return ae(nt);case E:return ct=Fd(ct),Ba(nt,Ke,ct,yt)}if(z(ct))return Rt(nt,Ke,ct,yt);if(D(ct)){if(Qt=D(ct),typeof Qt!="function")throw Error(s(150));return ct=Qt.call(ct),Xt(nt,Ke,ct,yt)}if(typeof ct.then=="function")return Ba(nt,Ke,q0(ct),yt);if(ct.$$typeof===S)return Ba(nt,Ke,F0(nt,ct),yt);G0(nt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ke!==null&&Ke.tag===6?(y(nt,Ke.sibling),yt=P(Ke,ct),yt.return=nt,nt=yt):(y(nt,Ke),yt=iC(ct,nt.mode,yt),yt.return=nt,nt=yt),ae(nt)):y(nt,Ke)}return function(nt,Ke,ct,yt){try{Mh=0;var Qt=Ba(nt,Ke,ct,yt);return Sm=null,Qt}catch(Ht){if(Ht===Cm||Ht===B0)throw Ht;var Ca=Ar(29,Ht,null,nt.mode);return Ca.lanes=yt,Ca.return=nt,Ca}}}var Bd=b5(!0),v5=b5(!1),yc=!1;function bC(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vC(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function bc(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function vc(m,g,y){var C=m.updateQueue;if(C===null)return null;if(C=C.shared,(Aa&2)!==0){var P=C.pending;return P===null?g.next=g:(g.next=P.next,P.next=g),C.pending=g,g=I0(m),n5(m,null,y),g}return M0(m,C,g,y),I0(m)}function $h(m,g,y){if(g=g.updateQueue,g!==null&&(g=g.shared,(y&4194048)!==0)){var C=g.lanes;C&=m.pendingLanes,y|=C,g.lanes=y,B(m,y)}}function wC(m,g){var y=m.updateQueue,C=m.alternate;if(C!==null&&(C=C.updateQueue,y===C)){var P=null,R=null;if(y=y.firstBaseUpdate,y!==null){do{var ae={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};R===null?P=R=ae:R=R.next=ae,y=y.next}while(y!==null);R===null?P=R=g:R=R.next=g}else P=R=g;y={baseState:C.baseState,firstBaseUpdate:P,lastBaseUpdate:R,shared:C.shared,callbacks:C.callbacks},m.updateQueue=y;return}m=y.lastBaseUpdate,m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=g}var jC=!1;function Rh(){if(jC){var m=Nm;if(m!==null)throw m}}function zh(m,g,y,C){jC=!1;var P=m.updateQueue;yc=!1;var R=P.firstBaseUpdate,ae=P.lastBaseUpdate,Se=P.shared.pending;if(Se!==null){P.shared.pending=null;var Ye=Se,dt=Ye.next;Ye.next=null,ae===null?R=dt:ae.next=dt,ae=Ye;var pt=m.alternate;pt!==null&&(pt=pt.updateQueue,Se=pt.lastBaseUpdate,Se!==ae&&(Se===null?pt.firstBaseUpdate=dt:Se.next=dt,pt.lastBaseUpdate=Ye))}if(R!==null){var vt=P.baseState;ae=0,pt=dt=Ye=null,Se=R;do{var mt=Se.lane&-536870913,gt=mt!==Se.lane;if(gt?(ga&mt)===mt:(C&mt)===mt){mt!==0&&mt===jm&&(jC=!0),pt!==null&&(pt=pt.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var Rt=m,Xt=Se;mt=g;var Ba=y;switch(Xt.tag){case 1:if(Rt=Xt.payload,typeof Rt=="function"){vt=Rt.call(Ba,vt,mt);break e}vt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Xt.payload,mt=typeof Rt=="function"?Rt.call(Ba,vt,mt):Rt,mt==null)break e;vt=h({},vt,mt);break e;case 2:yc=!0}}mt=Se.callback,mt!==null&&(m.flags|=64,gt&&(m.flags|=8192),gt=P.callbacks,gt===null?P.callbacks=[mt]:gt.push(mt))}else gt={lane:mt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},pt===null?(dt=pt=gt,Ye=vt):pt=pt.next=gt,ae|=mt;if(Se=Se.next,Se===null){if(Se=P.shared.pending,Se===null)break;gt=Se,Se=gt.next,gt.next=null,P.lastBaseUpdate=gt,P.shared.pending=null}}while(!0);pt===null&&(Ye=vt),P.baseState=Ye,P.firstBaseUpdate=dt,P.lastBaseUpdate=pt,R===null&&(P.shared.lanes=0),Sc|=ae,m.lanes=ae,m.memoizedState=vt}}function w5(m,g){if(typeof m!="function")throw Error(s(191,m));m.call(g)}function j5(m,g){var y=m.callbacks;if(y!==null)for(m.callbacks=null,m=0;m<y.length;m++)w5(y[m],g)}var _m=Z(null),W0=Z(0);function N5(m,g){m=ml,pe(W0,m),pe(_m,g),ml=m|g.baseLanes}function NC(){pe(W0,ml),pe(_m,_m.current)}function CC(){ml=W0.current,ne(_m),ne(W0)}var Tr=Z(null),ti=null;function wc(m){var g=m.alternate;pe(Ln,Ln.current&1),pe(Tr,m),ti===null&&(g===null||_m.current!==null||g.memoizedState!==null)&&(ti=m)}function SC(m){pe(Ln,Ln.current),pe(Tr,m),ti===null&&(ti=m)}function C5(m){m.tag===22?(pe(Ln,Ln.current),pe(Tr,m),ti===null&&(ti=m)):jc()}function jc(){pe(Ln,Ln.current),pe(Tr,Tr.current)}function kr(m){ne(Tr),ti===m&&(ti=null),ne(Ln)}var Ln=Z(0);function V0(m){for(var g=m;g!==null;){if(g.tag===13){var y=g.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||LS(y)||PS(y)))return g}else if(g.tag===19&&(g.memoizedProps.revealOrder==="forwards"||g.memoizedProps.revealOrder==="backwards"||g.memoizedProps.revealOrder==="unstable_legacy-backwards"||g.memoizedProps.revealOrder==="together")){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var sl=0,ia=null,Fa=null,zn=null,Y0=!1,Am=!1,Hd=!1,Q0=0,Fh=0,Tm=null,Ate=0;function vn(){throw Error(s(321))}function _C(m,g){if(g===null)return!1;for(var y=0;y<g.length&&y<m.length;y++)if(!_r(m[y],g[y]))return!1;return!0}function AC(m,g,y,C,P,R){return sl=R,ia=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Q.H=m===null||m.memoizedState===null?oO:BC,Hd=!1,R=y(C,P),Hd=!1,Am&&(R=_5(g,y,C,P)),S5(m),R}function S5(m){Q.H=Hh;var g=Fa!==null&&Fa.next!==null;if(sl=0,zn=Fa=ia=null,Y0=!1,Fh=0,Tm=null,g)throw Error(s(300));m===null||Fn||(m=m.dependencies,m!==null&&z0(m)&&(Fn=!0))}function _5(m,g,y,C){ia=m;var P=0;do{if(Am&&(Tm=null),Fh=0,Am=!1,25<=P)throw Error(s(301));if(P+=1,zn=Fa=null,m.updateQueue!=null){var R=m.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}Q.H=lO,R=g(y,C)}while(Am);return R}function Tte(){var m=Q.H,g=m.useState()[0];return g=typeof g.then=="function"?Uh(g):g,m=m.useState()[0],(Fa!==null?Fa.memoizedState:null)!==m&&(ia.flags|=1024),g}function TC(){var m=Q0!==0;return Q0=0,m}function kC(m,g,y){g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~y}function EC(m){if(Y0){for(m=m.memoizedState;m!==null;){var g=m.queue;g!==null&&(g.pending=null),m=m.next}Y0=!1}sl=0,zn=Fa=ia=null,Am=!1,Fh=Q0=0,Tm=null}function Hs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?ia.memoizedState=zn=m:zn=zn.next=m,zn}function Pn(){if(Fa===null){var m=ia.alternate;m=m!==null?m.memoizedState:null}else m=Fa.next;var g=zn===null?ia.memoizedState:zn.next;if(g!==null)zn=g,Fa=m;else{if(m===null)throw ia.alternate===null?Error(s(467)):Error(s(310));Fa=m,m={memoizedState:Fa.memoizedState,baseState:Fa.baseState,baseQueue:Fa.baseQueue,queue:Fa.queue,next:null},zn===null?ia.memoizedState=zn=m:zn=zn.next=m}return zn}function K0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uh(m){var g=Fh;return Fh+=1,Tm===null&&(Tm=[]),m=p5(Tm,m,g),g=ia,(zn===null?g.memoizedState:zn.next)===null&&(g=g.alternate,Q.H=g===null||g.memoizedState===null?oO:BC),m}function X0(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Uh(m);if(m.$$typeof===S)return js(m)}throw Error(s(438,String(m)))}function LC(m){var g=null,y=ia.updateQueue;if(y!==null&&(g=y.memoCache),g==null){var C=ia.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(g={data:C.data.map(function(P){return P.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),y===null&&(y=K0(),ia.updateQueue=y),y.memoCache=g,y=g.data[g.index],y===void 0)for(y=g.data[g.index]=Array(m),C=0;C<m;C++)y[C]=O;return g.index++,y}function rl(m,g){return typeof g=="function"?g(m):g}function Z0(m){var g=Pn();return PC(g,Fa,m)}function PC(m,g,y){var C=m.queue;if(C===null)throw Error(s(311));C.lastRenderedReducer=y;var P=m.baseQueue,R=C.pending;if(R!==null){if(P!==null){var ae=P.next;P.next=R.next,R.next=ae}g.baseQueue=P=R,C.pending=null}if(R=m.baseState,P===null)m.memoizedState=R;else{g=P.next;var Se=ae=null,Ye=null,dt=g,pt=!1;do{var vt=dt.lane&-536870913;if(vt!==dt.lane?(ga&vt)===vt:(sl&vt)===vt){var mt=dt.revertLane;if(mt===0)Ye!==null&&(Ye=Ye.next={lane:0,revertLane:0,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),vt===jm&&(pt=!0);else if((sl&mt)===mt){dt=dt.next,mt===jm&&(pt=!0);continue}else vt={lane:0,revertLane:dt.revertLane,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ye===null?(Se=Ye=vt,ae=R):Ye=Ye.next=vt,ia.lanes|=mt,Sc|=mt;vt=dt.action,Hd&&y(R,vt),R=dt.hasEagerState?dt.eagerState:y(R,vt)}else mt={lane:vt,revertLane:dt.revertLane,gesture:dt.gesture,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Ye===null?(Se=Ye=mt,ae=R):Ye=Ye.next=mt,ia.lanes|=vt,Sc|=vt;dt=dt.next}while(dt!==null&&dt!==g);if(Ye===null?ae=R:Ye.next=Se,!_r(R,m.memoizedState)&&(Fn=!0,pt&&(y=Nm,y!==null)))throw y;m.memoizedState=R,m.baseState=ae,m.baseQueue=Ye,C.lastRenderedState=R}return P===null&&(C.lanes=0),[m.memoizedState,C.dispatch]}function DC(m){var g=Pn(),y=g.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=m;var C=y.dispatch,P=y.pending,R=g.memoizedState;if(P!==null){y.pending=null;var ae=P=P.next;do R=m(R,ae.action),ae=ae.next;while(ae!==P);_r(R,g.memoizedState)||(Fn=!0),g.memoizedState=R,g.baseQueue===null&&(g.baseState=R),y.lastRenderedState=R}return[R,C]}function A5(m,g,y){var C=ia,P=Pn(),R=ya;if(R){if(y===void 0)throw Error(s(407));y=y()}else y=g();var ae=!_r((Fa||P).memoizedState,y);if(ae&&(P.memoizedState=y,Fn=!0),P=P.queue,IC(E5.bind(null,C,P,m),[m]),P.getSnapshot!==g||ae||zn!==null&&zn.memoizedState.tag&1){if(C.flags|=2048,km(9,{destroy:void 0},k5.bind(null,C,P,y,g),null),Ga===null)throw Error(s(349));R||(sl&127)!==0||T5(C,g,y)}return y}function T5(m,g,y){m.flags|=16384,m={getSnapshot:g,value:y},g=ia.updateQueue,g===null?(g=K0(),ia.updateQueue=g,g.stores=[m]):(y=g.stores,y===null?g.stores=[m]:y.push(m))}function k5(m,g,y,C){g.value=y,g.getSnapshot=C,L5(g)&&P5(m)}function E5(m,g,y){return y(function(){L5(g)&&P5(m)})}function L5(m){var g=m.getSnapshot;m=m.value;try{var y=g();return!_r(m,y)}catch{return!0}}function P5(m){var g=Od(m,2);g!==null&&rr(g,m,2)}function OC(m){var g=Hs();if(typeof m=="function"){var y=m;if(m=y(),Hd){rt(!0);try{y()}finally{rt(!1)}}}return g.memoizedState=g.baseState=m,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:m},g}function D5(m,g,y,C){return m.baseState=y,PC(m,Fa,typeof C=="function"?C:rl)}function kte(m,g,y,C,P){if(ty(m))throw Error(s(485));if(m=g.action,m!==null){var R={payload:P,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){R.listeners.push(ae)}};Q.T!==null?y(!0):R.isTransition=!1,C(R),y=g.pending,y===null?(R.next=g.pending=R,O5(g,R)):(R.next=y.next,g.pending=y.next=R)}}function O5(m,g){var y=g.action,C=g.payload,P=m.state;if(g.isTransition){var R=Q.T,ae={};Q.T=ae;try{var Se=y(P,C),Ye=Q.S;Ye!==null&&Ye(ae,Se),M5(m,g,Se)}catch(dt){MC(m,g,dt)}finally{R!==null&&ae.types!==null&&(R.types=ae.types),Q.T=R}}else try{R=y(P,C),M5(m,g,R)}catch(dt){MC(m,g,dt)}}function M5(m,g,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(C){I5(m,g,C)},function(C){return MC(m,g,C)}):I5(m,g,y)}function I5(m,g,y){g.status="fulfilled",g.value=y,$5(g),m.state=y,g=m.pending,g!==null&&(y=g.next,y===g?m.pending=null:(y=y.next,g.next=y,O5(m,y)))}function MC(m,g,y){var C=m.pending;if(m.pending=null,C!==null){C=C.next;do g.status="rejected",g.reason=y,$5(g),g=g.next;while(g!==C)}m.action=null}function $5(m){m=m.listeners;for(var g=0;g<m.length;g++)(0,m[g])()}function R5(m,g){return g}function z5(m,g){if(ya){var y=Ga.formState;if(y!==null){e:{var C=ia;if(ya){if(en){t:{for(var P=en,R=ei;P.nodeType!==8;){if(!R){P=null;break t}if(P=ai(P.nextSibling),P===null){P=null;break t}}R=P.data,P=R==="F!"||R==="F"?P:null}if(P){en=ai(P.nextSibling),C=P.data==="F!";break e}}pc(C)}C=!1}C&&(g=y[0])}}return y=Hs(),y.memoizedState=y.baseState=g,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R5,lastRenderedState:g},y.queue=C,y=sO.bind(null,ia,C),C.dispatch=y,C=OC(!1),R=UC.bind(null,ia,!1,C.queue),C=Hs(),P={state:g,dispatch:null,action:m,pending:null},C.queue=P,y=kte.bind(null,ia,P,R,y),P.dispatch=y,C.memoizedState=m,[g,y,!1]}function F5(m){var g=Pn();return U5(g,Fa,m)}function U5(m,g,y){if(g=PC(m,g,R5)[0],m=Z0(rl)[0],typeof g=="object"&&g!==null&&typeof g.then=="function")try{var C=Uh(g)}catch(ae){throw ae===Cm?B0:ae}else C=g;g=Pn();var P=g.queue,R=P.dispatch;return y!==g.memoizedState&&(ia.flags|=2048,km(9,{destroy:void 0},Ete.bind(null,P,y),null)),[C,R,m]}function Ete(m,g){m.action=g}function B5(m){var g=Pn(),y=Fa;if(y!==null)return U5(g,y,m);Pn(),g=g.memoizedState,y=Pn();var C=y.queue.dispatch;return y.memoizedState=m,[g,C,!1]}function km(m,g,y,C){return m={tag:m,create:y,deps:C,inst:g,next:null},g=ia.updateQueue,g===null&&(g=K0(),ia.updateQueue=g),y=g.lastEffect,y===null?g.lastEffect=m.next=m:(C=y.next,y.next=m,m.next=C,g.lastEffect=m),m}function H5(){return Pn().memoizedState}function J0(m,g,y,C){var P=Hs();ia.flags|=m,P.memoizedState=km(1|g,{destroy:void 0},y,C===void 0?null:C)}function ey(m,g,y,C){var P=Pn();C=C===void 0?null:C;var R=P.memoizedState.inst;Fa!==null&&C!==null&&_C(C,Fa.memoizedState.deps)?P.memoizedState=km(g,R,y,C):(ia.flags|=m,P.memoizedState=km(1|g,R,y,C))}function q5(m,g){J0(8390656,8,m,g)}function IC(m,g){ey(2048,8,m,g)}function Lte(m){ia.flags|=4;var g=ia.updateQueue;if(g===null)g=K0(),ia.updateQueue=g,g.events=[m];else{var y=g.events;y===null?g.events=[m]:y.push(m)}}function G5(m){var g=Pn().memoizedState;return Lte({ref:g,nextImpl:m}),function(){if((Aa&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}function W5(m,g){return ey(4,2,m,g)}function V5(m,g){return ey(4,4,m,g)}function Y5(m,g){if(typeof g=="function"){m=m();var y=g(m);return function(){typeof y=="function"?y():g(null)}}if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function Q5(m,g,y){y=y!=null?y.concat([m]):null,ey(4,4,Y5.bind(null,g,m),y)}function $C(){}function K5(m,g){var y=Pn();g=g===void 0?null:g;var C=y.memoizedState;return g!==null&&_C(g,C[1])?C[0]:(y.memoizedState=[m,g],m)}function X5(m,g){var y=Pn();g=g===void 0?null:g;var C=y.memoizedState;if(g!==null&&_C(g,C[1]))return C[0];if(C=m(),Hd){rt(!0);try{m()}finally{rt(!1)}}return y.memoizedState=[C,g],C}function RC(m,g,y){return y===void 0||(sl&1073741824)!==0&&(ga&261930)===0?m.memoizedState=g:(m.memoizedState=y,m=ZO(),ia.lanes|=m,Sc|=m,y)}function Z5(m,g,y,C){return _r(y,g)?y:_m.current!==null?(m=RC(m,y,C),_r(m,g)||(Fn=!0),m):(sl&42)===0||(sl&1073741824)!==0&&(ga&261930)===0?(Fn=!0,m.memoizedState=y):(m=ZO(),ia.lanes|=m,Sc|=m,g)}function J5(m,g,y,C,P){var R=J.p;J.p=R!==0&&8>R?R:8;var ae=Q.T,Se={};Q.T=Se,UC(m,!1,g,y);try{var Ye=P(),dt=Q.S;if(dt!==null&&dt(Se,Ye),Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var pt=_te(Ye,C);Bh(m,g,pt,Pr(m))}else Bh(m,g,C,Pr(m))}catch(vt){Bh(m,g,{then:function(){},status:"rejected",reason:vt},Pr())}finally{J.p=R,ae!==null&&Se.types!==null&&(ae.types=Se.types),Q.T=ae}}function Pte(){}function zC(m,g,y,C){if(m.tag!==5)throw Error(s(476));var P=eO(m).queue;J5(m,P,g,Y,y===null?Pte:function(){return tO(m),y(C)})}function eO(m){var g=m.memoizedState;if(g!==null)return g;g={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:Y},next:null};var y={};return g.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:y},next:null},m.memoizedState=g,m=m.alternate,m!==null&&(m.memoizedState=g),g}function tO(m){var g=eO(m);g.next===null&&(g=m.alternate.memoizedState),Bh(m,g.next.queue,{},Pr())}function FC(){return js(rg)}function aO(){return Pn().memoizedState}function nO(){return Pn().memoizedState}function Dte(m){for(var g=m.return;g!==null;){switch(g.tag){case 24:case 3:var y=Pr();m=bc(y);var C=vc(g,m,y);C!==null&&(rr(C,g,y),$h(C,g,y)),g={cache:gC()},m.payload=g;return}g=g.return}}function Ote(m,g,y){var C=Pr();y={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},ty(m)?rO(g,y):(y=sC(m,g,y,C),y!==null&&(rr(y,m,C),iO(y,g,C)))}function sO(m,g,y){var C=Pr();Bh(m,g,y,C)}function Bh(m,g,y,C){var P={lane:C,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(ty(m))rO(g,P);else{var R=m.alternate;if(m.lanes===0&&(R===null||R.lanes===0)&&(R=g.lastRenderedReducer,R!==null))try{var ae=g.lastRenderedState,Se=R(ae,y);if(P.hasEagerState=!0,P.eagerState=Se,_r(Se,ae))return M0(m,g,P,0),Ga===null&&O0(),!1}catch{}if(y=sC(m,g,P,C),y!==null)return rr(y,m,C),iO(y,g,C),!0}return!1}function UC(m,g,y,C){if(C={lane:2,revertLane:bS(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},ty(m)){if(g)throw Error(s(479))}else g=sC(m,y,C,2),g!==null&&rr(g,m,2)}function ty(m){var g=m.alternate;return m===ia||g!==null&&g===ia}function rO(m,g){Am=Y0=!0;var y=m.pending;y===null?g.next=g:(g.next=y.next,y.next=g),m.pending=g}function iO(m,g,y){if((y&4194048)!==0){var C=g.lanes;C&=m.pendingLanes,y|=C,g.lanes=y,B(m,y)}}var Hh={readContext:js,use:X0,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn};Hh.useEffectEvent=vn;var oO={readContext:js,use:X0,useCallback:function(m,g){return Hs().memoizedState=[m,g===void 0?null:g],m},useContext:js,useEffect:q5,useImperativeHandle:function(m,g,y){y=y!=null?y.concat([m]):null,J0(4194308,4,Y5.bind(null,g,m),y)},useLayoutEffect:function(m,g){return J0(4194308,4,m,g)},useInsertionEffect:function(m,g){J0(4,2,m,g)},useMemo:function(m,g){var y=Hs();g=g===void 0?null:g;var C=m();if(Hd){rt(!0);try{m()}finally{rt(!1)}}return y.memoizedState=[C,g],C},useReducer:function(m,g,y){var C=Hs();if(y!==void 0){var P=y(g);if(Hd){rt(!0);try{y(g)}finally{rt(!1)}}}else P=g;return C.memoizedState=C.baseState=P,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:P},C.queue=m,m=m.dispatch=Ote.bind(null,ia,m),[C.memoizedState,m]},useRef:function(m){var g=Hs();return m={current:m},g.memoizedState=m},useState:function(m){m=OC(m);var g=m.queue,y=sO.bind(null,ia,g);return g.dispatch=y,[m.memoizedState,y]},useDebugValue:$C,useDeferredValue:function(m,g){var y=Hs();return RC(y,m,g)},useTransition:function(){var m=OC(!1);return m=J5.bind(null,ia,m.queue,!0,!1),Hs().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,g,y){var C=ia,P=Hs();if(ya){if(y===void 0)throw Error(s(407));y=y()}else{if(y=g(),Ga===null)throw Error(s(349));(ga&127)!==0||T5(C,g,y)}P.memoizedState=y;var R={value:y,getSnapshot:g};return P.queue=R,q5(E5.bind(null,C,R,m),[m]),C.flags|=2048,km(9,{destroy:void 0},k5.bind(null,C,R,y,g),null),y},useId:function(){var m=Hs(),g=Ga.identifierPrefix;if(ya){var y=so,C=no;y=(C&~(1<<32-st(C)-1)).toString(32)+y,g="_"+g+"R_"+y,y=Q0++,0<y&&(g+="H"+y.toString(32)),g+="_"}else y=Ate++,g="_"+g+"r_"+y.toString(32)+"_";return m.memoizedState=g},useHostTransitionStatus:FC,useFormState:z5,useActionState:z5,useOptimistic:function(m){var g=Hs();g.memoizedState=g.baseState=m;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=y,g=UC.bind(null,ia,!0,y),y.dispatch=g,[m,g]},useMemoCache:LC,useCacheRefresh:function(){return Hs().memoizedState=Dte.bind(null,ia)},useEffectEvent:function(m){var g=Hs(),y={impl:m};return g.memoizedState=y,function(){if((Aa&2)!==0)throw Error(s(440));return y.impl.apply(void 0,arguments)}}},BC={readContext:js,use:X0,useCallback:K5,useContext:js,useEffect:IC,useImperativeHandle:Q5,useInsertionEffect:W5,useLayoutEffect:V5,useMemo:X5,useReducer:Z0,useRef:H5,useState:function(){return Z0(rl)},useDebugValue:$C,useDeferredValue:function(m,g){var y=Pn();return Z5(y,Fa.memoizedState,m,g)},useTransition:function(){var m=Z0(rl)[0],g=Pn().memoizedState;return[typeof m=="boolean"?m:Uh(m),g]},useSyncExternalStore:A5,useId:aO,useHostTransitionStatus:FC,useFormState:F5,useActionState:F5,useOptimistic:function(m,g){var y=Pn();return D5(y,Fa,m,g)},useMemoCache:LC,useCacheRefresh:nO};BC.useEffectEvent=G5;var lO={readContext:js,use:X0,useCallback:K5,useContext:js,useEffect:IC,useImperativeHandle:Q5,useInsertionEffect:W5,useLayoutEffect:V5,useMemo:X5,useReducer:DC,useRef:H5,useState:function(){return DC(rl)},useDebugValue:$C,useDeferredValue:function(m,g){var y=Pn();return Fa===null?RC(y,m,g):Z5(y,Fa.memoizedState,m,g)},useTransition:function(){var m=DC(rl)[0],g=Pn().memoizedState;return[typeof m=="boolean"?m:Uh(m),g]},useSyncExternalStore:A5,useId:aO,useHostTransitionStatus:FC,useFormState:B5,useActionState:B5,useOptimistic:function(m,g){var y=Pn();return Fa!==null?D5(y,Fa,m,g):(y.baseState=m,[m,y.queue.dispatch])},useMemoCache:LC,useCacheRefresh:nO};lO.useEffectEvent=G5;function HC(m,g,y,C){g=m.memoizedState,y=y(C,g),y=y==null?g:h({},g,y),m.memoizedState=y,m.lanes===0&&(m.updateQueue.baseState=y)}var qC={enqueueSetState:function(m,g,y){m=m._reactInternals;var C=Pr(),P=bc(C);P.payload=g,y!=null&&(P.callback=y),g=vc(m,P,C),g!==null&&(rr(g,m,C),$h(g,m,C))},enqueueReplaceState:function(m,g,y){m=m._reactInternals;var C=Pr(),P=bc(C);P.tag=1,P.payload=g,y!=null&&(P.callback=y),g=vc(m,P,C),g!==null&&(rr(g,m,C),$h(g,m,C))},enqueueForceUpdate:function(m,g){m=m._reactInternals;var y=Pr(),C=bc(y);C.tag=2,g!=null&&(C.callback=g),g=vc(m,C,y),g!==null&&(rr(g,m,y),$h(g,m,y))}};function cO(m,g,y,C,P,R,ae){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(C,R,ae):g.prototype&&g.prototype.isPureReactComponent?!kh(y,C)||!kh(P,R):!0}function dO(m,g,y,C){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(y,C),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(y,C),g.state!==m&&qC.enqueueReplaceState(g,g.state,null)}function qd(m,g){var y=g;if("ref"in g){y={};for(var C in g)C!=="ref"&&(y[C]=g[C])}if(m=m.defaultProps){y===g&&(y=h({},y));for(var P in m)y[P]===void 0&&(y[P]=m[P])}return y}function uO(m){D0(m)}function mO(m){console.error(m)}function fO(m){D0(m)}function ay(m,g){try{var y=m.onUncaughtError;y(g.value,{componentStack:g.stack})}catch(C){setTimeout(function(){throw C})}}function hO(m,g,y){try{var C=m.onCaughtError;C(y.value,{componentStack:y.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function GC(m,g,y){return y=bc(y),y.tag=3,y.payload={element:null},y.callback=function(){ay(m,g)},y}function gO(m){return m=bc(m),m.tag=3,m}function pO(m,g,y,C){var P=y.type.getDerivedStateFromError;if(typeof P=="function"){var R=C.value;m.payload=function(){return P(R)},m.callback=function(){hO(g,y,C)}}var ae=y.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(m.callback=function(){hO(g,y,C),typeof P!="function"&&(_c===null?_c=new Set([this]):_c.add(this));var Se=C.stack;this.componentDidCatch(C.value,{componentStack:Se!==null?Se:""})})}function Mte(m,g,y,C,P){if(y.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(g=y.alternate,g!==null&&wm(g,y,P,!0),y=Tr.current,y!==null){switch(y.tag){case 31:case 13:return ti===null?hy():y.alternate===null&&wn===0&&(wn=3),y.flags&=-257,y.flags|=65536,y.lanes=P,C===H0?y.flags|=16384:(g=y.updateQueue,g===null?y.updateQueue=new Set([C]):g.add(C),pS(m,C,P)),!1;case 22:return y.flags|=65536,C===H0?y.flags|=16384:(g=y.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([C])},y.updateQueue=g):(y=g.retryQueue,y===null?g.retryQueue=new Set([C]):y.add(C)),pS(m,C,P)),!1}throw Error(s(435,y.tag))}return pS(m,C,P),hy(),!1}if(ya)return g=Tr.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=P,C!==dC&&(m=Error(s(422),{cause:C}),Ph(Xr(m,y)))):(C!==dC&&(g=Error(s(423),{cause:C}),Ph(Xr(g,y))),m=m.current.alternate,m.flags|=65536,P&=-P,m.lanes|=P,C=Xr(C,y),P=GC(m.stateNode,C,P),wC(m,P),wn!==4&&(wn=2)),!1;var R=Error(s(520),{cause:C});if(R=Xr(R,y),Xh===null?Xh=[R]:Xh.push(R),wn!==4&&(wn=2),g===null)return!0;C=Xr(C,y),y=g;do{switch(y.tag){case 3:return y.flags|=65536,m=P&-P,y.lanes|=m,m=GC(y.stateNode,C,m),wC(y,m),!1;case 1:if(g=y.type,R=y.stateNode,(y.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(_c===null||!_c.has(R))))return y.flags|=65536,P&=-P,y.lanes|=P,P=gO(P),pO(P,m,y,C),wC(y,P),!1}y=y.return}while(y!==null);return!1}var WC=Error(s(461)),Fn=!1;function Ns(m,g,y,C){g.child=m===null?v5(g,null,y,C):Bd(g,m.child,y,C)}function xO(m,g,y,C,P){y=y.render;var R=g.ref;if("ref"in C){var ae={};for(var Se in C)Se!=="ref"&&(ae[Se]=C[Se])}else ae=C;return Rd(g),C=AC(m,g,y,ae,R,P),Se=TC(),m!==null&&!Fn?(kC(m,g,P),il(m,g,P)):(ya&&Se&&lC(g),g.flags|=1,Ns(m,g,C,P),g.child)}function yO(m,g,y,C,P){if(m===null){var R=y.type;return typeof R=="function"&&!rC(R)&&R.defaultProps===void 0&&y.compare===null?(g.tag=15,g.type=R,bO(m,g,R,C,P)):(m=$0(y.type,null,C,g,g.mode,P),m.ref=g.ref,m.return=g,g.child=m)}if(R=m.child,!eS(m,P)){var ae=R.memoizedProps;if(y=y.compare,y=y!==null?y:kh,y(ae,C)&&m.ref===g.ref)return il(m,g,P)}return g.flags|=1,m=el(R,C),m.ref=g.ref,m.return=g,g.child=m}function bO(m,g,y,C,P){if(m!==null){var R=m.memoizedProps;if(kh(R,C)&&m.ref===g.ref)if(Fn=!1,g.pendingProps=C=R,eS(m,P))(m.flags&131072)!==0&&(Fn=!0);else return g.lanes=m.lanes,il(m,g,P)}return VC(m,g,y,C,P)}function vO(m,g,y,C){var P=C.children,R=m!==null?m.memoizedState:null;if(m===null&&g.stateNode===null&&(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((g.flags&128)!==0){if(R=R!==null?R.baseLanes|y:y,m!==null){for(C=g.child=m.child,P=0;C!==null;)P=P|C.lanes|C.childLanes,C=C.sibling;C=P&~R}else C=0,g.child=null;return wO(m,g,R,y,C)}if((y&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},m!==null&&U0(g,R!==null?R.cachePool:null),R!==null?N5(g,R):NC(),C5(g);else return C=g.lanes=536870912,wO(m,g,R!==null?R.baseLanes|y:y,y,C)}else R!==null?(U0(g,R.cachePool),N5(g,R),jc(),g.memoizedState=null):(m!==null&&U0(g,null),NC(),jc());return Ns(m,g,P,y),g.child}function qh(m,g){return m!==null&&m.tag===22||g.stateNode!==null||(g.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.sibling}function wO(m,g,y,C,P){var R=xC();return R=R===null?null:{parent:Rn._currentValue,pool:R},g.memoizedState={baseLanes:y,cachePool:R},m!==null&&U0(g,null),NC(),C5(g),m!==null&&wm(m,g,C,!0),g.childLanes=P,null}function ny(m,g){return g=ry({mode:g.mode,children:g.children},m.mode),g.ref=m.ref,m.child=g,g.return=m,g}function jO(m,g,y){return Bd(g,m.child,null,y),m=ny(g,g.pendingProps),m.flags|=2,kr(g),g.memoizedState=null,m}function Ite(m,g,y){var C=g.pendingProps,P=(g.flags&128)!==0;if(g.flags&=-129,m===null){if(ya){if(C.mode==="hidden")return m=ny(g,C),g.lanes=536870912,qh(null,m);if(SC(g),(m=en)?(m=OM(m,ei),m=m!==null&&m.data==="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:hc!==null?{id:no,overflow:so}:null,retryLane:536870912,hydrationErrors:null},y=r5(m),y.return=g,g.child=y,ws=g,en=null)):m=null,m===null)throw pc(g);return g.lanes=536870912,null}return ny(g,C)}var R=m.memoizedState;if(R!==null){var ae=R.dehydrated;if(SC(g),P)if(g.flags&256)g.flags&=-257,g=jO(m,g,y);else if(g.memoizedState!==null)g.child=m.child,g.flags|=128,g=null;else throw Error(s(558));else if(Fn||wm(m,g,y,!1),P=(y&m.childLanes)!==0,Fn||P){if(C=Ga,C!==null&&(ae=ce(C,y),ae!==0&&ae!==R.retryLane))throw R.retryLane=ae,Od(m,ae),rr(C,m,ae),WC;hy(),g=jO(m,g,y)}else m=R.treeContext,en=ai(ae.nextSibling),ws=g,ya=!0,gc=null,ei=!1,m!==null&&l5(g,m),g=ny(g,C),g.flags|=4096;return g}return m=el(m.child,{mode:C.mode,children:C.children}),m.ref=g.ref,g.child=m,m.return=g,m}function sy(m,g){var y=g.ref;if(y===null)m!==null&&m.ref!==null&&(g.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(s(284));(m===null||m.ref!==y)&&(g.flags|=4194816)}}function VC(m,g,y,C,P){return Rd(g),y=AC(m,g,y,C,void 0,P),C=TC(),m!==null&&!Fn?(kC(m,g,P),il(m,g,P)):(ya&&C&&lC(g),g.flags|=1,Ns(m,g,y,P),g.child)}function NO(m,g,y,C,P,R){return Rd(g),g.updateQueue=null,y=_5(g,C,y,P),S5(m),C=TC(),m!==null&&!Fn?(kC(m,g,R),il(m,g,R)):(ya&&C&&lC(g),g.flags|=1,Ns(m,g,y,R),g.child)}function CO(m,g,y,C,P){if(Rd(g),g.stateNode===null){var R=xm,ae=y.contextType;typeof ae=="object"&&ae!==null&&(R=js(ae)),R=new y(C,R),g.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=qC,g.stateNode=R,R._reactInternals=g,R=g.stateNode,R.props=C,R.state=g.memoizedState,R.refs={},bC(g),ae=y.contextType,R.context=typeof ae=="object"&&ae!==null?js(ae):xm,R.state=g.memoizedState,ae=y.getDerivedStateFromProps,typeof ae=="function"&&(HC(g,y,ae,C),R.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(ae=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),ae!==R.state&&qC.enqueueReplaceState(R,R.state,null),zh(g,C,R,P),Rh(),R.state=g.memoizedState),typeof R.componentDidMount=="function"&&(g.flags|=4194308),C=!0}else if(m===null){R=g.stateNode;var Se=g.memoizedProps,Ye=qd(y,Se);R.props=Ye;var dt=R.context,pt=y.contextType;ae=xm,typeof pt=="object"&&pt!==null&&(ae=js(pt));var vt=y.getDerivedStateFromProps;pt=typeof vt=="function"||typeof R.getSnapshotBeforeUpdate=="function",Se=g.pendingProps!==Se,pt||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Se||dt!==ae)&&dO(g,R,C,ae),yc=!1;var mt=g.memoizedState;R.state=mt,zh(g,C,R,P),Rh(),dt=g.memoizedState,Se||mt!==dt||yc?(typeof vt=="function"&&(HC(g,y,vt,C),dt=g.memoizedState),(Ye=yc||cO(g,y,Ye,C,mt,dt,ae))?(pt||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(g.flags|=4194308)):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=C,g.memoizedState=dt),R.props=C,R.state=dt,R.context=ae,C=Ye):(typeof R.componentDidMount=="function"&&(g.flags|=4194308),C=!1)}else{R=g.stateNode,vC(m,g),ae=g.memoizedProps,pt=qd(y,ae),R.props=pt,vt=g.pendingProps,mt=R.context,dt=y.contextType,Ye=xm,typeof dt=="object"&&dt!==null&&(Ye=js(dt)),Se=y.getDerivedStateFromProps,(dt=typeof Se=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(ae!==vt||mt!==Ye)&&dO(g,R,C,Ye),yc=!1,mt=g.memoizedState,R.state=mt,zh(g,C,R,P),Rh();var gt=g.memoizedState;ae!==vt||mt!==gt||yc||m!==null&&m.dependencies!==null&&z0(m.dependencies)?(typeof Se=="function"&&(HC(g,y,Se,C),gt=g.memoizedState),(pt=yc||cO(g,y,pt,C,mt,gt,Ye)||m!==null&&m.dependencies!==null&&z0(m.dependencies))?(dt||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(C,gt,Ye),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(C,gt,Ye)),typeof R.componentDidUpdate=="function"&&(g.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof R.componentDidUpdate!="function"||ae===m.memoizedProps&&mt===m.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||ae===m.memoizedProps&&mt===m.memoizedState||(g.flags|=1024),g.memoizedProps=C,g.memoizedState=gt),R.props=C,R.state=gt,R.context=Ye,C=pt):(typeof R.componentDidUpdate!="function"||ae===m.memoizedProps&&mt===m.memoizedState||(g.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||ae===m.memoizedProps&&mt===m.memoizedState||(g.flags|=1024),C=!1)}return R=C,sy(m,g),C=(g.flags&128)!==0,R||C?(R=g.stateNode,y=C&&typeof y.getDerivedStateFromError!="function"?null:R.render(),g.flags|=1,m!==null&&C?(g.child=Bd(g,m.child,null,P),g.child=Bd(g,null,y,P)):Ns(m,g,y,P),g.memoizedState=R.state,m=g.child):m=il(m,g,P),m}function SO(m,g,y,C){return Id(),g.flags|=256,Ns(m,g,y,C),g.child}var YC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function QC(m){return{baseLanes:m,cachePool:h5()}}function KC(m,g,y){return m=m!==null?m.childLanes&~y:0,g&&(m|=Lr),m}function _O(m,g,y){var C=g.pendingProps,P=!1,R=(g.flags&128)!==0,ae;if((ae=R)||(ae=m!==null&&m.memoizedState===null?!1:(Ln.current&2)!==0),ae&&(P=!0,g.flags&=-129),ae=(g.flags&32)!==0,g.flags&=-33,m===null){if(ya){if(P?wc(g):jc(),(m=en)?(m=OM(m,ei),m=m!==null&&m.data!=="&"?m:null,m!==null&&(g.memoizedState={dehydrated:m,treeContext:hc!==null?{id:no,overflow:so}:null,retryLane:536870912,hydrationErrors:null},y=r5(m),y.return=g,g.child=y,ws=g,en=null)):m=null,m===null)throw pc(g);return PS(m)?g.lanes=32:g.lanes=536870912,null}var Se=C.children;return C=C.fallback,P?(jc(),P=g.mode,Se=ry({mode:"hidden",children:Se},P),C=Md(C,P,y,null),Se.return=g,C.return=g,Se.sibling=C,g.child=Se,C=g.child,C.memoizedState=QC(y),C.childLanes=KC(m,ae,y),g.memoizedState=YC,qh(null,C)):(wc(g),XC(g,Se))}var Ye=m.memoizedState;if(Ye!==null&&(Se=Ye.dehydrated,Se!==null)){if(R)g.flags&256?(wc(g),g.flags&=-257,g=ZC(m,g,y)):g.memoizedState!==null?(jc(),g.child=m.child,g.flags|=128,g=null):(jc(),Se=C.fallback,P=g.mode,C=ry({mode:"visible",children:C.children},P),Se=Md(Se,P,y,null),Se.flags|=2,C.return=g,Se.return=g,C.sibling=Se,g.child=C,Bd(g,m.child,null,y),C=g.child,C.memoizedState=QC(y),C.childLanes=KC(m,ae,y),g.memoizedState=YC,g=qh(null,C));else if(wc(g),PS(Se)){if(ae=Se.nextSibling&&Se.nextSibling.dataset,ae)var dt=ae.dgst;ae=dt,C=Error(s(419)),C.stack="",C.digest=ae,Ph({value:C,source:null,stack:null}),g=ZC(m,g,y)}else if(Fn||wm(m,g,y,!1),ae=(y&m.childLanes)!==0,Fn||ae){if(ae=Ga,ae!==null&&(C=ce(ae,y),C!==0&&C!==Ye.retryLane))throw Ye.retryLane=C,Od(m,C),rr(ae,m,C),WC;LS(Se)||hy(),g=ZC(m,g,y)}else LS(Se)?(g.flags|=192,g.child=m.child,g=null):(m=Ye.treeContext,en=ai(Se.nextSibling),ws=g,ya=!0,gc=null,ei=!1,m!==null&&l5(g,m),g=XC(g,C.children),g.flags|=4096);return g}return P?(jc(),Se=C.fallback,P=g.mode,Ye=m.child,dt=Ye.sibling,C=el(Ye,{mode:"hidden",children:C.children}),C.subtreeFlags=Ye.subtreeFlags&65011712,dt!==null?Se=el(dt,Se):(Se=Md(Se,P,y,null),Se.flags|=2),Se.return=g,C.return=g,C.sibling=Se,g.child=C,qh(null,C),C=g.child,Se=m.child.memoizedState,Se===null?Se=QC(y):(P=Se.cachePool,P!==null?(Ye=Rn._currentValue,P=P.parent!==Ye?{parent:Ye,pool:Ye}:P):P=h5(),Se={baseLanes:Se.baseLanes|y,cachePool:P}),C.memoizedState=Se,C.childLanes=KC(m,ae,y),g.memoizedState=YC,qh(m.child,C)):(wc(g),y=m.child,m=y.sibling,y=el(y,{mode:"visible",children:C.children}),y.return=g,y.sibling=null,m!==null&&(ae=g.deletions,ae===null?(g.deletions=[m],g.flags|=16):ae.push(m)),g.child=y,g.memoizedState=null,y)}function XC(m,g){return g=ry({mode:"visible",children:g},m.mode),g.return=m,m.child=g}function ry(m,g){return m=Ar(22,m,null,g),m.lanes=0,m}function ZC(m,g,y){return Bd(g,m.child,null,y),m=XC(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function AO(m,g,y){m.lanes|=g;var C=m.alternate;C!==null&&(C.lanes|=g),fC(m.return,g,y)}function JC(m,g,y,C,P,R){var ae=m.memoizedState;ae===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:C,tail:y,tailMode:P,treeForkCount:R}:(ae.isBackwards=g,ae.rendering=null,ae.renderingStartTime=0,ae.last=C,ae.tail=y,ae.tailMode=P,ae.treeForkCount=R)}function TO(m,g,y){var C=g.pendingProps,P=C.revealOrder,R=C.tail;C=C.children;var ae=Ln.current,Se=(ae&2)!==0;if(Se?(ae=ae&1|2,g.flags|=128):ae&=1,pe(Ln,ae),Ns(m,g,C,y),C=ya?Lh:0,!Se&&m!==null&&(m.flags&128)!==0)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&AO(m,y,g);else if(m.tag===19)AO(m,y,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(P){case"forwards":for(y=g.child,P=null;y!==null;)m=y.alternate,m!==null&&V0(m)===null&&(P=y),y=y.sibling;y=P,y===null?(P=g.child,g.child=null):(P=y.sibling,y.sibling=null),JC(g,!1,P,y,R,C);break;case"backwards":case"unstable_legacy-backwards":for(y=null,P=g.child,g.child=null;P!==null;){if(m=P.alternate,m!==null&&V0(m)===null){g.child=P;break}m=P.sibling,P.sibling=y,y=P,P=m}JC(g,!0,y,null,R,C);break;case"together":JC(g,!1,null,null,void 0,C);break;default:g.memoizedState=null}return g.child}function il(m,g,y){if(m!==null&&(g.dependencies=m.dependencies),Sc|=g.lanes,(y&g.childLanes)===0)if(m!==null){if(wm(m,g,y,!1),(y&g.childLanes)===0)return null}else return null;if(m!==null&&g.child!==m.child)throw Error(s(153));if(g.child!==null){for(m=g.child,y=el(m,m.pendingProps),g.child=y,y.return=g;m.sibling!==null;)m=m.sibling,y=y.sibling=el(m,m.pendingProps),y.return=g;y.sibling=null}return g.child}function eS(m,g){return(m.lanes&g)!==0?!0:(m=m.dependencies,!!(m!==null&&z0(m)))}function $te(m,g,y){switch(g.tag){case 3:Te(g,g.stateNode.containerInfo),xc(g,Rn,m.memoizedState.cache),Id();break;case 27:case 5:Oe(g);break;case 4:Te(g,g.stateNode.containerInfo);break;case 10:xc(g,g.type,g.memoizedProps.value);break;case 31:if(g.memoizedState!==null)return g.flags|=128,SC(g),null;break;case 13:var C=g.memoizedState;if(C!==null)return C.dehydrated!==null?(wc(g),g.flags|=128,null):(y&g.child.childLanes)!==0?_O(m,g,y):(wc(g),m=il(m,g,y),m!==null?m.sibling:null);wc(g);break;case 19:var P=(m.flags&128)!==0;if(C=(y&g.childLanes)!==0,C||(wm(m,g,y,!1),C=(y&g.childLanes)!==0),P){if(C)return TO(m,g,y);g.flags|=128}if(P=g.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),pe(Ln,Ln.current),C)break;return null;case 22:return g.lanes=0,vO(m,g,y,g.pendingProps);case 24:xc(g,Rn,m.memoizedState.cache)}return il(m,g,y)}function kO(m,g,y){if(m!==null)if(m.memoizedProps!==g.pendingProps)Fn=!0;else{if(!eS(m,y)&&(g.flags&128)===0)return Fn=!1,$te(m,g,y);Fn=(m.flags&131072)!==0}else Fn=!1,ya&&(g.flags&1048576)!==0&&o5(g,Lh,g.index);switch(g.lanes=0,g.tag){case 16:e:{var C=g.pendingProps;if(m=Fd(g.elementType),g.type=m,typeof m=="function")rC(m)?(C=qd(m,C),g.tag=1,g=CO(null,g,m,C,y)):(g.tag=0,g=VC(null,g,m,C,y));else{if(m!=null){var P=m.$$typeof;if(P===_){g.tag=11,g=xO(null,g,m,C,y);break e}else if(P===A){g.tag=14,g=yO(null,g,m,C,y);break e}}throw g=W(m)||m,Error(s(306,g,""))}}return g;case 0:return VC(m,g,g.type,g.pendingProps,y);case 1:return C=g.type,P=qd(C,g.pendingProps),CO(m,g,C,P,y);case 3:e:{if(Te(g,g.stateNode.containerInfo),m===null)throw Error(s(387));C=g.pendingProps;var R=g.memoizedState;P=R.element,vC(m,g),zh(g,C,null,y);var ae=g.memoizedState;if(C=ae.cache,xc(g,Rn,C),C!==R.cache&&hC(g,[Rn],y,!0),Rh(),C=ae.element,R.isDehydrated)if(R={element:C,isDehydrated:!1,cache:ae.cache},g.updateQueue.baseState=R,g.memoizedState=R,g.flags&256){g=SO(m,g,C,y);break e}else if(C!==P){P=Xr(Error(s(424)),g),Ph(P),g=SO(m,g,C,y);break e}else for(m=g.stateNode.containerInfo,m.nodeType===9?m=m.body:m=m.nodeName==="HTML"?m.ownerDocument.body:m,en=ai(m.firstChild),ws=g,ya=!0,gc=null,ei=!0,y=v5(g,null,C,y),g.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(Id(),C===P){g=il(m,g,y);break e}Ns(m,g,C,y)}g=g.child}return g;case 26:return sy(m,g),m===null?(y=FM(g.type,null,g.pendingProps,null))?g.memoizedState=y:ya||(y=g.type,m=g.pendingProps,C=wy(be.current).createElement(y),C[tt]=g,C[lt]=m,Cs(C,y,m),We(C),g.stateNode=C):g.memoizedState=FM(g.type,m.memoizedProps,g.pendingProps,m.memoizedState),null;case 27:return Oe(g),m===null&&ya&&(C=g.stateNode=$M(g.type,g.pendingProps,be.current),ws=g,ei=!0,P=en,Ec(g.type)?(DS=P,en=ai(C.firstChild)):en=P),Ns(m,g,g.pendingProps.children,y),sy(m,g),m===null&&(g.flags|=4194304),g.child;case 5:return m===null&&ya&&((P=C=en)&&(C=fae(C,g.type,g.pendingProps,ei),C!==null?(g.stateNode=C,ws=g,en=ai(C.firstChild),ei=!1,P=!0):P=!1),P||pc(g)),Oe(g),P=g.type,R=g.pendingProps,ae=m!==null?m.memoizedProps:null,C=R.children,TS(P,R)?C=null:ae!==null&&TS(P,ae)&&(g.flags|=32),g.memoizedState!==null&&(P=AC(m,g,Tte,null,null,y),rg._currentValue=P),sy(m,g),Ns(m,g,C,y),g.child;case 6:return m===null&&ya&&((m=y=en)&&(y=hae(y,g.pendingProps,ei),y!==null?(g.stateNode=y,ws=g,en=null,m=!0):m=!1),m||pc(g)),null;case 13:return _O(m,g,y);case 4:return Te(g,g.stateNode.containerInfo),C=g.pendingProps,m===null?g.child=Bd(g,null,C,y):Ns(m,g,C,y),g.child;case 11:return xO(m,g,g.type,g.pendingProps,y);case 7:return Ns(m,g,g.pendingProps,y),g.child;case 8:return Ns(m,g,g.pendingProps.children,y),g.child;case 12:return Ns(m,g,g.pendingProps.children,y),g.child;case 10:return C=g.pendingProps,xc(g,g.type,C.value),Ns(m,g,C.children,y),g.child;case 9:return P=g.type._context,C=g.pendingProps.children,Rd(g),P=js(P),C=C(P),g.flags|=1,Ns(m,g,C,y),g.child;case 14:return yO(m,g,g.type,g.pendingProps,y);case 15:return bO(m,g,g.type,g.pendingProps,y);case 19:return TO(m,g,y);case 31:return Ite(m,g,y);case 22:return vO(m,g,y,g.pendingProps);case 24:return Rd(g),C=js(Rn),m===null?(P=xC(),P===null&&(P=Ga,R=gC(),P.pooledCache=R,R.refCount++,R!==null&&(P.pooledCacheLanes|=y),P=R),g.memoizedState={parent:C,cache:P},bC(g),xc(g,Rn,P)):((m.lanes&y)!==0&&(vC(m,g),zh(g,null,null,y),Rh()),P=m.memoizedState,R=g.memoizedState,P.parent!==C?(P={parent:C,cache:C},g.memoizedState=P,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=P),xc(g,Rn,C)):(C=R.cache,xc(g,Rn,C),C!==P.cache&&hC(g,[Rn],y,!0))),Ns(m,g,g.pendingProps.children,y),g.child;case 29:throw g.pendingProps}throw Error(s(156,g.tag))}function ol(m){m.flags|=4}function tS(m,g,y,C,P){if((g=(m.mode&32)!==0)&&(g=!1),g){if(m.flags|=16777216,(P&335544128)===P)if(m.stateNode.complete)m.flags|=8192;else if(aM())m.flags|=8192;else throw Ud=H0,yC}else m.flags&=-16777217}function EO(m,g){if(g.type!=="stylesheet"||(g.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!GM(g))if(aM())m.flags|=8192;else throw Ud=H0,yC}function iy(m,g){g!==null&&(m.flags|=4),m.flags&16384&&(g=m.tag!==22?Qe():536870912,m.lanes|=g,Dm|=g)}function Gh(m,g){if(!ya)switch(m.tailMode){case"hidden":g=m.tail;for(var y=null;g!==null;)g.alternate!==null&&(y=g),g=g.sibling;y===null?m.tail=null:y.sibling=null;break;case"collapsed":y=m.tail;for(var C=null;y!==null;)y.alternate!==null&&(C=y),y=y.sibling;C===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:C.sibling=null}}function tn(m){var g=m.alternate!==null&&m.alternate.child===m.child,y=0,C=0;if(g)for(var P=m.child;P!==null;)y|=P.lanes|P.childLanes,C|=P.subtreeFlags&65011712,C|=P.flags&65011712,P.return=m,P=P.sibling;else for(P=m.child;P!==null;)y|=P.lanes|P.childLanes,C|=P.subtreeFlags,C|=P.flags,P.return=m,P=P.sibling;return m.subtreeFlags|=C,m.childLanes=y,g}function Rte(m,g,y){var C=g.pendingProps;switch(cC(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(g),null;case 1:return tn(g),null;case 3:return y=g.stateNode,C=null,m!==null&&(C=m.memoizedState.cache),g.memoizedState.cache!==C&&(g.flags|=2048),nl(Rn),ue(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(m===null||m.child===null)&&(vm(g)?ol(g):m===null||m.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,uC())),tn(g),null;case 26:var P=g.type,R=g.memoizedState;return m===null?(ol(g),R!==null?(tn(g),EO(g,R)):(tn(g),tS(g,P,null,C,y))):R?R!==m.memoizedState?(ol(g),tn(g),EO(g,R)):(tn(g),g.flags&=-16777217):(m=m.memoizedProps,m!==C&&ol(g),tn(g),tS(g,P,m,C,y)),null;case 27:if(xe(g),y=be.current,P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&ol(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return tn(g),null}m=Ne.current,vm(g)?c5(g):(m=$M(P,C,y),g.stateNode=m,ol(g))}return tn(g),null;case 5:if(xe(g),P=g.type,m!==null&&g.stateNode!=null)m.memoizedProps!==C&&ol(g);else{if(!C){if(g.stateNode===null)throw Error(s(166));return tn(g),null}if(R=Ne.current,vm(g))c5(g);else{var ae=wy(be.current);switch(R){case 1:R=ae.createElementNS("http://www.w3.org/2000/svg",P);break;case 2:R=ae.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;default:switch(P){case"svg":R=ae.createElementNS("http://www.w3.org/2000/svg",P);break;case"math":R=ae.createElementNS("http://www.w3.org/1998/Math/MathML",P);break;case"script":R=ae.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof C.is=="string"?ae.createElement("select",{is:C.is}):ae.createElement("select"),C.multiple?R.multiple=!0:C.size&&(R.size=C.size);break;default:R=typeof C.is=="string"?ae.createElement(P,{is:C.is}):ae.createElement(P)}}R[tt]=g,R[lt]=C;e:for(ae=g.child;ae!==null;){if(ae.tag===5||ae.tag===6)R.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===g)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===g)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}g.stateNode=R;e:switch(Cs(R,P,C),P){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&ol(g)}}return tn(g),tS(g,g.type,m===null?null:m.memoizedProps,g.pendingProps,y),null;case 6:if(m&&g.stateNode!=null)m.memoizedProps!==C&&ol(g);else{if(typeof C!="string"&&g.stateNode===null)throw Error(s(166));if(m=be.current,vm(g)){if(m=g.stateNode,y=g.memoizedProps,C=null,P=ws,P!==null)switch(P.tag){case 27:case 5:C=P.memoizedProps}m[tt]=g,m=!!(m.nodeValue===y||C!==null&&C.suppressHydrationWarning===!0||_M(m.nodeValue,y)),m||pc(g,!0)}else m=wy(m).createTextNode(C),m[tt]=g,g.stateNode=m}return tn(g),null;case 31:if(y=g.memoizedState,m===null||m.memoizedState!==null){if(C=vm(g),y!==null){if(m===null){if(!C)throw Error(s(318));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(557));m[tt]=g}else Id(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;tn(g),m=!1}else y=uC(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=y),m=!0;if(!m)return g.flags&256?(kr(g),g):(kr(g),null);if((g.flags&128)!==0)throw Error(s(558))}return tn(g),null;case 13:if(C=g.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(P=vm(g),C!==null&&C.dehydrated!==null){if(m===null){if(!P)throw Error(s(318));if(P=g.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(s(317));P[tt]=g}else Id(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;tn(g),P=!1}else P=uC(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=P),P=!0;if(!P)return g.flags&256?(kr(g),g):(kr(g),null)}return kr(g),(g.flags&128)!==0?(g.lanes=y,g):(y=C!==null,m=m!==null&&m.memoizedState!==null,y&&(C=g.child,P=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(P=C.alternate.memoizedState.cachePool.pool),R=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(R=C.memoizedState.cachePool.pool),R!==P&&(C.flags|=2048)),y!==m&&y&&(g.child.flags|=8192),iy(g,g.updateQueue),tn(g),null);case 4:return ue(),m===null&&NS(g.stateNode.containerInfo),tn(g),null;case 10:return nl(g.type),tn(g),null;case 19:if(ne(Ln),C=g.memoizedState,C===null)return tn(g),null;if(P=(g.flags&128)!==0,R=C.rendering,R===null)if(P)Gh(C,!1);else{if(wn!==0||m!==null&&(m.flags&128)!==0)for(m=g.child;m!==null;){if(R=V0(m),R!==null){for(g.flags|=128,Gh(C,!1),m=R.updateQueue,g.updateQueue=m,iy(g,m),g.subtreeFlags=0,m=y,y=g.child;y!==null;)s5(y,m),y=y.sibling;return pe(Ln,Ln.current&1|2),ya&&tl(g,C.treeForkCount),g.child}m=m.sibling}C.tail!==null&&_e()>uy&&(g.flags|=128,P=!0,Gh(C,!1),g.lanes=4194304)}else{if(!P)if(m=V0(R),m!==null){if(g.flags|=128,P=!0,m=m.updateQueue,g.updateQueue=m,iy(g,m),Gh(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!ya)return tn(g),null}else 2*_e()-C.renderingStartTime>uy&&y!==536870912&&(g.flags|=128,P=!0,Gh(C,!1),g.lanes=4194304);C.isBackwards?(R.sibling=g.child,g.child=R):(m=C.last,m!==null?m.sibling=R:g.child=R,C.last=R)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=_e(),m.sibling=null,y=Ln.current,pe(Ln,P?y&1|2:y&1),ya&&tl(g,C.treeForkCount),m):(tn(g),null);case 22:case 23:return kr(g),CC(),C=g.memoizedState!==null,m!==null?m.memoizedState!==null!==C&&(g.flags|=8192):C&&(g.flags|=8192),C?(y&536870912)!==0&&(g.flags&128)===0&&(tn(g),g.subtreeFlags&6&&(g.flags|=8192)):tn(g),y=g.updateQueue,y!==null&&iy(g,y.retryQueue),y=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),C=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==y&&(g.flags|=2048),m!==null&&ne(zd),null;case 24:return y=null,m!==null&&(y=m.memoizedState.cache),g.memoizedState.cache!==y&&(g.flags|=2048),nl(Rn),tn(g),null;case 25:return null;case 30:return null}throw Error(s(156,g.tag))}function zte(m,g){switch(cC(g),g.tag){case 1:return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return nl(Rn),ue(),m=g.flags,(m&65536)!==0&&(m&128)===0?(g.flags=m&-65537|128,g):null;case 26:case 27:case 5:return xe(g),null;case 31:if(g.memoizedState!==null){if(kr(g),g.alternate===null)throw Error(s(340));Id()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 13:if(kr(g),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(s(340));Id()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return ne(Ln),null;case 4:return ue(),null;case 10:return nl(g.type),null;case 22:case 23:return kr(g),CC(),m!==null&&ne(zd),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 24:return nl(Rn),null;case 25:return null;default:return null}}function LO(m,g){switch(cC(g),g.tag){case 3:nl(Rn),ue();break;case 26:case 27:case 5:xe(g);break;case 4:ue();break;case 31:g.memoizedState!==null&&kr(g);break;case 13:kr(g);break;case 19:ne(Ln);break;case 10:nl(g.type);break;case 22:case 23:kr(g),CC(),m!==null&&ne(zd);break;case 24:nl(Rn)}}function Wh(m,g){try{var y=g.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var P=C.next;y=P;do{if((y.tag&m)===m){C=void 0;var R=y.create,ae=y.inst;C=R(),ae.destroy=C}y=y.next}while(y!==P)}}catch(Se){Oa(g,g.return,Se)}}function Nc(m,g,y){try{var C=g.updateQueue,P=C!==null?C.lastEffect:null;if(P!==null){var R=P.next;C=R;do{if((C.tag&m)===m){var ae=C.inst,Se=ae.destroy;if(Se!==void 0){ae.destroy=void 0,P=g;var Ye=y,dt=Se;try{dt()}catch(pt){Oa(P,Ye,pt)}}}C=C.next}while(C!==R)}}catch(pt){Oa(g,g.return,pt)}}function PO(m){var g=m.updateQueue;if(g!==null){var y=m.stateNode;try{j5(g,y)}catch(C){Oa(m,m.return,C)}}}function DO(m,g,y){y.props=qd(m.type,m.memoizedProps),y.state=m.memoizedState;try{y.componentWillUnmount()}catch(C){Oa(m,g,C)}}function Vh(m,g){try{var y=m.ref;if(y!==null){switch(m.tag){case 26:case 27:case 5:var C=m.stateNode;break;case 30:C=m.stateNode;break;default:C=m.stateNode}typeof y=="function"?m.refCleanup=y(C):y.current=C}}catch(P){Oa(m,g,P)}}function ro(m,g){var y=m.ref,C=m.refCleanup;if(y!==null)if(typeof C=="function")try{C()}catch(P){Oa(m,g,P)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(P){Oa(m,g,P)}else y.current=null}function OO(m){var g=m.type,y=m.memoizedProps,C=m.stateNode;try{e:switch(g){case"button":case"input":case"select":case"textarea":y.autoFocus&&C.focus();break e;case"img":y.src?C.src=y.src:y.srcSet&&(C.srcset=y.srcSet)}}catch(P){Oa(m,m.return,P)}}function aS(m,g,y){try{var C=m.stateNode;oae(C,m.type,y,g),C[lt]=g}catch(P){Oa(m,m.return,P)}}function MO(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&Ec(m.type)||m.tag===4}function nS(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||MO(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&Ec(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function sS(m,g,y){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(m,g):(g=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,g.appendChild(m),y=y._reactRootContainer,y!=null||g.onclick!==null||(g.onclick=Zo));else if(C!==4&&(C===27&&Ec(m.type)&&(y=m.stateNode,g=null),m=m.child,m!==null))for(sS(m,g,y),m=m.sibling;m!==null;)sS(m,g,y),m=m.sibling}function oy(m,g,y){var C=m.tag;if(C===5||C===6)m=m.stateNode,g?y.insertBefore(m,g):y.appendChild(m);else if(C!==4&&(C===27&&Ec(m.type)&&(y=m.stateNode),m=m.child,m!==null))for(oy(m,g,y),m=m.sibling;m!==null;)oy(m,g,y),m=m.sibling}function IO(m){var g=m.stateNode,y=m.memoizedProps;try{for(var C=m.type,P=g.attributes;P.length;)g.removeAttributeNode(P[0]);Cs(g,C,y),g[tt]=m,g[lt]=y}catch(R){Oa(m,m.return,R)}}var ll=!1,Un=!1,rS=!1,$O=typeof WeakSet=="function"?WeakSet:Set,us=null;function Fte(m,g){if(m=m.containerInfo,_S=Ty,m=Q3(m),Z1(m)){if("selectionStart"in m)var y={start:m.selectionStart,end:m.selectionEnd};else e:{y=(y=m.ownerDocument)&&y.defaultView||window;var C=y.getSelection&&y.getSelection();if(C&&C.rangeCount!==0){y=C.anchorNode;var P=C.anchorOffset,R=C.focusNode;C=C.focusOffset;try{y.nodeType,R.nodeType}catch{y=null;break e}var ae=0,Se=-1,Ye=-1,dt=0,pt=0,vt=m,mt=null;t:for(;;){for(var gt;vt!==y||P!==0&&vt.nodeType!==3||(Se=ae+P),vt!==R||C!==0&&vt.nodeType!==3||(Ye=ae+C),vt.nodeType===3&&(ae+=vt.nodeValue.length),(gt=vt.firstChild)!==null;)mt=vt,vt=gt;for(;;){if(vt===m)break t;if(mt===y&&++dt===P&&(Se=ae),mt===R&&++pt===C&&(Ye=ae),(gt=vt.nextSibling)!==null)break;vt=mt,mt=vt.parentNode}vt=gt}y=Se===-1||Ye===-1?null:{start:Se,end:Ye}}else y=null}y=y||{start:0,end:0}}else y=null;for(AS={focusedElem:m,selectionRange:y},Ty=!1,us=g;us!==null;)if(g=us,m=g.child,(g.subtreeFlags&1028)!==0&&m!==null)m.return=g,us=m;else for(;us!==null;){switch(g=us,R=g.alternate,m=g.flags,g.tag){case 0:if((m&4)!==0&&(m=g.updateQueue,m=m!==null?m.events:null,m!==null))for(y=0;y<m.length;y++)P=m[y],P.ref.impl=P.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&R!==null){m=void 0,y=g,P=R.memoizedProps,R=R.memoizedState,C=y.stateNode;try{var Rt=qd(y.type,P);m=C.getSnapshotBeforeUpdate(Rt,R),C.__reactInternalSnapshotBeforeUpdate=m}catch(Xt){Oa(y,y.return,Xt)}}break;case 3:if((m&1024)!==0){if(m=g.stateNode.containerInfo,y=m.nodeType,y===9)ES(m);else if(y===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":ES(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(s(163))}if(m=g.sibling,m!==null){m.return=g.return,us=m;break}us=g.return}}function RO(m,g,y){var C=y.flags;switch(y.tag){case 0:case 11:case 15:dl(m,y),C&4&&Wh(5,y);break;case 1:if(dl(m,y),C&4)if(m=y.stateNode,g===null)try{m.componentDidMount()}catch(ae){Oa(y,y.return,ae)}else{var P=qd(y.type,g.memoizedProps);g=g.memoizedState;try{m.componentDidUpdate(P,g,m.__reactInternalSnapshotBeforeUpdate)}catch(ae){Oa(y,y.return,ae)}}C&64&&PO(y),C&512&&Vh(y,y.return);break;case 3:if(dl(m,y),C&64&&(m=y.updateQueue,m!==null)){if(g=null,y.child!==null)switch(y.child.tag){case 27:case 5:g=y.child.stateNode;break;case 1:g=y.child.stateNode}try{j5(m,g)}catch(ae){Oa(y,y.return,ae)}}break;case 27:g===null&&C&4&&IO(y);case 26:case 5:dl(m,y),g===null&&C&4&&OO(y),C&512&&Vh(y,y.return);break;case 12:dl(m,y);break;case 31:dl(m,y),C&4&&UO(m,y);break;case 13:dl(m,y),C&4&&BO(m,y),C&64&&(m=y.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(y=Qte.bind(null,y),gae(m,y))));break;case 22:if(C=y.memoizedState!==null||ll,!C){g=g!==null&&g.memoizedState!==null||Un,P=ll;var R=Un;ll=C,(Un=g)&&!R?ul(m,y,(y.subtreeFlags&8772)!==0):dl(m,y),ll=P,Un=R}break;case 30:break;default:dl(m,y)}}function zO(m){var g=m.alternate;g!==null&&(m.alternate=null,zO(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&$(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var on=null,tr=!1;function cl(m,g,y){for(y=y.child;y!==null;)FO(m,g,y),y=y.sibling}function FO(m,g,y){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Re,y)}catch{}switch(y.tag){case 26:Un||ro(y,g),cl(m,g,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:Un||ro(y,g);var C=on,P=tr;Ec(y.type)&&(on=y.stateNode,tr=!1),cl(m,g,y),ag(y.stateNode),on=C,tr=P;break;case 5:Un||ro(y,g);case 6:if(C=on,P=tr,on=null,cl(m,g,y),on=C,tr=P,on!==null)if(tr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(y.stateNode)}catch(R){Oa(y,g,R)}else try{on.removeChild(y.stateNode)}catch(R){Oa(y,g,R)}break;case 18:on!==null&&(tr?(m=on,PM(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,y.stateNode),Um(m)):PM(on,y.stateNode));break;case 4:C=on,P=tr,on=y.stateNode.containerInfo,tr=!0,cl(m,g,y),on=C,tr=P;break;case 0:case 11:case 14:case 15:Nc(2,y,g),Un||Nc(4,y,g),cl(m,g,y);break;case 1:Un||(ro(y,g),C=y.stateNode,typeof C.componentWillUnmount=="function"&&DO(y,g,C)),cl(m,g,y);break;case 21:cl(m,g,y);break;case 22:Un=(C=Un)||y.memoizedState!==null,cl(m,g,y),Un=C;break;default:cl(m,g,y)}}function UO(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{Um(m)}catch(y){Oa(g,g.return,y)}}}function BO(m,g){if(g.memoizedState===null&&(m=g.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{Um(m)}catch(y){Oa(g,g.return,y)}}function Ute(m){switch(m.tag){case 31:case 13:case 19:var g=m.stateNode;return g===null&&(g=m.stateNode=new $O),g;case 22:return m=m.stateNode,g=m._retryCache,g===null&&(g=m._retryCache=new $O),g;default:throw Error(s(435,m.tag))}}function ly(m,g){var y=Ute(m);g.forEach(function(C){if(!y.has(C)){y.add(C);var P=Kte.bind(null,m,C);C.then(P,P)}})}function ar(m,g){var y=g.deletions;if(y!==null)for(var C=0;C<y.length;C++){var P=y[C],R=m,ae=g,Se=ae;e:for(;Se!==null;){switch(Se.tag){case 27:if(Ec(Se.type)){on=Se.stateNode,tr=!1;break e}break;case 5:on=Se.stateNode,tr=!1;break e;case 3:case 4:on=Se.stateNode.containerInfo,tr=!0;break e}Se=Se.return}if(on===null)throw Error(s(160));FO(R,ae,P),on=null,tr=!1,R=P.alternate,R!==null&&(R.return=null),P.return=null}if(g.subtreeFlags&13886)for(g=g.child;g!==null;)HO(g,m),g=g.sibling}var Di=null;function HO(m,g){var y=m.alternate,C=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:ar(g,m),nr(m),C&4&&(Nc(3,m,m.return),Wh(3,m),Nc(5,m,m.return));break;case 1:ar(g,m),nr(m),C&512&&(Un||y===null||ro(y,y.return)),C&64&&ll&&(m=m.updateQueue,m!==null&&(C=m.callbacks,C!==null&&(y=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=y===null?C:y.concat(C))));break;case 26:var P=Di;if(ar(g,m),nr(m),C&512&&(Un||y===null||ro(y,y.return)),C&4){var R=y!==null?y.memoizedState:null;if(C=m.memoizedState,y===null)if(C===null)if(m.stateNode===null){e:{C=m.type,y=m.memoizedProps,P=P.ownerDocument||P;t:switch(C){case"title":R=P.getElementsByTagName("title")[0],(!R||R[Ae]||R[tt]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=P.createElement(C),P.head.insertBefore(R,P.querySelector("head > title"))),Cs(R,C,y),R[tt]=m,We(R),C=R;break e;case"link":var ae=HM("link","href",P).get(C+(y.href||""));if(ae){for(var Se=0;Se<ae.length;Se++)if(R=ae[Se],R.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&R.getAttribute("rel")===(y.rel==null?null:y.rel)&&R.getAttribute("title")===(y.title==null?null:y.title)&&R.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){ae.splice(Se,1);break t}}R=P.createElement(C),Cs(R,C,y),P.head.appendChild(R);break;case"meta":if(ae=HM("meta","content",P).get(C+(y.content||""))){for(Se=0;Se<ae.length;Se++)if(R=ae[Se],R.getAttribute("content")===(y.content==null?null:""+y.content)&&R.getAttribute("name")===(y.name==null?null:y.name)&&R.getAttribute("property")===(y.property==null?null:y.property)&&R.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&R.getAttribute("charset")===(y.charSet==null?null:y.charSet)){ae.splice(Se,1);break t}}R=P.createElement(C),Cs(R,C,y),P.head.appendChild(R);break;default:throw Error(s(468,C))}R[tt]=m,We(R),C=R}m.stateNode=C}else qM(P,m.type,m.stateNode);else m.stateNode=BM(P,C,m.memoizedProps);else R!==C?(R===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):R.count--,C===null?qM(P,m.type,m.stateNode):BM(P,C,m.memoizedProps)):C===null&&m.stateNode!==null&&aS(m,m.memoizedProps,y.memoizedProps)}break;case 27:ar(g,m),nr(m),C&512&&(Un||y===null||ro(y,y.return)),y!==null&&C&4&&aS(m,m.memoizedProps,y.memoizedProps);break;case 5:if(ar(g,m),nr(m),C&512&&(Un||y===null||ro(y,y.return)),m.flags&32){P=m.stateNode;try{dm(P,"")}catch(Rt){Oa(m,m.return,Rt)}}C&4&&m.stateNode!=null&&(P=m.memoizedProps,aS(m,P,y!==null?y.memoizedProps:P)),C&1024&&(rS=!0);break;case 6:if(ar(g,m),nr(m),C&4){if(m.stateNode===null)throw Error(s(162));C=m.memoizedProps,y=m.stateNode;try{y.nodeValue=C}catch(Rt){Oa(m,m.return,Rt)}}break;case 3:if(Cy=null,P=Di,Di=jy(g.containerInfo),ar(g,m),Di=P,nr(m),C&4&&y!==null&&y.memoizedState.isDehydrated)try{Um(g.containerInfo)}catch(Rt){Oa(m,m.return,Rt)}rS&&(rS=!1,qO(m));break;case 4:C=Di,Di=jy(m.stateNode.containerInfo),ar(g,m),nr(m),Di=C;break;case 12:ar(g,m),nr(m);break;case 31:ar(g,m),nr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ly(m,C)));break;case 13:ar(g,m),nr(m),m.child.flags&8192&&m.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(dy=_e()),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ly(m,C)));break;case 22:P=m.memoizedState!==null;var Ye=y!==null&&y.memoizedState!==null,dt=ll,pt=Un;if(ll=dt||P,Un=pt||Ye,ar(g,m),Un=pt,ll=dt,nr(m),C&8192)e:for(g=m.stateNode,g._visibility=P?g._visibility&-2:g._visibility|1,P&&(y===null||Ye||ll||Un||Gd(m)),y=null,g=m;;){if(g.tag===5||g.tag===26){if(y===null){Ye=y=g;try{if(R=Ye.stateNode,P)ae=R.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{Se=Ye.stateNode;var vt=Ye.memoizedProps.style,mt=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;Se.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(Rt){Oa(Ye,Ye.return,Rt)}}}else if(g.tag===6){if(y===null){Ye=g;try{Ye.stateNode.nodeValue=P?"":Ye.memoizedProps}catch(Rt){Oa(Ye,Ye.return,Rt)}}}else if(g.tag===18){if(y===null){Ye=g;try{var gt=Ye.stateNode;P?DM(gt,!0):DM(Ye.stateNode,!1)}catch(Rt){Oa(Ye,Ye.return,Rt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===m)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break e;for(;g.sibling===null;){if(g.return===null||g.return===m)break e;y===g&&(y=null),g=g.return}y===g&&(y=null),g.sibling.return=g.return,g=g.sibling}C&4&&(C=m.updateQueue,C!==null&&(y=C.retryQueue,y!==null&&(C.retryQueue=null,ly(m,y))));break;case 19:ar(g,m),nr(m),C&4&&(C=m.updateQueue,C!==null&&(m.updateQueue=null,ly(m,C)));break;case 30:break;case 21:break;default:ar(g,m),nr(m)}}function nr(m){var g=m.flags;if(g&2){try{for(var y,C=m.return;C!==null;){if(MO(C)){y=C;break}C=C.return}if(y==null)throw Error(s(160));switch(y.tag){case 27:var P=y.stateNode,R=nS(m);oy(m,R,P);break;case 5:var ae=y.stateNode;y.flags&32&&(dm(ae,""),y.flags&=-33);var Se=nS(m);oy(m,Se,ae);break;case 3:case 4:var Ye=y.stateNode.containerInfo,dt=nS(m);sS(m,dt,Ye);break;default:throw Error(s(161))}}catch(pt){Oa(m,m.return,pt)}m.flags&=-3}g&4096&&(m.flags&=-4097)}function qO(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var g=m;qO(g),g.tag===5&&g.flags&1024&&g.stateNode.reset(),m=m.sibling}}function dl(m,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)RO(m,g.alternate,g),g=g.sibling}function Gd(m){for(m=m.child;m!==null;){var g=m;switch(g.tag){case 0:case 11:case 14:case 15:Nc(4,g,g.return),Gd(g);break;case 1:ro(g,g.return);var y=g.stateNode;typeof y.componentWillUnmount=="function"&&DO(g,g.return,y),Gd(g);break;case 27:ag(g.stateNode);case 26:case 5:ro(g,g.return),Gd(g);break;case 22:g.memoizedState===null&&Gd(g);break;case 30:Gd(g);break;default:Gd(g)}m=m.sibling}}function ul(m,g,y){for(y=y&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var C=g.alternate,P=m,R=g,ae=R.flags;switch(R.tag){case 0:case 11:case 15:ul(P,R,y),Wh(4,R);break;case 1:if(ul(P,R,y),C=R,P=C.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(dt){Oa(C,C.return,dt)}if(C=R,P=C.updateQueue,P!==null){var Se=C.stateNode;try{var Ye=P.shared.hiddenCallbacks;if(Ye!==null)for(P.shared.hiddenCallbacks=null,P=0;P<Ye.length;P++)w5(Ye[P],Se)}catch(dt){Oa(C,C.return,dt)}}y&&ae&64&&PO(R),Vh(R,R.return);break;case 27:IO(R);case 26:case 5:ul(P,R,y),y&&C===null&&ae&4&&OO(R),Vh(R,R.return);break;case 12:ul(P,R,y);break;case 31:ul(P,R,y),y&&ae&4&&UO(P,R);break;case 13:ul(P,R,y),y&&ae&4&&BO(P,R);break;case 22:R.memoizedState===null&&ul(P,R,y),Vh(R,R.return);break;case 30:break;default:ul(P,R,y)}g=g.sibling}}function iS(m,g){var y=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(y=m.memoizedState.cachePool.pool),m=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(m=g.memoizedState.cachePool.pool),m!==y&&(m!=null&&m.refCount++,y!=null&&Dh(y))}function oS(m,g){m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Dh(m))}function Oi(m,g,y,C){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)GO(m,g,y,C),g=g.sibling}function GO(m,g,y,C){var P=g.flags;switch(g.tag){case 0:case 11:case 15:Oi(m,g,y,C),P&2048&&Wh(9,g);break;case 1:Oi(m,g,y,C);break;case 3:Oi(m,g,y,C),P&2048&&(m=null,g.alternate!==null&&(m=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==m&&(g.refCount++,m!=null&&Dh(m)));break;case 12:if(P&2048){Oi(m,g,y,C),m=g.stateNode;try{var R=g.memoizedProps,ae=R.id,Se=R.onPostCommit;typeof Se=="function"&&Se(ae,g.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Ye){Oa(g,g.return,Ye)}}else Oi(m,g,y,C);break;case 31:Oi(m,g,y,C);break;case 13:Oi(m,g,y,C);break;case 23:break;case 22:R=g.stateNode,ae=g.alternate,g.memoizedState!==null?R._visibility&2?Oi(m,g,y,C):Yh(m,g):R._visibility&2?Oi(m,g,y,C):(R._visibility|=2,Em(m,g,y,C,(g.subtreeFlags&10256)!==0||!1)),P&2048&&iS(ae,g);break;case 24:Oi(m,g,y,C),P&2048&&oS(g.alternate,g);break;default:Oi(m,g,y,C)}}function Em(m,g,y,C,P){for(P=P&&((g.subtreeFlags&10256)!==0||!1),g=g.child;g!==null;){var R=m,ae=g,Se=y,Ye=C,dt=ae.flags;switch(ae.tag){case 0:case 11:case 15:Em(R,ae,Se,Ye,P),Wh(8,ae);break;case 23:break;case 22:var pt=ae.stateNode;ae.memoizedState!==null?pt._visibility&2?Em(R,ae,Se,Ye,P):Yh(R,ae):(pt._visibility|=2,Em(R,ae,Se,Ye,P)),P&&dt&2048&&iS(ae.alternate,ae);break;case 24:Em(R,ae,Se,Ye,P),P&&dt&2048&&oS(ae.alternate,ae);break;default:Em(R,ae,Se,Ye,P)}g=g.sibling}}function Yh(m,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var y=m,C=g,P=C.flags;switch(C.tag){case 22:Yh(y,C),P&2048&&iS(C.alternate,C);break;case 24:Yh(y,C),P&2048&&oS(C.alternate,C);break;default:Yh(y,C)}g=g.sibling}}var Qh=8192;function Lm(m,g,y){if(m.subtreeFlags&Qh)for(m=m.child;m!==null;)WO(m,g,y),m=m.sibling}function WO(m,g,y){switch(m.tag){case 26:Lm(m,g,y),m.flags&Qh&&m.memoizedState!==null&&Aae(y,Di,m.memoizedState,m.memoizedProps);break;case 5:Lm(m,g,y);break;case 3:case 4:var C=Di;Di=jy(m.stateNode.containerInfo),Lm(m,g,y),Di=C;break;case 22:m.memoizedState===null&&(C=m.alternate,C!==null&&C.memoizedState!==null?(C=Qh,Qh=16777216,Lm(m,g,y),Qh=C):Lm(m,g,y));break;default:Lm(m,g,y)}}function VO(m){var g=m.alternate;if(g!==null&&(m=g.child,m!==null)){g.child=null;do g=m.sibling,m.sibling=null,m=g;while(m!==null)}}function Kh(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var C=g[y];us=C,QO(C,m)}VO(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)YO(m),m=m.sibling}function YO(m){switch(m.tag){case 0:case 11:case 15:Kh(m),m.flags&2048&&Nc(9,m,m.return);break;case 3:Kh(m);break;case 12:Kh(m);break;case 22:var g=m.stateNode;m.memoizedState!==null&&g._visibility&2&&(m.return===null||m.return.tag!==13)?(g._visibility&=-3,cy(m)):Kh(m);break;default:Kh(m)}}function cy(m){var g=m.deletions;if((m.flags&16)!==0){if(g!==null)for(var y=0;y<g.length;y++){var C=g[y];us=C,QO(C,m)}VO(m)}for(m=m.child;m!==null;){switch(g=m,g.tag){case 0:case 11:case 15:Nc(8,g,g.return),cy(g);break;case 22:y=g.stateNode,y._visibility&2&&(y._visibility&=-3,cy(g));break;default:cy(g)}m=m.sibling}}function QO(m,g){for(;us!==null;){var y=us;switch(y.tag){case 0:case 11:case 15:Nc(8,y,g);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var C=y.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Dh(y.memoizedState.cache)}if(C=y.child,C!==null)C.return=y,us=C;else e:for(y=m;us!==null;){C=us;var P=C.sibling,R=C.return;if(zO(C),C===y){us=null;break e}if(P!==null){P.return=R,us=P;break e}us=R}}}var Bte={getCacheForType:function(m){var g=js(Rn),y=g.data.get(m);return y===void 0&&(y=m(),g.data.set(m,y)),y},cacheSignal:function(){return js(Rn).controller.signal}},Hte=typeof WeakMap=="function"?WeakMap:Map,Aa=0,Ga=null,fa=null,ga=0,Da=0,Er=null,Cc=!1,Pm=!1,lS=!1,ml=0,wn=0,Sc=0,Wd=0,cS=0,Lr=0,Dm=0,Xh=null,sr=null,dS=!1,dy=0,KO=0,uy=1/0,my=null,_c=null,Kn=0,Ac=null,Om=null,fl=0,uS=0,mS=null,XO=null,Zh=0,fS=null;function Pr(){return(Aa&2)!==0&&ga!==0?ga&-ga:Q.T!==null?bS():K()}function ZO(){if(Lr===0)if((ga&536870912)===0||ya){var m=At;At<<=1,(At&3932160)===0&&(At=262144),Lr=m}else Lr=536870912;return m=Tr.current,m!==null&&(m.flags|=32),Lr}function rr(m,g,y){(m===Ga&&(Da===2||Da===9)||m.cancelPendingCommit!==null)&&(Mm(m,0),Tc(m,ga,Lr,!1)),q(m,y),((Aa&2)===0||m!==Ga)&&(m===Ga&&((Aa&2)===0&&(Wd|=y),wn===4&&Tc(m,ga,Lr,!1)),io(m))}function JO(m,g,y){if((Aa&6)!==0)throw Error(s(327));var C=!y&&(g&127)===0&&(g&m.expiredLanes)===0||Pe(m,g),P=C?Wte(m,g):gS(m,g,!0),R=C;do{if(P===0){Pm&&!C&&Tc(m,g,0,!1);break}else{if(y=m.current.alternate,R&&!qte(y)){P=gS(m,g,!1),R=!1;continue}if(P===2){if(R=g,m.errorRecoveryDisabledLanes&R)var ae=0;else ae=m.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){g=ae;e:{var Se=m;P=Xh;var Ye=Se.current.memoizedState.isDehydrated;if(Ye&&(Mm(Se,ae).flags|=256),ae=gS(Se,ae,!1),ae!==2){if(lS&&!Ye){Se.errorRecoveryDisabledLanes|=R,Wd|=R,P=4;break e}R=sr,sr=P,R!==null&&(sr===null?sr=R:sr.push.apply(sr,R))}P=ae}if(R=!1,P!==2)continue}}if(P===1){Mm(m,0),Tc(m,g,0,!0);break}e:{switch(C=m,R=P,R){case 0:case 1:throw Error(s(345));case 4:if((g&4194048)!==g)break;case 6:Tc(C,g,Lr,!Cc);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(s(329))}if((g&62914560)===g&&(P=dy+300-_e(),10<P)){if(Tc(C,g,Lr,!Cc),ye(C,0,!0)!==0)break e;fl=g,C.timeoutHandle=EM(eM.bind(null,C,y,sr,my,dS,g,Lr,Wd,Dm,Cc,R,"Throttled",-0,0),P);break e}eM(C,y,sr,my,dS,g,Lr,Wd,Dm,Cc,R,null,-0,0)}}break}while(!0);io(m)}function eM(m,g,y,C,P,R,ae,Se,Ye,dt,pt,vt,mt,gt){if(m.timeoutHandle=-1,vt=g.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zo},WO(g,R,vt);var Rt=(R&62914560)===R?dy-_e():(R&4194048)===R?KO-_e():0;if(Rt=Tae(vt,Rt),Rt!==null){fl=R,m.cancelPendingCommit=Rt(lM.bind(null,m,g,R,y,C,P,ae,Se,Ye,pt,vt,null,mt,gt)),Tc(m,R,ae,!dt);return}}lM(m,g,R,y,C,P,ae,Se,Ye)}function qte(m){for(var g=m;;){var y=g.tag;if((y===0||y===11||y===15)&&g.flags&16384&&(y=g.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var C=0;C<y.length;C++){var P=y[C],R=P.getSnapshot;P=P.value;try{if(!_r(R(),P))return!1}catch{return!1}}if(y=g.child,g.subtreeFlags&16384&&y!==null)y.return=g,g=y;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Tc(m,g,y,C){g&=~cS,g&=~Wd,m.suspendedLanes|=g,m.pingedLanes&=~g,C&&(m.warmLanes|=g),C=m.expirationTimes;for(var P=g;0<P;){var R=31-st(P),ae=1<<R;C[R]=-1,P&=~ae}y!==0&&te(m,y,g)}function fy(){return(Aa&6)===0?(Jh(0),!1):!0}function hS(){if(fa!==null){if(Da===0)var m=fa.return;else m=fa,al=$d=null,EC(m),Sm=null,Mh=0,m=fa;for(;m!==null;)LO(m.alternate,m),m=m.return;fa=null}}function Mm(m,g){var y=m.timeoutHandle;y!==-1&&(m.timeoutHandle=-1,dae(y)),y=m.cancelPendingCommit,y!==null&&(m.cancelPendingCommit=null,y()),fl=0,hS(),Ga=m,fa=y=el(m.current,null),ga=g,Da=0,Er=null,Cc=!1,Pm=Pe(m,g),lS=!1,Dm=Lr=cS=Wd=Sc=wn=0,sr=Xh=null,dS=!1,(g&8)!==0&&(g|=g&32);var C=m.entangledLanes;if(C!==0)for(m=m.entanglements,C&=g;0<C;){var P=31-st(C),R=1<<P;g|=m[P],C&=~R}return ml=g,O0(),y}function tM(m,g){ia=null,Q.H=Hh,g===Cm||g===B0?(g=x5(),Da=3):g===yC?(g=x5(),Da=4):Da=g===WC?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Er=g,fa===null&&(wn=1,ay(m,Xr(g,m.current)))}function aM(){var m=Tr.current;return m===null?!0:(ga&4194048)===ga?ti===null:(ga&62914560)===ga||(ga&536870912)!==0?m===ti:!1}function nM(){var m=Q.H;return Q.H=Hh,m===null?Hh:m}function sM(){var m=Q.A;return Q.A=Bte,m}function hy(){wn=4,Cc||(ga&4194048)!==ga&&Tr.current!==null||(Pm=!0),(Sc&134217727)===0&&(Wd&134217727)===0||Ga===null||Tc(Ga,ga,Lr,!1)}function gS(m,g,y){var C=Aa;Aa|=2;var P=nM(),R=sM();(Ga!==m||ga!==g)&&(my=null,Mm(m,g)),g=!1;var ae=wn;e:do try{if(Da!==0&&fa!==null){var Se=fa,Ye=Er;switch(Da){case 8:hS(),ae=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(g=!0);var dt=Da;if(Da=0,Er=null,Im(m,Se,Ye,dt),y&&Pm){ae=0;break e}break;default:dt=Da,Da=0,Er=null,Im(m,Se,Ye,dt)}}Gte(),ae=wn;break}catch(pt){tM(m,pt)}while(!0);return g&&m.shellSuspendCounter++,al=$d=null,Aa=C,Q.H=P,Q.A=R,fa===null&&(Ga=null,ga=0,O0()),ae}function Gte(){for(;fa!==null;)rM(fa)}function Wte(m,g){var y=Aa;Aa|=2;var C=nM(),P=sM();Ga!==m||ga!==g?(my=null,uy=_e()+500,Mm(m,g)):Pm=Pe(m,g);e:do try{if(Da!==0&&fa!==null){g=fa;var R=Er;t:switch(Da){case 1:Da=0,Er=null,Im(m,g,R,1);break;case 2:case 9:if(g5(R)){Da=0,Er=null,iM(g);break}g=function(){Da!==2&&Da!==9||Ga!==m||(Da=7),io(m)},R.then(g,g);break e;case 3:Da=7;break e;case 4:Da=5;break e;case 7:g5(R)?(Da=0,Er=null,iM(g)):(Da=0,Er=null,Im(m,g,R,7));break;case 5:var ae=null;switch(fa.tag){case 26:ae=fa.memoizedState;case 5:case 27:var Se=fa;if(ae?GM(ae):Se.stateNode.complete){Da=0,Er=null;var Ye=Se.sibling;if(Ye!==null)fa=Ye;else{var dt=Se.return;dt!==null?(fa=dt,gy(dt)):fa=null}break t}}Da=0,Er=null,Im(m,g,R,5);break;case 6:Da=0,Er=null,Im(m,g,R,6);break;case 8:hS(),wn=6;break e;default:throw Error(s(462))}}Vte();break}catch(pt){tM(m,pt)}while(!0);return al=$d=null,Q.H=C,Q.A=P,Aa=y,fa!==null?0:(Ga=null,ga=0,O0(),wn)}function Vte(){for(;fa!==null&&!Je();)rM(fa)}function rM(m){var g=kO(m.alternate,m,ml);m.memoizedProps=m.pendingProps,g===null?gy(m):fa=g}function iM(m){var g=m,y=g.alternate;switch(g.tag){case 15:case 0:g=NO(y,g,g.pendingProps,g.type,void 0,ga);break;case 11:g=NO(y,g,g.pendingProps,g.type.render,g.ref,ga);break;case 5:EC(g);default:LO(y,g),g=fa=s5(g,ml),g=kO(y,g,ml)}m.memoizedProps=m.pendingProps,g===null?gy(m):fa=g}function Im(m,g,y,C){al=$d=null,EC(g),Sm=null,Mh=0;var P=g.return;try{if(Mte(m,P,g,y,ga)){wn=1,ay(m,Xr(y,m.current)),fa=null;return}}catch(R){if(P!==null)throw fa=P,R;wn=1,ay(m,Xr(y,m.current)),fa=null;return}g.flags&32768?(ya||C===1?m=!0:Pm||(ga&536870912)!==0?m=!1:(Cc=m=!0,(C===2||C===9||C===3||C===6)&&(C=Tr.current,C!==null&&C.tag===13&&(C.flags|=16384))),oM(g,m)):gy(g)}function gy(m){var g=m;do{if((g.flags&32768)!==0){oM(g,Cc);return}m=g.return;var y=Rte(g.alternate,g,ml);if(y!==null){fa=y;return}if(g=g.sibling,g!==null){fa=g;return}fa=g=m}while(g!==null);wn===0&&(wn=5)}function oM(m,g){do{var y=zte(m.alternate,m);if(y!==null){y.flags&=32767,fa=y;return}if(y=m.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!g&&(m=m.sibling,m!==null)){fa=m;return}fa=m=y}while(m!==null);wn=6,fa=null}function lM(m,g,y,C,P,R,ae,Se,Ye){m.cancelPendingCommit=null;do py();while(Kn!==0);if((Aa&6)!==0)throw Error(s(327));if(g!==null){if(g===m.current)throw Error(s(177));if(R=g.lanes|g.childLanes,R|=nC,fe(m,y,R,ae,Se,Ye),m===Ga&&(fa=Ga=null,ga=0),Om=g,Ac=m,fl=y,uS=R,mS=P,XO=C,(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,Xte(X,function(){return fM(),null})):(m.callbackNode=null,m.callbackPriority=0),C=(g.flags&13878)!==0,(g.subtreeFlags&13878)!==0||C){C=Q.T,Q.T=null,P=J.p,J.p=2,ae=Aa,Aa|=4;try{Fte(m,g,y)}finally{Aa=ae,J.p=P,Q.T=C}}Kn=1,cM(),dM(),uM()}}function cM(){if(Kn===1){Kn=0;var m=Ac,g=Om,y=(g.flags&13878)!==0;if((g.subtreeFlags&13878)!==0||y){y=Q.T,Q.T=null;var C=J.p;J.p=2;var P=Aa;Aa|=4;try{HO(g,m);var R=AS,ae=Q3(m.containerInfo),Se=R.focusedElem,Ye=R.selectionRange;if(ae!==Se&&Se&&Se.ownerDocument&&Y3(Se.ownerDocument.documentElement,Se)){if(Ye!==null&&Z1(Se)){var dt=Ye.start,pt=Ye.end;if(pt===void 0&&(pt=dt),"selectionStart"in Se)Se.selectionStart=dt,Se.selectionEnd=Math.min(pt,Se.value.length);else{var vt=Se.ownerDocument||document,mt=vt&&vt.defaultView||window;if(mt.getSelection){var gt=mt.getSelection(),Rt=Se.textContent.length,Xt=Math.min(Ye.start,Rt),Ba=Ye.end===void 0?Xt:Math.min(Ye.end,Rt);!gt.extend&&Xt>Ba&&(ae=Ba,Ba=Xt,Xt=ae);var nt=V3(Se,Xt),Ke=V3(Se,Ba);if(nt&&Ke&&(gt.rangeCount!==1||gt.anchorNode!==nt.node||gt.anchorOffset!==nt.offset||gt.focusNode!==Ke.node||gt.focusOffset!==Ke.offset)){var ct=vt.createRange();ct.setStart(nt.node,nt.offset),gt.removeAllRanges(),Xt>Ba?(gt.addRange(ct),gt.extend(Ke.node,Ke.offset)):(ct.setEnd(Ke.node,Ke.offset),gt.addRange(ct))}}}}for(vt=[],gt=Se;gt=gt.parentNode;)gt.nodeType===1&&vt.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<vt.length;Se++){var yt=vt[Se];yt.element.scrollLeft=yt.left,yt.element.scrollTop=yt.top}}Ty=!!_S,AS=_S=null}finally{Aa=P,J.p=C,Q.T=y}}m.current=g,Kn=2}}function dM(){if(Kn===2){Kn=0;var m=Ac,g=Om,y=(g.flags&8772)!==0;if((g.subtreeFlags&8772)!==0||y){y=Q.T,Q.T=null;var C=J.p;J.p=2;var P=Aa;Aa|=4;try{RO(m,g.alternate,g)}finally{Aa=P,J.p=C,Q.T=y}}Kn=3}}function uM(){if(Kn===4||Kn===3){Kn=0,Ue();var m=Ac,g=Om,y=fl,C=XO;(g.subtreeFlags&10256)!==0||(g.flags&10256)!==0?Kn=5:(Kn=0,Om=Ac=null,mM(m,m.pendingLanes));var P=m.pendingLanes;if(P===0&&(_c=null),U(y),g=g.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Re,g,void 0,(g.current.flags&128)===128)}catch{}if(C!==null){g=Q.T,P=J.p,J.p=2,Q.T=null;try{for(var R=m.onRecoverableError,ae=0;ae<C.length;ae++){var Se=C[ae];R(Se.value,{componentStack:Se.stack})}}finally{Q.T=g,J.p=P}}(fl&3)!==0&&py(),io(m),P=m.pendingLanes,(y&261930)!==0&&(P&42)!==0?m===fS?Zh++:(Zh=0,fS=m):Zh=0,Jh(0)}}function mM(m,g){(m.pooledCacheLanes&=g)===0&&(g=m.pooledCache,g!=null&&(m.pooledCache=null,Dh(g)))}function py(){return cM(),dM(),uM(),fM()}function fM(){if(Kn!==5)return!1;var m=Ac,g=uS;uS=0;var y=U(fl),C=Q.T,P=J.p;try{J.p=32>y?32:y,Q.T=null,y=mS,mS=null;var R=Ac,ae=fl;if(Kn=0,Om=Ac=null,fl=0,(Aa&6)!==0)throw Error(s(331));var Se=Aa;if(Aa|=4,YO(R.current),GO(R,R.current,ae,y),Aa=Se,Jh(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Re,R)}catch{}return!0}finally{J.p=P,Q.T=C,mM(m,g)}}function hM(m,g,y){g=Xr(y,g),g=GC(m.stateNode,g,2),m=vc(m,g,2),m!==null&&(q(m,2),io(m))}function Oa(m,g,y){if(m.tag===3)hM(m,m,y);else for(;g!==null;){if(g.tag===3){hM(g,m,y);break}else if(g.tag===1){var C=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(_c===null||!_c.has(C))){m=Xr(y,m),y=gO(2),C=vc(g,y,2),C!==null&&(pO(y,C,g,m),q(C,2),io(C));break}}g=g.return}}function pS(m,g,y){var C=m.pingCache;if(C===null){C=m.pingCache=new Hte;var P=new Set;C.set(g,P)}else P=C.get(g),P===void 0&&(P=new Set,C.set(g,P));P.has(y)||(lS=!0,P.add(y),m=Yte.bind(null,m,g,y),g.then(m,m))}function Yte(m,g,y){var C=m.pingCache;C!==null&&C.delete(g),m.pingedLanes|=m.suspendedLanes&y,m.warmLanes&=~y,Ga===m&&(ga&y)===y&&(wn===4||wn===3&&(ga&62914560)===ga&&300>_e()-dy?(Aa&2)===0&&Mm(m,0):cS|=y,Dm===ga&&(Dm=0)),io(m)}function gM(m,g){g===0&&(g=Qe()),m=Od(m,g),m!==null&&(q(m,g),io(m))}function Qte(m){var g=m.memoizedState,y=0;g!==null&&(y=g.retryLane),gM(m,y)}function Kte(m,g){var y=0;switch(m.tag){case 31:case 13:var C=m.stateNode,P=m.memoizedState;P!==null&&(y=P.retryLane);break;case 19:C=m.stateNode;break;case 22:C=m.stateNode._retryCache;break;default:throw Error(s(314))}C!==null&&C.delete(g),gM(m,y)}function Xte(m,g){return Ve(m,g)}var xy=null,$m=null,xS=!1,yy=!1,yS=!1,kc=0;function io(m){m!==$m&&m.next===null&&($m===null?xy=$m=m:$m=$m.next=m),yy=!0,xS||(xS=!0,Jte())}function Jh(m,g){if(!yS&&yy){yS=!0;do for(var y=!1,C=xy;C!==null;){if(m!==0){var P=C.pendingLanes;if(P===0)var R=0;else{var ae=C.suspendedLanes,Se=C.pingedLanes;R=(1<<31-st(42|m)+1)-1,R&=P&~(ae&~Se),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(y=!0,bM(C,R))}else R=ga,R=ye(C,C===Ga?R:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(R&3)===0||Pe(C,R)||(y=!0,bM(C,R));C=C.next}while(y);yS=!1}}function Zte(){pM()}function pM(){yy=xS=!1;var m=0;kc!==0&&cae()&&(m=kc);for(var g=_e(),y=null,C=xy;C!==null;){var P=C.next,R=xM(C,g);R===0?(C.next=null,y===null?xy=P:y.next=P,P===null&&($m=y)):(y=C,(m!==0||(R&3)!==0)&&(yy=!0)),C=P}Kn!==0&&Kn!==5||Jh(m),kc!==0&&(kc=0)}function xM(m,g){for(var y=m.suspendedLanes,C=m.pingedLanes,P=m.expirationTimes,R=m.pendingLanes&-62914561;0<R;){var ae=31-st(R),Se=1<<ae,Ye=P[ae];Ye===-1?((Se&y)===0||(Se&C)!==0)&&(P[ae]=Ce(Se,g)):Ye<=g&&(m.expiredLanes|=Se),R&=~Se}if(g=Ga,y=ga,y=ye(m,m===g?y:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C=m.callbackNode,y===0||m===g&&(Da===2||Da===9)||m.cancelPendingCommit!==null)return C!==null&&C!==null&&Ze(C),m.callbackNode=null,m.callbackPriority=0;if((y&3)===0||Pe(m,y)){if(g=y&-y,g===m.callbackPriority)return g;switch(C!==null&&Ze(C),U(y)){case 2:case 8:y=G;break;case 32:y=X;break;case 268435456:y=$e;break;default:y=X}return C=yM.bind(null,m),y=Ve(y,C),m.callbackPriority=g,m.callbackNode=y,g}return C!==null&&C!==null&&Ze(C),m.callbackPriority=2,m.callbackNode=null,2}function yM(m,g){if(Kn!==0&&Kn!==5)return m.callbackNode=null,m.callbackPriority=0,null;var y=m.callbackNode;if(py()&&m.callbackNode!==y)return null;var C=ga;return C=ye(m,m===Ga?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),C===0?null:(JO(m,C,g),xM(m,_e()),m.callbackNode!=null&&m.callbackNode===y?yM.bind(null,m):null)}function bM(m,g){if(py())return null;JO(m,g,!0)}function Jte(){uae(function(){(Aa&6)!==0?Ve(ie,Zte):pM()})}function bS(){if(kc===0){var m=jm;m===0&&(m=kt,kt<<=1,(kt&261888)===0&&(kt=256)),kc=m}return kc}function vM(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:_0(""+m)}function wM(m,g){var y=g.ownerDocument.createElement("input");return y.name=g.name,y.value=g.value,m.id&&y.setAttribute("form",m.id),g.parentNode.insertBefore(y,g),m=new FormData(m),y.parentNode.removeChild(y),m}function eae(m,g,y,C,P){if(g==="submit"&&y&&y.stateNode===P){var R=vM((P[lt]||null).action),ae=C.submitter;ae&&(g=(g=ae[lt]||null)?vM(g.formAction):ae.getAttribute("formAction"),g!==null&&(R=g,ae=null));var Se=new E0("action","action",null,C,P);m.push({event:Se,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(kc!==0){var Ye=ae?wM(P,ae):new FormData(P);zC(y,{pending:!0,data:Ye,method:P.method,action:R},null,Ye)}}else typeof R=="function"&&(Se.preventDefault(),Ye=ae?wM(P,ae):new FormData(P),zC(y,{pending:!0,data:Ye,method:P.method,action:R},R,Ye))},currentTarget:P}]})}}for(var vS=0;vS<aC.length;vS++){var wS=aC[vS],tae=wS.toLowerCase(),aae=wS[0].toUpperCase()+wS.slice(1);Pi(tae,"on"+aae)}Pi(Z3,"onAnimationEnd"),Pi(J3,"onAnimationIteration"),Pi(e5,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(yte,"onTransitionRun"),Pi(bte,"onTransitionStart"),Pi(vte,"onTransitionCancel"),Pi(t5,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),_t("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_t("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_t("onBeforeInput",["compositionend","keypress","textInput","paste"]),_t("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_t("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_t("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nae=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eg));function jM(m,g){g=(g&4)!==0;for(var y=0;y<m.length;y++){var C=m[y],P=C.event;C=C.listeners;e:{var R=void 0;if(g)for(var ae=C.length-1;0<=ae;ae--){var Se=C[ae],Ye=Se.instance,dt=Se.currentTarget;if(Se=Se.listener,Ye!==R&&P.isPropagationStopped())break e;R=Se,P.currentTarget=dt;try{R(P)}catch(pt){D0(pt)}P.currentTarget=null,R=Ye}else for(ae=0;ae<C.length;ae++){if(Se=C[ae],Ye=Se.instance,dt=Se.currentTarget,Se=Se.listener,Ye!==R&&P.isPropagationStopped())break e;R=Se,P.currentTarget=dt;try{R(P)}catch(pt){D0(pt)}P.currentTarget=null,R=Ye}}}}function ha(m,g){var y=g[Ft];y===void 0&&(y=g[Ft]=new Set);var C=m+"__bubble";y.has(C)||(NM(g,m,2,!1),y.add(C))}function jS(m,g,y){var C=0;g&&(C|=4),NM(y,m,C,g)}var by="_reactListening"+Math.random().toString(36).slice(2);function NS(m){if(!m[by]){m[by]=!0,ft.forEach(function(y){y!=="selectionchange"&&(nae.has(y)||jS(y,!1,m),jS(y,!0,m))});var g=m.nodeType===9?m:m.ownerDocument;g===null||g[by]||(g[by]=!0,jS("selectionchange",!1,g))}}function NM(m,g,y,C){switch(ZM(g)){case 2:var P=Lae;break;case 8:P=Pae;break;default:P=RS}y=P.bind(null,g,y,m),P=void 0,!H1||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(P=!0),C?P!==void 0?m.addEventListener(g,y,{capture:!0,passive:P}):m.addEventListener(g,y,!0):P!==void 0?m.addEventListener(g,y,{passive:P}):m.addEventListener(g,y,!1)}function CS(m,g,y,C,P){var R=C;if((g&1)===0&&(g&2)===0&&C!==null)e:for(;;){if(C===null)return;var ae=C.tag;if(ae===3||ae===4){var Se=C.stateNode.containerInfo;if(Se===P)break;if(ae===4)for(ae=C.return;ae!==null;){var Ye=ae.tag;if((Ye===3||Ye===4)&&ae.stateNode.containerInfo===P)return;ae=ae.return}for(;Se!==null;){if(ae=L(Se),ae===null)return;if(Ye=ae.tag,Ye===5||Ye===6||Ye===26||Ye===27){C=R=ae;continue e}Se=Se.parentNode}}C=C.return}T3(function(){var dt=R,pt=U1(y),vt=[];e:{var mt=a5.get(m);if(mt!==void 0){var gt=E0,Rt=m;switch(m){case"keypress":if(T0(y)===0)break e;case"keydown":case"keyup":gt=Kee;break;case"focusin":Rt="focus",gt=V1;break;case"focusout":Rt="blur",gt=V1;break;case"beforeblur":case"afterblur":gt=V1;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=L3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Ree;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Jee;break;case Z3:case J3:case e5:gt=Uee;break;case t5:gt=tte;break;case"scroll":case"scrollend":gt=Iee;break;case"wheel":gt=nte;break;case"copy":case"cut":case"paste":gt=Hee;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=D3;break;case"toggle":case"beforetoggle":gt=rte}var Xt=(g&4)!==0,Ba=!Xt&&(m==="scroll"||m==="scrollend"),nt=Xt?mt!==null?mt+"Capture":null:mt;Xt=[];for(var Ke=dt,ct;Ke!==null;){var yt=Ke;if(ct=yt.stateNode,yt=yt.tag,yt!==5&&yt!==26&&yt!==27||ct===null||nt===null||(yt=jh(Ke,nt),yt!=null&&Xt.push(tg(Ke,yt,ct))),Ba)break;Ke=Ke.return}0<Xt.length&&(mt=new gt(mt,Rt,null,y,pt),vt.push({event:mt,listeners:Xt}))}}if((g&7)===0){e:{if(mt=m==="mouseover"||m==="pointerover",gt=m==="mouseout"||m==="pointerout",mt&&y!==F1&&(Rt=y.relatedTarget||y.fromElement)&&(L(Rt)||Rt[Nt]))break e;if((gt||mt)&&(mt=pt.window===pt?pt:(mt=pt.ownerDocument)?mt.defaultView||mt.parentWindow:window,gt?(Rt=y.relatedTarget||y.toElement,gt=dt,Rt=Rt?L(Rt):null,Rt!==null&&(Ba=i(Rt),Xt=Rt.tag,Rt!==Ba||Xt!==5&&Xt!==27&&Xt!==6)&&(Rt=null)):(gt=null,Rt=dt),gt!==Rt)){if(Xt=L3,yt="onMouseLeave",nt="onMouseEnter",Ke="mouse",(m==="pointerout"||m==="pointerover")&&(Xt=D3,yt="onPointerLeave",nt="onPointerEnter",Ke="pointer"),Ba=gt==null?mt:Ee(gt),ct=Rt==null?mt:Ee(Rt),mt=new Xt(yt,Ke+"leave",gt,y,pt),mt.target=Ba,mt.relatedTarget=ct,yt=null,L(pt)===dt&&(Xt=new Xt(nt,Ke+"enter",Rt,y,pt),Xt.target=ct,Xt.relatedTarget=Ba,yt=Xt),Ba=yt,gt&&Rt)t:{for(Xt=sae,nt=gt,Ke=Rt,ct=0,yt=nt;yt;yt=Xt(yt))ct++;yt=0;for(var Qt=Ke;Qt;Qt=Xt(Qt))yt++;for(;0<ct-yt;)nt=Xt(nt),ct--;for(;0<yt-ct;)Ke=Xt(Ke),yt--;for(;ct--;){if(nt===Ke||Ke!==null&&nt===Ke.alternate){Xt=nt;break t}nt=Xt(nt),Ke=Xt(Ke)}Xt=null}else Xt=null;gt!==null&&CM(vt,mt,gt,Xt,!1),Rt!==null&&Ba!==null&&CM(vt,Ba,Rt,Xt,!0)}}e:{if(mt=dt?Ee(dt):window,gt=mt.nodeName&&mt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&mt.type==="file")var Ca=U3;else if(z3(mt))if(B3)Ca=gte;else{Ca=fte;var Ht=mte}else gt=mt.nodeName,!gt||gt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&z1(dt.elementType)&&(Ca=U3):Ca=hte;if(Ca&&(Ca=Ca(m,dt))){F3(vt,Ca,y,pt);break e}Ht&&Ht(m,mt,dt),m==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&R1(mt,"number",mt.value)}switch(Ht=dt?Ee(dt):window,m){case"focusin":(z3(Ht)||Ht.contentEditable==="true")&&(hm=Ht,J1=dt,Eh=null);break;case"focusout":Eh=J1=hm=null;break;case"mousedown":eC=!0;break;case"contextmenu":case"mouseup":case"dragend":eC=!1,K3(vt,y,pt);break;case"selectionchange":if(xte)break;case"keydown":case"keyup":K3(vt,y,pt)}var ca;if(Q1)e:{switch(m){case"compositionstart":var pa="onCompositionStart";break e;case"compositionend":pa="onCompositionEnd";break e;case"compositionupdate":pa="onCompositionUpdate";break e}pa=void 0}else fm?$3(m,y)&&(pa="onCompositionEnd"):m==="keydown"&&y.keyCode===229&&(pa="onCompositionStart");pa&&(O3&&y.locale!=="ko"&&(fm||pa!=="onCompositionStart"?pa==="onCompositionEnd"&&fm&&(ca=k3()):(fc=pt,q1="value"in fc?fc.value:fc.textContent,fm=!0)),Ht=vy(dt,pa),0<Ht.length&&(pa=new P3(pa,m,null,y,pt),vt.push({event:pa,listeners:Ht}),ca?pa.data=ca:(ca=R3(y),ca!==null&&(pa.data=ca)))),(ca=ote?lte(m,y):cte(m,y))&&(pa=vy(dt,"onBeforeInput"),0<pa.length&&(Ht=new P3("onBeforeInput","beforeinput",null,y,pt),vt.push({event:Ht,listeners:pa}),Ht.data=ca)),eae(vt,m,dt,y,pt)}jM(vt,g)})}function tg(m,g,y){return{instance:m,listener:g,currentTarget:y}}function vy(m,g){for(var y=g+"Capture",C=[];m!==null;){var P=m,R=P.stateNode;if(P=P.tag,P!==5&&P!==26&&P!==27||R===null||(P=jh(m,y),P!=null&&C.unshift(tg(m,P,R)),P=jh(m,g),P!=null&&C.push(tg(m,P,R))),m.tag===3)return C;m=m.return}return[]}function sae(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function CM(m,g,y,C,P){for(var R=g._reactName,ae=[];y!==null&&y!==C;){var Se=y,Ye=Se.alternate,dt=Se.stateNode;if(Se=Se.tag,Ye!==null&&Ye===C)break;Se!==5&&Se!==26&&Se!==27||dt===null||(Ye=dt,P?(dt=jh(y,R),dt!=null&&ae.unshift(tg(y,dt,Ye))):P||(dt=jh(y,R),dt!=null&&ae.push(tg(y,dt,Ye)))),y=y.return}ae.length!==0&&m.push({event:g,listeners:ae})}var rae=/\r\n?/g,iae=/\u0000|\uFFFD/g;function SM(m){return(typeof m=="string"?m:""+m).replace(rae,`
`).replace(iae,"")}function _M(m,g){return g=SM(g),SM(m)===g}function Ua(m,g,y,C,P,R){switch(y){case"children":typeof C=="string"?g==="body"||g==="textarea"&&C===""||dm(m,C):(typeof C=="number"||typeof C=="bigint")&&g!=="body"&&dm(m,""+C);break;case"className":C0(m,"class",C);break;case"tabIndex":C0(m,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":C0(m,y,C);break;case"style":_3(m,C,R);break;case"data":if(g!=="object"){C0(m,"data",C);break}case"src":case"href":if(C===""&&(g!=="a"||y!=="href")){m.removeAttribute(y);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(y);break}C=_0(""+C),m.setAttribute(y,C);break;case"action":case"formAction":if(typeof C=="function"){m.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(y==="formAction"?(g!=="input"&&Ua(m,g,"name",P.name,P,null),Ua(m,g,"formEncType",P.formEncType,P,null),Ua(m,g,"formMethod",P.formMethod,P,null),Ua(m,g,"formTarget",P.formTarget,P,null)):(Ua(m,g,"encType",P.encType,P,null),Ua(m,g,"method",P.method,P,null),Ua(m,g,"target",P.target,P,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){m.removeAttribute(y);break}C=_0(""+C),m.setAttribute(y,C);break;case"onClick":C!=null&&(m.onclick=Zo);break;case"onScroll":C!=null&&ha("scroll",m);break;case"onScrollEnd":C!=null&&ha("scrollend",m);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(y=C.__html,y!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"multiple":m.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":m.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){m.removeAttribute("xlink:href");break}y=_0(""+C),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,""+C):m.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,""):m.removeAttribute(y);break;case"capture":case"download":C===!0?m.setAttribute(y,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?m.setAttribute(y,C):m.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?m.setAttribute(y,C):m.removeAttribute(y);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?m.removeAttribute(y):m.setAttribute(y,C);break;case"popover":ha("beforetoggle",m),ha("toggle",m),N0(m,"popover",C);break;case"xlinkActuate":Xo(m,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":Xo(m,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":Xo(m,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":Xo(m,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":Xo(m,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":Xo(m,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":Xo(m,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":Xo(m,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":Xo(m,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":N0(m,"is",C);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Oee.get(y)||y,N0(m,y,C))}}function SS(m,g,y,C,P,R){switch(y){case"style":_3(m,C,R);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(s(61));if(y=C.__html,y!=null){if(P.children!=null)throw Error(s(60));m.innerHTML=y}}break;case"children":typeof C=="string"?dm(m,C):(typeof C=="number"||typeof C=="bigint")&&dm(m,""+C);break;case"onScroll":C!=null&&ha("scroll",m);break;case"onScrollEnd":C!=null&&ha("scrollend",m);break;case"onClick":C!=null&&(m.onclick=Zo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!St.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(P=y.endsWith("Capture"),g=y.slice(2,P?y.length-7:void 0),R=m[lt]||null,R=R!=null?R[y]:null,typeof R=="function"&&m.removeEventListener(g,R,P),typeof C=="function")){typeof R!="function"&&R!==null&&(y in m?m[y]=null:m.hasAttribute(y)&&m.removeAttribute(y)),m.addEventListener(g,C,P);break e}y in m?m[y]=C:C===!0?m.setAttribute(y,""):N0(m,y,C)}}}function Cs(m,g,y){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ha("error",m),ha("load",m);var C=!1,P=!1,R;for(R in y)if(y.hasOwnProperty(R)){var ae=y[R];if(ae!=null)switch(R){case"src":C=!0;break;case"srcSet":P=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Ua(m,g,R,ae,y,null)}}P&&Ua(m,g,"srcSet",y.srcSet,y,null),C&&Ua(m,g,"src",y.src,y,null);return;case"input":ha("invalid",m);var Se=R=ae=P=null,Ye=null,dt=null;for(C in y)if(y.hasOwnProperty(C)){var pt=y[C];if(pt!=null)switch(C){case"name":P=pt;break;case"type":ae=pt;break;case"checked":Ye=pt;break;case"defaultChecked":dt=pt;break;case"value":R=pt;break;case"defaultValue":Se=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,g));break;default:Ua(m,g,C,pt,y,null)}}j3(m,R,Se,Ye,dt,ae,P,!1);return;case"select":ha("invalid",m),C=ae=R=null;for(P in y)if(y.hasOwnProperty(P)&&(Se=y[P],Se!=null))switch(P){case"value":R=Se;break;case"defaultValue":ae=Se;break;case"multiple":C=Se;default:Ua(m,g,P,Se,y,null)}g=R,y=ae,m.multiple=!!C,g!=null?cm(m,!!C,g,!1):y!=null&&cm(m,!!C,y,!0);return;case"textarea":ha("invalid",m),R=P=C=null;for(ae in y)if(y.hasOwnProperty(ae)&&(Se=y[ae],Se!=null))switch(ae){case"value":C=Se;break;case"defaultValue":P=Se;break;case"children":R=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(91));break;default:Ua(m,g,ae,Se,y,null)}C3(m,C,P,R);return;case"option":for(Ye in y)y.hasOwnProperty(Ye)&&(C=y[Ye],C!=null)&&(Ye==="selected"?m.selected=C&&typeof C!="function"&&typeof C!="symbol":Ua(m,g,Ye,C,y,null));return;case"dialog":ha("beforetoggle",m),ha("toggle",m),ha("cancel",m),ha("close",m);break;case"iframe":case"object":ha("load",m);break;case"video":case"audio":for(C=0;C<eg.length;C++)ha(eg[C],m);break;case"image":ha("error",m),ha("load",m);break;case"details":ha("toggle",m);break;case"embed":case"source":case"link":ha("error",m),ha("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in y)if(y.hasOwnProperty(dt)&&(C=y[dt],C!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,g));default:Ua(m,g,dt,C,y,null)}return;default:if(z1(g)){for(pt in y)y.hasOwnProperty(pt)&&(C=y[pt],C!==void 0&&SS(m,g,pt,C,y,void 0));return}}for(Se in y)y.hasOwnProperty(Se)&&(C=y[Se],C!=null&&Ua(m,g,Se,C,y,null))}function oae(m,g,y,C){switch(g){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var P=null,R=null,ae=null,Se=null,Ye=null,dt=null,pt=null;for(gt in y){var vt=y[gt];if(y.hasOwnProperty(gt)&&vt!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":Ye=vt;default:C.hasOwnProperty(gt)||Ua(m,g,gt,null,C,vt)}}for(var mt in C){var gt=C[mt];if(vt=y[mt],C.hasOwnProperty(mt)&&(gt!=null||vt!=null))switch(mt){case"type":R=gt;break;case"name":P=gt;break;case"checked":dt=gt;break;case"defaultChecked":pt=gt;break;case"value":ae=gt;break;case"defaultValue":Se=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(s(137,g));break;default:gt!==vt&&Ua(m,g,mt,gt,C,vt)}}$1(m,ae,Se,Ye,dt,pt,R,P);return;case"select":gt=ae=Se=mt=null;for(R in y)if(Ye=y[R],y.hasOwnProperty(R)&&Ye!=null)switch(R){case"value":break;case"multiple":gt=Ye;default:C.hasOwnProperty(R)||Ua(m,g,R,null,C,Ye)}for(P in C)if(R=C[P],Ye=y[P],C.hasOwnProperty(P)&&(R!=null||Ye!=null))switch(P){case"value":mt=R;break;case"defaultValue":Se=R;break;case"multiple":ae=R;default:R!==Ye&&Ua(m,g,P,R,C,Ye)}g=Se,y=ae,C=gt,mt!=null?cm(m,!!y,mt,!1):!!C!=!!y&&(g!=null?cm(m,!!y,g,!0):cm(m,!!y,y?[]:"",!1));return;case"textarea":gt=mt=null;for(Se in y)if(P=y[Se],y.hasOwnProperty(Se)&&P!=null&&!C.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:Ua(m,g,Se,null,C,P)}for(ae in C)if(P=C[ae],R=y[ae],C.hasOwnProperty(ae)&&(P!=null||R!=null))switch(ae){case"value":mt=P;break;case"defaultValue":gt=P;break;case"children":break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(s(91));break;default:P!==R&&Ua(m,g,ae,P,C,R)}N3(m,mt,gt);return;case"option":for(var Rt in y)mt=y[Rt],y.hasOwnProperty(Rt)&&mt!=null&&!C.hasOwnProperty(Rt)&&(Rt==="selected"?m.selected=!1:Ua(m,g,Rt,null,C,mt));for(Ye in C)mt=C[Ye],gt=y[Ye],C.hasOwnProperty(Ye)&&mt!==gt&&(mt!=null||gt!=null)&&(Ye==="selected"?m.selected=mt&&typeof mt!="function"&&typeof mt!="symbol":Ua(m,g,Ye,mt,C,gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xt in y)mt=y[Xt],y.hasOwnProperty(Xt)&&mt!=null&&!C.hasOwnProperty(Xt)&&Ua(m,g,Xt,null,C,mt);for(dt in C)if(mt=C[dt],gt=y[dt],C.hasOwnProperty(dt)&&mt!==gt&&(mt!=null||gt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(s(137,g));break;default:Ua(m,g,dt,mt,C,gt)}return;default:if(z1(g)){for(var Ba in y)mt=y[Ba],y.hasOwnProperty(Ba)&&mt!==void 0&&!C.hasOwnProperty(Ba)&&SS(m,g,Ba,void 0,C,mt);for(pt in C)mt=C[pt],gt=y[pt],!C.hasOwnProperty(pt)||mt===gt||mt===void 0&&gt===void 0||SS(m,g,pt,mt,C,gt);return}}for(var nt in y)mt=y[nt],y.hasOwnProperty(nt)&&mt!=null&&!C.hasOwnProperty(nt)&&Ua(m,g,nt,null,C,mt);for(vt in C)mt=C[vt],gt=y[vt],!C.hasOwnProperty(vt)||mt===gt||mt==null&&gt==null||Ua(m,g,vt,mt,C,gt)}function AM(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lae(){if(typeof performance.getEntriesByType=="function"){for(var m=0,g=0,y=performance.getEntriesByType("resource"),C=0;C<y.length;C++){var P=y[C],R=P.transferSize,ae=P.initiatorType,Se=P.duration;if(R&&Se&&AM(ae)){for(ae=0,Se=P.responseEnd,C+=1;C<y.length;C++){var Ye=y[C],dt=Ye.startTime;if(dt>Se)break;var pt=Ye.transferSize,vt=Ye.initiatorType;pt&&AM(vt)&&(Ye=Ye.responseEnd,ae+=pt*(Ye<Se?1:(Se-dt)/(Ye-dt)))}if(--C,g+=8*(R+ae)/(P.duration/1e3),m++,10<m)break}}if(0<m)return g/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var _S=null,AS=null;function wy(m){return m.nodeType===9?m:m.ownerDocument}function TM(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kM(m,g){if(m===0)switch(g){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&g==="foreignObject"?0:m}function TS(m,g){return m==="textarea"||m==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.children=="bigint"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var kS=null;function cae(){var m=window.event;return m&&m.type==="popstate"?m===kS?!1:(kS=m,!0):(kS=null,!1)}var EM=typeof setTimeout=="function"?setTimeout:void 0,dae=typeof clearTimeout=="function"?clearTimeout:void 0,LM=typeof Promise=="function"?Promise:void 0,uae=typeof queueMicrotask=="function"?queueMicrotask:typeof LM<"u"?function(m){return LM.resolve(null).then(m).catch(mae)}:EM;function mae(m){setTimeout(function(){throw m})}function Ec(m){return m==="head"}function PM(m,g){var y=g,C=0;do{var P=y.nextSibling;if(m.removeChild(y),P&&P.nodeType===8)if(y=P.data,y==="/$"||y==="/&"){if(C===0){m.removeChild(P),Um(g);return}C--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")C++;else if(y==="html")ag(m.ownerDocument.documentElement);else if(y==="head"){y=m.ownerDocument.head,ag(y);for(var R=y.firstChild;R;){var ae=R.nextSibling,Se=R.nodeName;R[Ae]||Se==="SCRIPT"||Se==="STYLE"||Se==="LINK"&&R.rel.toLowerCase()==="stylesheet"||y.removeChild(R),R=ae}}else y==="body"&&ag(m.ownerDocument.body);y=P}while(y);Um(g)}function DM(m,g){var y=m;m=0;do{var C=y.nextSibling;if(y.nodeType===1?g?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(g?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),C&&C.nodeType===8)if(y=C.data,y==="/$"){if(m===0)break;m--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||m++;y=C}while(y)}function ES(m){var g=m.firstChild;for(g&&g.nodeType===10&&(g=g.nextSibling);g;){var y=g;switch(g=g.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":ES(y),$(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}m.removeChild(y)}}function fae(m,g,y,C){for(;m.nodeType===1;){var P=y;if(m.nodeName.toLowerCase()!==g.toLowerCase()){if(!C&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(C){if(!m[Ae])switch(g){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(R=m.getAttribute("rel"),R==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(R!==P.rel||m.getAttribute("href")!==(P.href==null||P.href===""?null:P.href)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin)||m.getAttribute("title")!==(P.title==null?null:P.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(R=m.getAttribute("src"),(R!==(P.src==null?null:P.src)||m.getAttribute("type")!==(P.type==null?null:P.type)||m.getAttribute("crossorigin")!==(P.crossOrigin==null?null:P.crossOrigin))&&R&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(g==="input"&&m.type==="hidden"){var R=P.name==null?null:""+P.name;if(P.type==="hidden"&&m.getAttribute("name")===R)return m}else return m;if(m=ai(m.nextSibling),m===null)break}return null}function hae(m,g,y){if(g==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!y||(m=ai(m.nextSibling),m===null))return null;return m}function OM(m,g){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!g||(m=ai(m.nextSibling),m===null))return null;return m}function LS(m){return m.data==="$?"||m.data==="$~"}function PS(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function gae(m,g){var y=m.ownerDocument;if(m.data==="$~")m._reactRetry=g;else if(m.data!=="$?"||y.readyState!=="loading")g();else{var C=function(){g(),y.removeEventListener("DOMContentLoaded",C)};y.addEventListener("DOMContentLoaded",C),m._reactRetry=C}}function ai(m){for(;m!=null;m=m.nextSibling){var g=m.nodeType;if(g===1||g===3)break;if(g===8){if(g=m.data,g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"||g==="F!"||g==="F")break;if(g==="/$"||g==="/&")return null}}return m}var DS=null;function MM(m){m=m.nextSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="/$"||y==="/&"){if(g===0)return ai(m.nextSibling);g--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||g++}m=m.nextSibling}return null}function IM(m){m=m.previousSibling;for(var g=0;m;){if(m.nodeType===8){var y=m.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(g===0)return m;g--}else y!=="/$"&&y!=="/&"||g++}m=m.previousSibling}return null}function $M(m,g,y){switch(g=wy(y),m){case"html":if(m=g.documentElement,!m)throw Error(s(452));return m;case"head":if(m=g.head,!m)throw Error(s(453));return m;case"body":if(m=g.body,!m)throw Error(s(454));return m;default:throw Error(s(451))}}function ag(m){for(var g=m.attributes;g.length;)m.removeAttributeNode(g[0]);$(m)}var ni=new Map,RM=new Set;function jy(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var hl=J.d;J.d={f:pae,r:xae,D:yae,C:bae,L:vae,m:wae,X:Nae,S:jae,M:Cae};function pae(){var m=hl.f(),g=fy();return m||g}function xae(m){var g=ee(m);g!==null&&g.tag===5&&g.type==="form"?tO(g):hl.r(m)}var Rm=typeof document>"u"?null:document;function zM(m,g,y){var C=Rm;if(C&&typeof g=="string"&&g){var P=Qr(g);P='link[rel="'+m+'"][href="'+P+'"]',typeof y=="string"&&(P+='[crossorigin="'+y+'"]'),RM.has(P)||(RM.add(P),m={rel:m,crossOrigin:y,href:g},C.querySelector(P)===null&&(g=C.createElement("link"),Cs(g,"link",m),We(g),C.head.appendChild(g)))}}function yae(m){hl.D(m),zM("dns-prefetch",m,null)}function bae(m,g){hl.C(m,g),zM("preconnect",m,g)}function vae(m,g,y){hl.L(m,g,y);var C=Rm;if(C&&m&&g){var P='link[rel="preload"][as="'+Qr(g)+'"]';g==="image"&&y&&y.imageSrcSet?(P+='[imagesrcset="'+Qr(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(P+='[imagesizes="'+Qr(y.imageSizes)+'"]')):P+='[href="'+Qr(m)+'"]';var R=P;switch(g){case"style":R=zm(m);break;case"script":R=Fm(m)}ni.has(R)||(m=h({rel:"preload",href:g==="image"&&y&&y.imageSrcSet?void 0:m,as:g},y),ni.set(R,m),C.querySelector(P)!==null||g==="style"&&C.querySelector(ng(R))||g==="script"&&C.querySelector(sg(R))||(g=C.createElement("link"),Cs(g,"link",m),We(g),C.head.appendChild(g)))}}function wae(m,g){hl.m(m,g);var y=Rm;if(y&&m){var C=g&&typeof g.as=="string"?g.as:"script",P='link[rel="modulepreload"][as="'+Qr(C)+'"][href="'+Qr(m)+'"]',R=P;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=Fm(m)}if(!ni.has(R)&&(m=h({rel:"modulepreload",href:m},g),ni.set(R,m),y.querySelector(P)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(sg(R)))return}C=y.createElement("link"),Cs(C,"link",m),We(C),y.head.appendChild(C)}}}function jae(m,g,y){hl.S(m,g,y);var C=Rm;if(C&&m){var P=Me(C).hoistableStyles,R=zm(m);g=g||"default";var ae=P.get(R);if(!ae){var Se={loading:0,preload:null};if(ae=C.querySelector(ng(R)))Se.loading=5;else{m=h({rel:"stylesheet",href:m,"data-precedence":g},y),(y=ni.get(R))&&OS(m,y);var Ye=ae=C.createElement("link");We(Ye),Cs(Ye,"link",m),Ye._p=new Promise(function(dt,pt){Ye.onload=dt,Ye.onerror=pt}),Ye.addEventListener("load",function(){Se.loading|=1}),Ye.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,Ny(ae,g,C)}ae={type:"stylesheet",instance:ae,count:1,state:Se},P.set(R,ae)}}}function Nae(m,g){hl.X(m,g);var y=Rm;if(y&&m){var C=Me(y).hoistableScripts,P=Fm(m),R=C.get(P);R||(R=y.querySelector(sg(P)),R||(m=h({src:m,async:!0},g),(g=ni.get(P))&&MS(m,g),R=y.createElement("script"),We(R),Cs(R,"link",m),y.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(P,R))}}function Cae(m,g){hl.M(m,g);var y=Rm;if(y&&m){var C=Me(y).hoistableScripts,P=Fm(m),R=C.get(P);R||(R=y.querySelector(sg(P)),R||(m=h({src:m,async:!0,type:"module"},g),(g=ni.get(P))&&MS(m,g),R=y.createElement("script"),We(R),Cs(R,"link",m),y.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(P,R))}}function FM(m,g,y,C){var P=(P=be.current)?jy(P):null;if(!P)throw Error(s(446));switch(m){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(g=zm(y.href),y=Me(P).hoistableStyles,C=y.get(g),C||(C={type:"style",instance:null,count:0,state:null},y.set(g,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){m=zm(y.href);var R=Me(P).hoistableStyles,ae=R.get(m);if(ae||(P=P.ownerDocument||P,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(m,ae),(R=P.querySelector(ng(m)))&&!R._p&&(ae.instance=R,ae.state.loading=5),ni.has(m)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},ni.set(m,y),R||Sae(P,m,y,ae.state))),g&&C===null)throw Error(s(528,""));return ae}if(g&&C!==null)throw Error(s(529,""));return null;case"script":return g=y.async,y=y.src,typeof y=="string"&&g&&typeof g!="function"&&typeof g!="symbol"?(g=Fm(y),y=Me(P).hoistableScripts,C=y.get(g),C||(C={type:"script",instance:null,count:0,state:null},y.set(g,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,m))}}function zm(m){return'href="'+Qr(m)+'"'}function ng(m){return'link[rel="stylesheet"]['+m+"]"}function UM(m){return h({},m,{"data-precedence":m.precedence,precedence:null})}function Sae(m,g,y,C){m.querySelector('link[rel="preload"][as="style"]['+g+"]")?C.loading=1:(g=m.createElement("link"),C.preload=g,g.addEventListener("load",function(){return C.loading|=1}),g.addEventListener("error",function(){return C.loading|=2}),Cs(g,"link",y),We(g),m.head.appendChild(g))}function Fm(m){return'[src="'+Qr(m)+'"]'}function sg(m){return"script[async]"+m}function BM(m,g,y){if(g.count++,g.instance===null)switch(g.type){case"style":var C=m.querySelector('style[data-href~="'+Qr(y.href)+'"]');if(C)return g.instance=C,We(C),C;var P=h({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return C=(m.ownerDocument||m).createElement("style"),We(C),Cs(C,"style",P),Ny(C,y.precedence,m),g.instance=C;case"stylesheet":P=zm(y.href);var R=m.querySelector(ng(P));if(R)return g.state.loading|=4,g.instance=R,We(R),R;C=UM(y),(P=ni.get(P))&&OS(C,P),R=(m.ownerDocument||m).createElement("link"),We(R);var ae=R;return ae._p=new Promise(function(Se,Ye){ae.onload=Se,ae.onerror=Ye}),Cs(R,"link",C),g.state.loading|=4,Ny(R,y.precedence,m),g.instance=R;case"script":return R=Fm(y.src),(P=m.querySelector(sg(R)))?(g.instance=P,We(P),P):(C=y,(P=ni.get(R))&&(C=h({},y),MS(C,P)),m=m.ownerDocument||m,P=m.createElement("script"),We(P),Cs(P,"link",C),m.head.appendChild(P),g.instance=P);case"void":return null;default:throw Error(s(443,g.type))}else g.type==="stylesheet"&&(g.state.loading&4)===0&&(C=g.instance,g.state.loading|=4,Ny(C,y.precedence,m));return g.instance}function Ny(m,g,y){for(var C=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),P=C.length?C[C.length-1]:null,R=P,ae=0;ae<C.length;ae++){var Se=C[ae];if(Se.dataset.precedence===g)R=Se;else if(R!==P)break}R?R.parentNode.insertBefore(m,R.nextSibling):(g=y.nodeType===9?y.head:y,g.insertBefore(m,g.firstChild))}function OS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.title==null&&(m.title=g.title)}function MS(m,g){m.crossOrigin==null&&(m.crossOrigin=g.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=g.referrerPolicy),m.integrity==null&&(m.integrity=g.integrity)}var Cy=null;function HM(m,g,y){if(Cy===null){var C=new Map,P=Cy=new Map;P.set(y,C)}else P=Cy,C=P.get(y),C||(C=new Map,P.set(y,C));if(C.has(m))return C;for(C.set(m,null),y=y.getElementsByTagName(m),P=0;P<y.length;P++){var R=y[P];if(!(R[Ae]||R[tt]||m==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=R.getAttribute(g)||"";ae=m+ae;var Se=C.get(ae);Se?Se.push(R):C.set(ae,[R])}}return C}function qM(m,g,y){m=m.ownerDocument||m,m.head.insertBefore(y,g==="title"?m.querySelector("head > title"):null)}function _ae(m,g,y){if(y===1||g.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof g.precedence!="string"||typeof g.href!="string"||g.href==="")break;return!0;case"link":if(typeof g.rel!="string"||typeof g.href!="string"||g.href===""||g.onLoad||g.onError)break;return g.rel==="stylesheet"?(m=g.disabled,typeof g.precedence=="string"&&m==null):!0;case"script":if(g.async&&typeof g.async!="function"&&typeof g.async!="symbol"&&!g.onLoad&&!g.onError&&g.src&&typeof g.src=="string")return!0}return!1}function GM(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function Aae(m,g,y,C){if(y.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var P=zm(C.href),R=g.querySelector(ng(P));if(R){g=R._p,g!==null&&typeof g=="object"&&typeof g.then=="function"&&(m.count++,m=Sy.bind(m),g.then(m,m)),y.state.loading|=4,y.instance=R,We(R);return}R=g.ownerDocument||g,C=UM(C),(P=ni.get(P))&&OS(C,P),R=R.createElement("link"),We(R);var ae=R;ae._p=new Promise(function(Se,Ye){ae.onload=Se,ae.onerror=Ye}),Cs(R,"link",C),y.instance=R}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(y,g),(g=y.state.preload)&&(y.state.loading&3)===0&&(m.count++,y=Sy.bind(m),g.addEventListener("load",y),g.addEventListener("error",y))}}var IS=0;function Tae(m,g){return m.stylesheets&&m.count===0&&Ay(m,m.stylesheets),0<m.count||0<m.imgCount?function(y){var C=setTimeout(function(){if(m.stylesheets&&Ay(m,m.stylesheets),m.unsuspend){var R=m.unsuspend;m.unsuspend=null,R()}},6e4+g);0<m.imgBytes&&IS===0&&(IS=62500*lae());var P=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&Ay(m,m.stylesheets),m.unsuspend)){var R=m.unsuspend;m.unsuspend=null,R()}},(m.imgBytes>IS?50:800)+g);return m.unsuspend=y,function(){m.unsuspend=null,clearTimeout(C),clearTimeout(P)}}:null}function Sy(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ay(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var _y=null;function Ay(m,g){m.stylesheets=null,m.unsuspend!==null&&(m.count++,_y=new Map,g.forEach(kae,m),_y=null,Sy.call(m))}function kae(m,g){if(!(g.state.loading&4)){var y=_y.get(m);if(y)var C=y.get(null);else{y=new Map,_y.set(m,y);for(var P=m.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<P.length;R++){var ae=P[R];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(y.set(ae.dataset.precedence,ae),C=ae)}C&&y.set(null,C)}P=g.instance,ae=P.getAttribute("data-precedence"),R=y.get(ae)||C,R===C&&y.set(null,P),y.set(ae,P),this.count++,C=Sy.bind(this),P.addEventListener("load",C),P.addEventListener("error",C),R?R.parentNode.insertBefore(P,R.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(P,m.firstChild)),g.state.loading|=4}}var rg={$$typeof:S,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Eae(m,g,y,C,P,R,ae,Se,Ye){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=F(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F(0),this.hiddenUpdates=F(null),this.identifierPrefix=C,this.onUncaughtError=P,this.onCaughtError=R,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ye,this.incompleteTransitions=new Map}function WM(m,g,y,C,P,R,ae,Se,Ye,dt,pt,vt){return m=new Eae(m,g,y,ae,Ye,dt,pt,vt,Se),g=1,R===!0&&(g|=24),R=Ar(3,null,null,g),m.current=R,R.stateNode=m,g=gC(),g.refCount++,m.pooledCache=g,g.refCount++,R.memoizedState={element:C,isDehydrated:y,cache:g},bC(R),m}function VM(m){return m?(m=xm,m):xm}function YM(m,g,y,C,P,R){P=VM(P),C.context===null?C.context=P:C.pendingContext=P,C=bc(g),C.payload={element:y},R=R===void 0?null:R,R!==null&&(C.callback=R),y=vc(m,C,g),y!==null&&(rr(y,m,g),$h(y,m,g))}function QM(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var y=m.retryLane;m.retryLane=y!==0&&y<g?y:g}}function $S(m,g){QM(m,g),(m=m.alternate)&&QM(m,g)}function KM(m){if(m.tag===13||m.tag===31){var g=Od(m,67108864);g!==null&&rr(g,m,67108864),$S(m,67108864)}}function XM(m){if(m.tag===13||m.tag===31){var g=Pr();g=De(g);var y=Od(m,g);y!==null&&rr(y,m,g),$S(m,g)}}var Ty=!0;function Lae(m,g,y,C){var P=Q.T;Q.T=null;var R=J.p;try{J.p=2,RS(m,g,y,C)}finally{J.p=R,Q.T=P}}function Pae(m,g,y,C){var P=Q.T;Q.T=null;var R=J.p;try{J.p=8,RS(m,g,y,C)}finally{J.p=R,Q.T=P}}function RS(m,g,y,C){if(Ty){var P=zS(C);if(P===null)CS(m,g,C,ky,y),JM(m,C);else if(Oae(P,m,g,y,C))C.stopPropagation();else if(JM(m,C),g&4&&-1<Dae.indexOf(m)){for(;P!==null;){var R=ee(P);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var ae=ge(R.pendingLanes);if(ae!==0){var Se=R;for(Se.pendingLanes|=2,Se.entangledLanes|=2;ae;){var Ye=1<<31-st(ae);Se.entanglements[1]|=Ye,ae&=~Ye}io(R),(Aa&6)===0&&(uy=_e()+500,Jh(0))}}break;case 31:case 13:Se=Od(R,2),Se!==null&&rr(Se,R,2),fy(),$S(R,2)}if(R=zS(C),R===null&&CS(m,g,C,ky,y),R===P)break;P=R}P!==null&&C.stopPropagation()}else CS(m,g,C,null,y)}}function zS(m){return m=U1(m),FS(m)}var ky=null;function FS(m){if(ky=null,m=L(m),m!==null){var g=i(m);if(g===null)m=null;else{var y=g.tag;if(y===13){if(m=o(g),m!==null)return m;m=null}else if(y===31){if(m=l(g),m!==null)return m;m=null}else if(y===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;m=null}else g!==m&&(m=null)}}return ky=m,null}function ZM(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(he()){case ie:return 2;case G:return 8;case X:case ve:return 32;case $e:return 268435456;default:return 32}default:return 32}}var US=!1,Lc=null,Pc=null,Dc=null,ig=new Map,og=new Map,Oc=[],Dae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JM(m,g){switch(m){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Pc=null;break;case"mouseover":case"mouseout":Dc=null;break;case"pointerover":case"pointerout":ig.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":og.delete(g.pointerId)}}function lg(m,g,y,C,P,R){return m===null||m.nativeEvent!==R?(m={blockedOn:g,domEventName:y,eventSystemFlags:C,nativeEvent:R,targetContainers:[P]},g!==null&&(g=ee(g),g!==null&&KM(g)),m):(m.eventSystemFlags|=C,g=m.targetContainers,P!==null&&g.indexOf(P)===-1&&g.push(P),m)}function Oae(m,g,y,C,P){switch(g){case"focusin":return Lc=lg(Lc,m,g,y,C,P),!0;case"dragenter":return Pc=lg(Pc,m,g,y,C,P),!0;case"mouseover":return Dc=lg(Dc,m,g,y,C,P),!0;case"pointerover":var R=P.pointerId;return ig.set(R,lg(ig.get(R)||null,m,g,y,C,P)),!0;case"gotpointercapture":return R=P.pointerId,og.set(R,lg(og.get(R)||null,m,g,y,C,P)),!0}return!1}function eI(m){var g=L(m.target);if(g!==null){var y=i(g);if(y!==null){if(g=y.tag,g===13){if(g=o(y),g!==null){m.blockedOn=g,je(m.priority,function(){XM(y)});return}}else if(g===31){if(g=l(y),g!==null){m.blockedOn=g,je(m.priority,function(){XM(y)});return}}else if(g===3&&y.stateNode.current.memoizedState.isDehydrated){m.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ey(m){if(m.blockedOn!==null)return!1;for(var g=m.targetContainers;0<g.length;){var y=zS(m.nativeEvent);if(y===null){y=m.nativeEvent;var C=new y.constructor(y.type,y);F1=C,y.target.dispatchEvent(C),F1=null}else return g=ee(y),g!==null&&KM(g),m.blockedOn=y,!1;g.shift()}return!0}function tI(m,g,y){Ey(m)&&y.delete(g)}function Mae(){US=!1,Lc!==null&&Ey(Lc)&&(Lc=null),Pc!==null&&Ey(Pc)&&(Pc=null),Dc!==null&&Ey(Dc)&&(Dc=null),ig.forEach(tI),og.forEach(tI)}function Ly(m,g){m.blockedOn===g&&(m.blockedOn=null,US||(US=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Mae)))}var Py=null;function aI(m){Py!==m&&(Py=m,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Py===m&&(Py=null);for(var g=0;g<m.length;g+=3){var y=m[g],C=m[g+1],P=m[g+2];if(typeof C!="function"){if(FS(C||y)===null)continue;break}var R=ee(y);R!==null&&(m.splice(g,3),g-=3,zC(R,{pending:!0,data:P,method:y.method,action:C},C,P))}}))}function Um(m){function g(Ye){return Ly(Ye,m)}Lc!==null&&Ly(Lc,m),Pc!==null&&Ly(Pc,m),Dc!==null&&Ly(Dc,m),ig.forEach(g),og.forEach(g);for(var y=0;y<Oc.length;y++){var C=Oc[y];C.blockedOn===m&&(C.blockedOn=null)}for(;0<Oc.length&&(y=Oc[0],y.blockedOn===null);)eI(y),y.blockedOn===null&&Oc.shift();if(y=(m.ownerDocument||m).$$reactFormReplay,y!=null)for(C=0;C<y.length;C+=3){var P=y[C],R=y[C+1],ae=P[lt]||null;if(typeof R=="function")ae||aI(y);else if(ae){var Se=null;if(R&&R.hasAttribute("formAction")){if(P=R,ae=R[lt]||null)Se=ae.formAction;else if(FS(P)!==null)continue}else Se=ae.action;typeof Se=="function"?y[C+1]=Se:(y.splice(C,3),C-=3),aI(y)}}}function nI(){function m(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(ae){return P=ae})},focusReset:"manual",scroll:"manual"})}function g(){P!==null&&(P(),P=null),C||setTimeout(y,20)}function y(){if(!C&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,P=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",g),navigation.addEventListener("navigateerror",g),setTimeout(y,100),function(){C=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",g),navigation.removeEventListener("navigateerror",g),P!==null&&(P(),P=null)}}}function BS(m){this._internalRoot=m}Dy.prototype.render=BS.prototype.render=function(m){var g=this._internalRoot;if(g===null)throw Error(s(409));var y=g.current,C=Pr();YM(y,C,m,g,null,null)},Dy.prototype.unmount=BS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var g=m.containerInfo;YM(m.current,2,null,m,null,null),fy(),g[Nt]=null}};function Dy(m){this._internalRoot=m}Dy.prototype.unstable_scheduleHydration=function(m){if(m){var g=K();m={blockedOn:null,target:m,priority:g};for(var y=0;y<Oc.length&&g!==0&&g<Oc[y].priority;y++);Oc.splice(y,0,m),y===0&&eI(m)}};var sI=t.version;if(sI!=="19.2.0")throw Error(s(527,sI,"19.2.0"));J.findDOMNode=function(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(s(188)):(m=Object.keys(m).join(","),Error(s(268,m)));return m=u(g),m=m!==null?d(m):null,m=m===null?null:m.stateNode,m};var Iae={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oy.isDisabled&&Oy.supportsFiber)try{Re=Oy.inject(Iae),qe=Oy}catch{}}return dg.createRoot=function(m,g){if(!r(m))throw Error(s(299));var y=!1,C="",P=uO,R=mO,ae=fO;return g!=null&&(g.unstable_strictMode===!0&&(y=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(P=g.onUncaughtError),g.onCaughtError!==void 0&&(R=g.onCaughtError),g.onRecoverableError!==void 0&&(ae=g.onRecoverableError)),g=WM(m,1,!1,null,null,y,C,null,P,R,ae,nI),m[Nt]=g.current,NS(m),new BS(g)},dg.hydrateRoot=function(m,g,y){if(!r(m))throw Error(s(299));var C=!1,P="",R=uO,ae=mO,Se=fO,Ye=null;return y!=null&&(y.unstable_strictMode===!0&&(C=!0),y.identifierPrefix!==void 0&&(P=y.identifierPrefix),y.onUncaughtError!==void 0&&(R=y.onUncaughtError),y.onCaughtError!==void 0&&(ae=y.onCaughtError),y.onRecoverableError!==void 0&&(Se=y.onRecoverableError),y.formState!==void 0&&(Ye=y.formState)),g=WM(m,1,!0,g,y??null,C,P,Ye,R,ae,Se,nI),g.context=VM(null),y=g.current,C=Pr(),C=De(C),P=bc(C),P.callback=null,vc(y,P,C),y=C,g.current.lanes=y,q(g,y),io(g),m[Nt]=g.current,NS(m),new Dy(g)},dg.version="19.2.0",dg}var hI;function Wae(){if(hI)return GS.exports;hI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),GS.exports=Gae(),GS.exports}var Vae=Wae();var gI="popstate";function Yae(e={}){function t(s,r){let{pathname:i,search:o,hash:l}=s.location;return HT("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:hp(r)}return Kae(t,n,null,e)}function mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qae(){return Math.random().toString(36).substring(2,10)}function pI(e,t){return{usr:e.state,key:e.key,idx:t}}function HT(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Yf(t):t,state:n,key:t&&t.key||s||Qae()}}function hp({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Yf(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function Kae(e,t,n,s={}){let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),N=b==null?null:b-u;u=b,c&&c({action:l,location:j.location,delta:N})}function p(b,N){l="PUSH";let w=HT(j.location,b,N);u=d()+1;let S=pI(w,u),_=j.createHref(w);try{o.pushState(S,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(_)}i&&c&&c({action:l,location:j.location,delta:1})}function x(b,N){l="REPLACE";let w=HT(j.location,b,N);u=d();let S=pI(w,u),_=j.createHref(w);o.replaceState(S,"",_),i&&c&&c({action:l,location:j.location,delta:0})}function v(b){return Xae(b)}let j={get action(){return l},get location(){return e(r,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(gI,h),c=b,()=>{r.removeEventListener(gI,h),c=null}},createHref(b){return t(r,b)},createURL:v,encodeLocation(b){let N=v(b);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:p,replace:x,go(b){return o.go(b)}};return j}function Xae(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),mn(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:hp(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function pH(e,t,n="/"){return Zae(e,t,n,!1)}function Zae(e,t,n,s){let r=typeof t=="string"?Yf(t):t,i=Rl(r.pathname||"/",n);if(i==null)return null;let o=xH(e);Jae(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=dne(i);l=lne(o[c],u,s)}return l}function xH(e,t=[],n=[],s="",r=!1){let i=(o,l,c=r,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&c)return;mn(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let h=Ol([s,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(mn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),xH(o.children,t,p,h,c)),!(o.path==null&&!o.index)&&t.push({path:h,score:ine(h,o.index),routesMeta:p})};return e.forEach((o,l)=>{if(o.path===""||!o.path?.includes("?"))i(o,l);else for(let c of yH(o.path))i(o,l,!0,c)}),t}function yH(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=yH(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Jae(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:one(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var ene=/^:[\w-]+$/,tne=3,ane=2,nne=1,sne=10,rne=-2,xI=e=>e==="*";function ine(e,t){let n=e.split("/"),s=n.length;return n.some(xI)&&(s+=rne),t&&(s+=ane),n.filter(r=>!xI(r)).reduce((r,i)=>r+(ene.test(i)?tne:i===""?nne:sne),s)}function one(e,t){return e.length===t.length&&e.slice(0,-1).every((s,r)=>s===t[r])?e[e.length-1]-t[t.length-1]:0}function lne(e,t,n=!1){let{routesMeta:s}=e,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!h&&u&&n&&!s[s.length-1].route.index&&(h=Cv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Ol([i,h.pathname]),pathnameBase:hne(Ol([i,h.pathnameBase])),route:p}),h.pathnameBase!=="/"&&(i=Ol([i,h.pathnameBase]))}return o}function Cv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=cne(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:h},p)=>{if(d==="*"){let v=l[p]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[p];return h&&!x?u[d]=void 0:u[d]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function cne(e,t=!1,n=!0){yi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),s]}function dne(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}var une=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function mne(e,t="/"){let{pathname:n,search:s="",hash:r=""}=typeof e=="string"?Yf(e):e,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=yI(n.substring(1),"/"):i=yI(n,t)):i=t,{pathname:i,search:gne(s),hash:pne(r)}}function yI(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function QS(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fne(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function uL(e){let t=fne(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function mL(e,t,n,s=!1){let r;typeof e=="string"?r=Yf(e):(r={...e},mn(!r.pathname||!r.pathname.includes("?"),QS("?","pathname","search",r)),mn(!r.pathname||!r.pathname.includes("#"),QS("#","pathname","hash",r)),mn(!r.search||!r.search.includes("#"),QS("#","search","hash",r)));let i=e===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}l=h>=0?t[h]:"/"}let c=mne(r,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Ol=e=>e.join("/").replace(/\/\/+/g,"/"),hne=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gne=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pne=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,xne=class{constructor(e,t,n,s=!1){this.status=e,this.statusText=t||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function yne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function bne(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var bH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vH(e,t){let n=e;if(typeof n!="string"||!une.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,r=!1;if(bH)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=Rl(o.pathname,t);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:r=!0}catch{yi(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wH=["POST","PUT","PATCH","DELETE"];new Set(wH);var vne=["GET",...wH];new Set(vne);var Qf=f.createContext(null);Qf.displayName="DataRouter";var nj=f.createContext(null);nj.displayName="DataRouterState";var wne=f.createContext(!1),jH=f.createContext({isTransitioning:!1});jH.displayName="ViewTransition";var jne=f.createContext(new Map);jne.displayName="Fetchers";var Nne=f.createContext(null);Nne.displayName="Await";var qr=f.createContext(null);qr.displayName="Navigation";var tx=f.createContext(null);tx.displayName="Location";var _i=f.createContext({outlet:null,matches:[],isDataRoute:!1});_i.displayName="Route";var fL=f.createContext(null);fL.displayName="RouteError";var NH="REACT_ROUTER_ERROR",Cne="REDIRECT",Sne="ROUTE_ERROR_RESPONSE";function _ne(e){if(e.startsWith(`${NH}:${Cne}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Ane(e){if(e.startsWith(`${NH}:${Sne}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new xne(t.status,t.statusText,t.data)}catch{}}function Tne(e,{relative:t}={}){mn(Kf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=f.useContext(qr),{hash:r,pathname:i,search:o}=ax(e,{relative:t}),l=i;return n!=="/"&&(l=i==="/"?n:Ol([n,i])),s.createHref({pathname:l,search:o,hash:r})}function Kf(){return f.useContext(tx)!=null}function Jt(){return mn(Kf(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(tx).location}var CH="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function SH(e){f.useContext(qr).static||f.useLayoutEffect(e)}function Tt(){let{isDataRoute:e}=f.useContext(_i);return e?Hne():kne()}function kne(){mn(Kf(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(Qf),{basename:t,navigator:n}=f.useContext(qr),{matches:s}=f.useContext(_i),{pathname:r}=Jt(),i=JSON.stringify(uL(s)),o=f.useRef(!1);return SH(()=>{o.current=!0}),f.useCallback((c,u={})=>{if(yi(o.current,CH),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=mL(c,JSON.parse(i),r,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ol([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,i,r,e])}var Ene=f.createContext(null);function Lne(e){let t=f.useContext(_i).outlet;return f.useMemo(()=>t&&f.createElement(Ene.Provider,{value:e},t),[t,e])}function Go(){let{matches:e}=f.useContext(_i),t=e[e.length-1];return t?t.params:{}}function ax(e,{relative:t}={}){let{matches:n}=f.useContext(_i),{pathname:s}=Jt(),r=JSON.stringify(uL(n));return f.useMemo(()=>mL(e,JSON.parse(r),s,t==="path"),[e,r,s,t])}function Pne(e,t){return _H(e,t)}function _H(e,t,n,s,r){mn(Kf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=f.useContext(qr),{matches:o}=f.useContext(_i),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let w=h&&h.path||"";TH(u,!h||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Jt(),x;if(t){let w=typeof t=="string"?Yf(t):t;mn(d==="/"||w.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${w.pathname}" was given in the \`location\` prop.`),x=w}else x=p;let v=x.pathname||"/",j=v;if(d!=="/"){let w=d.replace(/^\//,"").split("/");j="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let b=pH(e,{pathname:j});yi(h||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),yi(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=$ne(b&&b.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:Ol([d,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:Ol([d,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,s,r);return t&&N?f.createElement(tx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function Dne(){let e=Bne(),t=yne(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:i},"ErrorBoundary")," or"," ",f.createElement("code",{style:i},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:r},n):null,o)}var One=f.createElement(Dne,null),AH=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=Ane(e.digest);n&&(e=n)}let t=e!==void 0?f.createElement(_i.Provider,{value:this.props.routeContext},f.createElement(fL.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?f.createElement(Mne,{error:e},t):t}};AH.contextType=wne;var KS=new WeakMap;function Mne({children:e,error:t}){let{basename:n}=f.useContext(qr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=_ne(t.digest);if(s){let r=KS.get(t);if(r)throw r;let i=vH(s.location,n);if(bH&&!KS.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw KS.set(t,o),o}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function Ine({routeContext:e,match:t,children:n}){let s=f.useContext(Qf);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(_i.Provider,{value:e},n)}function $ne(e,t=[],n=null,s=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n?.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);mn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:x}=n,v=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!x||x[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}let u=n&&s?(d,h)=>{s(d,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:bne(n.matches),errorInfo:h})}:void 0;return i.reduceRight((d,h,p)=>{let x,v=!1,j=null,b=null;n&&(x=o&&h.route.id?o[h.route.id]:void 0,j=h.route.errorElement||One,l&&(c<0&&p===0?(TH("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):c===p&&(v=!0,b=h.route.hydrateFallbackElement||null)));let N=t.concat(i.slice(0,p+1)),w=()=>{let S;return x?S=j:v?S=b:h.route.Component?S=f.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=d,f.createElement(Ine,{match:h,routeContext:{outlet:d,matches:N,isDataRoute:n!=null},children:S})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?f.createElement(AH,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:w(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:u}):w()},null)}function hL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rne(e){let t=f.useContext(Qf);return mn(t,hL(e)),t}function zne(e){let t=f.useContext(nj);return mn(t,hL(e)),t}function Fne(e){let t=f.useContext(_i);return mn(t,hL(e)),t}function gL(e){let t=Fne(e),n=t.matches[t.matches.length-1];return mn(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Une(){return gL("useRouteId")}function Bne(){let e=f.useContext(fL),t=zne("useRouteError"),n=gL("useRouteError");return e!==void 0?e:t.errors?.[n]}function Hne(){let{router:e}=Rne("useNavigate"),t=gL("useNavigate"),n=f.useRef(!1);return SH(()=>{n.current=!0}),f.useCallback(async(r,i={})=>{yi(n.current,CH),n.current&&(typeof r=="number"?await e.navigate(r):await e.navigate(r,{fromRouteId:t,...i}))},[e,t])}var bI={};function TH(e,t,n){!t&&!bI[e]&&(bI[e]=!0,yi(!1,n))}f.memo(qne);function qne({routes:e,future:t,state:n,onError:s}){return _H(e,void 0,n,s,t)}function di({to:e,replace:t,state:n,relative:s}){mn(Kf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=f.useContext(qr);yi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=f.useContext(_i),{pathname:o}=Jt(),l=Tt(),c=mL(e,uL(i),o,s==="path"),u=JSON.stringify(c);return f.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:s})},[l,u,s,t,n]),null}function nx(e){return Lne(e.context)}function wt(e){mn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gne({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:r,static:i=!1,unstable_useTransitions:o}){mn(!Kf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:l,navigator:r,static:i,unstable_useTransitions:o,future:{}}),[l,r,i,o]);typeof n=="string"&&(n=Yf(n));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:x="default"}=n,v=f.useMemo(()=>{let j=Rl(u,l);return j==null?null:{location:{pathname:j,search:d,hash:h,state:p,key:x},navigationType:s}},[l,u,d,h,p,x,s]);return yi(v!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:f.createElement(qr.Provider,{value:c},f.createElement(tx.Provider,{children:t,value:v}))}function Wne({children:e,location:t}){return Pne(qT(e),t)}function qT(e,t=[]){let n=[];return f.Children.forEach(e,(s,r)=>{if(!f.isValidElement(s))return;let i=[...t,r];if(s.type===f.Fragment){n.push.apply(n,qT(s.props.children,i));return}mn(s.type===wt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=qT(s.props.children,i)),n.push(o)}),n}var av="get",nv="application/x-www-form-urlencoded";function sj(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Vne(e){return sj(e)&&e.tagName.toLowerCase()==="button"}function Yne(e){return sj(e)&&e.tagName.toLowerCase()==="form"}function Qne(e){return sj(e)&&e.tagName.toLowerCase()==="input"}function Kne(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Xne(e,t){return e.button===0&&(!t||t==="_self")&&!Kne(e)}function GT(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(r=>[n,r]):[[n,s]])},[]))}function Zne(e,t){let n=GT(e);return t&&t.forEach((s,r)=>{n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)})}),n}var My=null;function Jne(){if(My===null)try{new FormData(document.createElement("form"),0),My=!1}catch{My=!0}return My}var ese=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function XS(e){return e!=null&&!ese.has(e)?(yi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nv}"`),null):e}function tse(e,t){let n,s,r,i,o;if(Yne(e)){let l=e.getAttribute("action");s=l?Rl(l,t):null,n=e.getAttribute("method")||av,r=XS(e.getAttribute("enctype"))||nv,i=new FormData(e)}else if(Vne(e)||Qne(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(s=c?Rl(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||av,r=XS(e.getAttribute("formenctype"))||XS(l.getAttribute("enctype"))||nv,i=new FormData(l,e),!Jne()){let{name:u,type:d,value:h}=e;if(d==="image"){let p=u?`${u}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else u&&i.append(u,h)}}else{if(sj(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=av,s=null,r=nv,o=e}return i&&r==="text/plain"&&(o=i,i=void 0),{action:s,method:n.toLowerCase(),encType:r,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pL(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ase(e,t,n,s){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${s}`:r.pathname=`${r.pathname}.${s}`:r.pathname==="/"?r.pathname=`_root.${s}`:t&&Rl(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${s}`,r}async function nse(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sse(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function rse(e,t,n){let s=await Promise.all(e.map(async r=>{let i=t.routes[r.route.id];if(i){let o=await nse(i,n);return o.links?o.links():[]}return[]}));return cse(s.flat(1).filter(sse).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function vI(e,t,n,s,r,i){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>n[u].pathname!==c.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function ise(e,t,{includeHydrateFallback:n}={}){return ose(e.map(s=>{let r=t.routes[s.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function ose(e){return[...new Set(e)]}function lse(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function cse(e,t){let n=new Set;return new Set(t),e.reduce((s,r)=>{let i=JSON.stringify(lse(r));return n.has(i)||(n.add(i),s.push({key:i,link:r})),s},[])}function kH(){let e=f.useContext(Qf);return pL(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function dse(){let e=f.useContext(nj);return pL(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var xL=f.createContext(void 0);xL.displayName="FrameworkContext";function EH(){let e=f.useContext(xL);return pL(e,"You must render this element inside a <HydratedRouter> element"),e}function use(e,t){let n=f.useContext(xL),[s,r]=f.useState(!1),[i,o]=f.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,p=f.useRef(null);f.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let j=N=>{N.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(j,{threshold:.5});return p.current&&b.observe(p.current),()=>{b.disconnect()}}},[e]),f.useEffect(()=>{if(s){let j=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(j)}}},[s]);let x=()=>{r(!0)},v=()=>{r(!1),o(!1)};return n?e!=="intent"?[i,p,{}]:[i,p,{onFocus:ug(l,x),onBlur:ug(c,v),onMouseEnter:ug(u,x),onMouseLeave:ug(d,v),onTouchStart:ug(h,x)}]:[!1,p,{}]}function ug(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function mse({page:e,...t}){let{router:n}=kH(),s=f.useMemo(()=>pH(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?f.createElement(hse,{page:e,matches:s,...t}):null}function fse(e){let{manifest:t,routeModules:n}=EH(),[s,r]=f.useState([]);return f.useEffect(()=>{let i=!1;return rse(e,t,n).then(o=>{i||r(o)}),()=>{i=!0}},[e,t,n]),s}function hse({page:e,matches:t,...n}){let s=Jt(),{future:r,manifest:i,routeModules:o}=EH(),{basename:l}=kH(),{loaderData:c,matches:u}=dse(),d=f.useMemo(()=>vI(e,t,u,i,s,"data"),[e,t,u,i,s]),h=f.useMemo(()=>vI(e,t,u,i,s,"assets"),[e,t,u,i,s]),p=f.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let j=new Set,b=!1;if(t.forEach(w=>{let S=i.routes[w.route.id];!S||!S.hasLoader||(!d.some(_=>_.route.id===w.route.id)&&w.route.id in c&&o[w.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:j.add(w.route.id))}),j.size===0)return[];let N=ase(e,l,r.unstable_trailingSlashAwareDataRequests,"data");return b&&j.size>0&&N.searchParams.set("_routes",t.filter(w=>j.has(w.route.id)).map(w=>w.route.id).join(",")),[N.pathname+N.search]},[l,r.unstable_trailingSlashAwareDataRequests,c,s,i,d,t,e,o]),x=f.useMemo(()=>ise(h,i),[h,i]),v=fse(h);return f.createElement(f.Fragment,null,p.map(j=>f.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),x.map(j=>f.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),v.map(({key:j,link:b})=>f.createElement("link",{key:j,nonce:n.nonce,...b,crossOrigin:b.crossOrigin??n.crossOrigin})))}function gse(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var pse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pse&&(window.__reactRouterVersion="7.13.0")}catch{}function xse({basename:e,children:t,unstable_useTransitions:n,window:s}){let r=f.useRef();r.current==null&&(r.current=Yae({window:s,v5Compat:!0}));let i=r.current,[o,l]=f.useState({action:i.action,location:i.location}),c=f.useCallback(u=>{n===!1?l(u):f.startTransition(()=>l(u))},[n]);return f.useLayoutEffect(()=>i.listen(c),[i,c]),f.createElement(Gne,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var LH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,id=f.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...x},v){let{basename:j,unstable_useTransitions:b}=f.useContext(qr),N=typeof u=="string"&&LH.test(u),w=vH(u,j);u=w.to;let S=Tne(u,{relative:r}),[_,k,T]=use(s,x),A=vse(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:r,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:b});function E(O){t&&t(O),O.defaultPrevented||A(O)}let M=f.createElement("a",{...x,...T,href:w.absoluteURL||S,onClick:w.isExternal||i?t:E,ref:gse(v,k),target:c,"data-discover":!N&&n==="render"?"true":void 0});return _&&!N?f.createElement(f.Fragment,null,M,f.createElement(mse,{page:S})):M});id.displayName="Link";var Ut=f.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let h=ax(o,{relative:u.relative}),p=Jt(),x=f.useContext(nj),{navigator:v,basename:j}=f.useContext(qr),b=x!=null&&Sse(h)&&l===!0,N=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=p.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&j&&(S=Rl(S,j)||S);const _=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let k=w===N||!r&&w.startsWith(N)&&w.charAt(_)==="/",T=S!=null&&(S===N||!r&&S.startsWith(N)&&S.charAt(N.length)==="/"),A={isActive:k,isPending:T,isTransitioning:b},E=k?t:void 0,M;typeof s=="function"?M=s(A):M=[s,k?"active":null,T?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let O=typeof i=="function"?i(A):i;return f.createElement(id,{...u,"aria-current":E,className:M,ref:d,style:O,to:o,viewTransition:l},typeof c=="function"?c(A):c)});Ut.displayName="NavLink";var yse=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:r,state:i,method:o=av,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p,...x},v)=>{let{unstable_useTransitions:j}=f.useContext(qr),b=Nse(),N=Cse(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&LH.test(l),_=k=>{if(c&&c(k),k.defaultPrevented)return;k.preventDefault();let T=k.nativeEvent.submitter,A=T?.getAttribute("formmethod")||o,E=()=>b(T||k.currentTarget,{fetcherKey:t,method:A,navigate:n,replace:r,state:i,relative:u,preventScrollReset:d,viewTransition:h,unstable_defaultShouldRevalidate:p});j&&n!==!1?f.startTransition(()=>E()):E()};return f.createElement("form",{ref:v,method:w,action:N,onSubmit:s?c:_,...x,"data-discover":!S&&e==="render"?"true":void 0})});yse.displayName="Form";function bse(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PH(e){let t=f.useContext(Qf);return mn(t,bse(e)),t}function vse(e,{target:t,replace:n,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=Tt(),d=Jt(),h=ax(e,{relative:i});return f.useCallback(p=>{if(Xne(p,t)){p.preventDefault();let x=n!==void 0?n:hp(d)===hp(h),v=()=>u(e,{replace:x,state:s,preventScrollReset:r,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});c?f.startTransition(()=>v()):v()}},[d,u,h,n,s,t,e,r,i,o,l,c])}function Us(e){yi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=f.useRef(GT(e)),n=f.useRef(!1),s=Jt(),r=f.useMemo(()=>Zne(s.search,n.current?null:t.current),[s.search]),i=Tt(),o=f.useCallback((l,c)=>{const u=GT(typeof l=="function"?l(new URLSearchParams(r)):l);n.current=!0,i("?"+u,c)},[i,r]);return[r,o]}var wse=0,jse=()=>`__${String(++wse)}__`;function Nse(){let{router:e}=PH("useSubmit"),{basename:t}=f.useContext(qr),n=Une(),s=e.fetch,r=e.navigate;return f.useCallback(async(i,o={})=>{let{action:l,method:c,encType:u,formData:d,body:h}=tse(i,t);if(o.navigate===!1){let p=o.fetcherKey||jse();await s(p,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||c,formEncType:o.encType||u,flushSync:o.flushSync})}else await r(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:d,body:h,formMethod:o.method||c,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,r,t,n])}function Cse(e,{relative:t}={}){let{basename:n}=f.useContext(qr),s=f.useContext(_i);mn(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),i={...ax(e||".",{relative:t})},o=Jt();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ol([n,i.pathname])),hp(i)}function Sse(e,{relative:t}={}){let n=f.useContext(jH);mn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=PH("useViewTransitionState"),r=ax(e,{relative:t});if(!n.isTransitioning)return!1;let i=Rl(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Rl(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Cv(r.pathname,o)!=null||Cv(r.pathname,i)!=null}var Gi=gH();const Iy=eo(Gi);function DH(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=DH(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function It(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=DH(e))&&(s&&(s+=" "),s+=t);return s}function _se(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}_se(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sx=e=>typeof e=="number"&&!isNaN(e),Tu=e=>typeof e=="string",zl=e=>typeof e=="function",Ase=e=>Tu(e)||sx(e),WT=e=>Tu(e)||zl(e)?e:null,Tse=(e,t)=>e===!1||sx(e)&&e>0?e:t,VT=e=>f.isValidElement(e)||Tu(e)||zl(e)||sx(e);function kse(e,t,n=300){let{scrollHeight:s,style:r}=e;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(t,n)})})}function Ese({enter:e,exit:t,appendPosition:n=!1,collapse:s=!0,collapseDuration:r=300}){return function({children:i,position:o,preventExitTransition:l,done:c,nodeRef:u,isIn:d,playToast:h}){let p=n?`${e}--${o}`:e,x=n?`${t}--${o}`:t,v=f.useRef(0);return f.useLayoutEffect(()=>{let j=u.current,b=p.split(" "),N=w=>{w.target===u.current&&(h(),j.removeEventListener("animationend",N),j.removeEventListener("animationcancel",N),v.current===0&&w.type!=="animationcancel"&&j.classList.remove(...b))};j.classList.add(...b),j.addEventListener("animationend",N),j.addEventListener("animationcancel",N)},[]),f.useEffect(()=>{let j=u.current,b=()=>{j.removeEventListener("animationend",b),s?kse(j,c,r):c()};d||(l?b():(v.current=1,j.className+=` ${x}`,j.addEventListener("animationend",b)))},[d]),bt.createElement(bt.Fragment,null,i)}}function wI(e,t){return{content:OH(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function OH(e,t,n=!1){return f.isValidElement(e)&&!Tu(e.type)?f.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):zl(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function Lse({closeToast:e,theme:t,ariaLabel:n="close"}){return bt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:s=>{s.stopPropagation(),e(!0)},"aria-label":n},bt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},bt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Pse({delay:e,isRunning:t,closeToast:n,type:s="default",hide:r,className:i,controlledProgress:o,progress:l,rtl:c,isIn:u,theme:d}){let h=r||o&&l===0,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(p.transform=`scaleX(${l})`);let x=It("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),v=zl(i)?i({rtl:c,type:s,defaultClassName:x}):It(x,i),j={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{u&&n()}};return bt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":h},bt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),bt.createElement("div",{role:"progressbar","aria-hidden":h?"true":"false","aria-label":"notification timer",className:v,style:p,...j}))}var Dse=1,MH=()=>`${Dse++}`;function Ose(e,t,n){let s=1,r=0,i=[],o=[],l=t,c=new Map,u=new Set,d=w=>(u.add(w),()=>u.delete(w)),h=()=>{o=Array.from(c.values()),u.forEach(w=>w())},p=({containerId:w,toastId:S,updateId:_})=>{let k=w?w!==e:e!==1,T=c.has(S)&&_==null;return k||T},x=(w,S)=>{c.forEach(_=>{var k;(S==null||S===_.props.toastId)&&((k=_.toggle)==null||k.call(_,w))})},v=w=>{var S,_;(_=(S=w.props)==null?void 0:S.onClose)==null||_.call(S,w.removalReason),w.isActive=!1},j=w=>{if(w==null)c.forEach(v);else{let S=c.get(w);S&&v(S)}h()},b=()=>{r-=i.length,i=[]},N=w=>{var S,_;let{toastId:k,updateId:T}=w.props,A=T==null;w.staleId&&c.delete(w.staleId),w.isActive=!0,c.set(k,w),h(),n(wI(w,A?"added":"updated")),A&&((_=(S=w.props).onOpen)==null||_.call(S))};return{id:e,props:l,observe:d,toggle:x,removeToast:j,toasts:c,clearQueue:b,buildToast:(w,S)=>{if(p(S))return;let{toastId:_,updateId:k,data:T,staleId:A,delay:E}=S,M=k==null;M&&r++;let O={...l,style:l.toastStyle,key:s++,...Object.fromEntries(Object.entries(S).filter(([D,H])=>H!=null)),toastId:_,updateId:k,data:T,isIn:!1,className:WT(S.className||l.toastClassName),progressClassName:WT(S.progressClassName||l.progressClassName),autoClose:S.isLoading?!1:Tse(S.autoClose,l.autoClose),closeToast(D){c.get(_).removalReason=D,j(_)},deleteToast(){let D=c.get(_);if(D!=null){if(n(wI(D,"removed")),c.delete(_),r--,r<0&&(r=0),i.length>0){N(i.shift());return}h()}}};O.closeButton=l.closeButton,S.closeButton===!1||VT(S.closeButton)?O.closeButton=S.closeButton:S.closeButton===!0&&(O.closeButton=VT(l.closeButton)?l.closeButton:!0);let I={content:w,props:O,staleId:A};l.limit&&l.limit>0&&r>l.limit&&M?i.push(I):sx(E)?setTimeout(()=>{N(I)},E):N(I)},setProps(w){l=w},setToggle:(w,S)=>{let _=c.get(w);_&&(_.toggle=S)},isToastActive:w=>{var S;return(S=c.get(w))==null?void 0:S.isActive},getSnapshot:()=>o}}var Gs=new Map,gp=[],YT=new Set,Mse=e=>YT.forEach(t=>t(e)),IH=()=>Gs.size>0;function Ise(){gp.forEach(e=>RH(e.content,e.options)),gp=[]}var $se=(e,{containerId:t})=>{var n;return(n=Gs.get(t||1))==null?void 0:n.toasts.get(e)};function $H(e,t){var n;if(t)return!!((n=Gs.get(t))!=null&&n.isToastActive(e));let s=!1;return Gs.forEach(r=>{r.isToastActive(e)&&(s=!0)}),s}function Rse(e){if(!IH()){gp=gp.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||Ase(e))Gs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Gs.get(e.containerId);t?t.removeToast(e.id):Gs.forEach(n=>{n.removeToast(e.id)})}}var zse=(e={})=>{Gs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function RH(e,t){VT(e)&&(IH()||gp.push({content:e,options:t}),Gs.forEach(n=>{n.buildToast(e,t)}))}function Fse(e){var t;(t=Gs.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function zH(e,t){Gs.forEach(n=>{(t==null||!(t!=null&&t.containerId)||t?.containerId===n.id)&&n.toggle(e,t?.id)})}function Use(e){let t=e.containerId||1;return{subscribe(n){let s=Ose(t,e,Mse);Gs.set(t,s);let r=s.observe(n);return Ise(),()=>{r(),Gs.delete(t)}},setProps(n){var s;(s=Gs.get(t))==null||s.setProps(n)},getSnapshot(){var n;return(n=Gs.get(t))==null?void 0:n.getSnapshot()}}}function Bse(e){return YT.add(e),()=>{YT.delete(e)}}function Hse(e){return e&&(Tu(e.toastId)||sx(e.toastId))?e.toastId:MH()}function rx(e,t){return RH(e,t),t.toastId}function rj(e,t){return{...t,type:t&&t.type||e,toastId:Hse(t)}}function ij(e){return(t,n)=>rx(t,rj(e,n))}function V(e,t){return rx(e,rj("default",t))}V.loading=(e,t)=>rx(e,rj("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function qse(e,{pending:t,error:n,success:s},r){let i;t&&(i=Tu(t)?V.loading(t,r):V.loading(t.render,{...r,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(u,d,h)=>{if(d==null){V.dismiss(i);return}let p={type:u,...o,...r,data:h},x=Tu(d)?{render:d}:d;return i?V.update(i,{...p,...x}):V(x.render,{...p,...x}),h},c=zl(e)?e():e;return c.then(u=>l("success",s,u)).catch(u=>l("error",n,u)),c}V.promise=qse;V.success=ij("success");V.info=ij("info");V.error=ij("error");V.warning=ij("warning");V.warn=V.warning;V.dark=(e,t)=>rx(e,rj("default",{theme:"dark",...t}));function Gse(e){Rse(e)}V.dismiss=Gse;V.clearWaitingQueue=zse;V.isActive=$H;V.update=(e,t={})=>{let n=$se(e,t);if(n){let{props:s,content:r}=n,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:MH()};i.toastId!==e&&(i.staleId=e);let o=i.render||r;delete i.render,rx(o,i)}};V.done=e=>{V.update(e,{progress:1})};V.onChange=Bse;V.play=e=>zH(!0,e);V.pause=e=>zH(!1,e);function Wse(e){var t;let{subscribe:n,getSnapshot:s,setProps:r}=f.useRef(Use(e)).current;r(e);let i=(t=f.useSyncExternalStore(n,s,s))==null?void 0:t.slice();function o(l){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(u=>{let{position:d}=u.props;c.has(d)||c.set(d,[]),c.get(d).push(u)}),Array.from(c,u=>l(u[0],u[1]))}return{getToastToRender:o,isToastActive:$H,count:i?.length}}function Vse(e){let[t,n]=f.useState(!1),[s,r]=f.useState(!1),i=f.useRef(null),o=f.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:h}=e;Fse({id:e.toastId,containerId:e.containerId,fn:n}),f.useEffect(()=>{if(e.pauseOnFocusLoss)return p(),()=>{x()}},[e.pauseOnFocusLoss]);function p(){document.hasFocus()||N(),window.addEventListener("focus",b),window.addEventListener("blur",N)}function x(){window.removeEventListener("focus",b),window.removeEventListener("blur",N)}function v(A){if(e.draggable===!0||e.draggable===A.pointerType){w();let E=i.current;o.canCloseOnClick=!0,o.canDrag=!0,E.style.transition="none",e.draggableDirection==="x"?(o.start=A.clientX,o.removalDistance=E.offsetWidth*(e.draggablePercent/100)):(o.start=A.clientY,o.removalDistance=E.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function j(A){let{top:E,bottom:M,left:O,right:I}=i.current.getBoundingClientRect();A.nativeEvent.type!=="touchend"&&e.pauseOnHover&&A.clientX>=O&&A.clientX<=I&&A.clientY>=E&&A.clientY<=M?N():b()}function b(){n(!0)}function N(){n(!1)}function w(){o.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",k)}function S(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",k)}function _(A){let E=i.current;if(o.canDrag&&E){o.didMove=!0,t&&N(),e.draggableDirection==="x"?o.delta=A.clientX-o.start:o.delta=A.clientY-o.start,o.start!==A.clientX&&(o.canCloseOnClick=!1);let M=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;E.style.transform=`translate3d(${M},0)`,E.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function k(){S();let A=i.current;if(o.canDrag&&o.didMove&&A){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){r(!0),e.closeToast(!0),e.collapseAll();return}A.style.transition="transform 0.2s, opacity 0.2s",A.style.removeProperty("transform"),A.style.removeProperty("opacity")}}let T={onPointerDown:v,onPointerUp:j};return l&&c&&(T.onMouseEnter=N,e.stacked||(T.onMouseLeave=b)),h&&(T.onClick=A=>{d&&d(A),o.canCloseOnClick&&u(!0)}),{playToast:b,pauseToast:N,isRunning:t,preventExitTransition:s,toastRef:i,eventHandlers:T}}var Yse=typeof window<"u"?f.useLayoutEffect:f.useEffect,oj=({theme:e,type:t,isLoading:n,...s})=>bt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...s});function Qse(e){return bt.createElement(oj,{...e},bt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Kse(e){return bt.createElement(oj,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Xse(e){return bt.createElement(oj,{...e},bt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Zse(e){return bt.createElement(oj,{...e},bt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Jse(){return bt.createElement("div",{className:"Toastify__spinner"})}var QT={info:Kse,warning:Qse,success:Xse,error:Zse,spinner:Jse},ere=e=>e in QT;function tre({theme:e,type:t,isLoading:n,icon:s}){let r=null,i={theme:e,type:t};return s===!1||(zl(s)?r=s({...i,isLoading:n}):f.isValidElement(s)?r=f.cloneElement(s,i):n?r=QT.spinner():ere(t)&&(r=QT[t](i))),r}var are=e=>{let{isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:r,playToast:i}=Vse(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:h,closeToast:p,transition:x,position:v,className:j,style:b,progressClassName:N,updateId:w,role:S,progress:_,rtl:k,toastId:T,deleteToast:A,isIn:E,isLoading:M,closeOnClick:O,theme:I,ariaLabel:D}=e,H=It("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":O}),W=zl(j)?j({rtl:k,position:v,type:d,defaultClassName:H}):It(H,j),z=tre(e),Q=!!_||!c,J={closeToast:p,type:d,theme:I},Y=null;return o===!1||(zl(o)?Y=o(J):f.isValidElement(o)?Y=f.cloneElement(o,J):Y=Lse(J)),bt.createElement(x,{isIn:E,done:A,position:v,preventExitTransition:n,nodeRef:s,playToast:i},bt.createElement("div",{id:T,tabIndex:0,onClick:u,"data-in":E,className:W,...r,style:b,ref:s,...E&&{role:S,"aria-label":D}},z!=null&&bt.createElement("div",{className:It("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!M})},z),OH(l,e,!t),Y,!e.customProgressBar&&bt.createElement(Pse,{...w&&!Q?{key:`p-${w}`}:{},rtl:k,theme:I,delay:c,isRunning:t,isIn:E,closeToast:p,hide:h,type:d,className:N,controlledProgress:Q,progress:_||0})))},nre=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),sre=Ese(nre("bounce",!0)),rre={position:"top-right",transition:sre,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function ire(e){let t={...rre,...e},n=e.stacked,[s,r]=f.useState(!0),i=f.useRef(null),{getToastToRender:o,isToastActive:l,count:c}=Wse(t),{className:u,style:d,rtl:h,containerId:p,hotKeys:x}=t;function v(b){let N=It("Toastify__toast-container",`Toastify__toast-container--${b}`,{"Toastify__toast-container--rtl":h});return zl(u)?u({position:b,rtl:h,defaultClassName:N}):It(N,WT(u))}function j(){n&&(r(!0),V.play())}return Yse(()=>{var b;if(n){let N=i.current.querySelectorAll('[data-in="true"]'),w=12,S=(b=t.position)==null?void 0:b.includes("top"),_=0,k=0;Array.from(N).reverse().forEach((T,A)=>{let E=T;E.classList.add("Toastify__toast--stacked"),A>0&&(E.dataset.collapsed=`${s}`),E.dataset.pos||(E.dataset.pos=S?"top":"bot");let M=_*(s?.2:1)+(s?0:w*A);E.style.setProperty("--y",`${S?M:M*-1}px`),E.style.setProperty("--g",`${w}`),E.style.setProperty("--s",`${1-(s?k:0)}`),_+=E.offsetHeight,k+=.025})}},[s,c,n]),f.useEffect(()=>{function b(N){var w;let S=i.current;x(N)&&((w=S.querySelector('[tabIndex="0"]'))==null||w.focus(),r(!1),V.pause()),N.key==="Escape"&&(document.activeElement===S||S!=null&&S.contains(document.activeElement))&&(r(!0),V.play())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[x]),bt.createElement("section",{ref:i,className:"Toastify",id:p,onMouseEnter:()=>{n&&(r(!1),V.pause())},onMouseLeave:j,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((b,N)=>{let w=N.length?{...d}:{...d,pointerEvents:"none"};return bt.createElement("div",{tabIndex:-1,className:v(b),"data-stacked":n,style:w,key:`c-${b}`},N.map(({content:S,props:_})=>bt.createElement(are,{..._,stacked:n,collapseAll:j,isIn:l(_.toastId,_.containerId),key:`t-${_.key}`},S)))}))}function FH(e,t){return function(){return e.apply(t,arguments)}}const{toString:ore}=Object.prototype,{getPrototypeOf:yL}=Object,{iterator:lj,toStringTag:UH}=Symbol,cj=(e=>t=>{const n=ore.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),to=e=>(e=e.toLowerCase(),t=>cj(t)===e),dj=e=>t=>typeof t===e,{isArray:Xf}=Array,_f=dj("undefined");function ix(e){return e!==null&&!_f(e)&&e.constructor!==null&&!_f(e.constructor)&&hr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const BH=to("ArrayBuffer");function lre(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&BH(e.buffer),t}const cre=dj("string"),hr=dj("function"),HH=dj("number"),ox=e=>e!==null&&typeof e=="object",dre=e=>e===!0||e===!1,sv=e=>{if(cj(e)!=="object")return!1;const t=yL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(UH in e)&&!(lj in e)},ure=e=>{if(!ox(e)||ix(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},mre=to("Date"),fre=to("File"),hre=to("Blob"),gre=to("FileList"),pre=e=>ox(e)&&hr(e.pipe),xre=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hr(e.append)&&((t=cj(e))==="formdata"||t==="object"&&hr(e.toString)&&e.toString()==="[object FormData]"))},yre=to("URLSearchParams"),[bre,vre,wre,jre]=["ReadableStream","Request","Response","Headers"].map(to),Nre=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function lx(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Xf(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(ix(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function qH(e,t){if(ix(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const cu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GH=e=>!_f(e)&&e!==cu;function KT(){const{caseless:e,skipUndefined:t}=GH(this)&&this||{},n={},s=(r,i)=>{const o=e&&qH(n,i)||i;sv(n[o])&&sv(r)?n[o]=KT(n[o],r):sv(r)?n[o]=KT({},r):Xf(r)?n[o]=r.slice():(!t||!_f(r))&&(n[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&lx(arguments[r],s);return n}const Cre=(e,t,n,{allOwnKeys:s}={})=>(lx(t,(r,i)=>{n&&hr(r)?e[i]=FH(r,n):e[i]=r},{allOwnKeys:s}),e),Sre=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_re=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Are=(e,t,n,s)=>{let r,i,o;const l={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)o=r[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&yL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Tre=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},kre=e=>{if(!e)return null;if(Xf(e))return e;let t=e.length;if(!HH(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ere=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&yL(Uint8Array)),Lre=(e,t)=>{const s=(e&&e[lj]).call(e);let r;for(;(r=s.next())&&!r.done;){const i=r.value;t.call(e,i[0],i[1])}},Pre=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Dre=to("HTMLFormElement"),Ore=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),jI=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Mre=to("RegExp"),WH=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};lx(n,(r,i)=>{let o;(o=t(r,i,e))!==!1&&(s[i]=o||r)}),Object.defineProperties(e,s)},Ire=e=>{WH(e,(t,n)=>{if(hr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(hr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$re=(e,t)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Xf(e)?s(e):s(String(e).split(t)),n},Rre=()=>{},zre=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Fre(e){return!!(e&&hr(e.append)&&e[UH]==="FormData"&&e[lj])}const Ure=e=>{const t=new Array(10),n=(s,r)=>{if(ox(s)){if(t.indexOf(s)>=0)return;if(ix(s))return s;if(!("toJSON"in s)){t[r]=s;const i=Xf(s)?[]:{};return lx(s,(o,l)=>{const c=n(o,r+1);!_f(c)&&(i[l]=c)}),t[r]=void 0,i}}return s};return n(e,0)},Bre=to("AsyncFunction"),Hre=e=>e&&(ox(e)||hr(e))&&hr(e.then)&&hr(e.catch),VH=((e,t)=>e?setImmediate:t?((n,s)=>(cu.addEventListener("message",({source:r,data:i})=>{r===cu&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),cu.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",hr(cu.postMessage)),qre=typeof queueMicrotask<"u"?queueMicrotask.bind(cu):typeof process<"u"&&process.nextTick||VH,Gre=e=>e!=null&&hr(e[lj]),ht={isArray:Xf,isArrayBuffer:BH,isBuffer:ix,isFormData:xre,isArrayBufferView:lre,isString:cre,isNumber:HH,isBoolean:dre,isObject:ox,isPlainObject:sv,isEmptyObject:ure,isReadableStream:bre,isRequest:vre,isResponse:wre,isHeaders:jre,isUndefined:_f,isDate:mre,isFile:fre,isBlob:hre,isRegExp:Mre,isFunction:hr,isStream:pre,isURLSearchParams:yre,isTypedArray:Ere,isFileList:gre,forEach:lx,merge:KT,extend:Cre,trim:Nre,stripBOM:Sre,inherits:_re,toFlatObject:Are,kindOf:cj,kindOfTest:to,endsWith:Tre,toArray:kre,forEachEntry:Lre,matchAll:Pre,isHTMLForm:Dre,hasOwnProperty:jI,hasOwnProp:jI,reduceDescriptors:WH,freezeMethods:Ire,toObjectSet:$re,toCamelCase:Ore,noop:Rre,toFiniteNumber:zre,findKey:qH,global:cu,isContextDefined:GH,isSpecCompliantForm:Fre,toJSONObject:Ure,isAsyncFn:Bre,isThenable:Hre,setImmediate:VH,asap:qre,isIterable:Gre};function oa(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}ht.inherits(oa,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.status}}});const YH=oa.prototype,QH={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{QH[e]={value:e}});Object.defineProperties(oa,QH);Object.defineProperty(YH,"isAxiosError",{value:!0});oa.from=(e,t,n,s,r,i)=>{const o=Object.create(YH);ht.toFlatObject(e,o,function(d){return d!==Error.prototype},u=>u!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return oa.call(o,l,c,n,s,r),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Wre=null;function XT(e){return ht.isPlainObject(e)||ht.isArray(e)}function KH(e){return ht.endsWith(e,"[]")?e.slice(0,-2):e}function NI(e,t,n){return e?e.concat(t).map(function(r,i){return r=KH(r),!n&&i?"["+r+"]":r}).join(n?".":""):t}function Vre(e){return ht.isArray(e)&&!e.some(XT)}const Yre=ht.toFlatObject(ht,{},null,function(t){return/^is[A-Z]/.test(t)});function uj(e,t,n){if(!ht.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ht.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,b){return!ht.isUndefined(b[j])});const s=n.metaTokens,r=n.visitor||d,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(t);if(!ht.isFunction(r))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(ht.isDate(v))return v.toISOString();if(ht.isBoolean(v))return v.toString();if(!c&&ht.isBlob(v))throw new oa("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(v)||ht.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function d(v,j,b){let N=v;if(v&&!b&&typeof v=="object"){if(ht.endsWith(j,"{}"))j=s?j:j.slice(0,-2),v=JSON.stringify(v);else if(ht.isArray(v)&&Vre(v)||(ht.isFileList(v)||ht.endsWith(j,"[]"))&&(N=ht.toArray(v)))return j=KH(j),N.forEach(function(S,_){!(ht.isUndefined(S)||S===null)&&t.append(o===!0?NI([j],_,i):o===null?j:j+"[]",u(S))}),!1}return XT(v)?!0:(t.append(NI(b,j,i),u(v)),!1)}const h=[],p=Object.assign(Yre,{defaultVisitor:d,convertValue:u,isVisitable:XT});function x(v,j){if(!ht.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+j.join("."));h.push(v),ht.forEach(v,function(N,w){(!(ht.isUndefined(N)||N===null)&&r.call(t,N,ht.isString(w)?w.trim():w,j,p))===!0&&x(N,j?j.concat(w):[w])}),h.pop()}}if(!ht.isObject(e))throw new TypeError("data must be an object");return x(e),t}function CI(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function bL(e,t){this._pairs=[],e&&uj(e,this,t)}const XH=bL.prototype;XH.append=function(t,n){this._pairs.push([t,n])};XH.toString=function(t){const n=t?function(s){return t.call(this,s,CI)}:CI;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Qre(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ZH(e,t,n){if(!t)return e;const s=n&&n.encode||Qre;ht.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(t,n):i=ht.isURLSearchParams(t)?t.toString():new bL(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class SI{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ht.forEach(this.handlers,function(s){s!==null&&t(s)})}}const JH={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kre=typeof URLSearchParams<"u"?URLSearchParams:bL,Xre=typeof FormData<"u"?FormData:null,Zre=typeof Blob<"u"?Blob:null,Jre={isBrowser:!0,classes:{URLSearchParams:Kre,FormData:Xre,Blob:Zre},protocols:["http","https","file","blob","url","data"]},vL=typeof window<"u"&&typeof document<"u",ZT=typeof navigator=="object"&&navigator||void 0,eie=vL&&(!ZT||["ReactNative","NativeScript","NS"].indexOf(ZT.product)<0),tie=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",aie=vL&&window.location.href||"http://localhost",nie=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vL,hasStandardBrowserEnv:eie,hasStandardBrowserWebWorkerEnv:tie,navigator:ZT,origin:aie},Symbol.toStringTag,{value:"Module"})),Ms={...nie,...Jre};function sie(e,t){return uj(e,new Ms.classes.URLSearchParams,{visitor:function(n,s,r,i){return Ms.isNode&&ht.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function rie(e){return ht.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function iie(e){const t={},n=Object.keys(e);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],t[i]=e[i];return t}function e9(e){function t(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&ht.isArray(r)?r.length:o,c?(ht.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!ht.isObject(r[o]))&&(r[o]=[]),t(n,s,r[o],i)&&ht.isArray(r[o])&&(r[o]=iie(r[o])),!l)}if(ht.isFormData(e)&&ht.isFunction(e.entries)){const n={};return ht.forEachEntry(e,(s,r)=>{t(rie(s),r,n,0)}),n}return null}function oie(e,t,n){if(ht.isString(e))try{return(t||JSON.parse)(e),ht.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const cx={transitional:JH,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=ht.isObject(t);if(i&&ht.isHTMLForm(t)&&(t=new FormData(t)),ht.isFormData(t))return r?JSON.stringify(e9(t)):t;if(ht.isArrayBuffer(t)||ht.isBuffer(t)||ht.isStream(t)||ht.isFile(t)||ht.isBlob(t)||ht.isReadableStream(t))return t;if(ht.isArrayBufferView(t))return t.buffer;if(ht.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return sie(t,this.formSerializer).toString();if((l=ht.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return uj(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),oie(t)):t}],transformResponse:[function(t){const n=this.transitional||cx.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ht.isResponse(t)||ht.isReadableStream(t))return t;if(t&&ht.isString(t)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?oa.from(l,oa.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ms.classes.FormData,Blob:Ms.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ht.forEach(["delete","get","head","post","put","patch"],e=>{cx.headers[e]={}});const lie=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cie=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||t[n]&&lie[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},_I=Symbol("internals");function mg(e){return e&&String(e).trim().toLowerCase()}function rv(e){return e===!1||e==null?e:ht.isArray(e)?e.map(rv):String(e)}function die(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const uie=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ZS(e,t,n,s,r){if(ht.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!ht.isString(t)){if(ht.isString(s))return t.indexOf(s)!==-1;if(ht.isRegExp(s))return s.test(t)}}function mie(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function fie(e,t){const n=ht.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,i,o){return this[s].call(this,t,r,i,o)},configurable:!0})})}let gr=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function i(l,c,u){const d=mg(c);if(!d)throw new Error("header name must be a non-empty string");const h=ht.findKey(r,d);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||c]=rv(l))}const o=(l,c)=>ht.forEach(l,(u,d)=>i(u,d,c));if(ht.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ht.isString(t)&&(t=t.trim())&&!uie(t))o(cie(t),n);else if(ht.isObject(t)&&ht.isIterable(t)){let l={},c,u;for(const d of t){if(!ht.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?ht.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=mg(t),t){const s=ht.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return die(r);if(ht.isFunction(n))return n.call(this,r,s);if(ht.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=mg(t),t){const s=ht.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||ZS(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function i(o){if(o=mg(o),o){const l=ht.findKey(s,o);l&&(!n||ZS(s,s[l],l,n))&&(delete s[l],r=!0)}}return ht.isArray(t)?t.forEach(i):i(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!t||ZS(this,this[i],i,t,!0))&&(delete this[i],r=!0)}return r}normalize(t){const n=this,s={};return ht.forEach(this,(r,i)=>{const o=ht.findKey(s,i);if(o){n[o]=rv(r),delete n[i];return}const l=t?mie(i):String(i).trim();l!==i&&delete n[i],n[l]=rv(r),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ht.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&ht.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[_I]=this[_I]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=mg(o);s[l]||(fie(r,o),s[l]=!0)}return ht.isArray(t)?t.forEach(i):i(t),this}};gr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.reduceDescriptors(gr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});ht.freezeMethods(gr);function JS(e,t){const n=this||cx,s=t||n,r=gr.from(s.headers);let i=s.data;return ht.forEach(e,function(l){i=l.call(n,i,r.normalize(),t?t.status:void 0)}),r.normalize(),i}function t9(e){return!!(e&&e.__CANCEL__)}function Zf(e,t,n){oa.call(this,e??"canceled",oa.ERR_CANCELED,t,n),this.name="CanceledError"}ht.inherits(Zf,oa,{__CANCEL__:!0});function a9(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new oa("Request failed with status code "+n.status,[oa.ERR_BAD_REQUEST,oa.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function hie(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gie(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=s[i];o||(o=u),n[r]=c,s[r]=u;let h=i,p=0;for(;h!==r;)p+=n[h++],h=h%e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),u-o<t)return;const x=d&&u-d;return x?Math.round(p*1e3/x):void 0}}function pie(e,t){let n=0,s=1e3/t,r,i;const o=(u,d=Date.now())=>{n=d,r=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),h=d-n;h>=s?o(u,d):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const Sv=(e,t,n=3)=>{let s=0;const r=gie(50,250);return pie(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),d=o<=l;s=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},n)},AI=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},TI=e=>(...t)=>ht.asap(()=>e(...t)),xie=Ms.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ms.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ms.origin),Ms.navigator&&/(msie|trident)/i.test(Ms.navigator.userAgent)):()=>!0,yie=Ms.hasStandardBrowserEnv?{write(e,t,n,s,r,i){const o=[e+"="+encodeURIComponent(t)];ht.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),ht.isString(s)&&o.push("path="+s),ht.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bie(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function vie(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function n9(e,t,n){let s=!bie(t);return e&&(s||n==!1)?vie(e,t):t}const kI=e=>e instanceof gr?{...e}:e;function ku(e,t){t=t||{};const n={};function s(u,d,h,p){return ht.isPlainObject(u)&&ht.isPlainObject(d)?ht.merge.call({caseless:p},u,d):ht.isPlainObject(d)?ht.merge({},d):ht.isArray(d)?d.slice():d}function r(u,d,h,p){if(ht.isUndefined(d)){if(!ht.isUndefined(u))return s(void 0,u,h,p)}else return s(u,d,h,p)}function i(u,d){if(!ht.isUndefined(d))return s(void 0,d)}function o(u,d){if(ht.isUndefined(d)){if(!ht.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function l(u,d,h){if(h in t)return s(u,d);if(h in e)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,h)=>r(kI(u),kI(d),h,!0)};return ht.forEach(Object.keys({...e,...t}),function(d){const h=c[d]||r,p=h(e[d],t[d],d);ht.isUndefined(p)&&h!==l||(n[d]=p)}),n}const s9=e=>{const t=ku({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=gr.from(o),t.url=ZH(n9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ht.isFormData(n)){if(Ms.hasStandardBrowserEnv||Ms.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ht.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,h])=>{u.includes(d.toLowerCase())&&o.set(d,h)})}}if(Ms.hasStandardBrowserEnv&&(s&&ht.isFunction(s)&&(s=s(t)),s||s!==!1&&xie(t.url))){const c=r&&i&&yie.read(i);c&&o.set(r,c)}return t},wie=typeof XMLHttpRequest<"u",jie=wie&&function(e){return new Promise(function(n,s){const r=s9(e);let i=r.data;const o=gr.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,d,h,p,x,v;function j(){x&&x(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function N(){if(!b)return;const S=gr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:S,config:e,request:b};a9(function(A){n(A),j()},function(A){s(A),j()},k),b=null}"onloadend"in b?b.onloadend=N:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(N)},b.onabort=function(){b&&(s(new oa("Request aborted",oa.ECONNABORTED,e,b)),b=null)},b.onerror=function(_){const k=_&&_.message?_.message:"Network Error",T=new oa(k,oa.ERR_NETWORK,e,b);T.event=_||null,s(T),b=null},b.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||JH;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),s(new oa(_,k.clarifyTimeoutError?oa.ETIMEDOUT:oa.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&ht.forEach(o.toJSON(),function(_,k){b.setRequestHeader(k,_)}),ht.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),l&&l!=="json"&&(b.responseType=r.responseType),u&&([p,v]=Sv(u,!0),b.addEventListener("progress",p)),c&&b.upload&&([h,x]=Sv(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(d=S=>{b&&(s(!S||S.type?new Zf(null,e,b):S),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const w=hie(r.url);if(w&&Ms.protocols.indexOf(w)===-1){s(new oa("Unsupported protocol "+w+":",oa.ERR_BAD_REQUEST,e));return}b.send(i||null)})},Nie=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const d=u instanceof Error?u:this.reason;s.abort(d instanceof oa?d:new Zf(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new oa(`timeout ${t} of ms exceeded`,oa.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ht.asap(l),c}},Cie=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Sie=async function*(e,t){for await(const n of _ie(e))yield*Cie(n,t)},_ie=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},EI=(e,t,n,s)=>{const r=Sie(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await r.next();if(u){l(),c.close();return}let h=d.byteLength;if(n){let p=i+=h;n(p)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},LI=64*1024,{isFunction:$y}=ht,Aie=(({Request:e,Response:t})=>({Request:e,Response:t}))(ht.global),{ReadableStream:PI,TextEncoder:DI}=ht.global,OI=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Tie=e=>{e=ht.merge.call({skipUndefined:!0},Aie,e);const{fetch:t,Request:n,Response:s}=e,r=t?$y(t):typeof fetch=="function",i=$y(n),o=$y(s);if(!r)return!1;const l=r&&$y(PI),c=r&&(typeof DI=="function"?(v=>j=>v.encode(j))(new DI):async v=>new Uint8Array(await new n(v).arrayBuffer())),u=i&&l&&OI(()=>{let v=!1;const j=new n(Ms.origin,{body:new PI,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!j}),d=o&&l&&OI(()=>ht.isReadableStream(new s("").body)),h={stream:d&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(j,b)=>{let N=j&&j[v];if(N)return N.call(j);throw new oa(`Response type '${v}' is not supported`,oa.ERR_NOT_SUPPORT,b)})});const p=async v=>{if(v==null)return 0;if(ht.isBlob(v))return v.size;if(ht.isSpecCompliantForm(v))return(await new n(Ms.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ht.isArrayBufferView(v)||ht.isArrayBuffer(v))return v.byteLength;if(ht.isURLSearchParams(v)&&(v=v+""),ht.isString(v))return(await c(v)).byteLength},x=async(v,j)=>{const b=ht.toFiniteNumber(v.getContentLength());return b??p(j)};return async v=>{let{url:j,method:b,data:N,signal:w,cancelToken:S,timeout:_,onDownloadProgress:k,onUploadProgress:T,responseType:A,headers:E,withCredentials:M="same-origin",fetchOptions:O}=s9(v),I=t||fetch;A=A?(A+"").toLowerCase():"text";let D=Nie([w,S&&S.toAbortSignal()],_),H=null;const W=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let z;try{if(T&&u&&b!=="get"&&b!=="head"&&(z=await x(E,N))!==0){let Z=new n(j,{method:"POST",body:N,duplex:"half"}),ne;if(ht.isFormData(N)&&(ne=Z.headers.get("content-type"))&&E.setContentType(ne),Z.body){const[pe,Ne]=AI(z,Sv(TI(T)));N=EI(Z.body,LI,pe,Ne)}}ht.isString(M)||(M=M?"include":"omit");const Q=i&&"credentials"in n.prototype,J={...O,signal:D,method:b.toUpperCase(),headers:E.normalize().toJSON(),body:N,duplex:"half",credentials:Q?M:void 0};H=i&&new n(j,J);let Y=await(i?I(H,O):I(j,J));const re=d&&(A==="stream"||A==="response");if(d&&(k||re&&W)){const Z={};["status","statusText","headers"].forEach(de=>{Z[de]=Y[de]});const ne=ht.toFiniteNumber(Y.headers.get("content-length")),[pe,Ne]=k&&AI(ne,Sv(TI(k),!0))||[];Y=new s(EI(Y.body,LI,pe,()=>{Ne&&Ne(),W&&W()}),Z)}A=A||"text";let we=await h[ht.findKey(h,A)||"text"](Y,v);return!re&&W&&W(),await new Promise((Z,ne)=>{a9(Z,ne,{data:we,headers:gr.from(Y.headers),status:Y.status,statusText:Y.statusText,config:v,request:H})})}catch(Q){throw W&&W(),Q&&Q.name==="TypeError"&&/Load failed|fetch/i.test(Q.message)?Object.assign(new oa("Network Error",oa.ERR_NETWORK,v,H),{cause:Q.cause||Q}):oa.from(Q,Q&&Q.code,v,H)}}},kie=new Map,r9=e=>{let t=e?e.env:{};const{fetch:n,Request:s,Response:r}=t,i=[s,r,n];let o=i.length,l=o,c,u,d=kie;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:Tie(t)),d=u;return u};r9();const JT={http:Wre,xhr:jie,fetch:{get:r9}};ht.forEach(JT,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const MI=e=>`- ${e}`,Eie=e=>ht.isFunction(e)||e===null||e===!1,i9={getAdapter:(e,t)=>{e=ht.isArray(e)?e:[e];const{length:n}=e;let s,r;const i={};for(let o=0;o<n;o++){s=e[o];let l;if(r=s,!Eie(s)&&(r=JT[(l=String(s)).toLowerCase()],r===void 0))throw new oa(`Unknown adapter '${l}'`);if(r&&(ht.isFunction(r)||(r=r.get(t))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(MI).join(`
`):" "+MI(o[0]):"as no adapter specified";throw new oa("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:JT};function e2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zf(null,e)}function II(e){return e2(e),e.headers=gr.from(e.headers),e.data=JS.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),i9.getAdapter(e.adapter||cx.adapter,e)(e).then(function(s){return e2(e),s.data=JS.call(e,e.transformResponse,s),s.headers=gr.from(s.headers),s},function(s){return t9(s)||(e2(e),s&&s.response&&(s.response.data=JS.call(e,e.transformResponse,s.response),s.response.headers=gr.from(s.response.headers))),Promise.reject(s)})}const o9="1.12.2",mj={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{mj[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const $I={};mj.transitional=function(t,n,s){function r(i,o){return"[Axios v"+o9+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new oa(r(o," has been removed"+(n?" in "+n:"")),oa.ERR_DEPRECATED);return n&&!$I[o]&&($I[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};mj.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Lie(e,t,n){if(typeof e!="object")throw new oa("options must be an object",oa.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const i=s[r],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new oa("option "+i+" must be "+c,oa.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oa("Unknown option "+i,oa.ERR_BAD_OPTION)}}const iv={assertOptions:Lie,validators:mj},oo=iv.validators;let yu=class{constructor(t){this.defaults=t||{},this.interceptors={request:new SI,response:new SI}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ku(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&iv.assertOptions(s,{silentJSONParsing:oo.transitional(oo.boolean),forcedJSONParsing:oo.transitional(oo.boolean),clarifyTimeoutError:oo.transitional(oo.boolean)},!1),r!=null&&(ht.isFunction(r)?n.paramsSerializer={serialize:r}:iv.assertOptions(r,{encode:oo.function,serialize:oo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),iv.assertOptions(n,{baseUrl:oo.spelling("baseURL"),withXsrfToken:oo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ht.merge(i.common,i[n.method]);i&&ht.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=gr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(n)===!1||(c=c&&j.synchronous,l.unshift(j.fulfilled,j.rejected))});const u=[];this.interceptors.response.forEach(function(j){u.push(j.fulfilled,j.rejected)});let d,h=0,p;if(!c){const v=[II.bind(this),void 0];for(v.unshift(...l),v.push(...u),p=v.length,d=Promise.resolve(n);h<p;)d=d.then(v[h++],v[h++]);return d}p=l.length;let x=n;for(;h<p;){const v=l[h++],j=l[h++];try{x=v(x)}catch(b){j.call(this,b);break}}try{d=II.call(this,x)}catch(v){return Promise.reject(v)}for(h=0,p=u.length;h<p;)d=d.then(u[h++],u[h++]);return d}getUri(t){t=ku(this.defaults,t);const n=n9(t.baseURL,t.url,t.allowAbsoluteUrls);return ZH(n,t.params,t.paramsSerializer)}};ht.forEach(["delete","get","head","options"],function(t){yu.prototype[t]=function(n,s){return this.request(ku(s||{},{method:t,url:n,data:(s||{}).data}))}});ht.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,l){return this.request(ku(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}yu.prototype[t]=n(),yu.prototype[t+"Form"]=n(!0)});let Pie=class l9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Zf(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new l9(function(r){t=r}),cancel:t}}};function Die(e){return function(n){return e.apply(null,n)}}function Oie(e){return ht.isObject(e)&&e.isAxiosError===!0}const ek={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ek).forEach(([e,t])=>{ek[t]=e});function c9(e){const t=new yu(e),n=FH(yu.prototype.request,t);return ht.extend(n,yu.prototype,t,{allOwnKeys:!0}),ht.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return c9(ku(e,r))},n}const Mn=c9(cx);Mn.Axios=yu;Mn.CanceledError=Zf;Mn.CancelToken=Pie;Mn.isCancel=t9;Mn.VERSION=o9;Mn.toFormData=uj;Mn.AxiosError=oa;Mn.Cancel=Mn.CanceledError;Mn.all=function(t){return Promise.all(t)};Mn.spread=Die;Mn.isAxiosError=Oie;Mn.mergeConfig=ku;Mn.AxiosHeaders=gr;Mn.formToJSON=e=>e9(ht.isHTMLForm(e)?new FormData(e):e);Mn.getAdapter=i9.getAdapter;Mn.HttpStatusCode=ek;Mn.default=Mn;const{Axios:CVe,AxiosError:SVe,CanceledError:_Ve,isCancel:AVe,CancelToken:TVe,VERSION:kVe,all:EVe,Cancel:LVe,isAxiosError:PVe,spread:DVe,toFormData:OVe,AxiosHeaders:MVe,HttpStatusCode:IVe,formToJSON:$Ve,getAdapter:RVe,mergeConfig:zVe}=Mn,Mie="https://crm.sari-sari.com",se=Mn.create({baseURL:`${Mie}/api`,withCredentials:!0,headers:{"Content-Type":"application/json"}});se.interceptors.request.use(e=>(console.log(` [${e.method?.toUpperCase()}] ${e.url}`),e),e=>Promise.reject(e));se.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn(" Unauthorized  possible expired token or not logged in."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)));const Iie="isLoggedIn",Ry="userRole",Ks=()=>{const[e,t]=f.useState(!!localStorage.getItem(Ry)),[n,s]=f.useState(localStorage.getItem(Ry)||""),r=Tt();f.useEffect(()=>{const u=localStorage.getItem(Ry);u?(t(!0),s(u)):o()},[]);const i=u=>{localStorage.setItem(Ry,u.role),localStorage.setItem(Iie,!0),t(!0),s(u.role)},o=()=>{localStorage.clear(),t(!1),s("")};return{isLoggedIn:e,logout:async()=>{try{await se.post("/auth/logout")}catch(u){console.log("Failed to logout from server:",u)}o(),r("/")},userRole:n,setUserRole:s,login:u=>{i(u),u.role==="CEO"||u.role==="Admin"?r("/admin"):u.role==="Manager"?r("/manager/dashboard"):r("/")}}},gl=({children:e,requiredRole:t})=>{const{isLoggedIn:n,userRole:s}=Ks();if(!n)return a.jsx(di,{to:"/",replace:!0});if(!t)return s.toUpperCase()==="ADMIN"||s.toUpperCase()==="CEO"?a.jsx(di,{to:"/admin/dashboard",replace:!0}):s==="GROUP MANAGER"?a.jsx(di,{to:"/group-manager/dashboard",replace:!0}):s==="MANAGER"?a.jsx(di,{to:"/manager/dashboard",replace:!0}):s==="SALES"?a.jsx(di,{to:"/sales/dashboard",replace:!0}):a.jsx(di,{to:"/",replace:!0});const r=s.toLowerCase(),i=t.toLowerCase();return r!==i?a.jsx(di,{to:"/",replace:!0}):e};var d9={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},RI=bt.createContext&&bt.createContext(d9),$ie=["attr","size","title"];function Rie(e,t){if(e==null)return{};var n=zie(e,t),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)s=i[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zie(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_v.apply(this,arguments)}function zI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Av(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(n),!0).forEach(function(s){Fie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zI(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fie(e,t,n){return t=Uie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uie(e){var t=Bie(e,"string");return typeof t=="symbol"?t:t+""}function Bie(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u9(e){return e&&e.map((t,n)=>bt.createElement(t.tag,Av({key:n},t.attr),u9(t.child)))}function Pt(e){return t=>bt.createElement(Hie,_v({attr:Av({},e.attr)},t),u9(e.child))}function Hie(e){var t=n=>{var{attr:s,size:r,title:i}=e,o=Rie(e,$ie),l=r||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),bt.createElement("svg",_v({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Av(Av({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&bt.createElement("title",null,i),e.children)};return RI!==void 0?bt.createElement(RI.Consumer,null,n=>t(n)):t(d9)}function Yi(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(e)}function Qu(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(e)}function Zt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"21 8 21 21 3 21 3 8"},child:[]},{tag:"rect",attr:{x:"1",y:"3",width:"22",height:"5"},child:[]},{tag:"line",attr:{x1:"10",y1:"12",x2:"14",y2:"12"},child:[]}]})(e)}function fj(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"},child:[]},{tag:"polyline",attr:{points:"17 7 17 17 7 17"},child:[]}]})(e)}function tk(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"polyline",attr:{points:"19 12 12 19 5 12"},child:[]}]})(e)}function qie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(e)}function hj(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 5 19 12 12 19"},child:[]}]})(e)}function dx(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"},child:[]},{tag:"polyline",attr:{points:"7 7 17 7 17 17"},child:[]}]})(e)}function Gie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"},child:[]},{tag:"polyline",attr:{points:"5 12 12 5 19 12"},child:[]}]})(e)}function t2(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"},child:[]},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"},child:[]}]})(e)}function Wie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(e)}function ux(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(e)}function Vie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(e)}function gj(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"},child:[]}]})(e)}function na(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"},child:[]}]})(e)}function Dt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(e)}function m9(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(e)}function Qa(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(e)}function Yt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(e)}function wL(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(e)}function Lt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(e)}function Yie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(e)}function Ot(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(e)}function Qie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(e)}function ks(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"},child:[]},{tag:"rect",attr:{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"},child:[]}]})(e)}function Vs(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(e)}function f9(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(e)}function Wo(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function hn(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(e)}function gn(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(e)}function Eu(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},child:[]},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"},child:[]}]})(e)}function Lu(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function ra(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(e)}function Kie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(e)}function zy(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 18v-6a9 9 0 0 1 18 0v6"},child:[]},{tag:"path",attr:{d:"M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"},child:[]}]})(e)}function Xie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"path",attr:{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"},child:[]},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"},child:[]}]})(e)}function mx(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(e)}function FI(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"8.5",r:"1.5"},child:[]},{tag:"polyline",attr:{points:"21 15 16 10 5 21"},child:[]}]})(e)}function h9(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(e)}function jL(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"3",y1:"9",x2:"21",y2:"9"},child:[]},{tag:"line",attr:{x1:"9",y1:"21",x2:"9",y2:"9"},child:[]}]})(e)}function ko(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(e)}function sn(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(e)}function Zie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function Jf(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(e)}function UI(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(e)}function Jie(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"5 9 2 12 5 15"},child:[]},{tag:"polyline",attr:{points:"9 5 12 2 15 5"},child:[]},{tag:"polyline",attr:{points:"15 19 12 22 9 19"},child:[]},{tag:"polyline",attr:{points:"19 9 22 12 19 15"},child:[]},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"22"},child:[]}]})(e)}function eoe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"},child:[]},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"},child:[]},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"},child:[]}]})(e)}function zs(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function Mt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"},child:[]}]})(e)}function BI(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"},child:[]},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"},child:[]}]})(e)}function ta(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(e)}function bi(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(e)}function NL(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(e)}function Kt(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(e)}function ak(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(e)}function CL(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(e)}function pj(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"},child:[]}]})(e)}function dd(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"},child:[]}]})(e)}function Jl(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},child:[]}]})(e)}function mr(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(e)}function va(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(e)}function a2(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"},child:[]},{tag:"polyline",attr:{points:"17 18 23 18 23 12"},child:[]}]})(e)}function od(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"},child:[]},{tag:"polyline",attr:{points:"17 6 23 6 23 12"},child:[]}]})(e)}function toe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(e)}function Ro(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"polyline",attr:{points:"17 11 19 13 23 9"},child:[]}]})(e)}function Xa(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(e)}function zo(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"18",y1:"8",x2:"23",y2:"13"},child:[]},{tag:"line",attr:{x1:"23",y1:"8",x2:"18",y2:"13"},child:[]}]})(e)}function sa(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function rn(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function Fs(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(e)}function ea(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(e)}const g9=()=>{const[e,t]=f.useState(!1),n=f.useRef(null);return f.useEffect(()=>{const s=r=>{n.current&&!n.current.contains(r.target)&&t(!1)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]),f.useEffect(()=>{const s=()=>{e&&t(!1)};return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e]),a.jsx("header",{className:"sticky top-0 z-50 bg-tertiary shadow-xl border-b border-tertiary",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("span",{className:"text-2xl font-black text-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:" CRM"})]})}),a.jsxs("nav",{className:"hidden md:flex space-x-8 text-white font-medium",children:[a.jsx("a",{href:"#platform",className:"hover:text-accent transition duration-150",children:"Platform"}),a.jsx("a",{href:"#pricing",className:"hover:text-accent transition duration-150",children:"Pricing"})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[a.jsx("a",{href:"/login",className:"text-sm font-medium text-white hover:text-accent transition duration-500",children:"Log In"}),a.jsx("a",{href:"/signup",className:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-full shadow-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Start for Free"})]}),a.jsxs("div",{className:"flex sm:hidden items-center relative",ref:n,children:[a.jsx("button",{onClick:()=>t(!e),children:e?a.jsx(ea,{className:"w-6 h-6 text-white"}):a.jsx(Jf,{className:"w-6 h-6 text-white"})}),e&&a.jsx("div",{className:"absolute top-11 right-0 mt-2 w-48 border border-tertiary rounded-lg shadow-lg z-50 bg-primary",children:a.jsxs("nav",{className:"flex flex-col",children:[a.jsx("a",{href:"/login",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-accent hover:text-secondary transition rounded-t-lg",children:"Log In"}),a.jsx("a",{href:"/signup",className:"block px-4 py-2 text-center text-tertiary bg-white hover:bg-secondary hover:text-white transition rounded-b-lg",children:"Start for Free"})]})})]})]})})})};function aoe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m12 14 4-4"},child:[]},{tag:"path",attr:{d:"M3.34 19a10 10 0 1 1 17.32 0"},child:[]}]})(e)}function ec(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"},child:[]},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"},child:[]}]})(e)}function noe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z"},child:[]}]})(e)}function xj(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"10",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M10.3 15H7a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"17",cy:"17",r:"3"},child:[]},{tag:"path",attr:{d:"m21 21-1.9-1.9"},child:[]}]})(e)}function soe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M22 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(e)}function roe(e){return Pt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z"},child:[]}]})(e)}const ioe=()=>{const e=["/image/crm1.png","/image/crm2.png","/image/crm3.png","/image/crm4.png","/image/crm5.png","/image/crm7.png","/image/crm6.png"],[t,n]=f.useState(0),[s,r]=f.useState(!1),i=f.useRef(null),[o,l]=f.useState(0),[c,u]=f.useState(0);f.useEffect(()=>(s||(i.current=setInterval(()=>{n(x=>(x+1)%e.length)},4e3)),()=>clearInterval(i.current)),[s,e.length]);const d=x=>l(x.targetTouches[0].clientX),h=x=>u(x.targetTouches[0].clientX),p=()=>{o-c>75&&n(x=>(x+1)%e.length),c-o>75&&n(x=>(x-1+e.length)%e.length)};return a.jsx("section",{className:"bg-paper-white text-white py-15 lg:py-32",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"lg:text-left text-center",children:[a.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-lg text-secondary mb-6 leading-tight",children:["Sari-Sari"," ",a.jsx("span",{className:"text-accent font-extrabold",children:"CRM"})]}),a.jsx("p",{className:"max-w-xl mx-auto lg:mx-0 text-lg sm:text-xl text-secondary mb-10 italic",children:"The CRM that keeps your customers organized and your sales growing."}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-center lg:justify-start space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary font-semibold hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Get Started Now"}),a.jsx("a",{href:"#",className:"px-10 py-3 rounded-lg border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-500",children:"Watch Demo (2 min)"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"hidden lg:block absolute inset-0 -top-10 -bottom-10 right-4 bg-accent rounded-3xl transform rotate-3 z-0"}),a.jsxs("div",{className:"relative z-10 overflow-hidden rounded-xl shadow-2xl border-4 border-gray-800 h-[400px] bg-gray-900 flex items-center justify-center",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onTouchStart:d,onTouchMove:h,onTouchEnd:p,children:[e.map((x,v)=>a.jsx("img",{src:x,alt:`Slide ${v+1}`,className:`absolute inset-0 w-full h-full object-contain bg-gray-50 transition-opacity duration-1000 ease-in-out ${v===t?"opacity-100":"opacity-0"}`},v)),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:e.map((x,v)=>a.jsx("button",{onClick:()=>n(v),className:`w-3 h-3 rounded-full transition-all ${v===t?"bg-accent":"bg-gray-400 opacity-50"}`},v))})]})]})]})})},ooe=({Icon:e,title:t,description:n})=>a.jsxs("div",{className:"bg-gray-800 p-8 rounded-2xl border border-gray-700 hover:border-accent transition transform hover:-translate-y-1",children:[a.jsx("div",{className:"w-14 h-14 flex items-center justify-center rounded-full text-accent mb-6",children:a.jsx(e,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-3",children:t}),a.jsx("p",{className:"text-gray-400",children:n})]}),loe=()=>{const e=[{Icon:roe,title:"Automated Workflows",description:"Automate tasks and focus on engagement."},{Icon:aoe,title:"Predictive Analytics",description:"Harness AI to forecast sales and risks."},{Icon:soe,title:"Unified Customer View",description:"360-degree profile for every customer."},{Icon:noe,title:"Multi-Channel Support",description:"Engage across email, chat, and more."}];return a.jsx("section",{id:"platform",className:"py-20 bg-gray-900 border-t border-gray-800",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-white mb-4",children:"Engineered for Enterprise Scale"}),a.jsx("p",{className:"text-xl text-gray-400 mb-16",children:"Pillows is the neural network powering your customer relationships."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((t,n)=>a.jsx(ooe,{...t},n))})]})})},coe=()=>a.jsxs("section",{id:"pricing",className:"py-20 bg-paper-white border-t border-gray-800 text-center",children:[a.jsx("h2",{className:"text-4xl sm:text-5xl font-bold text-secondary mb-4",children:"Start Building Your Future, Today."}),a.jsx("p",{className:"text-xl text-gray-400 mb-10",children:"Join thousands leveraging Sari-Sari CRM's intelligent platform."}),a.jsx("a",{href:"/signup",className:"px-12 py-4 text-lg font-bold rounded-xl shadow-2xl bg-accent border border-secondary text-white bg-secondary hover:bg-accent hover:text-secondary hover:border-accent transition-all duration-400",children:"Start 15-Day Free Trial"})]}),doe=()=>a.jsx("footer",{className:"bg-secondary text-white border-t py-10",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-5 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xl font-white",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsx("p",{className:"text-sm text-white mt-4",children:" 2026 Sari-Sari CRM"})]}),[{title:"Resources",links:["Security","Support"],href:"/resources"},{title:"Legal",links:["Terms","Privacy","SLA","Compliance"],href:"/legal"}].map((e,t)=>a.jsxs("div",{children:[a.jsx("h5",{className:"text-md font-semibold mb-4 text-accent",children:e.title}),a.jsx("ul",{className:"space-y-2 text-sm text-white",children:e.links.map((n,s)=>a.jsx("li",{children:a.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"hover:text-accent",children:n})},s))})]},t))]})}),uoe=()=>(f.useEffect(()=>{document.title="Sari-Sari CRM"},[]),a.jsxs("main",{className:"font-inter",children:[a.jsx(g9,{}),a.jsx(ioe,{}),a.jsx(loe,{}),a.jsx(coe,{}),a.jsx(doe,{})]}));function Ku(e){return Pt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"},child:[]}]})(e)}function Za(e){return Pt({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(e)}function jd(e){return Pt({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},child:[]}]})(e)}class zg extends Error{}zg.prototype.name="InvalidTokenError";function moe(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let s=n.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function foe(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return moe(t)}catch{return atob(t)}}function p9(e,t){if(typeof e!="string")throw new zg("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,s=e.split(".")[n];if(typeof s!="string")throw new zg(`Invalid token specified: missing part #${n+1}`);let r;try{r=foe(s)}catch(i){throw new zg(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(r)}catch(i){throw new zg(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}function Vn(e,t,n=void 0){const s={};for(const r in e){const i=e[r];let o="",l=!0;for(let c=0;c<i.length;c+=1){const u=i[c];u&&(o+=(l===!0?"":" ")+t(u),l=!1,n&&n[u]&&(o+=" "+n[u]))}s[r]=o}return s}function Pu(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(s=>n.searchParams.append("args[]",s)),`Minified MUI error #${e}; visit ${n} for the full message.`}function Wa(e){if(typeof e!="string")throw new Error(Pu(7));return e.charAt(0).toUpperCase()+e.slice(1)}var n2={exports:{}},Ha={};var HI;function hoe(){if(HI)return Ha;HI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function v(j){if(typeof j=="object"&&j!==null){var b=j.$$typeof;switch(b){case e:switch(j=j.type,j){case n:case r:case s:case c:case u:case p:return j;default:switch(j=j&&j.$$typeof,j){case o:case l:case h:case d:return j;case i:return j;default:return b}}case t:return b}}}return Ha.ContextConsumer=i,Ha.ContextProvider=o,Ha.Element=e,Ha.ForwardRef=l,Ha.Fragment=n,Ha.Lazy=h,Ha.Memo=d,Ha.Portal=t,Ha.Profiler=r,Ha.StrictMode=s,Ha.Suspense=c,Ha.SuspenseList=u,Ha.isContextConsumer=function(j){return v(j)===i},Ha.isContextProvider=function(j){return v(j)===o},Ha.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Ha.isForwardRef=function(j){return v(j)===l},Ha.isFragment=function(j){return v(j)===n},Ha.isLazy=function(j){return v(j)===h},Ha.isMemo=function(j){return v(j)===d},Ha.isPortal=function(j){return v(j)===t},Ha.isProfiler=function(j){return v(j)===r},Ha.isStrictMode=function(j){return v(j)===s},Ha.isSuspense=function(j){return v(j)===c},Ha.isSuspenseList=function(j){return v(j)===u},Ha.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===n||j===r||j===s||j===c||j===u||typeof j=="object"&&j!==null&&(j.$$typeof===h||j.$$typeof===d||j.$$typeof===o||j.$$typeof===i||j.$$typeof===l||j.$$typeof===x||j.getModuleId!==void 0)},Ha.typeOf=v,Ha}var qI;function goe(){return qI||(qI=1,n2.exports=hoe()),n2.exports}var SL=goe();function So(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function x9(e){if(f.isValidElement(e)||SL.isValidElementType(e)||!So(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=x9(e[n])}),t}function Rr(e,t,n={clone:!0}){const s=n.clone?{...e}:e;return So(e)&&So(t)&&Object.keys(t).forEach(r=>{f.isValidElement(t[r])||SL.isValidElementType(t[r])?s[r]=t[r]:So(t[r])&&Object.prototype.hasOwnProperty.call(e,r)&&So(e[r])?s[r]=Rr(e[r],t[r],n):n.clone?s[r]=So(t[r])?x9(t[r]):t[r]:s[r]=t[r]}),s}function ep(e,t){return t?Rr(e,t,{clone:!1}):e}function GI(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(s=>s.startsWith("@container")).sort((s,r)=>{const i=/min-width:\s*([0-9.]+)/;return+(s.match(i)?.[1]||0)-+(r.match(i)?.[1]||0)});return n.length?n.reduce((s,r)=>{const i=t[r];return delete s[r],s[r]=i,s},{...t}):t}function poe(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function xoe(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,s,r]=n,i=Number.isNaN(+s)?s||0:+s;return e.containerQueries(r).up(i)}function yoe(e){const t=(i,o)=>i.replace("@media",o?`@container ${o}`:"@container");function n(i,o){i.up=(...l)=>t(e.breakpoints.up(...l),o),i.down=(...l)=>t(e.breakpoints.down(...l),o),i.between=(...l)=>t(e.breakpoints.between(...l),o),i.only=(...l)=>t(e.breakpoints.only(...l),o),i.not=(...l)=>{const c=t(e.breakpoints.not(...l),o);return c.includes("not all and")?c.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):c}}const s={},r=i=>(n(s,i),s);return n(r),{...e,containerQueries:r}}const yj={xs:0,sm:600,md:900,lg:1200,xl:1536},WI={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${yj[e]}px)`},boe={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:yj[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Fl(e,t,n){const s=e.theme||{};if(Array.isArray(t)){const i=s.breakpoints||WI;return t.reduce((o,l,c)=>(o[i.up(i.keys[c])]=n(t[c]),o),{})}if(typeof t=="object"){const i=s.breakpoints||WI;return Object.keys(t).reduce((o,l)=>{if(poe(i.keys,l)){const c=xoe(s.containerQueries?s:boe,l);c&&(o[c]=n(t[l],l))}else if(Object.keys(i.values||yj).includes(l)){const c=i.up(l);o[c]=n(t[l],l)}else{const c=l;o[c]=t[c]}return o},{})}return n(t)}function voe(e={}){return e.keys?.reduce((n,s)=>{const r=e.up(s);return n[r]={},n},{})||{}}function VI(e,t){return e.reduce((n,s)=>{const r=n[s];return(!r||Object.keys(r).length===0)&&delete n[s],n},t)}function bj(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const s=`vars.${t}`.split(".").reduce((r,i)=>r&&r[i]?r[i]:null,e);if(s!=null)return s}return t.split(".").reduce((s,r)=>s&&s[r]!=null?s[r]:null,e)}function Tv(e,t,n,s=n){let r;return typeof e=="function"?r=e(n):Array.isArray(e)?r=e[n]||s:r=bj(e,n)||s,t&&(r=t(r,s,e)),r}function In(e){const{prop:t,cssProperty:n=e.prop,themeKey:s,transform:r}=e,i=o=>{if(o[t]==null)return null;const l=o[t],c=o.theme,u=bj(c,s)||{};return Fl(o,l,h=>{let p=Tv(u,r,h);return h===p&&typeof h=="string"&&(p=Tv(u,r,`${t}${h==="default"?"":Wa(h)}`,h)),n===!1?p:{[n]:p}})};return i.propTypes={},i.filterProps=[t],i}function woe(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const joe={m:"margin",p:"padding"},Noe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},YI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Coe=woe(e=>{if(e.length>2)if(YI[e])e=YI[e];else return[e];const[t,n]=e.split(""),s=joe[t],r=Noe[n]||"";return Array.isArray(r)?r.map(i=>s+i):[s+r]}),_L=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],AL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[..._L,...AL];function fx(e,t,n,s){const r=bj(e,t,!0)??n;return typeof r=="number"||typeof r=="string"?i=>typeof i=="string"?i:typeof r=="string"?r.startsWith("var(")&&i===0?0:r.startsWith("var(")&&i===1?r:`calc(${i} * ${r})`:r*i:Array.isArray(r)?i=>{if(typeof i=="string")return i;const o=Math.abs(i),l=r[o];return i>=0?l:typeof l=="number"?-l:typeof l=="string"&&l.startsWith("var(")?`calc(-1 * ${l})`:`-${l}`}:typeof r=="function"?r:()=>{}}function TL(e){return fx(e,"spacing",8)}function hx(e,t){return typeof t=="string"||t==null?t:e(t)}function Soe(e,t){return n=>e.reduce((s,r)=>(s[r]=hx(t,n),s),{})}function _oe(e,t,n,s){if(!t.includes(n))return null;const r=Coe(n),i=Soe(r,s),o=e[n];return Fl(e,o,i)}function y9(e,t){const n=TL(e.theme);return Object.keys(e).map(s=>_oe(e,t,s,n)).reduce(ep,{})}function jn(e){return y9(e,_L)}jn.propTypes={};jn.filterProps=_L;function Nn(e){return y9(e,AL)}Nn.propTypes={};Nn.filterProps=AL;function vj(...e){const t=e.reduce((s,r)=>(r.filterProps.forEach(i=>{s[i]=r}),s),{}),n=s=>Object.keys(s).reduce((r,i)=>t[i]?ep(r,t[i](s)):r,{});return n.propTypes={},n.filterProps=e.reduce((s,r)=>s.concat(r.filterProps),[]),n}function fi(e){return typeof e!="number"?e:`${e}px solid`}function Ai(e,t){return In({prop:e,themeKey:"borders",transform:t})}const Aoe=Ai("border",fi),Toe=Ai("borderTop",fi),koe=Ai("borderRight",fi),Eoe=Ai("borderBottom",fi),Loe=Ai("borderLeft",fi),Poe=Ai("borderColor"),Doe=Ai("borderTopColor"),Ooe=Ai("borderRightColor"),Moe=Ai("borderBottomColor"),Ioe=Ai("borderLeftColor"),$oe=Ai("outline",fi),Roe=Ai("outlineColor"),wj=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=fx(e.theme,"shape.borderRadius",4),n=s=>({borderRadius:hx(t,s)});return Fl(e,e.borderRadius,n)}return null};wj.propTypes={};wj.filterProps=["borderRadius"];vj(Aoe,Toe,koe,Eoe,Loe,Poe,Doe,Ooe,Moe,Ioe,wj,$oe,Roe);const jj=e=>{if(e.gap!==void 0&&e.gap!==null){const t=fx(e.theme,"spacing",8),n=s=>({gap:hx(t,s)});return Fl(e,e.gap,n)}return null};jj.propTypes={};jj.filterProps=["gap"];const Nj=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=fx(e.theme,"spacing",8),n=s=>({columnGap:hx(t,s)});return Fl(e,e.columnGap,n)}return null};Nj.propTypes={};Nj.filterProps=["columnGap"];const Cj=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=fx(e.theme,"spacing",8),n=s=>({rowGap:hx(t,s)});return Fl(e,e.rowGap,n)}return null};Cj.propTypes={};Cj.filterProps=["rowGap"];const zoe=In({prop:"gridColumn"}),Foe=In({prop:"gridRow"}),Uoe=In({prop:"gridAutoFlow"}),Boe=In({prop:"gridAutoColumns"}),Hoe=In({prop:"gridAutoRows"}),qoe=In({prop:"gridTemplateColumns"}),Goe=In({prop:"gridTemplateRows"}),Woe=In({prop:"gridTemplateAreas"}),Voe=In({prop:"gridArea"});vj(jj,Nj,Cj,zoe,Foe,Uoe,Boe,Hoe,qoe,Goe,Woe,Voe);function xf(e,t){return t==="grey"?t:e}const Yoe=In({prop:"color",themeKey:"palette",transform:xf}),Qoe=In({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:xf}),Koe=In({prop:"backgroundColor",themeKey:"palette",transform:xf});vj(Yoe,Qoe,Koe);function Mr(e){return e<=1&&e!==0?`${e*100}%`:e}const Xoe=In({prop:"width",transform:Mr}),kL=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{const s=e.theme?.breakpoints?.values?.[n]||yj[n];return s?e.theme?.breakpoints?.unit!=="px"?{maxWidth:`${s}${e.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Mr(n)}};return Fl(e,e.maxWidth,t)}return null};kL.filterProps=["maxWidth"];const Zoe=In({prop:"minWidth",transform:Mr}),Joe=In({prop:"height",transform:Mr}),ele=In({prop:"maxHeight",transform:Mr}),tle=In({prop:"minHeight",transform:Mr});In({prop:"size",cssProperty:"width",transform:Mr});In({prop:"size",cssProperty:"height",transform:Mr});const ale=In({prop:"boxSizing"});vj(Xoe,kL,Zoe,Joe,ele,tle,ale);const gx={border:{themeKey:"borders",transform:fi},borderTop:{themeKey:"borders",transform:fi},borderRight:{themeKey:"borders",transform:fi},borderBottom:{themeKey:"borders",transform:fi},borderLeft:{themeKey:"borders",transform:fi},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:fi},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:wj},color:{themeKey:"palette",transform:xf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:xf},backgroundColor:{themeKey:"palette",transform:xf},p:{style:Nn},pt:{style:Nn},pr:{style:Nn},pb:{style:Nn},pl:{style:Nn},px:{style:Nn},py:{style:Nn},padding:{style:Nn},paddingTop:{style:Nn},paddingRight:{style:Nn},paddingBottom:{style:Nn},paddingLeft:{style:Nn},paddingX:{style:Nn},paddingY:{style:Nn},paddingInline:{style:Nn},paddingInlineStart:{style:Nn},paddingInlineEnd:{style:Nn},paddingBlock:{style:Nn},paddingBlockStart:{style:Nn},paddingBlockEnd:{style:Nn},m:{style:jn},mt:{style:jn},mr:{style:jn},mb:{style:jn},ml:{style:jn},mx:{style:jn},my:{style:jn},margin:{style:jn},marginTop:{style:jn},marginRight:{style:jn},marginBottom:{style:jn},marginLeft:{style:jn},marginX:{style:jn},marginY:{style:jn},marginInline:{style:jn},marginInlineStart:{style:jn},marginInlineEnd:{style:jn},marginBlock:{style:jn},marginBlockStart:{style:jn},marginBlockEnd:{style:jn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:jj},rowGap:{style:Cj},columnGap:{style:Nj},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mr},maxWidth:{style:kL},minWidth:{transform:Mr},height:{transform:Mr},maxHeight:{transform:Mr},minHeight:{transform:Mr},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function nle(...e){const t=e.reduce((s,r)=>s.concat(Object.keys(r)),[]),n=new Set(t);return e.every(s=>n.size===Object.keys(s).length)}function sle(e,t){return typeof e=="function"?e(t):e}function rle(){function e(n,s,r,i){const o={[n]:s,theme:r},l=i[n];if(!l)return{[n]:s};const{cssProperty:c=n,themeKey:u,transform:d,style:h}=l;if(s==null)return null;if(u==="typography"&&s==="inherit")return{[n]:s};const p=bj(r,u)||{};return h?h(o):Fl(o,s,v=>{let j=Tv(p,d,v);return v===j&&typeof v=="string"&&(j=Tv(p,d,`${n}${v==="default"?"":Wa(v)}`,v)),c===!1?j:{[c]:j}})}function t(n){const{sx:s,theme:r={},nested:i}=n||{};if(!s)return null;const o=r.unstable_sxConfig??gx;function l(c){let u=c;if(typeof c=="function")u=c(r);else if(typeof c!="object")return c;if(!u)return null;const d=voe(r.breakpoints),h=Object.keys(d);let p=d;return Object.keys(u).forEach(x=>{const v=sle(u[x],r);if(v!=null)if(typeof v=="object")if(o[x])p=ep(p,e(x,v,r,o));else{const j=Fl({theme:r},v,b=>({[x]:b}));nle(j,v)?p[x]=t({sx:v,theme:r,nested:!0}):p=ep(p,j)}else p=ep(p,e(x,v,r,o))}),!i&&r.modularCssLayers?{"@layer sx":GI(r,VI(h,p))}:GI(r,VI(h,p))}return Array.isArray(s)?s.map(l):l(s)}return t}const Af=rle();Af.filterProps=["sx"];const ile=e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??gx;return Object.keys(e).forEach(s=>{n[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function ole(e){const{sx:t,...n}=e,{systemProps:s,otherProps:r}=ile(n);let i;return Array.isArray(t)?i=[s,...t]:typeof t=="function"?i=(...o)=>{const l=t(...o);return So(l)?{...s,...l}:s}:i={...s,...t},{...r,sx:i}}function et(){return et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},et.apply(null,arguments)}function lle(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function cle(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var dle=(function(){function e(n){var s=this;this._insertTag=function(r){var i;s.tags.length===0?s.insertionPoint?i=s.insertionPoint.nextSibling:s.prepend?i=s.container.firstChild:i=s.before:i=s.tags[s.tags.length-1].nextSibling,s.container.insertBefore(r,i),s.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(s){s.forEach(this._insertTag)},t.insert=function(s){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(cle(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var i=lle(r);try{i.insertRule(s,i.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(s));this.ctr++},t.flush=function(){this.tags.forEach(function(s){var r;return(r=s.parentNode)==null?void 0:r.removeChild(s)}),this.tags=[],this.ctr=0},e})(),Ls="-ms-",kv="-moz-",Ta="-webkit-",b9="comm",EL="rule",LL="decl",ule="@import",v9="@keyframes",mle="@layer",fle=Math.abs,Sj=String.fromCharCode,hle=Object.assign;function gle(e,t){return Ts(e,0)^45?(((t<<2^Ts(e,0))<<2^Ts(e,1))<<2^Ts(e,2))<<2^Ts(e,3):0}function w9(e){return e.trim()}function ple(e,t){return(e=t.exec(e))?e[0]:e}function ka(e,t,n){return e.replace(t,n)}function nk(e,t){return e.indexOf(t)}function Ts(e,t){return e.charCodeAt(t)|0}function pp(e,t,n){return e.slice(t,n)}function jo(e){return e.length}function PL(e){return e.length}function Fy(e,t){return t.push(e),e}function xle(e,t){return e.map(t).join("")}var _j=1,Tf=1,j9=0,br=0,Hn=0,eh="";function Aj(e,t,n,s,r,i,o){return{value:e,root:t,parent:n,type:s,props:r,children:i,line:_j,column:Tf,length:o,return:""}}function fg(e,t){return hle(Aj("",null,null,"",null,null,0),e,{length:-e.length},t)}function yle(){return Hn}function ble(){return Hn=br>0?Ts(eh,--br):0,Tf--,Hn===10&&(Tf=1,_j--),Hn}function zr(){return Hn=br<j9?Ts(eh,br++):0,Tf++,Hn===10&&(Tf=1,_j++),Hn}function Po(){return Ts(eh,br)}function ov(){return br}function px(e,t){return pp(eh,e,t)}function xp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N9(e){return _j=Tf=1,j9=jo(eh=e),br=0,[]}function C9(e){return eh="",e}function lv(e){return w9(px(br-1,sk(e===91?e+2:e===40?e+1:e)))}function vle(e){for(;(Hn=Po())&&Hn<33;)zr();return xp(e)>2||xp(Hn)>3?"":" "}function wle(e,t){for(;--t&&zr()&&!(Hn<48||Hn>102||Hn>57&&Hn<65||Hn>70&&Hn<97););return px(e,ov()+(t<6&&Po()==32&&zr()==32))}function sk(e){for(;zr();)switch(Hn){case e:return br;case 34:case 39:e!==34&&e!==39&&sk(Hn);break;case 40:e===41&&sk(e);break;case 92:zr();break}return br}function jle(e,t){for(;zr()&&e+Hn!==57;)if(e+Hn===84&&Po()===47)break;return"/*"+px(t,br-1)+"*"+Sj(e===47?e:zr())}function Nle(e){for(;!xp(Po());)zr();return px(e,br)}function Cle(e){return C9(cv("",null,null,null,[""],e=N9(e),0,[0],e))}function cv(e,t,n,s,r,i,o,l,c){for(var u=0,d=0,h=o,p=0,x=0,v=0,j=1,b=1,N=1,w=0,S="",_=r,k=i,T=s,A=S;b;)switch(v=w,w=zr()){case 40:if(v!=108&&Ts(A,h-1)==58){nk(A+=ka(lv(w),"&","&\f"),"&\f")!=-1&&(N=-1);break}case 34:case 39:case 91:A+=lv(w);break;case 9:case 10:case 13:case 32:A+=vle(v);break;case 92:A+=wle(ov()-1,7);continue;case 47:switch(Po()){case 42:case 47:Fy(Sle(jle(zr(),ov()),t,n),c);break;default:A+="/"}break;case 123*j:l[u++]=jo(A)*N;case 125*j:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+d:N==-1&&(A=ka(A,/\f/g,"")),x>0&&jo(A)-h&&Fy(x>32?KI(A+";",s,n,h-1):KI(ka(A," ","")+";",s,n,h-2),c);break;case 59:A+=";";default:if(Fy(T=QI(A,t,n,u,d,r,l,S,_=[],k=[],h),i),w===123)if(d===0)cv(A,t,T,T,_,i,h,l,k);else switch(p===99&&Ts(A,3)===110?100:p){case 100:case 108:case 109:case 115:cv(e,T,T,s&&Fy(QI(e,T,T,0,0,r,l,S,r,_=[],h),k),r,k,h,l,s?_:k);break;default:cv(A,T,T,T,[""],k,0,l,k)}}u=d=x=0,j=N=1,S=A="",h=o;break;case 58:h=1+jo(A),x=v;default:if(j<1){if(w==123)--j;else if(w==125&&j++==0&&ble()==125)continue}switch(A+=Sj(w),w*j){case 38:N=d>0?1:(A+="\f",-1);break;case 44:l[u++]=(jo(A)-1)*N,N=1;break;case 64:Po()===45&&(A+=lv(zr())),p=Po(),d=h=jo(S=A+=Nle(ov())),w++;break;case 45:v===45&&jo(A)==2&&(j=0)}}return i}function QI(e,t,n,s,r,i,o,l,c,u,d){for(var h=r-1,p=r===0?i:[""],x=PL(p),v=0,j=0,b=0;v<s;++v)for(var N=0,w=pp(e,h+1,h=fle(j=o[v])),S=e;N<x;++N)(S=w9(j>0?p[N]+" "+w:ka(w,/&\f/g,p[N])))&&(c[b++]=S);return Aj(e,t,n,r===0?EL:l,c,u,d)}function Sle(e,t,n){return Aj(e,t,n,b9,Sj(yle()),pp(e,2,-2),0)}function KI(e,t,n,s){return Aj(e,t,n,LL,pp(e,0,s),pp(e,s+1,-1),s)}function yf(e,t){for(var n="",s=PL(e),r=0;r<s;r++)n+=t(e[r],r,e,t)||"";return n}function _le(e,t,n,s){switch(e.type){case mle:if(e.children.length)break;case ule:case LL:return e.return=e.return||e.value;case b9:return"";case v9:return e.return=e.value+"{"+yf(e.children,s)+"}";case EL:e.value=e.props.join(",")}return jo(n=yf(e.children,s))?e.return=e.value+"{"+n+"}":""}function Ale(e){var t=PL(e);return function(n,s,r,i){for(var o="",l=0;l<t;l++)o+=e[l](n,s,r,i)||"";return o}}function Tle(e){return function(t){t.root||(t=t.return)&&e(t)}}function S9(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var kle=function(t,n,s){for(var r=0,i=0;r=i,i=Po(),r===38&&i===12&&(n[s]=1),!xp(i);)zr();return px(t,br)},Ele=function(t,n){var s=-1,r=44;do switch(xp(r)){case 0:r===38&&Po()===12&&(n[s]=1),t[s]+=kle(br-1,n,s);break;case 2:t[s]+=lv(r);break;case 4:if(r===44){t[++s]=Po()===58?"&\f":"",n[s]=t[s].length;break}default:t[s]+=Sj(r)}while(r=zr());return t},Lle=function(t,n){return C9(Ele(N9(t),n))},XI=new WeakMap,Ple=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,s=t.parent,r=t.column===s.column&&t.line===s.line;s.type!=="rule";)if(s=s.parent,!s)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!XI.get(s))&&!r){XI.set(t,!0);for(var i=[],o=Lle(n,i),l=s.props,c=0,u=0;c<o.length;c++)for(var d=0;d<l.length;d++,u++)t.props[u]=i[c]?o[c].replace(/&\f/g,l[d]):l[d]+" "+o[c]}}},Dle=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function _9(e,t){switch(gle(e,t)){case 5103:return Ta+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ta+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ta+e+kv+e+Ls+e+e;case 6828:case 4268:return Ta+e+Ls+e+e;case 6165:return Ta+e+Ls+"flex-"+e+e;case 5187:return Ta+e+ka(e,/(\w+).+(:[^]+)/,Ta+"box-$1$2"+Ls+"flex-$1$2")+e;case 5443:return Ta+e+Ls+"flex-item-"+ka(e,/flex-|-self/,"")+e;case 4675:return Ta+e+Ls+"flex-line-pack"+ka(e,/align-content|flex-|-self/,"")+e;case 5548:return Ta+e+Ls+ka(e,"shrink","negative")+e;case 5292:return Ta+e+Ls+ka(e,"basis","preferred-size")+e;case 6060:return Ta+"box-"+ka(e,"-grow","")+Ta+e+Ls+ka(e,"grow","positive")+e;case 4554:return Ta+ka(e,/([^-])(transform)/g,"$1"+Ta+"$2")+e;case 6187:return ka(ka(ka(e,/(zoom-|grab)/,Ta+"$1"),/(image-set)/,Ta+"$1"),e,"")+e;case 5495:case 3959:return ka(e,/(image-set\([^]*)/,Ta+"$1$`$1");case 4968:return ka(ka(e,/(.+:)(flex-)?(.*)/,Ta+"box-pack:$3"+Ls+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ta+e+e;case 4095:case 3583:case 4068:case 2532:return ka(e,/(.+)-inline(.+)/,Ta+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jo(e)-1-t>6)switch(Ts(e,t+1)){case 109:if(Ts(e,t+4)!==45)break;case 102:return ka(e,/(.+:)(.+)-([^]+)/,"$1"+Ta+"$2-$3$1"+kv+(Ts(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~nk(e,"stretch")?_9(ka(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ts(e,t+1)!==115)break;case 6444:switch(Ts(e,jo(e)-3-(~nk(e,"!important")&&10))){case 107:return ka(e,":",":"+Ta)+e;case 101:return ka(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ta+(Ts(e,14)===45?"inline-":"")+"box$3$1"+Ta+"$2$3$1"+Ls+"$2box$3")+e}break;case 5936:switch(Ts(e,t+11)){case 114:return Ta+e+Ls+ka(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ta+e+Ls+ka(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ta+e+Ls+ka(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ta+e+Ls+e+e}return e}var Ole=function(t,n,s,r){if(t.length>-1&&!t.return)switch(t.type){case LL:t.return=_9(t.value,t.length);break;case v9:return yf([fg(t,{value:ka(t.value,"@","@"+Ta)})],r);case EL:if(t.length)return xle(t.props,function(i){switch(ple(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return yf([fg(t,{props:[ka(i,/:(read-\w+)/,":"+kv+"$1")]})],r);case"::placeholder":return yf([fg(t,{props:[ka(i,/:(plac\w+)/,":"+Ta+"input-$1")]}),fg(t,{props:[ka(i,/:(plac\w+)/,":"+kv+"$1")]}),fg(t,{props:[ka(i,/:(plac\w+)/,Ls+"input-$1")]})],r)}return""})}},Mle=[Ole],Ile=function(t){var n=t.key;if(n==="css"){var s=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(s,function(j){var b=j.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var r=t.stylisPlugins||Mle,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(j){for(var b=j.getAttribute("data-emotion").split(" "),N=1;N<b.length;N++)i[b[N]]=!0;l.push(j)});var c,u=[Ple,Dle];{var d,h=[_le,Tle(function(j){d.insert(j)})],p=Ale(u.concat(r,h)),x=function(b){return yf(Cle(b),p)};c=function(b,N,w,S){d=w,x(b?b+"{"+N.styles+"}":N.styles),S&&(v.inserted[N.name]=!0)}}var v={key:n,sheet:new dle({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},s2={exports:{}},Ea={};var ZI;function $le(){if(ZI)return Ea;ZI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,j=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,N=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(k){if(typeof k=="object"&&k!==null){var T=k.$$typeof;switch(T){case t:switch(k=k.type,k){case c:case u:case s:case i:case r:case h:return k;default:switch(k=k&&k.$$typeof,k){case l:case d:case v:case x:case o:return k;default:return T}}case n:return T}}}function _(k){return S(k)===u}return Ea.AsyncMode=c,Ea.ConcurrentMode=u,Ea.ContextConsumer=l,Ea.ContextProvider=o,Ea.Element=t,Ea.ForwardRef=d,Ea.Fragment=s,Ea.Lazy=v,Ea.Memo=x,Ea.Portal=n,Ea.Profiler=i,Ea.StrictMode=r,Ea.Suspense=h,Ea.isAsyncMode=function(k){return _(k)||S(k)===c},Ea.isConcurrentMode=_,Ea.isContextConsumer=function(k){return S(k)===l},Ea.isContextProvider=function(k){return S(k)===o},Ea.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},Ea.isForwardRef=function(k){return S(k)===d},Ea.isFragment=function(k){return S(k)===s},Ea.isLazy=function(k){return S(k)===v},Ea.isMemo=function(k){return S(k)===x},Ea.isPortal=function(k){return S(k)===n},Ea.isProfiler=function(k){return S(k)===i},Ea.isStrictMode=function(k){return S(k)===r},Ea.isSuspense=function(k){return S(k)===h},Ea.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===s||k===u||k===i||k===r||k===h||k===p||typeof k=="object"&&k!==null&&(k.$$typeof===v||k.$$typeof===x||k.$$typeof===o||k.$$typeof===l||k.$$typeof===d||k.$$typeof===b||k.$$typeof===N||k.$$typeof===w||k.$$typeof===j)},Ea.typeOf=S,Ea}var JI;function Rle(){return JI||(JI=1,s2.exports=$le()),s2.exports}var r2,e$;function zle(){if(e$)return r2;e$=1;var e=Rle(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=r;function o(v){return e.isMemo(v)?r:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;function x(v,j,b){if(typeof j!="string"){if(p){var N=h(j);N&&N!==p&&x(v,N,b)}var w=c(j);u&&(w=w.concat(u(j)));for(var S=o(v),_=o(j),k=0;k<w.length;++k){var T=w[k];if(!n[T]&&!(b&&b[T])&&!(_&&_[T])&&!(S&&S[T])){var A=d(j,T);try{l(v,T,A)}catch{}}}}return v}return r2=x,r2}zle();var Fle=!0;function A9(e,t,n){var s="";return n.split(" ").forEach(function(r){e[r]!==void 0?t.push(e[r]+";"):r&&(s+=r+" ")}),s}var DL=function(t,n,s){var r=t.key+"-"+n.name;(s===!1||Fle===!1)&&t.registered[r]===void 0&&(t.registered[r]=n.styles)},T9=function(t,n,s){DL(t,n,s);var r=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var i=n;do t.insert(n===i?"."+r:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Ule(e){for(var t=0,n,s=0,r=e.length;r>=4;++s,r-=4)n=e.charCodeAt(s)&255|(e.charCodeAt(++s)&255)<<8|(e.charCodeAt(++s)&255)<<16|(e.charCodeAt(++s)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(r){case 3:t^=(e.charCodeAt(s+2)&255)<<16;case 2:t^=(e.charCodeAt(s+1)&255)<<8;case 1:t^=e.charCodeAt(s)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ble={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Hle=/[A-Z]|^ms/g,qle=/_EMO_([^_]+?)_([^]*?)_EMO_/g,k9=function(t){return t.charCodeAt(1)===45},t$=function(t){return t!=null&&typeof t!="boolean"},i2=S9(function(e){return k9(e)?e:e.replace(Hle,"-$&").toLowerCase()}),a$=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(qle,function(s,r,i){return No={name:r,styles:i,next:No},r})}return Ble[t]!==1&&!k9(t)&&typeof n=="number"&&n!==0?n+"px":n};function yp(e,t,n){if(n==null)return"";var s=n;if(s.__emotion_styles!==void 0)return s;switch(typeof n){case"boolean":return"";case"object":{var r=n;if(r.anim===1)return No={name:r.name,styles:r.styles,next:No},r.name;var i=n;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)No={name:o.name,styles:o.styles,next:No},o=o.next;var l=i.styles+";";return l}return Gle(e,t,n)}case"function":{if(e!==void 0){var c=No,u=n(e);return No=c,yp(e,t,u)}break}}var d=n;if(t==null)return d;var h=t[d];return h!==void 0?h:d}function Gle(e,t,n){var s="";if(Array.isArray(n))for(var r=0;r<n.length;r++)s+=yp(e,t,n[r])+";";else for(var i in n){var o=n[i];if(typeof o!="object"){var l=o;t!=null&&t[l]!==void 0?s+=i+"{"+t[l]+"}":t$(l)&&(s+=i2(i)+":"+a$(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)t$(o[c])&&(s+=i2(i)+":"+a$(i,o[c])+";");else{var u=yp(e,t,o);switch(i){case"animation":case"animationName":{s+=i2(i)+":"+u+";";break}default:s+=i+"{"+u+"}"}}}return s}var n$=/label:\s*([^\s;{]+)\s*(;|$)/g,No;function Tj(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,r="";No=void 0;var i=e[0];if(i==null||i.raw===void 0)s=!1,r+=yp(n,t,i);else{var o=i;r+=o[0]}for(var l=1;l<e.length;l++)if(r+=yp(n,t,e[l]),s){var c=i;r+=c[l]}n$.lastIndex=0;for(var u="",d;(d=n$.exec(r))!==null;)u+="-"+d[1];var h=Ule(r)+u;return{name:h,styles:r,next:No}}var Wle=function(t){return t()},Vle=Au.useInsertionEffect?Au.useInsertionEffect:!1,E9=Vle||Wle,L9=f.createContext(typeof HTMLElement<"u"?Ile({key:"css"}):null);L9.Provider;var P9=function(t){return f.forwardRef(function(n,s){var r=f.useContext(L9);return t(n,r,s)})},OL=f.createContext({}),ML={}.hasOwnProperty,rk="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Yle=function(t,n){var s={};for(var r in n)ML.call(n,r)&&(s[r]=n[r]);return s[rk]=t,s},Qle=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return DL(n,s,r),E9(function(){return T9(n,s,r)}),null},Kle=P9(function(e,t,n){var s=e.css;typeof s=="string"&&t.registered[s]!==void 0&&(s=t.registered[s]);var r=e[rk],i=[s],o="";typeof e.className=="string"?o=A9(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=Tj(i,void 0,f.useContext(OL));o+=t.key+"-"+l.name;var c={};for(var u in e)ML.call(e,u)&&u!=="css"&&u!==rk&&(c[u]=e[u]);return c.className=o,n&&(c.ref=n),f.createElement(f.Fragment,null,f.createElement(Qle,{cache:t,serialized:l,isStringTag:typeof r=="string"}),f.createElement(r,c))}),Xle=Kle,s$=function(t,n){var s=arguments;if(n==null||!ML.call(n,"css"))return f.createElement.apply(void 0,s);var r=s.length,i=new Array(r);i[0]=Xle,i[1]=Yle(t,n);for(var o=2;o<r;o++)i[o]=s[o];return f.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(s$||(s$={}));function IL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tj(t)}function xx(){var e=IL.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Zle=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Jle=S9(function(e){return Zle.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),ece=Jle,tce=function(t){return t!=="theme"},r$=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?ece:tce},i$=function(t,n,s){var r;if(n){var i=n.shouldForwardProp;r=t.__emotion_forwardProp&&i?function(o){return t.__emotion_forwardProp(o)&&i(o)}:i}return typeof r!="function"&&s&&(r=t.__emotion_forwardProp),r},ace=function(t){var n=t.cache,s=t.serialized,r=t.isStringTag;return DL(n,s,r),E9(function(){return T9(n,s,r)}),null},nce=function e(t,n){var s=t.__emotion_real===t,r=s&&t.__emotion_base||t,i,o;n!==void 0&&(i=n.label,o=n.target);var l=i$(t,n,s),c=l||r$(r),u=!c("as");return function(){var d=arguments,h=s&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),d[0]==null||d[0].raw===void 0)h.push.apply(h,d);else{var p=d[0];h.push(p[0]);for(var x=d.length,v=1;v<x;v++)h.push(d[v],p[v])}var j=P9(function(b,N,w){var S=u&&b.as||r,_="",k=[],T=b;if(b.theme==null){T={};for(var A in b)T[A]=b[A];T.theme=f.useContext(OL)}typeof b.className=="string"?_=A9(N.registered,k,b.className):b.className!=null&&(_=b.className+" ");var E=Tj(h.concat(k),N.registered,T);_+=N.key+"-"+E.name,o!==void 0&&(_+=" "+o);var M=u&&l===void 0?r$(S):c,O={};for(var I in b)u&&I==="as"||M(I)&&(O[I]=b[I]);return O.className=_,w&&(O.ref=w),f.createElement(f.Fragment,null,f.createElement(ace,{cache:N,serialized:E,isStringTag:typeof S=="string"}),f.createElement(S,O))});return j.displayName=i!==void 0?i:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=r,j.__emotion_styles=h,j.__emotion_forwardProp=l,Object.defineProperty(j,"toString",{value:function(){return"."+o}}),j.withComponent=function(b,N){var w=e(b,et({},n,N,{shouldForwardProp:i$(j,N,!0)}));return w.apply(void 0,h)},j}},sce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ik=nce.bind(null);sce.forEach(function(e){ik[e]=ik(e)});function rce(e,t){return ik(e,t)}function ice(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const o$=[];function bu(e){return o$[0]=e,Tj(o$)}const oce=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,s)=>n.val-s.val),t.reduce((n,s)=>({...n,[s.key]:s.val}),{})};function lce(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:s=5,...r}=e,i=oce(t),o=Object.keys(i);function l(p){return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n})`}function c(p){return`@media (max-width:${(typeof t[p]=="number"?t[p]:p)-s/100}${n})`}function u(p,x){const v=o.indexOf(x);return`@media (min-width:${typeof t[p]=="number"?t[p]:p}${n}) and (max-width:${(v!==-1&&typeof t[o[v]]=="number"?t[o[v]]:x)-s/100}${n})`}function d(p){return o.indexOf(p)+1<o.length?u(p,o[o.indexOf(p)+1]):l(p)}function h(p){const x=o.indexOf(p);return x===0?l(o[1]):x===o.length-1?c(o[x]):u(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return{keys:o,values:i,up:l,down:c,between:u,only:d,not:h,unit:n,...r}}const cce={borderRadius:4};function D9(e=8,t=TL({spacing:e})){if(e.mui)return e;const n=(...s)=>(s.length===0?[1]:s).map(i=>{const o=t(i);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function dce(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||typeof n.getColorSchemeSelector!="function")return{};let s=n.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return n.palette.mode===e?t:{}}function $L(e={},...t){const{breakpoints:n={},palette:s={},spacing:r,shape:i={},...o}=e,l=lce(n),c=D9(r);let u=Rr({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...s},spacing:c,shape:{...cce,...i}},o);return u=yoe(u),u.applyStyles=dce,u=t.reduce((d,h)=>Rr(d,h),u),u.unstable_sxConfig={...gx,...o?.unstable_sxConfig},u.unstable_sx=function(h){return Af({sx:h,theme:this})},u}function uce(e){return Object.keys(e).length===0}function O9(e=null){const t=f.useContext(OL);return!t||uce(t)?e:t}const mce=$L();function M9(e=mce){return O9(e)}const l$=e=>e,fce=()=>{let e=l$;return{configure(t){e=t},generate(t){return e(t)},reset(){e=l$}}},hce=fce(),gce={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Yn(e,t,n="Mui"){const s=gce[t];return s?`${n}-${s}`:`${hce.generate(e)}-${t}`}function An(e,t,n="Mui"){const s={};return t.forEach(r=>{s[r]=Yn(e,r,n)}),s}function I9(e){const{variants:t,...n}=e,s={variants:t,style:bu(n),isProcessed:!0};return s.style===n||t&&t.forEach(r=>{typeof r.style!="function"&&(r.style=bu(r.style))}),s}const pce=$L();function dv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function du(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function xce(e){return e?(t,n)=>n[e]:null}function yce(e,t,n){e.theme=wce(e.theme)?n:e.theme[t]||e.theme}function uv(e,t,n){const s=typeof t=="function"?t(e):t;if(Array.isArray(s))return s.flatMap(r=>uv(e,r,n));if(Array.isArray(s?.variants)){let r;if(s.isProcessed)r=n?du(s.style,n):s.style;else{const{variants:i,...o}=s;r=n?du(bu(o),n):o}return $9(e,s.variants,[r],n)}return s?.isProcessed?n?du(bu(s.style),n):s.style:n?du(bu(s),n):s}function $9(e,t,n=[],s=void 0){let r;e:for(let i=0;i<t.length;i+=1){const o=t[i];if(typeof o.props=="function"){if(r??={...e,...e.ownerState,ownerState:e.ownerState},!o.props(r))continue}else for(const l in o.props)if(e[l]!==o.props[l]&&e.ownerState?.[l]!==o.props[l])continue e;typeof o.style=="function"?(r??={...e,...e.ownerState,ownerState:e.ownerState},n.push(s?du(bu(o.style(r)),s):o.style(r))):n.push(s?du(bu(o.style),s):o.style)}return n}function bce(e={}){const{themeId:t,defaultTheme:n=pce,rootShouldForwardProp:s=dv,slotShouldForwardProp:r=dv}=e;function i(l){yce(l,t,n)}return(l,c={})=>{ice(l,T=>T.filter(A=>A!==Af));const{name:u,slot:d,skipVariantsResolver:h,skipSx:p,overridesResolver:x=xce(Nce(d)),...v}=c,j=u&&u.startsWith("Mui")||d?"components":"custom",b=h!==void 0?h:d&&d!=="Root"&&d!=="root"||!1,N=p||!1;let w=dv;d==="Root"||d==="root"?w=s:d?w=r:jce(l)&&(w=void 0);const S=rce(l,{shouldForwardProp:w,label:vce(),...v}),_=T=>{if(T.__emotion_real===T)return T;if(typeof T=="function")return function(E){return uv(E,T,E.theme.modularCssLayers?j:void 0)};if(So(T)){const A=I9(T);return function(M){return A.variants?uv(M,A,M.theme.modularCssLayers?j:void 0):M.theme.modularCssLayers?du(A.style,j):A.style}}return T},k=(...T)=>{const A=[],E=T.map(_),M=[];if(A.push(i),u&&x&&M.push(function(H){const z=H.theme.components?.[u]?.styleOverrides;if(!z)return null;const Q={};for(const J in z)Q[J]=uv(H,z[J],H.theme.modularCssLayers?"theme":void 0);return x(H,Q)}),u&&!b&&M.push(function(H){const z=H.theme?.components?.[u]?.variants;return z?$9(H,z,[],H.theme.modularCssLayers?"theme":void 0):null}),N||M.push(Af),Array.isArray(E[0])){const D=E.shift(),H=new Array(A.length).fill(""),W=new Array(M.length).fill("");let z;z=[...H,...D,...W],z.raw=[...H,...D.raw,...W],A.unshift(z)}const O=[...A,...E,...M],I=S(...O);return l.muiName&&(I.muiName=l.muiName),I};return S.withConfig&&(k.withConfig=S.withConfig),k}}function vce(e,t){return void 0}function wce(e){for(const t in e)return!1;return!0}function jce(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Nce(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function Du(e,t,n=!1){const s={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")s[i]={...e[i],...s[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],l=t[i];if(!l)s[i]=o||{};else if(!o)s[i]=l;else{s[i]={...l};for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const u=c;s[i][u]=Du(o[u],l[u],n)}}}else i==="className"&&n&&t.className?s.className=It(e?.className,t?.className):i==="style"&&n&&t.style?s.style={...e?.style,...t?.style}:s[i]===void 0&&(s[i]=e[i])}return s}function R9(e){const{theme:t,name:n,props:s}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?s:Du(t.components[n].defaultProps,s)}function Cce({props:e,name:t,defaultTheme:n,themeId:s}){let r=M9(n);return r=r[s]||r,R9({theme:r,name:t,props:e})}const is=typeof window<"u"?f.useLayoutEffect:f.useEffect;function Sce(e,t,n,s,r){const[i,o]=f.useState(()=>r&&n?n(e).matches:s?s(e).matches:t);return is(()=>{if(!n)return;const l=n(e),c=()=>{o(l.matches)};return c(),l.addEventListener("change",c),()=>{l.removeEventListener("change",c)}},[e,n]),i}const _ce={...Au},z9=_ce.useSyncExternalStore;function Ace(e,t,n,s,r){const i=f.useCallback(()=>t,[t]),o=f.useMemo(()=>{if(r&&n)return()=>n(e).matches;if(s!==null){const{matches:d}=s(e);return()=>d}return i},[i,e,s,r,n]),[l,c]=f.useMemo(()=>{if(n===null)return[i,()=>()=>{}];const d=n(e);return[()=>d.matches,h=>(d.addEventListener("change",h),()=>{d.removeEventListener("change",h)})]},[i,n,e]);return z9(c,l,o)}function F9(e={}){const{themeId:t}=e;return function(s,r={}){let i=O9();i&&t&&(i=i[t]||i);const o=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:l=!1,matchMedia:c=o?window.matchMedia:null,ssrMatchMedia:u=null,noSsr:d=!1}=R9({name:"MuiUseMediaQuery",props:r,theme:i});let h=typeof s=="function"?s(i):s;return h=h.replace(/^@media( ?)/m,""),h.includes("print")&&console.warn(["MUI: You have provided a `print` query to the `useMediaQuery` hook.","Using the print media query to modify print styles can lead to unexpected results.","Consider using the `displayPrint` field in the `sx` prop instead.","More information about `displayPrint` on our docs: https://mui.com/system/display/#display-in-print."].join(`
`)),(z9!==void 0?Ace:Sce)(h,l,c,u,d)}}F9();function Tce(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function RL(e,t=0,n=1){return Tce(e,t,n)}function kce(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(s=>s+s)),n?`rgb${n.length===4?"a":""}(${n.map((s,r)=>r<3?parseInt(s,16):Math.round(parseInt(s,16)/255*1e3)/1e3).join(", ")})`:""}function ud(e){if(e.type)return e;if(e.charAt(0)==="#")return ud(kce(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Pu(9,e));let s=e.substring(t+1,e.length-1),r;if(n==="color"){if(s=s.split(" "),r=s.shift(),s.length===4&&s[3].charAt(0)==="/"&&(s[3]=s[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(Pu(10,r))}else s=s.split(",");return s=s.map(i=>parseFloat(i)),{type:n,values:s,colorSpace:r}}const Ece=e=>{const t=ud(e);return t.values.slice(0,3).map((n,s)=>t.type.includes("hsl")&&s!==0?`${n}%`:n).join(" ")},Fg=(e,t)=>{try{return Ece(e)}catch{return e}};function kj(e){const{type:t,colorSpace:n}=e;let{values:s}=e;return t.includes("rgb")?s=s.map((r,i)=>i<3?parseInt(r,10):r):t.includes("hsl")&&(s[1]=`${s[1]}%`,s[2]=`${s[2]}%`),t.includes("color")?s=`${n} ${s.join(" ")}`:s=`${s.join(", ")}`,`${t}(${s})`}function U9(e){e=ud(e);const{values:t}=e,n=t[0],s=t[1]/100,r=t[2]/100,i=s*Math.min(r,1-r),o=(u,d=(u+n/30)%12)=>r-i*Math.max(Math.min(d-3,9-d,1),-1);let l="rgb";const c=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return e.type==="hsla"&&(l+="a",c.push(t[3])),kj({type:l,values:c})}function ok(e){e=ud(e);let t=e.type==="hsl"||e.type==="hsla"?ud(U9(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Lce(e,t){const n=ok(e),s=ok(t);return(Math.max(n,s)+.05)/(Math.min(n,s)+.05)}function B9(e,t){return e=ud(e),t=RL(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,kj(e)}function Vd(e,t,n){try{return B9(e,t)}catch{return e}}function Ej(e,t){if(e=ud(e),t=RL(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return kj(e)}function Ma(e,t,n){try{return Ej(e,t)}catch{return e}}function Lj(e,t){if(e=ud(e),t=RL(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return kj(e)}function Ia(e,t,n){try{return Lj(e,t)}catch{return e}}function Pce(e,t=.15){return ok(e)>.5?Ej(e,t):Lj(e,t)}function Uy(e,t,n){try{return Pce(e,t)}catch{return e}}const Dce=f.createContext(),yx=()=>f.useContext(Dce)??!1,Oce=f.createContext(void 0);function Mce(e){const{theme:t,name:n,props:s}=e;if(!t||!t.components||!t.components[n])return s;const r=t.components[n];return r.defaultProps?Du(r.defaultProps,s,t.components.mergeClassNameAndStyle):!r.styleOverrides&&!r.variants?Du(r,s,t.components.mergeClassNameAndStyle):s}function Ice({props:e,name:t}){const n=f.useContext(Oce);return Mce({props:e,name:t,theme:{components:n}})}let c$=0;function $ce(e){const[t,n]=f.useState(e),s=e||t;return f.useEffect(()=>{t==null&&(c$+=1,n(`mui-${c$}`))},[t]),s}const Rce={...Au},d$=Rce.useId;function Pj(e){if(d$!==void 0){const t=d$();return e??t}return $ce(e)}const u$={theme:void 0};function zce(e){let t,n;return function(r){let i=t;return(i===void 0||r.theme!==n)&&(u$.theme=r.theme,i=I9(e(u$)),t=i,n=r.theme),i}}function Fce(e=""){function t(...s){if(!s.length)return"";const r=s[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${r}${t(...s.slice(1))})`:`, ${r}`}return(s,...r)=>`var(--${e?`${e}-`:""}${s}${t(...r)})`}const m$=(e,t,n,s=[])=>{let r=e;t.forEach((i,o)=>{o===t.length-1?Array.isArray(r)?r[Number(i)]=n:r&&typeof r=="object"&&(r[i]=n):r&&typeof r=="object"&&(r[i]||(r[i]=s.includes(i)?[]:{}),r=r[i])})},Uce=(e,t,n)=>{function s(r,i=[],o=[]){Object.entries(r).forEach(([l,c])=>{(!n||n&&!n([...i,l]))&&c!=null&&(typeof c=="object"&&Object.keys(c).length>0?s(c,[...i,l],Array.isArray(c)?[...o,l]:o):t([...i,l],c,o))})}s(e)},Bce=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(s=>e.includes(s))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function o2(e,t){const{prefix:n,shouldSkipGeneratingVar:s}=t||{},r={},i={},o={};return Uce(e,(l,c,u)=>{if((typeof c=="string"||typeof c=="number")&&(!s||!s(l,c))){const d=`--${n?`${n}-`:""}${l.join("-")}`,h=Bce(l,c);Object.assign(r,{[d]:h}),m$(i,l,`var(${d})`,u),m$(o,l,`var(${d}, ${h})`,u)}},l=>l[0]==="vars"),{css:r,vars:i,varsWithDefaults:o}}function Hce(e,t={}){const{getSelector:n=N,disableCssColorScheme:s,colorSchemeSelector:r,enableContrastVars:i}=t,{colorSchemes:o={},components:l,defaultColorScheme:c="light",...u}=e,{vars:d,css:h,varsWithDefaults:p}=o2(u,t);let x=p;const v={},{[c]:j,...b}=o;if(Object.entries(b||{}).forEach(([_,k])=>{const{vars:T,css:A,varsWithDefaults:E}=o2(k,t);x=Rr(x,E),v[_]={css:A,vars:T}}),j){const{css:_,vars:k,varsWithDefaults:T}=o2(j,t);x=Rr(x,T),v[c]={css:_,vars:k}}function N(_,k){let T=r;if(r==="class"&&(T=".%s"),r==="data"&&(T="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(T=`[${r}="%s"]`),_){if(T==="media")return e.defaultColorScheme===_?":root":{[`@media (prefers-color-scheme: ${o[_]?.palette?.mode||_})`]:{":root":k}};if(T)return e.defaultColorScheme===_?`:root, ${T.replace("%s",String(_))}`:T.replace("%s",String(_))}return":root"}return{vars:x,generateThemeVars:()=>{let _={...d};return Object.entries(v).forEach(([,{vars:k}])=>{_=Rr(_,k)}),_},generateStyleSheets:()=>{const _=[],k=e.defaultColorScheme||"light";function T(M,O){Object.keys(O).length&&_.push(typeof M=="string"?{[M]:{...O}}:M)}T(n(void 0,{...h}),h);const{[k]:A,...E}=v;if(A){const{css:M}=A,O=o[k]?.palette?.mode,I=!s&&O?{colorScheme:O,...M}:{...M};T(n(k,{...I}),I)}return Object.entries(E).forEach(([M,{css:O}])=>{const I=o[M]?.palette?.mode,D=!s&&I?{colorScheme:I,...O}:{...O};T(n(M,{...D}),D)}),i&&_.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),_}}}function qce(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const bp={black:"#000",white:"#fff"},Gce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Bm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Hm={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},hg={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},qm={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Gm={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Wm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function H9(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:bp.white,default:bp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const q9=H9();function G9(){return{text:{primary:bp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:bp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const lk=G9();function f$(e,t,n,s){const r=s.light||s,i=s.dark||s*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Lj(e.main,r):t==="dark"&&(e.dark=Ej(e.main,i)))}function h$(e,t,n,s,r){const i=r.light||r,o=r.dark||r*1.5;t[n]||(t.hasOwnProperty(s)?t[n]=t[s]:n==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(i*100).toFixed(0)}%)`:n==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(o*100).toFixed(0)}%)`))}function Wce(e="light"){return e==="dark"?{main:qm[200],light:qm[50],dark:qm[400]}:{main:qm[700],light:qm[400],dark:qm[800]}}function Vce(e="light"){return e==="dark"?{main:Bm[200],light:Bm[50],dark:Bm[400]}:{main:Bm[500],light:Bm[300],dark:Bm[700]}}function Yce(e="light"){return e==="dark"?{main:Hm[500],light:Hm[300],dark:Hm[700]}:{main:Hm[700],light:Hm[400],dark:Hm[800]}}function Qce(e="light"){return e==="dark"?{main:Gm[400],light:Gm[300],dark:Gm[700]}:{main:Gm[700],light:Gm[500],dark:Gm[900]}}function Kce(e="light"){return e==="dark"?{main:Wm[400],light:Wm[300],dark:Wm[700]}:{main:Wm[800],light:Wm[500],dark:Wm[900]}}function Xce(e="light"){return e==="dark"?{main:hg[400],light:hg[300],dark:hg[700]}:{main:"#ed6c02",light:hg[500],dark:hg[900]}}function Zce(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function zL(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:s=.2,colorSpace:r,...i}=e,o=e.primary||Wce(t),l=e.secondary||Vce(t),c=e.error||Yce(t),u=e.info||Qce(t),d=e.success||Kce(t),h=e.warning||Xce(t);function p(b){return r?Zce(b):Lce(b,lk.text.primary)>=n?lk.text.primary:q9.text.primary}const x=({color:b,name:N,mainShade:w=500,lightShade:S=300,darkShade:_=700})=>{if(b={...b},!b.main&&b[w]&&(b.main=b[w]),!b.hasOwnProperty("main"))throw new Error(Pu(11,N?` (${N})`:"",w));if(typeof b.main!="string")throw new Error(Pu(12,N?` (${N})`:"",JSON.stringify(b.main)));return r?(h$(r,b,"light",S,s),h$(r,b,"dark",_,s)):(f$(b,"light",S,s),f$(b,"dark",_,s)),b.contrastText||(b.contrastText=p(b.main)),b};let v;return t==="light"?v=H9():t==="dark"&&(v=G9()),Rr({common:{...bp},mode:t,primary:x({color:o,name:"primary"}),secondary:x({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:x({color:c,name:"error"}),warning:x({color:h,name:"warning"}),info:x({color:u,name:"info"}),success:x({color:d,name:"success"}),grey:Gce,contrastThreshold:n,getContrastText:p,augmentColor:x,tonalOffset:s,...v},i)}function Jce(e){const t={};return Object.entries(e).forEach(s=>{const[r,i]=s;typeof i=="object"&&(t[r]=`${i.fontStyle?`${i.fontStyle} `:""}${i.fontVariant?`${i.fontVariant} `:""}${i.fontWeight?`${i.fontWeight} `:""}${i.fontStretch?`${i.fontStretch} `:""}${i.fontSize||""}${i.lineHeight?`/${i.lineHeight} `:""}${i.fontFamily||""}`)}),t}function ede(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function tde(e){return Math.round(e*1e5)/1e5}const g$={textTransform:"uppercase"},p$='"Roboto", "Helvetica", "Arial", sans-serif';function ade(e,t){const{fontFamily:n=p$,fontSize:s=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d,...h}=typeof t=="function"?t(e):t,p=s/14,x=d||(b=>`${b/c*p}rem`),v=(b,N,w,S,_)=>({fontFamily:n,fontWeight:b,fontSize:x(N),lineHeight:w,...n===p$?{letterSpacing:`${tde(S/N)}em`}:{},..._,...u}),j={h1:v(r,96,1.167,-1.5),h2:v(r,60,1.2,-.5),h3:v(i,48,1.167,0),h4:v(i,34,1.235,.25),h5:v(i,24,1.334,0),h6:v(o,20,1.6,.15),subtitle1:v(i,16,1.75,.15),subtitle2:v(o,14,1.57,.1),body1:v(i,16,1.5,.15),body2:v(i,14,1.43,.15),button:v(o,14,1.75,.4,g$),caption:v(i,12,1.66,.4),overline:v(i,12,2.66,1,g$),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Rr({htmlFontSize:c,pxToRem:x,fontFamily:n,fontSize:s,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:l,...j},h,{clone:!1})}const nde=.2,sde=.14,rde=.12;function ln(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${nde})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${sde})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${rde})`].join(",")}const ide=["none",ln(0,2,1,-1,0,1,1,0,0,1,3,0),ln(0,3,1,-2,0,2,2,0,0,1,5,0),ln(0,3,3,-2,0,3,4,0,0,1,8,0),ln(0,2,4,-1,0,4,5,0,0,1,10,0),ln(0,3,5,-1,0,5,8,0,0,1,14,0),ln(0,3,5,-1,0,6,10,0,0,1,18,0),ln(0,4,5,-2,0,7,10,1,0,2,16,1),ln(0,5,5,-3,0,8,10,1,0,3,14,2),ln(0,5,6,-3,0,9,12,1,0,3,16,2),ln(0,6,6,-3,0,10,14,1,0,4,18,3),ln(0,6,7,-4,0,11,15,1,0,4,20,3),ln(0,7,8,-4,0,12,17,2,0,5,22,4),ln(0,7,8,-4,0,13,19,2,0,5,24,4),ln(0,7,9,-4,0,14,21,2,0,5,26,4),ln(0,8,9,-5,0,15,22,2,0,6,28,5),ln(0,8,10,-5,0,16,24,2,0,6,30,5),ln(0,8,11,-5,0,17,26,2,0,6,32,5),ln(0,9,11,-5,0,18,28,2,0,7,34,6),ln(0,9,12,-6,0,19,29,2,0,7,36,6),ln(0,10,13,-6,0,20,31,3,0,8,38,7),ln(0,10,13,-6,0,21,33,3,0,8,40,7),ln(0,10,14,-6,0,22,35,3,0,8,42,7),ln(0,11,14,-7,0,23,36,3,0,9,44,8),ln(0,11,15,-7,0,24,38,3,0,9,46,8)],ode={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},lde={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function x$(e){return`${Math.round(e)}ms`}function cde(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function dde(e){const t={...ode,...e.easing},n={...lde,...e.duration};return{getAutoHeightDuration:cde,create:(r=["all"],i={})=>{const{duration:o=n.standard,easing:l=t.easeInOut,delay:c=0,...u}=i;return(Array.isArray(r)?r:[r]).map(d=>`${d} ${typeof o=="string"?o:x$(o)} ${l} ${typeof c=="string"?c:x$(c)}`).join(",")},...e,easing:t,duration:n}}const ude={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function mde(e){return So(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function W9(e={}){const t={...e};function n(s){const r=Object.entries(s);for(let i=0;i<r.length;i++){const[o,l]=r[i];!mde(l)||o.startsWith("unstable_")?delete s[o]:So(l)&&(s[o]={...l},n(s[o]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function y$(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const fde=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let n=0;for(let s=0;s<t.length;s+=1)n+=+t[s];return n};function hde(e){Object.assign(e,{alpha(t,n){const s=this||e;return s.colorSpace?`oklch(from ${t} l c h / ${typeof n=="string"?`calc(${n})`:n})`:s.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof n=="string"?`calc(${n})`:n})`:B9(t,fde(n))},lighten(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #fff ${y$(n)})`:Lj(t,n)},darken(t,n){const s=this||e;return s.colorSpace?`color-mix(in ${s.colorSpace}, ${t}, #000 ${y$(n)})`:Ej(t,n)}})}function ck(e={},...t){const{breakpoints:n,mixins:s={},spacing:r,palette:i={},transitions:o={},typography:l={},shape:c,colorSpace:u,...d}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(Pu(20));const h=zL({...i,colorSpace:u}),p=$L(e);let x=Rr(p,{mixins:ede(p.breakpoints,s),palette:h,shadows:ide.slice(),typography:ade(h,l),transitions:dde(o),zIndex:{...ude}});return x=Rr(x,d),x=t.reduce((v,j)=>Rr(v,j),x),x.unstable_sxConfig={...gx,...d?.unstable_sxConfig},x.unstable_sx=function(j){return Af({sx:j,theme:this})},x.toRuntimeSource=W9,hde(x),x}function gde(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const pde=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=gde(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function V9(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function Y9(e){return e==="dark"?pde:[]}function xde(e){const{palette:t={mode:"light"},opacity:n,overlays:s,colorSpace:r,...i}=e,o=zL({...t,colorSpace:r});return{palette:o,opacity:{...V9(o.mode),...n},overlays:s||Y9(o.mode),...i}}function yde(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const bde=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],vde=e=>(t,n)=>{const s=e.rootSelector||":root",r=e.colorSchemeSelector;let i=r;if(r==="class"&&(i=".%s"),r==="data"&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const o={};return bde(e.cssVarPrefix).forEach(l=>{o[l]=n[l],delete n[l]}),i==="media"?{[s]:n,"@media (prefers-color-scheme: dark)":{[s]:o}}:i?{[i.replace("%s",t)]:o,[`${s}, ${i.replace("%s",t)}`]:n}:{[s]:{...n,...o}}}if(i&&i!=="media")return`${s}, ${i.replace("%s",String(t))}`}else if(t){if(i==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[s]:n}};if(i)return i.replace("%s",String(t))}return s};function wde(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function xt(e,t,n){!e[t]&&n&&(e[t]=n)}function Ug(e){return typeof e!="string"||!e.startsWith("hsl")?e:U9(e)}function pl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Fg(Ug(e[t])))}function jde(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const lo=e=>{try{return e()}catch{}},Nde=(e="mui")=>Fce(e);function l2(e,t,n,s,r){if(!n)return;n=n===!0?{}:n;const i=r==="dark"?"dark":"light";if(!s){t[r]=xde({...n,palette:{mode:i,...n?.palette},colorSpace:e});return}const{palette:o,...l}=ck({...s,palette:{mode:i,...n?.palette},colorSpace:e});return t[r]={...n,palette:o,opacity:{...V9(i),...n?.opacity},overlays:n?.overlays||Y9(i)},l}function Cde(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:s,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",nativeColor:o=!1,shouldSkipGeneratingVar:l=yde,colorSchemeSelector:c=n.light&&n.dark?"media":void 0,rootSelector:u=":root",...d}=e,h=Object.keys(n)[0],p=s||(n.light&&h!=="light"?"light":h),x=Nde(i),{[p]:v,light:j,dark:b,...N}=n,w={...N};let S=v;if((p==="dark"&&!("dark"in n)||p==="light"&&!("light"in n))&&(S=!0),!S)throw new Error(Pu(21,p));let _;o&&(_="oklch");const k=l2(_,w,S,d,p);j&&!w.light&&l2(_,w,j,void 0,"light"),b&&!w.dark&&l2(_,w,b,void 0,"dark");let T={defaultColorScheme:p,...k,cssVarPrefix:i,colorSchemeSelector:c,rootSelector:u,getCssVar:x,colorSchemes:w,font:{...Jce(k.typography),...k.font},spacing:jde(d.spacing)};Object.keys(T.colorSchemes).forEach(I=>{const D=T.colorSchemes[I].palette,H=z=>{const Q=z.split("-"),J=Q[1],Y=Q[2];return x(z,D[J][Y])};D.mode==="light"&&(xt(D.common,"background","#fff"),xt(D.common,"onBackground","#000")),D.mode==="dark"&&(xt(D.common,"background","#000"),xt(D.common,"onBackground","#fff"));function W(z,Q,J){if(_){let Y;return z===Vd&&(Y=`transparent ${((1-J)*100).toFixed(0)}%`),z===Ma&&(Y=`#000 ${(J*100).toFixed(0)}%`),z===Ia&&(Y=`#fff ${(J*100).toFixed(0)}%`),`color-mix(in ${_}, ${Q}, ${Y})`}return z(Q,J)}if(wde(D,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),D.mode==="light"){xt(D.Alert,"errorColor",W(Ma,D.error.light,.6)),xt(D.Alert,"infoColor",W(Ma,D.info.light,.6)),xt(D.Alert,"successColor",W(Ma,D.success.light,.6)),xt(D.Alert,"warningColor",W(Ma,D.warning.light,.6)),xt(D.Alert,"errorFilledBg",H("palette-error-main")),xt(D.Alert,"infoFilledBg",H("palette-info-main")),xt(D.Alert,"successFilledBg",H("palette-success-main")),xt(D.Alert,"warningFilledBg",H("palette-warning-main")),xt(D.Alert,"errorFilledColor",lo(()=>D.getContrastText(D.error.main))),xt(D.Alert,"infoFilledColor",lo(()=>D.getContrastText(D.info.main))),xt(D.Alert,"successFilledColor",lo(()=>D.getContrastText(D.success.main))),xt(D.Alert,"warningFilledColor",lo(()=>D.getContrastText(D.warning.main))),xt(D.Alert,"errorStandardBg",W(Ia,D.error.light,.9)),xt(D.Alert,"infoStandardBg",W(Ia,D.info.light,.9)),xt(D.Alert,"successStandardBg",W(Ia,D.success.light,.9)),xt(D.Alert,"warningStandardBg",W(Ia,D.warning.light,.9)),xt(D.Alert,"errorIconColor",H("palette-error-main")),xt(D.Alert,"infoIconColor",H("palette-info-main")),xt(D.Alert,"successIconColor",H("palette-success-main")),xt(D.Alert,"warningIconColor",H("palette-warning-main")),xt(D.AppBar,"defaultBg",H("palette-grey-100")),xt(D.Avatar,"defaultBg",H("palette-grey-400")),xt(D.Button,"inheritContainedBg",H("palette-grey-300")),xt(D.Button,"inheritContainedHoverBg",H("palette-grey-A100")),xt(D.Chip,"defaultBorder",H("palette-grey-400")),xt(D.Chip,"defaultAvatarColor",H("palette-grey-700")),xt(D.Chip,"defaultIconColor",H("palette-grey-700")),xt(D.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),xt(D.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),xt(D.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),xt(D.LinearProgress,"primaryBg",W(Ia,D.primary.main,.62)),xt(D.LinearProgress,"secondaryBg",W(Ia,D.secondary.main,.62)),xt(D.LinearProgress,"errorBg",W(Ia,D.error.main,.62)),xt(D.LinearProgress,"infoBg",W(Ia,D.info.main,.62)),xt(D.LinearProgress,"successBg",W(Ia,D.success.main,.62)),xt(D.LinearProgress,"warningBg",W(Ia,D.warning.main,.62)),xt(D.Skeleton,"bg",_?W(Vd,D.text.primary,.11):`rgba(${H("palette-text-primaryChannel")} / 0.11)`),xt(D.Slider,"primaryTrack",W(Ia,D.primary.main,.62)),xt(D.Slider,"secondaryTrack",W(Ia,D.secondary.main,.62)),xt(D.Slider,"errorTrack",W(Ia,D.error.main,.62)),xt(D.Slider,"infoTrack",W(Ia,D.info.main,.62)),xt(D.Slider,"successTrack",W(Ia,D.success.main,.62)),xt(D.Slider,"warningTrack",W(Ia,D.warning.main,.62));const z=_?W(Ma,D.background.default,.6825):Uy(D.background.default,.8);xt(D.SnackbarContent,"bg",z),xt(D.SnackbarContent,"color",lo(()=>_?lk.text.primary:D.getContrastText(z))),xt(D.SpeedDialAction,"fabHoverBg",Uy(D.background.paper,.15)),xt(D.StepConnector,"border",H("palette-grey-400")),xt(D.StepContent,"border",H("palette-grey-400")),xt(D.Switch,"defaultColor",H("palette-common-white")),xt(D.Switch,"defaultDisabledColor",H("palette-grey-100")),xt(D.Switch,"primaryDisabledColor",W(Ia,D.primary.main,.62)),xt(D.Switch,"secondaryDisabledColor",W(Ia,D.secondary.main,.62)),xt(D.Switch,"errorDisabledColor",W(Ia,D.error.main,.62)),xt(D.Switch,"infoDisabledColor",W(Ia,D.info.main,.62)),xt(D.Switch,"successDisabledColor",W(Ia,D.success.main,.62)),xt(D.Switch,"warningDisabledColor",W(Ia,D.warning.main,.62)),xt(D.TableCell,"border",W(Ia,W(Vd,D.divider,1),.88)),xt(D.Tooltip,"bg",W(Vd,D.grey[700],.92))}if(D.mode==="dark"){xt(D.Alert,"errorColor",W(Ia,D.error.light,.6)),xt(D.Alert,"infoColor",W(Ia,D.info.light,.6)),xt(D.Alert,"successColor",W(Ia,D.success.light,.6)),xt(D.Alert,"warningColor",W(Ia,D.warning.light,.6)),xt(D.Alert,"errorFilledBg",H("palette-error-dark")),xt(D.Alert,"infoFilledBg",H("palette-info-dark")),xt(D.Alert,"successFilledBg",H("palette-success-dark")),xt(D.Alert,"warningFilledBg",H("palette-warning-dark")),xt(D.Alert,"errorFilledColor",lo(()=>D.getContrastText(D.error.dark))),xt(D.Alert,"infoFilledColor",lo(()=>D.getContrastText(D.info.dark))),xt(D.Alert,"successFilledColor",lo(()=>D.getContrastText(D.success.dark))),xt(D.Alert,"warningFilledColor",lo(()=>D.getContrastText(D.warning.dark))),xt(D.Alert,"errorStandardBg",W(Ma,D.error.light,.9)),xt(D.Alert,"infoStandardBg",W(Ma,D.info.light,.9)),xt(D.Alert,"successStandardBg",W(Ma,D.success.light,.9)),xt(D.Alert,"warningStandardBg",W(Ma,D.warning.light,.9)),xt(D.Alert,"errorIconColor",H("palette-error-main")),xt(D.Alert,"infoIconColor",H("palette-info-main")),xt(D.Alert,"successIconColor",H("palette-success-main")),xt(D.Alert,"warningIconColor",H("palette-warning-main")),xt(D.AppBar,"defaultBg",H("palette-grey-900")),xt(D.AppBar,"darkBg",H("palette-background-paper")),xt(D.AppBar,"darkColor",H("palette-text-primary")),xt(D.Avatar,"defaultBg",H("palette-grey-600")),xt(D.Button,"inheritContainedBg",H("palette-grey-800")),xt(D.Button,"inheritContainedHoverBg",H("palette-grey-700")),xt(D.Chip,"defaultBorder",H("palette-grey-700")),xt(D.Chip,"defaultAvatarColor",H("palette-grey-300")),xt(D.Chip,"defaultIconColor",H("palette-grey-300")),xt(D.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),xt(D.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),xt(D.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),xt(D.LinearProgress,"primaryBg",W(Ma,D.primary.main,.5)),xt(D.LinearProgress,"secondaryBg",W(Ma,D.secondary.main,.5)),xt(D.LinearProgress,"errorBg",W(Ma,D.error.main,.5)),xt(D.LinearProgress,"infoBg",W(Ma,D.info.main,.5)),xt(D.LinearProgress,"successBg",W(Ma,D.success.main,.5)),xt(D.LinearProgress,"warningBg",W(Ma,D.warning.main,.5)),xt(D.Skeleton,"bg",_?W(Vd,D.text.primary,.13):`rgba(${H("palette-text-primaryChannel")} / 0.13)`),xt(D.Slider,"primaryTrack",W(Ma,D.primary.main,.5)),xt(D.Slider,"secondaryTrack",W(Ma,D.secondary.main,.5)),xt(D.Slider,"errorTrack",W(Ma,D.error.main,.5)),xt(D.Slider,"infoTrack",W(Ma,D.info.main,.5)),xt(D.Slider,"successTrack",W(Ma,D.success.main,.5)),xt(D.Slider,"warningTrack",W(Ma,D.warning.main,.5));const z=_?W(Ia,D.background.default,.985):Uy(D.background.default,.98);xt(D.SnackbarContent,"bg",z),xt(D.SnackbarContent,"color",lo(()=>_?q9.text.primary:D.getContrastText(z))),xt(D.SpeedDialAction,"fabHoverBg",Uy(D.background.paper,.15)),xt(D.StepConnector,"border",H("palette-grey-600")),xt(D.StepContent,"border",H("palette-grey-600")),xt(D.Switch,"defaultColor",H("palette-grey-300")),xt(D.Switch,"defaultDisabledColor",H("palette-grey-600")),xt(D.Switch,"primaryDisabledColor",W(Ma,D.primary.main,.55)),xt(D.Switch,"secondaryDisabledColor",W(Ma,D.secondary.main,.55)),xt(D.Switch,"errorDisabledColor",W(Ma,D.error.main,.55)),xt(D.Switch,"infoDisabledColor",W(Ma,D.info.main,.55)),xt(D.Switch,"successDisabledColor",W(Ma,D.success.main,.55)),xt(D.Switch,"warningDisabledColor",W(Ma,D.warning.main,.55)),xt(D.TableCell,"border",W(Ma,W(Vd,D.divider,1),.68)),xt(D.Tooltip,"bg",W(Vd,D.grey[700],.92))}pl(D.background,"default"),pl(D.background,"paper"),pl(D.common,"background"),pl(D.common,"onBackground"),pl(D,"divider"),Object.keys(D).forEach(z=>{const Q=D[z];z!=="tonalOffset"&&Q&&typeof Q=="object"&&(Q.main&&xt(D[z],"mainChannel",Fg(Ug(Q.main))),Q.light&&xt(D[z],"lightChannel",Fg(Ug(Q.light))),Q.dark&&xt(D[z],"darkChannel",Fg(Ug(Q.dark))),Q.contrastText&&xt(D[z],"contrastTextChannel",Fg(Ug(Q.contrastText))),z==="text"&&(pl(D[z],"primary"),pl(D[z],"secondary")),z==="action"&&(Q.active&&pl(D[z],"active"),Q.selected&&pl(D[z],"selected")))})}),T=t.reduce((I,D)=>Rr(I,D),T);const A={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:l,getSelector:vde(T),enableContrastVars:o},{vars:E,generateThemeVars:M,generateStyleSheets:O}=Hce(T,A);return T.vars=E,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([I,D])=>{T[I]=D}),T.generateThemeVars=M,T.generateStyleSheets=O,T.generateSpacing=function(){return D9(d.spacing,TL(this))},T.getColorSchemeSelector=qce(c),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=l,T.unstable_sxConfig={...gx,...d?.unstable_sxConfig},T.unstable_sx=function(D){return Af({sx:D,theme:this})},T.toRuntimeSource=W9,T}function b$(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:zL({...n===!0?{}:n.palette,mode:t})})}function Sde(e={},...t){const{palette:n,cssVariables:s=!1,colorSchemes:r=n?void 0:{light:!0},defaultColorScheme:i=n?.mode,...o}=e,l=i||"light",c=r?.[l],u={...r,...n?{[l]:{...typeof c!="boolean"&&c,palette:n}}:void 0};if(s===!1){if(!("colorSchemes"in e))return ck(e,...t);let d=n;"palette"in e||u[l]&&(u[l]!==!0?d=u[l].palette:l==="dark"&&(d={mode:"dark"}));const h=ck({...e,palette:d},...t);return h.defaultColorScheme=l,h.colorSchemes=u,h.palette.mode==="light"&&(h.colorSchemes.light={...u.light!==!0&&u.light,palette:h.palette},b$(h,"dark",u.dark)),h.palette.mode==="dark"&&(h.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:h.palette},b$(h,"light",u.light)),h}return!n&&!("light"in u)&&l==="light"&&(u.light=!0),Cde({...o,colorSchemes:u,defaultColorScheme:l,...typeof s!="boolean"&&s},...t)}const FL=Sde(),Dj="$$material";function Vo(){const e=M9(FL);return e[Dj]||e}function _de(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Q9=e=>_de(e)&&e!=="classes",ma=bce({themeId:Dj,defaultTheme:FL,rootShouldForwardProp:Q9});function Ade(){return ole}function Nd(e){return Ice(e)}function Fo(...e){const t=f.useRef(void 0),n=f.useCallback(s=>{const r=e.map(i=>{if(i==null)return null;if(typeof i=="function"){const o=i,l=o(s);return typeof l=="function"?l:()=>{o(null)}}return i.current=s,()=>{i.current=null}});return()=>{r.forEach(i=>i?.())}},e);return f.useMemo(()=>e.every(s=>s==null)?null:s=>{t.current&&(t.current(),t.current=void 0),s!=null&&(t.current=n(s))},e)}function Tde(e){return typeof e=="string"}function K9(e,t,n){return e===void 0||Tde(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function X9(e,t,n){return typeof e=="function"?e(t,n):e}function kde(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(s=>s.match(/^on[A-Z]/)&&typeof e[s]=="function"&&!t.includes(s)).forEach(s=>{n[s]=e[s]}),n}function v$(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function Z9(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:s,externalForwardedProps:r,className:i}=e;if(!t){const x=It(n?.className,i,r?.className,s?.className),v={...n?.style,...r?.style,...s?.style},j={...n,...r,...s};return x.length>0&&(j.className=x),Object.keys(v).length>0&&(j.style=v),{props:j,internalRef:void 0}}const o=kde({...r,...s}),l=v$(s),c=v$(r),u=t(o),d=It(u?.className,n?.className,i,r?.className,s?.className),h={...u?.style,...n?.style,...r?.style,...s?.style},p={...u,...n,...c,...l};return d.length>0&&(p.className=d),Object.keys(h).length>0&&(p.style=h),{props:p,internalRef:u.ref}}function w$(e,t){const{className:n,elementType:s,ownerState:r,externalForwardedProps:i,internalForwardedProps:o,shouldForwardComponentProp:l=!1,...c}=t,{component:u,slots:d={[e]:void 0},slotProps:h={[e]:void 0},...p}=i,x=d[e]||s,v=X9(h[e],r),{props:{component:j,...b},internalRef:N}=Z9({className:n,...c,externalForwardedProps:e==="root"?p:void 0,externalSlotProps:v}),w=Fo(N,v?.ref,t.ref),S=e==="root"?j||u:j,_=K9(x,{...e==="root"&&!u&&!d[e]&&o,...e!=="root"&&!d[e]&&o,...b,...S&&!l&&{as:S},...S&&l&&{component:S},ref:w},r);return[x,_]}function xa(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function dk(e,t){return dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},dk(e,t)}function J9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dk(e,t)}const j$={disabled:!1},Ev=bt.createContext(null);var Ede=function(t){return t.scrollTop},Bg="unmounted",Zd="exited",Jd="entering",lf="entered",uk="exiting",tc=(function(e){J9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=r,l=o&&!o.isMounting?s.enter:s.appear,c;return i.appearStatus=null,s.in?l?(c=Zd,i.appearStatus=Jd):c=lf:s.unmountOnExit||s.mountOnEnter?c=Bg:c=Zd,i.state={status:c},i.nextCallback=null,i}t.getDerivedStateFromProps=function(r,i){var o=r.in;return o&&i.status===Bg?{status:Zd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var i=null;if(r!==this.props){var o=this.state.status;this.props.in?o!==Jd&&o!==lf&&(i=Jd):(o===Jd||o===lf)&&(i=uk)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,i,o,l;return i=o=l=r,r!=null&&typeof r!="number"&&(i=r.exit,o=r.enter,l=r.appear!==void 0?r.appear:o),{exit:i,enter:o,appear:l}},n.updateStatus=function(r,i){if(r===void 0&&(r=!1),i!==null)if(this.cancelNextCallback(),i===Jd){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Iy.findDOMNode(this);o&&Ede(o)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Zd&&this.setState({status:Bg})},n.performEnter=function(r){var i=this,o=this.props.enter,l=this.context?this.context.isMounting:r,c=this.props.nodeRef?[l]:[Iy.findDOMNode(this),l],u=c[0],d=c[1],h=this.getTimeouts(),p=l?h.appear:h.enter;if(!r&&!o||j$.disabled){this.safeSetState({status:lf},function(){i.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:Jd},function(){i.props.onEntering(u,d),i.onTransitionEnd(p,function(){i.safeSetState({status:lf},function(){i.props.onEntered(u,d)})})})},n.performExit=function(){var r=this,i=this.props.exit,o=this.getTimeouts(),l=this.props.nodeRef?void 0:Iy.findDOMNode(this);if(!i||j$.disabled){this.safeSetState({status:Zd},function(){r.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:uk},function(){r.props.onExiting(l),r.onTransitionEnd(o.exit,function(){r.safeSetState({status:Zd},function(){r.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,i){i=this.setNextCallback(i),this.setState(r,i)},n.setNextCallback=function(r){var i=this,o=!0;return this.nextCallback=function(l){o&&(o=!1,i.nextCallback=null,r(l))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(r,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Iy.findDOMNode(this),l=r==null&&!this.props.addEndListener;if(!o||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Bg)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var l=xa(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bt.createElement(Ev.Provider,{value:null},typeof o=="function"?o(r,l):bt.cloneElement(bt.Children.only(o),l))},t})(bt.Component);tc.contextType=Ev;tc.propTypes={};function Vm(){}tc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vm,onEntering:Vm,onEntered:Vm,onExit:Vm,onExiting:Vm,onExited:Vm};tc.UNMOUNTED=Bg;tc.EXITED=Zd;tc.ENTERING=Jd;tc.ENTERED=lf;tc.EXITING=uk;function Lde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UL(e,t){var n=function(i){return t&&f.isValidElement(i)?t(i):i},s=Object.create(null);return e&&f.Children.map(e,function(r){return r}).forEach(function(r){s[r.key]=n(r)}),s}function Pde(e,t){e=e||{},t=t||{};function n(d){return d in t?t[d]:e[d]}var s=Object.create(null),r=[];for(var i in e)i in t?r.length&&(s[i]=r,r=[]):r.push(i);var o,l={};for(var c in t){if(s[c])for(o=0;o<s[c].length;o++){var u=s[c][o];l[s[c][o]]=n(u)}l[c]=n(c)}for(o=0;o<r.length;o++)l[r[o]]=n(r[o]);return l}function uu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Dde(e,t){return UL(e.children,function(n){return f.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:uu(n,"appear",e),enter:uu(n,"enter",e),exit:uu(n,"exit",e)})})}function Ode(e,t,n){var s=UL(e.children),r=Pde(t,s);return Object.keys(r).forEach(function(i){var o=r[i];if(f.isValidElement(o)){var l=i in t,c=i in s,u=t[i],d=f.isValidElement(u)&&!u.props.in;c&&(!l||d)?r[i]=f.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:uu(o,"exit",e),enter:uu(o,"enter",e)}):!c&&l&&!d?r[i]=f.cloneElement(o,{in:!1}):c&&l&&f.isValidElement(u)&&(r[i]=f.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:uu(o,"exit",e),enter:uu(o,"enter",e)}))}}),r}var Mde=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ide={component:"div",childFactory:function(t){return t}},BL=(function(e){J9(t,e);function t(s,r){var i;i=e.call(this,s,r)||this;var o=i.handleExited.bind(Lde(i));return i.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},i}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(r,i){var o=i.children,l=i.handleExited,c=i.firstRender;return{children:c?Dde(r,l):Ode(r,o,l),firstRender:!1}},n.handleExited=function(r,i){var o=UL(this.props.children);r.key in o||(r.props.onExited&&r.props.onExited(i),this.mounted&&this.setState(function(l){var c=et({},l.children);return delete c[r.key],{children:c}}))},n.render=function(){var r=this.props,i=r.component,o=r.childFactory,l=xa(r,["component","childFactory"]),c=this.state.contextValue,u=Mde(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,i===null?bt.createElement(Ev.Provider,{value:c},u):bt.createElement(Ev.Provider,{value:c},bt.createElement(i,l,u))},t})(bt.Component);BL.propTypes={};BL.defaultProps=Ide;function eq(e){return parseInt(f.version,10)>=19?e?.props?.ref||null:e?.ref||null}const $de=e=>e.scrollTop;function N$(e,t){const{timeout:n,easing:s,style:r={}}=e;return{duration:r.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:r.transitionTimingFunction??(typeof s=="object"?s[t.mode]:s),delay:r.transitionDelay}}const Rde={entering:{opacity:1},entered:{opacity:1}},zde=f.forwardRef(function(t,n){const s=Vo(),r={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{addEndListener:i,appear:o=!0,children:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:p,onExit:x,onExited:v,onExiting:j,style:b,timeout:N=r,TransitionComponent:w=tc,...S}=t,_=f.useRef(null),k=Fo(_,eq(l),n),T=W=>z=>{if(W){const Q=_.current;z===void 0?W(Q):W(Q,z)}},A=T(p),E=T((W,z)=>{$de(W);const Q=N$({style:b,timeout:N,easing:c},{mode:"enter"});W.style.webkitTransition=s.transitions.create("opacity",Q),W.style.transition=s.transitions.create("opacity",Q),d&&d(W,z)}),M=T(h),O=T(j),I=T(W=>{const z=N$({style:b,timeout:N,easing:c},{mode:"exit"});W.style.webkitTransition=s.transitions.create("opacity",z),W.style.transition=s.transitions.create("opacity",z),x&&x(W)}),D=T(v),H=W=>{i&&i(_.current,W)};return a.jsx(w,{appear:o,in:u,nodeRef:_,onEnter:E,onEntered:M,onEntering:A,onExit:I,onExited:D,onExiting:O,addEndListener:H,timeout:N,...S,children:(W,{ownerState:z,...Q})=>f.cloneElement(l,{style:{opacity:0,visibility:W==="exited"&&!u?"hidden":void 0,...Rde[W],...b,...l.props.style},ref:k,...Q})})});function Fde(e){return Yn("MuiBackdrop",e)}An("MuiBackdrop",["root","invisible"]);const Ude=e=>{const{classes:t,invisible:n}=e;return Vn({root:["root",n&&"invisible"]},Fde,t)},Bde=ma("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Hde=f.forwardRef(function(t,n){const s=Nd({props:t,name:"MuiBackdrop"}),{children:r,className:i,component:o="div",invisible:l=!1,open:c,components:u={},componentsProps:d={},slotProps:h={},slots:p={},TransitionComponent:x,transitionDuration:v,...j}=s,b={...s,component:o,invisible:l},N=Ude(b),w={transition:x,root:u.Root,...p},S={...d,...h},_={component:o,slots:w,slotProps:S},[k,T]=w$("root",{elementType:Bde,externalForwardedProps:_,className:It(N.root,i),ownerState:b}),[A,E]=w$("transition",{elementType:zde,externalForwardedProps:_,ownerState:b});return a.jsx(A,{in:c,timeout:v,...j,...E,children:a.jsx(k,{"aria-hidden":!0,...T,classes:N,ref:n,children:r})})}),Ou=zce;function qde(e){return typeof e.main=="string"}function Gde(e,t=[]){if(!qde(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function vp(e=[]){return([,t])=>t&&Gde(t,e)}function Wde(e){return Yn("MuiCircularProgress",e)}An("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","track","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Mi=44,mk=xx`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,fk=xx`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Vde=typeof mk!="string"?IL`
        animation: ${mk} 1.4s linear infinite;
      `:null,Yde=typeof fk!="string"?IL`
        animation: ${fk} 1.4s ease-in-out infinite;
      `:null,Qde=e=>{const{classes:t,variant:n,color:s,disableShrink:r}=e,i={root:["root",n,`color${Wa(s)}`],svg:["svg"],track:["track"],circle:["circle",`circle${Wa(n)}`,r&&"circleDisableShrink"]};return Vn(i,Wde,t)},Kde=ma("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Wa(n.color)}`]]}})(Ou(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Vde||{animation:`${mk} 1.4s linear infinite`}},...Object.entries(e.palette).filter(vp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Xde=ma("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Zde=ma("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Wa(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(Ou(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:Yde||{animation:`${fk} 1.4s ease-in-out infinite`}}]}))),Jde=ma("circle",{name:"MuiCircularProgress",slot:"Track"})(Ou(({theme:e})=>({stroke:"currentColor",opacity:(e.vars||e).palette.action.activatedOpacity}))),HL=f.forwardRef(function(t,n){const s=Nd({props:t,name:"MuiCircularProgress"}),{className:r,color:i="primary",disableShrink:o=!1,enableTrackSlot:l=!1,size:c=40,style:u,thickness:d=3.6,value:h=0,variant:p="indeterminate",...x}=s,v={...s,color:i,disableShrink:o,size:c,thickness:d,value:h,variant:p,enableTrackSlot:l},j=Qde(v),b={},N={},w={};if(p==="determinate"){const S=2*Math.PI*((Mi-d)/2);b.strokeDasharray=S.toFixed(3),w["aria-valuenow"]=Math.round(h),b.strokeDashoffset=`${((100-h)/100*S).toFixed(3)}px`,N.transform="rotate(-90deg)"}return a.jsx(Kde,{className:It(j.root,r),style:{width:c,height:c,...N,...u},ownerState:v,ref:n,role:"progressbar",...w,...x,children:a.jsxs(Xde,{className:j.svg,ownerState:v,viewBox:`${Mi/2} ${Mi/2} ${Mi} ${Mi}`,children:[l?a.jsx(Jde,{className:j.track,ownerState:v,cx:Mi,cy:Mi,r:(Mi-d)/2,fill:"none",strokeWidth:d,"aria-hidden":"true"}):null,a.jsx(Zde,{className:j.circle,style:b,ownerState:v,cx:Mi,cy:Mi,r:(Mi-d)/2,fill:"none",strokeWidth:d})]})})});function tq(e){return a.jsx(Hde,{sx:t=>({color:"#fff",zIndex:t.zIndex.drawer+1}),open:e,children:a.jsx(HL,{color:"inherit"})})}var Ss={},By={},C$;function eue(){if(C$)return By;C$=1,Object.defineProperty(By,"__esModule",{value:!0});function e(t,n){return t.reduce((s,r)=>{const i=String(r[n]);return s[i]||(s[i]=[]),s[i].push(r),s},{})}return By.default=e,By}var Hy={},S$;function tue(){if(S$)return Hy;S$=1,Object.defineProperty(Hy,"__esModule",{value:!0});function e(t,n){return t.replace(/{([^{}]*)}/g,(s,r)=>{const i=n[r];return typeof i=="string"||typeof i=="number"?i.toString():s})}return Hy.default=e,Hy}var qy={},_$;function aue(){if(_$)return qy;_$=1,Object.defineProperty(qy,"__esModule",{value:!0});const e=[{countryNameEn:"Andorra",countryNameLocal:"Andorra",countryCode:"AD",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"ca",officialLanguageNameEn:"Catalan, Valencian",officialLanguageNameLocal:"Catal, Valenci",countryCallingCode:"376",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Afghanistan",countryNameLocal:"     ,   ",countryCode:"AF",currencyCode:"AFN",currencyNameEn:"Afghan afghani",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"93",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Antigua and Barbuda",countryNameLocal:"Antigua and Barbuda",countryCode:"AG",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1268",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Anguilla",countryNameLocal:"Anguilla",countryCode:"AI",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1264",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Albania",countryNameLocal:"Shqipria",countryCode:"AL",currencyCode:"ALL",currencyNameEn:"Albanian lek",tinType:"NIPT",tinName:"Numri i Identifikimit pr Personin e Tatueshm",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"355",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Armenia",countryNameLocal:"",countryCode:"AM",currencyCode:"AMD",currencyNameEn:"Armenian dram",tinType:"",tinName:"",officialLanguageCode:"hy",officialLanguageNameEn:"Armenian",officialLanguageNameLocal:"",countryCallingCode:"374",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Angola",countryNameLocal:"Angola",countryCode:"AO",currencyCode:"AOA",currencyNameEn:"Angolan kwanza",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"244",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Antarctica",countryNameLocal:"Antarctica, Antrtico, Antarctique, ",countryCode:"AQ",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Argentina",countryNameLocal:"Argentina",countryCode:"AR",currencyCode:"ARS",currencyNameEn:"Argentine peso",tinType:"CUIT",tinName:"Cdigo nico de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"54",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"American Samoa",countryNameLocal:"American Samoa",countryCode:"AS",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1684",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Austria",countryNameLocal:"sterreich",countryCode:"AT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"UID",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"43",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Australia",countryNameLocal:"Australia",countryCode:"AU",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"ABN",tinName:"Australian Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Aruba",countryNameLocal:"Aruba",countryCode:"AW",currencyCode:"AWG",currencyNameEn:"Aruban florin",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"297",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"land Islands",countryNameLocal:"land",countryCode:"AX",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Azerbaijan",countryNameLocal:"Azrbaycan",countryCode:"AZ",currencyCode:"AZN",currencyNameEn:"Azerbaijani manat",tinType:"",tinName:"",officialLanguageCode:"az",officialLanguageNameEn:"Azerbaijani",officialLanguageNameLocal:"azrbaycan dili",countryCallingCode:"994",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bosnia and Herzegovina",countryNameLocal:"Bosna i Hercegovina",countryCode:"BA",currencyCode:"BAM",currencyNameEn:"Bosnia and Herzegovina convertible mark",tinType:"",tinName:"",officialLanguageCode:"bs",officialLanguageNameEn:"Bosnian",officialLanguageNameLocal:"bosanski jezik",countryCallingCode:"387",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Barbados",countryNameLocal:"Barbados",countryCode:"BB",currencyCode:"BBD",currencyNameEn:"Barbados dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1246",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bangladesh",countryNameLocal:" ",countryCode:"BD",currencyCode:"BDT",currencyNameEn:"Bangladeshi taka",tinType:"",tinName:"",officialLanguageCode:"bn",officialLanguageNameEn:"Bengali",officialLanguageNameLocal:"",countryCallingCode:"880",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Belgium",countryNameLocal:"Belgi, Belgique, Belgien",countryCode:"BE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVABTW-nr Mwst-nr",tinName:"BTW identificatienummer / Numro de TVA",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"32",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Burkina Faso",countryNameLocal:"Burkina Faso",countryCode:"BF",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"226",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Bulgaria",countryNameLocal:"",countryCode:"BG",currencyCode:"BGN",currencyNameEn:"Bulgarian lev",tinType:" ",tinName:"   ",officialLanguageCode:"bg",officialLanguageNameEn:"Bulgarian",officialLanguageNameLocal:" ",countryCallingCode:"359",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Bahrain",countryNameLocal:"",countryCode:"BH",currencyCode:"BHD",currencyNameEn:"Bahraini dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"973",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Burundi",countryNameLocal:"Burundi",countryCode:"BI",currencyCode:"BIF",currencyNameEn:"Burundian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"257",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Benin",countryNameLocal:"Bnin",countryCode:"BJ",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"229",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saint Barthlemy",countryNameLocal:"Saint-Barthlemy",countryCode:"BL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bermuda",countryNameLocal:"Bermuda",countryCode:"BM",currencyCode:"BMD",currencyNameEn:"Bermudian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1441",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Brunei Darussalam",countryNameLocal:"Brunei Darussalam",countryCode:"BN",currencyCode:"BND",currencyNameEn:"Brunei dollar",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"673",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bolivia (Plurinational State of)",countryNameLocal:"Bolivia, Bulibiya, Volvia, Wuliwya",countryCode:"BO",currencyCode:"BOP",currencyNameEn:"",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"591",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bonaire, Sint Eustatius and Saba",countryNameLocal:"Caribisch Nederland",countryCode:"BQ",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"5997",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Brazil",countryNameLocal:"Brasil",countryCode:"BR",currencyCode:"BRL",currencyNameEn:"Brazilian real",tinType:"CNPJ",tinName:"Cadastro Nacional de Pessoa Jurdica",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"55",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Bhutan",countryNameLocal:"",countryCode:"BT",currencyCode:"BTN",currencyNameEn:"Bhutanese ngultrum",tinType:"",tinName:"",officialLanguageCode:"dz",officialLanguageNameEn:"Dzongkha",officialLanguageNameLocal:"",countryCallingCode:"975",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Bouvet Island",countryNameLocal:"Bouvetya",countryCode:"BV",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"47",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Botswana",countryNameLocal:"Botswana",countryCode:"BW",currencyCode:"BWP",currencyNameEn:"Botswana pula",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"267",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Belarus",countryNameLocal:"",countryCode:"BY",currencyCode:"BYR",currencyNameEn:"",tinType:" (UNP)",tinName:"  ",officialLanguageCode:"be",officialLanguageNameEn:"Belarusian",officialLanguageNameLocal:" ",countryCallingCode:"375",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Belize",countryNameLocal:"Belize",countryCode:"BZ",currencyCode:"BZD",currencyNameEn:"Belize dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"501",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Canada",countryNameLocal:"Canada",countryCode:"CA",currencyCode:"CAD",currencyNameEn:"Canadian dollar",tinType:"BN / NE",tinName:"Business Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:["403","587","780","825","236","250","604","672","778","204","431","506","709","782","902","226","249","289","343","365","416","437","519","548","613","647","705","807","905","367","418","438","450","514","579","581","819","873","306","639","867"],region:"North America",flag:""},{countryNameEn:"Switzerland",countryNameLocal:"Schweiz, Suisse, Svizzera, Svizra",countryCode:"CH",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"MWST/TVA/IVA",tinName:"Mehrwertsteuernummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"41",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Cte d'Ivoire",countryNameLocal:"Cte d'Ivoire",countryCode:"CI",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"225",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Chile",countryNameLocal:"Chile",countryCode:"CL",currencyCode:"CLP",currencyNameEn:"Chilean peso",tinType:"RUT",tinName:"Rol nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"56",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cameroon",countryNameLocal:"Cameroun, Cameroon",countryCode:"CM",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"237",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"China",countryNameLocal:"",countryCode:"CN",currencyCode:"CNY",currencyNameEn:"Renminbi (Chinese) yuan",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"86",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Colombia",countryNameLocal:"Colombia",countryCode:"CO",currencyCode:"COP",currencyNameEn:"Colombian peso",tinType:"NIT",tinName:"Nmero De Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"57",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Costa Rica",countryNameLocal:"Costa Rica",countryCode:"CR",currencyCode:"CRC",currencyNameEn:"Costa Rican colon",tinType:"",tinName:"Cdula Jurdica",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"506",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cuba",countryNameLocal:"Cuba",countryCode:"CU",currencyCode:"CUC",currencyNameEn:"Cuban convertible peso",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"53",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Cabo Verde",countryNameLocal:"Cabo Verde",countryCode:"CV",currencyCode:"CVE",currencyNameEn:"Cape Verdean escudo",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"238",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Curaao",countryNameLocal:"Curaao",countryCode:"CW",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Christmas Island",countryNameLocal:"Christmas Island",countryCode:"CX",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cyprus",countryNameLocal:", Kibris",countryCode:"CY",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"  ...",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"357",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Germany",countryNameLocal:"Deutschland",countryCode:"DE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"USt-IdNr.",tinName:"Umsatzsteuer-Identifikationsnummer",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"49",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Djibouti",countryNameLocal:"Djibouti, , Jabuuti, Gabuutih",countryCode:"DJ",currencyCode:"DJF",currencyNameEn:"Djiboutian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"253",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Denmark",countryNameLocal:"Danmark",countryCode:"DK",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"CVR",tinName:"Momsregistreringsnummer",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"45",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Dominica",countryNameLocal:"Dominica",countryCode:"DM",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"767",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Algeria",countryNameLocal:"",countryCode:"DZ",currencyCode:"DZD",currencyNameEn:"Algerian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"213",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Ecuador",countryNameLocal:"Ecuador",countryCode:"EC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"RUC",tinName:"Nmero de Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"593",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Estonia",countryNameLocal:"Eesti",countryCode:"EE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"KMKR",tinName:"Kibemaksukohustuslase number",officialLanguageCode:"et",officialLanguageNameEn:"Estonian",officialLanguageNameLocal:"eesti, eesti keel",countryCallingCode:"372",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Egypt",countryNameLocal:"",countryCode:"EG",currencyCode:"EGP",currencyNameEn:"Egyptian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"20",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Western Sahara",countryNameLocal:"Sahara Occidental",countryCode:"EH",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"212",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eritrea",countryNameLocal:", , Eritrea",countryCode:"ER",currencyCode:"ERN",currencyNameEn:"Eritrean nakfa",tinType:"",tinName:"",officialLanguageCode:"ti",officialLanguageNameEn:"Tigrinya",officialLanguageNameLocal:"",countryCallingCode:"291",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Spain",countryNameLocal:"Espaa",countryCode:"ES",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIF (CIF)",tinName:"Nmero de Identificacin Fiscal (formerly named Cdigo de Identificacin Fiscal)",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"34",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ethiopia",countryNameLocal:", Itoophiyaa",countryCode:"ET",currencyCode:"ETB",currencyNameEn:"Ethiopian birr",tinType:"",tinName:"",officialLanguageCode:"am",officialLanguageNameEn:"Amharic",officialLanguageNameLocal:"",countryCallingCode:"251",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Finland",countryNameLocal:"Suomi",countryCode:"FI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ALV nro",tinName:"Arvonlisveronumero",officialLanguageCode:"fi",officialLanguageNameEn:"Finnish",officialLanguageNameLocal:"suomi, suomen kieli",countryCallingCode:"358",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Fiji",countryNameLocal:"Fiji",countryCode:"FJ",currencyCode:"FJD",currencyNameEn:"Fiji dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"679",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Micronesia (Federated States of)",countryNameLocal:"Micronesia",countryCode:"FM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"691",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"France",countryNameLocal:"France",countryCode:"FR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"n TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute / Numro de TVA intracommunautaire",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"33",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gabon",countryNameLocal:"Gabon",countryCode:"GA",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"241",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Grenada",countryNameLocal:"Grenada",countryCode:"GD",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1473",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Georgia",countryNameLocal:"",countryCode:"GE",currencyCode:"GEL",currencyNameEn:"Georgian lari",tinType:"",tinName:"",officialLanguageCode:"ka",officialLanguageNameEn:"Georgian",officialLanguageNameLocal:"",countryCallingCode:"995",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"French Guiana",countryNameLocal:"Guyane franaise",countryCode:"GF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"594",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guernsey",countryNameLocal:"Guernsey",countryCode:"GG",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Ghana",countryNameLocal:"Ghana",countryCode:"GH",currencyCode:"GHS",currencyNameEn:"Ghanaian cedi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"233",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Gibraltar",countryNameLocal:"Gibraltar",countryCode:"GI",currencyCode:"GIP",currencyNameEn:"Gibraltar pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"350",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Greenland",countryNameLocal:"Kalaallit Nunaat, Grnland",countryCode:"GL",currencyCode:"DKK",currencyNameEn:"Danish krone",tinType:"",tinName:"",officialLanguageCode:"kl",officialLanguageNameEn:"Kalaallisut, Greenlandic",officialLanguageNameLocal:"kalaallisut, kalaallit oqaasii",countryCallingCode:"299",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Guinea",countryNameLocal:"Guine",countryCode:"GN",currencyCode:"GNF",currencyNameEn:"Guinean franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"224",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guadeloupe",countryNameLocal:"Guadeloupe",countryCode:"GP",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Equatorial Guinea",countryNameLocal:"Guiena ecuatorial, Guine quatoriale, Guin Equatorial",countryCode:"GQ",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"240",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Greece",countryNameLocal:"",countryCode:"GR",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"el",officialLanguageNameEn:"Greek, Modern (1453-)",officialLanguageNameLocal:"",countryCallingCode:"30",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"South Georgia and the South Sandwich Islands",countryNameLocal:"South Georgia and the South Sandwich Islands",countryCode:"GS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guatemala",countryNameLocal:"Guatemala",countryCode:"GT",currencyCode:"GTQ",currencyNameEn:"Guatemalan quetzal",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"502",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Guam",countryNameLocal:"Guam, Guhn",countryCode:"GU",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Guinea-Bissau",countryNameLocal:"Guin-Bissau",countryCode:"GW",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"245",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Guyana",countryNameLocal:"Guyana",countryCode:"GY",currencyCode:"GYD",currencyNameEn:"Guyanese dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"592",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hong Kong",countryNameLocal:", Hong Kong",countryCode:"HK",currencyCode:"HKD",currencyNameEn:"Hong Kong dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"852",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Honduras",countryNameLocal:"Honduras",countryCode:"HN",currencyCode:"HNL",currencyNameEn:"Honduran lempira",tinType:"RTN",tinName:"Registro Tributario Nacional",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"504",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Croatia",countryNameLocal:"Hrvatska",countryCode:"HR",currencyCode:"HRK",currencyNameEn:"Croatian kuna",tinType:"PDV-ID; OIB",tinName:"PDV Id. Broj OIB",officialLanguageCode:"hr",officialLanguageNameEn:"Croatian",officialLanguageNameLocal:"hrvatski jezik",countryCallingCode:"385",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Haiti",countryNameLocal:"Hati, Ayiti",countryCode:"HT",currencyCode:"HTG",currencyNameEn:"Haitian gourde",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"509",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Hungary",countryNameLocal:"Magyarorszg",countryCode:"HU",currencyCode:"HUF",currencyNameEn:"Hungarian forint",tinType:"ANUM",tinName:"Kzssgi adszm",officialLanguageCode:"hu",officialLanguageNameEn:"Hungarian",officialLanguageNameLocal:"magyar",countryCallingCode:"36",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Indonesia",countryNameLocal:"Indonesia",countryCode:"ID",currencyCode:"IDR",currencyNameEn:"Indonesian rupiah",tinType:"NPWP",tinName:"Nomor Pokok Wajib Pajak",officialLanguageCode:"id",officialLanguageNameEn:"Indonesian",officialLanguageNameLocal:"Bahasa Indonesia",countryCallingCode:"62",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Ireland",countryNameLocal:"Ireland, ire",countryCode:"IE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"VAT or CBL",tinName:"Value added tax identification no.",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"353",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Israel",countryNameLocal:"",countryCode:"IL",currencyCode:"ILS",currencyNameEn:"Israeli new shekel",tinType:"",tinName:`'   / "`,officialLanguageCode:"he",officialLanguageNameEn:"Hebrew",officialLanguageNameLocal:"",countryCallingCode:"972",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Isle of Man",countryNameLocal:"Isle of Man",countryCode:"IM",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"India",countryNameLocal:", India",countryCode:"IN",currencyCode:"INR",currencyNameEn:"Indian rupee",tinType:"VAT TIN / CST TIN",tinName:"Value Added Tax - Taxpayer Identification Number / Central Sales Tax - Taxpayer Identification Number (In most states)Not applicable",officialLanguageCode:"hi",officialLanguageNameEn:"Hindi",officialLanguageNameLocal:", ",countryCallingCode:"91",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"British Indian Ocean Territories",countryNameLocal:"British Indian Ocean Territories",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Iraq",countryNameLocal:", Iraq",countryCode:"IQ",currencyCode:"IQD",currencyNameEn:"Iraqi dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"964",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Iran (Islamic Republic of)",countryNameLocal:"",countryCode:"IR",currencyCode:"IRR",currencyNameEn:"Iranian rial",tinType:"",tinName:"",officialLanguageCode:"fa",officialLanguageNameEn:"Persian",officialLanguageNameLocal:"",countryCallingCode:"98",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Iceland",countryNameLocal:"sland",countryCode:"IS",currencyCode:"ISK",currencyNameEn:"Icelandic krna",tinType:"VSK / VASK",tinName:"Virisaukaskattsnmer",officialLanguageCode:"is",officialLanguageNameEn:"Icelandic",officialLanguageNameLocal:"slenska",countryCallingCode:"354",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Italy",countryNameLocal:"Italia",countryCode:"IT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"P.IVA",tinName:"Partita IVA(IVA = Imposta sul Valore Aggiunto)",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jersey",countryNameLocal:"Jersey",countryCode:"JE",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Jamaica",countryNameLocal:"Jamaica",countryCode:"JM",currencyCode:"JMD",currencyNameEn:"Jamaican dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"876",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Jordan",countryNameLocal:"",countryCode:"JO",currencyCode:"JOD",currencyNameEn:"Jordanian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"962",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Japan",countryNameLocal:"",countryCode:"JP",currencyCode:"JPY",currencyNameEn:"Japanese yen",tinType:"",tinName:"",officialLanguageCode:"ja",officialLanguageNameEn:"Japanese",officialLanguageNameLocal:" ()",countryCallingCode:"81",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Kenya",countryNameLocal:"Kenya",countryCode:"KE",currencyCode:"KES",currencyNameEn:"Kenyan shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"254",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Kyrgyzstan",countryNameLocal:", ",countryCode:"KG",currencyCode:"KGS",currencyNameEn:"Kyrgyzstani som",tinType:"",tinName:"",officialLanguageCode:"ky",officialLanguageNameEn:"Kirghiz, Kyrgyz",officialLanguageNameLocal:",  ",countryCallingCode:"996",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Cambodia",countryNameLocal:"",countryCode:"KH",currencyCode:"KHR",currencyNameEn:"Cambodian riel",tinType:"",tinName:"",officialLanguageCode:"km",officialLanguageNameEn:"Central Khmer",officialLanguageNameLocal:", , ",countryCallingCode:"855",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"North Korea",countryNameLocal:"",countryCode:"KP",currencyCode:"KPW",currencyNameEn:"North Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"850",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"South Korea",countryNameLocal:"",countryCode:"KR",currencyCode:"KRW",currencyNameEn:"South Korean won",tinType:"",tinName:"",officialLanguageCode:"ko",officialLanguageNameEn:"Korean",officialLanguageNameLocal:"",countryCallingCode:"82",areaCodes:[],region:"Asia",flag:""},{countryNameEn:"Kiribati",countryNameLocal:"Kiribati",countryCode:"KI",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"686",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Kitts and Nevis",countryNameLocal:"Saint Kitts and Nevis",countryCode:"KN",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1869",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Kuwait",countryNameLocal:"",countryCode:"KW",currencyCode:"KWD",currencyNameEn:"Kuwaiti dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"965",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Kazakhstan",countryNameLocal:", ",countryCode:"KZ",currencyCode:"KZT",currencyNameEn:"Kazakhstani tenge",tinType:"",tinName:"",officialLanguageCode:"kk",officialLanguageNameEn:"Kazakh",officialLanguageNameLocal:" ",countryCallingCode:"7",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Lebanon",countryNameLocal:", Liban",countryCode:"LB",currencyCode:"LBP",currencyNameEn:"Lebanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"961",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Saint Lucia",countryNameLocal:"Saint Lucia",countryCode:"LC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1758",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Liechtenstein",countryNameLocal:"Liechtenstein",countryCode:"LI",currencyCode:"CHF",currencyNameEn:"Swiss franc",tinType:"",tinName:"",officialLanguageCode:"de",officialLanguageNameEn:"German",officialLanguageNameLocal:"Deutsch",countryCallingCode:"423",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sri Lanka",countryNameLocal:" , ",countryCode:"LK",currencyCode:"LKR",currencyNameEn:"Sri Lankan rupee",tinType:"",tinName:"",officialLanguageCode:"si",officialLanguageNameEn:"Sinhala, Sinhalese",officialLanguageNameLocal:"",countryCallingCode:"94",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Liberia",countryNameLocal:"Liberia",countryCode:"LR",currencyCode:"LRD",currencyNameEn:"Liberian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"231",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lesotho",countryNameLocal:"Lesotho",countryCode:"LS",currencyCode:"LSL",currencyNameEn:"Lesotho loti",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"266",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Lithuania",countryNameLocal:"Lietuva",countryCode:"LT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVM kodas",tinName:"PVM (abbrev. Pridtins verts mokestis) moktojo kodas",officialLanguageCode:"lt",officialLanguageNameEn:"Lithuanian",officialLanguageNameLocal:"lietuvi kalba",countryCallingCode:"370",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Luxembourg",countryNameLocal:"Ltzebuerg, Luxembourg, Luxemburg",countryCode:"LU",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"No. TVA",tinName:"Numro d'identification  la taxe sur la valeur ajoute",officialLanguageCode:"lb",officialLanguageNameEn:"Luxembourgish, Letzeburgesch",officialLanguageNameLocal:"Ltzebuergesch",countryCallingCode:"352",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Latvia",countryNameLocal:"Latvija",countryCode:"LV",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"PVN",tinName:"Pievienots vrtbas nodoka (PVN) reistrcijas numurs",officialLanguageCode:"lv",officialLanguageNameEn:"Latvian",officialLanguageNameLocal:"latvieu valoda",countryCallingCode:"371",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Libya",countryNameLocal:"",countryCode:"LY",currencyCode:"LYD",currencyNameEn:"Libyan dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"218",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Morocco",countryNameLocal:"Maroc, , ",countryCode:"MA",currencyCode:"MAD",currencyNameEn:"Moroccan dirham",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"212",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Monaco",countryNameLocal:"Monaco",countryCode:"MC",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"377",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Montenegro",countryNameLocal:"Crna Gora,  ",countryCode:"ME",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"srp",officialLanguageNameEn:" ",officialLanguageNameLocal:"",countryCallingCode:"382",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Martin (French part)",countryNameLocal:"Saint-Martin",countryCode:"MF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"590",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Madagascar",countryNameLocal:"Madagasikara, Madagascar",countryCode:"MG",currencyCode:"MGA",currencyNameEn:"Malagasy ariary",tinType:"",tinName:"",officialLanguageCode:"mg",officialLanguageNameEn:"Malagasy",officialLanguageNameLocal:"fiteny malagasy",countryCallingCode:"261",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mali",countryNameLocal:"Mali",countryCode:"ML",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"223",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Myanmar",countryNameLocal:"",countryCode:"MM",currencyCode:"MMK",currencyNameEn:"Myanmar kyat",tinType:"",tinName:"",officialLanguageCode:"my",officialLanguageNameEn:"Burmese",officialLanguageNameLocal:"",countryCallingCode:"95",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mongolia",countryNameLocal:" ",countryCode:"MN",currencyCode:"MNT",currencyNameEn:"Mongolian tgrg",tinType:"",tinName:"",officialLanguageCode:"mn",officialLanguageNameEn:"Mongolian",officialLanguageNameLocal:" ",countryCallingCode:"976",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Macao",countryNameLocal:", Macau",countryCode:"MO",currencyCode:"MOP",currencyNameEn:"Macanese pataca",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"853",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Martinique",countryNameLocal:"Martinique",countryCode:"MQ",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"596",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Mauritania",countryNameLocal:", Mauritanie",countryCode:"MR",currencyCode:"MRU",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"222",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Montserrat",countryNameLocal:"Montserrat",countryCode:"MS",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1664",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malta",countryNameLocal:"Malta",countryCode:"MT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Vat No.",tinName:"Vat reg. no.",officialLanguageCode:"mt",officialLanguageNameEn:"Maltese",officialLanguageNameLocal:"Malti",countryCallingCode:"356",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Mauritius",countryNameLocal:"Maurice, Mauritius",countryCode:"MU",currencyCode:"MUR",currencyNameEn:"Mauritian rupee",tinType:"",tinName:"",officialLanguageCode:"mfe",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"230",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Maldives",countryNameLocal:"",countryCode:"MV",currencyCode:"MVR",currencyNameEn:"Maldivian rufiyaa",tinType:"",tinName:"",officialLanguageCode:"dv",officialLanguageNameEn:"Divehi, Dhivehi, Maldivian",officialLanguageNameLocal:"",countryCallingCode:"960",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Malawi",countryNameLocal:"Malawi",countryCode:"MW",currencyCode:"MWK",currencyNameEn:"Malawian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"265",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Mexico",countryNameLocal:"Mxico",countryCode:"MX",currencyCode:"MXN",currencyNameEn:"Mexican peso",tinType:"RFC",tinName:"Registro Federal de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"52",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Malaysia",countryNameLocal:"",countryCode:"MY",currencyCode:"MYR",currencyNameEn:"Malaysian ringgit",tinType:"",tinName:"",officialLanguageCode:"ms",officialLanguageNameEn:"Malay",officialLanguageNameLocal:"Bahasa Melayu,  ",countryCallingCode:"60",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Mozambique",countryNameLocal:"Mozambique",countryCode:"MZ",currencyCode:"MZN",currencyNameEn:"Mozambican metical",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"258",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Namibia",countryNameLocal:"Namibia",countryCode:"NA",currencyCode:"NAD",currencyNameEn:"Namibian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"264",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"New Caledonia",countryNameLocal:"Nouvelle-Caldonie",countryCode:"NC",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"687",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Norfolk Island",countryNameLocal:"Norfolk Island",countryCode:"NF",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nigeria",countryNameLocal:"Nigeria",countryCode:"NG",currencyCode:"NGN",currencyNameEn:"Nigerian naira",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"234",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Nicaragua",countryNameLocal:"Nicaragua",countryCode:"NI",currencyCode:"NIO",currencyNameEn:"Nicaraguan crdoba",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"505",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Norway",countryNameLocal:"Norge, Noreg",countryCode:"NO",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"Orgnr",tinName:"Organisasjonsnummer",officialLanguageCode:"nb",officialLanguageNameEn:"Norwegian Bokml",officialLanguageNameLocal:"Norsk Bokml",countryCallingCode:"47",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Nepal",countryNameLocal:"",countryCode:"NP",currencyCode:"NPR",currencyNameEn:"Nepalese rupee",tinType:"",tinName:"",officialLanguageCode:"ne",officialLanguageNameEn:"Nepali",officialLanguageNameLocal:"",countryCallingCode:"977",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Nauru",countryNameLocal:"Nauru",countryCode:"NR",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"na",officialLanguageNameEn:"Nauru",officialLanguageNameLocal:"Dorerin Naoero",countryCallingCode:"674",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Niue",countryNameLocal:"Niue",countryCode:"NU",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"niu",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"683",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"New Zealand",countryNameLocal:"New Zealand",countryCode:"NZ",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"NZBN",tinName:"NZ Business Number",officialLanguageCode:"mi",officialLanguageNameEn:"Maori",officialLanguageNameLocal:"te reo Mori",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Oman",countryNameLocal:" ",countryCode:"OM",currencyCode:"OMR",currencyNameEn:"Omani rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"968",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Panama",countryNameLocal:"Panama",countryCode:"PA",currencyCode:"PAB",currencyNameEn:"Panamanian balboa",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"507",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Peru",countryNameLocal:"Per",countryCode:"PE",currencyCode:"PEN",currencyNameEn:"Peruvian sol",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"51",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"French Polynesia",countryNameLocal:"Polynsie franaise",countryCode:"PF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"689",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Papua New Guinea",countryNameLocal:"Papua New Guinea",countryCode:"PG",currencyCode:"PGK",currencyNameEn:"Papua New Guinean kina",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"675",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Pakistan",countryNameLocal:"",countryCode:"PK",currencyCode:"PKR",currencyNameEn:"Pakistani rupee",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"92",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Poland",countryNameLocal:"Polska",countryCode:"PL",currencyCode:"PLN",currencyNameEn:"Polish zoty",tinType:"NIP",tinName:"numer identyfikacji podatkowej",officialLanguageCode:"pl",officialLanguageNameEn:"Polish",officialLanguageNameLocal:"jzyk polski, polszczyzna",countryCallingCode:"48",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Saint Pierre and Miquelon",countryNameLocal:"Saint-Pierre-et-Miquelon",countryCode:"PM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"508",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Pitcairn",countryNameLocal:"Pitcairn",countryCode:"PN",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"64",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Puerto Rico",countryNameLocal:"Puerto Rico",countryCode:"PR",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Palestine, State of",countryNameLocal:"Palestinian Territory",countryCode:"PS",currencyCode:"",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"970",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Portugal",countryNameLocal:"Portugal",countryCode:"PT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"NIPC",tinName:"Nmero de Identificao de Pessoa Coletiva (NIPC)",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"351",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Palau",countryNameLocal:"Palau",countryCode:"PW",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"680",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Paraguay",countryNameLocal:"Paraguay",countryCode:"PY",currencyCode:"PYG",currencyNameEn:"Paraguayan guaran",tinType:"RUC",tinName:"Registro Unico de Contribuyentes",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"595",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Qatar",countryNameLocal:"",countryCode:"QA",currencyCode:"QAR",currencyNameEn:"Qatari riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"974",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Runion",countryNameLocal:"La Runion",countryCode:"RE",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Romania",countryNameLocal:"Romnia",countryCode:"RO",currencyCode:"RON",currencyNameEn:"Romanian leu",tinType:"CIF",tinName:"Codul de identificare fiscal",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"40",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Serbia",countryNameLocal:"",countryCode:"RS",currencyCode:"RSD",currencyNameEn:"Serbian dinar",tinType:"PIB",tinName:"Poreski identifikacioni broj",officialLanguageCode:"sr",officialLanguageNameEn:"Serbian",officialLanguageNameLocal:" ",countryCallingCode:"381",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Russia",countryNameLocal:"",countryCode:"RU",currencyCode:"RUB",currencyNameEn:"Russian ruble",tinType:"",tinName:"  ",officialLanguageCode:"ru",officialLanguageNameEn:"Russian",officialLanguageNameLocal:"",countryCallingCode:"7",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Rwanda",countryNameLocal:"Rwanda",countryCode:"RW",currencyCode:"RWF",currencyNameEn:"Rwandan franc",tinType:"",tinName:"",officialLanguageCode:"rw",officialLanguageNameEn:"Kinyarwanda",officialLanguageNameLocal:"Ikinyarwanda",countryCallingCode:"250",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Saudi Arabia",countryNameLocal:"",countryCode:"SA",currencyCode:"SAR",currencyNameEn:"Saudi riyal",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"966",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Solomon Islands",countryNameLocal:"Solomon Islands",countryCode:"SB",currencyCode:"SBD",currencyNameEn:"Solomon Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"677",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Seychelles",countryNameLocal:"Seychelles",countryCode:"SC",currencyCode:"SCR",currencyNameEn:"Seychelles rupee",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"248",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sweden",countryNameLocal:"Sverige",countryCode:"SE",currencyCode:"SEK",currencyNameEn:"Swedish krona/kronor",tinType:"Momsnr.",tinName:"VAT-nummer",officialLanguageCode:"sv",officialLanguageNameEn:"Swedish",officialLanguageNameLocal:"Svenska",countryCallingCode:"46",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Singapore",countryNameLocal:"Singapore",countryCode:"SG",currencyCode:"SGD",currencyNameEn:"Singapore dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hans",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"65",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Helena, Ascension and Tristan da Cunha",countryNameLocal:"Saint Helena",countryCode:"SH",currencyCode:"SHP",currencyNameEn:"Saint Helena pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"290",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Slovenia",countryNameLocal:"Slovenija",countryCode:"SI",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"ID za DDV",tinName:"Davna tevilka",officialLanguageCode:"sl",officialLanguageNameEn:"Slovenian",officialLanguageNameLocal:"Slovenski Jezik, Slovenina",countryCallingCode:"386",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Svalbard and Jan Mayen",countryNameLocal:"Svalbard and Jan Mayen",countryCode:"SJ",currencyCode:"NOK",currencyNameEn:"Norwegian krone",tinType:"",tinName:"",officialLanguageCode:"no",officialLanguageNameEn:"Norwegian",officialLanguageNameLocal:"Norsk",countryCallingCode:"4779",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Slovakia",countryNameLocal:"Slovensko",countryCode:"SK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"I DPH",tinName:"Identifikan slo pre da z pridanej hodnoty",officialLanguageCode:"sk",officialLanguageNameEn:"Slovak",officialLanguageNameLocal:"Slovenina, Slovensk Jazyk",countryCallingCode:"421",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Sierra Leone",countryNameLocal:"Sierra Leone",countryCode:"SL",currencyCode:"SLL",currencyNameEn:"Sierra Leonean leone",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"232",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Republic of San Marino",countryNameLocal:"Repubblica di San Marino",countryCode:"SM",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"C.O.E.",tinName:"Codice operatore economico",officialLanguageCode:"it",officialLanguageNameEn:"Italian",officialLanguageNameLocal:"Italiano",countryCallingCode:"378",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Senegal",countryNameLocal:"Sngal",countryCode:"SN",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"221",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Somalia",countryNameLocal:"Somalia, ",countryCode:"SO",currencyCode:"SOS",currencyNameEn:"Somali shilling",tinType:"",tinName:"",officialLanguageCode:"so",officialLanguageNameEn:"Somali",officialLanguageNameLocal:"Soomaaliga, af Soomaali",countryCallingCode:"252",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Suriname",countryNameLocal:"Suriname",countryCode:"SR",currencyCode:"SRD",currencyNameEn:"Surinamese dollar",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"597",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"South Sudan",countryNameLocal:"South Sudan",countryCode:"SS",currencyCode:"SSP",currencyNameEn:"South Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"211",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Sao Tome and Principe",countryNameLocal:"So Tom e Prncipe",countryCode:"ST",currencyCode:"STN",currencyNameEn:"",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"239",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"El Salvador",countryNameLocal:"El Salvador",countryCode:"SV",currencyCode:"SVC",currencyNameEn:"Salvadoran coln",tinType:"NIT",tinName:"Nmero de Identificacin Tributaria",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"503",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sint Maarten (Dutch part)",countryNameLocal:"Sint Maarten",countryCode:"SX",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"1721",areaCodes:[],region:"Unknown",flag:""},{countryNameEn:"Syrian Arab Republic",countryNameLocal:", Sriyya",countryCode:"SY",currencyCode:"SYP",currencyNameEn:"Syrian pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"963",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Chad",countryNameLocal:"Tchad, ",countryCode:"TD",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"235",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Togo",countryNameLocal:"Togo",countryCode:"TG",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"228",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Thailand",countryNameLocal:"",countryCode:"TH",currencyCode:"THB",currencyNameEn:"Thai baht",tinType:"",tinName:"",officialLanguageCode:"th",officialLanguageNameEn:"Thai",officialLanguageNameLocal:"",countryCallingCode:"66",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tajikistan",countryNameLocal:",",countryCode:"TJ",currencyCode:"TJS",currencyNameEn:"Tajikistani somoni",tinType:"",tinName:"",officialLanguageCode:"tg",officialLanguageNameEn:"Tajik",officialLanguageNameLocal:", toik, ",countryCallingCode:"992",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tokelau",countryNameLocal:"Tokelau",countryCode:"TK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"tkl",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"690",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Timor-Leste",countryNameLocal:"Timor-Leste, Timor Lorosa'e",countryCode:"TL",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"pt",officialLanguageNameEn:"Portuguese",officialLanguageNameLocal:"Portugus",countryCallingCode:"670",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkmenistan",countryNameLocal:"Trkmenistan",countryCode:"TM",currencyCode:"TMT",currencyNameEn:"Turkmenistan manat",tinType:"",tinName:"",officialLanguageCode:"tk",officialLanguageNameEn:"Turkmen",officialLanguageNameLocal:"Trkmen, ",countryCallingCode:"993",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Tunisia",countryNameLocal:", Tunisie",countryCode:"TN",currencyCode:"TND",currencyNameEn:"Tunisian dinar",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"216",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Tonga",countryNameLocal:"Tonga",countryCode:"TO",currencyCode:"TOP",currencyNameEn:"Tongan paanga",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"676",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Turkey",countryNameLocal:"Trkiye",countryCode:"TR",currencyCode:"TRY",currencyNameEn:"Turkish lira",tinType:"KDV",tinName:"Vergi Kimlik Numaras",officialLanguageCode:"tr",officialLanguageNameEn:"Turkish",officialLanguageNameLocal:"Trke",countryCallingCode:"90",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Trinidad and Tobago",countryNameLocal:"Trinidad and Tobago",countryCode:"TT",currencyCode:"TTD",currencyNameEn:"Trinidad and Tobago dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"868",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Tuvalu",countryNameLocal:"Tuvalu",countryCode:"TV",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"688",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"United Republic of Tanzania",countryNameLocal:"Tanzania",countryCode:"TZ",currencyCode:"TZS",currencyNameEn:"Tanzanian shilling",tinType:"",tinName:"",officialLanguageCode:"sw",officialLanguageNameEn:"Swahili",officialLanguageNameLocal:"Kiswahili",countryCallingCode:"255",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Ukraine",countryNameLocal:"",countryCode:"UA",currencyCode:"UAH",currencyNameEn:"Ukrainian hryvnia",tinType:"",tinName:"   ",officialLanguageCode:"uk",officialLanguageNameEn:"Ukrainian",officialLanguageNameLocal:"",countryCallingCode:"380",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Uganda",countryNameLocal:"Uganda",countryCode:"UG",currencyCode:"UGX",currencyNameEn:"Ugandan shilling",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"256",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"United States of America",countryNameLocal:"United States of America",countryCode:"US",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"EIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"North America",flag:""},{countryNameEn:"Uruguay",countryNameLocal:"Uruguay",countryCode:"UY",currencyCode:"UYU",currencyNameEn:"Uruguayan peso",tinType:"RUT",tinName:"Registro nico Tributario",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"598",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Uzbekistan",countryNameLocal:"",countryCode:"UZ",currencyCode:"UZS",currencyNameEn:"Uzbekistan som",tinType:"",tinName:"   ",officialLanguageCode:"uz",officialLanguageNameEn:"Uzbek",officialLanguageNameLocal:"Ozbek, , ",countryCallingCode:"998",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Saint Vincent and the Grenadines",countryNameLocal:"Saint Vincent and the Grenadines",countryCode:"VC",currencyCode:"XCD",currencyNameEn:"East Caribbean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1784",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Venezuela (Bolivarian Republic of)",countryNameLocal:"Venezuela",countryCode:"VE",currencyCode:"VES",currencyNameEn:"",tinType:"RIF",tinName:"Registro de Informacion Fiscal",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"58",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (British)",countryNameLocal:"British Virgin Islands",countryCode:"VG",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1284",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Virgin Islands (U.S.)",countryNameLocal:"United States Virgin Islands",countryCode:"VI",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1340",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Vietnam",countryNameLocal:"Vit Nam",countryCode:"VN",currencyCode:"VND",currencyNameEn:"Vietnamese ng",tinType:"",tinName:"",officialLanguageCode:"vi",officialLanguageNameEn:"Vietnamese",officialLanguageNameLocal:"Ting Vit",countryCallingCode:"84",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Vanuatu",countryNameLocal:"Vanuatu",countryCode:"VU",currencyCode:"VUV",currencyNameEn:"Vanuatu vatu",tinType:"",tinName:"",officialLanguageCode:"bi",officialLanguageNameEn:"Bislama",officialLanguageNameLocal:"Bislama",countryCallingCode:"678",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Wallis and Futuna",countryNameLocal:"Wallis-et-Futuna",countryCode:"WF",currencyCode:"XPF",currencyNameEn:"CFP franc (franc Pacifique)",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"681",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Samoa",countryNameLocal:"Samoa",countryCode:"WS",currencyCode:"WST",currencyNameEn:"Samoan tala",tinType:"",tinName:"",officialLanguageCode:"sm",officialLanguageNameEn:"Samoan",officialLanguageNameLocal:"gagana fa'a Samoa",countryCallingCode:"685",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Yemen",countryNameLocal:"",countryCode:"YE",currencyCode:"YER",currencyNameEn:"Yemeni rial",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"967",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Mayotte",countryNameLocal:"Mayotte",countryCode:"YT",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"262",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"South Africa",countryNameLocal:"South Africa",countryCode:"ZA",currencyCode:"ZAR",currencyNameEn:"South African rand",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"27",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zambia",countryNameLocal:"Zambia",countryCode:"ZM",currencyCode:"ZMW",currencyNameEn:"Zambian kwacha",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"260",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Zimbabwe",countryNameLocal:"Zimbabwe",countryCode:"ZW",currencyCode:"ZWL",currencyNameEn:"Zimbabwean dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"263",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Eswatini",countryNameLocal:"Swaziland",countryCode:"SZ",currencyCode:"SZL",currencyNameEn:"Swazi lilangeni",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"268",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"North Macedonia",countryNameLocal:"",countryCode:"MK",currencyCode:"MKD",currencyNameEn:"Macedonian denar",tinType:"",tinName:"",officialLanguageCode:"mk",officialLanguageNameEn:"Macedonian",officialLanguageNameLocal:" ",countryCallingCode:"389",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Philippines",countryNameLocal:"Philippines",countryCode:"PH",currencyCode:"PHP",currencyNameEn:"Philippine peso",tinType:"TIN",tinName:"Tax Identification Number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"63",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Netherlands",countryNameLocal:"Nederland",countryCode:"NL",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"Btw-nr.",tinName:"Btw-nummer",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"31",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Arab Emirates",countryNameLocal:"   ",countryCode:"AE",currencyCode:"AED",currencyNameEn:"United Arab Emirates dirham",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"971",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Republic of Moldova",countryNameLocal:"Moldova, ",countryCode:"MD",currencyCode:"MDL",currencyNameEn:"Moldovan leu",tinType:"",tinName:"",officialLanguageCode:"ro",officialLanguageNameEn:"Romanian, Moldavian, Moldovan",officialLanguageNameLocal:"Romn",countryCallingCode:"373",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Gambia",countryNameLocal:"The Gambia",countryCode:"GM",currencyCode:"GMD",currencyNameEn:"Gambian dalasi",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"220",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Dominican Republic",countryNameLocal:"Repblica Dominicana",countryCode:"DO",currencyCode:"DOP",currencyNameEn:"Dominican peso",tinType:"RNC",tinName:"Registro Nacional del Contribuyente",officialLanguageCode:"es",officialLanguageNameEn:"Spanish, Castilian",officialLanguageNameLocal:"Espaol",countryCallingCode:"1",areaCodes:[],region:"South/Latin America",flag:""},{countryNameEn:"Sudan",countryNameLocal:"",countryCode:"SD",currencyCode:"SDG",currencyNameEn:"Sudanese pound",tinType:"",tinName:"",officialLanguageCode:"ar",officialLanguageNameEn:"Arabic",officialLanguageNameLocal:"",countryCallingCode:"249",areaCodes:[],region:"Arab States",flag:""},{countryNameEn:"Lao People's Democratic Republic",countryNameLocal:"",countryCode:"LA",currencyCode:"LAK",currencyNameEn:"Lao kip",tinType:"",tinName:"",officialLanguageCode:"lo",officialLanguageNameEn:"Lao",officialLanguageNameLocal:"",countryCallingCode:"856",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Taiwan, Province of China",countryNameLocal:"Taiwan",countryCode:"TW",currencyCode:"TWD",currencyNameEn:"New Taiwan dollar",tinType:"",tinName:"",officialLanguageCode:"zh-hant",officialLanguageNameEn:"",officialLanguageNameLocal:"",countryCallingCode:"886",areaCodes:[],region:"Asia & Pacific",flag:""},{countryNameEn:"Republic of the Congo",countryNameLocal:"Rpublique du Congo",countryCode:"CG",currencyCode:"XAF",currencyNameEn:"CFA franc BEAC",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"242",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Czechia",countryNameLocal:"esk republika",countryCode:"CZ",currencyCode:"CZK",currencyNameEn:"Czech koruna",tinType:"DI",tinName:"Daov identifikan slo",officialLanguageCode:"cs",officialLanguageNameEn:"Czech",officialLanguageNameLocal:"etina",countryCallingCode:"420",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"United Kingdom",countryNameLocal:"Great Britain",countryCode:"GB",currencyCode:"GBP",currencyNameEn:"Pound sterling",tinType:"VAT Reg No",tinName:"Value added tax registration number",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"44",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Niger",countryNameLocal:"Niger",countryCode:"NE",currencyCode:"XOF",currencyNameEn:"CFA franc BCEAO",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"227",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Democratic Republic of the Congo",countryNameLocal:"Democratic Republic of the Congo",countryCode:"CD",currencyCode:"CDF",currencyNameEn:"Congolese franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"243",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Commonwealth of The Bahamas",countryNameLocal:"Commonwealth of The Bahamas",countryCode:"BS",currencyCode:"BSD",currencyNameEn:"Bahamian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 242",areaCodes:[],region:"Caribbean",flag:""},{countryNameEn:"Cocos (Keeling) Islands",countryNameLocal:"Pulu Kokos (Keeling)",countryCode:"CC",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"61 891",areaCodes:[],region:"Australia",flag:""},{countryNameEn:"Central African Republic",countryNameLocal:"Rpublique centrafricaine",countryCode:"CF",currencyCode:"XAF",currencyNameEn:"Central African CFA",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"236",areaCodes:[],region:"Africa",flag:""},{countryNameEn:"Cook Islands",countryNameLocal:"Kki 'irani",countryCode:"CK",currencyCode:"NZD",currencyNameEn:"New Zealand dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"682",areaCodes:[],region:"South Pacific Ocean",flag:""},{countryNameEn:"Falkland Islands",countryNameLocal:"Falkland Islands",countryCode:"FK",currencyCode:"FKP",currencyNameEn:"Falklands pound",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"500",areaCodes:[],region:"South Atlantic Ocean",flag:""},{countryNameEn:"Faroe Islands",countryNameLocal:"Frerne",countryCode:"FO",currencyCode:"DKK",currencyNameEn:"Faroese krna",tinType:"",tinName:"",officialLanguageCode:"da",officialLanguageNameEn:"Danish",officialLanguageNameLocal:"dansk",countryCallingCode:"298",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Territory of Heard Island and McDonald Islands",countryNameLocal:"Territory of Heard Island and McDonald Islands",countryCode:"HM",currencyCode:"AUD",currencyNameEn:"Australian dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"British Indian Ocean Territory",countryNameLocal:"British Indian Ocean Territory",countryCode:"IO",currencyCode:"USD",currencyNameEn:"United States Dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"246",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Comoros",countryNameLocal:"Umoja wa Komori",countryCode:"KM",currencyCode:"KMF",currencyNameEn:"Comorian franc",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"269",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"Cayman Islands",countryNameLocal:"Cayman Islands",countryCode:"KY",currencyCode:"KYD",currencyNameEn:"Cayman Islands dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 345",areaCodes:[],region:"Caribbean Sea",flag:""},{countryNameEn:"Republic of the Marshall Islands",countryNameLocal:"Aolepn Aorkin aje",countryCode:"MH",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"692",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Commonwealth of the Northern Mariana Islands",countryNameLocal:"Sankattan Siha Na Islas Marinas",countryCode:"MP",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 670",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Turks and Caicos Islands",countryNameLocal:"Turks and Caicos Islands",countryCode:"TC",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1 649",areaCodes:[],region:"Atlantic Ocean",flag:""},{countryNameEn:"French Southern and Antarctic Lands",countryNameLocal:"Terres australes et antarctiques franaises",countryCode:"TF",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"fr",officialLanguageNameEn:"French",officialLanguageNameLocal:"Franais",countryCallingCode:"672",areaCodes:[],region:"Indian Ocean",flag:""},{countryNameEn:"United States Minor Outlying Islands",countryNameLocal:"United States Minor Outlying Islands",countryCode:"UM",currencyCode:"USD",currencyNameEn:"United States dollar",tinType:"",tinName:"",officialLanguageCode:"en",officialLanguageNameEn:"English",officialLanguageNameLocal:"English",countryCallingCode:"1",areaCodes:[],region:"Pacific Ocean",flag:""},{countryNameEn:"Holy See",countryNameLocal:"Sancta Sedes",countryCode:"VA",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"la",officialLanguageNameEn:"Latin",officialLanguageNameLocal:"lingua latna",countryCallingCode:"39",areaCodes:[],region:"Europe",flag:""},{countryNameEn:"Republic of Kosovo",countryNameLocal:"Republika e Kosovs",countryCode:"XK",currencyCode:"EUR",currencyNameEn:"Euro",tinType:"",tinName:"",officialLanguageCode:"sq",officialLanguageNameEn:"Albanian",officialLanguageNameLocal:"Shqip",countryCallingCode:"383",region:"Europe",flag:""},{countryNameEn:"Netherlands Antilles",countryNameLocal:"Nederlandse Antillen",countryCode:"AN",currencyCode:"ANG",currencyNameEn:"Netherlands Antillean guilder",tinType:"",tinName:"",officialLanguageCode:"nl",officialLanguageNameEn:"Dutch, Flemish",officialLanguageNameLocal:"Nederlands, Vlaams",countryCallingCode:"599",region:"Europe",flag:""}];return qy.default=e,qy}var A$;function nue(){if(A$)return Ss;A$=1;var e=Ss&&Ss.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.customList=Ss.customArray=Ss.findOne=Ss.filter=Ss.all=Ss.utils=void 0;const t=e(eue()),n=e(tue()),s=e(aue());Ss.utils={groupBy:t.default};function r(){return s.default}Ss.all=r;function i(u,d){return s.default.filter(h=>h[u]===d)}Ss.filter=i;function o(u,d){return s.default.find(h=>h[u]===d)}Ss.findOne=o;function l(u={name:"{countryNameEn} ({countryCode})",value:"{countryCode}"},{sortBy:d,sortDataBy:h,filter:p}={}){const x=[];let v=s.default;if(typeof p=="function"&&(v=v.filter(p)),h){const j=new Intl.Collator([],{sensitivity:"accent"});v.sort((b,N)=>j.compare(b[h],N[h]))}if(v.forEach(j=>{const b={};for(const N in u)b[N]=(0,n.default)(u[N],j);x.push(b)}),d&&u[d]){const j=new Intl.Collator([],{sensitivity:"accent"});x.sort((b,N)=>j.compare(b[d],N[d]))}return x}Ss.customArray=l;function c(u="countryCode",d="{countryNameEn} ({countryCode})",{filter:h}={}){const p={};let x=s.default;return typeof h=="function"&&(x=x.filter(h)),x.forEach(v=>{const j=(0,n.default)(d,v);p[String(v[u])]=j}),p}return Ss.customList=c,Ss}var th=nue();const hk=(...e)=>e.flat().filter(Boolean).join(" "),sue=th.all(),aq=sue.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode})),gk=[{id:1,title:"Your Account",subtitle:"Personal & Login Details"},{id:2,title:"Company Setup",subtitle:"Business Information"}],rue=()=>{const e=Tt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition cursor-pointer",children:[a.jsx(Ku,{className:"size-4 mr-1"})," Back to Home"]})},iue=f.memo(({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isVisible:o,onTogglePass:l,error:c,isSelect:u,options:d})=>{const h=t.toLowerCase().includes("password"),p=hk("w-full bg-gray-50 border px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:outline-none cursor-pointer",h?"pr-10":"",c?"border-red-500 focus:border-red-500 focus:ring-2 focus:ring-red-500/50":"border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50");return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700 cursor-pointer",children:e}),a.jsxs("div",{className:"relative",children:[u?a.jsx("select",{id:t,value:r,onChange:i,required:!0,className:p,children:d.map(x=>a.jsx("option",{value:x,children:x},x))}):a.jsx("input",{id:t,type:h?"text":s,style:h&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:n,value:r,onChange:i,required:!0,className:p}),h&&a.jsx("button",{type:"button",onClick:()=>l(t),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]}),c&&a.jsx("p",{className:"mt-1 text-sm text-red-600 font-semibold",children:c})]})}),iu=iue,oue=f.memo(({currentStep:e,totalSteps:t})=>a.jsx("div",{className:"flex justify-between items-center mb-10 w-full max-w-xs mx-auto",children:gk.map(n=>a.jsxs(f.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center cursor-pointer",children:[a.jsx("div",{className:hk("size-10 flex items-center justify-center rounded-full font-bold transition-all duration-300",n.id===e?"bg-amber-500 text-white shadow-lg":n.id<e?"bg-green-500 text-white":"bg-gray-100 text-gray-500 border-2 border-gray-300"),children:n.id<e?a.jsx(wL,{className:"size-5"}):n.id}),a.jsx("span",{className:hk("mt-2 text-xs font-medium hidden sm:block",n.id===e?"text-amber-600":"text-gray-500"),children:n.title})]}),n.id<t&&a.jsx("div",{className:"flex-1 h-0.5 mx-1 transition-colors duration-300 bg-gray-300"})]},n.id))})),lue=f.memo(({formData:e,handleChange:t,handleCodeChange:n,handleTogglePass:s,isPassVisible:r,formError:i,signupError:o,termsAccepted:l,handleTerms:c,isButtonDisabled:u,handleSubmit:d,handleGoogleLogin:h})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"md:flex md:space-x-4 space-y-6 md:space-y-0",children:[a.jsx("div",{className:"md:w-1/2",children:a.jsx(iu,{label:"First Name",id:"first_name",placeholder:"John",value:e.first_name,onChange:t})}),a.jsx("div",{className:"md:w-1/2",children:a.jsx(iu,{label:"Last Name",id:"last_name",placeholder:"Doe",value:e.last_name,onChange:t})})]}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Contact Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:n,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:aq.map(p=>a.jsxs("option",{value:p.code,children:[p.name," ",p.code]},p.code))}),a.jsx("input",{id:"phone_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.phone_number,onChange:t,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(iu,{label:"Email Address",id:"email",type:"email",placeholder:"you@company.com",value:e.email,onChange:t}),a.jsx(iu,{label:"Password",id:"password",placeholder:"Min 8 characters",value:e.password,onChange:t,isVisible:r.password,onTogglePass:s}),a.jsx(iu,{label:"Confirm Password",id:"confirmPassword",placeholder:"Confirm your password",value:e.confirmPassword,onChange:t,isVisible:r.confirmPassword,onTogglePass:s,error:i}),o&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:o}),a.jsxs("div",{className:"flex items-start pt-2",children:[a.jsx("input",{id:"terms",type:"checkbox",checked:l,onChange:c,className:"size-4 mt-1 rounded text-amber-500 border-gray-300 focus:ring-amber-500 cursor-pointer"}),a.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm font-medium text-gray-700 cursor-pointer",children:["I accept the ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Terms"})," and ",a.jsx("a",{href:"#",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Policy"}),"."]})]})]}),i&&a.jsx("div",{className:"mt-4 p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium animate-pulse",children:i}),a.jsx("button",{type:"submit",onClick:d,disabled:u,className:"w-full mt-8 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-secondary hover:bg-tertiary shadow-lg shadow-tertiary disabled:shadow-none focus-visible:outline-none cursor-pointer",children:"Continue to Company Details"})]})),cue=f.memo(({companyData:e,handleCodeChange1:t,handleSubmit:n,handleCompanyChange:s,formError:r,isSubmitted:i,isButtonDisabled:o,setStep:l,setIsSubmitted:c,setFormError:u})=>a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsx(iu,{label:"Company Name",id:"company_name",placeholder:"Acme Corp",value:e.company_name,onChange:s}),a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Company Number"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("select",{id:"countryCode",value:e.countryCode,onChange:t,className:"flex-shrink-0 bg-gray-50 border border-gray-200 px-3 py-2.5 rounded-lg text-gray-800 transition shadow-inner focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer",children:aq.map(d=>a.jsxs("option",{value:d.code,children:[d.name," ",d.code]},d.code))}),a.jsx("input",{id:"company_number",type:"tel",placeholder:"0000000000",maxLength:10,value:e.company_number,onChange:s,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"})]})]}),a.jsx(iu,{label:"Company Website",id:"company_website",type:"url",placeholder:"https://www.acme.com",value:e.company_website,onChange:s})]}),r&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-red-100 text-red-700 border border-red-300 font-medium my-6",children:r}),i&&a.jsx("div",{className:"p-3 text-sm rounded-lg bg-green-100 text-green-700 border border-green-300 font-medium my-6",children:"Account and Company Setup simulated successfully! Welcome aboard."}),a.jsxs("div",{className:"flex space-x-4 mt-8",children:[a.jsxs("button",{type:"button",onClick:()=>{l(1),c(!1),u(null)},className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-gray-700 font-bold tracking-wide border border-gray-300 bg-white hover:bg-tertiary hover:text-white transition-colors focus-visible:ring-2 focus-visible:ring-gray-300 focus-visible:outline-none cursor-pointer",children:[a.jsx(qie,{className:"size-4 mr-2"})," Back"]}),a.jsx("button",{onClick:n,type:"submit",disabled:o,className:"flex-1 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all duration-300 bg-tertiary hover:bg-accent hover:text-secondary shadow-xl shadow-amber-500/30 disabled:shadow-none focus-visible:ring-2 focus-visible:ring-amber-500/50 focus-visible:outline-none cursor-pointer",children:"Create Account"})]})]})),due=()=>{const e=["first_name","email","password"],t=["company_name","company_number","company_website"],[n,s]=f.useState(1),[r,i]=f.useState({first_name:"",last_name:"",countryCode:"+63",phone_number:"",email:"",password:"",confirmPassword:"",role:"CEO"}),[o,l]=f.useState({company_name:"",company_number:"",company_website:"",countryCode:"+63"}),[c,u]=f.useState({}),[d,h]=f.useState(!1),[p,x]=f.useState(null),[v,j]=f.useState(!1),{login:b}=Ks(),[N,w]=f.useState({plan_name:"Free",price:0}),[S,_]=f.useState(!1),[k,T]=f.useState(null);f.useEffect(()=>{document.title="Sign Up | Sari-Sari CRM"},[]),f.useEffect(()=>{const Y=()=>{window.google&&window.google.accounts?(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:A}),window.google.accounts.id.renderButton(document.getElementById("googleSignupBtn"),{theme:"outline",size:"large",text:"signup_with"})):console.error("Google API not loaded properly.")};if(window.google&&window.google.accounts){Y();return}const re=document.createElement("script");re.src="https://accounts.google.com/gsi/client",re.async=!0,re.defer=!0,re.onload=Y,document.body.appendChild(re)},[]);const A=async Y=>{_(!0);try{const re=p9(Y.credential);console.log("Google user:",re);try{await se.post("/auth/email-check",{email:re.email})}catch(we){const Z=we.response?.data?.detail||"An error occurred.";T(Z),_(!1);return}i(we=>({...we,email:re.email,first_name:re.given_name||"",last_name:re.family_name||"",password:"",profilePicture:re.picture||"",googleId:re.sub,auth_provider:"google",id_token:Y.credential})),s(2)}catch(re){console.error("Google signup error:",re),x("Failed to process Google account. Please try again.")}finally{T(null),x(null),_(!1)}},E=f.useCallback(Y=>{const{id:re,value:we}=Y.target;l(Z=>({...Z,[re]:we})),x(null)},[]),M=f.useCallback(Y=>{const{id:re,value:we}=Y.target;j(!1),i(Z=>{const ne={...Z,[re]:we};if(n===1){let pe=null;if(re==="password"&&we.length>0&&we.length<8)pe="Password must be at least 8 characters.";else if(re==="password"||re==="confirmPassword"){const Ne=re==="password"?we:ne.password,de=re==="confirmPassword"?we:ne.confirmPassword;Ne&&de&&Ne!==de&&(pe="Passwords don't match.")}x(pe)}return ne})},[n]),O=f.useCallback(Y=>i(re=>({...re,countryCode:Y.target.value})),[]),I=f.useCallback(Y=>l(re=>({...re,countryCode:Y.target.value})),[]),D=f.useCallback(Y=>u(re=>({...re,[Y]:!re[Y]})),[]),H=f.useCallback(Y=>h(Y.target.checked),[]),W=async Y=>{if(Y.preventDefault(),j(!1),x(null),n===1){if(!e.every(we=>r[we].trim()!=="")||!d){x("Please fill in all required fields and accept the terms.");return}if(r.password!==r.confirmPassword){x("The passwords you entered do not match. Please try again.");return}if(r.password.length<8){x("Password must be at least 8 characters long.");return}if(r.auth_provider==="google"){s(2);return}try{(await se.post("/auth/email-check",{email:r.email})).data.detail==="No existing email"&&(x(null),s(2))}catch(we){we.response&&we.response.data&&we.response.data.detail?x(we.response.data.detail):x("Something went wrong. Please try again.")}finally{_(!1)}}else if(n===2){if(!t.every(we=>(o[we]||"").trim()!=="")){x("Please fill in all required company details.");return}try{const{confirmPassword:we,...Z}=r,ne={...o,company_number:`${o.countryCode} ${o.company_number}`},Ne=(await se.post("/company/create",ne)).data.id,de={...Z,company_id:Ne,phone_number:`${Z.countryCode} ${Z.phone_number}`};if(console.log(" Sending payload:",de),Z.auth_provider==="google"){const be=await se.post("/auth/google/signup",de),oe={...N,company_id:Ne,status:"Active"},Te=await se.post("/subscription/subscribe",oe);x(null),j(!0),b(be.data)}else{const be=await se.post("/auth/signup",de),oe={...N,company_id:Ne,status:"Active"},Te=await se.post("/subscription/subscribe",oe);x(null),j(!0),b(be.data)}}catch(we){if(we.response?.data?.detail){const Z=we.response.data.detail;if(Array.isArray(Z)){const ne=Z.map(pe=>pe.msg).join(", ");x(ne)}else x(typeof Z=="object"?Z.msg||JSON.stringify(Z):Z)}else x("Something went wrong. Please try again.")}finally{_(!1)}}},z=f.useCallback(()=>{try{window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:Y=>{const{credential:re}=Y;i(we=>({...we,first_name:re.given_name||"",last_name:re.family_name||"",email:re.email||"",profile_picture:re.picture||"",auth_provider:"google",id_token:re})),s(2)}}),window.google.accounts.id.prompt()}catch(Y){console.error("Google login error:",Y),x("Google login failed. Please try again.")}},[i,x,s]),Q=f.useMemo(()=>{if(n===1){const Y=e.every(Z=>(r[Z]||"").trim()!==""),re=r.password.length>=8,we=r.password===r.confirmPassword;return!d||!!p||!Y||!re||!we}return n===2?!t.every(re=>(o[re]||"").trim()!=="")||!!p:!1},[n,d,p,r,o]),J=gk.find(Y=>Y.id===n);return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsxs("div",{className:"flex items-center text-gray-800",children:[a.jsx(na,{className:"size-6 text-amber-500 mr-2"}),a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})]})}),S&&a.jsx(tq,{isLoading:S}),a.jsx("div",{className:"w-full max-w-lg px-4 pt-6",children:a.jsx(rue,{})}),a.jsx("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-3 pb-12",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:J.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:J.subtitle})]}),a.jsx(oue,{currentStep:n,totalSteps:gk.length}),n===1&&a.jsx("div",{id:"googleSignupBtn"}),a.jsxs("form",{className:"mt-8",children:[n===1&&a.jsx(lue,{formData:r,handleChange:M,handleCodeChange:O,handleTogglePass:D,isPassVisible:c,formError:p,signupError:k,termsAccepted:d,handleTerms:H,isButtonDisabled:Q,handleSubmit:W,handleGoogleLogin:z}),n===2&&a.jsx(cue,{handleSubmit:W,companyData:o,handleCompanyChange:E,formError:p,isSubmitted:v,isButtonDisabled:Q,setStep:s,setIsSubmitted:j,setFormError:x,handleCodeChange1:I}),n===1&&a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Already have an account?",a.jsx("a",{href:"/login",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Log in"})]})})]})]})})]})},uue=()=>{const e=Tt();return a.jsxs("button",{onClick:()=>e("/"),className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(Ku,{className:"size-4 mr-1"})," Back to Home"]})},T$=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,isPassVisible:o,onTogglePass:l})=>{const c=t.toLowerCase().includes("password");return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:t,type:c?"text":s,style:c&&!o?{WebkitTextSecurity:"disc"}:void 0,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 px-4 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),c&&a.jsx("button",{type:"button",onClick:l,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":o?"Hide password":"Show password",children:o?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]})},mue=()=>{const[e,t]=f.useState({email:"",password:""}),[n,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(!1),{isLoggedIn:c,login:u,userRole:d}=Ks(),h=Tt();f.useEffect(()=>{document.title="Login | Sari-Sari CRM"},[]),f.useEffect(()=>{c&&(d==="CEO"||d==="Admin"?h("/admin"):d==="Group Manager"?h("/group-manager"):d==="Manager"?h("/manager"):d==="Marketing"?h("/marketing"):d==="Sales"&&h("/sales"))},[c,h,d]);const p=j=>{const{id:b,value:N}=j.target;t(w=>({...w,[b]:N}))},x=async j=>{j.preventDefault(),i(null);try{const b=await se.post("/auth/login",e);u(b.data),i(null)}catch(b){b.response&&b.response.data&&b.response.data.detail?i(b.response.data.detail):i("Something went wrong. Please try again.")}};f.useEffect(()=>{const j=document.createElement("script");return j.src="https://accounts.google.com/gsi/client",j.async=!0,j.defer=!0,j.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"222789237297-r8mebl46fdacgpsnlnjca4eu0crn8hf6.apps.googleusercontent.com",callback:v}),window.google.accounts.id.renderButton(document.getElementById("googleLoginBtn"),{theme:"outline",size:"large",text:"signin_with"}))},document.body.appendChild(j),()=>{document.body.contains(j)&&document.body.removeChild(j)}},[]);const v=async j=>{l(!0);try{const b=p9(j.credential),N=await se.post("/auth/google/login",{id_token:j.credential});u(N.data)}catch(b){console.error("Google login failed:",b);const N=b.response?.data?.detail||"Google login failed. Please try again.";i(N)}finally{l(!1)}};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),o&&a.jsx(tq,{isLoading:o}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(uue,{}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Login"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Sign in to access your dashboard."})]}),a.jsx("div",{id:"googleLoginBtn"}),a.jsxs("div",{className:"flex items-center my-6",children:[a.jsx("div",{className:"flex-grow border-t border-gray-300"}),a.jsx("span",{className:"flex-shrink mx-4 text-sm text-gray-500",children:"OR"}),a.jsx("div",{className:"flex-grow border-t border-gray-300"})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6 cursor-pointer",children:[a.jsx(T$,{label:"Email",id:"email",type:"email",placeholder:"you@example.com",value:e.email,onChange:p}),a.jsx(T$,{label:"Password",id:"password",type:"password",placeholder:"Enter your password",value:e.password,onChange:p,isPassVisible:n,onTogglePass:()=>s(j=>!j)}),r&&a.jsx("div",{className:"bg-red-100 border border-red-300 py-2 px-3 text-red-600",children:r}),a.jsx("button",{type:"submit",className:"w-full mt-2 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all disabled:opacity-50 bg-secondary text-gray-900 hover:bg-tertiary shadow-xl focus-visible:ring-2 focus-visible:ring-amber-500/50 cursor-pointer",children:"Log In"}),a.jsx("div",{className:"text-center mt-1",children:a.jsx("a",{href:"/forgot-password",className:"text-sm font-medium text-amber-600 hover:text-amber-700 cursor-pointer",children:"Forgot Password?"})})]}),a.jsx("div",{className:"text-center mt-6",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Don't have an account?",a.jsx("a",{href:"/signup",className:"font-bold text-amber-600 hover:text-amber-700 ml-1 cursor-pointer",children:"Sign Up"})]})})]})]})]})},fue=({onClick:e})=>a.jsxs("button",{onClick:e,className:"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 transition mb-3 cursor-pointer",children:[a.jsx(Ku,{className:"size-4 mr-1"})," Back"]}),c2=({label:e,id:t,placeholder:n,type:s="text",value:r,onChange:i,icon:o})=>{const[l,c]=f.useState(!1),u=s==="password";return a.jsxs("div",{className:"flex flex-col space-y-2",children:[a.jsx("label",{htmlFor:t,className:"text-sm font-medium text-gray-700",children:e}),a.jsxs("div",{className:"relative flex items-center",children:[o&&a.jsx(o,{className:"absolute left-3 text-gray-500 size-5"}),a.jsx("input",{id:t,type:u?"text":s,style:u&&!l?{WebkitTextSecurity:"disc"}:void 0,placeholder:n,value:r,onChange:i,required:!0,className:"w-full bg-gray-50 border border-gray-200 pl-10 pr-10 py-2.5 rounded-lg text-gray-800 transition shadow-inner placeholder-gray-400 focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50 focus:outline-none cursor-pointer"}),u&&a.jsx("button",{type:"button",onClick:()=>c(d=>!d),className:"absolute right-3 text-gray-500",children:l?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]})},hue=({otp:e,setOtp:t})=>a.jsx("div",{className:"flex justify-between gap-2",children:[...Array(6)].map((n,s)=>a.jsx("input",{type:"text",maxLength:"1",className:"w-12 h-12 text-center text-lg font-bold border border-gray-300 rounded-lg focus:border-amber-500 focus:ring-2 focus:ring-amber-500/50",value:e[s]||"",onChange:r=>{const i=r.target.value;if(/\d/.test(i)||i===""){const o=[...e];o[s]=i,t(o)}}},s))}),gue=()=>{const e=Tt(),[t,n]=f.useState(1),[s,r]=f.useState(""),[i,o]=f.useState(["","","","","",""]),[l,c]=f.useState(""),[u,d]=f.useState(""),h=j=>{j.preventDefault(),n(2)},p=j=>{j.preventDefault(),n(3)},x=j=>{if(j.preventDefault(),l!==u){alert("Passwords do not match!");return}alert("Password reset successfully!")},v=()=>{t>1?n(t-1):e("/login")};return a.jsxs("div",{className:"min-h-screen w-full bg-gray-100 font-sans text-gray-800 flex flex-col items-center",children:[a.jsx("div",{className:"w-full py-6 px-4 sm:px-12 lg:px-20 max-w-7xl",children:a.jsx("div",{className:"flex items-center text-gray-800",children:a.jsx("span",{className:"text-xl font-extrabold tracking-wider",children:"CRM"})})}),a.jsxs("main",{className:"w-full max-w-lg font-inter mx-auto px-4 pt-6 pb-12",children:[a.jsx(fue,{onClick:v}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-2xl shadow-xl p-6 md:p-10",children:[t===1&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Forgot Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your email and we'll send you a verification code."})]}),a.jsxs("form",{onSubmit:h,className:"space-y-6 cursor-pointer",children:[a.jsx(c2,{label:"Email Address",id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:j=>r(j.target.value),icon:sn}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Send OTP"})]})]}),t===2&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Enter Verification Code"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:["We've sent a 6-digit code to ",a.jsx("strong",{children:s}),"."]})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsx(hue,{otp:i,setOtp:o}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Verify Code"})]})]}),t===3&&a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Reset Password"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2 max-w-sm mx-auto",children:"Enter your new password below."})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsx(c2,{label:"New Password",id:"password",type:"password",placeholder:"Enter new password",value:l,onChange:j=>c(j.target.value),icon:ko}),a.jsx(c2,{label:"Confirm Password",id:"confirm-password",type:"password",placeholder:"Confirm new password",value:u,onChange:j=>d(j.target.value),icon:ko}),a.jsx("button",{className:"w-full mt-3 inline-flex items-center justify-center rounded-lg h-12 px-6 text-white font-bold tracking-wide transition-all bg-secondary text-gray-900 hover:bg-tertiary shadow-xl",children:"Reset Password"})]})]})]})]})]})},Gt=()=>{const[e,t]=f.useState(null),[n,s]=f.useState(!1),[r,i]=f.useState(!0),o=Tt(),l=async()=>{try{const u=await se.get("/auth/me");t(u.data),s(!0)}catch(u){t(null),s(!1),console.warn("Unauthorized  possible expired token or not logged in.",u)}finally{i(!1)}};return f.useEffect(()=>{l()},[]),{user:e,isLoggedIn:n,loading:r,fetchUser:l,logout:async()=>{try{await se.post("/auth/logout")}catch{}t(null),s(!1),o("/login")}}};function Wt({message:e="Loading..."}){return a.jsx("div",{className:"absolute inset-0 bg-primary/90 flex items-center justify-center z-40 lg:flex hidden",children:a.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"0.6s"}}),a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"0.6s"}})]})})}const pue=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function Gy(){const{user:e,loading:t,fetchUser:n}=Gt(),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,p]=f.useState(!1),[x,v]=f.useState(!1),[j,b]=f.useState(!1),[N,w]=f.useState(!1),[S,_]=f.useState(null),[k,T]=f.useState(null),A=f.useRef(null),[E,M]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[O,I]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""});f.useEffect(()=>{e&&(M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),T(e.profile_picture||null))},[e]),f.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const D=(J,Y)=>{M(re=>({...re,[J]:Y}))},H=(J,Y)=>{I(re=>({...re,[J]:Y}))},W=J=>{const Y=J.target.files?.[0];if(!Y)return;if(!Y.type.startsWith("image/")){V.error("Please select an image file");return}if(Y.size>5*1024*1024){V.error("Image size should be less than 5MB");return}const re=new FileReader;re.onloadend=()=>{_(re.result),T(re.result)},re.readAsDataURL(Y)},z=async J=>{if(J.preventDefault(),!E.firstName.trim()||!E.lastName.trim()){V.warn("Please fill in all required fields.");return}o(!0);try{const Y={first_name:E.firstName.trim(),last_name:E.lastName.trim(),phone_number:E.phoneNumber.trim()||null};S!==null&&(Y.profile_picture=S),await se.put("/users/me",Y),await n(),c(!1),_(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),V.success("Account information updated successfully!")}catch(Y){console.error("Error updating account:",Y);const re=Y.response?.data?.detail||"Failed to update account information. Please try again.";V.error(re)}finally{o(!1)}},Q=async J=>{if(J.preventDefault(),!O.newPassword||!O.confirmPassword){V.warn("Please fill in all password fields.");return}if(O.newPassword.length<8){V.warn("Password must be at least 8 characters long.");return}if(O.newPassword!==O.confirmPassword){V.warn("New password and confirm password do not match.");return}w(!0);try{const Y={password:O.newPassword};await se.put("/users/me",Y),await n(),I({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),w(!1),V.success("Password changed successfully!")}catch(Y){console.error("Error changing password:",Y);const re=Y.response?.data?.detail||"Failed to change password. Please try again.";V.error(re)}finally{w(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(Wt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(sa,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!l&&a.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(hn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[k?a.jsx("div",{className:"relative",children:a.jsx("img",{src:k,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:pue(e.first_name,e.last_name)}),l&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:A,accept:"image/*",onChange:W,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(m9,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role})]})]}),l?a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:E.firstName,onChange:J=>D("firstName",J.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:E.lastName,onChange:J=>D("lastName",J.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:E.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:E.phoneNumber,onChange:J=>D("phoneNumber",J.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),M({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),_(null),T(e.profile_picture||null),A.current&&(A.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:i,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:i,children:[a.jsx(NL,{}),i?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(ko,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:x?void 0:{WebkitTextSecurity:"disc"},value:O.newPassword,onChange:J=>H("newPassword",J.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>v(J=>!J),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":x?"Hide password":"Show password",children:x?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:j?void 0:{WebkitTextSecurity:"disc"},value:O.confirmPassword,onChange:J=>H("confirmPassword",J.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>b(J=>!J),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":j?"Hide password":"Show password",children:j?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:N,children:[a.jsx(ko,{}),N?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(h9,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}const xue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Enterprise Security Commitment",content:["Sari-Sari CRM maintains a security-first architecture designed to protect business data, preserve system integrity, and support continuous operational reliability. Security controls are implemented across administrative, technical, and operational layers to reduce risk and safeguard organizational information."]},{number:"2",title:"Access Governance",content:["The platform enforces strict role-based access controls to ensure that only authorized organizational users can access CRM records, including leads, contacts, accounts, deals, quotes, and scheduling information. Permission boundaries are applied according to user roles and operational responsibilities.","Internal and developer access is tightly restricted, monitored, and permitted only for essential system maintenance under controlled conditions."]},{number:"3",title:"Data Protection Controls",content:["Security measures are designed to:",` Protect confidentiality of business records
 Prevent unauthorized access or disclosure
 Preserve data integrity
 Maintain availability of services`,"Safeguards are reviewed periodically and updated to address evolving threats and operational needs."]},{number:"4",title:"Operational Security",content:["We maintain structured incident management, monitoring, and maintenance processes to support secure system performance. Security events are prioritized and addressed using defined response procedures."]},{number:"5",title:"Shared Responsibility",content:["Organizations are responsible for maintaining secure credential practices, enforcing internal access policies, and promptly reporting suspected security concerns."]},{number:"6",title:"Technical Security Framework",content:["Sari-Sari CRM employs layered security controls aligned with industry best practices to protect data and platform operations."]},{number:"7",title:"Access & Authentication",content:[` Role-based authorization controls
 Credential protection mechanisms
 Session management safeguards`]},{number:"8",title:"Data Protection",content:[` Controlled access to stored business records
 Logical isolation of organizational data
 Integrity protections to prevent unauthorized modification`,"Developer access to production environments is restricted, logged, and limited to operational necessity."]},{number:"9",title:"System Security Measures",content:[` Monitoring for abnormal system behavior
 Controlled maintenance workflows
 Incident response procedures
 Secure update and deployment processes`]},{number:"10",title:"Security Lifecycle",content:["Security practices are continuously evaluated and refined to maintain resilience against emerging risks."]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Security Guidelines"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"This document outlines the enterprise and technical security measures implemented to protect your business data and ensure the integrity, confidentiality, and availability of the Sari-Sari CRM platform."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Security is a shared responsibility. We are committed to maintaining robust protections while working with our customers to ensure secure and responsible use of the platform."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},yue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Support Commitment",content:["Sari-Sari CRM provides operational support to help organizations maintain smooth and reliable use of the platform. Our goal is to resolve issues efficiently and minimize disruption to your business workflows."]},{number:"2",title:"Support Coverage",content:["Support services include assistance with:",` System or feature malfunctions
 Performance concerns
 General platform inquiries`,"Support does not include custom development, third-party integrations outside our platform, or user-side hardware/network issues."]},{number:"3",title:"User Responsibilities",content:["Organizations and users help maintain efficient support by:",` Reporting issues promptly
 Providing accurate information
 Following role permissions
 Maintaining secure account access`]},{number:"4",title:"Continuous Improvement",content:["Support feedback is used to improve system performance, reliability, and user experience."]},{number:"5",title:"Support & Reporting",content:["Users should submit support requests through designated communication channels, including:",a.jsx("strong",{children:"Sari-Sari CRM Administration"},"dept"),a.jsx("a",{href:"https://www.sari-sari.com/",className:"font-bold text-accent hover:underline",target:"_blank",rel:"noopener noreferrer",children:"sari-sari.com"},"email"),"Providing clear details helps accelerate resolution."]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Support"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM is committed to providing responsive and effective support to help your organization succeed. Our support team is here to assist with platform access, features, performance, and general questions."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"We value your feedback and continuously improve our support services based on your experience. Thank you for using Sari-Sari CRM."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},bue=()=>a.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-3",children:[a.jsxs(id,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsxs("nav",{className:"flex space-x-8",children:[a.jsx(id,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),a.jsx(id,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),vue=()=>{const[e,t]=f.useState(!1),[n,s]=f.useState(!1);f.useEffect(()=>{document.title="Resources - Sari-Sari CRM"},[]);const r=[{title:"Security",description:"Understand our security practices.",action:()=>t(!0)},{title:"Support",description:"Get help from our support team and knowledge base.",action:()=>s(!0)}];return a.jsxs("div",{className:"font-manrope",children:[a.jsx(bue,{}),a.jsx(xue,{isOpen:e,onClose:()=>t(!1)}),a.jsx(yue,{isOpen:n,onClose:()=>s(!1)}),a.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Resources"}),a.jsx("p",{className:"text-lg text-secondary mb-12",children:"Everything you need to succeed with Sari-Sari CRM"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:r.map((i,o)=>a.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[a.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:i.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:i.description}),i.action?a.jsx("button",{onClick:i.action,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "}):a.jsx("a",{href:i.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Learn More "})]},o))})]})})]})},wue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Authorized Use",content:["Sari-Sari CRM  is an internal company platform intended to manage leads, deals, accounts, contacts, scheduling, and task workflows.","Access is granted according to employment role and operational responsibilities. Users are required to safeguard their credentials and operate strictly within assigned permissions. Unauthorized access, credential sharing, or misuse of the System is prohibited and may result administrative action."]},{number:"2",title:"System Purpose",content:["The System supports company sales operations, including:",` Lead and deal pipeline management
 Account and contact records
 Scheduling of calls and meetings
 Task tracking and follow-ups
 Activity logging and reporting`]},{number:"3",title:"Role-Based Responsibilities",content:["Users are assigned permissions based on their role:","Administrator  Full configuration, oversight, and system governance.","Group Manager  Team supervision, reporting, and workflow monitoring.","Manager  Operational coordination and performance oversight.","Sales Users  Execution of sales activities and record maintenance.","Users must operate strictly within assigned permissions."]},{number:"4",title:"Data Integrity & Confidentiality",content:["All information stored in the System is confidential company data.",`Users must:
 Maintain accurate records
 Protect customer and sales information
 Avoid unauthorized disclosure or manipulation`,"Intentional misuse may lead to disciplinary action."]},{number:"5",title:"Activity Logging & Monitoring",content:["System actions may be recorded for accountability, performance review, and security purposes. Continued use indicates consent to such monitoring."]},{number:"6",title:"Acceptable Conduct",content:[`Users must not:
 Enter false or misleading information
 Delete or alter records without authorization
 Attempt to bypass security measures
 Use the System for personal or unrelated activities`,"Professional conduct is required at all times."]},{number:"7",title:"Scheduling & Task Accountability",content:["Users are responsible for maintaining accurate scheduling records and completing assigned tasks in good faith to support operational efficiency."]},{number:"8",title:"Security Responsibilities",content:["Users must safeguard login credentials and immediately report suspicious activity. Account sharing is prohibited."]},{number:"9",title:"Intellectual Property",content:["The System, including its interface, workflows, and software components, is proprietary company property and may not be copied or redistributed without authorization."]},{number:"10",title:"System Availability",content:["The company will maintain reasonable uptime but does not guarantee uninterrupted access due to maintenance or unforeseen technical issues."]},{number:"11",title:"Violations",content:[`Misuse of the System may result in:
 Access restriction or suspension
 Internal disciplinary action
 Further administrative review`,"depending on severity."]},{number:"12",title:"Support & Reporting",content:["Questions or concerns regarding System use should be directed to:",a.jsx("strong",{children:"Sari-Sari CRM Administration"},"dept"),a.jsx("a",{href:"https://www.sari-sari.com/",className:"font-bold text-accent hover:underline",target:"_blank",rel:"noopener noreferrer",children:"sari-sari.com"},"email")]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Terms of Use"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"These Terms of Use govern your access to and use of the Sari-Sari CRM system. By accessing or using the System, you acknowledge that you have read, understood, and agree to be bound by these terms."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"By continuing to use Sari-Sari CRM, you acknowledge that you have read and agree to these Terms of Use. If you do not agree with any part of these terms, you must discontinue use of the System immediately."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},jue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Users and Roles",content:["The system supports multiple roles with distinct access permissions:",`Admin  full system access and management.
Group Manager  oversees multiple teams and manages metrics.
Manager  manages teams and monitors pipeline progress.
Sales  accesses leads, contacts, accounts, deals, quotes, target and schedules.`,"Access to business data is strictly limited to authorized users in your organization based on role."]},{number:"2",title:"Data We Collect",content:["We may collect the following types of data:",`Account Information: Names, email addresses, phone numbers, company details, and login credentials.
Business Data: Leads, contacts, accounts, deals, quotes, notes, and pipeline information entered by your organization.
Scheduling Data: Tasks, meetings, and calls associated with your account or team.
Usage Data: IP addresses, device information, login activity, and feature usage for system analytics.
Cookies & Tracking: Cookies or similar technologies for authentication, and performance monitoring.`]},{number:"3",title:"Purpose of Data Processing",content:["Your data is processed only to:",` Provide, operate, and maintain the CRM platform.
 Manage user roles, permissions, and workflow operations.
 Facilitate collaboration and sales processes within your organization. 
 Comply with legal obligations and protect the security of the platform.`]},{number:"4",title:"Developer Access and Confidentiality",content:["We respect your business privacy. Our developers and internal staff cannot access business transaction information.","Developer access is limited to technical maintenance, bug fixing, system monitoring, and improvements. Access is strictly controlled, logged, and does not include the ability to view or extract business-specific information."]},{number:"5",title:"Data Sharing",content:["We do not sell or trade your data. Data may be shared only with:",`Service Providers: Vendors who help host, operate, or maintain the CRM. They are bound by confidentiality agreements.
Legal Requirements: Where disclosure is required by law, regulation, or legal process.`]},{number:"6",title:"Data Security",content:["We implement reasonable technical, administrative, and organizational measures to protect your data from unauthorized access, disclosure, alteration, or destruction. Users must also maintain secure login credentials and account access."]},{number:"7",title:"Data Retention",content:["We retain data only as long as necessary to provide services and comply with legal obligations. Your organization's Admins may request deletion of user accounts and associated business data."]},{number:"8",title:"Consent",content:["By using our CRM, your organization consents to the collection, processing, and storage of data as described in this Privacy Policy. Admins are responsible for ensuring that all users within their organization are aware of this policy and that proper consent has been obtained where required."]},{number:"9",title:"Third-Party Integrations",content:["Our CRM may integrate with third-party tools (e.g., email, calendar, analytics). We are not responsible for the privacy practices of these third parties."]},{number:"10",title:"Data Processing Agreement",content:["By using Sari-Sari CRM, your organization acknowledges and agrees that:",` Your organization is the Data Controller of all business and personal data entered into the CRM. 
 We implement technical and organizational measures to ensure data confidentiality, integrity, and security.
 Developer access to business transaction data is strictly restricted and logged, and we will not use or disclose your organization's business data for any purpose other than providing and maintaining the CRM services.`]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Privacy Policy"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM provides a B2B CRM platform designed to help manage businesses. Protecting your business and personal data is a top priority. This Privacy Policy explains how we collect, process, store, and protect data in compliance with applicable."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Your privacy and data security are important to us. If you have any questions about this Privacy Policy, please contact our CRM Administration team."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},Nue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Purpose",content:['This Service Level Agreement ("SLA") defines the service standards, availability commitments, support expectations, and responsibilities associated with the use of Sari-Sari CRM, a business-to-business customer relationship management platform.']},{number:"2",title:"Service Availability",content:["We work to keep the CRM available 99.5% of the time each month so your team can manage work without interruption.","Planned maintenance is announced in advance whenever possible. Emergency maintenance may happen if needed to keep the system secure and stable.","Downtime caused by scheduled maintenance, internet or third-party issues, user device problems, or events outside our control is not included in availability targets."]},{number:"3",title:"Performance Standards",content:["The CRM platform is designed to:",` Provide consistent access to business records and sales workflows
 Support role-based system operations`,"Performance may vary depending on user device, internet connection, and data volume."]},{number:"4",title:"Data Protection & Confidentiality",content:["We prioritize business data security:",` Access to CRM data is restricted to authorized organizational users
 Developers and internal staff do not access business transaction data
 Security safeguards are implemented to protect confidentiality and integrity`]},{number:"5",title:"Incident Management",content:["If a service disruption occurs:",` Issues are logged and prioritized based on severity
 Mitigation steps are started as quickly as possible
 Users are informed of significant incidents when appropriate`]},{number:"6",title:"Customer Responsibilities",content:["Organizations using the CRM agree to:",` Maintain secure login credentials
 Use the system in accordance with assigned roles
 Report issues promptly
 Ensure stable internet and device compatibility`]},{number:"7",title:"Maintenance & Updates",content:["We may perform:",` Routine maintenance
 Security updates
 Feature improvements`,"Maintenance may temporarily affect availability."]},{number:"8",title:"Limitations",content:["Service commitments do not apply to disruptions caused by:",` User misuse or unauthorized modifications
 Third-party service failures
 Network or infrastructure outside our control`]},{number:"9",title:"Review & Modification",content:["This SLA may be updated to reflect service improvements or operational changes. Continued use of the CRM indicates acceptance of updates."]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Service Level Agreement"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"This Service Level Agreement defines the service standards, availability commitments, support expectations, and responsibilities associated with the use of Sari-Sari CRM."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"This SLA may be updated to reflect service improvements or operational changes. Continued use of the CRM indicates acceptance of updates."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},Cue=({isOpen:e,onClose:t})=>{if(!e)return null;const n=[{number:"1",title:"Data Privacy Compliance",content:["Our platform is built to align with applicable data protection regulations, including:",` Philippine Data Privacy Act (RA 10173)
 Applicable international privacy standards where required`,"We support lawful collection, processing, and storage of business and personal information handled within the CRM."]},{number:"2",title:"Access & Confidentiality Controls",content:["We enforce role-based access controls to ensure that only authorized users within an organization can view or manage business data such as leads, contacts, accounts, deals, and quotes.","Developer and internal access is restricted to system maintenance and operational support under controlled conditions."]},{number:"3",title:"Security Practices",content:["We implement reasonable administrative, technical, and organizational safeguards designed to:",` Protect data confidentiality
 Prevent unauthorized access
 Maintain system integrity
 Support operational reliability`,"Security measures are reviewed and improved as part of ongoing system maintenance."]},{number:"4",title:"Operational Compliance",content:["The CRM follows structured operational processes to support:",` System availability and maintenance standards
 Incident management and issue resolution
 Data handling accountability
 Responsible service delivery`]},{number:"5",title:"Continuous Improvement",content:["Compliance and security practices are regularly evaluated to adapt to evolving regulatory expectations and technology standards."]}];return a.jsx("div",{className:"fixed inset-0 bg-black/40 bg-opacity-40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-hidden",onClick:s=>s.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-secondary text-white px-8 py-6 flex items-center justify-between border-b border-accent",children:[a.jsx("div",{children:a.jsx("h2",{className:"text-3xl font-bold",children:"Compliance Standards & Commitments"})}),a.jsx("button",{onClick:t,className:"text-white hover:text-accent transition-colors text-4xl leading-none",children:""})]}),a.jsxs("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)] px-8 py-6 scrollbar-hide",children:[a.jsx("p",{className:"text-gray-700 mb-6 leading-relaxed",children:"Sari-Sari CRM is designed to support responsible business data management while aligning with recognized privacy, security, and operational best practices. We are committed to maintaining safeguards that protect customer and organizational information."}),a.jsx("div",{className:"space-y-6",children:n.map((s,r)=>a.jsxs("div",{className:"border-l-4 border-accent pl-6 py-2",children:[a.jsxs("h3",{className:"text-xl font-semibold text-secondary mb-2",children:[s.number,". ",s.title]}),s.content.map((i,o)=>a.jsx("p",{className:"text-gray-700 mb-2 leading-relaxed whitespace-pre-line text-sm",children:i},o))]},r))}),a.jsx("div",{className:"mt-8 pt-6 mb-10 border-t border-gray-200",children:a.jsx("p",{className:"text-gray-600 text-xs leading-relaxed text-center",children:"Compliance and security practices are regularly evaluated to adapt to evolving regulatory expectations and technology standards."})})]}),a.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-8 py-4 border-t border-gray-200",children:a.jsx("button",{onClick:t,className:"w-full bg-accent text-white px-6 py-3 rounded-lg font-semibold hover:bg-secondary transition-colors",children:"Close"})})]})})},Sue=()=>a.jsx("header",{className:"bg-secondary text-white py-4 border-b border-accent",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between py-3",children:[a.jsxs(id,{to:"/",className:"text-2xl font-bold",children:["Sari-Sari ",a.jsx("span",{className:"text-accent",children:"CRM"})]}),a.jsxs("nav",{className:"flex space-x-8",children:[a.jsx(id,{to:"/resources",className:"hover:text-accent transition-colors",children:"Resources"}),a.jsx(id,{to:"/legal",className:"hover:text-accent transition-colors",children:"Legal"})]})]})})}),_ue=()=>{const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1);f.useEffect(()=>{document.title="Legal - Sari-Sari CRM"},[]);const c=[{title:"Terms",description:"Our terms of service and conditions of use.",action:()=>t(!0)},{title:"Privacy",description:"How we protect and handle your personal data.",action:()=>s(!0)},{title:"Service Level Agreement (SLA)",description:"Service level agreements and guarantees.",action:()=>i(!0)},{title:"Compliance",description:"Our compliance standards.",action:()=>l(!0)}];return a.jsxs("div",{className:"font-manrope",children:[a.jsx(Sue,{}),a.jsx(wue,{isOpen:e,onClose:()=>t(!1)}),a.jsx(jue,{isOpen:n,onClose:()=>s(!1)}),a.jsx(Nue,{isOpen:r,onClose:()=>i(!1)}),a.jsx(Cue,{isOpen:o,onClose:()=>l(!1)}),a.jsx("main",{className:"bg-paper-white min-h-screen py-16",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-5xl font-bold text-secondary mb-4",children:"Legal"}),a.jsx("p",{className:"text-lg text-secondary mb-12",children:"Important legal information and policies"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:c.map((u,d)=>a.jsxs("div",{className:"p-6 bg-white border border-gray-200 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[a.jsx("h3",{className:"text-2xl font-semibold text-secondary mb-2",children:u.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:u.description}),u.action?a.jsx("button",{onClick:u.action,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "}):a.jsx("a",{href:u.link,className:"text-accent font-semibold hover:text-secondary transition-colors",children:"Read More "})]},d))})]})})]})},Oj=e=>{const t="https://crm.sari-sari.com";try{const n=new URL(t),s=n.protocol==="https:"?"wss":"ws",r=n.hostname,i=n.port||(n.protocol==="https:"?443:80),o=`${s}://${r}:${i}/ws/notifications?user_id=${e}`;return console.log(" WebSocket URL:",o),o}catch(n){return console.error("Error parsing API URL:",n),`ws://localhost:8000/ws/notifications?user_id=${e}`}};function Aue({toggleSidebar:e}){const[t,n]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef(null),h=Jt(),p=Tt(),{logout:x}=Ks(),{user:v,fetchUser:j}=Gt(),N={"/admin/dashboard":"Dashboard","/admin/accounts":"Accounts","/admin/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/admin/Audit":"Audit","/admin/targets":"Targets","/admin/leads":"Leads","/admin/quotes":"Quotes","/admin/users":"Users","/admin/deals":"Deals"}[h.pathname]||"Admin Panel";return f.useEffect(()=>{const w=()=>{j()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[j]),f.useEffect(()=>{if(!v?.id)return;const w=Oj(v.id);console.log(" Connecting to WebSocket:",w);const S=new WebSocket(w);let _;const k=()=>{_=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return S.onopen=()=>{console.log(" Admin WS Connected"),clearTimeout(_)},S.onmessage=T=>{try{const A=JSON.parse(T.data);console.log(" Notification received:",A),o(E=>[A,...E]),c(E=>E+1)}catch(A){console.error("Error parsing notification:",A)}},S.onerror=T=>{console.error(" Admin WS Error:",T)},S.onclose=()=>{console.log(" Admin WS Disconnected"),k()},()=>{clearTimeout(_),S&&S.readyState===WebSocket.OPEN&&S.close()}},[v?.id]),f.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&n(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Jf,{className:"text-2xl"})}),v?.company?.company_logo&&a.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:N})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(ux,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer",children:w.title||w.message||"New Update"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Admin"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-4 text-left",children:[a.jsx("button",{onClick:()=>{p("/admin/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/admin/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Manage Your Account"}),a.jsx("button",{onClick:()=>{p("/admin/help"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-1 rounded text-left",children:"Help"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Tue(){const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Jt(),{user:u}=Gt();f.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),f.useEffect(()=>{document.title="Admin Panel | Sari-Sari CRM"},[]);const h=["/admin/accounts","/admin/contacts","/admin/leads","/admin/deals","/admin/quotes","/admin/targets"].includes(c.pathname);f.useEffect(()=>{h&&t(!0)},[c.pathname]);const p="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",x="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ut,{to:"/admin/dashboard",className:({isActive:v})=>v?p:x,children:[a.jsx(mx,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-lg"}),"Sales"]}),a.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/admin/accounts",className:({isActive:v})=>v?p:x,children:[a.jsx(jd,{})," Accounts"]}),a.jsxs(Ut,{to:"/admin/contacts",className:({isActive:v})=>v?p:x,children:[a.jsx(sa,{})," Contacts"]}),a.jsxs(Ut,{to:"/admin/leads",className:({isActive:v})=>v?p:x,children:[a.jsx(Xa,{})," Leads"]}),a.jsxs(Ut,{to:"/admin/deals",className:({isActive:v})=>v?p:x,children:[a.jsx(na,{})," Deals"]}),a.jsxs(Ut,{to:"/admin/quotes",className:({isActive:v})=>v?p:x,children:[a.jsx(ra,{})," Quotes"]}),a.jsxs(Ut,{to:"/admin/targets",className:({isActive:v})=>v?p:x,children:[a.jsx(mr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"text-lg"}),"Activity"]}),a.jsx(Lt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/admin/tasks",className:({isActive:v})=>v?p:x,children:[a.jsx(Yt,{})," Tasks"]}),a.jsxs(Ut,{to:"/admin/meetings",className:({isActive:v})=>v?p:x,children:[a.jsx(Dt,{})," Meetings"]}),a.jsxs(Ut,{to:"/admin/calls",className:({isActive:v})=>v?p:x,children:[a.jsx(zs,{})," Calls"]}),a.jsxs(Ut,{to:"/admin/audit",className:({isActive:v})=>v?p:x,children:[a.jsx(ks,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ut,{to:"/admin/territory",className:({isActive:v})=>v?p:x,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ec,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(CL,{className:"text-lg"}),"Settings"]}),a.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/admin/users",className:({isActive:v})=>v?p:x,children:[a.jsx(rn,{})," Users"]}),a.jsxs(Ut,{to:"/admin/manage-account",className:({isActive:v})=>v?p:x,children:[a.jsx(sa,{}),"Your Profile"]}),a.jsxs(Ut,{to:"/admin/company-details",className:({isActive:v})=>v?p:x,children:[a.jsx(pj,{}),"Organization"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(Aue,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(nx,{})})]})]})}function kue(e){return Pt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"},child:[]}]})(e)}function Eue(e){return Pt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M544 248l0 3.3 69.7-69.7c21.9-21.9 21.9-57.3 0-79.2L535.6 24.4c-21.9-21.9-57.3-21.9-79.2 0L416.3 64.5c-2.7-.3-5.5-.5-8.3-.5L296 64c-37.1 0-67.6 28-71.6 64l-.4 0 0 120c0 22.1 17.9 40 40 40s40-17.9 40-40l0-72c0 0 0-.1 0-.1l0-15.9 16 0 136 0c0 0 0 0 .1 0l7.9 0c44.2 0 80 35.8 80 80l0 8zM336 192l0 56c0 39.8-32.2 72-72 72s-72-32.2-72-72l0-118.6c-35.9 6.2-65.8 32.3-76 68.2L99.5 255.2 26.3 328.4c-21.9 21.9-21.9 57.3 0 79.2l78.1 78.1c21.9 21.9 57.3 21.9 79.2 0l37.7-37.7c.9 0 1.8 .1 2.7 .1l160 0c26.5 0 48-21.5 48-48c0-5.6-1-11-2.7-16l2.7 0c26.5 0 48-21.5 48-48c0-12.8-5-24.4-13.2-33c25.7-5 45.1-27.6 45.2-54.8l0-.4c-.1-30.8-25.1-55.8-56-55.8c0 0 0 0 0 0l-120 0z"},child:[]}]})(e)}function Lue(e){return Pt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M64 32C46.3 32 32 46.3 32 64l0 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l0 64 0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 80 0c68.4 0 127.7-39 156.8-96l19.2 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-.7 0c.5-5.3 .7-10.6 .7-16s-.2-10.7-.7-16l.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-19.2 0C303.7 71 244.4 32 176 32L64 32zm190.4 96L96 128l0-32 80 0c30.5 0 58.2 12.2 78.4 32zM96 192l190.9 0c.7 5.2 1.1 10.6 1.1 16s-.4 10.8-1.1 16L96 224l0-32zm158.4 96c-20.2 19.8-47.9 32-78.4 32l-80 0 0-32 158.4 0z"},child:[]}]})(e)}function Ti({props:e,name:t}){return Cce({props:e,name:t,defaultTheme:FL,themeId:Dj})}function Ul(e){const{elementType:t,externalSlotProps:n,ownerState:s,skipResolvingSlotProps:r=!1,...i}=e,o=r?{}:X9(n,s),{props:l,internalRef:c}=Z9({...i,externalSlotProps:o}),u=Fo(c,o?.ref,e.additionalProps?.ref);return K9(t,{...l,ref:u},s)}function ps(e){const t=f.useRef(e);return is(()=>{t.current=e}),f.useRef((...n)=>(0,t.current)(...n)).current}var Lv=Symbol("NOT_FOUND");function Pue(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Due(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Oue(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${n}]`)}}var k$=e=>Array.isArray(e)?e:[e];function Mue(e){const t=Array.isArray(e[0])?e[0]:e;return Oue(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Iue(e,t){const n=[],{length:s}=e;for(let r=0;r<s;r++)n.push(e[r].apply(null,t));return n}function $ue(e){let t;return{get(n){return t&&e(t.key,n)?t.value:Lv},put(n,s){t={key:n,value:s}},getEntries(){return t?[t]:[]},clear(){t=void 0}}}function Rue(e,t){let n=[];function s(l){const c=n.findIndex(u=>t(l,u.key));if(c>-1){const u=n[c];return c>0&&(n.splice(c,1),n.unshift(u)),u.value}return Lv}function r(l,c){s(l)===Lv&&(n.unshift({key:l,value:c}),n.length>e&&n.pop())}function i(){return n}function o(){n=[]}return{get:s,put:r,getEntries:i,clear:o}}var zue=(e,t)=>e===t;function Fue(e){return function(n,s){if(n===null||s===null||n.length!==s.length)return!1;const{length:r}=n;for(let i=0;i<r;i++)if(!e(n[i],s[i]))return!1;return!0}}function Uue(e,t){const n=typeof t=="object"?t:{equalityCheck:t},{equalityCheck:s=zue,maxSize:r=1,resultEqualityCheck:i}=n,o=Fue(s);let l=0;const c=r<=1?$ue(o):Rue(r,o);function u(){let d=c.get(arguments);if(d===Lv){if(d=e.apply(null,arguments),l++,i){const p=c.getEntries().find(x=>i(x.value,d));p&&(d=p.value,l!==0&&l--)}c.put(arguments,d)}return d}return u.clearCache=()=>{c.clear(),u.resetResultsCount()},u.resultsCount=()=>l,u.resetResultsCount=()=>{l=0},u}var Bue=class{constructor(e){this.value=e}deref(){return this.value}},Hue=typeof WeakRef<"u"?WeakRef:Bue,que=0,E$=1;function Wy(){return{s:que,v:void 0,o:null,p:null}}function nq(e,t={}){let n=Wy();const{resultEqualityCheck:s}=t;let r,i=0;function o(){let l=n;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const x=arguments[h];if(typeof x=="function"||typeof x=="object"&&x!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const j=v.get(x);j===void 0?(l=Wy(),v.set(x,l)):l=j}else{let v=l.p;v===null&&(l.p=v=new Map);const j=v.get(x);j===void 0?(l=Wy(),v.set(x,l)):l=j}}const u=l;let d;if(l.s===E$)d=l.v;else if(d=e.apply(null,arguments),i++,s){const h=r?.deref?.()??r;h!=null&&s(h,d)&&(d=h,i!==0&&i--),r=typeof d=="object"&&d!==null||typeof d=="function"?new Hue(d):d}return u.s=E$,u.v=d,d}return o.clearCache=()=>{n=Wy(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function sq(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...r)=>{let i=0,o=0,l,c={},u=r.pop();typeof u=="object"&&(c=u,u=r.pop()),Pue(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...n,...c},{memoize:h,memoizeOptions:p=[],argsMemoize:x=nq,argsMemoizeOptions:v=[]}=d,j=k$(p),b=k$(v),N=Mue(r),w=h(function(){return i++,u.apply(null,arguments)},...j),S=x(function(){o++;const k=Iue(N,arguments);return l=w.apply(null,k),l},...b);return Object.assign(S,{resultFunc:u,memoizedResultFunc:w,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:x})};return Object.assign(s,{withTypes:()=>s}),s}var ut=sq(nq),Gue=Object.assign((e,t=ut)=>{Due(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),s=n.map(i=>e[i]);return t(s,(...i)=>i.reduce((o,l,c)=>(o[n[c]]=l,o),{}))},{withTypes:()=>Gue});const Wue=sq({memoize:Uue,memoizeOptions:{maxSize:1,equalityCheck:Object.is}}),Et=(e,t,n,s,r,i,o,l,...c)=>{if(c.length>0)throw new Error("Unsupported number of selectors");let u;if(e&&t&&n&&s&&r&&i&&o&&l)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x),b=n(d,h,p,x),N=s(d,h,p,x),w=r(d,h,p,x),S=i(d,h,p,x),_=o(d,h,p,x);return l(v,j,b,N,w,S,_,h,p,x)};else if(e&&t&&n&&s&&r&&i&&o)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x),b=n(d,h,p,x),N=s(d,h,p,x),w=r(d,h,p,x),S=i(d,h,p,x);return o(v,j,b,N,w,S,h,p,x)};else if(e&&t&&n&&s&&r&&i)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x),b=n(d,h,p,x),N=s(d,h,p,x),w=r(d,h,p,x);return i(v,j,b,N,w,h,p,x)};else if(e&&t&&n&&s&&r)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x),b=n(d,h,p,x),N=s(d,h,p,x);return r(v,j,b,N,h,p,x)};else if(e&&t&&n&&s)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x),b=n(d,h,p,x);return s(v,j,b,h,p,x)};else if(e&&t&&n)u=(d,h,p,x)=>{const v=e(d,h,p,x),j=t(d,h,p,x);return n(v,j,h,p,x)};else if(e&&t)u=(d,h,p,x)=>{const v=e(d,h,p,x);return t(v,h,p,x)};else if(e)u=e;else throw new Error("Missing arguments");return u},Mj=e=>(...t)=>{const n=new WeakMap;let s=1;const r=t[t.length-1],i=t.length-1||1,o=Math.max(r.length-i,0);if(o>3)throw new Error("Unsupported number of arguments");return(c,u,d,h)=>{let p=c.__cacheKey__;p||(p={id:s},c.__cacheKey__=p,s+=1);let x=n.get(p);if(!x){const v=t.length===1?[N=>N,r]:t;let j=t;const b=[void 0,void 0,void 0];switch(o){case 0:break;case 1:{j=[...v.slice(0,-1),()=>b[0],r];break}case 2:{j=[...v.slice(0,-1),()=>b[0],()=>b[1],r];break}case 3:{j=[...v.slice(0,-1),()=>b[0],()=>b[1],()=>b[2],r];break}default:throw new Error("Unsupported number of arguments")}e&&(j=[...j,e]),x=Wue(...j),x.selectorArgs=b,n.set(p,x)}switch(o){case 3:x.selectorArgs[2]=h;case 2:x.selectorArgs[1]=d;case 1:x.selectorArgs[0]=u}switch(o){case 0:return x(c);case 1:return x(c,u);case 2:return x(c,u,d);case 3:return x(c,u,d,h);default:throw new Error("unreachable")}}},$n=Mj();var d2={exports:{}},u2={},m2={exports:{}},f2={};var L$;function Vue(){if(L$)return f2;L$=1;var e=Vf();function t(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,p){var x=p(),v=s({inst:{value:x,getSnapshot:p}}),j=v[0].inst,b=v[1];return i(function(){j.value=x,j.getSnapshot=p,c(j)&&b({inst:j})},[h,x,p]),r(function(){return c(j)&&b({inst:j}),h(function(){c(j)&&b({inst:j})})},[h]),o(x),x}function c(h){var p=h.getSnapshot;h=h.value;try{var x=p();return!n(h,x)}catch{return!0}}function u(h,p){return p()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return f2.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,f2}var P$;function Yue(){return P$||(P$=1,m2.exports=Vue()),m2.exports}var D$;function Que(){if(D$)return u2;D$=1;var e=Vf(),t=Yue();function n(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var s=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return u2.useSyncExternalStoreWithSelector=function(u,d,h,p,x){var v=i(null);if(v.current===null){var j={hasValue:!1,value:null};v.current=j}else j=v.current;v=l(function(){function N(T){if(!w){if(w=!0,S=T,T=p(T),x!==void 0&&j.hasValue){var A=j.value;if(x(A,T))return _=A}return _=T}if(A=_,s(S,T))return A;var E=p(T);return x!==void 0&&x(A,E)?(S=T,A):(S=T,_=E)}var w=!1,S,_,k=h===void 0?null:h;return[function(){return N(d())},k===null?void 0:function(){return N(k())}]},[d,h,p,x]);var b=r(u,v[0],v[1]);return o(function(){j.hasValue=!0,j.value=b},[b]),c(b),b},u2}var O$;function Kue(){return O$||(O$=1,d2.exports=Que()),d2.exports}var rq=Kue();function Xue(e,t,n,s,r){const i=o=>t(o,n,s,r);return rq.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getSnapshot,i)}const M$={};function Ij(e,t){const n=f.useRef(M$);return n.current===M$&&(n.current=e(t)),n}const Zue=[];function iq(e){f.useEffect(e,Zue)}const Jue=()=>{};function eme(e,t,n){const s=Ij(tme,{store:e,selector:t}).current;s.effect=n,iq(s.onMount)}function tme(e){const{store:t,selector:n}=e;let s=n(t.state);const r={effect:Jue,dispose:null,subscribe:()=>{r.dispose??=t.subscribe(i=>{const o=n(i);if(!Object.is(s,o)){const l=s;s=o,r.effect(l,o)}})},onMount:()=>(r.subscribe(),()=>{r.dispose?.(),r.dispose=null})};return r.subscribe(),r}class qL{static create(t){return new qL(t)}constructor(t){this.state=t,this.listeners=new Set,this.updateTick=0}subscribe=t=>(this.listeners.add(t),()=>{this.listeners.delete(t)});getSnapshot=()=>this.state;setState(t){this.state=t,this.updateTick+=1;const n=this.updateTick,s=this.listeners.values();let r;for(;r=s.next(),!r.done;){if(n!==this.updateTick)return;const i=r.value;i(t)}}update(t){for(const n in t)if(!Object.is(this.state[n],t[n])){this.setState(et({},this.state,t));return}}set(t,n){Object.is(this.state[t],n)||this.setState(et({},this.state,{[t]:n}))}}const $j=({params:e,store:t})=>{f.useEffect(()=>{t.set("animation",et({},t.state.animation,{skip:e.skipAnimation}))},[t,e.skipAnimation]);const n=f.useCallback(()=>{let s=!1;return t.set("animation",et({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests+1})),()=>{s||(s=!0,t.set("animation",et({},t.state.animation,{skipAnimationRequests:t.state.animation.skipAnimationRequests-1})))}},[t]);return is(()=>{if(typeof window>"u"||!window?.matchMedia)return;let r;const i=l=>{l.matches?r=n():r?.()},o=window.matchMedia("(prefers-reduced-motion)");return i(o),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[n,t]),{instance:{disableAnimation:n}}};$j.params={skipAnimation:!0};$j.getDefaultizedParams=({params:e})=>et({},e,{skipAnimation:e.skipAnimation??!1});$j.getInitialState=({skipAnimation:e})=>({animation:{skip:e,skipAnimationRequests:0}});const ame=e=>e.animation,nme=Et(ame,e=>e.skip||e.skipAnimationRequests>0);function sme(e,t){const n=f.useRef(!0);f.useEffect(()=>{if(n.current){n.current=!1;return}return e()},t)}function pk(e){return e&&e.ownerDocument||document}function rme(e){return pk(e).defaultView||window}const qt=Xue,Rj="DEFAULT_X_AXIS_KEY",ime="DEFAULT_Y_AXIS_KEY",ome={top:20,bottom:20,left:20,right:20},lme=45,cme=25,oq=20,Yo=e=>e.cartesianAxis?.x,ac=e=>e.cartesianAxis?.y,dme=Et(ac,function(t){return(t??[]).reduce((n,s)=>s.position==="left"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),ume=Et(ac,function(t){return(t??[]).reduce((n,s)=>s.position==="right"?n+(s.width||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),mme=Et(Yo,function(t){return(t??[]).reduce((n,s)=>s.position==="top"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),fme=Et(Yo,function(t){return(t??[]).reduce((n,s)=>s.position==="bottom"?n+(s.height||0)+(s.zoom?.slider.enabled?s.zoom.slider.size:0):n,0)}),hme=$n(dme,ume,mme,fme,function(t,n,s,r){return{left:t,right:n,top:s,bottom:r}}),bx=e=>e.dimensions,gme=e=>e.dimensions.margin,vr=$n(bx,gme,hme,function({width:t,height:n},{top:s,right:r,bottom:i,left:o},{left:l,right:c,top:u,bottom:d}){return{width:t-o-r-l-c,left:o+l,right:r+c,height:n-s-i-u-d,top:s+u,bottom:i+d}}),pme=Et(bx,e=>e.width),xme=Et(bx,e=>e.height),lq=Et(bx,e=>e.propsWidth),cq=Et(bx,e=>e.propsHeight);function yme(e,t){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:t?et({},t,e):e}const bme=10,zj=({params:e,store:t,svgRef:n})=>{const s=e.width!==void 0&&e.height!==void 0,r=f.useRef({displayError:!1,initialCompute:!0,computeRun:0}),[i,o]=f.useState(0),[l,c]=f.useState(0),u=f.useCallback(()=>{const v=n?.current;if(!v)return{};const b=rme(v).getComputedStyle(v),N=Math.floor(parseFloat(b.height))||0,w=Math.floor(parseFloat(b.width))||0;return(t.state.dimensions.width!==w||t.state.dimensions.height!==N)&&t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:e.width??w,height:e.height??N,propsWidth:e.width,propsHeight:e.height}),{height:N,width:w}},[t,n,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]);sme(()=>{const v=e.width??t.state.dimensions.width,j=e.height??t.state.dimensions.height;t.set("dimensions",{margin:{top:e.margin.top,right:e.margin.right,bottom:e.margin.bottom,left:e.margin.left},width:v,height:j,propsHeight:e.height,propsWidth:e.width})},[t,e.height,e.width,e.margin.left,e.margin.right,e.margin.top,e.margin.bottom]),f.useEffect(()=>{r.current.displayError=!0},[]),is(()=>{if(s||!r.current.initialCompute||r.current.computeRun>bme)return;const v=u();v.width!==i||v.height!==l?(r.current.computeRun+=1,v.width!==void 0&&o(v.width),v.height!==void 0&&c(v.height)):r.current.initialCompute&&(r.current.initialCompute=!1)},[l,i,u,s]),is(()=>{if(s)return()=>{};u();const v=n.current;if(typeof ResizeObserver>"u")return()=>{};let j;const b=new ResizeObserver(()=>{j=requestAnimationFrame(()=>{u()})});return v&&b.observe(v),()=>{j&&cancelAnimationFrame(j),v&&b.unobserve(v)}},[u,s,n]);const d=qt(t,vr),h=f.useCallback(v=>v>=d.left-1&&v<=d.left+d.width,[d.left,d.width]),p=f.useCallback(v=>v>=d.top-1&&v<=d.top+d.height,[d.height,d.top]);return{instance:{isPointInside:f.useCallback((v,j,b)=>b&&"closest"in b&&b.closest("[data-drawing-container]")?!0:h(v)&&p(j),[h,p]),isXInside:h,isYInside:p}}};zj.params={width:!0,height:!0,margin:!0};zj.getDefaultizedParams=({params:e})=>et({},e,{margin:yme(e.margin,ome)});zj.getInitialState=({width:e,height:t,margin:n})=>({dimensions:{margin:n,width:e??0,height:t??0,propsWidth:e,propsHeight:t}});const GL=({params:e,store:t})=>(is(()=>{t.set("experimentalFeatures",e.experimentalFeatures)},[t,e.experimentalFeatures]),{});GL.params={experimentalFeatures:!0};GL.getInitialState=({experimentalFeatures:e})=>({experimentalFeatures:e});const vme=e=>e.experimentalFeatures,Fj=Et(vme,e=>!!e?.preferStrictDomainInLineCharts);let I$=0;const wme=()=>(I$+=1,`mui-chart-${I$}`),WL=({params:e,store:t})=>(f.useEffect(()=>{e.id===void 0||e.id===t.state.id.providedChartId&&t.state.id.chartId!==void 0||t.set("id",et({},t.state.id,{chartId:e.id??wme()}))},[t,e.id]),{});WL.params={id:!0};WL.getInitialState=({id:e})=>({id:{chartId:e,providedChartId:e}});const jme=e=>e.id,Nme=Et(jme,e=>e.chartId),Cme=["#4254FB","#FFB422","#FA4F58","#0DBEFF","#22BF75","#FA83B4","#FF7511"],Sme=["#495AFB","#FFC758","#F35865","#30C8FF","#44CE8D","#F286B3","#FF8C39"],dq=e=>e==="dark"?Sme:Cme,uq=({series:e,colors:t,seriesConfig:n})=>{const s={};return e.forEach((r,i)=>{const o=n[r.type].getSeriesWithDefaultValues(r,i,t),l=o.id;if(s[r.type]===void 0&&(s[r.type]={series:{},seriesOrder:[]}),s[r.type]?.series[l]!==void 0)throw new Error(`MUI X Charts: series' id "${l}" is not unique.`);s[r.type].series[l]=o,s[r.type].seriesOrder.push(l)}),s},_me=(e,t,n)=>{const s={};return Object.keys(t).forEach(r=>{const i=e[r];i!==void 0&&(s[r]=t[r]?.seriesProcessor?.(i,n)??i)}),s},Uj=({params:e,store:t,seriesConfig:n})=>{const{series:s,dataset:r,theme:i,colors:o}=e,l=f.useRef(!0);return f.useEffect(()=>{if(l.current){l.current=!1;return}t.set("series",et({},t.state.series,{defaultizedSeries:uq({series:s,colors:typeof o=="function"?o(i):o,seriesConfig:n}),dataset:r}))},[o,r,s,i,n,t]),{}};Uj.params={dataset:!0,series:!0,colors:!0,theme:!0};const Ame=[];Uj.getDefaultizedParams=({params:e})=>et({},e,{series:e.series?.length?e.series:Ame,colors:e.colors??dq,theme:e.theme??"light"});Uj.getInitialState=({series:e=[],colors:t,theme:n,dataset:s},r,i)=>({series:{seriesConfig:i,defaultizedSeries:uq({series:e,colors:typeof t=="function"?t(n):t,seriesConfig:i}),dataset:s}});const VL=e=>e.series,Tme=Et(VL,e=>e.defaultizedSeries),Gr=Et(VL,e=>e.seriesConfig),kme=Et(VL,e=>e.dataset),yn=$n(Tme,Gr,kme,function(t,n,s){return _me(t,n,s)}),Eme={abort:!0,animationcancel:!0,animationend:!0,animationiteration:!0,animationstart:!0,auxclick:!0,beforeinput:!0,beforetoggle:!0,blur:!0,cancel:!0,canplay:!0,canplaythrough:!0,change:!0,click:!0,close:!0,compositionend:!0,compositionstart:!0,compositionupdate:!0,contextlost:!0,contextmenu:!0,contextrestored:!0,copy:!0,cuechange:!0,cut:!0,dblclick:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0,durationchange:!0,emptied:!0,ended:!0,error:!0,focus:!0,focusin:!0,focusout:!0,formdata:!0,gotpointercapture:!0,input:!0,invalid:!0,keydown:!0,keypress:!0,keyup:!0,load:!0,loadeddata:!0,loadedmetadata:!0,loadstart:!0,lostpointercapture:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,paste:!0,pause:!0,play:!0,playing:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,progress:!0,ratechange:!0,reset:!0,resize:!0,scroll:!0,scrollend:!0,securitypolicyviolation:!0,seeked:!0,seeking:!0,select:!0,selectionchange:!0,selectstart:!0,slotchange:!0,stalled:!0,submit:!0,suspend:!0,timeupdate:!0,toggle:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,transitioncancel:!0,transitionend:!0,transitionrun:!0,transitionstart:!0,volumechange:!0,waiting:!0,webkitanimationend:!0,webkitanimationiteration:!0,webkitanimationstart:!0,webkittransitionend:!0,wheel:!0,beforematch:!0,pointerrawupdate:!0};class mq{customData={};constructor(t){if(!t||!t.name)throw new Error("Gesture must be initialized with a valid name.");if(t.name in Eme)throw new Error(`Gesture can't be created with a native event name. Tried to use "${t.name}". Please use a custom name instead.`);this.name=t.name,this.preventDefault=t.preventDefault??!1,this.stopPropagation=t.stopPropagation??!1,this.preventIf=t.preventIf??[],this.requiredKeys=t.requiredKeys??[],this.pointerMode=t.pointerMode??[],this.pointerOptions=t.pointerOptions??{}}init(t,n,s,r){this.element=t,this.pointerManager=n,this.gesturesRegistry=s,this.keyboardManager=r;const i=`${this.name}ChangeOptions`;this.element.addEventListener(i,this.handleOptionsChange);const o=`${this.name}ChangeState`;this.element.addEventListener(o,this.handleStateChange)}handleOptionsChange=t=>{t&&t.detail&&this.updateOptions(t.detail)};updateOptions(t){this.preventDefault=t.preventDefault??this.preventDefault,this.stopPropagation=t.stopPropagation??this.stopPropagation,this.preventIf=t.preventIf??this.preventIf,this.requiredKeys=t.requiredKeys??this.requiredKeys,this.pointerMode=t.pointerMode??this.pointerMode,this.pointerOptions=t.pointerOptions??this.pointerOptions}getBaseConfig(){return{requiredKeys:this.requiredKeys}}getEffectiveConfig(t,n){if(t!=="mouse"&&t!=="touch"&&t!=="pen")return n;const s=this.pointerOptions[t];return s?et({},n,s):n}handleStateChange=t=>{t&&t.detail&&this.updateState(t.detail)};updateState(t){Object.assign(this.state,t)}getTargetElement(t){return this.isActive||this.element===t.target||"contains"in this.element&&this.element.contains(t.target)||"getRootNode"in this.element&&this.element.getRootNode()instanceof ShadowRoot&&t.composedPath().includes(this.element)?this.element:null}set isActive(t){t?this.gesturesRegistry.registerActiveGesture(this.element,this):this.gesturesRegistry.unregisterActiveGesture(this.element,this)}get isActive(){return this.gesturesRegistry.isGestureActive(this.element,this)??!1}shouldPreventGesture(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());if(!this.keyboardManager.areKeysPressed(s.requiredKeys))return!0;if(this.preventIf.length===0)return!1;const r=this.gesturesRegistry.getActiveGestures(t);return this.preventIf.some(i=>r[i])}isPointerTypeAllowed(t){return!this.pointerMode||this.pointerMode.length===0?!0:this.pointerMode.includes(t)}destroy(){const t=`${this.name}ChangeOptions`;this.element.removeEventListener(t,this.handleOptionsChange);const n=`${this.name}ChangeState`;this.element.removeEventListener(n,this.handleStateChange)}}class Lme{activeGestures=new Map;registerActiveGesture(t,n){this.activeGestures.has(t)||this.activeGestures.set(t,new Set);const s=this.activeGestures.get(t),r={gesture:n,element:t};s.add(r)}unregisterActiveGesture(t,n){const s=this.activeGestures.get(t);s&&(s.forEach(r=>{r.gesture===n&&s.delete(r)}),s.size===0&&this.activeGestures.delete(t))}getActiveGestures(t){const n=this.activeGestures.get(t);return n?Array.from(n).reduce((s,r)=>(s[r.gesture.name]=!0,s),{}):{}}isGestureActive(t,n){const s=this.activeGestures.get(t);return s?Array.from(s).some(r=>r.gesture===n):!1}destroy(){this.activeGestures.clear()}unregisterElement(t){this.activeGestures.delete(t)}}class Pme{pressedKeys=new Set;constructor(){this.initialize()}initialize(){typeof window>"u"||(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("blur",this.clearKeys))}handleKeyDown=t=>{this.pressedKeys.add(t.key)};handleKeyUp=t=>{this.pressedKeys.delete(t.key)};clearKeys=()=>{this.pressedKeys.clear()};areKeysPressed(t){return!t||t.length===0?!0:t.every(n=>n==="ControlOrMeta"?navigator.platform.includes("Mac")?this.pressedKeys.has("Meta"):this.pressedKeys.has("Control"):this.pressedKeys.has(n))}destroy(){typeof window<"u"&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("blur",this.clearKeys)),this.clearKeys()}}class Dme{preventEventInterruption=!0;pointers=new Map;gestureHandlers=new Set;constructor(t){this.root=t.root??document.getRootNode({composed:!0})??document.body,this.touchAction=t.touchAction||"auto",this.passive=t.passive??!1,this.preventEventInterruption=t.preventEventInterruption??!0,this.setupEventListeners()}registerGestureHandler(t){return this.gestureHandlers.add(t),()=>{this.gestureHandlers.delete(t)}}getPointers(){return new Map(this.pointers)}setupEventListeners(){this.touchAction!=="auto"&&(this.root.style.touchAction=this.touchAction),this.root.addEventListener("pointerdown",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointermove",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointerup",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("pointercancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("forceCancel",this.handlePointerEvent,{passive:this.passive}),this.root.addEventListener("blur",this.handleInterruptEvents),this.root.addEventListener("contextmenu",this.handleInterruptEvents)}handleInterruptEvents=t=>{if(this.preventEventInterruption&&"pointerType"in t&&t.pointerType==="touch"){t.preventDefault();return}const n=new PointerEvent("forceCancel",{bubbles:!1,cancelable:!1}),s=this.pointers.values().next().value;if(this.pointers.size>0&&s){Object.defineProperties(n,{clientX:{value:s.clientX},clientY:{value:s.clientY},pointerId:{value:s.pointerId},pointerType:{value:s.pointerType}});for(const[r,i]of this.pointers.entries()){const o=et({},i,{type:"forceCancel"});this.pointers.set(r,o)}}this.notifyHandlers(n),this.pointers.clear()};handlePointerEvent=t=>{const{type:n,pointerId:s}=t;if(n==="pointerdown"||n==="pointermove")this.pointers.set(s,this.createPointerData(t));else if(n==="pointerup"||n==="pointercancel"||n==="forceCancel"){this.pointers.set(s,this.createPointerData(t)),this.notifyHandlers(t),this.pointers.delete(s);return}this.notifyHandlers(t)};notifyHandlers(t){this.gestureHandlers.forEach(n=>n(this.pointers,t))}createPointerData(t){return{pointerId:t.pointerId,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target,timeStamp:t.timeStamp,type:t.type,isPrimary:t.isPrimary,pressure:t.pressure,width:t.width,height:t.height,pointerType:t.pointerType,srcEvent:t}}destroy(){this.root.removeEventListener("pointerdown",this.handlePointerEvent),this.root.removeEventListener("pointermove",this.handlePointerEvent),this.root.removeEventListener("pointerup",this.handlePointerEvent),this.root.removeEventListener("pointercancel",this.handlePointerEvent),this.root.removeEventListener("forceCancel",this.handlePointerEvent),this.root.removeEventListener("blur",this.handleInterruptEvents),this.root.removeEventListener("contextmenu",this.handleInterruptEvents),this.pointers.clear(),this.gestureHandlers.clear()}}class Ome{gestureTemplates=new Map;elementGestureMap=new Map;activeGesturesRegistry=new Lme;keyboardManager=new Pme;constructor(t){this.pointerManager=new Dme({root:t.root,touchAction:t.touchAction,passive:t.passive}),t.gestures&&t.gestures.length>0&&t.gestures.forEach(n=>{this.addGestureTemplate(n)})}addGestureTemplate(t){this.gestureTemplates.has(t.name)&&console.warn(`Gesture template with name "${t.name}" already exists. It will be overwritten.`),this.gestureTemplates.set(t.name,t)}setGestureOptions(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeOptions`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}setGestureState(t,n,s){const r=this.elementGestureMap.get(n);if(!r||!r.has(t)){console.error(`Gesture "${t}" not found on the provided element.`);return}const i=new CustomEvent(`${t}ChangeState`,{detail:s,bubbles:!1,cancelable:!1,composed:!1});n.dispatchEvent(i)}registerElement(t,n,s){return Array.isArray(t)||(t=[t]),t.forEach(r=>{const i=s?.[r];this.registerSingleGesture(r,n,i)}),n}registerSingleGesture(t,n,s){const r=this.gestureTemplates.get(t);if(!r)return console.error(`Gesture template "${t}" not found.`),!1;this.elementGestureMap.has(n)||this.elementGestureMap.set(n,new Map);const i=this.elementGestureMap.get(n);i.has(t)&&(console.warn(`Element already has gesture "${t}" registered. It will be replaced.`),this.unregisterElement(t,n));const o=r.clone(s);return o.init(n,this.pointerManager,this.activeGesturesRegistry,this.keyboardManager),i.set(t,o),!0}unregisterElement(t,n){const s=this.elementGestureMap.get(n);return!s||!s.has(t)?!1:(s.get(t).destroy(),s.delete(t),this.activeGesturesRegistry.unregisterElement(n),s.size===0&&this.elementGestureMap.delete(n),!0)}unregisterAllGestures(t){const n=this.elementGestureMap.get(t);if(n){for(const[,s]of n)s.destroy(),this.activeGesturesRegistry.unregisterElement(t);this.elementGestureMap.delete(t)}}destroy(){for(const[t]of this.elementGestureMap)this.unregisterAllGestures(t);this.gestureTemplates.clear(),this.elementGestureMap.clear(),this.activeGesturesRegistry.destroy(),this.keyboardManager.destroy(),this.pointerManager.destroy()}}class Xu extends mq{unregisterHandler=null;originalTarget=null;constructor(t){super(t),this.minPointers=t.minPointers??1,this.maxPointers=t.maxPointers??1/0}init(t,n,s,r){super.init(t,n,s,r),this.unregisterHandler=this.pointerManager.registerGestureHandler(this.handlePointerEvent)}updateOptions(t){super.updateOptions(t),this.minPointers=t.minPointers??this.minPointers,this.maxPointers=t.maxPointers??this.maxPointers}getBaseConfig(){return{requiredKeys:this.requiredKeys,minPointers:this.minPointers,maxPointers:this.maxPointers}}isWithinPointerCount(t,n){const s=this.getEffectiveConfig(n,this.getBaseConfig());return t.length>=s.minPointers&&t.length<=s.maxPointers}getRelevantPointers(t,n){return t.filter(s=>this.isPointerTypeAllowed(s.pointerType)&&(n===s.target||s.target===this.originalTarget||n===this.originalTarget||"contains"in n&&n.contains(s.target))||"getRootNode"in n&&n.getRootNode()instanceof ShadowRoot&&s.srcEvent.composedPath().includes(n))}destroy(){this.unregisterHandler&&(this.unregisterHandler(),this.unregisterHandler=null),super.destroy()}}function Mme(e,t){const n=t.x-e.x,s=t.y-e.y;return Math.sqrt(n*n+s*s)}function h2(e){if(e.length<2)return 0;let t=0,n=0;for(let s=0;s<e.length;s+=1)for(let r=s+1;r<e.length;r+=1)t+=Mme({x:e[s].clientX,y:e[s].clientY},{x:e[r].clientX,y:e[r].clientY}),n+=1;return n>0?t/n:0}function Bl(e){if(e.length===0)return{x:0,y:0};const t=e.reduce((n,s)=>(n.x+=s.clientX,n.y+=s.clientY,n),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}}function pi(e,t){return`${e}${t==="ongoing"?"":t.charAt(0).toUpperCase()+t.slice(1)}`}const Vy=1e-5,Ic=1e-5,$$=.15;function Ime(e,t){const n=t.x-e.x,s=t.y-e.y,r={vertical:null,horizontal:null,mainAxis:null},i=$me(t,e),o=Math.abs(n)>Math.abs(s)?"horizontal":"vertical",l=i||o==="horizontal"?Vy:$$,c=i?Vy:o==="horizontal"?$$:Vy;return Math.abs(n)>l&&(r.horizontal=n>0?"right":"left"),Math.abs(s)>c&&(r.vertical=s>0?"down":"up"),r.mainAxis=i?"diagonal":o,r}function $me(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.atan2(s,n)*180/Math.PI;return r>=-45+Ic&&r<=-22.5+Ic||r>=22.5+Ic&&r<=45+Ic||r>=135+Ic&&r<=157.5+Ic||r>=-157.5+Ic&&r<=-135+Ic}function Rme(e,t){if(!e.vertical&&!e.horizontal)return!1;if(t.length===0)return!0;const n=e.vertical===null||t.includes(e.vertical),s=e.horizontal===null||t.includes(e.horizontal);return n&&s}const R$=0,zme=e=>e>R$?1:e<-R$?-1:0,qc=e=>{e.cancelable&&e.preventDefault()};class YL extends Xu{state={lastPosition:null};constructor(t){super(t),this.threshold=t.threshold||0}clone(t){return new YL(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("pointerenter",this.handleElementEnter),this.element.addEventListener("pointerleave",this.handleElementLeave)}destroy(){this.element.removeEventListener("pointerenter",this.handleElementEnter),this.element.removeEventListener("pointerleave",this.handleElementLeave),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state={lastPosition:null}}handleElementEnter=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen")return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());if(this.isWithinPointerCount(s,t.pointerType)){this.isActive=!0;const r={x:t.clientX,y:t.clientY};this.state.lastPosition=r,this.emitMoveEvent(this.element,"start",s,t),this.emitMoveEvent(this.element,"ongoing",s,t)}};handleElementLeave=t=>{if(t.pointerType!=="mouse"&&t.pointerType!=="pen"||!this.isActive)return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.emitMoveEvent(this.element,"end",s,t),this.resetState()};handlePointerEvent=(t,n)=>{if(n.type!=="pointermove"||n.pointerType!=="mouse"&&n.pointerType!=="pen")return;this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r||!this.isWithinPointerCount(s,n.pointerType))return;if(this.shouldPreventGesture(r,n.pointerType)){if(!this.isActive)return;this.resetState(),this.emitMoveEvent(r,"end",s,n);return}const i={x:n.clientX,y:n.clientY};this.state.lastPosition=i,this.isActive||(this.isActive=!0,this.emitMoveEvent(r,"start",s,n)),this.emitMoveEvent(r,"ongoing",s,n)};emitMoveEvent(t,n,s,r){const i=this.state.lastPosition||Bl(s),o=this.gesturesRegistry.getActiveGestures(t),l={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,activeGestures:o,customData:this.customData},c=pi(this.name,n),u=new CustomEvent(c,{bubbles:!0,cancelable:!0,composed:!0,detail:l});t.dispatchEvent(u)}}class vu extends Xu{state={startPointers:new Map,startCentroid:null,lastCentroid:null,movementThresholdReached:!1,totalDeltaX:0,totalDeltaY:0,activeDeltaX:0,activeDeltaY:0,lastDirection:{vertical:null,horizontal:null,mainAxis:null},lastDeltas:null};constructor(t){super(t),this.direction=t.direction||["up","down","left","right"],this.threshold=t.threshold||0}clone(t){return new vu(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,direction:[...this.direction],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.direction=t.direction||this.direction,this.threshold=t.threshold??this.threshold}resetState(){this.isActive=!1,this.state=et({},this.state,{startPointers:new Map,startCentroid:null,lastCentroid:null,lastDeltas:null,activeDeltaX:0,activeDeltaY:0,movementThresholdReached:!1,lastDirection:{vertical:null,horizontal:null,mainAxis:null}})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancel(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.cancel(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.cancel(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(i.forEach(o=>{this.state.startPointers.set(o.pointerId,o)}),this.originalTarget=r,this.state.startCentroid=Bl(i),this.state.lastCentroid=et({},this.state.startCentroid));break;case"pointermove":if(this.state.startCentroid&&this.isWithinPointerCount(s,n.pointerType)){const o=Bl(i),l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y,u=Math.sqrt(l*l+c*c),d=Ime(this.state.lastCentroid??this.state.startCentroid,o),h=this.state.lastCentroid?o.x-this.state.lastCentroid.x:0,p=this.state.lastCentroid?o.y-this.state.lastCentroid.y:0;!this.state.movementThresholdReached&&u>=this.threshold&&Rme(d,this.direction)?(this.state.movementThresholdReached=!0,this.isActive=!0,this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"start",i,n,o),this.emitPanEvent(r,"ongoing",i,n,o)):this.state.movementThresholdReached&&this.isActive&&(this.state.lastDeltas={x:h,y:p},this.state.totalDeltaX+=h,this.state.totalDeltaY+=p,this.state.activeDeltaX+=h,this.state.activeDeltaY+=p,this.emitPanEvent(r,"ongoing",i,n,o)),this.state.lastCentroid=o,this.state.lastDirection=d}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive&&this.state.movementThresholdReached){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,n.pointerType)){const l=this.state.lastCentroid||this.state.startCentroid;n.type==="pointercancel"&&this.emitPanEvent(r,"cancel",i,n,l),this.emitPanEvent(r,"end",i,n,l),this.resetState()}}else this.resetState();break}};emitPanEvent(t,n,s,r,i){if(!this.state.startCentroid)return;const o=this.state.lastDeltas?.x??0,l=this.state.lastDeltas?.y??0,c=this.state.startPointers.values().next().value,u=c?(r.timeStamp-c.timeStamp)/1e3:0,d=u>0?o/u:0,h=u>0?l/u:0,p=Math.sqrt(d*d+h*h),x=this.gesturesRegistry.getActiveGestures(t),v={gestureName:this.name,initialCentroid:this.state.startCentroid,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,deltaX:o,deltaY:l,direction:this.state.lastDirection,velocityX:d,velocityY:h,velocity:p,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,activeDeltaX:this.state.activeDeltaX,activeDeltaY:this.state.activeDeltaY,activeGestures:x,customData:this.customData},j=pi(this.name,n),b=new CustomEvent(j,{bubbles:!0,cancelable:!0,composed:!0,detail:v});t.dispatchEvent(b),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancel(t,n,s){if(this.isActive){const r=t??this.element;this.emitPanEvent(r,"cancel",n,s,this.state.lastCentroid),this.emitPanEvent(r,"end",n,s,this.state.lastCentroid)}this.resetState()}}class QL extends Xu{state={startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,totalScale:1,deltaScale:0};constructor(t){super(et({},t,{minPointers:t.minPointers??2})),this.threshold=t.threshold??0}clone(t){return new QL(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,threshold:this.threshold,minPointers:this.minPointers,maxPointers:this.maxPointers,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t)}resetState(){this.isActive=!1,this.state=et({},this.state,{startDistance:0,lastDistance:0,lastScale:1,lastTime:0,velocity:0,deltaScale:0})}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&(this.emitPinchEvent(r,"cancel",s,n),this.resetState());return}const i=this.getRelevantPointers(s,r);switch(n.type){case"pointerdown":if(i.length>=2&&!this.isActive){const o=h2(i);this.state.startDistance=o,this.state.lastDistance=o,this.state.lastTime=n.timeStamp,this.originalTarget=r}break;case"pointermove":if(this.state.startDistance&&this.isWithinPointerCount(i,n.pointerType)){const o=h2(i),l=Math.abs(o-this.state.lastDistance);if(l!==0&&l>=this.threshold){const c=this.state.startDistance?o/this.state.startDistance:1,u=c/this.state.lastScale;this.state.totalScale*=u;const d=(n.timeStamp-this.state.lastTime)/1e3;if(this.state.lastDistance){const p=(o-this.state.lastDistance)/d;this.state.velocity=Number.isNaN(p)?0:p}this.state.lastDistance=o,this.state.deltaScale=c-this.state.lastScale,this.state.lastScale=c,this.state.lastTime=n.timeStamp,this.isActive?this.emitPinchEvent(r,"ongoing",i,n):(this.isActive=!0,this.emitPinchEvent(r,"start",i,n),this.emitPinchEvent(r,"ongoing",i,n))}}break;case"pointerup":case"pointercancel":case"forceCancel":if(this.isActive){const o=i.filter(l=>l.type!=="pointerup"&&l.type!=="pointercancel");if(!this.isWithinPointerCount(o,n.pointerType))n.type==="pointercancel"&&this.emitPinchEvent(r,"cancel",i,n),this.emitPinchEvent(r,"end",i,n),this.resetState();else if(o.length>=2){const l=h2(o);this.state.startDistance=l/this.state.lastScale}}break}};emitPinchEvent(t,n,s,r){const i=Bl(s),o=this.state.lastDistance,l=this.state.lastScale,c=this.gesturesRegistry.getActiveGestures(t),u={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,scale:l,deltaScale:this.state.deltaScale,totalScale:this.state.totalScale,distance:o,velocity:this.state.velocity,activeGestures:c,direction:zme(this.state.velocity),customData:this.customData};this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation();const d=pi(this.name,n),h=new CustomEvent(d,{bubbles:!0,cancelable:!0,composed:!0,detail:u});t.dispatchEvent(h)}}class Bj extends Xu{state={startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1};constructor(t){super(t),this.duration=t.duration??500,this.maxDistance=t.maxDistance??10}clone(t){return new Bj(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,duration:this.duration,maxDistance:this.maxDistance,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.clearPressTimer(),this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.duration=t.duration??this.duration,this.maxDistance=t.maxDistance??this.maxDistance}resetState(){this.clearPressTimer(),this.isActive=!1,this.state=et({},this.state,{startCentroid:null,lastPosition:null,timerId:null,startTime:0,pressThresholdReached:!1})}clearPressTimer(){this.state.timerId!==null&&(clearTimeout(this.state.timerId),this.state.timerId=null)}handlePointerEvent=(t,n)=>{const s=Array.from(t.values());if(n.type==="forceCancel"){this.cancelPress(n.target,s,n);return}const r=this.getTargetElement(n);if(!r)return;if(this.shouldPreventGesture(r,n.pointerType)){this.isActive&&this.cancelPress(r,s,n);return}const i=this.getRelevantPointers(s,r);if(!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelPress(r,i,n);return}switch(n.type){case"pointerdown":!this.isActive&&!this.state.startCentroid&&(this.state.startCentroid=Bl(i),this.state.lastPosition=et({},this.state.startCentroid),this.state.startTime=n.timeStamp,this.isActive=!0,this.originalTarget=r,this.clearPressTimer(),this.state.timerId=setTimeout(()=>{if(this.isActive&&this.state.startCentroid){this.state.pressThresholdReached=!0;const o=this.state.lastPosition;this.emitPressEvent(r,"start",i,n,o),this.emitPressEvent(r,"ongoing",i,n,o)}},this.duration));break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Bl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelPress(r,i,n)}break;case"pointerup":if(this.isActive){if(this.state.pressThresholdReached){const o=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(r,"end",i,n,o)}this.resetState()}break;case"pointercancel":case"forceCancel":this.cancelPress(r,i,n);break}};emitPressEvent(t,n,s,r,i){const o=this.gesturesRegistry.getActiveGestures(t),l=r.timeStamp-this.state.startTime,c={gestureName:this.name,centroid:i,target:r.target,srcEvent:r,phase:n,pointers:s,timeStamp:r.timeStamp,x:i.x,y:i.y,duration:l,activeGestures:o,customData:this.customData},u=pi(this.name,n),d=new CustomEvent(u,{bubbles:!0,cancelable:!0,composed:!0,detail:c});t.dispatchEvent(d),this.preventDefault&&r.preventDefault(),this.stopPropagation&&r.stopPropagation()}cancelPress(t,n,s){if(this.isActive&&this.state.pressThresholdReached){const r=this.state.lastPosition||this.state.startCentroid;this.emitPressEvent(t??this.element,"cancel",n,s,r),this.emitPressEvent(t??this.element,"end",n,s,r)}this.resetState()}}class KL extends Xu{state={phase:"waitingForPress",dragTimeoutId:null};constructor(t){super(t),this.pressDuration=t.pressDuration??500,this.pressMaxDistance=t.pressMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.pressGesture=new Bj({name:`${this.name}-press`,duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new vu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new KL(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,pressDuration:this.pressDuration,pressMaxDistance:this.pressMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.pressGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.pressGesture.name,this.pressHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.pressGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.pressGesture.name,this.pressHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.pressDuration=t.pressDuration??this.pressDuration,this.pressMaxDistance=t.pressMaxDistance??this.pressMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.pressGesture.name}ChangeOptions`,{detail:{duration:this.pressDuration,maxDistance:this.pressMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForPress",dragTimeoutId:null}}handlePointerEvent(){}pressHandler=()=>{this.state.phase==="waitingForPress"&&(this.state.phase="pressDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="pressDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",qc,{passive:!1}),this.element.addEventListener("touchmove",qc,{passive:!1}),this.element.addEventListener("touchend",qc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",qc),this.element.removeEventListener("touchmove",qc),this.element.removeEventListener("touchend",qc)}}class wp extends Xu{state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null};constructor(t){super(t),this.maxDistance=t.maxDistance??10,this.taps=t.taps??1}clone(t){return new wp(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,maxDistance:this.maxDistance,taps:this.taps,requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}destroy(){this.resetState(),super.destroy()}updateOptions(t){super.updateOptions(t),this.maxDistance=t.maxDistance??this.maxDistance,this.taps=t.taps??this.taps}resetState(){this.isActive=!1,this.state={startCentroid:null,currentTapCount:0,lastTapTime:0,lastPosition:null}}handlePointerEvent=(t,n)=>{const s=Array.from(t.values()),r=this.getTargetElement(n);if(!r)return;const i=this.getRelevantPointers(s,r);if(this.shouldPreventGesture(r,n.pointerType)||!this.isWithinPointerCount(i,n.pointerType)){this.isActive&&this.cancelTap(r,i,n);return}switch(n.type){case"pointerdown":this.isActive||(this.state.startCentroid=Bl(i),this.state.lastPosition=et({},this.state.startCentroid),this.isActive=!0,this.originalTarget=r);break;case"pointermove":if(this.isActive&&this.state.startCentroid){const o=Bl(i);this.state.lastPosition=o;const l=o.x-this.state.startCentroid.x,c=o.y-this.state.startCentroid.y;Math.sqrt(l*l+c*c)>this.maxDistance&&this.cancelTap(r,i,n)}break;case"pointerup":if(this.isActive){this.state.currentTapCount+=1;const o=this.state.lastPosition||this.state.startCentroid;if(!o){this.cancelTap(r,i,n);return}this.state.currentTapCount>=this.taps?(this.fireTapEvent(r,i,n,o),this.resetState()):(this.state.lastTapTime=n.timeStamp,this.isActive=!1,this.state.startCentroid=null,setTimeout(()=>{this.state&&this.state.currentTapCount>0&&this.state.currentTapCount<this.taps&&(this.state.currentTapCount=0)},300))}break;case"pointercancel":case"forceCancel":this.cancelTap(r,i,n);break}};fireTapEvent(t,n,s,r){const i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"end",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=new CustomEvent(this.name,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(l),this.preventDefault&&s.preventDefault(),this.stopPropagation&&s.stopPropagation()}cancelTap(t,n,s){if(this.state.startCentroid||this.state.lastPosition){const r=this.state.lastPosition||this.state.startCentroid,i=this.gesturesRegistry.getActiveGestures(t),o={gestureName:this.name,centroid:r,target:s.target,srcEvent:s,phase:"cancel",pointers:n,timeStamp:s.timeStamp,x:r.x,y:r.y,tapCount:this.state.currentTapCount,activeGestures:i,customData:this.customData},l=pi(this.name,"cancel"),c=new CustomEvent(l,{bubbles:!0,cancelable:!0,composed:!0,detail:o});t.dispatchEvent(c)}this.resetState()}}class XL extends Xu{state={phase:"waitingForTap",dragTimeoutId:null};constructor(t){super(t),this.tapMaxDistance=t.tapMaxDistance??10,this.dragTimeout=t.dragTimeout??1e3,this.dragThreshold=t.dragThreshold??0,this.dragDirection=t.dragDirection||["up","down","left","right"],this.tapGesture=new wp({name:`${this.name}-tap`,maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}),this.panGesture=new vu({name:`${this.name}-pan`,minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)})}clone(t){return new XL(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,minPointers:this.minPointers,maxPointers:this.maxPointers,tapMaxDistance:this.tapMaxDistance,dragTimeout:this.dragTimeout,dragThreshold:this.dragThreshold,dragDirection:[...this.dragDirection],requiredKeys:[...this.requiredKeys],pointerMode:[...this.pointerMode],preventIf:[...this.preventIf],pointerOptions:structuredClone(this.pointerOptions)},t))}init(t,n,s,r){super.init(t,n,s,r),this.tapGesture.init(t,n,s,r),this.panGesture.init(t,n,s,r),this.element.addEventListener(this.tapGesture.name,this.tapHandler),this.element.addEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.addEventListener(this.panGesture.name,this.dragMoveHandler),this.element.addEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.addEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler)}destroy(){this.resetState(),this.tapGesture.destroy(),this.panGesture.destroy(),this.element.removeEventListener(this.tapGesture.name,this.tapHandler),this.element.removeEventListener(`${this.panGesture.name}Start`,this.dragStartHandler),this.element.removeEventListener(this.panGesture.name,this.dragMoveHandler),this.element.removeEventListener(`${this.panGesture.name}End`,this.dragEndHandler),this.element.removeEventListener(`${this.panGesture.name}Cancel`,this.dragEndHandler),super.destroy()}updateOptions(t){super.updateOptions(t),this.tapMaxDistance=t.tapMaxDistance??this.tapMaxDistance,this.dragTimeout=t.dragTimeout??this.dragTimeout,this.dragThreshold=t.dragThreshold??this.dragThreshold,this.dragDirection=t.dragDirection||this.dragDirection,this.element.dispatchEvent(new CustomEvent(`${this.panGesture.name}ChangeOptions`,{detail:{minPointers:this.minPointers,maxPointers:this.maxPointers,threshold:this.dragThreshold,direction:this.dragDirection,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}})),this.element.dispatchEvent(new CustomEvent(`${this.tapGesture.name}ChangeOptions`,{detail:{maxDistance:this.tapMaxDistance,maxPointers:this.maxPointers,pointerMode:this.pointerMode,requiredKeys:this.requiredKeys,preventIf:this.preventIf,pointerOptions:structuredClone(this.pointerOptions)}}))}resetState(){this.state.dragTimeoutId!==null&&clearTimeout(this.state.dragTimeoutId),this.restoreTouchAction(),this.isActive=!1,this.state={phase:"waitingForTap",dragTimeoutId:null}}handlePointerEvent(){}tapHandler=()=>{this.state.phase==="waitingForTap"&&(this.state.phase="tapDetected",this.setTouchAction(),this.state.dragTimeoutId=setTimeout(()=>{this.resetState()},this.dragTimeout))};dragStartHandler=t=>{this.state.phase==="tapDetected"&&(this.state.dragTimeoutId!==null&&(clearTimeout(this.state.dragTimeoutId),this.state.dragTimeoutId=null),this.restoreTouchAction(),this.state.phase="dragging",this.isActive=!0,this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t)))};dragMoveHandler=t=>{this.state.phase==="dragging"&&this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t))};dragEndHandler=t=>{this.state.phase==="dragging"&&(this.resetState(),this.element.dispatchEvent(new CustomEvent(pi(this.name,t.detail.phase),t)))};setTouchAction(){this.element.addEventListener("touchstart",qc,{passive:!1})}restoreTouchAction(){this.element.removeEventListener("touchstart",qc)}}class Pv extends mq{state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0};constructor(t){super(t),this.sensitivity=t.sensitivity??1,this.max=t.max??Number.MAX_SAFE_INTEGER,this.min=t.min??Number.MIN_SAFE_INTEGER,this.initialDelta=t.initialDelta??0,this.invert=t.invert??!1,this.state.totalDeltaX=this.initialDelta,this.state.totalDeltaY=this.initialDelta,this.state.totalDeltaZ=this.initialDelta}clone(t){return new Pv(et({name:this.name,preventDefault:this.preventDefault,stopPropagation:this.stopPropagation,sensitivity:this.sensitivity,max:this.max,min:this.min,initialDelta:this.initialDelta,invert:this.invert,requiredKeys:[...this.requiredKeys],preventIf:[...this.preventIf]},t))}init(t,n,s,r){super.init(t,n,s,r),this.element.addEventListener("wheel",this.handleWheelEvent)}destroy(){this.element.removeEventListener("wheel",this.handleWheelEvent),this.resetState(),super.destroy()}resetState(){this.isActive=!1,this.state={totalDeltaX:0,totalDeltaY:0,totalDeltaZ:0}}updateOptions(t){super.updateOptions(t),this.sensitivity=t.sensitivity??this.sensitivity,this.max=t.max??this.max,this.min=t.min??this.min,this.initialDelta=t.initialDelta??this.initialDelta,this.invert=t.invert??this.invert}handleWheelEvent=t=>{if(this.shouldPreventGesture(this.element,"mouse"))return;const n=this.pointerManager.getPointers()||new Map,s=Array.from(n.values());this.state.totalDeltaX+=t.deltaX*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaY+=t.deltaY*this.sensitivity*(this.invert?-1:1),this.state.totalDeltaZ+=t.deltaZ*this.sensitivity*(this.invert?-1:1),["totalDeltaX","totalDeltaY","totalDeltaZ"].forEach(r=>{this.state[r]<this.min&&(this.state[r]=this.min),this.state[r]>this.max&&(this.state[r]=this.max)}),this.emitWheelEvent(s,t)};emitWheelEvent(t,n){const s=t.length>0?Bl(t):{x:n.clientX,y:n.clientY},r=this.gesturesRegistry.getActiveGestures(this.element),i={gestureName:this.name,centroid:s,target:n.target,srcEvent:n,phase:"ongoing",pointers:t,timeStamp:n.timeStamp,deltaX:n.deltaX*this.sensitivity*(this.invert?-1:1),deltaY:n.deltaY*this.sensitivity*(this.invert?-1:1),deltaZ:n.deltaZ*this.sensitivity*(this.invert?-1:1),deltaMode:n.deltaMode,totalDeltaX:this.state.totalDeltaX,totalDeltaY:this.state.totalDeltaY,totalDeltaZ:this.state.totalDeltaZ,activeGestures:r,customData:this.customData};this.preventDefault&&n.preventDefault(),this.stopPropagation&&n.stopPropagation();const o=pi(this.name,"ongoing"),l=new CustomEvent(o,{bubbles:!0,cancelable:!0,composed:!0,detail:i});this.element.dispatchEvent(l)}}const Ym=e=>e.preventDefault(),ZL=({svgRef:e})=>{const t=f.useRef(null);f.useEffect(()=>{const r=e.current;t.current||(t.current=new Ome({gestures:[new vu({name:"pan",threshold:0,maxPointers:1}),new YL({name:"move",preventIf:["pan","zoomPinch","zoomPan"]}),new wp({name:"tap",preventIf:["pan","zoomPinch","zoomPan"]}),new Bj({name:"quickPress",duration:50}),new vu({name:"brush",threshold:0,maxPointers:1}),new vu({name:"zoomPan",threshold:0,preventIf:["zoomTapAndDrag","zoomPressAndDrag"]}),new QL({name:"zoomPinch",threshold:5}),new Pv({name:"zoomTurnWheel",sensitivity:.01,initialDelta:1}),new Pv({name:"panTurnWheel",sensitivity:.5}),new XL({name:"zoomTapAndDrag",dragThreshold:10}),new KL({name:"zoomPressAndDrag",dragThreshold:10,preventIf:["zoomPinch"]}),new wp({name:"zoomDoubleTapReset",taps:2})]}));const i=t.current;if(!(!r||!i))return i.registerElement(["pan","move","zoomPinch","zoomPan","zoomTurnWheel","panTurnWheel","tap","quickPress","zoomTapAndDrag","zoomPressAndDrag","zoomDoubleTapReset","brush"],r),()=>{i.unregisterAllGestures(r)}},[e,t]);const n=f.useCallback((r,i,o)=>{const l=e.current;return l?.addEventListener(r,i,o),{cleanup:()=>l?.removeEventListener(r,i)}},[e]),s=f.useCallback((r,i)=>{const o=e.current,l=t.current;!l||!o||l.setGestureOptions(r,o,i??{})},[e,t]);return f.useEffect(()=>{const r=e.current;return r?.addEventListener("gesturestart",Ym),r?.addEventListener("gesturechange",Ym),r?.addEventListener("gestureend",Ym),()=>{r?.removeEventListener("gesturestart",Ym),r?.removeEventListener("gesturechange",Ym),r?.removeEventListener("gestureend",Ym)}},[e]),{instance:{addInteractionListener:n,updateZoomInteractionListeners:s}}};ZL.params={};ZL.getInitialState=()=>({});const Fme=[WL,GL,zj,Uj,ZL,$j],Ume=["apiRef"],Bme=e=>{let{plugins:t}=e,n=xa(e.props,Ume);const s={};t.forEach(o=>{Object.assign(s,o.params)});const r={};return Object.keys(n).forEach(o=>{const l=n[o];s[o]&&(r[o]=l)}),t.reduce((o,l)=>l.getDefaultizedParams?l.getDefaultizedParams({params:o}):o,r)};let z$=0;function Hme(e,t,n){const s=Pj(),r=f.useMemo(()=>[...Fme,...e],[e]),i=Bme({plugins:r,props:t});i.id=i.id??s;const l=f.useRef({}).current,c=Gme(t.apiRef),u=f.useRef(null),d=f.useRef(null),h=f.useRef(null);if(h.current==null){z$+=1;const v={cacheKey:{id:z$}};r.forEach(j=>{j.getInitialState&&Object.assign(v,j.getInitialState(i,v,n))}),h.current=new qL(v)}const p=v=>{const j=v({instance:l,params:i,plugins:r,store:h.current,svgRef:d,chartRootRef:u,seriesConfig:n});j.publicAPI&&Object.assign(c.current,j.publicAPI),j.instance&&Object.assign(l,j.instance)};return r.forEach(p),{contextValue:f.useMemo(()=>({store:h.current,publicAPI:c.current,instance:l,svgRef:d,chartRootRef:u}),[l,c])}}function qme(e){return e.current==null&&(e.current={}),e}function Gme(e){const t=f.useRef({});return e?qme(e):t}const fq=f.createContext(null);const hq=()=>{},gq=4,pq=20+2*gq,Wme=40+2*gq,Vme="hover",Yy={minStart:0,maxEnd:100,step:5,minSpan:10,maxSpan:100,panning:!0,filterMode:"keep",reverse:!1,slider:{enabled:!1,preview:!1,size:pq,showTooltip:Vme}},JL=(e,t,n,s)=>{if(e)return e===!0?et({axisId:t,axisDirection:n},Yy,{reverse:s??!1}):et({axisId:t,axisDirection:n},Yy,{reverse:s??!1},e,{slider:et({},Yy.slider,{size:e.slider?.preview??Yy.slider.preview?Wme:pq},e.slider)})};function xq(e,t){const n={top:0,bottom:0,none:0};return(e&&e.length>0?e:[{id:Rj,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"bottom":"none",u=i.position??c,d=cme+(i.label?oq:0),h=i.id??`defaultized-x-axis-${o}`,p=et({offset:n[u]},i,{id:h,position:u,height:i.height??d,zoom:JL(i.zoom,h,"x",i.reverse)});if(u!=="none"&&(n[u]+=p.height,p.zoom?.slider.enabled&&(n[u]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: x-axis uses `dataKey` but no `dataset` is provided.");return et({},p,{data:t.map(x=>x[l])})})}function yq(e,t){const n={right:0,left:0,none:0};return(e&&e.length>0?e:[{id:ime,scaleType:"linear"}]).map((i,o)=>{const l=i.dataKey,c=o===0?"left":"none",u=i.position??c,d=lme+(i.label?oq:0),h=i.id??`defaultized-y-axis-${o}`,p=et({offset:n[u]},i,{id:h,position:u,width:i.width??d,zoom:JL(i.zoom,h,"y",i.reverse)});if(u!=="none"&&(n[u]+=p.width,p.zoom?.slider.enabled&&(n[u]+=p.zoom.slider.size)),l===void 0||i.data!==void 0)return p;if(t===void 0)throw new Error("MUI X Charts: y-axis uses `dataKey` but no `dataset` is provided.");return et({},p,{data:t.map(x=>x[l])})})}function Yme(e,t){return function(s,r){if(r.location==="tick"){const i=r.scale.domain();return i[0]===i[1]?r.scale.tickFormat(1)(s):r.scale.tickFormat(e)(s)}return r.location==="zoom-slider-tooltip"?t.tickFormat(2)(s):`${s}`}}function Zu(e){return e.scaleType==="band"}function Ju(e){return e.scaleType==="point"}function Qme(e){return e.scaleType!=="point"&&e.scaleType!=="band"}function Kme(e){return e.scaleType==="symlog"}function vx(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function e4(e){let t=e,n=e;e.length===1&&(t=(o,l)=>e(o)-l,n=Xme(e));function s(o,l,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}return c}function r(o,l,c,u){for(c==null&&(c=0),u==null&&(u=o.length);c<u;){const d=c+u>>>1;n(o[d],l)>0?u=d:c=d+1}return c}function i(o,l,c,u){c==null&&(c=0),u==null&&(u=o.length);const d=s(o,l,c,u-1);return d>c&&t(o[d-1],l)>-t(o[d],l)?d-1:d}return{left:s,center:i,right:r}}function Xme(e){return(t,n)=>vx(e(t),n)}function bq(e){return e===null?NaN:+e}function*Zme(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Jme=e4(vx),wx=Jme.right;e4(bq).center;class Dv extends Map{constructor(t,n=afe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,r]of t)this.set(s,r)}get(t){return super.get(F$(this,t))}has(t){return super.has(F$(this,t))}set(t,n){return super.set(efe(this,t),n)}delete(t){return super.delete(tfe(this,t))}}function F$({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function efe({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function tfe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(n),e.delete(s)),n}function afe(e){return e!==null&&typeof e=="object"?e.valueOf():e}var xk=Math.sqrt(50),yk=Math.sqrt(10),bk=Math.sqrt(2);function vk(e,t,n){var s,r=-1,i,o,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((s=t<e)&&(i=e,e=t,t=i),(l=vq(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,o=new Array(i=u-c+1);++r<i;)o[r]=(c+r)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,o=new Array(i=u-c+1);++r<i;)o[r]=(c+r)/l}return s&&o.reverse(),o}function vq(e,t,n){var s=(t-e)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),i=s/Math.pow(10,r);return r>=0?(i>=xk?10:i>=yk?5:i>=bk?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(i>=xk?10:i>=yk?5:i>=bk?2:1)}function wk(e,t,n){var s=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),i=s/r;return i>=xk?r*=10:i>=yk?r*=5:i>=bk&&(r*=2),t<e?-r:r}function U$(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function B$(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function wq(e,t,n=0,s=e.length-1,r=vx){for(;s>n;){if(s-n>600){const c=s-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),x=Math.max(n,Math.floor(t-u*h/c+p)),v=Math.min(s,Math.floor(t+(c-u)*h/c+p));wq(e,t,x,v,r)}const i=e[t];let o=n,l=s;for(gg(e,n,t),r(e[s],i)>0&&gg(e,n,s);o<l;){for(gg(e,o,l),++o,--l;r(e[o],i)<0;)++o;for(;r(e[l],i)>0;)--l}r(e[n],i)===0?gg(e,n,l):(++l,gg(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function gg(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function nfe(e,t,n){if(e=Float64Array.from(Zme(e)),!!(s=e.length)){if((t=+t)<=0||s<2)return B$(e);if(t>=1)return U$(e);var s,r=(s-1)*t,i=Math.floor(r),o=U$(wq(e,i).subarray(0,i+1)),l=B$(e.subarray(i+1));return o+(l-o)*(r-i)}}function sfe(e,t,n=bq){if(s=e.length){if((t=+t)<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,r=(s-1)*t,i=Math.floor(r),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(r-i)}}function jq(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var s=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(r);++s<r;)i[s]=e+s*n;return i}function ki(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function nc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const jk=Symbol("implicit");function jp(){var e=new Dv,t=[],n=[],s=jk;function r(i){let o=e.get(i);if(o===void 0){if(s!==jk)return s;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return r.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Dv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(i){return arguments.length?(n=Array.from(i),r):n.slice()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return jp(t,n).unknown(s)},ki.apply(r,arguments),r}function t4(){var e=jp().unknown(void 0),t=e.domain,n=e.range,s=0,r=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var p=t().length,x=r<s,v=x?r:s,j=x?s:r;i=(j-v)/Math.max(1,p-c+u*2),l&&(i=Math.floor(i)),v+=(j-v-i*(p-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=jq(p).map(function(N){return v+i*N});return n(x?b.reverse():b)}return e.domain=function(p){return arguments.length?(t(p),h()):t()},e.range=function(p){return arguments.length?([s,r]=p,s=+s,r=+r,h()):[s,r]},e.rangeRound=function(p){return[s,r]=p,s=+s,r=+r,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,h()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),h()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),h()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,h()):u},e.align=function(p){return arguments.length?(d=Math.max(0,Math.min(1,p)),h()):d},e.copy=function(){return t4(t(),[s,r]).round(l).paddingInner(c).paddingOuter(u).align(d)},ki.apply(h(),arguments)}function Nq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Nq(t())},e}function rfe(){return Nq(t4.apply(null,arguments).paddingInner(1))}function a4(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cq(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function jx(){}var Np=.7,Ov=1/Np,bf="\\s*([+-]?\\d+)\\s*",Cp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Do="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ife=/^#([0-9a-f]{3,8})$/,ofe=new RegExp(`^rgb\\(${bf},${bf},${bf}\\)$`),lfe=new RegExp(`^rgb\\(${Do},${Do},${Do}\\)$`),cfe=new RegExp(`^rgba\\(${bf},${bf},${bf},${Cp}\\)$`),dfe=new RegExp(`^rgba\\(${Do},${Do},${Do},${Cp}\\)$`),ufe=new RegExp(`^hsl\\(${Cp},${Do},${Do}\\)$`),mfe=new RegExp(`^hsla\\(${Cp},${Do},${Do},${Cp}\\)$`),H$={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};a4(jx,Sp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:q$,formatHex:q$,formatHex8:ffe,formatHsl:hfe,formatRgb:G$,toString:G$});function q$(){return this.rgb().formatHex()}function ffe(){return this.rgb().formatHex8()}function hfe(){return Sq(this).formatHsl()}function G$(){return this.rgb().formatRgb()}function Sp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ife.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?W$(t):n===3?new fr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Qy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Qy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ofe.exec(e))?new fr(t[1],t[2],t[3],1):(t=lfe.exec(e))?new fr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cfe.exec(e))?Qy(t[1],t[2],t[3],t[4]):(t=dfe.exec(e))?Qy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ufe.exec(e))?Q$(t[1],t[2]/100,t[3]/100,1):(t=mfe.exec(e))?Q$(t[1],t[2]/100,t[3]/100,t[4]):H$.hasOwnProperty(e)?W$(H$[e]):e==="transparent"?new fr(NaN,NaN,NaN,0):null}function W$(e){return new fr(e>>16&255,e>>8&255,e&255,1)}function Qy(e,t,n,s){return s<=0&&(e=t=n=NaN),new fr(e,t,n,s)}function gfe(e){return e instanceof jx||(e=Sp(e)),e?(e=e.rgb(),new fr(e.r,e.g,e.b,e.opacity)):new fr}function Nk(e,t,n,s){return arguments.length===1?gfe(e):new fr(e,t,n,s??1)}function fr(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}a4(fr,Nk,Cq(jx,{brighter(e){return e=e==null?Ov:Math.pow(Ov,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Np:Math.pow(Np,e),new fr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fr(wu(this.r),wu(this.g),wu(this.b),Mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:V$,formatHex:V$,formatHex8:pfe,formatRgb:Y$,toString:Y$}));function V$(){return`#${mu(this.r)}${mu(this.g)}${mu(this.b)}`}function pfe(){return`#${mu(this.r)}${mu(this.g)}${mu(this.b)}${mu((isNaN(this.opacity)?1:this.opacity)*255)}`}function Y$(){const e=Mv(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function Mv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function Q$(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Bi(e,t,n,s)}function Sq(e){if(e instanceof Bi)return new Bi(e.h,e.s,e.l,e.opacity);if(e instanceof jx||(e=Sp(e)),!e)return new Bi;if(e instanceof Bi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,r=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-r,c=(i+r)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+r:2-i-r,o*=60):l=c>0&&c<1?0:o,new Bi(o,l,c,e.opacity)}function xfe(e,t,n,s){return arguments.length===1?Sq(e):new Bi(e,t,n,s??1)}function Bi(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}a4(Bi,xfe,Cq(jx,{brighter(e){return e=e==null?Ov:Math.pow(Ov,e),new Bi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Np:Math.pow(Np,e),new Bi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,r=2*n-s;return new fr(g2(e>=240?e-240:e+120,r,s),g2(e,r,s),g2(e<120?e+240:e-120,r,s),this.opacity)},clamp(){return new Bi(K$(this.h),Ky(this.s),Ky(this.l),Mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mv(this.opacity);return`${e===1?"hsl(":"hsla("}${K$(this.h)}, ${Ky(this.s)*100}%, ${Ky(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K$(e){return e=(e||0)%360,e<0?e+360:e}function Ky(e){return Math.max(0,Math.min(1,e||0))}function g2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const n4=e=>()=>e;function yfe(e,t){return function(n){return e+n*t}}function bfe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function vfe(e){return(e=+e)==1?_q:function(t,n){return n-t?bfe(t,n,e):n4(isNaN(t)?n:t)}}function _q(e,t){var n=t-e;return n?yfe(e,n):n4(isNaN(e)?t:e)}const X$=(function e(t){var n=vfe(t);function s(r,i){var o=n((r=Nk(r)).r,(i=Nk(i)).r),l=n(r.g,i.g),c=n(r.b,i.b),u=_q(r.opacity,i.opacity);return function(d){return r.r=o(d),r.g=l(d),r.b=c(d),r.opacity=u(d),r+""}}return s.gamma=e,s})(1);function wfe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),r;return function(i){for(r=0;r<n;++r)s[r]=e[r]*(1-i)+t[r]*i;return s}}function jfe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Nfe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,r=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)r[o]=ah(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=r[o](l);return i}}function s4(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function kf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cfe(e,t){var n={},s={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=ah(e[r],t[r]):s[r]=t[r];return function(i){for(r in n)s[r]=n[r](i);return s}}var Ck=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p2=new RegExp(Ck.source,"g");function Sfe(e){return function(){return e}}function _fe(e){return function(t){return e(t)+""}}function r4(e,t){var n=Ck.lastIndex=p2.lastIndex=0,s,r,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=Ck.exec(e))&&(r=p2.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,c.push({i:o,x:kf(s,r)})),n=p2.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?_fe(c[0].x):Sfe(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function ah(e,t){var n=typeof t,s;return t==null||n==="boolean"?n4(t):(n==="number"?kf:n==="string"?(s=Sp(t))?(t=s,X$):r4:t instanceof Sp?X$:t instanceof Date?s4:jfe(t)?wfe:Array.isArray(t)?Nfe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cfe:kf)(e,t)}function i4(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Afe(e,t){t===void 0&&(t=e,e=ah);for(var n=0,s=t.length-1,r=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(r,r=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Tfe(e){return function(){return e}}function Iv(e){return+e}var Z$=[0,1];function Ws(e){return e}function Sk(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Tfe(isNaN(t)?NaN:.5)}function kfe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function Efe(e,t,n){var s=e[0],r=e[1],i=t[0],o=t[1];return r<s?(s=Sk(r,s),i=n(o,i)):(s=Sk(s,r),i=n(i,o)),function(l){return i(s(l))}}function Lfe(e,t,n){var s=Math.min(e.length,t.length)-1,r=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)r[o]=Sk(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=wx(e,l,1,s)-1;return i[c](r[c](l))}}function Nx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hj(){var e=Z$,t=Z$,n=ah,s,r,i,o=Ws,l,c,u;function d(){var p=Math.min(e.length,t.length);return o!==Ws&&(o=kfe(e[0],e[p-1])),l=p>2?Lfe:Efe,c=u=null,h}function h(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(s),t,n)))(s(o(p)))}return h.invert=function(p){return o(r((u||(u=l(t,e.map(s),kf)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,Iv),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=i4,d()},h.clamp=function(p){return arguments.length?(o=p?!0:Ws,d()):o!==Ws},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(i=p,h):i},function(p,x){return s=p,r=x,d()}}function o4(){return Hj()(Ws,Ws)}function Pfe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $v(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Ef(e){return e=$v(Math.abs(e)),e?e[1]:NaN}function Dfe(e,t){return function(n,s){for(var r=n.length,i=[],o=0,l=e[0],c=0;r>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(n.substring(r-=l,r+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Ofe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Mfe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _p(e){if(!(t=Mfe.exec(e)))throw new Error("invalid format: "+e);var t;return new l4({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_p.prototype=l4.prototype;function l4(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}l4.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Ife(e){e:for(var t=e.length,n=1,s=-1,r;n<t;++n)switch(e[n]){case".":s=r=n;break;case"0":s===0&&(s=n),r=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(r+1):e}var Aq;function $fe(e,t){var n=$v(e,t);if(!n)return e+"";var s=n[0],r=n[1],i=r-(Aq=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+$v(e,Math.max(0,t+i-1))[0]}function J$(e,t){var n=$v(e,t);if(!n)return e+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}const e6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Pfe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>J$(e*100,t),r:J$,s:$fe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function t6(e){return e}var a6=Array.prototype.map,n6=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rfe(e){var t=e.grouping===void 0||e.thousands===void 0?t6:Dfe(a6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?t6:Ofe(a6.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=_p(h);var p=h.fill,x=h.align,v=h.sign,j=h.symbol,b=h.zero,N=h.width,w=h.comma,S=h.precision,_=h.trim,k=h.type;k==="n"?(w=!0,k="g"):e6[k]||(S===void 0&&(S=12),_=!0,k="g"),(b||p==="0"&&x==="=")&&(b=!0,p="0",x="=");var T=j==="$"?n:j==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",A=j==="$"?s:/[%p]/.test(k)?o:"",E=e6[k],M=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function O(I){var D=T,H=A,W,z,Q;if(k==="c")H=E(I)+H,I="";else{I=+I;var J=I<0||1/I<0;if(I=isNaN(I)?c:E(Math.abs(I),S),_&&(I=Ife(I)),J&&+I==0&&v!=="+"&&(J=!1),D=(J?v==="("?v:l:v==="-"||v==="("?"":v)+D,H=(k==="s"?n6[8+Aq/3]:"")+H+(J&&v==="("?")":""),M){for(W=-1,z=I.length;++W<z;)if(Q=I.charCodeAt(W),48>Q||Q>57){H=(Q===46?r+I.slice(W+1):I.slice(W))+H,I=I.slice(0,W);break}}}w&&!b&&(I=t(I,1/0));var Y=D.length+I.length+H.length,re=Y<N?new Array(N-Y+1).join(p):"";switch(w&&b&&(I=t(re+I,re.length?N-H.length:1/0),re=""),x){case"<":I=D+I+H+re;break;case"=":I=D+re+I+H;break;case"^":I=re.slice(0,Y=re.length>>1)+D+I+H+re.slice(Y);break;default:I=re+D+I+H;break}return i(I)}return O.toString=function(){return h+""},O}function d(h,p){var x=u((h=_p(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Ef(p)/3)))*3,j=Math.pow(10,-v),b=n6[8+v/3];return function(N){return x(j*N)+b}}return{format:u,formatPrefix:d}}var Xy,c4,Tq;zfe({thousands:",",grouping:[3],currency:["$",""]});function zfe(e){return Xy=Rfe(e),c4=Xy.format,Tq=Xy.formatPrefix,Xy}function Ffe(e){return Math.max(0,-Ef(Math.abs(e)))}function Ufe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ef(t)/3)))*3-Ef(Math.abs(e)))}function Bfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ef(t)-Ef(e))+1}function kq(e,t,n,s){var r=wk(e,t,n),i;switch(s=_p(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Ufe(r,o))&&(s.precision=i),Tq(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Bfe(r,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Ffe(r))&&(s.precision=i-(s.type==="%")*2);break}}return c4(s)}function Cd(e){var t=e.domain;return e.ticks=function(n){var s=t();return vk(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var r=t();return kq(r[0],r[r.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),r=0,i=s.length-1,o=s[r],l=s[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=r,r=i,i=u);d-- >0;){if(u=vq(o,l,n),u===c)return s[r]=o,s[i]=l,t(s);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function qj(){var e=o4();return e.copy=function(){return Nx(e,qj())},ki.apply(e,arguments),Cd(e)}function Eq(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,Iv),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return Eq(e).unknown(t)},e=arguments.length?Array.from(e,Iv):[0,1],Cd(n)}function Lq(e,t){e=e.slice();var n=0,s=e.length-1,r=e[n],i=e[s],o;return i<r&&(o=n,n=s,s=o,o=r,r=i,i=o),e[n]=t.floor(r),e[s]=t.ceil(i),e}function s6(e){return Math.log(e)}function r6(e){return Math.exp(e)}function Hfe(e){return-Math.log(-e)}function qfe(e){return-Math.exp(-e)}function Gfe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Wfe(e){return e===10?Gfe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Vfe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function i6(e){return(t,n)=>-e(-t,n)}function d4(e){const t=e(s6,r6),n=t.domain;let s=10,r,i;function o(){return r=Vfe(s),i=Wfe(s),n()[0]<0?(r=i6(r),i=i6(i),e(Hfe,qfe)):e(s6,r6),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let p=r(u),x=r(d),v,j;const b=l==null?10:+l;let N=[];if(!(s%1)&&x-p<b){if(p=Math.floor(p),x=Math.ceil(x),u>0){for(;p<=x;++p)for(v=1;v<s;++v)if(j=p<0?v/i(-p):v*i(p),!(j<u)){if(j>d)break;N.push(j)}}else for(;p<=x;++p)for(v=s-1;v>=1;--v)if(j=p>0?v/i(-p):v*i(p),!(j<u)){if(j>d)break;N.push(j)}N.length*2<b&&(N=vk(u,d,b))}else N=vk(p,x,Math.min(x-p,b)).map(i);return h?N.reverse():N},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=_p(c)).precision==null&&(c.trim=!0),c=c4(c)),l===1/0)return c;const u=Math.max(1,s*l/t.ticks().length);return d=>{let h=d/i(Math.round(r(d)));return h*s<s-.5&&(h*=s),h<=u?c(d):""}},t.nice=()=>n(Lq(n(),{floor:l=>i(Math.floor(r(l))),ceil:l=>i(Math.ceil(r(l)))})),t}function Ap(){const e=d4(Hj()).domain([1,10]);return e.copy=()=>Nx(e,Ap()).base(e.base()),ki.apply(e,arguments),e}function o6(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function l6(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function u4(e){var t=1,n=e(o6(t),l6(t));return n.constant=function(s){return arguments.length?e(o6(t=+s),l6(t)):t},Cd(n)}function m4(){var e=u4(Hj());return e.copy=function(){return Nx(e,m4()).constant(e.constant())},ki.apply(e,arguments)}function c6(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qfe(e){return e<0?-e*e:e*e}function f4(e){var t=e(Ws,Ws),n=1;function s(){return n===1?e(Ws,Ws):n===.5?e(Yfe,Qfe):e(c6(n),c6(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,s()):n},Cd(t)}function Gj(){var e=f4(Hj());return e.copy=function(){return Nx(e,Gj()).exponent(e.exponent())},ki.apply(e,arguments),e}function Pq(){return Gj.apply(null,arguments).exponent(.5)}function d6(e){return Math.sign(e)*e*e}function Kfe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Dq(){var e=o4(),t=[0,1],n=!1,s;function r(i){var o=Kfe(e(i));return isNaN(o)?s:n?Math.round(o):o}return r.invert=function(i){return e.invert(d6(i))},r.domain=function(i){return arguments.length?(e.domain(i),r):e.domain()},r.range=function(i){return arguments.length?(e.range((t=Array.from(i,Iv)).map(d6)),r):t.slice()},r.rangeRound=function(i){return r.range(i).round(!0)},r.round=function(i){return arguments.length?(n=!!i,r):n},r.clamp=function(i){return arguments.length?(e.clamp(i),r):e.clamp()},r.unknown=function(i){return arguments.length?(s=i,r):s},r.copy=function(){return Dq(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},ki.apply(r,arguments),Cd(r)}function Oq(){var e=[],t=[],n=[],s;function r(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=sfe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[wx(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(vx),r()},i.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return Oq().domain(e).range(t).unknown(s)},ki.apply(i,arguments)}function Mq(){var e=0,t=1,n=1,s=[.5],r=[0,1],i;function o(c){return c!=null&&c<=c?r[wx(s,c,0,n)]:i}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,l()):r.slice()},o.invertExtent=function(c){var u=r.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=n?[s[n-1],t]:[s[u-1],s[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return Mq().domain([e,t]).range(r).unknown(i)},ki.apply(Cd(o),arguments)}function h4(){var e=[.5],t=[0,1],n,s=1;function r(i){return i!=null&&i<=i?t[wx(e,i,0,s)]:n}return r.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return h4().domain(e).range(t).unknown(n)},ki.apply(r,arguments)}const x2=new Date,y2=new Date;function os(e,t,n,s){function r(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return r.floor=i=>(e(i=new Date(+i)),i),r.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),r.round=i=>{const o=r(i),l=r.ceil(i);return i-o<l-i?o:l},r.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),r.range=(i,o,l)=>{const c=[];if(i=r.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},r.filter=i=>os(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(r.count=(i,o)=>(x2.setTime(+i),y2.setTime(+o),e(x2),e(y2),Math.floor(n(x2,y2))),r.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?r.filter(s?o=>s(o)%i===0:o=>r.count(0,o)%i===0):r)),r}const Rv=os(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Rv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?os(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Rv);Rv.range;const Ll=1e3,hi=Ll*60,Pl=hi*60,Hl=Pl*24,g4=Hl*7,u6=Hl*30,b2=Hl*365,fu=os(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ll)},(e,t)=>(t-e)/Ll,e=>e.getUTCSeconds());fu.range;const p4=os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ll)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getMinutes());p4.range;const x4=os(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hi)},(e,t)=>(t-e)/hi,e=>e.getUTCMinutes());x4.range;const y4=os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ll-e.getMinutes()*hi)},(e,t)=>{e.setTime(+e+t*Pl)},(e,t)=>(t-e)/Pl,e=>e.getHours());y4.range;const b4=os(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pl)},(e,t)=>(t-e)/Pl,e=>e.getUTCHours());b4.range;const Cx=os(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hi)/Hl,e=>e.getDate()-1);Cx.range;const Wj=os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hl,e=>e.getUTCDate()-1);Wj.range;const Iq=os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hl,e=>Math.floor(e/Hl));Iq.range;function em(e){return os(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hi)/g4)}const Vj=em(0),zv=em(1),Xfe=em(2),Zfe=em(3),Lf=em(4),Jfe=em(5),ehe=em(6);Vj.range;zv.range;Xfe.range;Zfe.range;Lf.range;Jfe.range;ehe.range;function tm(e){return os(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/g4)}const Yj=tm(0),Fv=tm(1),the=tm(2),ahe=tm(3),Pf=tm(4),nhe=tm(5),she=tm(6);Yj.range;Fv.range;the.range;ahe.range;Pf.range;nhe.range;she.range;const v4=os(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());v4.range;const w4=os(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());w4.range;const ql=os(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ql.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:os(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ql.range;const Gl=os(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Gl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:os(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Gl.range;function $q(e,t,n,s,r,i){const o=[[fu,1,Ll],[fu,5,5*Ll],[fu,15,15*Ll],[fu,30,30*Ll],[i,1,hi],[i,5,5*hi],[i,15,15*hi],[i,30,30*hi],[r,1,Pl],[r,3,3*Pl],[r,6,6*Pl],[r,12,12*Pl],[s,1,Hl],[s,2,2*Hl],[n,1,g4],[t,1,u6],[t,3,3*u6],[e,1,b2]];function l(u,d,h){const p=d<u;p&&([u,d]=[d,u]);const x=h&&typeof h.range=="function"?h:c(u,d,h),v=x?x.range(u,+d+1):[];return p?v.reverse():v}function c(u,d,h){const p=Math.abs(d-u)/h,x=e4(([,,b])=>b).right(o,p);if(x===o.length)return e.every(wk(u/b2,d/b2,h));if(x===0)return Rv.every(Math.max(wk(u,d,h),1));const[v,j]=o[p/o[x-1][2]<o[x][2]/p?x-1:x];return v.every(j)}return[l,c]}const[rhe,ihe]=$q(Gl,w4,Yj,Iq,b4,x4),[ohe,lhe]=$q(ql,v4,Vj,Cx,y4,p4);function v2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function w2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function che(e){var t=e.dateTime,n=e.date,s=e.time,r=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=xg(r),d=yg(r),h=xg(i),p=yg(i),x=xg(o),v=yg(o),j=xg(l),b=yg(l),N=xg(c),w=yg(c),S={a:J,A:Y,b:re,B:we,c:null,d:x6,e:x6,f:Phe,g:Bhe,G:qhe,H:khe,I:Ehe,j:Lhe,L:Rq,m:Dhe,M:Ohe,p:Z,q:ne,Q:v6,s:w6,S:Mhe,u:Ihe,U:$he,V:Rhe,w:zhe,W:Fhe,x:null,X:null,y:Uhe,Y:Hhe,Z:Ghe,"%":b6},_={a:pe,A:Ne,b:de,B:be,c:null,d:y6,e:y6,f:Qhe,g:rge,G:oge,H:Whe,I:Vhe,j:Yhe,L:Fq,m:Khe,M:Xhe,p:oe,q:Te,Q:v6,s:w6,S:Zhe,u:Jhe,U:ege,V:tge,w:age,W:nge,x:null,X:null,y:sge,Y:ige,Z:lge,"%":b6},k={a:O,A:I,b:D,B:H,c:W,d:g6,e:g6,f:She,g:h6,G:f6,H:p6,I:p6,j:whe,L:Che,m:vhe,M:jhe,p:M,q:bhe,Q:Ahe,s:The,S:Nhe,u:hhe,U:ghe,V:phe,w:fhe,W:xhe,x:z,X:Q,y:h6,Y:f6,Z:yhe,"%":_he};S.x=T(n,S),S.X=T(s,S),S.c=T(t,S),_.x=T(n,_),_.X=T(s,_),_.c=T(t,_);function T(ue,Oe){return function(xe){var le=[],Fe=-1,ke=0,He=ue.length,Xe,it,ze;for(xe instanceof Date||(xe=new Date(+xe));++Fe<He;)ue.charCodeAt(Fe)===37&&(le.push(ue.slice(ke,Fe)),(it=m6[Xe=ue.charAt(++Fe)])!=null?Xe=ue.charAt(++Fe):it=Xe==="e"?" ":"0",(ze=Oe[Xe])&&(Xe=ze(xe,it)),le.push(Xe),ke=Fe+1);return le.push(ue.slice(ke,Fe)),le.join("")}}function A(ue,Oe){return function(xe){var le=pg(1900,void 0,1),Fe=E(le,ue,xe+="",0),ke,He;if(Fe!=xe.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(Oe&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(ke=w2(pg(le.y,0,1)),He=ke.getUTCDay(),ke=He>4||He===0?Fv.ceil(ke):Fv(ke),ke=Wj.offset(ke,(le.V-1)*7),le.y=ke.getUTCFullYear(),le.m=ke.getUTCMonth(),le.d=ke.getUTCDate()+(le.w+6)%7):(ke=v2(pg(le.y,0,1)),He=ke.getDay(),ke=He>4||He===0?zv.ceil(ke):zv(ke),ke=Cx.offset(ke,(le.V-1)*7),le.y=ke.getFullYear(),le.m=ke.getMonth(),le.d=ke.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),He="Z"in le?w2(pg(le.y,0,1)).getUTCDay():v2(pg(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(He+5)%7:le.w+le.U*7-(He+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,w2(le)):v2(le)}}function E(ue,Oe,xe,le){for(var Fe=0,ke=Oe.length,He=xe.length,Xe,it;Fe<ke;){if(le>=He)return-1;if(Xe=Oe.charCodeAt(Fe++),Xe===37){if(Xe=Oe.charAt(Fe++),it=k[Xe in m6?Oe.charAt(Fe++):Xe],!it||(le=it(ue,xe,le))<0)return-1}else if(Xe!=xe.charCodeAt(le++))return-1}return le}function M(ue,Oe,xe){var le=u.exec(Oe.slice(xe));return le?(ue.p=d.get(le[0].toLowerCase()),xe+le[0].length):-1}function O(ue,Oe,xe){var le=x.exec(Oe.slice(xe));return le?(ue.w=v.get(le[0].toLowerCase()),xe+le[0].length):-1}function I(ue,Oe,xe){var le=h.exec(Oe.slice(xe));return le?(ue.w=p.get(le[0].toLowerCase()),xe+le[0].length):-1}function D(ue,Oe,xe){var le=N.exec(Oe.slice(xe));return le?(ue.m=w.get(le[0].toLowerCase()),xe+le[0].length):-1}function H(ue,Oe,xe){var le=j.exec(Oe.slice(xe));return le?(ue.m=b.get(le[0].toLowerCase()),xe+le[0].length):-1}function W(ue,Oe,xe){return E(ue,t,Oe,xe)}function z(ue,Oe,xe){return E(ue,n,Oe,xe)}function Q(ue,Oe,xe){return E(ue,s,Oe,xe)}function J(ue){return o[ue.getDay()]}function Y(ue){return i[ue.getDay()]}function re(ue){return c[ue.getMonth()]}function we(ue){return l[ue.getMonth()]}function Z(ue){return r[+(ue.getHours()>=12)]}function ne(ue){return 1+~~(ue.getMonth()/3)}function pe(ue){return o[ue.getUTCDay()]}function Ne(ue){return i[ue.getUTCDay()]}function de(ue){return c[ue.getUTCMonth()]}function be(ue){return l[ue.getUTCMonth()]}function oe(ue){return r[+(ue.getUTCHours()>=12)]}function Te(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var Oe=T(ue+="",S);return Oe.toString=function(){return ue},Oe},parse:function(ue){var Oe=A(ue+="",!1);return Oe.toString=function(){return ue},Oe},utcFormat:function(ue){var Oe=T(ue+="",_);return Oe.toString=function(){return ue},Oe},utcParse:function(ue){var Oe=A(ue+="",!0);return Oe.toString=function(){return ue},Oe}}}var m6={"-":"",_:" ",0:"0"},bs=/^\s*\d+/,dhe=/^%/,uhe=/[\\^$*+?|[\]().{}]/g;function _a(e,t,n){var s=e<0?"-":"",r=(s?-e:e)+"",i=r.length;return s+(i<n?new Array(n-i+1).join(t)+r:r)}function mhe(e){return e.replace(uhe,"\\$&")}function xg(e){return new RegExp("^(?:"+e.map(mhe).join("|")+")","i")}function yg(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fhe(e,t,n){var s=bs.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function hhe(e,t,n){var s=bs.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function ghe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function phe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function xhe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function f6(e,t,n){var s=bs.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function h6(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function yhe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function bhe(e,t,n){var s=bs.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function vhe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function g6(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function whe(e,t,n){var s=bs.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function p6(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function jhe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function Nhe(e,t,n){var s=bs.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Che(e,t,n){var s=bs.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function She(e,t,n){var s=bs.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function _he(e,t,n){var s=dhe.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Ahe(e,t,n){var s=bs.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function The(e,t,n){var s=bs.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function x6(e,t){return _a(e.getDate(),t,2)}function khe(e,t){return _a(e.getHours(),t,2)}function Ehe(e,t){return _a(e.getHours()%12||12,t,2)}function Lhe(e,t){return _a(1+Cx.count(ql(e),e),t,3)}function Rq(e,t){return _a(e.getMilliseconds(),t,3)}function Phe(e,t){return Rq(e,t)+"000"}function Dhe(e,t){return _a(e.getMonth()+1,t,2)}function Ohe(e,t){return _a(e.getMinutes(),t,2)}function Mhe(e,t){return _a(e.getSeconds(),t,2)}function Ihe(e){var t=e.getDay();return t===0?7:t}function $he(e,t){return _a(Vj.count(ql(e)-1,e),t,2)}function zq(e){var t=e.getDay();return t>=4||t===0?Lf(e):Lf.ceil(e)}function Rhe(e,t){return e=zq(e),_a(Lf.count(ql(e),e)+(ql(e).getDay()===4),t,2)}function zhe(e){return e.getDay()}function Fhe(e,t){return _a(zv.count(ql(e)-1,e),t,2)}function Uhe(e,t){return _a(e.getFullYear()%100,t,2)}function Bhe(e,t){return e=zq(e),_a(e.getFullYear()%100,t,2)}function Hhe(e,t){return _a(e.getFullYear()%1e4,t,4)}function qhe(e,t){var n=e.getDay();return e=n>=4||n===0?Lf(e):Lf.ceil(e),_a(e.getFullYear()%1e4,t,4)}function Ghe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+_a(t/60|0,"0",2)+_a(t%60,"0",2)}function y6(e,t){return _a(e.getUTCDate(),t,2)}function Whe(e,t){return _a(e.getUTCHours(),t,2)}function Vhe(e,t){return _a(e.getUTCHours()%12||12,t,2)}function Yhe(e,t){return _a(1+Wj.count(Gl(e),e),t,3)}function Fq(e,t){return _a(e.getUTCMilliseconds(),t,3)}function Qhe(e,t){return Fq(e,t)+"000"}function Khe(e,t){return _a(e.getUTCMonth()+1,t,2)}function Xhe(e,t){return _a(e.getUTCMinutes(),t,2)}function Zhe(e,t){return _a(e.getUTCSeconds(),t,2)}function Jhe(e){var t=e.getUTCDay();return t===0?7:t}function ege(e,t){return _a(Yj.count(Gl(e)-1,e),t,2)}function Uq(e){var t=e.getUTCDay();return t>=4||t===0?Pf(e):Pf.ceil(e)}function tge(e,t){return e=Uq(e),_a(Pf.count(Gl(e),e)+(Gl(e).getUTCDay()===4),t,2)}function age(e){return e.getUTCDay()}function nge(e,t){return _a(Fv.count(Gl(e)-1,e),t,2)}function sge(e,t){return _a(e.getUTCFullYear()%100,t,2)}function rge(e,t){return e=Uq(e),_a(e.getUTCFullYear()%100,t,2)}function ige(e,t){return _a(e.getUTCFullYear()%1e4,t,4)}function oge(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pf(e):Pf.ceil(e),_a(e.getUTCFullYear()%1e4,t,4)}function lge(){return"+0000"}function b6(){return"%"}function v6(e){return+e}function w6(e){return Math.floor(+e/1e3)}var Qm,Bq,Hq;cge({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cge(e){return Qm=che(e),Bq=Qm.format,Qm.parse,Hq=Qm.utcFormat,Qm.utcParse,Qm}function dge(e){return new Date(e)}function uge(e){return e instanceof Date?+e:+new Date(+e)}function j4(e,t,n,s,r,i,o,l,c,u){var d=o4(),h=d.invert,p=d.domain,x=u(".%L"),v=u(":%S"),j=u("%I:%M"),b=u("%I %p"),N=u("%a %d"),w=u("%b %d"),S=u("%B"),_=u("%Y");function k(T){return(c(T)<T?x:l(T)<T?v:o(T)<T?j:i(T)<T?b:s(T)<T?r(T)<T?N:w:n(T)<T?S:_)(T)}return d.invert=function(T){return new Date(h(T))},d.domain=function(T){return arguments.length?p(Array.from(T,uge)):p().map(dge)},d.ticks=function(T){var A=p();return e(A[0],A[A.length-1],T??10)},d.tickFormat=function(T,A){return A==null?k:u(A)},d.nice=function(T){var A=p();return(!T||typeof T.range!="function")&&(T=t(A[0],A[A.length-1],T??10)),T?p(Lq(A,T)):d},d.copy=function(){return Nx(d,j4(e,t,n,s,r,i,o,l,c,u))},d}function N4(){return ki.apply(j4(ohe,lhe,ql,v4,Vj,Cx,y4,p4,fu,Bq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qq(){return ki.apply(j4(rhe,ihe,Gl,w4,Yj,Wj,b4,x4,fu,Hq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qj(){var e=0,t=1,n,s,r,i,o=Ws,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(r===0?.5:(h=(i(h)-n)*r,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),r=n===s?0:1/(s-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(p){var x,v;return arguments.length?([x,v]=p,o=h(x,v),u):[o(0),o(1)]}}return u.range=d(ah),u.rangeRound=d(i4),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),s=h(t),r=n===s?0:1/(s-n),u}}function Sd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function C4(){var e=Cd(Qj()(Ws));return e.copy=function(){return Sd(e,C4())},nc.apply(e,arguments)}function Gq(){var e=d4(Qj()).domain([1,10]);return e.copy=function(){return Sd(e,Gq()).base(e.base())},nc.apply(e,arguments)}function Wq(){var e=u4(Qj());return e.copy=function(){return Sd(e,Wq()).constant(e.constant())},nc.apply(e,arguments)}function S4(){var e=f4(Qj());return e.copy=function(){return Sd(e,S4()).exponent(e.exponent())},nc.apply(e,arguments)}function mge(){return S4.apply(null,arguments).exponent(.5)}function Vq(){var e=[],t=Ws;function n(s){if(s!=null&&!isNaN(s=+s))return t((wx(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let r of s)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(vx),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,r)=>t(r/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(r,i)=>nfe(e,i/s))},n.copy=function(){return Vq(t).domain(e)},nc.apply(n,arguments)}function Kj(){var e=0,t=.5,n=1,s=1,r,i,o,l,c,u=Ws,d,h=!1,p;function x(j){return isNaN(j=+j)?p:(j=.5+((j=+d(j))-i)*(s*j<s*i?l:c),u(h?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,n]=j,r=d(e=+e),i=d(t=+t),o=d(n=+n),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x):[e,t,n]},x.clamp=function(j){return arguments.length?(h=!!j,x):h},x.interpolator=function(j){return arguments.length?(u=j,x):u};function v(j){return function(b){var N,w,S;return arguments.length?([N,w,S]=b,u=Afe(j,[N,w,S]),x):[u(0),u(.5),u(1)]}}return x.range=v(ah),x.rangeRound=v(i4),x.unknown=function(j){return arguments.length?(p=j,x):p},function(j){return d=j,r=j(e),i=j(t),o=j(n),l=r===i?0:.5/(i-r),c=i===o?0:.5/(o-i),s=i<r?-1:1,x}}function Yq(){var e=Cd(Kj()(Ws));return e.copy=function(){return Sd(e,Yq())},nc.apply(e,arguments)}function Qq(){var e=d4(Kj()).domain([.1,1,10]);return e.copy=function(){return Sd(e,Qq()).base(e.base())},nc.apply(e,arguments)}function Kq(){var e=u4(Kj());return e.copy=function(){return Sd(e,Kq()).constant(e.constant())},nc.apply(e,arguments)}function _4(){var e=f4(Kj());return e.copy=function(){return Sd(e,_4()).exponent(e.exponent())},nc.apply(e,arguments)}function fge(){return _4.apply(null,arguments).exponent(.5)}function Xq(e){return e.type==="piecewise"?h4(e.thresholds,e.colors):C4([e.min??0,e.max??100],e.color)}function Df(e){return e.values?jp(e.values,e.colors).unknown(e.unknownColor??null):jp(e.colors.map((t,n)=>n),e.colors).unknown(e.unknownColor??null)}function vf(e){return e.type==="ordinal"?Df(e):Xq(e)}function Zq(e,t,n){const{tickMaxStep:s,tickMinStep:r,tickNumber:i}=e,o=r===void 0?999:Math.floor(Math.abs(t[1]-t[0])/r),l=s===void 0?2:Math.ceil(Math.abs(t[1]-t[0])/s);return Math.min(o,Math.max(l,i??n))}function Jq(e,t){return t[1]-t[0]===0?1:e/((t[1]-t[0])/100)}function A4(e){return Math.floor(Math.abs(e)/50)}function j6(e){return Array.isArray(e)?JSON.stringify(e):typeof e=="object"&&e!==null?e.valueOf():e}function Xj(...e){let t=new Dv(void 0,j6),n=[],s=[],r=0,i=1,o,l,c=!1,u=0,d=0,h=.5;const p=b=>{const N=t.get(b);if(N!==void 0)return s[N%s.length]},x=()=>{const b=n.length,N=i<r,w=N?i:r,S=N?r:i;o=(S-w)/Math.max(1,b-u+d*2),c&&(o=Math.floor(o));const _=w+(S-w-o*(b-u))*h;l=o*(1-u);const k=c?Math.round(_):_;l=c?Math.round(l):l;const A=jq(b).map(E=>k+o*E);return s=N?A.reverse():A,p};p.domain=function(b){if(!arguments.length)return n.slice();n=[],t=new Dv(void 0,j6);for(const N of b)t.has(N)||t.set(N,n.push(N)-1);return x()},p.range=function(b){if(!arguments.length)return[r,i];const[N,w]=b;return r=+N,i=+w,x()},p.rangeRound=function(b){const[N,w]=b;return r=+N,i=+w,c=!0,x()},p.bandwidth=function(){return l},p.step=function(){return o},p.round=function(b){return arguments.length?(c=!!b,x()):c},p.padding=function(b){return arguments.length?(u=Math.min(1,d=+b),x()):u},p.paddingInner=function(b){return arguments.length?(u=Math.min(1,b),x()):u},p.paddingOuter=function(b){return arguments.length?(d=+b,x()):d},p.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),x()):h},p.copy=()=>Xj(n,[r,i]).round(c).paddingInner(u).paddingOuter(d).align(h);const[v,j]=e;return e.length>1?(p.domain(v),p.range(j)):v?p.range(v):x(),p}function eG(...e){const t=Xj(...e).paddingInner(1),n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=()=>{const s=n();return s.padding=s.paddingOuter,delete s.paddingInner,delete s.paddingOuter,s.copy=t.copy,s},t}function tG(...e){const t=m4(...e),n=t.ticks,{negativeScale:s,linearScale:r,positiveScale:i}=hge(t);return t.ticks=o=>{const l=n(o),c=t.constant();let u=0,d=0,h=0;l.forEach(x=>{x>-c&&x<c&&(d+=1),x<=-c&&(u+=1),x>=c&&(h+=1)});const p=[];if(u>0&&p.push(...s.ticks(u)),d>0){const x=r.ticks(d);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}if(h>0){const x=i.ticks(h);p.at(-1)===x[0]?p.push(...x.slice(1)):p.push(...x)}return p},t.tickFormat=(o=10,l)=>{const c=t.constant(),[u,d]=t.domain(),h=d-u,p=s.domain(),x=p[1]-p[0],j=(h===0?0:x/h)*o,b=r.domain(),N=b[1]-b[0],S=(h===0?0:N/h)*o,_=i.domain(),k=_[1]-_[0],A=(h===0?0:k/h)*o,E=s.tickFormat(j,l),M=r.tickFormat(S,l),O=i.tickFormat(A,l);return I=>(I.valueOf()<=-c?E:I.valueOf()>=c?O:M)(I)},t.copy=()=>tG(t.domain(),t.range()).constant(t.constant()),t}function hge(e){const t=e.constant(),n=e.domain(),s=[n[0],Math.min(n[1],-t)],r=Ap(s,e.range()),i=[Math.max(n[0],-t),Math.min(n[1],t)],o=qj(i,e.range()),l=[Math.max(n[0],t),n[1]],c=Ap(l,e.range());return{negativeScale:r,linearScale:o,positiveScale:c}}function Zj(e,t,n){switch(e){case"log":return Ap(t,n);case"pow":return Gj(t,n);case"sqrt":return Pq(t,n);case"time":return N4(t,n);case"utc":return qq(t,n);case"symlog":return tG(t,n);default:return qj(t,n)}}const _k=e=>e?.[0]instanceof Date;function Ak(e,t,n){const s=N4(e,t);return(r,{location:i})=>i==="tick"?s.tickFormat(n)(r):`${r.toLocaleString()}`}let N6,C6;class gge{types=new Set;constructor(){if(N6)throw new Error("You can only create one instance!");N6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}class pge{types=new Set;constructor(){if(C6)throw new Error("You can only create one instance!");C6=this.types}addType(t){this.types.add(t)}getTypes(){return this.types}}const Jj=new gge;Jj.addType("bar");Jj.addType("line");Jj.addType("scatter");const aG=new pge;aG.addType("radar");function eN(e){return Jj.getTypes().has(e)}function Uv(e){return eN(e.type)}const xge=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(eN).forEach(o=>{const l=n[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:u,direction:d})=>{d===e&&r.add(u??s)})}),r};function vs(e){return e.bandwidth!==void 0}function yge(e){return vs(e)&&e.paddingOuter!==void 0}function bge(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n?[s[1],s[0]]:s}const vge=.2,wge=.1;function nG({scales:e,drawingArea:t,formattedSeries:n,axis:s,seriesConfig:r,axisDirection:i,zoomMap:o,domains:l}){if(s===void 0)return{axis:{},axisIds:[]};const c=xge(i,r,n,s[0].id),u={};return s.forEach(d=>{const h=d,p=e[h.id],x=o?.get(h.id),v=x?[x.start,x.end]:[0,100],j=bge(t,i,h.reverse??!1),b=!h.ignoreTooltip&&c.has(h.id),N=h.data??[];if(vs(p)){const T=i==="y"?[j[1],j[0]]:j;if(yge(p)&&Zu(h)){const A=h.categoryGapRatio??vge,E=h.barGapRatio??wge;u[h.id]=et({offset:0,height:0,categoryGapRatio:A,barGapRatio:E,triggerTooltip:b},h,{data:N,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Df(et({values:h.data},h.colorMap)):vf(h.colorMap))})}if(Ju(h)&&(u[h.id]=et({offset:0,height:0,triggerTooltip:b},h,{data:N,scale:p,tickNumber:h.data.length,colorScale:h.colorMap&&(h.colorMap.type==="ordinal"?Df(et({values:h.data},h.colorMap)):vf(h.colorMap))})),_k(h.data)){const A=Ak(h.data,T,h.tickNumber);u[h.id].valueFormatter=h.valueFormatter??A}return}if(h.scaleType==="band"||h.scaleType==="point")return;const w=l[h.id].tickNumber,S=h,_=S.scaleType??"linear",k=Jq(w,v);u[h.id]=et({offset:0,height:0,triggerTooltip:b},S,{data:N,scaleType:_,scale:p,tickNumber:k,colorScale:S.colorMap&&Xq(S.colorMap),valueFormatter:h.valueFormatter??Yme(k,Zj(_,j.map(T=>p.invert(T)),j))})}),{axis:u,axisIds:s.map(({id:d})=>d)}}function jge(e){return e!=null}function Nge(e,t,n,s){const r=e?.length??0,i=Math.floor(t*r/100),o=Math.ceil(n*r/100);return function(c,u){return(c[s]??e?.[u])==null?!0:u>=i&&u<o}}function Cge(e,t,n,s,r){const i=e[0].valueOf(),o=e[1].valueOf(),l=i+t*(o-i)/100,c=i+n*(o-i)/100;return function(d,h){const p=d[s]??r?.[h];return p==null?!0:p>=l&&p<=c}}const Sge=e=>({currentAxisId:t,seriesXAxisId:n,seriesYAxisId:s,isDefaultAxis:r})=>(i,o)=>!(t===n?s:n)||r?Object.values(e??{})[0]?.(i,o)??!0:[s,n].filter(u=>u!==t).map(u=>e[u??""]).filter(jge).every(u=>u(i,o)),S6=e=>(t=[])=>t.reduce((n,s)=>{const{zoom:r,id:i,reverse:o}=s,l=JL(r,i,e,o);return l&&(n[i]=l),n},{}),_ge=.2;function sG(e,t,n){const s=t==="x"?[e.left,e.left+e.width]:[e.top+e.height,e.top];return n.reverse?[s[1],s[0]]:s}function rG(e,t){const n=[0,1];if(Zu(e)){const i=e.categoryGapRatio??_ge;return Xj(t,n).paddingInner(i).paddingOuter(i/2)}if(Ju(e))return eG(t,n);const s=e.scaleType??"linear",r=Zj(s,t,n);return Kme(e)&&e.constant!=null&&r.constant(e.constant),r}const iG=(e,t)=>{const n=e[1]-e[0],s=t[1]-t[0],r=e[0]-t[0]*n/s,i=e[1]+(100-t[1])*n/s;return[r,i]},Age=(e,t,n,s,r,i,o)=>{const l=n==="x"?s[e].xExtremumGetter:s[e].yExtremumGetter,c=i[e]?.series??{};return l?.({series:c,axis:t,axisIndex:r,isDefaultAxis:r===0,getFilters:o})??[1/0,-1/0]};function tN(e,t,n,s,r,i){const o=Object.keys(n).filter(eN);let l=[1/0,-1/0];for(const c of o){const[u,d]=Age(c,e,t,n,s,r,i);l=[Math.min(l[0],u),Math.max(l[1],d)]}return Number.isNaN(l[0])||Number.isNaN(l[1])?[1/0,-1/0]:l}const Tge=(e,t,n,s)=>{if(e.domainLimit!==void 0)return e.domainLimit;if(t==="x")for(const r of s.line?.seriesOrder??[]){const i=s.line.series[r];if(i.xAxisId===e.id||i.xAxisId===void 0&&n===0)return"strict"}return"nice"};function oG(e,t,n){return Zj(e??"linear",t,[0,1]).nice(n).domain()}function lG(e,t,n,s,[r,i],o,l){const c=dG(e,t,n,s,l);let u=uG(e,r,i);if(typeof c=="function"){const{min:h,max:p}=c(r.valueOf(),i.valueOf());u[0]=h,u[1]=p}const d=Zq(e,u,o);return c==="nice"&&(u=oG(e.scaleType,u,d)),u=["min"in e?e.min??u[0]:u[0],"max"in e?e.max??u[1]:u[1]],{domain:u,tickNumber:d}}function cG(e,t,n,s,[r,i],o,l){const c=dG(e,t,n,s,l);let u=uG(e,r,i);if(typeof c=="function"){const{min:d,max:h}=c(r.valueOf(),i.valueOf());u[0]=d,u[1]=h}return c==="nice"&&(u=oG(e.scaleType,u,o)),[e.min??u[0],e.max??u[1]]}function dG(e,t,n,s,r){return r?Tge(e,t,n,s):e.domainLimit??"nice"}function uG(e,t,n){let s=t,r=n;return"max"in e&&e.max!=null&&e.max<t&&(s=e.max),"min"in e&&e.min!=null&&e.min>t&&(r=e.min),!("min"in e)&&!("max"in e)?[s,r]:[e.min??s,e.max??r]}class kge{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,n){let s=this.length++;for(;s>0;){const r=s-1>>1,i=this.values[r];if(n>=i)break;this.ids[s]=this.ids[r],this.values[s]=i,s=r}this.ids[s]=t,this.values[s]=n}pop(){if(this.length===0)return;const t=this.ids,n=this.values,s=t[0],r=--this.length;if(r>0){const i=t[r],o=n[r];let l=0;const c=r>>1;for(;l<c;){const u=(l<<1)+1,d=u+1,h=u+(+(d<r)&+(n[d]<n[u]));if(n[h]>=o)break;t[l]=t[h],n[l]=n[h],l=h}t[l]=i,n[l]=o}return s}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}const _6=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],j2=3;class T4{static from(t,n=0){if(n%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");const[s,r]=new Uint8Array(t,n+0,2);if(s!==251)throw new Error("Data does not appear to be in a Flatbush format.");const i=r>>4;if(i!==j2)throw new Error(`Got v${i} data when expected v${j2}.`);const o=_6[r&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(t,n+2,1),[c]=new Uint32Array(t,n+4,1);return new T4(c,l,o,void 0,t,n)}constructor(t,n=16,s=Float64Array,r=ArrayBuffer,i,o=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.byteOffset=o;let l=t,c=l;this._levelBounds=[l*4];do l=Math.ceil(l/this.nodeSize),c+=l,this._levelBounds.push(c*4);while(l!==1);this.ArrayType=s,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;const u=_6.indexOf(s),d=c*4*s.BYTES_PER_ELEMENT;if(u<0)throw new Error(`Unexpected typed array class: ${s}.`);if(i)this.data=i,this._boxes=new s(i,o+8,c*4),this._indices=new this.IndexArrayType(i,o+8+d,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{const h=this.data=new r(8+d+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new s(h,8,c*4),this._indices=new this.IndexArrayType(h,8+d,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(h,0,2).set([251,(j2<<4)+u]),new Uint16Array(h,2,1)[0]=n,new Uint32Array(h,4,1)[0]=t}this._queue=new kge}add(t,n,s=t,r=n){const i=this._pos>>2,o=this._boxes;return this._indices[i]=i,o[this._pos++]=t,o[this._pos++]=n,o[this._pos++]=s,o[this._pos++]=r,t<this.minX&&(this.minX=t),n<this.minY&&(this.minY=n),s>this.maxX&&(this.maxX=s),r>this.maxY&&(this.maxY=r),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);const t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}const n=this.maxX-this.minX||1,s=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=65535;for(let o=0,l=0;o<this.numItems;o++){const c=t[l++],u=t[l++],d=t[l++],h=t[l++],p=Math.floor(i*((c+d)/2-this.minX)/n),x=Math.floor(i*((u+h)/2-this.minY)/s);r[o]=Pge(p,x)}Tk(r,t,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,l=0;o<this._levelBounds.length-1;o++){const c=this._levelBounds[o];for(;l<c;){const u=l;let d=t[l++],h=t[l++],p=t[l++],x=t[l++];for(let v=1;v<this.nodeSize&&l<c;v++)d=Math.min(d,t[l++]),h=Math.min(h,t[l++]),p=Math.max(p,t[l++]),x=Math.max(x,t[l++]);this._indices[this._pos>>2]=u,t[this._pos++]=d,t[this._pos++]=h,t[this._pos++]=p,t[this._pos++]=x}}}search(t,n,s,r,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let o=this._boxes.length-4;const l=[],c=[];for(;o!==void 0;){const u=Math.min(o+this.nodeSize*4,A6(o,this._levelBounds));for(let d=o;d<u;d+=4){if(s<this._boxes[d]||r<this._boxes[d+1]||t>this._boxes[d+2]||n>this._boxes[d+3])continue;const h=this._indices[d>>2]|0;o>=this.numItems*4?l.push(h):(i===void 0||i(h))&&(c.push(h),c.push(this._boxes[d]),c.push(this._boxes[d+1]))}o=l.pop()}return c}neighbors(t,n,s=1/0,r=1/0,i,o=Ege){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let l=this._boxes.length-4;const c=this._queue,u=[];e:for(;l!==void 0;){const d=Math.min(l+this.nodeSize*4,A6(l,this._levelBounds));for(let h=l;h<d;h+=4){const p=this._indices[h>>2]|0,x=this._boxes[h],v=this._boxes[h+1],j=this._boxes[h+2],b=this._boxes[h+3],N=t<x?x-t:t>j?t-j:0,w=n<v?v-n:n>b?n-b:0,S=o(N,w);S>r||(l>=this.numItems*4?c.push(p<<1,S):(i===void 0||i(p))&&c.push((p<<1)+1,S))}for(;c.length&&c.peek()&1;)if(c.peekValue()>r||(u.push(c.pop()>>1),u.length===s))break e;l=c.length?c.pop()>>1:void 0}return c.clear(),u}}function Ege(e,t){return e*e+t*t}function A6(e,t){let n=0,s=t.length-1;for(;n<s;){const r=n+s>>1;t[r]>e?s=r:n=r+1}return t[n]}function Tk(e,t,n,s,r,i){if(Math.floor(s/i)>=Math.floor(r/i))return;const o=e[s],l=e[s+r>>1],c=e[r];let u=c;const d=Math.max(o,l);c>d?u=d:d===o?u=Math.max(l,c):d===l&&(u=Math.max(o,c));let h=s-1,p=r+1;for(;;){do h++;while(e[h]<u);do p--;while(e[p]>u);if(h>=p)break;Lge(e,t,n,h,p)}Tk(e,t,n,s,p,i),Tk(e,t,n,p+1,r,i)}function Lge(e,t,n,s,r){const i=e[s];e[s]=e[r],e[r]=i;const o=4*s,l=4*r,c=t[o],u=t[o+1],d=t[o+2],h=t[o+3];t[o]=t[l],t[o+1]=t[l+1],t[o+2]=t[l+2],t[o+3]=t[l+3],t[l]=c,t[l+1]=u,t[l+2]=d,t[l+3]=h;const p=n[s];n[s]=n[r],n[r]=p}function Pge(e,t){let n=e^t,s=65535^n,r=65535^(e|t),i=e&(t^65535),o=n|s>>1,l=n>>1^n,c=r>>1^s&i>>1^r,u=n&r>>1^i>>1^i;n=o,s=l,r=c,i=u,o=n&n>>2^s&s>>2,l=n&s>>2^s&(n^s)>>2,c^=n&r>>2^s&i>>2,u^=s&r>>2^(n^s)&i>>2,n=o,s=l,r=c,i=u,o=n&n>>4^s&s>>4,l=n&s>>4^s&(n^s)>>4,c^=n&r>>4^s&i>>4,u^=s&r>>4^(n^s)&i>>4,n=o,s=l,r=c,i=u,c^=n&r>>8^s&i>>8,u^=s&r>>8^(n^s)&i>>8,n=c^c>>1,s=u^u>>1;let d=e^t,h=s|65535^(d|n);return d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|d)>>>0}const Dge=e=>{const t=new Map;return e.forEach(n=>{t.set(n.axisId,n)}),t},mG=e=>e.zoom,Oge=Et(Yo,ac,(e,t)=>e?.some(n=>!!n.zoom)||t?.some(n=>!!n.zoom)||!1),fG=Et(mG,e=>e?.isInteracting),_d=$n(mG,function(t){return t?.zoomData&&Dge(t?.zoomData)}),T6=Et(_d,(e,t)=>e?.get(t)),Sx=$n(Yo,ac,function(t,n){return et({},S6("x")(t),S6("y")(n))});Et(Sx,(e,t)=>e[t]);const Mge=Et(vr,function(t){return A4(t.width)}),Ige=Et(vr,function(t){return A4(t.height)}),k4=$n(Yo,yn,Gr,Fj,Mge,function(t,n,s,r,i){const l={};return t?.forEach((c,u)=>{const d=c;if(Zu(d)||Ju(d)){l[d.id]={domain:d.data};return}const h=tN(d,"x",s,u,n);l[d.id]=lG(d,"x",u,n,h,i,r)}),{axes:t,domains:l}}),E4=$n(ac,yn,Gr,Fj,Ige,function(t,n,s,r,i){const l={};return t?.forEach((c,u)=>{const d=c;if(Zu(d)||Ju(d)){l[d.id]={domain:d.data};return}const h=tN(d,"y",s,u,n);l[d.id]=lG(d,"y",u,n,h,i,r)}),{axes:t,domains:l}}),hG=$n(_d,Sx,k4,E4,function(t,n,{axes:s,domains:r},{axes:i,domains:o}){if(!t||!n)return;let l=!1;const c={},u=[...s??[],...i??[]];for(let d=0;d<u.length;d+=1){const h=u[d];if(!n[h.id]||n[h.id].filterMode!=="discard")continue;const p=t.get(h.id);if(p===void 0||p.start<=0&&p.end>=100)continue;const x=d<(s?.length??0)?"x":"y";if(h.scaleType==="band"||h.scaleType==="point")c[h.id]=Nge(h.data,p.start,p.end,x);else{const{domain:v}=x==="x"?r[h.id]:o[h.id];c[h.id]=Cge(v,p.start,p.end,x,h.data)}l=!0}if(l)return Sge(c)}),$ge=$n(yn,Gr,_d,Sx,hG,Fj,k4,function(t,n,s,r,i,o,{axes:l,domains:c}){const u={};return l?.forEach((d,h)=>{const p=c[d.id].domain;if(Zu(d)||Ju(d)){u[d.id]=p;return}const x=s?.get(d.id),v=r?.[d.id],j=x===void 0&&!v?i:void 0;if(!j){u[d.id]=p;return}const b=c[d.id].tickNumber,N=tN(d,"x",n,h,t,j);u[d.id]=cG(d,"x",h,t,N,b,o)}),u}),Rge=$n(yn,Gr,_d,Sx,hG,Fj,E4,function(t,n,s,r,i,o,{axes:l,domains:c}){const u={};return l?.forEach((d,h)=>{const p=c[d.id].domain;if(Zu(d)||Ju(d)){u[d.id]=p;return}const x=s?.get(d.id),v=r?.[d.id],j=x===void 0&&!v?i:void 0;if(!j){u[d.id]=p;return}const b=c[d.id].tickNumber,N=tN(d,"y",n,h,t,j);u[d.id]=cG(d,"y",h,t,N,b,o)}),u}),gG=$n(Yo,$ge,function(t,n){const s={};return t?.forEach(r=>{const i=r,o=n[i.id];s[i.id]=rG(i,o)}),s}),pG=$n(ac,Rge,function(t,n){const s={};return t?.forEach(r=>{const i=r,o=n[i.id];s[i.id]=rG(i,o)}),s}),zge=$n(Yo,gG,vr,_d,function(t,n,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),u=c?[c.start,c.end]:[0,100],d=sG(s,"x",l),h=n[l.id].copy(),p=iG(d,u);h.range(p),i[l.id]=h}),i}),Fge=$n(ac,pG,vr,_d,function(t,n,s,r){const i={};return t?.forEach(o=>{const l=o,c=r?.get(l.id),u=c?[c.start,c.end]:[0,100],d=sG(s,"y",l),h=n[l.id].copy(),p=vs(h)?d.reverse():d,x=iG(p,u);h.range(x),i[l.id]=h}),i}),Xs=$n(vr,yn,Gr,_d,k4,zge,function(t,n,s,r,{axes:i,domains:o},l){return nG({scales:l,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"x",zoomMap:r,domains:o})}),Zs=$n(vr,yn,Gr,_d,E4,Fge,function(t,n,s,r,{axes:i,domains:o},l){return nG({scales:l,drawingArea:t,formattedSeries:n,axis:i,seriesConfig:s,axisDirection:"y",zoomMap:r,domains:o})});Et(Xs,Zs,(e,t,n)=>e?.axis[n]??t?.axis[n]);Et(Yo,ac,(e,t,n)=>{const s=e?.find(r=>r.id===n)??t?.find(r=>r.id===n)??null;if(s)return s});const Uge=Et(Yo,e=>e[0].id),Bge=Et(ac,e=>e[0].id),Hge=new Map,qge=()=>Hge,Gge=$n(yn,gG,pG,Uge,Bge,function(t,n,s,r,i){const o=t.scatter,l=new Map;return o&&o.seriesOrder.forEach(c=>{const{data:u,xAxisId:d=r,yAxisId:h=i}=o.series[c],p=new T4(u.length),x=n[d],v=s[h];for(const j of u)p.add(x(j.x),v(j.y));p.finish(),l.set(c,p)}),l});function Km(e){return e instanceof Date?e.getTime():e}function Of(e,t){const{scale:n,data:s,reverse:r}=e;if(!vs(n)){const o=n.invert(t);if(s===void 0)return-1;const l=Km(o);return s?.findIndex((u,d)=>{const h=Km(u);return h>l&&(d===0||Math.abs(l-h)<=Math.abs(l-Km(s[d-1])))||h<=l&&(d===s.length-1||Math.abs(Km(o)-h)<Math.abs(Km(o)-Km(s[d+1])))})}const i=n.bandwidth()===0?Math.floor((t-Math.min(...n.range())+n.step()/2)/n.step()):Math.floor((t-Math.min(...n.range()))/n.step());return i<0||i>=s.length?-1:r?s.length-1-i:i}function k6(e,t,n,s){if(!vs(e)){if(s===null){const r=e.invert(n);return Number.isNaN(r)?null:r}return t[s]}return s===null||s<0||s>=t.length?null:t[s]}function Tp(e,t){const n=e.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n.matrixTransform(e.getScreenCTM().inverse())}const Wge=Object.is;function xG(e,t){if(e===t)return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;let n=0,s=0;for(const r in e)if(n+=1,!Wge(e[r],t[r])||!(r in t))return!1;for(const r in t)s+=1;return n===s}const _x=({store:e})=>{const t=ps(function(){e.set("interaction",et({},e.state.interaction,{pointer:null,item:null}))}),n=ps(function(o){const l=e.state.interaction.item;if(!o){l!==null&&e.set("interaction",et({},e.state.interaction,{item:null}));return}l===null||Object.keys(o).some(c=>o[c]!==l[c])||e.set("interaction",et({},e.state.interaction,{item:null}))}),s=ps(function(o,l){xG(e.state.interaction.item,o)||e.set("interaction",et({},e.state.interaction,{lastUpdate:l.interaction,item:o}))}),r=ps(function(o){e.set("interaction",et({},e.state.interaction,{pointer:o,lastUpdate:o!==null?"pointer":e.state.interaction.lastUpdate}))});return{instance:{cleanInteraction:t,setItemInteraction:s,removeItemInteraction:n,setPointerCoordinate:r}}};_x.getInitialState=()=>({interaction:{item:null,pointer:null,lastUpdate:"pointer"}});_x.params={};const aN=e=>e.interaction,Vge=Et(aN,e=>e!==void 0),yG=Et(aN,e=>e?.item??null),bG=Et(aN,e=>e?.pointer??null),Ax=Et(bG,e=>e&&e.x),Tx=Et(bG,e=>e&&e.y),Yge=Et(yG,e=>e!==null),kx=Et(aN,e=>e?.lastUpdate),Qge=new Set(["bar","line","scatter","pie"]);function vG(e){return Qge.has(e)}function wG(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):-1,o=s.filter(vG);for(let d=0;d<o.length;d+=1){const h=(r+d)%o.length,p=e[o[h]],x=d===0?i+1:0;for(let v=x;v<p.seriesOrder.length;v+=1)if(p.series[p.seriesOrder[v]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[v]}}const l=r,c=e[o[l]],u=i;for(let d=0;d<u;d+=1)if(c.series[c.seriesOrder[d]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[d]};return null}function jG(e,t,n){const s=Object.keys(e),r=t!==void 0&&e[t]?s.indexOf(t):0,i=t!==void 0&&n!==void 0&&e[t]&&e[t].series[n]?e[t].seriesOrder.indexOf(n):1,o=s.filter(vG);for(let d=0;d<o.length;d+=1){const h=(o.length+r-d)%o.length,p=e[o[h]],x=d===0?i+1:p.seriesOrder.length;for(let v=1;v<x;v+=1){const j=(p.seriesOrder.length+i-v)%p.seriesOrder.length;if(p.series[p.seriesOrder[j]].data.length>0)return{type:o[h],seriesId:p.seriesOrder[j]}}}const l=r,c=e[o[l]],u=c.seriesOrder;for(let d=u.length-1;d>i;d-=1)if(c.series[c.seriesOrder[d]].data.length>0)return{type:o[l],seriesId:c.seriesOrder[d]};return null}function NG(e,t,n){if(t==="sankey")return!1;const s=e[t]?.series[n]?.data;return s&&s.length>0}function Kge(e){const t=yn(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!NG(t,n,s)){const i=wG(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:((e.keyboardNavigation.item?.dataIndex??-1)+1)%r}}function Xge(e){const t=yn(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};if(n===void 0||n==="sankey"||s===void 0||!NG(t,n,s)){const i=jG(t,n,s);if(i===null)return null;n=i.type,s=i.seriesId}const r=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:(r+(e.keyboardNavigation.item?.dataIndex??1)-1)%r}}function Zge(e){const t=yn(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=wG(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}function Jge(e){const t=yn(e);let{type:n,seriesId:s}=e.keyboardNavigation.item??{};const r=jG(t,n,s);if(r===null)return null;n=r.type,s=r.seriesId;const i=t[n].series[s].data.length;return{type:n,seriesId:s,dataIndex:Math.min(i-1,e.keyboardNavigation.item?.dataIndex??0)}}const nN=({params:e,store:t,svgRef:n})=>{const s=ps(function(){t.state.keyboardNavigation.item!==null&&t.set("keyboardNavigation",et({},t.state.keyboardNavigation,{item:null}))});return f.useEffect(()=>{const r=n.current;if(!r||!e.enableKeyboardNavigation)return;function i(o){let l=t.state.keyboardNavigation.item;switch(o.key){case"ArrowRight":l=Kge(t.state);break;case"ArrowLeft":l=Xge(t.state);break;case"ArrowDown":{l=Jge(t.state);break}case"ArrowUp":{l=Zge(t.state);break}}l!==t.state.keyboardNavigation.item&&(o.preventDefault(),t.update(et({},t.state.highlight&&{highlight:et({},t.state.highlight,{lastUpdate:"keyboard"})},t.state.interaction&&{interaction:et({},t.state.interaction,{lastUpdate:"keyboard"})},{keyboardNavigation:et({},t.state.keyboardNavigation,{item:l})})))}return r.addEventListener("keydown",i),r.addEventListener("blur",s),()=>{r.removeEventListener("keydown",i),r.removeEventListener("blur",s)}},[n,s,e.enableKeyboardNavigation,t]),is(()=>{t.state.keyboardNavigation.enableKeyboardNavigation!==e.enableKeyboardNavigation&&t.set("keyboardNavigation",et({},t.state.keyboardNavigation,{enableKeyboardNavigation:!!e.enableKeyboardNavigation}))},[t,e.enableKeyboardNavigation]),{}};nN.getInitialState=e=>({keyboardNavigation:{item:null,enableKeyboardNavigation:!!e.enableKeyboardNavigation}});nN.params={enableKeyboardNavigation:!0};const am=e=>e.keyboardNavigation;Et(am,(e,t)=>e?.item!=null&&e.item.type===t.seriesType&&e.item.seriesId===t.seriesId&&e.item.dataIndex===t.dataIndex);const epe=Et(am,e=>e?.item!=null),sN=Et(am,e=>e?.item?.type),rN=Et(am,e=>e?.item?.seriesId),iN=Et(am,e=>e?.item?.dataIndex),tpe=Et(am,e=>!!e?.enableKeyboardNavigation),CG=e=>(t,n,s,r,i)=>{if(t===void 0||n===void 0||s===void 0)return;const o=i[t]?.series[n];if(!o)return;let l=e==="x"?"xAxisId"in o&&o.xAxisId:"yAxisId"in o&&o.yAxisId;return(l===void 0||l===!1)&&(l=r.axisIds[0]),{axisId:l,dataIndex:s}},ape=Et(sN,rN,iN,Xs,yn,CG("x")),npe=Et(sN,rN,iN,Zs,yn,CG("y")),SG=Et(am,function(t){if(t?.item==null)return null;const{type:n,seriesId:s}=t.item;return n===void 0||s===void 0?null:t.item}),spe=Et(sN,rN,iN,function(t,n,s){return n!==void 0&&s!==void 0}),_G=Et(kx,yG,SG,(e,t,n)=>e==="keyboard"?n:t??null),rpe=Et(kx,Yge,spe,(e,t,n)=>e==="keyboard"?n:t),ipe=Et(_G,vr,Gr,Xs,Zs,yn,function(t,n,s,{axis:r,axisIds:i},{axis:o,axisIds:l},c,u="top"){if(!t)return null;const d=c[t.type]?.series[t.seriesId];if(d){const h={},p=Uv(d)?d.xAxisId??i[0]:void 0,x=Uv(d)?d.yAxisId??l[0]:void 0;return p!==void 0&&(h.x=r[p]),x!==void 0&&(h.y=o[x]),s[d.type].tooltipItemPositionGetter?.({series:c,drawingArea:n,axesConfig:h,identifier:t,placement:u})??null}return null});function wf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(!wf(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;for(let i=0;i<r.length;i+=1){const o=r[i];if(!wf(o[1],t.get(o[0])))return!1}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;const r=Array.from(e.entries());for(let i=0;i<r.length;i+=1)if(!t.has(r[i][0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;i+=1)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const n=Object.keys(e),s=n.length;if(s!==Object.keys(t).length)return!1;for(let r=0;r<s;r+=1)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;for(let r=0;r<s;r+=1){const i=n[r];if(!wf(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function kk(e,t,n=t.axisIds[0]){return Array.isArray(n)?n.map(s=>Of(t.axis[s],e)):Of(t.axis[n],e)}const AG=(e,t,n)=>{if(e===null)return null;const s=kk(e,t,n);return s===-1?null:s},L4=Et(Ax,Xs,AG),P4=Et(Tx,Zs,AG),ope=Et(Ax,Tx,Xs,Zs,(e,t,n,s)=>[...e===null?[]:n.axisIds.map(r=>({axisId:r,dataIndex:kk(e,n,r)})),...t===null?[]:s.axisIds.map(r=>({axisId:r,dataIndex:kk(t,s,r)}))].filter(r=>r.dataIndex!==null&&r.dataIndex>=0));function TG(e,t,n,s=t.axisIds[0]){return Array.isArray(s)?s.map((r,i)=>{const o=t.axis[r];return k6(o.scale,o.data,e,n[i])}):k6(t.axis[s].scale,t.axis[s].data,e,n)}const lpe=Et(Ax,Xs,L4,(e,t,n,s)=>e===null||t.axisIds.length===0?null:TG(e,t,n,s)),cpe=Et(Tx,Zs,P4,(e,t,n,s)=>e===null||t.axisIds.length===0?null:TG(e,t,n,s)),kG=[],EG=Mj({memoizeOptions:{resultEqualityCheck:wf}})(Ax,Xs,(e,t)=>e===null?kG:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:Of(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),LG=Mj({memoizeOptions:{resultEqualityCheck:wf}})(Tx,Zs,(e,t)=>e===null?kG:t.axisIds.filter(n=>t.axis[n].triggerTooltip).map(n=>({axisId:n,dataIndex:Of(t.axis[n],e)})).filter(({dataIndex:n})=>n>=0)),dpe=Et(EG,LG,(e,t)=>e.length>0||t.length>0);function upe(e){return e.setPointerCoordinate!==void 0}const nh=({params:e,store:t,seriesConfig:n,svgRef:s,instance:r})=>{const{xAxis:i,yAxis:o,dataset:l,onHighlightedAxisChange:c}=e,u=qt(t,vr),d=qt(t,yn),h=qt(t,Vge),{axis:p,axisIds:x}=qt(t,Xs),{axis:v,axisIds:j}=qt(t,Zs);hq({controlled:e.highlightedAxis}),is(()=>{e.highlightedAxis!==void 0&&t.set("controlledCartesianAxisHighlight",e.highlightedAxis)},[t,e.highlightedAxis]);const b=f.useRef(!0);f.useEffect(()=>{if(b.current){b.current=!1;return}t.set("cartesianAxis",{x:xq(i,l),y:yq(o,l)})},[n,u,i,o,l,t]);const N=x[0],w=j[0];eme(t,ope,(_,k)=>{if(c&&!Object.is(_,k)){if(_.length!==k.length){c(k);return}_?.some(({axisId:T,dataIndex:A},E)=>k[E].axisId!==T||k[E].dataIndex!==A)&&c(k)}});const S=upe(r);return f.useEffect(()=>{const _=s.current;if(!h||!S||!_||e.disableAxisListener)return()=>{};const k=r.addInteractionListener("moveEnd",D=>{D.detail.activeGestures.pan||r.cleanInteraction()}),T=r.addInteractionListener("panEnd",D=>{D.detail.activeGestures.move||r.cleanInteraction()}),A=r.addInteractionListener("quickPressEnd",D=>{!D.detail.activeGestures.move&&!D.detail.activeGestures.pan&&r.cleanInteraction()}),E=D=>{const H=D.detail.srcEvent,W=D.detail.target,z=Tp(_,H);if(D.detail.srcEvent.buttons>=1&&W?.hasPointerCapture(D.detail.srcEvent.pointerId)&&!W?.closest("[data-charts-zoom-slider]")&&W?.releasePointerCapture(D.detail.srcEvent.pointerId),!r.isPointInside(z.x,z.y,W)){r.cleanInteraction?.();return}r.setPointerCoordinate(z)},M=r.addInteractionListener("move",E),O=r.addInteractionListener("pan",E),I=r.addInteractionListener("quickPress",E);return()=>{M.cleanup(),k.cleanup(),O.cleanup(),T.cleanup(),I.cleanup(),A.cleanup()}},[s,t,p,N,v,w,r,e.disableAxisListener,h,S]),f.useEffect(()=>{const _=s.current,k=e.onAxisClick;if(_===null||!k)return()=>{};const T=r.addInteractionListener("tap",A=>{let E=null,M=!1;const O=Tp(_,A.detail.srcEvent),I=Of(p[N],O.x);M=I!==-1,E=M?I:Of(v[w],O.y);const D=M?x[0]:j[0];if(E==null||E===-1)return;const H=(M?p:v)[D].data[E],W={};Object.keys(d).filter(z=>["bar","line"].includes(z)).forEach(z=>{d[z]?.seriesOrder.forEach(Q=>{const J=d[z].series[Q],Y=J.xAxisId,re=J.yAxisId,we=M?Y:re;(we===void 0||we===D)&&(W[Q]=J.data[E])})}),k(A.detail.srcEvent,{dataIndex:E,axisValue:H,seriesValues:W})});return()=>{T.cleanup()}},[e.onAxisClick,d,s,p,x,v,j,N,w,r]),{}};nh.params={xAxis:!0,yAxis:!0,dataset:!0,onAxisClick:!0,disableAxisListener:!0,onHighlightedAxisChange:!0,highlightedAxis:!0};nh.getDefaultizedParams=({params:e})=>et({},e,{colors:e.colors??dq,theme:e.theme??"light",defaultizedXAxis:xq(e.xAxis,e.dataset),defaultizedYAxis:yq(e.yAxis,e.dataset)});nh.getInitialState=e=>et({cartesianAxis:{x:e.defaultizedXAxis,y:e.defaultizedYAxis}},e.highlightedAxis===void 0?{}:{controlledCartesianAxisHighlight:e.highlightedAxis});const Qo=e=>e.brush;Et(Qo,e=>e?.start);Et(Qo,e=>e?.current);const mpe=Et(Qo,e=>e?.start?.x??null),fpe=Et(Qo,e=>e?.start?.y??null),hpe=Et(Qo,e=>e?.current?.x??null),gpe=Et(Qo,e=>e?.current?.y??null);Et(mpe,fpe,hpe,gpe,(e,t,n,s)=>e===null||t===null||n===null||s===null?null:{start:{x:e,y:t},current:{x:n,y:s}});const ppe=Et(yn,e=>{let t=!1,n=!1;return e&&Object.entries(e).forEach(([s,r])=>{Object.values(r.series).some(i=>i.layout==="horizontal")&&(t=!0),s==="scatter"&&r.seriesOrder.length>0&&(n=!0)}),n?"xy":t?"y":"x"}),xpe=Et(Sx,function(t){let n=!1,s=!1;return Object.values(t).forEach(r=>{r.axisDirection==="y"&&(s=!0),r.axisDirection==="x"&&(n=!0)}),n&&s?"xy":s?"y":n?"x":null});Et(ppe,xpe,(e,t)=>t??e);const PG=Et(Qo,e=>e?.enabled||e?.isZoomBrushEnabled),DG=Et(PG,Qo,(e,t)=>e&&t?.start!==null&&t?.current!==null),oN=Et(Qo,DG,(e,t)=>t&&e?.preventHighlight),ype=Et(Qo,DG,(e,t)=>t&&e?.preventTooltip),Ex=({store:e,svgRef:t,instance:n,params:s})=>{const r=qt(e,PG);is(()=>{e.set("brush",et({},e.state.brush,{enabled:s.brushConfig.enabled,preventTooltip:s.brushConfig.preventTooltip,preventHighlight:s.brushConfig.preventHighlight}))},[e,s.brushConfig.enabled,s.brushConfig.preventTooltip,s.brushConfig.preventHighlight]);const i=ps(function(u){e.set("brush",et({},e.state.brush,{start:e.state.brush.start??u,current:u}))}),o=ps(function(){e.set("brush",et({},e.state.brush,{start:null,current:null}))}),l=ps(function(u){e.state.brush.isZoomBrushEnabled!==u&&e.set("brush",et({},e.state.brush,{isZoomBrushEnabled:u}))});return f.useEffect(()=>{const c=t.current;if(c===null||!r)return()=>{};const u=j=>{if(j.detail.target?.closest("[data-charts-zoom-slider]"))return;const b=Tp(c,{clientX:j.detail.initialCentroid.x,clientY:j.detail.initialCentroid.y});i(b)},d=j=>{const b=Tp(c,{clientX:j.detail.centroid.x,clientY:j.detail.centroid.y});i(b)},h=n.addInteractionListener("brushStart",u),p=n.addInteractionListener("brush",d),x=n.addInteractionListener("brushCancel",o),v=n.addInteractionListener("brushEnd",o);return()=>{h.cleanup(),p.cleanup(),v.cleanup(),x.cleanup()}},[t,n,e,o,i,r]),{instance:{setBrushCoordinates:i,clearBrush:o,setZoomBrushEnabled:l}}};Ex.params={brushConfig:!0};Ex.getDefaultizedParams=({params:e})=>et({},e,{brushConfig:{enabled:e?.brushConfig?.enabled??!1,preventTooltip:e?.brushConfig?.preventTooltip??!0,preventHighlight:e?.brushConfig?.preventHighlight??!0}});Ex.getInitialState=e=>({brush:{enabled:e.brushConfig.enabled,isZoomBrushEnabled:!1,preventTooltip:e.brushConfig.preventTooltip,preventHighlight:e.brushConfig.preventHighlight,start:null,current:null}});const sh=e=>e.controlledCartesianAxisHighlight,OG=(e,t,n,s)=>s?[]:n!==void 0?n.filter(r=>t.axis[r.axisId]!==void 0).map(r=>r):e===null?[]:[{axisId:t.axisIds[0],dataIndex:e}],MG=$n(L4,Xs,sh,oN,OG);$n(P4,Zs,sh,oN,OG);const IG=(e,t,n,s,r,i,o)=>{if(o)return[];if(s!==void 0)return s.map(d=>et({},d,{value:n.axis[d.axisId]?.data?.[d.dataIndex]})).filter(({value:d})=>d!==void 0);const l=t!==null&&{axisId:n.axisIds[0],dataIndex:e,value:t},c=r&&n.axis[r.axisId]?.data?.[r.dataIndex],u=r&&c!=null&&et({},r,{value:c});if(i==="pointer"){if(l)return[l];if(u)return[u]}if(i==="keyboard"){if(u)return[u];if(l)return[l]}return[]},bpe=Et(L4,lpe,Xs,sh,ape,kx,oN,IG),vpe=Et(P4,cpe,Zs,sh,npe,kx,oN,IG),$G=(e,t)=>e===void 0?[t.axis[t.axisIds[0]]]:e.map(s=>t.axis[s.axisId]??null).filter(s=>s!==null);Et(sh,Xs,$G);Et(sh,Zs,$G);function E6(e,t){return e.id!==void 0?e:et({id:t},e)}function L6(e){return e.colorMap?et({},e,{colorScale:e.colorMap.type==="ordinal"&&e.data?Df(et({values:e.data},e.colorMap)):vf(e.colorMap.type==="continuous"?et({min:e.min,max:e.max},e.colorMap):e.colorMap)}):e}function RG(e,t){if(!e||e.length===0)return{axis:{},axisIds:[]};const n={},s=[];return e.forEach((r,i)=>{const o=r.dataKey,l=r.id??`defaultized-z-axis-${i}`;if(o===void 0||r.data!==void 0){n[l]=L6(E6(r,l)),s.push(l);return}if(t===void 0)throw new Error("MUI X Charts: z-axis uses `dataKey` but no `dataset` is provided.");n[l]=L6(E6(et({},r,{data:t.map(c=>c[o])}),l)),s.push(l)}),{axis:n,axisIds:s}}const Lx=({params:e,store:t})=>{const{zAxis:n,dataset:s}=e,r=f.useRef(!0);return f.useEffect(()=>{if(r.current){r.current=!1;return}t.set("zAxis",RG(n,s))},[n,s,t]),{}};Lx.params={zAxis:!0,dataset:!0};Lx.getInitialState=e=>({zAxis:RG(e.zAxis,e.dataset)});const wpe=e=>e,jpe=Et(wpe,e=>e.zAxis),Px=({store:e,params:t})=>{hq({controlled:t.highlightedItem}),is(()=>{e.state.highlight.item!==t.highlightedItem&&e.set("highlight",et({},e.state.highlight,{item:t.highlightedItem}))},[e,t.highlightedItem]);const n=ps(()=>{t.onHighlightChange?.(null);const r=e.getSnapshot().highlight;r.item===null||r.isControlled||e.set("highlight",{item:null,lastUpdate:"pointer",isControlled:!1})}),s=ps(r=>{const i=e.getSnapshot().highlight;i.isControlled||xG(i.item,r)||(t.onHighlightChange?.(r),e.set("highlight",{item:r,lastUpdate:"pointer",isControlled:!1}))});return{instance:{clearHighlight:n,setHighlight:s}}};Px.getInitialState=e=>({highlight:{item:e.highlightedItem,lastUpdate:"pointer",isControlled:e.highlightedItem!==void 0}});Px.params={highlightedItem:!0,onHighlightChange:!0};function Bv(e){let t=1/0,n=-1/0;for(const s of e??[])s<t&&(t=s),s>n&&(n=s);return[t,n]}const P6=(e,t)=>t==="x"?{x:e,y:null}:{x:null,y:e},zG=e=>{const{axis:t,getFilters:n,isDefaultAxis:s}=e,r=n?.({currentAxisId:t.id,isDefaultAxis:s}),i=r?t.data?.filter((o,l)=>r({x:null,y:null},l)):t.data;return Bv(i??[])},FG=e=>t=>{const{series:n,axis:s,getFilters:r,isDefaultAxis:i}=t;return Object.keys(n).filter(o=>{const l=e==="x"?n[o].xAxisId:n[o].yAxisId;return l===s.id||i&&l===void 0}).reduce((o,l)=>{const{stackedData:c}=n[l],u=r?.({currentAxisId:s.id,isDefaultAxis:i,seriesXAxisId:n[l].xAxisId,seriesYAxisId:n[l].yAxisId}),[d,h]=c?.reduce((p,x,v)=>u&&(!u(P6(x[0],e),v)||!u(P6(x[1],e),v))?p:[Math.min(...x,p[0]),Math.max(...x,p[1])],[1/0,-1/0])??[1/0,-1/0];return[Math.min(d,o[0]),Math.max(h,o[1])]},[1/0,-1/0])},Npe=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?FG("x")(e):zG(e),Cpe=e=>Object.keys(e.series).some(n=>e.series[n].layout==="horizontal")?zG(e):FG("y")(e);function ja(e){return function(){return e}}const UG=Math.cos,Hv=Math.sin,ao=Math.sqrt,D6=1e-12,qv=Math.PI,ju=2*qv,Ek=Math.PI,Lk=2*Ek,eu=1e-6,Spe=Lk-eu;function BG(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _pe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BG;const n=10**t;return function(s){this._+=s[0];for(let r=1,i=s.length;r<i;++r)this._+=Math.round(arguments[r]*n)/n+s[r]}}class Ape{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BG:_pe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,r){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+r}`}bezierCurveTo(t,n,s,r,i,o){this._append`C${+t},${+n},${+s},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,s,r,i){if(t=+t,n=+n,s=+s,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,u=r-n,d=o-t,h=l-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>eu)if(!(Math.abs(h*c-u*d)>eu)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let x=s-o,v=r-l,j=c*c+u*u,b=x*x+v*v,N=Math.sqrt(j),w=Math.sqrt(p),S=i*Math.tan((Ek-Math.acos((j+p-b)/(2*N*w)))/2),_=S/w,k=S/N;Math.abs(_-1)>eu&&this._append`L${t+_*d},${n+_*h}`,this._append`A${i},${i},0,0,${+(h*x>d*v)},${this._x1=t+k*c},${this._y1=n+k*u}`}}arc(t,n,s,r,i,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(r),c=s*Math.sin(r),u=t+l,d=n+c,h=1^o,p=o?r-i:i-r;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>eu||Math.abs(this._y1-d)>eu)&&this._append`L${u},${d}`,s&&(p<0&&(p=p%Lk+Lk),p>Spe?this._append`A${s},${s},0,1,${h},${t-l},${n-c}A${s},${s},0,1,${h},${this._x1=u},${this._y1=d}`:p>eu&&this._append`A${s},${s},0,${+(p>=Ek)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+r}h${-s}Z`}toString(){return this._}}function D4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Ape(t)}function lN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HG(e){this._context=e}HG.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Dx(e){return new HG(e)}function qG(e){return e[0]}function GG(e){return e[1]}function O4(e,t){var n=ja(!0),s=null,r=Dx,i=null,o=D4(l);e=typeof e=="function"?e:e===void 0?qG:ja(e),t=typeof t=="function"?t:t===void 0?GG:ja(t);function l(c){var u,d=(c=lN(c)).length,h,p=!1,x;for(s==null&&(i=r(x=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(h,u,c),+t(h,u,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ja(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ja(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ja(!!c),l):n},l.curve=function(c){return arguments.length?(r=c,s!=null&&(i=r(s)),l):r},l.context=function(c){return arguments.length?(c==null?s=i=null:i=r(s=c),l):s},l}function Hg(e,t,n){var s=null,r=ja(!0),i=null,o=Dx,l=null,c=D4(u);e=typeof e=="function"?e:e===void 0?qG:ja(+e),t=typeof t=="function"?t:ja(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?GG:ja(+n);function u(h){var p,x,v,j=(h=lN(h)).length,b,N=!1,w,S=new Array(j),_=new Array(j);for(i==null&&(l=o(w=c())),p=0;p<=j;++p){if(!(p<j&&r(b=h[p],p,h))===N)if(N=!N)x=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=p-1;v>=x;--v)l.point(S[v],_[v]);l.lineEnd(),l.areaEnd()}N&&(S[p]=+e(b,p,h),_[p]=+t(b,p,h),l.point(s?+s(b,p,h):S[p],n?+n(b,p,h):_[p]))}if(w)return l=null,w+""||null}function d(){return O4().defined(r).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:ja(+h),s=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ja(+h),u):e},u.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:ja(+h),u):s},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:ja(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ja(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ja(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(s).y(t)},u.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ja(!!h),u):r},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}function Tpe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function kpe(e){return e}function Epe(){var e=kpe,t=Tpe,n=null,s=ja(0),r=ja(ju),i=ja(0);function o(l){var c,u=(l=lN(l)).length,d,h,p=0,x=new Array(u),v=new Array(u),j=+s.apply(this,arguments),b=Math.min(ju,Math.max(-ju,r.apply(this,arguments)-j)),N,w=Math.min(Math.abs(b)/u,i.apply(this,arguments)),S=w*(b<0?-1:1),_;for(c=0;c<u;++c)(_=v[x[c]=c]=+e(l[c],c,l))>0&&(p+=_);for(t!=null?x.sort(function(k,T){return t(v[k],v[T])}):n!=null&&x.sort(function(k,T){return n(l[k],l[T])}),c=0,h=p?(b-u*S)/p:0;c<u;++c,j=N)d=x[c],_=v[d],N=j+(_>0?_*h:0)+S,v[d]={data:l[d],index:c,value:_,startAngle:j,endAngle:N,padAngle:w};return v}return o.value=function(l){return arguments.length?(e=typeof l=="function"?l:ja(+l),o):e},o.sortValues=function(l){return arguments.length?(t=l,n=null,o):t},o.sort=function(l){return arguments.length?(n=l,t=null,o):n},o.startAngle=function(l){return arguments.length?(s=typeof l=="function"?l:ja(+l),o):s},o.endAngle=function(l){return arguments.length?(r=typeof l=="function"?l:ja(+l),o):r},o.padAngle=function(l){return arguments.length?(i=typeof l=="function"?l:ja(+l),o):i},o}class WG{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function VG(e){return new WG(e,!0)}function YG(e){return new WG(e,!1)}const cN={draw(e,t){const n=ao(t/qv);e.moveTo(n,0),e.arc(0,0,n,0,ju)}},QG={draw(e,t){const n=ao(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},KG=ao(1/3),Lpe=KG*2,XG={draw(e,t){const n=ao(t/Lpe),s=n*KG;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},ZG={draw(e,t){const n=ao(t),s=-n/2;e.rect(s,s,n,n)}},Ppe=.8908130915292852,JG=Hv(qv/10)/Hv(7*qv/10),Dpe=Hv(ju/10)*JG,Ope=-UG(ju/10)*JG,eW={draw(e,t){const n=ao(t*Ppe),s=Dpe*n,r=Ope*n;e.moveTo(0,-n),e.lineTo(s,r);for(let i=1;i<5;++i){const o=ju*i/5,l=UG(o),c=Hv(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*r,c*s+l*r)}e.closePath()}},N2=ao(3),tW={draw(e,t){const n=-ao(t/(N2*3));e.moveTo(0,n*2),e.lineTo(-N2*n,-n),e.lineTo(N2*n,-n),e.closePath()}},si=-.5,ri=ao(3)/2,Pk=1/ao(12),Mpe=(Pk/2+1)*3,aW={draw(e,t){const n=ao(t/Mpe),s=n/2,r=n*Pk,i=s,o=n*Pk+n,l=-i,c=o;e.moveTo(s,r),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(si*s-ri*r,ri*s+si*r),e.lineTo(si*i-ri*o,ri*i+si*o),e.lineTo(si*l-ri*c,ri*l+si*c),e.lineTo(si*s+ri*r,si*r-ri*s),e.lineTo(si*i+ri*o,si*o-ri*i),e.lineTo(si*l+ri*c,si*c-ri*l),e.closePath()}},nW=[cN,QG,XG,ZG,eW,tW,aW];function M4(e,t){let n=null,s=D4(r);e=typeof e=="function"?e:ja(e||cN),t=typeof t=="function"?t:ja(t===void 0?64:+t);function r(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return r.type=function(i){return arguments.length?(e=typeof i=="function"?i:ja(i),r):e},r.size=function(i){return arguments.length?(t=typeof i=="function"?i:ja(+i),r):t},r.context=function(i){return arguments.length?(n=i??null,r):n},r}function Gv(){}function Wv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function sW(e){this._context=e}sW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ipe(e){return new sW(e)}function rW(e){this._context=e}rW.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $pe(e){return new rW(e)}function iW(e){this._context=e}iW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Wv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rpe(e){return new iW(e)}function O6(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function I4(e,t){this._context=e,this._k=(1-t)/6}I4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:O6(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:O6(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};(function e(t){function n(s){return new I4(s,t)}return n.tension=function(s){return e(+s)},n})(0);function zpe(e,t,n){var s=e._x1,r=e._y1,i=e._x2,o=e._y2;if(e._l01_a>D6){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>D6){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*u+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(s,r,i,o,e._x2,e._y2)}function oW(e,t){this._context=e,this._alpha=t}oW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,s=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:zpe(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fpe=(function e(t){function n(s){return t?new oW(s,t):new I4(s,0)}return n.alpha=function(s){return e(+s)},n})(.5);function lW(e){this._context=e}lW.prototype={areaStart:Gv,areaEnd:Gv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Upe(e){return new lW(e)}function M6(e){return e<0?-1:1}function I6(e,t,n){var s=e._x1-e._x0,r=t-e._x1,i=(e._y1-e._y0)/(s||r<0&&-0),o=(n-e._y1)/(r||s<0&&-0),l=(i*r+o*s)/(s+r);return(M6(i)+M6(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function $6(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function C2(e,t,n){var s=e._x0,r=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,r+l*t,i-l,o-l*n,i,o)}function Vv(e){this._context=e}Vv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:C2(this,this._t0,$6(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,C2(this,$6(this,n=I6(this,e,t)),n);break;default:C2(this,this._t0,n=I6(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cW(e){this._context=new dW(e)}(cW.prototype=Object.create(Vv.prototype)).point=function(e,t){Vv.prototype.point.call(this,t,e)};function dW(e){this._context=e}dW.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,r,i){this._context.bezierCurveTo(t,e,s,n,i,r)}};function Dk(e){return new Vv(e)}function uW(e){return new cW(e)}function mW(e){this._context=e}mW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=R6(e),r=R6(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(s[0][i],r[0][i],s[1][i],r[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function R6(e){var t,n=e.length-1,s,r=new Array(n),i=new Array(n),o=new Array(n);for(r[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=r[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(r[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/i[t];for(i[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-r[t+1];return[r,i]}function fW(e){return new mW(e)}function dN(e,t){this._context=e,this._t=t}dN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function hW(e){return new dN(e,.5)}function gW(e){return new dN(e,0)}function pW(e){return new dN(e,1)}function md(e,t){if((o=e.length)>1)for(var n=1,s,r,i=e[t[0]],o,l=i.length;n<o;++n)for(r=i,i=e[t[n]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(r[s][1])?r[s][0]:r[s][1]}function Mu(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Bpe(e,t){return e[t]}function Hpe(e){const t=[];return t.key=e,t}function $4(){var e=ja([]),t=Mu,n=md,s=Bpe;function r(i){var o=Array.from(e.apply(this,arguments),Hpe),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+s(h,o[l].key,u,i)]).data=h;for(l=0,d=lN(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return r.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ja(Array.from(i)),r):e},r.value=function(i){return arguments.length?(s=typeof i=="function"?i:ja(+i),r):s},r.order=function(i){return arguments.length?(t=i==null?Mu:typeof i=="function"?i:ja(Array.from(i)),r):t},r.offset=function(i){return arguments.length?(n=i??md,r):n},r}function xW(e,t){if((s=e.length)>0){for(var n,s,r=0,i=e[0].length,o;r<i;++r){for(o=n=0;n<s;++n)o+=e[n][r][1]||0;if(o)for(n=0;n<s;++n)e[n][r][1]/=o}md(e,t)}}function qpe(e,t){if((c=e.length)>0)for(var n,s=0,r,i,o,l,c,u=e[t[0]].length;s<u;++s)for(o=l=0,n=0;n<c;++n)(i=(r=e[t[n]][s])[1]-r[0])>0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=l,r[0]=l+=i):(r[0]=0,r[1]=i)}function yW(e,t){if((r=e.length)>0){for(var n=0,s=e[t[0]],r,i=s.length;n<i;++n){for(var o=0,l=0;o<r;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}md(e,t)}}function bW(e,t){if(!(!((o=e.length)>0)||!((i=(r=e[t[0]]).length)>0))){for(var n=0,s=1,r,i,o;s<i;++s){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[s][1]||0,p=d[s-1][1]||0,x=(h-p)/2,v=0;v<l;++v){var j=e[t[v]],b=j[s][1]||0,N=j[s-1][1]||0;x+=b-N}c+=h,u+=x*h}r[s-1][1]+=r[s-1][0]=n,c&&(n-=u/c)}r[s-1][1]+=r[s-1][0]=n,md(e,t)}}function vW(e){var t=e.map(Gpe);return Mu(e).sort(function(n,s){return t[n]-t[s]})}function Gpe(e){for(var t=-1,n=0,s=e.length,r,i=-1/0;++t<s;)(r=+e[t][1])>i&&(i=r,n=t);return n}function wW(e){var t=e.map(jW);return Mu(e).sort(function(n,s){return t[n]-t[s]})}function jW(e){for(var t=0,n=-1,s=e.length,r;++n<s;)(r=+e[n][1])&&(t+=r);return t}function Wpe(e){return wW(e).reverse()}function Vpe(e){var t=e.length,n,s,r=e.map(jW),i=vW(e),o=0,l=0,c=[],u=[];for(n=0;n<t;++n)s=i[n],o<l?(o+=r[s],c.push(s)):(l+=r[s],u.push(s));return u.reverse().concat(c)}function Ype(e){return Mu(e).reverse()}const S2={appearance:vW,ascending:wW,descending:Wpe,insideOut:Vpe,none:Mu,reverse:Ype},_2={expand:xW,diverging:qpe,none:md,silhouette:yW,wiggle:bW},NW=e=>{const{series:t,seriesOrder:n,defaultStrategy:s}=e,r=[],i={};return n.forEach(o=>{const{stack:l,stackOrder:c,stackOffset:u}=t[o];l===void 0?r.push({ids:[o],stackingOrder:S2.none,stackingOffset:_2.none}):i[l]===void 0?(i[l]=r.length,r.push({ids:[o],stackingOrder:S2[c??s?.stackOrder??"none"],stackingOffset:_2[u??s?.stackOffset??"diverging"]})):(r[i[l]].ids.push(o),c!==void 0&&(r[i[l]].stackingOrder=S2[c]),u!==void 0&&(r[i[l]].stackingOffset=_2[u]))}),r},Qpe=e=>e==null?"":e.toLocaleString(),Kpe=(e,t)=>{const{seriesOrder:n,series:s}=e,r=NW(e),i=t??[];n.forEach(l=>{const c=s[l].data;if(c!==void 0)c.forEach((u,d)=>{i.length<=d?i.push({[l]:u}):i[d][l]=u});else if(t===void 0)throw new Error([`MUI X Charts: bar series with id='${l}' has no data.`,"Either provide a data property to the series or use the dataset prop."].join(`
`))});const o={};return r.forEach(l=>{const{ids:c,stackingOffset:u,stackingOrder:d}=l,h=$4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(d).offset(u)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=et({layout:"vertical",labelMarkType:"square",minBarSize:0,valueFormatter:s[p].valueFormatter??Qpe},s[p],{data:v?t.map(j=>{const b=j[v];return typeof b=="number"?b:null}):s[p].data,stackedData:h[x].map(([j,b])=>[j,b])})})}),{seriesOrder:n,stackingGroups:r,series:o}};function Qi(e,t){return typeof e=="function"?e(t):e}const Xpe=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Qi(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])};function R4(e){return e.colorGetter?e.colorGetter:()=>e.color}const Zpe=(e,t,n)=>{const s=e.layout==="vertical",r=s?t?.colorScale:n?.colorScale,i=s?n?.colorScale:t?.colorScale,o=s?t?.data:n?.data,l=R4(e);return i?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):i(u);return d===null?l({value:u,dataIndex:c}):d}:r&&o?c=>{if(c===void 0)return e.color;const u=o[c],d=u===null?l({value:u,dataIndex:c}):r(u);return d===null?l({value:u,dataIndex:c}):d}:c=>{if(c===void 0)return e.color;const u=e.data[c];return l({value:u,dataIndex:c})}},Jpe=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Qi(t.label,"tooltip"),i=t.data[s.dataIndex];if(i==null)return null;const o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},exe=e=>Object.values(e).map(t=>t.layout==="horizontal"?{direction:"y",axisId:t.yAxisId}:{direction:"x",axisId:t.xAxisId});function Ka(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the charts context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.store}function Ei(){const e=Ka();return qt(e,vr)}function uN(){const e=Ka();return qt(e,Nme)}function z4(e){return aG.getTypes().has(e)}const txe=(e,t,n,s,r,i,o)=>{const l=s==="rotation"?r[t].rotationExtremumGetter:r[t].radiusExtremumGetter,c=o[t]?.series??{},[u,d]=l?.({series:c,axis:n,axisIndex:i,isDefaultAxis:i===0})??[1/0,-1/0],[h,p]=e;return[Math.min(u,h),Math.max(d,p)]},axe=(e,t,n,s,r)=>{const o=Object.keys(n).filter(z4).reduce((l,c)=>txe(l,c,e,t,n,s,r),[1/0,-1/0]);return Number.isNaN(o[0])||Number.isNaN(o[1])?[1/0,-1/0]:o},Xc=(e,t)=>e===void 0?t:Math.PI*e/180,nxe=(e,t,n,s)=>{const r=new Set;return Object.keys(t).filter(z4).forEach(o=>{const l=n[o]?.series??{},c=t[o].axisTooltipGetter?.(l);c!==void 0&&c.forEach(({axisId:u,direction:d})=>{d===e&&r.add(u??s)})}),r};function sxe(e,t,n){if(t==="rotation"){if(n.scaleType==="point"){const s=[Xc(n.startAngle,0),Xc(n.endAngle,2*Math.PI)],r=s[1]-s[0];return r>Math.PI*2-.1&&(s[1]-=r/n.data.length),s}return[Xc(n.startAngle,0),Xc(n.endAngle,2*Math.PI)]}return[0,Math.min(e.height,e.width)/2]}const rxe=.2,ixe=.1;function CW({drawingArea:e,formattedSeries:t,axis:n,seriesConfig:s,axisDirection:r}){if(n===void 0)return{axis:{},axisIds:[]};const i=nxe(r,s,t,n[0].id),o={};return n.forEach((l,c)=>{const u=l,d=sxe(e,r,u),[h,p]=axe(u,r,s,c,t),x=!u.ignoreTooltip&&i.has(u.id),v=u.data??[];if(Zu(u)){const M=u.categoryGapRatio??rxe,O=u.barGapRatio??ixe;if(o[u.id]=et({offset:0,categoryGapRatio:M,barGapRatio:O,triggerTooltip:x},u,{data:v,scale:Xj(u.data,d).paddingInner(M).paddingOuter(M/2),tickNumber:u.data.length,colorScale:u.colorMap&&(u.colorMap.type==="ordinal"?Df(et({values:u.data},u.colorMap)):vf(u.colorMap))}),_k(u.data)){const I=Ak(u.data,d,u.tickNumber);o[u.id].valueFormatter=u.valueFormatter??I}}if(Ju(u)&&(o[u.id]=et({offset:0,triggerTooltip:x},u,{data:v,scale:eG(u.data,d),tickNumber:u.data.length,colorScale:u.colorMap&&(u.colorMap.type==="ordinal"?Df(et({values:u.data},u.colorMap)):vf(u.colorMap))}),_k(u.data))){const M=Ak(u.data,d,u.tickNumber);o[u.id].valueFormatter=u.valueFormatter??M}if(!Qme(u))return;const j=u.scaleType??"linear",b=u.domainLimit??"nice",N=[u.min??h,u.max??p];if(typeof b=="function"){const{min:M,max:O}=b(h,p);N[0]=M,N[1]=O}const w=Zq(u,N,A4(Math.abs(d[1]-d[0]))),S=Jq(w,d),_=Zj(j,N,d),k=b==="nice"?_.nice(w):_,[T,A]=k.domain(),E=[u.min??T,u.max??A];o[u.id]=et({offset:0,triggerTooltip:x},u,{data:v,scaleType:j,scale:k.domain(E),tickNumber:S,colorScale:u.colorMap&&vf(u.colorMap)})}),{axis:o,axisIds:n.map(({id:l})=>l)}}const SW=e=>e.polarAxis,_W=Et(SW,e=>e?.rotation),oxe=Et(SW,e=>e?.radius),nm=Et(_W,vr,yn,Gr,(e,t,n,s)=>CW({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"rotation"}));Et(oxe,vr,yn,Gr,(e,t,n,s)=>CW({drawingArea:t,formattedSeries:n,axis:e,seriesConfig:s,axisDirection:"radius"}));const lxe=Et(vr,e=>({cx:e.left+e.width/2,cy:e.top+e.height/2})),cxe=e=>(t,n)=>Math.atan2(t-e.cx,e.cy-n);function mN(e){return(e%360+360)%360}const A2=2*Math.PI;function dxe(e){return(e%A2+A2)%A2}function z6(e,t){const{scale:n,data:s,reverse:r}=e;if(!vs(n))throw new Error("MUI X Charts: getAxisValue is not implemented for polare continuous axes.");if(!s)return-1;const i=dxe(t-Math.min(...n.range())),o=n.bandwidth()===0?Math.floor((i+n.step()/2)/n.step())%s.length:Math.floor(i/n.step());return o<0||o>=s.length?-1:r?s.length-1-o:o}function wr(){const e=Ka(),{axis:t,axisIds:n}=qt(e,Xs);return{xAxis:t,xAxisIds:n}}function jr(){const e=Ka(),{axis:t,axisIds:n}=qt(e,Zs);return{yAxis:t,yAxisIds:n}}function uxe(e){const t=Ka(),{axis:n,axisIds:s}=qt(t,Xs),r=s[0];return n[r]}function mxe(e){const t=Ka(),{axis:n,axisIds:s}=qt(t,Zs),r=s[0];return n[r]}function AW(){const e=Ka(),{axis:t,axisIds:n}=qt(e,nm);return{rotationAxis:t,rotationAxisIds:n}}function fxe(e){const t=Ka(),{axis:n,axisIds:s}=qt(t,nm),r=s[0];return n[r]}function rh(e){if(vs(e))return n=>(e(n)??0)+e.bandwidth()/2;const t=e.domain();return t[0]===t[1]?n=>n===t[0]?e(n):NaN:n=>e(n)}function F4(){const e=Ka(),{axis:t,axisIds:n}=qt(e,jpe)??{axis:{},axisIds:[]};return{zAxis:t,zAxisIds:n}}function U4(){const e=Wr();if(!e)throw new Error(["MUI X Charts: Could not find the svg ref context.","It looks like you rendered your component outside of a ChartContainer parent component."].join(`
`));return e.svgRef}function fN(){const e=Ka();return qt(e,yn)}const hxe=Et(yn,(e,t)=>e[t]);$n(yn,(e,t,n)=>{if(!n||Array.isArray(n)&&n.length===0)return e[t]?.seriesOrder?.map(r=>e[t]?.series[r])??[];if(!Array.isArray(n))return e[t]?.series?.[n];const s=[];for(const r of n){const i=e[t]?.series?.[r];i&&s.push(i)}return s});const gxe=e=>{const t=Ka();return qt(t,hxe,e)};function Ox(){return gxe("line")}function pxe(){return!1}function TW(e,t){return!e||!t?pxe:function(s){return s?e.highlight==="series"?s.seriesId===t.seriesId:e.highlight==="item"?s.dataIndex===t.dataIndex&&s.seriesId===t.seriesId:!1:!1}}function xxe(){return!1}function kW(e,t){return!e||!t?xxe:function(s){return s?e.fade==="series"?s.seriesId===t.seriesId&&s.dataIndex!==t.dataIndex:e.fade==="global"?s.seriesId!==t.seriesId||s.dataIndex!==t.dataIndex:!1:!1}}function B4(e,t,n){return e?.highlight==="series"&&t?.seriesId===n}function yxe(e,t,n){return B4(e,t,n)?!1:e?.fade==="global"&&t!=null||e?.fade==="series"&&t?.seriesId===n}function EW(e,t,n){return e?.highlight==="item"&&t?.seriesId===n?t.dataIndex:null}function bxe(e,t,n){return B4(e,t,n)||EW(e,t,n)===t?.dataIndex?null:(e?.fade==="series"||e?.fade==="global")&&t?.seriesId===n?t.dataIndex:null}const vxe=e=>e.highlight,wxe=Et(yn,e=>{const t=new Map;return Object.keys(e).forEach(n=>{const s=e[n];s?.seriesOrder?.forEach(r=>{const i=s?.series[r];t.set(r,i?.highlightScope)})}),t}),sc=$n(vxe,SG,function(t,n){return t.isControlled||t.lastUpdate==="pointer"?t.item:n}),Ad=Et(wxe,sc,function(t,n){if(!n)return null;const s=t.get(n.seriesId);return s===void 0?null:s}),jxe=Et(Ad,sc,TW),Nxe=Et(Ad,sc,kW),Cxe=Et(Ad,sc,function(t,n,s){return TW(t,n)(s)});Et(Ad,sc,B4);Et(Ad,sc,yxe);Et(Ad,sc,bxe);Et(Ad,sc,EW);const Sxe=Et(Ad,sc,function(t,n,s){return kW(t,n)(s)});function LW(e){const t=Ka(),n=qt(t,Cxe,e),s=qt(t,Sxe,e);return{isHighlighted:n,isFaded:!n&&s}}function _xe(){const e=Ka(),t=qt(e,jxe),n=qt(e,Nxe);return{isHighlighted:t,isFaded:n}}function Axe(e,t){return Object.keys(e).flatMap(n=>{const s=t[n].legendGetter;return s===void 0?[]:s(e[n])})}function Txe(){const e=fN(),t=Ka(),n=qt(t,Gr);return{items:Axe(e,n)}}function H4(){const e=uN();return f.useCallback(t=>`${e}-gradient-${t}`,[e])}function kxe(){const e=uN();return f.useCallback(t=>`${e}-gradient-${t}-object-bound`,[e])}var T2,F6;function Exe(){if(F6)return T2;F6=1;var e=4,t=.001,n=1e-7,s=10,r=11,i=1/(r-1),o=typeof Float32Array=="function";function l(j,b){return 1-3*b+3*j}function c(j,b){return 3*b-6*j}function u(j){return 3*j}function d(j,b,N){return((l(b,N)*j+c(b,N))*j+u(b))*j}function h(j,b,N){return 3*l(b,N)*j*j+2*c(b,N)*j+u(b)}function p(j,b,N,w,S){var _,k,T=0;do k=b+(N-b)/2,_=d(k,w,S)-j,_>0?N=k:b=k;while(Math.abs(_)>n&&++T<s);return k}function x(j,b,N,w){for(var S=0;S<e;++S){var _=h(b,N,w);if(_===0)return b;var k=d(b,N,w)-j;b-=k/_}return b}function v(j){return j}return T2=function(b,N,w,S){if(!(0<=b&&b<=1&&0<=w&&w<=1))throw new Error("bezier x values must be in [0, 1] range");if(b===N&&w===S)return v;for(var _=o?new Float32Array(r):new Array(r),k=0;k<r;++k)_[k]=d(k*i,b,w);function T(A){for(var E=0,M=1,O=r-1;M!==O&&_[M]<=A;++M)E+=i;--M;var I=(A-_[M])/(_[M+1]-_[M]),D=E+I*i,H=h(D,b,w);return H>=t?x(A,D,b,w):H===0?D:p(A,E,E+i,b,w)}return function(E){return E===0?0:E===1?1:d(T(E),N,S)}},T2}var Lxe=Exe();const Pxe=eo(Lxe),hN=300,q4="cubic-bezier(0.66, 0, 0.34, 1)",Dxe=Pxe(.66,0,.34,1);var Mf=0,qg=0,bg=0,PW=1e3,Yv,Gg,Qv=0,Iu=0,gN=0,kp=typeof performance=="object"&&performance.now?performance:Date,DW=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function G4(){return Iu||(DW(Oxe),Iu=kp.now()+gN)}function Oxe(){Iu=0}function Kv(){this._call=this._time=this._next=null}Kv.prototype=OW.prototype={constructor:Kv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?G4():+n)+(t==null?0:+t),!this._next&&Gg!==this&&(Gg?Gg._next=this:Yv=this,Gg=this),this._call=e,this._time=n,Ok()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ok())}};function OW(e,t,n){var s=new Kv;return s.restart(e,t,n),s}function Mxe(){G4(),++Mf;for(var e=Yv,t;e;)(t=Iu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mf}function U6(){Iu=(Qv=kp.now())+gN,Mf=qg=0;try{Mxe()}finally{Mf=0,$xe(),Iu=0}}function Ixe(){var e=kp.now(),t=e-Qv;t>PW&&(gN-=t,Qv=e)}function $xe(){for(var e,t=Yv,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Yv=n);Gg=e,Ok(s)}function Ok(e){if(!Mf){qg&&(qg=clearTimeout(qg));var t=e-Iu;t>24?(e<1/0&&(qg=setTimeout(U6,e-kp.now()-gN)),bg&&(bg=clearInterval(bg))):(bg||(Qv=kp.now(),bg=setInterval(Ixe,PW)),Mf=1,DW(U6))}}function Rxe(e,t,n){var s=new Kv;return t=t==null?0:+t,s.restart(r=>{s.stop(),e(r+t)},t,n),s}class zxe{elapsed=0;timer=null;constructor(t,n,s){this.duration=t,this.easingFn=n,this.onTickCallback=s,this.resume()}get running(){return this.timer!==null}timerCallback(t){this.elapsed=Math.min(t,this.duration);const n=this.duration===0?1:this.elapsed/this.duration,s=this.easingFn(n);this.onTickCallback(s),this.elapsed>=this.duration&&this.stop()}resume(){if(this.running||this.elapsed>=this.duration)return this;const t=G4()-this.elapsed;return this.timer=OW(n=>this.timerCallback(n),0,t),this}stop(){return this.running?(this.timer&&(this.timer.stop(),this.timer=null),this):this}finish(){return this.stop(),Rxe(()=>this.timerCallback(this.duration)),this}}function Fxe(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r+=1){const i=n[r];if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1}return!0}function Uxe(e,{createInterpolator:t,applyProps:n,skip:s,initialProps:r=e}){const i=f.useRef(r),o=f.useRef(null),l=f.useRef(null),c=f.useRef(e);is(()=>{c.current=e},[e]),is(()=>{s&&(o.current?.finish(),o.current=null,l.current=null,i.current=e)},[e,s]);const u=f.useCallback(h=>{const p=i.current,x=t(p,e);o.current=new zxe(hN,Dxe,v=>{const j=x(v);i.current=j,n(h,j)})},[n,t,e]);return[f.useCallback(h=>{if(h===null){o.current?.stop();return}const p=l.current;if(p===h){if(Fxe(c.current,e)){o.current?.resume();return}o.current?.stop()}p&&o.current?.stop(),l.current=h,(o.current||!s)&&u(h)},[u,e,s]),i.current]}function MW(e,{createInterpolator:t,transformProps:n,applyProps:s,skip:r,initialProps:i=e,ref:o}){const l=n??(h=>h),[c,u]=Uxe(e,{initialProps:i,createInterpolator:t,applyProps:(h,p)=>s(h,l(p)),skip:r}),d=n(r?e:u);return et({},d,{ref:Fo(c,o)})}function Bxe(e){return MW({d:e.d},{createInterpolator:(t,n)=>{const s=r4(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),transformProps:t=>t,skip:e.skipAnimation,ref:e.ref})}function Hxe(e){return MW({d:e.d},{createInterpolator:(t,n)=>{const s=r4(t.d,n.d);return r=>({d:s(r)})},applyProps:(t,{d:n})=>t.setAttribute("d",n),skip:e.skipAnimation,transformProps:t=>t,ref:e.ref})}function qxe(){return Wr().chartRootRef}const Gxe={"image/png":"PNG","image/jpeg":"JPEG","image/webp":"WebP"},Wxe=e=>({components:{MuiChartsLocalizationProvider:{defaultProps:{localeText:et({},e)}}}}),IW={loading:"Loading data",noData:"No data to display",zoomIn:"Zoom in",zoomOut:"Zoom out",toolbarExport:"Export",toolbarExportPrint:"Print",toolbarExportImage:e=>`Export as ${Gxe[e]??e}`,chartTypeBar:"Bar",chartTypeColumn:"Column",chartTypeLine:"Line",chartTypeArea:"Area",chartTypePie:"Pie",chartPaletteLabel:"Color palette",chartPaletteNameRainbowSurge:"Rainbow Surge",chartPaletteNameBlueberryTwilight:"Blueberry Twilight",chartPaletteNameMangoFusion:"Mango Fusion",chartPaletteNameCheerfulFiesta:"Cheerful Fiesta",chartPaletteNameStrawberrySky:"Strawberry Sky",chartPaletteNameBlue:"Blue",chartPaletteNameGreen:"Green",chartPaletteNamePurple:"Purple",chartPaletteNameRed:"Red",chartPaletteNameOrange:"Orange",chartPaletteNameYellow:"Yellow",chartPaletteNameCyan:"Cyan",chartPaletteNamePink:"Pink",chartConfigurationSectionChart:"Chart",chartConfigurationSectionColumns:"Columns",chartConfigurationSectionBars:"Bars",chartConfigurationSectionAxes:"Axes",chartConfigurationGrid:"Grid",chartConfigurationBorderRadius:"Border radius",chartConfigurationCategoryGapRatio:"Category gap ratio",chartConfigurationBarGapRatio:"Series gap ratio",chartConfigurationStacked:"Stacked",chartConfigurationShowToolbar:"Show toolbar",chartConfigurationSkipAnimation:"Skip animation",chartConfigurationInnerRadius:"Inner radius",chartConfigurationOuterRadius:"Outer radius",chartConfigurationColors:"Colors",chartConfigurationHideLegend:"Hide legend",chartConfigurationShowMark:"Show mark",chartConfigurationHeight:"Height",chartConfigurationWidth:"Width",chartConfigurationSeriesGap:"Series gap",chartConfigurationTickPlacement:"Tick placement",chartConfigurationTickLabelPlacement:"Tick label placement",chartConfigurationCategoriesAxisLabel:"Categories axis label",chartConfigurationSeriesAxisLabel:"Series axis label",chartConfigurationXAxisPosition:"X-axis position",chartConfigurationYAxisPosition:"Y-axis position",chartConfigurationSeriesAxisReverse:"Reverse series axis",chartConfigurationTooltipPlacement:"Placement",chartConfigurationTooltipTrigger:"Trigger",chartConfigurationLegendPosition:"Position",chartConfigurationLegendDirection:"Direction",chartConfigurationBarLabels:"Bar labels",chartConfigurationColumnLabels:"Column labels",chartConfigurationInterpolation:"Interpolation",chartConfigurationSectionTooltip:"Tooltip",chartConfigurationSectionLegend:"Legend",chartConfigurationSectionLines:"Lines",chartConfigurationSectionAreas:"Areas",chartConfigurationSectionArcs:"Arcs",chartConfigurationPaddingAngle:"Padding angle",chartConfigurationCornerRadius:"Corner radius",chartConfigurationArcLabels:"Arc labels",chartConfigurationStartAngle:"Start angle",chartConfigurationEndAngle:"End angle",chartConfigurationPieTooltipTrigger:"Trigger",chartConfigurationPieLegendPosition:"Position",chartConfigurationPieLegendDirection:"Direction",chartConfigurationOptionNone:"None",chartConfigurationOptionValue:"Value",chartConfigurationOptionAuto:"Auto",chartConfigurationOptionTop:"Top",chartConfigurationOptionTopLeft:"Top Left",chartConfigurationOptionTopRight:"Top Right",chartConfigurationOptionBottom:"Bottom",chartConfigurationOptionBottomLeft:"Bottom Left",chartConfigurationOptionBottomRight:"Bottom Right",chartConfigurationOptionLeft:"Left",chartConfigurationOptionRight:"Right",chartConfigurationOptionAxis:"Axis",chartConfigurationOptionItem:"Item",chartConfigurationOptionHorizontal:"Horizontal",chartConfigurationOptionVertical:"Vertical",chartConfigurationOptionBoth:"Both",chartConfigurationOptionStart:"Start",chartConfigurationOptionMiddle:"Middle",chartConfigurationOptionEnd:"End",chartConfigurationOptionExtremities:"Extremities",chartConfigurationOptionTick:"Tick",chartConfigurationOptionMonotoneX:"Monotone X",chartConfigurationOptionMonotoneY:"Monotone Y",chartConfigurationOptionCatmullRom:"Catmull-Rom",chartConfigurationOptionLinear:"Linear",chartConfigurationOptionNatural:"Natural",chartConfigurationOptionStep:"Step",chartConfigurationOptionStepBefore:"Step Before",chartConfigurationOptionStepAfter:"Step After",chartConfigurationOptionBumpX:"Bump X",chartConfigurationOptionBumpY:"Bump Y"},Vxe=IW;Wxe(IW);const Yxe=["localeText"],Mk=f.createContext(null);function Qxe(e){const{localeText:t}=e,n=xa(e,Yxe),{localeText:s}=f.useContext(Mk)??{localeText:void 0},r=Ti({props:n,name:"MuiChartsLocalizationProvider"}),{children:i,localeText:o}=r,l=f.useMemo(()=>et({},Vxe,o,s,t),[o,s,t]),c=f.useMemo(()=>({localeText:l}),[l]);return a.jsx(Mk.Provider,{value:c,children:i})}const $W=()=>{const e=f.useContext(Mk);if(e===null)throw new Error(["MUI X Charts: Can not find the charts localization context.","It looks like you forgot to wrap your component in ChartsLocalizationProvider.","This can also happen if you are bundling multiple versions of the `@mui/x-charts` package"].join(`
`));return e};function Kxe({bandWidth:e,numberOfGroups:t,gapRatio:n}){if(n===0)return{barWidth:e/t,offset:0};const s=e/(t+(t-1)*n),r=n*s;return{barWidth:s,offset:r}}function Xxe(e,t,n){const s=e&&t>0,r=!e&&t<0,i=s||r;return n?!i:i}function Zxe(e){const{verticalLayout:t,xAxisConfig:n,yAxisConfig:s,series:r,dataIndex:i,numberOfGroups:o,groupIndex:l}=e,c=t?n:s,u=(t?s.reverse:n.reverse)??!1,{barWidth:d,offset:h}=Kxe({bandWidth:c.scale.bandwidth(),numberOfGroups:o,gapRatio:c.barGapRatio}),p=l*(d+h),x=n.scale,v=s.scale,j=c.data[i],b=r.data[i];if(b==null)return null;const w=r.stackedData[i].map(A=>t?v(A):x(A)),S=Math.round(Math.min(...w)),_=Math.round(Math.max(...w)),k=b===0?0:Math.max(r.minBarSize,_-S),T=Xxe(t,b,u)?_-k:S;return{x:t?x(j)+p:T,y:t?T:v(j)+p,height:t?k:d,width:t?d:k}}const Jxe=e=>{const{series:t,identifier:n,axesConfig:s,placement:r}=e;if(!n||n.dataIndex===void 0)return null;const i=t.bar?.series[n.seriesId];if(t.bar==null||i==null||s.x===void 0||s.y===void 0)return null;const o=Zxe({verticalLayout:i.layout==="vertical",xAxisConfig:s.x,yAxisConfig:s.y,series:i,dataIndex:n.dataIndex,numberOfGroups:t.bar.stackingGroups.length,groupIndex:t.bar.stackingGroups.findIndex(h=>h.ids.includes(i.id))});if(o==null)return null;const{x:l,y:c,width:u,height:d}=o;switch(r){case"right":return{x:l+u,y:c+d/2};case"bottom":return{x:l+u/2,y:c+d};case"left":return{x:l,y:c+d/2};default:return{x:l+u/2,y:c}}},e0e=(e,t,n)=>et({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),t0e={seriesProcessor:Kpe,colorProcessor:Zpe,legendGetter:Xpe,tooltipGetter:Jpe,tooltipItemPositionGetter:Jxe,axisTooltipGetter:exe,xExtremumGetter:Npe,yExtremumGetter:Cpe,getSeriesWithDefaultValues:e0e},a0e=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].xAxisId;if(!(c===n.id||c===void 0&&s))continue;const u=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let h=0;h<d.length;h+=1){const p=d[h];u&&!u(p,h)||p.x!==null&&(p.x<i&&(i=p.x),p.x>o&&(o=p.x))}}return[i,o]},n0e=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;let i=1/0,o=-1/0;for(const l in t){if(!Object.hasOwn(t,l))continue;const c=t[l].yAxisId;if(!(c===n.id||c===void 0&&s))continue;const u=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[l].xAxisId,seriesYAxisId:t[l].yAxisId}),d=t[l].data??[];for(let h=0;h<d.length;h+=1){const p=d[h];u&&!u(p,h)||p.y!==null&&(p.y<i&&(i=p.y),p.y>o&&(o=p.y))}}return[i,o]},s0e=({series:e,seriesOrder:t},n)=>({series:Object.fromEntries(Object.entries(e).map(([r,i])=>{const o=i?.datasetKeys,l=["x","y"].filter(u=>typeof o?.[u]!="string");if(i?.datasetKeys&&l.length>0)throw new Error([`MUI X Charts: scatter series with id='${r}' has incomplete datasetKeys.`,`Properties ${l.map(u=>`"${u}"`).join(", ")} are missing.`].join(`
`));const c=o?n?.map(u=>({x:u[o.x]??null,y:u[o.y]??null,z:o.z&&u[o.z],id:o.id&&u[o.id]}))??[]:i.data??[];return[r,et({labelMarkType:"circle",markerSize:4},i,{preview:et({markerSize:1},i?.preview),data:c,valueFormatter:i.valueFormatter??(u=>u&&`(${u.x}, ${u.y})`)})]})),seriesOrder:t}),r0e=(e,t,n,s)=>{const r=s?.colorScale,i=n?.colorScale,o=t?.colorScale,l=R4(e);return r?c=>{if(c===void 0)return e.color;if(s?.data?.[c]!==void 0){const h=r(s?.data?.[c]);if(h!==null)return h}const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):r(u.z);return d===null?l({value:u,dataIndex:c}):d}:i?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):i(u.y);return d===null?l({value:u,dataIndex:c}):d}:o?c=>{if(c===void 0)return e.color;const u=e.data[c],d=u===null?l({value:u,dataIndex:c}):o(u.x);return d===null?l({value:u,dataIndex:c}):d}:c=>{if(c===void 0)return e.color;const u=e.data[c];return l({value:u,dataIndex:c})}},i0e=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Qi(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},o0e=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Qi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},l0e=(e,t,n)=>et({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),c0e=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.scatter?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=r.data?.[n.dataIndex].x,o=r.data?.[n.dataIndex].y;return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},d0e={seriesProcessor:s0e,colorProcessor:r0e,legendGetter:i0e,tooltipGetter:o0e,tooltipItemPositionGetter:c0e,xExtremumGetter:a0e,yExtremumGetter:n0e,getSeriesWithDefaultValues:l0e},u0e=e=>{const{axis:t}=e;return Bv(t.data??[])};function m0e(e,t,n,s){return n.reduce((r,i,o)=>{if(t[o]===null)return r;const[l,c]=e(i);return s&&(!s({y:l,x:null},o)||!s({y:c,x:null},o))?r:[Math.min(l,c,r[0]),Math.max(l,c,r[1])]},[1/0,-1/0])}const f0e=e=>{const{series:t,axis:n,isDefaultAxis:s,getFilters:r}=e;return Object.keys(t).filter(i=>{const o=t[i].yAxisId;return o===n.id||s&&o===void 0}).reduce((i,o)=>{const{area:l,stackedData:c,data:u}=t[o],d=l!==void 0,h=r?.({currentAxisId:n.id,isDefaultAxis:s,seriesXAxisId:t[o].xAxisId,seriesYAxisId:t[o].yAxisId}),p=d&&n.scaleType!=="log"&&typeof t[o].baseline!="string"?b=>b:b=>[b[1],b[1]],x=m0e(p,u,c,h),[v,j]=x;return[Math.min(v,i[0]),Math.max(j,i[1])]},[1/0,-1/0])};function h0e(e,t){const n={};return Object.keys(e).forEach(s=>{n[s]=et({},e[s],{valueFormatter:e[s].valueFormatter??t})}),n}const g0e=(e,t)=>{const{seriesOrder:n,series:s}=e,r=NW(et({},e,{defaultStrategy:{stackOffset:"none"}})),i=t??[];n.forEach(l=>{const c=s[l].data;c!==void 0&&c.forEach((u,d)=>{i.length<=d?i.push({[l]:u}):i[d][l]=u})});const o={};return r.forEach(l=>{const{ids:c,stackingOrder:u,stackingOffset:d}=l,h=$4().keys(c.map(p=>{const x=s[p].dataKey;return s[p].data===void 0&&x!==void 0?x:p})).value((p,x)=>p[x]??0).order(u).offset(d)(i);c.forEach((p,x)=>{const v=s[p].dataKey;o[p]=et({labelMarkType:"line"},s[p],{data:v?t.map(j=>{const b=j[v];return typeof b=="number"?b:null}):s[p].data,stackedData:h[x].map(([j,b])=>[j,b])})})}),{seriesOrder:n,stackingGroups:r,series:h0e(o,l=>l==null?"":l.toLocaleString())}},W4=(e,t,n)=>{const s=n?.colorScale,r=t?.colorScale,i=R4(e);return s?o=>{if(o===void 0)return e.color;const l=e.data[o],c=l===null?i({value:l,dataIndex:o}):s(l);return c===null?i({value:l,dataIndex:o}):c}:r?o=>{if(o===void 0)return e.color;const l=t.data?.[o],c=l===null?i({value:l,dataIndex:o}):r(l);return c===null?i({value:l,dataIndex:o}):c}:o=>{if(o===void 0)return e.color;const l=e.data[o];return i({value:l,dataIndex:o})}},p0e=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>{const i=Qi(n[r].label,"legend");return i===void 0||s.push({markType:n[r].labelMarkType,id:r,seriesId:r,color:n[r].color,label:i}),s},[])},x0e=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=Qi(t.label,"tooltip"),i=t.data[s.dataIndex],o=t.valueFormatter(i,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:r,value:i,formattedValue:o,markType:t.labelMarkType}},y0e=e=>Object.values(e).map(t=>({direction:"x",axisId:t.xAxisId})),b0e=(e,t,n)=>et({},e,{id:e.id??`auto-generated-id-${t}`,color:e.color??n[t%n.length]}),v0e=e=>{const{series:t,identifier:n,axesConfig:s}=e;if(!n||n.dataIndex===void 0)return null;const r=t.line?.series[n.seriesId];if(r==null||s.x===void 0||s.y===void 0)return null;const i=s.x.data?.[n.dataIndex],o=r.data[n.dataIndex];return i==null||o==null?null:{x:s.x.scale(i),y:s.y.scale(o)}},w0e={colorProcessor:W4,seriesProcessor:g0e,legendGetter:p0e,tooltipGetter:x0e,tooltipItemPositionGetter:v0e,axisTooltipGetter:y0e,xExtremumGetter:u0e,yExtremumGetter:f0e,getSeriesWithDefaultValues:b0e},j0e=(e="none")=>{if(typeof e=="function")return e;switch(e){case"none":return null;case"desc":return(t,n)=>n-t;case"asc":return(t,n)=>t-n;default:return null}},N0e=e=>{const{seriesOrder:t,series:n}=e,s={};return t.forEach(r=>{const i=Epe().startAngle(Xc(n[r].startAngle??0)).endAngle(Xc(n[r].endAngle??360)).padAngle(Xc(n[r].paddingAngle??0)).sortValues(j0e(n[r].sortingValues??"none"))(n[r].data.map(o=>o.value));s[r]=et({labelMarkType:"circle",valueFormatter:o=>o.value.toLocaleString()},n[r],{data:n[r].data.map((o,l)=>et({},o,{id:o.id??`auto-generated-pie-id-${r}-${l}`},i[l])).map((o,l)=>et({labelMarkType:"circle"},o,{formattedValue:n[r].valueFormatter?.(et({},o,{label:Qi(o.label,"arc")}),{dataIndex:l})??o.value.toLocaleString()}))})}),{seriesOrder:t,series:s}},C0e=e=>t=>e.data[t].color,S0e=e=>{const{seriesOrder:t,series:n}=e;return t.reduce((s,r)=>(n[r].data.forEach((i,o)=>{const l=Qi(i.label,"legend");l!==void 0&&s.push({markType:i.labelMarkType??n[r].labelMarkType,id:i.id??o,seriesId:r,color:i.color,label:l,itemId:i.id??o})}),s),[])},_0e=e=>{const{series:t,getColor:n,identifier:s}=e;if(!s||s.dataIndex===void 0)return null;const r=t.data[s.dataIndex];if(r==null)return null;const i=Qi(r.label,"tooltip"),o=et({},r,{label:i}),l=t.valueFormatter(o,{dataIndex:s.dataIndex});return{identifier:s,color:n(s.dataIndex),label:i,value:o,formattedValue:l,markType:r.labelMarkType??t.labelMarkType}},A0e=(e,t,n)=>et({},e,{id:e.id??`auto-generated-id-${t}`,data:e.data.map((s,r)=>et({},s,{color:s.color??n[r%n.length]}))});function Xv(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const n=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(n))return n*t/100}if(e.endsWith("px")){const n=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(n))return n}throw new Error(`MUI X Charts: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}function T0e(e,t){const{height:n,width:s}=t,{cx:r,cy:i}=e,o=Math.min(s,n)/2,l=Xv(r??"50%",s),c=Xv(i??"50%",n);return{cx:l,cy:c,availableRadius:o}}const k0e=e=>{const{series:t,drawingArea:n,identifier:s,placement:r}=e;if(!s||s.dataIndex===void 0)return null;const i=t.pie?.series[s.seriesId];if(i==null)return null;const{cx:o,cy:l,availableRadius:c}=T0e({cx:i.cx,cy:i.cy},n),{data:u,innerRadius:d=0,outerRadius:h}=i,p=Math.max(0,Xv(d??0,c)),x=Math.max(0,Xv(h??c,c)),v=u[s.dataIndex];if(!v)return null;const j=[[p,v.startAngle],[p,v.endAngle],[x,v.startAngle],[x,v.endAngle]].map(([_,k])=>({x:o+_*Math.sin(k),y:l-_*Math.cos(k)})),[b,N]=Bv(j.map(_=>_.x)),[w,S]=Bv(j.map(_=>_.y));switch(r){case"bottom":return{x:(N+b)/2,y:S};case"left":return{x:b,y:(S+w)/2};case"right":return{x:N,y:(S+w)/2};default:return{x:(N+b)/2,y:w}}},E0e={colorProcessor:C0e,seriesProcessor:N0e,legendGetter:S0e,tooltipGetter:_0e,tooltipItemPositionGetter:k0e,getSeriesWithDefaultValues:A0e},L0e={bar:t0e,scatter:d0e,line:w0e,pie:E0e},P0e=[Lx,_x,nh,Px];function D0e(e){const{children:t,plugins:n=P0e,pluginParams:s={},seriesConfig:r=L0e}=e,{contextValue:i}=Hme(n,s,r);return a.jsx(fq.Provider,{value:i,children:t})}const Wr=()=>{const e=f.useContext(fq);if(e==null)throw new Error(["MUI X Charts: Could not find the Chart context.","It looks like you rendered your component outside of a ChartDataProvider.","This can also happen if you are bundling multiple versions of the library."].join(`
`));return e};function O0e(e){"hasPointerCapture"in e.currentTarget&&e.currentTarget.hasPointerCapture(e.pointerId)&&e.currentTarget.releasePointerCapture(e.pointerId)}const pN=(e,t)=>{const{instance:n}=Wr(),s=f.useRef(!1),r=ps(()=>{s.current=!0,n.setItemInteraction(e,{interaction:"pointer"}),n.setHighlight(e)}),i=ps(()=>{s.current=!1,n.removeItemInteraction(e),n.clearHighlight()});return f.useEffect(()=>()=>{s.current&&i()},[i]),f.useMemo(()=>({onPointerEnter:r,onPointerLeave:i,onPointerDown:O0e}),[t,r,i])};function RW(e){return e.replace(" ","_")}const zW=An("MuiAppearingMask",["animate"]),M0e=ma("rect")({animationName:"animate-width",animationTimingFunction:q4,animationDuration:"0s",[`&.${zW.animate}`]:{animationDuration:`${hN}ms`},"@keyframes animate-width":{from:{width:0}}});function FW(e){const t=Ei(),n=uN(),s=RW(`${n}-${e.id}`);return a.jsxs(f.Fragment,{children:[a.jsx("clipPath",{id:s,children:a.jsx(M0e,{className:e.skipAnimation?"":zW.animate,x:0,y:0,width:t.left+t.width+t.right,height:t.top+t.height+t.bottom})}),a.jsx("g",{clipPath:`url(#${s})`,children:e.children})]})}const I0e=["skipAnimation","ownerState"];function $0e(e){const{skipAnimation:t,ownerState:n}=e,s=xa(e,I0e),r=Bxe(e);return a.jsx(FW,{skipAnimation:t,id:`${n.id}-area-clip`,children:a.jsx("path",et({fill:n.gradientId?`url(#${n.gradientId})`:n.color,filter:n.isHighlighted?"brightness(140%)":n.gradientId?void 0:"brightness(120%)",opacity:n.isFaded?.3:1,stroke:"none","data-series":n.id,"data-highlighted":n.isHighlighted||void 0,"data-faded":n.isFaded||void 0},s,r))})}const R0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function z0e(e){return Yn("MuiAreaElement",e)}const F0e=An("MuiAreaElement",["root","highlighted","faded","series"]),U0e=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Vn(i,z0e,t)};function B0e(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xa(e,R0e),u=pN({type:"line",seriesId:t}),{isFaded:d,isHighlighted:h}=LW({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:d,isHighlighted:h},x=U0e(p),v=i?.area??$0e,j=Ul({elementType:v,externalSlotProps:o?.area,additionalProps:et({},u,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return a.jsx(v,et({},c,j))}function V4(e){const t=Ka(),n=qt(t,nme);return e||n}function Y4(){const e=Ka();return qt(e,fG)}function UW(e){switch(e){case"catmullRom":return Fpe.alpha(.5);case"linear":return Dx;case"monotoneX":return Dk;case"monotoneY":return uW;case"natural":return fW;case"step":return hW;case"stepBefore":return gW;case"stepAfter":return pW;case"bumpY":return YG;case"bumpX":return VG;default:return Dk}}function H0e(e,t){const n=Ox(),s=wr().xAxisIds[0],r=jr().yAxisIds[0],i=H4();return f.useMemo(()=>{if(n===void 0)return[];const{series:l,stackingGroups:c}=n,u=[];for(const d of c){const h=d.ids;for(let p=h.length-1;p>=0;p-=1){const x=h[p],{xAxisId:v=s,yAxisId:j=r,stackedData:b,data:N,connectNulls:w,baseline:S,curve:_,strictStepCurve:k,area:T}=l[x];if(!T||!(v in e)||!(j in t))continue;const A=e[v].scale,E=rh(A),M=t[j].scale,O=e[v].data,I=t[j].colorScale&&i(j)||e[v].colorScale&&i(v)||void 0,D=_?.includes("step")&&!k&&vs(A),H=O?.flatMap((J,Y)=>{const re=N[Y]==null;if(D){const we=[{x:J,y:b[Y],nullData:re,isExtension:!1}];return!re&&(Y===0||N[Y-1]==null)&&we.unshift({x:(A(J)??0)-(A.step()-A.bandwidth())/2,y:b[Y],nullData:re,isExtension:!0}),!re&&(Y===N.length-1||N[Y+1]==null)&&we.push({x:(A(J)??0)+(A.step()+A.bandwidth())/2,y:b[Y],nullData:re,isExtension:!0}),we}return{x:J,y:b[Y],nullData:re}})??[],W=w?H.filter(J=>!J.nullData):H,Q=Hg().x(J=>J.isExtension?J.x:E(J.x)).defined(J=>w||!J.nullData||!!J.isExtension).y0(J=>{if(typeof S=="number")return M(S);if(S==="max")return M.range()[1];if(S==="min")return M.range()[0];const Y=J.y&&M(J.y[0]);return Number.isNaN(Y)?M.range()[0]:Y}).y1(J=>J.y&&M(J.y[1])).curve(UW(_))(W)||"";u.push({area:l[x].area,color:l[x].color,gradientId:I,d:Q,seriesId:x})}}return u},[n,s,r,e,t,i])}const q0e=["slots","slotProps","onItemClick","skipAnimation"],G0e=ma("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${F0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),W0e=()=>{const{xAxis:e}=wr(),{yAxis:t}=jr();return H0e(e,t)};function V0e(e){const{slots:t,slotProps:n,onItemClick:s,skipAnimation:r}=e,i=xa(e,q0e),o=Y4(),l=V4(o||r),c=W0e();return a.jsx(G0e,et({},i,{children:c.map(({d:u,seriesId:d,color:h,area:p,gradientId:x})=>!!p&&a.jsx(B0e,{id:d,d:u,color:h,gradientId:x,slots:t,slotProps:n,onClick:s&&(v=>s(v,{type:"line",seriesId:d})),skipAnimation:l},d))}))}const Y0e=["skipAnimation","ownerState"],Q0e=f.forwardRef(function(t,n){const{skipAnimation:s,ownerState:r}=t,i=xa(t,Y0e),o=Hxe(et({},t,{ref:n}));return a.jsx(FW,{skipAnimation:s,id:`${r.id}-line-clip`,children:a.jsx("path",et({stroke:r.gradientId?`url(#${r.gradientId})`:r.color,strokeWidth:2,strokeLinejoin:"round",fill:"none",filter:r.isHighlighted?"brightness(120%)":void 0,opacity:r.isFaded?.3:1,"data-series":r.id,"data-highlighted":r.isHighlighted||void 0,"data-faded":r.isFaded||void 0},i,o))})}),K0e=["id","classes","color","gradientId","slots","slotProps","onClick"];function X0e(e){return Yn("MuiLineElement",e)}const Z0e=An("MuiLineElement",["root","highlighted","faded","series"]),J0e=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r}=e,i={root:["root",`series-${n}`,r&&"highlighted",s&&"faded"]};return Vn(i,X0e,t)};function eye(e){const{id:t,classes:n,color:s,gradientId:r,slots:i,slotProps:o,onClick:l}=e,c=xa(e,K0e),u=pN({type:"line",seriesId:t}),{isFaded:d,isHighlighted:h}=LW({seriesId:t}),p={id:t,classes:n,color:s,gradientId:r,isFaded:d,isHighlighted:h},x=J0e(p),v=i?.line??Q0e,j=Ul({elementType:v,externalSlotProps:o?.line,additionalProps:et({},u,{onClick:l,cursor:l?"pointer":"unset"}),className:x.root,ownerState:p});return a.jsx(v,et({},c,j))}function tye(e,t){const n=Ox(),s=wr().xAxisIds[0],r=jr().yAxisIds[0],i=H4();return f.useMemo(()=>{if(n===void 0)return[];const{series:l,stackingGroups:c}=n,u=[];for(const d of c){const h=d.ids;for(const p of h){const{xAxisId:x=s,yAxisId:v=r,stackedData:j,data:b,connectNulls:N,curve:w,strictStepCurve:S}=l[p];if(!(x in e)||!(v in t))continue;const _=e[x].scale,k=rh(_),T=t[v].scale,A=e[x].data,E=t[v].colorScale&&i(v)||e[x].colorScale&&i(x)||void 0,M=w?.includes("step")&&!S&&vs(_),O=A?.flatMap((W,z)=>{const Q=b[z]==null;if(M){const J=[{x:W,y:j[z],nullData:Q,isExtension:!1}];return!Q&&(z===0||b[z-1]==null)&&J.unshift({x:(_(W)??0)-(_.step()-_.bandwidth())/2,y:j[z],nullData:Q,isExtension:!0}),!Q&&(z===b.length-1||b[z+1]==null)&&J.push({x:(_(W)??0)+(_.step()+_.bandwidth())/2,y:j[z],nullData:Q,isExtension:!0}),J}return{x:W,y:j[z],nullData:Q}})??[],I=N?O.filter(W=>!W.nullData):O,H=O4().x(W=>W.isExtension?W.x:k(W.x)).defined(W=>N||!W.nullData||!!W.isExtension).y(W=>T(W.y[1])).curve(UW(w))(I)||"";u.push({color:l[p].color,gradientId:E,d:H,seriesId:p})}}return u},[n,s,r,e,t,i])}const aye=["slots","slotProps","skipAnimation","onItemClick"],nye=ma("g",{name:"MuiAreaPlot",slot:"Root"})({[`& .${Z0e.root}`]:{transition:"opacity 0.2s ease-in, fill 0.2s ease-in"}}),sye=()=>{const{xAxis:e}=wr(),{yAxis:t}=jr();return tye(e,t)};function rye(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=xa(e,aye),o=Y4(),l=V4(o||s),c=sye();return a.jsx(nye,et({},i,{children:c.map(({d:u,seriesId:d,color:h,gradientId:p})=>a.jsx(eye,{id:d,d:u,color:h,gradientId:p,skipAnimation:l,slots:t,slotProps:n,onClick:r&&(x=>r(x,{type:"line",seriesId:d}))},d))}))}function iye(e){return Yn("MuiMarkElement",e)}const BW=An("MuiMarkElement",["root","highlighted","faded","animate","series"]),HW=e=>{const{classes:t,id:n,isFaded:s,isHighlighted:r,skipAnimation:i}=e,o={root:["root",`series-${n}`,r&&"highlighted",s&&"faded",i?void 0:"animate"]};return Vn(o,iye,t)},oye=["x","y","id","classes","color","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],lye=ma("circle")({[`&.${BW.animate}`]:{transitionDuration:`${hN}ms`,transitionProperty:"cx, cy",transitionTimingFunction:q4}});function cye(e){const{x:t,y:n,id:s,classes:r,color:i,dataIndex:o,onClick:l,skipAnimation:c,isFaded:u=!1,isHighlighted:d=!1}=e,h=xa(e,oye),p=Vo(),x=pN({type:"line",seriesId:s,dataIndex:o}),j=HW({id:s,classes:r,isHighlighted:d,isFaded:u,skipAnimation:c});return a.jsx(lye,et({},h,{cx:t,cy:n,r:5,fill:(p.vars||p).palette.background.paper,stroke:i,strokeWidth:2,className:j.root,onClick:l,cursor:l?"pointer":"unset"},x,{"data-highlighted":d||void 0,"data-faded":u||void 0}))}function qW(e){switch(e){case"circle":return 0;case"cross":return 1;case"diamond":return 2;case"square":return 3;case"star":return 4;case"triangle":return 5;case"wye":return 6;default:return 0}}const dye=["x","y","id","classes","color","shape","dataIndex","onClick","skipAnimation","isFaded","isHighlighted"],uye=ma("path",{name:"MuiMarkElement",slot:"Root"})(({ownerState:e,theme:t})=>({fill:(t.vars||t).palette.background.paper,stroke:e.color,strokeWidth:2,[`&.${BW.animate}`]:{transitionDuration:`${hN}ms`,transitionProperty:"transform, transform-origin",transitionTimingFunction:q4}}));function mye(e){const{x:t,y:n,id:s,classes:r,color:i,shape:o,dataIndex:l,onClick:c,skipAnimation:u,isFaded:d=!1,isHighlighted:h=!1}=e,p=xa(e,dye),x=pN({type:"line",seriesId:s,dataIndex:l}),v={id:s,classes:r,isHighlighted:h,isFaded:d,color:i,skipAnimation:u},j=HW(v);return a.jsx(uye,et({},p,{style:{transform:`translate(${t}px, ${n}px)`,transformOrigin:`${t}px ${n}px`},ownerState:v,className:j.root,d:M4(nW[qW(o)])(),onClick:c,cursor:c?"pointer":"unset"},x,{"data-highlighted":h||void 0,"data-faded":d||void 0}))}const fye=["slots","slotProps","skipAnimation","onItemClick"];function hye(e){const{slots:t,slotProps:n,skipAnimation:s,onItemClick:r}=e,i=xa(e,fye),o=Y4(),l=V4(o||s),c=Ox(),{xAxis:u,xAxisIds:d}=wr(),{yAxis:h,yAxisIds:p}=jr(),x=uN(),{instance:v,store:j}=Wr(),{isFaded:b,isHighlighted:N}=_xe(),w=qt(j,MG),S=f.useMemo(()=>{const E={};for(const{dataIndex:M,axisId:O}of w)E[O]===void 0?E[O]=new Set([M]):E[O].add(M);return E},[w]);if(c===void 0)return null;const{series:_,stackingGroups:k}=c,T=d[0],A=p[0];return a.jsx("g",et({},i,{children:k.flatMap(({ids:E})=>E.map(M=>{const{xAxisId:O=T,yAxisId:I=A,stackedData:D,data:H,showMark:W=!0,shape:z="circle"}=_[M];if(W===!1)return null;const Q=rh(u[O].scale),J=h[I].scale,Y=u[O].data;if(Y===void 0)throw new Error(`MUI X Charts: ${O===Rj?"The first `xAxis`":`The x-axis with id "${O}"`} should have data property to be able to display a line plot.`);const re=RW(`${x}-${M}-line-clip`),we=W4(_[M],u[O],h[I]),Z=t?.mark??(z==="circle"?cye:mye),ne=N({seriesId:M}),pe=!ne&&b({seriesId:M});return a.jsx("g",{clipPath:`url(#${re})`,"data-series":M,children:Y?.map((Ne,de)=>{const be=H[de]==null?null:D[de][1];return{x:Q(Ne),y:be===null?null:J(be),position:Ne,value:be,index:de}}).filter(({x:Ne,y:de,index:be,position:oe,value:Te})=>Te===null||de===null||!v.isPointInside(Ne,de)?!1:W===!0?!0:W({x:Ne,y:de,index:be,position:oe,value:Te})).map(({x:Ne,y:de,index:be})=>a.jsx(Z,et({id:M,dataIndex:be,shape:z,color:we(be),x:Ne,y:de,skipAnimation:l,onClick:r&&(oe=>r(oe,{type:"line",seriesId:M,dataIndex:be})),isHighlighted:S[O]?.has(be)||ne,isFaded:pe},n?.mark),`${M}-${be}`))},M)}))}))}function xN(){const[e,t]=f.useState(typeof window<"u"||!1);return f.useEffect(()=>{t(!0)},[]),e}function Q4(e){return typeof e=="number"&&!Number.isFinite(e)}const Ik={start:0,extremities:0,end:1,middle:.5};function k2(e,t,n){return e(t)-(e.step()-e.bandwidth())/2+Ik[n]*e.step()}function gye(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,isInside:l}=e;if(vs(t)){const p=t.domain(),x=o??"middle";if(t.bandwidth()>0){const j=typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p,b=t.range()[0]>t.range()[1],N=j.findIndex(S=>l(k2(t,S,b?"start":"end"))),w=j.findLastIndex(S=>l(k2(t,S,b?"end":"start")));return[...j.slice(N,w+1).map(S=>{const _=`${S}`;return{value:S,formattedValue:s?.(S,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:_})??_,offset:k2(t,S,i),labelOffset:x==="tick"?0:t.step()*(Ik[x]-Ik[i])}}),...i==="extremities"&&w===p.length-1&&l(t.range()[1])?[{formattedValue:void 0,offset:t.range()[1],labelOffset:0}]:[]]}return(typeof r=="function"&&p.filter(r)||typeof r=="object"&&r||p).map(j=>{const b=`${j}`;return{value:j,formattedValue:s?.(j,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:b})??b,offset:t(j),labelOffset:0}})}if(t.domain().some(Q4))return[];const u=o,d=typeof r=="object"?r:pye(t,n),h=[];for(let p=0;p<d.length;p+=1){const x=d[p],v=t(x);if(l(v)){const j=t.tickFormat(n)(x);h.push({value:x,formattedValue:s?.(x,{location:"tick",scale:t,tickNumber:n,defaultTickLabel:j})??j,offset:v,labelOffset:u==="middle"?t(d[p-1]??0)-(v+t(d[p-1]??0))/2:0})}}return h}function pye(e,t){const n=e.domain();return n[0]===n[1]?[n[0]]:e.ticks(t)}function yN(e){const{scale:t,tickNumber:n,valueFormatter:s,tickInterval:r,tickPlacement:i="extremities",tickLabelPlacement:o,direction:l}=e,{instance:c}=Wr(),u=l==="x"?c.isXInside:c.isYInside;return f.useMemo(()=>gye({scale:t,tickNumber:n,tickPlacement:i,tickInterval:r,tickLabelPlacement:o,valueFormatter:s,isInside:u}),[t,n,i,r,o,s,u])}function xye(e=!1){const[t,n]=f.useState(!1);return is(()=>{e||n(!0)},[e]),f.useEffect(()=>{e&&n(!0)},[e]),t}const GW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function yye(e){return e.length}function bye(e){const t=GW.segment(e);let n=0;for(const s of t)n+=1;return n}const vye=GW?bye:yye;function wye(e){return e*(Math.PI/180)}const WW=typeof window<"u"&&"Intl"in window&&"Segmenter"in Intl?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function jye(e,t){return e.slice(0,t)}function Nye(e,t){const n=WW.segment(e);let s="",r=0;for(const i of n)if(s+=i.segment,r+=1,r>=t)break;return s}const Cye=WW?Nye:jye,B6="";function VW(e,t){const{width:n,height:s,measureText:r}=t,i=wye(t.angle),o=r(e),l=Math.abs(o.width*Math.cos(i))+Math.abs(o.height*Math.sin(i)),c=Math.abs(o.width*Math.sin(i))+Math.abs(o.height*Math.cos(i));return l<=n&&c<=s}function YW(e,t){if(t(e))return e;let n=e,s=1,r=1/2;const i=vye(e);let o=i,l=i,c=null;do{if(l=o,o=Math.floor(i*r),o===0)break;n=Cye(e,o).trim();const u=t(n+B6);s+=1,u?(c=n,r+=1/2**s):r-=1/2**s}while(Math.abs(o-l)!==1);return c?c+B6:""}function QW(){return typeof window>"u"}const Zc=new Map,KW=2e3,Sye=new Set(["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"]);function K4(e,t){return Sye.has(e)&&t===+t?`${t}px`:t}const _ye=/([A-Z])/g;function X4(e){return String(e).replace(_ye,t=>`-${t.toLowerCase()}`)}function XW(e){let t="";for(const n in e)if(Object.hasOwn(e,n)){const s=n,r=e[s];if(r===void 0)continue;t+=`${X4(s)}:${K4(s,r)};`}return t}const Mx=(e,t={})=>{if(e==null||QW())return{width:0,height:0};const n=String(e),s=XW(t),r=`${n}-${s}`,i=Zc.get(r);if(i)return i;try{const o=JW(),l=document.createElementNS("http://www.w3.org/2000/svg","text");Object.keys(t).map(u=>(l.style[X4(u)]=K4(u,t[u]),u)),l.textContent=n,o.replaceChildren(l);const c=ZW(l);return Zc.set(r,c),Zc.size+1>KW&&Zc.clear(),c}catch{return{width:0,height:0}}};function Aye(e,t={}){if(QW())return new Map(Array.from(e).map(c=>[c,{width:0,height:0}]));const n=new Map,s=[],r=XW(t);for(const c of e){const u=`${c}-${r}`,d=Zc.get(u);d?n.set(c,d):s.push(c)}const i=JW(),o=et({},t);Object.keys(o).map(c=>(i.style[X4(c)]=K4(c,o[c]),c));const l=[];for(const c of s){const u=document.createElementNS("http://www.w3.org/2000/svg","text");u.textContent=`${c}`,l.push(u)}i.replaceChildren(...l);for(let c=0;c<s.length;c+=1){const u=s[c],d=i.children[c],h=ZW(d),p=`${u}-${r}`;Zc.set(p,h),n.set(u,h)}return Zc.size+1>KW&&Zc.clear(),n}function ZW(e){try{const t=e.getBBox();return{width:t.width,height:t.height}}catch{const t=e.getBoundingClientRect();return{width:t.width,height:t.height}}}let ir=null;function JW(){return ir===null&&(ir=document.createElementNS("http://www.w3.org/2000/svg","svg"),ir.setAttribute("aria-hidden","true"),ir.style.position="absolute",ir.style.top="-20000px",ir.style.left="0",ir.style.padding="0",ir.style.margin="0",ir.style.border="none",ir.style.pointerEvents="none",ir.style.visibility="hidden",ir.style.contain="strict",document.body.appendChild(ir)),ir}function Tye(e,t,n,s,r){const i=new Map,o=mN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>90&&o<270&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const u of e)if(u.formattedValue){const d=Math.min((u.offset+u.labelOffset)*l,(t.left+t.width+t.right-u.offset-u.labelOffset)*c),h=p=>VW(p,{width:d,height:n,angle:o,measureText:x=>Mx(x,r)});i.set(u,YW(u.formattedValue.toString(),h))}return i}const H6=5;function kye(e,t,n=0){const s=Math.min(Math.abs(n)%180,Math.abs(Math.abs(n)%180-180)%180);if(s<H6)return e;if(s>90-H6)return t;const r=Xc(s),i=Math.atan2(t,e);return r<i?e/Math.cos(r):t/Math.sin(r)}function Eye(e,{tickLabelStyle:t,tickLabelInterval:n,tickLabelMinGap:s,reverse:r,isMounted:i,isXInside:o}){if(typeof n=="function")return new Set(e.filter((h,p)=>n(h.value,p)));let l=0;const c=r?-1:1,u=e.filter(h=>{const{offset:p,labelOffset:x,formattedValue:v}=h;if(v==="")return!1;const j=p+x;return o(j)}),d=Pye(u,t);return new Set(u.filter((h,p)=>{const{offset:x,labelOffset:v}=h,j=x+v;if(p>0&&c*j<c*(l+s))return!1;const{width:b,height:N}=i?Lye(d,h):{width:0,height:0},w=kye(b,N,t?.angle),S=j-c*w/2;return p>0&&c*S<c*(l+s)?!1:(l=j+c*w/2,!0)}))}function Lye(e,t){if(t.formattedValue===void 0)return{width:0,height:0};let n=0,s=0;for(const r of t.formattedValue.split(`
`)){const i=e.get(r);i&&(n=Math.max(n,i.width),s+=i.height)}return{width:n,height:s}}function Pye(e,t){const n=new Set;for(const s of e)s.formattedValue&&s.formattedValue.split(`
`).forEach(r=>n.add(r));return Aye(n,t)}function eV(e){return Yn("MuiChartsAxis",e)}const Zy=An("MuiChartsAxis",["root","line","tickContainer","tick","tickLabel","label","directionX","directionY","top","bottom","left","right","id"]),tV=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionX",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Vn(r,eV,t)},$k=3,Dye=4,aV={disableLine:!1,disableTicks:!1,tickSize:6,tickLabelMinGap:4};function Oye({style:e,needsComputation:t,text:n}){return n.split(`
`).map(s=>et({text:s},t?Mx(s,e):{width:0,height:0}))}const Mye=["x","y","style","text","ownerState"],Iye=["angle","textAnchor","dominantBaseline"];function bN(e){const{x:t,y:n,style:s,text:r}=e,i=xa(e,Mye),o=s??{},{angle:l,textAnchor:c,dominantBaseline:u}=o,d=xa(o,Iye),h=xN(),p=f.useMemo(()=>Oye({style:d,needsComputation:h&&r.includes(`
`),text:r}),[d,r,h]);let x;switch(u){case"hanging":case"text-before-edge":x=0;break;case"central":x=(p.length-1)/2*-p[0].height;break;default:x=(p.length-1)*-p[0].height;break}return a.jsx("text",et({},i,{transform:l?`rotate(${l}, ${t}, ${n})`:void 0,x:t,y:n,textAnchor:c,dominantBaseline:u,style:d,children:p.map((v,j)=>a.jsx("tspan",{x:t,dy:`${j===0?x:p[0].height}px`,dominantBaseline:u,children:v.text},j))}))}function nV(e){const t=mN(e);return t<=30||t>=330||t<=210&&t>=150?"middle":t<=180?"end":"start"}function sV(e){const t=mN(e);return t<=30||t>=330?"hanging":t<=210&&t>=150?"auto":"central"}function rV(e){switch(e){case"start":return"end";case"end":return"start";default:return e}}const $ye=["scale","tickNumber","reverse"];function iV(e){const{xAxis:t,xAxisIds:n}=wr(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i,reverse:o}=s,l=xa(s,$ye),c=Ti({props:et({},l,e),name:"MuiChartsXAxis"}),u=et({},aV,c),{position:d,tickLabelStyle:h,slots:p,slotProps:x}=u,v=Vo(),j=yx(),b=tV(u),N=d==="bottom"?1:-1,w=p?.axisTick??"line",S=p?.axisTickLabel??bN,_=nV((d==="bottom"?0:180)-(h?.angle??0)),k=sV((d==="bottom"?0:180)-(h?.angle??0)),T=Ul({elementType:S,externalSlotProps:x?.axisTickLabel,additionalProps:{style:et({},v.typography.caption,{fontSize:12,lineHeight:1.25,textAnchor:j?rV(_):_,dominantBaseline:k},h)},className:b.tickLabel,ownerState:{}});return{xScale:r,defaultizedProps:u,tickNumber:i,positionSign:N,classes:b,Tick:w,TickLabel:S,axisTickLabelProps:T,reverse:o}}function Rye(e){const{axisLabelHeight:t}=e,{xScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:u,reverse:d}=iV(e),h=yx(),p=xye(),{disableTicks:x,tickSize:v,valueFormatter:j,slotProps:b,tickInterval:N,tickLabelInterval:w,tickPlacement:S,tickLabelPlacement:_,tickLabelMinGap:k,height:T}=s,A=Ei(),{instance:E}=Wr(),M=xN(),O=x?4:v,I=yN({scale:n,tickNumber:r,valueFormatter:j,tickInterval:N,tickPlacement:S,tickLabelPlacement:_,direction:"x"}),D=Eye(I,{tickLabelStyle:u.style,tickLabelInterval:w,tickLabelMinGap:k,reverse:d,isMounted:p,isXInside:E.isXInside}),H=Math.max(0,T-(t>0?t+Dye:0)-O-$k),W=M?Tye(D,A,H,h,u.style):new Map(Array.from(D).map(z=>[z,z.formattedValue]));return a.jsx(f.Fragment,{children:I.map((z,Q)=>{const{offset:J,labelOffset:Y}=z,re=Y??0,we=i*(O+$k),Z=E.isXInside(J),ne=W.get(z),pe=D.has(z);return a.jsxs("g",{transform:`translate(${J}, 0)`,className:o.tickContainer,children:[!x&&Z&&a.jsx(l,et({y2:i*O,className:o.tick},b?.axisTick)),ne!==void 0&&pe&&a.jsx(c,et({x:re,y:we},u,{text:ne}))]},Q)})})}const vg={start:0,extremities:0,end:1,middle:.5,tick:0};function oV(e){const{scale:t,tickInterval:n,tickLabelPlacement:s="middle",tickPlacement:r="extremities",groups:i}=e;return f.useMemo(()=>{const o=t.domain(),l=typeof n=="function"&&o.filter(n)||typeof n=="object"&&n||o;if(t.bandwidth()>0){const c=q6(l,i,r,s,t);return c[0]&&(c[0].ignoreTick=!0),[{formattedValue:void 0,offset:t.range()[0],labelOffset:0,groupIndex:i.length-1},...c,{formattedValue:void 0,offset:t.range()[1],labelOffset:0,groupIndex:i.length-1}]}return q6(l,i,r,s,t)},[t,n,i,r,s])}function q6(e,t,n,s,r){const i=[],o=new Map;let l=0;for(let c=0;c<t.length;c+=1)for(let u=0;u<e.length;u+=1){const d=e[u],h=t[c].getValue(d,u),p=i[i.length-1];if(p?.value!==h||p?.groupIndex!==c){l=1;const v=vs(r)?r(d)-(r.step()-r.bandwidth())/2+vg[n]*r.step():r(d),j=r.step()*l*(vg[s]-vg[n]);i.push({value:h,formattedValue:`${h}`,offset:v,groupIndex:c,dataIndex:u,ignoreTick:!1,labelOffset:j}),o.has(u)||o.set(u,new Set);const b=o.get(u);for(const N of b.values())i[N].ignoreTick=!0;b.add(i.length-1)}else{l+=1;const v=r.step()*l*(vg[s]-vg[n]);p.labelOffset=v}}return i}const G6={tickSize:6},zye=(e,t,n)=>{const s=e[t]??{},r=n??G6.tickSize,i=r*t*2+r;return et({},G6,s,{tickSize:s.tickSize??i})};function Fye(e){const{xScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=iV(e);if(!vs(t))throw new Error("MUI X Charts: ChartsGroupedXAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:u,valueFormatter:d,slotProps:h,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=n,j=n.groups,{instance:b}=Wr(),N=oV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:j});return a.jsx(f.Fragment,{children:N.map((w,S)=>{const{offset:_,labelOffset:k}=w,T=k??0,A=b.isXInside(_),E=w.formattedValue,M=w.ignoreTick??!1,O=w.groupIndex??0,I=zye(j,O,u),D=s*I.tickSize,H=s*(I.tickSize+$k);return a.jsxs("g",{transform:`translate(${_}, 0)`,className:r.tickContainer,"data-group-index":O,children:[!c&&!M&&A&&a.jsx(i,et({y2:D,className:r.tick},h?.axisTick)),E!==void 0&&a.jsx(o,et({x:T,y:H},l,{style:et({},l.style,I.tickLabelStyle),text:E}))]},S)})})}const lV=ma("g",{name:"MuiChartsAxis",slot:"Root"})(({theme:e})=>({[`& .${Zy.tickLabel}`]:et({},e.typography.caption,{fill:(e.vars||e).palette.text.primary}),[`& .${Zy.label}`]:{fill:(e.vars||e).palette.text.primary},[`& .${Zy.line}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",strokeWidth:1},[`& .${Zy.tick}`]:{stroke:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges"}})),Uye=["axis"],Bye=["scale","tickNumber","reverse"],Hye=ma(lV,{name:"MuiChartsXAxis",slot:"Root"})({});function qye(e){let{axis:t}=e,n=xa(e,Uye);const{scale:s}=t,r=xa(t,Bye),i=Ti({props:et({},r,n),name:"MuiChartsXAxis"}),o=et({},aV,i),{position:l,labelStyle:c,offset:u,slots:d,slotProps:h,sx:p,disableLine:x,label:v,height:j}=o,b=Vo(),N=tV(o),{left:w,top:S,width:_,height:k}=Ei(),T=l==="bottom"?1:-1,A=d?.axisLine??"line",E=d?.axisLabel??bN,M=Ul({elementType:E,externalSlotProps:h?.axisLabel,additionalProps:{style:et({},b.typography.body1,{lineHeight:1,fontSize:14,textAnchor:"middle",dominantBaseline:l==="bottom"?"text-after-edge":"text-before-edge"},c)},ownerState:{}});if(l==="none")return null;const O=v?Mx(v,M.style).height:0,I=s.domain(),H=vs(s)?I.length===0:I.some(Q4);let W=null;H||(W="groups"in t&&Array.isArray(t.groups)?a.jsx(Fye,et({},n)):a.jsx(Rye,et({},n,{axisLabelHeight:O})));const z={x:w+_/2,y:T*j};return a.jsxs(Hye,{transform:`translate(0, ${l==="bottom"?S+k+u:S-u})`,className:N.root,sx:p,children:[!x&&a.jsx(A,et({x1:w,x2:w+_,className:N.line},h?.axisLine)),W,v&&a.jsx("g",{className:N.label,children:a.jsx(E,et({},z,M,{text:v}))})]})}function Gye(e){const{xAxis:t,xAxisIds:n}=wr(),s=t[e.axisId??n[0]];return s?a.jsx(qye,et({},e,{axis:s})):(`${e.axisId}`,null)}function Wye(e,t,n,s,r){const i=new Map,o=mN(r?.angle??0);let l=1,c=1;r?.textAnchor==="start"?(l=1/0,c=1):r?.textAnchor==="end"?(l=1,c=1/0):(l=2,c=2),o>180&&([l,c]=[c,l]),s&&([l,c]=[c,l]);for(const u of e)if(u.formattedValue){const d=Math.min((u.offset+u.labelOffset)*l,(t.top+t.height+t.bottom-u.offset-u.labelOffset)*c),h=p=>VW(p,{width:n,height:d,angle:o,measureText:x=>Mx(x,r)});i.set(u,YW(u.formattedValue.toString(),h))}return i}const cV=e=>{const{classes:t,position:n,id:s}=e,r={root:["root","directionY",n,`id-${s}`],line:["line"],tickContainer:["tickContainer"],tick:["tick"],tickLabel:["tickLabel"],label:["label"]};return Vn(r,eV,t)},Rk=2,Vye=2,dV={disableLine:!1,disableTicks:!1,tickSize:6},Yye=["scale","tickNumber","reverse"];function uV(e){const{yAxis:t,yAxisIds:n}=jr(),s=t[e.axisId??n[0]],{scale:r,tickNumber:i}=s,o=xa(s,Yye),l=Ti({props:et({},o,e),name:"MuiChartsYAxis"}),c=et({},dV,l),{position:u,tickLabelStyle:d,slots:h,slotProps:p}=c,x=Vo(),v=yx(),j=cV(c),b=u==="right"?1:-1,N=typeof d?.fontSize=="number"?d.fontSize:12,w=h?.axisTick??"line",S=h?.axisTickLabel??bN,_=nV((u==="right"?-90:90)-(d?.angle??0)),k=sV((u==="right"?-90:90)-(d?.angle??0)),T=Ul({elementType:S,externalSlotProps:p?.axisTickLabel,additionalProps:{style:et({},x.typography.caption,{fontSize:N,textAnchor:v?rV(_):_,dominantBaseline:k},d)},className:j.tickLabel,ownerState:{}});return{yScale:r,defaultizedProps:c,tickNumber:i,positionSign:b,classes:j,Tick:w,TickLabel:S,axisTickLabelProps:T}}function Qye(e){const{axisLabelHeight:t}=e,{yScale:n,defaultizedProps:s,tickNumber:r,positionSign:i,classes:o,Tick:l,TickLabel:c,axisTickLabelProps:u}=uV(e),d=yx(),{disableTicks:h,tickSize:p,valueFormatter:x,slotProps:v,tickPlacement:j,tickLabelPlacement:b,tickInterval:N,tickLabelInterval:w,width:S}=s,_=Ei(),{instance:k}=Wr(),T=xN(),A=h?4:p,E=yN({scale:n,tickNumber:r,valueFormatter:x,tickPlacement:j,tickLabelPlacement:b,tickInterval:N,direction:"y"}),M=Math.max(0,S-(t>0?t+Vye:0)-A-Rk),O=T?Wye(E,_,M,d,u.style):new Map(Array.from(E).map(I=>[I,I.formattedValue]));return a.jsx(f.Fragment,{children:E.map((I,D)=>{const{offset:H,labelOffset:W,value:z}=I,Q=i*(A+Rk),J=W,Y=typeof w=="function"&&!w?.(z,D),re=k.isYInside(H),we=O.get(I);return re?a.jsxs("g",{transform:`translate(0, ${H})`,className:o.tickContainer,children:[!h&&a.jsx(l,et({x2:i*A,className:o.tick},v?.axisTick)),we!==void 0&&!Y&&a.jsx(c,et({x:Q,y:J,text:we},u))]},D):null})})}const W6={tickSize:6},Kye=(e,t,n)=>{const s=e[t]??{},r=n??W6.tickSize,i=r*t*2+r;return et({},W6,s,{tickSize:s.tickSize??i})};function Xye(e){const{yScale:t,defaultizedProps:n,positionSign:s,classes:r,Tick:i,TickLabel:o,axisTickLabelProps:l}=uV(e);if(!vs(t))throw new Error("MUI X Charts: ChartsGroupedYAxis only supports the `band` and `point` scale types.");const{disableTicks:c,tickSize:u,valueFormatter:d,slotProps:h,tickInterval:p,tickPlacement:x,tickLabelPlacement:v}=n,j=n.groups,{instance:b}=Wr(),N=oV({scale:t,tickInterval:p,tickPlacement:x,tickLabelPlacement:v,groups:j});return a.jsx(f.Fragment,{children:N.map((w,S)=>{const{offset:_,labelOffset:k}=w,T=k??0,A=b.isYInside(_),E=w.formattedValue,M=w.ignoreTick??!1,O=w.groupIndex??0,I=Kye(j,O,u),D=s*I.tickSize,H=s*(I.tickSize+Rk);return a.jsxs("g",{transform:`translate(0, ${_})`,className:r.tickContainer,"data-group-index":O,children:[!c&&!M&&A&&a.jsx(i,et({x2:D,className:r.tick},h?.axisTick)),E!==void 0&&a.jsx(o,et({x:H,y:T},l,{style:et({},l.style,I.tickLabelStyle),text:E}))]},S)})})}const Zye=["axis"],Jye=["scale","tickNumber","reverse"],ebe=ma(lV,{name:"MuiChartsYAxis",slot:"Root"})({});function tbe(e){let{axis:t}=e,n=xa(e,Zye);const{scale:s}=t,r=xa(t,Jye),i=xN(),o=Ti({props:et({},r,n),name:"MuiChartsYAxis"}),l=et({},dV,o),{position:c,disableLine:u,label:d,labelStyle:h,offset:p,width:x,sx:v,slots:j,slotProps:b}=l,N=Vo(),w=cV(l),{left:S,top:_,width:k,height:T}=Ei(),A=c==="right"?1:-1,E=j?.axisLine??"line",M=j?.axisLabel??bN,O=Ul({elementType:E,externalSlotProps:b?.axisLine,additionalProps:{strokeLinecap:"square"},ownerState:{}}),I=Ul({elementType:M,externalSlotProps:b?.axisLabel,additionalProps:{style:et({},N.typography.body1,{lineHeight:1,fontSize:14,angle:A*90,textAnchor:"middle",dominantBaseline:"text-before-edge"},h)},ownerState:{}});if(c==="none")return null;const D={x:A*x,y:_+T/2},H=d==null?0:Mx(d,I.style).height,W=s.domain(),Q=vs(s)?W.length===0:W.some(Q4);let J=null;return Q||(J="groups"in t&&Array.isArray(t.groups)?a.jsx(Xye,et({},n)):a.jsx(Qye,et({},n,{axisLabelHeight:H}))),a.jsxs(ebe,{transform:`translate(${c==="right"?S+k+p:S-p}, 0)`,className:w.root,sx:v,children:[!u&&a.jsx(E,et({y1:_,y2:_+T,className:w.line},O)),J,d&&i&&a.jsx("g",{className:w.label,children:a.jsx(M,et({},D,I,{text:d}))})]})}function abe(e){const{yAxis:t,yAxisIds:n}=jr(),s=t[e.axisId??n[0]];return s?a.jsx(tbe,et({},e,{axis:s})):(`${e.axisId}`,null)}function nbe(e){const{slots:t,slotProps:n}=e,{xAxisIds:s,xAxis:r}=wr(),{yAxisIds:i,yAxis:o}=jr();return a.jsxs(f.Fragment,{children:[s.map(l=>!r[l].position||r[l].position==="none"?null:a.jsx(Gye,{slots:t,slotProps:n,axisId:l},l)),i.map(l=>!o[l].position||o[l].position==="none"?null:a.jsx(abe,{slots:t,slotProps:n,axisId:l},l))]})}function sbe(e){return Yn("MuiTypography",e)}An("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const rbe={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},ibe=Ade(),obe=e=>{const{align:t,gutterBottom:n,noWrap:s,paragraph:r,variant:i,classes:o}=e,l={root:["root",i,e.align!=="inherit"&&`align${Wa(t)}`,n&&"gutterBottom",s&&"noWrap",r&&"paragraph"]};return Vn(l,sbe,o)},lbe=ma("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Wa(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Ou(({theme:e})=>({margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([t,n])=>t!=="inherit"&&n&&typeof n=="object").map(([t,n])=>({props:{variant:t},style:n})),...Object.entries(e.palette).filter(vp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette?.text||{}).filter(([,t])=>typeof t=="string").map(([t])=>({props:{color:`text${Wa(t)}`},style:{color:(e.vars||e).palette.text[t]}})),{props:({ownerState:t})=>t.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:t})=>t.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:t})=>t.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:t})=>t.paragraph,style:{marginBottom:16}}]}))),V6={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Z4=f.forwardRef(function(t,n){const{color:s,...r}=Nd({props:t,name:"MuiTypography"}),i=!rbe[s],o=ibe({...r,...i&&{color:s}}),{align:l="inherit",className:c,component:u,gutterBottom:d=!1,noWrap:h=!1,paragraph:p=!1,variant:x="body1",variantMapping:v=V6,...j}=o,b={...o,align:l,color:s,className:c,component:u,gutterBottom:d,noWrap:h,paragraph:p,variant:x,variantMapping:v},N=u||(p?"p":v[x]||V6[x])||"span",w=obe(b);return a.jsx(lbe,{as:N,ref:n,className:It(w.root,c),...j,ownerState:b,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...j.style}})});function cbe(e){return Yn("MuiChartsTooltip",e)}const cf=An("MuiChartsTooltip",["root","paper","table","row","cell","mark","markContainer","labelCell","valueCell","axisValueCell"]),vN=e=>Vn({root:["root"],paper:["paper"],table:["table"],row:["row"],cell:["cell"],mark:["mark"],markContainer:["markContainer"],labelCell:["labelCell"],valueCell:["valueCell"],axisValueCell:["axisValueCell"]},cbe,e);function dbe(){const e=Ka(),t=qt(e,_G),n=qt(e,Gr),s=fN(),{xAxis:r,xAxisIds:i}=wr(),{yAxis:o,yAxisIds:l}=jr(),{zAxis:c,zAxisIds:u}=F4(),{rotationAxis:d,rotationAxisIds:h}=AW();if(!t)return null;const p=s[t.type]?.series[t.seriesId];if(!p)return null;const x=Uv(p)?p.xAxisId??i[0]:void 0,v=Uv(p)?p.yAxisId??l[0]:void 0,j="zAxisId"in p?p.zAxisId??u[0]:u[0],b=h[0],N=n[p.type].colorProcessor?.(p,x!==void 0?r[x]:void 0,v!==void 0?o[v]:void 0,j!==void 0?c[j]:void 0)??(()=>""),w={};return x!==void 0&&(w.x=r[x]),v!==void 0&&(w.y=o[v]),b!==void 0&&(w.rotation=d[b]),n[p.type].tooltipGetter({series:p,axesConfig:w,getColor:N,identifier:t})}const zk=ma("div",{name:"MuiChartsTooltip",slot:"Container",overridesResolver:(e,t)=>t.paper})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,borderRadius:(e.vars||e).shape?.borderRadius,border:`solid ${(e.vars||e).palette.divider} 1px`})),Fk=ma("table",{name:"MuiChartsTooltip",slot:"Table"})(({theme:e})=>({borderSpacing:0,[`& .${cf.markContainer}`]:{display:"inline-block",width:`calc(20px + ${e.spacing(1.5)})`,verticalAlign:"middle"},"& caption":{borderBottom:`solid ${(e.vars||e).palette.divider} 1px`,padding:e.spacing(.5,1.5),textAlign:"start",whiteSpace:"nowrap","& span":{marginRight:e.spacing(1.5)}}})),Uk=ma("tr",{name:"MuiChartsTooltip",slot:"Row"})(({theme:e})=>({"tr:first-of-type& td":{paddingTop:e.spacing(.5)},"tr:last-of-type& td":{paddingBottom:e.spacing(.5)}})),uf=ma(Z4,{name:"MuiChartsTooltip",slot:"Cell"})(({theme:e})=>({verticalAlign:"middle",color:(e.vars||e).palette.text.secondary,textAlign:"start",[`&.${cf.cell}`]:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},[`&.${cf.labelCell}`]:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightRegular},[`&.${cf.valueCell}, &.${cf.axisValueCell}`]:{color:(e.vars||e).palette.text.primary,fontWeight:e.typography.fontWeightMedium},[`&.${cf.valueCell}`]:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5)},"td:first-of-type&, th:first-of-type&":{paddingLeft:e.spacing(1.5)},"td:last-of-type&, th:last-of-type&":{paddingRight:e.spacing(1.5)}}));function ube(e){return Yn("MuiChartsLabelMark",e)}const Xm=An("MuiChartsLabelMark",["root","line","square","circle","mask","fill"]),mbe=e=>{const{type:t}=e;return Vn({root:typeof t=="function"?["root"]:["root",t],mask:["mask"],fill:["fill"]},ube,e.classes)},mV=(e,t,n)=>f.forwardRef(function(r,i){const o=Ti({props:r,name:e}),l=typeof t.defaultProps=="function"?t.defaultProps(o):t.defaultProps??{},c=Du(l,o),u=Vo(),d=t.classesResolver?.(c,u),h=f.forwardRef(n);return a.jsx(h,et({},c,{classes:d,ref:i}))}),fbe=["type","color","className","classes"],hbe=ma("div",{name:"MuiChartsLabelMark",slot:"Root"})(()=>({display:"flex",width:14,height:14,[`&.${Xm.line}`]:{width:16,height:"unset",alignItems:"center",[`.${Xm.mask}`]:{height:4,width:"100%",borderRadius:1,overflow:"hidden"}},[`&.${Xm.square}`]:{height:13,width:13,borderRadius:2,overflow:"hidden"},[`&.${Xm.circle}`]:{height:15,width:15},svg:{display:"block"},[`& .${Xm.mask} > *`]:{height:"100%",width:"100%"},[`& .${Xm.mask}`]:{height:"100%",width:"100%"}})),Zv=mV("MuiChartsLabelMark",{defaultProps:{type:"square"},classesResolver:mbe},function(t,n){const{type:s,color:r,className:i,classes:o}=t,l=xa(t,fbe),c=s;return a.jsx(hbe,et({className:It(o?.root,i),ownerState:t,"aria-hidden":"true",ref:n},l,{children:a.jsx("div",{className:o?.mask,children:typeof c=="function"?a.jsx(c,{className:o?.fill,color:r}):a.jsx("svg",{viewBox:"0 0 24 24",preserveAspectRatio:s==="line"?"none":void 0,children:s==="circle"?a.jsx("circle",{className:o?.fill,r:"12",cx:"12",cy:"12",fill:r}):a.jsx("rect",{className:o?.fill,width:"24",height:"24",fill:r})})})}))});function gbe(e){const{classes:t,sx:n}=e,s=dbe(),r=vN(t);if(!s)return null;if("values"in s){const{label:u,color:d,markType:h}=s;return a.jsx(zk,{sx:n,className:r.paper,children:a.jsxs(Fk,{className:r.table,children:[a.jsxs(Z4,{component:"caption",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(Zv,{type:h,color:d,className:r.mark})}),u]}),a.jsx("tbody",{children:s.values.map(({formattedValue:p,label:x})=>a.jsxs(Uk,{className:r.row,children:[a.jsx(uf,{className:It(r.labelCell,r.cell),component:"th",children:x}),a.jsx(uf,{className:It(r.valueCell,r.cell),component:"td",children:p})]},x))})]})})}const{color:i,label:o,formattedValue:l,markType:c}=s;return a.jsx(zk,{sx:n,className:r.paper,children:a.jsx(Fk,{className:r.table,children:a.jsx("tbody",{children:a.jsxs(Uk,{className:r.row,children:[a.jsxs(uf,{className:It(r.labelCell,r.cell),component:"th",children:[a.jsx("div",{className:r.markContainer,children:a.jsx(Zv,{type:c,color:i,className:r.mark})}),o]}),a.jsx(uf,{className:It(r.valueCell,r.cell),component:"td",children:l})]})})})})}function pbe(e){const t=Ka(),n=qt(t,Gr);return f.useMemo(()=>{const r={};return Object.keys(n).forEach(i=>{r[i]=n[i].colorProcessor}),r},[n])}const xbe=F9({themeId:Dj});function ybe(){const e=U4(),[t,n]=f.useState(null);return f.useEffect(()=>{const s=e.current;if(s===null)return()=>{};const r=o=>{o.pointerType!=="mouse"&&n(null)},i=o=>{n({pointerType:o.pointerType})};return s.addEventListener("pointerenter",i),s.addEventListener("pointerup",r),()=>{s.removeEventListener("pointerenter",i),s.removeEventListener("pointerup",r)}},[e]),t}function bbe(e){return e instanceof Date?e.toUTCString():e.toLocaleString()}const vbe="@media (pointer: fine)",wbe=()=>xbe(vbe,{defaultMatches:!0}),fV=(e,t)=>t,hV=(e,t)=>t;function gV(e,t,n){return Array.isArray(n)?n.map(s=>z6(t.axis[s],e)):z6(t.axis[n],e)}const pV=Et(Ax,Tx,lxe,(e,t,n)=>e===null||t===null?null:cxe(n)(e,t)),jbe=Et(pV,nm,fV,(e,t,n=t.axisIds[0])=>e===null?null:gV(e,t,n)),xV=Et(pV,nm,hV,(e,t,n=t.axisIds)=>e===null?null:gV(e,t,n));Et(nm,jbe,fV,(e,t,n=e.axisIds[0])=>{if(t===null||t===-1||e.axisIds.length===0)return null;const s=e.axis[n]?.data;return s?s[t]:null});Et(nm,xV,hV,(e,t,n=e.axisIds)=>t===null?null:n.map((s,r)=>{const i=t[r];return i===-1?null:e.axis[s].data?.[i]}));const yV=Mj({memoizeOptions:{resultEqualityCheck:wf}})(xV,nm,(e,t)=>e===null?[]:t.axisIds.map((n,s)=>({axisId:n,dataIndex:e[s]})).filter(({axisId:n,dataIndex:s})=>t.axis[n].triggerTooltip&&s>=0)),Nbe=Et(yV,e=>e.length>0);function E2(e,t,n){const s=e.data?.[t]??null,i=(e.valueFormatter??(o=>e.scaleType==="utc"?bbe(o):o.toLocaleString()))(s,{location:"tooltip",scale:e.scale});return{axisDirection:n,axisId:e.id,mainAxis:e,dataIndex:t,axisValue:s,axisFormattedValue:i,seriesItems:[]}}function Cbe(e={}){const{multipleAxes:t,directions:n}=e,s=uxe(),r=mxe(),i=fxe(),o=Ka(),l=qt(o,EG),c=qt(o,LG),u=qt(o,yV),d=fN(),{xAxis:h}=wr(),{yAxis:p}=jr(),{zAxis:x,zAxisIds:v}=F4(),{rotationAxis:j}=AW(),b=pbe();if(l.length===0&&c.length===0&&u.length===0)return null;const N=[];return(n===void 0||n.includes("x"))&&l.forEach(({axisId:w,dataIndex:S})=>{!t&&N.length>1||N.push(E2(h[w],S,"x"))}),(n===void 0||n.includes("y"))&&c.forEach(({axisId:w,dataIndex:S})=>{!t&&N.length>1||N.push(E2(p[w],S,"y"))}),(n===void 0||n.includes("rotation"))&&u.forEach(({axisId:w,dataIndex:S})=>{!t&&N.length>1||N.push(E2(j[w],S,"rotation"))}),Object.keys(d).filter(eN).forEach(w=>{const S=d[w];return S?S.seriesOrder.forEach(_=>{const k=S.series[_],T=k.xAxisId??s.id,A=k.yAxisId??r.id,E=N.findIndex(({axisDirection:M,axisId:O})=>M==="x"&&O===T||M==="y"&&O===A);if(E>=0){const M="zAxisId"in k?k.zAxisId:v[0],{dataIndex:O}=N[E],I=b[w]?.(k,h[T],p[A],M?x[M]:void 0)(O)??"",D=k.data[O]??null,H=k.valueFormatter(D,{dataIndex:O}),W=Qi(k.label,"tooltip")??null;N[E].seriesItems.push({seriesId:_,color:I,value:D,formattedValue:H,formattedLabel:W,markType:k.labelMarkType})}}):[]}),Object.keys(d).filter(z4).forEach(w=>{const S=d[w];return S?S.seriesOrder.forEach(_=>{const k=S.series[_],T=k.rotationAxisId??i?.id,A=N.findIndex(({axisDirection:E,axisId:M})=>E==="rotation"&&M===T);if(A>=0){const{dataIndex:E}=N[A],M=b[w]?.(k)(E)??"",O=k.data[E]??null,I=k.valueFormatter(O,{dataIndex:E}),D=Qi(k.label,"tooltip")??null;N[A].seriesItems.push({seriesId:_,color:M,value:O,formattedValue:I,formattedLabel:D,markType:k.labelMarkType})}}):[]}),t?N:N.length===0?N[0]:null}function Sbe(e){return Cbe(et({},e,{multipleAxes:!0}))}function _be(e){const t=vN(e.classes),n=Sbe();return n===null?null:a.jsx(zk,{sx:e.sx,className:t.paper,children:n.map(({axisId:s,mainAxis:r,axisValue:i,axisFormattedValue:o,seriesItems:l})=>a.jsxs(Fk,{className:t.table,children:[i!=null&&!r.hideTooltip&&a.jsx(Z4,{component:"caption",children:o}),a.jsx("tbody",{children:l.map(({seriesId:c,color:u,formattedValue:d,formattedLabel:h,markType:p})=>d==null?null:a.jsxs(Uk,{className:t.row,children:[a.jsxs(uf,{className:It(t.labelCell,t.cell),component:"th",children:[a.jsx("div",{className:t.markContainer,children:a.jsx(Zv,{type:p,color:u,className:t.mark})}),h||null]}),a.jsx(uf,{className:It(t.valueCell,t.cell),component:"td",children:d})]},c))})]},s))})}var pr="top",vi="bottom",wi="right",xr="left",J4="auto",Ix=[pr,vi,wi,xr],If="start",Ep="end",Abe="clippingParents",bV="viewport",wg="popper",Tbe="reference",Y6=Ix.reduce(function(e,t){return e.concat([t+"-"+If,t+"-"+Ep])},[]),vV=[].concat(Ix,[J4]).reduce(function(e,t){return e.concat([t,t+"-"+If,t+"-"+Ep])},[]),kbe="beforeRead",Ebe="read",Lbe="afterRead",Pbe="beforeMain",Dbe="main",Obe="afterMain",Mbe="beforeWrite",Ibe="write",$be="afterWrite",Rbe=[kbe,Ebe,Lbe,Pbe,Dbe,Obe,Mbe,Ibe,$be];function Uo(e){return e?(e.nodeName||"").toLowerCase():null}function Ur(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function $u(e){var t=Ur(e).Element;return e instanceof t||e instanceof Element}function xi(e){var t=Ur(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function eP(e){if(typeof ShadowRoot>"u")return!1;var t=Ur(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function zbe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},r=t.attributes[n]||{},i=t.elements[n];!xi(i)||!Uo(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(o){var l=r[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function Fbe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},o=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),l=o.reduce(function(c,u){return c[u]="",c},{});!xi(r)||!Uo(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Ube={name:"applyStyles",enabled:!0,phase:"write",fn:zbe,effect:Fbe,requires:["computeStyles"]};function Oo(e){return e.split("-")[0]}var Nu=Math.max,Jv=Math.min,$f=Math.round;function Bk(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function wV(){return!/^((?!chrome|android).)*safari/i.test(Bk())}function Rf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=e.getBoundingClientRect(),r=1,i=1;t&&xi(e)&&(r=e.offsetWidth>0&&$f(s.width)/e.offsetWidth||1,i=e.offsetHeight>0&&$f(s.height)/e.offsetHeight||1);var o=$u(e)?Ur(e):window,l=o.visualViewport,c=!wV()&&n,u=(s.left+(c&&l?l.offsetLeft:0))/r,d=(s.top+(c&&l?l.offsetTop:0))/i,h=s.width/r,p=s.height/i;return{width:h,height:p,top:d,right:u+h,bottom:d+p,left:u,x:u,y:d}}function tP(e){var t=Rf(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function jV(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&eP(n)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Wl(e){return Ur(e).getComputedStyle(e)}function Bbe(e){return["table","td","th"].indexOf(Uo(e))>=0}function Td(e){return(($u(e)?e.ownerDocument:e.document)||window.document).documentElement}function wN(e){return Uo(e)==="html"?e:e.assignedSlot||e.parentNode||(eP(e)?e.host:null)||Td(e)}function Q6(e){return!xi(e)||Wl(e).position==="fixed"?null:e.offsetParent}function Hbe(e){var t=/firefox/i.test(Bk()),n=/Trident/i.test(Bk());if(n&&xi(e)){var s=Wl(e);if(s.position==="fixed")return null}var r=wN(e);for(eP(r)&&(r=r.host);xi(r)&&["html","body"].indexOf(Uo(r))<0;){var i=Wl(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function $x(e){for(var t=Ur(e),n=Q6(e);n&&Bbe(n)&&Wl(n).position==="static";)n=Q6(n);return n&&(Uo(n)==="html"||Uo(n)==="body"&&Wl(n).position==="static")?t:n||Hbe(e)||t}function aP(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function tp(e,t,n){return Nu(e,Jv(t,n))}function qbe(e,t,n){var s=tp(e,t,n);return s>n?n:s}function NV(){return{top:0,right:0,bottom:0,left:0}}function CV(e){return Object.assign({},NV(),e)}function SV(e,t){return t.reduce(function(n,s){return n[s]=e,n},{})}var Gbe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,CV(typeof t!="number"?t:SV(t,Ix))};function Wbe(e){var t,n=e.state,s=e.name,r=e.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Oo(n.placement),c=aP(l),u=[xr,wi].indexOf(l)>=0,d=u?"height":"width";if(!(!i||!o)){var h=Gbe(r.padding,n),p=tP(i),x=c==="y"?pr:xr,v=c==="y"?vi:wi,j=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],b=o[c]-n.rects.reference[c],N=$x(i),w=N?c==="y"?N.clientHeight||0:N.clientWidth||0:0,S=j/2-b/2,_=h[x],k=w-p[d]-h[v],T=w/2-p[d]/2+S,A=tp(_,T,k),E=c;n.modifiersData[s]=(t={},t[E]=A,t.centerOffset=A-T,t)}}function Vbe(e){var t=e.state,n=e.options,s=n.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||jV(t.elements.popper,r)&&(t.elements.arrow=r))}const Ybe={name:"arrow",enabled:!0,phase:"main",fn:Wbe,effect:Vbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zf(e){return e.split("-")[1]}var Qbe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kbe(e,t){var n=e.x,s=e.y,r=t.devicePixelRatio||1;return{x:$f(n*r)/r||0,y:$f(s*r)/r||0}}function K6(e){var t,n=e.popper,s=e.popperRect,r=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,h=e.isFixed,p=o.x,x=p===void 0?0:p,v=o.y,j=v===void 0?0:v,b=typeof d=="function"?d({x,y:j}):{x,y:j};x=b.x,j=b.y;var N=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),S=xr,_=pr,k=window;if(u){var T=$x(n),A="clientHeight",E="clientWidth";if(T===Ur(n)&&(T=Td(n),Wl(T).position!=="static"&&l==="absolute"&&(A="scrollHeight",E="scrollWidth")),T=T,r===pr||(r===xr||r===wi)&&i===Ep){_=vi;var M=h&&T===k&&k.visualViewport?k.visualViewport.height:T[A];j-=M-s.height,j*=c?1:-1}if(r===xr||(r===pr||r===vi)&&i===Ep){S=wi;var O=h&&T===k&&k.visualViewport?k.visualViewport.width:T[E];x-=O-s.width,x*=c?1:-1}}var I=Object.assign({position:l},u&&Qbe),D=d===!0?Kbe({x,y:j},Ur(n)):{x,y:j};if(x=D.x,j=D.y,c){var H;return Object.assign({},I,(H={},H[_]=w?"0":"",H[S]=N?"0":"",H.transform=(k.devicePixelRatio||1)<=1?"translate("+x+"px, "+j+"px)":"translate3d("+x+"px, "+j+"px, 0)",H))}return Object.assign({},I,(t={},t[_]=w?j+"px":"",t[S]=N?x+"px":"",t.transform="",t))}function Xbe(e){var t=e.state,n=e.options,s=n.gpuAcceleration,r=s===void 0?!0:s,i=n.adaptive,o=i===void 0?!0:i,l=n.roundOffsets,c=l===void 0?!0:l,u={placement:Oo(t.placement),variation:zf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,K6(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,K6(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Zbe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xbe,data:{}};var Jy={passive:!0};function Jbe(e){var t=e.state,n=e.instance,s=e.options,r=s.scroll,i=r===void 0?!0:r,o=s.resize,l=o===void 0?!0:o,c=Ur(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",n.update,Jy)}),l&&c.addEventListener("resize",n.update,Jy),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Jy)}),l&&c.removeEventListener("resize",n.update,Jy)}}const eve={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Jbe,data:{}};var tve={left:"right",right:"left",bottom:"top",top:"bottom"};function mv(e){return e.replace(/left|right|bottom|top/g,function(t){return tve[t]})}var ave={start:"end",end:"start"};function X6(e){return e.replace(/start|end/g,function(t){return ave[t]})}function nP(e){var t=Ur(e),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function sP(e){return Rf(Td(e)).left+nP(e).scrollLeft}function nve(e,t){var n=Ur(e),s=Td(e),r=n.visualViewport,i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(r){i=r.width,o=r.height;var u=wV();(u||!u&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:o,x:l+sP(e),y:c}}function sve(e){var t,n=Td(e),s=nP(e),r=(t=e.ownerDocument)==null?void 0:t.body,i=Nu(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Nu(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+sP(e),c=-s.scrollTop;return Wl(r||n).direction==="rtl"&&(l+=Nu(n.clientWidth,r?r.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function rP(e){var t=Wl(e),n=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+s)}function _V(e){return["html","body","#document"].indexOf(Uo(e))>=0?e.ownerDocument.body:xi(e)&&rP(e)?e:_V(wN(e))}function ap(e,t){var n;t===void 0&&(t=[]);var s=_V(e),r=s===((n=e.ownerDocument)==null?void 0:n.body),i=Ur(s),o=r?[i].concat(i.visualViewport||[],rP(s)?s:[]):s,l=t.concat(o);return r?l:l.concat(ap(wN(o)))}function Hk(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function rve(e,t){var n=Rf(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Z6(e,t,n){return t===bV?Hk(nve(e,n)):$u(t)?rve(t,n):Hk(sve(Td(e)))}function ive(e){var t=ap(wN(e)),n=["absolute","fixed"].indexOf(Wl(e).position)>=0,s=n&&xi(e)?$x(e):e;return $u(s)?t.filter(function(r){return $u(r)&&jV(r,s)&&Uo(r)!=="body"}):[]}function ove(e,t,n,s){var r=t==="clippingParents"?ive(e):[].concat(t),i=[].concat(r,[n]),o=i[0],l=i.reduce(function(c,u){var d=Z6(e,u,s);return c.top=Nu(d.top,c.top),c.right=Jv(d.right,c.right),c.bottom=Jv(d.bottom,c.bottom),c.left=Nu(d.left,c.left),c},Z6(e,o,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function AV(e){var t=e.reference,n=e.element,s=e.placement,r=s?Oo(s):null,i=s?zf(s):null,o=t.x+t.width/2-n.width/2,l=t.y+t.height/2-n.height/2,c;switch(r){case pr:c={x:o,y:t.y-n.height};break;case vi:c={x:o,y:t.y+t.height};break;case wi:c={x:t.x+t.width,y:l};break;case xr:c={x:t.x-n.width,y:l};break;default:c={x:t.x,y:t.y}}var u=r?aP(r):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case If:c[u]=c[u]-(t[d]/2-n[d]/2);break;case Ep:c[u]=c[u]+(t[d]/2-n[d]/2);break}}return c}function Lp(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=s===void 0?e.placement:s,i=n.strategy,o=i===void 0?e.strategy:i,l=n.boundary,c=l===void 0?Abe:l,u=n.rootBoundary,d=u===void 0?bV:u,h=n.elementContext,p=h===void 0?wg:h,x=n.altBoundary,v=x===void 0?!1:x,j=n.padding,b=j===void 0?0:j,N=CV(typeof b!="number"?b:SV(b,Ix)),w=p===wg?Tbe:wg,S=e.rects.popper,_=e.elements[v?w:p],k=ove($u(_)?_:_.contextElement||Td(e.elements.popper),c,d,o),T=Rf(e.elements.reference),A=AV({reference:T,element:S,placement:r}),E=Hk(Object.assign({},S,A)),M=p===wg?E:T,O={top:k.top-M.top+N.top,bottom:M.bottom-k.bottom+N.bottom,left:k.left-M.left+N.left,right:M.right-k.right+N.right},I=e.modifiersData.offset;if(p===wg&&I){var D=I[r];Object.keys(O).forEach(function(H){var W=[wi,vi].indexOf(H)>=0?1:-1,z=[pr,vi].indexOf(H)>=0?"y":"x";O[H]+=D[z]*W})}return O}function lve(e,t){t===void 0&&(t={});var n=t,s=n.placement,r=n.boundary,i=n.rootBoundary,o=n.padding,l=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?vV:c,d=zf(s),h=d?l?Y6:Y6.filter(function(v){return zf(v)===d}):Ix,p=h.filter(function(v){return u.indexOf(v)>=0});p.length===0&&(p=h);var x=p.reduce(function(v,j){return v[j]=Lp(e,{placement:j,boundary:r,rootBoundary:i,padding:o})[Oo(j)],v},{});return Object.keys(x).sort(function(v,j){return x[v]-x[j]})}function cve(e){if(Oo(e)===J4)return[];var t=mv(e);return[X6(e),t,X6(t)]}function dve(e){var t=e.state,n=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!0:o,c=n.fallbackPlacements,u=n.padding,d=n.boundary,h=n.rootBoundary,p=n.altBoundary,x=n.flipVariations,v=x===void 0?!0:x,j=n.allowedAutoPlacements,b=t.options.placement,N=Oo(b),w=N===b,S=c||(w||!v?[mv(b)]:cve(b)),_=[b].concat(S).reduce(function(Ne,de){return Ne.concat(Oo(de)===J4?lve(t,{placement:de,boundary:d,rootBoundary:h,padding:u,flipVariations:v,allowedAutoPlacements:j}):de)},[]),k=t.rects.reference,T=t.rects.popper,A=new Map,E=!0,M=_[0],O=0;O<_.length;O++){var I=_[O],D=Oo(I),H=zf(I)===If,W=[pr,vi].indexOf(D)>=0,z=W?"width":"height",Q=Lp(t,{placement:I,boundary:d,rootBoundary:h,altBoundary:p,padding:u}),J=W?H?wi:xr:H?vi:pr;k[z]>T[z]&&(J=mv(J));var Y=mv(J),re=[];if(i&&re.push(Q[D]<=0),l&&re.push(Q[J]<=0,Q[Y]<=0),re.every(function(Ne){return Ne})){M=I,E=!1;break}A.set(I,re)}if(E)for(var we=v?3:1,Z=function(de){var be=_.find(function(oe){var Te=A.get(oe);if(Te)return Te.slice(0,de).every(function(ue){return ue})});if(be)return M=be,"break"},ne=we;ne>0;ne--){var pe=Z(ne);if(pe==="break")break}t.placement!==M&&(t.modifiersData[s]._skip=!0,t.placement=M,t.reset=!0)}}const uve={name:"flip",enabled:!0,phase:"main",fn:dve,requiresIfExists:["offset"],data:{_skip:!1}};function J6(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function eR(e){return[pr,wi,vi,xr].some(function(t){return e[t]>=0})}function mve(e){var t=e.state,n=e.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,o=Lp(t,{elementContext:"reference"}),l=Lp(t,{altBoundary:!0}),c=J6(o,s),u=J6(l,r,i),d=eR(c),h=eR(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}const fve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mve};function hve(e,t,n){var s=Oo(e),r=[xr,pr].indexOf(s)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=i[0],l=i[1];return o=o||0,l=(l||0)*r,[xr,wi].indexOf(s)>=0?{x:l,y:o}:{x:o,y:l}}function gve(e){var t=e.state,n=e.options,s=e.name,r=n.offset,i=r===void 0?[0,0]:r,o=vV.reduce(function(d,h){return d[h]=hve(h,t.rects,i),d},{}),l=o[t.placement],c=l.x,u=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[s]=o}const pve={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gve};function xve(e){var t=e.state,n=e.name;t.modifiersData[n]=AV({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const yve={name:"popperOffsets",enabled:!0,phase:"read",fn:xve,data:{}};function bve(e){return e==="x"?"y":"x"}function vve(e){var t=e.state,n=e.options,s=e.name,r=n.mainAxis,i=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!1:o,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,h=n.padding,p=n.tether,x=p===void 0?!0:p,v=n.tetherOffset,j=v===void 0?0:v,b=Lp(t,{boundary:c,rootBoundary:u,padding:h,altBoundary:d}),N=Oo(t.placement),w=zf(t.placement),S=!w,_=aP(N),k=bve(_),T=t.modifiersData.popperOffsets,A=t.rects.reference,E=t.rects.popper,M=typeof j=="function"?j(Object.assign({},t.rects,{placement:t.placement})):j,O=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(T){if(i){var H,W=_==="y"?pr:xr,z=_==="y"?vi:wi,Q=_==="y"?"height":"width",J=T[_],Y=J+b[W],re=J-b[z],we=x?-E[Q]/2:0,Z=w===If?A[Q]:E[Q],ne=w===If?-E[Q]:-A[Q],pe=t.elements.arrow,Ne=x&&pe?tP(pe):{width:0,height:0},de=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:NV(),be=de[W],oe=de[z],Te=tp(0,A[Q],Ne[Q]),ue=S?A[Q]/2-we-Te-be-O.mainAxis:Z-Te-be-O.mainAxis,Oe=S?-A[Q]/2+we+Te+oe+O.mainAxis:ne+Te+oe+O.mainAxis,xe=t.elements.arrow&&$x(t.elements.arrow),le=xe?_==="y"?xe.clientTop||0:xe.clientLeft||0:0,Fe=(H=I?.[_])!=null?H:0,ke=J+ue-Fe-le,He=J+Oe-Fe,Xe=tp(x?Jv(Y,ke):Y,J,x?Nu(re,He):re);T[_]=Xe,D[_]=Xe-J}if(l){var it,ze=_==="x"?pr:xr,at=_==="x"?vi:wi,Ve=T[k],Ze=k==="y"?"height":"width",Je=Ve+b[ze],Ue=Ve-b[at],_e=[pr,xr].indexOf(N)!==-1,he=(it=I?.[k])!=null?it:0,ie=_e?Je:Ve-A[Ze]-E[Ze]-he+O.altAxis,G=_e?Ve+A[Ze]+E[Ze]-he-O.altAxis:Ue,X=x&&_e?qbe(ie,Ve,G):tp(x?ie:Je,Ve,x?G:Ue);T[k]=X,D[k]=X-Ve}t.modifiersData[s]=D}}const wve={name:"preventOverflow",enabled:!0,phase:"main",fn:vve,requiresIfExists:["offset"]};function jve(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Nve(e){return e===Ur(e)||!xi(e)?nP(e):jve(e)}function Cve(e){var t=e.getBoundingClientRect(),n=$f(t.width)/e.offsetWidth||1,s=$f(t.height)/e.offsetHeight||1;return n!==1||s!==1}function Sve(e,t,n){n===void 0&&(n=!1);var s=xi(t),r=xi(t)&&Cve(t),i=Td(t),o=Rf(e,r,n),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!n)&&((Uo(t)!=="body"||rP(i))&&(l=Nve(t)),xi(t)?(c=Rf(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=sP(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function _ve(e){var t=new Map,n=new Set,s=[];e.forEach(function(i){t.set(i.name,i)});function r(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return e.forEach(function(i){n.has(i.name)||r(i)}),s}function Ave(e){var t=_ve(e);return Rbe.reduce(function(n,s){return n.concat(t.filter(function(r){return r.phase===s}))},[])}function Tve(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function kve(e){var t=e.reduce(function(n,s){var r=n[s.name];return n[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var tR={placement:"bottom",modifiers:[],strategy:"absolute"};function aR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Eve(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,s=n===void 0?[]:n,r=t.defaultOptions,i=r===void 0?tR:r;return function(l,c,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},tR,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},h=[],p=!1,x={state:d,setOptions:function(N){var w=typeof N=="function"?N(d.options):N;j(),d.options=Object.assign({},i,d.options,w),d.scrollParents={reference:$u(l)?ap(l):l.contextElement?ap(l.contextElement):[],popper:ap(c)};var S=Ave(kve([].concat(s,d.options.modifiers)));return d.orderedModifiers=S.filter(function(_){return _.enabled}),v(),x.update()},forceUpdate:function(){if(!p){var N=d.elements,w=N.reference,S=N.popper;if(aR(w,S)){d.rects={reference:Sve(w,$x(S),d.options.strategy==="fixed"),popper:tP(S)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(O){return d.modifiersData[O.name]=Object.assign({},O.data)});for(var _=0;_<d.orderedModifiers.length;_++){if(d.reset===!0){d.reset=!1,_=-1;continue}var k=d.orderedModifiers[_],T=k.fn,A=k.options,E=A===void 0?{}:A,M=k.name;typeof T=="function"&&(d=T({state:d,options:E,name:M,instance:x})||d)}}}},update:Tve(function(){return new Promise(function(b){x.forceUpdate(),b(d)})}),destroy:function(){j(),p=!0}};if(!aR(l,c))return x;x.setOptions(u).then(function(b){!p&&u.onFirstUpdate&&u.onFirstUpdate(b)});function v(){d.orderedModifiers.forEach(function(b){var N=b.name,w=b.options,S=w===void 0?{}:w,_=b.effect;if(typeof _=="function"){var k=_({state:d,name:N,instance:x,options:S}),T=function(){};h.push(k||T)}})}function j(){h.forEach(function(b){return b()}),h=[]}return x}}var Lve=[eve,yve,Zbe,Ube,pve,uve,wve,Ybe,fve],Pve=Eve({defaultModifiers:Lve});function nR(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Dve(e){return typeof e=="function"?e():e}const Ove=f.forwardRef(function(t,n){const{children:s,container:r,disablePortal:i=!1}=t,[o,l]=f.useState(null),c=Fo(f.isValidElement(s)?eq(s):null,n);if(is(()=>{i||l(Dve(r)||document.body)},[r,i]),is(()=>{if(o&&!i)return nR(n,o),()=>{nR(n,null)}},[n,o,i]),i){if(f.isValidElement(s)){const u={ref:c};return f.cloneElement(s,u)}return s}return o&&Gi.createPortal(s,o)});function Mve(e){return Yn("MuiPopper",e)}An("MuiPopper",["root"]);function Ive(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function qk(e){return typeof e=="function"?e():e}function $ve(e){return e.nodeType!==void 0}const Rve=e=>{const{classes:t}=e;return Vn({root:["root"]},Mve,t)},zve={},Fve=f.forwardRef(function(t,n){const{anchorEl:s,children:r,direction:i,disablePortal:o,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:p={},slots:x={},TransitionProps:v,ownerState:j,...b}=t,N=f.useRef(null),w=Fo(N,n),S=f.useRef(null),_=Fo(S,h),k=f.useRef(_);is(()=>{k.current=_},[_]),f.useImperativeHandle(h,()=>S.current,[]);const T=Ive(u,i),[A,E]=f.useState(T),[M,O]=f.useState(qk(s));f.useEffect(()=>{S.current&&S.current.forceUpdate()}),f.useEffect(()=>{s&&O(qk(s))},[s]),is(()=>{if(!M||!c)return;const z=Y=>{E(Y.placement)};let Q=[{name:"preventOverflow",options:{altBoundary:o}},{name:"flip",options:{altBoundary:o}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Y})=>{z(Y)}}];l!=null&&(Q=Q.concat(l)),d&&d.modifiers!=null&&(Q=Q.concat(d.modifiers));const J=Pve(M,N.current,{placement:T,...d,modifiers:Q});return k.current(J),()=>{J.destroy(),k.current(null)}},[M,o,l,c,d,T]);const I={placement:A};v!==null&&(I.TransitionProps=v);const D=Rve(t),H=x.root??"div",W=Ul({elementType:H,externalSlotProps:p.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:w},ownerState:t,className:D.root});return a.jsx(H,{...W,children:typeof r=="function"?r(I):r})}),Uve=f.forwardRef(function(t,n){const{anchorEl:s,children:r,container:i,direction:o="ltr",disablePortal:l=!1,keepMounted:c=!1,modifiers:u,open:d,placement:h="bottom",popperOptions:p=zve,popperRef:x,style:v,transition:j=!1,slotProps:b={},slots:N={},...w}=t,[S,_]=f.useState(!0),k=()=>{_(!1)},T=()=>{_(!0)};if(!c&&!d&&(!j||S))return null;let A;if(i)A=i;else if(s){const O=qk(s);A=O&&$ve(O)?pk(O).body:pk(null).body}const E=!d&&c&&(!j||S)?"none":void 0,M=j?{in:d,onEnter:k,onExited:T}:void 0;return a.jsx(Ove,{disablePortal:l,container:A,children:a.jsx(Fve,{anchorEl:s,direction:o,disablePortal:l,modifiers:u,ref:n,open:j?!S:d,placement:h,popperOptions:p,popperRef:x,slotProps:b,slots:N,...w,style:{position:"fixed",top:0,left:0,display:E,...v},TransitionProps:M,children:r})})}),Bve=ma(Uve,{name:"MuiPopper",slot:"Root"})({}),Hve=f.forwardRef(function(t,n){const s=yx(),r=Nd({props:t,name:"MuiPopper"}),{anchorEl:i,component:o,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:h,modifiers:p,open:x,placement:v,popperOptions:j,popperRef:b,transition:N,slots:w,slotProps:S,..._}=r,k=w?.root??l?.Root,T={anchorEl:i,container:u,disablePortal:d,keepMounted:h,modifiers:p,open:x,placement:v,popperOptions:j,popperRef:b,transition:N,..._};return a.jsx(Bve,{as:o,direction:s?"rtl":"ltr",slots:{root:k},slotProps:S??c,...T,ref:n})});function qve(e){const{children:t,defer:n=!1,fallback:s=null}=e,[r,i]=f.useState(!1);return is(()=>{n||i(!0)},[n]),f.useEffect(()=>{n&&i(!0)},[n]),r?t:s}function sR(e){let t,n;const s=()=>{n=null,e(...t)};function r(...i){t=i,n||(n=requestAnimationFrame(s))}return r.clear=()=>{n&&(cancelAnimationFrame(n),n=null)},r}function Gve(){const e=Ka(),t=qt(e,_W),n=qt(e,Yo);return t!==void 0?"polar":n!==void 0?"cartesian":"none"}const Wve=["trigger","position","anchor","classes","children"],rR=()=>!1;function Vve(e,t,n){return n?rR:e==="item"?rpe:t==="polar"?Nbe:t==="cartesian"?dpe:rR}const Yve=ma(Hve,{name:"MuiChartsTooltip",slot:"Root"})(({theme:e})=>({pointerEvents:"none",zIndex:e.zIndex.modal}));function Qve(e){const t=Ti({props:e,name:"MuiChartsTooltipContainer"}),{trigger:n="axis",position:s,anchor:r="pointer",classes:i,children:o}=t,l=xa(t,Wve),c=U4(),u=vN(i),d=ybe(),h=wbe(),p=f.useRef(null),x=Ij(()=>({x:0,y:0})),v=Gve(),j=Ka(),b=qt(j,ype),N=qt(j,Vve(n,v,b)),S=qt(j,kx)==="keyboard"?"node":r,_=qt(j,n==="item"&&S==="node"?ipe:()=>null,s);f.useEffect(()=>{const M=c.current;if(M===null)return()=>{};if(_!==null){const D=sR(()=>{x.current={x:M.getBoundingClientRect().left+(_?.x??0),y:M.getBoundingClientRect().top+(_?.y??0)},p.current?.update()});return D(),()=>D.clear()}const O=sR((D,H)=>{x.current={x:D,y:H},p.current?.update()}),I=D=>{O(D.clientX,D.clientY)};return M.addEventListener("pointerdown",I),M.addEventListener("pointermove",I),M.addEventListener("pointerenter",I),()=>{M.removeEventListener("pointerdown",I),M.removeEventListener("pointermove",I),M.removeEventListener("pointerenter",I),O.clear()}},[c,x,_]);const k=f.useMemo(()=>({getBoundingClientRect:()=>({x:x.current.x,y:x.current.y,top:x.current.y,left:x.current.x,right:x.current.x,bottom:x.current.y,width:0,height:0,toJSON:()=>""})}),[x]),T=d?.pointerType==="mouse"||h,A=d?.pointerType==="touch"||!h,E=f.useMemo(()=>[{name:"offset",options:{offset:()=>A?[0,64]:[0,8]}},...T?[]:[{name:"flip",options:{fallbackPlacements:["top-end","top-start","bottom-end","bottom"]}}],{name:"preventOverflow",options:{altAxis:!0}}],[T,A]);return n==="none"?null:a.jsx(qve,{children:N&&a.jsx(Yve,et({},l,{className:u?.root,open:N,placement:l.placement??s??(T?"right-start":"top"),popperRef:p,anchorEl:k,modifiers:E,children:o}))})}function Kve(e){const{classes:t,trigger:n="axis"}=e,s=vN(t);return a.jsx(Qve,et({},e,{classes:t,children:n==="axis"?a.jsx(_be,{classes:s}):a.jsx(gbe,{classes:s})}))}const Xve=e=>({type:"series",color:e.color,label:e.label,seriesId:e.seriesId,itemId:e.itemId});function Zve(e){return Yn("MuiChartsLegend",e)}const Jve=e=>{const{classes:t,direction:n}=e;return Vn({root:["root",n],item:["item"],mark:["mark"],label:["label"],series:["series"]},Zve,t)},iR=An("MuiChartsLegend",["root","item","series","mark","label","vertical","horizontal"]),ewe=["slots","slotProps"],twe=["ownerState"],awe=(e,t,n,s)=>{function r(i,o){const l=Ti({props:i,name:e}),c=typeof n.defaultProps=="function"?n.defaultProps(l):n.defaultProps??{},u=Du(c,l),d=u,{slots:h,slotProps:p}=d,x=xa(d,ewe),v=Vo(),j=n.classesResolver?.(u,v),b=h?.[t]??s,N=n.propagateSlots&&!h?.[t],w=Ul({elementType:b,externalSlotProps:p?.[t],additionalProps:et({},x,{classes:j},N&&{slots:h,slotProps:p}),ownerState:{}}),S=xa(w,twe),_=et({},S);for(const k of n.omitProps??[])delete _[k];return a.jsx(b,et({},_,{ref:o}))}return f.forwardRef(r)};function nwe(e){return Yn("MuiChartsLabel",e)}An("MuiChartsLabel",["root"]);const swe=e=>Vn({root:["root"]},nwe,e.classes),rwe=["children","className","classes"],iwe=mV("MuiChartsLabel",{classesResolver:swe},function(t,n){const{children:s,className:r,classes:i}=t,o=xa(t,rwe);return a.jsx("span",et({className:It(i?.root,r),ref:n},o,{children:s}))}),owe=["direction","onItemClick","className","classes"],lwe=ma("ul",{name:"MuiChartsLegend",slot:"Root"})(({ownerState:e,theme:t})=>et({},t.typography.caption,{color:(t.vars||t).palette.text.primary,lineHeight:"100%",display:"flex",flexDirection:e.direction==="vertical"?"column":"row",alignItems:e.direction==="vertical"?void 0:"center",flexShrink:0,gap:t.spacing(2),listStyleType:"none",paddingInlineStart:0,marginBlock:t.spacing(1),marginInline:t.spacing(1),flexWrap:"wrap",li:{display:e.direction==="horizontal"?"inline-flex":void 0},[`button.${iR.series}`]:{background:"none",border:"none",padding:0,fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",letterSpacing:"inherit",color:"inherit"},[`& .${iR.series}`]:{display:e.direction==="vertical"?"flex":"inline-flex",alignItems:"center",gap:t.spacing(1)},gridArea:"legend"})),cwe=awe("MuiChartsLegend","legend",{defaultProps:{direction:"horizontal"},omitProps:["position"],classesResolver:Jve},f.forwardRef(function(t,n){const s=Txe(),{onItemClick:r,className:i,classes:o}=t,l=xa(t,owe);if(s.items.length===0)return null;const c=r?"button":"div";return a.jsx(lwe,et({className:It(o?.root,i),ref:n},l,{ownerState:t,children:s.items.map((u,d)=>a.jsx("li",{className:o?.item,"data-series":u.id,children:a.jsxs(c,{className:o?.series,role:r?"button":void 0,type:r?"button":void 0,onClick:r?(h=>r(h,Xve(u),d)):void 0,children:[a.jsx(Zv,{className:o?.mark,color:u.color,type:u.markType}),a.jsx(iwe,{className:o?.label,children:u.label})]})},u.id))}))}));function dwe(e){return Yn("MuiChartsAxisHighlight",e)}An("MuiChartsAxisHighlight",["root"]);const ew=ma("path",{name:"MuiChartsAxisHighlight",slot:"Root"})(({theme:e})=>({pointerEvents:"none",variants:[{props:{axisHighlight:"band"},style:et({fill:"white",fillOpacity:.1},e.applyStyles("light",{fill:"gray"}))},{props:{axisHighlight:"line"},style:et({strokeDasharray:"5 2",stroke:"#ffffff"},e.applyStyles("light",{stroke:"#000000"}))}]}));function uwe(e){const{type:t,classes:n}=e,{left:s,width:r}=Ei(),i=Ka(),o=qt(i,vpe),l=qt(i,Zs);return o.length===0?null:o.map(({axisId:c,value:u})=>{const h=l.axis[c].scale,p=rh(h),x=t==="band"&&u!==null&&vs(h);return a.jsxs(f.Fragment,{children:[x&&h(u)!==void 0&&a.jsx(ew,{d:`M ${s} ${h(u)-(h.step()-h.bandwidth())/2} l 0 ${h.step()} l ${r} 0 l 0 ${-h.step()} Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&u!==null&&a.jsx(ew,{d:`M ${s} ${p(u)} L ${s+r} ${p(u)}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${u}`)})}function mwe(e){const{type:t,classes:n}=e,{top:s,height:r}=Ei(),i=Ka(),o=qt(i,bpe),l=qt(i,Xs);return o.length===0?null:o.map(({axisId:c,value:u})=>{const h=l.axis[c].scale,p=rh(h),x=t==="band"&&u!==null&&vs(h);return a.jsxs(f.Fragment,{children:[x&&h(u)!==void 0&&a.jsx(ew,{d:`M ${h(u)-(h.step()-h.bandwidth())/2} ${s} l ${h.step()} 0 l 0 ${r} l ${-h.step()} 0 Z`,className:n.root,ownerState:{axisHighlight:"band"}}),t==="line"&&u!==null&&a.jsx(ew,{d:`M ${p(u)} ${s} L ${p(u)} ${s+r}`,className:n.root,ownerState:{axisHighlight:"line"}})]},`${c}-${u}`)})}const fwe=()=>Vn({root:["root"]},dwe);function hwe(e){const{x:t,y:n}=e,s=fwe();return a.jsxs(f.Fragment,{children:[t&&t!=="none"&&a.jsx(mwe,{type:t,classes:s}),n&&n!=="none"&&a.jsx(uwe,{type:n,classes:s})]})}function gwe(e){const{id:t,offset:n}=e,{left:s,top:r,width:i,height:o}=Ei(),l=et({top:0,right:0,bottom:0,left:0},n);return a.jsx("clipPath",{id:t,children:a.jsx("rect",{x:s-l.left,y:r-l.top,width:i+l.left+l.right,height:o+l.top+l.bottom})})}const pwe=parseInt(f.version,10),xwe=["x","y","id","classes","color","shape"];function ywe(e){return Yn("MuiHighlightElement",e)}An("MuiHighlightElement",["root"]);const bwe=e=>{const{classes:t,id:n}=e,s={root:["root",`series-${n}`]};return Vn(s,ywe,t)};function vwe(e){const{x:t,y:n,color:s,shape:r}=e,i=xa(e,xwe),o=bwe(e),l=r==="circle"?"circle":"path",c=r==="circle"?{cx:0,cy:0,r:i.r===void 0?5:i.r}:{d:M4(nW[qW(r)])()},u=pwe>18?{transformOrigin:`${t} ${n}`}:{"transform-origin":`${t} ${n}`};return a.jsx(l,et({pointerEvents:"none",className:o.root,transform:`translate(${t} ${n})`,fill:s},u,c,i))}const wwe=["slots","slotProps"];function jwe(e){const{slots:t,slotProps:n}=e,s=xa(e,wwe),r=Ox(),{xAxis:i,xAxisIds:o}=wr(),{yAxis:l,yAxisIds:c}=jr(),{instance:u}=Wr(),d=Ka(),h=qt(d,MG);if(h.length===0||r===void 0)return null;const{series:p,stackingGroups:x}=r,v=o[0],j=c[0],b=t?.lineHighlight??vwe;return a.jsx("g",et({},s,{children:h.flatMap(({dataIndex:N,axisId:w})=>x.flatMap(({ids:S})=>S.flatMap(_=>{const{xAxisId:k=v,yAxisId:T=j,stackedData:A,data:E,disableHighlight:M,shape:O="circle"}=p[_];if(M||E[N]==null||w!==k)return null;const I=rh(i[k].scale),D=l[T].scale,H=i[k].data;if(H===void 0)throw new Error(`MUI X Charts: ${k===Rj?"The first `xAxis`":`The x-axis with id "${k}"`} should have data property to be able to display a line plot.`);const W=I(H[N]),z=D(A[N][1]);if(!u.isPointInside(W,z))return null;const Q=W4(p[_],i[k],l[T]);return a.jsx(b,et({id:_,color:Q(N),x:W,y:z,shape:O},n?.lineHighlight),`${_}`)})))}))}function Nwe(e){return Yn("MuiChartsGrid",e)}const oR=An("MuiChartsGrid",["root","line","horizontalLine","verticalLine"]),Cwe=ma("g",{name:"MuiChartsGrid",slot:"Root",overridesResolver:(e,t)=>[{[`&.${oR.verticalLine}`]:t.verticalLine},{[`&.${oR.horizontalLine}`]:t.horizontalLine},t.root]})({}),TV=ma("line",{name:"MuiChartsGrid",slot:"Line"})(({theme:e})=>({stroke:(e.vars||e).palette.divider,shapeRendering:"crispEdges",strokeWidth:1}));function Swe(e){const{instance:t}=Wr(),{axis:n,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=n,u=yN({scale:o,tickNumber:l,tickInterval:c,direction:"x"});return a.jsx(f.Fragment,{children:u.map(({value:d,offset:h})=>t.isXInside(h)?a.jsx(TV,{y1:s,y2:r,x1:h,x2:h,className:i.verticalLine},`vertical-${d?.getTime?.()??d}`):null)})}function _we(e){const{instance:t}=Wr(),{axis:n,start:s,end:r,classes:i}=e,{scale:o,tickNumber:l,tickInterval:c}=n,u=yN({scale:o,tickNumber:l,tickInterval:c,direction:"y"});return a.jsx(f.Fragment,{children:u.map(({value:d,offset:h})=>t.isYInside(h)?a.jsx(TV,{y1:h,y2:h,x1:s,x2:r,className:i.horizontalLine},`horizontal-${d?.getTime?.()??d}`):null)})}const Awe=["vertical","horizontal"],Twe=({classes:e})=>Vn({root:["root"],verticalLine:["line","verticalLine"],horizontalLine:["line","horizontalLine"]},Nwe,e);function kwe(e){const t=Ti({props:e,name:"MuiChartsGrid"}),n=Ei(),{vertical:s,horizontal:r}=t,i=xa(t,Awe),{xAxis:o,xAxisIds:l}=wr(),{yAxis:c,yAxisIds:u}=jr(),d=Twe(t),h=c[u[0]],p=o[l[0]];return a.jsxs(Cwe,et({},i,{className:d.root,children:[s&&a.jsx(Swe,{axis:p,start:n.top,end:n.height+n.top,classes:d}),r&&a.jsx(_we,{axis:h,start:n.left,end:n.width+n.left,classes:d})]}))}const Ewe=["message"],Lwe=ma("text")(({theme:e})=>et({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Pwe(e){const{message:t}=e,n=xa(e,Ewe),{top:s,left:r,height:i,width:o}=Ei(),{localeText:l}=$W();return a.jsx(Lwe,et({x:r+o/2,y:s+i/2},n,{children:t??l.loading}))}const Dwe=["message"],Owe=ma("text")(({theme:e})=>et({},e.typography.body2,{stroke:"none",fill:(e.vars||e).palette.text.primary,shapeRendering:"crispEdges",textAnchor:"middle",dominantBaseline:"middle"}));function Mwe(e){const{message:t}=e,n=xa(e,Dwe),{top:s,left:r,height:i,width:o}=Ei(),{localeText:l}=$W();return a.jsx(Owe,et({x:r+o/2,y:s+i/2},n,{children:t??l.noData}))}function Iwe(){const e=fN();return Object.values(e).every(t=>{if(!t)return!0;const{series:n,seriesOrder:s}=t;return s.every(r=>{const i=n[r];return i.type==="sankey"?i.data.links.length===0:i.data.length===0})})}function $we(e){const t=Iwe();if(e.loading){const n=e.slots?.loadingOverlay??Pwe;return a.jsx(n,et({},e.slotProps?.loadingOverlay))}if(t){const n=e.slots?.noDataOverlay??Mwe;return a.jsx(n,et({},e.slotProps?.noDataOverlay))}return null}const Rwe=[Lx,Ex,_x,nh,Px,nN],zwe=["xAxis","yAxis","series","width","height","margin","colors","dataset","sx","onAreaClick","onLineClick","onMarkClick","axisHighlight","disableLineItemHighlight","hideLegend","grid","children","slots","slotProps","skipAnimation","loading","highlightedItem","onHighlightChange","className","showToolbar","brushConfig"],Fwe=e=>{const{xAxis:t,yAxis:n,series:s,width:r,height:i,margin:o,colors:l,dataset:c,sx:u,onAreaClick:d,onLineClick:h,onMarkClick:p,axisHighlight:x,disableLineItemHighlight:v,grid:j,children:b,slots:N,slotProps:w,skipAnimation:S,loading:_,highlightedItem:k,onHighlightChange:T,className:A,brushConfig:E}=e,M=xa(e,zwe),I=`${Pj()}-clip-path`,D=f.useMemo(()=>s.map(be=>et({disableHighlight:!!v,type:"line"},be)),[v,s]),H=et({},M,{series:D,width:r,height:i,margin:o,colors:l,dataset:c,xAxis:t??[{id:Rj,scaleType:"point",data:Array.from({length:Math.max(...s.map(be=>(be.data??c??[]).length))},(be,oe)=>oe)}],yAxis:n,highlightedItem:k,onHighlightChange:T,disableAxisListener:w?.tooltip?.trigger!=="axis"&&x?.x==="none"&&x?.y==="none",className:A,skipAnimation:S,brushConfig:E,plugins:Rwe}),W={vertical:j?.vertical,horizontal:j?.horizontal},z={clipPath:`url(#${I})`},Q={id:I},J={slots:N,slotProps:w,onItemClick:d},Y={slots:N,slotProps:w,onItemClick:h},re={slots:N,slotProps:w,onItemClick:p,skipAnimation:S},we={slots:N,slotProps:w,loading:_},Z={slots:N,slotProps:w},ne=et({x:"line"},x),pe={slots:N,slotProps:w},Ne={slots:N,slotProps:w};return{chartsWrapperProps:{sx:u,legendPosition:e.slotProps?.legend?.position,legendDirection:e.slotProps?.legend?.direction,hideLegend:e.hideLegend??!1},chartContainerProps:H,gridProps:W,clipPathProps:Q,clipPathGroupProps:z,areaPlotProps:J,linePlotProps:Y,markPlotProps:re,overlayProps:we,chartsAxisProps:Z,axisHighlightProps:ne,lineHighlightPlotProps:pe,legendProps:Ne,children:b}};function Uwe(e,t,n,s,r,i,o,l,c,u,d,h=1/0,p=1){const x=s.copy(),v=r.copy();x.range([0,1]),v.range([0,1]);const j=function(E){const M=x(n[E].x),O=v(n[E].y);return M>=i&&M<=o&&O>=l&&O<=c},b=s.range()[1]-s.range()[0],N=r.range()[1]-r.range()[0],w=b*b,S=N*N;function _(A,E){return w*A*A+S*E*E}const k=x(lR(s,u,A=>n[A]?.x)),T=v(lR(r,d,A=>n[A]?.y));return e.neighbors(k,T,p,h!=null?h*h:1/0,j,_)}function lR(e,t,n){if(vs(e)){const s=e.bandwidth()===0?Math.floor((t-Math.min(...e.range())+e.step()/2)/e.step()):Math.floor((t-Math.min(...e.range()))/e.step());return n(s)}return e.invert(t)}const jN=({svgRef:e,params:t,store:n,instance:s})=>{const{disableVoronoi:r,voronoiMaxRadius:i,onItemClick:o}=t,l=qt(n,vr),{axis:c,axisIds:u}=qt(n,Xs),{axis:d,axisIds:h}=qt(n,Zs),p=qt(n,fG),{series:x,seriesOrder:v}=qt(n,yn)?.scatter??{},j=qt(n,p?qge:Gge),b=u[0],N=h[0];is(()=>{n.set("voronoi",{isVoronoiEnabled:!r})},[n,r]),f.useEffect(()=>{if(e.current===null||r)return;const _=e.current;function k(W){const z=Tp(_,W);if(!s.isPointInside(z.x,z.y))return"outside-chart";let Q;for(const J of v??[]){const Y=(x??{})[J],re=j.get(J);if(!re)continue;const we=Y.xAxisId??b,Z=Y.yAxisId??N,ne=T6(n.getSnapshot(),we),pe=T6(n.getSnapshot(),Z),Ne=i==="item"?Y.markerSize:i,de=(ne?.start??0)/100,be=(ne?.end??100)/100,oe=(pe?.start??0)/100,Te=(pe?.end??100)/100,ue=c[we].scale,Oe=d[Z].scale,xe=Uwe(re,l,Y.data,ue,Oe,de,be,oe,Te,z.x,z.y,Ne)[0];if(xe===void 0)continue;const le=Y.data[xe],Fe=ue(le.x),ke=Oe(le.y),He=(Fe-z.x)**2+(ke-z.y)**2;(Q===void 0||He<Q.distanceSq)&&(Q={dataIndex:xe,seriesId:J,distanceSq:He})}return Q===void 0?"no-point-found":{seriesId:Q.seriesId,dataIndex:Q.dataIndex}}const T=s.addInteractionListener("moveEnd",W=>{W.detail.activeGestures.pan||(s.cleanInteraction?.(),s.clearHighlight?.())}),A=s.addInteractionListener("panEnd",W=>{W.detail.activeGestures.move||(s.cleanInteraction?.(),s.clearHighlight?.())}),E=s.addInteractionListener("quickPressEnd",W=>{!W.detail.activeGestures.move&&!W.detail.activeGestures.pan&&(s.cleanInteraction?.(),s.clearHighlight?.())}),M=W=>{const z=k(W.detail.srcEvent);if(z==="outside-chart"){s.cleanInteraction?.(),s.clearHighlight?.();return}if(z==="outside-voronoi-max-radius"||z==="no-point-found"){s.removeItemInteraction?.(),s.clearHighlight?.();return}const{seriesId:Q,dataIndex:J}=z;s.setItemInteraction?.({type:"scatter",seriesId:Q,dataIndex:J},{interaction:"pointer"}),s.setHighlight?.({seriesId:Q,dataIndex:J})},O=s.addInteractionListener("tap",W=>{const z=k(W.detail.srcEvent);if(typeof z!="string"&&o){const{seriesId:Q,dataIndex:J}=z;o(W.detail.srcEvent,{type:"scatter",seriesId:Q,dataIndex:J})}}),I=s.addInteractionListener("move",M),D=s.addInteractionListener("pan",M),H=s.addInteractionListener("quickPress",M);return()=>{O.cleanup(),I.cleanup(),T.cleanup(),D.cleanup(),A.cleanup(),H.cleanup(),E.cleanup()}},[e,d,c,i,o,r,l,s,v,x,j,b,N,n]);const w=ps(()=>{n.set("voronoi",{isVoronoiEnabled:!0})}),S=ps(()=>{n.set("voronoi",{isVoronoiEnabled:!1})});return{instance:{enableVoronoi:w,disableVoronoi:S}}};jN.getDefaultizedParams=({params:e})=>et({},e,{disableVoronoi:e.disableVoronoi??!e.series.some(t=>t.type==="scatter")});jN.getInitialState=e=>({voronoi:{isVoronoiEnabled:!e.disableVoronoi}});jN.params={disableVoronoi:!0,voronoiMaxRadius:!0,onItemClick:!0};const kV=[Lx,Ex,_x,nh,Px,jN,nN],Bwe=["width","height","margin","children","series","colors","dataset","desc","onAxisClick","highlightedAxis","onHighlightedAxisChange","disableVoronoi","voronoiMaxRadius","onItemClick","disableAxisListener","highlightedItem","onHighlightChange","sx","title","xAxis","yAxis","zAxis","rotationAxis","radiusAxis","skipAnimation","seriesConfig","plugins","localeText","slots","slotProps","experimentalFeatures","enableKeyboardNavigation","brushConfig"],Hwe=(e,t)=>{const n=e,{width:s,height:r,margin:i,children:o,series:l,colors:c,dataset:u,desc:d,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:j,onItemClick:b,disableAxisListener:N,highlightedItem:w,onHighlightChange:S,sx:_,title:k,xAxis:T,yAxis:A,zAxis:E,rotationAxis:M,radiusAxis:O,skipAnimation:I,seriesConfig:D,plugins:H,localeText:W,slots:z,slotProps:Q,experimentalFeatures:J,enableKeyboardNavigation:Y,brushConfig:re}=n,we=xa(n,Bwe),Z=et({title:k,desc:d,sx:_,ref:t},we);return{chartDataProviderProps:{margin:i,series:l,colors:c,dataset:u,disableAxisListener:N,highlightedItem:w,onHighlightChange:S,onAxisClick:h,highlightedAxis:p,onHighlightedAxisChange:x,disableVoronoi:v,voronoiMaxRadius:j,onItemClick:b,xAxis:T,yAxis:A,zAxis:E,rotationAxis:M,radiusAxis:O,skipAnimation:I,width:s,height:r,localeText:W,seriesConfig:D,experimentalFeatures:J,enableKeyboardNavigation:Y,brushConfig:re,plugins:H??kV,slots:z,slotProps:Q},chartsSurfaceProps:Z,children:o}};function cR(e){try{return e.matches(":focus-visible")}catch{}return!1}class tw{static create(){return new tw}static use(){const t=Ij(tw.create).current,[n,s]=f.useState(!1);return t.shouldMount=n,t.setShouldMount=s,f.useEffect(t.mountEffect,[n]),t}constructor(){this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}mount(){return this.mounted||(this.mounted=Gwe(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}mountEffect=()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())};start(...t){this.mount().then(()=>this.ref.current?.start(...t))}stop(...t){this.mount().then(()=>this.ref.current?.stop(...t))}pulsate(...t){this.mount().then(()=>this.ref.current?.pulsate(...t))}}function qwe(){return tw.use()}function Gwe(){let e,t;const n=new Promise((s,r)=>{e=s,t=r});return n.resolve=e,n.reject=t,n}class iP{static create(){return new iP}currentId=null;start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)};disposeEffect=()=>this.clear}function Wwe(){const e=Ij(iP.create).current;return iq(e.disposeEffect),e}function Vwe(e){const{className:t,classes:n,pulsate:s=!1,rippleX:r,rippleY:i,rippleSize:o,in:l,onExited:c,timeout:u}=e,[d,h]=f.useState(!1),p=It(t,n.ripple,n.rippleVisible,s&&n.ripplePulsate),x={width:o,height:o,top:-(o/2)+i,left:-(o/2)+r},v=It(n.child,d&&n.childLeaving,s&&n.childPulsate);return!l&&!d&&h(!0),f.useEffect(()=>{if(!l&&c!=null){const j=setTimeout(c,u);return()=>{clearTimeout(j)}}},[c,l,u]),a.jsx("span",{className:p,style:x,children:a.jsx("span",{className:v})})}const ui=An("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Gk=550,Ywe=80,Qwe=xx`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,Kwe=xx`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,Xwe=xx`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,Zwe=ma("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Jwe=ma(Vwe,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ui.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${Qwe};
    animation-duration: ${Gk}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ui.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ui.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ui.childLeaving} {
    opacity: 0;
    animation-name: ${Kwe};
    animation-duration: ${Gk}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ui.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${Xwe};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,eje=f.forwardRef(function(t,n){const s=Nd({props:t,name:"MuiTouchRipple"}),{center:r=!1,classes:i={},className:o,...l}=s,[c,u]=f.useState([]),d=f.useRef(0),h=f.useRef(null);f.useEffect(()=>{h.current&&(h.current(),h.current=null)},[c]);const p=f.useRef(!1),x=Wwe(),v=f.useRef(null),j=f.useRef(null),b=f.useCallback(_=>{const{pulsate:k,rippleX:T,rippleY:A,rippleSize:E,cb:M}=_;u(O=>[...O,a.jsx(Jwe,{classes:{ripple:It(i.ripple,ui.ripple),rippleVisible:It(i.rippleVisible,ui.rippleVisible),ripplePulsate:It(i.ripplePulsate,ui.ripplePulsate),child:It(i.child,ui.child),childLeaving:It(i.childLeaving,ui.childLeaving),childPulsate:It(i.childPulsate,ui.childPulsate)},timeout:Gk,pulsate:k,rippleX:T,rippleY:A,rippleSize:E},d.current)]),d.current+=1,h.current=M},[i]),N=f.useCallback((_={},k={},T=()=>{})=>{const{pulsate:A=!1,center:E=r||k.pulsate,fakeElement:M=!1}=k;if(_?.type==="mousedown"&&p.current){p.current=!1;return}_?.type==="touchstart"&&(p.current=!0);const O=M?null:j.current,I=O?O.getBoundingClientRect():{width:0,height:0,left:0,top:0};let D,H,W;if(E||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)D=Math.round(I.width/2),H=Math.round(I.height/2);else{const{clientX:z,clientY:Q}=_.touches&&_.touches.length>0?_.touches[0]:_;D=Math.round(z-I.left),H=Math.round(Q-I.top)}if(E)W=Math.sqrt((2*I.width**2+I.height**2)/3),W%2===0&&(W+=1);else{const z=Math.max(Math.abs((O?O.clientWidth:0)-D),D)*2+2,Q=Math.max(Math.abs((O?O.clientHeight:0)-H),H)*2+2;W=Math.sqrt(z**2+Q**2)}_?.touches?v.current===null&&(v.current=()=>{b({pulsate:A,rippleX:D,rippleY:H,rippleSize:W,cb:T})},x.start(Ywe,()=>{v.current&&(v.current(),v.current=null)})):b({pulsate:A,rippleX:D,rippleY:H,rippleSize:W,cb:T})},[r,b,x]),w=f.useCallback(()=>{N({},{pulsate:!0})},[N]),S=f.useCallback((_,k)=>{if(x.clear(),_?.type==="touchend"&&v.current){v.current(),v.current=null,x.start(0,()=>{S(_,k)});return}v.current=null,u(T=>T.length>0?T.slice(1):T),h.current=k},[x]);return f.useImperativeHandle(n,()=>({pulsate:w,start:N,stop:S}),[w,N,S]),a.jsx(Zwe,{className:It(ui.root,i.root,o),ref:j,...l,children:a.jsx(BL,{component:null,exit:!0,children:c})})});function tje(e){return Yn("MuiButtonBase",e)}const aje=An("MuiButtonBase",["root","disabled","focusVisible"]),nje=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:s,classes:r}=e,o=Vn({root:["root",t&&"disabled",n&&"focusVisible"]},tje,r);return n&&s&&(o.root+=` ${s}`),o},sje=ma("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${aje.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),EV=f.forwardRef(function(t,n){const s=Nd({props:t,name:"MuiButtonBase"}),{action:r,centerRipple:i=!1,children:o,className:l,component:c="button",disabled:u=!1,disableRipple:d=!1,disableTouchRipple:h=!1,focusRipple:p=!1,focusVisibleClassName:x,LinkComponent:v="a",onBlur:j,onClick:b,onContextMenu:N,onDragLeave:w,onFocus:S,onFocusVisible:_,onKeyDown:k,onKeyUp:T,onMouseDown:A,onMouseLeave:E,onMouseUp:M,onTouchEnd:O,onTouchMove:I,onTouchStart:D,tabIndex:H=0,TouchRippleProps:W,touchRippleRef:z,type:Q,...J}=s,Y=f.useRef(null),re=qwe(),we=Fo(re.ref,z),[Z,ne]=f.useState(!1);u&&Z&&ne(!1),f.useImperativeHandle(r,()=>({focusVisible:()=>{ne(!0),Y.current.focus()}}),[]);const pe=re.shouldMount&&!d&&!u;f.useEffect(()=>{Z&&p&&!d&&re.pulsate()},[d,p,Z,re]);const Ne=xl(re,"start",A,h),de=xl(re,"stop",N,h),be=xl(re,"stop",w,h),oe=xl(re,"stop",M,h),Te=xl(re,"stop",Je=>{Z&&Je.preventDefault(),E&&E(Je)},h),ue=xl(re,"start",D,h),Oe=xl(re,"stop",O,h),xe=xl(re,"stop",I,h),le=xl(re,"stop",Je=>{cR(Je.target)||ne(!1),j&&j(Je)},!1),Fe=ps(Je=>{Y.current||(Y.current=Je.currentTarget),cR(Je.target)&&(ne(!0),_&&_(Je)),S&&S(Je)}),ke=()=>{const Je=Y.current;return c&&c!=="button"&&!(Je.tagName==="A"&&Je.href)},He=ps(Je=>{p&&!Je.repeat&&Z&&Je.key===" "&&re.stop(Je,()=>{re.start(Je)}),Je.target===Je.currentTarget&&ke()&&Je.key===" "&&Je.preventDefault(),k&&k(Je),Je.target===Je.currentTarget&&ke()&&Je.key==="Enter"&&!u&&(Je.preventDefault(),b&&b(Je))}),Xe=ps(Je=>{p&&Je.key===" "&&Z&&!Je.defaultPrevented&&re.stop(Je,()=>{re.pulsate(Je)}),T&&T(Je),b&&Je.target===Je.currentTarget&&ke()&&Je.key===" "&&!Je.defaultPrevented&&b(Je)});let it=c;it==="button"&&(J.href||J.to)&&(it=v);const ze={};it==="button"?(ze.type=Q===void 0?"button":Q,ze.disabled=u):(!J.href&&!J.to&&(ze.role="button"),u&&(ze["aria-disabled"]=u));const at=Fo(n,Y),Ve={...s,centerRipple:i,component:c,disabled:u,disableRipple:d,disableTouchRipple:h,focusRipple:p,tabIndex:H,focusVisible:Z},Ze=nje(Ve);return a.jsxs(sje,{as:it,className:It(Ze.root,l),ownerState:Ve,onBlur:le,onClick:b,onContextMenu:de,onFocus:Fe,onKeyDown:He,onKeyUp:Xe,onMouseDown:Ne,onMouseLeave:Te,onMouseUp:oe,onDragLeave:be,onTouchEnd:Oe,onTouchMove:xe,onTouchStart:ue,ref:at,tabIndex:u?-1:H,type:Q,...ze,...J,children:[o,pe?a.jsx(eje,{ref:we,center:i,...W}):null]})});function xl(e,t,n,s=!1){return ps(r=>(n&&n(r),s||e[t](r),!0))}function rje(e){return Yn("MuiIconButton",e)}const dR=An("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),ije=e=>{const{classes:t,disabled:n,color:s,edge:r,size:i,loading:o}=e,l={root:["root",o&&"loading",n&&"disabled",s!=="default"&&`color${Wa(s)}`,r&&`edge${Wa(r)}`,`size${Wa(i)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return Vn(l,rje,t)},oje=ma(EV,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.loading&&t.loading,n.color!=="default"&&t[`color${Wa(n.color)}`],n.edge&&t[`edge${Wa(n.edge)}`],t[`size${Wa(n.size)}`]]}})(Ou(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Ou(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(vp()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(vp()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${dR.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${dR.loading}`]:{color:"transparent"}}))),lje=ma("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),cje=f.forwardRef(function(t,n){const s=Nd({props:t,name:"MuiIconButton"}),{edge:r=!1,children:i,className:o,color:l="default",disabled:c=!1,disableFocusRipple:u=!1,size:d="medium",id:h,loading:p=null,loadingIndicator:x,...v}=s,j=Pj(h),b=x??a.jsx(HL,{"aria-labelledby":j,color:"inherit",size:16}),N={...s,edge:r,color:l,disabled:c,disableFocusRipple:u,loading:p,loadingIndicator:b,size:d},w=ije(N);return a.jsxs(oje,{id:p?j:h,className:It(w.root,o),centerRipple:!0,focusRipple:!u,disabled:c||p,ref:n,...v,ownerState:N,children:[typeof p=="boolean"&&a.jsx("span",{className:w.loadingWrapper,style:{display:"contents"},children:a.jsx(lje,{className:w.loadingIndicator,ownerState:N,children:p&&b})}),i]})});function dje(e){return Yn("MuiButton",e)}const Yd=An("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),uje=f.createContext({}),mje=f.createContext(void 0),fje=e=>{const{color:t,disableElevation:n,fullWidth:s,size:r,variant:i,loading:o,loadingPosition:l,classes:c}=e,u={root:["root",o&&"loading",i,`${i}${Wa(t)}`,`size${Wa(r)}`,`${i}Size${Wa(r)}`,`color${Wa(t)}`,n&&"disableElevation",s&&"fullWidth",o&&`loadingPosition${Wa(l)}`],startIcon:["icon","startIcon",`iconSize${Wa(r)}`],endIcon:["icon","endIcon",`iconSize${Wa(r)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},d=Vn(u,dje,c);return{...c,...d}},LV=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],hje=ma(EV,{shouldForwardProp:e=>Q9(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Wa(n.color)}`],t[`size${Wa(n.size)}`],t[`${n.variant}Size${Wa(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,n.loading&&t.loading]}})(Ou(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Yd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Yd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Yd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Yd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(vp()).map(([s])=>({props:{color:s},style:{"--variant-textColor":(e.vars||e).palette[s].main,"--variant-outlinedColor":(e.vars||e).palette[s].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[s].main,.5),"--variant-containedColor":(e.vars||e).palette[s].contrastText,"--variant-containedBg":(e.vars||e).palette[s].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[s].dark,"--variant-textBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[s].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[s].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Yd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Yd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${Yd.loading}`]:{color:"transparent"}}}]}})),gje=ma("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,n.loading&&t.startIconLoadingStart,t[`iconSize${Wa(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...LV]})),pje=ma("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,n.loading&&t.endIconLoadingEnd,t[`iconSize${Wa(n.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...LV]})),xje=ma("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),uR=ma("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),yje=f.forwardRef(function(t,n){const s=f.useContext(uje),r=f.useContext(mje),i=Du(s,t),o=Nd({props:i,name:"MuiButton"}),{children:l,color:c="primary",component:u="button",className:d,disabled:h=!1,disableElevation:p=!1,disableFocusRipple:x=!1,endIcon:v,focusVisibleClassName:j,fullWidth:b=!1,id:N,loading:w=null,loadingIndicator:S,loadingPosition:_="center",size:k="medium",startIcon:T,type:A,variant:E="text",...M}=o,O=Pj(N),I=S??a.jsx(HL,{"aria-labelledby":O,color:"inherit",size:16}),D={...o,color:c,component:u,disabled:h,disableElevation:p,disableFocusRipple:x,fullWidth:b,loading:w,loadingIndicator:I,loadingPosition:_,size:k,type:A,variant:E},H=fje(D),W=(T||w&&_==="start")&&a.jsx(gje,{className:H.startIcon,ownerState:D,children:T||a.jsx(uR,{className:H.loadingIconPlaceholder,ownerState:D})}),z=(v||w&&_==="end")&&a.jsx(pje,{className:H.endIcon,ownerState:D,children:v||a.jsx(uR,{className:H.loadingIconPlaceholder,ownerState:D})}),Q=r||"",J=typeof w=="boolean"?a.jsx("span",{className:H.loadingWrapper,style:{display:"contents"},children:w&&a.jsx(xje,{className:H.loadingIndicator,ownerState:D,children:I})}):null;return a.jsxs(hje,{ownerState:D,className:It(s.className,H.root,d,Q),component:u,disabled:h||w,focusRipple:!x,focusVisibleClassName:It(H.focusVisible,j),ref:n,type:A,id:w?O:N,...M,classes:H,children:[W,_!=="end"&&J,l,_==="end"&&J,z]})}),bje={baseButton:yje,baseIconButton:cje},vje={},wje=et({},bje,vje),jje=f.createContext(null);function Nje(e){const{slots:t,slotProps:n={},defaultSlots:s,children:r}=e,i=f.useMemo(()=>({slots:et({},s,t),slotProps:n}),[s,t,n]);return a.jsx(jje.Provider,{value:i,children:r})}const Cje=["children","localeText","plugins","seriesConfig","slots","slotProps"],Sje=e=>{const t=Ti({props:e,name:"MuiChartDataProvider"}),{children:n,localeText:s,plugins:r=kV,seriesConfig:i,slots:o,slotProps:l}=t,c=xa(t,Cje),u=Vo(),d={plugins:r,seriesConfig:i,pluginParams:et({theme:u.palette.mode},c)};return{children:n,localeText:s,chartProviderProps:d,slots:o,slotProps:l}};function _je(e){const{children:t,localeText:n,chartProviderProps:s,slots:r,slotProps:i}=Sje(e);return a.jsx(D0e,et({},s,{children:a.jsx(Qxe,{localeText:n,children:a.jsx(Nje,{slots:r,slotProps:i,defaultSlots:wje,children:t})})}))}function mR(e){const{isReversed:t,gradientId:n,size:s,direction:r,scale:i,colorMap:o}=e;return s<=0?null:a.jsx("linearGradient",{id:n,x1:"0",x2:"0",y1:"0",y2:"0",[`${r}${t?1:2}`]:`${s}px`,gradientUnits:"userSpaceOnUse",children:o.thresholds.map((l,c)=>{const u=i(l);if(u===void 0)return null;const d=t?1-u/s:u/s;return Number.isNaN(d)?null:a.jsxs(f.Fragment,{children:[a.jsx("stop",{offset:d,stopColor:o.colors[c],stopOpacity:1}),a.jsx("stop",{offset:d,stopColor:o.colors[c+1],stopOpacity:1})]},l.toString()+c)})})}const Aje=10;function fR(e){const{gradientUnits:t,isReversed:n,gradientId:s,size:r,direction:i,scale:o,colorScale:l,colorMap:c}=e,u=[c.min??0,c.max??100],d=u.map(o).filter(v=>v!==void 0);if(d.length!==2)return null;const h=typeof u[0]=="number"?kf(u[0],u[1]):s4(u[0],u[1]),p=Math.round((Math.max(...d)-Math.min(...d))/Aje),x=`${u[0]}-${u[1]}-`;return a.jsx("linearGradient",{id:s,x1:"0",x2:"0",y1:"0",y2:"0",[`${i}${n?1:2}`]:t==="objectBoundingBox"?1:`${r}px`,gradientUnits:t??"userSpaceOnUse",children:Array.from({length:p+1},(v,j)=>{const b=h(j/p);if(b===void 0)return null;const N=o(b);if(N===void 0)return null;const w=n?1-N/r:N/r,S=l(b);return S===null?null:a.jsx("stop",{offset:w,stopColor:S,stopOpacity:1},x+j)})})}const Tje=10,kje=e=>e?{x1:"1",x2:"0",y1:"0",y2:"0"}:{x1:"0",x2:"1",y1:"0",y2:"0"};function L2(e){const{isReversed:t,gradientId:n,colorScale:s,colorMap:r}=e,i=[r.min??0,r.max??100],o=typeof i[0]=="number"?kf(i[0],i[1]):s4(i[0],i[1]),l=Tje,c=`${i[0]}-${i[1]}-`;return a.jsx("linearGradient",et({id:n},kje(t),{gradientUnits:"objectBoundingBox",children:Array.from({length:l+1},(u,d)=>{const h=d/l,p=o(h);if(p===void 0)return null;const x=s(p);return x===null?null:a.jsx("stop",{offset:h,stopColor:x,stopOpacity:1},c+d)})}))}function Eje(){const{top:e,height:t,bottom:n,left:s,width:r,right:i}=Ei(),o=e+t+n,l=s+r+i,c=H4(),u=kxe(),{xAxis:d,xAxisIds:h}=wr(),{yAxis:p,yAxisIds:x}=jr(),{zAxis:v,zAxisIds:j}=F4(),b=x.filter(S=>p[S].colorMap!==void 0),N=h.filter(S=>d[S].colorMap!==void 0),w=j.filter(S=>v[S].colorMap!==void 0);return b.length===0&&N.length===0&&w.length===0?null:a.jsxs("defs",{children:[b.map(S=>{const _=c(S),k=u(S),{colorMap:T,scale:A,colorScale:E,reverse:M}=p[S];return T?.type==="piecewise"?a.jsx(mR,{isReversed:!M,scale:A,colorMap:T,size:o,gradientId:_,direction:"y"},_):T?.type==="continuous"?a.jsxs(f.Fragment,{children:[a.jsx(fR,{isReversed:!M,scale:A,colorScale:E,colorMap:T,size:o,gradientId:_,direction:"y"}),a.jsx(L2,{isReversed:M,colorScale:E,colorMap:T,gradientId:k})]},_):null}),N.map(S=>{const _=c(S),k=u(S),{colorMap:T,scale:A,reverse:E,colorScale:M}=d[S];return T?.type==="piecewise"?a.jsx(mR,{isReversed:E,scale:A,colorMap:T,size:l,gradientId:_,direction:"x"},_):T?.type==="continuous"?a.jsxs(f.Fragment,{children:[a.jsx(fR,{isReversed:E,scale:A,colorScale:M,colorMap:T,size:l,gradientId:_,direction:"x"}),a.jsx(L2,{isReversed:E,colorScale:M,colorMap:T,gradientId:k})]},_):null}),w.map(S=>{const _=u(S),{colorMap:k,colorScale:T}=v[S];return k?.type==="continuous"?a.jsx(L2,{colorScale:T,colorMap:k,gradientId:_},_):null})]})}function Lje(e){return Yn("MuiChartsSurface",e)}const Pje=()=>Vn({root:["root"]},Lje);An("MuiChartsSurface",["root"]);const Dje=["children","className","title","desc"],Oje=ma("svg",{name:"MuiChartsSurface",slot:"Root"})(({ownerState:e,theme:t})=>({width:e.width??"100%",height:e.height??"100%",display:"flex",position:"relative",flexDirection:"column",alignItems:"center",justifyContent:"center",overflow:"hidden",touchAction:e.hasZoom?"pan-y":void 0,userSelect:"none",gridArea:"chart","&:focus":{outline:"none"},"&:focus-visible":{outline:`${(t.vars??t).palette.text.primary} solid 2px`,"&[data-has-focused-item=true]":{outline:"none"}},"& [data-focused=true]":{outline:`${(t.vars??t).palette.text.primary} solid 2px`}})),Mje=f.forwardRef(function(t,n){const s=Ka(),r=qt(s,pme),i=qt(s,xme),o=qt(s,lq),l=qt(s,cq),c=qt(s,tpe),u=qt(s,epe),d=qt(s,Oge),h=U4(),p=Fo(h,n),x=Ti({props:t,name:"MuiChartsSurface"}),{children:v,className:j,title:b,desc:N}=x,w=xa(x,Dje),S=Pje(),_=i>0&&r>0;return a.jsxs(Oje,et({ownerState:{width:o,height:l,hasZoom:d},viewBox:`0 0 ${r} ${i}`,className:It(S.root,j),tabIndex:c?0:void 0,"data-has-focused-item":u||void 0},w,{ref:p,children:[b&&a.jsx("title",{children:b}),N&&a.jsx("desc",{children:N}),a.jsx(Eje,{}),_&&v]}))}),hR=An("MuiChartsToolbar",["root"]),Ije=e=>e?.horizontal==="start"?"start":e?.horizontal==="end"?"end":"center",$je=e=>e?.vertical==="top"?"flex-start":e?.vertical==="bottom"?"flex-end":"center",Rje=(e,t,n)=>e?'"chart"':t==="vertical"?n?.horizontal==="start"?'"legend chart"':'"chart legend"':n?.vertical==="bottom"?`"chart"
            "legend"`:`"legend"
          "chart"`,zje=(e=!1,t="horizontal",n="end",s=void 0)=>{const r=s?"auto":"1fr";return t==="horizontal"||e?r:n==="start"?`auto ${r}`:`${r} auto`},Fje=(e=!1,t="horizontal",n="top")=>t==="vertical"||e?"1fr":n==="bottom"?"1fr auto":"auto 1fr",Uje=ma("div",{name:"MuiChartsWrapper",slot:"Root",shouldForwardProp:e=>dv(e)&&e!=="extendVertically"&&e!=="width"})(({ownerState:e,width:t})=>{const n=zje(e.hideLegend,e.legendDirection,e.legendPosition?.horizontal,t),s=Fje(e.hideLegend,e.legendDirection,e.legendPosition?.vertical),r=Rje(e.hideLegend,e.legendDirection,e.legendPosition);return{variants:[{props:{extendVertically:!0},style:{height:"100%",minHeight:0}}],flex:1,display:"grid",gridTemplateColumns:n,gridTemplateRows:s,gridTemplateAreas:r,[`&:has(.${hR.root})`]:{gridTemplateRows:`auto ${s}`,gridTemplateAreas:`"${n.split(" ").map(()=>"toolbar").join(" ")}"
        ${r}`},[`& .${hR.root}`]:{gridArea:"toolbar",justifySelf:"center"},justifyContent:"safe center",justifyItems:Ije(e.legendPosition),alignItems:$je(e.legendPosition)}});function Bje(e){const{children:t,sx:n,extendVertically:s}=e,r=qxe(),i=Ka(),o=qt(i,lq),l=qt(i,cq);return a.jsx(Uje,{ref:r,ownerState:e,sx:n,extendVertically:s??l===void 0,width:o,children:t})}function Hje(){const e=Ka(),t=qt(e,sN),n=qt(e,rN),s=qt(e,iN);return f.useMemo(()=>t===void 0||n===void 0||s===void 0?null:{seriesType:t,seriesId:n,dataIndex:s},[t,n,s])}const eb=6;function qje(){const e=Vo(),t=Hje(),n=Ox(),{xAxis:s,xAxisIds:r}=wr(),{yAxis:i,yAxisIds:o}=jr();if(t===null||t.seriesType!=="line"||!n)return null;const l=n?.series[t.seriesId],c=l.xAxisId??r[0],u=l.yAxisId??o[0];return a.jsx("rect",{fill:"none",stroke:(e.vars??e).palette.text.primary,strokeWidth:2,x:s[c].scale(s[c].data[t.dataIndex])-eb,y:i[u].scale(l.stackedData[t.dataIndex][1])-eb,width:2*eb,height:2*eb,rx:3,ry:3})}const ih=f.forwardRef(function(t,n){const s=Ti({props:t,name:"MuiLineChart"}),{chartsWrapperProps:r,chartContainerProps:i,gridProps:o,clipPathProps:l,clipPathGroupProps:c,areaPlotProps:u,linePlotProps:d,markPlotProps:h,overlayProps:p,chartsAxisProps:x,axisHighlightProps:v,lineHighlightPlotProps:j,legendProps:b,children:N}=Fwe(s),{chartDataProviderProps:w,chartsSurfaceProps:S}=Hwe(i,n),_=s.slots?.tooltip??Kve,k=s.slots?.toolbar;return a.jsx(_je,et({},w,{children:a.jsxs(Bje,et({},r,{children:[s.showToolbar&&k?a.jsx(k,et({},s.slotProps?.toolbar)):null,!s.hideLegend&&a.jsx(cwe,et({},b)),a.jsxs(Mje,et({},S,{children:[a.jsx(kwe,et({},o)),a.jsxs("g",et({},c,{children:[a.jsx(V0e,et({},u)),a.jsx(rye,et({},d)),a.jsx($we,et({},p)),a.jsx(hwe,et({},v))]})),a.jsx(qje,{}),a.jsx(nbe,et({},x)),a.jsx("g",{"data-drawing-container":!0,children:a.jsx(hye,et({},h))}),a.jsx(jwe,et({},j)),a.jsx(gwe,et({},l)),N]})),!s.loading&&a.jsx(_,et({},s.slotProps?.tooltip))]}))}))});function Gje(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const NN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function oh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function oP(e){return"nodeType"in e}function Js(e){var t,n;return e?oh(e)?e:oP(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function lP(e){const{Document:t}=Js(e);return e instanceof t}function Rx(e){return oh(e)?!1:e instanceof Js(e).HTMLElement}function PV(e){return e instanceof Js(e).SVGElement}function lh(e){return e?oh(e)?e.document:oP(e)?lP(e)?e:Rx(e)||PV(e)?e.ownerDocument:document:document:document}const Ki=NN?f.useLayoutEffect:f.useEffect;function CN(e){const t=f.useRef(e);return Ki(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function Wje(){const e=f.useRef(null),t=f.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Pp(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return Ki(()=>{n.current!==e&&(n.current=e)},t),n}function zx(e,t){const n=f.useRef();return f.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function aw(e){const t=CN(e),n=f.useRef(null),s=f.useCallback(r=>{r!==n.current&&t?.(r,n.current),n.current=r},[]);return[n,s]}function nw(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let P2={};function Fx(e,t){return f.useMemo(()=>{if(t)return t;const n=P2[e]==null?0:P2[e]+1;return P2[e]=n,e+"-"+n},[e,t])}function DV(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const jf=DV(1),Dp=DV(-1);function Vje(e){return"clientX"in e&&"clientY"in e}function SN(e){if(!e)return!1;const{KeyboardEvent:t}=Js(e.target);return t&&e instanceof t}function Yje(e){if(!e)return!1;const{TouchEvent:t}=Js(e.target);return t&&e instanceof t}function sw(e){if(Yje(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Vje(e)?{x:e.clientX,y:e.clientY}:null}const fd=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[fd.Translate.toString(e),fd.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),gR="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Qje(e){return e.matches(gR)?e:e.querySelector(gR)}const Kje={display:"none"};function Xje(e){let{id:t,value:n}=e;return bt.createElement("div",{id:t,style:Kje},n)}function Zje(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bt.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},n)}function Jje(){const[e,t]=f.useState("");return{announce:f.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const OV=f.createContext(null);function eNe(e){const t=f.useContext(OV);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function tNe(){const[e]=f.useState(()=>new Set),t=f.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[f.useCallback(s=>{let{type:r,event:i}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,i)})},[e]),t]}const aNe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},nNe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sNe(e){let{announcements:t=nNe,container:n,hiddenTextDescribedById:s,screenReaderInstructions:r=aNe}=e;const{announce:i,announcement:o}=Jje(),l=Fx("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),eNe(f.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:x}=h;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(h){let{active:p,over:x}=h;i(t.onDragOver({active:p,over:x}))},onDragEnd(h){let{active:p,over:x}=h;i(t.onDragEnd({active:p,over:x}))},onDragCancel(h){let{active:p,over:x}=h;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!c)return null;const d=bt.createElement(bt.Fragment,null,bt.createElement(Xje,{id:s,value:r.draggable}),bt.createElement(Zje,{id:l,announcement:o}));return n?Gi.createPortal(d,n):d}var as;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(as||(as={}));function rw(){}function Ff(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ux(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Xi=Object.freeze({x:0,y:0});function MV(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rNe(e,t){const n=sw(e);if(!n)return"0 0";const s={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function IV(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function iNe(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function pR(e){let{left:t,top:n,height:s,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+s},{x:t+r,y:n+s}]}function $V(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function xR(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Bx=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const r=xR(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=n.get(l);if(c){const u=MV(xR(c),r);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(IV)},oNe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const r=pR(t),i=[];for(const o of s){const{id:l}=o,c=n.get(l);if(c){const u=pR(c),d=r.reduce((p,x,v)=>p+MV(u[v],x),0),h=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:h}})}}return i.sort(IV)};function lNe(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=i-n;if(s<r&&n<i){const c=t.width*t.height,u=e.width*e.height,d=o*l,h=d/(c+u-d);return Number(h.toFixed(4))}return 0}const cNe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const r=[];for(const i of s){const{id:o}=i,l=n.get(o);if(l){const c=lNe(l,t);c>0&&r.push({id:o,data:{droppableContainer:i,value:c}})}}return r.sort(iNe)};function dNe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function RV(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Xi}function uNe(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...n})}}const mNe=uNe(1);function zV(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function fNe(e,t,n){const s=zV(t);if(!s)return e;const{scaleX:r,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-r)*parseFloat(n),u=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=r?e.width/r:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c}}const hNe={ignoreTransform:!1};function ch(e,t){t===void 0&&(t=hNe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Js(e).getComputedStyle(e);u&&(n=fNe(n,u,d))}const{top:s,left:r,width:i,height:o,bottom:l,right:c}=n;return{top:s,left:r,width:i,height:o,bottom:l,right:c}}function yR(e){return ch(e,{ignoreTransform:!0})}function gNe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function pNe(e,t){return t===void 0&&(t=Js(e).getComputedStyle(e)),t.position==="fixed"}function xNe(e,t){t===void 0&&(t=Js(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const i=t[r];return typeof i=="string"?n.test(i):!1})}function _N(e,t){const n=[];function s(r){if(t!=null&&n.length>=t||!r)return n;if(lP(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Rx(r)||PV(r)||n.includes(r))return n;const i=Js(e).getComputedStyle(r);return r!==e&&xNe(r,i)&&n.push(r),pNe(r,i)?n:s(r.parentNode)}return e?s(e):n}function FV(e){const[t]=_N(e,1);return t??null}function D2(e){return!NN||!e?null:oh(e)?e:oP(e)?lP(e)||e===lh(e).scrollingElement?window:Rx(e)?e:null:null}function UV(e){return oh(e)?e.scrollX:e.scrollLeft}function BV(e){return oh(e)?e.scrollY:e.scrollTop}function Wk(e){return{x:UV(e),y:BV(e)}}var gs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(gs||(gs={}));function HV(e){return!NN||!e?!1:e===document.scrollingElement}function qV(e){const t={x:0,y:0},n=HV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const yNe={x:.2,y:.2};function bNe(e,t,n,s,r){let{top:i,left:o,right:l,bottom:c}=n;s===void 0&&(s=10),r===void 0&&(r=yNe);const{isTop:u,isBottom:d,isLeft:h,isRight:p}=qV(e),x={x:0,y:0},v={x:0,y:0},j={height:t.height*r.y,width:t.width*r.x};return!u&&i<=t.top+j.height?(x.y=gs.Backward,v.y=s*Math.abs((t.top+j.height-i)/j.height)):!d&&c>=t.bottom-j.height&&(x.y=gs.Forward,v.y=s*Math.abs((t.bottom-j.height-c)/j.height)),!p&&l>=t.right-j.width?(x.x=gs.Forward,v.x=s*Math.abs((t.right-j.width-l)/j.width)):!h&&o<=t.left+j.width&&(x.x=gs.Backward,v.x=s*Math.abs((t.left+j.width-o)/j.width)),{direction:x,speed:v}}function vNe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function GV(e){return e.reduce((t,n)=>jf(t,Wk(n)),Xi)}function wNe(e){return e.reduce((t,n)=>t+UV(n),0)}function jNe(e){return e.reduce((t,n)=>t+BV(n),0)}function WV(e,t){if(t===void 0&&(t=ch),!e)return;const{top:n,left:s,bottom:r,right:i}=t(e);FV(e)&&(r<=0||i<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const NNe=[["x",["left","right"],wNe],["y",["top","bottom"],jNe]];class cP{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=_N(n),r=GV(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of NNe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(s),d=r[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class np{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var r;(r=this.target)==null||r.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function CNe(e){const{EventTarget:t}=Js(e);return e instanceof t?e:lh(e)}function O2(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var mi;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(mi||(mi={}));function bR(e){e.preventDefault()}function SNe(e){e.stopPropagation()}var ba;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ba||(ba={}));const VV={start:[ba.Space,ba.Enter],cancel:[ba.Esc],end:[ba.Space,ba.Enter,ba.Tab]},_Ne=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ba.Right:return{...n,x:n.x+25};case ba.Left:return{...n,x:n.x-25};case ba.Down:return{...n,y:n.y+25};case ba.Up:return{...n,y:n.y-25}}};class dP{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new np(lh(n)),this.windowListeners=new np(Js(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(mi.Resize,this.handleCancel),this.windowListeners.add(mi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(mi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&WV(s),n(Xi)}handleKeyDown(t){if(SN(t)){const{active:n,context:s,options:r}=this.props,{keyboardCodes:i=VV,coordinateGetter:o=_Ne,scrollBehavior:l="smooth"}=r,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=s.current,d=u?{x:u.left,y:u.top}:Xi;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(t,{active:n,context:s.current,currentCoordinates:d});if(h){const p=Dp(h,d),x={x:0,y:0},{scrollableAncestors:v}=s.current;for(const j of v){const b=t.code,{isTop:N,isRight:w,isLeft:S,isBottom:_,maxScroll:k,minScroll:T}=qV(j),A=vNe(j),E={x:Math.min(b===ba.Right?A.right-A.width/2:A.right,Math.max(b===ba.Right?A.left:A.left+A.width/2,h.x)),y:Math.min(b===ba.Down?A.bottom-A.height/2:A.bottom,Math.max(b===ba.Down?A.top:A.top+A.height/2,h.y))},M=b===ba.Right&&!w||b===ba.Left&&!S,O=b===ba.Down&&!_||b===ba.Up&&!N;if(M&&E.x!==h.x){const I=j.scrollLeft+p.x,D=b===ba.Right&&I<=k.x||b===ba.Left&&I>=T.x;if(D&&!p.y){j.scrollTo({left:I,behavior:l});return}D?x.x=j.scrollLeft-I:x.x=b===ba.Right?j.scrollLeft-k.x:j.scrollLeft-T.x,x.x&&j.scrollBy({left:-x.x,behavior:l});break}else if(O&&E.y!==h.y){const I=j.scrollTop+p.y,D=b===ba.Down&&I<=k.y||b===ba.Up&&I>=T.y;if(D&&!p.x){j.scrollTo({top:I,behavior:l});return}D?x.y=j.scrollTop-I:x.y=b===ba.Down?j.scrollTop-k.y:j.scrollTop-T.y,x.y&&j.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,jf(Dp(h,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}dP.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=VV,onActivation:r}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function vR(e){return!!(e&&"distance"in e)}function wR(e){return!!(e&&"delay"in e)}class uP{constructor(t,n,s){var r;s===void 0&&(s=CNe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=lh(o),this.documentListeners=new np(this.document),this.listeners=new np(s),this.windowListeners=new np(Js(o)),this.initialCoordinates=(r=sw(i))!=null?r:Xi,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(mi.Resize,this.handleCancel),this.windowListeners.add(mi.DragStart,bR),this.windowListeners.add(mi.VisibilityChange,this.handleCancel),this.windowListeners.add(mi.ContextMenu,bR),this.documentListeners.add(mi.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wR(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vR(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(mi.Click,SNe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(mi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:r,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!r)return;const c=(n=sw(t))!=null?n:Xi,u=Dp(r,c);if(!s&&l){if(vR(l)){if(l.tolerance!=null&&O2(u,l.tolerance))return this.handleCancel();if(O2(u,l.distance))return this.handleStart()}if(wR(l)&&O2(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ba.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ANe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sm extends uP{constructor(t){const{event:n}=t,s=lh(n.target);super(t,ANe,s)}}sm.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const TNe={move:{name:"mousemove"},end:{name:"mouseup"}};var Vk;(function(e){e[e.RightClick=2]="RightClick"})(Vk||(Vk={}));class kNe extends uP{constructor(t){super(t,TNe,lh(t.event.target))}}kNe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Vk.RightClick?!1:(s?.({event:n}),!0)}}];const M2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ENe extends uP{constructor(t){super(t,M2)}static setup(){return window.addEventListener(M2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(M2.move.name,t)};function t(){}}}ENe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:r}=n;return r.length>1?!1:(s?.({event:n}),!0)}}];var sp;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(sp||(sp={}));var iw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(iw||(iw={}));function LNe(e){let{acceleration:t,activator:n=sp.Pointer,canScroll:s,draggingRect:r,enabled:i,interval:o=5,order:l=iw.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const x=DNe({delta:h,disabled:!i}),[v,j]=Wje(),b=f.useRef({x:0,y:0}),N=f.useRef({x:0,y:0}),w=f.useMemo(()=>{switch(n){case sp.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case sp.DraggableRect:return r}},[n,r,c]),S=f.useRef(null),_=f.useCallback(()=>{const T=S.current;if(!T)return;const A=b.current.x*N.current.x,E=b.current.y*N.current.y;T.scrollBy(A,E)},[]),k=f.useMemo(()=>l===iw.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!i||!u.length||!w){j();return}for(const T of k){if(s?.(T)===!1)continue;const A=u.indexOf(T),E=d[A];if(!E)continue;const{direction:M,speed:O}=bNe(T,E,w,t,p);for(const I of["x","y"])x[I][M[I]]||(O[I]=0,M[I]=0);if(O.x>0||O.y>0){j(),S.current=T,v(_,o),b.current=O,N.current=M;return}}b.current={x:0,y:0},N.current={x:0,y:0},j()},[t,_,s,j,i,o,JSON.stringify(w),JSON.stringify(x),v,u,k,d,JSON.stringify(p)])}const PNe={x:{[gs.Backward]:!1,[gs.Forward]:!1},y:{[gs.Backward]:!1,[gs.Forward]:!1}};function DNe(e){let{delta:t,disabled:n}=e;const s=nw(t);return zx(r=>{if(n||!s||!r)return PNe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[gs.Backward]:r.x[gs.Backward]||i.x===-1,[gs.Forward]:r.x[gs.Forward]||i.x===1},y:{[gs.Backward]:r.y[gs.Backward]||i.y===-1,[gs.Forward]:r.y[gs.Forward]||i.y===1}}},[n,t,s])}function ONe(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return zx(r=>{var i;return t==null?null:(i=s??r)!=null?i:null},[s,t])}function MNe(e,t){return f.useMemo(()=>e.reduce((n,s)=>{const{sensor:r}=s,i=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...n,...i]},[]),[e,t])}var Op;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Op||(Op={}));var Yk;(function(e){e.Optimized="optimized"})(Yk||(Yk={}));const jR=new Map;function INe(e,t){let{dragging:n,dependencies:s,config:r}=t;const[i,o]=f.useState(null),{frequency:l,measure:c,strategy:u}=r,d=f.useRef(e),h=b(),p=Pp(h),x=f.useCallback(function(N){N===void 0&&(N=[]),!p.current&&o(w=>w===null?N:w.concat(N.filter(S=>!w.includes(S))))},[p]),v=f.useRef(null),j=zx(N=>{if(h&&!n)return jR;if(!N||N===jR||d.current!==e||i!=null){const w=new Map;for(let S of e){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const _=S.node.current,k=_?new cP(c(_),_):null;S.rect.current=k,k&&w.set(S.id,k)}return w}return N},[e,i,n,h,c]);return f.useEffect(()=>{d.current=e},[e]),f.useEffect(()=>{h||x()},[n,h]),f.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),f.useEffect(()=>{h||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},l))},[l,h,x,...s]),{droppableRects:j,measureDroppableContainers:x,measuringScheduled:i!=null};function b(){switch(u){case Op.Always:return!1;case Op.BeforeDragging:return n;default:return!n}}}function mP(e,t){return zx(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function $Ne(e,t){return mP(e,t)}function RNe(e){let{callback:t,disabled:n}=e;const s=CN(t),r=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,n]);return f.useEffect(()=>()=>r?.disconnect(),[r]),r}function AN(e){let{callback:t,disabled:n}=e;const s=CN(t),r=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[n]);return f.useEffect(()=>()=>r?.disconnect(),[r]),r}function zNe(e){return new cP(ch(e),e)}function NR(e,t,n){t===void 0&&(t=zNe);const[s,r]=f.useState(null);function i(){r(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=RNe({callback(c){if(e)for(const u of c){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=AN({callback:i});return Ki(()=>{i(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function FNe(e){const t=mP(e);return RV(e,t)}const CR=[];function UNe(e){const t=f.useRef(e),n=zx(s=>e?s&&s!==CR&&e&&t.current&&e.parentNode===t.current.parentNode?s:_N(e):CR,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function BNe(e){const[t,n]=f.useState(null),s=f.useRef(e),r=f.useCallback(i=>{const o=D2(i.target);o&&n(l=>l?(l.set(o,Wk(o)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const u=D2(c);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,Wk(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const u=D2(c);u?.removeEventListener("scroll",r)})}},[r,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>jf(i,o),Xi):GV(e):Xi,[e,t])}function SR(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const s=e!==Xi;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?Dp(e,n.current):Xi}function HNe(e){f.useEffect(()=>{if(!NN)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function qNe(e,t){return f.useMemo(()=>e.reduce((n,s)=>{let{eventName:r,handler:i}=s;return n[r]=o=>{i(o,t)},n},{}),[e,t])}function YV(e){return f.useMemo(()=>e?gNe(e):null,[e])}const _R=[];function GNe(e,t){t===void 0&&(t=ch);const[n]=e,s=YV(n?Js(n):null),[r,i]=f.useState(_R);function o(){i(()=>e.length?e.map(c=>HV(c)?s:new cP(t(c),c)):_R)}const l=AN({callback:o});return Ki(()=>{l?.disconnect(),o(),e.forEach(c=>l?.observe(c))},[e]),r}function QV(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Rx(t)?t:e}function WNe(e){let{measure:t}=e;const[n,s]=f.useState(null),r=f.useCallback(u=>{for(const{target:d}of u)if(Rx(d)){s(h=>{const p=t(d);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=AN({callback:r}),o=f.useCallback(u=>{const d=QV(u);i?.disconnect(),d&&i?.observe(d),s(d?t(d):null)},[t,i]),[l,c]=aw(o);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const VNe=[{sensor:sm,options:{}},{sensor:dP,options:{}}],YNe={current:{}},fv={draggable:{measure:yR},droppable:{measure:yR,strategy:Op.WhileDragging,frequency:Yk.Optimized},dragOverlay:{measure:ch}};class rp extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const QNe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rp,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:fv,measureDroppableContainers:rw,windowRect:null,measuringScheduled:!1},KV={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rw,draggableNodes:new Map,over:null,measureDroppableContainers:rw},Hx=f.createContext(KV),XV=f.createContext(QNe);function KNe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rp}}}function XNe(e,t){switch(t.type){case as.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case as.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case as.DragEnd:case as.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case as.RegisterDroppable:{const{element:n}=t,{id:s}=n,r=new rp(e.droppable.containers);return r.set(s,n),{...e,droppable:{...e.droppable,containers:r}}}case as.SetDroppableDisabled:{const{id:n,key:s,disabled:r}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const o=new rp(e.droppable.containers);return o.set(n,{...i,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case as.UnregisterDroppable:{const{id:n,key:s}=t,r=e.droppable.containers.get(n);if(!r||s!==r.key)return e;const i=new rp(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function ZNe(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:r}=f.useContext(Hx),i=nw(s),o=nw(n?.id);return f.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!SN(i)||document.activeElement===i.target)return;const l=r.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const h=Qje(d);if(h){h.focus();break}}})}},[s,t,r,o,i]),null}function ZV(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((r,i)=>i({transform:r,...s}),n):n}function JNe(e){return f.useMemo(()=>({draggable:{...fv.draggable,...e?.draggable},droppable:{...fv.droppable,...e?.droppable},dragOverlay:{...fv.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function e1e(e){let{activeNode:t,measure:n,initialRect:s,config:r=!0}=e;const i=f.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;Ki(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=RV(d,s);if(o||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=FV(u);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,l,s,n])}const TN=f.createContext({...Xi,scaleX:1,scaleY:1});var Gc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Gc||(Gc={}));const qx=f.memo(function(t){var n,s,r,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=VNe,collisionDetection:h=cNe,measuring:p,modifiers:x,...v}=t;const j=f.useReducer(XNe,void 0,KNe),[b,N]=j,[w,S]=tNe(),[_,k]=f.useState(Gc.Uninitialized),T=_===Gc.Initialized,{draggable:{active:A,nodes:E,translate:M},droppable:{containers:O}}=b,I=A!=null?E.get(A):null,D=f.useRef({initial:null,translated:null}),H=f.useMemo(()=>{var jt;return A!=null?{id:A,data:(jt=I?.data)!=null?jt:YNe,rect:D}:null},[A,I]),W=f.useRef(null),[z,Q]=f.useState(null),[J,Y]=f.useState(null),re=Pp(v,Object.values(v)),we=Fx("DndDescribedBy",o),Z=f.useMemo(()=>O.getEnabled(),[O]),ne=JNe(p),{droppableRects:pe,measureDroppableContainers:Ne,measuringScheduled:de}=INe(Z,{dragging:T,dependencies:[M.x,M.y],config:ne.droppable}),be=ONe(E,A),oe=f.useMemo(()=>J?sw(J):null,[J]),Te=At(),ue=$Ne(be,ne.draggable.measure);e1e({activeNode:A!=null?E.get(A):null,config:Te.layoutShiftCompensation,initialRect:ue,measure:ne.draggable.measure});const Oe=NR(be,ne.draggable.measure,ue),xe=NR(be?be.parentElement:null),le=f.useRef({activatorEvent:null,active:null,activeNode:be,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Fe=O.getNodeFor((n=le.current.over)==null?void 0:n.id),ke=WNe({measure:ne.dragOverlay.measure}),He=(s=ke.nodeRef.current)!=null?s:be,Xe=T?(r=ke.rect)!=null?r:Oe:null,it=!!(ke.nodeRef.current&&ke.rect),ze=FNe(it?null:Oe),at=YV(He?Js(He):null),Ve=UNe(T?Fe??be:null),Ze=GNe(Ve),Je=ZV(x,{transform:{x:M.x-ze.x,y:M.y-ze.y,scaleX:1,scaleY:1},activatorEvent:J,active:H,activeNodeRect:Oe,containerNodeRect:xe,draggingNodeRect:Xe,over:le.current.over,overlayNodeRect:ke.rect,scrollableAncestors:Ve,scrollableAncestorRects:Ze,windowRect:at}),Ue=oe?jf(oe,M):null,_e=BNe(Ve),he=SR(_e),ie=SR(_e,[Oe]),G=jf(Je,he),X=Xe?mNe(Xe,Je):null,ve=H&&X?h({active:H,collisionRect:X,droppableRects:pe,droppableContainers:Z,pointerCoordinates:Ue}):null,$e=$V(ve,"id"),[Le,me]=f.useState(null),Re=it?Je:jf(Je,ie),qe=dNe(Re,(i=Le?.rect)!=null?i:null,Oe),rt=f.useRef(null),st=f.useCallback((jt,ge)=>{let{sensor:ye,options:Pe}=ge;if(W.current==null)return;const Ce=E.get(W.current);if(!Ce)return;const Qe=jt.nativeEvent,F=new ye({active:W.current,activeNode:Ce,event:Qe,options:Pe,context:le,onAbort(fe){if(!E.get(fe))return;const{onDragAbort:B}=re.current,ce={id:fe};B?.(ce),w({type:"onDragAbort",event:ce})},onPending(fe,te,B,ce){if(!E.get(fe))return;const{onDragPending:U}=re.current,K={id:fe,constraint:te,initialCoordinates:B,offset:ce};U?.(K),w({type:"onDragPending",event:K})},onStart(fe){const te=W.current;if(te==null)return;const B=E.get(te);if(!B)return;const{onDragStart:ce}=re.current,De={activatorEvent:Qe,active:{id:te,data:B.data,rect:D}};Gi.unstable_batchedUpdates(()=>{ce?.(De),k(Gc.Initializing),N({type:as.DragStart,initialCoordinates:fe,active:te}),w({type:"onDragStart",event:De}),Q(rt.current),Y(Qe)})},onMove(fe){N({type:as.DragMove,coordinates:fe})},onEnd:q(as.DragEnd),onCancel:q(as.DragCancel)});rt.current=F;function q(fe){return async function(){const{active:B,collisions:ce,over:De,scrollAdjustedTranslate:U}=le.current;let K=null;if(B&&U){const{cancelDrop:je}=re.current;K={activatorEvent:Qe,active:B,collisions:ce,delta:U,over:De},fe===as.DragEnd&&typeof je=="function"&&await Promise.resolve(je(K))&&(fe=as.DragCancel)}W.current=null,Gi.unstable_batchedUpdates(()=>{N({type:fe}),k(Gc.Uninitialized),me(null),Q(null),Y(null),rt.current=null;const je=fe===as.DragEnd?"onDragEnd":"onDragCancel";if(K){const Be=re.current[je];Be?.(K),w({type:je,event:K})}})}}},[E]),Ie=f.useCallback((jt,ge)=>(ye,Pe)=>{const Ce=ye.nativeEvent,Qe=E.get(Pe);if(W.current!==null||!Qe||Ce.dndKit||Ce.defaultPrevented)return;const F={active:Qe};jt(ye,ge.options,F)===!0&&(Ce.dndKit={capturedBy:ge.sensor},W.current=Pe,st(ye,ge))},[E,st]),ot=MNe(d,Ie);HNe(d),Ki(()=>{Oe&&_===Gc.Initializing&&k(Gc.Initialized)},[Oe,_]),f.useEffect(()=>{const{onDragMove:jt}=re.current,{active:ge,activatorEvent:ye,collisions:Pe,over:Ce}=le.current;if(!ge||!ye)return;const Qe={active:ge,activatorEvent:ye,collisions:Pe,delta:{x:G.x,y:G.y},over:Ce};Gi.unstable_batchedUpdates(()=>{jt?.(Qe),w({type:"onDragMove",event:Qe})})},[G.x,G.y]),f.useEffect(()=>{const{active:jt,activatorEvent:ge,collisions:ye,droppableContainers:Pe,scrollAdjustedTranslate:Ce}=le.current;if(!jt||W.current==null||!ge||!Ce)return;const{onDragOver:Qe}=re.current,F=Pe.get($e),q=F&&F.rect.current?{id:F.id,rect:F.rect.current,data:F.data,disabled:F.disabled}:null,fe={active:jt,activatorEvent:ge,collisions:ye,delta:{x:Ce.x,y:Ce.y},over:q};Gi.unstable_batchedUpdates(()=>{me(q),Qe?.(fe),w({type:"onDragOver",event:fe})})},[$e]),Ki(()=>{le.current={activatorEvent:J,active:H,activeNode:be,collisionRect:X,collisions:ve,droppableRects:pe,draggableNodes:E,draggingNode:He,draggingNodeRect:Xe,droppableContainers:O,over:Le,scrollableAncestors:Ve,scrollAdjustedTranslate:G},D.current={initial:Xe,translated:X}},[H,be,ve,X,E,He,Xe,pe,O,Le,Ve,G]),LNe({...Te,delta:M,draggingRect:X,pointerCoordinates:Ue,scrollableAncestors:Ve,scrollableAncestorRects:Ze});const Ct=f.useMemo(()=>({active:H,activeNode:be,activeNodeRect:Oe,activatorEvent:J,collisions:ve,containerNodeRect:xe,dragOverlay:ke,draggableNodes:E,droppableContainers:O,droppableRects:pe,over:Le,measureDroppableContainers:Ne,scrollableAncestors:Ve,scrollableAncestorRects:Ze,measuringConfiguration:ne,measuringScheduled:de,windowRect:at}),[H,be,Oe,J,ve,xe,ke,E,O,pe,Le,Ne,Ve,Ze,ne,de,at]),kt=f.useMemo(()=>({activatorEvent:J,activators:ot,active:H,activeNodeRect:Oe,ariaDescribedById:{draggable:we},dispatch:N,draggableNodes:E,over:Le,measureDroppableContainers:Ne}),[J,ot,H,Oe,N,we,E,Le,Ne]);return bt.createElement(OV.Provider,{value:S},bt.createElement(Hx.Provider,{value:kt},bt.createElement(XV.Provider,{value:Ct},bt.createElement(TN.Provider,{value:qe},u)),bt.createElement(ZNe,{disabled:l?.restoreFocus===!1})),bt.createElement(sNe,{...l,hiddenTextDescribedById:we}));function At(){const jt=z?.autoScrollEnabled===!1,ge=typeof c=="object"?c.enabled===!1:c===!1,ye=T&&!jt&&!ge;return typeof c=="object"?{...c,enabled:ye}:{enabled:ye}}}),t1e=f.createContext(null),AR="button",a1e="Draggable";function Gx(e){let{id:t,data:n,disabled:s=!1,attributes:r}=e;const i=Fx(a1e),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=f.useContext(Hx),{role:x=AR,roleDescription:v="draggable",tabIndex:j=0}=r??{},b=c?.id===t,N=f.useContext(b?TN:t1e),[w,S]=aw(),[_,k]=aw(),T=qNe(o,t),A=Pp(n);Ki(()=>(h.set(t,{id:t,key:i,node:w,activatorNode:_,data:A}),()=>{const M=h.get(t);M&&M.key===i&&h.delete(t)}),[h,t]);const E=f.useMemo(()=>({role:x,tabIndex:j,"aria-disabled":s,"aria-pressed":b&&x===AR?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[s,x,j,b,v,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:b,listeners:s?void 0:T,node:w,over:p,setNodeRef:S,setActivatorNodeRef:k,transform:N}}function JV(){return f.useContext(XV)}const n1e="Droppable",s1e={timeout:25};function Wx(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:r}=e;const i=Fx(n1e),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(Hx),d=f.useRef({disabled:n}),h=f.useRef(!1),p=f.useRef(null),x=f.useRef(null),{disabled:v,updateMeasurementsFor:j,timeout:b}={...s1e,...r},N=Pp(j??s),w=f.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{u(Array.isArray(N.current)?N.current:[N.current]),x.current=null},b)},[b]),S=AN({callback:w,disabled:v||!o}),_=f.useCallback((E,M)=>{S&&(M&&(S.unobserve(M),h.current=!1),E&&S.observe(E))},[S]),[k,T]=aw(_),A=Pp(t);return f.useEffect(()=>{!S||!k.current||(S.disconnect(),h.current=!1,S.observe(k.current))},[k,S]),f.useEffect(()=>(l({type:as.RegisterDroppable,element:{id:s,key:i,disabled:n,node:k,rect:p,data:A}}),()=>l({type:as.UnregisterDroppable,key:i,id:s})),[s]),f.useEffect(()=>{n!==d.current.disabled&&(l({type:as.SetDroppableDisabled,id:s,key:i,disabled:n}),d.current.disabled=n)},[s,i,n,l]),{active:o,rect:p,isOver:c?.id===s,node:k,over:c,setNodeRef:T}}function r1e(e){let{animation:t,children:n}=e;const[s,r]=f.useState(null),[i,o]=f.useState(null),l=nw(n);return!n&&!s&&l&&r(l),Ki(()=>{if(!i)return;const c=s?.key,u=s?.props.id;if(c==null||u==null){r(null);return}Promise.resolve(t(u,i)).then(()=>{r(null)})},[t,s,i]),bt.createElement(bt.Fragment,null,n,s?f.cloneElement(s,{ref:o}):null)}const i1e={x:0,y:0,scaleX:1,scaleY:1};function o1e(e){let{children:t}=e;return bt.createElement(Hx.Provider,{value:KV},bt.createElement(TN.Provider,{value:i1e},t))}const l1e={position:"fixed",touchAction:"none"},c1e=e=>SN(e)?"transform 250ms ease":void 0,d1e=f.forwardRef((e,t)=>{let{as:n,activatorEvent:s,adjustScale:r,children:i,className:o,rect:l,style:c,transform:u,transition:d=c1e}=e;if(!l)return null;const h=r?u:{...u,scaleX:1,scaleY:1},p={...l1e,width:l.width,height:l.height,top:l.top,left:l.left,transform:fd.Transform.toString(h),transformOrigin:r&&s?rNe(s,l):void 0,transition:typeof d=="function"?d(s):d,...c};return bt.createElement(n,{className:o,style:p,ref:t},i)}),u1e=e=>t=>{let{active:n,dragOverlay:s}=t;const r={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(r[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&s.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&s.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(r))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},m1e=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:fd.Transform.toString(t)},{transform:fd.Transform.toString(n)}]},f1e={duration:250,easing:"ease",keyframes:m1e,sideEffects:u1e({styles:{active:{opacity:"0"}}})};function h1e(e){let{config:t,draggableNodes:n,droppableContainers:s,measuringConfiguration:r}=e;return CN((i,o)=>{if(t===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=QV(o);if(!u)return;const{transform:d}=Js(o).getComputedStyle(o),h=zV(d);if(!h)return;const p=typeof t=="function"?t:g1e(t);return WV(c,r.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:r.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:r.dragOverlay.measure(u)},droppableContainers:s,measuringConfiguration:r,transform:h})})}function g1e(e){const{duration:t,easing:n,sideEffects:s,keyframes:r}={...f1e,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!t)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},h={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-d.x,y:c.y-d.y,...h},x=r({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[v]=x,j=x[x.length-1];if(JSON.stringify(v)===JSON.stringify(j))return;const b=s?.({active:o,dragOverlay:l,...u}),N=l.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(w=>{N.onfinish=()=>{b?.(),w()}})}}let TR=0;function p1e(e){return f.useMemo(()=>{if(e!=null)return TR++,TR},[e])}const kN=bt.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:s,style:r,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:h,activeNodeRect:p,containerNodeRect:x,draggableNodes:v,droppableContainers:j,dragOverlay:b,over:N,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:_,windowRect:k}=JV(),T=f.useContext(TN),A=p1e(h?.id),E=ZV(o,{activatorEvent:d,active:h,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:b.rect,over:N,overlayNodeRect:b.rect,scrollableAncestors:S,scrollableAncestorRects:_,transform:T,windowRect:k}),M=mP(p),O=h1e({config:s,draggableNodes:v,droppableContainers:j,measuringConfiguration:w}),I=M?b.setRef:void 0;return bt.createElement(o1e,null,bt.createElement(r1e,{animation:O},h&&A?bt.createElement(d1e,{key:A,id:h.id,ref:I,as:l,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:M,style:{zIndex:u,...r},transform:E},n):null))});function fP(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function x1e(e,t){return e.reduce((n,s,r)=>{const i=t.get(s);return i&&(n[r]=i),n},Array(e.length))}function tb(e){return e!==null&&e>=0}function y1e(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function b1e(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const hP=e=>{let{rects:t,activeIndex:n,overIndex:s,index:r}=e;const i=fP(t,s,n),o=t[r],l=i[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},eY="Sortable",tY=bt.createContext({activeIndex:-1,containerId:eY,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hP,disabled:{draggable:!1,droppable:!1}});function v1e(e){let{children:t,id:n,items:s,strategy:r=hP,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=JV(),h=Fx(eY,n),p=l.rect!==null,x=f.useMemo(()=>s.map(T=>typeof T=="object"&&"id"in T?T.id:T),[s]),v=o!=null,j=o?x.indexOf(o.id):-1,b=u?x.indexOf(u.id):-1,N=f.useRef(x),w=!y1e(x,N.current),S=b!==-1&&j===-1||w,_=b1e(i);Ki(()=>{w&&v&&d(x)},[w,x,v,d]),f.useEffect(()=>{N.current=x},[x]);const k=f.useMemo(()=>({activeIndex:j,containerId:h,disabled:_,disableTransforms:S,items:x,overIndex:b,useDragOverlay:p,sortedRects:x1e(x,c),strategy:r}),[j,h,_.draggable,_.droppable,S,x,b,c,p,r]);return bt.createElement(tY.Provider,{value:k},t)}const w1e=e=>{let{id:t,items:n,activeIndex:s,overIndex:r}=e;return fP(n,s,r).indexOf(t)},j1e=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:r,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!s||l!==i&&r===o?!1:n?!0:o!==r&&t===c},N1e={duration:200,easing:"ease"},aY="transform",C1e=fd.Transition.toString({property:aY,duration:0,easing:"linear"}),S1e={roleDescription:"sortable"};function _1e(e){let{disabled:t,index:n,node:s,rect:r}=e;const[i,o]=f.useState(null),l=f.useRef(n);return Ki(()=>{if(!t&&n!==l.current&&s.current){const c=r.current;if(c){const u=ch(s.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}n!==l.current&&(l.current=n)},[t,n,s,r]),f.useEffect(()=>{i&&o(null)},[i]),i}function A1e(e){let{animateLayoutChanges:t=j1e,attributes:n,disabled:s,data:r,getNewIndex:i=w1e,id:o,strategy:l,resizeObserverConfig:c,transition:u=N1e}=e;const{items:d,containerId:h,activeIndex:p,disabled:x,disableTransforms:v,sortedRects:j,overIndex:b,useDragOverlay:N,strategy:w}=f.useContext(tY),S=T1e(s,x),_=d.indexOf(o),k=f.useMemo(()=>({sortable:{containerId:h,index:_,items:d},...r}),[h,r,_,d]),T=f.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:A,node:E,isOver:M,setNodeRef:O}=Wx({id:o,data:k,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...c}}),{active:I,activatorEvent:D,activeNodeRect:H,attributes:W,setNodeRef:z,listeners:Q,isDragging:J,over:Y,setActivatorNodeRef:re,transform:we}=Gx({id:o,data:k,attributes:{...S1e,...n},disabled:S.draggable}),Z=Gje(O,z),ne=!!I,pe=ne&&!v&&tb(p)&&tb(b),Ne=!N&&J,de=Ne&&pe?we:null,oe=pe?de??(l??w)({rects:j,activeNodeRect:H,activeIndex:p,overIndex:b,index:_}):null,Te=tb(p)&&tb(b)?i({id:o,items:d,activeIndex:p,overIndex:b}):_,ue=I?.id,Oe=f.useRef({activeId:ue,items:d,newIndex:Te,containerId:h}),xe=d!==Oe.current.items,le=t({active:I,containerId:h,isDragging:J,isSorting:ne,id:o,index:_,items:d,newIndex:Oe.current.newIndex,previousItems:Oe.current.items,previousContainerId:Oe.current.containerId,transition:u,wasDragging:Oe.current.activeId!=null}),Fe=_1e({disabled:!le,index:_,node:E,rect:A});return f.useEffect(()=>{ne&&Oe.current.newIndex!==Te&&(Oe.current.newIndex=Te),h!==Oe.current.containerId&&(Oe.current.containerId=h),d!==Oe.current.items&&(Oe.current.items=d)},[ne,Te,h,d]),f.useEffect(()=>{if(ue===Oe.current.activeId)return;if(ue!=null&&Oe.current.activeId==null){Oe.current.activeId=ue;return}const He=setTimeout(()=>{Oe.current.activeId=ue},50);return()=>clearTimeout(He)},[ue]),{active:I,activeIndex:p,attributes:W,data:k,rect:A,index:_,newIndex:Te,items:d,isOver:M,isSorting:ne,isDragging:J,listeners:Q,node:E,overIndex:b,over:Y,setNodeRef:Z,setActivatorNodeRef:re,setDroppableNodeRef:O,setDraggableNodeRef:z,transform:Fe??oe,transition:ke()};function ke(){if(Fe||xe&&Oe.current.newIndex===_)return C1e;if(!(Ne&&!SN(D)||!u)&&(ne||le))return fd.Transition.toString({...u,property:aY})}}function T1e(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}function ow(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const k1e=[ba.Down,ba.Right,ba.Up,ba.Left],E1e=(e,t)=>{let{context:{active:n,collisionRect:s,droppableRects:r,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(k1e.includes(e.code)){if(e.preventDefault(),!n||!s)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=r.get(h.id);if(p)switch(e.code){case ba.Down:s.top<p.top&&c.push(h);break;case ba.Up:s.top>p.top&&c.push(h);break;case ba.Left:s.left>p.left&&c.push(h);break;case ba.Right:s.left<p.left&&c.push(h);break}});const u=oNe({collisionRect:s,droppableRects:r,droppableContainers:c});let d=$V(u,"id");if(d===o?.id&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),p=i.get(d),x=p?r.get(p.id):null,v=p?.node.current;if(v&&x&&h&&p){const b=_N(v).some((T,A)=>l[A]!==T),N=nY(h,p),w=L1e(h,p),S=b||!N?{x:0,y:0}:{x:w?s.width-x.width:0,y:w?s.height-x.height:0},_={x:x.left,y:x.top};return S.x&&S.y?_:Dp(_,S)}}}};function nY(e,t){return!ow(e)||!ow(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function L1e(e,t){return!ow(e)||!ow(t)||!nY(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Mo=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e||0)}`,Qk=e=>e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",P1e=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},D1e=(e,t)=>{if(!e||e.length===0)return;const n=e.map(c=>({ID:c.id,Name:c.name||`${c.first_name} ${c.last_name}`,Company:c.company_name||c.account?.name||"",Stage:c.stage||c.status,Amount:c.amount||0,Date:Qk(c.created_at)})),s=Object.keys(n[0]).join(","),r=n.map(c=>Object.values(c).map(u=>typeof u=="string"?`"${u.replace(/"/g,'""')}"`:u).join(",")),i="data:text/csv;charset=utf-8,"+[s,...r].join(`
`),o=encodeURI(i),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${t}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},Kk=({label:e,count:t,value:n,width:s,color:r,onClick:i,isActive:o,isLead:l,weightedValue:c,currencySymbol:u,conversionRate:d,compact:h=!1})=>a.jsxs("div",{className:"flex flex-col items-center w-full",children:[d&&a.jsx("div",{className:`flex justify-center relative z-0 ${h?"-my-1":"-my-2 mb-1"}`,children:a.jsxs("div",{className:`bg-gray-100 text-gray-500 font-bold rounded-full border border-white shadow-sm flex items-center ${h?"text-[8px] px-1.5":"text-[10px] px-2 py-0.5"}`,children:[a.jsx(tk,{className:"mr-1"})," ",d,"%"]})}),a.jsxs("div",{onClick:i,className:`w-full relative group cursor-pointer transition-all duration-300 transform ${o?"scale-105 z-10":"hover:scale-102 hover:opacity-90"}`,children:[a.jsxs("div",{className:"flex justify-between items-end mb-1 px-1",children:[a.jsx("span",{className:`${h?"text-[10px]":"text-xs"} font-bold uppercase tracking-wider ${o?"text-blue-700":"text-gray-500"}`,children:e}),a.jsx("span",{className:`${h?"text-[10px]":"text-xs"} text-gray-400`,children:t})]}),a.jsxs("div",{className:`${h?"h-6":"h-10"} w-full bg-gray-100 rounded-r-lg overflow-hidden flex items-center relative shadow-sm`,children:[a.jsx("div",{className:`h-full ${r} transition-all duration-700 ease-out flex items-center px-2 text-white font-bold relative overflow-hidden`,style:{width:s},children:a.jsx("span",{className:`z-10 drop-shadow-md ${h?"text-xs":"text-sm"}`,children:l?t:Mo(n,u)})}),!l&&c>0&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-white opacity-20 z-20",style:{width:`${c/n*parseFloat(s)}%`}})]})]})]}),O1e=({id:e,children:t})=>{const{attributes:n,listeners:s,setNodeRef:r,transform:i,transition:o,isDragging:l}=A1e({id:e}),c={transform:fd.Transform.toString(i),transition:o,zIndex:l?50:"auto",opacity:l?.5:1,position:"relative"};return a.jsx("div",{ref:r,style:c,className:"h-full",children:bt.cloneElement(t,{dragHandleProps:{...n,...s}})})},M1e=({user:e,metrics:t,stages:n,currencySymbol:s,target:r,dragHandleProps:i})=>{const o=t.metrics.CLOSED_WON?.value||0,l=t.metrics.CLOSED_LOST?.value||0,c=t.metrics.CLOSED_WON.count+t.metrics.CLOSED_LOST.count,u=c>0?(t.metrics.CLOSED_WON.count/c*100).toFixed(0):0,d=r>0?o/r*100:0;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md border border-gray-100 flex flex-col h-full hover:shadow-lg transition-shadow relative group",children:[a.jsxs("div",{className:"flex flex-col mb-4 pb-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3 flex-shrink-0",children:e.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:e.name}),a.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[a.jsxs("span",{className:"text-green-600 bg-green-50 px-1.5 py-0.5 rounded border border-green-100",children:["Win: ",u,"%"]}),a.jsxs("span",{className:"text-red-600 bg-red-50 px-1.5 py-0.5 rounded border border-red-100",children:["Lost: ",Mo(l,s)]})]})]})]}),i&&a.jsx("button",{...i,className:"p-1.5 text-gray-300 hover:text-blue-500 hover:bg-blue-50 rounded-md cursor-grab active:cursor-grabbing transition-colors touch-none",title:"Drag to reorder",children:a.jsx(Jie,{size:16})})]}),r>0?a.jsxs("div",{className:"w-full mt-2 bg-gray-50 p-2 rounded-lg border border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-500 mb-1",children:[a.jsx("span",{className:"font-semibold text-gray-600",children:"Target Achievement"}),a.jsxs("span",{className:d>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[d.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${d>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(d,100)}%`}})}),a.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[a.jsxs("span",{children:["Achieved: ",a.jsx("span",{className:"text-gray-700 font-medium",children:Mo(o,s)})]}),a.jsxs("span",{children:["Target: ",Mo(r,s)]})]})]}):a.jsx("div",{className:"text-[10px] text-gray-400 italic mt-1 text-center bg-gray-50 p-1 rounded",children:"No target assigned"})]}),a.jsx("div",{className:"flex-grow space-y-2",children:n.map((h,p)=>{const x=t.metrics[h.key];let v=null;if(p>0){const j=n[p-1].key,b=t.metrics[j].count;b>0&&(v=(x.count/b*100).toFixed(0))}return a.jsx(Kk,{label:h.label,count:x.count,value:x.value,width:x.width,color:x.color,isLead:!h.isDeal,weightedValue:x.weightedValue,currencySymbol:s,conversionRate:v,compact:!0,onClick:()=>{},isActive:!1},h.key)})})]})},I1e=({data:e,stageKey:t,currencySymbol:n,basePath:s="/admin"})=>{const r=Tt(),[i,o]=f.useState({key:null,direction:"desc"}),l=t==="LEADS",c=t==="CLOSED_WON",u=t==="CLOSED_LOST",d=!l&&!c&&!u,h=f.useMemo(()=>i.key?[...e].sort((v,j)=>{let b=v[i.key],N=j[i.key];return(i.key==="amount"||i.key==="probability")&&(b=parseFloat(v[i.key]||0),N=parseFloat(j[i.key]||0)),b<N?i.direction==="asc"?-1:1:b>N?i.direction==="asc"?1:-1:0}):e,[e,i]),p=v=>{o({key:v,direction:i.key===v&&i.direction==="desc"?"asc":"desc"})},x=({columnKey:v})=>i.key!==v?a.jsx(tk,{className:"inline ml-1 opacity-0 group-hover:opacity-30"}):i.direction==="asc"?a.jsx(Gie,{className:"inline ml-1 text-blue-600"}):a.jsx(tk,{className:"inline ml-1 text-blue-600"});return!e||e.length===0?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-xl border-2 border-dashed border-gray-200",children:[a.jsx(jL,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{className:"font-medium",children:"No records in this stage"})]}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-full",children:a.jsx("div",{className:"overflow-x-auto flex-grow",children:a.jsxs("table",{className:"w-full text-left border-collapse",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:a.jsxs("tr",{children:[a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider cursor-pointer group",onClick:()=>p("name"),children:["Name ",a.jsx(x,{columnKey:"name"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Company"}),l&&a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Contact Info"}),d&&a.jsxs(a.Fragment,{children:[a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right cursor-pointer group",onClick:()=>p("amount"),children:["Value ",a.jsx(x,{columnKey:"amount"})]}),a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center cursor-pointer group",onClick:()=>p("probability"),children:["Prob. ",a.jsx(x,{columnKey:"probability"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Age"})]}),c&&a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-green-600 cursor-pointer group",onClick:()=>p("amount"),children:["Booked ",a.jsx(x,{columnKey:"amount"})]}),u&&a.jsxs(a.Fragment,{children:[a.jsxs("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right text-red-600 cursor-pointer group",onClick:()=>p("amount"),children:["Lost Value ",a.jsx(x,{columnKey:"amount"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-center",children:"Lost Date"})]}),a.jsx("th",{className:"p-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right",children:"Owner"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-100",children:h.map(v=>{const j=l?0:P1e(v.stage_updated_at||v.created_at),b=j>30&&d;return a.jsxs("tr",{className:"hover:bg-blue-50 transition-colors cursor-pointer group",onClick:()=>r(l?`${s}/leads/${v.id}`:`${s}/deals/info?id=${v.id}`),children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-bold text-gray-800 text-sm group-hover:text-blue-600 transition-colors",children:l?`${v.first_name} ${v.last_name}`:v.name}),a.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:Qk(v.created_at)})]}),a.jsx("td",{className:"p-4 text-sm text-gray-600",children:l?v.company_name:v.account?.name}),l&&a.jsxs("td",{className:"p-4 text-xs text-gray-500",children:[v.email&&a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(sn,{className:"mr-1"})," ",v.email]}),v.phone&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Mt,{className:"mr-1"})," ",v.phone]})]}),d&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4 text-right font-medium text-gray-700",children:Mo(v.amount,n)}),a.jsx("td",{className:"p-4 text-center",children:a.jsxs("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold ${v.probability>=80?"bg-green-100 text-green-700":v.probability>=50?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:[v.probability,"%"]})}),a.jsx("td",{className:"p-4 text-center",children:b?a.jsxs("div",{className:"flex items-center justify-center text-red-600 bg-red-50 px-2 py-1 rounded border border-red-100",title:"Stuck for >30 days",children:[a.jsx(Yi,{size:14,className:"mr-1"}),a.jsxs("span",{className:"text-xs font-bold",children:[j,"d"]})]}):a.jsxs("span",{className:"text-xs text-gray-400",children:[j,"d"]})})]}),c&&a.jsx("td",{className:"p-4 text-right font-bold text-green-700",children:Mo(v.amount,n)}),u&&a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"p-4 text-right font-bold text-red-600 opacity-75",children:Mo(v.amount,n)}),a.jsx("td",{className:"p-4 text-center text-xs text-gray-500",children:Qk(v.stage_updated_at)})]}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end text-gray-500 text-xs",children:[a.jsx(sa,{className:"mr-1"}),l?v.lead_owner?.first_name||v.owner?.first_name||v.assigned_to?.first_name||"Unassigned":v.assigned_deals?.first_name||v.deal_creator?.first_name||"Unassigned"]})})]},v.id)})})]})})})},EN=({leads:e,deals:t,currencySymbol:n,targets:s=[],basePath:r="/admin",currentUser:i=null})=>{const[o,l]=f.useState("ALL"),[c,u]=f.useState("ALL"),[d,h]=f.useState("ALL"),[p,x]=f.useState("AGGREGATE"),v=i?i.id.toString():d,j=!!i,[b,N]=f.useState([]),w=Ux(Ff(sm,{activationConstraint:{distance:5}}),Ff(dP,{coordinateGetter:E1e})),S=f.useMemo(()=>{const I=new Date;if(c==="THIS_MONTH")return{start:new Date(I.getFullYear(),I.getMonth(),1),end:new Date(I.getFullYear(),I.getMonth()+1,0)};if(c==="THIS_QUARTER"){const D=Math.floor(I.getMonth()/3)*3;return{start:new Date(I.getFullYear(),D,1),end:new Date(I.getFullYear(),D+3,0)}}return c==="THIS_YEAR"?{start:new Date(I.getFullYear(),0,1),end:new Date(I.getFullYear(),11,31)}:null},[c]),_=f.useMemo(()=>s.filter(I=>{if(d!=="ALL"){const D=I.user?.id||I.user_id||I.assigned_to;if(parseInt(D)!==parseInt(d))return!1}if(S){const D=new Date(I.start_date),H=new Date(I.end_date);return D<=S.end&&H>=S.start}return!0}),[s,d,S]),k=f.useMemo(()=>{const I=new Map,D=H=>{H&&H.id&&I.set(H.id,`${H.first_name} ${H.last_name}`)};return e.forEach(H=>D(H.lead_owner||H.owner||H.assigned_to)),t.forEach(H=>{D(H.assigned_deals),D(H.deal_creator)}),Array.from(I.entries()).map(([H,W])=>({id:H,name:W}))},[e,t]),T=f.useMemo(()=>{const I=new Date;let D=null;c==="THIS_MONTH"?D=new Date(I.getFullYear(),I.getMonth(),1):c==="THIS_QUARTER"?D=new Date(I.getFullYear(),Math.floor(I.getMonth()/3)*3,1):c==="THIS_YEAR"&&(D=new Date(I.getFullYear(),0,1));const H=we=>{const Z=new Date(we.created_at);if(D&&Z<D)return!1;if(v!=="ALL"){const ne=parseInt(v);return!!(we.lead_owner&&(we.lead_owner.id||we.lead_owner)===ne||we.assigned_to?.id===ne||we.owner?.id===ne||we.assigned_deals?.id===ne||we.created_by===ne)}return!0},W=e.filter(H),z=t.filter(H),Q=[{key:"LEADS",label:"Top Leads",color:"bg-blue-400",isDeal:!1},{key:"PROSPECTING",label:"Prospecting",color:"bg-blue-600",isDeal:!0},{key:"QUALIFICATION",label:"Qualification",color:"bg-indigo-600",isDeal:!0},{key:"PROPOSAL",label:"Proposal",color:"bg-purple-600",isDeal:!0},{key:"NEGOTIATION",label:"Negotiation",color:"bg-pink-600",isDeal:!0},{key:"CLOSED_WON",label:"Closed Won",color:"bg-emerald-500",isDeal:!0},{key:"CLOSED_LOST",label:"Closed Lost",color:"bg-red-500",isDeal:!0}],J=(we,Z)=>{const ne=Q.reduce((Ne,de)=>(Ne[de.key]={...de,count:0,value:0,weightedValue:0,items:[]},Ne),{});ne.LEADS.count=we.length,ne.LEADS.items=we,Z.forEach(Ne=>{const de=(Ne.stage||"").toUpperCase();if(ne[de]){ne[de].count++,ne[de].items.push(Ne);const be=parseFloat(Ne.amount||0);ne[de].value+=be,ne[de].weightedValue+=be*((Ne.probability||0)/100)}});const pe=Math.max(...Object.values(ne).map(Ne=>Ne.count),1);return Object.keys(ne).forEach(Ne=>{const de=ne[Ne];de.width=de.count===0?"0%":`${Math.max(de.count/pe*100,15)}%`}),{metrics:ne,filteredDeals:Z,filteredLeads:we}},Y=J(W,z),re=[];return p==="COMPARE"&&(v==="ALL"?k:k.filter(Z=>Z.id===parseInt(v))).forEach(Z=>{const ne=parseInt(Z.id),pe=W.filter(oe=>(oe.lead_owner?.id||oe.lead_owner||oe.assigned_to?.id||oe.owner?.id)===ne),Ne=z.filter(oe=>(oe.assigned_deals?.id||oe.created_by)===ne),de=_.find(oe=>{const Te=oe.user?.id||oe.user_id||oe.assigned_to;return parseInt(Te)===ne}),be=parseFloat(de?.amount||de?.target_amount||de?.value||0);(pe.length>0||Ne.length>0||be>0)&&re.push({user:Z,data:J(pe,Ne),target:be})}),{stages:Q,aggregate:Y,userGroups:re}},[t,e,c,v,p,k,_]),A=f.useMemo(()=>{if(!T.userGroups.length)return[];const I=[...T.userGroups];return b.length>0&&I.sort((D,H)=>{const W=b.indexOf(D.user.id),z=b.indexOf(H.user.id);return W!==-1&&z!==-1?W-z:W!==-1?-1:z!==-1?1:0}),I},[T.userGroups,b]),E=I=>{const{active:D,over:H}=I;D.id!==H.id&&N(()=>{const W=A.map(J=>J.user.id),z=W.indexOf(D.id),Q=W.indexOf(H.id);return fP(W,z,Q)})},M=f.useMemo(()=>{const I=_.reduce((ne,pe)=>ne+parseFloat(pe.amount||pe.target_amount||pe.value||0),0),D=T.aggregate.metrics,H=D.CLOSED_WON?.value||0,W=D.CLOSED_WON?.count||0,z=D.CLOSED_LOST?.value||0,Q=D.CLOSED_LOST?.count||0,J=D.LEADS?.count||0,Y=I>0?H/I*100:0,re=W+Q,we=re>0?W/re*100:0,Z=J>0?W/J*100:0;return{totalTarget:I,totalWon:H,totalLost:z,progress:Y,winRate:we,conversionRate:Z}},[_,T]),O=f.useMemo(()=>o==="ALL"?[]:T.aggregate.metrics[o]?.items||[],[o,T]);return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center",children:[a.jsx(jL,{className:"mr-2"})," ",j?"My Pipeline":"Pipeline Intelligence"]}),a.jsx("p",{className:"text-sm text-gray-500",children:j?"Your personal pipeline performance and metrics.":"Analyze pipeline velocity and bottlenecks."})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 md:mt-0",children:[a.jsxs("select",{value:c,onChange:I=>u(I.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"All Time"}),a.jsx("option",{value:"THIS_MONTH",children:"This Month"}),a.jsx("option",{value:"THIS_QUARTER",children:"This Quarter"}),a.jsx("option",{value:"THIS_YEAR",children:"This Year"})]}),!j&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{value:d,onChange:I=>h(I.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-xs rounded-lg p-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"ALL",children:"All Users"}),k.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))]}),a.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[a.jsx("button",{onClick:()=>x("AGGREGATE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${p==="AGGREGATE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Aggregate"}),a.jsx("button",{onClick:()=>x("COMPARE"),className:`px-2 py-1 rounded-md text-xs font-medium transition-all ${p==="COMPARE"?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Compare"})]})]})]})]}),p==="COMPARE"?a.jsx(qx,{sensors:w,collisionDetection:Bx,onDragEnd:E,children:a.jsx(v1e,{items:A.map(I=>I.user.id),strategy:hP,children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-x-auto pb-4",children:[A.map(I=>a.jsx(O1e,{id:I.user.id,children:a.jsx(M1e,{user:I.user,metrics:I.data,stages:T.stages.filter(D=>D.key!=="CLOSED_LOST"),currencySymbol:n,target:I.target})},I.user.id)),A.length===0&&a.jsx("div",{className:"col-span-full text-center py-10 text-gray-400",children:"No data for selected filters."})]})})}):a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[a.jsxs("div",{className:"lg:col-span-4 flex flex-col space-y-2 relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-4 bottom-4 w-0.5 bg-gray-100 -z-0"}),T.stages.filter(I=>I.key!=="CLOSED_LOST").map((I,D)=>{const H=T.aggregate.metrics[I.key];let W=null;if(D>0){const z=T.stages[D-1].key,Q=T.aggregate.metrics[z].count;Q>0&&(W=(H.count/Q*100).toFixed(0))}return a.jsx(Kk,{label:I.label,count:H.count,value:H.value,width:H.width,color:H.color,isLead:!I.isDeal,weightedValue:H.weightedValue,currencySymbol:n,isActive:o===I.key,conversionRate:W,onClick:()=>l(I.key)},I.key)})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("div",{className:"mb-2 text-xs font-bold text-gray-400 uppercase",children:"Funnel Health"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center mb-4",children:[a.jsxs("div",{className:"bg-green-50 rounded p-2 border border-green-100",children:[a.jsx("p",{className:"text-[9px] text-green-600 uppercase font-bold",children:"Win Rate"}),a.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[M.winRate.toFixed(0),"%"]})]}),a.jsxs("div",{className:"bg-blue-50 rounded p-2 border border-blue-100",children:[a.jsx("p",{className:"text-[9px] text-blue-600 uppercase font-bold",children:"Conversion"}),a.jsxs("p",{className:"text-sm font-bold text-gray-800",children:[M.conversionRate.toFixed(0),"%"]})]}),a.jsxs("div",{className:"bg-red-50 rounded p-2 border border-red-100",children:[a.jsx("p",{className:"text-[9px] text-red-600 uppercase font-bold",children:"Lost Value"}),a.jsx("p",{className:"text-sm font-bold text-gray-800",children:Mo(M.totalLost,n)})]})]}),a.jsx(Kk,{label:"Closed Lost",count:T.aggregate.metrics.CLOSED_LOST.count,value:T.aggregate.metrics.CLOSED_LOST.value,width:T.aggregate.metrics.CLOSED_LOST.width,color:"bg-red-500 opacity-90",isLead:!1,weightedValue:0,currencySymbol:n,isActive:o==="CLOSED_LOST",onClick:()=>l("CLOSED_LOST")},"CLOSED_LOST"),a.jsxs("div",{className:"bg-gray-50 p-2 rounded-lg border border-gray-100 mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] mb-1",children:[a.jsxs("span",{className:"font-bold text-gray-600 flex items-center",children:[a.jsx(mr,{className:"mr-1"})," Total Target"]}),a.jsxs("span",{className:M.progress>=100?"text-green-600 font-bold":"text-blue-600 font-bold",children:[M.progress.toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden mb-1",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${M.progress>=100?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(M.progress,100)}%`}})}),a.jsxs("div",{className:"flex justify-between text-[9px] text-gray-400",children:[a.jsxs("span",{children:["Achieved: ",a.jsx("span",{className:"text-gray-700 font-medium",children:Mo(M.totalWon,n)})]}),a.jsxs("span",{children:["Goal: ",Mo(M.totalTarget,n)]})]})]})]})]}),a.jsxs("div",{className:"lg:col-span-8 h-[600px] flex flex-col",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-t-xl border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-800 flex items-center",children:o==="ALL"?a.jsx("span",{children:"Select a stage to view details"}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:`w-2.5 h-2.5 rounded-full mr-2 ${T.aggregate.metrics[o]?.color}`}),T.stages.find(I=>I.key===o)?.label," Details",a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-white border border-gray-200 text-gray-600 text-[10px] rounded-full",children:[O.length," records"]})]})}),o!=="ALL"&&O.length>0&&a.jsxs("button",{onClick:()=>D1e(O,`Funnel_${o}`),className:"text-[10px] font-bold text-blue-600 hover:bg-blue-100 px-2 py-1 rounded transition-colors flex items-center",children:[a.jsx(Wo,{className:"mr-1"})," Export"]})]}),o==="ALL"?a.jsxs("div",{className:"bg-white flex-grow rounded-b-xl border border-gray-100 flex flex-col items-center justify-center p-12 text-center text-gray-400",children:[a.jsx(Kie,{size:48,className:"mb-4 text-blue-100"}),a.jsx("p",{children:"Click on any stage bar (including Lost Deals) to inspect records."})]}):a.jsx(I1e,{data:O,stageKey:o,currencySymbol:n,basePath:r})]})]})]})},$1e=(e,t="")=>`${t} ${new Intl.NumberFormat("en-US",{minimumFractionDigits:0}).format(e)}`,R1e=e=>{const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),n=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-n);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t-s)/864e5+1)/7)},gP=({currencySymbol:e=""})=>{const[t,n]=f.useState("month"),[s,r]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!1),h=new Date,p=h.getFullYear(),x=h.getMonth()+1,v=R1e(h),j=f.useCallback(async()=>{d(!0);try{const S=new URLSearchParams;S.append("period_type","MONTHLY"),S.append("period_year",p),S.append("period_number",x);const _=await se.get(`/targets/leaderboard?${S.toString()}`).catch(()=>({data:{entries:[]}}));o(_.data?.entries||[]);const k=new URLSearchParams;k.append("period_type","ANNUAL"),k.append("period_year",p);const T=await se.get(`/targets/leaderboard?${k.toString()}`).catch(()=>({data:{entries:[]}}));c(T.data?.entries||[]);const A=new Date,E=new Date;E.setDate(E.getDate()-7);const M=new URLSearchParams;M.append("start_date",E.toISOString().split("T")[0]),M.append("end_date",A.toISOString().split("T")[0]);const O=await se.get(`/targets/leaderboard?${M.toString()}`).catch(()=>({data:{entries:[]}}));r(O.data?.entries||[])}catch(S){console.error("Error fetching leaderboard data:",S)}finally{d(!1)}},[p,x]);f.useEffect(()=>{j()},[j]);const b=f.useMemo(()=>{let S=[];switch(t){case"week":S=s;break;case"month":S=i;break;case"year":S=l;break;default:S=i}return Array.isArray(S)?S.slice(0,5):[]},[t,s,i,l]),N=[{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"year",label:"Year"}],w=S=>{switch(S){case 0:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 1:return"bg-gray-100 text-gray-600 border-gray-300";case 2:return"bg-orange-100 text-orange-700 border-orange-300";default:return"bg-gray-50 text-gray-500 border-gray-200"}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(od,{className:"text-blue-500",size:20}),a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Top 5 Performers"})]})}),a.jsx("div",{className:"flex space-x-1 mb-4 bg-gray-100 rounded-lg p-1",children:N.map(S=>a.jsx("button",{onClick:()=>n(S.id),className:`flex-1 py-1.5 px-3 text-xs font-medium rounded-md transition-all duration-200 ${t===S.id?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:S.label},S.id))}),u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}):b.length>0?a.jsx("div",{className:"space-y-3 flex-1",children:b.map((S,_)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border ${w(_)}`,children:_+1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-800 truncate max-w-[120px]",children:S.user_name||"Unknown Rep"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("div",{className:"w-16 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${S.achievement_percentage>=100?"bg-green-500":S.achievement_percentage>=50?"bg-yellow-500":"bg-red-400"}`,style:{width:`${Math.min(S.achievement_percentage,100)}%`}})}),a.jsxs("span",{className:"text-[10px] text-gray-500",children:[S.achievement_percentage?.toFixed(1),"%"]})]})]})]}),a.jsx("p",{className:"text-sm font-bold text-gray-900",children:$1e(S.achieved_amount||0,e)})]},S.user_id||_))}):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-400",children:[a.jsx(Dt,{size:32,className:"mb-2 opacity-50"}),a.jsx("p",{className:"text-sm",children:"No data for this period"})]}),a.jsx("div",{className:"mt-auto pt-3 border-t border-gray-100",children:a.jsxs("p",{className:"text-[10px] text-gray-400 text-center",children:[t==="week"&&`Week ${v}, ${p}`,t==="month"&&`${h.toLocaleString("default",{month:"long"})} ${p}`,t==="year"&&`Year ${p}`]})})]})},z1e=e=>a.jsx(Kt,{...e}),F1e=e=>a.jsx(jd,{...e}),pP=e=>a.jsx(Vs,{...e}),U1e=e=>a.jsx(dx,{...e}),B1e=e=>a.jsx(fj,{...e}),H1e=e=>a.jsx(Dt,{...e}),q1e=e=>a.jsx(Mt,{...e}),G1e=e=>a.jsx(gj,{...e}),sY=e=>a.jsx(hj,{...e}),W1e=e=>a.jsx(rn,{...e}),rY=e=>a.jsx(sa,{...e}),V1e=e=>a.jsx(Xa,{...e}),iY=e=>a.jsx(na,{...e}),Y1e=e=>a.jsx(ra,{...e}),oY=e=>a.jsx(mr,{...e}),Q1e=e=>a.jsx(Qa,{...e}),K1e=e=>a.jsx(Dt,{...e}),X1e=e=>a.jsx(zs,{...e}),Z1e=e=>a.jsx(ec,{...e}),J1e=e=>a.jsx(ks,{...e}),lY=(e,t="")=>{const n=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(n).replace(/^/,`${t} `)},eCe=e=>{if(!e)return 0;const t=new Date-new Date(e);return Math.floor(t/(1e3*60*60*24))},tCe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},aCe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},nCe=e=>{switch(e){case"call":return{Icon:q1e,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:G1e,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:H1e,color:"text-blue-500",bgColor:"bg-blue-100"}}},sCe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},rCe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=Tt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:F1e,label:"Account"},{icon:rY,label:"Contact"},{icon:V1e,label:"Leads"},{icon:iY,label:"Deals"},{icon:Y1e,label:"Quotes"},{icon:oY,label:"Target"},{icon:Q1e,label:"Task"},{icon:K1e,label:"Meeting"},{icon:X1e,label:"Call"},{icon:J1e,label:"Audit"},{icon:Z1e,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h.target.value),o(h.target.value.trim().length>0)},d=h=>{s&&s(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-2xl lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(z1e,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{const x={Account:"/admin/accounts",Contact:"/admin/contacts",Leads:"/admin/leads",Deals:"/admin/deals",Quotes:"/admin/quotes",Target:"/admin/targets",Task:"/admin/tasks",Meeting:"/admin/meetings",Call:"/admin/calls",Audit:"/admin/audit",Territory:"/admin/territory"};x[h.label]&&r(x[h.label])},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},iCe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=Tt(),o=d=>{if(!d)return"Unknown";const h=new Date(d),x=new Date-h,v=Math.floor(x/6e4),j=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:j<24?`${j} hour${j>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||n||"System",u=o(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/admin/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},oCe=({logs:e,loading:t})=>{const n=Tt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(sY,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(iCe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},lCe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),cCe=({revenueData:e,loading:t})=>{const n=Tt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(!e||e.length===0){const j=new Date().getMonth(),b=[],N=[];for(let w=0;w<=j;w++)b.push(s[w]),N.push(0);return{labels:b,revenues:N,maxRevenue:0}}const l={};e.forEach(v=>{const j=v.close_date||v.closeDate||null,b=v.stage||"",N=b.toUpperCase()==="CLOSED_WON"||b==="CLOSED_WON";let w=v.amount;w&&typeof w=="object"&&w.toString?w=parseFloat(w.toString()):w=parseFloat(w)||0;const S=w>0;if(j&&j!==null&&N&&S)try{let _=new Date(j);if(isNaN(_.getTime())){const k=String(j).split("T")[0];_=new Date(k+"T00:00:00")}if(!isNaN(_.getTime())){const k=_.getFullYear(),T=_.getMonth()+1,A=`${k}-${String(T).padStart(2,"0")}`;l[A]||(l[A]=0),l[A]+=w}}catch(_){console.error("Error parsing deal date:",j,_)}});const c=Object.keys(l).map(v=>parseInt(v.split("-")[0])),u=c.length>0?[...new Set(c)].sort():[],d=new Date().getFullYear(),h=[],p=[];for(let v=0;v<12;v++){const j=`${d}-${String(v+1).padStart(2,"0")}`;h.push(s[v]),p.push(l[j]||0)}if(u.length>0){const v=Math.max(...u);if(v>d)for(let j=d+1;j<=v;j++)for(let b=0;b<12;b++){const N=`${j}-${String(b+1).padStart(2,"0")}`,w=l[N]||0;h.push(`${s[b]} ${j}`),p.push(w)}}const x=Math.max(...p,1);return{labels:h,revenues:p,maxRevenue:x}},[e]),i=r.labels,o=r.revenues;return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/admin/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(sY,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-start lg:justify-center overflow-x-auto sm:overflow-x-hidden",children:i&&i.length>0&&o&&o.length>0?a.jsx(ih,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%",minWidth:{xs:600,lg:"100%"}}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},I2=({title:e,items:t,children:n,onSeeAll:s})=>{const r=Tt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/admin/leads","Latest Deals":"/admin/deals","Upcoming Activities":"/admin/tasks"};o[e]&&r(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},dCe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const o=Tt(),{text:l,bg:c}=aCe(s||"Website"),u=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,N=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return N<60?`${N} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=u(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/admin/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:d}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},uCe=({name:e,amount:t,account:n,stage:s,created_at:r,stage_updated_at:i,id:o,previousAmount:l,currencySymbol:c})=>{const u=Tt(),h={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:p,bg:x}=tCe(h),v=eCe(i||r),j=v>30&&s!=="CLOSED_WON"&&s!=="CLOSED_LOST",b=parseFloat(t||0),N=l?b>=l?"up":"down":"up",w=N==="up"?U1e:B1e,S=N==="up"?"text-green-400":"text-red-400",_=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>o&&u(`/admin/deals/info?id=${o}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),j&&a.jsxs("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 py-0.5 rounded border border-red-200 font-bold flex items-center",children:[a.jsx(pP,{size:10,className:"mr-1"})," ",v," days stuck"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:_}),a.jsx("div",{className:"mt-1 flex items-center space-x-2",children:a.jsx("span",{className:`inline-block text-xs font-medium ${p} ${x} px-2 py-0.5 rounded-full`,children:h})})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:lY(b,c)}),a.jsx(w,{size:16,className:`${S} mt-1`})]})]})})},mCe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=Tt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=nCe(h),{text:j,bg:b}=sCe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,O=Math.floor(M/864e5);return O===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",k=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/admin/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/admin/meetings/info?id=${o}`)):u("/admin/tasks"):u(h==="call"?`/admin/calls/info?id=${o}`:h==="meeting"?`/admin/meetings/info?id=${o}`:"/admin/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(pP,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(rY,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${j} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},fCe=()=>{const e=Tt(),{user:t}=Gt(),n=t?.company?.currency||"",[s,r]=f.useState([]),[i,o]=f.useState(0),[l,c]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[u,d]=f.useState([]),[h,p]=f.useState([]),[x,v]=f.useState([]),[j,b]=f.useState([]),[N,w]=f.useState([]),[S,_]=f.useState(!0),[k,T]=f.useState(null),[A,E]=f.useState(""),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState([]),[z,Q]=f.useState(new Date),J=f.useRef(null);f.useRef(null);const Y=f.useMemo(()=>{try{if(!A.trim())return[];const ne=A.toLowerCase().trim(),pe=[];return Array.isArray(M)&&M.forEach(Ne=>{const de=`${Ne.first_name||""} ${Ne.last_name||""}`.trim().toLowerCase(),be=(Ne.company_name||"").toLowerCase(),oe=(Ne.email||"").toLowerCase(),Te=(Ne.phone||"").toLowerCase();(de.includes(ne)||be.includes(ne)||oe.includes(ne)||Te.includes(ne))&&pe.push({id:Ne.id,name:`${Ne.first_name||""} ${Ne.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Ne.company_name||"No company",route:`/admin/leads/${Ne.id}`})}),Array.isArray(I)&&I.forEach(Ne=>{const de=(Ne.name||"").toLowerCase(),be=(Ne.account?.name||"").toLowerCase(),oe=(Ne.description||"").toLowerCase();(de.includes(ne)||be.includes(ne)||oe.includes(ne))&&pe.push({id:Ne.id,name:Ne.name||"Unnamed Deal",type:"Deal",details:Ne.account?.name||"No account",route:`/admin/deals/info?id=${Ne.id}`})}),Array.isArray(H)&&H.forEach(Ne=>{const de=(Ne.name||"").toLowerCase(),be=(Ne.email||"").toLowerCase(),oe=(Ne.phone||"").toLowerCase(),Te=(Ne.website||"").toLowerCase();(de.includes(ne)||be.includes(ne)||oe.includes(ne)||Te.includes(ne))&&pe.push({id:Ne.id,name:Ne.name||"Unnamed Account",type:"Account",details:Ne.email||Ne.phone||"No contact info",route:"/admin/accounts"})}),pe.slice(0,10)}catch(ne){return console.error("Error in search:",ne),[]}},[A,M,I,H]),re=ne=>{ne.route&&(e(ne.route),E(""))},we=f.useCallback(async()=>{_(!0),T(null);try{const[ne,pe,Ne,de,be,oe,Te,ue]=await Promise.all([se.get("/leads/admin/getLeads").catch(he=>(console.error("Error fetching leads:",he),{data:[]})),se.get("/deals/admin/fetch-all").catch(he=>(console.error("Error fetching deals:",he),{data:[]})),se.get("/accounts/admin/fetch-all").catch(he=>(console.error("Error fetching accounts:",he),{data:[]})),se.get("/tasks/all").catch(he=>(console.error("Error fetching tasks:",he),{data:[]})),se.get("/meetings/admin/fetch-all").catch(he=>(console.error("Error fetching meetings:",he),{data:[]})),se.get("/calls/admin/fetch-all").catch(he=>(console.error("Error fetching calls:",he),{data:[]})),se.get("/logs/read-all").catch(he=>(console.error("Error fetching logs:",he),{data:[]})),se.get("/targets/admin/fetch-all").catch(he=>(console.error("Error fetching targets:",he),{data:[]}))]),Oe=Array.isArray(ne.data)?ne.data:[],xe=Array.isArray(pe.data)?pe.data:[],le=Array.isArray(Ne.data)?Ne.data:[],Fe=Array.isArray(de.data)?de.data:[],ke=Array.isArray(be.data)?be.data:[],He=Array.isArray(oe.data)?oe.data:[],Xe=Array.isArray(Te.data)?Te.data:[],it=Array.isArray(ue.data)?ue.data:[];O(Oe),D(xe),W(le),r(it);const ze=it.reduce((he,ie)=>{const G=ie.amount||ie.value||ie.target_amount||0,X=parseFloat(typeof G=="string"?G.replace(/[^\d.-]/g,""):G);return he+(isNaN(X)?0:X)},0);o(ze),c({activeLeads:Oe.filter(he=>he.status&&!["Lost","Converted"].includes(he.status)).length,totalDeals:xe.length,activeAccounts:le.length,overdueTasks:Fe.filter(he=>!he.dueDate||he.status==="Completed"?!1:new Date(he.dueDate)<new Date).length});const at=[...Oe].sort((he,ie)=>new Date(ie.created_at||0)-new Date(he.created_at||0)).slice(0,5);d(at);const Ve=[...xe].sort((he,ie)=>new Date(ie.created_at||0)-new Date(he.created_at||0)).slice(0,5);p(Ve);const Ze=[];He.forEach(he=>{const ie=he.due_date||he.call_time,G=(he.status||"").toUpperCase();ie&&!["COMPLETED","MISSED","NOT_HELD","HELD"].includes(G)&&Ze.push({type:"Call",title:he.subject||"Untitled Call",assignedTo:he.assigned_to||(he.call_assign_to?`${he.call_assign_to.first_name||""} ${he.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"call",fullData:he})}),ke.forEach(he=>{const ie=he.dueDate||he.start_time,G=(he.status||"").toUpperCase();ie&&!["COMPLETED","CANCELLED","DONE"].includes(G)&&Ze.push({type:"Meeting",title:he.subject||he.activity||"Untitled Meeting",assignedTo:he.assignedTo||(he.meet_assign_to?`${he.meet_assign_to.first_name||""} ${he.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:ie,priority:(he.priority||"MEDIUM").toUpperCase(),id:he.id,activityType:"meeting",fullData:he})});const Je={HIGH:1,MEDIUM:2,LOW:3},Ue=Ze.sort((he,ie)=>{const G=Je[he.priority]||3,X=Je[ie.priority]||3;return G!==X?G-X:new Date(he.scheduledDate||0)-new Date(ie.scheduledDate||0)}).slice(0,5);v(Ue),w(xe);const _e=[...Xe].sort((he,ie)=>new Date(ie.timestamp||0)-new Date(he.timestamp||0));b(_e)}catch(ne){console.error("Error fetching dashboard data:",ne),T("Failed to load dashboard data. Please refresh the page.")}finally{_(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",we(),J.current=setInterval(()=>{we(),Q(new Date)},3e4),()=>{J.current&&clearInterval(J.current)}),[we]);const Z=[{icon:W1e,title:"Active Leads",value:l.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/admin/leads")},{icon:oY,title:"Total Targets",value:lY(i,n),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/admin/targets")},{icon:iY,title:"Total Deals",value:l.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/admin/deals")},{icon:pP,title:"Overdue Tasks",value:l.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/admin/tasks")}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&a.jsx(Wt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:k})}),a.jsx("div",{className:"mb-8",children:a.jsx(rCe,{searchQuery:A,onSearchChange:E,searchResults:Y,onSearchResultClick:re})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Z.map(ne=>a.jsx(lCe,{...ne,loading:S},ne.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsx(oCe,{logs:j,loading:S}),a.jsx(gP,{currencySymbol:n})]}),a.jsx("div",{className:"mb-8",children:a.jsx(EN,{leads:M,deals:I,targets:s,currencySymbol:n})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(cCe,{revenueData:N,loading:S})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(I2,{title:"Latest Leads",children:u.length>0?u.map((ne,pe)=>a.jsx(dCe,{...ne},ne.id||pe)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(I2,{title:"Latest Deals",children:h.length>0?h.map((ne,pe)=>a.jsx(uCe,{...ne,stage_updated_at:ne.stage_updated_at,currencySymbol:n},ne.id||pe)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(I2,{title:"Upcoming Activities",children:x.length>0?x.map((ne,pe)=>a.jsx(mCe,{...ne},ne.id||pe)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})};function la({totalItems:e=0,pageSize:t=10,currentPage:n=1,onPrev:s,onNext:r,onPageSizeChange:i,pageSizeOptions:o=[10,20,30,40,50],className:l="",label:c="records"}){const u=e===0?1:Math.ceil(e/t),d=e===0?0:(n-1)*t+1,h=Math.min(n*t,e),p=n<=1||e===0,x=n>=u||e===0,v="inline-flex items-center gap-1 px-3 sm:px-4 py-2 text-sm font-semibold rounded-lg transition focus:outline-none focus:ring-2 focus:ring-offset-1",j="bg-black text-white hover:bg-gray-900",b="bg-gray-200 text-gray-500 cursor-not-allowed focus:ring-transparent";return a.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 ${l}`,children:[a.jsxs("div",{className:"text-sm text-gray-600 font-medium text-center sm:text-left w-full sm:w-auto order-1",children:["Showing ",e===0?0:d,"-",h," of ",e," ",c]}),i&&a.jsxs("div",{className:"flex items-center justify-center gap-2 w-full sm:w-auto order-3 sm:order-2",children:[a.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Rows per page"}),a.jsx("select",{value:t,onChange:N=>i(Number(N.target.value)),className:"border border-gray-300 rounded-md text-sm py-1 pl-2 pr-6 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:o.map(N=>a.jsx("option",{value:N,children:N},N))})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-center sm:justify-end w-full sm:w-auto order-2 sm:order-3",children:[a.jsxs("button",{type:"button",onClick:s,disabled:p,className:`${v} ${p?b:j}`,children:[a.jsx(Yie,{className:"text-base"}),"Prev"]}),a.jsxs("div",{className:"text-sm font-semibold text-white bg-gray-900 border border-gray-900 shadow-sm px-3 py-1.5 rounded-full",children:["Page ",e===0?0:n," of"," ",e===0?0:u]}),a.jsxs("button",{type:"button",onClick:r,disabled:x,className:`${v} ${x?b:j}`,children:["Next",a.jsx(Ot,{className:"text-base"})]})]})]})}const hCe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gCe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),kR=e=>{const t=gCe(e);return t.charAt(0).toUpperCase()+t.slice(1)},cY=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),pCe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var xCe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yCe=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:r="",children:i,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...xCe,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:cY("lucide",r),...!i&&!pCe(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>f.createElement(u,d)),...Array.isArray(i)?i:[i]]));const dh=(e,t)=>{const n=f.forwardRef(({className:s,...r},i)=>f.createElement(yCe,{ref:i,iconNode:t,className:cY(`lucide-${hCe(kR(e))}`,`lucide-${e}`,s),...r}));return n.displayName=kR(e),n};const bCe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],vCe=dh("globe",bCe);const wCe=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ER=dh("lock",wCe);const jCe=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],NCe=dh("message-circle",jCe);const CCe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],SCe=dh("message-square",CCe);const _Ce=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ACe=dh("send",_Ce);const TCe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],LN=dh("x",TCe);function Tn({comments:e=[],onAddComment:t,currentUser:n}){const[s,r]=f.useState(""),[i,o]=f.useState(!1),[l,c]=f.useState(!1),u=async d=>{if(d.preventDefault(),!!s.trim()){c(!0);try{t&&await t({comment:s.trim(),is_private:i}),r("")}catch(h){console.error("Failed to add comment:",h)}finally{c(!1)}}};return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mt-5",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2 flex items-center gap-2",children:[a.jsx(SCe,{className:"w-5 h-5 text-gray-600"}),"Comments",e.length>0&&a.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",e.length,")"]})]}),a.jsx("div",{className:"mt-4",children:e.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(NCe,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-1",children:"No comments yet"}),a.jsx("p",{className:"text-sm text-gray-500 max-w-sm",children:"Be the first to share your thoughts. Start a conversation by adding a comment below."})]}):a.jsx("div",{className:"space-y-3",children:e.map(d=>a.jsxs("div",{className:"flex gap-3 p-3 bg-gray-100 rounded-lg border border-gray-100",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-9 h-9 bg-blue-500 rounded-full flex items-center justify-center text-white font-semibold text-sm",children:d.comment_creator?.profile_picture?a.jsx("img",{src:`${d.comment_creator.profile_picture}`,alt:`${d.comment_creator?.first_name||d.comment_creator?.email||"User"}'s profile`,className:"w-9 h-9 rounded-full object-cover"}):d.comment_creator?.first_name?.[0]||d.comment_creator?.email?.[0]?.toUpperCase()||"U"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"font-medium text-gray-800 text-sm",children:d.comment_creator?.first_name||d.comment_creator?.email||"Unknown User"}),a.jsx("span",{className:"text-xs text-gray-400",children:new Date(d.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),d.is_private&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[a.jsx(ER,{className:"w-3 h-3"}),"Private"]})]}),a.jsx("p",{className:"mt-1 text-gray-600 whitespace-pre-wrap break-words text-xs",children:d.comment})]})]},d.id))})}),a.jsxs("form",{onSubmit:u,className:"mt-6 pt-4 border-t border-gray-200 text-sm",children:[a.jsx("div",{className:"relative",children:a.jsx("textarea",{value:s,onChange:d=>r(d.target.value),placeholder:"Write a comment...",rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-700 placeholder-gray-400"})}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("button",{type:"button",onClick:()=>o(!i),className:`cursor-pointer flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200 ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?a.jsxs(a.Fragment,{children:[a.jsx(ER,{className:"w-4 h-4"}),"Private"]}):a.jsxs(a.Fragment,{children:[a.jsx(vCe,{className:"w-4 h-4"}),"Public"]})}),a.jsxs("button",{type:"submit",disabled:!s.trim()||l,className:"cursor-pointer flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[a.jsx(ACe,{className:"w-4 h-4"}),l?"Posting...":"Post Comment"]})]})]})]})}async function kCe({relatedType:e,relatedId:t}){const n=await se.get("/comments",{params:{related_type:e,related_id:t}});return Array.isArray(n.data)?n.data:[]}async function ECe({relatedType:e,relatedId:t,comment:n,isPrivate:s}){return(await se.post("/comments",{related_type:e,related_id:t,comment:n,is_private:!!s})).data}function kn({relatedType:e,relatedId:t}){const[n,s]=f.useState([]),[r,i]=f.useState(!1),o=f.useCallback(async()=>{if(!e||!t){s([]);return}i(!0);try{const c=await kCe({relatedType:e,relatedId:t});s(c)}finally{i(!1)}},[e,t]),l=f.useCallback(async({comment:c,is_private:u})=>{!e||!t||(await ECe({relatedType:e,relatedId:t,comment:c,isPrivate:u}),await o())},[e,t,o]);return f.useEffect(()=>{o()},[o]),{comments:n,loading:r,refresh:o,addComment:l}}const $2=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],ab={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},lr=e=>e?e.toUpperCase():"",R2=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",LCe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},PCe=e=>{switch(lr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function DCe(){const e=Tt(),t=Jt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),[c,u]=f.useState(null),[d,h]=f.useState(null),[p,x]=f.useState(ab),[v,j]=f.useState(null),[b,N]=f.useState([]),[w,S]=f.useState(!1),[_,k]=f.useState([]),[T,A]=f.useState(null),[E,M]=f.useState([]),[O,I]=f.useState([]),[D,H]=f.useState("Filter by Status"),[W,z]=f.useState(""),[Q,J]=f.useState(null),[Y,re]=f.useState(!1),[we,Z]=f.useState(1),[ne,pe]=f.useState(10),[Ne,de]=f.useState("Overview"),[be,oe]=f.useState(""),[Te,ue]=f.useState(!1),[Oe,xe]=f.useState([]),[le,Fe]=f.useState({}),[ke,He]=f.useState(null),{comments:Xe,addComment:it,refresh:ze}=kn({relatedType:"account",relatedId:v?.id});f.useEffect(()=>{v?.id&&ze()},[v?.id,ze]);const at=f.useCallback(async(Ge=null)=>{S(!0);try{const Ae=await se.get("/accounts/admin/fetch-all"),L=[...Array.isArray(Ae.data)?Ae.data:[]].sort((ee,Ee)=>{const Me=ee?.created_at||ee?.updated_at||0,We=Ee?.created_at||Ee?.updated_at||0;return new Date(We)-new Date(Me)});if(N(L),Ge){const ee=L.find(Ee=>Ee.id===Ge);j(ee||null)}}catch(Ae){console.error(Ae),N([]),Ae.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch accounts. Please try again later.")}finally{S(!1)}},[j]),Ve=f.useCallback(async()=>{try{const Ge=await se.get("/users/all");k(Array.isArray(Ge.data)?Ge.data:[])}catch(Ge){console.error(Ge),Ge.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),Ze=f.useCallback(async()=>{try{const Ge=await se.get("/territories/fetch");M(Array.isArray(Ge.data)?Ge.data:[])}catch(Ge){console.error(Ge),Ge.response?.status===403&&V.warn("Unable to load territories (permission denied).")}},[]),Je=f.useCallback(async()=>{try{const Ge=await se.get("/accounts/admin/parent-companies");I(Array.isArray(Ge.data)?Ge.data:[])}catch(Ge){console.error(Ge),Ge.response?.status===403&&V.warn("Unable to load parent companies (permission denied).")}},[]),Ue=f.useCallback(async Ge=>{try{const Ae=await se.get(`/activities/accounts/${Ge}`);Fe(Ae.data&&typeof Ae.data=="object"?Ae.data:{})}catch(Ae){console.error(Ae),Ae.response?.status===404&&(console.warn("No activities found for this account."),Fe({}))}},[]);f.useEffect(()=>{at(),Ve(),Ze(),Je()},[at,Ve,Ze,Je]),f.useEffect(()=>{Z(1)},[W,D,ne]);const _e=f.useMemo(()=>{const Ge=W.toLowerCase(),Ae=D;return b.filter($=>{const L=$.name?.toLowerCase().includes(Ge)||$.website?.toLowerCase().includes(Ge)||$.phone_number?.toLowerCase().includes(Ge)||$.industry?.toLowerCase().includes(Ge)||$.parent_company?.toLowerCase().includes(Ge)||$.territory?.name?.toLowerCase().includes(Ge),ee=Ae==="Filter by Status"||lr($.status)===lr(Ae);return L&&ee})},[b,W,D]),he=Math.max(1,Math.ceil(_e.length/ne)||1);f.useEffect(()=>{Z(Ge=>{const Ae=Math.max(1,Math.ceil(_e.length/ne)||1);return Ge>Ae?Ae:Ge})},[_e.length,ne]);const ie=f.useMemo(()=>{const Ge=(we-1)*ne;return _e.slice(Ge,Ge+ne)},[_e,we,ne]),G=Ge=>{if(Ge.target.checked){const Ae=ie.map($=>$.id);xe(Ae)}else xe([])},X=Ge=>{xe(Ae=>Ae.includes(Ge)?Ae.filter($=>$!==Ge):[...Ae,Ge])},ve=async()=>{Oe.length!==0&&J({title:"Delete Accounts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:Oe.length})," selected accounts? This action cannot be undone."]}),confirmLabel:`Delete ${Oe.length} Account(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",accountIds:Oe}})};_e.length===0||(we-1)*ne+1,Math.min(we*ne,_e.length);const $e=()=>Z(Ge=>Math.max(Ge-1,1)),Le=()=>Z(Ge=>Math.min(Ge+1,he));f.useEffect(()=>{v&&oe(lr(v.status)||"PROSPECT")},[v]);const me=b.length,Re=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="customer").length,[b]),qe=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="prospect").length,[b]),rt=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="partner").length,[b]),st=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="active").length,[b]),Ie=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="inactive").length,[b]),ot=f.useMemo(()=>b.filter(Ge=>Ge.status?.toLowerCase()==="former").length,[b]),Ct=f.useMemo(()=>[{title:"Total",value:me,icon:rn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:Re,icon:Ro,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:qe,icon:Xa,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:rt,icon:sa,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:st,icon:Ro,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:Ie,icon:zo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:ot,icon:zo,color:"text-orange-600",bgColor:"bg-orange-100"}],[me,Re,qe,rt,st,Ie,ot]),kt=Ge=>{j(Ge),de("Overview"),oe(lr(Ge?.status)||"PROSPECT")},At=()=>j(null),jt=Ge=>{Ge.target.id==="accountModalBackdrop"&&!Y&&At()},ge=()=>{s(!1),i(!1),h(null),x(ab),l(!1),A(null)},ye=Ge=>{Ge.target.id==="modalBackdrop"&&ge()},Pe=Ge=>Ge?new Date(Ge).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ce=Ge=>{const{name:Ae,value:$}=Ge.target;x(L=>({...L,[Ae]:$}))},Qe=()=>{x(ab),i(!1),h(null),s(!0)};f.useEffect(()=>{const Ge=new URLSearchParams(t.search||"");(t.state?.openAccountModal||Ge.get("openModal")==="1")&&(x(ab),i(!1),h(null),s(!0),De(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const F=Ge=>{j(null),Ge.assigned_accs?A(Ge.assigned_accs):A(null),x({name:Ge.name||"",website:Ge.website||"",phone_number:Ge.phone_number||"",billing_address:Ge.billing_address||"",shipping_address:Ge.shipping_address||"",parent_company:Ge.parent_company||"",industry:Ge.industry||"",status:lr(Ge.status)||"PROSPECT",territory_id:Ge.territory?.id?String(Ge.territory.id):"",assigned_to:Ge.assigned_accs?.id?String(Ge.assigned_accs.id):""}),i(!0),h(Ge.id),s(!0)},q=Ge=>{Ge&&J({title:"Delete Account",message:a.jsxs("span",{children:["Are you sure you want to permanently delete the account"," ",a.jsx("span",{className:"font-semibold",children:Ge.name}),"? This action cannot be undone."]}),confirmLabel:"Delete Account",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ge.id,name:Ge.name}})},fe=async()=>{if(!Q?.action){J(null);return}const{action:Ge}=Q,{type:Ae,payload:$,targetId:L,name:ee,accountIds:Ee}=Ge;re(!0);try{if(Ae==="create"){l(!0);const Me=await se.post("/accounts/admin",$);Je(),V.success(`Account "${ee}" created successfully.`);const We=v?.id||null;ge(),await at(We),!v&&Me.data?.id}else if(Ae==="update"){if(!L)throw new Error("Missing account identifier for update.");l(!0),await se.put(`/accounts/admin/${L}`,$),V.success(`Account "${ee}" updated successfully.`);const Me=v?.id&&v.id===L?L:null;ge(),await at(Me),v?.id===L&&j(null)}else if(Ae==="delete"){if(!L)throw new Error("Missing account identifier for deletion.");const Me=v?.id;u(L),await se.delete(`/accounts/admin/${L}`),V.success(`Account "${ee}" deleted successfully.`),await at(Me&&Me!==L?Me:null),Me===L&&j(null)}else Ae==="bulk-delete"&&(await se.delete("/accounts/admin/bulk-delete",{data:{account_ids:Ee}}),V.success(`Successfully deleted ${Ee.length} accounts`),xe([]),await at())}catch(Me){console.error(Me);const We=Ae==="create"?"Failed to create account. Please review the details and try again.":Ae==="update"?"Failed to update account. Please review the details and try again.":Ae==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",ft=Me.response?.data?.detail||We;V.error(ft),(Ae==="create"||Ae==="update")&&l(!1),Ae==="delete"&&u(null)}finally{(Ae==="create"||Ae==="update")&&l(!1),Ae==="delete"&&u(null),re(!1),J(null)}},te=()=>{Y||J(null)},B=async()=>{if(!v||!be)return;const Ge=lr(be),Ae=lr(v.status);if(Ge!==Ae){ue(!0);try{await se.put(`/accounts/admin/${v.id}`,{status:Ge}),V.success(`Account status updated to ${R2(Ge)}`),N($=>$.map(L=>L.id===v.id?{...L,status:Ge}:L)),j(null)}catch($){console.error($);const L=$.response?.data?.detail||"Failed to update account status. Please try again.";V.error(L)}finally{ue(!1)}}},[ce,De]=f.useState(!1),U=Ge=>{Ge.preventDefault(),De(!0);const Ae=p.name.trim();if(!Ae){V.error("Account name is required.");return}if(!p.assigned_to){V.error("Assigned To is required.");return}const L={name:Ae,website:p.website?.trim()||null,phone_number:p.phone_number?.trim()||null,billing_address:p.billing_address?.trim()||null,shipping_address:p.shipping_address?.trim()||null,industry:p.industry?.trim()||null,parent_company:p.parent_company?.trim()||null,status:p.status||"PROSPECT",territory_id:p.territory_id?Number(p.territory_id):null,assigned_to:p.assigned_to?Number(p.assigned_to):null},ee=r&&d?"update":"create";J({title:ee==="create"?"Confirm New Account":"Confirm Update",message:ee==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:Ae}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:Ae}),"?"]}),confirmLabel:ee==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:ee,payload:L,targetId:d||null,name:Ae}})},K=[{label:"Filter by Status",value:"Filter by Status"},...$2.map(Ge=>({label:Ge.label,value:Ge.value}))],je=Q?.action?.type==="delete"?Q.action.targetId:null,Be=v&&(c===v.id||je===v.id),tt=v&&c===v.id,lt=v?LCe(v.status):"",Nt=v?a.jsx("div",{id:"accountModalBackdrop",onClick:jt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Ge=>Ge.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:At,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:v.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${lt}`,children:R2(v.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>F(v),disabled:Q?.action?.type==="update"&&Q.action.targetId===v.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>q(v),disabled:!!Be,children:tt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(va,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(Ge=>a.jsx("button",{onClick:()=>de(Ge),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Ne===Ge?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ge},Ge))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Ne==="Overview"&&a.jsxs("div",{className:"h-full max-h-100 md:max-h-70 overflow-y-auto hide-scrollbar",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:v.website?a.jsx("a",{href:v.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:v.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:v.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:v.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:v.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:v.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:v.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:v.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:v.assigned_accs?`${v.assigned_accs.first_name} ${v.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:v.acc_creator?`${v.acc_creator.first_name} ${v.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Pe(v.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Pe(v.updated_at)||"N/A"})]})]})}),a.jsx(Tn,{comments:Xe,onAddComment:it})]}),Ne==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:b.notes||"No notes available."})]})]}),Ne==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[le.tasks&&le.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",le.tasks.length,")"]})]}),ke==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.tasks.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ge.subject||Ge.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ge.description||"No description"}),Ge.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",Ge.assigned_to.first_name," ",Ge.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.due_date||Ge.created_at)})]},`task-${Ae}`))})]}),le.meetings&&le.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",le.meetings.length,")"]})]}),ke==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.meetings.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ge.subject||Ge.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ge.description||Ge.location||"No description"}),Ge.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",Ge.host.first_name," ",Ge.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.start_time||Ge.created_at)})]},`meeting-${Ae}`))})]}),le.calls&&le.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",le.calls.length,")"]})]}),ke==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.calls.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:Ge.subject||Ge.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:Ge.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.call_time||Ge.created_at)})]},`call-${Ae}`))})]}),le.contacts&&le.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",le.contacts.length,")"]})]}),ke==="contacts"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.contacts.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/contacts",{state:{contactID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(sa,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Ge.first_name?`${Ge.first_name} `:"",Ge.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ge.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.created_at)})]},`contact-${Ae}`))})]}),le.deals&&le.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",le.deals.length,")"]})]}),ke==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.deals.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[Ge.deal_id?Ge.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",Ge.name||Ge.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:Ge.stage||Ge.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.close_date||Ge.created_at)})]},`deal-${Ae}`))})]}),le.quotes&&le.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>He(ke==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",le.quotes.length,")"]})]}),ke==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),ke==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:le.quotes.map((Ge,Ae)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:Ge.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(Ge.quote_id?Ge.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ge.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(Ge.presented_date)||""})]},`quote-${Ae}`))})]}),(!le||(!le.tasks||le.tasks.length===0)&&(!le.meetings||le.meetings.length===0)&&(!le.calls||le.calls.length===0)&&(!le.quotes||le.quotes.length===0)&&(!le.deals||le.deals.length===0)&&(!le.contacts||le.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${v.name}`,relatedType1:"Account",relatedTo1:String(v.id),relatedType2:null,relatedTo2:null,assigned_to:v.assigned_accs?.id?String(v.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${v.name}`,relatedType1:"Account",relatedTo1:String(v.id),relatedType2:null,relatedTo2:null,assignedTo:v.assigned_accs?.id?String(v.assigned_accs.id):"",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${v.name}`,relatedType1:"Account",relatedTo1:String(v.id),relatedType2:null,relatedTo2:null,assignedTo:v.assigned_accs?.id?String(v.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:be||lr(v?.status)||"PROSPECT",onChange:Ge=>oe(Ge.target.value),children:$2.map(Ge=>a.jsx("option",{value:Ge.value,children:Ge.label},Ge.value))}),a.jsx("button",{onClick:B,disabled:Te||!be||lr(be)===lr(v?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Te||!be||lr(be)===lr(v?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Te?"Updating...":"Update"})]})]})]})]})]})}):null,Ft=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[w&&a.jsx(Wt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Qe(),De(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ct.map(Ge=>a.jsx(OCe,{...Ge},Ge.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:W,onChange:Ge=>z(Ge.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:D,onChange:Ge=>H(Ge.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:K.map(Ge=>a.jsx("option",{value:Ge.value,children:Ge.label},Ge.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:ie.length>0&&ie.every(Ge=>Oe.includes(Ge.id)),onChange:G,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Oe.length>0?a.jsx("button",{onClick:ve,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Oe.length} selected items`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:w?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):_e.length>0?ie.map(Ge=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{kt(Ge),Ue(Ge.id)},children:[a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("input",{type:"checkbox",checked:Oe.includes(Ge.id),onChange:()=>X(Ge.id),onClick:Ae=>Ae.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Ge.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:Ge.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${PCe(Ge.status)}`,children:R2(Ge.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:Ge.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:Ge.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:Ge.phone_number||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},Ge.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:_e.length,pageSize:ne,currentPage:we,onPrev:$e,onNext:Le,onPageSizeChange:Ge=>{pe(Ge),Z(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),da=n?a.jsx("div",{id:"modalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:Ge=>Ge.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ge(),De(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:o||Y,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:r?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:U,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Zm,{label:"Name",name:"name",value:p.name,onChange:Ce,placeholder:"Company name",required:!0,isSubmitted:ce})}),a.jsx(PR,{label:"Parent Company",value:p.parent_company,onChange:Ge=>{x(Ae=>({...Ae,parent_company:Ge}))},items:O.map(Ge=>({id:Ge,name:Ge})),getLabel:Ge=>Ge?.name||"",placeholder:"Select parent company...",disabled:o}),a.jsx(Zm,{label:"Website",name:"website",value:p.website,onChange:Ce,placeholder:"https://example.com",disabled:o}),a.jsx(Zm,{label:"Phone Number",name:"phone_number",value:p.phone_number,onChange:Ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:o}),a.jsx(Zm,{label:"Industry",name:"industry",value:p.industry,onChange:Ce,placeholder:"Industry",disabled:o}),a.jsx(Zm,{label:"Billing Address",name:"billing_address",value:p.billing_address,onChange:Ce,placeholder:"Billing address",disabled:o}),a.jsx(Zm,{label:"Shipping Address",name:"shipping_address",value:p.shipping_address,onChange:Ce,placeholder:"Shipping address",disabled:o}),a.jsx(LR,{label:"Status",name:"status",value:p.status,onChange:Ce,options:[{value:"",label:"Select status"},...$2],required:!0,disabled:o}),a.jsx(PR,{label:"Assigned To",value:p.assigned_to,onChange:Ge=>{const Ae=_.find(L=>String(L.id)===String(Ge));A(Ae);let $=null;Ae&&Ae.assigned_territory&&Ae.assigned_territory.length===1&&($=Ae.assigned_territory[0].id),x(L=>({...L,assigned_to:Ge,territory_id:$}))},items:_||[],getLabel:Ge=>`${Ge?.first_name??""} ${Ge?.last_name??""} (${Ge?.role?.toUpperCase()==="CEO"?"Admin":Ge?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:ce,disabled:o||_.length===0}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(LR,{label:"Territory",name:"territory_id",value:p.territory_id||"",onChange:Ce,options:[{value:"",label:T?T.assigned_territory&&T.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...T&&T.assigned_territory&&T.assigned_territory.map(Ge=>({value:String(Ge.id),label:Ge.name}))||[]],disabled:o||!T||!T.assigned_territory||T.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{ge(),De(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:o||Y,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:o||Y,children:o?"Saving...":r?"Update Account":"Save Account"})]})]})]})}):null,Pa=Q?a.jsx(ICe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:fe,onCancel:te,loading:Y}):null;return a.jsxs(a.Fragment,{children:[Ft,Nt,da,Pa]})}function OCe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Zm({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function LR({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function PR({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(MCe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:d})]})}function MCe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(N=>String(N.id)===String(t)),j=v?s(v):t,b=f.useMemo(()=>{const N=h.trim().toLowerCase();return(N?e.filter(S=>(s(S)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const N=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:N=>{p(N.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!b.some(N=>s(N).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),b.length>0?b.map(N=>{const w=String(N.id),S=s(N),_=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function ICe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function Vx(e){return Pt({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M4 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zM4 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM7.5 5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zM4.5 8a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm2.5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5zm3.5-.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1zm11 0H3v14h3v-2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5V15h3z"},child:[]}]})(e)}const nb={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},yl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),co=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function $Ce(){const e=Tt(),t=Jt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState(!1),[b,N]=f.useState(!1),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(null),[E,M]=f.useState(nb),[O,I]=f.useState(""),[D,H]=f.useState("Filter by Accounts"),[W,z]=f.useState(null),[Q,J]=f.useState("Overview"),[Y,re]=f.useState(1),[we,Z]=f.useState(10),[ne,pe]=f.useState({}),[Ne,de]=f.useState(null),[be,oe]=f.useState([]),[Te,ue]=f.useState(null),{comments:Oe,addComment:xe,refresh:le}=kn({relatedType:"contact",relatedId:d?.id});f.useEffect(()=>{d?.id&&le()},[d?.id,le]),f.useEffect(()=>{const F=t.state?.contactID;F&&(ue(F),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Te&&n.length>0&&!r){const F=n.find(q=>q.id===Te);F?h(F):V.error("Contact not found."),ue(null)}},[Te,n,r]);const Fe=f.useCallback(async(F=null)=>{i(!0);try{const q=await se.get("/contacts/admin/fetch-all"),te=[...Array.isArray(q.data)?q.data:[]].sort((B,ce)=>{const De=B?.created_at||B?.updated_at||0,U=ce?.created_at||ce?.updated_at||0;return new Date(U)-new Date(De)});if(s(te),F){const B=te.find(ce=>ce.id===F);h(B||null)}}catch(q){console.error(q),s([]),q.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),ke=f.useCallback(async()=>{try{const F=await se.get("/accounts/admin/fetch-all"),fe=[...Array.isArray(F.data)?F.data:[]].sort((te,B)=>(te?.name||"").localeCompare(B?.name||""));l(fe)}catch(F){console.error(F),l([]),F.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),He=f.useCallback(()=>{window.open("/admin/accounts?openModal=1","_blank","noopener,noreferrer")},[]),Xe=f.useCallback(async()=>{try{const F=await se.get("/users/all"),fe=[...Array.isArray(F.data)?F.data:[]].sort((te,B)=>yl(te).localeCompare(yl(B)));u(fe)}catch(F){console.error(F),u([]),F.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),it=f.useCallback(async F=>{try{const q=await se.get(`/activities/contact/${F}`);pe(q.data&&typeof q.data=="object"?q.data:{})}catch(q){console.error(q),q.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]);f.useEffect(()=>{Fe(),ke(),Xe()},[Fe,ke,Xe]);const ze=f.useMemo(()=>{const F=new Map;o.forEach(fe=>{fe?.id&&fe?.name&&F.set(String(fe.id),fe.name)}),n.forEach(fe=>{fe?.account_id&&fe?.account?.name&&F.set(String(fe.account_id),fe.account.name)});const q=Array.from(F.entries()).sort((fe,te)=>fe[1].localeCompare(te[1])).map(([fe,te])=>({value:fe,label:te}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...q]},[o,n]),at=f.useMemo(()=>{const F=O.trim().toLowerCase(),q=D.trim();return n.filter(fe=>{const te=[fe?.first_name,fe?.last_name,fe?.email,fe?.title,fe?.department,fe?.account?.name,fe?.account?.status,fe?.work_phone,fe?.mobile_phone_1,fe?.mobile_phone_2,fe?.assigned_contact?.first_name,fe?.assigned_contact?.last_name,fe?.contact_creator?.first_name,fe?.contact_creator?.last_name,fe?.notes,co(fe?.created_at),co(fe?.updated_at)],B=F===""||te.some(De=>De==null?!1:De.toString().toLowerCase().includes(F)),ce=q==="Filter by Accounts"||String(fe.account_id)===q;return B&&ce})},[n,O,D]),Ve=Math.max(1,Math.ceil(at.length/we)||1);f.useEffect(()=>{re(1)},[O,D,we]),f.useEffect(()=>{re(F=>{const q=Math.max(1,Math.ceil(at.length/we)||1);return F>q?q:F})},[at.length,we]);const Ze=f.useMemo(()=>{const F=(Y-1)*we;return at.slice(F,F+we)},[at,Y,we]),Je=()=>re(F=>Math.max(F-1,1)),Ue=()=>re(F=>Math.min(F+1,Ve)),_e=F=>{if(F.target.checked){const q=Ze.map(fe=>fe.id);oe(q)}else oe([])},he=F=>{oe(q=>q.includes(F)?q.filter(fe=>fe!==F):[...q,F])},ie=async()=>{be.length!==0&&S({title:"Delete Contacts",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:be.length})," selected contacts? This action cannot be undone."]}),confirmLabel:`Delete ${be.length} Contact(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",contact_ids:be}})},G=f.useCallback(()=>{x(!1),j(!1),A(null),M(nb),N(!1),qe(!1)},[]),X=F=>{F.target.id==="modalBackdrop"&&!b&&!_&&G()},ve=F=>{const{name:q,value:fe}=F.target;M(te=>({...te,[q]:fe}))},$e=()=>{M(nb),j(!1),A(null),x(!0)};f.useEffect(()=>{const F=new URLSearchParams(t.search||"");(t.state?.openContactModal||F.get("openModal")==="1")&&(M(nb),j(!1),A(null),x(!0),qe(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const Le=F=>{F&&(M({first_name:F.first_name||"",last_name:F.last_name||"",account_id:F.account_id?String(F.account_id):"",title:F.title||"",department:F.department||"",email:F.email||"",work_phone:F.work_phone||"",mobile_phone_1:F.mobile_phone_1||"",mobile_phone_2:F.mobile_phone_2||"",notes:F.notes||"",assigned_to:F.assigned_to?String(F.assigned_to):""}),j(!0),A(F.id),x(!0),h(null))},me=F=>{if(!F)return;const q=yl(F)||"this contact";S({title:"Delete Contact",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:q}),"? This action cannot be undone."]}),confirmLabel:"Delete Contact",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:q}})},[Re,qe]=f.useState(!1),rt=F=>{F.preventDefault(),qe(!0);const q=E.last_name.trim();if(!q){V.error("Last name is required.");return}if(!E.account_id){V.error("Account is required.");return}if(!E.assigned_to){V.error("Assigned To is required.");return}const te=E.email?.trim();if(!te){V.error("Email is required.");return}if(!te.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)){V.error("Please enter a valid email address.");return}const ce=E.first_name?.trim()||"",De={first_name:ce,last_name:q,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},U=v&&T?"update":"create",K=`${ce} ${q}`.trim();S({title:U==="create"?"Confirm New Contact":"Confirm Update",message:U==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:K})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:U==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:U,payload:De,targetId:T||null,name:K}})},st=async()=>{if(!w?.action){S(null);return}const{action:F}=w,{type:q,payload:fe,targetId:te,name:B}=F;k(!0);try{if(q==="create"){N(!0),await se.post("/contacts/admin",fe),V.success(`Contact "${B}" created successfully.`);const ce=d?.id||null;G(),await Fe(ce)}else if(q==="update"){if(!te)throw new Error("Missing contact identifier for update.");N(!0),await se.put(`/contacts/admin/${te}`,fe),V.success(`Contact "${B}" updated successfully.`);const ce=d?.id&&d.id===te?te:d?.id||null;G(),await Fe(ce),d?.id===te&&h(null)}else if(q==="delete"){if(!te)throw new Error("Missing contact identifier for deletion.");const ce=d?.id;z(te),await se.delete(`/contacts/admin/${te}`),V.success(`Contact "${B}" deleted successfully.`),await Fe(ce&&ce!==te?ce:null),ce===te&&h(null)}else if(q==="bulk-delete"){const ce=F.contact_ids;await se.delete("/contacts/admin/bulk-delete",{data:{contact_ids:ce}}),V.success(`Successfully deleted ${ce.length} contacts`),oe([]),await Fe()}}catch(ce){console.error(ce);const De=q==="create"?"Failed to create contact. Please review the details and try again.":q==="update"?"Failed to update contact. Please review the details and try again.":q==="bulk-delete"?"Failed to delete selected contacts.":"Failed to delete contact. Please try again.",U=ce.response?.data?.detail||De;V.error(U)}finally{(q==="create"||q==="update")&&N(!1),q==="delete"&&z(null),k(!1),S(null)}},Ie=()=>{_||S(null)},ot=F=>{h(F),J("Overview")},Ct=()=>h(null),kt=F=>{F.target.id==="contactModalBackdrop"&&!_&&Ct()},At=w?.action?.type==="delete"?w.action.targetId:null,jt=d&&(W===d.id||At===d.id),ge=d&&W===d.id,ye=d?a.jsx("div",{id:"contactModalBackdrop",onClick:kt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:F=>F.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:Ct,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:yl(d)||"Unnamed contact"})}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Le(d),disabled:_||w?.action?.type==="update"&&w.action.targetId===d.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>me(d),disabled:!!jt,children:ge?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(va,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(F=>a.jsx("button",{onClick:()=>J(F),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Q===F?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:F},F))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Q==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:yl(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:co(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:co(d.updated_at)||"N/A"})]})]})}),Q==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]}),a.jsx(Tn,{comments:Oe,onAddComment:xe})]}),Q==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[ne.tasks&&ne.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ne.tasks.length,")"]})]}),Ne==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.tasks.map((F,q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/tasks",{state:{taskID:F.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.description||"No description"}),F.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",F.assigned_to.first_name," ",F.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(F.due_date||F.created_at)})]},`task-${q}`))})]}),ne.meetings&&ne.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ne.meetings.length,")"]})]}),Ne==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.meetings.map((F,q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/meetings",{state:{meetingID:F.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.description||F.location||"No description"}),F.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",F.host.first_name," ",F.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(F.start_time||F.created_at)})]},`meeting-${q}`))})]}),ne.calls&&ne.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ne.calls.length,")"]})]}),Ne==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.calls.map((F,q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/calls",{state:{callID:F.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:F.subject||F.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:F.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(F.call_time||F.created_at)})]},`call-${q}`))})]}),ne.deals&&ne.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ne.deals.length,")"]})]}),Ne==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.deals.map((F,q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/deals",{state:{dealID:F.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",F.name||F.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:F.stage||F.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(F.close_date||F.created_at)})]},`deal-${q}`))})]}),ne.quotes&&ne.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ne.quotes.length,")"]})]}),Ne==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.quotes.map((F,q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/admin/quotes",{state:{quoteID:F.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(F.quote_id?F.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:F.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:co(F.presented_date)||""})]},`quote-${q}`))})]}),(!ne||(!ne.tasks||ne.tasks.length===0)&&(!ne.meetings||ne.meetings.length===0)&&(!ne.calls||ne.calls.length===0)&&(!ne.quotes||ne.quotes.length===0)&&(!ne.deals||ne.deals.length===0)&&(!ne.contacts||ne.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assigned_to:d?.assigned_contact?.id?String(d.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const F=encodeURIComponent(d.email),q=encodeURIComponent(""),fe=encodeURIComponent(""),te=`mailto:${F}?subject=${q}&body=${fe}`;window.location.href=te},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${yl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,Pe=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(Wt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{$e(),qe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:O,onChange:F=>I(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:D,onChange:F=>H(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:ze.map(F=>a.jsx("option",{value:F.value,children:F.label},F.value??F.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:Ze.length>0&&be.length===Ze.length,onChange:_e})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:be.length>0?a.jsx("button",{onClick:ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${be.length} selected items`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"Loading contacts..."})}):at.length>0?Ze.map(F=>{const q=[{Icon:sn,value:F.email,key:"email"},{Icon:Mt,value:F.work_phone,key:"work_phone"},{Icon:dd,value:F.mobile_phone_1,key:"mobile_phone_1"},{Icon:dd,value:F.mobile_phone_2,key:"mobile_phone_2"}].filter(fe=>!!fe.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:fe=>{fe.target.closest('input[type="checkbox"]')||fe.target.closest("button")||(ot(F),it(F.id))},children:[a.jsx("td",{className:"py-3 px-4 text-center align-top",children:a.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer",checked:be.includes(F.id),onChange:()=>he(F.id)})}),a.jsxs("td",{className:"py-3 px-4 align-top",children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:yl(F)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:F.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(Vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:F.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:q.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:q.map(({Icon:fe,value:te,key:B})=>{const ce=bt.createElement(fe,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[ce,a.jsx("span",{children:te})]},B)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(na,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:F.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(sa,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:F.assigned_contact?`${F.assigned_contact.first_name} ${F.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Dt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:co(F.created_at)||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F.status==="Inactive"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:F.status||"Active"})}),a.jsx("td",{className:"py-3 px-4 align-top"})]},F.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No contacts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:at.length,pageSize:we,currentPage:Y,onPrev:Je,onNext:Ue,onPageSizeChange:F=>{Z(F),re(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),Ce=p?a.jsx("div",{id:"modalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[a.jsx("button",{onClick:()=>{G(),qe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||_,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:rt,noValidate:!0,children:[a.jsx($c,{label:"First Name",name:"first_name",value:E.first_name,onChange:ve,placeholder:"First name",isSubmitted:Re}),a.jsx($c,{label:"Last Name",name:"last_name",value:E.last_name,onChange:ve,placeholder:"Last name",required:!0,isSubmitted:Re}),a.jsx(DR,{label:"Account",value:E.account_id,onChange:F=>M(q=>({...q,account_id:F})),items:o||[],getLabel:F=>F?.name??"",placeholder:"Search account...",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:He,disabled:b,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:ke,disabled:b,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),required:!0,isSubmitted:Re,disabled:b||o.length===0}),a.jsx(DR,{label:"Assigned To",value:E.assigned_to,onChange:F=>M(q=>({...q,assigned_to:F})),items:c||[],getLabel:F=>`${F?.first_name??""} ${F?.last_name??""} (${F?.role?.toUpperCase()==="CEO"?"Admin":F?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Re,disabled:b||c.length===0}),a.jsx($c,{label:"Title",name:"title",value:E.title,onChange:ve,placeholder:"Job title",disabled:b}),a.jsx($c,{label:"Department",name:"department",value:E.department,onChange:ve,placeholder:"Department",disabled:b}),a.jsx($c,{label:"Email",name:"email",type:"email",value:E.email,onChange:ve,placeholder:"example@email.com",required:!0,isSubmitted:Re}),a.jsx($c,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx($c,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx($c,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(zCe,{label:"Notes",name:"notes",value:E.notes,onChange:ve,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{G(),qe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||_,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||_,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,Qe=w?a.jsx(FCe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:st,onCancel:Ie,loading:_}):null;return a.jsxs(a.Fragment,{children:[Pe,ye,Ce,Qe]})}function $c({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function DR({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,actions:d=null}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),d?a.jsx("div",{className:"flex items-center",children:d}):null]}),a.jsx(RCe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h})]})}function RCe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function zCe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function FCe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const z2=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function dY({lead:e,onBack:t,fetchLeads:n,onEdit:s,onDelete:r,setSelectedLead:i,relatedActs:o}){const l=Tt(),{leadID:c}=Go(),[u,d]=f.useState(e||null),[h,p]=f.useState("Overview"),[x,v]=f.useState(""),j=u?.status?.toUpperCase()==="QUALIFIED",[b,N]=f.useState(null),[w,S]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[_,k]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[T,A]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),E=async()=>{try{if(e){d(e),v(e.status||"New");return}if(!c)return;const H=await se.get(`/leads/get/${c}`);d(H.data),v(H.data.status||"New"),S({name:H.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:H.data.territory?.id||null,assigned_to:H.data.assigned_to?.id||null,created_by:H.data.creator?.id||null}),k({last_name:H.data.last_name||"",first_name:H.data.first_name||"",account_id:null,title:H.data.title||"",department:H.data.department||"",email:H.data.email||"",work_phone:H.data.work_phone||"",mobile_phone_1:H.data.mobile_phone_1||"",mobile_phone_2:H.data.mobile_phone_2||"",notes:"",assigned_to:H.data.assigned_to?.id||null,created_by:H.data.creator?.id||null}),A({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:H.data.assigned_to?.id||null,created_by:H.data.creator?.id||null})}catch(H){console.error(H)}};f.useEffect(()=>{e?(d(e),v(e.status||"New")):c&&E()},[c,e]);const M=async()=>{try{if(x==="Converted"&&u?.status?.toUpperCase()!=="QUALIFIED"){V.error("Lead must be Qualified before it can be converted.");return}const H=await se.put(`/leads/${u.id}/update/status`,{status:x});V.success("Lead status updated successfully");const W={...u,status:H.data.status};d(W),i&&i(W),n&&n(),t&&t()}catch(H){console.error(H),V.error("Failed to update lead status")}},O=async H=>{const W={...w,assigned_to:H.assigned_to?.id,billing_address:H.address,shipping_address:H.address,created_by:H.creator?.id,industry:null,name:H.company_name,phone_number:H.work_phone,status:"Prospect",territory_id:H.territory?.id,website:""};console.log("Account data: ",W),console.log("Contact data: ",_),console.log("Deal data: ",T),console.log("Lead data: ",H);try{const Q=(await se.post("/accounts/convertedLead",W)).data.id,J={..._,account_id:Q,assigned_to:H.assigned_to?.id,created_by:H.creator?.id,department:H.department,email:H.email,first_name:H.first_name,last_name:H.last_name,mobile_phone_1:H.mobile_phone_1,mobile_phone_2:H.mobile_phone_2,notes:H.notes,title:H.title,work_phone:H.work_phone},re=(await se.post("/contacts/convertedLead",J)).data.id,we=()=>{switch(T.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},Z=T.amount&&T.amount!==""?parseFloat(T.amount):0,ne={...T,account_id:Q,assigned_to:H.assigned_to?.id,created_by:H.creator?.id,primary_contact_id:re,probability:we(),stage:"Prospecting"},pe=await se.post("/deals/convertedLead",ne),Ne=await se.put(`/leads/convert/${H.id}`);i&&i(null),n(),V.success("Lead converted successfully!"),t()}catch(z){console.error("Error during conversion:",z);const Q=z.response?.data?.detail||z.message||"Failed to convert lead. Please try again.";V.error(Q)}},I=H=>{switch((H||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},D=H=>H.toString().toLowerCase().replace(/\b\w/g,W=>W.toUpperCase());return u?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[u.first_name," ",u.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${I(u.status)}`,children:D(u.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>O(u),disabled:!j,title:j?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${j?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&u&&s(u)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&u&&r(u)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(va,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(H=>a.jsx("button",{onClick:()=>p(H),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${h===H?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:H},H))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[h==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[u.first_name," ",u.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:u.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:u.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:u.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:u.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:u.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:u.assigned_to?`${u.assigned_to.first_name} ${u.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:u.creator?`${u.creator.first_name} ${u.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:u.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:u.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:u.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:u.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:u.address||"N/A"})]})]})}),h==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:u.notes||"No notes available."})]})]}),h==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),b==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((H,W)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/tasks",{state:{taskID:H.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||"No description"}),H.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",H.assigned_to.first_name," ",H.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:z2(H.due_date||H.created_at)})]},`task-${W}`))})]}),o.meetings&&o.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),b==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((H,W)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/meetings",{state:{meetingID:H.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.description||H.location||"No description"}),H.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",H.host.first_name," ",H.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:z2(H.start_time||H.created_at)})]},`meeting-${W}`))})]}),o.calls&&o.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),b==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((H,W)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/admin/calls",{state:{callID:H.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:H.subject||H.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:H.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:z2(H.call_time||H.created_at)})]},`call-${W}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{u&&l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:u.title?`Call regarding ${u.title}`:`Call with ${u.first_name} ${u.last_name}`,relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assigned_to:u.assigned_to?.id?String(u.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!u?.email){alert("No email address available");return}const H=encodeURIComponent(u.email),W=encodeURIComponent(""),z=encodeURIComponent(""),Q=`mailto:${H}?subject=${W}&body=${z}`;window.location.href=Q},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{u&&l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:u.title?`Meeting regarding ${u.title}`:`Meeting with ${u.first_name||""} ${u.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assignedTo:u.assigned_to?.id?String(u.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{u&&l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:u.title?`Follow up on ${u.title}`:`Follow up with ${u.first_name||""} ${u.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(u.id),relatedType2:null,relatedTo2:null,assignedTo:u.assigned_to?.id?String(u.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:x,onChange:H=>v(H.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),u?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:M,disabled:x===u.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${x===u.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const UCe=th.all(),F2=UCe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),BCe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),HCe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},U2={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function qCe(){const e=Tt(),{leadID:t}=Go();Us();const[n,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(!1),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState(""),[_,k]=f.useState(1),[T,A]=f.useState(10),[E,M]=f.useState(U2),[O,I]=f.useState(!1),[D,H]=f.useState(null),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState(!1),[we,Z]=f.useState([]),[ne,pe]=f.useState({});f.useRef(null);const[Ne,de]=f.useState(!1),[be,oe]=f.useState(null),[Te,ue]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Oe,xe]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[le,Fe]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const ke=async()=>{try{const Ce=await se.get("/leads/getUsers");l(Ce.data)}catch(Ce){console.error(`Error fetching users: ${Ce}`)}},He=async()=>{x(!0);try{const Ce=await se.get("/leads/admin/getLeads");h(Ce.data),console.log(Ce.data)}catch(Ce){console.error(`Error fetching leads: ${Ce}`)}finally{x(!1)}};f.useEffect(()=>{ke(),He()},[]),f.useEffect(()=>{if(t&&d.length>0&&!r&&!O){const Ce=d.find(Qe=>Qe.id===Number(t));Ce&&s(Ce)}else!t&&!n&&s(null)},[t,d,r,O]),f.useEffect(()=>{if(be){const Qe=(fe=>{if(!fe)return{code:"+63",number:""};const te=fe.match(/^(\+\d+)\s(.+)$/);if(te)return{code:te[1],number:te[2]};if(fe.startsWith("+")){const B=fe.match(/^(\+\d{1,3})/);if(B)return{code:B[1],number:fe.substring(B[1].length).trim()}}return{code:"+63",number:fe}})(be.work_phone),F=[];be.work_phone&&F.push(`Work: ${be.work_phone}`),be.mobile_phone_1&&F.push(`Mobile 1: ${be.mobile_phone_1}`),be.mobile_phone_2&&F.push(`Mobile 2: ${be.mobile_phone_2}`);const q=F.length>0?F.join(" | "):"";ue({name:be.company_name||"",website:"",countryCode:Qe.code,phone_number:Qe.number,combinedPhoneNumbers:q,billing_address:be.address||"",shipping_address:be.address||"",industry:"",status:"Prospect",territory_id:be.assigned_to?.territory?.id||null,assigned_to:be.assigned_to?.id||null,created_by:be.creator?.id||null}),xe({last_name:be.last_name||"",first_name:be.first_name||"",account_id:null,title:be.title||"",department:be.department||"",email:be.email||"",work_phone:be.work_phone||"",mobile_phone_1:be.mobile_phone_1||"",mobile_phone_2:be.mobile_phone_2||"",notes:be.notes||"",assigned_to:be.assigned_to?.id||null,created_by:be.creator?.id||null}),Fe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:be.assigned_to?.id||null,created_by:be.creator?.id||null})}},[be]);const Xe=Ce=>j(Ce.target.value),it=f.useMemo(()=>{let Ce=[...d];const Qe=v.trim().toLowerCase();Qe&&(Ce=Ce.filter(q=>[q?.first_name,q?.last_name,q?.company_name,q?.title,q?.email,q?.work_phone,q?.assigned_to?`${q.assigned_to.first_name} ${q.assigned_to.last_name}`:""].some(te=>te&&te.toString().toLowerCase().includes(Qe))));const F=b.trim().toUpperCase();return F&&F!=="FILTER BY STATUS"?Ce=Ce.filter(q=>(q.status?q.status.toUpperCase():"")===F):Ce=Ce.filter(q=>(q.status?q.status.toUpperCase():"")!=="CONVERTED"),w?Ce.sort((q,fe)=>{const te=`${q.first_name} ${q.last_name}`,B=`${fe.first_name} ${fe.last_name}`;return w==="asc"?te.localeCompare(B):B.localeCompare(te)}):Ce.sort((q,fe)=>{const te=new Date(q.created_at).getTime();return new Date(fe.created_at).getTime()-te}),Ce},[d,v,b,w]),ze=Math.max(1,Math.ceil(it.length/T)||1);f.useEffect(()=>{k(1)},[v,b]),f.useEffect(()=>{k(Ce=>{const Qe=Math.max(1,Math.ceil(it.length/T)||1);return Ce>Qe?Qe:Ce})},[it.length,T]);const at=f.useMemo(()=>{const Ce=(_-1)*T;return it.slice(Ce,Ce+T)},[it,_,T]),Ve=()=>k(Ce=>Math.max(Ce-1,1)),Ze=()=>k(Ce=>Math.min(Ce+1,ze)),Je=Ce=>{A(Ce),k(1)},Ue=f.useCallback(async Ce=>{try{const Qe=await se.get(`/activities/lead/${Ce}`);pe(Qe.data&&typeof Qe.data=="object"?Qe.data:{})}catch(Qe){console.error(Qe),Qe.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),_e=Ce=>{s(Ce),Ue(Ce.id)},he=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ie=()=>{i(!1),M(U2),I(!1),H(null),z(!1),u(null),sessionStorage.removeItem("editLeadData")},G=Ce=>{Ce.target.id==="modalBackdrop"&&ie()},X=()=>{M(U2),I(!1),H(null),u(null),i(!0)},ve=Ce=>{if(!Ce){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",Ce),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const Qe=B=>{if(!B)return{code:"+63",number:""};const ce=B.match(/^(\+\d+)\s(.+)$/);return ce?{code:ce[1],number:ce[2]}:{code:"+63",number:B}},F=Qe(Ce.work_phone),q=Qe(Ce.mobile_phone_1),fe=Qe(Ce.mobile_phone_2);let te="";if(Ce.assigned_to){te=String(Ce.assigned_to.id);const B=o?.find(ce=>ce.id===Ce.assigned_to.id);u(B)}M({first_name:Ce.first_name||"",last_name:Ce.last_name||"",company_name:Ce.company_name||"",title:Ce.title||"",department:Ce.department||"",email:Ce.email||"",work_ccode:F.code,work_phone:F.number,m1_ccode:q.code,mobile_phone_1:q.number,m2_ccode:fe.code,mobile_phone_2:fe.number,address:Ce.address||"",notes:Ce.notes||"",source:Ce.source||"",territory_id:Ce.territory?.id||null,lead_owner:te,status:Ce.status||"New"}),I(!0),H(Ce.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},$e=Ce=>{if(!Ce){console.error("handleDelete: lead is null or undefined");return}console.log("handleDelete called with lead:",Ce);const Qe=`${Ce.first_name} ${Ce.last_name}`||"this lead";J({title:"Delete Lead",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:Qe}),"? This action cannot be undone."]}),confirmLabel:"Delete Lead",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ce.id,name:Qe}})},Le=Ce=>{const{name:Qe,value:F}=Ce.target;if(M(q=>({...q,[Qe]:F})),Qe==="lead_owner"){const q=o.find(fe=>fe.id===parseInt(F));u(q)}},[me,Re]=f.useState(!1),qe=Ce=>{if(Ce.preventDefault(),Re(!0),!E.last_name?.trim()){V.error("Last name is required.");return}if(!E.company_name?.trim()){V.error("Company is required.");return}if(!E.title?.trim()){V.error("Job title is required.");return}if(!E.email?.trim()){V.error("Email is required.");return}if(!E.email.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E.email)){V.error("Please enter a valid email address with a dot in the domain.");return}if(!E.lead_owner){V.error("Please assign a lead owner.");return}const F={...E,territory_id:E.territory_id?parseInt(E.territory_id):null,lead_owner:parseInt(E.lead_owner),work_phone:`${E.work_ccode} ${E.work_phone}`,mobile_phone_1:`${E.m1_ccode} ${E.mobile_phone_1}`,mobile_phone_2:`${E.m2_ccode} ${E.mobile_phone_2}`},q=O&&D?"update":"create",fe=`${E.first_name} ${E.last_name}`;J({title:q==="create"?"Confirm New Lead":"Confirm Update",message:q==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:fe}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:fe}),"?"]}),confirmLabel:q==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:q,payload:F,targetId:D||null,name:fe}})},rt=Ce=>{if(Ce.target.checked){const Qe=at.map(F=>F.id);Z(Qe)}else Z([])},st=Ce=>{Z(Qe=>Qe.includes(Ce)?Qe.filter(F=>F!==Ce):[...Qe,Ce])},Ie=async()=>{we.length!==0&&J({title:"Delete Leads",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:we.length})," selected leads? This action cannot be undone."]}),confirmLabel:`Delete ${we.length} Lead(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",leadIds:we}})},ot=async()=>{if(!Q?.action){J(null);return}const{action:Ce}=Q,{type:Qe,payload:F,targetId:q,name:fe,lead:te,leadIds:B}=Ce;console.log(F),re(!0);try{if(Qe==="create")z(!0),await se.post("/leads/create",F),V.success(`Lead "${fe}" created successfully.`),ie(),await He();else if(Qe==="update"){if(!q)throw new Error("Missing lead identifier for update.");z(!0);const ce=await se.put(`/leads/${q}`,F);V.success(`Lead "${fe}" updated successfully.`),n&&n.id===q&&s(null),ie(),await He()}else if(Qe==="delete"){if(!q)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${q}`),V.success(`Lead "${fe}" deleted successfully.`),n?.id===q&&s(null),await He()}else Qe==="bulk-delete"&&(await se.delete("/leads/admin/bulk-delete",{data:{lead_ids:B}}),V.success(`Successfully deleted ${B.length} leads`),Z([]),await He())}catch(ce){console.error(ce);const De=Qe==="create"?"Failed to create lead. Please review the details and try again.":Qe==="update"?"Failed to update lead. Please review the details and try again.":"Failed to delete lead. Please try again.",U=ce.response?.data?.detail||De;V.error(U)}finally{(Qe==="create"||Qe==="update")&&z(!1),Qe!=="edit"&&(re(!1),J(null))}},Ct=()=>{Y||J(null)},kt=d.filter(Ce=>Ce.status==="New").length,At=d.filter(Ce=>Ce.status==="Contacted").length,jt=d.filter(Ce=>Ce.status==="Qualified").length,ge=d.filter(Ce=>Ce.status==="Converted").length,ye=d.filter(Ce=>Ce.status==="Lost").length,Pe=[{title:"New",value:kt,icon:Xa,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:At,icon:Mt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:jt,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:ge,icon:Jl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:ye,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(Wt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Xa,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{V.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Wo,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{X(),Re(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Pe.map(Ce=>a.jsx(WCe,{...Ce},Ce.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Xe,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:Ce=>N(Ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:w,onChange:Ce=>S(Ce.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"",children:"Sort by Name"}),a.jsx("option",{value:"asc",children:"A-Z"}),a.jsx("option",{value:"desc",children:"Z-A"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:at.length>0&&at.every(Ce=>we.includes(Ce.id)),onChange:rt})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:we.length>0?a.jsx("button",{onClick:Ie,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${we.length} selected leads`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:it.length>0?at.map(Ce=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:Qe=>Qe.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:we.includes(Ce.id),onChange:()=>st(Ce.id)})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>_e(Ce),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[Ce.first_name," ",Ce.last_name]})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>_e(Ce),children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:Ce.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>_e(Ce),children:Ce.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>_e(Ce),children:Ce.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>_e(Ce),children:Ce.assigned_to?`${Ce.assigned_to.first_name} ${Ce.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>_e(Ce),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${HCe(Ce.status||"New")}`,children:BCe(Ce.status||"New")})}),a.jsx("td",{})]},Ce.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:it.length,pageSize:T,currentPage:_,onPrev:Ve,onNext:Ze,onPageSizeChange:Je,label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:G,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Ce=>Ce.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ie(),Re(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:O?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:E.first_name,onChange:Le,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"last_name",placeholder:"Smith",value:E.last_name,onChange:Le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
              ${me&&!E.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
          focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:E.company_name,onChange:Le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${me&&!E.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:E.title,onChange:Le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${me&&!E.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:E.department,onChange:Le,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:E.email,onChange:Le,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${me&&!E.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:E.work_ccode,onChange:Le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:F2.map(Ce=>a.jsx("option",{value:Ce.code,children:Ce.code},Ce.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:E.work_phone,onChange:Le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:E.m1_ccode,onChange:Le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:F2.map(Ce=>a.jsx("option",{value:Ce.code,children:Ce.code},Ce.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:Le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:E.m2_ccode,onChange:Le,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:F2.map(Ce=>a.jsx("option",{value:Ce.code,children:Ce.code},Ce.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:Le,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:E.address,onChange:Le,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${me&&!E.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(VCe,{items:Array.isArray(o)?o:[],value:E.lead_owner??"",placeholder:"Search a user...",getLabel:Ce=>`${Ce.first_name} ${Ce.last_name}`,onChange:Ce=>{const Qe=o.find(q=>String(q.id)===String(Ce));u(Qe);let F=null;Qe&&Qe.assigned_territory&&Qe.assigned_territory.length===1&&(F=Qe.assigned_territory[0].id),M(q=>({...q,lead_owner:Ce,territory_id:F}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:E.territory_id||"",onChange:Le,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(Ce=>a.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:E.source,onChange:Le,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:E.notes,onChange:Le,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{ie(),Re(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:W||Y,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:qe,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:W||Y,children:W||Y?"Processing...":O?"Update Lead":"Save Lead"})]})]})]})}),Q&&a.jsx(GCe,{open:!0,title:Q.title,message:Q.message,confirmLabel:Q.confirmLabel,cancelLabel:Q.cancelLabel,variant:Q.variant,onConfirm:ot,onCancel:Ct,loading:Y}),n&&!r&&!O&&a.jsx(dY,{relatedActs:ne,lead:n,onBack:he,fetchLeads:He,setSelectedLead:s,onEdit:ve,onDelete:$e})]})}function GCe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function WCe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function VCe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[u,d]=f.useState(""),h=f.useRef(null),p=e.find(j=>String(j.id)===String(t)),x=p?s(p):"",v=f.useMemo(()=>{const j=u.trim().toLowerCase();return(j?e.filter(N=>(s(N)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const j=b=>{h.current&&!h.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{l||d("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:j=>{d(j.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(j=>{const b=String(j.id),N=s(j),w=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:N||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}let YCe={data:""},QCe=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||YCe},KCe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,XCe=/\/\*[^]*?\*\/|  +/g,OR=/\n+/g,Yc=(e,t)=>{let n="",s="",r="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+o+";":s+=i[1]=="f"?Yc(o,i):i+"{"+Yc(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=Yc(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Yc.p?Yc.p(i,o):i+":"+o+";")}return n+(t&&r?t+"{"+r+"}":r)+s},bl={},uY=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+uY(e[n]);return t}return e},ZCe=(e,t,n,s,r)=>{let i=uY(e),o=bl[i]||(bl[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!bl[o]){let c=i!==e?e:(u=>{let d,h,p=[{}];for(;d=KCe.exec(u.replace(XCe,""));)d[4]?p.shift():d[3]?(h=d[3].replace(OR," ").trim(),p.unshift(p[0][h]=p[0][h]||{})):p[0][d[1]]=d[2].replace(OR," ").trim();return p[0]})(e);bl[o]=Yc(r?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&bl.g?bl.g:null;return n&&(bl.g=bl[o]),((c,u,d,h)=>{h?u.data=u.data.replace(h,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(bl[o],t,s,l),o},JCe=(e,t,n)=>e.reduce((s,r,i)=>{let o=t[i];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Yc(l,""):l===!1?"":l}return s+r+(o??"")},"");function PN(e){let t=this||{},n=e.call?e(t.p):e;return ZCe(n.unshift?n.raw?JCe(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,QCe(t.target),t.g,t.o,t.k)}let mY,Xk,Zk;PN.bind({g:1});let Vl=PN.bind({k:1});function eSe(e,t,n,s){Yc.p=t,mY=e,Xk=n,Zk=s}function kd(e,t){let n=this||{};return function(){let s=arguments;function r(i,o){let l=Object.assign({},i),c=l.className||r.className;n.p=Object.assign({theme:Xk&&Xk()},l),n.o=/ *go\d+/.test(c),l.className=PN.apply(n,s)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Zk&&u[0]&&Zk(l),mY(u,l)}return r}}var tSe=e=>typeof e=="function",lw=(e,t)=>tSe(e)?e(t):e,aSe=(()=>{let e=0;return()=>(++e).toString()})(),fY=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),nSe=20,xP="default",hY=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return hY(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},hv=[],gY={toasts:[],pausedAt:void 0,settings:{toastLimit:nSe}},Eo={},pY=(e,t=xP)=>{Eo[t]=hY(Eo[t]||gY,e),hv.forEach(([n,s])=>{n===t&&s(Eo[t])})},xY=e=>Object.keys(Eo).forEach(t=>pY(e,t)),sSe=e=>Object.keys(Eo).find(t=>Eo[t].toasts.some(n=>n.id===e)),DN=(e=xP)=>t=>{pY(t,e)},rSe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},iSe=(e={},t=xP)=>{let[n,s]=f.useState(Eo[t]||gY),r=f.useRef(Eo[t]);f.useEffect(()=>(r.current!==Eo[t]&&s(Eo[t]),hv.push([t,s]),()=>{let o=hv.findIndex(([l])=>l===t);o>-1&&hv.splice(o,1)}),[t]);let i=n.toasts.map(o=>{var l,c,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||e?.removeDelay,duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||e?.duration||rSe[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...n,toasts:i}},oSe=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:n?.id||aSe()}),Yx=e=>(t,n)=>{let s=oSe(t,e,n);return DN(s.toasterId||sSe(s.id))({type:2,toast:s}),s.id},ns=(e,t)=>Yx("blank")(e,t);ns.error=Yx("error");ns.success=Yx("success");ns.loading=Yx("loading");ns.custom=Yx("custom");ns.dismiss=(e,t)=>{let n={type:3,toastId:e};t?DN(t)(n):xY(n)};ns.dismissAll=e=>ns.dismiss(void 0,e);ns.remove=(e,t)=>{let n={type:4,toastId:e};t?DN(t)(n):xY(n)};ns.removeAll=e=>ns.remove(void 0,e);ns.promise=(e,t,n)=>{let s=ns.loading(t.loading,{...n,...n?.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let i=t.success?lw(t.success,r):void 0;return i?ns.success(i,{id:s,...n,...n?.success}):ns.dismiss(s),r}).catch(r=>{let i=t.error?lw(t.error,r):void 0;i?ns.error(i,{id:s,...n,...n?.error}):ns.dismiss(s)}),e};var lSe=1e3,cSe=(e,t="default")=>{let{toasts:n,pausedAt:s}=iSe(e,t),r=f.useRef(new Map).current,i=f.useCallback((h,p=lSe)=>{if(r.has(h))return;let x=setTimeout(()=>{r.delete(h),o({type:4,toastId:h})},p);r.set(h,x)},[]);f.useEffect(()=>{if(s)return;let h=Date.now(),p=n.map(x=>{if(x.duration===1/0)return;let v=(x.duration||0)+x.pauseDuration-(h-x.createdAt);if(v<0){x.visible&&ns.dismiss(x.id);return}return setTimeout(()=>ns.dismiss(x.id,t),v)});return()=>{p.forEach(x=>x&&clearTimeout(x))}},[n,s,t]);let o=f.useCallback(DN(t),[t]),l=f.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=f.useCallback((h,p)=>{o({type:1,toast:{id:h,height:p}})},[o]),u=f.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),d=f.useCallback((h,p)=>{let{reverseOrder:x=!1,gutter:v=8,defaultPosition:j}=p||{},b=n.filter(S=>(S.position||j)===(h.position||j)&&S.height),N=b.findIndex(S=>S.id===h.id),w=b.filter((S,_)=>_<N&&S.visible).length;return b.filter(S=>S.visible).slice(...x?[w+1]:[0,w]).reduce((S,_)=>S+(_.height||0)+v,0)},[n]);return f.useEffect(()=>{n.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let p=r.get(h.id);p&&(clearTimeout(p),r.delete(h.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:d}}},dSe=Vl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,uSe=Vl`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,mSe=Vl`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fSe=kd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${dSe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${uSe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${mSe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hSe=Vl`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,gSe=kd("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${hSe} 1s linear infinite;
`,pSe=Vl`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xSe=Vl`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ySe=kd("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pSe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xSe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,bSe=kd("div")`
  position: absolute;
`,vSe=kd("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,wSe=Vl`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,jSe=kd("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${wSe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,NSe=({toast:e})=>{let{icon:t,type:n,iconTheme:s}=e;return t!==void 0?typeof t=="string"?f.createElement(jSe,null,t):t:n==="blank"?null:f.createElement(vSe,null,f.createElement(gSe,{...s}),n!=="loading"&&f.createElement(bSe,null,n==="error"?f.createElement(fSe,{...s}):f.createElement(ySe,{...s})))},CSe=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,SSe=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,_Se="0%{opacity:0;} 100%{opacity:1;}",ASe="0%{opacity:1;} 100%{opacity:0;}",TSe=kd("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,kSe=kd("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,ESe=(e,t)=>{let n=e.includes("top")?1:-1,[s,r]=fY()?[_Se,ASe]:[CSe(n),SSe(n)];return{animation:t?`${Vl(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Vl(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},LSe=f.memo(({toast:e,position:t,style:n,children:s})=>{let r=e.height?ESe(e.position||t||"top-center",e.visible):{opacity:0},i=f.createElement(NSe,{toast:e}),o=f.createElement(kSe,{...e.ariaProps},lw(e.message,e));return f.createElement(TSe,{className:e.className,style:{...r,...n,...e.style}},typeof s=="function"?s({icon:i,message:o}):f.createElement(f.Fragment,null,i,o))});eSe(f.createElement);var PSe=({id:e,className:t,style:n,onHeightUpdate:s,children:r})=>{let i=f.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return f.createElement("div",{ref:i,className:t,style:n},r)},DSe=(e,t)=>{let n=e.includes("top"),s=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:fY()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...s,...r}},OSe=PN`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sb=16,Qx=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:s,children:r,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:u}=cSe(n,i);return f.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:sb,left:sb,right:sb,bottom:sb,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let h=d.position||t,p=u.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),x=DSe(h,p);return f.createElement(PSe,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?OSe:"",style:x},d.type==="custom"?lw(d.message,d):r?r(d):f.createElement(LSe,{toast:d,position:h}))}))},Kx=ns;function MSe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,u]=f.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{d()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const T=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[T,E,k.action,k.entity_type,A,k.description],O=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),I=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return O&&I}).sort((k,T)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,n,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[n,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const v=()=>l(w=>Math.max(w-1,1)),j=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!h.length){Kx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),_=[w.join(","),...S.map(E=>E.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(k),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},N=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(Wt,{message:"Loading audit logs..."}),a.jsx(Qx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(Wo,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${N(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:v,onNext:j,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}var ISe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yP(e){if(typeof e!="string")return!1;var t=ISe;return t.includes(e)}var $Se=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],RSe=new Set($Se);function yY(e){return typeof e!="string"?!1:RSe.has(e)}function bY(e){return typeof e=="string"&&e.startsWith("data-")}function Br(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(yY(n)||bY(n))&&(t[n]=e[n]);return t}function Ru(e){if(e==null)return null;if(f.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Br(t)}return typeof e=="object"&&!Array.isArray(e)?Br(e):null}function Ys(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(yY(n)||bY(n)||yP(n))&&(t[n]=e[n]);return t}function zSe(e){return e==null?null:f.isValidElement(e)?Ys(e.props):typeof e=="object"&&!Array.isArray(e)?Ys(e):null}var FSe=["children","width","height","viewBox","className","style","title","desc"];function Jk(){return Jk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jk.apply(null,arguments)}function USe(e,t){if(e==null)return{};var n,s,r=BSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BSe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var bP=f.forwardRef((e,t)=>{var{children:n,width:s,height:r,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=USe(e,FSe),h=i||{width:s,height:r,x:0,y:0},p=It("recharts-surface",o);return f.createElement("svg",Jk({},Ys(d),{className:p,width:s,height:r,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),f.createElement("title",null,c),f.createElement("desc",null,u),n)}),HSe=["children","className"];function eE(){return eE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eE.apply(null,arguments)}function qSe(e,t){if(e==null)return{};var n,s,r=GSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GSe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var ys=f.forwardRef((e,t)=>{var{children:n,className:s}=e,r=qSe(e,HSe),i=It("recharts-layer",s);return f.createElement("g",eE({className:i},Ys(r),{ref:t}),n)}),vY=f.createContext(null),WSe=()=>f.useContext(vY),B2={},H2={},MR;function VSe(){return MR||(MR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(H2)),H2}var q2={},IR;function wY(){return IR||(IR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(q2)),q2}var G2={},$R;function vP(){return $R||($R=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(G2)),G2}var W2={},V2={},RR;function YSe(){return RR||(RR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const s=String(n);return s==="0"&&Object.is(Number(n),-0)?"-0":s}e.toString=t})(V2)),V2}var zR;function wP(){return zR||(zR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YSe(),n=vP();function s(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=t.toString(r);const i=[],o=r.length;if(o===0)return i;let l=0,c="",u="",d=!1;for(r.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=r[l];u?h==="\\"&&l+1<o?(l++,c+=r[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,i.push(c),c=""):c+=h:h==="["?(d=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=s})(W2)),W2}var FR;function jP(){return FR||(FR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VSe(),n=wY(),s=vP(),r=wP();function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?n.isDeepKey(c)?i(l,r.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=s.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||t.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}e.get=i})(B2)),B2}var Y2,UR;function QSe(){return UR||(UR=1,Y2=jP().get),Y2}var KSe=QSe();const zu=eo(KSe);var XSe=4;function Jc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:XSe,n=10**t,s=Math.round(e*n)/n;return Object.is(s,-0)?0:s}function Cn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e.reduce((r,i,o)=>{var l=n[o-1];return typeof l=="string"?r+l+i:l!==void 0?r+Jc(l)+i:r+i},"")}var xs=e=>e===0?0:e>0?1:-1,Zi=e=>typeof e=="number"&&e!=+e,Yl=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,zt=e=>(typeof e=="number"||e instanceof Number)&&!Zi(e),Bo=e=>zt(e)||typeof e=="string",ZSe=0,Mp=e=>{var t=++ZSe;return"".concat(e||"").concat(t)},Rs=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!zt(t)&&typeof t!="string")return s;var i;if(Yl(t)){if(n==null)return s;var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Zi(i)&&(i=s),r&&n!=null&&i>n&&(i=n),i},jY=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},s=0;s<t;s++)if(!n[String(e[s])])n[String(e[s])]=!0;else return!0;return!1};function dn(e,t,n){return zt(e)&&zt(t)?Jc(e+n*(t-e)):t}function NY(e,t,n){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):zu(s,t))===n)}var fn=e=>e===null||typeof e>"u",Xx=e=>fn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function JSe(e){return e!=null}function Zx(){}var e2e=["type","size","sizeType"];function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tE.apply(null,arguments)}function BR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function HR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(n),!0).forEach(function(s){t2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function t2e(e,t,n){return(t=a2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a2e(e){var t=n2e(e,"string");return typeof t=="symbol"?t:t+""}function n2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s2e(e,t){if(e==null)return{};var n,s,r=r2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function r2e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var CY={symbolCircle:cN,symbolCross:QG,symbolDiamond:XG,symbolSquare:ZG,symbolStar:eW,symbolTriangle:tW,symbolWye:aW},i2e=Math.PI/180,o2e=e=>{var t="symbol".concat(Xx(e));return CY[t]||cN},l2e=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*i2e;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},c2e=(e,t)=>{CY["symbol".concat(Xx(e))]=t},NP=e=>{var{type:t="circle",size:n=64,sizeType:s="area"}=e,r=s2e(e,e2e),i=HR(HR({},r),{},{type:t,size:n,sizeType:s}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var p=o2e(o),x=M4().type(p).size(l2e(n,s,o)),v=x();if(v!==null)return v},{className:c,cx:u,cy:d}=i,h=Ys(i);return zt(u)&&zt(d)&&zt(n)?f.createElement("path",tE({},h,{className:It("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};NP.registerSymbol=c2e;var SY=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,CP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(f.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(r=>{yP(r)&&(s[r]=(i=>n[r](n,i)))}),s},d2e=(e,t,n)=>s=>(e(t,n,s),null),Jx=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(r=>{var i=e[r];yP(r)&&typeof i=="function"&&(s||(s={}),s[r]=d2e(i,t,n))}),s};function qR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function u2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(n),!0).forEach(function(s){m2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function m2e(e,t,n){return(t=f2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f2e(e){var t=h2e(e,"string");return typeof t=="symbol"?t:t+""}function h2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qn(e,t){var n=u2e({},e),s=t,r=Object.keys(t),i=r.reduce((o,l)=>(o[l]===void 0&&s[l]!==void 0&&(o[l]=s[l]),o),n);return i}function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cw.apply(null,arguments)}function GR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function g2e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(n),!0).forEach(function(s){p2e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GR(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function p2e(e,t,n){return(t=x2e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x2e(e){var t=y2e(e,"string");return typeof t=="symbol"?t:t+""}function y2e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ci=32,b2e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function v2e(e){var{data:t,iconType:n,inactiveColor:s}=e,r=ci/2,i=ci/6,o=ci/3,l=t.inactive?s:t.color,c=n??t.type;if(c==="none")return null;if(c==="plainline"){var u;return f.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:r,x2:ci,y2:r,className:"recharts-legend-icon"})}if(c==="line")return f.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(r,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(r,`
            H`).concat(ci,"M").concat(2*o,",").concat(r,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(r),className:"recharts-legend-icon"});if(c==="rect")return f.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ci/8,"h").concat(ci,"v").concat(ci*3/4,"h").concat(-ci,"z"),className:"recharts-legend-icon"});if(f.isValidElement(t.legendIcon)){var d=g2e({},t);return delete d.legendIcon,f.cloneElement(t.legendIcon,d)}return f.createElement(NP,{fill:l,cx:r,cy:r,size:ci,sizeType:"diameter",type:c})}function w2e(e){var{payload:t,iconSize:n,layout:s,formatter:r,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:ci,height:ci},c={display:s==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,h)=>{var p=d.formatter||r,x=It({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:d.inactive});if(d.type==="none")return null;var v=d.inactive?i:d.color,j=p?p(d.value,d,h):d.value;return f.createElement("li",cw({className:x,style:c,key:"legend-item-".concat(h)},Jx(e,d,h)),f.createElement(bP,{width:n,height:n,viewBox:l,style:u,"aria-label":"".concat(j," legend icon")},f.createElement(v2e,{data:d,iconType:o,inactiveColor:i})),f.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},j))})}var j2e=e=>{var t=Qn(e,b2e),{payload:n,layout:s,align:r}=t;if(!n||!n.length)return null;var i={padding:0,margin:0,textAlign:s==="horizontal"?r:"left"};return f.createElement("ul",{className:"recharts-default-legend",style:i},f.createElement(w2e,cw({},t,{payload:n})))},Q2={},K2={},WR;function N2e(){return WR||(WR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){const r=new Map;for(let i=0;i<n.length;i++){const o=n[i],l=s(o);r.has(l)||r.set(l,o)}return Array.from(r.values())}e.uniqBy=t})(K2)),K2}var X2={},VR;function _Y(){return VR||(VR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(X2)),X2}var Z2={},J2={},e_={},YR;function C2e(){return YR||(YR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(e_)),e_}var QR;function SP(){return QR||(QR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C2e();function n(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=n})(J2)),J2}var t_={},KR;function S2e(){return KR||(KR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(t_)),t_}var XR;function _2e(){return XR||(XR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SP(),n=S2e();function s(r){return n.isObjectLike(r)&&t.isArrayLike(r)}e.isArrayLikeObject=s})(Z2)),Z2}var a_={},n_={},ZR;function A2e(){return ZR||(ZR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jP();function n(s){return function(r){return t.get(r,s)}}e.property=n})(n_)),n_}var s_={},r_={},i_={},o_={},JR;function AY(){return JR||(JR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(o_)),o_}var l_={},ez;function TY(){return ez||(ez=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(l_)),l_}var c_={},tz;function kY(){return tz||(tz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s){return n===s||Number.isNaN(n)&&Number.isNaN(s)}e.eq=t})(c_)),c_}var az;function T2e(){return az||(az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AY(),n=TY(),s=kY();function r(d,h,p){return typeof p!="function"?r(d,h,()=>{}):i(d,h,function x(v,j,b,N,w,S){const _=p(v,j,b,N,w,S);return _!==void 0?!!_:i(v,j,x,S)},new Map)}function i(d,h,p,x){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,p,x);case"function":return Object.keys(h).length>0?i(d,{...h},p,x):s.eq(d,h);default:return t.isObject(d)?typeof h=="string"?h==="":!0:s.eq(d,h)}}function o(d,h,p,x){if(h==null)return!0;if(Array.isArray(h))return c(d,h,p,x);if(h instanceof Map)return l(d,h,p,x);if(h instanceof Set)return u(d,h,p,x);const v=Object.keys(h);if(d==null||n.isPrimitive(d))return v.length===0;if(v.length===0)return!0;if(x?.has(h))return x.get(h)===d;x?.set(h,d);try{for(let j=0;j<v.length;j++){const b=v[j];if(!n.isPrimitive(d)&&!(b in d)||h[b]===void 0&&d[b]!==void 0||h[b]===null&&d[b]!==null||!p(d[b],h[b],b,d,h,x))return!1}return!0}finally{x?.delete(h)}}function l(d,h,p,x){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[v,j]of h.entries()){const b=d.get(v);if(p(b,j,v,d,h,x)===!1)return!1}return!0}function c(d,h,p,x){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const v=new Set;for(let j=0;j<h.length;j++){const b=h[j];let N=!1;for(let w=0;w<d.length;w++){if(v.has(w))continue;const S=d[w];let _=!1;if(p(S,b,j,d,h,x)&&(_=!0),_){v.add(w),N=!0;break}}if(!N)return!1}return!0}function u(d,h,p,x){return h.size===0?!0:d instanceof Set?c([...d],[...h],p,x):!1}e.isMatchWith=r,e.isSetMatch=u})(i_)),i_}var nz;function EY(){return nz||(nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T2e();function n(s,r){return t.isMatchWith(s,r,()=>{})}e.isMatch=n})(r_)),r_}var d_={},u_={},m_={},sz;function k2e(){return sz||(sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(s=>Object.prototype.propertyIsEnumerable.call(n,s))}e.getSymbols=t})(m_)),m_}var f_={},rz;function LY(){return rz||(rz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(f_)),f_}var h_={},iz;function PY(){return iz||(iz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",s="[object Number]",r="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",p="[object ArrayBuffer]",x="[object Object]",v="[object Error]",j="[object DataView]",b="[object Uint8Array]",N="[object Uint8ClampedArray]",w="[object Uint16Array]",S="[object Uint32Array]",_="[object BigUint64Array]",k="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",E="[object BigInt64Array]",M="[object Float32Array]",O="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=p,e.arrayTag=d,e.bigInt64ArrayTag=E,e.bigUint64ArrayTag=_,e.booleanTag=r,e.dataViewTag=j,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=M,e.float64ArrayTag=O,e.functionTag=h,e.int16ArrayTag=T,e.int32ArrayTag=A,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=s,e.objectTag=x,e.regexpTag=t,e.setTag=u,e.stringTag=n,e.symbolTag=o,e.uint16ArrayTag=w,e.uint32ArrayTag=S,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=N})(h_)),h_}var g_={},oz;function E2e(){return oz||(oz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(g_)),g_}var lz;function DY(){return lz||(lz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k2e(),n=LY(),s=PY(),r=TY(),i=E2e();function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,p,x=new Map,v=void 0){const j=v?.(d,h,p,x);if(j!==void 0)return j;if(r.isPrimitive(d))return d;if(x.has(d))return x.get(d);if(Array.isArray(d)){const b=new Array(d.length);x.set(d,b);for(let N=0;N<d.length;N++)b[N]=l(d[N],N,p,x,v);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;x.set(d,b);for(const[N,w]of d)b.set(N,l(w,N,p,x,v));return b}if(d instanceof Set){const b=new Set;x.set(d,b);for(const N of d)b.add(l(N,void 0,p,x,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);x.set(d,b);for(let N=0;N<d.length;N++)b[N]=l(d[N],N,p,x,v);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return x.set(d,b),c(b,d,p,x,v),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return x.set(d,b),c(b,d,p,x,v),b}if(typeof Blob<"u"&&d instanceof Blob){const b=new Blob([d],{type:d.type});return x.set(d,b),c(b,d,p,x,v),b}if(d instanceof Error){const b=new d.constructor;return x.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,p,x,v),b}if(d instanceof Boolean){const b=new Boolean(d.valueOf());return x.set(d,b),c(b,d,p,x,v),b}if(d instanceof Number){const b=new Number(d.valueOf());return x.set(d,b),c(b,d,p,x,v),b}if(d instanceof String){const b=new String(d.valueOf());return x.set(d,b),c(b,d,p,x,v),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return x.set(d,b),c(b,d,p,x,v),b}return d}function c(d,h,p=d,x,v){const j=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<j.length;b++){const N=j[b],w=Object.getOwnPropertyDescriptor(d,N);(w==null||w.writable)&&(d[N]=l(h[N],N,p,x,v))}}function u(d){switch(n.getTag(d)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(u_)),u_}var cz;function L2e(){return cz||(cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DY();function n(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=n})(d_)),d_}var dz;function P2e(){return dz||(dz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY(),n=L2e();function s(r){return r=n.cloneDeep(r),i=>t.isMatch(i,r)}e.matches=s})(s_)),s_}var p_={},x_={},y_={},uz;function D2e(){return uz||(uz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DY(),n=PY();function s(r,i){return t.cloneDeepWith(r,(o,l,c,u)=>{const d=i?.(o,l,c,u);if(d!==void 0)return d;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const h=new r.constructor(r?.valueOf());return t.copyProperties(h,r),h}case n.argumentsTag:{const h={};return t.copyProperties(h,r),h.length=r.length,h[Symbol.iterator]=r[Symbol.iterator],h}default:return}})}e.cloneDeepWith=s})(y_)),y_}var mz;function O2e(){return mz||(mz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2e();function n(s){return t.cloneDeepWith(s)}e.cloneDeep=n})(x_)),x_}var b_={},v_={},fz;function OY(){return fz||(fz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(s,r=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<r;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=n})(v_)),v_}var w_={},hz;function M2e(){return hz||(hz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LY();function n(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=n})(w_)),w_}var gz;function I2e(){return gz||(gz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wY(),n=OY(),s=M2e(),r=wP();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=r.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||s.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}e.has=i})(b_)),b_}var pz;function $2e(){return pz||(pz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EY(),n=vP(),s=O2e(),r=jP(),i=I2e();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=s.cloneDeep(c),function(u){const d=r.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(p_)),p_}var xz;function R2e(){return xz||(xz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Y(),n=A2e(),s=P2e(),r=$2e();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?r.matchesProperty(o[0],o[1]):s.matches(o);case"string":case"symbol":case"number":return n.property(o)}}e.iteratee=i})(a_)),a_}var yz;function z2e(){return yz||(yz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N2e(),n=_Y(),s=_2e(),r=R2e();function i(o,l=n.identity){return s.isArrayLikeObject(o)?t.uniqBy(Array.from(o),r.iteratee(l)):[]}e.uniqBy=i})(Q2)),Q2}var j_,bz;function F2e(){return bz||(bz=1,j_=z2e().uniqBy),j_}var U2e=F2e();const vz=eo(U2e);function MY(e,t,n){return t===!0?vz(e,n):typeof t=="function"?vz(e,t):e}var _P=f.createContext(null),B2e=e=>e,Ja=()=>{var e=f.useContext(_P);return e?e.store.dispatch:B2e},gv=()=>{},H2e=()=>gv,q2e=(e,t)=>e===t;function Bt(e){var t=f.useContext(_P);return rq.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:H2e,t?t.store.getState:gv,t?t.store.getState:gv,t?e:gv,q2e)}var N_={},C_={},S_={},wz;function G2e(){return wz||(wz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const n=(s,r,i)=>{if(s!==r){const o=t(s),l=t(r);if(o===l&&o===0){if(s<r)return i==="desc"?1:-1;if(s>r)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=n})(S_)),S_}var __={},A_={},jz;function IY(){return jz||(jz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(A_)),A_}var Nz;function W2e(){return Nz||(Nz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IY(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function r(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!n.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=r})(__)),__}var Cz;function V2e(){return Cz||(Cz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G2e(),n=W2e(),s=wP();function r(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(x=>String(x));const u=(x,v)=>{let j=x;for(let b=0;b<v.length&&j!=null;++b)j=j[v[b]];return j},d=(x,v)=>v==null||x==null?v:typeof x=="object"&&"key"in x?Object.hasOwn(v,x.key)?v[x.key]:u(v,x.path):typeof x=="function"?x(v):Array.isArray(x)?u(v,x):typeof v=="object"?v[x]:v,h=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||n.isKey(x)?x:{key:x,path:s.toPath(x)}));return i.map(x=>({original:x,criteria:h.map(v=>d(v,x))})).slice().sort((x,v)=>{for(let j=0;j<h.length;j++){const b=t.compareValues(x.criteria[j],v.criteria[j],l[j]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=r})(C_)),C_}var T_={},Sz;function Y2e(){return Sz||(Sz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s=1){const r=[],i=Math.floor(s),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):r.push(d)}};return o(n,0),r}e.flatten=t})(T_)),T_}var k_={},_z;function $Y(){return _z||(_z=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OY(),n=SP(),s=AY(),r=kY();function i(o,l,c){return s.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?r.eq(c[l],o):!1}e.isIterateeCall=i})(k_)),k_}var Az;function Q2e(){return Az||(Az=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V2e(),n=Y2e(),s=$Y();function r(i,...o){const l=o.length;return l>1&&s.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&s.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,n.flatten(o),["asc"])}e.sortBy=r})(N_)),N_}var E_,Tz;function K2e(){return Tz||(Tz=1,E_=Q2e().sortBy),E_}var X2e=K2e();const ON=eo(X2e);var RY=e=>e.legend.settings,Z2e=e=>e.legend.size,J2e=e=>e.legend.payload,e_e=ut([J2e,RY],(e,t)=>{var{itemSorter:n}=t,s=e.flat(1);return n?ON(s,n):s});function t_e(){return Bt(e_e)}var rb=1;function zY(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=f.useState({height:0,left:0,top:0,width:0}),s=f.useCallback(r=>{if(r!=null){var i=r.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>rb||Math.abs(o.left-t.left)>rb||Math.abs(o.top-t.top)>rb||Math.abs(o.width-t.width)>rb)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function _s(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var a_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",kz=a_e,L_=()=>Math.random().toString(36).substring(7).split("").join("."),n_e={INIT:`@@redux/INIT${L_()}`,REPLACE:`@@redux/REPLACE${L_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${L_()}`},dw=n_e;function AP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function FY(e,t,n){if(typeof e!="function")throw new Error(_s(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(_s(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(_s(1));return n(FY)(e,t)}let s=e,r=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((b,N)=>{o.set(N,b)}))}function d(){if(c)throw new Error(_s(3));return r}function h(b){if(typeof b!="function")throw new Error(_s(4));if(c)throw new Error(_s(5));let N=!0;u();const w=l++;return o.set(w,b),function(){if(N){if(c)throw new Error(_s(6));N=!1,u(),o.delete(w),i=null}}}function p(b){if(!AP(b))throw new Error(_s(7));if(typeof b.type>"u")throw new Error(_s(8));if(typeof b.type!="string")throw new Error(_s(17));if(c)throw new Error(_s(9));try{c=!0,r=s(r,b)}finally{c=!1}return(i=o).forEach(w=>{w()}),b}function x(b){if(typeof b!="function")throw new Error(_s(10));s=b,p({type:dw.REPLACE})}function v(){const b=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(_s(11));function w(){const _=N;_.next&&_.next(d())}return w(),{unsubscribe:b(w)}},[kz](){return this}}}return p({type:dw.INIT}),{dispatch:p,subscribe:h,getState:d,replaceReducer:x,[kz]:v}}function s_e(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:dw.INIT})>"u")throw new Error(_s(12));if(typeof n(void 0,{type:dw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_s(13))})}function UY(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(n[o]=e[o])}const s=Object.keys(n);let r;try{s_e(n)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const u={};for(let d=0;d<s.length;d++){const h=s[d],p=n[h],x=o[h],v=p(x,l);if(typeof v>"u")throw l&&l.type,new Error(_s(14));u[h]=v,c=c||v!==x}return c=c||s.length!==Object.keys(o).length,c?u:o}}function uw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function r_e(...e){return t=>(n,s)=>{const r=t(n,s);let i=()=>{throw new Error(_s(15))};const o={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=uw(...l)(r.dispatch),{...r,dispatch:i}}}function BY(e){return AP(e)&&"type"in e&&typeof e.type=="string"}var HY=Symbol.for("immer-nothing"),Ez=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function Hi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $r=Object,Uf=$r.getPrototypeOf,mw="constructor",MN="prototype",aE="configurable",fw="enumerable",pv="writable",Ip="value",Ql=e=>!!e&&!!e[Qs];function Ji(e){return e?qY(e)||IN(e)||!!e[Ez]||!!e[mw]?.[Ez]||$N(e)||RN(e):!1}var i_e=$r[MN][mw].toString(),Lz=new WeakMap;function qY(e){if(!e||!TP(e))return!1;const t=Uf(e);if(t===null||t===$r[MN])return!0;const n=$r.hasOwnProperty.call(t,mw)&&t[mw];if(n===Object)return!0;if(!df(n))return!1;let s=Lz.get(n);return s===void 0&&(s=Function.toString.call(n),Lz.set(n,s)),s===i_e}function e0(e,t,n=!0){t0(e)===0?(n?Reflect.ownKeys(e):$r.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function t0(e){const t=e[Qs];return t?t.type_:IN(e)?1:$N(e)?2:RN(e)?3:0}var Pz=(e,t,n=t0(e))=>n===2?e.has(t):$r[MN].hasOwnProperty.call(e,t),nE=(e,t,n=t0(e))=>n===2?e.get(t):e[t],hw=(e,t,n,s=t0(e))=>{s===2?e.set(t,n):s===3?e.add(n):e[t]=n};function o_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var IN=Array.isArray,$N=e=>e instanceof Map,RN=e=>e instanceof Set,TP=e=>typeof e=="object",df=e=>typeof e=="function",P_=e=>typeof e=="boolean";function l_e(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var _l=e=>e.copy_||e.base_,kP=e=>e.modified_?e.copy_:e.base_;function sE(e,t){if($N(e))return new Map(e);if(RN(e))return new Set(e);if(IN(e))return Array[MN].slice.call(e);const n=qY(e);if(t===!0||t==="class_only"&&!n){const s=$r.getOwnPropertyDescriptors(e);delete s[Qs];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l[pv]===!1&&(l[pv]=!0,l[aE]=!0),(l.get||l.set)&&(s[o]={[aE]:!0,[pv]:!0,[fw]:l[fw],[Ip]:e[o]})}return $r.create(Uf(e),s)}else{const s=Uf(e);if(s!==null&&n)return{...e};const r=$r.create(s);return $r.assign(r,e)}}function EP(e,t=!1){return zN(e)||Ql(e)||!Ji(e)||(t0(e)>1&&$r.defineProperties(e,{set:ib,add:ib,clear:ib,delete:ib}),$r.freeze(e),t&&e0(e,(n,s)=>{EP(s,!0)},!1)),e}function c_e(){Hi(2)}var ib={[Ip]:c_e};function zN(e){return e===null||!TP(e)?!0:$r.isFrozen(e)}var gw="MapSet",rE="Patches",Dz="ArrayMethods",GY={};function Fu(e){const t=GY[e];return t||Hi(0,e),t}var Oz=e=>!!GY[e],$p,WY=()=>$p,d_e=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Oz(gw)?Fu(gw):void 0,arrayMethodsPlugin_:Oz(Dz)?Fu(Dz):void 0});function Mz(e,t){t&&(e.patchPlugin_=Fu(rE),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function iE(e){oE(e),e.drafts_.forEach(u_e),e.drafts_=null}function oE(e){e===$p&&($p=e.parent_)}var Iz=e=>$p=d_e($p,e);function u_e(e){const t=e[Qs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function $z(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Qs].modified_&&(iE(t),Hi(4)),Ji(e)&&(e=Rz(t,e));const{patchPlugin_:r}=t;r&&r.generateReplacementPatches_(n[Qs].base_,e,t)}else e=Rz(t,n);return m_e(t,e,!0),iE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HY?e:void 0}function Rz(e,t){if(zN(t))return t;const n=t[Qs];if(!n)return LP(t,e.handledSet_,e);if(!FN(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:s}=n;if(s)for(;s.length>0;)s.pop()(e);QY(n,e)}return n.copy_}function m_e(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&EP(t,n)}function VY(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var FN=(e,t)=>e.scope_===t,f_e=[];function YY(e,t,n,s){const r=_l(e),i=e.type_;if(s!==void 0&&nE(r,s,i)===t){hw(r,s,n,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;e0(r,(c,u)=>{if(Ql(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=e.draftLocations_.get(t)??f_e;for(const l of o)hw(r,l,n,i)}function h_e(e,t,n){e.callbacks_.push(function(r){const i=t;if(!i||!FN(i,r))return;r.mapSetPlugin_?.fixSetContents(i);const o=kP(i);YY(e,i.draft_??i,o,n),QY(i,r)})}function QY(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const r=s.getPath(e);r&&s.generatePatches_(e,r,t)}VY(e)}}function g_e(e,t,n){const{scope_:s}=e;if(Ql(n)){const r=n[Qs];FN(r,s)&&r.callbacks_.push(function(){xv(e);const o=kP(r);YY(e,n,o,t)})}else Ji(n)&&e.callbacks_.push(function(){const i=_l(e);nE(i,t,e.type_)===n&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&LP(nE(e.copy_,t,e.type_),s.handledSet_,s)})}function LP(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ql(e)||t.has(e)||!Ji(e)||zN(e)||(t.add(e),e0(e,(s,r)=>{if(Ql(r)){const i=r[Qs];if(FN(i,n)){const o=kP(i);hw(e,s,o,e.type_),VY(i)}}else Ji(r)&&LP(r,t,n)})),e}function p_e(e,t){const n=IN(e),s={type_:n?1:0,scope_:t?t.scope_:WY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let r=s,i=PP;n&&(r=[s],i=Rp);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,[l,s]}var PP={get(e,t){if(t===Qs)return e;let n=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const r=_l(e);if(!Pz(r,t,e.type_))return x_e(e,r,t);const i=r[t];if(e.finalized_||!Ji(i)||s&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&l_e(t))return i;if(i===D_(e.base_,t)){xv(e);const o=e.type_===1?+t:t,l=cE(e.scope_,i,e,o);return e.copy_[o]=l}return i},has(e,t){return t in _l(e)},ownKeys(e){return Reflect.ownKeys(_l(e))},set(e,t,n){const s=KY(_l(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=D_(_l(e),t),i=r?.[Qs];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(o_e(n,r)&&(n!==void 0||Pz(e.base_,t,e.type_)))return!0;xv(e),lE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),g_e(e,t,n)),!0},deleteProperty(e,t){return xv(e),D_(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),lE(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=_l(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{[pv]:!0,[aE]:e.type_!==1||t!=="length",[fw]:s[fw],[Ip]:n[t]}},defineProperty(){Hi(11)},getPrototypeOf(e){return Uf(e.base_)},setPrototypeOf(){Hi(12)}},Rp={};e0(PP,(e,t)=>{Rp[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}});Rp.deleteProperty=function(e,t){return Rp.set.call(this,e,t,void 0)};Rp.set=function(e,t,n){return PP.set.call(this,e[0],t,n,e[0])};function D_(e,t){const n=e[Qs];return(n?_l(n):e)[t]}function x_e(e,t,n){const s=KY(t,n);return s?Ip in s?s[Ip]:s.get?.call(e.draft_):void 0}function KY(e,t){if(!(t in e))return;let n=Uf(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=Uf(n)}}function lE(e){e.modified_||(e.modified_=!0,e.parent_&&lE(e.parent_))}function xv(e){e.copy_||(e.assigned_=new Map,e.copy_=sE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var y_e=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,s,r)=>{if(df(n)&&!df(s)){const o=s;s=n;const l=this;return function(u=o,...d){return l.produce(u,h=>s.call(this,h,...d))}}df(s)||Hi(6),r!==void 0&&!df(r)&&Hi(7);let i;if(Ji(n)){const o=Iz(this),l=cE(o,n,void 0);let c=!0;try{i=s(l),c=!1}finally{c?iE(o):oE(o)}return Mz(o,r),$z(i,o)}else if(!n||!TP(n)){if(i=s(n),i===void 0&&(i=n),i===HY&&(i=void 0),this.autoFreeze_&&EP(i,!0),r){const o=[],l=[];Fu(rE).generateReplacementPatches_(n,i,{patches_:o,inversePatches_:l}),r(o,l)}return i}else Hi(1,n)},this.produceWithPatches=(n,s)=>{if(df(n))return(l,...c)=>this.produceWithPatches(l,u=>n(u,...c));let r,i;return[this.produce(n,s,(l,c)=>{r=l,i=c}),r,i]},P_(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),P_(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),P_(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ji(t)||Hi(8),Ql(t)&&(t=Vi(t));const n=Iz(this),s=cE(n,t,void 0);return s[Qs].isManual_=!0,oE(n),s}finishDraft(t,n){const s=t&&t[Qs];(!s||!s.isManual_)&&Hi(9);const{scope_:r}=s;return Mz(r,n),$z(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let s;for(s=n.length-1;s>=0;s--){const i=n[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(n=n.slice(s+1));const r=Fu(rE).applyPatches_;return Ql(t)?r(t,n):this.produce(t,i=>r(i,n))}};function cE(e,t,n,s){const[r,i]=$N(t)?Fu(gw).proxyMap_(t,n):RN(t)?Fu(gw).proxySet_(t,n):p_e(t,n);return(n?.scope_??WY()).drafts_.push(r),i.callbacks_=n?.callbacks_??[],i.key_=s,n&&s!==void 0?h_e(n,i,s):i.callbacks_.push(function(c){c.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),r}function Vi(e){return Ql(e)||Hi(10,e),XY(e)}function XY(e){if(!Ji(e)||zN(e))return e;const t=e[Qs];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=sE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=sE(e,!0);return e0(n,(r,i)=>{hw(n,r,XY(i))},s),t&&(t.finalized_=!1),n}var b_e=new y_e,ZY=b_e.produce;function JY(e){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,e):r(i)}var v_e=JY(),w_e=JY,j_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?uw:uw.apply(null,arguments)};function ji(e,t){function n(...s){if(t){let r=t(...s);if(!r)throw new Error(Fr(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:s[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=s=>BY(s)&&s.type===e,n}var eQ=class Wg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Wg.prototype)}static get[Symbol.species](){return Wg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Wg(...t[0].concat(this)):new Wg(...t.concat(this))}};function zz(e){return Ji(e)?ZY(e,()=>{}):e}function ob(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function N_e(e){return typeof e=="boolean"}var C_e=()=>function(t){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=t??{};let o=new eQ;return n&&(N_e(n)?o.push(v_e):o.push(w_e(n.extraArgument))),o},tQ="RTK_autoBatch",cn=()=>e=>({payload:e,meta:{[tQ]:!0}}),Fz=e=>t=>{setTimeout(t,e)},aQ=(e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let r=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Fz(10):e.type==="callback"?e.queueNotification:Fz(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},s,{subscribe(d){const h=()=>r&&d(),p=s.subscribe(h);return l.add(d),()=>{p(),l.delete(d)}},dispatch(d){try{return r=!d?.meta?.[tQ],i=!r,i&&(o||(o=!0,c(u))),s.dispatch(d)}finally{r=!0}}})},S_e=e=>function(n){const{autoBatch:s=!0}=n??{};let r=new eQ(e);return s&&r.push(aQ(typeof s=="object"?s:void 0)),r};function __e(e){const t=C_e(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(AP(n))l=UY(n);else throw new Error(Fr(1));let c;typeof s=="function"?c=s(t):c=t();let u=uw;r&&(u=j_e({trace:!1,...typeof r=="object"&&r}));const d=r_e(...c),h=S_e(d);let p=typeof o=="function"?o(h):h();const x=u(...p);return FY(l,i,x)}function nQ(e){const t={},n=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Fr(28));if(l in t)throw new Error(Fr(29));return t[l]=o,r},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:i.settled,reducer:o.settled}),r},addMatcher(i,o){return n.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return e(r),[t,n,s]}function A_e(e){return typeof e=="function"}function T_e(e,t){let[n,s,r]=nQ(t),i;if(A_e(e))i=()=>zz(e());else{const l=zz(e);i=()=>l}function o(l=i(),c){let u=[n[c.type],...s.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[r]),u.reduce((d,h)=>{if(h)if(Ql(d)){const x=h(d,c);return x===void 0?d:x}else{if(Ji(d))return ZY(d,p=>h(p,c));{const p=h(d,c);if(p===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return p}}return d},l)}return o.getInitialState=i,o}var k_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",E_e=(e=21)=>{let t="",n=e;for(;n--;)t+=k_e[Math.random()*64|0];return t},L_e=Symbol.for("rtk-slice-createasyncthunk");function P_e(e,t){return`${e}/${t}`}function D_e({creators:e}={}){const t=e?.asyncThunk?.[L_e];return function(s){const{name:r,reducerPath:i=r}=s;if(!r)throw new Error(Fr(11));const o=(typeof s.reducers=="function"?s.reducers(M_e()):s.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(S,_){const k=typeof S=="string"?S:S.type;if(!k)throw new Error(Fr(12));if(k in c.sliceCaseReducersByType)throw new Error(Fr(13));return c.sliceCaseReducersByType[k]=_,u},addMatcher(S,_){return c.sliceMatchers.push({matcher:S,reducer:_}),u},exposeAction(S,_){return c.actionCreators[S]=_,u},exposeCaseReducer(S,_){return c.sliceCaseReducersByName[S]=_,u}};l.forEach(S=>{const _=o[S],k={reducerName:S,type:P_e(r,S),createNotation:typeof s.reducers=="function"};$_e(_)?z_e(k,_,u,t):I_e(k,_,u)});function d(){const[S={},_=[],k=void 0]=typeof s.extraReducers=="function"?nQ(s.extraReducers):[s.extraReducers],T={...S,...c.sliceCaseReducersByType};return T_e(s.initialState,A=>{for(let E in T)A.addCase(E,T[E]);for(let E of c.sliceMatchers)A.addMatcher(E.matcher,E.reducer);for(let E of _)A.addMatcher(E.matcher,E.reducer);k&&A.addDefaultCase(k)})}const h=S=>S,p=new Map,x=new WeakMap;let v;function j(S,_){return v||(v=d()),v(S,_)}function b(){return v||(v=d()),v.getInitialState()}function N(S,_=!1){function k(A){let E=A[S];return typeof E>"u"&&_&&(E=ob(x,k,b)),E}function T(A=h){const E=ob(p,_,()=>new WeakMap);return ob(E,A,()=>{const M={};for(const[O,I]of Object.entries(s.selectors??{}))M[O]=O_e(I,A,()=>ob(x,A,b),_);return M})}return{reducerPath:S,getSelectors:T,get selectors(){return T(k)},selectSlice:k}}const w={name:r,reducer:j,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...N(i),injectInto(S,{reducerPath:_,...k}={}){const T=_??i;return S.inject({reducerPath:T,reducer:j},k),{...w,...N(T,!0)}}};return w}}function O_e(e,t,n,s){function r(i,...o){let l=t(i);return typeof l>"u"&&s&&(l=n()),e(l,...o)}return r.unwrapped=e,r}var Nr=D_e();function M_e(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function I_e({type:e,reducerName:t,createNotation:n},s,r){let i,o;if("reducer"in s){if(n&&!R_e(s))throw new Error(Fr(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?ji(e,o):ji(e))}function $_e(e){return e._reducerDefinitionType==="asyncThunk"}function R_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function z_e({type:e,reducerName:t},n,s,r){if(!r)throw new Error(Fr(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=n,h=r(e,i,d);s.exposeAction(t,h),o&&s.addCase(h.fulfilled,o),l&&s.addCase(h.pending,l),c&&s.addCase(h.rejected,c),u&&s.addMatcher(h.settled,u),s.exposeCaseReducer(t,{fulfilled:o||lb,pending:l||lb,rejected:c||lb,settled:u||lb})}function lb(){}var F_e="task",sQ="listener",rQ="completed",DP="cancelled",U_e=`task-${DP}`,B_e=`task-${rQ}`,dE=`${sQ}-${DP}`,H_e=`${sQ}-${rQ}`,UN=class{constructor(e){this.code=e,this.message=`${F_e} ${DP} (reason: ${e})`}name="TaskAbortError";message},OP=(e,t)=>{if(typeof e!="function")throw new TypeError(Fr(32))},pw=()=>{},iQ=(e,t=pw)=>(e.catch(t),e),oQ=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Cu=e=>{if(e.aborted)throw new UN(e.reason)};function lQ(e,t){let n=pw;return new Promise((s,r)=>{const i=()=>r(new UN(e.reason));if(e.aborted){i();return}n=oQ(e,i),t.finally(()=>n()).then(s,r)}).finally(()=>{n=pw})}var q_e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof UN?"cancelled":"rejected",error:n}}finally{t?.()}},xw=e=>t=>iQ(lQ(e,t).then(n=>(Cu(e),n))),cQ=e=>{const t=xw(e);return n=>t(new Promise(s=>setTimeout(s,n)))},{assign:Nf}=Object,Uz={},BN="listenerMiddleware",G_e=(e,t)=>{const n=s=>oQ(e,()=>s.abort(e.reason));return(s,r)=>{OP(s);const i=new AbortController;n(i);const o=q_e(async()=>{Cu(e),Cu(i.signal);const l=await s({pause:xw(i.signal),delay:cQ(i.signal),signal:i.signal});return Cu(i.signal),l},()=>i.abort(B_e));return r?.autoJoin&&t.push(o.catch(pw)),{result:xw(e)(o),cancel(){i.abort(U_e)}}}},W_e=(e,t)=>{const n=async(s,r)=>{Cu(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:s,effect:(h,p)=>{p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});i=()=>{d(),u()}})];r!=null&&l.push(new Promise(c=>setTimeout(c,r,null)));try{const c=await lQ(t,Promise.race(l));return Cu(t),c}finally{i()}};return(s,r)=>iQ(n(s,r))},dQ=e=>{let{type:t,actionCreator:n,matcher:s,predicate:r,effect:i}=e;if(t)r=ji(t).match;else if(n)t=n.type,r=n.match;else if(s)r=s;else if(!r)throw new Error(Fr(21));return OP(i),{predicate:r,type:t,effect:i}},uQ=Nf(e=>{const{type:t,predicate:n,effect:s}=dQ(e);return{id:E_e(),effect:s,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Fr(22))}}},{withTypes:()=>uQ}),Bz=(e,t)=>{const{type:n,effect:s,predicate:r}=dQ(t);return Array.from(e.values()).find(i=>(typeof n=="string"?i.type===n:i.predicate===r)&&i.effect===s)},uE=e=>{e.pending.forEach(t=>{t.abort(dE)})},V_e=(e,t)=>()=>{for(const n of t.keys())uE(n);e.clear()},Hz=(e,t,n)=>{try{e(t,n)}catch(s){setTimeout(()=>{throw s},0)}},mQ=Nf(ji(`${BN}/add`),{withTypes:()=>mQ}),Y_e=ji(`${BN}/removeAll`),fQ=Nf(ji(`${BN}/remove`),{withTypes:()=>fQ}),Q_e=(...e)=>{console.error(`${BN}/error`,...e)},a0=(e={})=>{const t=new Map,n=new Map,s=x=>{const v=n.get(x)??0;n.set(x,v+1)},r=x=>{const v=n.get(x)??1;v===1?n.delete(x):n.set(x,v-1)},{extra:i,onError:o=Q_e}=e;OP(o);const l=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),v=>{x.unsubscribe(),v?.cancelActive&&uE(x)}),c=x=>{const v=Bz(t,x)??uQ(x);return l(v)};Nf(c,{withTypes:()=>c});const u=x=>{const v=Bz(t,x);return v&&(v.unsubscribe(),x.cancelActive&&uE(v)),!!v};Nf(u,{withTypes:()=>u});const d=async(x,v,j,b)=>{const N=new AbortController,w=W_e(c,N.signal),S=[];try{x.pending.add(N),s(x),await Promise.resolve(x.effect(v,Nf({},j,{getOriginalState:b,condition:(_,k)=>w(_,k).then(Boolean),take:w,delay:cQ(N.signal),pause:xw(N.signal),extra:i,signal:N.signal,fork:G_e(N.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((_,k,T)=>{_!==N&&(_.abort(dE),T.delete(_))})},cancel:()=>{N.abort(dE),x.pending.delete(N)},throwIfCancelled:()=>{Cu(N.signal)}})))}catch(_){_ instanceof UN||Hz(o,_,{raisedBy:"effect"})}finally{await Promise.all(S),N.abort(H_e),r(x),x.pending.delete(N)}},h=V_e(t,n);return{middleware:x=>v=>j=>{if(!BY(j))return v(j);if(mQ.match(j))return c(j.payload);if(Y_e.match(j)){h();return}if(fQ.match(j))return u(j.payload);let b=x.getState();const N=()=>{if(b===Uz)throw new Error(Fr(23));return b};let w;try{if(w=v(j),t.size>0){const S=x.getState(),_=Array.from(t.values());for(const k of _){let T=!1;try{T=k.predicate(j,S,b)}catch(A){T=!1,Hz(o,A,{raisedBy:"predicate"})}T&&d(k,j,x,N)}}}finally{b=Uz}return w},startListening:c,stopListening:u,clearListeners:h}};function Fr(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var K_e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},hQ=Nr({name:"chartLayout",initialState:K_e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,s,r,i;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(r=t.payload.bottom)!==null&&r!==void 0?r:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:X_e,setLayout:Z_e,setChartSize:J_e,setScale:eAe}=hQ.actions,tAe=hQ.reducer;function gQ(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function xn(e){return Number.isFinite(e)}function Ho(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function mf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(n),!0).forEach(function(s){aAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function aAe(e,t,n){return(t=nAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nAe(e){var t=sAe(e,"string");return typeof t=="symbol"?t:t+""}function sAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qa(e,t,n){return fn(e)||fn(t)?n:Bo(t)?zu(e,t,n):typeof t=="function"?t(e):n}var rAe=(e,t,n)=>{if(t&&n){var{width:s,height:r}=n,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&zt(e[i]))return mf(mf({},e),{},{[i]:e[i]+(s||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&zt(e[o]))return mf(mf({},e),{},{[o]:e[o]+(r||0)})}return e},Ed=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",pQ=(e,t,n,s)=>{if(s)return e.map(l=>l.coordinate);var r,i,o=e.map(l=>(l.coordinate===t&&(r=!0),l.coordinate===n&&(i=!0),l.coordinate));return r||o.push(t),i||o.push(n),o},xQ=(e,t,n)=>{if(!e)return null;var{duplicateDomain:s,type:r,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:p,axisType:x}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,j=r==="category"&&o.bandwidth?o.bandwidth()/v:0;if(j=x==="angleAxis"&&i&&i.length>=2?xs(i[0]-i[1])*2*j:j,h||p){var b=(h||p||[]).map((N,w)=>{var S=s?s.indexOf(N):N;return{coordinate:o(S)+j,value:N,offset:j,index:w}});return b.filter(N=>!Zi(N.coordinate))}return c&&u?u.map((N,w)=>({coordinate:o(N)+j,value:N,index:w,offset:j})):o.ticks&&d!=null?o.ticks(d).map((N,w)=>({coordinate:o(N)+j,value:N,offset:j,index:w})):o.domain().map((N,w)=>({coordinate:o(N)+j,value:s?s[N]:N,index:w,offset:j}))},Gz=1e-4,iAe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,s=e.range(),r=Math.min(s[0],s[1])-Gz,i=Math.max(s[0],s[1])+Gz,o=e(t[0]),l=e(t[n-1]);(o<r||o>i||l<r||l>i)&&e.domain([t[0],t[n-1]])}},oAe=(e,t)=>{if(!t||t.length!==2||!zt(t[0])||!zt(t[1]))return e;var n=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),r=[e[0],e[1]];return(!zt(e[0])||e[0]<n)&&(r[0]=n),(!zt(e[1])||e[1]>s)&&(r[1]=s),r[0]>s&&(r[0]=s),r[1]<n&&(r[1]=n),r},lAe=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0,l=0;l<n;++l){var c=e[l],u=c?.[r];if(u!=null){var d=u[1],h=u[0],p=Zi(d)?h:d;p>=0?(u[0]=i,u[1]=i+p,i=d):(u[0]=o,u[1]=o+p,o=d)}}}},cAe=e=>{var t,n=e.length;if(!(n<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var r=0;r<s;++r)for(var i=0,o=0;o<n;++o){var l=e[o],c=l?.[r];if(c!=null){var u=Zi(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},dAe={sign:lAe,expand:xW,none:md,silhouette:yW,wiggle:bW,positive:cAe},uAe=(e,t,n)=>{var s,r=(s=dAe[n])!==null&&s!==void 0?s:md,i=$4().keys(t).value((l,c)=>Number(qa(l,c,0))).order(Mu).offset(r),o=i(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var h=qa(e[d],t[c],0);Array.isArray(h)&&h.length===2&&zt(h[0])&&zt(h[1])&&(u[0]=h[0],u[1]=h[1])})}),o};function mAe(e){return e==null?void 0:String(e)}function Wz(e){var{axis:t,ticks:n,bandSize:s,entry:r,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!fn(r[t.dataKey])){var l=NY(n,"value",r[t.dataKey]);if(l)return l.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=qa(r,fn(o)?t.dataKey:o);return fn(c)?null:t.scale(c)}var Vz=e=>{var{axis:t,ticks:n,offset:s,bandSize:r,entry:i,index:o}=e;if(t.type==="category")return n[o]?n[o].coordinate+s:null;var l=qa(i,t.dataKey,t.scale.domain()[o]);return fn(l)?null:t.scale(l)-r/2+s},fAe=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var s=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return s<=0&&r>=0?0:r<0?r:s}return n[0]},hAe=e=>{var t=e.flat(2).filter(zt);return[Math.min(...t),Math.max(...t)]},gAe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],pAe=(e,t,n)=>{if(e!=null)return gAe(Object.keys(e).reduce((s,r)=>{var i=e[r];if(!i)return s;var{stackedData:o}=i,l=o.reduce((c,u)=>{var d=gQ(u,t,n),h=hAe(d);return!xn(h[0])||!xn(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],s[0]),Math.max(l[1],s[1])]},[1/0,-1/0]))},Yz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bf=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!n||s>0)return s}if(e&&t&&t.length>=2){for(var r=ON(t,d=>d.coordinate),i=1/0,o=1,l=r.length;o<l;o++){var c=r[o],u=r[o-1];i=Math.min((c?.coordinate||0)-(u?.coordinate||0),i)}return i===1/0?0:i}return n?void 0:0};function Kz(e){var{tooltipEntrySettings:t,dataKey:n,payload:s,value:r,name:i}=e;return mf(mf({},t),{},{dataKey:n,payload:s,value:r,name:i})}function uh(e,t){if(e)return String(e);if(typeof t=="string")return t}var xAe=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},yAe=(e,t)=>t==="centric"?e.angle:e.radius,rc=e=>e.layout.width,ic=e=>e.layout.height,bAe=e=>e.layout.scale,yQ=e=>e.layout.margin,HN=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),qN=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),bQ="data-recharts-item-index",vQ="data-recharts-item-id",n0=60;function Xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function cb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(n),!0).forEach(function(s){vAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vAe(e,t,n){return(t=wAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wAe(e){var t=jAe(e,"string");return typeof t=="symbol"?t:t+""}function jAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NAe=e=>e.brush.height;function CAe(e){var t=qN(e);return t.reduce((n,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:n0;return n+r}return n},0)}function SAe(e){var t=qN(e);return t.reduce((n,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var r=typeof s.width=="number"?s.width:n0;return n+r}return n},0)}function _Ae(e){var t=HN(e);return t.reduce((n,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?n+s.height:n,0)}function AAe(e){var t=HN(e);return t.reduce((n,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?n+s.height:n,0)}var ls=ut([rc,ic,yQ,NAe,CAe,SAe,_Ae,AAe,RY,Z2e],(e,t,n,s,r,i,o,l,c,u)=>{var d={left:(n.left||0)+r,right:(n.right||0)+i},h={top:(n.top||0)+o,bottom:(n.bottom||0)+l},p=cb(cb({},h),d),x=p.bottom;p.bottom+=s,p=rAe(p,c,u);var v=e-p.left-p.right,j=t-p.top-p.bottom;return cb(cb({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(j,0)})}),TAe=ut(ls,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),MP=ut(rc,ic,(e,t)=>({x:0,y:0,width:e,height:t})),kAe=f.createContext(null),Bs=()=>f.useContext(kAe)!=null,GN=e=>e.brush,WN=ut([GN,ls,yQ],(e,t,n)=>({height:e.height,x:zt(e.x)?e.x:t.left,y:zt(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:zt(e.width)?e.width:t.width})),O_={},M_={},I_={},Zz;function EAe(){return Zz||(Zz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,s,{signal:r,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(n.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),j()};let p=null;const x=()=>{p!=null&&clearTimeout(p),p=setTimeout(()=>{p=null,h()},s)},v=()=>{p!==null&&(clearTimeout(p),p=null)},j=()=>{v(),o=void 0,l=null},b=()=>{d()},N=function(...w){if(r?.aborted)return;o=this,l=w;const S=p==null;x(),c&&S&&d()};return N.schedule=x,N.cancel=j,N.flush=b,r?.addEventListener("abort",j,{once:!0}),N}e.debounce=t})(I_)),I_}var Jz;function LAe(){return Jz||(Jz=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EAe();function n(s,r=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const p=t.debounce(function(...j){d=s.apply(this,j),h=null},r,{edges:u}),x=function(...j){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=s.apply(this,j),h=Date.now(),p.cancel(),p.schedule(),d):(p.apply(this,j),d)},v=()=>(p.flush(),d);return x.cancel=p.cancel,x.flush=v,x}e.debounce=n})(M_)),M_}var eF;function PAe(){return eF||(eF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LAe();function n(s,r=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(s,r,{leading:o,maxWait:r,trailing:l})}e.throttle=n})(O_)),O_}var $_,tF;function DAe(){return tF||(tF=1,$_=PAe().throttle),$_}var OAe=DAe();const MAe=eo(OAe);var yw=function(t,n){for(var s=arguments.length,r=new Array(s>2?s-2:0),i=2;i<s;i++)r[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>r[o++]))}},wQ=(e,t,n)=>{var{width:s="100%",height:r="100%",aspect:i,maxHeight:o}=n,l=Yl(s)?e:Number(s),c=Yl(r)?t:Number(r);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},IAe={width:0,height:0,overflow:"visible"},$Ae={width:0,overflowX:"visible"},RAe={height:0,overflowY:"visible"},zAe={},FAe=e=>{var{width:t,height:n}=e,s=Yl(t),r=Yl(n);return s&&r?IAe:s?$Ae:r?RAe:zAe};function UAe(e){var{width:t,height:n,aspect:s}=e,r=t,i=n;return r===void 0&&i===void 0?(r="100%",i="100%"):r===void 0?r=s&&s>0?void 0:"100%":i===void 0&&(i=s&&s>0?void 0:"100%"),{width:r,height:i}}function mE(){return mE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mE.apply(null,arguments)}function aF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function nF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aF(Object(n),!0).forEach(function(s){BAe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BAe(e,t,n){return(t=HAe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HAe(e){var t=qAe(e,"string");return typeof t=="symbol"?t:t+""}function qAe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jQ=f.createContext({width:-1,height:-1});function GAe(e){return Ho(e.width)&&Ho(e.height)}function NQ(e){var{children:t,width:n,height:s}=e,r=f.useMemo(()=>({width:n,height:s}),[n,s]);return GAe(r)?f.createElement(jQ.Provider,{value:r},t):null}var IP=()=>f.useContext(jQ),WAe=f.forwardRef((e,t)=>{var{aspect:n,initialDimension:s={width:-1,height:-1},width:r,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:p,onResize:x,style:v={}}=e,j=f.useRef(null),b=f.useRef();b.current=x,f.useImperativeHandle(t,()=>j.current);var[N,w]=f.useState({containerWidth:s.width,containerHeight:s.height}),S=f.useCallback((E,M)=>{w(O=>{var I=Math.round(E),D=Math.round(M);return O.containerWidth===I&&O.containerHeight===D?O:{containerWidth:I,containerHeight:D}})},[]);f.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Zx;var E=D=>{var H,{width:W,height:z}=D[0].contentRect;S(W,z),(H=b.current)===null||H===void 0||H.call(b,W,z)};d>0&&(E=MAe(E,d,{trailing:!0,leading:!1}));var M=new ResizeObserver(E),{width:O,height:I}=j.current.getBoundingClientRect();return S(O,I),M.observe(j.current),()=>{M.disconnect()}},[S,d]);var{containerWidth:_,containerHeight:k}=N;yw(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:T,calculatedHeight:A}=wQ(_,k,{width:r,height:i,aspect:n,maxHeight:c});return yw(T!=null&&T>0||A!=null&&A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,A,r,i,o,l,n),f.createElement("div",{id:h?"".concat(h):void 0,className:It("recharts-responsive-container",p),style:nF(nF({},v),{},{width:r,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:j},f.createElement("div",{style:FAe({width:r,height:i})},f.createElement(NQ,{width:T,height:A},u)))}),R_=f.forwardRef((e,t)=>{var n=IP();if(Ho(n.width)&&Ho(n.height))return e.children;var{width:s,height:r}=UAe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=wQ(void 0,void 0,{width:s,height:r,aspect:e.aspect,maxHeight:e.maxHeight});return zt(i)&&zt(o)?f.createElement(NQ,{width:i,height:o},e.children):f.createElement(WAe,mE({},e,{width:s,height:r,ref:t}))});function CQ(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var VN=()=>{var e,t=Bs(),n=Bt(TAe),s=Bt(WN),r=(e=Bt(GN))===null||e===void 0?void 0:e.padding;return!t||!s||!r?n:{width:s.width-r.left-r.right,height:s.height-r.top-r.bottom,x:r.left,y:r.top}},VAe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},SQ=()=>{var e;return(e=Bt(ls))!==null&&e!==void 0?e:VAe},$P=()=>Bt(rc),RP=()=>Bt(ic),YAe=()=>Bt(e=>e.layout.margin),wa=e=>e.layout.layoutType,mh=()=>Bt(wa),QAe=()=>{var e=mh();return e!==void 0},YN=e=>{var t=Ja(),n=Bs(),{width:s,height:r}=e,i=IP(),o=s,l=r;return i&&(o=i.width>0?i.width:s,l=i.height>0?i.height:r),f.useEffect(()=>{!n&&Ho(o)&&Ho(l)&&t(J_e({width:o,height:l}))},[t,n,o,l]),null},_Q=Symbol.for("immer-nothing"),sF=Symbol.for("immer-draftable"),Hr=Symbol.for("immer-state");function qi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var zp=Object.getPrototypeOf;function Hf(e){return!!e&&!!e[Hr]}function Uu(e){return e?AQ(e)||Array.isArray(e)||!!e[sF]||!!e.constructor?.[sF]||s0(e)||KN(e):!1}var KAe=Object.prototype.constructor.toString(),rF=new WeakMap;function AQ(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let s=rF.get(n);return s===void 0&&(s=Function.toString.call(n),rF.set(n,s)),s===KAe}function bw(e,t,n=!0){QN(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((s,r)=>t(r,s,e))}function QN(e){const t=e[Hr];return t?t.type_:Array.isArray(e)?1:s0(e)?2:KN(e)?3:0}function fE(e,t){return QN(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function TQ(e,t,n){const s=QN(e);s===2?e.set(t,n):s===3?e.add(n):e[t]=n}function XAe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function s0(e){return e instanceof Map}function KN(e){return e instanceof Set}function tu(e){return e.copy_||e.base_}function hE(e,t){if(s0(e))return new Map(e);if(KN(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=AQ(e);if(t===!0||t==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(e);delete s[Hr];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(zp(e),s)}else{const s=zp(e);if(s!==null&&n)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function zP(e,t=!1){return XN(e)||Hf(e)||!Uu(e)||(QN(e)>1&&Object.defineProperties(e,{set:db,add:db,clear:db,delete:db}),Object.freeze(e),t&&Object.values(e).forEach(n=>zP(n,!0))),e}function ZAe(){qi(2)}var db={value:ZAe};function XN(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var JAe={};function Bu(e){const t=JAe[e];return t||qi(0,e),t}var Fp;function kQ(){return Fp}function eTe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function iF(e,t){t&&(Bu("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gE(e){pE(e),e.drafts_.forEach(tTe),e.drafts_=null}function pE(e){e===Fp&&(Fp=e.parent_)}function oF(e){return Fp=eTe(Fp,e)}function tTe(e){const t=e[Hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Hr].modified_&&(gE(t),qi(4)),Uu(e)&&(e=vw(t,e),t.parent_||ww(t,e)),t.patches_&&Bu("Patches").generateReplacementPatches_(n[Hr].base_,e,t.patches_,t.inversePatches_)):e=vw(t,n,[]),gE(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_Q?e:void 0}function vw(e,t,n){if(XN(t))return t;const s=e.immer_.shouldUseStrictIteration(),r=t[Hr];if(!r)return bw(t,(i,o)=>cF(e,r,t,i,o,n),s),t;if(r.scope_!==e)return t;if(!r.modified_)return ww(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,l=!1;r.type_===3&&(o=new Set(i),i.clear(),l=!0),bw(o,(c,u)=>cF(e,r,i,c,u,n,l),s),ww(e,i,!1),n&&e.patches_&&Bu("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function cF(e,t,n,s,r,i,o){if(r==null||typeof r!="object"&&!o)return;const l=XN(r);if(!(l&&!o)){if(Hf(r)){const c=i&&t&&t.type_!==3&&!fE(t.assigned_,s)?i.concat(s):void 0,u=vw(e,r,c);if(TQ(n,s,u),Hf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(r);if(Uu(r)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===r&&l)return;vw(e,r),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(s0(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&ww(e,r)}}}function ww(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zP(t,n)}function aTe(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:kQ(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=FP;n&&(r=[s],i=Up);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var FP={get(e,t){if(t===Hr)return e;const n=tu(e);if(!fE(n,t))return nTe(e,n,t);const s=n[t];return e.finalized_||!Uu(s)?s:s===z_(e.base_,t)?(F_(e),e.copy_[t]=yE(s,e)):s},has(e,t){return t in tu(e)},ownKeys(e){return Reflect.ownKeys(tu(e))},set(e,t,n){const s=EQ(tu(e),t);if(s?.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const r=z_(tu(e),t),i=r?.[Hr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(XAe(n,r)&&(n!==void 0||fE(e.base_,t)))return!0;F_(e),xE(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return z_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,F_(e),xE(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=tu(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},defineProperty(){qi(11)},getPrototypeOf(e){return zp(e.base_)},setPrototypeOf(){qi(12)}},Up={};bw(FP,(e,t)=>{Up[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Up.deleteProperty=function(e,t){return Up.set.call(this,e,t,void 0)};Up.set=function(e,t,n){return FP.set.call(this,e[0],t,n,e[0])};function z_(e,t){const n=e[Hr];return(n?tu(n):e)[t]}function nTe(e,t,n){const s=EQ(t,n);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function EQ(e,t){if(!(t in e))return;let n=zp(e);for(;n;){const s=Object.getOwnPropertyDescriptor(n,t);if(s)return s;n=zp(n)}}function xE(e){e.modified_||(e.modified_=!0,e.parent_&&xE(e.parent_))}function F_(e){e.copy_||(e.copy_=hE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var sTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,s)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(c=i,...u){return o.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&qi(6),s!==void 0&&typeof s!="function"&&qi(7);let r;if(Uu(t)){const i=oF(this),o=yE(t,void 0);let l=!0;try{r=n(o),l=!1}finally{l?gE(i):pE(i)}return iF(i,s),lF(r,i)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===_Q&&(r=void 0),this.autoFreeze_&&zP(r,!0),s){const i=[],o=[];Bu("Patches").generateReplacementPatches_(t,r,i,o),s(i,o)}return r}else qi(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let s,r;return[this.produce(t,n,(o,l)=>{s=o,r=l}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Uu(e)||qi(8),Hf(e)&&(e=rTe(e));const t=oF(this),n=yE(e,void 0);return n[Hr].isManual_=!0,pE(t),n}finishDraft(e,t){const n=e&&e[Hr];(!n||!n.isManual_)&&qi(9);const{scope_:s}=n;return iF(s,t),lF(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const s=Bu("Patches").applyPatches_;return Hf(e)?s(e,t):this.produce(e,r=>s(r,t))}};function yE(e,t){const n=s0(e)?Bu("MapSet").proxyMap_(e,t):KN(e)?Bu("MapSet").proxySet_(e,t):aTe(e,t);return(t?t.scope_:kQ()).drafts_.push(n),n}function rTe(e){return Hf(e)||qi(10,e),LQ(e)}function LQ(e){if(!Uu(e)||XN(e))return e;const t=e[Hr];let n,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=hE(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else n=hE(e,!0);return bw(n,(r,i)=>{TQ(n,r,LQ(i))},s),t&&(t.finalized_=!1),n}var iTe=new sTe;iTe.produce;var oTe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},PQ=Nr({name:"legend",initialState:oTe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:cn()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Vi(e).payload.indexOf(n);r>-1&&(e.payload[r]=s)},prepare:cn()},removeLegendPayload:{reducer(e,t){var n=Vi(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:cn()}}}),{setLegendSize:dF,setLegendSettings:lTe,addLegendPayload:DQ,replaceLegendPayload:OQ,removeLegendPayload:MQ}=PQ.actions,cTe=PQ.reducer,dTe=["contextPayload"];function bE(){return bE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bE.apply(null,arguments)}function uF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uF(Object(n),!0).forEach(function(s){uTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uTe(e,t,n){return(t=mTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mTe(e){var t=fTe(e,"string");return typeof t=="symbol"?t:t+""}function fTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hTe(e,t){if(e==null)return{};var n,s,r=gTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function pTe(e){return e.value}function xTe(e){var{contextPayload:t}=e,n=hTe(e,dTe),s=MY(t,e.payloadUniqBy,pTe),r=qf(qf({},n),{},{payload:s});return f.isValidElement(e.content)?f.cloneElement(e.content,r):typeof e.content=="function"?f.createElement(e.content,r):f.createElement(j2e,r)}function yTe(e,t,n,s,r,i){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((s||0)-i.width)/2}:u=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((r||0)-i.height)/2}:d=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),qf(qf({},u),d)}function bTe(e){var t=Ja();return f.useEffect(()=>{t(lTe(e))},[t,e]),null}function vTe(e){var t=Ja();return f.useEffect(()=>(t(dF(e)),()=>{t(dF({width:0,height:0}))}),[t,e]),null}function wTe(e,t,n,s){return e==="vertical"&&zt(t)?{height:t}:e==="horizontal"?{width:n||s}:null}var jTe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function IQ(e){var t=Qn(e,jTe),n=t_e(),s=WSe(),r=YAe(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[u,d]=zY([n]),h=$P(),p=RP();if(h==null||p==null)return null;var x=h-(r?.left||0)-(r?.right||0),v=wTe(t.layout,o,i,x),j=c?l:qf(qf({position:"absolute",width:v?.width||i||"auto",height:v?.height||o||"auto"},yTe(l,t,r,h,p,u)),l),b=c??s;if(b==null||n==null)return null;var N=f.createElement("div",{className:"recharts-legend-wrapper",style:j,ref:d},f.createElement(bTe,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&f.createElement(vTe,{width:u.width,height:u.height}),f.createElement(xTe,bE({},t,v,{margin:r,chartWidth:h,chartHeight:p,contextPayload:n})));return Gi.createPortal(N,b)}IQ.displayName="Legend";function vE(){return vE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vE.apply(null,arguments)}function mF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mF(Object(n),!0).forEach(function(s){NTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function NTe(e,t,n){return(t=CTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CTe(e){var t=STe(e,"string");return typeof t=="symbol"?t:t+""}function STe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Te(e){return Array.isArray(e)&&Bo(e[0])&&Bo(e[1])?e.join(" ~ "):e}var ATe=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:s={},labelStyle:r={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:p=!1}=e,x=()=>{if(i&&i.length){var k={padding:0,margin:0},T=(l?ON(i,l):i).map((A,E)=>{if(A.type==="none")return null;var M=A.formatter||o||_Te,{value:O,name:I}=A,D=O,H=I;if(M){var W=M(O,I,A,E,i);if(Array.isArray(W))[D,H]=W;else if(W!=null)D=W;else return null}var z=U_({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},s);return f.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(E),style:z},Bo(H)?f.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Bo(H)?f.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,f.createElement("span",{className:"recharts-tooltip-item-value"},D),f.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return f.createElement("ul",{className:"recharts-tooltip-item-list",style:k},T)}return null},v=U_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),j=U_({margin:0},r),b=!fn(d),N=b?d:"",w=It("recharts-default-tooltip",c),S=It("recharts-tooltip-label",u);b&&h&&i!==void 0&&i!==null&&(N=h(d,i));var _=p?{role:"status","aria-live":"assertive"}:{};return f.createElement("div",vE({className:w,style:v},_),f.createElement("p",{className:S,style:j},f.isValidElement(N)?N:"".concat(N)),x())},jg="recharts-tooltip-wrapper",TTe={visibility:"hidden"};function kTe(e){var{coordinate:t,translateX:n,translateY:s}=e;return It(jg,{["".concat(jg,"-right")]:zt(n)&&t&&zt(t.x)&&n>=t.x,["".concat(jg,"-left")]:zt(n)&&t&&zt(t.x)&&n<t.x,["".concat(jg,"-bottom")]:zt(s)&&t&&zt(t.y)&&s>=t.y,["".concat(jg,"-top")]:zt(s)&&t&&zt(t.y)&&s<t.y})}function fF(e){var{allowEscapeViewBox:t,coordinate:n,key:s,offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&zt(i[s]))return i[s];var d=n[s]-l-(r>0?r:0),h=n[s]+r;if(t[s])return o[s]?d:h;var p=c[s];if(p==null)return 0;if(o[s]){var x=d,v=p;return x<v?Math.max(h,p):Math.max(d,p)}if(u==null)return 0;var j=h+l,b=p+u;return j>b?Math.max(d,p):Math.max(h,p)}function ETe(e){var{translateX:t,translateY:n,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function LTe(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:s,position:r,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,h;return o.height>0&&o.width>0&&n?(d=fF({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=fF({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:r,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=ETe({translateX:d,translateY:h,useTranslate3d:l})):u=TTe,{cssProperties:u,cssClasses:kTe({translateX:d,translateY:h,coordinate:n})}}function hF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function ub(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hF(Object(n),!0).forEach(function(s){wE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wE(e,t,n){return(t=PTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PTe(e){var t=DTe(e,"string");return typeof t=="symbol"?t:t+""}function DTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class OTe extends f.PureComponent{constructor(){super(...arguments),wE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),wE(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,s,r,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0,y:(r=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:s,animationEasing:r,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:p,viewBox:x,wrapperStyle:v,lastBoundingBox:j,innerRef:b,hasPortalFromProps:N}=this.props,{cssClasses:w,cssProperties:S}=LTe({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:j.height,width:j.width},useTranslate3d:p,viewBox:x}),_=N?{}:ub(ub({transition:c&&t?"transform ".concat(s,"ms ").concat(r):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=ub(ub({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return f.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},i)}}var $Q=()=>{var e;return(e=Bt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function jE(){return jE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jE.apply(null,arguments)}function gF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function pF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gF(Object(n),!0).forEach(function(s){MTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function MTe(e,t,n){return(t=ITe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ITe(e){var t=$Te(e,"string");return typeof t=="symbol"?t:t+""}function $Te(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xF={curveBasisClosed:$pe,curveBasisOpen:Rpe,curveBasis:Ipe,curveBumpX:VG,curveBumpY:YG,curveLinearClosed:Upe,curveLinear:Dx,curveMonotoneX:Dk,curveMonotoneY:uW,curveNatural:fW,curveStep:hW,curveStepAfter:pW,curveStepBefore:gW},jw=e=>xn(e.x)&&xn(e.y),yF=e=>e.base!=null&&jw(e.base)&&jw(e),Ng=e=>e.x,Cg=e=>e.y,RTe=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(Xx(e));return(n==="curveMonotone"||n==="curveBump")&&t?xF["".concat(n).concat(t==="vertical"?"Y":"X")]:xF[n]||Dx},zTe=e=>{var{type:t="linear",points:n=[],baseLine:s,layout:r,connectNulls:i=!1}=e,o=RTe(t,r),l=i?n.filter(jw):n,c;if(Array.isArray(s)){var u=n.map((x,v)=>pF(pF({},x),{},{base:s[v]}));r==="vertical"?c=Hg().y(Cg).x1(Ng).x0(x=>x.base.x):c=Hg().x(Ng).y1(Cg).y0(x=>x.base.y);var d=c.defined(yF).curve(o),h=i?u.filter(yF):u;return d(h)}r==="vertical"&&zt(s)?c=Hg().y(Cg).x1(Ng).x0(s):zt(s)?c=Hg().x(Ng).y1(Cg).y0(s):c=O4().x(Ng).y(Cg);var p=c.defined(jw).curve(o);return p(l)},UP=e=>{var{className:t,points:n,path:s,pathRef:r}=e,i=mh();if((!n||!n.length)&&!s)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=n&&n.length?zTe(o):s;return f.createElement("path",jE({},Br(e),CP(e),{className:It("recharts-curve",t),d:l===null?void 0:l,ref:r}))},FTe=["x","y","top","left","width","height","className"];function NE(){return NE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},NE.apply(null,arguments)}function bF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function UTe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(n),!0).forEach(function(s){BTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BTe(e,t,n){return(t=HTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HTe(e){var t=qTe(e,"string");return typeof t=="symbol"?t:t+""}function qTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GTe(e,t){if(e==null)return{};var n,s,r=WTe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WTe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var VTe=(e,t,n,s,r,i)=>"M".concat(e,",").concat(r,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(n),YTe=e=>{var{x:t=0,y:n=0,top:s=0,left:r=0,width:i=0,height:o=0,className:l}=e,c=GTe(e,FTe),u=UTe({x:t,y:n,top:s,left:r,width:i,height:o},c);return!zt(t)||!zt(n)||!zt(i)||!zt(o)||!zt(s)||!zt(r)?null:f.createElement("path",NE({},Ys(u),{className:It("recharts-cross",l),d:VTe(t,n,i,o,s,r)}))};function QTe(e,t,n,s){var r=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-r:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-r,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function vF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function wF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vF(Object(n),!0).forEach(function(s){KTe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function KTe(e,t,n){return(t=XTe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XTe(e){var t=ZTe(e,"string");return typeof t=="symbol"?t:t+""}function ZTe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JTe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),RQ=(e,t,n)=>e.map(s=>"".concat(JTe(s)," ").concat(t,"ms ").concat(n)).join(","),eke=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,s)=>n.filter(r=>s.includes(r))),Bp=(e,t)=>Object.keys(t).reduce((n,s)=>wF(wF({},n),{},{[s]:e(s,t[s])}),{});function jF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jF(Object(n),!0).forEach(function(s){tke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tke(e,t,n){return(t=ake(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ake(e){var t=nke(e,"string");return typeof t=="symbol"?t:t+""}function nke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nw=(e,t,n)=>e+(t-e)*n,CE=e=>{var{from:t,to:n}=e;return t!==n},zQ=(e,t,n)=>{var s=Bp((r,i)=>{if(CE(i)){var[o,l]=e(i.from,i.to,i.velocity);return Xn(Xn({},i),{},{from:o,velocity:l})}return i},t);return n<1?Bp((r,i)=>CE(i)&&s[r]!=null?Xn(Xn({},i),{},{velocity:Nw(i.velocity,s[r].velocity,n),from:Nw(i.from,s[r].from,n)}):i,t):zQ(e,s,n-1)};function ske(e,t,n,s,r,i){var o,l=s.reduce((p,x)=>Xn(Xn({},p),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),c=()=>Bp((p,x)=>x.from,l),u=()=>!Object.values(l).filter(CE).length,d=null,h=p=>{o||(o=p);var x=p-o,v=x/n.dt;l=zQ(n,l,v),r(Xn(Xn(Xn({},e),t),c())),o=p,u()||(d=i.setTimeout(h))};return()=>(d=i.setTimeout(h),()=>{var p;(p=d)===null||p===void 0||p()})}function rke(e,t,n,s,r,i,o){var l=null,c=r.reduce((h,p)=>{var x=e[p],v=t[p];return x==null||v==null?h:Xn(Xn({},h),{},{[p]:[x,v]})},{}),u,d=h=>{u||(u=h);var p=(h-u)/s,x=Bp((j,b)=>Nw(...b,n(p)),c);if(i(Xn(Xn(Xn({},e),t),x)),p<1)l=o.setTimeout(d);else{var v=Bp((j,b)=>Nw(...b,n(1)),c);i(Xn(Xn(Xn({},e),t),v))}};return()=>(l=o.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const ike=(e,t,n,s,r,i)=>{var o=eke(e,t);return n==null?()=>(r(Xn(Xn({},e),t)),()=>{}):n.isStepper===!0?ske(e,t,n,o,r,i):rke(e,t,n,s,o,r,i)};var Cw=1e-4,FQ=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],UQ=(e,t)=>e.map((n,s)=>n*t**s).reduce((n,s)=>n+s),NF=(e,t)=>n=>{var s=FQ(e,t);return UQ(s,n)},oke=(e,t)=>n=>{var s=FQ(e,t),r=[...s.map((i,o)=>i*o).slice(1),0];return UQ(r,n)},lke=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var s=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var r=s.map(i=>parseFloat(i));return[r[0],r[1],r[2],r[3]]},cke=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var r=lke(n[0]);if(r)return r}}return n.length===4?n:[0,0,1,1]},dke=(e,t,n,s)=>{var r=NF(e,n),i=NF(t,s),o=oke(e,n),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,p=0;p<8;++p){var x=r(h)-d,v=o(h);if(Math.abs(x-d)<Cw||v<Cw)return i(h);h=l(h-x/v)}return i(h)};return c.isStepper=!1,c},CF=function(){return dke(...cke(...arguments))},uke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:s=8,dt:r=17}=t,i=(o,l,c)=>{var u=-(o-l)*n,d=c*s,h=c+(u-d)*r/1e3,p=c*r/1e3+o;return Math.abs(p-l)<Cw&&Math.abs(h)<Cw?[l,0]:[p,h]};return i.isStepper=!0,i.dt=r,i},mke=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return CF(e);case"spring":return uke();default:if(e.split("(")[0]==="cubic-bezier")return CF(e)}return typeof e=="function"?e:null};function fke(e){var t,n=()=>null,s=!1,r=null,i=o=>{if(!s){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){r=e.setTimeout(i.bind(null,u),c);return}i(c),r=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,n(t)),typeof o=="object"&&(t=o,n(t)),typeof o=="function"&&o()}};return{stop:()=>{s=!0},start:o=>{s=!1,r&&(r(),r=null),i(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>e}}class hke{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),r=null,i=o=>{o-s>=n?t(o):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{r!=null&&cancelAnimationFrame(r)}}}function gke(){return fke(new hke)}var pke=f.createContext(gke);function xke(e,t){var n=f.useContext(pke);return f.useMemo(()=>t??n(e),[e,t,n])}var yke=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ZN={isSsr:yke()},bke={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},SF={t:0},B_={t:1};function r0(e){var t=Qn(e,bke),{isActive:n,canBegin:s,duration:r,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=n==="auto"?!ZN.isSsr:n,h=xke(t.animationId,t.animationManager),[p,x]=f.useState(d?SF:B_),v=f.useRef(null);return f.useEffect(()=>{d||x(B_)},[d]),f.useEffect(()=>{if(!d||!s)return Zx;var j=ike(SF,B_,mke(i),r,x,h.getTimeoutController()),b=()=>{v.current=j()};return h.start([c,o,b,r,l]),()=>{h.stop(),v.current&&v.current(),l()}},[d,s,r,i,o,c,l,h]),u(p.t)}function i0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=f.useRef(Mp(t)),s=f.useRef(e);return s.current!==e&&(n.current=Mp(t),s.current=e),n.current}var vke=["radius"],wke=["radius"],_F,AF,TF,kF,EF,LF,PF,DF,OF,MF;function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function $F(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IF(Object(n),!0).forEach(function(s){jke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jke(e,t,n){return(t=Nke(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nke(e){var t=Cke(e,"string");return typeof t=="symbol"?t:t+""}function Cke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sw(){return Sw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Sw.apply(null,arguments)}function RF(e,t){if(e==null)return{};var n,s,r=Ske(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ske(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function uo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zF=(e,t,n,s,r)=>{var i=Jc(n),o=Jc(s),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,h;if(l>0&&r instanceof Array){for(var p=[0,0,0,0],x=0,v=4;x<v;x++)p[x]=r[x]>l?l:r[x];h=Cn(_F||(_F=uo(["M",",",""])),e,t+c*p[0]),p[0]>0&&(h+=Cn(AF||(AF=uo(["A ",",",",0,0,",",",",",""])),p[0],p[0],d,e+u*p[0],t)),h+=Cn(TF||(TF=uo(["L ",",",""])),e+n-u*p[1],t),p[1]>0&&(h+=Cn(kF||(kF=uo(["A ",",",",0,0,",`,
        `,",",""])),p[1],p[1],d,e+n,t+c*p[1])),h+=Cn(EF||(EF=uo(["L ",",",""])),e+n,t+s-c*p[2]),p[2]>0&&(h+=Cn(LF||(LF=uo(["A ",",",",0,0,",`,
        `,",",""])),p[2],p[2],d,e+n-u*p[2],t+s)),h+=Cn(PF||(PF=uo(["L ",",",""])),e+u*p[3],t+s),p[3]>0&&(h+=Cn(DF||(DF=uo(["A ",",",",0,0,",`,
        `,",",""])),p[3],p[3],d,e,t+s-c*p[3])),h+="Z"}else if(l>0&&r===+r&&r>0){var j=Math.min(l,r);h=Cn(OF||(OF=uo(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*j,j,j,d,e+u*j,t,e+n-u*j,t,j,j,d,e+n,t+c*j,e+n,t+s-c*j,j,j,d,e+n-u*j,t+s,e+u*j,t+s,j,j,d,e,t+s-c*j)}else h=Cn(MF||(MF=uo(["M ",","," h "," v "," h "," Z"])),e,t,n,s,-n);return h},FF={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BQ=e=>{var t=Qn(e,FF),n=f.useRef(null),[s,r]=f.useState(-1);f.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&r(J)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:p,animationBegin:x,isAnimationActive:v,isUpdateAnimationActive:j}=t,b=f.useRef(l),N=f.useRef(c),w=f.useRef(i),S=f.useRef(o),_=f.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),k=i0(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var T=It("recharts-rectangle",d);if(!j){var A=Ys(t),{radius:E}=A,M=RF(A,vke);return f.createElement("path",Sw({},M,{x:Jc(i),y:Jc(o),width:Jc(l),height:Jc(c),radius:typeof u=="number"?u:void 0,className:T,d:zF(i,o,l,c,u)}))}var O=b.current,I=N.current,D=w.current,H=S.current,W="0px ".concat(s===-1?1:s,"px"),z="".concat(s,"px 0px"),Q=RQ(["strokeDasharray"],p,typeof h=="string"?h:FF.animationEasing);return f.createElement(r0,{animationId:k,key:k,canBegin:s>0,duration:p,easing:h,isActive:j,begin:x},J=>{var Y=dn(O,l,J),re=dn(I,c,J),we=dn(D,i,J),Z=dn(H,o,J);n.current&&(b.current=Y,N.current=re,w.current=we,S.current=Z);var ne;v?J>0?ne={transition:Q,strokeDasharray:z}:ne={strokeDasharray:W}:ne={strokeDasharray:z};var pe=Ys(t),{radius:Ne}=pe,de=RF(pe,wke);return f.createElement("path",Sw({},de,{radius:typeof u=="number"?u:void 0,className:T,d:zF(we,Z,Y,re,u),ref:n,style:$F($F({},ne),t.style)}))})};function UF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(n),!0).forEach(function(s){_ke(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UF(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _ke(e,t,n){return(t=Ake(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ake(e){var t=Tke(e,"string");return typeof t=="symbol"?t:t+""}function Tke(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _w=Math.PI/180,kke=e=>e*180/Math.PI,qn=(e,t,n,s)=>({x:e+Math.cos(-_w*s)*n,y:t+Math.sin(-_w*s)*n}),HQ=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},Eke=(e,t)=>{var{x:n,y:s}=e,{x:r,y:i}=t;return Math.sqrt((n-r)**2+(s-i)**2)},Lke=(e,t)=>{var{x:n,y:s}=e,{cx:r,cy:i}=t,o=Eke({x:n,y:s},{x:r,y:i});if(o<=0)return{radius:o,angle:0};var l=(n-r)/o,c=Math.acos(l);return s>i&&(c=2*Math.PI-c),{radius:o,angle:kke(c),angleInRadian:c}},Pke=e=>{var{startAngle:t,endAngle:n}=e,s=Math.floor(t/360),r=Math.floor(n/360),i=Math.min(s,r);return{startAngle:t-i*360,endAngle:n-i*360}},Dke=(e,t)=>{var{startAngle:n,endAngle:s}=t,r=Math.floor(n/360),i=Math.floor(s/360),o=Math.min(r,i);return e+o*360},Oke=(e,t)=>{var{chartX:n,chartY:s}=e,{radius:r,angle:i}=Lke({x:n,y:s},t),{innerRadius:o,outerRadius:l}=t;if(r<o||r>l||r===0)return null;var{startAngle:c,endAngle:u}=Pke(t),d=i,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?BF(BF({},t),{},{radius:r,angle:Dke(d,t)}):null};function qQ(e){var{cx:t,cy:n,radius:s,startAngle:r,endAngle:i}=e,o=qn(t,n,s,r),l=qn(t,n,s,i);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:r,endAngle:i}}var HF,qF,GF,WF,VF,YF,QF;function SE(){return SE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},SE.apply(null,arguments)}function hu(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Mke=(e,t)=>{var n=xs(t-e),s=Math.min(Math.abs(t-e),359.999);return n*s},mb=e=>{var{cx:t,cy:n,radius:s,angle:r,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+s,d=Math.asin(l/u)/_w,h=c?r:r+i*d,p=qn(t,n,u,h),x=qn(t,n,s,h),v=c?r-i*d:r,j=qn(t,n,u*Math.cos(d*_w),v);return{center:p,circleTangency:x,lineTangency:j,theta:d}},GQ=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:i,endAngle:o}=e,l=Mke(i,o),c=i+l,u=qn(t,n,r,i),d=qn(t,n,r,c),h=Cn(HF||(HF=hu(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,r,r,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(s>0){var p=qn(t,n,s,i),x=qn(t,n,s,c);h+=Cn(qF||(qF=hu(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,s,s,+(Math.abs(l)>180),+(i<=c),p.x,p.y)}else h+=Cn(GF||(GF=hu(["L ",","," Z"])),t,n);return h},Ike=e=>{var{cx:t,cy:n,innerRadius:s,outerRadius:r,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=xs(u-c),{circleTangency:h,lineTangency:p,theta:x}=mb({cx:t,cy:n,radius:r,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:j,theta:b}=mb({cx:t,cy:n,radius:r,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),N=l?Math.abs(c-u):Math.abs(c-u)-x-b;if(N<0)return o?Cn(WF||(WF=hu(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),p.x,p.y,i,i,i*2,i,i,-i*2):GQ({cx:t,cy:n,innerRadius:s,outerRadius:r,startAngle:c,endAngle:u});var w=Cn(VF||(VF=hu(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),p.x,p.y,i,i,+(d<0),h.x,h.y,r,r,+(N>180),+(d<0),v.x,v.y,i,i,+(d<0),j.x,j.y);if(s>0){var{circleTangency:S,lineTangency:_,theta:k}=mb({cx:t,cy:n,radius:s,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:T,lineTangency:A,theta:E}=mb({cx:t,cy:n,radius:s,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),M=l?Math.abs(c-u):Math.abs(c-u)-k-E;if(M<0&&i===0)return"".concat(w,"L").concat(t,",").concat(n,"Z");w+=Cn(YF||(YF=hu(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),A.x,A.y,i,i,+(d<0),T.x,T.y,s,s,+(M>180),+(d>0),S.x,S.y,i,i,+(d<0),_.x,_.y)}else w+=Cn(QF||(QF=hu(["L",",","Z"])),t,n);return w},$ke={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},WQ=e=>{var t=Qn(e,$ke),{cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(i<r||u===d)return null;var p=It("recharts-sector",h),x=i-r,v=Rs(o,x,0,!0),j;return v>0&&Math.abs(u-d)<360?j=Ike({cx:n,cy:s,innerRadius:r,outerRadius:i,cornerRadius:Math.min(v,x/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):j=GQ({cx:n,cy:s,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d}),f.createElement("path",SE({},Ys(t),{className:p,d:j}))};function Rke(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(SY(t)){if(e==="centric"){var{cx:s,cy:r,innerRadius:i,outerRadius:o,angle:l}=t,c=qn(s,r,i,l),u=qn(s,r,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return qQ(t)}}var H_={},q_={},G_={},KF;function zke(){return KF||(KF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IY();function n(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=n})(G_)),G_}var XF;function Fke(){return XF||(XF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zke();function n(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=n})(q_)),q_}var ZF;function Uke(){return ZF||(ZF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$Y(),n=Fke();function s(r,i,o){o&&typeof o!="number"&&t.isIterateeCall(r,i,o)&&(i=o=void 0),r=n.toFinite(r),i===void 0?(i=r,r=0):i=n.toFinite(i),o=o===void 0?r<i?1:-1:n.toFinite(o);const l=Math.max(Math.ceil((i-r)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=r,r+=o;return c}e.range=s})(H_)),H_}var W_,JF;function Bke(){return JF||(JF=1,W_=Uke().range),W_}var Hke=Bke();const VQ=eo(Hke),Vg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:t4,scaleDiverging:Yq,scaleDivergingLog:Qq,scaleDivergingPow:_4,scaleDivergingSqrt:fge,scaleDivergingSymlog:Kq,scaleIdentity:Eq,scaleImplicit:jk,scaleLinear:qj,scaleLog:Ap,scaleOrdinal:jp,scalePoint:rfe,scalePow:Gj,scaleQuantile:Oq,scaleQuantize:Mq,scaleRadial:Dq,scaleSequential:C4,scaleSequentialLog:Gq,scaleSequentialPow:S4,scaleSequentialQuantile:Vq,scaleSequentialSqrt:mge,scaleSequentialSymlog:Wq,scaleSqrt:Pq,scaleSymlog:m4,scaleThreshold:h4,scaleTime:N4,scaleUtc:qq,tickFormat:kq},Symbol.toStringTag,{value:"Module"}));var oc=e=>e.chartData,JN=ut([oc],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),BP=(e,t,n,s)=>s?JN(e):oc(e),qke=(e,t,n)=>n?JN(e):oc(e);function hd(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(xn(t)&&xn(n))return!0}return!1}function eU(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function YQ(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,s]=e,r,i;if(xn(n))r=n;else if(typeof n=="function")return;if(xn(s))i=s;else if(typeof s=="function")return;var o=[r,i];if(hd(o))return o}}function Gke(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,n);if(hd(s))return eU(s,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[r,i]=e,o,l;if(r==="auto")t!=null&&(o=Math.min(...t));else if(zt(r))o=r;else if(typeof r=="function")try{t!=null&&(o=r(t?.[0]))}catch{}else if(typeof r=="string"&&Yz.test(r)){var c=Yz.exec(r);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(zt(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&Qz.test(i)){var d=Qz.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var h=+d[1];l=t[1]+h}}else l=t?.[1];var p=[o,l];if(hd(p))return t==null?p:eU(p,t,n)}}}var fh=1e9,Wke={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qP,un=!0,Ni="[DecimalError] ",Su=Ni+"Invalid argument: ",HP=Ni+"Exponent out of range: ",hh=Math.floor,au=Math.pow,Vke=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ir,hs=1e7,nn=7,QQ=9007199254740991,Aw=hh(QQ/nn),$t={};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$t.comparedTo=$t.cmp=function(e){var t,n,s,r,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,r=e.d.length,t=0,n=s<r?s:r;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===r?0:s>r^i.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*nn;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};$t.dividedBy=$t.div=function(e){return Ml(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.idiv=function(e){var t=this,n=t.constructor;return Va(Ml(t,new n(e),0,1),n.precision)};$t.equals=$t.eq=function(e){return!this.cmp(e)};$t.exponent=function(){return Wn(this)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){return this.cmp(e)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,n=this,s=n.constructor,r=s.precision,i=r+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ir))throw Error(Ni+"NaN");if(n.s<1)throw Error(Ni+(n.s?"NaN":"-Infinity"));return n.eq(Ir)?new s(0):(un=!1,t=Ml(Hp(n,i),Hp(e,i),i),un=!0,Va(t,r))};$t.minus=$t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ZQ(t,e):KQ(t,(e.s=-e.s,e))};$t.modulo=$t.mod=function(e){var t,n=this,s=n.constructor,r=s.precision;if(e=new s(e),!e.s)throw Error(Ni+"NaN");return n.s?(un=!1,t=Ml(n,e,0,1).times(e),un=!0,n.minus(t)):Va(new s(n),r)};$t.naturalExponential=$t.exp=function(){return XQ(this)};$t.naturalLogarithm=$t.ln=function(){return Hp(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$t.plus=$t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KQ(t,e):ZQ(t,(e.s=-e.s,e))};$t.precision=$t.sd=function(e){var t,n,s,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Su+e);if(t=Wn(r)+1,s=r.d.length-1,n=s*nn+1,s=r.d[s],s){for(;s%10==0;s/=10)n--;for(s=r.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};$t.squareRoot=$t.sqrt=function(){var e,t,n,s,r,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ni+"NaN")}for(e=Wn(l),un=!1,r=Math.sqrt(+l),r==0||r==1/0?(t=Lo(l.d),(t.length+e)%2==0&&(t+="0"),r=Math.sqrt(t),e=hh((e+1)/2)-(e<0||e%2),r==1/0?t="5e"+e:(t=r.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(r.toString()),n=c.precision,r=o=n+3;;)if(i=s,s=i.plus(Ml(l,i,o+2)).times(.5),Lo(i.d).slice(0,o)===(t=Lo(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),r==o&&t=="4999"){if(Va(i,n+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return un=!0,Va(s,n)};$t.times=$t.mul=function(e){var t,n,s,r,i,o,l,c,u,d=this,h=d.constructor,p=d.d,x=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=p.length,u=x.length,c<u&&(i=p,p=x,x=i,o=c,c=u,u=o),i=[],o=c+u,s=o;s--;)i.push(0);for(s=u;--s>=0;){for(t=0,r=c+s;r>s;)l=i[r]+x[s]*p[r-s-1]+t,i[r--]=l%hs|0,t=l/hs|0;i[r]=(i[r]+t)%hs|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,un?Va(e,h.precision):e};$t.toDecimalPlaces=$t.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(qo(e,0,fh),t===void 0?t=s.rounding:qo(t,0,8),Va(n,e+Wn(n)+1,t))};$t.toExponential=function(e,t){var n,s=this,r=s.constructor;return e===void 0?n=Hu(s,!0):(qo(e,0,fh),t===void 0?t=r.rounding:qo(t,0,8),s=Va(new r(s),e+1,t),n=Hu(s,!0,e+1)),n};$t.toFixed=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?Hu(r):(qo(e,0,fh),t===void 0?t=i.rounding:qo(t,0,8),s=Va(new i(r),e+Wn(r)+1,t),n=Hu(s.abs(),!1,e+Wn(s)+1),r.isneg()&&!r.isZero()?"-"+n:n)};$t.toInteger=$t.toint=function(){var e=this,t=e.constructor;return Va(new t(e),Wn(e)+1,t.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(e){var t,n,s,r,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ir);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ni+"Infinity");return l}if(l.eq(Ir))return l;if(s=c.precision,e.eq(Ir))return Va(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=QQ){for(r=new c(Ir),t=Math.ceil(s/nn+4),un=!1;n%2&&(r=r.times(l),aU(r.d,t)),n=hh(n/2),n!==0;)l=l.times(l),aU(l.d,t);return un=!0,e.s<0?new c(Ir).div(r):Va(r,s)}}else if(i<0)throw Error(Ni+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,un=!1,r=e.times(Hp(l,s+u)),un=!0,r=XQ(r),r.s=i,r};$t.toPrecision=function(e,t){var n,s,r=this,i=r.constructor;return e===void 0?(n=Wn(r),s=Hu(r,n<=i.toExpNeg||n>=i.toExpPos)):(qo(e,1,fh),t===void 0?t=i.rounding:qo(t,0,8),r=Va(new i(r),e,t),n=Wn(r),s=Hu(r,e<=n||n<=i.toExpNeg,e)),s};$t.toSignificantDigits=$t.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(qo(e,1,fh),t===void 0?t=s.rounding:qo(t,0,8)),Va(new s(n),e,t)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Wn(e),n=e.constructor;return Hu(e,t<=n.toExpNeg||t>=n.toExpPos)};function KQ(e,t){var n,s,r,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),un?Va(t,h):t;if(c=e.d,u=t.d,o=e.e,r=t.e,c=c.slice(),i=o-r,i){for(i<0?(s=c,i=-i,l=u.length):(s=u,r=o,l=c.length),o=Math.ceil(h/nn),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,s=u,u=c,c=s),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/hs|0,c[i]%=hs;for(n&&(c.unshift(n),++r),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=r,un?Va(t,h):t}function qo(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Su+e)}function Lo(e){var t,n,s,r=e.length-1,i="",o=e[0];if(r>0){for(i+=o,t=1;t<r;t++)s=e[t]+"",n=nn-s.length,n&&(i+=Wc(n)),i+=s;o=e[t],s=o+"",n=nn-s.length,n&&(i+=Wc(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ml=(function(){function e(s,r){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*r+o,s[l]=i%hs|0,o=i/hs|0;return o&&s.unshift(o),s}function t(s,r,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=r[l]){c=s[l]>r[l]?1:-1;break}return c}function n(s,r,i){for(var o=0;i--;)s[i]-=o,o=s[i]<r[i]?1:0,s[i]=o*hs+s[i]-r[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,r,i,o){var l,c,u,d,h,p,x,v,j,b,N,w,S,_,k,T,A,E,M=s.constructor,O=s.s==r.s?1:-1,I=s.d,D=r.d;if(!s.s)return new M(s);if(!r.s)throw Error(Ni+"Division by zero");for(c=s.e-r.e,A=D.length,k=I.length,x=new M(O),v=x.d=[],u=0;D[u]==(I[u]||0);)++u;if(D[u]>(I[u]||0)&&--c,i==null?w=i=M.precision:o?w=i+(Wn(s)-Wn(r))+1:w=i,w<0)return new M(0);if(w=w/nn+2|0,u=0,A==1)for(d=0,D=D[0],w++;(u<k||d)&&w--;u++)S=d*hs+(I[u]||0),v[u]=S/D|0,d=S%D|0;else{for(d=hs/(D[0]+1)|0,d>1&&(D=e(D,d),I=e(I,d),A=D.length,k=I.length),_=A,j=I.slice(0,A),b=j.length;b<A;)j[b++]=0;E=D.slice(),E.unshift(0),T=D[0],D[1]>=hs/2&&++T;do d=0,l=t(D,j,A,b),l<0?(N=j[0],A!=b&&(N=N*hs+(j[1]||0)),d=N/T|0,d>1?(d>=hs&&(d=hs-1),h=e(D,d),p=h.length,b=j.length,l=t(h,j,p,b),l==1&&(d--,n(h,A<p?E:D,p))):(d==0&&(l=d=1),h=D.slice()),p=h.length,p<b&&h.unshift(0),n(j,h,b),l==-1&&(b=j.length,l=t(D,j,A,b),l<1&&(d++,n(j,A<b?E:D,b))),b=j.length):l===0&&(d++,j=[0]),v[u++]=d,l&&j[0]?j[b++]=I[_]||0:(j=[I[_]],b=1);while((_++<k||j[0]!==void 0)&&w--)}return v[0]||v.shift(),x.e=c,Va(x,o?i+Wn(x)+1:i)}})();function XQ(e,t){var n,s,r,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(Wn(e)>16)throw Error(HP+Wn(e));if(!e.s)return new d(Ir);for(un=!1,l=h,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(s=Math.log(au(2,u))/Math.LN10*2+5|0,l+=s,n=r=i=new d(Ir),d.precision=l;;){if(r=Va(r.times(e),l),n=n.times(++c),o=i.plus(Ml(r,n,l)),Lo(o.d).slice(0,l)===Lo(i.d).slice(0,l)){for(;u--;)i=Va(i.times(i),l);return d.precision=h,t==null?(un=!0,Va(i,h)):i}i=o}}function Wn(e){for(var t=e.e*nn,n=e.d[0];n>=10;n/=10)t++;return t}function V_(e,t,n){if(t>e.LN10.sd())throw un=!0,n&&(e.precision=n),Error(Ni+"LN10 precision limit exceeded");return Va(new e(e.LN10),t)}function Wc(e){for(var t="";e--;)t+="0";return t}function Hp(e,t){var n,s,r,i,o,l,c,u,d,h=1,p=10,x=e,v=x.d,j=x.constructor,b=j.precision;if(x.s<1)throw Error(Ni+(x.s?"NaN":"-Infinity"));if(x.eq(Ir))return new j(0);if(t==null?(un=!1,u=b):u=t,x.eq(10))return t==null&&(un=!0),V_(j,u);if(u+=p,j.precision=u,n=Lo(v),s=n.charAt(0),i=Wn(x),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)x=x.times(e),n=Lo(x.d),s=n.charAt(0),h++;i=Wn(x),s>1?(x=new j("0."+n),i++):x=new j(s+"."+n.slice(1))}else return c=V_(j,u+2,b).times(i+""),x=Hp(new j(s+"."+n.slice(1)),u-p).plus(c),j.precision=b,t==null?(un=!0,Va(x,b)):x;for(l=o=x=Ml(x.minus(Ir),x.plus(Ir),u),d=Va(x.times(x),u),r=3;;){if(o=Va(o.times(d),u),c=l.plus(Ml(o,new j(r),u)),Lo(c.d).slice(0,u)===Lo(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(V_(j,u+2,b).times(i+""))),l=Ml(l,new j(h),u),j.precision=b,t==null?(un=!0,Va(l,b)):l;l=c,r+=2}}function tU(e,t){var n,s,r;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(r=t.length;t.charCodeAt(r-1)===48;)--r;if(t=t.slice(s,r),t){if(r-=s,n=n-s-1,e.e=hh(n/nn),e.d=[],s=(n+1)%nn,n<0&&(s+=nn),s<r){for(s&&e.d.push(+t.slice(0,s)),r-=nn;s<r;)e.d.push(+t.slice(s,s+=nn));t=t.slice(s),s=nn-t.length}else s-=r;for(;s--;)t+="0";if(e.d.push(+t),un&&(e.e>Aw||e.e<-Aw))throw Error(HP+n)}else e.s=0,e.e=0,e.d=[0];return e}function Va(e,t,n){var s,r,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=nn,r=t,u=h[d=0];else{if(d=Math.ceil((s+1)/nn),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;s%=nn,r=s-nn+o}if(n!==void 0&&(i=au(10,o-r-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?r>0?u/au(10,o-r):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=Wn(e),h.length=1,t=t-i-1,h[0]=au(10,(nn-t%nn)%nn),e.e=hh(-t/nn)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=d,i=1,d--):(h.length=d+1,i=au(10,nn-s),h[d]=r>0?(u/au(10,o-r)%au(10,r)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==hs&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=hs)break;h[d--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(un&&(e.e>Aw||e.e<-Aw))throw Error(HP+Wn(e));return e}function ZQ(e,t){var n,s,r,i,o,l,c,u,d,h,p=e.constructor,x=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),un?Va(t,x):t;if(c=e.d,h=t.d,s=t.e,u=e.e,c=c.slice(),o=u-s,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,s=u,l=c.length),r=Math.max(Math.ceil(x/nn),l)+2,o>r&&(o=r,n.length=1),n.reverse(),r=o;r--;)n.push(0);n.reverse()}else{for(r=c.length,l=h.length,d=r<l,d&&(l=r),r=0;r<l;r++)if(c[r]!=h[r]){d=c[r]<h[r];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,r=h.length-l;r>0;--r)c[l++]=0;for(r=h.length;r>o;){if(c[--r]<h[r]){for(i=r;i&&c[--i]===0;)c[i]=hs-1;--c[i],c[r]+=hs}c[r]-=h[r]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,un?Va(t,x):t):new p(0)}function Hu(e,t,n){var s,r=Wn(e),i=Lo(e.d),o=i.length;return t?(n&&(s=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wc(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(r<0?"e":"e+")+r):r<0?(i="0."+Wc(-r-1)+i,n&&(s=n-o)>0&&(i+=Wc(s))):r>=o?(i+=Wc(r+1-o),n&&(s=n-r-1)>0&&(i=i+"."+Wc(s))):((s=r+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-o)>0&&(r+1===o&&(i+="."),i+=Wc(s))),e.s<0?"-"+i:i}function aU(e,t){if(e.length>t)return e.length=t,!0}function JQ(e){var t,n,s;function r(i){var o=this;if(!(o instanceof r))return new r(i);if(o.constructor=r,i instanceof r){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Su+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return tU(o,i.toString())}else if(typeof i!="string")throw Error(Su+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Vke.test(i))tU(o,i);else throw Error(Su+i)}if(r.prototype=$t,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=JQ,r.config=r.set=Yke,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return r.config(e),r}function Yke(e){if(!e||typeof e!="object")throw Error(Ni+"Object expected");var t,n,s,r=["precision",1,fh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<r.length;t+=3)if((s=e[n=r[t]])!==void 0)if(hh(s)===s&&s>=r[t+1]&&s<=r[t+2])this[n]=s;else throw Error(Su+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Su+n+": "+s);return this}var qP=JQ(Wke);Ir=new qP(1);const Ra=qP;var Qke=e=>e,eK={},tK=e=>e===eK,nU=e=>function t(){return arguments.length===0||arguments.length===1&&tK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},aK=(e,t)=>e===1?t:nU(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];var i=s.filter(o=>o!==eK).length;return i>=e?t(...s):aK(e-i,nU(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=s.map(d=>tK(d)?l.shift():d);return t(...u,...l)}))}),Kke=e=>aK(e.length,e),_E=(e,t)=>{for(var n=[],s=e;s<t;++s)n[s-e]=s;return n},Xke=Kke((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),Zke=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return Qke;var r=n.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function nK(e){var t;return e===0?t=1:t=Math.floor(new Ra(e).abs().log(10).toNumber())+1,t}function sK(e,t,n){for(var s=new Ra(e),r=0,i=[];s.lt(t)&&r<1e5;)i.push(s.toNumber()),s=s.add(n),r++;return i}var rK=e=>{var[t,n]=e,[s,r]=[t,n];return t>n&&([s,r]=[n,t]),[s,r]},iK=(e,t,n)=>{if(e.lte(0))return new Ra(0);var s=nK(e.toNumber()),r=new Ra(10).pow(s),i=e.div(r),o=s!==1?.05:.1,l=new Ra(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(r);return t?new Ra(c.toNumber()):new Ra(Math.ceil(c.toNumber()))},Jke=(e,t,n)=>{var s=new Ra(1),r=new Ra(e);if(!r.isint()&&n){var i=Math.abs(e);i<1?(s=new Ra(10).pow(nK(e)-1),r=new Ra(Math.floor(r.div(s).toNumber())).mul(s)):i>1&&(r=new Ra(Math.floor(e)))}else e===0?r=new Ra(Math.floor((t-1)/2)):n||(r=new Ra(Math.floor(e)));var o=Math.floor((t-1)/2),l=Zke(Xke(c=>r.add(new Ra(c-o).mul(s)).toNumber()),_E);return l(0,t)},oK=function(t,n,s,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(s-1)))return{step:new Ra(0),tickMin:new Ra(0),tickMax:new Ra(0)};var o=iK(new Ra(n).sub(t).div(s-1),r,i),l;t<=0&&n>=0?l=new Ra(0):(l=new Ra(t).add(n).div(2),l=l.sub(new Ra(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new Ra(n).sub(l).div(o).toNumber()),d=c+u+1;return d>s?oK(t,n,s,r,i+1):(d<s&&(u=n>0?u+(s-d):u,c=n>0?c:c+(s-d)),{step:o,tickMin:l.sub(new Ra(c).mul(o)),tickMax:l.add(new Ra(u).mul(o))})},eEe=function(t){var[n,s]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(r,2),[l,c]=rK([n,s]);if(l===-1/0||c===1/0){var u=c===1/0?[l,..._E(0,r-1).map(()=>1/0)]:[..._E(0,r-1).map(()=>-1/0),c];return n>s?u.reverse():u}if(l===c)return Jke(l,r,i);var{step:d,tickMin:h,tickMax:p}=oK(l,c,o,i,0),x=sK(h,p.add(new Ra(.1).mul(d)),d);return n>s?x.reverse():x},tEe=function(t,n){var[s,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=rK([s,r]);if(o===-1/0||l===1/0)return[s,r];if(o===l)return[o];var c=Math.max(n,2),u=iK(new Ra(l).sub(o).div(c-1),i,0),d=[...sK(new Ra(o),new Ra(l),u),l];return i===!1&&(d=d.map(h=>Math.round(h))),s>r?d.reverse():d},lK=e=>e.rootProps.maxBarSize,aEe=e=>e.rootProps.barGap,cK=e=>e.rootProps.barCategoryGap,nEe=e=>e.rootProps.barSize,o0=e=>e.rootProps.stackOffset,dK=e=>e.rootProps.reverseStackOrder,GP=e=>e.options.chartName,WP=e=>e.rootProps.syncId,uK=e=>e.rootProps.syncMethod,VP=e=>e.options.eventEmitter,Gn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Tl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Or={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},e1=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},sEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Tl.angleAxisId,includeHidden:!1,name:void 0,reversed:Tl.reversed,scale:Tl.scale,tick:Tl.tick,tickCount:void 0,ticks:void 0,type:Tl.type,unit:void 0},rEe={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:Or.type,unit:void 0},iEe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Tl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Tl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Tl.scale,tick:Tl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oEe={allowDataOverflow:Or.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Or.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Or.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Or.scale,tick:Or.tick,tickCount:Or.tickCount,ticks:void 0,type:"category",unit:void 0},YP=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?iEe:sEe,QP=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?oEe:rEe,t1=e=>e.polarOptions,KP=ut([rc,ic,ls],HQ),mK=ut([t1,KP],(e,t)=>{if(e!=null)return Rs(e.innerRadius,t,0)}),fK=ut([t1,KP],(e,t)=>{if(e!=null)return Rs(e.outerRadius,t,t*.8)}),lEe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},hK=ut([t1],lEe);ut([YP,hK],e1);var gK=ut([KP,mK,fK],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ut([QP,gK],e1);var pK=ut([wa,t1,mK,fK,rc,ic],(e,t,n,s,r,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||s==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Rs(o,r,r/2),cy:Rs(l,i,i/2),innerRadius:n,outerRadius:s,startAngle:c,endAngle:u,clockWise:!1}}}),pn=(e,t)=>t,l0=(e,t,n)=>n;function XP(e){return e?.id}function xK(e,t,n){var{chartData:s=[]}=t,{allowDuplicatedCategory:r,dataKey:i}=n,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:s;if(!(u==null||u.length===0)){var d=XP(l);u.forEach((h,p)=>{var x=i==null||r?p:String(qa(h,i,null)),v=qa(h,l.dataKey,0),j;o.has(x)?j=o.get(x):j={},Object.assign(j,{[d]:v}),o.set(x,j)})}}),Array.from(o.values())}function a1(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var n1=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function s1(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function cEe(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var cs=e=>{var t=wa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},gh=e=>e.tooltip.settings.axisId;function sU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Tw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(n),!0).forEach(function(s){dEe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function dEe(e,t,n){return(t=uEe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uEe(e){var t=mEe(e,"string");return typeof t=="symbol"?t:t+""}function mEe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AE=[0,"auto"],ms={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},yK=(e,t)=>e.cartesianAxis.xAxis[t],lc=(e,t)=>{var n=yK(e,t);return n??ms},fs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:AE,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:n0},bK=(e,t)=>e.cartesianAxis.yAxis[t],cc=(e,t)=>{var n=bK(e,t);return n??fs},fEe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ZP=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??fEe},bn=(e,t,n)=>{switch(t){case"xAxis":return lc(e,n);case"yAxis":return cc(e,n);case"zAxis":return ZP(e,n);case"angleAxis":return YP(e,n);case"radiusAxis":return QP(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},hEe=(e,t,n)=>{switch(t){case"xAxis":return lc(e,n);case"yAxis":return cc(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},c0=(e,t,n)=>{switch(t){case"xAxis":return lc(e,n);case"yAxis":return cc(e,n);case"angleAxis":return YP(e,n);case"radiusAxis":return QP(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},vK=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function JP(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var r1=e=>e.graphicalItems.cartesianItems,gEe=ut([pn,l0],JP),eD=(e,t,n)=>e.filter(n).filter(s=>t?.includeHidden===!0?!0:!s.hide),d0=ut([r1,bn,gEe],eD,{memoizeOptions:{resultEqualityCheck:s1}}),wK=ut([d0],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(a1)),jK=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),pEe=ut([d0],jK),tD=e=>e.map(t=>t.data).filter(Boolean).flat(1),xEe=ut([d0],tD,{memoizeOptions:{resultEqualityCheck:s1}}),aD=(e,t)=>{var{chartData:n=[],dataStartIndex:s,dataEndIndex:r}=t;return e.length>0?e:n.slice(s,r+1)},nD=ut([xEe,BP],aD),sD=(e,t,n)=>t?.dataKey!=null?e.map(s=>({value:qa(s,t.dataKey)})):n.length>0?n.map(s=>s.dataKey).flatMap(s=>e.map(r=>({value:qa(r,s)}))):e.map(s=>({value:s})),i1=ut([nD,bn,d0],sD);function NK(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function yv(e){if(Bo(e)||e instanceof Date){var t=Number(e);if(xn(t))return t}}function rU(e){if(Array.isArray(e)){var t=[yv(e[0]),yv(e[1])];return hd(t)?t:void 0}var n=yv(e);if(n!=null)return[n,n]}function Kl(e){return e.map(yv).filter(JSe)}function yEe(e,t,n){return!n||typeof t!="number"||Zi(t)?[]:n.length?Kl(n.flatMap(s=>{var r=qa(e,s.dataKey),i,o;if(Array.isArray(r)?[i,o]=r:i=o=r,!(!xn(i)||!xn(o)))return[t-i,t+o]})):[]}var ds=e=>{var t=cs(e),n=gh(e);return c0(e,t,n)},u0=ut([ds],e=>e?.dataKey),bEe=ut([wK,BP,ds],xK),CK=(e,t,n,s)=>{var r={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},r);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,u=s?[...c].reverse():c,d=u.map(XP);return[l,{stackedData:uAe(e,d,n),graphicalItems:u}]}))},TE=ut([bEe,wK,o0,dK],CK),SK=(e,t,n,s)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if(s==null&&n!=="zAxis"){var o=pAe(e,r,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},vEe=ut([bn],e=>e.allowDataOverflow),rD=e=>{var t;if(e==null||!("domain"in e))return AE;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Kl(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:AE},iD=ut([bn],rD),oD=ut([iD,vEe],YQ),wEe=ut([TE,oc,pn,oD],SK,{memoizeOptions:{resultEqualityCheck:n1}}),o1=e=>e.errorBars,jEe=(e,t,n)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>NK(n,s)),kw=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var r=n.filter(Boolean);if(r.length!==0){var i=r.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},lD=(e,t,n,s,r)=>{var i,o;if(n.length>0&&e.forEach(l=>{n.forEach(c=>{var u,d,h=(u=s[c.id])===null||u===void 0?void 0:u.filter(N=>NK(r,N)),p=qa(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),x=yEe(l,p,h);if(x.length>=2){var v=Math.min(...x),j=Math.max(...x);(i==null||v<i)&&(i=v),(o==null||j>o)&&(o=j)}var b=rU(p);b!=null&&(i=i==null?b[0]:Math.min(i,b[0]),o=o==null?b[1]:Math.max(o,b[1]))})}),t?.dataKey!=null&&e.forEach(l=>{var c=rU(qa(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),xn(i)&&xn(o))return[i,o]},NEe=ut([nD,bn,pEe,o1,pn],lD,{memoizeOptions:{resultEqualityCheck:n1}});function CEe(e){var{value:t}=e;if(Bo(t)||t instanceof Date)return t}var SEe=(e,t,n)=>{var s=e.map(CEe).filter(r=>r!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&jY(s))?VQ(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},_K=e=>e.referenceElements.dots,ph=(e,t,n)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===n:s.yAxisId===n),_Ee=ut([_K,pn,l0],ph),AK=e=>e.referenceElements.areas,AEe=ut([AK,pn,l0],ph),TK=e=>e.referenceElements.lines,TEe=ut([TK,pn,l0],ph),kK=(e,t)=>{if(e!=null){var n=Kl(e.map(s=>t==="xAxis"?s.x:s.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},kEe=ut(_Ee,pn,kK),EK=(e,t)=>{if(e!=null){var n=Kl(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},EEe=ut([AEe,pn],EK);function LEe(e){var t;if(e.x!=null)return Kl([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return n==null||n.length===0?[]:Kl(n)}function PEe(e){var t;if(e.y!=null)return Kl([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return n==null||n.length===0?[]:Kl(n)}var LK=(e,t)=>{if(e!=null){var n=e.flatMap(s=>t==="xAxis"?LEe(s):PEe(s));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},DEe=ut([TEe,pn],LK),OEe=ut(kEe,DEe,EEe,(e,t,n)=>kw(e,n,t)),cD=(e,t,n,s,r,i,o,l)=>{if(n!=null)return n;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?kw(s,i,r):kw(i,r);return Gke(t,u,e.allowDataOverflow)},MEe=ut([bn,iD,oD,wEe,NEe,OEe,wa,pn],cD,{memoizeOptions:{resultEqualityCheck:n1}}),IEe=[0,1],dD=(e,t,n,s,r,i,o)=>{if(!((e==null||n==null||n.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=Ed(t,i);if(u&&l==null){var d;return VQ(0,(d=n?.length)!==null&&d!==void 0?d:0)}return c==="category"?SEe(s,e,u):r==="expand"?IEe:o}},uD=ut([bn,wa,nD,i1,o0,pn,MEe],dD),PK=(e,t,n,s,r)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&r==="radiusAxis"?"band":t==="radial"&&r==="angleAxis"?"linear":o==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Xx(i));return l in Vg?l:"point"}}},xh=ut([bn,wa,vK,GP,pn],PK);function $Ee(e){if(e!=null){if(e in Vg)return Vg[e]();var t="scale".concat(Xx(e));if(t in Vg)return Vg[t]()}}function mD(e,t,n,s){if(!(n==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(s);var r=$Ee(t);if(r!=null){var i=r.domain(n).range(s);return iAe(i),i}}}var fD=(e,t,n)=>{var s=rD(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&hd(e))return eEe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&hd(e))return tEe(e,t.tickCount,t.allowDecimals)}},hD=ut([uD,c0,xh],fD),gD=(e,t,n,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&hd(t)&&Array.isArray(n)&&n.length>0){var r=t[0],i=n[0],o=t[1],l=n[n.length-1];return[Math.min(r,i),Math.max(o,l)]}return t},REe=ut([bn,uD,hD,pn],gD),zEe=ut(i1,bn,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,s=Array.from(Kl(e.map(h=>h.value))).sort((h,p)=>h-p),r=s[0],i=s[s.length-1];if(r==null||i==null)return 1/0;var o=i-r;if(o===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l],u=s[l+1];if(!(c==null||u==null)){var d=u-c;n=Math.min(n,d)}}return n/o}}),DK=ut(zEe,wa,cK,ls,(e,t,n,s,r)=>r,(e,t,n,s,r)=>{if(!xn(e))return 0;var i=t==="vertical"?s.height:s.width;if(r==="gap")return e*i/2;if(r==="no-gap"){var o=Rs(n,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),FEe=(e,t,n)=>{var s=lc(e,t);return s==null||typeof s.padding!="string"?0:DK(e,"xAxis",t,n,s.padding)},UEe=(e,t,n)=>{var s=cc(e,t);return s==null||typeof s.padding!="string"?0:DK(e,"yAxis",t,n,s.padding)},BEe=ut(lc,FEe,(e,t)=>{var n,s;if(e==null)return{left:0,right:0};var{padding:r}=e;return typeof r=="string"?{left:t,right:t}:{left:((n=r.left)!==null&&n!==void 0?n:0)+t,right:((s=r.right)!==null&&s!==void 0?s:0)+t}}),HEe=ut(cc,UEe,(e,t)=>{var n,s;if(e==null)return{top:0,bottom:0};var{padding:r}=e;return typeof r=="string"?{top:t,bottom:t}:{top:((n=r.top)!==null&&n!==void 0?n:0)+t,bottom:((s=r.bottom)!==null&&s!==void 0?s:0)+t}}),qEe=ut([ls,BEe,WN,GN,(e,t,n)=>n],(e,t,n,s,r)=>{var{padding:i}=s;return r?[i.left,n.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),GEe=ut([ls,wa,HEe,WN,GN,(e,t,n)=>n],(e,t,n,s,r,i)=>{var{padding:o}=r;return i?[s.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),m0=(e,t,n,s)=>{var r;switch(t){case"xAxis":return qEe(e,n,s);case"yAxis":return GEe(e,n,s);case"zAxis":return(r=ZP(e,n))===null||r===void 0?void 0:r.range;case"angleAxis":return hK(e);case"radiusAxis":return gK(e,n);default:return}},OK=ut([bn,m0],e1),l1=ut([bn,xh,REe,OK],mD);ut([d0,o1,pn],jEe);function MK(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var c1=(e,t)=>t,d1=(e,t,n)=>n,WEe=ut(HN,c1,d1,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(MK)),VEe=ut(qN,c1,d1,(e,t,n)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===n).sort(MK)),IK=(e,t)=>({width:e.width,height:t.height}),YEe=(e,t)=>{var n=typeof t.width=="number"?t.width:n0;return{width:n,height:e.height}},$K=ut(ls,lc,IK),QEe=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},KEe=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},XEe=ut(ic,ls,WEe,c1,d1,(e,t,n,s,r)=>{var i={},o;return n.forEach(l=>{var c=IK(t,l);o==null&&(o=QEe(t,s,e));var u=s==="top"&&!r||s==="bottom"&&r;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),ZEe=ut(rc,ls,VEe,c1,d1,(e,t,n,s,r)=>{var i={},o;return n.forEach(l=>{var c=YEe(t,l);o==null&&(o=KEe(t,s,e));var u=s==="left"&&!r||s==="right"&&r;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),JEe=(e,t)=>{var n=lc(e,t);if(n!=null)return XEe(e,n.orientation,n.mirror)},eLe=ut([ls,lc,JEe,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:e.left,y:0}:{x:e.left,y:r}}}),tLe=(e,t)=>{var n=cc(e,t);if(n!=null)return ZEe(e,n.orientation,n.mirror)},aLe=ut([ls,cc,tLe,(e,t)=>t],(e,t,n,s)=>{if(t!=null){var r=n?.[s];return r==null?{x:0,y:e.top}:{x:r,y:e.top}}}),RK=ut(ls,cc,(e,t)=>{var n=typeof t.width=="number"?t.width:n0;return{width:n,height:e.height}}),iU=(e,t,n)=>{switch(t){case"xAxis":return $K(e,n).width;case"yAxis":return RK(e,n).height;default:return}},zK=(e,t,n,s)=>{if(n!=null){var{allowDuplicatedCategory:r,type:i,dataKey:o}=n,l=Ed(e,s),c=t.map(u=>u.value);if(o&&l&&i==="category"&&r&&jY(c))return c}},pD=ut([wa,i1,bn,pn],zK),FK=(e,t,n,s)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:i}=n,o=Ed(e,s);if(o&&(r==="number"||i!=="auto"))return t.map(l=>l.value)}},xD=ut([wa,i1,c0,pn],FK),oU=ut([wa,hEe,xh,l1,pD,xD,m0,hD,pn],(e,t,n,s,r,i,o,l,c)=>{if(t!=null){var u=Ed(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:r,isCategorical:u,niceTicks:l,range:o,realScaleType:n,scale:s}}}),nLe=(e,t,n,s,r,i,o,l,c)=>{if(!(t==null||s==null)){var u=Ed(e,c),{type:d,ticks:h,tickCount:p}=t,x=n==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,v=d==="category"&&s.bandwidth?s.bandwidth()/x:0;v=c==="angleAxis"&&i!=null&&i.length>=2?xs(i[0]-i[1])*2*v:v;var j=h||r;if(j){var b=j.map((N,w)=>{var S=o?o.indexOf(N):N;return{index:w,coordinate:s(S)+v,value:N,offset:v}});return b.filter(N=>xn(N.coordinate))}return u&&l?l.map((N,w)=>({coordinate:s(N)+v,value:N,index:w,offset:v})).filter(N=>xn(N.coordinate)):s.ticks?s.ticks(p).map(N=>({coordinate:s(N)+v,value:N,offset:v})):s.domain().map((N,w)=>({coordinate:s(N)+v,value:o?o[N]:N,index:w,offset:v}))}},UK=ut([wa,c0,xh,l1,hD,m0,pD,xD,pn],nLe),sLe=(e,t,n,s,r,i,o)=>{if(!(t==null||n==null||s==null||s[0]===s[1])){var l=Ed(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&s?.length>=2?xs(s[0]-s[1])*2*u:u,l&&i?i.map((d,h)=>({coordinate:n(d)+u,value:d,index:h,offset:u})):n.ticks?n.ticks(c).map(d=>({coordinate:n(d)+u,value:d,offset:u})):n.domain().map((d,h)=>({coordinate:n(d)+u,value:r?r[d]:d,index:h,offset:u}))}},gd=ut([wa,c0,l1,m0,pD,xD,pn],sLe),pd=ut(bn,l1,(e,t)=>{if(!(e==null||t==null))return Tw(Tw({},e),{},{scale:t})}),rLe=ut([bn,xh,uD,OK],mD);ut((e,t,n)=>ZP(e,n),rLe,(e,t)=>{if(!(e==null||t==null))return Tw(Tw({},e),{},{scale:t})});var iLe=ut([wa,HN,qN],(e,t,n)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),BK=e=>e.options.defaultTooltipEventType,HK=e=>e.options.validateTooltipEventTypes;function qK(e,t,n){if(e==null)return t;var s=e?"axis":"item";return n==null?t:n.includes(s)?s:t}function yD(e,t){var n=BK(e),s=HK(e);return qK(t,n,s)}function oLe(e){return Bt(t=>yD(t,e))}var GK=(e,t)=>{var n,s=Number(t);if(!(Zi(s)||t==null))return s>=0?e==null||(n=e[s])===null||n===void 0?void 0:n.value:void 0},lLe=e=>e.tooltip.settings,Qc={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},cLe={itemInteraction:{click:Qc,hover:Qc},axisInteraction:{click:Qc,hover:Qc},keyboardInteraction:Qc,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},WK=Nr({name:"tooltip",initialState:cLe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:cn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Vi(e).tooltipItemPayloads.indexOf(n);r>-1&&(e.tooltipItemPayloads[r]=s)},prepare:cn()},removeTooltipEntrySettings:{reducer(e,t){var n=Vi(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:cn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:dLe,replaceTooltipEntrySettings:uLe,removeTooltipEntrySettings:mLe,setTooltipSettingsState:fLe,setActiveMouseOverItemIndex:VK,mouseLeaveItem:hLe,mouseLeaveChart:YK,setActiveClickItemIndex:gLe,setMouseOverAxisIndex:QK,setMouseClickAxisIndex:pLe,setSyncInteraction:kE,setKeyboardInteraction:EE}=WK.actions,xLe=WK.reducer;function lU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function fb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lU(Object(n),!0).forEach(function(s){yLe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yLe(e,t,n){return(t=bLe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bLe(e){var t=vLe(e,"string");return typeof t=="symbol"?t:t+""}function vLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wLe(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function jLe(e){return e.index!=null}var KK=(e,t,n,s)=>{if(t==null)return Qc;var r=wLe(e,t,n);if(r==null)return Qc;if(r.active)return r;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(jLe(r)){if(i)return fb(fb({},r),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return fb(fb({},Qc),{},{coordinate:r.coordinate})};function NLe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function CLe(e,t){var n=NLe(e),s=t[0],r=t[1];if(n===void 0)return!1;var i=Math.min(s,r),o=Math.max(s,r);return n>=i&&n<=o}function SLe(e,t,n){if(n==null||t==null)return!0;var s=qa(e,t);return s==null||!hd(n)?!0:CLe(s,n)}var bD=(e,t,n,s)=>{var r=e?.index;if(r==null)return null;var i=Number(r);if(!xn(i))return r;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),u=t[c];return u==null||SLe(u,n,s)?String(c):null},XK=(e,t,n,s,r,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=r?.[Number(i)];if(d)return n==="horizontal"?{x:d.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:d.coordinate}}},ZK=(e,t,n,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var r;if(n==="hover"?r=e.itemInteraction.hover.graphicalItemId:r=e.itemInteraction.click.graphicalItemId,r==null&&s!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===r})},f0=e=>e.options.tooltipPayloadSearcher,yh=e=>e.tooltip;function cU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function dU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cU(Object(n),!0).forEach(function(s){_Le(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _Le(e,t,n){return(t=ALe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ALe(e){var t=TLe(e,"string");return typeof t=="symbol"?t:t+""}function TLe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kLe(e,t){return e??t}var JK=(e,t,n,s,r,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=n,h=[];return e.reduce((p,x)=>{var v,{dataDefinedOnItem:j,settings:b}=x,N=kLe(j,l),w=Array.isArray(N)?gQ(N,u,d):N,S=(v=b?.dataKey)!==null&&v!==void 0?v:s,_=b?.nameKey,k;if(s&&Array.isArray(w)&&!Array.isArray(w[0])&&o==="axis"?k=NY(w,s,r):k=i(w,t,c,_),Array.isArray(k))k.forEach(A=>{var E=dU(dU({},b),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});p.push(Kz({tooltipEntrySettings:E,dataKey:A.dataKey,payload:A.payload,value:qa(A.payload,A.dataKey),name:A.name}))});else{var T;p.push(Kz({tooltipEntrySettings:b,dataKey:S,payload:k,value:qa(k,S),name:(T=qa(k,_))!==null&&T!==void 0?T:b?.name}))}return p},h)}},vD=ut([ds,wa,vK,GP,cs],PK),ELe=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),LLe=ut([cs,gh],JP),bh=ut([ELe,ds,LLe],eD,{memoizeOptions:{resultEqualityCheck:s1}}),PLe=ut([bh],e=>e.filter(a1)),DLe=ut([bh],tD,{memoizeOptions:{resultEqualityCheck:s1}}),vh=ut([DLe,oc],aD),OLe=ut([PLe,oc,ds],xK),wD=ut([vh,ds,bh],sD),eX=ut([ds],rD),MLe=ut([ds],e=>e.allowDataOverflow),tX=ut([eX,MLe],YQ),ILe=ut([bh],e=>e.filter(a1)),$Le=ut([OLe,ILe,o0,dK],CK),RLe=ut([$Le,oc,cs,tX],SK),zLe=ut([bh],jK),FLe=ut([vh,ds,zLe,o1,cs],lD,{memoizeOptions:{resultEqualityCheck:n1}}),ULe=ut([_K,cs,gh],ph),BLe=ut([ULe,cs],kK),HLe=ut([AK,cs,gh],ph),qLe=ut([HLe,cs],EK),GLe=ut([TK,cs,gh],ph),WLe=ut([GLe,cs],LK),VLe=ut([BLe,WLe,qLe],kw),YLe=ut([ds,eX,tX,RLe,FLe,VLe,wa,cs],cD),h0=ut([ds,wa,vh,wD,o0,cs,YLe],dD),QLe=ut([h0,ds,vD],fD),KLe=ut([ds,h0,QLe,cs],gD),aX=e=>{var t=cs(e),n=gh(e),s=!1;return m0(e,t,n,s)},nX=ut([ds,aX],e1),sX=ut([ds,vD,KLe,nX],mD),XLe=ut([wa,wD,ds,cs],zK),ZLe=ut([wa,wD,ds,cs],FK),JLe=(e,t,n,s,r,i,o,l)=>{if(t){var{type:c}=t,u=Ed(e,l);if(s){var d=n==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,h=c==="category"&&s.bandwidth?s.bandwidth()/d:0;return h=l==="angleAxis"&&r!=null&&r?.length>=2?xs(r[0]-r[1])*2*h:h,u&&o?o.map((p,x)=>({coordinate:s(p)+h,value:p,index:x,offset:h})):s.domain().map((p,x)=>({coordinate:s(p)+h,value:i?i[p]:p,index:x,offset:h}))}}},dc=ut([wa,ds,vD,sX,aX,XLe,ZLe,cs],JLe),jD=ut([BK,HK,lLe],(e,t,n)=>qK(n.shared,e,t)),rX=e=>e.tooltip.settings.trigger,ND=e=>e.tooltip.settings.defaultIndex,g0=ut([yh,jD,rX,ND],KK),xd=ut([g0,vh,u0,h0],bD),iX=ut([dc,xd],GK),CD=ut([g0],e=>{if(e)return e.dataKey}),e4e=ut([g0],e=>{if(e)return e.graphicalItemId}),oX=ut([yh,jD,rX,ND],ZK),t4e=ut([rc,ic,wa,ls,dc,ND,oX,f0],XK),a4e=ut([g0,t4e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),n4e=ut([g0],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),s4e=ut([oX,xd,oc,u0,iX,f0,jD],JK),r4e=ut([s4e],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function uU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function mU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uU(Object(n),!0).forEach(function(s){i4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function i4e(e,t,n){return(t=o4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o4e(e){var t=l4e(e,"string");return typeof t=="symbol"?t:t+""}function l4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c4e=()=>Bt(ds),d4e=()=>{var e=c4e(),t=Bt(dc),n=Bt(sX);return Bf(!e||!n?void 0:mU(mU({},e),{},{scale:n}),t)};function fU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fU(Object(n),!0).forEach(function(s){u4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function u4e(e,t,n){return(t=m4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m4e(e){var t=f4e(e,"string");return typeof t=="symbol"?t:t+""}function f4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h4e=(e,t,n,s)=>{var r=t.find(i=>i&&i.index===n);if(r){if(e==="horizontal")return{x:r.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:r.coordinate}}return{x:0,y:0}},g4e=(e,t,n,s)=>{var r=t.find(u=>u&&u.index===n);if(r){if(e==="centric"){var i=r.coordinate,{radius:o}=s;return Jm(Jm(Jm({},s),qn(s.cx,s.cy,o,i)),{},{angle:i,radius:o})}var l=r.coordinate,{angle:c}=s;return Jm(Jm(Jm({},s),qn(s.cx,s.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function p4e(e,t){var{chartX:n,chartY:s}=e;return n>=t.left&&n<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var lX=(e,t,n,s,r)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(s==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,h,p,x=l>0?(c=n[l-1])===null||c===void 0?void 0:c.coordinate:(u=n[o-1])===null||u===void 0?void 0:u.coordinate,v=(d=n[l])===null||d===void 0?void 0:d.coordinate,j=l>=o-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(p=n[l+1])===null||p===void 0?void 0:p.coordinate,b=void 0;if(!(x==null||v==null||j==null))if(xs(v-x)!==xs(j-v)){var N=[];if(xs(j-v)===xs(r[1]-r[0])){b=j;var w=v+r[1]-r[0];N[0]=Math.min(w,(w+x)/2),N[1]=Math.max(w,(w+x)/2)}else{b=x;var S=j+r[1]-r[0];N[0]=Math.min(v,(S+v)/2),N[1]=Math.max(v,(S+v)/2)}var _=[Math.min(v,(b+v)/2),Math.max(v,(b+v)/2)];if(e>_[0]&&e<=_[1]||e>=N[0]&&e<=N[1]){var k;return(k=n[l])===null||k===void 0?void 0:k.index}}else{var T=Math.min(x,j),A=Math.max(x,j);if(e>(T+v)/2&&e<=(A+v)/2){var E;return(E=n[l])===null||E===void 0?void 0:E.index}}}else if(t)for(var M=0;M<o;M++){var O=t[M];if(O!=null){var I=t[M+1],D=t[M-1];if(M===0&&I!=null&&e<=(O.coordinate+I.coordinate)/2||M===o-1&&D!=null&&e>(O.coordinate+D.coordinate)/2||M>0&&M<o-1&&D!=null&&I!=null&&e>(O.coordinate+D.coordinate)/2&&e<=(O.coordinate+I.coordinate)/2)return O.index}}return-1},x4e=()=>Bt(GP),SD=(e,t)=>t,cX=(e,t,n)=>n,_D=(e,t,n,s)=>s,y4e=ut(dc,e=>ON(e,t=>t.coordinate)),AD=ut([yh,SD,cX,_D],KK),TD=ut([AD,vh,u0,h0],bD),b4e=(e,t,n)=>{if(t!=null){var s=yh(e);return t==="axis"?n==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:n==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},dX=ut([yh,SD,cX,_D],ZK),Ew=ut([rc,ic,wa,ls,dc,_D,dX,f0],XK),v4e=ut([AD,Ew],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),uX=ut([dc,TD],GK),w4e=ut([dX,TD,oc,u0,uX,f0,SD],JK),j4e=ut([AD,TD],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),N4e=(e,t,n,s,r,i,o)=>{if(!(!e||!n||!s||!r)&&p4e(e,o)){var l=xAe(e,t),c=lX(l,i,r,n,s),u=h4e(t,r,c,e);return{activeIndex:String(c),activeCoordinate:u}}},C4e=(e,t,n,s,r,i,o)=>{if(!(!e||!s||!r||!i||!n)){var l=Oke(e,n);if(l){var c=yAe(l,t),u=lX(c,o,i,s,r),d=g4e(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},S4e=(e,t,n,s,r,i,o,l)=>{if(!(!e||!t||!s||!r||!i))return t==="horizontal"||t==="vertical"?N4e(e,t,s,r,i,o,l):C4e(e,t,n,s,r,i,o)},_4e=ut(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var s=e[t];if(s!=null)return n?s.panoramaElement:s.element}}),A4e=ut(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Gn)),n=Array.from(new Set(t));return n.sort((s,r)=>s-r)},{memoizeOptions:{resultEqualityCheck:cEe}});function hU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function gU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hU(Object(n),!0).forEach(function(s){T4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function T4e(e,t,n){return(t=k4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k4e(e){var t=E4e(e,"string");return typeof t=="symbol"?t:t+""}function E4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L4e={},P4e={zIndexMap:Object.values(Gn).reduce((e,t)=>gU(gU({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),L4e)},D4e=new Set(Object.values(Gn));function O4e(e){return D4e.has(e)}var mX=Nr({name:"zIndex",initialState:P4e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:cn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!O4e(n)&&delete e.zIndexMap[n])},prepare:cn()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:s,isPanorama:r}=t.payload;e.zIndexMap[n]?r?e.zIndexMap[n].panoramaElement=s:e.zIndexMap[n].element=s:e.zIndexMap[n]={consumers:0,element:r?void 0:s,panoramaElement:r?s:void 0}},prepare:cn()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:cn()}}}),{registerZIndexPortal:M4e,unregisterZIndexPortal:I4e,registerZIndexPortalElement:$4e,unregisterZIndexPortalElement:R4e}=mX.actions,z4e=mX.reducer;function Cr(e){var{zIndex:t,children:n}=e,s=QAe(),r=s&&t!==void 0&&t!==0,i=Bs(),o=Ja();f.useLayoutEffect(()=>r?(o(M4e({zIndex:t})),()=>{o(I4e({zIndex:t}))}):Zx,[o,t,r]);var l=Bt(c=>_4e(c,t,i));return r?l?Gi.createPortal(n,l):null:n}function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},LE.apply(null,arguments)}function pU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function hb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pU(Object(n),!0).forEach(function(s){F4e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function F4e(e,t,n){return(t=U4e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U4e(e){var t=B4e(e,"string");return typeof t=="symbol"?t:t+""}function B4e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H4e(e){var{cursor:t,cursorComp:n,cursorProps:s}=e;return f.isValidElement(t)?f.cloneElement(t,s):f.createElement(n,s)}function q4e(e){var t,{coordinate:n,payload:s,index:r,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,h=n,p=s,x=r;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var v,j,b;if(d==="ScatterChart")v=h,j=YTe,b=Gn.cursorLine;else if(d==="BarChart")v=QTe(l,h,i,o),j=BQ,b=Gn.cursorRectangle;else if(l==="radial"&&SY(h)){var{cx:N,cy:w,radius:S,startAngle:_,endAngle:k}=qQ(h);v={cx:N,cy:w,startAngle:_,endAngle:k,innerRadius:S,outerRadius:S},j=WQ,b=Gn.cursorLine}else v={points:Rke(l,h,i)},j=UP,b=Gn.cursorLine;var T=typeof c=="object"&&"className"in c?c.className:void 0,A=hb(hb(hb(hb({stroke:"#ccc",pointerEvents:"none"},i),v),Ru(c)),{},{payload:p,payloadIndex:x,className:It("recharts-tooltip-cursor",T)});return f.createElement(Cr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},f.createElement(H4e,{cursor:c,cursorComp:j,cursorProps:A}))}function G4e(e){var t=d4e(),n=SQ(),s=mh(),r=x4e();return t==null||n==null||s==null||r==null?null:f.createElement(q4e,LE({},e,{offset:n,layout:s,tooltipAxisBandSize:t,chartName:r}))}var fX=f.createContext(null),W4e=()=>f.useContext(fX),Y_={exports:{}},xU;function V4e(){return xU||(xU=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function r(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var x=new r(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],x]:c._events[v].push(x):(c._events[v]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,x=h.length,v=new Array(x);p<x;p++)v[p]=h[p].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,p,x,v){var j=n?n+u:u;if(!this._events[j])return!1;var b=this._events[j],N=arguments.length,w,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,h),!0;case 4:return b.fn.call(b.context,d,h,p),!0;case 5:return b.fn.call(b.context,d,h,p,x),!0;case 6:return b.fn.call(b.context,d,h,p,x,v),!0}for(S=1,w=new Array(N-1);S<N;S++)w[S-1]=arguments[S];b.fn.apply(b.context,w)}else{var _=b.length,k;for(S=0;S<_;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),N){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,h);break;case 4:b[S].fn.call(b[S].context,d,h,p);break;default:if(!w)for(k=1,w=new Array(N-1);k<N;k++)w[k-1]=arguments[k];b[S].fn.apply(b[S].context,w)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,p){var x=n?n+u:u;if(!this._events[x])return this;if(!d)return o(this,x),this;var v=this._events[x];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&o(this,x);else{for(var j=0,b=[],N=v.length;j<N;j++)(v[j].fn!==d||p&&!v[j].once||h&&v[j].context!==h)&&b.push(v[j]);b.length?this._events[x]=b.length===1?b[0]:b:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(Y_)),Y_.exports}var Y4e=V4e();const Q4e=eo(Y4e);var qp=new Q4e,PE="recharts.syncEvent.tooltip",yU="recharts.syncEvent.brush";function kD(e,t){if(t){var n=Number.parseInt(t,10);if(!Zi(n))return e?.[n]}}var K4e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},hX=Nr({name:"options",initialState:K4e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),X4e=hX.reducer,{createEventEmitter:Z4e}=hX.actions;function J4e(e){return e.tooltip.syncInteraction}var ePe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},gX=Nr({name:"chartData",initialState:ePe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:s}=t.payload;n!=null&&(e.dataStartIndex=n),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:bU,setDataStartEndIndexes:tPe,setComputedData:UVe}=gX.actions,aPe=gX.reducer,nPe=["x","y"];function vU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vU(Object(n),!0).forEach(function(s){sPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sPe(e,t,n){return(t=rPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rPe(e){var t=iPe(e,"string");return typeof t=="symbol"?t:t+""}function iPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oPe(e,t){if(e==null)return{};var n,s,r=lPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function cPe(){var e=Bt(WP),t=Bt(VP),n=Ja(),s=Bt(uK),r=Bt(dc),i=mh(),o=VN(),l=Bt(c=>c.rootProps.className);f.useEffect(()=>{if(e==null)return Zx;var c=(u,d,h)=>{if(t!==h&&e===u){if(s==="index"){var p;if(o&&d!==null&&d!==void 0&&(p=d.payload)!==null&&p!==void 0&&p.coordinate&&d.payload.sourceViewBox){var x=d.payload.coordinate,{x:v,y:j}=x,b=oPe(x,nPe),{x:N,y:w,width:S,height:_}=d.payload.sourceViewBox,k=ef(ef({},b),{},{x:o.x+(S?(v-N)/S:0)*o.width,y:o.y+(_?(j-w)/_:0)*o.height});n(ef(ef({},d),{},{payload:ef(ef({},d.payload),{},{coordinate:k})}))}else n(d);return}if(r!=null){var T;if(typeof s=="function"){var A={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=s(r,A);T=r[E]}else s==="value"&&(T=r.find(Q=>String(Q.value)===d.payload.label));var{coordinate:M}=d.payload;if(T==null||d.payload.active===!1||M==null||o==null){n(kE({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:O,y:I}=M,D=Math.min(O,o.x+o.width),H=Math.min(I,o.y+o.height),W={x:i==="horizontal"?T.coordinate:D,y:i==="horizontal"?H:T.coordinate},z=kE({active:d.payload.active,coordinate:W,dataKey:d.payload.dataKey,index:String(T.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});n(z)}}};return qp.on(PE,c),()=>{qp.off(PE,c)}},[l,n,t,e,s,r,i,o])}function dPe(){var e=Bt(WP),t=Bt(VP),n=Ja();f.useEffect(()=>{if(e==null)return Zx;var s=(r,i,o)=>{t!==o&&e===r&&n(tPe(i))};return qp.on(yU,s),()=>{qp.off(yU,s)}},[n,t,e])}function uPe(){var e=Ja();f.useEffect(()=>{e(Z4e())},[e]),cPe(),dPe()}function mPe(e,t,n,s,r,i){var o=Bt(x=>b4e(x,e,t)),l=Bt(VP),c=Bt(WP),u=Bt(uK),d=Bt(J4e),h=d?.active,p=VN();f.useEffect(()=>{if(!h&&c!=null&&l!=null){var x=kE({active:i,coordinate:n,dataKey:o,index:r,label:typeof s=="number"?String(s):s,sourceViewBox:p,graphicalItemId:void 0});qp.emit(PE,c,x,l)}},[h,n,o,r,s,l,c,u,i,p])}function wU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function jU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wU(Object(n),!0).forEach(function(s){fPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function fPe(e,t,n){return(t=hPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hPe(e){var t=gPe(e,"string");return typeof t=="symbol"?t:t+""}function gPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pPe(e){return e.dataKey}function xPe(e,t){return f.isValidElement(e)?f.cloneElement(e,t):typeof e=="function"?f.createElement(e,t):f.createElement(ATe,t)}var NU=[],yPe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Q_(e){var t,n,s=Qn(e,yPe),{active:r,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:p,position:x,reverseDirection:v,useTranslate3d:j,wrapperStyle:b,cursor:N,shared:w,trigger:S,defaultIndex:_,portal:k,axisId:T}=s,A=Ja(),E=typeof _=="number"?String(_):_;f.useEffect(()=>{A(fLe({shared:w,trigger:S,axisId:T,active:r,defaultIndex:E}))},[A,w,S,T,r,E]);var M=VN(),O=$Q(),I=oLe(w),{activeIndex:D,isActive:H}=(t=Bt(oe=>j4e(oe,I,S,E)))!==null&&t!==void 0?t:{},W=Bt(oe=>w4e(oe,I,S,E)),z=Bt(oe=>uX(oe,I,S,E)),Q=Bt(oe=>v4e(oe,I,S,E)),J=W,Y=W4e(),re=(n=r??H)!==null&&n!==void 0?n:!1,[we,Z]=zY([J,re]),ne=I==="axis"?z:void 0;mPe(I,S,Q,ne,D,re);var pe=k??Y;if(pe==null||M==null||I==null)return null;var Ne=J??NU;re||(Ne=NU),u&&Ne.length&&(Ne=MY(Ne.filter(oe=>oe.value!=null&&(oe.hide!==!0||s.includeHidden)),p,pPe));var de=Ne.length>0,be=f.createElement(OTe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:d,active:re,coordinate:Q,hasPayload:de,offset:h,position:x,reverseDirection:v,useTranslate3d:j,viewBox:M,wrapperStyle:b,lastBoundingBox:we,innerRef:Z,hasPortalFromProps:!!k},xPe(c,jU(jU({},s),{},{payload:Ne,label:ne,active:re,activeIndex:D,coordinate:Q,accessibilityLayer:O})));return f.createElement(f.Fragment,null,Gi.createPortal(be,pe),re&&f.createElement(G4e,{cursor:N,tooltipEventType:I,coordinate:Q,payload:Ne,index:D}))}var u1=e=>null;u1.displayName="Cell";function bPe(e,t,n){return(t=vPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vPe(e){var t=wPe(e,"string");return typeof t=="symbol"?t:t+""}function wPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jPe{constructor(t){bPe(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function CU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function NPe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CU(Object(n),!0).forEach(function(s){CPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function CPe(e,t,n){return(t=SPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SPe(e){var t=_Pe(e,"string");return typeof t=="symbol"?t:t+""}function _Pe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var APe={cacheSize:2e3,enableCache:!0},pX=NPe({},APe),SU=new jPe(pX.cacheSize),TPe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_U="recharts_measurement_span";function kPe(e,t){var n=t.fontSize||"",s=t.fontFamily||"",r=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(s,"|").concat(r,"|").concat(i,"|").concat(o,"|").concat(l)}var AU=(e,t)=>{try{var n=document.getElementById(_U);n||(n=document.createElement("span"),n.setAttribute("id",_U),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,TPe,t),n.textContent="".concat(e);var s=n.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},ip=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ZN.isSsr)return{width:0,height:0};if(!pX.enableCache)return AU(t,n);var s=kPe(t,n),r=SU.get(s);if(r)return r;var i=AU(t,n);return SU.set(s,i),i},xX;function EPe(e,t,n){return(t=LPe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LPe(e){var t=PPe(e,"string");return typeof t=="symbol"?t:t+""}function PPe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kU=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DPe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OPe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,MPe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},IPe=["cm","mm","pt","pc","in","Q","px"];function $Pe(e){return IPe.includes(e)}var ff="NaN";function RPe(e,t){return e*MPe[t]}class As{static parse(t){var n,[,s,r]=(n=OPe.exec(t))!==null&&n!==void 0?n:[];return s==null?As.NaN:new As(parseFloat(s),r??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Zi(t)&&(this.unit=""),n!==""&&!DPe.test(n)&&(this.num=NaN,this.unit=""),$Pe(n)&&(this.num=RPe(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new As(NaN,""):new As(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new As(NaN,""):new As(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new As(NaN,""):new As(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new As(NaN,""):new As(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Zi(this.num)}}xX=As;EPe(As,"NaN",new xX(NaN,""));function yX(e){if(e==null||e.includes(ff))return ff;for(var t=e;t.includes("*")||t.includes("/");){var n,[,s,r,i]=(n=TU.exec(t))!==null&&n!==void 0?n:[],o=As.parse(s??""),l=As.parse(i??""),c=r==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return ff;t=t.replace(TU,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,h,p]=(u=kU.exec(t))!==null&&u!==void 0?u:[],x=As.parse(d??""),v=As.parse(p??""),j=h==="+"?x.add(v):x.subtract(v);if(j.isNaN())return ff;t=t.replace(kU,j.toString())}return t}var EU=/\(([^()]*)\)/;function zPe(e){for(var t=e,n;(n=EU.exec(t))!=null;){var[,s]=n;t=t.replace(EU,yX(s))}return t}function FPe(e){var t=e.replace(/\s+/g,"");return t=zPe(t),t=yX(t),t}function UPe(e){try{return FPe(e)}catch{return ff}}function K_(e){var t=UPe(e.slice(5,-1));return t===ff?"":t}var BPe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],HPe=["dx","dy","angle","className","breakAll"];function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},DE.apply(null,arguments)}function LU(e,t){if(e==null)return{};var n,s,r=qPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var bX=/[ \f\n\r\t\v\u2028\u2029]+/,vX=e=>{var{children:t,breakAll:n,style:s}=e;try{var r=[];fn(t)||(n?r=t.toString().split(""):r=t.toString().split(bX));var i=r.map(l=>({word:l,width:ip(l,s).width})),o=n?0:ip("",s).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function GPe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var wX=(e,t,n,s)=>e.reduce((r,i)=>{var{word:o,width:l}=i,c=r[r.length-1];if(c&&l!=null&&(t==null||s||c.width+l+n<Number(t)))c.words.push(o),c.width+=l+n;else{var u={words:[o],width:l};r.push(u)}return r},[]),jX=e=>e.reduce((t,n)=>t.width>n.width?t:n),WPe="",PU=(e,t,n,s,r,i,o,l)=>{var c=e.slice(0,t),u=vX({breakAll:n,style:s,children:c+WPe});if(!u)return[!1,[]];var d=wX(u.wordsWithComputedWidth,i,o,l),h=d.length>r||jX(d).width>Number(i);return[h,d]},VPe=(e,t,n,s,r)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=zt(i),d=String(o),h=wX(t,s,n,r);if(!u||r)return h;var p=h.length>i||jX(h).width>Number(s);if(!p)return h;for(var x=0,v=d.length-1,j=0,b;x<=v&&j<=d.length-1;){var N=Math.floor((x+v)/2),w=N-1,[S,_]=PU(d,w,c,l,i,s,n,r),[k]=PU(d,N,c,l,i,s,n,r);if(!S&&!k&&(x=N+1),S&&k&&(v=N-1),!S&&k){b=_;break}j++}return b||h},DU=e=>{var t=fn(e)?[]:e.toString().split(bX);return[{words:t,width:void 0}]},YPe=e=>{var{width:t,scaleToFit:n,children:s,style:r,breakAll:i,maxLines:o}=e;if((t||n)&&!ZN.isSsr){var l,c,u=vX({breakAll:i,children:s,style:r});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return DU(s);return VPe({breakAll:i,children:s,maxLines:o,style:r},l,c,t,!!n)}return DU(s)},NX="#808080",QPe={angle:0,breakAll:!1,capHeight:"0.71em",fill:NX,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},m1=f.forwardRef((e,t)=>{var n=Qn(e,QPe),{x:s,y:r,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=n,h=LU(n,BPe),p=f.useMemo(()=>YPe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:x,dy:v,angle:j,className:b,breakAll:N}=h,w=LU(h,HPe);if(!Bo(s)||!Bo(r)||p.length===0)return null;var S=Number(s)+(zt(x)?x:0),_=Number(r)+(zt(v)?v:0);if(!xn(S)||!xn(_))return null;var k;switch(d){case"start":k=K_("calc(".concat(o,")"));break;case"middle":k=K_("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:k=K_("calc(".concat(p.length-1," * -").concat(i,")"));break}var T=[];if(c){var A=p[0].width,{width:E}=h;T.push("scale(".concat(zt(E)&&zt(A)?E/A:1,")"))}return j&&T.push("rotate(".concat(j,", ").concat(S,", ").concat(_,")")),T.length&&(w.transform=T.join(" ")),f.createElement("text",DE({},Ys(w),{ref:t,x:S,y:_,className:It("recharts-text",b),textAnchor:u,fill:l.includes("url")?NX:l}),p.map((M,O)=>{var I=M.words.join(N?"":" ");return f.createElement("tspan",{x:S,dy:O===0?k:i,key:"".concat(I,"-").concat(O)},I)}))});m1.displayName="Text";var KPe=["labelRef"],XPe=["content"];function OU(e,t){if(e==null)return{};var n,s,r=ZPe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZPe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function MU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MU(Object(n),!0).forEach(function(s){JPe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JPe(e,t,n){return(t=eDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eDe(e){var t=tDe(e,"string");return typeof t=="symbol"?t:t+""}function tDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kl.apply(null,arguments)}var CX=f.createContext(null),aDe=e=>{var{x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:o,children:l}=e,c=f.useMemo(()=>({x:t,y:n,upperWidth:s,lowerWidth:r,width:i,height:o}),[t,n,s,r,i,o]);return f.createElement(CX.Provider,{value:c},l)},SX=()=>{var e=f.useContext(CX),t=VN();return e||CQ(t)},nDe=f.createContext(null),sDe=()=>{var e=f.useContext(nDe),t=Bt(pK);return e||t},rDe=e=>{var{value:t,formatter:n}=e,s=fn(e.children)?t:e.children;return typeof n=="function"?n(s):s},ED=e=>e!=null&&typeof e=="function",iDe=(e,t)=>{var n=xs(t-e),s=Math.min(Math.abs(t-e),360);return n*s},oDe=(e,t,n,s,r)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:p,clockWise:x}=r,v=(u+d)/2,j=iDe(h,p),b=j>=0?1:-1,N,w;switch(t){case"insideStart":N=h+b*i,w=x;break;case"insideEnd":N=p-b*i,w=!x;break;case"end":N=p+b*i,w=x;break;default:throw new Error("Unsupported position ".concat(t))}w=j<=0?w:!w;var S=qn(l,c,v,N),_=qn(l,c,v,N+(w?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),T=fn(e.id)?Mp("recharts-radial-line-"):e.id;return f.createElement("text",kl({},s,{dominantBaseline:"central",className:It("recharts-radial-bar-label",o)}),f.createElement("defs",null,f.createElement("path",{id:T,d:k})),f.createElement("textPath",{xlinkHref:"#".concat(T)},n))},lDe=(e,t,n)=>{var{cx:s,cy:r,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(n==="outside"){var{x:d,y:h}=qn(s,r,o+t,u);return{x:d,y:h,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:r,textAnchor:"middle",verticalAnchor:"end"};var p=(i+o)/2,{x,y:v}=qn(s,r,p,u);return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},OE=e=>"cx"in e&&zt(e.cx),cDe=(e,t)=>{var{parentViewBox:n,offset:s,position:r}=e,i;n!=null&&!OE(n)&&(i=n);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,h=o,p=o+(c-u)/2,x=(h+p)/2,v=(c+u)/2,j=h+c/2,b=d>=0?1:-1,N=b*s,w=b>0?"end":"start",S=b>0?"start":"end",_=c>=0?1:-1,k=_*s,T=_>0?"end":"start",A=_>0?"start":"end";if(r==="top"){var E={x:h+c/2,y:l-N,textAnchor:"middle",verticalAnchor:w};return Dn(Dn({},E),i?{height:Math.max(l-i.y,0),width:c}:{})}if(r==="bottom"){var M={x:p+u/2,y:l+d+N,textAnchor:"middle",verticalAnchor:S};return Dn(Dn({},M),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(r==="left"){var O={x:x-k,y:l+d/2,textAnchor:T,verticalAnchor:"middle"};return Dn(Dn({},O),i?{width:Math.max(O.x-i.x,0),height:d}:{})}if(r==="right"){var I={x:x+v+k,y:l+d/2,textAnchor:A,verticalAnchor:"middle"};return Dn(Dn({},I),i?{width:Math.max(i.x+i.width-I.x,0),height:d}:{})}var D=i?{width:v,height:d}:{};return r==="insideLeft"?Dn({x:x+k,y:l+d/2,textAnchor:A,verticalAnchor:"middle"},D):r==="insideRight"?Dn({x:x+v-k,y:l+d/2,textAnchor:T,verticalAnchor:"middle"},D):r==="insideTop"?Dn({x:h+c/2,y:l+N,textAnchor:"middle",verticalAnchor:S},D):r==="insideBottom"?Dn({x:p+u/2,y:l+d-N,textAnchor:"middle",verticalAnchor:w},D):r==="insideTopLeft"?Dn({x:h+k,y:l+N,textAnchor:A,verticalAnchor:S},D):r==="insideTopRight"?Dn({x:h+c-k,y:l+N,textAnchor:T,verticalAnchor:S},D):r==="insideBottomLeft"?Dn({x:p+k,y:l+d-N,textAnchor:A,verticalAnchor:w},D):r==="insideBottomRight"?Dn({x:p+u-k,y:l+d-N,textAnchor:T,verticalAnchor:w},D):r&&typeof r=="object"&&(zt(r.x)||Yl(r.x))&&(zt(r.y)||Yl(r.y))?Dn({x:o+Rs(r.x,v),y:l+Rs(r.y,d),textAnchor:"end",verticalAnchor:"end"},D):Dn({x:j,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},dDe={angle:0,offset:5,zIndex:Gn.label,position:"middle",textBreakAll:!1};function Vc(e){var t=Qn(e,dDe),{viewBox:n,position:s,value:r,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=sDe(),h=SX(),p=s==="center"?h:d??h,x,v,j;if(n==null?x=p:OE(n)?x=n:x=CQ(n),!x||fn(r)&&fn(i)&&!f.isValidElement(o)&&typeof o!="function")return null;var b=Dn(Dn({},t),{},{viewBox:x});if(f.isValidElement(o)){var{labelRef:N}=b,w=OU(b,KPe);return f.cloneElement(o,w)}if(typeof o=="function"){var{content:S}=b,_=OU(b,XPe);if(v=f.createElement(o,_),f.isValidElement(v))return v}else v=rDe(t);var k=Ys(t);if(OE(x)){if(s==="insideStart"||s==="insideEnd"||s==="end")return oDe(t,s,v,k,x);j=lDe(x,t.offset,t.position)}else j=cDe(t,x);return f.createElement(Cr,{zIndex:t.zIndex},f.createElement(m1,kl({ref:u,className:It("recharts-label",l)},k,j,{textAnchor:GPe(k.textAnchor)?k.textAnchor:j.textAnchor,breakAll:c}),v))}Vc.displayName="Label";var uDe=(e,t,n)=>{if(!e)return null;var s={viewBox:t,labelRef:n};return e===!0?f.createElement(Vc,kl({key:"label-implicit"},s)):Bo(e)?f.createElement(Vc,kl({key:"label-implicit",value:e},s)):f.isValidElement(e)?e.type===Vc?f.cloneElement(e,Dn({key:"label-implicit"},s)):f.createElement(Vc,kl({key:"label-implicit",content:e},s)):ED(e)?f.createElement(Vc,kl({key:"label-implicit",content:e},s)):e&&typeof e=="object"?f.createElement(Vc,kl({},e,{key:"label-implicit"},s)):null};function mDe(e){var{label:t,labelRef:n}=e,s=SX();return uDe(t,s,n)||null}var X_={},Z_={},IU;function fDe(){return IU||(IU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Z_)),Z_}var J_={},$U;function hDe(){return $U||($U=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(J_)),J_}var RU;function gDe(){return RU||(RU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fDe(),n=hDe(),s=SP();function r(i){if(s.isArrayLike(i))return t.last(n.toArray(i))}e.last=r})(X_)),X_}var eA,zU;function pDe(){return zU||(zU=1,eA=gDe().last),eA}var xDe=pDe();const yDe=eo(xDe);var bDe=["valueAccessor"],vDe=["dataKey","clockWise","id","textBreakAll","zIndex"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Lw.apply(null,arguments)}function FU(e,t){if(e==null)return{};var n,s,r=wDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var jDe=e=>Array.isArray(e.value)?yDe(e.value):e.value,_X=f.createContext(void 0),AX=_X.Provider,TX=f.createContext(void 0),NDe=TX.Provider;function CDe(){return f.useContext(_X)}function SDe(){return f.useContext(TX)}function bv(e){var{valueAccessor:t=jDe}=e,n=FU(e,bDe),{dataKey:s,clockWise:r,id:i,textBreakAll:o,zIndex:l}=n,c=FU(n,vDe),u=CDe(),d=SDe(),h=u||d;return!h||!h.length?null:f.createElement(Cr,{zIndex:l??Gn.label},f.createElement(ys,{className:"recharts-label-list"},h.map((p,x)=>{var v,j=fn(s)?t(p,x):qa(p&&p.payload,s),b=fn(i)?{}:{id:"".concat(i,"-").concat(x)};return f.createElement(Vc,Lw({key:"label-".concat(x)},Ys(p),c,b,{fill:(v=n.fill)!==null&&v!==void 0?v:p.fill,parentViewBox:p.parentViewBox,value:j,textBreakAll:o,viewBox:p.viewBox,index:x,zIndex:0}))})))}bv.displayName="LabelList";function LD(e){var{label:t}=e;return t?t===!0?f.createElement(bv,{key:"labelList-implicit"}):f.isValidElement(t)||ED(t)?f.createElement(bv,{key:"labelList-implicit",content:t}):typeof t=="object"?f.createElement(bv,Lw({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ME.apply(null,arguments)}var kX=e=>{var{cx:t,cy:n,r:s,className:r}=e,i=It("recharts-dot",r);return zt(t)&&zt(n)&&zt(s)?f.createElement("circle",ME({},Br(e),CP(e),{className:i,cx:t,cy:n,r:s})):null},EX=e=>e.graphicalItems.polarItems,_De=ut([pn,l0],JP),f1=ut([EX,bn,_De],eD),ADe=ut([f1],tD),h1=ut([ADe,JN],aD),TDe=ut([h1,bn,f1],sD);ut([h1,bn,f1],(e,t,n)=>n.length>0?e.flatMap(s=>n.flatMap(r=>{var i,o=qa(s,(i=t.dataKey)!==null&&i!==void 0?i:r.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:qa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})));var UU=()=>{},kDe=ut([h1,bn,f1,o1,pn],lD),EDe=ut([bn,iD,oD,UU,kDe,UU,wa,pn],cD),LX=ut([bn,wa,h1,TDe,o0,pn,EDe],dD),LDe=ut([LX,bn,xh],fD);ut([bn,LX,LDe,pn],gD);var PDe={radiusAxis:{},angleAxis:{}},PX=Nr({name:"polarAxis",initialState:PDe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:BVe,removeRadiusAxis:HVe,addAngleAxis:qVe,removeAngleAxis:GVe}=PX.actions,DDe=PX.reducer;function BU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function HU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BU(Object(n),!0).forEach(function(s){ODe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ODe(e,t,n){return(t=MDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MDe(e){var t=IDe(e,"string");return typeof t=="symbol"?t:t+""}function IDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $De=(e,t)=>t,PD=ut([EX,$De],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),RDe=[],DD=(e,t,n)=>n?.length===0?RDe:n,DX=ut([JN,PD,DD],(e,t,n)=>{var{chartData:s}=e;if(t!=null){var r;if(t?.data!=null&&t.data.length>0?r=t.data:r=s,(!r||!r.length)&&n!=null&&(r=n.map(i=>HU(HU({},t.presentationProps),i.props))),r!=null)return r}}),zDe=ut([DX,PD,DD],(e,t,n)=>{if(!(e==null||t==null))return e.map((s,r)=>{var i,o=qa(s,t.nameKey,t.name),l;return n!=null&&(i=n[r])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=n[r].props.fill:typeof s=="object"&&s!=null&&"fill"in s?l=s.fill:l=t.fill,{value:uh(o,t.dataKey),color:l,payload:s,type:t.legendType}})}),FDe=ut([DX,PD,DD,ls],(e,t,n,s)=>{if(!(t==null||e==null))return z3e({offset:s,pieSettings:t,displayedData:e,cells:n})}),qU=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",GU=null,tA=null,OX=e=>{if(e===GU&&Array.isArray(tA))return tA;var t=[];return f.Children.forEach(e,n=>{fn(n)||(SL.isFragment(n)?t=t.concat(OX(n.props.children)):t.push(n))}),tA=t,GU=e,t};function OD(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(r=>qU(r)):s=[qU(t)],OX(e).forEach(r=>{var i=zu(r,"type.displayName")||zu(r,"type.name");i&&s.indexOf(i)!==-1&&n.push(r)}),n}var MX=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,aA={},WU;function UDe(){return WU||(WU=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let s=n;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(n)===s}e.isPlainObject=t})(aA)),aA}var nA,VU;function BDe(){return VU||(VU=1,nA=UDe().isPlainObject),nA}var HDe=BDe();const qDe=eo(HDe);var YU,QU,KU,XU,ZU;function JU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function e7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JU(Object(n),!0).forEach(function(s){GDe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function GDe(e,t,n){return(t=WDe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WDe(e){var t=VDe(e,"string");return typeof t=="symbol"?t:t+""}function VDe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Pw.apply(null,arguments)}function Sg(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var t7=(e,t,n,s,r)=>{var i=n-s,o;return o=Cn(YU||(YU=Sg(["M ",",",""])),e,t),o+=Cn(QU||(QU=Sg(["L ",",",""])),e+n,t),o+=Cn(KU||(KU=Sg(["L ",",",""])),e+n-i/2,t+r),o+=Cn(XU||(XU=Sg(["L ",",",""])),e+n-i/2-s,t+r),o+=Cn(ZU||(ZU=Sg(["L ",","," Z"])),e,t),o},YDe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QDe=e=>{var t=Qn(e,YDe),{x:n,y:s,upperWidth:r,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,p=f.useRef(null),[x,v]=f.useState(-1),j=f.useRef(r),b=f.useRef(i),N=f.useRef(o),w=f.useRef(n),S=f.useRef(s),_=i0(e,"trapezoid-");if(f.useEffect(()=>{if(p.current&&p.current.getTotalLength)try{var W=p.current.getTotalLength();W&&v(W)}catch{}},[]),n!==+n||s!==+s||r!==+r||i!==+i||o!==+o||r===0&&i===0||o===0)return null;var k=It("recharts-trapezoid",l);if(!h)return f.createElement("g",null,f.createElement("path",Pw({},Ys(t),{className:k,d:t7(n,s,r,i,o)})));var T=j.current,A=b.current,E=N.current,M=w.current,O=S.current,I="0px ".concat(x===-1?1:x,"px"),D="".concat(x,"px 0px"),H=RQ(["strokeDasharray"],u,c);return f.createElement(r0,{animationId:_,key:_,canBegin:x>0,duration:u,easing:c,isActive:h,begin:d},W=>{var z=dn(T,r,W),Q=dn(A,i,W),J=dn(E,o,W),Y=dn(M,n,W),re=dn(O,s,W);p.current&&(j.current=z,b.current=Q,N.current=J,w.current=Y,S.current=re);var we=W>0?{transition:H,strokeDasharray:D}:{strokeDasharray:I};return f.createElement("path",Pw({},Ys(t),{className:k,d:t7(Y,re,z,Q,J),ref:p,style:e7(e7({},we),t.style)}))})},KDe=["option","shapeType","activeClassName"];function XDe(e,t){if(e==null)return{};var n,s,r=ZDe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ZDe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function a7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Dw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?a7(Object(n),!0).forEach(function(s){JDe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JDe(e,t,n){return(t=e3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e3e(e){var t=t3e(e,"string");return typeof t=="symbol"?t:t+""}function t3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a3e(e,t){return Dw(Dw({},t),e)}function n3e(e,t){return e==="symbols"}function n7(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return f.createElement(BQ,n);case"trapezoid":return f.createElement(QDe,n);case"sector":return f.createElement(WQ,n);case"symbols":if(n3e(t))return f.createElement(NP,n);break;case"curve":return f.createElement(UP,n);default:return null}}function s3e(e){return f.isValidElement(e)?e.props:e}function MD(e){var{option:t,shapeType:n,activeClassName:s="recharts-active-shape"}=e,r=XDe(e,KDe),i;if(f.isValidElement(t))i=f.cloneElement(t,Dw(Dw({},r),s3e(t)));else if(typeof t=="function")i=t(r,r.index);else if(qDe(t)&&typeof t!="boolean"){var o=a3e(t,r);i=f.createElement(n7,{shapeType:n,elementProps:o})}else{var l=r;i=f.createElement(n7,{shapeType:n,elementProps:l})}return r.isActive?f.createElement(ys,{className:s},i):i}var ID=(e,t,n)=>{var s=Ja();return(r,i)=>o=>{e?.(r,i,o),s(VK({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}},$D=e=>{var t=Ja();return(n,s)=>r=>{e?.(n,s,r),t(hLe())}},RD=(e,t,n)=>{var s=Ja();return(r,i)=>o=>{e?.(r,i,o),s(gLe({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition,activeGraphicalItemId:n}))}};function zD(e){var{tooltipEntrySettings:t}=e,n=Ja(),s=Bs(),r=f.useRef(null);return f.useLayoutEffect(()=>{s||(r.current===null?n(dLe(t)):r.current!==t&&n(uLe({prev:r.current,next:t})),r.current=t)},[t,n,s]),f.useLayoutEffect(()=>()=>{r.current&&(n(mLe(r.current)),r.current=null)},[n]),null}function IX(e){var{legendPayload:t}=e,n=Ja(),s=Bs(),r=f.useRef(null);return f.useLayoutEffect(()=>{s||(r.current===null?n(DQ(t)):r.current!==t&&n(OQ({prev:r.current,next:t})),r.current=t)},[n,s,t]),f.useLayoutEffect(()=>()=>{r.current&&(n(MQ(r.current)),r.current=null)},[n]),null}function r3e(e){var{legendPayload:t}=e,n=Ja(),s=Bt(wa),r=f.useRef(null);return f.useLayoutEffect(()=>{s!=="centric"&&s!=="radial"||(r.current===null?n(DQ(t)):r.current!==t&&n(OQ({prev:r.current,next:t})),r.current=t)},[n,s,t]),f.useLayoutEffect(()=>()=>{r.current&&(n(MQ(r.current)),r.current=null)},[n]),null}var sA,i3e=()=>{var[e]=f.useState(()=>Mp("uid-"));return e},o3e=(sA=Au.useId)!==null&&sA!==void 0?sA:i3e;function l3e(e,t){var n=o3e();return t||(e?"".concat(e,"-").concat(n):n)}var c3e=f.createContext(void 0),FD=e=>{var{id:t,type:n,children:s}=e,r=l3e("recharts-".concat(n),t);return f.createElement(c3e.Provider,{value:r},s(r))},d3e={cartesianItems:[],polarItems:[]},$X=Nr({name:"graphicalItems",initialState:d3e,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:cn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:s}=t.payload,r=Vi(e).cartesianItems.indexOf(n);r>-1&&(e.cartesianItems[r]=s)},prepare:cn()},removeCartesianGraphicalItem:{reducer(e,t){var n=Vi(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:cn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:cn()},removePolarGraphicalItem:{reducer(e,t){var n=Vi(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:cn()}}}),{addCartesianGraphicalItem:u3e,replaceCartesianGraphicalItem:m3e,removeCartesianGraphicalItem:f3e,addPolarGraphicalItem:h3e,removePolarGraphicalItem:g3e}=$X.actions,p3e=$X.reducer,x3e=e=>{var t=Ja(),n=f.useRef(null);return f.useLayoutEffect(()=>{n.current===null?t(u3e(e)):n.current!==e&&t(m3e({prev:n.current,next:e})),n.current=e},[t,e]),f.useLayoutEffect(()=>()=>{n.current&&(t(f3e(n.current)),n.current=null)},[t]),null},RX=f.memo(x3e);function y3e(e){var t=Ja();return f.useLayoutEffect(()=>(t(h3e(e)),()=>{t(g3e(e))}),[t,e]),null}var b3e=["key"],v3e=["onMouseEnter","onClick","onMouseLeave"],w3e=["id"],j3e=["id"];function s7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s7(Object(n),!0).forEach(function(s){N3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function N3e(e,t,n){return(t=C3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C3e(e){var t=S3e(e,"string");return typeof t=="symbol"?t:t+""}function S3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yd(){return yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},yd.apply(null,arguments)}function g1(e,t){if(e==null)return{};var n,s,r=_3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function A3e(e){var t=f.useMemo(()=>OD(e.children,u1),[e.children]),n=Bt(s=>zDe(s,e.id,t));return n==null?null:f.createElement(r3e,{legendPayload:n})}var T3e=f.memo(e=>{var{dataKey:t,nameKey:n,sectors:s,stroke:r,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:s.map(p=>p.tooltipPayload),positions:s.map(p=>p.tooltipPosition),settings:{stroke:r,strokeWidth:i,fill:o,dataKey:t,nameKey:n,name:uh(l,t),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return f.createElement(zD,{tooltipEntrySettings:h})}),k3e=(e,t)=>e>t?"start":e<t?"end":"middle",E3e=(e,t,n)=>Rs(typeof t=="function"?t(e):t,n,n*.8),L3e=(e,t,n)=>{var{top:s,left:r,width:i,height:o}=t,l=HQ(i,o),c=r+Rs(e.cx,i,i/2),u=s+Rs(e.cy,o,o/2),d=Rs(e.innerRadius,l,0),h=E3e(n,e.outerRadius,l),p=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:p}},P3e=(e,t)=>{var n=xs(t-e),s=Math.min(Math.abs(t-e),360);return n*s};function D3e(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var O3e=(e,t)=>{if(f.isValidElement(e))return f.cloneElement(e,t);if(typeof e=="function")return e(t);var n=It("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:s}=t,r=g1(t,b3e);return f.createElement(UP,yd({},r,{type:"linear",className:n}))},M3e=(e,t,n)=>{if(f.isValidElement(e))return f.cloneElement(e,t);var s=n;if(typeof e=="function"&&(s=e(t),f.isValidElement(s)))return s;var r=It("recharts-pie-label-text",D3e(e));return f.createElement(m1,yd({},t,{alignmentBaseline:"middle",className:r}),s)};function I3e(e){var{sectors:t,props:n,showLabels:s}=e,{label:r,labelLine:i,dataKey:o}=n;if(!s||!r||!t)return null;var l=Br(n),c=Ru(r),u=Ru(i),d=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,h=t.map((p,x)=>{var v=(p.startAngle+p.endAngle)/2,j=qn(p.cx,p.cy,p.outerRadius+d,v),b=Sn(Sn(Sn(Sn({},l),p),{},{stroke:"none"},c),{},{index:x,textAnchor:k3e(j.x,p.cx)},j),N=Sn(Sn(Sn(Sn({},l),p),{},{fill:"none",stroke:p.fill},u),{},{index:x,points:[qn(p.cx,p.cy,p.outerRadius,v),j],key:"line"});return f.createElement(Cr,{zIndex:Gn.label,key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},f.createElement(ys,null,i&&O3e(i,N),M3e(r,b,qa(p,o))))});return f.createElement(ys,{className:"recharts-pie-labels"},h)}function $3e(e){var{sectors:t,props:n,showLabels:s}=e,{label:r}=n;return typeof r=="object"&&r!=null&&"position"in r?f.createElement(LD,{label:r}):f.createElement(I3e,{sectors:t,props:n,showLabels:s})}function R3e(e){var{sectors:t,activeShape:n,inactiveShape:s,allOtherPieProps:r,shape:i,id:o}=e,l=Bt(xd),c=Bt(CD),u=Bt(e4e),{onMouseEnter:d,onClick:h,onMouseLeave:p}=r,x=g1(r,v3e),v=ID(d,r.dataKey,o),j=$D(p),b=RD(h,r.dataKey,o);return t==null||t.length===0?null:f.createElement(f.Fragment,null,t.map((N,w)=>{if(N?.startAngle===0&&N?.endAngle===0&&t.length!==1)return null;var S=u==null||u===o,_=String(w)===l&&(c==null||r.dataKey===c)&&S,k=l?s:null,T=n&&_?n:k,A=Sn(Sn({},N),{},{stroke:N.stroke,tabIndex:-1,[bQ]:w,[vQ]:o});return f.createElement(ys,yd({key:"sector-".concat(N?.startAngle,"-").concat(N?.endAngle,"-").concat(N.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},Jx(x,N,w),{onMouseEnter:v(N,w),onMouseLeave:j(N,w),onClick:b(N,w)}),f.createElement(MD,yd({option:i??T,index:w,shapeType:"sector",isActive:_},A)))}))}function z3e(e){var t,{pieSettings:n,displayedData:s,cells:r,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:h}=n,p=Math.abs(n.minAngle),x=P3e(l,c),v=Math.abs(x),j=s.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,b=s.filter(T=>qa(T,u,0)!==0).length,N=(v>=360?b:b-1)*j,w=v-b*p-N,S=s.reduce((T,A)=>{var E=qa(A,u,0);return T+(zt(E)?E:0)},0),_;if(S>0){var k;_=s.map((T,A)=>{var E=qa(T,u,0),M=qa(T,d,A),O=L3e(n,i,T),I=(zt(E)?E:0)/S,D,H=Sn(Sn({},T),r&&r[A]&&r[A].props);A?D=k.endAngle+xs(x)*j*(E!==0?1:0):D=l;var W=D+xs(x)*((E!==0?p:0)+I*w),z=(D+W)/2,Q=(O.innerRadius+O.outerRadius)/2,J=[{name:M,value:E,payload:H,dataKey:u,type:h,graphicalItemId:n.id}],Y=qn(O.cx,O.cy,Q,z);return k=Sn(Sn(Sn(Sn({},n.presentationProps),{},{percent:I,cornerRadius:typeof o=="string"?parseFloat(o):o,name:M,tooltipPayload:J,midAngle:z,middleRadius:Q,tooltipPosition:Y},H),O),{},{value:E,dataKey:u,startAngle:D,endAngle:W,payload:H,paddingAngle:xs(x)*j}),k})}return _}function F3e(e){var{showLabels:t,sectors:n,children:s}=e,r=f.useMemo(()=>!t||!n?[]:n.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[n,t]);return f.createElement(NDe,{value:t?r:void 0},s)}function U3e(e){var{props:t,previousSectorsRef:n,id:s}=e,{sectors:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:h,onAnimationEnd:p}=t,x=i0(t,"recharts-pie-"),v=n.current,[j,b]=f.useState(!1),N=f.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),w=f.useCallback(()=>{typeof h=="function"&&h(),b(!0)},[h]);return f.createElement(F3e,{showLabels:!j,sectors:r},f.createElement(r0,{animationId:x,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:w,onAnimationEnd:N,key:x},S=>{var _=[],k=r&&r[0],T=k?.startAngle;return r?.forEach((A,E)=>{var M=v&&v[E],O=E>0?zu(A,"paddingAngle",0):0;if(M){var I=dn(M.endAngle-M.startAngle,A.endAngle-A.startAngle,S),D=Sn(Sn({},A),{},{startAngle:T+O,endAngle:T+I+O});_.push(D),T=D.endAngle}else{var{endAngle:H,startAngle:W}=A,z=dn(0,H-W,S),Q=Sn(Sn({},A),{},{startAngle:T+O,endAngle:T+z+O});_.push(Q),T=Q.endAngle}}),n.current=_,f.createElement(ys,null,f.createElement(R3e,{sectors:_,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:s}))}),f.createElement($3e,{showLabels:!j,sectors:r,props:t}),t.children)}var B3e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Gn.area};function H3e(e){var{id:t}=e,n=g1(e,w3e),{hide:s,className:r,rootTabIndex:i}=e,o=f.useMemo(()=>OD(e.children,u1),[e.children]),l=Bt(d=>FDe(d,t,o)),c=f.useRef(null),u=It("recharts-pie",r);return s||l==null?(c.current=null,f.createElement(ys,{tabIndex:i,className:u})):f.createElement(Cr,{zIndex:e.zIndex},f.createElement(T3e,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),f.createElement(ys,{tabIndex:i,className:u},f.createElement(U3e,{props:Sn(Sn({},n),{},{sectors:l}),previousSectorsRef:c,id:t})))}function zX(e){var t=Qn(e,B3e),{id:n}=t,s=g1(t,j3e),r=Br(s);return f.createElement(FD,{id:n,type:"pie"},i=>f.createElement(f.Fragment,null,f.createElement(y3e,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:r,maxRadius:t.maxRadius}),f.createElement(A3e,yd({},s,{id:i})),f.createElement(H3e,yd({},s,{id:i}))))}zX.displayName="Pie";var q3e=["points"];function r7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function rA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?r7(Object(n),!0).forEach(function(s){G3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function G3e(e,t,n){return(t=W3e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W3e(e){var t=V3e(e,"string");return typeof t=="symbol"?t:t+""}function V3e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ow.apply(null,arguments)}function Y3e(e,t){if(e==null)return{};var n,s,r=Q3e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Q3e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function K3e(e){var{option:t,dotProps:n,className:s}=e;if(f.isValidElement(t))return f.cloneElement(t,n);if(typeof t=="function")return t(n);var r=It(s,typeof t!="boolean"?t.className:""),i=n??{},{points:o}=i,l=Y3e(i,q3e);return f.createElement(kX,Ow({},l,{className:r}))}function X3e(e,t){return e==null?!1:t?!0:e.length===1}function Z3e(e){var{points:t,dot:n,className:s,dotClassName:r,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:u=Gn.scatter}=e;if(!X3e(t,n))return null;var d=MX(n),h=zSe(n),p=t.map((v,j)=>{var b,N,w=rA(rA(rA({r:3},o),h),{},{index:j,cx:(b=v.x)!==null&&b!==void 0?b:void 0,cy:(N=v.y)!==null&&N!==void 0?N:void 0,dataKey:i,value:v.value,payload:v.payload,points:t});return f.createElement(K3e,{key:"dot-".concat(j),option:n,dotProps:w,className:r})}),x={};return l&&c!=null&&(x.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),f.createElement(Cr,{zIndex:u},f.createElement(ys,Ow({className:s},x),p))}function i7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function o7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?i7(Object(n),!0).forEach(function(s){J3e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function J3e(e,t,n){return(t=e5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e5e(e){var t=t5e(e,"string");return typeof t=="symbol"?t:t+""}function t5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FX=0,a5e={xAxis:{},yAxis:{},zAxis:{}},UX=Nr({name:"cartesianAxis",initialState:a5e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:cn()},replaceXAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.xAxis[n.id],e.xAxis[s.id]=s)},prepare:cn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:cn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:cn()},replaceYAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.yAxis[n.id],e.yAxis[s.id]=s)},prepare:cn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:cn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:cn()},replaceZAxis:{reducer(e,t){var{prev:n,next:s}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==s.id&&delete e.zAxis[n.id],e.zAxis[s.id]=s)},prepare:cn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:cn()},updateYAxisWidth(e,t){var{id:n,width:s}=t.payload,r=e.yAxis[n];if(r){var i=r.widthHistory||[];if(i.length===3&&i[0]===i[2]&&s===i[1]&&s!==r.width&&Math.abs(s-i[0])<=1)return;var o=[...i,s].slice(-3);e.yAxis[n]=o7(o7({},e.yAxis[n]),{},{width:s,widthHistory:o})}}}}),{addXAxis:n5e,replaceXAxis:s5e,removeXAxis:r5e,addYAxis:i5e,replaceYAxis:o5e,removeYAxis:l5e,addZAxis:WVe,replaceZAxis:VVe,removeZAxis:YVe,updateYAxisWidth:c5e}=UX.actions,d5e=UX.reducer,u5e=ut([ls],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),m5e=ut([u5e,rc,ic],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),UD=()=>Bt(m5e),f5e=()=>Bt(r4e);function l7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function iA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l7(Object(n),!0).forEach(function(s){h5e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function h5e(e,t,n){return(t=g5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g5e(e){var t=p5e(e,"string");return typeof t=="symbol"?t:t+""}function p5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x5e=e=>{var{point:t,childIndex:n,mainColor:s,activeDot:r,dataKey:i,clipPath:o}=e;if(r===!1||t.x==null||t.y==null)return null;var l={index:n,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=iA(iA(iA({},l),Ru(r)),CP(r)),u;return f.isValidElement(r)?u=f.cloneElement(r,c):typeof r=="function"?u=r(c):u=f.createElement(kX,c),f.createElement(ys,{className:"recharts-active-dot",clipPath:o},u)};function y5e(e){var{points:t,mainColor:n,activeDot:s,itemDataKey:r,clipPath:i,zIndex:o=Gn.activeDot}=e,l=Bt(xd),c=f5e();if(t==null||c==null)return null;var u=t.find(d=>c.includes(d.payload));return fn(u)?null:f.createElement(Cr,{zIndex:o},f.createElement(x5e,{point:u,childIndex:Number(l),mainColor:n,dataKey:r,activeDot:s,clipPath:i}))}var c7=(e,t,n)=>{var s=n??e;if(!fn(s))return Rs(s,t,0)},b5e=(e,t,n)=>{var s={},r=e.filter(a1),i=e.filter(u=>u.stackId==null),o=r.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),s),l=Object.entries(o).map(u=>{var[d,h]=u,p=h.map(v=>v.dataKey),x=c7(t,n,h[0].barSize);return{stackId:d,dataKeys:p,barSize:x}}),c=i.map(u=>{var d=[u.dataKey].filter(p=>p!=null),h=c7(t,n,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]};function d7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function gb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d7(Object(n),!0).forEach(function(s){v5e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v5e(e,t,n){return(t=w5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w5e(e){var t=j5e(e,"string");return typeof t=="symbol"?t:t+""}function j5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N5e(e,t,n,s,r){var i=s.length;if(!(i<1)){var o=Rs(e,n,0,!0),l,c=[];if(xn(s[0].barSize)){var u=!1,d=n/i,h=s.reduce((N,w)=>N+(w.barSize||0),0);h+=(i-1)*o,h>=n&&(h-=(i-1)*o,o=0),h>=n&&d>0&&(u=!0,d*=.9,h=i*d);var p=(n-h)/2>>0,x={offset:p-o,size:0};l=s.reduce((N,w)=>{var S,_={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:x.offset+x.size+o,size:u?d:(S=w.barSize)!==null&&S!==void 0?S:0}},k=[...N,_];return x=k[k.length-1].position,k},c)}else{var v=Rs(t,n,0,!0);n-2*v-(i-1)*o<=0&&(o=0);var j=(n-2*v-(i-1)*o)/i;j>1&&(j>>=0);var b=xn(r)?Math.min(j,r):j;l=s.reduce((N,w,S)=>[...N,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:v+(j+o)*S+(j-b)/2,size:b}}],c)}return l}}var C5e=(e,t,n,s,r,i,o)=>{var l=fn(o)?t:o,c=N5e(n,s,r!==i?r:i,e,l);return r!==i&&c!=null&&(c=c.map(u=>gb(gb({},u),{},{position:gb(gb({},u.position),{},{offset:u.position.offset-r/2})}))),c},S5e=(e,t)=>{var n=XP(t);if(!(!e||n==null||t==null)){var{stackId:s}=t;if(s!=null){var r=e[s];if(r){var{stackedData:i}=r;if(i)return i.find(o=>o.key===n)}}}};function _5e(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&xn(e.zIndex)?e.zIndex:t}var BX=e=>{var{chartData:t}=e,n=Ja(),s=Bs();return f.useEffect(()=>s?()=>{}:(n(bU(t)),()=>{n(bU(void 0))}),[t,n,s]),null},u7={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},HX=Nr({name:"brush",initialState:u7,reducers:{setBrushSettings(e,t){return t.payload==null?u7:t.payload}}}),{setBrushSettings:QVe}=HX.actions,A5e=HX.reducer;function T5e(e,t,n){return(t=k5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k5e(e){var t=E5e(e,"string");return typeof t=="symbol"?t:t+""}function E5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class BD{static create(t){return new BD(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:n,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var r=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+r}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var n=this.range(),s=n[0],r=n[n.length-1];return s<=r?t>=s&&t<=r:t>=r&&t<=s}}T5e(BD,"EPS",1e-4);function L5e(e){return(e%180+180)%180}var P5e=function(t){var{width:n,height:s}=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=L5e(r),o=i*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},D5e={dots:[],areas:[],lines:[]},qX=Nr({name:"referenceElements",initialState:D5e,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=Vi(e).dots.findIndex(s=>s===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=Vi(e).areas.findIndex(s=>s===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=Vi(e).lines.findIndex(s=>s===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:KVe,removeDot:XVe,addArea:ZVe,removeArea:JVe,addLine:eYe,removeLine:tYe}=qX.actions,O5e=qX.reducer,M5e=f.createContext(void 0),I5e=e=>{var{children:t}=e,[n]=f.useState("".concat(Mp("recharts"),"-clip")),s=UD();if(s==null)return null;var{x:r,y:i,width:o,height:l}=s;return f.createElement(M5e.Provider,{value:n},f.createElement("defs",null,f.createElement("clipPath",{id:n},f.createElement("rect",{x:r,y:i,height:l,width:o}))),t)};function GX(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],s=0;s<e.length;s+=t){var r=e[s];r!==void 0&&n.push(r)}return n}function $5e(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return P5e(s,n)}function R5e(e,t,n){var s=n==="width",{x:r,y:i,width:o,height:l}=e;return t===1?{start:s?r:i,end:s?r+o:i+l}:{start:s?r+o:i+l,end:s?r:i}}function Gp(e,t,n,s,r){if(e*t<e*s||e*t>e*r)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-r)<=0}function z5e(e,t){return GX(e,t+1)}function F5e(e,t,n,s,r){for(var i=(s||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var v=s?.[c];if(v===void 0)return{v:GX(s,u)};var j=c,b,N=()=>(b===void 0&&(b=n(v,j)),b),w=v.coordinate,S=c===0||Gp(e,w,N,d,l);S||(c=0,d=o,u+=1),S&&(d=w+e*(N()/2+r),c+=u)},p;u<=i.length;)if(p=h(),p)return p.v;return[]}function U5e(e,t,n,s,r){var i=(s||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,h=l,p=!0,x=function(){var w=s[v],S=v,_,k=()=>(_===void 0&&(_=n(w,S)),_),T=w.coordinate,A=v===d||Gp(e,T,k,h,c);if(!A)return p=!1,1;A&&(h=T+e*(k()/2+r))},v=d;v<o&&!x();v+=u);if(p){for(var j=[],b=d;b<o;b+=u)j.push(s[b]);return j}}return[]}function m7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Ds(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m7(Object(n),!0).forEach(function(s){B5e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function B5e(e,t,n){return(t=H5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H5e(e){var t=q5e(e,"string");return typeof t=="symbol"?t:t+""}function q5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G5e(e,t,n,s,r){for(var i=(s||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(p){var x=i[p],v,j=()=>(v===void 0&&(v=n(x,p)),v);if(p===o-1){var b=e*(x.coordinate+e*j()/2-c);i[p]=x=Ds(Ds({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else i[p]=x=Ds(Ds({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var N=Gp(e,x.tickCoord,j,l,c);N&&(c=x.tickCoord-e*(j()/2+r),i[p]=Ds(Ds({},x),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return i}function W5e(e,t,n,s,r,i){var o=(s||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=s[l-1],h=n(d,l-1),p=e*(d.coordinate+e*h/2-u);if(o[l-1]=d=Ds(Ds({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),d.tickCoord!=null){var x=Gp(e,d.tickCoord,()=>h,c,u);x&&(u=d.tickCoord-e*(h/2+r),o[l-1]=Ds(Ds({},d),{},{isShow:!0}))}}for(var v=i?l-1:l,j=function(w){var S=o[w],_,k=()=>(_===void 0&&(_=n(S,w)),_);if(w===0){var T=e*(S.coordinate-e*k()/2-c);o[w]=S=Ds(Ds({},S),{},{tickCoord:T<0?S.coordinate-T*e:S.coordinate})}else o[w]=S=Ds(Ds({},S),{},{tickCoord:S.coordinate});if(S.tickCoord!=null){var A=Gp(e,S.tickCoord,k,c,u);A&&(c=S.tickCoord+e*(k()/2+r),o[w]=Ds(Ds({},S),{},{isShow:!0}))}},b=0;b<v;b++)j(b);return o}function HD(e,t,n){var{tick:s,ticks:r,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!r||!r.length||!s)return[];if(zt(c)||ZN.isSsr){var p;return(p=z5e(r,zt(c)?c:0))!==null&&p!==void 0?p:[]}var x=[],v=l==="top"||l==="bottom"?"width":"height",j=d&&v==="width"?ip(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},b=(S,_)=>{var k=typeof u=="function"?u(S.value,_):S.value;return v==="width"?$5e(ip(k,{fontSize:t,letterSpacing:n}),j,h):ip(k,{fontSize:t,letterSpacing:n})[v]},N=r.length>=2?xs(r[1].coordinate-r[0].coordinate):1,w=R5e(i,N,v);return c==="equidistantPreserveStart"?F5e(N,w,b,r,o):c==="equidistantPreserveEnd"?U5e(N,w,b,r,o):(c==="preserveStart"||c==="preserveStartEnd"?x=W5e(N,w,b,r,o,c==="preserveStartEnd"):x=G5e(N,w,b,r,o),x.filter(S=>S.isShow))}var V5e=e=>{var{ticks:t,label:n,labelGapWithTick:s=5,tickSize:r=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=n?n.getBoundingClientRect().width:0,c=r+i,u=o+c+l+(n?s:0);return Math.round(u)}return 0},Y5e=["axisLine","width","height","className","hide","ticks","axisType"];function Q5e(e,t){if(e==null)return{};var n,s,r=K5e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function K5e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qu.apply(null,arguments)}function f7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f7(Object(n),!0).forEach(function(s){X5e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function X5e(e,t,n){return(t=Z5e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z5e(e){var t=J5e(e,"string");return typeof t=="symbol"?t:t+""}function J5e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Il={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Gn.axis};function eOe(e){var{x:t,y:n,width:s,height:r,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Bn(Bn(Bn({},c),Br(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=Bn(Bn({},u),{},{x1:t,y1:n+d*r,x2:t+s,y2:n+d*r})}else{var h=+(i==="left"&&!o||i==="right"&&o);u=Bn(Bn({},u),{},{x1:t+h*s,y1:n,x2:t+h*s,y2:n+r})}return f.createElement("line",qu({},u,{className:It("recharts-cartesian-axis-line",zu(l,"className"))}))}function tOe(e,t,n,s,r,i,o,l,c){var u,d,h,p,x,v,j=l?-1:1,b=e.tickSize||o,N=zt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,p=n+ +!l*r,h=p-j*b,v=h-j*c,x=N;break;case"left":h=p=e.coordinate,d=t+ +!l*s,u=d-j*b,x=u-j*c,v=N;break;case"right":h=p=e.coordinate,d=t+ +l*s,u=d+j*b,x=u+j*c,v=N;break;default:u=d=e.coordinate,p=n+ +l*r,h=p+j*b,v=h+j*c,x=N;break}return{line:{x1:u,y1:h,x2:d,y2:p},tick:{x,y:v}}}function aOe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function nOe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function sOe(e){var{option:t,tickProps:n,value:s}=e,r,i=It(n.className,"recharts-cartesian-axis-tick-value");if(f.isValidElement(t))r=f.cloneElement(t,Bn(Bn({},n),{},{className:i}));else if(typeof t=="function")r=t(Bn(Bn({},n),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=It(o,t?.className)),r=f.createElement(m1,qu({},n,{className:o}),s)}return r}var rOe=f.forwardRef((e,t)=>{var{ticks:n=[],tick:s,tickLine:r,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:p,y:x,width:v,height:j,tickSize:b,tickMargin:N,fontSize:w,letterSpacing:S,getTicksConfig:_,events:k,axisType:T}=e,A=HD(Bn(Bn({},_),{},{ticks:n}),w,S),E=aOe(d,h),M=nOe(d,h),O=Br(_),I=Ru(s),D={};typeof r=="object"&&(D=r);var H=Bn(Bn({},O),{},{fill:"none"},D),W=A.map(J=>Bn({entry:J},tOe(J,p,x,v,j,d,b,h,N))),z=W.map(J=>{var{entry:Y,line:re}=J;return f.createElement(ys,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},r&&f.createElement("line",qu({},H,re,{className:It("recharts-cartesian-axis-tick-line",zu(r,"className"))})))}),Q=W.map((J,Y)=>{var{entry:re,tick:we}=J,Z=Bn(Bn(Bn(Bn({textAnchor:E,verticalAnchor:M},O),{},{stroke:"none",fill:i},I),we),{},{index:Y,payload:re,visibleTicksCount:A.length,tickFormatter:o,padding:c},u);return f.createElement(ys,qu({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},Jx(k,re,Y)),s&&f.createElement(sOe,{option:s,tickProps:Z,value:"".concat(typeof o=="function"?o(re.value,Y):re.value).concat(l||"")}))});return f.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},Q.length>0&&f.createElement(Cr,{zIndex:Gn.label},f.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},Q)),z.length>0&&f.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},z))}),iOe=f.forwardRef((e,t)=>{var{axisLine:n,width:s,height:r,className:i,hide:o,ticks:l,axisType:c}=e,u=Q5e(e,Y5e),[d,h]=f.useState(""),[p,x]=f.useState(""),v=f.useRef(null);f.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return V5e({ticks:v.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=f.useCallback(b=>{if(b){var N=b.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=N;var w=N[0];if(w){var S=window.getComputedStyle(w),_=S.fontSize,k=S.letterSpacing;(_!==d||k!==p)&&(h(_),x(k))}}},[d,p]);return o||s!=null&&s<=0||r!=null&&r<=0?null:f.createElement(Cr,{zIndex:e.zIndex},f.createElement(ys,{className:It("recharts-cartesian-axis",i)},f.createElement(eOe,{x:e.x,y:e.y,width:s,height:r,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:Br(e)}),f.createElement(rOe,{ref:j,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),f.createElement(aDe,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},f.createElement(mDe,{label:e.label,labelRef:e.labelRef}),e.children)))}),qD=f.forwardRef((e,t)=>{var n=Qn(e,Il);return f.createElement(iOe,qu({},n,{ref:t}))});qD.displayName="CartesianAxis";var oOe=["x1","y1","x2","y2","key"],lOe=["offset"],cOe=["xAxisId","yAxisId"],dOe=["xAxisId","yAxisId"];function h7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Os(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h7(Object(n),!0).forEach(function(s){uOe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uOe(e,t,n){return(t=mOe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mOe(e){var t=fOe(e,"string");return typeof t=="symbol"?t:t+""}function fOe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gu(){return gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gu.apply(null,arguments)}function Mw(e,t){if(e==null)return{};var n,s,r=hOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hOe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var gOe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:n,x:s,y:r,width:i,height:o,ry:l}=e;return f.createElement("rect",{x:s,y:r,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function WX(e){var{option:t,lineItemProps:n}=e,s;if(f.isValidElement(t))s=f.cloneElement(t,n);else if(typeof t=="function")s=t(n);else{var r,{x1:i,y1:o,x2:l,y2:c,key:u}=n,d=Mw(n,oOe),h=(r=Br(d))!==null&&r!==void 0?r:{},{offset:p}=h,x=Mw(h,lOe);s=f.createElement("line",gu({},x,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:u}))}return s}function pOe(e){var{x:t,width:n,horizontal:s=!0,horizontalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Mw(e,cOe),c=r.map((u,d)=>{var h=Os(Os({},l),{},{x1:t,y1:u,x2:t+n,y2:u,key:"line-".concat(d),index:d});return f.createElement(WX,{key:"line-".concat(d),option:s,lineItemProps:h})});return f.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function xOe(e){var{y:t,height:n,vertical:s=!0,verticalPoints:r}=e;if(!s||!r||!r.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Mw(e,dOe),c=r.map((u,d)=>{var h=Os(Os({},l),{},{x1:u,y1:t,x2:u,y2:t+n,key:"line-".concat(d),index:d});return f.createElement(WX,{option:s,lineItemProps:h,key:"line-".concat(d)})});return f.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function yOe(e){var{horizontalFill:t,fillOpacity:n,x:s,y:r,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var x=!u[p+1],v=x?r+o-h:u[p+1]-h;if(v<=0)return null;var j=p%t.length;return f.createElement("rect",{key:"react-".concat(p),y:h,x:s,height:v,width:i,stroke:"none",fill:t[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function bOe(e){var{vertical:t=!0,verticalFill:n,fillOpacity:s,x:r,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var u=c.map(h=>Math.round(h+r-r)).sort((h,p)=>h-p);r!==u[0]&&u.unshift(0);var d=u.map((h,p)=>{var x=!u[p+1],v=x?r+o-h:u[p+1]-h;if(v<=0)return null;var j=p%n.length;return f.createElement("rect",{key:"react-".concat(p),x:h,y:i,width:v,height:l,stroke:"none",fill:n[j],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var vOe=(e,t)=>{var{xAxis:n,width:s,height:r,offset:i}=e;return pQ(HD(Os(Os(Os({},Il),n),{},{ticks:xQ(n),viewBox:{x:0,y:0,width:s,height:r}})),i.left,i.left+i.width,t)},wOe=(e,t)=>{var{yAxis:n,width:s,height:r,offset:i}=e;return pQ(HD(Os(Os(Os({},Il),n),{},{ticks:xQ(n),viewBox:{x:0,y:0,width:s,height:r}})),i.top,i.top+i.height,t)},jOe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Gn.grid};function IE(e){var t=$P(),n=RP(),s=SQ(),r=Os(Os({},Qn(e,jOe)),{},{x:zt(e.x)?e.x:s.left,y:zt(e.y)?e.y:s.top,width:zt(e.width)?e.width:s.width,height:zt(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:p,verticalValues:x}=r,v=Bs(),j=Bt(M=>oU(M,"xAxis",i,v)),b=Bt(M=>oU(M,"yAxis",o,v));if(!Ho(u)||!Ho(d)||!zt(l)||!zt(c))return null;var N=r.verticalCoordinatesGenerator||vOe,w=r.horizontalCoordinatesGenerator||wOe,{horizontalPoints:S,verticalPoints:_}=r;if((!S||!S.length)&&typeof w=="function"){var k=p&&p.length,T=w({yAxis:b?Os(Os({},b),{},{ticks:k?p:b.ticks}):void 0,width:t??u,height:n??d,offset:s},k?!0:h);yw(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(S=T)}if((!_||!_.length)&&typeof N=="function"){var A=x&&x.length,E=N({xAxis:j?Os(Os({},j),{},{ticks:A?x:j.ticks}):void 0,width:t??u,height:n??d,offset:s},A?!0:h);yw(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(_=E)}return f.createElement(Cr,{zIndex:r.zIndex},f.createElement("g",{className:"recharts-cartesian-grid"},f.createElement(gOe,{fill:r.fill,fillOpacity:r.fillOpacity,x:r.x,y:r.y,width:r.width,height:r.height,ry:r.ry}),f.createElement(yOe,gu({},r,{horizontalPoints:S})),f.createElement(bOe,gu({},r,{verticalPoints:_})),f.createElement(pOe,gu({},r,{offset:s,horizontalPoints:S,xAxis:j,yAxis:b})),f.createElement(xOe,gu({},r,{offset:s,verticalPoints:_,xAxis:j,yAxis:b}))))}IE.displayName="CartesianGrid";var NOe={},VX=Nr({name:"errorBars",initialState:NOe,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]||(e[n]=[]),e[n].push(s)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:s,next:r}=t.payload;e[n]&&(e[n]=e[n].map(i=>i.dataKey===s.dataKey&&i.direction===s.direction?r:i))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:s}=t.payload;e[n]&&(e[n]=e[n].filter(r=>r.dataKey!==s.dataKey||r.direction!==s.direction))}}}),{addErrorBar:aYe,replaceErrorBar:nYe,removeErrorBar:sYe}=VX.actions,COe=VX.reducer,SOe=["children"];function _Oe(e,t){if(e==null)return{};var n,s,r=AOe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function AOe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var TOe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},kOe=f.createContext(TOe);function YX(e){var{children:t}=e,n=_Oe(e,SOe);return f.createElement(kOe.Provider,{value:n},t)}function GD(e,t){var n,s,r=Bt(u=>lc(u,e)),i=Bt(u=>cc(u,t)),o=(n=r?.allowDataOverflow)!==null&&n!==void 0?n:ms.allowDataOverflow,l=(s=i?.allowDataOverflow)!==null&&s!==void 0?s:fs.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function QX(e){var{xAxisId:t,yAxisId:n,clipPathId:s}=e,r=UD(),{needClipX:i,needClipY:o,needClip:l}=GD(t,n);if(!l||!r)return null;var{x:c,y:u,width:d,height:h}=r;return f.createElement("clipPath",{id:"clipPath-".concat(s)},f.createElement("rect",{x:i?c:c-d/2,y:o?u:u-h/2,width:i?d:d*2,height:o?h:h*2}))}var KX=(e,t,n,s)=>pd(e,"xAxis",t,s),XX=(e,t,n,s)=>gd(e,"xAxis",t,s),ZX=(e,t,n,s)=>pd(e,"yAxis",n,s),JX=(e,t,n,s)=>gd(e,"yAxis",n,s),EOe=ut([wa,KX,ZX,XX,JX],(e,t,n,s,r)=>Ed(e,"xAxis")?Bf(t,s,!1):Bf(n,r,!1)),LOe=(e,t,n,s,r)=>r;function POe(e){return e.type==="line"}var DOe=ut([r1,LOe],(e,t)=>e.filter(POe).find(n=>n.id===t)),OOe=ut([wa,KX,ZX,XX,JX,DOe,EOe,BP],(e,t,n,s,r,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||n==null||s==null||r==null||s.length===0||r.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:h,data:p}=i,x;if(p!=null&&p.length>0?x=p:x=c?.slice(u,d+1),x!=null)return jMe({layout:e,xAxis:t,yAxis:n,xAxisTicks:s,yAxisTicks:r,dataKey:h,bandSize:o,displayedData:x})}});function MOe(e){var t=Ru(e),n=3,s=2;if(t!=null){var{r,strokeWidth:i}=t,o=Number(r),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(l)||l<0)&&(l=s),{r:o,strokeWidth:l}}return{r:n,strokeWidth:s}}var oA={exports:{}},lA={};var g7;function IOe(){if(g7)return lA;g7=1;var e=Vf();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,r=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return lA.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var x=r(null);if(x.current===null){var v={hasValue:!1,value:null};x.current=v}else v=x.current;x=o(function(){function b(k){if(!N){if(N=!0,w=k,k=h(k),p!==void 0&&v.hasValue){var T=v.value;if(p(T,k))return S=T}return S=k}if(T=S,n(w,k))return T;var A=h(k);return p!==void 0&&p(T,A)?(w=k,T):(w=k,S=A)}var N=!1,w,S,_=d===void 0?null:d;return[function(){return b(u())},_===null?void 0:function(){return b(_())}]},[u,d,h,p]);var j=s(c,x[0],x[1]);return i(function(){v.hasValue=!0,v.value=j},[j]),l(j),j},lA}var p7;function $Oe(){return p7||(p7=1,oA.exports=IOe()),oA.exports}var ROe=$Oe();function zOe(e){e()}function FOe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zOe(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var x7={notify(){},get:()=>[]};function UOe(e,t){let n,s=x7,r=0,i=!1;function o(j){d();const b=s.subscribe(j);let N=!1;return()=>{N||(N=!0,b(),h())}}function l(){s.notify()}function c(){v.onStateChange&&v.onStateChange()}function u(){return i}function d(){r++,n||(n=e.subscribe(c),s=FOe())}function h(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=x7)}function p(){i||(i=!0,d())}function x(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return v}var BOe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HOe=BOe(),qOe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GOe=qOe(),WOe=()=>HOe||GOe?f.useLayoutEffect:f.useEffect,VOe=WOe();function y7(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function YOe(e,t){if(y7(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!y7(e[n[r]],t[n[r]]))return!1;return!0}var QOe=Symbol.for("react-redux-context"),KOe=typeof globalThis<"u"?globalThis:{};function XOe(){if(!f.createContext)return{};const e=KOe[QOe]??=new Map;let t=e.get(f.createContext);return t||(t=f.createContext(null),e.set(f.createContext,t)),t}var ZOe=XOe();function JOe(e){const{children:t,context:n,serverState:s,store:r}=e,i=f.useMemo(()=>{const c=UOe(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=f.useMemo(()=>r.getState(),[r]);VOe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||ZOe;return f.createElement(l.Provider,{value:i},t)}var eMe=JOe,tMe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function aMe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function p1(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of n)if(tMe.has(s)){if(e[s]==null&&t[s]==null)continue;if(!YOe(e[s],t[s]))return!1}else if(!aMe(e[s],t[s]))return!1;return!0}var nMe=["id"],sMe=["type","layout","connectNulls","needClip","shape"],rMe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wp.apply(null,arguments)}function b7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b7(Object(n),!0).forEach(function(s){iMe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iMe(e,t,n){return(t=oMe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oMe(e){var t=lMe(e,"string");return typeof t=="symbol"?t:t+""}function lMe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WD(e,t){if(e==null)return{};var n,s,r=cMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cMe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var dMe=e=>{var{dataKey:t,name:n,stroke:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:uh(n,t),payload:e}]},uMe=f.memo(e=>{var{dataKey:t,data:n,stroke:s,strokeWidth:r,fill:i,name:o,hide:l,unit:c,tooltipType:u,id:d}=e,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:uh(o,t),hide:l,type:u,color:s,unit:c,graphicalItemId:d}};return f.createElement(zD,{tooltipEntrySettings:h})}),eZ=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function mMe(e,t){for(var n=e.length%2!==0?[...e,0]:e,s=[],r=0;r<t;++r)s=[...s,...n];return s}var fMe=(e,t,n)=>{var s=n.reduce((h,p)=>h+p);if(!s)return eZ(t,e);for(var r=Math.floor(e/s),i=e%s,o=t-e,l=[],c=0,u=0;c<n.length;u+=n[c],++c)if(u+n[c]>i){l=[...n.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...mMe(n,r),...l,...d].map(h=>"".concat(h,"px")).join(", ")};function hMe(e){var{clipPathId:t,points:n,props:s}=e,{dot:r,dataKey:i,needClip:o}=s,{id:l}=s,c=WD(s,nMe),u=Br(c);return f.createElement(Z3e,{points:n,dot:r,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:u,needClip:o,clipPathId:t})}function gMe(e){var{showLabels:t,children:n,points:s}=e,r=f.useMemo(()=>s?.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Co(Co({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[s]);return f.createElement(AX,{value:t?r:void 0},n)}function v7(e){var{clipPathId:t,pathRef:n,points:s,strokeDasharray:r,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:u,shape:d}=i,h=WD(i,sMe),p=Co(Co({},Ys(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:s,type:o,layout:l,connectNulls:c,strokeDasharray:r??i.strokeDasharray});return f.createElement(f.Fragment,null,s?.length>1&&f.createElement(MD,Wp({shapeType:"curve",option:d},p,{pathRef:n})),f.createElement(hMe,{points:s,clipPathId:t,props:i}))}function pMe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function xMe(e){var{clipPathId:t,props:n,pathRef:s,previousPointsRef:r,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:h,animateNewValues:p,width:x,height:v,onAnimationEnd:j,onAnimationStart:b}=n,N=r.current,w=i0(o,"recharts-line-"),S=f.useRef(w),[_,k]=f.useState(!1),T=!_,A=f.useCallback(()=>{typeof j=="function"&&j(),k(!1)},[j]),E=f.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]),M=pMe(s.current),O=f.useRef(0);S.current!==w&&(O.current=i.current,S.current=w);var I=O.current;return f.createElement(gMe,{points:o,showLabels:T},n.children,f.createElement(r0,{animationId:w,begin:u,duration:d,isActive:c,easing:h,onAnimationEnd:A,onAnimationStart:E,key:w},D=>{var H=dn(I,M+I,D),W=Math.min(H,M),z;if(c)if(l){var Q="".concat(l).split(/[,\s]+/gim).map(re=>parseFloat(re));z=fMe(W,M,Q)}else z=eZ(M,W);else z=l==null?void 0:String(l);if(D>0&&M>0&&(r.current=o,i.current=Math.max(i.current,W)),N){var J=N.length/o.length,Y=D===1?o:o.map((re,we)=>{var Z=Math.floor(we*J);if(N[Z]){var ne=N[Z];return Co(Co({},re),{},{x:dn(ne.x,re.x,D),y:dn(ne.y,re.y,D)})}return p?Co(Co({},re),{},{x:dn(x*2,re.x,D),y:dn(v/2,re.y,D)}):Co(Co({},re),{},{x:re.x,y:re.y})});return r.current=Y,f.createElement(v7,{props:n,points:Y,clipPathId:t,pathRef:s,strokeDasharray:z})}return f.createElement(v7,{props:n,points:o,clipPathId:t,pathRef:s,strokeDasharray:z})}),f.createElement(LD,{label:n.label}))}function yMe(e){var{clipPathId:t,props:n}=e,s=f.useRef(null),r=f.useRef(0),i=f.useRef(null);return f.createElement(xMe,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:r,pathRef:i})}var bMe=(e,t)=>{var n,s;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:qa(e.payload,t)}};class vMe extends f.Component{render(){var{hide:t,dot:n,points:s,className:r,xAxisId:i,yAxisId:o,top:l,left:c,width:u,height:d,id:h,needClip:p,zIndex:x}=this.props;if(t)return null;var v=It("recharts-line",r),j=h,{r:b,strokeWidth:N}=MOe(n),w=MX(n),S=b*2+N,_=p?"url(#clipPath-".concat(w?"":"dots-").concat(j,")"):void 0;return f.createElement(Cr,{zIndex:x},f.createElement(ys,{className:v},p&&f.createElement("defs",null,f.createElement(QX,{clipPathId:j,xAxisId:i,yAxisId:o}),!w&&f.createElement("clipPath",{id:"clipPath-dots-".concat(j)},f.createElement("rect",{x:c-S/2,y:l-S/2,width:u+S,height:d+S}))),f.createElement(YX,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:bMe,errorBarOffset:0},f.createElement(yMe,{props:this.props,clipPathId:j}))),f.createElement(y5e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:_}))}}var tZ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Gn.line,type:"linear"};function wMe(e){var t=Qn(e,tZ),{activeDot:n,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:h,legendType:p,xAxisId:x,yAxisId:v,id:j}=t,b=WD(t,rMe),{needClip:N}=GD(x,v),w=UD(),S=mh(),_=Bs(),k=Bt(O=>OOe(O,x,v,_,j));if(S!=="horizontal"&&S!=="vertical"||k==null||w==null)return null;var{height:T,width:A,x:E,y:M}=w;return f.createElement(vMe,Wp({},b,{id:j,connectNulls:l,dot:c,activeDot:n,animateNewValues:s,animationBegin:r,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:h,legendType:p,xAxisId:x,yAxisId:v,points:k,layout:S,height:T,width:A,left:E,top:M,needClip:N}))}function jMe(e){var{layout:t,xAxis:n,yAxis:s,xAxisTicks:r,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var h=qa(u,o);if(t==="horizontal"){var p=Wz({axis:n,ticks:r,bandSize:l,entry:u,index:d}),x=fn(h)?null:s.scale(h);return{x:p,y:x,value:h,payload:u}}var v=fn(h)?null:n.scale(h),j=Wz({axis:s,ticks:i,bandSize:l,entry:u,index:d});return v==null||j==null?null:{x:v,y:j,value:h,payload:u}}).filter(Boolean)}function NMe(e){var t=Qn(e,tZ),n=Bs();return f.createElement(FD,{id:t.id,type:"line"},s=>f.createElement(f.Fragment,null,f.createElement(IX,{legendPayload:dMe(t)}),f.createElement(uMe,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),f.createElement(RX,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),f.createElement(wMe,Wp({},t,{id:s}))))}var $E=f.memo(NMe,p1);$E.displayName="Line";function rm(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&n!==void 0?n:FX}function im(e,t){var n,s;return(n=(s=e.graphicalItems.cartesianItems.find(r=>r.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&n!==void 0?n:FX}var CMe="Invariant failed";function SMe(e,t){throw new Error(CMe)}function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},RE.apply(null,arguments)}function Iw(e){return f.createElement(MD,RE({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var _Me=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,r)=>{if(zt(t))return t;var i=zt(s)||fn(s);return i?t(s,r):(i||SMe(),n)}},AMe=(e,t,n)=>n,TMe=(e,t)=>t,p0=ut([r1,TMe],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),kMe=ut([p0],e=>e?.maxBarSize),EMe=(e,t,n,s)=>s,LMe=ut([wa,r1,rm,im,AMe],(e,t,n,s,r)=>t.filter(i=>e==="horizontal"?i.xAxisId===n:i.yAxisId===s).filter(i=>i.isPanorama===r).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),PMe=(e,t,n)=>{var s=wa(e),r=rm(e,t),i=im(e,t);if(!(r==null||i==null))return s==="horizontal"?TE(e,"yAxis",i,n):TE(e,"xAxis",r,n)},DMe=(e,t)=>{var n=wa(e),s=rm(e,t),r=im(e,t);if(!(s==null||r==null))return n==="horizontal"?iU(e,"xAxis",s):iU(e,"yAxis",r)},OMe=ut([LMe,nEe,DMe],b5e),MMe=(e,t,n)=>{var s,r,i=p0(e,t);if(i!=null){var o=rm(e,t),l=im(e,t);if(!(o==null||l==null)){var c=wa(e),u=lK(e),{maxBarSize:d}=i,h=fn(d)?u:d,p,x;return c==="horizontal"?(p=pd(e,"xAxis",o,n),x=gd(e,"xAxis",o,n)):(p=pd(e,"yAxis",l,n),x=gd(e,"yAxis",l,n)),(s=(r=Bf(p,x,!0))!==null&&r!==void 0?r:h)!==null&&s!==void 0?s:0}}},aZ=(e,t,n)=>{var s=wa(e),r=rm(e,t),i=im(e,t);if(!(r==null||i==null)){var o,l;return s==="horizontal"?(o=pd(e,"xAxis",r,n),l=gd(e,"xAxis",r,n)):(o=pd(e,"yAxis",i,n),l=gd(e,"yAxis",i,n)),Bf(o,l)}},IMe=ut([OMe,lK,aEe,cK,MMe,aZ,kMe],C5e),$Me=(e,t,n)=>{var s=rm(e,t);if(s!=null)return pd(e,"xAxis",s,n)},RMe=(e,t,n)=>{var s=im(e,t);if(s!=null)return pd(e,"yAxis",s,n)},zMe=(e,t,n)=>{var s=rm(e,t);if(s!=null)return gd(e,"xAxis",s,n)},FMe=(e,t,n)=>{var s=im(e,t);if(s!=null)return gd(e,"yAxis",s,n)},UMe=ut([IMe,p0],(e,t)=>{if(!(e==null||t==null)){var n=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(n!=null)return n.position}}),BMe=ut([PMe,p0],S5e),HMe=ut([ls,MP,$Me,RMe,zMe,FMe,UMe,wa,qke,aZ,BMe,p0,EMe],(e,t,n,s,r,i,o,l,c,u,d,h,p)=>{var{chartData:x,dataStartIndex:v,dataEndIndex:j}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||n==null||s==null||r==null||i==null||u==null)){var{data:b}=h,N;if(b!=null&&b.length>0?N=b:N=x?.slice(v,j+1),N!=null)return yIe({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:u,xAxis:n,yAxis:s,xAxisTicks:r,yAxisTicks:i,stackedData:d,displayedData:N,offset:e,cells:p,dataStartIndex:v})}}),qMe=["index"];function zE(){return zE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zE.apply(null,arguments)}function GMe(e,t){if(e==null)return{};var n,s,r=WMe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WMe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var nZ=f.createContext(void 0),VMe=e=>{var t=f.useContext(nZ);if(t!=null)return t.stackId;if(e!=null)return mAe(e)},YMe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),QMe=e=>{var t=f.useContext(nZ);if(t!=null){var{stackId:n}=t;return"url(#".concat(YMe(n,e),")")}},KMe=e=>{var{index:t}=e,n=GMe(e,qMe),s=QMe(t);return f.createElement(ys,zE({className:"recharts-bar-stack-layer",clipPath:s},n))},XMe=["onMouseEnter","onMouseLeave","onClick"],ZMe=["value","background","tooltipPosition"],JMe=["id"],eIe=["onMouseEnter","onClick","onMouseLeave"];function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xl.apply(null,arguments)}function w7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?w7(Object(n),!0).forEach(function(s){tIe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tIe(e,t,n){return(t=aIe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aIe(e){var t=nIe(e,"string");return typeof t=="symbol"?t:t+""}function nIe(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $w(e,t){if(e==null)return{};var n,s,r=sIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sIe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var rIe=e=>{var{dataKey:t,name:n,fill:s,legendType:r,hide:i}=e;return[{inactive:i,dataKey:t,type:r,color:s,value:uh(n,t),payload:e}]},iIe=f.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:s,fill:r,name:i,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:r,dataKey:t,nameKey:void 0,name:uh(i,t),hide:o,type:c,color:r,unit:l,graphicalItemId:u}};return f.createElement(zD,{tooltipEntrySettings:d})});function oIe(e){var t=Bt(xd),{data:n,dataKey:s,background:r,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=$w(i,XMe),d=ID(o,s,i.id),h=$D(l),p=RD(c,s,i.id);if(!r||n==null)return null;var x=Ru(r);return f.createElement(Cr,{zIndex:_5e(r,Gn.barBackground)},n.map((v,j)=>{var{value:b,background:N,tooltipPosition:w}=v,S=$w(v,ZMe);if(!N)return null;var _=d(v,j),k=h(v,j),T=p(v,j),A=qs(qs(qs(qs(qs({option:r,isActive:String(j)===t},S),{},{fill:"#eee"},N),x),Jx(u,v,j)),{},{onMouseEnter:_,onMouseLeave:k,onClick:T,dataKey:s,index:j,className:"recharts-bar-background-rectangle"});return f.createElement(Iw,Xl({key:"background-bar-".concat(j)},A))}))}function lIe(e){var{showLabels:t,children:n,rects:s}=e,r=s?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return qs(qs({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return f.createElement(AX,{value:t?r:void 0},n)}function cIe(e){var{shape:t,activeBar:n,baseProps:s,entry:r,index:i,dataKey:o}=e,l=Bt(xd),c=Bt(CD),u=n&&String(i)===l&&(c==null||o===c),d=u?n:t;return u?f.createElement(Cr,{zIndex:Gn.activeBar},f.createElement(Iw,Xl({},s,{name:String(s.name)},r,{isActive:u,option:d,index:i,dataKey:o}))):f.createElement(Iw,Xl({},s,{name:String(s.name)},r,{isActive:u,option:d,index:i,dataKey:o}))}function dIe(e){var{shape:t,baseProps:n,entry:s,index:r,dataKey:i}=e;return f.createElement(Iw,Xl({},n,{name:String(n.name)},s,{isActive:!1,option:t,index:r,dataKey:i}))}function uIe(e){var t,{data:n,props:s}=e,r=(t=Br(s))!==null&&t!==void 0?t:{},{id:i}=r,o=$w(r,JMe),{shape:l,dataKey:c,activeBar:u}=s,{onMouseEnter:d,onClick:h,onMouseLeave:p}=s,x=$w(s,eIe),v=ID(d,c,i),j=$D(p),b=RD(h,c,i);return n?f.createElement(f.Fragment,null,n.map((N,w)=>f.createElement(KMe,Xl({index:w,key:"rectangle-".concat(N?.x,"-").concat(N?.y,"-").concat(N?.value,"-").concat(w),className:"recharts-bar-rectangle"},Jx(x,N,w),{onMouseEnter:v(N,w),onMouseLeave:j(N,w),onClick:b(N,w)}),u?f.createElement(cIe,{shape:l,activeBar:u,baseProps:o,entry:N,index:w,dataKey:c}):f.createElement(dIe,{shape:l,baseProps:o,entry:N,index:w,dataKey:c})))):null}function mIe(e){var{props:t,previousRectanglesRef:n}=e,{data:s,layout:r,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=n.current,p=i0(t,"recharts-bar-"),[x,v]=f.useState(!1),j=!x,b=f.useCallback(()=>{typeof u=="function"&&u(),v(!1)},[u]),N=f.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return f.createElement(lIe,{showLabels:j,rects:s},f.createElement(r0,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:b,onAnimationStart:N,key:p},w=>{var S=w===1?s:s?.map((_,k)=>{var T=h&&h[k];if(T)return qs(qs({},_),{},{x:dn(T.x,_.x,w),y:dn(T.y,_.y,w),width:dn(T.width,_.width,w),height:dn(T.height,_.height,w)});if(r==="horizontal"){var A=dn(0,_.height,w),E=dn(_.stackedBarStart,_.y,w);return qs(qs({},_),{},{y:E,height:A})}var M=dn(0,_.width,w),O=dn(_.stackedBarStart,_.x,w);return qs(qs({},_),{},{width:M,x:O})});return w>0&&(n.current=S??null),S==null?null:f.createElement(ys,null,f.createElement(uIe,{props:t,data:S}))}),f.createElement(LD,{label:t.label}),t.children)}function fIe(e){var t=f.useRef(null);return f.createElement(mIe,{previousRectanglesRef:t,props:e})}var sZ=0,hIe=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:qa(e,t)}};class gIe extends f.PureComponent{render(){var{hide:t,data:n,dataKey:s,className:r,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||n==null)return null;var d=It("recharts-bar",r),h=u;return f.createElement(ys,{className:d,id:u},l&&f.createElement("defs",null,f.createElement(QX,{clipPathId:h,xAxisId:i,yAxisId:o})),f.createElement(ys,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},f.createElement(oIe,{data:n,dataKey:s,background:c,allOtherBarProps:this.props}),f.createElement(fIe,this.props)))}}var pIe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:sZ,xAxisId:0,yAxisId:0,zIndex:Gn.bar};function xIe(e){var{xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:h}=GD(t,n),p=mh(),x=Bs(),v=OD(e.children,u1),j=Bt(w=>HMe(w,e.id,x,v));if(p!=="vertical"&&p!=="horizontal")return null;var b,N=j?.[0];return N==null||N.height==null||N.width==null?b=0:b=p==="vertical"?N.height/2:N.width/2,f.createElement(YX,{xAxisId:t,yAxisId:n,data:j,dataPointFormatter:hIe,errorBarOffset:b},f.createElement(gIe,Xl({},e,{layout:p,needClip:h,data:j,xAxisId:t,yAxisId:n,hide:s,legendType:r,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function yIe(e){var{layout:t,barSettings:{dataKey:n,minPointSize:s},pos:r,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:p,cells:x,parentViewBox:v,dataStartIndex:j}=e,b=t==="horizontal"?l:o,N=d?b.scale.domain():null,w=fAe({numericAxis:b}),S=b.scale(w);return h.map((_,k)=>{var T,A,E,M,O,I;if(d){var D=d[k+j];if(D==null)return null;T=oAe(D,N)}else T=qa(_,n),Array.isArray(T)||(T=[w,T]);var H=_Me(s,sZ)(T[1],k);if(t==="horizontal"){var W,[z,Q]=[l.scale(T[0]),l.scale(T[1])];A=Vz({axis:o,ticks:c,bandSize:i,offset:r.offset,entry:_,index:k}),E=(W=Q??z)!==null&&W!==void 0?W:void 0,M=r.size;var J=z-Q;if(O=Zi(J)?0:J,I={x:A,y:p.top,width:M,height:p.height},Math.abs(H)>0&&Math.abs(O)<Math.abs(H)){var Y=xs(O||H)*(Math.abs(H)-Math.abs(O));E-=Y,O+=Y}}else{var[re,we]=[o.scale(T[0]),o.scale(T[1])];if(A=re,E=Vz({axis:l,ticks:u,bandSize:i,offset:r.offset,entry:_,index:k}),M=we-re,O=r.size,I={x:p.left,y:E,width:p.width,height:O},Math.abs(H)>0&&Math.abs(M)<Math.abs(H)){var Z=xs(M||H)*(Math.abs(H)-Math.abs(M));M+=Z}}if(A==null||E==null||M==null||O==null)return null;var ne=qs(qs({},_),{},{stackedBarStart:S,x:A,y:E,width:M,height:O,value:d?T:T[1],payload:_,background:I,tooltipPosition:{x:A+M/2,y:E+O/2},parentViewBox:v},x&&x[k]&&x[k].props);return ne}).filter(Boolean)}function bIe(e){var t=Qn(e,pIe),n=VMe(t.stackId),s=Bs();return f.createElement(FD,{id:t.id,type:"bar"},r=>f.createElement(f.Fragment,null,f.createElement(IX,{legendPayload:rIe(t)}),f.createElement(iIe,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:r}),f.createElement(RX,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),f.createElement(Cr,{zIndex:t.zIndex},f.createElement(xIe,Xl({},t,{id:r})))))}var FE=f.memo(bIe,p1);FE.displayName="Bar";var vIe=["domain","range"],wIe=["domain","range"];function j7(e,t){if(e==null)return{};var n,s,r=jIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jIe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function N7(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function rZ(e,t){if(e===t)return!0;var{domain:n,range:s}=e,r=j7(e,vIe),{domain:i,range:o}=t,l=j7(t,wIe);return!N7(n,i)||!N7(s,o)?!1:p1(r,l)}var NIe=["dangerouslySetInnerHTML","ticks","scale"],CIe=["id","scale"];function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},UE.apply(null,arguments)}function C7(e,t){if(e==null)return{};var n,s,r=SIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SIe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function _Ie(e){var t=Ja(),n=f.useRef(null);return f.useLayoutEffect(()=>{n.current===null?t(n5e(e)):n.current!==e&&t(s5e({prev:n.current,next:e})),n.current=e},[e,t]),f.useLayoutEffect(()=>()=>{n.current&&(t(r5e(n.current)),n.current=null)},[t]),null}var AIe=e=>{var{xAxisId:t,className:n}=e,s=Bt(MP),r=Bs(),i="xAxis",o=Bt(N=>UK(N,i,t,r)),l=Bt(N=>$K(N,t)),c=Bt(N=>eLe(N,t)),u=Bt(N=>yK(N,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:p}=e,x=C7(e,NIe),{id:v,scale:j}=u,b=C7(u,CIe);return f.createElement(qD,UE({},x,b,{x:c.x,y:c.y,width:l.width,height:l.height,className:It("recharts-".concat(i," ").concat(i),n),viewBox:s,ticks:o,axisType:i}))},TIe={allowDataOverflow:ms.allowDataOverflow,allowDecimals:ms.allowDecimals,allowDuplicatedCategory:ms.allowDuplicatedCategory,angle:ms.angle,axisLine:Il.axisLine,height:ms.height,hide:!1,includeHidden:ms.includeHidden,interval:ms.interval,minTickGap:ms.minTickGap,mirror:ms.mirror,orientation:ms.orientation,padding:ms.padding,reversed:ms.reversed,scale:ms.scale,tick:ms.tick,tickCount:ms.tickCount,tickLine:Il.tickLine,tickSize:Il.tickSize,type:ms.type,xAxisId:0},kIe=e=>{var t=Qn(e,TIe);return f.createElement(f.Fragment,null,f.createElement(_Ie,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),f.createElement(AIe,t))},BE=f.memo(kIe,rZ);BE.displayName="XAxis";var EIe=["dangerouslySetInnerHTML","ticks","scale"],LIe=["id","scale"];function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},HE.apply(null,arguments)}function S7(e,t){if(e==null)return{};var n,s,r=PIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PIe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function DIe(e){var t=Ja(),n=f.useRef(null);return f.useLayoutEffect(()=>{n.current===null?t(i5e(e)):n.current!==e&&t(o5e({prev:n.current,next:e})),n.current=e},[e,t]),f.useLayoutEffect(()=>()=>{n.current&&(t(l5e(n.current)),n.current=null)},[t]),null}var OIe=e=>{var{yAxisId:t,className:n,width:s,label:r}=e,i=f.useRef(null),o=f.useRef(null),l=Bt(MP),c=Bs(),u=Ja(),d="yAxis",h=Bt(T=>RK(T,t)),p=Bt(T=>aLe(T,t)),x=Bt(T=>UK(T,d,t,c)),v=Bt(T=>bK(T,t));if(f.useLayoutEffect(()=>{if(!(s!=="auto"||!h||ED(r)||f.isValidElement(r)||v==null)){var T=i.current;if(T){var A=T.getCalculatedWidth();Math.round(h.width)!==Math.round(A)&&u(c5e({id:t,width:A}))}}},[x,h,u,r,t,s,v]),h==null||p==null||v==null)return null;var{dangerouslySetInnerHTML:j,ticks:b,scale:N}=e,w=S7(e,EIe),{id:S,scale:_}=v,k=S7(v,LIe);return f.createElement(qD,HE({},w,k,{ref:i,labelRef:o,x:p.x,y:p.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:h.width,height:h.height,className:It("recharts-".concat(d," ").concat(d),n),viewBox:l,ticks:x,axisType:d}))},MIe={allowDataOverflow:fs.allowDataOverflow,allowDecimals:fs.allowDecimals,allowDuplicatedCategory:fs.allowDuplicatedCategory,angle:fs.angle,axisLine:Il.axisLine,hide:!1,includeHidden:fs.includeHidden,interval:fs.interval,minTickGap:fs.minTickGap,mirror:fs.mirror,orientation:fs.orientation,padding:fs.padding,reversed:fs.reversed,scale:fs.scale,tick:fs.tick,tickCount:fs.tickCount,tickLine:Il.tickLine,tickSize:Il.tickSize,type:fs.type,width:fs.width,yAxisId:0},IIe=e=>{var t=Qn(e,MIe);return f.createElement(f.Fragment,null,f.createElement(DIe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),f.createElement(OIe,t))},qE=f.memo(IIe,rZ);qE.displayName="YAxis";var $Ie=(e,t)=>t,VD=ut([$Ie,wa,pK,cs,nX,dc,y4e,ls],S4e),YD=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/s)}},iZ=ji("mouseClick"),oZ=a0();oZ.startListening({actionCreator:iZ,effect:(e,t)=>{var n=e.payload,s=VD(t.getState(),YD(n));s?.activeIndex!=null&&t.dispatch(pLe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var GE=ji("mouseMove"),lZ=a0(),pb=null;lZ.startListening({actionCreator:GE,effect:(e,t)=>{var n=e.payload;pb!==null&&cancelAnimationFrame(pb);var s=YD(n);pb=requestAnimationFrame(()=>{var r=t.getState(),i=yD(r,r.tooltip.settings.shared);if(i==="axis"){var o=VD(r,s);o?.activeIndex!=null?t.dispatch(QK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(YK())}pb=null})}});function RIe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var _7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},cZ=Nr({name:"rootProps",initialState:_7,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:_7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),zIe=cZ.reducer,{updateOptions:FIe}=cZ.actions,dZ=Nr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:UIe}=dZ.actions,BIe=dZ.reducer,uZ=ji("keyDown"),mZ=ji("focus"),QD=a0();QD.startListening({actionCreator:uZ,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=bD(r,vh(n),u0(n),h0(n)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=dc(n);if(i==="Enter"){var u=Ew(n,"axis","hover",String(r.index));t.dispatch(EE({active:!r.active,activeIndex:r.index,activeCoordinate:u}));return}var d=iLe(n),h=d==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*h;if(!(c==null||x>=c.length||x<0)){var v=Ew(n,"axis","hover",String(x));t.dispatch(EE({active:!0,activeIndex:x.toString(),activeCoordinate:v}))}}}}}});QD.startListening({actionCreator:mZ,effect:(e,t)=>{var n=t.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var i="0",o=Ew(n,"axis","hover",String(i));t.dispatch(EE({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var li=ji("externalEvent"),fZ=a0(),cA=new Map;fZ.startListening({actionCreator:li,effect:(e,t)=>{var{handler:n,reactEvent:s}=e.payload;if(n!=null){s.persist();var r=s.type,i=cA.get(r);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:a4e(l),activeDataKey:CD(l),activeIndex:xd(l),activeLabel:iX(l),activeTooltipIndex:xd(l),isTooltipActive:n4e(l)};n(c,s)}finally{cA.delete(r)}});cA.set(r,o)}}});var HIe=ut([yh],e=>e.tooltipItemPayloads),qIe=ut([HIe,f0,(e,t)=>t,(e,t,n)=>n],(e,t,n,s)=>{var r=e.find(l=>l.settings.graphicalItemId===s);if(r!=null){var{positions:i}=r;if(i!=null){var o=t(i,n);return o}}}),hZ=ji("touchMove"),gZ=a0();gZ.startListening({actionCreator:hZ,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var s=t.getState(),r=yD(s,s.tooltip.settings.shared);if(r==="axis"){var i=n.touches[0];if(i==null)return;var o=VD(s,YD({clientX:i.clientX,clientY:i.clientY,currentTarget:n.currentTarget}));o?.activeIndex!=null&&t.dispatch(QK({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(r==="item"){var l,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(bQ),h=(l=u.getAttribute(vQ))!==null&&l!==void 0?l:void 0,p=bh(s).find(j=>j.id===h);if(d==null||p==null||h==null)return;var{dataKey:x}=p,v=qIe(s,d,h);t.dispatch(VK({activeDataKey:x,activeIndex:d,activeCoordinate:v,activeGraphicalItemId:h}))}}}});var GIe=UY({brush:A5e,cartesianAxis:d5e,chartData:aPe,errorBars:COe,graphicalItems:p3e,layout:tAe,legend:cTe,options:X4e,polarAxis:DDe,polarOptions:BIe,referenceElements:O5e,rootProps:zIe,tooltip:xLe,zIndex:z4e}),WIe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return __e({reducer:GIe,preloadedState:t,middleware:s=>{var r;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([oZ.middleware,lZ.middleware,QD.middleware,fZ.middleware,gZ.middleware])},enhancers:s=>{var r=s;return typeof s=="function"&&(r=s()),r.concat(aQ({type:"raf"}))},devTools:{serialize:{replacer:RIe},name:"recharts-".concat(n)}})};function pZ(e){var{preloadedState:t,children:n,reduxStoreName:s}=e,r=Bs(),i=f.useRef(null);if(r)return n;i.current==null&&(i.current=WIe(t,s));var o=_P;return f.createElement(eMe,{context:o,store:i.current},n)}function VIe(e){var{layout:t,margin:n}=e,s=Ja(),r=Bs();return f.useEffect(()=>{r||(s(Z_e(t)),s(X_e(n)))},[s,r,t,n]),null}var xZ=f.memo(VIe,p1);function yZ(e){var t=Ja();return f.useEffect(()=>{t(FIe(e))},[t,e]),null}function A7(e){var{zIndex:t,isPanorama:n}=e,s=f.useRef(null),r=Ja();return f.useLayoutEffect(()=>(s.current&&r($4e({zIndex:t,element:s.current,isPanorama:n})),()=>{r(R4e({zIndex:t,isPanorama:n}))}),[r,t,n]),f.createElement("g",{tabIndex:-1,ref:s})}function T7(e){var{children:t,isPanorama:n}=e,s=Bt(A4e);if(!s||s.length===0)return t;var r=s.filter(o=>o<0),i=s.filter(o=>o>0);return f.createElement(f.Fragment,null,r.map(o=>f.createElement(A7,{key:o,zIndex:o,isPanorama:n})),t,i.map(o=>f.createElement(A7,{key:o,zIndex:o,isPanorama:n})))}var YIe=["children"];function QIe(e,t){if(e==null)return{};var n,s,r=KIe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function KIe(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Rw.apply(null,arguments)}var XIe={width:"100%",height:"100%",display:"block"},ZIe=f.forwardRef((e,t)=>{var n=$P(),s=RP(),r=$Q();if(!Ho(n)||!Ho(s))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=r?0:void 0,typeof o.role=="string"?d=o.role:d=r?"application":void 0),f.createElement(bP,Rw({},o,{title:l,desc:c,role:d,tabIndex:u,width:n,height:s,style:XIe,ref:t}),i)}),JIe=e=>{var{children:t}=e,n=Bt(WN);if(!n)return null;var{width:s,height:r,y:i,x:o}=n;return f.createElement(bP,{width:s,height:r,x:o,y:i},t)},k7=f.forwardRef((e,t)=>{var{children:n}=e,s=QIe(e,YIe),r=Bs();return r?f.createElement(JIe,null,f.createElement(T7,{isPanorama:!0},n)):f.createElement(ZIe,Rw({ref:t},s),f.createElement(T7,{isPanorama:!1},n))});function e$e(){var e=Ja(),[t,n]=f.useState(null),s=Bt(bAe);return f.useEffect(()=>{if(t!=null){var r=t.getBoundingClientRect(),i=r.width/t.offsetWidth;xn(i)&&i!==s&&e(eAe(i))}},[t,e,s]),n}function E7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function t$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E7(Object(n),!0).forEach(function(s){a$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function a$e(e,t,n){return(t=n$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n$e(e){var t=s$e(e,"string");return typeof t=="symbol"?t:t+""}function s$e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gu(){return Gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gu.apply(null,arguments)}var r$e=()=>(uPe(),null);function zw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var i$e=f.forwardRef((e,t)=>{var n,s,r=f.useRef(null),[i,o]=f.useState({containerWidth:zw((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:zw((s=e.style)===null||s===void 0?void 0:s.height)}),l=f.useCallback((u,d)=>{o(h=>{var p=Math.round(u),x=Math.round(d);return h.containerWidth===p&&h.containerHeight===x?h:{containerWidth:p,containerHeight:x}})},[]),c=f.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var p=v=>{var{width:j,height:b}=v[0].contentRect;l(j,b)},x=new ResizeObserver(p);x.observe(u),r.current=x}},[t,l]);return f.useEffect(()=>()=>{var u=r.current;u?.disconnect()},[l]),f.createElement(f.Fragment,null,f.createElement(YN,{width:i.containerWidth,height:i.containerHeight}),f.createElement("div",Gu({ref:c},e)))}),o$e=f.forwardRef((e,t)=>{var{width:n,height:s}=e,[r,i]=f.useState({containerWidth:zw(n),containerHeight:zw(s)}),o=f.useCallback((c,u)=>{i(d=>{var h=Math.round(c),p=Math.round(u);return d.containerWidth===h&&d.containerHeight===p?d:{containerWidth:h,containerHeight:p}})},[]),l=f.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return f.createElement(f.Fragment,null,f.createElement(YN,{width:r.containerWidth,height:r.containerHeight}),f.createElement("div",Gu({ref:l},e)))}),l$e=f.forwardRef((e,t)=>{var{width:n,height:s}=e;return f.createElement(f.Fragment,null,f.createElement(YN,{width:n,height:s}),f.createElement("div",Gu({ref:t},e)))}),c$e=f.forwardRef((e,t)=>{var{width:n,height:s}=e;return Yl(n)||Yl(s)?f.createElement(o$e,Gu({},e,{ref:t})):f.createElement(l$e,Gu({},e,{ref:t}))});function d$e(e){return e===!0?i$e:c$e}var u$e=f.forwardRef((e,t)=>{var{children:n,className:s,height:r,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:p,onTouchEnd:x,onTouchMove:v,onTouchStart:j,style:b,width:N,responsive:w,dispatchTouchEvents:S=!0}=e,_=f.useRef(null),k=Ja(),[T,A]=f.useState(null),[E,M]=f.useState(null),O=e$e(),I=IP(),D=I?.width>0?I.width:N,H=I?.height>0?I.height:r,W=f.useCallback(ue=>{O(ue),typeof t=="function"&&t(ue),A(ue),M(ue),ue!=null&&(_.current=ue)},[O,t,A,M]),z=f.useCallback(ue=>{k(iZ(ue)),k(li({handler:i,reactEvent:ue}))},[k,i]),Q=f.useCallback(ue=>{k(GE(ue)),k(li({handler:u,reactEvent:ue}))},[k,u]),J=f.useCallback(ue=>{k(YK()),k(li({handler:d,reactEvent:ue}))},[k,d]),Y=f.useCallback(ue=>{k(GE(ue)),k(li({handler:h,reactEvent:ue}))},[k,h]),re=f.useCallback(()=>{k(mZ())},[k]),we=f.useCallback(ue=>{k(uZ(ue.key))},[k]),Z=f.useCallback(ue=>{k(li({handler:o,reactEvent:ue}))},[k,o]),ne=f.useCallback(ue=>{k(li({handler:l,reactEvent:ue}))},[k,l]),pe=f.useCallback(ue=>{k(li({handler:c,reactEvent:ue}))},[k,c]),Ne=f.useCallback(ue=>{k(li({handler:p,reactEvent:ue}))},[k,p]),de=f.useCallback(ue=>{k(li({handler:j,reactEvent:ue}))},[k,j]),be=f.useCallback(ue=>{S&&k(hZ(ue)),k(li({handler:v,reactEvent:ue}))},[k,S,v]),oe=f.useCallback(ue=>{k(li({handler:x,reactEvent:ue}))},[k,x]),Te=d$e(w);return f.createElement(fX.Provider,{value:T},f.createElement(vY.Provider,{value:E},f.createElement(Te,{width:D??b?.width,height:H??b?.height,className:It("recharts-wrapper",s),style:t$e({position:"relative",cursor:"default",width:D,height:H},b),onClick:z,onContextMenu:Z,onDoubleClick:ne,onFocus:re,onKeyDown:we,onMouseDown:pe,onMouseEnter:Q,onMouseLeave:J,onMouseMove:Y,onMouseUp:Ne,onTouchEnd:oe,onTouchMove:be,onTouchStart:de,ref:W},f.createElement(r$e,null),n)))}),m$e=["width","height","responsive","children","className","style","compact","title","desc"];function f$e(e,t){if(e==null)return{};var n,s,r=h$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h$e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var bZ=f.forwardRef((e,t)=>{var{width:n,height:s,responsive:r,children:i,className:o,style:l,compact:c,title:u,desc:d}=e,h=f$e(e,m$e),p=Br(h);return c?f.createElement(f.Fragment,null,f.createElement(YN,{width:n,height:s}),f.createElement(k7,{otherAttributes:p,title:u,desc:d},i)):f.createElement(u$e,{className:o,style:l,width:n,height:s,responsive:r??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},f.createElement(k7,{otherAttributes:p,title:u,desc:d,ref:t},f.createElement(I5e,null,i)))});function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},WE.apply(null,arguments)}var g$e={top:5,right:5,bottom:5,left:5},p$e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:g$e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},vZ=f.forwardRef(function(t,n){var s,r=Qn(t.categoricalChartProps,p$e),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return f.createElement(pZ,{preloadedState:{options:d},reduxStoreName:(s=u.id)!==null&&s!==void 0?s:i},f.createElement(BX,{chartData:u.data}),f.createElement(xZ,{layout:r.layout,margin:r.margin}),f.createElement(yZ,{baseValue:r.baseValue,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),f.createElement(bZ,WE({},r,{ref:n})))}),x$e=["axis"],y$e=f.forwardRef((e,t)=>f.createElement(vZ,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:x$e,tooltipPayloadSearcher:kD,categoricalChartProps:e,ref:t})),b$e=["axis","item"],v$e=f.forwardRef((e,t)=>f.createElement(vZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:b$e,tooltipPayloadSearcher:kD,categoricalChartProps:e,ref:t}));function w$e(e){var t=Ja();return f.useEffect(()=>{t(UIe(e))},[t,e]),null}var j$e=["layout"];function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},VE.apply(null,arguments)}function N$e(e,t){if(e==null)return{};var n,s,r=C$e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C$e(e,t){if(e==null)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;n[s]=e[s]}return n}var S$e={top:5,right:5,bottom:5,left:5},wZ={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:S$e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_$e=f.forwardRef(function(t,n){var s,r=Qn(t.categoricalChartProps,wZ),{layout:i}=r,o=N$e(r,j$e),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,h={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return f.createElement(pZ,{preloadedState:{options:h},reduxStoreName:(s=r.id)!==null&&s!==void 0?s:l},f.createElement(BX,{chartData:r.data}),f.createElement(xZ,{layout:i,margin:r.margin}),f.createElement(yZ,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),f.createElement(w$e,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),f.createElement(bZ,VE({},o,{ref:n})))});function L7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function P7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L7(Object(n),!0).forEach(function(s){A$e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L7(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function A$e(e,t,n){return(t=T$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T$e(e){var t=k$e(e,"string");return typeof t=="symbol"?t:t+""}function k$e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E$e=["item"],L$e=P7(P7({},wZ),{},{layout:"centric",startAngle:0,endAngle:360}),P$e=f.forwardRef((e,t)=>{var n=Qn(e,L$e);return f.createElement(_$e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:E$e,tooltipPayloadSearcher:kD,categoricalChartProps:n,ref:t})});const D7={user_id:"",start_date:"",end_date:"",target_amount:"",annual_amount:"",period_type:"",period_year:new Date().getFullYear(),period_number:1,prorate_first_period:!0,use_annual_mode:!0},jZ=[{value:"MONTHLY",label:"Monthly",divisor:12},{value:"QUARTERLY",label:"Quarterly",divisor:4},{value:"SEMIANNUAL",label:"Semi-Annual",divisor:2},{value:"ANNUAL",label:"Annual",divisor:1},{value:"CUSTOM",label:"Custom (Manual)",divisor:1}],O7=["#6366f1","#22c55e","#f97316","#0ea5e9","#a855f7","#f43f5e","#eab308","#8b5cf6","#10b981","#ec4899","#14b8a6","#f59e0b"];function D$e({name:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",required:o=!1,isSubmitted:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=t.find(N=>String(N.id)===String(n)),v=x?r(x):"",j=o&&l&&!n,b=f.useMemo(()=>{const N=d.toLowerCase();return N?t.filter(w=>r(w).toLowerCase().includes(N)):t},[t,d,r]);return f.useEffect(()=>{const N=w=>{p.current&&!p.current.contains(w.target)&&u(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),a.jsxs("div",{ref:p,className:"relative flex justify-center w-full",children:[a.jsx("input",{value:c?d:v,placeholder:i,onFocus:()=>u(!0),onChange:N=>{h(N.target.value),u(!0)},className:`w-full border rounded-lg p-1 text-gray-700 focus:outline-none focus:ring-1
          ${j?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`}),c&&a.jsx("div",{className:"absolute top-full left-0 z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:b.length?b.map(N=>a.jsx("button",{type:"button",onClick:()=>{s({target:{name:e,value:String(N.id)}}),u(!1),h("")},className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-50",children:r(N)},N.id)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results found"})})]})}function x1({currentUserRole:e,currentUserId:t}){const{user:n,mutate:s}=Gt(),r=n?.id,i=n?.company?.currency||"",o=i==="$"?kue:Lue;f.useEffect(()=>{s&&s()},[s]),f.useEffect(()=>{n?.company&&console.log("Dashboard detected Company Settings:",n.company)},[n]),f.useEffect(()=>{document.title="Targets | Sari-Sari CRM"},[]);const[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState(!1),[x,v]=f.useState(""),[j,b]=f.useState(""),[N,w]=f.useState(1),[S,_]=f.useState(10),[k,T]=f.useState(!1),[A,E]=f.useState(!1),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(D7),[z,Q]=f.useState(null),[J,Y]=f.useState(null),[re,we]=f.useState(!1),[Z,ne]=f.useState([]),[pe,Ne]=f.useState(!1),[de,be]=f.useState("annual"),[oe,Te]=f.useState(1),[ue,Oe]=f.useState("overview"),[xe,le]=f.useState(null),[Fe,ke]=f.useState(!1),[He,Xe]=f.useState(null),[it,ze]=f.useState(!1),[at,Ve]=f.useState(""),[Ze,Je]=f.useState(null),[Ue,_e]=f.useState(null),[he,ie]=f.useState(new Date().getFullYear()),[G,X]=f.useState(""),[ve,$e]=f.useState(1),Le=f.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),me=f.useMemo(()=>["CEO","ADMIN","GROUP MANAGER"].includes(e?.toUpperCase()),[e]),Re=f.useCallback(async()=>{p(!0);try{const U=await se.get("/targets/admin/fetch-all");c(U.data)}catch(U){console.error(U),V.error("Failed to load targets.")}finally{p(!1)}},[]),qe=f.useCallback(async()=>{try{const U=await se.get("/targets/admin/get-users");d(U.data)}catch(U){console.error(U)}},[]),rt=f.useCallback(async()=>{try{const U=await se.get("/targets/fiscal-settings");_e(U.data)}catch(U){console.error("Failed to fetch fiscal settings:",U)}},[]),st=f.useCallback(async()=>{ke(!0);try{const U=new URLSearchParams;G&&U.append("period_type",G),he&&U.append("period_year",he),ve&&U.append("period_number",ve);const K=await se.get(`/targets/leaderboard?${U.toString()}`);le(K.data)}catch(U){console.error(U),V.error("Failed to load leaderboard.")}finally{ke(!1)}},[G,he,ve]),Ie=f.useCallback(async()=>{try{const U=new URLSearchParams;G&&U.append("period_type",G),he&&U.append("period_year",he),ve&&U.append("period_number",ve);const K=await se.get(`/targets/team-summary?${U.toString()}`);Je(K.data)}catch(U){console.error(U)}},[G,he,ve]),ot=f.useCallback(async(U,K="")=>{ze(!0);try{const je=K?`?period_type=${encodeURIComponent(K)}`:"",Be=await se.get(`/targets/history/${U}${je}`);Xe(Be.data)}catch(je){console.error(je),V.error("Failed to load user history.")}finally{ze(!1)}},[]);f.useEffect(()=>{Re(),qe(),rt()},[Re,qe,rt]),f.useEffect(()=>{ue==="leaderboard"&&(st(),Ie())},[ue,st,Ie]);const Ct=f.useMemo(()=>{const U=l.reduce((tt,lt)=>tt+(Number(lt.target_amount)||0),0),K=l.reduce((tt,lt)=>tt+(Number(lt.achieved_amount)||0),0),je=U>0?(K/U*100).toFixed(1):0,Be=Math.max(0,U-K);return{totalTarget:U,totalAchieved:K,achievement:je,remaining:Be,totalCount:l.length}},[l]),kt=f.useCallback(()=>(K=>de==="annual"?K:K.filter(je=>{const Be=new Date(je.start_date),tt=new Date(je.end_date),lt=Be.getMonth(),Nt=tt.getMonth();let Ft=!1;if(de==="semiannual")oe===1?Ft=lt<=5&&Nt>=0:Ft=lt<=11&&Nt>=6;else if(de==="trimester"){const Pa=[{start:0,end:3},{start:4,end:7},{start:8,end:11}][oe-1];Ft=lt<=Pa.end&&Nt>=Pa.start}else if(de==="quarterly"){const Pa=[{start:0,end:2},{start:3,end:5},{start:6,end:8},{start:9,end:11}][oe-1];Ft=lt<=Pa.end&&Nt>=Pa.start}return Ft}))(l),[l,de,oe]),At=f.useMemo(()=>{const U=kt(),K={};U.forEach(lt=>{const Nt=lt.user_id,Ft=lt.user?`${lt.user.first_name} ${lt.user.last_name}`:"Unknown";K[Nt]||(K[Nt]={userId:Nt,name:Ft,targetAmount:0,achievedAmount:0}),K[Nt].targetAmount+=Number(lt.target_amount)||0,K[Nt].achievedAmount+=Number(lt.achieved_amount)||0});const je=Object.values(K).map((lt,Nt)=>({...lt,fill:O7[Nt%O7.length]})),Be=je.reduce((lt,Nt)=>lt+Nt.targetAmount,0);return je.map(lt=>({...lt,percentage:Be>0?(lt.targetAmount/Be*100).toFixed(1):0}))},[kt]),jt=f.useMemo(()=>At.slice(0,8).map(U=>({name:U.name.split(" ")[0],achievement:Number(U.achievedAmount),target:Number(U.targetAmount)})),[At]),ge=f.useMemo(()=>{const U=Array.isArray(u)&&u.length?u:l.filter(Be=>Be.user&&Be.user.id).map(Be=>({id:Be.user.id,first_name:Be.user.first_name,last_name:Be.user.last_name})),K=new Set,je=[];for(const Be of U){const tt=String(Be.id);K.has(tt)||(K.add(tt),je.push(Be))}return je.sort((Be,tt)=>{const lt=`${Be.first_name||""} ${Be.last_name||""}`.trim().toLowerCase(),Nt=`${tt.first_name||""} ${tt.last_name||""}`.trim().toLowerCase();return lt.localeCompare(Nt)}),je},[u,l]),ye=f.useMemo(()=>{const U=x.toLowerCase();return l.filter(K=>{const je=!j||String(K.user?.id||"")===String(j),Be=K.user?`${K.user.first_name} ${K.user.last_name}`.toLowerCase():"";return je&&(Be.includes(U)||K.start_date?.includes(U)||K.end_date?.includes(U))})},[l,x,j]);f.useEffect(()=>{w(1)},[x,j]);const Pe=Math.max(1,Math.ceil(ye.length/S)),Ce=f.useMemo(()=>{const U=(N-1)*S;return ye.slice(U,U+S)},[ye,N,S]),Qe=U=>{const{name:K,value:je}=U.target;W(Be=>({...Be,[K]:je}))},F=()=>{W(D7),E(!1),D(null),Ne(!1),T(!0)},q=U=>{W({user_id:U.user?.id?String(U.user.id):"",start_date:U.start_date||"",end_date:U.end_date||"",target_amount:U.target_amount?.toString()||"",annual_amount:"",period_type:U.period_type||"CUSTOM",period_year:U.period_year||new Date().getFullYear(),period_number:U.period_number||1,prorate_first_period:!0,use_annual_mode:!1}),E(!0),D(U.id),Ne(!1),T(!0),Q(null)},fe=U=>{const K=U.user?`${U.user.first_name} ${U.user.last_name}`:"Unknown",je=e?.toUpperCase()==="GROUP MANAGER",Be=["CEO","ADMIN"].includes(e?.toUpperCase());if(je&&Number(U.created_by)!==Number(r)){V.error("You can only archive targets you created");return}Y({title:Be?"Delete Target":"Archive Target",message:a.jsxs("span",{children:["Are you sure you want to ",Be?"delete":"archive"," the target for"," ",a.jsx("span",{className:"font-semibold",children:K}),"?"]}),confirmLabel:Be?"Delete":"Archive",cancelLabel:"Cancel",variant:Be?"danger":"archive",action:async()=>{await se.delete(`/targets/admin/${U.id}`),V.success(`Target ${Be?"deleted":"archived"} successfully.`),Re(),Q(null)}})},te=()=>{const K=e?.toUpperCase()==="GROUP MANAGER"?Ce.filter(Be=>Number(Be.created_by)===Number(r)):Ce;if(K.length>0&&K.every(Be=>Z.includes(Be.id))){const Be=K.map(tt=>tt.id);ne(Z.filter(tt=>!Be.includes(tt)))}else{const Be=K.map(tt=>tt.id);ne([...new Set([...Z,...Be])])}},B=U=>{const K=l.find(Be=>Be.id===U);e?.toUpperCase()==="GROUP MANAGER"&&K&&Number(K.created_by)!==Number(r)||ne(Be=>Be.includes(U)?Be.filter(tt=>tt!==U):[...Be,U])},ce=async()=>{if(Z.length===0)return;const U=e?.toUpperCase()==="GROUP MANAGER",K=["CEO","ADMIN"].includes(e?.toUpperCase());if(U&&!Z.every(Be=>{const tt=l.find(lt=>lt.id===Be);return tt&&Number(tt.created_by)===Number(r)})){V.error("You can only archive targets you created");return}Y({title:K?"Delete Targets":"Archive Targets",message:a.jsxs("span",{children:["Are you sure you want to ",K?"delete":"archive"," ",a.jsx("span",{className:"font-semibold",children:Z.length})," selected targets?"]}),confirmLabel:`${K?"Delete":"Archive"} ${Z.length} Target(s)`,cancelLabel:"Cancel",variant:K?"danger":"archive",action:async()=>{await se.post("/targets/admin/bulk-delete",{target_ids:Z}),V.success(`Successfully ${K?"deleted":"archived"} ${Z.length} targets`),ne([]),Re()}})},De=U=>{if(U.preventDefault(),Ne(!0),!H.user_id){V.error("Assign User is required.");return}if(!H.period_type){V.error("Period Type is required.");return}const K=H.use_annual_mode&&H.period_type!=="CUSTOM"&&!A;if(K){if(!H.annual_amount||Number(H.annual_amount)<=0){V.error("Annual target amount must be greater than 0.");return}}else if(!H.target_amount||Number(H.target_amount)<=0){V.error("Target amount must be greater than 0.");return}if(!K&&H.start_date&&H.end_date&&new Date(H.end_date)<new Date(H.start_date)){V.error("End date must be after start date.");return}const je=A?"Update Target":"Create Target(s)",Be=()=>{const Nt=Number(H.period_number)||1;return H.period_type==="MONTHLY"?Math.max(1,12-Nt+1):H.period_type==="QUARTERLY"?Math.max(1,4-Nt+1):H.period_type==="SEMIANNUAL"?Math.max(1,2-Nt+1):1},tt=()=>{const Nt=Number(H.annual_amount)||0,Ft=jZ.find(da=>da.value===H.period_type);return Ft?(Nt/Ft.divisor).toFixed(2):0},lt=K?`This will create ${Be()} ${H.period_type?.toLowerCase()} target(s) for the selected user.

Annual Target: ${i}${Number(H.annual_amount).toLocaleString()}
Per Period: ${i}${Number(tt()).toLocaleString()}

The first period may be prorated if it starts mid-period.`:"Are you sure you want to proceed?";Y({title:je,message:lt,confirmLabel:je,cancelLabel:"Cancel",variant:"primary",action:async()=>{O(!0);try{if(A){const Nt={user_id:Number(H.user_id),target_amount:Number(H.target_amount),start_date:H.start_date,end_date:H.end_date,period_type:H.period_type||"CUSTOM",period_year:H.period_year||new Date().getFullYear(),period_number:H.period_number||null};await se.put(`/targets/admin/${I}`,Nt),V.success("Target updated successfully.")}else if(K){const Nt=new Date().toISOString().split("T")[0],Ft={user_id:Number(H.user_id),annual_amount:Number(H.annual_amount),period_type:H.period_type,generation_date:H.start_date||Nt,period_year:Number(H.period_year)||new Date().getFullYear(),period_number:Number(H.period_number)||1,prorate_first_period:H.prorate_first_period!==!1},da=await se.post("/targets/admin/create-annual-targets",Ft);Re(),V.success(da.data.message||"Targets created successfully.")}else{const Nt={user_id:Number(H.user_id),target_amount:Number(H.target_amount),start_date:H.start_date,end_date:H.end_date,period_type:H.period_type||"CUSTOM",period_year:H.period_year||new Date().getFullYear(),period_number:H.period_number||null};await se.post("/targets/admin/create",Nt),Re(),V.success("Target created successfully.")}T(!1),Re()}catch(Nt){console.error(Nt);const Ft=Nt.response?.data?.detail||Nt.message||"Operation failed.";V.error(Ft)}finally{O(!1)}}})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[h&&a.jsx(Wt,{message:"Loading targets..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold",children:[a.jsx(mr,{className:"mr-2 text-blue-600"})," Targets"]}),Le&&a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:F,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Target"]})})]}),e?.toUpperCase()!=="SALES"&&a.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[a.jsxs("button",{onClick:()=>Oe("overview"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ue==="overview"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(BI,{className:"inline mr-2"}),"Overview"]}),a.jsxs("button",{onClick:()=>Oe("leaderboard"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ue==="leaderboard"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(t2,{className:"inline mr-2"}),"Leaderboard"]}),a.jsxs("button",{onClick:()=>Oe("history"),className:`px-4 py-3 text-sm font-medium border-b-2 transition ${ue==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(Vs,{className:"inline mr-2"}),"History"]})]}),ue==="overview"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[a.jsx(Rc,{title:"Total Targets",value:Ct.totalCount,icon:a.jsx(mr,{size:22}),color:"blue"}),a.jsx(Rc,{title:"Target Amount",value:`${i}${Ct.totalTarget.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(o,{size:22}),color:"green"}),a.jsx(Rc,{title:"Achieved Amount",value:`${i}${Ct.totalAchieved.toLocaleString("en-US",{maximumFractionDigits:0})}`,icon:a.jsx(od,{size:22}),color:"purple"}),a.jsx(Rc,{title:"Achievement Rate",value:`${Ct.achievement}%`,icon:a.jsx(mr,{size:22}),color:"orange"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"mb-4 text-center",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Sales Achievement"}),a.jsx("div",{className:"h-[38px] w-full invisible"})]}),jt.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(R_,{width:"100%",height:"100%",children:a.jsxs(v$e,{data:jt,children:[a.jsx(IE,{strokeDasharray:"3 3",vertical:!1}),a.jsx(BE,{dataKey:"name",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(qE,{tickLine:!1,axisLine:!1,label:{value:"Amount",angle:-90,position:"insideLeft",offset:3},domain:[0,U=>Math.ceil(U/50)*50],tick:{fontSize:12,fill:"#6b7280"}}),a.jsx(Q_,{cursor:{fill:"rgba(0, 0, 0, 0.15)"},wrapperStyle:{outline:"none",zIndex:9999,pointerEvents:"auto"},contentStyle:{backgroundColor:"#ffffff",border:"2px solid #1f2937",borderRadius:"8px",padding:"12px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.2)",zIndex:9999,pointerEvents:"auto"},labelFormatter:U=>`Sales: ${U}`,formatter:(U,K,je)=>{if(!je||!je.payload)return[U,K];const Be=je.payload,tt=Number(Be.achievement)||0,lt=Number(Be.target)||0,Nt=Math.max(0,lt-tt),Ft=lt>0?(tt/lt*100).toFixed(1):0;return K==="Achieved"?[`${i}${tt.toLocaleString()} (${Ft}%)`,"Achieved"]:K==="Remaining"?[`${i}${Nt.toLocaleString()}`,"Remaining"]:[U,K]}}),a.jsx(FE,{dataKey:"achievement",stackId:"a",fill:"#10b981",name:"Achieved",label:({x:U,y:K,width:je,value:Be,payload:tt})=>{if(!tt||tt.target===void 0)return null;const lt=(Be/tt.target*100).toFixed(0),Nt=K-10<0?10:K-10;return a.jsxs("text",{x:U+je/2,y:Nt,textAnchor:"middle",fill:"#111827",fontSize:10,fontWeight:500,children:[lt,"%"]})}}),a.jsx(FE,{dataKey:U=>Math.max(0,U.target-U.achievement),stackId:"a",fill:"#e5e7eb",name:"Remaining",radius:[0,4,4,0]})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(Wie,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No sales data available"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow p-4 md:h-[420px] h-[350px] flex flex-col",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Target Distribution by Sales"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 justify-center items-center flex-wrap",children:[a.jsxs("select",{value:de,onChange:U=>{be(U.target.value),Te(1)},className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"annual",children:"Annual"}),a.jsx("option",{value:"semiannual",children:"Every 6 Months"}),a.jsx("option",{value:"trimester",children:"Every 4 Months"}),a.jsx("option",{value:"quarterly",children:"Quarterly"})]}),de!=="annual"&&a.jsxs("select",{value:oe,onChange:U=>Te(parseInt(U.target.value)),className:"border border-gray-300 rounded px-3 py-2 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[de==="semiannual"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Jun"}),a.jsx("option",{value:2,children:"Jul - Dec"})]}),de==="trimester"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Jan - Apr"}),a.jsx("option",{value:2,children:"May - Aug"}),a.jsx("option",{value:3,children:"Sep - Dec"})]}),de==="quarterly"&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:1,children:"Q1 (Jan - Mar)"}),a.jsx("option",{value:2,children:"Q2 (Apr - Jun)"}),a.jsx("option",{value:3,children:"Q3 (Jul - Sep)"}),a.jsx("option",{value:4,children:"Q4 (Oct - Dec)"})]})]})]})]}),At.length>0?a.jsx("div",{className:"flex-1 min-h-0 w-full",children:a.jsx(R_,{width:"100%",height:"100%",children:a.jsxs(P$e,{children:[a.jsx(Q_,{contentStyle:{backgroundColor:"#fff",border:"1px solid #333",borderRadius:"6px",padding:"10px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",outline:"none"},content:({active:U,payload:K})=>{if(U&&K&&K.length>0){const je=K[0].payload;return a.jsxs("div",{className:"bg-white p-3 border border-gray-300 rounded shadow-lg",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:je.name}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[a.jsx("span",{className:"font-semibold",children:"Target Amount:"})," ",i,Number(je.targetAmount||0).toLocaleString("en-US",{maximumFractionDigits:0})]}),a.jsxs("p",{className:"text-xs text-purple-600 font-semibold mt-2",children:["Distribution: ",je.percentage,"%"]})]})}return null}}),a.jsx(zX,{data:At,dataKey:"targetAmount",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:U,percentage:K,fill:je})=>a.jsxs("text",{fill:je,fontSize:12,fontWeight:600,children:[U.split(" ")[0],": ",K,"%"]}),labelLine:!1,isAnimationActive:!0,animationDuration:800})]})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400",children:[a.jsx(BI,{size:48,className:"mb-2 opacity-20"}),a.jsx("p",{className:"text-gray-500 font-medium text-center",children:"No targets data available"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:flex-1 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search targets...",value:x,onChange:U=>v(U.target.value),className:"w-full outline-none"})]}),a.jsx("div",{className:"w-full sm:w-64",children:a.jsxs("select",{value:j,onChange:U=>b(U.target.value),className:"w-full h-11 border border-gray-300 rounded-lg px-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All users"}),ge.map(U=>a.jsx("option",{value:String(U.id),children:`${U.first_name||""} ${U.last_name||""}`.trim()||"Unknown"},U.id))]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 font-semibold text-gray-600",children:a.jsxs("tr",{children:[me&&a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ce.length>0&&(e?.toUpperCase()==="GROUP MANAGER"?Ce.filter(U=>Number(U.created_by)===Number(r)).every(U=>Z.includes(U.id))&&Ce.filter(U=>Number(U.created_by)===Number(r)).length>0:Ce.every(U=>Z.includes(U.id))),onChange:te})}),a.jsx("th",{className:"py-3 px-4 text-left",children:"User"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Target Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achieved Amount"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Achievement %"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"Start Date"}),a.jsx("th",{className:"py-3 px-4 text-left",children:"End Date"}),["ADMIN","CEO"].includes(e?.toUpperCase())&&a.jsx("th",{className:"py-3 px-4 text-left",children:"Status"}),me&&a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Z.length>0?a.jsx("button",{onClick:ce,className:e?.toUpperCase()==="GROUP MANAGER"?"text-orange-500 hover:text-orange-700 transition p-1 rounded-full hover:bg-orange-50":"text-red-500 hover:text-red-700 transition p-1 rounded-full hover:bg-red-50",title:e?.toUpperCase()==="GROUP MANAGER"?`Archive ${Z.length} selected targets`:`Delete ${Z.length} selected targets`,children:e?.toUpperCase()==="GROUP MANAGER"?a.jsx(Zt,{size:18}):a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Ce.length>0?Ce.map(U=>{const K=Number(U.target_amount)>0?(Number(U.achieved_amount)/Number(U.target_amount)*100).toFixed(1):0,Be=!(e?.toUpperCase()==="GROUP MANAGER")||Number(U.created_by)===Number(r);return a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-200",children:[me&&a.jsx("td",{className:"py-3 px-4",onClick:tt=>tt.stopPropagation(),children:Be&&a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Z.includes(U.id),onChange:()=>B(U.id)})}),a.jsx("td",{className:"py-3 px-4 text-left font-medium",onClick:()=>Q(U),children:U.user?`${U.user.first_name} ${U.user.last_name}`:"Unknown"}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:[i,Number(U.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:[i,Number(U.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${K>=100?"bg-green-500":K>=75?"bg-blue-500":K>=50?"bg-yellow-500":"bg-red-500"}`,children:[K,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:U.start_date}),a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:U.end_date}),["ADMIN","CEO"].includes(e?.toUpperCase())&&a.jsx("td",{className:"py-3 px-4 text-left",onClick:()=>Q(U),children:a.jsx("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${U.status&&U.status.toUpperCase()==="INACTIVE"?"bg-red-500":"bg-green-500"}`,children:U.status&&U.status.toUpperCase()==="INACTIVE"?"Inactive":"Active"})}),a.jsx("td",{})]},U.id)}):a.jsx("tr",{children:a.jsx("td",{colSpan:["ADMIN","CEO"].includes(e?.toUpperCase())?"9":"8",className:"py-4 px-4 text-center text-gray-500",children:"No targets found"})})})]})}),a.jsx(la,{className:"mt-4",totalItems:ye.length,pageSize:S,currentPage:N,onPrev:()=>w(U=>Math.max(U-1,1)),onNext:()=>w(U=>Math.min(U+1,Pe)),onPageSizeChange:U=>{_(U),w(1)},pageSizeOptions:[10,20,30,40,50],label:"targets"})]}),ue==="leaderboard"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm flex flex-wrap gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by Period:"})]}),a.jsx("select",{value:he,onChange:U=>ie(Number(U.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[...Array(5)].map((U,K)=>{const je=new Date().getFullYear()-K;return a.jsx("option",{value:je,children:je},je)})}),a.jsxs("select",{value:G,onChange:U=>{X(U.target.value),$e(1)},className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"All Periods"}),a.jsx("option",{value:"MONTHLY",children:"Monthly"}),a.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),a.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),a.jsx("option",{value:"ANNUAL",children:"Annual"})]}),G==="QUARTERLY"&&a.jsxs("select",{value:ve,onChange:U=>$e(Number(U.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:1,children:"Q1"}),a.jsx("option",{value:2,children:"Q2"}),a.jsx("option",{value:3,children:"Q3"}),a.jsx("option",{value:4,children:"Q4"})]}),G==="SEMIANNUAL"&&a.jsxs("select",{value:ve,onChange:U=>$e(Number(U.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:[a.jsx("option",{value:1,children:"H1 (Jan-Jun)"}),a.jsx("option",{value:2,children:"H2 (Jul-Dec)"})]}),G==="MONTHLY"&&a.jsx("select",{value:ve,onChange:U=>$e(Number(U.target.value)),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm",children:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((U,K)=>a.jsx("option",{value:K+1,children:U},K))}),a.jsx("button",{onClick:st,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700",children:"Apply Filter"})]}),Ze&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(Rc,{title:"Sales Reps",value:Ze.total_sales_reps,icon:a.jsx(rn,{size:22}),color:"blue"}),a.jsx(Rc,{title:"Met Quota",value:Ze.above_target_count,icon:a.jsx(od,{size:22}),color:"green"}),a.jsx(Rc,{title:"Below Quota",value:Ze.below_target_count,icon:a.jsx(a2,{size:22}),color:"orange"}),a.jsx(Rc,{title:"Team Achievement",value:`${Ze.overall_achievement}%`,icon:a.jsx(mr,{size:22}),color:"purple"})]}),Fe?a.jsx(Wt,{message:"Loading leaderboard..."}):xe?.entries?.length>0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[a.jsx(t2,{className:"mr-2 text-yellow-500"}),"Sales Leaderboard",xe.period_type!=="ALL"&&a.jsxs("span",{className:"ml-2 text-sm font-normal text-gray-500",children:["(",xe.period_type," ",xe.period_year,")"]})]})}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Rank"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Sales Rep"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Role"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"}),a.jsx("th",{className:"py-3 px-4 text-center font-semibold text-gray-600",children:"Actions"})]})}),a.jsx("tbody",{children:xe.entries.map(U=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full font-bold text-sm ${U.rank===1?"bg-yellow-100 text-yellow-700":U.rank===2?"bg-gray-100 text-gray-700":U.rank===3?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:U.rank})}),a.jsx("td",{className:"py-3 px-4 font-medium",children:U.user_name}),a.jsx("td",{className:"py-3 px-4 text-gray-500",children:U.role}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[i,Number(U.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[i,Number(U.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${U.achievement_percentage>=100?"bg-green-500":U.achievement_percentage>=75?"bg-blue-500":U.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[U.achievement_percentage,"%"]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("button",{onClick:()=>{ot(U.user_id),Oe("history")},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View History"})})]},U.user_id))})]})]}):a.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[a.jsx(t2,{size:48,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"No leaderboard data available for the selected period."})]}),Ze?.needs_attention?.length>0&&a.jsxs("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:[a.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-3 flex items-center",children:[a.jsx(a2,{className:"mr-2"}),"Needs Attention (Below 50%)"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Ze.needs_attention.map(U=>a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-red-100",children:[a.jsx("p",{className:"font-medium text-gray-800",children:U.user_name}),a.jsx("p",{className:"text-sm text-gray-500",children:U.role}),a.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[a.jsxs("span",{className:"text-red-600 font-semibold",children:[U.achievement_percentage,"%"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:[i,Number(U.remaining_amount).toLocaleString()," remaining"]})]})]},U.user_id))})]})]}),ue==="history"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Select Sales Rep to View History:"}),a.jsxs("div",{className:"flex gap-4 flex-wrap",children:[a.jsxs("select",{onChange:U=>{const K=Number(U.target.value);K&&ot(K,at)},className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:He?.user_id||"",children:[a.jsx("option",{value:"",children:"-- Select User --"}),u.map(U=>a.jsxs("option",{value:U.id,children:[U.first_name," ",U.last_name]},U.id))]}),a.jsxs("select",{className:"border border-gray-300 rounded-lg px-4 py-2 text-sm",value:at,onChange:U=>{const K=U.target.value;Ve(K),He?.user_id&&ot(Number(He.user_id),K)},children:[a.jsx("option",{value:"",children:"All period types"}),a.jsx("option",{value:"MONTHLY",children:"Monthly"}),a.jsx("option",{value:"QUARTERLY",children:"Quarterly"}),a.jsx("option",{value:"SEMIANNUAL",children:"Semi-Annual"}),a.jsx("option",{value:"ANNUAL",children:"Annual"}),a.jsx("option",{value:"CUSTOM",children:"Custom"})]})]})]}),it?a.jsx(Wt,{message:"Loading history..."}):He?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:He.user_name}),He.current_period&&He.previous_period&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Current Period"}),a.jsx("p",{className:"text-xs text-gray-500",children:He.current_period.period_label}),a.jsxs("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:[He.current_period.achievement_percentage,"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[i,Number(He.current_period.achieved_amount).toLocaleString()," / ",i,Number(He.current_period.target_amount).toLocaleString()]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Previous Period"}),a.jsx("p",{className:"text-xs text-gray-500",children:He.previous_period.period_label}),a.jsxs("p",{className:"text-2xl font-bold text-gray-700 mt-2",children:[He.previous_period.achievement_percentage,"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[i,Number(He.previous_period.achieved_amount).toLocaleString()," / ",i,Number(He.previous_period.target_amount).toLocaleString()]})]}),a.jsxs("div",{className:`rounded-lg p-4 ${He.growth_percentage>=0?"bg-green-50":"bg-red-50"}`,children:[a.jsx("p",{className:"text-sm font-medium",style:{color:He.growth_percentage>=0?"#16a34a":"#dc2626"},children:"Growth"}),a.jsxs("p",{className:`text-2xl font-bold mt-2 flex items-center ${He.growth_percentage>=0?"text-green-700":"text-red-700"}`,children:[He.growth_percentage>=0?a.jsx(od,{className:"mr-2"}):a.jsx(a2,{className:"mr-2"}),He.growth_percentage>=0?"+":"",He.growth_percentage?.toFixed(1),"%"]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[He.growth_amount>=0?"+":"",i,Number(He.growth_amount||0).toLocaleString()]})]})]}),He.periods?.length>0&&a.jsx("div",{className:"h-64",children:a.jsx(R_,{width:"100%",height:"100%",children:a.jsxs(y$e,{data:[...He.periods].reverse(),children:[a.jsx(IE,{strokeDasharray:"3 3"}),a.jsx(BE,{dataKey:"period_label",tick:{fontSize:12}}),a.jsx(qE,{tick:{fontSize:12}}),a.jsx(Q_,{formatter:(U,K)=>[`${i}${Number(U).toLocaleString()}`,K]}),a.jsx(IQ,{}),a.jsx($E,{type:"monotone",dataKey:"target_amount",stroke:"#6366f1",name:"Target",strokeWidth:2,dot:{r:2},activeDot:{r:5}}),a.jsx($E,{type:"monotone",dataKey:"achieved_amount",stroke:"#22c55e",name:"Achieved",strokeWidth:2,dot:{r:3},activeDot:{r:6}})]})})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h3",{className:"font-semibold",children:"All Historical Periods"})}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Period"}),a.jsx("th",{className:"py-3 px-4 text-left font-semibold text-gray-600",children:"Date Range"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Target"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achieved"}),a.jsx("th",{className:"py-3 px-4 text-right font-semibold text-gray-600",children:"Achievement"})]})}),a.jsx("tbody",{children:He.periods.map((U,K)=>a.jsxs("tr",{className:"border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 font-medium",children:U.period_label}),a.jsxs("td",{className:"py-3 px-4 text-gray-500",children:[U.start_date," - ",U.end_date]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[i,Number(U.target_amount).toLocaleString()]}),a.jsxs("td",{className:"py-3 px-4 text-right",children:[i,Number(U.achieved_amount).toLocaleString()]}),a.jsx("td",{className:"py-3 px-4 text-right",children:a.jsxs("span",{className:`px-2 py-1 rounded text-white text-xs font-semibold ${U.achievement_percentage>=100?"bg-green-500":U.achievement_percentage>=75?"bg-blue-500":U.achievement_percentage>=50?"bg-yellow-500":"bg-red-500"}`,children:[U.achievement_percentage,"%"]})})]},K))})]})]})]}):a.jsxs("div",{className:"bg-white rounded-xl p-8 text-center text-gray-500",children:[a.jsx(Vs,{size:48,className:"mx-auto mb-4 opacity-20"}),a.jsx("p",{children:"Select a sales rep to view their historical performance."})]})]})]}),z&&a.jsx(O$e,{target:z,currencySymbol:i,onClose:()=>Q(null),onEdit:()=>q(z),onArchive:()=>fe(z),canEdit:e?.toUpperCase()==="GROUP MANAGER"?z.created_by===null||Number(z.created_by)===Number(r):Le,canArchive:e?.toUpperCase()==="GROUP MANAGER"?z.created_by===null||Number(z.created_by)===Number(r):me,currentUserRole:e,currentUserId:r}),k&&Le&&a.jsx(M$e,{formData:H,users:u,isEditing:A,isSubmitting:M,isSubmitted:pe,onChange:Qe,onClose:()=>T(!1),onSubmit:De,fiscalSettings:Ue}),J&&a.jsx(I$e,{...J,loading:re,onConfirm:async()=>{we(!0),await J.action(),we(!1),Y(null)},onCancel:()=>Y(null)})]})}function Rc({title:e,value:t,icon:n,color:s="blue"}){const r={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600"};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200",children:[a.jsx("div",{className:`p-3 rounded-full ${r[s]} mr-4`,children:n}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:e}),a.jsx("p",{className:"text-xl font-bold",children:t})]})]})}function O$e({target:e,onClose:t,onEdit:n,onArchive:s,canEdit:r,canArchive:i,currencySymbol:o,currentUserRole:l,currentUserId:c}){const u=Number(e.target_amount)>0?(Number(e.achieved_amount)/Number(e.target_amount)*100).toFixed(1):0;return a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:d=>d.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Target Details"}),a.jsx("button",{onClick:t,className:"text-gray-200 hover:text-white transition cursor-pointer",children:a.jsx(ea,{size:25})})]}),(r||i)&&a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.user&&`${e.user.first_name} ${e.user.last_name}`})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[r&&a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:n,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),i&&a.jsx("button",{className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none cursor-pointer ${l?.toUpperCase()==="GROUP MANAGER"?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,onClick:s,children:l?.toUpperCase()==="GROUP MANAGER"?a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]}):a.jsxs(a.Fragment,{children:[a.jsx(va,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"})]}),a.jsxs("div",{className:"p-4 lg:p-6",children:[a.jsx("div",{className:"flex w-full bg-gray-600 text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Sales Person:"}),a.jsx("p",{children:e.user?`${e.user.first_name} ${e.user.last_name}`:"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Target Amount:"}),a.jsxs("p",{className:"text-green-600 font-semibold",children:[o,Number(e.target_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achieved Amount:"}),a.jsxs("p",{className:"text-blue-600 font-semibold",children:[o,Number(e.achieved_amount).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Achievement Rate:"}),a.jsxs("p",{className:`font-semibold ${u>=100?"text-green-600":u>=75?"text-blue-600":u>=50?"text-yellow-600":"text-red-600"}`,children:[u,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"Start Date:"}),a.jsx("p",{children:e.start_date})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-900",children:"End Date:"}),a.jsx("p",{children:e.end_date})]})]})})]})]})})}function M$e({formData:e,users:t,isEditing:n,isSubmitting:s,onChange:r,onClose:i,onSubmit:o,fiscalSettings:l,isSubmitted:c}){const u=l?.fiscal_start_month||1,d=e.use_annual_mode!==!1&&e.period_type!=="CUSTOM"&&e.period_type!==""&&!n,h=c&&d&&(!e.annual_amount||Number(e.annual_amount)<=0),p=c&&!d&&(!e.target_amount||Number(e.target_amount)<=0),x=c&&!e.period_type,v=n||e.period_type==="CUSTOM",j=_=>{const k=_.getFullYear(),T=String(_.getMonth()+1).padStart(2,"0"),A=String(_.getDate()).padStart(2,"0");return`${k}-${T}-${A}`},b=(_,k,T)=>{let A,E;if(_==="MONTHLY")A=new Date(k,T-1,1),E=new Date(k,T,0);else if(_==="QUARTERLY"){const M=(T-1)*3,O=(u-1+M)%12;let I=k;u>1&&(O>=u-1?I=k-1:I=k),A=new Date(I,O,1);const D=(O+2)%12,H=O+2>=12?I+1:I;E=new Date(H,D+1,0)}else if(_==="SEMIANNUAL"){const M=(T-1)*6,O=(u-1+M)%12;let I=k;u>1&&(O>=u-1?I=k-1:I=k),A=new Date(I,O,1);const D=(O+5)%12,H=O+5>=12?I+1:I;E=new Date(H,D+1,0)}else if(_==="ANNUAL"){const M=u-1;let O=u>1?k-1:k;A=new Date(O,M,1);const I=(u-2+12)%12;E=new Date(O+1,I+1,0)}return{startDate:A,endDate:E}},N=_=>{const k=_.target.value;if(r({target:{name:"period_type",value:k}}),e.use_annual_mode!==!1&&k!=="CUSTOM"&&k!==""&&!n){e.start_date||r({target:{name:"start_date",value:new Date().toISOString().split("T")[0]}});return}if(k!=="CUSTOM"){const A=e.period_year||new Date().getFullYear(),E=e.period_number||1,{startDate:M,endDate:O}=b(k,A,E);M&&O&&(r({target:{name:"start_date",value:j(M)}}),r({target:{name:"end_date",value:j(O)}}))}},w=_=>{const k=Number(_.target.value);r({target:{name:"period_number",value:k}});const T=e.period_year||new Date().getFullYear(),A=e.period_type;if(A!=="CUSTOM"&&!d){const{startDate:E,endDate:M}=b(A,T,k);E&&M&&(r({target:{name:"start_date",value:j(E)}}),r({target:{name:"end_date",value:j(M)}}))}},S=_=>{const k=Number(_.target.value);r({target:{name:"period_year",value:k}});const T=e.period_type,A=e.period_number||1;if(T!=="CUSTOM"&&!d){const{startDate:E,endDate:M}=b(T,k,A);E&&M&&(r({target:{name:"start_date",value:j(E)}}),r({target:{name:"end_date",value:j(M)}}))}};return f.useEffect(()=>{if(!d&&e.period_type!=="CUSTOM"&&!e.start_date){const _=e.period_year||new Date().getFullYear(),k=e.period_number||1,{startDate:T,endDate:A}=b(e.period_type,_,k);T&&A&&(r({target:{name:"start_date",value:j(T)}}),r({target:{name:"end_date",value:j(A)}}))}},[l]),a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl p-8 relative overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:i,className:"absolute top-5 right-5",children:a.jsx(ea,{size:24})}),a.jsx("h2",{className:"text-2xl font-semibold text-center mb-6",children:n?"Edit Target":"Add New Target"}),a.jsxs("form",{onSubmit:o,noValidate:!0,className:"grid gap-4 text-base",children:[a.jsxs("div",{className:"flex flex-col gap-1 relative",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700",children:["Assign User ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(D$e,{name:"user_id",items:t,value:e.user_id,onChange:r,getLabel:_=>`${_.first_name} ${_.last_name}`,placeholder:"Search user...",required:!0,isSubmitted:c})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Period Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"period_type",value:e.period_type,onChange:N,isSubmitted:c,className:`w-full border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                ${x?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`,children:[a.jsx("option",{value:"",children:"-- Choose Period Type --"}),jZ.map(_=>a.jsx("option",{value:_.value,children:_.label},_.value))]})]}),e.period_type&&e.period_type!=="CUSTOM"&&e.period_type!=="ANNUAL"&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:e.period_type==="MONTHLY"?"Month":e.period_type==="QUARTERLY"?"Quarter":"Half"}),a.jsxs("select",{name:"period_number",value:e.period_number,onChange:w,required:!0,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[e.period_type==="MONTHLY"&&["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((_,k)=>a.jsx("option",{value:k+1,children:_},k)),e.period_type==="QUARTERLY"&&[1,2,3,4].map(_=>a.jsxs("option",{value:_,children:["Q",_," ",l?.quarters?.[`Q${_}`]?`(${l.quarters[`Q${_}`]})`:""]},_)),e.period_type==="SEMIANNUAL"&&[1,2].map(_=>a.jsxs("option",{value:_,children:["H",_," ",l?.halves?.[`H${_}`]?`(${l.halves[`H${_}`]})`:`(${_===1?"Jan-Jun":"Jul-Dec"})`]},_))]})]}),e.period_type&&e.period_type!=="CUSTOM"&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:u!==1?"Fiscal Year":"Year"}),a.jsx("select",{name:"period_year",value:e.period_year,onChange:S,className:"w-full border text-gray-500 border-gray-300 rounded-lg p-2 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400",children:[...Array(5)].map((_,k)=>{const T=new Date().getFullYear()+1-k;return a.jsx("option",{value:T,children:u!==1?`FY${T}`:T},T)})})]}),d&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Used to prorate the first period when enabled."})]}),d&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Annual Target Amount ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"number",name:"annual_amount",placeholder:"e.g., 12000000 for 12M",value:e.annual_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                      ${h?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full year target. It will be automatically divided based on the period type."})]}),e.annual_amount&&Number(e.annual_amount)>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Period Breakdown:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsx("div",{className:"text-gray-600",children:"Annual:"}),a.jsx("div",{className:"text-right font-semibold text-gray-900",children:Number(e.annual_amount).toLocaleString()}),e.period_type==="MONTHLY"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-gray-600",children:["Monthly (",e.period_type,"):"]}),a.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/12).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="QUARTERLY"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-gray-600",children:"Quarterly:"}),a.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/4).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="SEMIANNUAL"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-gray-600",children:"Semi-Annual:"}),a.jsx("div",{className:"text-right font-semibold text-green-600",children:(Number(e.annual_amount)/2).toLocaleString(void 0,{maximumFractionDigits:2})})]}),e.period_type==="ANNUAL"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-gray-600",children:"Full Year:"}),a.jsx("div",{className:"text-right font-semibold text-green-600",children:Number(e.annual_amount).toLocaleString(void 0,{maximumFractionDigits:2})})]})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-2",children:"* First period may be prorated if starting mid-period"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"prorate_first_period",name:"prorate_first_period",checked:e.prorate_first_period!==!1,onChange:_=>r({target:{name:"prorate_first_period",value:_.target.checked}}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsx("label",{htmlFor:"prorate_first_period",className:"text-sm text-gray-700",children:"Prorate first period based on remaining days"})]})]}),v&&a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 text-left",children:["Target Amount ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"number",name:"target_amount",placeholder:"0.00",value:e.target_amount,onChange:r,required:!0,className:`w-full max-w-md border rounded-lg p-2 text-gray-700 focus:outline-none focus:ring-1
                    ${p?"border-red-500 focus:ring-red-400 focus:border-red-400":"border-gray-300 focus:ring-blue-400 focus:border-blue-400"}`})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"Start Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"start_date",value:e.start_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 text-left",children:"End Date"}),a.jsx("div",{className:"flex justify-center w-full",children:a.jsx("input",{type:"date",name:"end_date",value:e.end_date,onChange:r,className:"w-full max-w-md border text-gray-500 border-gray-300 rounded-lg p-1 focus:outline-none focus:ring-1 focus:ring-blue-400 focus:border-blue-400"})})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"bg-red-400 text-white px-5 py-2 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:s,className:"bg-tertiary text-white px-5 py-2 rounded-lg hover:bg-tertiary/90 disabled:opacity-50",children:s?"Saving...":n?"Update Target":"Create Targets"})]})]})]})})}function I$e({title:e,message:t,confirmLabel:n,cancelLabel:s,variant:r,loading:i,onConfirm:o,onCancel:l}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:t}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:l,disabled:i,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:s}),a.jsx("button",{onClick:o,disabled:i,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${r==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":r==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-tertiary/90 border border-tertiary"}`,children:i?"Processing...":n})]})]})})}function $$e(){const{userRole:e}=Ks();return a.jsx(x1,{currentUserRole:e,currentUserId:null})}const M7=[{value:"Product",label:"Product"},{value:"Service",label:"Service"}],dA={id:null,item_type:"Product",name:"",description:"",sku:"",variant:"",unit:"pcs",quantity:1,unit_price:0,discount_percent:0,discount_amount:0,line_total:0,sort_order:0},xb=e=>{const t=parseFloat(e.quantity)||0,n=parseFloat(e.unit_price)||0,s=parseFloat(e.discount_percent)||0,r=t*n,i=r*(s/100),o=r-i;return{discount_amount:i,line_total:o}},zc=(e,t="")=>{const n=parseFloat(e)||0;return`${t}${n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`};function bd({items:e=[],onChange:t,currencySymbol:n="",readOnly:s=!1,taxRate:r=0,discountType:i=null,discountValue:o=0,onTotalsChange:l}){const[c,u]=f.useState(null),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState({...dA});f.useEffect(()=>{if(l){const E=e.reduce((H,W)=>H+(parseFloat(W.line_total)||0),0);let M=0;i==="percentage"&&o?M=E*(parseFloat(o)/100):i==="fixed"&&o&&(M=parseFloat(o));const O=E-M,I=O*(parseFloat(r)/100),D=O+I;l({subtotal:E,discount_amount:M,tax_amount:I,total_amount:D})}},[e,r,i,o,l]);const b=f.useCallback(()=>{if(!v.name.trim()){V.error("Item name is required");return}if(parseFloat(v.unit_price)<=0){V.error("Unit price must be greater than 0");return}if(parseFloat(v.quantity)<=0){V.error("Quantity must be greater than 0");return}const E=xb(v),M={...v,...E,sort_order:e.length};t([...e,M]),j({...dA}),x(!1),V.success("Item added")},[v,e,t]),N=E=>{if(!d){V.error("No item being edited");return}if(!d.name.trim()){V.error("Item name is required");return}if(parseFloat(d.unit_price)<=0){V.error("Unit price must be greater than 0");return}if(parseFloat(d.quantity)<=0){V.error("Quantity must be greater than 0");return}const M=xb(d),O={...d,...M},I=e.map((D,H)=>H===E?O:D);t(I),u(null),h(null),V.success("Item updated")},w=f.useCallback(E=>{const M=e.filter((O,I)=>I!==E);M.forEach((O,I)=>{O.sort_order=I}),t(M),V.success("Item removed")},[e,t]),S=f.useCallback((E,M)=>{const O=M==="up"?E-1:E+1;if(O<0||O>=e.length)return;const I=[...e];[I[E],I[O]]=[I[O],I[E]],I.forEach((D,H)=>{D.sort_order=H}),t(I)},[e,t]),_=E=>{u(E),h({...e[E]})},k=()=>{u(null),h(null)},T=e.reduce((E,M)=>E+(parseFloat(M.line_total)||0),0),A=(E,M)=>c===M&&!s?a.jsxs("tr",{className:"bg-blue-50",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("select",{value:d.item_type,onChange:I=>h(D=>({...D,item_type:I.target.value})),className:"w-full px-2 py-1 border rounded text-sm",children:M7.map(I=>a.jsx("option",{value:I.value,children:I.label},I.value))})}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("input",{type:"text",value:d.name,onChange:I=>h(D=>({...D,name:I.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"Name *"}),a.jsx("input",{type:"text",value:d.variant||"",onChange:I=>h(D=>({...D,variant:I.target.value})),className:"w-full px-2 py-1 border rounded text-sm mt-1",placeholder:"Variant (optional)"})]}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"text",value:d.sku||"",onChange:I=>h(D=>({...D,sku:I.target.value})),className:"w-full px-2 py-1 border rounded text-sm",placeholder:"SKU"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("input",{type:"number",value:d.quantity,onChange:I=>h(D=>({...D,quantity:I.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0.01",step:"0.01"}),a.jsx("input",{type:"text",value:d.unit||"",onChange:I=>h(D=>({...D,unit:I.target.value})),className:"w-16 px-2 py-1 border rounded text-sm",placeholder:"Unit"})]})}),a.jsx("td",{className:"px-3 py-2",children:a.jsx("input",{type:"number",value:d.unit_price,onChange:I=>h(D=>({...D,unit_price:I.target.value})),className:"w-24 px-2 py-1 border rounded text-sm text-right",min:"0",step:"0.01"})}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{type:"number",value:d.discount_percent||0,onChange:I=>h(D=>({...D,discount_percent:I.target.value})),className:"w-16 px-2 py-1 border rounded text-sm text-right",min:"0",max:"100",step:"0.01"}),a.jsx("span",{className:"text-sm text-gray-500",children:"%"})]})}),a.jsx("td",{className:"px-3 py-2 text-right font-medium",children:zc(xb(d).line_total,n)}),a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>N(M),className:"p-1 text-green-600 hover:bg-green-100 rounded",title:"Save",children:a.jsx(wL,{size:16})}),a.jsx("button",{type:"button",onClick:k,className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Cancel",children:a.jsx(ea,{size:16})})]})})]},E.id||`edit-${M}`):a.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[a.jsx("td",{className:"px-3 py-2",children:a.jsx("span",{className:`inline-block px-2 py-0.5 rounded text-xs font-medium ${E.item_type==="Service"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:E.item_type})}),a.jsxs("td",{className:"px-3 py-2",children:[a.jsx("div",{className:"font-medium text-gray-900",children:E.name}),E.variant&&a.jsx("div",{className:"text-xs text-gray-500",children:E.variant}),E.description&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:E.description})]}),a.jsx("td",{className:"px-3 py-2 text-gray-600 text-sm",children:E.sku||"-"}),a.jsxs("td",{className:"px-3 py-2 text-center",children:[a.jsx("span",{className:"font-medium",children:parseFloat(E.quantity).toLocaleString()}),E.unit&&a.jsx("span",{className:"text-gray-500 text-sm ml-1",children:E.unit})]}),a.jsx("td",{className:"px-3 py-2 text-right",children:zc(E.unit_price,n)}),a.jsx("td",{className:"px-3 py-2 text-right text-sm",children:parseFloat(E.discount_percent)>0?a.jsxs("span",{className:"text-red-600",children:["-",parseFloat(E.discount_percent).toFixed(1),"%"]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-3 py-2 text-right font-medium",children:zc(E.line_total,n)}),!s&&a.jsx("td",{className:"px-3 py-2",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{type:"button",onClick:()=>S(M,"up"),disabled:M===0,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move up",children:a.jsx(Qie,{size:14})}),a.jsx("button",{type:"button",onClick:()=>S(M,"down"),disabled:M===e.length-1,className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded disabled:opacity-30",title:"Move down",children:a.jsx(Lt,{size:14})}),a.jsx("button",{type:"button",onClick:()=>_(M),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Edit",children:a.jsx(hn,{size:14})}),a.jsx("button",{type:"button",onClick:()=>w(M),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Delete",children:a.jsx(va,{size:14})})]})})]},E.id||`row-${M}`);return a.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border border-gray-300",children:[a.jsxs("h3",{className:"font-semibold text-gray-800",children:["Line Items ",e.length>0&&a.jsxs("span",{className:"text-gray-500 font-normal",children:["(",e.length,")"]})]}),!s&&!p&&a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition",children:[a.jsx(ta,{size:14}),"Add Item"]})]}),p&&!s&&a.jsxs("div",{className:"p-4 bg-blue-50 border border-gray-300",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Type"}),a.jsx("select",{value:v.item_type,onChange:E=>j({...v,item_type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",children:M7.map(E=>a.jsx("option",{value:E.value,children:E.label},E.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:v.name,onChange:E=>j({...v,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Product/Service name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"SKU"}),a.jsx("input",{type:"text",value:v.sku,onChange:E=>j({...v,sku:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item code"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Variant"}),a.jsx("input",{type:"text",value:v.variant,onChange:E=>j({...v,variant:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Size, color, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Quantity *"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",value:v.quantity,onChange:E=>j({...v,quantity:E.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0.01",step:"0.01"}),a.jsx("input",{type:"text",value:v.unit,onChange:E=>j({...v,unit:E.target.value}),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",placeholder:"Unit"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit Price *"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:n}),a.jsx("input",{type:"number",value:v.unit_price,onChange:E=>j({...v,unit_price:E.target.value}),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Discount %"}),a.jsx("input",{type:"number",value:v.discount_percent,onChange:E=>j({...v,discount_percent:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-3 focus:ring-blue-500 focus:border-blue-500",min:"0",max:"100",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Line Total"}),a.jsx("div",{className:"px-3 py-2 bg-gray-100 rounded-lg text-sm text-right font-medium",children:zc(xb(v).line_total,n)})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description (optional)"}),a.jsx("textarea",{value:v.description,onChange:E=>j({...v,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-3 focus:ring-blue-500 focus:border-blue-500",rows:2,placeholder:"Additional details about this item..."})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{x(!1),j({...dA})},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition text-sm",children:"Cancel"}),a.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm",children:"Add Item"})]})]}),e.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-50 border-b",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-20",children:"Type"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Item"}),a.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 w-24",children:"SKU"}),a.jsx("th",{className:"px-3 py-2 text-center font-medium text-gray-600 w-28",children:"Qty"}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Price"}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-20",children:"Disc."}),a.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 w-28",children:"Total"}),!s&&a.jsx("th",{className:"px-3 py-2 w-28"})]})}),a.jsx("tbody",{children:e.map((E,M)=>A(E,M))})]})}):a.jsxs("div",{className:"p-8 text-center text-gray-500",children:[a.jsx("p",{children:"No items added yet."}),!s&&a.jsx("button",{onClick:()=>x(!0),className:"mt-2 text-blue-600 hover:underline text-sm",children:"+ Add your first item"})]}),e.length>0&&a.jsx("div",{className:"border-t bg-gray-50 px-4 py-3",children:a.jsx("div",{className:"flex justify-end",children:a.jsxs("div",{className:"w-64 space-y-1",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),a.jsx("span",{className:"font-medium",children:zc(T,n)})]}),parseFloat(o)>0&&a.jsxs("div",{className:"flex justify-between text-sm text-red-600",children:[a.jsxs("span",{children:["Discount (",i==="percentage"?`${o}%`:"Fixed","):"]}),a.jsxs("span",{children:["-",zc(i==="percentage"?T*(parseFloat(o)/100):parseFloat(o),n)]})]}),parseFloat(r)>0&&a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:["Tax (",r,"%):"]}),a.jsx("span",{children:zc((T-(i==="percentage"?T*(parseFloat(o)/100):parseFloat(o)||0))*(parseFloat(r)/100),n)})]}),a.jsxs("div",{className:"flex justify-between text-base font-semibold pt-1 border-t",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:zc((()=>{let E=0;i==="percentage"&&o?E=T*(parseFloat(o)/100):i==="fixed"&&o&&(E=parseFloat(o));const M=T-E,O=M*(parseFloat(r)/100);return M+O})(),n)})]})]})})})]})}const uA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],mA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},$i=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected",inactive:"Inactive"}[t]||"Draft"},fA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",R$e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";case"inactive":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},z$e=e=>{switch($i(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";case"inactive":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},yb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",_g=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",F$e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},hA=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},I7=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},gA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Fw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},U$e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Fw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=Fw(t);return n||null},B$e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},H$e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function q$e(){const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,u]=f.useState([]),[d,h]=f.useState([]),[p,x]=f.useState([]),[v,j]=f.useState([]),[b,N]=f.useState(null),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(!1),[E,M]=f.useState(!1),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState(mA),[we,Z]=f.useState(""),[ne,pe]=f.useState("Filter by Status"),[Ne,de]=f.useState(null),be=f.useCallback(async()=>{if(w)try{z(!0);const $=(await se.get("/company/invoice-info"))?.data;e(`/admin/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:$}})}catch(Ae){const $=Ae?.response?.data?.detail||Ae?.message||"Failed to open print page.";V.error($)}finally{z(!1)}},[w,s]),[oe,Te]=f.useState(1),[ue,Oe]=f.useState(10),[xe,le]=f.useState("Overview"),[Fe,ke]=f.useState("Draft"),[He,Xe]=f.useState([]),[it,ze]=f.useState(null),{comments:at,addComment:Ve,refresh:Ze}=kn({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&Ze()},[w?.id,Ze]),f.useEffect(()=>{const $=t.state?.quoteID;if($){ze($),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(it&&r.length>0&&!o){const Ae=r.find($=>$.id===it);Ae?S(Ae):V.error("Quote not found."),ze(null)}},[it,p,o]),f.useEffect(()=>{let Ae=!0;return(async()=>{const L=U$e();if(L&&Ae){N(L);return}try{const ee=await se.get("/auth/me"),Ee=Fw(ee?.data);if(Ee&&Ae){N(Ee);return}}catch{}try{const ee=await se.get("/users/me"),Ee=Fw(ee?.data);if(Ee&&Ae){N(Ee);return}}catch{}Ae&&N(null)})(),()=>{Ae=!1}},[]);const Je=f.useCallback(Ae=>Ae&&d.find(L=>String(L.id)===String(Ae))?.name||"",[d]),Ue=f.useCallback(Ae=>{if(!Ae)return"";const $=p.find(L=>String(L.id)===String(Ae));return $?`${$.first_name} ${$.last_name}`.trim():""},[p]),_e=f.useCallback(Ae=>{if(!Ae)return"--";const $=c.find(L=>String(L.id)===String(Ae));return $?.deal_name||$?.name||`Deal #${I7(Ae)}`},[c]),he=f.useCallback(Ae=>{const $=c.find(Ee=>String(Ee.id)===String(Ae)),L=B$e($);let ee=H$e($);if(!ee&&L){const Ee=p.filter(Me=>String(Me.account_id||"")===String(L));if(Ee.length>0){const Me=[...Ee].sort((We,ft)=>{const St=`${We.first_name||""} ${We.last_name||""}`.trim().toLowerCase(),_t=`${ft.first_name||""} ${ft.last_name||""}`.trim().toLowerCase();return St.localeCompare(_t)});ee=String(Me[0].id)}}if(L&&ee){const Ee=p.find(Me=>String(Me.id)===String(ee));Ee?.account_id&&String(Ee.account_id)!==String(L)&&(ee="")}return{accountId:L||"",contactId:ee||""}},[c,p]),ie=f.useCallback(Ae=>{if(!Ae)return"--";if(Ae.deal?.deal_name)return Ae.deal.deal_name;if(Ae.deal?.name)return Ae.deal.name;const $=Ae.deal_id||Ae.deal?.id;return $?_e($):"--"},[_e]),G=f.useCallback(Ae=>{if(!Ae)return"--";if(Ae.account?.name)return Ae.account.name;let $=Ae.account_id||Ae.account?.id;if(!$){const L=Ae.deal_id||Ae.deal?.id;L&&($=he(L).accountId)}return $?Je($)||`Account #${$}`:"--"},[he,Je]),X=f.useCallback(Ae=>{if(!Ae)return"--";if(Ae.contact?.first_name||Ae.contact?.last_name)return`${Ae.contact?.first_name||""} ${Ae.contact?.last_name||""}`.trim()||"--";let $=Ae.contact_id||Ae.contact?.id;if(!$){const ee=Ae.deal_id||Ae.deal?.id;ee&&($=he(ee).contactId)}return($?Ue($):"")||($?`Contact #${$}`:"--")},[he,Ue]),ve=f.useCallback(async(Ae=null)=>{l(!0);try{const $=await se.get("/quotes/admin/fetch-all"),ee=[...Array.isArray($.data)?$.data:[]].sort((Ee,Me)=>{const We=Ee?.created_at||Ee?.updated_at||0,ft=Me?.created_at||Me?.updated_at||0;return new Date(ft)-new Date(We)});if(i(ee),Ae){const Ee=ee.find(Me=>Me.id===Ae);S(Ee||null)}}catch($){console.error($),i([]),$.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),$e=f.useCallback(async()=>{try{const Ae=await se.get("/deals/admin/fetch-all");u(Array.isArray(Ae.data)?Ae.data:[])}catch(Ae){console.error(Ae),Ae.response?.status===403&&V.warn("Unable to load deals (permission denied).")}},[]),Le=f.useCallback(async()=>{try{const Ae=await se.get("/accounts/admin/fetch-all");h(Array.isArray(Ae.data)?Ae.data:[])}catch(Ae){console.error(Ae),Ae.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),me=f.useCallback(async()=>{try{const Ae=await se.get("/contacts/admin/fetch-all");x(Array.isArray(Ae.data)?Ae.data:[])}catch(Ae){console.error(Ae),Ae.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},[]),Re=f.useCallback(async()=>{try{const Ae=await se.get("/users/all");j(Array.isArray(Ae.data)?Ae.data:[])}catch(Ae){console.error(Ae),Ae.response?.status===403&&V.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{ve(),$e(),Le(),me(),Re()},[ve,$e,Le,me,Re]);const qe=f.useMemo(()=>{const Ae=we.trim().toLowerCase(),$=ne.trim();return r.filter(L=>{const ee=ie(L),Ee=G(L),Me=X(L),We=hA(L.presented_date,L.validity_days),ft=[L.quote_id,ee,Ee,Me,L.total_amount?.toString(),L.validity_days?.toString(),L.presented_date?_g(L.presented_date):"",We?_g(We):"",L.assigned_user?.first_name,L.assigned_user?.last_name,L.creator?.first_name,L.creator?.last_name,L.status,L.notes,yb(L.created_at),yb(L.updated_at)],St=Ae===""||ft.some(Vt=>Vt==null?!1:Vt.toString().toLowerCase().includes(Ae)),_t=$==="Filter by Status"||$i(L.status)===$;return St&&_t})},[r,we,ne,ie,G,X]),rt=Math.max(1,Math.ceil(qe.length/ue)||1);f.useEffect(()=>Te(1),[we,ne]),f.useEffect(()=>{Te(Ae=>{const $=Math.max(1,Math.ceil(qe.length/ue)||1);return Ae>$?$:Ae})},[qe.length,ue]);const st=f.useMemo(()=>{const Ae=(oe-1)*ue;return qe.slice(Ae,Ae+ue)},[qe,oe,ue]),Ie=()=>Te(Ae=>Math.max(Ae-1,1)),ot=()=>Te(Ae=>Math.min(Ae+1,rt)),Ct=Ae=>{S(Ae),le("Overview"),ke($i(Ae?.status)||"Draft")},kt=()=>{S(null),le("Overview")},At=Ae=>{Ae.target.id==="quoteModalBackdrop"&&!D&&kt()},jt=f.useCallback(()=>{k(!1),A(!1),J(null),re(mA),M(!1)},[]),ge=Ae=>{Ae.target.id==="modalBackdrop"&&!E&&!D&&jt()},ye=Ae=>{const{name:$,value:L}=Ae.target;if($==="deal_id"){const{accountId:ee,contactId:Ee}=he(L);re(Me=>({...Me,deal_id:L,account_id:ee,contact_id:Ee}));return}re(ee=>({...ee,[$]:L}))},Pe=()=>{const Ae=n?.company?.tax_rate??0;re({...mA,tax_rate:Ae}),A(!1),J(null),k(!0)},Ce=Ae=>{if(!Ae)return;S(null);const $=Ae.deal?.id?String(Ae.deal.id):Ae.deal_id?String(Ae.deal_id):"",L=$?he($):{accountId:"",contactId:""},ee=Ae.account?.id?String(Ae.account.id):Ae.account_id?String(Ae.account_id):L.accountId,Ee=Ae.contact?.id?String(Ae.contact.id):Ae.contact_id?String(Ae.contact_id):L.contactId,Me=Ae.assigned_user?.id?String(Ae.assigned_user.id):Ae.assigned_to?String(Ae.assigned_to):"";re({deal_id:$,account_id:ee||"",contact_id:Ee||"",total_amount:Ae.total_amount?.toString()||"",presented_date:F$e(Ae.presented_date),validity_days:Ae.validity_days!==null&&Ae.validity_days!==void 0?String(Ae.validity_days):"",status:$i(Ae.status)||"Draft",assigned_to:Me,notes:Ae.notes||"",subtotal:parseFloat(Ae.subtotal)||0,tax_rate:parseFloat(Ae.tax_rate)||0,tax_amount:parseFloat(Ae.tax_amount)||0,discount_type:Ae.discount_type||"",discount_value:parseFloat(Ae.discount_value)||0,discount_amount:parseFloat(Ae.discount_amount)||0,currency:Ae.currency||"PHP",items:Array.isArray(Ae.items)?Ae.items.map(We=>({id:We.id,item_type:We.item_type||"Product",name:We.name||"",description:We.description||"",sku:We.sku||"",variant:We.variant||"",unit:We.unit||"pcs",quantity:parseFloat(We.quantity)||1,unit_price:parseFloat(We.unit_price)||0,discount_percent:parseFloat(We.discount_percent)||0,discount_amount:parseFloat(We.discount_amount)||0,line_total:parseFloat(We.line_total)||0,sort_order:We.sort_order||0})):[]}),A(!0),J(Ae.id),k(!0)},Qe=Ae=>{if(Ae.target.checked){const $=st.map(L=>L.id);Xe($)}else Xe([])},F=Ae=>{Xe($=>$.includes(Ae)?$.filter(L=>L!==Ae):[...$,Ae])},q=Ae=>{if(!Ae)return;const $=Ae.quote_id||"this quote";I({title:"Delete Quote",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:$}),"? This action cannot be undone."]}),confirmLabel:"Delete Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Ae.id,name:$}})},fe=async()=>{He.length!==0&&I({title:"Delete Quotes",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:He.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Delete ${He.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:He}})},[te,B]=f.useState(!1),ce=Ae=>{if(Ae.preventDefault(),B(!0),!b){V.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){V.error("Deal is required.");return}if(!Y.assigned_to){V.error("Assigned To is required.");return}const L=he(Y.deal_id),ee=Y.items.map((St,_t)=>({item_type:St.item_type||"Product",name:St.name,description:St.description||null,sku:St.sku||null,variant:St.variant||null,unit:St.unit||null,quantity:parseFloat(St.quantity)||1,unit_price:parseFloat(St.unit_price)||0,discount_percent:parseFloat(St.discount_percent)||0,sort_order:St.sort_order??_t})),Ee={deal_id:Number(Y.deal_id),account_id:L.accountId?Number(L.accountId):null,contact_id:L.contactId?Number(L.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:ee},Me=T&&Q?"update":"create",We=_e(Y.deal_id),ft=Me==="create"?{...Ee,created_by_id:Number(b)}:Ee;I({title:Me==="create"?"Confirm New Quote":"Confirm Update",message:Me==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:We}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:We}),"?"]}),confirmLabel:Me==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:Me,payload:ft,targetId:Q||null,name:We}})},De=async()=>{if(!O?.action){I(null);return}const{action:Ae}=O,{type:$,payload:L,targetId:ee,name:Ee}=Ae;H(!0);try{if($==="create")M(!0),await se.post("/quotes/admin",L),V.success("Quote created successfully."),jt(),await ve();else if($==="update"){if(!ee)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${ee}`,L),V.success("Quote updated successfully."),jt(),await ve(),w?.id===ee&&S(null)}else if($==="delete"){if(!ee)throw new Error("Missing quote identifier for deletion.");const Me=w?.id;de(ee),await se.delete(`/quotes/admin/${ee}`),V.success(`Quote "${Ee}" deleted successfully.`),await ve(Me&&Me!==ee?Me:null),Me===ee&&S(null)}else $==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:He}),V.success(`Successfully deleted ${He.length} quotes`),Xe([]),await ve())}catch(Me){console.error(Me);const We=$==="create"?"Failed to create quote. Please review the details and try again.":$==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";V.error(We),($==="create"||$==="update")&&M(!1),$==="delete"&&de(null)}finally{($==="create"||$==="update")&&M(!1),$==="delete"&&de(null),H(!1),I(null)}},U=()=>{D||I(null)},K=f.useCallback((Ae,$)=>{const L=Ae?.deal_id??Ae?.deal?.id??"",ee=L?Number(L):null,Ee=ee?he(String(ee)):{accountId:"",contactId:""},Me=Ae?.account_id??Ae?.account?.id??Ee.accountId??null,We=Ae?.contact_id??Ae?.contact?.id??Ee.contactId??null,ft=Ae?.total_amount??0,St=Ae?.assigned_to??Ae?.assigned_user?.id??null;return{deal_id:ee,account_id:Me!=null&&String(Me).trim()!==""?Number(Me):null,contact_id:We!=null&&String(We).trim()!==""?Number(We):null,total_amount:Number(ft),presented_date:Ae?.presented_date||null,validity_days:Ae?.validity_days===""||Ae?.validity_days===void 0||Ae?.validity_days===null?null:Number(Ae.validity_days),status:$,assigned_to:St!=null&&String(St).trim()!==""?Number(St):null,notes:Ae?.notes?.trim()||null}},[he]),je=f.useCallback(async()=>{if(!w?.id)return;const Ae=$i(Fe),$=[Ae,Ae.toLowerCase()],L=async ee=>se.patch(`/quotes/admin/${w.id}/status`,{status:ee},{headers:{"Content-Type":"application/json"}});try{let ee=!1;for(const Ee of $)try{await L(Ee),ee=!0;break}catch(Me){if(Me?.response?.status===422)continue;throw Me}if(!ee){const Ee=K(w,Ae);if(!Ee.deal_id){V.error("Cannot update status: missing deal_id on selected quote.");return}if(!Ee.total_amount||Ee.total_amount<=0){V.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Ee)}V.success(`Quote status updated to ${Ae}`),S(null),le("Overview"),await ve()}catch(ee){console.error(ee);const Ee=ee?.response?.data?.message||(ee?.response?.data?.errors?Object.values(ee.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";V.error(Ee)}},[w,Fe,ve,K]),Be=[{label:"Filter by Status",value:"Filter by Status"},...uA.map(Ae=>({label:Ae.label,value:Ae.value}))],tt=O?.action?.type==="delete"?O.action.targetId:null,lt=w&&(Ne===w.id||tt===w.id),Nt=w&&Ne===w.id,Ft=w?a.jsx("div",{id:"quoteModalBackdrop",onClick:At,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:Ae=>Ae.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:kt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ie(w)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${z$e(w.status)}`,children:fA(w.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:be,disabled:W||E||D,children:[a.jsx(ra,{className:"mr-2"}),W?"Preparing...":"Print Quotation"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ce(w),disabled:D||O?.action?.type==="update"&&O.action.targetId===w.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>q(w),disabled:!!lt,children:Nt?"Deleting...":a.jsxs(a.Fragment,{children:[a.jsx(va,{className:"mr-2"}),"Delete"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(Ae=>a.jsx("button",{onClick:()=>le(Ae),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${xe===Ae?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:Ae},Ae))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[xe==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:gA(w.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ie(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:G(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:X(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:_g(w.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:_g(hA(w.presented_date,w.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:fA(w.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:yb(w.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:yb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&a.jsx("div",{className:"mt-6",children:a.jsx(bd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),xe==="Notes"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),a.jsx(Tn,{comments:at,onAddComment:Ve})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${gA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||$i(w.status)||"Draft",onChange:Ae=>ke(Ae.target.value),children:uA.map(Ae=>a.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))}),a.jsx("button",{onClick:je,disabled:$i(Fe)===$i(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${$i(Fe)===$i(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,da=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(Wt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ra,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{Pe(),B(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:we,onChange:Ae=>Z(Ae.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:ne,onChange:Ae=>pe(Ae.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Be.map(Ae=>a.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:st.length>0&&He.length===st.length,onChange:Qe,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:He.length>0?a.jsx("button",{onClick:fe,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${He.length} selected items`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):qe.length>0?st.map(Ae=>{const $=hA(Ae.presented_date,Ae.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ct(Ae),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:L=>L.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:He.includes(Ae.id),onChange:()=>F(Ae.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:gA(Ae.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie(Ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:G(Ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:X(Ae)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:Ae.total_amount?`${s}${Number(Ae.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${R$e(Ae.status)}`,children:fA(Ae.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:Ae.assigned_user?`${Ae.assigned_user.first_name} ${Ae.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:_g($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},Ae.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:qe.length,pageSize:ue,currentPage:oe,onPrev:Ie,onNext:ot,onPageSizeChange:Ae=>{Oe(Ae),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Pa=_?a.jsx("div",{id:"modalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:Ae=>Ae.stopPropagation(),children:[a.jsx("button",{onClick:()=>{jt(),B(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||D,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ce,children:[a.jsx(z7,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:Ae=>{const{accountId:$,contactId:L}=he(Ae);re(ee=>({...ee,deal_id:Ae,account_id:$,contact_id:L}))},items:Array.isArray(c)?c:[],getLabel:Ae=>`${I7(Ae?.deal_id??"")} ${Ae?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:te,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(R7,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),a.jsx(R7,{label:"Contact",value:Ue(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),a.jsx("div",{className:"md:col-span-2 mt-2",children:a.jsx(bd,{items:Y.items,onChange:Ae=>re($=>({...$,items:Ae})),currencySymbol:s,readOnly:E,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:Ae=>{re($=>({...$,subtotal:Ae.subtotal,discount_amount:Ae.discount_amount,tax_amount:Ae.tax_amount,total_amount:Ae.total_amount}))}})}),a.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),a.jsxs("select",{value:Y.discount_type||"",onChange:Ae=>re($=>({...$,discount_type:Ae.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:E,children:[a.jsx("option",{value:"",children:"No Discount"}),a.jsx("option",{value:"percentage",children:"Percentage (%)"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),a.jsx("input",{type:"number",value:Y.discount_value||"",onChange:Ae=>re($=>({...$,discount_value:Ae.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:E||!Y.discount_type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:Y.tax_rate??"",onChange:Ae=>re($=>({...$,tax_rate:Ae.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),a.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsx($7,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ye,disabled:E}),a.jsx($7,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ye,placeholder:"30",disabled:E}),a.jsx(z7,{label:"Assigned To",value:Y.assigned_to||"",onChange:Ae=>re($=>({...$,assigned_to:Ae})),items:Array.isArray(v)?v:[],getLabel:Ae=>{const $=`${Ae?.first_name??""} ${Ae?.last_name??""}`.trim();if(!$)return Ae?.email||"";const L=Ae?.role?.toUpperCase()==="CEO"?"Admin":Ae?.role;return L?`${$} (${L})`:$},placeholder:"Search assignee...",required:!0,isSubmitted:te,disabled:E}),a.jsx(G$e,{label:"Status",name:"status",value:Y.status,onChange:ye,options:uA,required:!0,disabled:E}),a.jsx(V$e,{label:"Notes",name:"notes",value:Y.notes,onChange:ye,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{jt(),B(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||D,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||D,children:E?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,Ge=O?a.jsx(Y$e,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:De,onCancel:U,loading:D}):null;return a.jsxs(a.Fragment,{children:[w?Ft:da,Pa,Ge]})}function $7({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function R7({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function G$e({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",d=r.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function z7({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(W$e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function W$e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function V$e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function Y$e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const y1=[{value:"CEO",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Ag={firstName:"",lastName:"",email:"",password:"",role:""},Q$e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},_o=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",K$e=e=>{const t=_o(e),n=y1.find(s=>_o(s.value)===t);return n?n.value:e||""},YE=e=>{const t=_o(e),n=y1.find(s=>_o(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},F7=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},pA=(e,{size:t="sm"}={})=>{const n=_o(e),s=Q$e[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:YE(e)})},X$e=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},U7=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function Z$e(){const{user:e,loading:t}=Gt(),[n,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,u]=f.useState(""),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(Ag),[_,k]=f.useState(!1),[T,A]=f.useState(null),[E,M]=f.useState(!1),[O,I]=f.useState(1),[D,H]=f.useState(10),[W,z]=f.useState("Overview"),[Q,J]=f.useState(""),[Y,re]=f.useState(!1),[we,Z]=f.useState([]),ne=_o(e?.role),pe=["ADMIN","CEO"].includes(ne),Ne=!t&&pe,de=f.useMemo(()=>{const Le=y1.filter(me=>_o(me.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...Le]},[]),be=f.useCallback(Le=>{Le&&(s(me=>me.map(Re=>Re.id===Le?{...Re,highlight:!0}:Re)),setTimeout(()=>{s(me=>me.map(Re=>Re.id===Le?{...Re,highlight:!1}:Re))},2e3))},[]),oe=f.useCallback(async()=>{i(!0);try{const Le=await se.get("/users/all"),me=Array.isArray(Le.data)?Le.data:[],Re=U7(me);s(Re),h(qe=>qe&&(Re.find(st=>st.id===qe.id)||null)),console.log(Le.data)}catch(Le){console.error("Error fetching users:",Le);const me=Le.response?.data?.detail||"Failed to load users. Please try again later.";V.error(me)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!pe&&e&&V.error("You are not authorized to access User Management.")},[pe,t,e]),f.useEffect(()=>{t||!pe||oe()},[t,pe,oe]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const Te=f.useMemo(()=>{const Le=o.trim().toLowerCase(),me=_o(c);return U7(n.filter(Re=>{if(!Re)return!1;const qe=Le===""||[Re.first_name,Re.last_name,`${Re.first_name||""} ${Re.last_name||""}`,Re.email,YE(Re.role)].filter(Boolean).some(st=>st.toString().toLowerCase().includes(Le)),rt=me===""||me==="CEO"&&["CEO","ADMIN"].includes(_o(Re.role))||_o(Re.role)===me;return qe&&rt}))},[n,o,c]),ue=Math.max(1,Math.ceil(Te.length/D)||1);f.useEffect(()=>{I(1)},[o,c,D]),f.useEffect(()=>{I(Le=>{const me=Math.max(1,Math.ceil(Te.length/D)||1);return Le>me?me:Le})},[Te.length,D]);const Oe=f.useMemo(()=>{const Le=(O-1)*D;return Te.slice(Le,Le+D)},[Te,O,D]);Te.length===0||(O-1)*D+1,Math.min(O*D,Te.length);const xe=()=>I(Le=>Math.max(Le-1,1)),le=()=>I(Le=>Math.min(Le+1,ue)),Fe=()=>{S(Ag),j(!1),N(null),x(!0)},ke=Le=>{h(Le),z("Overview"),J(Le?.is_active?"Active":"Inactive")},He=Le=>{Le.target.id==="userModalBackdrop"&&!E&&Xe()},Xe=()=>{h(null)},it=(Le,me)=>{S(Re=>({...Re,[Le]:me}))},ze=()=>{const Le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let me="";for(let Re=0;Re<10;Re+=1)me+=Le.charAt(Math.floor(Math.random()*Le.length));it("password",me)},at=()=>{_||E||(x(!1),S(Ag),N(null),j(!1))},Ve=Le=>{S({firstName:Le.first_name||"",lastName:Le.last_name||"",email:Le.email||"",password:"",role:K$e(Le.role)}),j(!0),N(Le.id),x(!0),h(null)},Ze=Le=>{A({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[Le.first_name," ",Le.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:Le.id,name:`${Le.first_name||""} ${Le.last_name||""}`.trim()||Le.email||"user"}})},Je=Le=>{Le.preventDefault();const me=w.firstName.trim(),Re=w.lastName.trim(),qe=w.email.trim(),rt=w.password.trim(),st=w.role,Ie=!(v&&b);if(!me||!qe||!st){V.warn("Please fill in all required fields.");return}if(Ie&&!rt){V.warn("Please fill in all required fields.");return}if(rt&&rt.length<8){V.warn("Password should be at least 8 characters long.");return}const ot={first_name:me,last_name:Re,email:qe,role:st};(Ie||rt)&&(ot.password=rt);const Ct=`${me} ${Re}`.trim(),kt=Ie?"create":"update";A({title:kt==="create"?"Confirm New User":"Confirm User Update",message:kt==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:Ct})," with role"," ",a.jsx("span",{className:"font-semibold",children:YE(st)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:Ct||qe}),"?"]}),confirmLabel:kt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:kt,payload:ot,targetId:b,name:Ct||qe}})},Ue=async()=>{we.length!==0&&A({title:"Delete Users",message:a.jsxs("span",{children:["Are you sure you want to deactivate"," ",a.jsx("span",{className:"font-semibold",children:we.length})," selected users? This action cannot be undone."]}),confirmLabel:`Deactivate ${we.length} User(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",user_ids:we}})},_e=Le=>{if(Le.target.checked){const me=Oe.map(Re=>Re.id);Z(me)}else Z([])},he=Le=>{Z(me=>me.includes(Le)?me.filter(Re=>Re!==Le):[...me,Le])},ie=async()=>{if(!T?.action){A(null);return}const{action:Le}=T,{type:me,payload:Re,targetId:qe,name:rt}=Le;M(!0),(me==="create"||me==="update")&&k(!0);try{if(me==="create"){const Ie=(await se.post("/users/createuser",Re)).data;await oe(),be(Ie.id),V.success(`User "${rt}" created successfully.`),x(!1),S(Ag),N(null),j(!1)}else if(me==="update"){if(!qe)throw new Error("Missing user identifier for update.");const Ie=(await se.put(`/users/updateuser/${qe}`,Re)).data;await oe(),h(null),be(Ie.id),V.success(`User "${rt}" updated successfully.`),x(!1),S(Ag),N(null),j(!1)}else if(me==="delete"){if(!qe)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${qe}`),s(st=>st.map(Ie=>Ie.id===qe?{...Ie,is_active:!1}:Ie)),d&&d.id===qe&&(h(null),J("")),V.success(`User "${rt}" deactivated successfully.`)}else me==="bulk-delete"&&(await se.delete("/users/admin/bulk-delete",{data:{user_ids:Le.user_ids}}),s(st=>st.map(Ie=>Le.user_ids.includes(Ie.id)?{...Ie,is_active:!1}:Ie)),d&&Le.user_ids.includes(d.id)&&(h(null),J("")),V.success(`Successfully deactivated ${Le.user_ids.length} users`),Z([]))}catch(st){console.error("User management error:",st);const Ie=me==="create"?"Failed to create user. Please review the details and try again.":me==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",ot=st.response?.data?.detail||Ie;V.error(ot)}finally{(me==="create"||me==="update")&&k(!1),M(!1),A(null)}},G=()=>{E||A(null)},X=async()=>{if(!d||!Q)return;const Le=d.is_active?"Active":"Inactive";if(Q===Le)return;const me=Q==="Active";re(!0);try{const qe=(await se.put(`/users/updateuser/${d.id}`,{is_active:me})).data;s(rt=>rt.map(st=>st.id===qe.id?qe:st)),h(null),J(""),V.success(`User status updated to ${Q}`)}catch(Re){console.error("Failed to update user status:",Re);const qe=Re.response?.data?.detail||"Failed to update user status. Please try again.";V.error(qe)}finally{re(!1)}},ve=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!Ne)&&a.jsx(Wt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(pj,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:Fe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Xa,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:Le=>l(Le.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:Le=>u(Le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:de.map(Le=>a.jsx("option",{value:Le.value,children:Le.label},Le.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Oe.length>0&&Oe.every(Le=>we.includes(Le.id)),onChange:_e})}),a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:we.length>0?a.jsx("button",{onClick:Ue,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Deactivate ${we.length} selected users`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):Te.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Oe.map(Le=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${Le.highlight?"bg-green-50":""} ${Le.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4",onClick:me=>me.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:we.includes(Le.id),onChange:()=>he(Le.id)})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ke(Le),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[Le.first_name," ",Le.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>ke(Le),children:Le.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ke(Le),children:pA(Le.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>ke(Le),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${Le.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Le.is_active?"Active":"Inactive"})})]},Le.id))})]})}),a.jsx(la,{className:"mt-4",totalItems:Te.length,pageSize:D,currentPage:O,onPrev:xe,onNext:le,onPageSizeChange:Le=>{H(Le),I(1)},label:"users"})]}),$e=d?a.jsx("div",{id:"userModalBackdrop",onClick:He,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:Xe,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Za,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?a.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:X$e(d.first_name,d.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),pA(d.role,{size:"md"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ve(d),disabled:E,children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>Ze(d),disabled:E,children:[a.jsx(va,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(Le=>a.jsx("button",{onClick:()=>z(Le),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===Le?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:Le},Le))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:pA(d.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,Le=>Le.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:d.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:d.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:F7(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:d.last_login?F7(d.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:d.profile_picture?a.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const Le=encodeURIComponent(d.email),me=encodeURIComponent(""),Re=encodeURIComponent(""),qe=`https://mail.google.com/mail/?view=cm&fs=1&to=${Le}&su=${me}&body=${Re}`;window.open(qe,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(d.is_active?"Active":"Inactive"),onChange:Le=>J(Le.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:X,disabled:Y||Q===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||Q===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[ve,$e,a.jsx(J$e,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:E,formData:w,onClose:at,onSubmit:Je,onChange:it,onGeneratePassword:ze}),a.jsx(e6e,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:E,onConfirm:ie,onCancel:G})]})}function J$e({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(bb,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),a.jsx(bb,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),a.jsx(bb,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),a.jsx(bb,{label:"Role",type:"select",value:r.role,onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...y1],required:!0,disabled:u}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function bb({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function e6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const t6e=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"};function a6e(){const{user:e,loading:t,fetchUser:n}=Gt(),[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,p]=f.useState(!1),[x,v]=f.useState(null),[j,b]=f.useState(null),N=f.useRef(null),[w,S]=f.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[_,k]=f.useState({currentPassword:"",newPassword:"",confirmPassword:""});f.useEffect(()=>{e&&(S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),b(e.profile_picture||null))},[e]),f.useEffect(()=>{document.title="Manage Account | Sari-Sari CRM"},[]);const T=(I,D)=>{S(H=>({...H,[I]:D}))},A=(I,D)=>{k(H=>({...H,[I]:D}))},E=I=>{const D=I.target.files?.[0];if(!D)return;if(!D.type.startsWith("image/")){V.error("Please select an image file");return}if(D.size>5*1024*1024){V.error("Image size should be less than 5MB");return}const H=new FileReader;H.onloadend=()=>{v(H.result),b(H.result)},H.readAsDataURL(D)},M=async I=>{if(I.preventDefault(),!w.firstName.trim()||!w.lastName.trim()){V.warn("Please fill in all required fields.");return}r(!0);try{const D={first_name:w.firstName.trim(),last_name:w.lastName.trim(),phone_number:w.phoneNumber.trim()||null};x!==null&&(D.profile_picture=x),await se.put("/users/me",D),await n(),o(!1),v(null),window.dispatchEvent(new CustomEvent("userProfileUpdated")),V.success("Account information updated successfully!")}catch(D){console.error("Error updating account:",D);const H=D.response?.data?.detail||"Failed to update account information. Please try again.";V.error(H)}finally{r(!1)}},O=async I=>{if(I.preventDefault(),!_.newPassword||!_.confirmPassword){V.warn("Please fill in all password fields.");return}if(_.newPassword.length<8){V.warn("Password must be at least 8 characters long.");return}if(_.newPassword!==_.confirmPassword){V.warn("New password and confirm password do not match.");return}p(!0);try{const D={password:_.newPassword};await se.put("/users/me",D),await n(),k({currentPassword:"",newPassword:"",confirmPassword:""}),window.dispatchEvent(new CustomEvent("userProfileUpdated")),p(!1),V.success("Password changed successfully!")}catch(D){console.error("Error changing password:",D);const H=D.response?.data?.detail||"Failed to change password. Please try again.";V.error(H)}finally{p(!1)}};return a.jsxs("div",{className:"p-2 lg:p-8 font-inter relative",children:[(t||!e)&&a.jsx(Wt,{}),e&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-800 mb-2",children:"Manage Your Profile"}),a.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:"Update your account information and change your password"})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(sa,{className:"text-blue-600"}),"Profile Information"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:!i&&a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition text-sm",children:[a.jsx(hn,{}),"Edit Profile"]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 mb-6 pb-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex-shrink-0 relative group",children:[j?a.jsx("div",{className:"relative",children:a.jsx("img",{src:j,alt:`${e.first_name} ${e.last_name}`,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full object-cover border-2 border-gray-200 shadow-sm"})}):a.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center text-2xl sm:text-3xl font-semibold border-2 border-gray-200 shadow-sm",children:t6e(e.first_name,e.last_name)}),i&&a.jsxs("div",{className:"absolute bottom-0 right-0",children:[a.jsx("input",{type:"file",ref:N,accept:"image/*",onChange:E,className:"hidden",id:"profile-picture-upload"}),a.jsx("label",{htmlFor:"profile-picture-upload",className:"cursor-pointer bg-gray-900 text-white p-1.5 rounded-full shadow-lg hover:bg-gray-800 transition flex items-center justify-center border-2 border-white",title:"Change profile picture",children:a.jsx(m9,{size:14})})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[i?w.firstName:e.first_name," ",i?w.lastName:e.last_name]}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.email}),a.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-blue-100 text-blue-700 text-xs font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]})]}),i?a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["First Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:w.firstName,onChange:I=>T("firstName",I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",value:w.lastName,onChange:I=>T("lastName",I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0})]})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(sn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"email",value:w.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 cursor-not-allowed outline-none",readOnly:!0})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"tel",value:w.phoneNumber,onChange:I=>T("phoneNumber",I.target.value),placeholder:"+1 (555) 123-4567",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),S({firstName:e.first_name||"",lastName:e.last_name||"",email:e.email||"",phoneNumber:e.phone_number||""}),v(null),b(e.profile_picture||null),N.current&&(N.current.value="")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition",disabled:s,children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:s,children:[a.jsx(NL,{}),s?"Saving...":"Save Changes"]})]})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"First Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Name"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Phone Number"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.phone_number||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(ko,{className:"text-blue-600"}),"Change Password"]}),a.jsxs("form",{onSubmit:O,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:l?void 0:{WebkitTextSecurity:"disc"},value:_.newPassword,onChange:I=>A("newPassword",I.target.value),placeholder:"Enter new password (min. 8 characters)",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>c(I=>!I),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":l?"Hide password":"Show password",children:l?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-2 text-sm",children:["Confirm New Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",style:u?void 0:{WebkitTextSecurity:"disc"},value:_.confirmPassword,onChange:I=>A("confirmPassword",I.target.value),placeholder:"Confirm new password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",required:!0,minLength:8}),a.jsx("button",{type:"button",onClick:()=>d(I=>!I),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-700 hover:text-gray-900 focus:outline-none z-10 transition-colors cursor-pointer","aria-label":u?"Hide password":"Show password",children:u?a.jsx(Eu,{className:"size-5"}):a.jsx(Lu,{className:"size-5"})})]})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200 flex justify-center lg:justify-start",children:a.jsxs("button",{type:"submit",className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-70",disabled:h,children:[a.jsx(ko,{}),h?"Changing Password...":"Change Password"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6 mt-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2 mb-6 justify-center lg:justify-start",children:[a.jsx(h9,{className:"text-blue-600"}),"Account Information"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Role"}),a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 text-sm font-semibold rounded-md",children:e.role.toUpperCase()==="CEO"&&"Admin"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Status"}),a.jsx("span",{className:`inline-block px-3 py-1 text-sm font-semibold rounded-md ${e.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Company"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Auth Provider"}),a.jsx("p",{className:"text-gray-800 font-medium",children:e.auth_provider?e.auth_provider.charAt(0).toUpperCase()+e.auth_provider.slice(1):"N/A"})]}),e.created_at&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Account Created"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.last_login&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Last Login"}),a.jsx("p",{className:"text-gray-800 font-medium",children:new Date(e.last_login).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})})]})]})]})]})]})}function NZ({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=Tt(),c=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const u=async()=>{if(!e||!e.id){V.error("No deal selected");return}if(!s||s===e.stage){V.info("Please select a different stage");return}const d=e.id;o(!0);try{await se.put(`/deals/admin/${d}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{V.success("Deal status updated successfully")},300)}catch(h){console.error(h);const p=h.response?.data?.detail||"Failed to update deal status";V.error(p)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const d=encodeURIComponent(e.contact.email),h=encodeURIComponent(""),p=encodeURIComponent(""),x=`mailto:${d}?subject=${h}&body=${p}`;window.location.href=x},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const d=e.account?.id||e.account_id;l("/admin/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:d,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:d=>r(d.target.value),disabled:i,children:c.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))}),a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:u,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function CZ({selectedDeal:e,show:t,onClose:n,activeTab:s,setActiveTab:r,onEdit:i,onDelete:o,onStatusUpdate:l,relatedActs:c}){const u=Tt(),[d]=Us(),h=d.get("id"),[p,x]=f.useState(e||null),[v,j]=f.useState(s||"Overview"),[b,N]=f.useState(null),[w,S]=f.useState(""),{userRole:_}=Ks(),{comments:k,addComment:T,refresh:A}=kn({relatedType:"deal",relatedId:p?.id});f.useEffect(()=>{p?.id&&A()},[p?.id,A]);const E=s!==void 0?s:v;if(f.useEffect(()=>{_.toLowerCase()==="ceo"||_.toLowerCase()==="admin"?S("admin"):_.toLowerCase()==="group manager"||_.toLowerCase()==="group_manager"?S("group-manager"):_.toLowerCase()==="manager"?S("manager"):_.toLowerCase()==="sales"?S("sales"):S("guest")},[_]),f.useEffect(()=>{(async()=>{if(h&&!e)try{const W=((await se.get("/deals/admin/fetch-all")).data||[]).find(z=>z.id===parseInt(h));if(W){const z={...W,amount:typeof W.amount=="number"?W.amount:parseFloat(W.amount||0),probability:W.probability||0};x(z)}else console.warn("Deal not found with ID:",h)}catch(D){console.error("Error fetching deal:",D)}})()},[h,e]),!p&&!h||h&&!p)return null;const M=I=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[I]||"bg-gray-100 text-gray-700";function O(I){return I?new Date(I).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{n?n():u(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(ea,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${M(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",O(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[""," ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete"," "]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{i&&i(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",children:[a.jsx(va,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(I=>a.jsx("button",{onClick:()=>{r?r(I):j(I)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${E===I?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:I},I))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[E==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const I=(p?.stage||"PROSPECTING").toUpperCase(),H=(z=>z==="PROSPECTING"?0:z==="QUALIFICATION"?1:z==="PROPOSAL"?2:z==="NEGOTIATION"?3:z==="CLOSED_WON"||z==="CLOSED_LOST"?4:-1)(I);return[0,1,2,3,4].map(z=>H===z?"orange":H>z?"green":"gray").map((z,Q)=>a.jsxs(bt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${z==="green"?"bg-green-500 border-green-500":z==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),Q<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},Q))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((I,D)=>a.jsx("span",{className:"text-center flex-1 break-words",children:I},D))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),E==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),a.jsx(Tn,{comments:k,onAddComment:T})]}),s==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[c.tasks&&c.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",c.tasks.length,")"]})]}),b==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.tasks.map((I,D)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/tasks`,{state:{taskID:I.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||"No description"}),I.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",I.assigned_to.first_name," ",I.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O(I.due_date||I.created_at)})]},`task-${D}`))})]}),c.meetings&&c.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",c.meetings.length,")"]})]}),b==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.meetings.map((I,D)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/meetings`,{state:{meetingID:I.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.description||I.location||"No description"}),I.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",I.host.first_name," ",I.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O(I.start_time||I.created_at)})]},`meeting-${D}`))})]}),c.calls&&c.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",c.calls.length,")"]})]}),b==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.calls.map((I,D)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/calls`,{state:{callID:I.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:I.subject||I.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:I.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O(I.call_time||I.created_at)})]},`call-${D}`))})]}),c.quotes&&c.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",c.quotes.length,")"]})]}),b==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:c.quotes.map((I,D)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${w}/quotes`,{state:{quoteID:I.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(I.quote_id?I.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:I.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O(I.presented_date)||""})]},`quote-${D}`))})]}),(!c||(!c.tasks||c.tasks.length===0)&&(!c.meetings||c.meetings.length===0)&&(!c.calls||c.calls.length===0)&&(!c.quotes||c.quotes.length===0)&&(!c.deals||c.deals.length===0)&&(!c.contacts||c.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),E==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(NZ,{selectedDeal:p,onStatusUpdate:l,onClose:n})})]})]})]})})}function n6e(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Tt(),t=Jt(),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,u]=f.useState(null),[d,h]=f.useState("Overview"),[p,x]=f.useState(!1),[v,j]=f.useState(null),[b,N]=f.useState(!1),[w,S]=f.useState(1),[_,k]=f.useState(10),[T,A]=f.useState(!1),[E,M]=f.useState(null),[O,I]=f.useState(!1),[D,H]=f.useState([]),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState([]),[we,Z]=f.useState([]),[ne,pe]=f.useState([]),[Ne,de]=f.useState({}),[be,oe]=f.useState(null);f.useEffect(()=>{const F=t.state,q=F?.dealID;if(q&&!F?.openDealModal){oe(q),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(be&&v?.length>0&&!b){const F=v.find(q=>q.id===be);F?u(F):V.error("Deal not found."),oe(null)}},[be,v,b]);const[Te,ue]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Oe="dealDraft:admin/deals",xe=3600*1e3,le=f.useRef(!1);f.useEffect(()=>{if(!le.current){le.current=!0;try{const F=sessionStorage.getItem(Oe);if(!F)return;const q=JSON.parse(F);if(typeof q?.ts=="number"&&Date.now()-q.ts>xe){sessionStorage.removeItem(Oe);return}if(q?.returnTo&&q.returnTo!==t.pathname)return;q?.dealForm&&typeof q.dealForm=="object"&&ue(q.dealForm),typeof q?.isEditing=="boolean"&&z(q.isEditing),q?.currentDealId!==void 0&&J(q.currentDealId),x(!0),sessionStorage.removeItem(Oe)}catch{sessionStorage.removeItem(Oe)}}},[t.pathname]);const Fe=f.useCallback(()=>{try{sessionStorage.setItem(Oe,JSON.stringify({ts:Date.now(),returnTo:t.pathname,dealForm:Te,isEditing:W,currentDealId:Q}))}catch{}},[Oe,t.pathname,Te,W,Q]),ke=f.useCallback(()=>{Fe(),window.open("/admin/accounts?openModal=1","_blank","noopener,noreferrer")},[Fe]),He=f.useCallback(()=>{Fe(),window.open("/admin/contacts?openModal=1","_blank","noopener,noreferrer")},[Fe]),Xe={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},it=F=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[F]||F||"--",ze=F=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[F]||"bg-gray-100 text-gray-700",at=f.useCallback(async F=>{try{const q=await se.get(`/activities/deal/${F}`);de(q.data&&typeof q.data=="object"?q.data:{})}catch(q){console.error(q),q.response?.status===404&&(console.warn("No activities found for this account."),de({}))}},[]),Ve=f.useMemo(()=>{const F=n.trim().toLowerCase(),q=r.trim(),fe=o.trim();return(v??[]).filter(te=>{const B=[te?.name,te?.description,te?.account?.name,te?.contact?.first_name,te?.contact?.last_name,te?.assigned_deals?.first_name,te?.assigned_deals?.last_name],ce=F===""||B.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(F)),De=q==="Filter by Stage"||q===""||te.stage===Xe[q]||te.stage===q,U=fe==="Filter by Owner"||fe===""||`${te.assigned_deals?.first_name||""} ${te.assigned_deals?.last_name||""}`.trim().toLowerCase()===fe.toLowerCase();return ce&&De&&U})},[v,n,r,o]),Ze=Math.max(1,Math.ceil(Ve.length/_)||1);f.useEffect(()=>{S(1)},[n,r,o,_]),f.useEffect(()=>{S(F=>{const q=Math.max(1,Math.ceil(Ve.length/_)||1);return F>q?q:F})},[Ve.length,_]);const Je=f.useMemo(()=>{const F=(w-1)*_;return Ve.slice(F,F+_)},[Ve,w,_]),Ue=()=>S(F=>Math.max(F-1,1)),_e=()=>S(F=>Math.min(F+1,Ze)),he=()=>{ue({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),z(!1),J(null),x(!0)},ie=async()=>{N(!0);try{const F=await se.get("/deals/admin/fetch-all"),fe=[...Array.isArray(F.data)?F.data:[]].sort((te,B)=>{const ce=te?.created_at?new Date(te.created_at).getTime():0;return(B?.created_at?new Date(B.created_at).getTime():0)-ce});j(fe)}catch(F){F.response&&F.response.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch deals. Please try again later."),console.error(F)}finally{N(!1)}},G=async()=>{try{const F=await se.get("/accounts/admin/fetch-all");re(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},X=async()=>{try{const F=await se.get("/contacts/admin/fetch-all");Z(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},ve=async()=>{try{const F=await se.get("/users/all");pe(Array.isArray(F.data)?F.data:[])}catch(F){console.error(F),F.response?.status===403&&V.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{ie(),G(),X(),ve()},[]);const $e=F=>{F&&(ue({id:F.id||null,name:F.name||"",account_id:F.account_id?.toString()||"",primary_contact_id:F.primary_contact_id?.toString()||"",stage:F.stage||"PROPOSAL",amount:F.amount?.toString()||"",close_date:F.close_date?new Date(F.close_date).toISOString().split("T")[0]:"",assigned_to:F.assigned_to?.toString()||"",currency:F.currency||"PHP",description:F.description||""}),z(!0),J(F.id),u(null),x(!0))},Le=async(F=!1)=>{try{const q=await se.get("/deals/admin/fetch-all"),te=[...Array.isArray(q.data)?q.data:[]].sort((B,ce)=>{const De=B?.created_at?new Date(B.created_at).getTime():0;return(ce?.created_at?new Date(ce.created_at).getTime():0)-De});if(j(te),!F&&c&&c.id){const B=te.find(ce=>ce.id===c.id);B&&u({...B})}}catch(q){console.error("Failed to refresh deal data:",q),await ie()}},me=F=>{const q=F.name.trim();if(!q){V.error("Deal name is required.");return}if(!F.account_id){V.error("Account is required.");return}const fe=W&&Q?"update":"create",te=q;M({title:fe==="create"?"Confirm New Deal":"Confirm Update",message:fe==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:te}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:te}),"?"]}),confirmLabel:fe==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:fe,formData:F,targetId:Q||null,name:te}})},Re=F=>{if(!F)return;const q=F.name||"this deal";M({title:"Delete Deal",message:a.jsxs("span",{children:["Are you sure you want to permanently delete"," ",a.jsx("span",{className:"font-semibold",children:q}),"? This action cannot be undone."]}),confirmLabel:"Delete Deal",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:F.id,name:q}})},qe=F=>{if(F.target.checked){const q=Je.map(fe=>fe.id);H(q)}else H([])},rt=F=>{H(q=>q.includes(F)?q.filter(fe=>fe!==F):[...q,F])},st=async()=>{D.length!==0&&M({title:"Delete Deals",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:D.length})," selected deals? This action cannot be undone."]}),confirmLabel:`Delete ${D.length} Deal(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",dealIds:D}})},Ie=async()=>{if(!E?.action){M(null);return}const{action:F}=E,{type:q,formData:fe,targetId:te,name:B}=F;I(!0);try{if(q==="create"){A(!0);const ce={name:fe.name.trim(),account_id:parseInt(fe.account_id),primary_contact_id:fe.primary_contact_id?parseInt(fe.primary_contact_id):null,stage:fe.stage,amount:fe.amount?parseFloat(fe.amount):null,currency:fe.currency||"PHP",close_date:fe.close_date||null,description:fe.description||null,assigned_to:fe.assigned_to?parseInt(fe.assigned_to):null};await se.post("/deals/admin/create",ce),V.success(`Deal "${B}" created successfully.`),x(!1),await ie()}else if(q==="update"){if(!te)throw new Error("Missing deal identifier for update.");A(!0);const ce={};fe.name!==void 0&&(ce.name=fe.name.trim()),fe.account_id!==void 0&&fe.account_id!==""&&(ce.account_id=parseInt(fe.account_id)),fe.primary_contact_id!==void 0&&(ce.primary_contact_id=fe.primary_contact_id?parseInt(fe.primary_contact_id):null),fe.stage!==void 0&&(ce.stage=fe.stage),fe.amount!==void 0&&fe.amount!==""&&(ce.amount=parseFloat(fe.amount)),fe.currency!==void 0&&(ce.currency=fe.currency),fe.close_date!==void 0&&(ce.close_date=fe.close_date||null),fe.description!==void 0&&(ce.description=fe.description||null),fe.assigned_to!==void 0&&(ce.assigned_to=fe.assigned_to?parseInt(fe.assigned_to):null),await se.put(`/deals/admin/${te}`,ce),V.success(`Deal "${B}" updated successfully.`),x(!1),await ie()}else if(q==="delete"){if(!te)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${te}`),V.success(`Deal "${B}" deleted successfully.`),c?.id===te&&u(null),await ie()}else if(q==="bulk-delete"){const{dealIds:ce}=F;await se.delete("/deals/admin/bulk-delete",{data:{deal_ids:ce}}),V.success(`Successfully deleted ${ce.length} deals`),H([]),await ie()}}catch(ce){console.error(ce);const De=q==="create"?"Failed to create deal. Please review the details and try again.":q==="update"?"Failed to update deal. Please review the details and try again.":"Failed to delete deal. Please try again.",U=ce.response?.data?.detail||De;V.error(U)}finally{(q==="create"||q==="update")&&A(!1),I(!1),M(null)}},ot=()=>{O||M(null)},Ct=()=>{x(!1),ue({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),z(!1),J(null),A(!1)},kt=(v??[]).filter(F=>F.stage==="PROSPECTING"&&F.status!=="Inactive").length,At=(v??[]).filter(F=>F.stage==="QUALIFICATION"&&F.status!=="Inactive").length,jt=(v??[]).filter(F=>F.stage==="PROPOSAL"&&F.status!=="Inactive").length,ge=(v??[]).filter(F=>F.stage==="NEGOTIATION"&&F.status!=="Inactive").length,ye=(v??[]).filter(F=>F.stage==="CLOSED_WON"&&F.status!=="Inactive").length,Pe=(v??[]).filter(F=>F.stage==="CLOSED_LOST"&&F.status!=="Inactive").length,Ce=(v??[]).filter(F=>F.stage==="CLOSED_CANCELLED"&&F.status!=="Inactive").length,Qe=[{title:"Prospecting",value:kt,icon:xj,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:At,icon:gn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:jt,icon:na,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:ge,icon:od,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:ye,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:Pe,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:Ce,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(Wt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(na,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:he,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:Qe.map(F=>a.jsx(r6e,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:F=>s(F.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:F=>i(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:o,onChange:F=>l(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(F=>`${F.assigned_deals?.first_name} ${F.assigned_deals?.last_name}`))].map((F,q)=>a.jsx("option",{value:F,children:F},q))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Je.length>0&&Je.every(F=>D.includes(F.id)),onChange:qe})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage/Status"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:D.length>0?a.jsx("button",{onClick:st,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${D.length} selected items`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Ve.length>0?Je.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...F}),at(F.id)},children:[a.jsx("td",{className:"py-3 px-4",onClick:q=>q.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:D.includes(F.id),onChange:()=>rt(F.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.deal_id?F.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:F.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:F.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.contact?.first_name&&F.contact?.last_name?`${F.contact.first_name} ${F.contact.last_name}`:F.contact?.first_name||F.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:F.status==="Inactive"?a.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-300 text-gray-800",children:"Inactive"}):a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ze(F.stage)}`,children:it(F.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",F.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:F.assigned_deals?.first_name&&F.assigned_deals?.last_name?`${F.assigned_deals.first_name} ${F.assigned_deals.last_name}`:F.assigned_deals?.first_name||F.assigned_deals?.last_name||"--"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Ve.length,pageSize:_,currentPage:w,onPrev:Ue,onNext:_e,onPageSizeChange:F=>{k(F),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(i6e,{onClose:Ct,formData:Te,setFormData:ue,isEditing:W,onSubmit:me,isSubmitting:T||O,accounts:Y,contacts:we,users:ne,onAddAccount:ke,onAddContact:He,onRefreshAccounts:G,onRefreshContacts:X}),c&&a.jsx(CZ,{relatedActs:Ne,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:h,onEdit:$e,onDelete:Re,onStatusUpdate:Le}),E&&a.jsx(s6e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:Ie,onCancel:ot,loading:O})]})}function s6e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function r6e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function i6e({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],onAddAccount:u,onAddContact:d,onRefreshAccounts:h,onRefreshContacts:p}){const[x,v]=f.useState(!1),j=w=>{if(w.preventDefault(),v(!0),!t.name?.trim()){V.error("Deal name is required.");return}const S=Number(t.amount);if(!t.amount||isNaN(S)||S<=0){V.error("Amount must be a number greater than 0.");return}if(!t.account_id){V.error("Please select an account.");return}if(!t.primary_contact_id){V.error("Please select a primary contact.");return}if(!t.assigned_to){V.error("Please assign this deal to a user.");return}r?.(t)},b=w=>{w.target.id==="modalBackdrop"&&e()},N=f.useMemo(()=>{const w=String(t.account_id||"").trim(),S=Array.isArray(l)?l:[];return w?S.filter(_=>{const T=[_?.account_id,_?.accountId,_?.account?.id,_?.account?.account_id,_?.account?.accountId].find(A=>A!=null&&String(A).trim()!=="");return T?String(T)===w:!1}):S},[l,t.account_id]);return f.useEffect(()=>{const w=String(t.account_id||"").trim(),S=String(t.primary_contact_id||"").trim();if(!S||!w)return;N.some(k=>String(k?.id)===S)||n(k=>({...k,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,N,n]),a.jsx("div",{id:"modalBackdrop",onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:w=>w.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:j,noValidate:!0,children:[a.jsx(xA,{label:"Deal Name",name:"name",value:t.name,onChange:w=>n({...t,name:w.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:x,className:"md:col-span-2"}),a.jsx(yA,{label:"Account",value:t.account_id||"",onChange:w=>n({...t,account_id:w}),items:o||[],getLabel:w=>w?.name??"",placeholder:"Search account...",disabled:i,required:!0,isSubmitted:x,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:u,disabled:i,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:h,disabled:i,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]})}),a.jsx(yA,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:w=>n({...t,primary_contact_id:w}),items:N||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search contact...",required:!0,isSubmitted:x,disabled:i,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:d,disabled:i,title:"Add contact",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:p,disabled:i,title:"Refresh contacts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]})}),a.jsx(B7,{label:"Stage",name:"stage",value:t.stage,onChange:w=>n({...t,stage:w.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(xA,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:w=>n({...t,amount:w.target.value}),placeholder:"0",required:!0,isSubmitted:x}),a.jsx(B7,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:w=>n({...t,currency:w.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(xA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:w=>n({...t,close_date:w.target.value}),disabled:i}),a.jsx(yA,{label:"Assign To",value:t.assigned_to||"",onChange:w=>n({...t,assigned_to:w}),items:c||[],getLabel:w=>`${w?.first_name??""} ${w?.last_name??""}`.trim()||w?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:x,className:"md:col-span-2"}),a.jsx(l6e,{label:"Description",name:"description",value:t.description,onChange:w=>n({...t,description:w.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function xA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function B7({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function yA({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,actions:d=null}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),d?a.jsx("div",{className:"flex items-center",children:d}):null]}),a.jsx(o6e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h})]})}function o6e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function l6e({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}var c6e=Object.defineProperty,d6e=(e,t,n)=>t in e?c6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bA=(e,t,n)=>(d6e(e,typeof t!="symbol"?t+"":t,n),n);let u6e=class{constructor(){bA(this,"current",this.detect()),bA(this,"handoffState","pending"),bA(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Io=new u6e;function x0(e){var t;return Io.isServer?null:e==null?document:(t=e?.ownerDocument)!=null?t:document}function QE(e){var t,n;return Io.isServer?null:e==null?document:(n=(t=e?.getRootNode)==null?void 0:t.call(e))!=null?n:document}function SZ(e){var t,n;return(n=(t=QE(e))==null?void 0:t.activeElement)!=null?n:null}function m6e(e){return SZ(e)===e}function b1(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function uc(){let e=[],t={addEventListener(n,s,r,i){return n.addEventListener(s,r,i),t.add(()=>n.removeEventListener(s,r,i))},requestAnimationFrame(...n){let s=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(s))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let s=setTimeout(...n);return t.add(()=>clearTimeout(s))},microTask(...n){let s={current:!0};return b1(()=>{s.current&&n[0]()}),t.add(()=>{s.current=!1})},style(n,s,r){let i=n.style.getPropertyValue(s);return Object.assign(n.style,{[s]:r}),this.add(()=>{Object.assign(n.style,{[s]:i})})},group(n){let s=uc();return n(s),this.add(()=>s.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let s=e.indexOf(n);if(s>=0)for(let r of e.splice(s,1))r()}},dispose(){for(let n of e.splice(0))n()}};return t}function v1(){let[e]=f.useState(uc);return f.useEffect(()=>()=>e.dispose(),[e]),e}let yr=(e,t)=>{Io.isServer?f.useEffect(e,t):f.useLayoutEffect(e,t)};function om(e){let t=f.useRef(e);return yr(()=>{t.current=e},[e]),t}let Ya=function(e){let t=om(e);return bt.useCallback((...n)=>t.current(...n),[t])};function y0(e){return f.useMemo(()=>e,Object.values(e))}let f6e=f.createContext(void 0);function h6e(){return f.useContext(f6e)}function KE(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function Zl(e,t,...n){if(e in t){let r=t[e];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Zl),s}var Uw=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Uw||{}),ed=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ed||{});function Li(){let e=p6e();return f.useCallback(t=>g6e({mergeRefs:e,...t}),[e])}function g6e({ourProps:e,theirProps:t,slot:n,defaultTag:s,features:r,visible:i=!0,name:o,mergeRefs:l}){l=l??x6e;let c=_Z(t,e);if(i)return vb(c,n,s,o,l);let u=r??0;if(u&2){let{static:d=!1,...h}=c;if(d)return vb(h,n,s,o,l)}if(u&1){let{unmount:d=!0,...h}=c;return Zl(d?0:1,{0(){return null},1(){return vb({...h,hidden:!0,style:{display:"none"}},n,s,o,l)}})}return vb(c,n,s,o,l)}function vb(e,t={},n,s,r){let{as:i=n,children:o,refName:l="ref",...c}=vA(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(t){let p=!1,x=[];for(let[v,j]of Object.entries(t))typeof j=="boolean"&&(p=!0),j===!0&&x.push(v.replace(/([A-Z])/g,b=>`-${b.toLowerCase()}`));if(p){h["data-headlessui-state"]=x.join(" ");for(let v of x)h[`data-${v}`]=""}}if(op(i)&&(Object.keys(nu(c)).length>0||Object.keys(nu(h)).length>0))if(!f.isValidElement(d)||Array.isArray(d)&&d.length>1||b6e(d)){if(Object.keys(nu(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${s} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(nu(c)).concat(Object.keys(nu(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=d.props,x=p?.className,v=typeof x=="function"?(...N)=>KE(x(...N),c.className):KE(x,c.className),j=v?{className:v}:{},b=_Z(d.props,nu(vA(c,["ref"])));for(let N in h)N in b&&delete h[N];return f.cloneElement(d,Object.assign({},b,h,u,{ref:r(y6e(d),u.ref)},j))}return f.createElement(i,Object.assign({},vA(c,["ref"]),!op(i)&&u,!op(i)&&h),d)}function p6e(){let e=f.useRef([]),t=f.useCallback(n=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(n):s.current=n)},[]);return(...n)=>{if(!n.every(s=>s==null))return e.current=n,t}}function x6e(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function _Z(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):t[r]=s[r];if(t.disabled||t["aria-disabled"])for(let s in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(s)&&(n[s]=[r=>{var i;return(i=r?.preventDefault)==null?void 0:i.call(r)}]);for(let s in n)Object.assign(t,{[s](r,...i){let o=n[s];for(let l of o){if((r instanceof Event||r?.nativeEvent instanceof Event)&&r.defaultPrevented)return;l(r,...i)}}});return t}function Sr(e){var t;return Object.assign(f.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function nu(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function vA(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}function y6e(e){return bt.version.split(".")[0]>="19"?e.props.ref:e.ref}function op(e){return e===f.Fragment||e===Symbol.for("react.fragment")}function b6e(e){return op(e.type)}let v6e="span";var Bw=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Bw||{});function w6e(e,t){var n;let{features:s=1,...r}=e,i={ref:t,"aria-hidden":(s&2)===2?!0:(n=r["aria-hidden"])!=null?n:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return Li()({ourProps:i,theirProps:r,slot:{},defaultTag:v6e,name:"Hidden"})}let XE=Sr(w6e);function j6e(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function ld(e){return j6e(e)&&"tagName"in e}function Wu(e){return ld(e)&&"accessKey"in e}function td(e){return ld(e)&&"tabIndex"in e}function N6e(e){return ld(e)&&"style"in e}function C6e(e){return Wu(e)&&e.nodeName==="IFRAME"}function S6e(e){return Wu(e)&&e.nodeName==="INPUT"}let AZ=Symbol();function _6e(e,t=!0){return Object.assign(e,{[AZ]:t})}function Ko(...e){let t=f.useRef(e);f.useEffect(()=>{t.current=e},[e]);let n=Ya(s=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(s):r.current=s)});return e.every(s=>s==null||s?.[AZ])?void 0:n}let KD=f.createContext(null);KD.displayName="DescriptionContext";function TZ(){let e=f.useContext(KD);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,TZ),t}return e}function A6e(){let[e,t]=f.useState([]);return[e.length>0?e.join(" "):void 0,f.useMemo(()=>function(n){let s=Ya(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),r=f.useMemo(()=>({register:s,slot:n.slot,name:n.name,props:n.props,value:n.value}),[s,n.slot,n.name,n.props,n.value]);return bt.createElement(KD.Provider,{value:r},n.children)},[t])]}let T6e="p";function k6e(e,t){let n=f.useId(),s=h6e(),{id:r=`headlessui-description-${n}`,...i}=e,o=TZ(),l=Ko(t);yr(()=>o.register(r),[r,o.register]);let c=y0({...o.slot,disabled:s||!1}),u={ref:l,...o.props,id:r};return Li()({ourProps:u,theirProps:i,slot:c,defaultTag:T6e,name:o.name||"Description"})}let E6e=Sr(k6e),L6e=Object.assign(E6e,{});var kZ=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(kZ||{});let P6e=f.createContext(()=>{});function D6e({value:e,children:t}){return bt.createElement(P6e.Provider,{value:e},t)}let EZ=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};var O6e=Object.defineProperty,M6e=(e,t,n)=>t in e?O6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I6e=(e,t,n)=>(M6e(e,t+"",n),n),LZ=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ii=(e,t,n)=>(LZ(e,t,"read from private field"),n?n.call(e):t.get(e)),wA=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},H7=(e,t,n,s)=>(LZ(e,t,"write to private field"),t.set(e,n),n),bo,Yg,Qg;let $6e=class{constructor(t){wA(this,bo,{}),wA(this,Yg,new EZ(()=>new Set)),wA(this,Qg,new Set),I6e(this,"disposables",uc()),H7(this,bo,t),Io.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ii(this,bo)}subscribe(t,n){if(Io.isServer)return()=>{};let s={selector:t,callback:n,current:t(ii(this,bo))};return ii(this,Qg).add(s),this.disposables.add(()=>{ii(this,Qg).delete(s)})}on(t,n){return Io.isServer?()=>{}:(ii(this,Yg).get(t).add(n),this.disposables.add(()=>{ii(this,Yg).get(t).delete(n)}))}send(t){let n=this.reduce(ii(this,bo),t);if(n!==ii(this,bo)){H7(this,bo,n);for(let s of ii(this,Qg)){let r=s.selector(ii(this,bo));PZ(s.current,r)||(s.current=r,s.callback(r))}for(let s of ii(this,Yg).get(t.type))s(ii(this,bo),t)}}};bo=new WeakMap,Yg=new WeakMap,Qg=new WeakMap;function PZ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:jA(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:jA(e.entries(),t.entries()):q7(e)&&q7(t)?jA(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function jA(e,t){do{let n=e.next(),s=t.next();if(n.done&&s.done)return!0;if(n.done||s.done||!Object.is(n.value,s.value))return!1}while(!0)}function q7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var R6e=Object.defineProperty,z6e=(e,t,n)=>t in e?R6e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G7=(e,t,n)=>(z6e(e,typeof t!="symbol"?t+"":t,n),n),F6e=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(F6e||{});let U6e={0(e,t){let n=t.id,s=e.stack,r=e.stack.indexOf(n);if(r!==-1){let i=e.stack.slice();return i.splice(r,1),i.push(n),s=i,{...e,stack:s}}return{...e,stack:[...e.stack,n]}},1(e,t){let n=t.id,s=e.stack.indexOf(n);if(s===-1)return e;let r=e.stack.slice();return r.splice(s,1),{...e,stack:r}}},B6e=class DZ extends $6e{constructor(){super(...arguments),G7(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),G7(this,"selectors",{isTop:(t,n)=>t.stack[t.stack.length-1]===n,inStack:(t,n)=>t.stack.includes(n)})}static new(){return new DZ({stack:[]})}reduce(t,n){return Zl(n.type,U6e,t,n)}};const OZ=new EZ(()=>B6e.new());function MZ(e,t,n=PZ){return ROe.useSyncExternalStoreWithSelector(Ya(s=>e.subscribe(H6e,s)),Ya(()=>e.state),Ya(()=>e.state),Ya(t),n)}function H6e(e){return e}function b0(e,t){let n=f.useId(),s=OZ.get(t),[r,i]=MZ(s,f.useCallback(o=>[s.selectors.isTop(o,n),s.selectors.inStack(o,n)],[s,n]));return yr(()=>{if(e)return s.actions.push(n),()=>s.actions.pop(n)},[s,e,n]),e?i?r:!0:!1}let ZE=new Map,lp=new Map;function W7(e){var t;let n=(t=lp.get(e))!=null?t:0;return lp.set(e,n+1),n!==0?()=>V7(e):(ZE.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>V7(e))}function V7(e){var t;let n=(t=lp.get(e))!=null?t:1;if(n===1?lp.delete(e):lp.set(e,n-1),n!==1)return;let s=ZE.get(e);s&&(s["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",s["aria-hidden"]),e.inert=s.inert,ZE.delete(e))}function q6e(e,{allowed:t,disallowed:n}={}){let s=b0(e,"inert-others");yr(()=>{var r,i;if(!s)return;let o=uc();for(let c of(r=n?.())!=null?r:[])c&&o.add(W7(c));let l=(i=t?.())!=null?i:[];for(let c of l){if(!c)continue;let u=x0(c);if(!u)continue;let d=c.parentElement;for(;d&&d!==u.body;){for(let h of d.children)l.some(p=>h.contains(p))||o.add(W7(h));d=d.parentElement}}return o.dispose},[s,t,n])}function G6e(e,t,n){let s=om(r=>{let i=r.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&n()});f.useEffect(()=>{if(!e)return;let r=t===null?null:Wu(t)?t:t.current;if(!r)return;let i=uc();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>s.current(r));o.observe(r),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,s,e])}let Hw=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),W6e=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var El=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(El||{}),JE=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(JE||{}),V6e=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(V6e||{});function Y6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Hw)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Q6e(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(W6e)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var IZ=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(IZ||{});function K6e(e,t=0){var n;return e===((n=x0(e))==null?void 0:n.body)?!1:Zl(t,{0(){return e.matches(Hw)},1(){let s=e;for(;s!==null;){if(s.matches(Hw))return!0;s=s.parentElement}return!1}})}var X6e=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(X6e||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function $l(e){e?.focus({preventScroll:!0})}let Z6e=["textarea","input"].join(",");function J6e(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,Z6e))!=null?n:!1}function eRe(e,t=n=>n){return e.slice().sort((n,s)=>{let r=t(n),i=t(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function cp(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){let i=Array.isArray(e)?e.length>0?QE(e[0]):document:QE(e),o=Array.isArray(e)?n?eRe(e):e:t&64?Q6e(e):Y6e(e);r.length>0&&o.length>1&&(o=o.filter(x=>!r.some(v=>v!=null&&"current"in v?v?.current===x:v===x))),s=s??i?.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(s))-1;if(t&4)return Math.max(0,o.indexOf(s))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,h=o.length,p;do{if(d>=h||d+h<=0)return 0;let x=c+d;if(t&16)x=(x+h)%h;else{if(x<0)return 3;if(x>=h)return 1}p=o[x],p?.focus(u),d+=l}while(p!==SZ(p));return t&6&&J6e(p)&&p.select(),2}function $Z(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function tRe(){return/Android/gi.test(window.navigator.userAgent)}function Y7(){return $Z()||tRe()}function wb(e,t,n,s){let r=om(n);f.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return document.addEventListener(t,i,s),()=>document.removeEventListener(t,i,s)},[e,t,s])}function RZ(e,t,n,s){let r=om(n);f.useEffect(()=>{if(!e)return;function i(o){r.current(o)}return window.addEventListener(t,i,s),()=>window.removeEventListener(t,i,s)},[e,t,s])}const Q7=30;function aRe(e,t,n){let s=om(n),r=f.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=(function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]})(t);for(let h of d)if(h!==null&&(h.contains(u)||l.composed&&l.composedPath().includes(h)))return;return!K6e(u,IZ.Loose)&&u.tabIndex!==-1&&l.preventDefault(),s.current(l,u)},[s,t]),i=f.useRef(null);wb(e,"pointerdown",l=>{var c,u;Y7()||(i.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target)},!0),wb(e,"pointerup",l=>{if(Y7()||!i.current)return;let c=i.current;return i.current=null,r(l,()=>c)},!0);let o=f.useRef({x:0,y:0});wb(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),wb(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=Q7||Math.abs(c.y-o.current.y)>=Q7))return r(l,()=>td(l.target)?l.target:null)},!0),RZ(e,"blur",l=>r(l,()=>C6e(window.document.activeElement)?window.document.activeElement:null),!0)}function XD(...e){return f.useMemo(()=>x0(...e),[...e])}function zZ(e,t,n,s){let r=om(n);f.useEffect(()=>{e=e??window;function i(o){r.current(o)}return e.addEventListener(t,i,s),()=>e.removeEventListener(t,i,s)},[e,t,s])}function nRe(e){return f.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function sRe(e,t){let n=e(),s=new Set;return{getSnapshot(){return n},subscribe(r){return s.add(r),()=>s.delete(r)},dispatch(r,...i){let o=t[r].call(n,...i);o&&(n=o,s.forEach(l=>l()))}}}function rRe(){let e;return{before({doc:t}){var n;let s=t.documentElement,r=(n=t.defaultView)!=null?n:window;e=Math.max(0,r.innerWidth-s.clientWidth)},after({doc:t,d:n}){let s=t.documentElement,r=Math.max(0,s.clientWidth-s.offsetWidth),i=Math.max(0,e-r);n.style(s,"paddingRight",`${i}px`)}}}function iRe(){return $Z()?{before({doc:e,d:t,meta:n}){function s(r){for(let i of n().containers)for(let o of i())if(o.contains(r))return!0;return!1}t.microTask(()=>{var r;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=uc();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(r=window.scrollY)!=null?r:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(td(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);td(d)&&!s(d)&&(o=d)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),td(c.target)&&N6e(c.target))if(s(c.target)){let u=c.target;for(;u.parentElement&&s(u.parentElement);)u=u.parentElement;l.style(u,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(td(l.target)){if(S6e(l.target))return;if(s(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function oRe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function K7(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let pu=sRe(()=>new Map,{PUSH(e,t){var n;let s=(n=this.get(e))!=null?n:{doc:e,count:0,d:uc(),meta:new Set,computedMeta:{}};return s.count++,s.meta.add(t),s.computedMeta=K7(s.meta),this.set(e,s),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t),n.computedMeta=K7(n.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},n=[iRe(),rRe(),oRe()];n.forEach(({before:s})=>s?.(t)),n.forEach(({after:s})=>s?.(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});pu.subscribe(()=>{let e=pu.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let s=t.get(n.doc)==="hidden",r=n.count!==0;(r&&!s||!r&&s)&&pu.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&pu.dispatch("TEARDOWN",n)}});function lRe(e,t,n=()=>({containers:[]})){let s=nRe(pu),r=t?s.get(t):void 0,i=r?r.count>0:!1;return yr(()=>{if(!(!t||!e))return pu.dispatch("PUSH",t,n),()=>pu.dispatch("POP",t,n)},[e,t]),i}function cRe(e,t,n=()=>[document.body]){let s=b0(e,"scroll-lock");lRe(s,t,r=>{var i;return{containers:[...(i=r.containers)!=null?i:[],n]}})}function dRe(e=0){let[t,n]=f.useState(e),s=f.useCallback(c=>n(c),[]),r=f.useCallback(c=>n(u=>u|c),[]),i=f.useCallback(c=>(t&c)===c,[t]),o=f.useCallback(c=>n(u=>u&~c),[]),l=f.useCallback(c=>n(u=>u^c),[]);return{flags:t,setFlag:s,addFlag:r,hasFlag:i,removeFlag:o,toggleFlag:l}}var uRe={},X7,Z7;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((X7=process==null?void 0:uRe)==null?void 0:X7.NODE_ENV)==="test"&&typeof((Z7=Element?.prototype)==null?void 0:Z7.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var mRe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(mRe||{});function fRe(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function hRe(e,t,n,s){let[r,i]=f.useState(n),{hasFlag:o,addFlag:l,removeFlag:c}=dRe(e&&r?3:0),u=f.useRef(!1),d=f.useRef(!1),h=v1();return yr(()=>{var p;if(e){if(n&&i(!0),!t){n&&l(3);return}return(p=s?.start)==null||p.call(s,n),gRe(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){d.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var x;d.current&&yRe(t)||(u.current=!1,c(7),n||i(!1),(x=s?.end)==null||x.call(s,n))}})}},[e,n,t,h]),e?[r,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function gRe(e,{prepare:t,run:n,done:s,inFlight:r}){let i=uc();return xRe(e,{prepare:t,inFlight:r}),i.nextFrame(()=>{n(),i.requestAnimationFrame(()=>{i.add(pRe(e,s))})}),i.dispose}function pRe(e,t){var n,s;let r=uc();if(!e)return r.dispose;let i=!1;r.add(()=>{i=!0});let o=(s=(n=e.getAnimations)==null?void 0:n.call(e).filter(l=>l instanceof CSSTransition))!=null?s:[];return o.length===0?(t(),r.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),r.dispose)}function xRe(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let s=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=s}function yRe(e){var t,n;return((n=(t=e.getAnimations)==null?void 0:t.call(e))!=null?n:[]).some(s=>s instanceof CSSTransition&&s.playState!=="finished")}function ZD(e,t){let n=f.useRef([]),s=Ya(e);f.useEffect(()=>{let r=[...n.current];for(let[i,o]of t.entries())if(n.current[i]!==o){let l=s(t,r);return n.current=t,l}},[s,...t])}let w1=f.createContext(null);w1.displayName="OpenClosedContext";var Wi=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Wi||{});function j1(){return f.useContext(w1)}function bRe({value:e,children:t}){return bt.createElement(w1.Provider,{value:e},t)}function vRe({children:e}){return bt.createElement(w1.Provider,{value:null},e)}function wRe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Kc=[];wRe(()=>{function e(t){if(!td(t.target)||t.target===document.body||Kc[0]===t.target)return;let n=t.target;n=n.closest(Hw),Kc.unshift(n??t.target),Kc=Kc.filter(s=>s!=null&&s.isConnected),Kc.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function FZ(e){let t=Ya(e),n=f.useRef(!1);f.useEffect(()=>(n.current=!1,()=>{n.current=!0,b1(()=>{n.current&&t()})}),[t])}let UZ=f.createContext(!1);function jRe(){return f.useContext(UZ)}function J7(e){return bt.createElement(UZ.Provider,{value:e.force},e.children)}function NRe(e){let t=jRe(),n=f.useContext(HZ),[s,r]=f.useState(()=>{var i;if(!t&&n!==null)return(i=n.current)!=null?i:null;if(Io.isServer)return null;let o=e?.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return f.useEffect(()=>{s!==null&&(e!=null&&e.body.contains(s)||e==null||e.body.appendChild(s))},[s,e]),f.useEffect(()=>{t||n!==null&&r(n.current)},[n,r,t]),s}let BZ=f.Fragment,CRe=Sr(function(e,t){let{ownerDocument:n=null,...s}=e,r=f.useRef(null),i=Ko(_6e(p=>{r.current=p}),t),o=XD(r.current),l=n??o,c=NRe(l),u=f.useContext(eL),d=v1(),h=Li();return FZ(()=>{var p;c&&c.childNodes.length<=0&&((p=c.parentElement)==null||p.removeChild(c))}),c?Gi.createPortal(bt.createElement("div",{"data-headlessui-portal":"",ref:p=>{d.dispose(),u&&p&&d.add(u.register(p))}},h({ourProps:{ref:i},theirProps:s,slot:{},defaultTag:BZ,name:"Portal"})),c):null});function SRe(e,t){let n=Ko(t),{enabled:s=!0,ownerDocument:r,...i}=e,o=Li();return s?bt.createElement(CRe,{...i,ownerDocument:r,ref:n}):o({ourProps:{ref:n},theirProps:i,slot:{},defaultTag:BZ,name:"Portal"})}let _Re=f.Fragment,HZ=f.createContext(null);function ARe(e,t){let{target:n,...s}=e,r={ref:Ko(t)},i=Li();return bt.createElement(HZ.Provider,{value:n},i({ourProps:r,theirProps:s,defaultTag:_Re,name:"Popover.Group"}))}let eL=f.createContext(null);function TRe(){let e=f.useContext(eL),t=f.useRef([]),n=Ya(i=>(t.current.push(i),e&&e.register(i),()=>s(i))),s=Ya(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),r=f.useMemo(()=>({register:n,unregister:s,portals:t}),[n,s,t]);return[t,f.useMemo(()=>function({children:i}){return bt.createElement(eL.Provider,{value:r},i)},[r])]}let kRe=Sr(SRe),qZ=Sr(ARe),ERe=Object.assign(kRe,{Group:qZ});function LRe(e,t=typeof document<"u"?document.defaultView:null,n){let s=b0(e,"escape");zZ(t,"keydown",r=>{s&&(r.defaultPrevented||r.key===kZ.Escape&&n(r))})}function PRe(){var e;let[t]=f.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,s]=f.useState((e=t?.matches)!=null?e:!1);return yr(()=>{if(!t)return;function r(i){s(i.matches)}return t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[t]),n}function DRe({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let s=Ya(()=>{var r,i;let o=x0(n),l=[];for(let c of e)c!==null&&(ld(c)?l.push(c):"current"in c&&ld(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(r=o?.querySelectorAll("html > *, body > *"))!=null?r:[])c!==document.body&&c!==document.head&&ld(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((i=n?.getRootNode())==null?void 0:i.host))||l.some(u=>c.contains(u))||l.push(c));return l});return{resolveContainers:s,contains:Ya(r=>s().some(i=>i.contains(r)))}}let GZ=f.createContext(null);function e8({children:e,node:t}){let[n,s]=f.useState(null),r=WZ(t??n);return bt.createElement(GZ.Provider,{value:r},e,r===null&&bt.createElement(XE,{features:Bw.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=x0(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&ld(c)&&c!=null&&c.contains(i)){s(c);break}}}}))}function WZ(e=null){var t;return(t=f.useContext(GZ))!=null?t:e}function ORe(){let e=typeof document>"u";return"useSyncExternalStore"in Au?(t=>t.useSyncExternalStore)(Au)(()=>()=>{},()=>!1,()=>!e):!1}function N1(){let e=ORe(),[t,n]=f.useState(Io.isHandoffComplete);return t&&Io.isHandoffComplete===!1&&n(!1),f.useEffect(()=>{t!==!0&&n(!0)},[t]),f.useEffect(()=>Io.handoff(),[]),e?!1:t}function JD(){let e=f.useRef(!1);return yr(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Kg=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Kg||{});function MRe(){let e=f.useRef(0);return RZ(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function VZ(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)ld(n.current)&&t.add(n.current);return t}let IRe="div";var ou=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ou||{});function $Re(e,t){let n=f.useRef(null),s=Ko(n,t),{initialFocus:r,initialFocusFallback:i,containers:o,features:l=15,...c}=e;N1()||(l=0);let u=XD(n.current);URe(l,{ownerDocument:u});let d=BRe(l,{ownerDocument:u,container:n,initialFocus:r,initialFocusFallback:i});HRe(l,{ownerDocument:u,container:n,containers:o,previousActiveElement:d});let h=MRe(),p=Ya(w=>{if(!Wu(n.current))return;let S=n.current;(_=>_())(()=>{Zl(h.current,{[Kg.Forwards]:()=>{cp(S,El.First,{skipElements:[w.relatedTarget,i]})},[Kg.Backwards]:()=>{cp(S,El.Last,{skipElements:[w.relatedTarget,i]})}})})}),x=b0(!!(l&2),"focus-trap#tab-lock"),v=v1(),j=f.useRef(!1),b={ref:s,onKeyDown(w){w.key=="Tab"&&(j.current=!0,v.requestAnimationFrame(()=>{j.current=!1}))},onBlur(w){if(!(l&4))return;let S=VZ(o);Wu(n.current)&&S.add(n.current);let _=w.relatedTarget;td(_)&&_.dataset.headlessuiFocusGuard!=="true"&&(YZ(S,_)||(j.current?cp(n.current,Zl(h.current,{[Kg.Forwards]:()=>El.Next,[Kg.Backwards]:()=>El.Previous})|El.WrapAround,{relativeTo:w.target}):td(w.target)&&$l(w.target)))}},N=Li();return bt.createElement(bt.Fragment,null,x&&bt.createElement(XE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Bw.Focusable}),N({ourProps:b,theirProps:c,defaultTag:IRe,name:"FocusTrap"}),x&&bt.createElement(XE,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:Bw.Focusable}))}let RRe=Sr($Re),zRe=Object.assign(RRe,{features:ou});function FRe(e=!0){let t=f.useRef(Kc.slice());return ZD(([n],[s])=>{s===!0&&n===!1&&b1(()=>{t.current.splice(0)}),s===!1&&n===!0&&(t.current=Kc.slice())},[e,Kc,t]),Ya(()=>{var n;return(n=t.current.find(s=>s!=null&&s.isConnected))!=null?n:null})}function URe(e,{ownerDocument:t}){let n=!!(e&8),s=FRe(n);ZD(()=>{n||m6e(t?.body)&&$l(s())},[n]),FZ(()=>{n&&$l(s())})}function BRe(e,{ownerDocument:t,container:n,initialFocus:s,initialFocusFallback:r}){let i=f.useRef(null),o=b0(!!(e&1),"focus-trap#initial-focus"),l=JD();return ZD(()=>{if(e===0)return;if(!o){r!=null&&r.current&&$l(r.current);return}let c=n.current;c&&b1(()=>{if(!l.current)return;let u=t?.activeElement;if(s!=null&&s.current){if(s?.current===u){i.current=u;return}}else if(c.contains(u)){i.current=u;return}if(s!=null&&s.current)$l(s.current);else{if(e&16){if(cp(c,El.First|El.AutoFocus)!==JE.Error)return}else if(cp(c,El.First)!==JE.Error)return;if(r!=null&&r.current&&($l(r.current),t?.activeElement===r.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[r,o,e]),i}function HRe(e,{ownerDocument:t,container:n,containers:s,previousActiveElement:r}){let i=JD(),o=!!(e&4);zZ(t?.defaultView,"focus",l=>{if(!o||!i.current)return;let c=VZ(s);Wu(n.current)&&c.add(n.current);let u=r.current;if(!u)return;let d=l.target;Wu(d)?YZ(c,d)?(r.current=d,$l(d)):(l.preventDefault(),l.stopPropagation(),$l(u)):$l(r.current)},!0)}function YZ(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function QZ(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!op((t=e.as)!=null?t:XZ)||bt.Children.count(e.children)===1}let C1=f.createContext(null);C1.displayName="TransitionContext";var qRe=(e=>(e.Visible="visible",e.Hidden="hidden",e))(qRe||{});function GRe(){let e=f.useContext(C1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function WRe(){let e=f.useContext(S1);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let S1=f.createContext(null);S1.displayName="NestingContext";function _1(e){return"children"in e?_1(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function KZ(e,t){let n=om(e),s=f.useRef([]),r=JD(),i=v1(),o=Ya((x,v=ed.Hidden)=>{let j=s.current.findIndex(({el:b})=>b===x);j!==-1&&(Zl(v,{[ed.Unmount](){s.current.splice(j,1)},[ed.Hidden](){s.current[j].state="hidden"}}),i.microTask(()=>{var b;!_1(s)&&r.current&&((b=n.current)==null||b.call(n))}))}),l=Ya(x=>{let v=s.current.find(({el:j})=>j===x);return v?v.state!=="visible"&&(v.state="visible"):s.current.push({el:x,state:"visible"}),()=>o(x,ed.Unmount)}),c=f.useRef([]),u=f.useRef(Promise.resolve()),d=f.useRef({enter:[],leave:[]}),h=Ya((x,v,j)=>{c.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([b])=>b!==x)),t?.chains.current[v].push([x,new Promise(b=>{c.current.push(b)})]),t?.chains.current[v].push([x,new Promise(b=>{Promise.all(d.current[v].map(([N,w])=>w)).then(()=>b())})]),v==="enter"?u.current=u.current.then(()=>t?.wait.current).then(()=>j(v)):j(v)}),p=Ya((x,v,j)=>{Promise.all(d.current[v].splice(0).map(([b,N])=>N)).then(()=>{var b;(b=c.current.shift())==null||b()}).then(()=>j(v))});return f.useMemo(()=>({children:s,register:l,unregister:o,onStart:h,onStop:p,wait:u,chains:d}),[l,o,s,h,p,d,u])}let XZ=f.Fragment,ZZ=Uw.RenderStrategy;function VRe(e,t){var n,s;let{transition:r=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:h,entered:p,leave:x,leaveFrom:v,leaveTo:j,...b}=e,[N,w]=f.useState(null),S=f.useRef(null),_=QZ(e),k=Ko(..._?[S,t,w]:t===null?[]:[t]),T=(n=b.unmount)==null||n?ed.Unmount:ed.Hidden,{show:A,appear:E,initial:M}=GRe(),[O,I]=f.useState(A?"visible":"hidden"),D=WRe(),{register:H,unregister:W}=D;yr(()=>H(S),[H,S]),yr(()=>{if(T===ed.Hidden&&S.current){if(A&&O!=="visible"){I("visible");return}return Zl(O,{hidden:()=>W(S),visible:()=>H(S)})}},[O,S,H,W,A,T]);let z=N1();yr(()=>{if(_&&z&&O==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,O,z,_]);let Q=M&&!E,J=E&&A&&M,Y=f.useRef(!1),re=KZ(()=>{Y.current||(I("hidden"),W(S))},D),we=Ya(oe=>{Y.current=!0;let Te=oe?"enter":"leave";re.onStart(S,Te,ue=>{ue==="enter"?i?.():ue==="leave"&&l?.()})}),Z=Ya(oe=>{let Te=oe?"enter":"leave";Y.current=!1,re.onStop(S,Te,ue=>{ue==="enter"?o?.():ue==="leave"&&c?.()}),Te==="leave"&&!_1(re)&&(I("hidden"),W(S))});f.useEffect(()=>{_&&r||(we(A),Z(A))},[A,_,r]);let ne=!(!r||!_||!z||Q),[,pe]=hRe(ne,N,A,{start:we,end:Z}),Ne=nu({ref:k,className:((s=KE(b.className,J&&u,J&&d,pe.enter&&u,pe.enter&&pe.closed&&d,pe.enter&&!pe.closed&&h,pe.leave&&x,pe.leave&&!pe.closed&&v,pe.leave&&pe.closed&&j,!pe.transition&&A&&p))==null?void 0:s.trim())||void 0,...fRe(pe)}),de=0;O==="visible"&&(de|=Wi.Open),O==="hidden"&&(de|=Wi.Closed),A&&O==="hidden"&&(de|=Wi.Opening),!A&&O==="visible"&&(de|=Wi.Closing);let be=Li();return bt.createElement(S1.Provider,{value:re},bt.createElement(bRe,{value:de},be({ourProps:Ne,theirProps:b,defaultTag:XZ,features:ZZ,visible:O==="visible",name:"Transition.Child"})))}function YRe(e,t){let{show:n,appear:s=!1,unmount:r=!0,...i}=e,o=f.useRef(null),l=QZ(e),c=Ko(...l?[o,t]:t===null?[]:[t]);N1();let u=j1();if(n===void 0&&u!==null&&(n=(u&Wi.Open)===Wi.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,h]=f.useState(n?"visible":"hidden"),p=KZ(()=>{n||h("hidden")}),[x,v]=f.useState(!0),j=f.useRef([n]);yr(()=>{x!==!1&&j.current[j.current.length-1]!==n&&(j.current.push(n),v(!1))},[j,n]);let b=f.useMemo(()=>({show:n,appear:s,initial:x}),[n,s,x]);yr(()=>{n?h("visible"):!_1(p)&&o.current!==null&&h("hidden")},[n,p]);let N={unmount:r},w=Ya(()=>{var k;x&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=Ya(()=>{var k;x&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),_=Li();return bt.createElement(S1.Provider,{value:p},bt.createElement(C1.Provider,{value:b},_({ourProps:{...N,as:f.Fragment,children:bt.createElement(JZ,{ref:c,...N,...i,beforeEnter:w,beforeLeave:S})},theirProps:{},defaultTag:f.Fragment,features:ZZ,visible:d==="visible",name:"Transition"})))}function QRe(e,t){let n=f.useContext(C1)!==null,s=j1()!==null;return bt.createElement(bt.Fragment,null,!n&&s?bt.createElement(tL,{ref:t,...e}):bt.createElement(JZ,{ref:t,...e}))}let tL=Sr(YRe),JZ=Sr(VRe),e3=Sr(QRe),vv=Object.assign(tL,{Child:e3,Root:tL});var KRe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(KRe||{}),XRe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(XRe||{});let ZRe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},t3=f.createContext(null);t3.displayName="DialogContext";function A1(e){let t=f.useContext(t3);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,A1),n}return t}function JRe(e,t){return Zl(t.type,ZRe,e,t)}let t8=Sr(function(e,t){let n=f.useId(),{id:s=`headlessui-dialog-${n}`,open:r,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:d=!1,...h}=e,p=f.useRef(!1);l=(function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")})();let x=j1();r===void 0&&x!==null&&(r=(x&Wi.Open)===Wi.Open);let v=f.useRef(null),j=Ko(v,t),b=XD(v.current),N=r?0:1,[w,S]=f.useReducer(JRe,{titleId:null,descriptionId:null,panelRef:f.createRef()}),_=Ya(()=>i(!1)),k=Ya(pe=>S({type:0,id:pe})),T=N1()?N===0:!1,[A,E]=TRe(),M={get current(){var pe;return(pe=w.panelRef.current)!=null?pe:v.current}},O=WZ(),{resolveContainers:I}=DRe({mainTreeNode:O,portals:A,defaultContainers:[M]}),D=x!==null?(x&Wi.Closing)===Wi.Closing:!1;q6e(u||D?!1:T,{allowed:Ya(()=>{var pe,Ne;return[(Ne=(pe=v.current)==null?void 0:pe.closest("[data-headlessui-portal]"))!=null?Ne:null]}),disallowed:Ya(()=>{var pe;return[(pe=O?.closest("body > *:not(#headlessui-portal-root)"))!=null?pe:null]})});let H=OZ.get(null);yr(()=>{if(T)return H.actions.push(s),()=>H.actions.pop(s)},[H,s,T]);let W=MZ(H,f.useCallback(pe=>H.selectors.isTop(pe,s),[H,s]));aRe(W,I,pe=>{pe.preventDefault(),_()}),LRe(W,b?.defaultView,pe=>{pe.preventDefault(),pe.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),_()}),cRe(u||D?!1:T,b,I),G6e(T,v,_);let[z,Q]=A6e(),J=f.useMemo(()=>[{dialogState:N,close:_,setTitleId:k,unmount:d},w],[N,_,k,d,w]),Y=y0({open:N===0}),re={ref:j,id:s,role:l,tabIndex:-1,"aria-modal":u?void 0:N===0?!0:void 0,"aria-labelledby":w.titleId,"aria-describedby":z,unmount:d},we=!PRe(),Z=ou.None;T&&!u&&(Z|=ou.RestoreFocus,Z|=ou.TabLock,c&&(Z|=ou.AutoFocus),we&&(Z|=ou.InitialFocus));let ne=Li();return bt.createElement(vRe,null,bt.createElement(J7,{force:!0},bt.createElement(ERe,null,bt.createElement(t3.Provider,{value:J},bt.createElement(qZ,{target:v},bt.createElement(J7,{force:!1},bt.createElement(Q,{slot:Y},bt.createElement(E,null,bt.createElement(zRe,{initialFocus:o,initialFocusFallback:v,containers:I,features:Z},bt.createElement(D6e,{value:_},ne({ourProps:re,theirProps:h,slot:Y,defaultTag:eze,features:tze,visible:N===0,name:"Dialog"})))))))))))}),eze="div",tze=Uw.RenderStrategy|Uw.Static;function aze(e,t){let{transition:n=!1,open:s,...r}=e,i=j1(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(s!==void 0||n)&&!r.static?bt.createElement(e8,null,bt.createElement(vv,{show:s,transition:n,unmount:r.unmount},bt.createElement(t8,{ref:t,...r}))):bt.createElement(e8,null,bt.createElement(t8,{ref:t,open:s,...r}))}let nze="div";function sze(e,t){let n=f.useId(),{id:s=`headlessui-dialog-panel-${n}`,transition:r=!1,...i}=e,[{dialogState:o,unmount:l},c]=A1("Dialog.Panel"),u=Ko(t,c.panelRef),d=y0({open:o===0}),h=Ya(b=>{b.stopPropagation()}),p={ref:u,id:s,onClick:h},x=r?e3:f.Fragment,v=r?{unmount:l}:{},j=Li();return bt.createElement(x,{...v},j({ourProps:p,theirProps:i,slot:d,defaultTag:nze,name:"Dialog.Panel"}))}let rze="div";function ize(e,t){let{transition:n=!1,...s}=e,[{dialogState:r,unmount:i}]=A1("Dialog.Backdrop"),o=y0({open:r===0}),l={ref:t,"aria-hidden":!0},c=n?e3:f.Fragment,u=n?{unmount:i}:{},d=Li();return bt.createElement(c,{...u},d({ourProps:l,theirProps:s,slot:o,defaultTag:rze,name:"Dialog.Backdrop"}))}let oze="h2";function lze(e,t){let n=f.useId(),{id:s=`headlessui-dialog-title-${n}`,...r}=e,[{dialogState:i,setTitleId:o}]=A1("Dialog.Title"),l=Ko(t);f.useEffect(()=>(o(s),()=>o(null)),[s,o]);let c=y0({open:i===0}),u={ref:l,id:s};return Li()({ourProps:u,theirProps:r,slot:c,defaultTag:oze,name:"Dialog.Title"})}let cze=Sr(aze),dze=Sr(sze);Sr(ize);let uze=Sr(lze),a8=Object.assign(cze,{Panel:dze,Title:uze,Description:L6e});function v0({isOpen:e,onClose:t,onSave:n,onEdit:s,setFormData:r,formData:i,isEditing:o=!1,viewMode:l=!1,users:c=[],currentUser:u,onDelete:d}){const[h,p]=f.useState([]),[x,v]=f.useState([]),[j,b]=f.useState({}),{comments:N,addComment:w,refresh:S}=kn({relatedType:"task",relatedId:i?.id});f.useEffect(()=>{i?.id&&S()},[i?.id,S]);const _=O=>{if(!O)return"";const I=String(O).split("-");return I.length===3?`${I[0]}-${I[2]}`:String(O)},k=O=>{const{name:I,value:D}=O.target;I==="subject"&&D.trim()&&b(H=>({...H,subject:!1})),r(H=>{const W={...H,[I]:D};return I==="relatedType1"&&(W.relatedTo1="",D==="Lead"?(W.relatedType2=null,W.relatedTo2=null,v([])):D==="Account"&&(W.relatedType2="Contact")),I==="relatedType2"&&(W.relatedTo2=""),W})};f.useEffect(()=>{if(!e)return;(async()=>{try{p([]);let I;i.relatedType1==="Lead"?I=await se.get("/leads/admin/getLeads"):i.relatedType1==="Account"&&(I=await se.get("/accounts/admin/fetch-all"));let D=[];if(I&&Array.isArray(I.data)&&(D=I.data),o&&i.relatedTo1)try{let H;i.relatedType1==="Lead"?H=await se.get(`/leads/get/${i.relatedTo1}`):i.relatedType1==="Account"&&(H=await se.get(`/accounts/get/${i.relatedTo1}`)),H&&H.data&&(D.some(z=>String(z.id)===String(i.relatedTo1))||(D=[H.data,...D]))}catch(H){console.error("Error fetching specific related item:",H)}p(D)}catch(I){console.error("Error fetching related 1 data:",I),p([])}})()},[i.relatedType1,e,o,i.relatedTo1]),f.useEffect(()=>{if(!e||l)return;(async()=>{try{if(v([]),i.relatedType1==="Account"&&i.relatedTo1){let I;i.relatedType2==="Contact"?I=await se.get(`/contacts/from-acc/${i.relatedTo1}`):i.relatedType2==="Deal"?I=await se.get(`/deals/from-acc/${i.relatedTo1}`):i.relatedType2==="Quote"&&(I=await se.get(`/quotes/from-acc/${i.relatedTo1}`));let D=[];if(I&&Array.isArray(I.data)&&(D=I.data),o&&i.relatedTo2)try{let H;i.relatedType2==="Contact"?H=await se.get(`/contacts/get/${i.relatedTo2}`):i.relatedType2==="Deal"?H=await se.get(`/deals/get/${i.relatedTo2}`):i.relatedType2==="Quote"&&(H=await se.get(`/quotes/get/${i.relatedTo2}`)),H&&H.data&&(D.some(z=>String(z.id)===String(i.relatedTo2))||(D=[H.data,...D]))}catch(H){console.error("Error fetching specific related item:",H)}v(D)}}catch(I){console.error("Error fetching related 2 data:",I),v([])}})()},[i.relatedType1,i.relatedTo1,i.relatedType2,i.relatedTo2,e,l,o]);const[T,A]=f.useState(!1);f.useEffect(()=>{e&&(A(!1),b({}))},[e]);const E=O=>{O.preventDefault(),A(!0);const I={};i.subject?.trim()||(I.subject=!0,V.error("Title is required")),b(I),i.relatedTo1||(I.relatedTo1=!0,V.error(`Please select a ${i.relatedType1||"Lead/Account"}.`)),i.assignedTo||(I.assignedTo=!0,V.error("Assigned To is required.")),!(Object.keys(I).length>0)&&n?.(i)},M=l?"Task Details":o?"Edit Task":"Create Task";return a.jsx(vv,{appear:!0,show:e,as:f.Fragment,children:a.jsxs(a8,{as:"div",className:"relative z-50",onClose:t,children:[a.jsx(vv.Child,{as:f.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/40"})}),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center text-center",children:a.jsx(vv.Child,{as:f.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx(a8.Panel,{className:"w-full max-w-full sm:max-w-3xl text-left align-middle transform transition-all",children:a.jsxs("div",{className:"bg-white w-full min-w-sm md:min-w-lg rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] flex flex-col hide-scrollbar",children:[a.jsx("button",{onClick:()=>{t(),A(!1),b({})},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(Za,{size:25})}),a.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",onClick:t,children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[90vh] overflow-y-auto hide-scrollbar font-manrope relative",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-4 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Tasks"}),a.jsx("button",{onClick:()=>{t(),A(!1)},className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"p-6 lg:p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:i.subject||"No Title"})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[String(i?.createdById)===String(u?.id)&&a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 cursor-pointer",onClick:()=>{r&&r(i),typeof s=="function"&&s()},children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),String(i?.createdById)===String(u?.id)&&a.jsx(a.Fragment,{children:u?.role==="Sales"?a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400 cursor-pointer",onClick:()=>d(i),children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]}):a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400 cursor-pointer",onClick:()=>d(i),children:[a.jsx(va,{className:"mr-2"}),"Delete"]})})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white overflow-x-auto",children:a.jsx("button",{className:"flex-1 min-w-[90px] px-4 py-2 lg:text-lg text-sm font-medium text-center text-white",children:"Overview"})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 lg:p-5 border border-gray-200 text-sm text-gray-700",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:i.subject||""})]}),i.relatedType1Text&&i.relatedTo1Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType1Text,":"]}),a.jsx("p",{children:i.relatedTo1Text})]}),i.relatedType2Text&&i.relatedTo2Text&&a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold",children:[i.relatedType2,":"]}),a.jsx("p",{children:i.relatedTo2Text})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:i.assignedToName||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:i.createdBy||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Priority:"}),a.jsx("p",{children:i.priority||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:i.status||""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Due Date:"}),a.jsx("p",{children:i.dueDate||""})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("p",{className:"font-semibold",children:"Description:"}),a.jsx("p",{className:"whitespace-pre-wrap",children:i.description||""})]})]}),a.jsx(Tn,{comments:N,onAddComment:w})]})]})]})}),!l&&a.jsxs("form",{onSubmit:E,className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm flex-1",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Title"," ",a.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:i.subject,onChange:k,disabled:l,placeholder:"Enter task title",className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
                            ${j.subject?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
                            ${l?"bg-gray-50 cursor-not-allowed":""}
                          `})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:k,value:i.relatedType1,disabled:l,className:"w-full pr-6 rounded-md text-sm mb-2",children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(NA,{disabled:!1,items:Array.isArray(h)?h:[],value:i.relatedTo1??"",placeholder:`Search ${i.relatedType1||"here"}...`,getLabel:O=>i.relatedType1==="Lead"?O.title:O.name??"",onChange:O=>r(I=>({...I,relatedTo1:O})),required:!0,isSubmitted:T})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:k,value:i.relatedType2??"Contact",className:"w-23 rounded-md text-sm focus:ring-2 focus:ring-blue-400 outline-none mb-2 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:l||i.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]}),a.jsx(NA,{disabled:i.relatedType1==="Lead",items:Array.isArray(x)?x:[],value:i.relatedTo2??"",placeholder:i.relatedType1==="Lead"?"":Array.isArray(x)&&x.length>0?`Search ${i.relatedType2||"Contact"}...`:`No ${i.relatedType2||""} data found`,getLabel:O=>i.relatedType2==="Contact"?`${O.first_name??""} ${O.last_name??""}`.trim():i.relatedType2==="Quote"?_(O.quote_id)??"":O.name??"",onChange:O=>r(I=>({...I,relatedTo2:O}))})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Description"}),a.jsx("textarea",{name:"description",value:i.description,onChange:k,disabled:l,placeholder:"Enter task description",rows:3,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Priority"}),a.jsxs("select",{name:"priority",value:i.priority,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Normal",children:"Normal"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Due Date"}),a.jsx("input",{type:"datetime-local",name:"dueDate",value:i.dueDate,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To"," ",u?.role!=="Sales"&&a.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),a.jsx(NA,{items:Array.isArray(c)?c:[],value:i.assignedTo??"",placeholder:u?.role==="Sales"?`${u.first_name} ${u.last_name}`:"Search an account...",getLabel:O=>`${O.first_name} ${O.last_name}`,onChange:O=>r(I=>({...I,assignedTo:O})),disabled:l||u?.role==="Sales",required:u?.role!=="Sales",isSubmitted:T})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",value:i.status,onChange:k,disabled:l,className:`w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none ${l?"bg-gray-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Not started",children:"Not started"}),a.jsx("option",{value:"In progress",children:"In Progress"}),a.jsx("option",{value:"Deferred",children:"Deferred"}),a.jsx("option",{value:"Completed",children:"Completed"})]})]}),!l&&a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{t(),A(!1),b({})},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:o?"Update Task":"Create Task"})]})]})]})})})})})]})})}function NA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const n8=["Not started","In progress","Deferred","Completed"],s8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},eJ=e=>e&&(s8[e]||s8[String(e).toUpperCase()])||"Not started",mze=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},CA=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},fze=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),eJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:h}},hze=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const z=String(W).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,j=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,N=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",k="",T="Lead",A="",E="",M="";const O=c(),I=v(),D=l(),H=x();if(O){w="Account",T="Account",A=I,S=String(O);const W=u(),z=d(),Q=j(),J=b(),Y=h(),re=N();W?(_="Contact",E="Contact",M=Q,k=String(W)):z?(E="Deal",_="Deal",M=J,k=String(z)):Y&&(E="Quote",_="Quote",M=re,k=String(Y))}else D?(T="Lead",A=H,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:eJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:E,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:k}};function gze(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[n,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState([]),[p,x]=f.useState(!0),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[_,k]=f.useState([]),[T,A]=f.useState(1),[E,M]=f.useState(10),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState([]),[Q,J]=f.useState(null),Y=Tt(),re=Jt(),[we,Z]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ne,pe]=f.useState(null),Ne=Ux(Ff(sm,{activationConstraint:{distance:8}})),de=G=>{const{active:X}=G,ve=d.find($e=>$e.id===X.id);J(ve)},be=async G=>{const{active:X,over:ve}=G;if(J(null),!ve)return;const $e=X.id,Le=ve.id,me=d.find(Re=>Re.id===$e);if(!(!me||me.status===Le)){h(Re=>Re.map(qe=>qe.id===$e?{...qe,status:Le}:qe));try{const Re={title:me.title,description:me.description||"",priority:me.priority||"Normal",status:Le,due_date:me.dueDate||null,assigned_to:me.assignedToId||null,related_type_1:me.relatedType1||null,related_to_1:me.relatedTo1?parseInt(me.relatedTo1,10):null,related_type_2:me.relatedType2||null,related_to_2:me.relatedTo2?parseInt(me.relatedTo2,10):null};(!Re.related_to_1||isNaN(Re.related_to_1))&&(Re.related_to_1=null),(!Re.related_to_2||isNaN(Re.related_to_2))&&(Re.related_to_2=null),await se.put(`/tasks/${$e}`,Re),V.success(`Task moved to "${Le}"`)}catch(Re){console.error("Failed to update task status:",Re),V.error("Failed to update task status"),h(qe=>qe.map(rt=>rt.id===$e?{...rt,status:me.status}:rt))}}},oe=()=>{J(null)};f.useEffect(()=>{const G=re.state?.openTaskModal,X=re.state?.initialTaskData,ve=re.state?.taskID;G?(i(!0),X&&Z($e=>({...$e,...X})),Y(re.pathname,{replace:!0,state:{}})):ve&&(pe(ve),Y(re.pathname,{replace:!0,state:{}}))},[re,Y]),f.useEffect(()=>{if(ne&&d.length>0&&!p){const G=d.find(X=>X.id===ne);G?xe(G,!0):V.error("Task not found."),pe(null)}},[ne,d,p]);const Te=async()=>{try{const G=await se.get("/users/all");k(Array.isArray(G.data)?G.data:[])}catch(G){console.error("Failed to fetch users:",G),V.error("Failed to fetch users.")}},ue=async()=>{try{x(!0);const G=await se.get("/tasks/all"),ve=(Array.isArray(G.data)?G.data:[]).map(hze);ve.sort(($e,Le)=>{const me=$e.createdAt?new Date($e.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-me}),h(ve),n==="list"&&A(1)}catch(G){console.error("Failed to load tasks:",G),V.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{if(!t&&e){Te(),ue();const G=Oj(e.id),X=new WebSocket(G);return X.onopen=()=>{console.log(" Connected to task notifications")},X.onmessage=ve=>{try{const $e=JSON.parse(ve.data);$e.type==="task_status_updated"&&(V.info(` ${$e.message}`,{position:"top-right",autoClose:4e3}),ue())}catch($e){console.error("Error parsing notification:",$e)}},X.onerror=ve=>{console.error(" WebSocket error:",ve)},X.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{X&&X.readyState===WebSocket.OPEN&&X.close()}}},[t,e]);const Oe=()=>{l(null),Z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},xe=(G=null,X=!1)=>{l(G),u(X),G?Z({id:G.id,subject:G.title||"",description:G.description||"",priority:G.priority||"Normal",status:G.status||"Not started",dueDate:mze(G.dueDate),assignedTo:G.assignedToId?String(G.assignedToId):"",assignedToName:G.assignedToName||"",createdBy:G.createdBy||"",notes:G.notes||"",relatedType1Text:G.relatedType1Text||"",relatedTo1Text:G.relatedTo1Text||"",relatedType2Text:G.relatedType2Text||"",relatedTo2Text:G.relatedTo2Text||"",relatedType1:G.relatedType1||"",relatedTo1:G.relatedTo1||"",relatedType2:G.relatedType2||"",relatedTo2:G.relatedTo2||""}):Oe(),i(!0)},le=()=>{i(!1),l(null),u(!1),Oe()},Fe=async G=>{const X=fze(G);try{o&&!c?(await se.put(`/tasks/${o.id}`,X),V.success("Task updated successfully.")):(await se.post("/tasks/create",X),V.success("Task created successfully.")),i(!1),await ue()}catch(ve){console.error("Failed to save task:",ve);const $e=ve.response?.data?.detail||"Failed to save task.";V.error($e)}},ke=G=>{G&&I({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:G.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id}})},He=()=>{if(Ze.every(G=>W.includes(G.id)))z(W.filter(G=>!Ze.map(X=>X.id).includes(G)));else{const G=Ze.map(X=>X.id);z([...new Set([...W,...G])])}},Xe=G=>{z(X=>X.includes(G)?X.filter(ve=>ve!==G):[...X,G])},it=async()=>{W.length!==0&&I({title:"Delete Tasks",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},ze=async()=>{if(!O?.action){I(null);return}const{action:G}=O;H(!0);try{G.type==="delete"?(await se.delete(`/tasks/${G.targetId}`),V.success("Task deleted successfully."),await ue()):G.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:G.task_ids}}),V.success(`Successfully deleted ${G.task_ids.length} tasks`),z([]),await ue())}catch(X){console.error("Task action failed:",X),V.error("Failed to delete task.")}finally{H(!1),I(null)}},at=()=>{D||I(null)},Ve=f.useMemo(()=>{const G=v.trim().toLowerCase();return[...d].sort((ve,$e)=>{const Le=ve.createdAt?new Date(ve.createdAt):0;return($e.createdAt?new Date($e.createdAt):0)-Le}).filter(ve=>{const $e=G===""||ve.title?.toLowerCase().includes(G)||ve.description?.toLowerCase().includes(G)||ve.assignedToName?.toLowerCase().includes(G)||ve.createdBy?.toLowerCase().includes(G),Le=b==="Filter by Status"||ve.status===b,me=w==="Filter by Priority"||ve.priority===w;return $e&&Le&&me})},[d,v,b,w]);f.useEffect(()=>{A(1)},[v,b,w,n,E]),f.useEffect(()=>{if(n==="list"){const G=Ve.length===0?1:Math.ceil(Ve.length/E);T>G&&A(G)}},[Ve.length,T,n,E]);const Ze=f.useMemo(()=>{if(n==="board")return Ve;const G=(T-1)*E;return Ve.slice(G,G+E)},[Ve,T,n,E]),Je=f.useMemo(()=>{const G=new Date;return[{title:"To Do",value:d.filter(X=>X.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(X=>X.status==="In progress").length,icon:Yi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(X=>X.status==="Completed").length,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(X=>X.dueDate&&new Date(X.dueDate)<G&&X.status!=="Completed").length,icon:Qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(X=>X.priority==="High").length,icon:Jl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Ue=G=>G.dueDate&&new Date(G.dueDate)<new Date&&G.status!=="Completed",_e=G=>{switch(G.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},he=G=>{switch(G){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ie=G=>{switch(G){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(Wt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Yi,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>xe(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(ta,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(G=>a.jsx(pze,{...G},G.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:G=>j(G.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:G=>N(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),n8.map(G=>a.jsx("option",{children:G},G))]}),a.jsxs("select",{value:w,onChange:G=>S(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(Ve.length>0?a.jsxs(qx,{sensors:Ne,collisionDetection:Bx,onDragStart:de,onDragEnd:be,onDragCancel:oe,children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:n8.map(G=>{const X=Ze.filter(ve=>ve.status===G);return a.jsx(yze,{column:G,columnTasks:X,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:CA,handleOpenModal:xe,handleDeleteTask:ke},G)})}),a.jsx(kN,{children:Q?a.jsx(vze,{task:Q,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:CA}):null})]}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ze.length>0&&Ze.every(G=>W.includes(G.id)),onChange:He})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?a.jsx("button",{onClick:it,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Ze.length>0?Ze.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:X=>X.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(G.id),onChange:()=>Xe(G.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>xe(G,!0),children:G.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${he(G.status||"Not started")}`,children:G.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ie(G.priority||"Low")}`,children:G.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>xe(G,!0),children:G.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ue(G)?"text-red-600 font-medium":""}`,onClick:()=>xe(G,!0),children:G.dateAssigned?CA(G.dateAssigned):""}),a.jsx("td",{})]},G.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(la,{className:"mt-6",totalItems:Ve.length,pageSize:E,currentPage:Ve.length===0?0:T,onPrev:()=>A(G=>Math.max(G-1,1)),onNext:()=>A(G=>Math.min(G+1,Math.max(1,Math.ceil(Ve.length/E)||1))),onPageSizeChange:G=>{M(G),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(v0,{isOpen:r,onClose:le,onSave:Fe,onEdit:()=>u(!1),setFormData:Z,formData:we,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ke}),O&&a.jsx(xze,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:ze,onCancel:at,loading:D})]})}function pze({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function xze({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function yze({column:e,columnTasks:t,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return a.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),a.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>a.jsx(bze,{task:u,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):a.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function bze({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=Gx({id:e.id}),h=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return a.jsxs("div",{ref:c,style:h,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[a.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(hn,{})}),a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:a.jsx(va,{})})]})]})}function vze({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s}){return a.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}function wze(e){return Pt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M235.4 172.2c0-11.4 9.3-19.9 20.5-19.9 11.4 0 20.7 8.5 20.7 19.9s-9.3 20-20.7 20c-11.2 0-20.5-8.6-20.5-20zm1.4 35.7H275V352h-38.2V207.9z"},child:[]},{tag:"path",attr:{d:"M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"},child:[]}]})(e)}const SA={name:"",description:"",manager_id:"",user_ids:[],company_id:""};function jze({label:e,options:t,selectedValues:n,onChange:s,disabled:r=!1,placeholder:i="Select users...",isSubmitted:o=!1,required:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null);f.useEffect(()=>{function N(w){p.current&&!p.current.contains(w.target)&&(u(!1),h(""))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const x=t.filter(N=>N.label.toLowerCase().includes(d.toLowerCase())),v=N=>{const w=n.includes(N);let S;w?S=n.filter(_=>_!==N):S=[...n,N],s(S)},j=(N,w)=>{N.stopPropagation(),s(n.filter(S=>S!==w))},b=t.filter(N=>n.includes(N.value));return a.jsxs("div",{className:"relative",ref:p,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsxs("div",{onClick:()=>!r&&u(!c),className:`w-full border ${l&&o&&n.length===0?"border-red-500 ring-red-500":c?"border-gray-500 ring-1 ring-gray-400":"border-gray-300"} 
  rounded-md px-3 py-2 text-sm bg-white cursor-pointer min-h-[38px] flex flex-wrap items-center gap-2
  ${r?"bg-gray-100 cursor-not-allowed":""}`,children:[n.length===0&&a.jsx("span",{className:"text-gray-400 select-none",children:i}),b.map(N=>a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded text-xs flex items-center gap-1 border border-indigo-200",children:[N.label,!r&&a.jsx(ea,{className:"cursor-pointer hover:text-indigo-900",onClick:w=>j(w,N.value)})]},N.value)),a.jsx("div",{className:"ml-auto text-gray-400",children:a.jsx(Lt,{})})]}),c&&!r&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-2 border-b border-gray-100 sticky top-0 bg-white",children:a.jsxs("div",{className:"flex items-center px-2 py-1 bg-gray-50 rounded border border-gray-200",children:[a.jsx(Kt,{className:"text-gray-400 mr-2"}),a.jsx("input",{type:"text",className:"bg-transparent outline-none w-full text-sm",placeholder:"Search...",value:d,onChange:N=>h(N.target.value),autoFocus:!0})]})}),a.jsx("div",{className:"overflow-y-auto flex-1",children:x.length>0?x.map(N=>{const w=n.includes(N.value);return a.jsxs("div",{onClick:()=>v(N.value),className:`px-4 py-2 text-sm cursor-pointer flex items-center justify-between hover:bg-gray-50 
                      ${w?"bg-indigo-50 text-indigo-700":"text-gray-700"}`,children:[a.jsx("span",{children:N.label}),w&&a.jsx(wL,{className:"text-indigo-600"})]},N.value)}):a.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No results found"})})]})]})}function Fc(){f.useEffect(()=>{document.title="Territory | Sari-Sari CRM"},[]);const e=Tt(),{id:t}=Go(),[n,s]=f.useState(""),[r,i]=f.useState(""),[o,l]=f.useState(""),[c,u]=f.useState(null),[d,h]=f.useState(!1),[p,x]=f.useState([]),[v,j]=f.useState(!1),[b,N]=f.useState([]),[w,S]=f.useState(SA),[_,k]=f.useState(!1),[T,A]=f.useState(!1),[E,M]=f.useState(null),[O,I]=f.useState(null),[D,H]=f.useState("board"),[W,z]=f.useState(null),[Q,J]=f.useState(!1),[Y,re]=f.useState(null),[we,Z]=f.useState(1),[ne,pe]=f.useState(10),[Ne,de]=f.useState([]),[be,oe]=f.useState(null),Te=f.useRef(!1),ue=f.useRef(!1),{userRole:Oe}=Ks(),xe=f.useMemo(()=>{const Ie=new Map;return p.forEach(ot=>{const Ct=`${ot.name}-${ot.manager_id||"no-manager"}`;if(!Ie.has(Ct))Ie.set(Ct,{...ot,territory_ids:[ot.id],assigned_users_list:ot.assigned_to?[ot.assigned_to]:[]});else{const kt=Ie.get(Ct);kt.territory_ids.push(ot.id),ot.assigned_to&&(kt.assigned_users_list.some(At=>At.id===ot.assigned_to.id)||kt.assigned_users_list.push(ot.assigned_to))}}),Array.from(Ie.values())},[p]),le=f.useMemo(()=>{const Ie=n.trim().toLowerCase(),ot=r.trim().toLowerCase(),Ct=o.trim();return[...xe].sort((At,jt)=>{const ge=At?.created_at?new Date(At.created_at):0;return(jt?.created_at?new Date(jt.created_at):0)-ge}).filter(At=>{const jt=At.name?.toLowerCase()||"",ge=At.description?.toLowerCase()||"",ye=At.managed_by?`${At.managed_by.first_name} ${At.managed_by.last_name}`.toLowerCase():"",Pe=At.status?.toString().toLowerCase()||"",Ce=At.assigned_users_list.map(te=>`${te.first_name} ${te.last_name}`.toLowerCase()).join(" "),F=Ie===""||[jt,ge,ye,Pe,Ce].some(te=>te&&te.includes(Ie)),q=ot===""||Pe===ot,fe=Ct===""||String(At.managed_by?.id||"")===Ct||At.assigned_users_list.some(te=>String(te.id)===Ct);return F&&q&&fe})},[xe,n,r,o]);f.useEffect(()=>{if(Te.current){Te.current=!1;return}if(t&&xe.length>0&&!_&&!d&&!T){const Ie=xe.find(ot=>ot.id===parseInt(t));Ie&&u(Ie)}!t&&!_&&!d&&u(null)},[t,xe,_,d,T]),f.useEffect(()=>{Z(1)},[n,r,o]),f.useEffect(()=>{Z(Ie=>{const ot=Math.max(1,Math.ceil(le.length/ne)||1);return Ie>ot?ot:Ie})},[le.length,ne]);const Fe=async()=>{try{const Ie=await se.get("/users/read/territory");N(Ie.data)}catch(Ie){console.error("Error fetching users:",Ie)}},ke=async()=>{j(!0);try{const Ie=await se.get("/territories/fetch"),ot=Array.isArray(Ie.data)?Ie.data:[];x(ot),console.log(Ie.data)}catch(Ie){console.error("Error fetching territories:",Ie)}finally{j(!1)}},He=async()=>{try{const Ie=await se.get("/auth/me");oe(Ie.data)}catch(Ie){console.error("Error fetching current user:",Ie)}};f.useEffect(()=>{Fe(),ke(),He()},[]);const Xe=Ie=>Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?!0:Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?be&&Ie.territory_creator?.id===be.id:!1,it=()=>Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager",ze=Ie=>{const{name:ot,value:Ct}=Ie.target;S(kt=>({...kt,[ot]:Ct}))},at=Ie=>{S(ot=>({...ot,user_ids:Ie}))},Ve=()=>{S(SA),k(!1),M(null),h(!0)},Ze=(Ie=!0)=>{h(!1),k(!1),M(null),S(SA)},Je=Ie=>{if(!Ie)return;const ot=Ie.assigned_users_list?Ie.assigned_users_list.map(Ct=>String(Ct.id)):[];S({name:Ie.name||"",description:Ie.description||"",manager_id:Ie.managed_by?String(Ie.managed_by.id):"",user_ids:ot,company_id:Ie.company_id?String(Ie.company_id):""}),k(!0),M(Ie.id),u(null),h(!0)},[Ue,_e]=f.useState(!1),he=Ie=>{if(Ie.preventDefault(),T||W)return;_e(!0);const ot=w.name.trim();if(!ot){V.error("Territory name is required.");return}if(!w.manager_id){V.error("Territory manager is required.");return}if(w.user_ids.length===0){V.error("Please assign at least one user.");return}let Ct=w.company_id?Number(w.company_id):null;if(!Ct&&w.user_ids.length>0){const ge=w.user_ids[0],ye=b.find(Pe=>String(Pe.id)===String(ge));ye&&ye.company&&(Ct=ye.company.id)}const kt=[...new Set(w.user_ids.map(ge=>Number(ge)))],At={name:ot,description:w.description?.trim()||"",manager_id:w.manager_id?Number(w.manager_id):null,user_ids:kt,company_id:Ct},jt=_&&E?"update":"create";z({title:jt==="create"?"Confirm New Territory":"Confirm Update",message:a.jsxs("span",{children:[jt==="create"?"Create":"Update"," territory ",a.jsx("span",{className:"font-semibold",children:ot})," with ",At.user_ids.length," assigned users?"]}),confirmLabel:jt==="create"?"Create":"Update",cancelLabel:"Cancel",variant:"primary",action:{type:jt,payload:At,targetId:E,name:ot}})},ie=Ie=>{if(!Ie)return;const ot=Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager",Ct=ot?"Archive":"Delete",kt=ot?`Are you sure you want to archive <span class="font-semibold">${Ie.name}</span>? 
          <br/><span class="text-xs text-orange-500">This will archive assignments for all ${Ie.assigned_users_list.length} users in this group.</span>`:`Are you sure you want to delete <span class="font-semibold">${Ie.name}</span>? 
          <br/><span class="text-xs text-red-500">This will remove assignments for all ${Ie.assigned_users_list.length} users in this group.</span>`,At={type:"bulk-delete",territory_ids:Ie.territory_ids,name:Ie.name};z({title:`${Ct} Territory Group`,message:a.jsx("span",{dangerouslySetInnerHTML:{__html:kt}}),confirmLabel:Ct,cancelLabel:"Cancel",variant:ot?"warning":"danger",action:At})},G=async()=>{if(Ne.length===0)return;const Ie=Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager",ot=Ie?"Archive":"Delete",Ct=Ie?`Are you sure you want to archive <span class="font-semibold">${Ne.length}</span> selected territories? This action cannot be undone.`:`Are you sure you want to delete <span class="font-semibold">${Ne.length}</span> selected territories? This action cannot be undone.`;z({title:`${ot} Territories`,message:a.jsx("span",{dangerouslySetInnerHTML:{__html:Ct}}),confirmLabel:`${ot} ${Ne.length} Territory(ies)`,cancelLabel:"Cancel",variant:Ie?"warning":"danger",action:{type:"bulk-delete",territory_ids:Ne}})},X=Ie=>{if(Ie.target.checked){const ot=me.filter(Ct=>Xe(Ct)).flatMap(Ct=>Ct.territory_ids?Ct.territory_ids:[Ct.id]);de(ot)}else de([])},ve=Ie=>{let ot=[];typeof Ie=="object"&&Ie.territory_ids?ot=Ie.territory_ids:typeof Ie=="object"&&Ie.id?ot=[Ie.id]:ot=[Ie],de(Ct=>ot.every(At=>Ct.includes(At))?Ct.filter(At=>!ot.includes(At)):[...Ct,...ot.filter(At=>!Ct.includes(At))])},$e=async()=>{if(!W?.action){z(null);return}const{action:Ie}=W,{type:ot,payload:Ct,targetId:kt,name:At}=Ie;if(!(ot==="create"&&ue.current)){ot==="create"&&(ue.current=!0),J(!0);try{if(ot==="create")A(!0),await se.post("/territories/assign",Ct),V.success(`Territory "${At}" created.`),await ke(),await Fe(),Ze(!1);else if(ot==="update")A(!0),await se.put(`/territories/${kt}`,Ct),V.success(`Territory "${At}" updated.`),Te.current=!0,Ze(!1),u(null),t&&e("/admin/territory"),await ke(),await Fe();else if(ot==="delete"){re(kt),await se.delete(`/territories/${kt}`);const jt=it()?"archived":"deleted";V.success(`Territory "${At}" ${jt}.`),await ke(),c?.id===kt&&u(null),h(!1)}else if(ot==="bulk-delete"){await se.delete("/territories/admin/bulk-delete",{data:{territory_ids:Ie.territory_ids}});const jt=it()?"archived":"deleted",ge=At?`Territory "${At}" ${jt} (${Ie.territory_ids.length} user(s)).`:`Successfully ${jt} ${Ie.territory_ids.length} territories`;V.success(ge),de([]),await ke(),u(null),h(!1)}}catch(jt){console.error(jt),V.error("An error occurred.")}finally{A(!1),_e(!1),re(null),J(!1),z(null),ot==="create"&&(ue.current=!1)}}},Le=()=>{Q||z(null)},me=f.useMemo(()=>{if(D==="board")return le;const Ie=(we-1)*ne;return le.slice(Ie,Ie+ne)},[le,we,ne,D]),Re=le.length>0,qe=()=>Z(Ie=>Math.max(Ie-1,1)),rt=()=>Z(Ie=>Math.min(Ie+1,Math.ceil(le.length/ne)||1)),st=Ie=>!Ie||Ie.length===0?"Unassigned":Ie.length===1?`${Ie[0].first_name} ${Ie[0].last_name}`:`${Ie[0].first_name} ${Ie[0].last_name} +${Ie.length-1} more`;return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[v&&a.jsx(Wt,{message:"Loading territories..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-0 mb-7",children:[a.jsxs("h2",{className:"flex items-center text-2xl font-semibold text-gray-800",children:[a.jsx(ec,{className:"mr-2 text-blue-600"})," Territory"]}),a.jsx("div",{className:"flex justify-center lg:justify-end md:justify-end w-full",children:["ceo","admin","group manager","group_manager"].includes(Oe.toLowerCase())&&(Array.isArray(b)&&b.length>0?a.jsxs("button",{onClick:Ve,className:"flex items-center bg-black text-white px-3 py-2 rounded-md hover:bg-gray-800 text-sm",children:[a.jsx(ta,{})," Create Territory"]}):a.jsxs("div",{className:"text-xs bg-red-50 p-2 rounded-lg ring ring-red-300 text-red-700 flex items-center gap-1",children:[a.jsx(wze,{})," Add users to assign territories"]}))})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mt-6 mb-4 flex flex-col md:flex-row items-center gap-2",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full md:w-4/4",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search territory",className:"focus:outline-none w-full",value:n,onChange:Ie=>s(Ie.target.value)})]}),Oe.toLowerCase()!=="sales"&&a.jsx("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-1/2",children:a.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 h-11 w-full text-sm",value:o,onChange:Ie=>l(Ie.target.value),children:[a.jsx("option",{value:"",children:"Filter by Users"}),b.map(Ie=>a.jsxs("option",{value:String(Ie.id),children:[Ie.first_name," ",Ie.last_name]},Ie.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{onClick:()=>H("board"),className:`px-4 py-2 rounded-full text-sm ${D==="board"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"Board View"}),a.jsx("button",{onClick:()=>H("list"),className:`px-4 py-2 rounded-full text-sm ${D==="list"?"bg-gray-800 text-white":"bg-gray-100"}`,children:"List View"})]}),D==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Re?me.map(Ie=>a.jsxs("div",{onClick:()=>{u(Ie);let ot;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ot="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ot="group-manager":Oe.toLowerCase()==="manager"?ot="manager":ot="sales",e(`/${ot}/territory/${Ie.id}`)},className:`relative flex flex-col cursor-pointer transition p-4 border shadow ${Ie.status==="Inactive"?"bg-gray-50 border-gray-300":"bg-white border-gray-200 hover:shadow-md"}`,children:[a.jsx("div",{className:`absolute top-0 left-0 w-full h-5 rounded-t-md ${Ie.status==="Inactive"?"bg-gray-400":"bg-secondary"}`}),Ie.status==="Inactive"&&a.jsx("span",{className:"absolute top-2 right-2 bg-red-100 text-red-700 text-xs font-semibold px-2 py-1 rounded",children:"Inactive"}),a.jsx("h3",{className:"font-medium text-gray-900 mb-2 pt-7",children:Ie.name}),Ie.description&&a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:Ie.description}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm mb-2",children:[a.jsx(sa,{})," ",st(Ie.assigned_users_list)]}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-2"}),a.jsx("div",{className:"text-gray-400 text-xs text-right",children:Ie.created_at?new Date(Ie.created_at).toLocaleDateString():""})]},Ie.id)):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No territories found."})}),D==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[!["sales","manager"].includes(Oe.toLowerCase())&&a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:(()=>{const Ie=me.filter(ot=>Xe(ot));return Ie.length===0?!1:Ie.every(ot=>ot.territory_ids&&ot.territory_ids.every(Ct=>Ne.includes(Ct)))})(),onChange:X})}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Manager"}),!["sales","manager"].includes(Oe.toLowerCase())&&a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Ne.length>0?a.jsx("button",{onClick:G,className:`${Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?"text-orange-600 hover:text-orange-800 hover:bg-orange-50":"text-red-600 hover:text-red-800 hover:bg-red-50"} transition p-1 rounded-full`,title:`${Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?"Archive":"Delete"} ${Ne.length} selected territories`,children:Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?a.jsx(Zt,{size:18}):a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Re?me.map(Ie=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",children:[!["sales","manager"].includes(Oe.toLowerCase())&&a.jsx("td",{className:"py-3 px-4",onClick:ot=>ot.stopPropagation(),children:Xe(Ie)?a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ie.territory_ids&&Ie.territory_ids.some(ot=>Ne.includes(ot)),onChange:()=>ve(Ie)}):a.jsx("div",{className:"w-4 h-4"})}),a.jsx("td",{className:"py-3 px-4 font-medium",onClick:()=>{u(Ie);let ot;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?ot="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?ot="group-manager":Oe.toLowerCase()==="manager"?ot="manager":ot="sales",e(`/${ot}/territory/${Ie.id}`)},children:a.jsxs("div",{className:"flex items-center gap-2",children:[Ie.name,Ie.status==="Inactive"&&a.jsx("span",{className:"bg-red-100 text-red-700 text-xs font-semibold px-2 py-1 rounded",children:"Inactive"})]})}),a.jsx("td",{className:"py-3 px-4",children:st(Ie.assigned_users_list)}),a.jsx("td",{className:"py-3 px-4",children:Ie.managed_by?`${Ie.managed_by.first_name}`:""}),a.jsx("td",{})]},Ie.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"No territories found."})})})]})}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-xl p-8 relative",children:[a.jsx("button",{className:"absolute top-2 right-4 text-gray-500 hover:text-black",onClick:()=>{u(null);let Ie;Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"?Ie="admin":Oe.toLowerCase()==="group manager"||Oe.toLowerCase()==="group_manager"?Ie="group-manager":Oe.toLowerCase()==="manager"?Ie="manager":Ie="sales",e(`/${Ie}/territory`)},children:a.jsx(ea,{size:24})}),a.jsxs("h2",{className:"text-3xl font-semibold mb-1",children:[c.name,c.status==="Inactive"&&a.jsx("span",{className:"ml-3 inline-block bg-red-100 text-red-700 text-sm font-semibold px-3 py-1 rounded",children:"Inactive"})]}),a.jsx("div",{className:"h-px bg-gray-200 w-full mb-4"}),a.jsx("p",{className:"text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-700 text-sm mb-6",children:c.description||""}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Manager"}),a.jsx("div",{className:"font-medium",children:c.managed_by?`${c.managed_by.first_name} ${c.managed_by.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"Assigned To"}),a.jsx("div",{className:"flex flex-col gap-1 mt-1 max-h-32 overflow-y-auto",children:c.assigned_users_list&&c.assigned_users_list.length>0?c.assigned_users_list.map(Ie=>a.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-medium",children:[a.jsx(sa,{})," ",Ie.first_name," ",Ie.last_name]},Ie.id)):"Unassigned"})]})]}),(Oe.toLowerCase()==="ceo"||Oe.toLowerCase()==="admin"||(Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager")&&be&&c?.territory_creator?.id===be.id)&&a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsxs("button",{onClick:()=>Je(c),className:"bg-blue-500 text-white px-4 py-2 rounded flex items-center gap-2",children:[a.jsx(hn,{})," Edit"]}),a.jsx("button",{onClick:()=>ie(c),className:`${Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?"bg-orange-500 hover:bg-orange-600":"bg-red-500 hover:bg-red-600"} text-white px-4 py-2 rounded flex items-center gap-2`,children:Oe.toLowerCase()==="group_manager"||Oe.toLowerCase()==="group manager"?a.jsxs(a.Fragment,{children:[a.jsx(Zt,{})," Archive"]}):a.jsxs(a.Fragment,{children:[a.jsx(va,{})," Delete"]})})]})]})}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg w-full max-w-xl p-6 relative",children:[a.jsxs("button",{className:"absolute top-4 right-4",onClick:()=>{Ze(),_e(!1)},children:[a.jsx(ea,{size:22})," "]}),a.jsx("h2",{className:"text-xl font-semibold text-center mb-6",children:_?"Edit Territory":"Create Territory"}),a.jsxs("form",{className:"space-y-4",onSubmit:he,noValidate:!0,children:[a.jsx(Nze,{label:"Territory Name",name:"name",value:w.name,onChange:ze,required:!0,isSubmitted:Ue}),a.jsx(Cze,{label:"Territory Manager",name:"manager_id",value:w.manager_id,onChange:ze,options:[{value:"",label:"Assign Manager"},...b.map(Ie=>({value:String(Ie.id),label:`${Ie.first_name} ${Ie.last_name}`}))],required:!0,isSubmitted:Ue}),a.jsx(jze,{label:a.jsxs(a.Fragment,{children:["Assign Users ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),placeholder:"Search and select users...",options:b.map(Ie=>({value:String(Ie.id),label:`${Ie.first_name} ${Ie.last_name}`})),selectedValues:w.user_ids,onChange:at,required:!0,isSubmitted:Ue}),a.jsx(Sze,{label:"Description",name:"description",value:w.description,onChange:ze}),a.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>{Ze(),_e(!1)},className:"px-4 py-2 bg-red-400 text-white rounded",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-tertiary text-white rounded",children:T?"Saving...":"Save Territory"})]})]})]})}),D==="list"&&a.jsx(la,{className:"mt-4",totalItems:le.length,pageSize:ne,currentPage:we,onPrev:qe,onNext:rt,onPageSizeChange:Ie=>{pe(Ie),Z(1)},label:"territories"}),W&&a.jsx(_ze,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:$e,onCancel:Le,loading:Q})]})})}function Nze({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100 ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
${u}
`})]})}function Cze({label:e,name:t,value:n,onChange:s,options:r,disabled:i=!1,required:o=!1,isSubmitted:l=!1}){const c=l&&o&&!n;return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{name:t,value:n??"",onChange:s,disabled:i,className:`w-full border rounded-md px-3 py-2 text-sm bg-white focus:ring-2 outline-none disabled:bg-gray-100 ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-gray-400"}`,children:r.map(u=>a.jsx("option",{value:u.value,children:u.label},u.value))})]})}function Sze({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-gray-400 outline-none disabled:bg-gray-100"})]})}function _ze({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){const[u,d]=f.useState(!1);if(!e)return d(!1),null;let h;i==="danger"?h="bg-red-500 hover:bg-red-600 border border-red-400":i==="warning"?h="bg-orange-500 hover:bg-orange-600 border border-orange-400":h="bg-tertiary hover:bg-secondary border border-tertiary";const p=()=>{u||o||(d(!0),l())};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o||u,children:r}),a.jsx("button",{type:"button",onClick:p,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${h}`,disabled:o||u,children:o?"Processing...":s})]})]})})}const Aze=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"},{value:"INACTIVE",label:"INACTIVE"}],Tze=e=>e?String(e).toUpperCase():"",lu=e=>{const t=Tze(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":t==="INACTIVE"?"INACTIVE":"PLANNED"},_A=e=>{const t=lu(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":t==="INACTIVE"?"INACTIVE":"--"},r8=e=>{switch(lu(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";case"INACTIVE":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},i8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function o8(){const[e,t]=f.useState(!1),[n,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(null),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(!1),[_,k]=f.useState(!1),[T,A]=f.useState("PLANNED"),[E,M]=f.useState(!1),[O,I]=f.useState(!1),[D,H]=f.useState(10),[W,z]=f.useState(1),[Q,J]=f.useState([]),[Y,re]=f.useState(null),{comments:we,addComment:Z,refresh:ne}=kn({relatedType:"call",relatedId:n?.id});f.useEffect(()=>{n?.id&&ne()},[n?.id,ne]),Us();const pe=Tt(),Ne=Jt(),de=ye=>{if(!ye)return"";const Pe=String(ye).split("-");return Pe.length===3?`${Pe[0]}-${Pe[2]}`:String(ye)},oe={subject:"",call_time:(()=>{const ye=new Date,Pe=ye.getFullYear(),Ce=String(ye.getMonth()+1).padStart(2,"0"),Qe=String(ye.getDate()).padStart(2,"0");return`${Pe}-${Ce}-${Qe}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[Te,ue]=f.useState(oe);f.useEffect(()=>{const ye=Ne.state,Pe=ye?.callID;if(Pe&&!ye?.openCallModal){re(Pe),pe(Ne.pathname,{replace:!0,state:{}});return}!ye?.openCallModal||!ye?.initialCallData||ye.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ye.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),ue(Ce=>({...Ce,...ye.initialCallData,relatedTo1:ye.initialCallData.relatedTo1?String(ye.initialCallData.relatedTo1):"",relatedTo2:ye.initialCallData.relatedTo2?String(ye.initialCallData.relatedTo2):""})),pe(Ne.pathname,{replace:!0,state:{}}))},[Ne.state,o]),f.useEffect(()=>{if(Y&&d.length>0&&!O){const ye=d.find(Pe=>Pe.id===Y);ye?s(ye):V.error("Call not found."),re(null)}},[Y,d,O]);const Oe=async()=>{try{I(!0);const ye=await se.get("/calls/admin/fetch-all"),Ce=[...Array.isArray(ye.data)?ye.data:[]].sort((Qe,F)=>{const q=Qe?.created_at?new Date(Qe.created_at):0;return(F?.created_at?new Date(F.created_at):0)-q});h(Ce)}catch(ye){console.error("Error fetching calls:",ye),V.error("Failed to load calls")}finally{I(!1)}},xe=async()=>{try{const ye=await se.get("/users/all");x(ye.data)}catch(ye){console.error("Error fetching users: ",ye)}};f.useEffect(()=>{xe(),Oe()},[]);const[le,Fe]=f.useState(""),[ke,He]=f.useState("Filter by Status"),[Xe,it]=f.useState("Filter by Users");f.useEffect(()=>{z(1)},[le,ke,Xe,D]);const ze=f.useMemo(()=>d.filter(ye=>{const Pe=!le||[ye.subject,ye.notes,ye.lead?.title,ye.account?.name,ye.contact?.first_name,ye.contact?.last_name,ye.deal?.name].some(q=>q&&String(q).toLowerCase().includes(le.toLowerCase())),Ce=ke==="Filter by Status"||lu(ye.status)===ke,Qe=ye.call_assign_to?`${ye.call_assign_to.first_name} ${ye.call_assign_to.last_name}`:"";return Pe&&Ce&&(Xe==="Filter by Users"||Qe===Xe)}),[d,le,ke,Xe]),at=f.useMemo(()=>{const ye=(W-1)*D;return ze.slice(ye,ye+D)},[ze,W,D]),Ve=Array.isArray(p)?p.map(ye=>({id:ye.id,name:`${ye.first_name} ${ye.last_name}`})):[],Ze=()=>z(ye=>Math.max(1,ye-1)),Je=()=>z(ye=>Math.min(ye+1,Math.ceil(ze.length/D)||1)),Ue=ye=>{if(ye.target.checked){const Pe=at.map(Ce=>Ce.id);J(Pe)}else J([])},_e=ye=>{J(Pe=>Pe.includes(ye)?Pe.filter(Ce=>Ce!==ye):[...Pe,ye])},he=d.length,ie=d.filter(ye=>lu(ye.status)==="PLANNED").length,G=d.filter(ye=>lu(ye.status)==="HELD").length,X=d.filter(ye=>lu(ye.status)==="NOT_HELD").length,ve=[{title:"Total",value:he,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ie,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:G,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:X,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[$e,Le]=f.useState("Overview"),me=ye=>{const{name:Pe,value:Ce}=ye.target;ue(Qe=>{const F={...Qe,[Pe]:Ce};return Pe==="relatedType1"&&(F.relatedTo1="",Ce==="Lead"?(F.relatedType2=null,F.relatedTo2=null,u([])):Ce==="Account"&&(F.relatedType2="Contact")),Pe==="relatedType2"&&(F.relatedTo2=""),F})};f.useEffect(()=>{const ye=async()=>{try{l([]);let Pe;Te.relatedType1==="Lead"?Pe=await se.get("/leads/admin/getLeads"):Te.relatedType1==="Account"&&(Pe=await se.get("/accounts/admin/fetch-all")),Pe&&Array.isArray(Pe.data)?l(Pe.data):l([])}catch(Pe){console.error("Error fetching data:",Pe),l([])}};Te.relatedType1&&ye()},[Te.relatedType1]),f.useEffect(()=>{const ye=async()=>{try{u([]);let Pe;if(Te.relatedType1==="Account"&&Te.relatedTo1)Te.relatedType2==="Contact"?Pe=await se.get(`/contacts/from-acc/${Te.relatedTo1}`):Te.relatedType2==="Deal"?Pe=await se.get(`/deals/from-acc/${Te.relatedTo1}`):Te.relatedType2==="Quote"&&(Pe=await se.get(`/quotes/from-acc/${Te.relatedTo1}`));else{u([]);return}Pe&&Array.isArray(Pe.data)?u(Pe.data):u([])}catch(Pe){console.error("Error fetching data:",Pe),u([])}};Te.relatedType2&&ye()},[Te.relatedType2,Te.relatedTo1,Te.relatedType1]);const[Re,qe]=f.useState(!1),rt=ye=>{ye.preventDefault(),qe(!0);const Pe=Te.subject;if(!Pe||Pe.trim()===""){V.error("Subject is required.");return}if(!Te.relatedTo1){V.error(`Please select a ${Te.relatedType1||"Lead/Account"}.`);return}if(!Te.assigned_to){V.error("Subject is required.");return}const Qe={...Te,duration_minutes:Te.duration_minutes?parseInt(Te.duration_minutes,10):null,relatedTo1:Te.relatedTo1?parseInt(Te.relatedTo1,10):null,relatedTo2:Te.relatedType1==="Lead"?null:Te.relatedTo2?parseInt(Te.relatedTo2,10):null,relatedType2:Te.relatedType1==="Lead"?null:Te.relatedType2,assigned_to:Te.assigned_to?parseInt(Te.assigned_to,10):null},F=v&&b?"update":"create",q=(Te.subject||"").trim()||"Untitled Call";i({title:F==="create"?"Confirm New Call":"Confirm Update",message:F==="create"?`Create "${q}"?`:`Save changes to "${q}"?`,confirmLabel:F==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:F,payload:Qe,targetId:b||null,name:q}})},st=ye=>s(ye),Ie=()=>{t(!1),j(!1),N(null)},ot=async()=>{Q.length!==0&&i({title:"Delete Calls",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:Q.length})," selected calls? This action cannot be undone."]}),confirmLabel:`Delete ${Q.length} Call(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",call_ids:Q}})},Ct=async()=>{if(!r?.action){i(null);return}const{action:ye}=r,{type:Pe,payload:Ce,targetId:Qe,name:F}=ye;k(!0);try{if(Pe==="create")S(!0),await se.post("/calls/create",Ce),V.success(`Call "${F}" created successfully.`),t(!1),ue(oe),j(!1),N(null),await Oe();else if(Pe==="update"){if(!Qe)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Qe}`,Ce),V.success(`Call "${F}" updated successfully.`),t(!1),ue(oe),j(!1),N(null),await Oe()}else if(Pe==="delete"){if(!Qe)throw new Error("Missing call identifier for deletion.");await se.delete(`/calls/${Qe}`),V.success(`Call "${F}" deleted successfully.`),n?.id===Qe&&s(null),await Oe()}else Pe==="bulk-delete"&&(await se.delete("/calls/admin/bulk-delete",{data:{call_ids:Q}}),V.success(`Successfully deleted ${Q.length} calls`),J([]),await Oe())}catch(q){const fe=Pe==="create"?"Failed to create call. Please review the details and try again.":Pe==="update"?"Failed to update call. Please review the details and try again.":"Failed to delete call. Please try again.",te=q?.response?.data?.detail||fe;V.error(te)}finally{(Pe==="create"||Pe==="update")&&S(!1),k(!1),i(null)}},kt=()=>{_||i(null)},At=async()=>{if(n?.id)try{M(!0),await se.put(`/calls/${n.id}`,{status:T}),V.success(`Status updated to ${_A(T)}`),h(ye=>Array.isArray(ye)?ye.map(Pe=>Pe.id===n.id?{...Pe,status:T}:Pe):ye),s(null)}catch(ye){const Pe=ye.response?.data?.detail||"Failed to update status.";V.error(Pe)}finally{M(!1)}};f.useEffect(()=>{n&&A(lu(n.status))},[n]);const jt=n?a.jsxs("div",{id:"callModalBackdrop",onClick:ye=>ye.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[O&&a.jsx(Wt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${r8(n.status)}`,children:_A(n.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ye=q=>{if(!q)return"";const fe=new Date(q),te=fe.getFullYear(),B=String(fe.getMonth()+1).padStart(2,"0"),ce=String(fe.getDate()).padStart(2,"0"),De=String(fe.getHours()).padStart(2,"0"),U=String(fe.getMinutes()).padStart(2,"0");return`${te}-${B}-${ce}T${De}:${U}`},Pe=n.lead?"Lead":n.account?"Account":"Lead",Ce=n.lead?n.lead.id:n.account?n.account.id:null,Qe=Pe==="Lead"?null:n.contact?"Contact":n.deal?"Deal":n.quote?"Quote":"Contact",F=Pe==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:n.quote?n.quote.id:null;ue({subject:n.subject||"",call_time:ye(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:Pe,relatedType2:Qe,relatedTo1:Ce?String(Ce):"",relatedTo2:F?String(F):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),j(!0),N(n.id),s(null),t(!0)},children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>{const ye=n.subject||"this call";i({title:"Delete Call",message:`Are you sure you want to permanently delete "${ye}"? This action cannot be undone.`,confirmLabel:"Delete Call",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:n.id,name:ye}})},children:[a.jsx(va,{className:"mr-2"}),"Delete"]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ye=>a.jsx("button",{onClick:()=>Le(ye),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${$e===ye?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ye},ye))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[$e==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(mo,{label:"Call Time",value:i8(n.call_time)}),a.jsx(mo,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(mo,{label:"Direction",value:n.direction||"--"}),a.jsx(mo,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(mo,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(mo,{label:"Account",value:n.account.name}),n.contact&&a.jsx(mo,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(mo,{label:"Deal",value:n.deal.name}),n.quote&&a.jsx(mo,{label:"Quote",value:de(n.quote.quote_id)}),a.jsx(mo,{label:"Created At",value:i8(n.created_at)})]})}),$e==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]}),a.jsx(Tn,{comments:we,onAddComment:Z})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:ye=>A(ye.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:At,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,ge=e?a.jsx("div",{id:"modalBackdrop",onClick:ye=>ye.target.id==="modalBackdrop"&&Ie(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{Ie(),qe(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:rt,noValidate:!0,children:[a.jsx(Eze,{label:"Subject",className:"md:col-span-2",name:"subject",value:Te.subject,onChange:me,isSubmitted:Re,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:me,value:Te.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w||v,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(AA,{items:Array.isArray(o)?o:[],value:Te.relatedTo1??"",placeholder:`Search ${Te.relatedType1||"here"}...`,getLabel:ye=>Te.relatedType1==="Lead"?ye.title:ye.name??"",onChange:ye=>ue(Pe=>({...Pe,relatedTo1:ye})),required:!0,isSubmitted:Re,disabled:w||v})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:me,value:Te.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:Te.relatedType1==="Lead"||w||v,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]}),a.jsx(AA,{disabled:Te.relatedType1==="Lead"||w||v,items:Array.isArray(c)?c:[],value:Te.relatedTo2??"",placeholder:Te.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${Te.relatedType2||"Contact"}...`:`No ${Te.relatedType2||""} data found`,getLabel:ye=>Te.relatedType2==="Contact"?`${ye.first_name??""} ${ye.last_name??""}`.trim():Te.relatedType2==="Quote"?de(ye.quote_id)??"":ye.name??"",onChange:ye=>ue(Pe=>({...Pe,relatedTo2:ye}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:Te.call_time,onChange:me,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:Te.duration_minutes,onChange:me,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[" ","Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(AA,{items:Array.isArray(p)?p:[],value:Te.assigned_to??"",placeholder:"Search an account...",getLabel:ye=>`${ye.first_name} ${ye.last_name}`,onChange:ye=>ue(Pe=>({...Pe,assigned_to:ye})),required:!0,isSubmitted:Re})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:me,value:Te.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:me,value:Te.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(Lze,{className:"col-span-2",label:"Notes",value:Te.notes,onChange:me,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Ie(),qe(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{ue(oe),j(!1),N(null),t(!0),qe(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ve.map(ye=>a.jsx(kze,{...ye},ye.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",value:le,onChange:ye=>Fe(ye.target.value)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:ke,onChange:ye=>He(ye.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),Aze.map(ye=>a.jsx("option",{value:ye.value,children:ye.label},ye.value))]}),a.jsxs("select",{value:Xe,onChange:ye=>it(ye.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),Ve.map(ye=>a.jsx("option",{value:ye.name,children:ye.name},ye.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:at.length>0&&Q.length===at.length,onChange:Ue,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Q.length>0?a.jsx("button",{onClick:ot,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${Q.length} selected calls`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:O?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10",children:a.jsx(Wt,{message:"Loading calls..."})})}):at.length>0?at.map(ye=>a.jsxs("tr",{onClick:()=>st(ye),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Pe=>Pe.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:Q.includes(ye.id),onChange:()=>_e(ye.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ye.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[ye.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.lead.title}),ye.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.account.name}),ye.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ye.contact.first_name," ",ye.contact.last_name]}),ye.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ye.deal.name}),ye.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:de(ye.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye.call_time?new Date(ye.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ye?.call_assign_to?`${ye.call_assign_to.first_name} ${ye.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r8(ye.status)}`,children:_A(ye.status)})}),a.jsx("td",{className:"py-3 px-4"})]},ye.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(la,{totalItems:ze.length,pageSize:D,currentPage:W,onPrev:Ze,onNext:Je,onPageSizeChange:ye=>{H(ye),z(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),jt,ge,r&&a.jsx(Pze,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:Ct,onCancel:kt,loading:_})]})}function kze({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Eze({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!n;return a.jsxs("div",{className:u,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function Lze(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function mo({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function Pze({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function AA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const T1=({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,users:o=[]})=>{const c=(()=>{const A=new Date,E=A.getFullYear(),M=String(A.getMonth()+1).padStart(2,"0"),O=String(A.getDate()).padStart(2,"0");return{startTime:`${E}-${M}-${O}T08:00`,endTime:`${E}-${M}-${O}T09:00`}})(),[u,d]=f.useState({subject:"",startTime:c.startTime,endTime:c.endTime,location:"",status:"Planned",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:"Contact",relatedTo2:""}),[h,p]=f.useState([]),[x,v]=f.useState([]);f.useEffect(()=>{t!==void 0&&n&&(!t.startTime||!t.endTime)&&n(A=>({...A,startTime:A.startTime||c.startTime,endTime:A.endTime||c.endTime}))},[]);const j=A=>{if(!A)return"";const E=String(A).split("-");return E.length===3?`${E[0]}-${E[2]}`:String(A)},b=t!==void 0?t:u,N=n||d,{userRole:w}=Ks();f.useEffect(()=>{const A=async()=>{try{p([]);let E;b.relatedType1==="Lead"?E=await se.get("/leads/admin/getLeads"):b.relatedType1==="Account"&&(E=await se.get("/accounts/admin/fetch-all"));let M=[];if(E&&Array.isArray(E.data)&&(M=E.data),s&&b.relatedTo1)try{let O;b.relatedType1==="Lead"?O=await se.get(`/leads/get/${b.relatedTo1}`):b.relatedType1==="Account"&&(O=await se.get(`/accounts/get/${b.relatedTo1}`)),O&&O.data&&(M.some(D=>String(D.id)===String(b.relatedTo1))||(M=[O.data,...M]))}catch(O){console.error("Error fetching specific related item:",O)}p(M)}catch(E){console.error("Error fetching relatedTo1 data:",E),p([])}};b.relatedType1&&A()},[b.relatedType1,w,s,b.relatedTo1]),f.useEffect(()=>{const A=async()=>{try{if(v([]),b.relatedType1==="Account"&&b.relatedTo1){let E;b.relatedType2==="Contact"?E=await se.get(`/contacts/from-acc/${b.relatedTo1}`):b.relatedType2==="Deal"?E=await se.get(`/deals/from-acc/${b.relatedTo1}`):b.relatedType2==="Quote"&&(E=await se.get(`/quotes/from-acc/${b.relatedTo1}`)),E&&Array.isArray(E.data)?v(E.data):v([])}else v([])}catch(E){console.error("Error fetching relatedTo2 data:",E),v([])}};b.relatedType2&&A()},[b.relatedType2,b.relatedTo1,b.relatedType1]);const S=A=>{const{name:E,value:M}=A.target;N(O=>{const I={...O,[E]:M};return E==="relatedType1"&&(O.relatedType1!==M&&(I.relatedTo1=""),M==="Lead"?(I.relatedType2=null,I.relatedTo2=null,v([])):M==="Account"&&(I.relatedType2="Contact",I.relatedTo2="")),E==="relatedType2"&&O.relatedType2!==M&&(I.relatedTo2=""),I})},[_,k]=f.useState(!1),T=A=>{if(A.preventDefault(),k(!0),b.status==="--"){V.warn("Please select a valid status.");return}const E=b.subject;if(!E||E.trim()===""){V.error("Subject is required.");return}if(!b.assignedTo){V.error("Assigned To is required.");return}if(!b.relatedTo1){V.error(`Please select a ${b.relatedType1||"Lead/Account"}.`);return}r?r(b):e()};return a.jsx("div",{id:"modalBackdrop",onClick:A=>A.target.id==="modalBackdrop"&&e(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-60 p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-3 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:e,className:"absolute top-3 right-3 sm:top-4 sm:right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:s?"Edit Meeting":"Schedule Meeting"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 text-sm",onSubmit:T,noValidate:!0,children:[a.jsx(jb,{label:"Subject",name:"subject",value:b.subject,onChange:S,placeholder:"e.g. Meeting with Client",required:!0,isSubmitted:_,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:S,value:b.relatedType1||"Lead",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400",disabled:i,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-8 pl-8 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(TA,{items:Array.isArray(h)?h:[],disabled:i,value:b.relatedTo1??"",placeholder:`Search ${b.relatedType1||"here"}...`,getLabel:A=>b.relatedType1==="Lead"?A.title:A.name??"",onChange:A=>N(E=>({...E,relatedTo1:A})),required:!0,isSubmitted:_})]}),a.jsxs("div",{className:"flex flex-col w-full",children:[a.jsx("div",{className:"relative w-25",children:a.jsxs("select",{name:"relatedType2",onChange:S,value:b.relatedType2||"Contact",className:"w-full outline-none cursor-pointer mb-1 rounded text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:i||b.relatedType1==="Lead",children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]})}),a.jsx(TA,{items:Array.isArray(x)?x:[],value:b.relatedTo2??"",placeholder:b.relatedType1==="Lead"?"":x?.length?`Search ${b.relatedType2}...`:`No ${b.relatedType2} data found`,getLabel:A=>b.relatedType2==="Contact"?`${A.first_name??""} ${A.last_name??""}`.trim():b.relatedType2==="Quote"?j(A.quote_id)??"":A.name??"",onChange:A=>N(E=>({...E,relatedTo2:A})),disabled:b.relatedType1==="Lead"})]}),a.jsx(jb,{label:"Location",name:"location",className:"md:col-span-2",value:b.location,onChange:S,disabled:i}),a.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[a.jsx(jb,{label:"Start Time",name:"startTime",type:"datetime-local",value:b.startTime,onChange:S,disabled:i}),a.jsx(jb,{label:"End Time",name:"endTime",type:"datetime-local",value:b.endTime,onChange:S,disabled:i})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(TA,{items:Array.isArray(o)?o:[],value:b.assignedTo??"",placeholder:"Search an account...",getLabel:A=>`${A.first_name} ${A.last_name}`,onChange:A=>N(E=>({...E,assignedTo:A})),disabled:w==="Sales",required:!0,isSubmitted:_})]}),a.jsx(Dze,{label:"Status",name:"status",value:b.status,onChange:S,options:["--","Planned","Held","Not held"].map(A=>({value:A,label:A.replace("_"," ")})),disabled:i}),a.jsx(Oze,{label:"Notes",name:"notes",value:b.notes,onChange:S,rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"md:col-span-2 flex flex-col sm:flex-row justify-end gap-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Meeting":"Save Meeting"})]})]})]})})};function jb({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 outline-none disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function Dze({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l="",isSubmitted:c=!1}){const u=c&&i&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",i&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,hasError:u,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(d=>a.jsx("option",{value:d.value,children:d.label},d.value))})]})}function Oze({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function TA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const vd=({meeting:e,onClose:t,onEdit:n,onDelete:s,onStatusUpdate:r,currentUser:i,isSalesView:o=!1})=>{Tt();const[l,c]=f.useState("Overview");f.useEffect(()=>{console.log("AdminMeetingInformation - checking permissions:"),console.log("meeting.created_by:",e?.created_by),console.log("currentUser?.id:",i?.id),console.log("Match:",e?.created_by===i?.id)},[e,i]);const u=_=>{if(!_)return"";const k=String(_).split("-");return k.length===3?`${k[0]}-${k[2]}`:String(_)},d=_=>{const k=(_||"").toUpperCase();return k==="PLANNED"||k==="IN PROGRESS"?"PLANNED":k==="HELD"||k==="DONE"?"HELD":k==="NOT HELD"?"NOT_HELD":"PLANNED"},h=_=>{const k=(_||"").toUpperCase();return k==="PLANNED"?"PLANNED":k==="HELD"?"HELD":k==="NOT HELD"||k==="NOT_HELD"?"NOT HELD":"PENDING"},[p,x]=f.useState(d(e?.status||"PENDING")),[v,j]=f.useState(!1),{comments:b,addComment:N,refresh:w}=kn({relatedType:"meeting",relatedId:e?.id});if(f.useEffect(()=>{e?.id&&w()},[e?.id,w]),!e)return null;const S=_=>{const k=(_||"").toUpperCase(),T=k==="PLANNED"?"PENDING":k==="HELD"?"COMPLETED":k==="NOT_HELD"?"CANCELLED":k;switch(k){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:switch(T){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Meeting"}),a.jsx("button",{onClick:t,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:e.subject||"Meeting"}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S(d(e.status))}`,children:d(e.status||"PENDING").replace("_"," ")})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:(!["MANAGER","GROUP MANAGER","SALES"].includes(i?.role?.toUpperCase())||e?.created_by===i?.id)&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{console.log("Edit button clicked"),n&&n(e)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{console.log("Archive button clicked"),s&&s(e)},className:`inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm text-white transition focus:outline-none ${o?"bg-orange-500 hover:bg-orange-600 focus:ring-2 focus:ring-orange-400":"bg-red-500 hover:bg-red-600 focus:ring-2 focus:ring-red-400"}`,children:[o?a.jsx(Zt,{className:"mr-2"}):a.jsx(va,{className:"mr-2"}),o?"Archive":"Delete"]})]})})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(_=>a.jsx("button",{onClick:()=>c(_),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${l===_?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:_},_))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[l==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Start Time:"}),a.jsx("p",{children:e.start_time?new Date(e.start_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"End Time:"}),a.jsx("p",{children:e.end_time?new Date(e.end_time).toLocaleString():"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Meeting Title:"}),a.jsx("p",{children:e.subject||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Location:"}),a.jsx("p",{children:e.location||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsxs("p",{children:[e.meet_assign_to.first_name," ",e.meet_assign_to.last_name]})]}),e.lead&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Lead:"}),a.jsx("p",{children:e.lead.title})]}),e.account&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:e.account.name})]}),e.contact&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsxs("p",{children:[e.contact.first_name," ",e.contact.last_name]})]}),e.deal&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:e.deal.name})]}),e.quote&&a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote:"}),a.jsx("p",{children:u(e.quote.quote_id)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:d(e.status||"PENDING").replace("_"," ")})]})]})}),l==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Meeting Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:e.notes||"No notes available."})]}),a.jsx(Tn,{comments:b,onAddComment:N})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:p,onChange:_=>x(_.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:async()=>{if(!r||!e?.id)return;const _=h(p);if(d(e.status)!==p){j(!0);try{await r(e.id,_)}catch(k){console.error("Failed to update status:",k)}finally{j(!1)}}},disabled:p===e.status||v,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${p===e.status||v?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:v?"Updating...":"Update"})]})]})]})]})})})},tJ=e=>e?e.toUpperCase():"",Nb=e=>{const t=tJ(e);return t==="INACTIVE"?"INACTIVE":t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},Mze=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},Ize=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},$ze=e=>{const t=tJ(e);if(t==="INACTIVE")return"bg-gray-200 text-gray-700";switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},kA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},l8=()=>{const e=Tt(),t=Jt(),[n]=Us(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[u,d]=f.useState([]),[h,p]=f.useState(""),[x,v]=f.useState("Filter by Status"),[j,b]=f.useState(!1),[N,w]=f.useState(null),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(kA),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState(!1),[re,we]=f.useState([]),[Z,ne]=f.useState(null);f.useEffect(()=>{const ze=t.state?.openMeetingModal,at=t.state?.initialMeetingData?.relatedTo||n.get("id"),Ve=t.state?.meetingID;ze||at?(b(!0),t.state?.initialMeetingData&&E(Ze=>({...Ze,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):Ve&&(ne(Ve),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),f.useEffect(()=>{if(Z&&i.length>0&&!l){const ze=i.find(at=>at.id===Z);ze?w(ze):V.error("Meeting not found."),ne(null)}},[Z,i,l]);const pe=async()=>{if(s&&r){const ze=sessionStorage.getItem("meetingDetailData");if(ze)try{const at=JSON.parse(ze);if(at.id===parseInt(s)){w(at),sessionStorage.removeItem("meetingDetailData");return}}catch(at){console.error(at)}}c(!0);try{const ze=await se.get("/meetings/admin/fetch-all"),Ve=[...Array.isArray(ze.data)?ze.data:[]].sort((Ze,Je)=>{const Ue=Ze?.created_at?new Date(Ze.created_at).getTime():0;return(Je?.created_at?new Date(Je.created_at).getTime():0)-Ue});if(o(Ve),s&&!N){const Ze=Ve.find(Je=>Je.id===parseInt(s));Ze&&w(Ze)}}catch{V.error("Failed to load meetings.")}finally{c(!1)}},Ne=async()=>{try{const ze=await se.get("/users/all");d(Array.isArray(ze.data)?ze.data:[])}catch(ze){console.error(ze)}};f.useEffect(()=>{pe(),Ne()},[]);const de=ze=>p(ze.target.value),be=ze=>{if(ze.target.checked){const at=ue.map(Ve=>Ve.id);we(at)}else we([])},oe=ze=>{we(at=>at.includes(ze)?at.filter(Ve=>Ve!==ze):[...at,ze])},Te=f.useMemo(()=>{const ze=h.trim().toLowerCase(),at=x.trim().toUpperCase();return i.filter(Ve=>{const Ze=[Ve?.activity,Ve?.description,Ve?.relatedTo,Ve?.assignedTo],Je=ze===""||Ze.some(_e=>_e&&_e.toString().toLowerCase().includes(ze)),Ue=at==="FILTER BY STATUS"||Nb(Ve.status||"PENDING")===at;return Je&&Ue})},[i,h,x]);f.useEffect(()=>{_(1)},[h,x,k]);const ue=f.useMemo(()=>{const ze=(S-1)*k;return Te.slice(ze,ze+k)},[Te,S,k]),Oe=()=>{b(!1),E(kA),O(!1),D(null),W(!1)},xe=()=>{E(kA),O(!1),D(null),b(!0)},le=ze=>{let at="";if(ze.meet_assign_to?.id)at=String(ze.meet_assign_to.id);else if(ze.assignedTo){const X=u.find(ve=>`${ve.first_name} ${ve.last_name}`===ze.assignedTo);at=X?String(X.id):""}const Ve=X=>{if(!X)return"";try{const ve=new Date(X),$e=ve.getTimezoneOffset()*6e4;return new Date(ve.getTime()-$e).toISOString().slice(0,16)}catch{return""}};let Ze="Lead",Je="",Ue="Contact",_e="";if(ze.lead)Ze="Lead",Je=String(ze.lead.id);else if(ze.account)Ze="Account",Je=String(ze.account.id),ze.contact?(Ue="Contact",_e=String(ze.contact.id)):ze.deal?(Ue="Deal",_e=String(ze.deal.id)):ze.quote&&(Ue="Quote",_e=String(ze.quote.id));else if(ze.relatedType||ze.related_type){const X=ze.relatedType||ze.related_type,ve=ze.related_to||ze.relatedToId;X==="Lead"?(Ze="Lead",Je=String(ve)):(Ze="Account",Je=ze.account_id?String(ze.account_id):"")}const he={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},ie=Nb(ze.status),G=he[ie]||"Planned";E({subject:ze.subject||ze.activity||"",location:ze.location||"",startTime:Ve(ze.start_time||ze.startTime),endTime:Ve(ze.end_time||ze.endTime),status:G,notes:ze.description||ze.notes||"",assignedTo:at,relatedType1:Ze,relatedTo1:Je,relatedType2:Ue,relatedTo2:_e}),O(!0),D(ze.id),w(null),b(!0)},Fe=ze=>{if(!ze.subject?.trim())return V.error("Subject is required.");if(!ze.startTime)return V.error("Start time is required.");if(ze.endTime&&!(new Date(ze.endTime)-new Date(ze.startTime)>0))return V.error("End time must be after start time.");ze.relatedType1,ze.relatedTo1,ze.relatedType1==="Account"&&ze.relatedType2&&ze.relatedTo2&&(ze.relatedType2,ze.relatedTo2);const at={...ze,assignedTo:parseInt(ze.assignedTo),relatedTo1:parseInt(ze.relatedTo1),relatedTo2:parseInt(ze.relatedTo2)},Ve=M&&I?"update":"create";Q({title:Ve==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${Ve} "${at.subject}"?`,confirmLabel:Ve==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:Ve,payload:at,targetId:I,name:at.subject}})},ke=async()=>{if(!z?.action)return;const{type:ze,payload:at,targetId:Ve,name:Ze}=z.action;Y(!0);try{if(ze==="create")W(!0),await se.post("/meetings/create",at),V.success(`Meeting "${Ze}" created.`),Oe(),await pe();else if(ze==="update")W(!0),await se.put(`/meetings/${Ve}`,at),V.success(`Meeting "${Ze}" updated.`),Oe(),await pe();else if(ze==="delete")await se.delete(`/meetings/${Ve}`),V.success(`Meeting "${Ze}" deleted.`),N?.id===Ve&&w(null),await pe();else if(ze==="bulk-delete"){const{meeting_ids:Je}=z.action;await se.delete("/meetings/admin/bulk-delete",{data:{meeting_ids:Je}}),V.success(`${Je.length} meetings deleted.`),we([]),await pe()}}catch(Je){const Ue=Je.response?.data?.detail||"Action failed.";V.error(typeof Ue=="string"?Ue:JSON.stringify(Ue)),console.error(Ue)}finally{W(!1),Y(!1),Q(null)}},He=async()=>{re.length!==0&&Q({title:"Delete Meetings",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:re.length})," selected meetings? This action cannot be undone."]}),confirmLabel:`Delete ${re.length} Meeting(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",meeting_ids:re}})},Xe=ze=>{Q({title:"Delete Meeting",message:`Permanently delete "${ze.subject}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",action:{type:"delete",targetId:ze.id,name:ze.subject}})},it=async(ze,at)=>{try{await se.put(`/meetings/${ze}`,{status:at}),V.success("Status updated"),pe(),w(null)}catch{V.error("Failed to update status")}};return r&&s?N?a.jsx(vd,{meeting:N,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:le,onDelete:Xe,onStatusUpdate:it,isSalesView:!1}):a.jsx(Wt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(Wt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Dt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:xe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(ta,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:de,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:ze=>v(ze.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:ue.length>0&&re.length===ue.length,onChange:be,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:re.length>0?a.jsx("button",{onClick:He,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${re.length} selected items`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:ue.length>0?ue.map(ze=>a.jsxs("tr",{onClick:()=>w(ze),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:at=>at.stopPropagation(),children:a.jsx("input",{type:"checkbox",checked:re.includes(ze.id),onChange:()=>oe(ze.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:ze.subject}),a.jsxs("td",{className:"py-3 px-4",children:[ze.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.lead.title}),ze.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.account.name}),ze.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ze.contact.first_name," ",ze.contact.last_name]}),ze.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ze.deal.name}),ze.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ize(ze.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4",children:Mze(ze.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[ze.meet_assign_to.first_name," ",ze.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${$ze(Nb(ze.status))}`,children:Nb(ze.status).replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4 text-center"})]},ze.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(la,{totalItems:Te.length,pageSize:k,currentPage:S,onPrev:()=>_(ze=>Math.max(1,ze-1)),onNext:()=>_(ze=>Math.min(ze+1,Math.ceil(Te.length/k)||1)),onPageSizeChange:T,label:"meetings"}),j&&a.jsx(T1,{onClose:Oe,formData:A,setFormData:E,isEditing:M,onSubmit:Fe,isSubmitting:H||J,users:u}),N&&a.jsx(vd,{meeting:N,onClose:()=>w(null),onEdit:le,onDelete:Xe,onStatusUpdate:it,isSalesView:!1}),z&&a.jsx(Rze,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,variant:z.variant,onConfirm:ke,onCancel:()=>Q(null),loading:J})]})};function Rze({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}function zze(){const{user:e,mutate:t}=Gt(),n=f.useRef(null),[s,r]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState("January"),[u,d]=f.useState(0),[h,p]=f.useState(null),[x,v]=f.useState(null),[j,b]=f.useState(""),[N,w]=f.useState(!1),[S,_]=f.useState(!1),[k,T]=f.useState({type:"",text:""}),A=["January","February","March","April","May","June","July","August","September","October","November","December"];f.useEffect(()=>{e?.company&&(e.company.company_name&&r(e.company.company_name),e.company.currency&&o(e.company.currency),e.company.quota_period&&c(e.company.quota_period),e.company.tax_rate!==void 0&&d(e.company.tax_rate),e.company.company_logo&&p(e.company.company_logo),e.company.address&&b(e.company.address))},[e]);const E=H=>{const W=H.target.files?.[0];if(!W)return;if(!W.type.startsWith("image/")){T({type:"error",text:"Please select an image file"});return}if(W.size>2*1024*1024){T({type:"error",text:"Image size should be less than 2MB"});return}const z=new FileReader;z.onloadend=()=>{v(z.result)},z.readAsDataURL(W)},M=()=>{v(""),p(null)},O=async H=>{H.preventDefault(),w(!0),T({type:"",text:""});try{const W={company_name:s,currency:i,quota_period:l,tax_rate:parseFloat(u),address:j};x!==null&&(W.company_logo=x),await se.put("/company/update-name",W),t&&await t(),v(null),T({type:"success",text:"Company settings updated successfully!"})}catch(W){console.error("Update error:",W);const z=W.response?.data?.detail||"Failed to update settings.";T({type:"error",text:z})}finally{w(!1)}},I=async()=>{_(!0),T({type:"",text:""});try{const H=await se.get("/admin/backup/csv",{responseType:"blob"}),W=H.headers?.["content-disposition"]||"",Q=/filename="?([^";]+)"?/i.exec(W)?.[1]||"crm-backup.zip",J=window.URL.createObjectURL(new Blob([H.data])),Y=document.createElement("a");Y.href=J,Y.setAttribute("download",Q),document.body.appendChild(Y),Y.click(),Y.remove(),window.URL.revokeObjectURL(J)}catch(H){console.error("Backup download error:",H);const W=H?.response?.data?.detail||"Failed to download backup. Please try again.";T({type:"error",text:W})}finally{_(!1)}},D=["CEO","ADMIN"].includes(e?.role?.toUpperCase());return a.jsxs("div",{className:"max-w-2xl mx-auto mt-10 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"bg-[#fbbf24] px-6 py-4",children:[a.jsxs("h2",{className:"text-gray-900 font-bold text-xl flex items-center gap-2",children:[a.jsx(na,{})," Company Details"]}),a.jsx("p",{className:"text-gray-700 text-sm",children:"Manage your organization's identity and fiscal settings"})]}),a.jsxs("form",{onSubmit:O,className:"p-6 space-y-6",children:[!D&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 text-amber-700 rounded-lg text-sm border border-amber-200",children:[a.jsx(Qu,{}),a.jsx("span",{children:"You only have view-access. Changes can only be made by an Admin or CEO."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name"}),a.jsx("input",{type:"text",value:s,onChange:H=>r(H.target.value),disabled:!D||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Enter company name",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(Zie,{className:"text-gray-500"})," Company Address"]}),a.jsx("textarea",{value:j,onChange:H=>b(H.target.value),disabled:!D||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50 disabled:cursor-not-allowed resize-none",placeholder:"Enter company address",rows:3})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(FI,{className:"text-gray-500"})," Company Logo"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:x||h?a.jsx("img",{src:x||h,alt:"Company Logo",className:"w-16 h-16 object-contain border border-gray-200 rounded-lg bg-gray-50"}):a.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-gray-50",children:a.jsx(FI,{className:"text-gray-400 text-xl"})})}),D&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("input",{type:"file",ref:n,accept:"image/*",onChange:E,className:"hidden",id:"company-logo-upload"}),a.jsxs("button",{type:"button",onClick:()=>n.current?.click(),disabled:N,className:"flex items-center gap-2 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition disabled:opacity-50",children:[a.jsx(toe,{className:"text-gray-500"}),x||h?"Change Logo":"Upload Logo"]}),(x||h)&&a.jsx("button",{type:"button",onClick:M,disabled:N,className:"text-xs text-red-600 hover:text-red-700 transition",children:"Remove Logo"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Max 2MB, PNG or JPG"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(Dt,{className:"text-gray-500"})," Fiscal Year Start"]}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:l,onChange:H=>c(H.target.value),disabled:!D||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none appearance-none bg-white disabled:bg-gray-50 cursor-pointer",children:A.map(H=>a.jsx("option",{value:H,children:H},H))}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(eoe,{className:"text-gray-500"})," Default Tax Rate"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.01",value:u,onChange:H=>d(H.target.value),disabled:!D||N,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fbbf24] focus:border-transparent outline-none transition disabled:bg-gray-50",placeholder:"0.00"}),a.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-8 pointer-events-none text-gray-400 font-medium",children:"%"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(f9,{className:"text-gray-500"})," Currency"]}),a.jsxs("div",{className:"flex gap-3 max-w-xs",children:[a.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i===""?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!D||N?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"radio",name:"currency",value:"",checked:i==="",onChange:()=>o(""),disabled:!D||N,className:"hidden"}),a.jsx("span",{className:"text-lg font-bold",children:""})," PHP"]}),a.jsxs("label",{className:`flex-1 flex items-center justify-center gap-1 p-2 border rounded-lg cursor-pointer transition-all ${i==="$"?"bg-amber-50 border-[#fbbf24] text-amber-900 font-medium ring-1 ring-[#fbbf24]":"border-gray-200 hover:bg-gray-50 text-gray-600"} ${!D||N?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("input",{type:"radio",name:"currency",value:"$",checked:i==="$",onChange:()=>o("$"),disabled:!D||N,className:"hidden"}),a.jsx("span",{className:"text-lg font-bold",children:"$"})," USD"]})]})]}),k.text&&a.jsx("div",{className:`p-3 rounded-lg text-sm border transition-all ${k.type==="success"?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"}`,children:k.text}),a.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:D&&a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{type:"button",onClick:I,disabled:N||S,className:"flex items-center gap-2 border border-gray-300 bg-white text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 transition active:scale-95",children:[a.jsx(Wo,{}),S?"Preparing...":"Download Backup (CSV)"]}),a.jsxs("button",{type:"submit",disabled:N||S,className:"flex items-center gap-2 bg-[#1e293b] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#334155] disabled:opacity-50 transition shadow-md active:scale-95",children:[a.jsx(NL,{}),N?"Updating...":"Save Settings"]})]})})]})]})}function Fze(){const[e,t]=f.useState(null),[n,s]=f.useState({subject:"",category:"",description:"",priority:"medium"}),[r,i]=f.useState(""),[o,l]=f.useState(!1),[c,u]=f.useState([{id:1,sender:"support",message:"Hello! Welcome to Sari-Sari CRM Support. How can I help you today?",timestamp:new Date}]),[d,h]=f.useState(""),[p,x]=f.useState(!1),v=f.useRef(null);f.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[c]),f.useEffect(()=>{document.title="Help Center | Sari-Sari CRM"},[]);const j=[{id:1,category:"Getting Started",title:"How to create your first account?",content:"Navigate to the Accounts page from the sidebar, click the 'Add Account' button, fill in the required information such as company name, email, and phone number, then click Save."},{id:2,category:"Getting Started",title:"How to add new contacts?",content:"Go to Contacts in the sidebar, click 'Add Contact', enter the contact details including name, email, phone, and associated account, then save the contact."},{id:3,category:"Leads & Deals",title:"How to convert a lead to a deal?",content:"Open the lead you want to convert, click on the 'Convert to Deal' button, review the pre-filled information, make any necessary adjustments, and confirm the conversion."},{id:4,category:"Leads & Deals",title:"How to manage deal stages?",content:"Deals progress through stages: Prospecting, Qualification, Proposal, Negotiation, and Closed. Update the stage by editing the deal and selecting the appropriate stage from the dropdown."},{id:5,category:"Tasks & Activities",title:"How to create and assign tasks?",content:"Navigate to Tasks, click 'Add Task', fill in the task details, assign it to a team member, set the due date and priority, then save. The assigned user will be notified."},{id:6,category:"Tasks & Activities",title:"How to schedule meetings?",content:"Go to Meetings, click 'Schedule Meeting', select participants, set the date and time, add an agenda, and save. All participants will receive calendar invites."},{id:7,category:"Reports & Analytics",title:"How to view sales performance?",content:"Access the Dashboard to see key metrics. For detailed reports, navigate to Targets to view individual and team performance against set goals."},{id:8,category:"Account Settings",title:"How to manage user permissions?",content:"Go to Users in the sidebar, select a user, and edit their role. Different roles (Admin, Manager, Sales, Marketing) have different access levels and permissions."}],b=["Technical Issue","Login Problem","Data Issue","Feature Request","Performance Issue","Other"],w=j.filter(M=>M.title.toLowerCase().includes(r.toLowerCase())||M.content.toLowerCase().includes(r.toLowerCase())||M.category.toLowerCase().includes(r.toLowerCase())).reduce((M,O)=>(M[O.category]||(M[O.category]=[]),M[O.category].push(O),M),{}),S=(M,O)=>{s(I=>({...I,[M]:O}))},_=async M=>{if(M.preventDefault(),!n.subject.trim()||!n.category||!n.description.trim()){V.warn("Please fill in all required fields.");return}l(!0),setTimeout(()=>{V.success("Your issue has been submitted successfully! We'll get back to you soon."),s({subject:"",category:"",description:"",priority:"medium"}),t(null),l(!1)},1500)},[k,T]=f.useState(null),A=M=>{if(M.preventDefault(),!d.trim())return;const O={id:c.length+1,sender:"user",message:d.trim(),timestamp:new Date};u(I=>[...I,O]),h(""),x(!0),setTimeout(()=>{const I=["Thank you for your message. Let me look into that for you.","I understand your concern. Can you provide more details?","That's a great question! Here's what I can help you with...","I'm checking our system now. Please hold on for a moment.","Thanks for reaching out! I'll make sure to assist you with this."],D=I[Math.floor(Math.random()*I.length)];u(H=>[...H,{id:H.length+1,sender:"support",message:D,timestamp:new Date}]),x(!1)},1500)},E=M=>new Date(M).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Help Center"}),a.jsx("p",{className:"text-gray-600",children:"How can we help you today?"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{onClick:()=>t(e==="report"?null:"report"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="report"?"border-red-400 ring-2 ring-red-100":"border-transparent hover:border-red-200"}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Qu,{className:"w-7 h-7 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Report an Issue"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Having a problem? Let us know"})]})]}),a.jsx(Ot,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="report"?"rotate-90":""}`})]})})}),a.jsx("div",{onClick:()=>t(e==="solutions"?null:"solutions"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="solutions"?"border-blue-400 ring-2 ring-blue-100":"border-transparent hover:border-blue-200"}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(Vie,{className:"w-7 h-7 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Browse Solutions"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Find answers to common questions"})]})]}),a.jsx(Ot,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="solutions"?"rotate-90":""}`})]})})}),a.jsx("div",{onClick:()=>t(e==="chat"?null:"chat"),className:`bg-white rounded-xl shadow-md border-2 cursor-pointer transition-all duration-300 hover:shadow-lg ${e==="chat"?"border-green-400 ring-2 ring-green-100":"border-transparent hover:border-green-200"}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"w-14 h-14 bg-green-100 rounded-full flex items-center justify-center relative",children:[a.jsx(zy,{className:"w-7 h-7 text-green-600"}),a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-white"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Live Chat Support"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Chat with our support team"})]})]}),a.jsx(Ot,{className:`w-6 h-6 text-gray-400 transition-transform duration-300 ${e==="chat"?"rotate-90":""}`})]})})})]}),e==="report"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(UI,{className:"text-red-500"}),"Report an Issue"]}),a.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("form",{onSubmit:_,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:n.subject,onChange:M=>S("subject",M.target.value),placeholder:"Brief description of the issue",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:n.category,onChange:M=>S("category",M.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition bg-white",children:[a.jsx("option",{value:"",children:"Select a category"}),b.map(M=>a.jsx("option",{value:M,children:M},M))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),a.jsx("div",{className:"flex gap-3",children:["low","medium","high"].map(M=>a.jsx("button",{type:"button",onClick:()=>S("priority",M),className:`px-4 py-2 rounded-lg border transition capitalize ${n.priority===M?M==="high"?"bg-red-500 text-white border-red-500":M==="medium"?"bg-yellow-500 text-white border-yellow-500":"bg-green-500 text-white border-green-500":"bg-white text-gray-600 border-gray-300 hover:border-gray-400"}`,children:M},M))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{value:n.description,onChange:M=>S("description",M.target.value),placeholder:"Please describe the issue in detail. Include steps to reproduce if applicable.",rows:5,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-200 focus:border-red-400 outline-none transition resize-none"})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:o,className:"flex items-center gap-2 bg-red-500 hover:bg-red-600 text-white px-6 py-2.5 rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ak,{className:"w-4 h-4"}),"Submit Issue"]})})})]})]}),e==="solutions"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8 animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(Xie,{className:"text-blue-500"}),"Browse Solutions"]}),a.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-gray-100 rounded-full transition",children:a.jsx(ea,{className:"w-5 h-5 text-gray-500"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(Kt,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:r,onChange:M=>i(M.target.value),placeholder:"Search for solutions...",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-200 focus:border-blue-400 outline-none transition"})]}),a.jsx("div",{className:"space-y-6",children:Object.keys(w).length>0?Object.entries(w).map(([M,O])=>a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:M}),a.jsx("div",{className:"space-y-2",children:O.map(I=>a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>T(k===I.id?null:I.id),className:"w-full px-4 py-3 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition text-left",children:[a.jsx("span",{className:"font-medium text-gray-700",children:I.title}),a.jsx(Ot,{className:`w-5 h-5 text-gray-400 transition-transform duration-200 ${k===I.id?"rotate-90":""}`})]}),k===I.id&&a.jsxs("div",{className:"px-4 py-3 bg-white border-t border-gray-200",children:[a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:I.content}),a.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-500",children:[a.jsx(Qa,{className:"text-green-500"}),"Was this helpful?",a.jsx("button",{className:"text-blue-500 hover:underline ml-1",children:"Yes"}),a.jsx("span",{children:"|"}),a.jsx("button",{className:"text-blue-500 hover:underline",children:"No"})]})]})]},I.id))})]},M)):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Kt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsxs("p",{className:"text-gray-500",children:['No solutions found matching "',r,'"']}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Try a different search term or"," ",a.jsx("button",{onClick:()=>t("report"),className:"text-blue-500 hover:underline",children:"report an issue"})]})]})})]}),e==="chat"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-md mb-8 animate-fade-in overflow-hidden",children:[a.jsxs("div",{className:"bg-green-500 text-white p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(zy,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Live Chat Support"}),a.jsxs("p",{className:"text-green-100 text-xs flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-green-300 rounded-full animate-pulse"}),"Online - Typically replies in minutes"]})]})]}),a.jsx("button",{onClick:()=>t(null),className:"p-2 hover:bg-white/10 rounded-full transition",children:a.jsx(ea,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"h-80 overflow-y-auto p-4 bg-gray-50 space-y-4",children:[c.map(M=>a.jsx("div",{className:`flex ${M.sender==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`flex items-end gap-2 max-w-[80%] ${M.sender==="user"?"flex-row-reverse":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${M.sender==="user"?"bg-blue-500 text-white":"bg-green-500 text-white"}`,children:M.sender==="user"?a.jsx(sa,{className:"w-4 h-4"}):a.jsx(zy,{className:"w-4 h-4"})}),a.jsxs("div",{className:`px-4 py-2.5 rounded-2xl ${M.sender==="user"?"bg-blue-500 text-white rounded-br-md":"bg-white shadow-sm border border-gray-200 text-gray-700 rounded-bl-md"}`,children:[a.jsx("p",{className:"text-sm",children:M.message}),a.jsx("p",{className:`text-[10px] mt-1 ${M.sender==="user"?"text-blue-100":"text-gray-400"}`,children:E(M.timestamp)})]})]})},M.id)),p&&a.jsx("div",{className:"flex justify-start",children:a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 text-white flex items-center justify-center",children:a.jsx(zy,{className:"w-4 h-4"})}),a.jsx("div",{className:"bg-white shadow-sm border border-gray-200 px-4 py-3 rounded-2xl rounded-bl-md",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),a.jsx("div",{ref:v})]}),a.jsx("form",{onSubmit:A,className:"p-4 border-t border-gray-200 bg-white",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("input",{type:"text",value:d,onChange:M=>h(M.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2.5 border border-gray-300 rounded-full focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none transition"}),a.jsxs("button",{type:"submit",disabled:!d.trim(),className:"px-5 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-full transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(ak,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}),!e&&a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Need more help?"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Contact our support team for personalized assistance"}),a.jsx("div",{className:"flex justify-center gap-4",children:a.jsxs("a",{href:"mailto:support@example.com",className:"inline-flex items-center gap-2 bg-white px-4 py-2 rounded-lg shadow-sm hover:shadow-md transition text-gray-700",children:[a.jsx(UI,{className:"w-4 h-4"}),"Email Support"]})})]})]})}function Uze({toggleSidebar:e}){const[t,n]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef(null),h=Jt(),p=Tt(),{logout:x}=Ks(),{user:v,fetchUser:j}=Gt(),N={"/sales/overview":"Dashboard","/sales/accounts":"Accounts","/sales/contacts":"Contacts","/sales/leads":"Leads","/sales/deals":"Deals","/sales/quotes":"Quotes","/sales/targets":"Targets","/sales/reports":"Reports","/sales/tasks":"Tasks"}[h.pathname]||"Sales Panel";f.useEffect(()=>{j();const T=()=>{j()};return window.addEventListener("userProfileUpdated",T),()=>{window.removeEventListener("userProfileUpdated",T)}},[]),f.useEffect(()=>{const T=async()=>{try{const A=await se.get("/logs/notifications");console.log(" Fetched notifications from DB:",A.data);const E=(A.data||[]).map(M=>{const O=M.entity_id||M.new_data?.id,I=(M.entity_type||"").toLowerCase();return S({id:M.id,type:M.notif_type||M.notification_type||M.type||w(M),title:M.title||M.description,assignedBy:M.assignedBy||M.name,createdAt:M.createdAt||M.timestamp,read:M.is_read??M.read??!1,leadId:I==="lead"?O:M.leadId||M.lead_id,taskId:I==="task"?O:M.taskId||M.task_id,contactId:I==="contact"?O:M.contactId||M.contact_id,dealId:I==="deal"?O:M.dealId||M.deal_id,accountId:I==="account"?O:M.accountId||M.account_id})});o(E),c(E.filter(M=>!M.read).length)}catch(A){console.error("Failed to load history notifications",A)}};v?.id&&T()},[v?.id]);const w=T=>{const A=String(T.action||T.type||"").toUpperCase(),E={TASK_ASSIGNMENT:"task_assignment",LEAD_ASSIGNMENT:"lead_assignment",LEAD_UPDATE:"lead_update",CONTACT_ASSIGNMENT:"contact_assignment",CONTACT_UPDATE:"contact_update",DEAL_ASSIGNMENT:"deal_assignment",DEAL_UPDATE:"deal_update",ACCOUNT_ASSIGNMENT:"account_assignment",ACCOUNT_UPDATE:"account_update",TERRITORY_ASSIGNMENT:"territory_assignment",CREATE:"create",UPDATE:"update",DELETE:"delete"};if(E[A])return E[A];const M=String(T.title||T.description||"").toLowerCase(),O=String(T.entity_type||"").toLowerCase(),I=A.includes("UPDATE"),D=A.includes("CREATE");return A.includes("DELETE"),M.includes("task")||O==="task"?I?"task_update":"task_assignment":M.includes("territory")||O==="territory"?"territory_assignment":M.includes("lead")||O==="lead"?I?"lead_update":D?"lead_assignment":"lead_update":M.includes("contact")||O==="contact"?I?"contact_update":D?"contact_assignment":"contact_update":M.includes("deal")||O==="deal"?I?"deal_update":D?"deal_assignment":"deal_update":M.includes("account")||O==="account"?I?"account_update":D?"account_assignment":"account_update":M.includes("quote")||O==="quote"?"quote":M.includes("meeting")||O==="meeting"?"meeting":M.includes("call")||O==="call"?"call":"info"},S=T=>{const A={...T};switch(A.read=!!A.read,A.type){case"territory_assignment":A.title=A.title||`You have been assigned to ${A.territoryName||"a territory"}`;break;case"lead_assigned":A.type="lead_assignment",A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_assignment":A.title=A.title||`New lead assigned: ${A.leadName||A.company||"Lead"}`;break;case"lead_update":A.title=A.title||`Lead updated: ${A.leadName||A.company||"Lead"}`;break;case"task_assignment":case"task_update":A.title=A.title||`Task: ${A.taskTitle||"Task"}`;break;case"contact_assignment":A.title=A.title||`New contact assigned: ${A.contactName||A.contact||"Contact"}`;break;case"contact_update":A.title=A.title||`Contact updated: ${A.contactName||A.contact||"Contact"}`;break;case"deal_assignment":A.title=A.title||`New deal assigned: ${A.dealName||A.name||"Deal"}`;break;case"deal_update":A.title=A.title||`Deal updated: ${A.dealName||A.name||"Deal"}`;break;case"account_assignment":A.title=A.title||`New account assigned: ${A.accountName||A.name||"Account"}`;break;case"account_update":A.title=A.title||`Account updated: ${A.accountName||A.name||"Account"}`;break;case"quote":A.title=A.title||"Quote activity";break;case"meeting":A.title=A.title||"Meeting activity";break;case"call":A.title=A.title||"Call activity";break;default:A.title=A.title||"Activity"}return A},_=T=>{switch(T.type){case"task_assignment":p(`/sales/tasks/${T.taskId||T.task_id||""}`);break;case"lead_assignment":case"lead_update":p(`/sales/leads/${T.leadId||T.lead_id||""}`);break;case"contact_assignment":case"contact_update":p(`/sales/contacts/${T.contactId||T.contact_id||""}`);break;case"deal_assignment":case"deal_update":p(`/sales/deals/${T.dealId||T.deal_id||""}`);break;case"account_assignment":case"account_update":p(`/sales/accounts/${T.accountId||T.account_id||""}`);break;default:p("/sales/overview")}},k=async T=>{if(T.read){_(T);return}try{await se.patch(`/logs/mark-read/${T.id}`),o(A=>A.map(E=>E.id===T.id?{...E,read:!0}:E)),c(A=>A>0?A-1:0),_(T)}catch(A){console.error("Failed to mark notification as read",A),_(T)}};return f.useEffect(()=>{if(!v?.id)return;const T=Oj(v.id);console.log(" Connecting to WebSocket:",T);const A=new WebSocket(T);let E;const M=()=>{E=setTimeout(()=>{console.log(" Attempting WebSocket reconnection...")},3e3)};return A.onopen=()=>{console.log(" Sales WS Connected to:",T),clearTimeout(E)},A.onmessage=O=>{try{const I=JSON.parse(O.data);console.log(" Notification received:",I);const D=S(I);o(H=>[D,...H]),c(H=>H+1)}catch(I){console.error("Error parsing notification:",I)}},A.onclose=()=>{console.log(" Sales WS Disconnected"),M()},A.onerror=O=>{console.error(" Sales WS Error:",O)},()=>{clearTimeout(E),A&&A.readyState===WebSocket.OPEN&&A.close()}},[v?.id]),f.useEffect(()=>{function T(A){u.current&&!u.current.contains(A.target)&&n(!1),d.current&&!d.current.contains(A.target)&&r(!1)}return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Jf,{className:"text-2xl"})}),v?.company?.company_logo&&a.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-20 h-10 object-contain rounded"}),a.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-gray-800 truncate max-w-[150px] sm:max-w-none",children:N})]}),a.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(ux,{className:"text-xl sm:text-2xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-fade-in",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),i.length>0&&a.jsx("button",{onClick:async()=>{try{await se.patch("/logs/mark-all-read"),o(T=>T.map(A=>({...A,read:!0}))),c(0)}catch(T){console.error("Failed to mark all notifications as read",T)}},className:"text-xs text-blue-600 hover:underline",children:"Clear all"})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.length>0?i.map((T,A)=>a.jsxs("div",{onClick:()=>k(T),className:`p-4 border-b hover:bg-gray-50 cursor-pointer transition ${T.read?"bg-gray-50":"bg-white"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:`text-[10px] px-2 py-1 rounded-full font-semibold uppercase
                            ${T.type==="task_assignment"||T.type==="task_update"?"bg-purple-100 text-purple-700":T.type==="lead_assignment"||T.type==="lead_update"?"bg-green-100 text-green-700":T.type==="contact_assignment"||T.type==="contact_update"?"bg-amber-100 text-amber-700":T.type==="deal_assignment"||T.type==="deal_update"?"bg-indigo-100 text-indigo-700":T.type==="account_assignment"||T.type==="account_update"?"bg-cyan-100 text-cyan-700":T.type==="territory_assignment"?"bg-blue-100 text-blue-700":T.type==="quote"?"bg-pink-100 text-pink-700":T.type==="meeting"?"bg-teal-100 text-teal-700":T.type==="call"?"bg-red-100 text-red-700":T.type==="create"?"bg-emerald-100 text-emerald-700":T.type==="update"?"bg-yellow-100 text-yellow-700":T.type==="delete"?"bg-rose-100 text-rose-700":"bg-gray-100 text-gray-700"}`,children:T.type==="task_assignment"||T.type==="task_update"?"Task":T.type==="lead_assignment"?"Lead":T.type==="lead_update"?"Lead Update":T.type==="contact_assignment"?"Contact":T.type==="contact_update"?"Contact Update":T.type==="deal_assignment"?"Deal":T.type==="deal_update"?"Deal Update":T.type==="account_assignment"?"Account":T.type==="account_update"?"Account Update":T.type==="territory_assignment"?"Territory":T.type==="quote"?"Quote":T.type==="meeting"?"Meeting":T.type==="call"?"Call":T.type==="create"?"Created":T.type==="update"?"Updated":T.type==="delete"?"Deleted":"Activity"}),!T.read&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium text-gray-800 text-sm",children:T.title}),a.jsx("span",{className:"text-xs text-gray-600 mt-0.5",children:T.assignedBy?`Assigned by ${T.assignedBy}`:"System"}),a.jsx("span",{className:"text-[11px] text-gray-400 mt-1",children:T.createdAt?new Date(T.createdAt).toLocaleString():""})]})]},T.id??A)):a.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No new notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile",className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Sales"})]}),v?.company&&a.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-100 w-full justify-center",children:[v.company.company_logo&&a.jsx("img",{src:v.company.company_logo,alt:"Company Logo",className:"w-6 h-6 object-contain rounded"}),a.jsx("span",{className:"text-xs text-gray-500 truncate",children:v.company.company_name})]})]}),a.jsxs("div",{className:"mt-4 space-y-1 px-4 text-left",children:[a.jsx("button",{className:"block w-full text-sm text-gray-700 hover:bg-gray-50 py-2 rounded text-left",onClick:()=>{p("/sales/manage-account"),n(!1)},children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-200 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:text-red-700 hover:bg-gray-50 py-2 rounded text-left",children:"Logout"})]})]})]})]})]})}function Bze(){const[e,t]=f.useState(!1),[n,s]=f.useState(!1),{user:r}=Gt(),[i,o]=f.useState(!1);f.useEffect(()=>{r&&console.log("Fetched user:",r)},[r]);const l=["/sales/overview","/sales/hub","/sales/accounts","/sales/contacts","/sales/leads","/sales/deals","/sales/quotes","/sales/targets"],c=Jt();l.includes(c.pathname);const u="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",d="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
        ${e?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),r&&r.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:r.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ut,{to:"/sales/overview",className:({isActive:h})=>h?u:d,children:[a.jsx(mx,{})," Dashboard"]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>o(!i),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-lg"}),"Sales"]}),a.jsx(Lt,{className:`transition-transform ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/sales/accounts",className:({isActive:h})=>h?u:d,children:[a.jsx(jd,{})," Accounts"]}),a.jsxs(Ut,{to:"/sales/contacts",className:({isActive:h})=>h?u:d,children:[a.jsx(sa,{})," Contacts"]}),a.jsxs(Ut,{to:"/sales/leads",className:({isActive:h})=>h?u:d,children:[a.jsx(Xa,{})," Leads"]}),a.jsxs(Ut,{to:"/sales/deals",className:({isActive:h})=>h?u:d,children:[a.jsx(na,{})," Deals"]}),a.jsxs(Ut,{to:"/sales/quotes",className:({isActive:h})=>h?u:d,children:[a.jsx(ra,{})," Quotes"]}),a.jsxs(Ut,{to:"/sales/targets",className:({isActive:h})=>h?u:d,children:[a.jsx(mr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"text-lg"}),"Activity"]}),a.jsx(Lt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/sales/tasks",className:({isActive:h})=>h?u:d,children:[a.jsx(Yt,{})," Tasks"]}),a.jsxs(Ut,{to:"/sales/meetings",className:({isActive:h})=>h?u:d,children:[a.jsx(Dt,{})," Meetings"]}),a.jsxs(Ut,{to:"/sales/calls",className:({isActive:h})=>h?u:d,children:[a.jsx(zs,{})," Calls"]}),a.jsxs(Ut,{to:"/sales/audit",className:({isActive:h})=>h?u:d,children:[a.jsx(ks,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ut,{to:"/sales/territory",className:({isActive:h})=>h?u:d,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ec,{className:"text-lg"}),"Territory"]})})}),a.jsxs(Ut,{to:"/sales/manage-account",className:({isActive:h})=>h?u:d,children:[a.jsx(sa,{className:"text-lg"}),a.jsx("span",{children:"Your Profile"})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>t(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(Uze,{toggleSidebar:()=>t(!0)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(nx,{})})]})]})}const Hze=e=>a.jsx(Kt,{...e}),qze=e=>a.jsx(jd,{...e}),aJ=e=>a.jsx(Vs,{...e}),nJ=e=>a.jsx(dx,{...e}),sJ=e=>a.jsx(fj,{...e}),Gze=e=>a.jsx(Dt,{...e}),Wze=e=>a.jsx(Mt,{...e}),Vze=e=>a.jsx(gj,{...e}),rJ=e=>a.jsx(hj,{...e}),Yze=e=>a.jsx(rn,{...e}),iJ=e=>a.jsx(sa,{...e}),Qze=e=>a.jsx(Xa,{...e}),oJ=e=>a.jsx(na,{...e}),Kze=e=>a.jsx(ra,{...e}),lJ=e=>a.jsx(mr,{...e}),qw=e=>a.jsx(Qa,{...e}),Gw=e=>a.jsx(Dt,{...e}),Ww=e=>a.jsx(zs,{...e}),Xze=e=>a.jsx(ec,{...e}),Zze=e=>a.jsx(ks,{...e}),cJ=(e,t="")=>{const n=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(n).replace(/^/,`${t} `)},Jze=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},eFe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},tFe=e=>{switch(e){case"call":return{Icon:Wze,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:Vze,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:Gze,color:"text-blue-500",bgColor:"bg-blue-100"}}},aFe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},nFe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=Tt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:qze,label:"Account"},{icon:iJ,label:"Contact"},{icon:Qze,label:"Leads"},{icon:oJ,label:"Deals"},{icon:Kze,label:"Quotes"},{icon:lJ,label:"Target"},{icon:qw,label:"Task"},{icon:Gw,label:"Meeting"},{icon:Ww,label:"Call"},{icon:Zze,label:"Audit"},{icon:Xze,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h.target.value),o(h.target.value.trim().length>0)},d=h=>{s&&s(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(Hze,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group flex items-center justify-center",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/sales/accounts");break;case"Contact":r("/sales/contacts");break;case"Leads":r("/sales/leads");break;case"Deals":r("/sales/deals");break;case"Quotes":r("/sales/quotes");break;case"Target":r("/sales/targets");break;case"Task":r("/sales/tasks");break;case"Meeting":r("/sales/meetings");break;case"Call":r("/sales/calls");break;case"Audit":r("/sales/audit");break;case"Territory":r("/sales/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},sFe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=Tt(),o=d=>{if(!d)return"Unknown";const h=new Date(d),x=new Date-h,v=Math.floor(x/6e4),j=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:j<24?`${j} hour${j>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||n||"System",u=o(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/sales/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},rFe=({logs:e,loading:t})=>{const n=Tt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/sales/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(rJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(sFe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},iFe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),oFe=({revenueData:e,loading:t})=>{const n=Tt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const N=b.getMonth(),w=[],S=[];for(let _=0;_<=N;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((b,N)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",_=b.stage||"",k=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=b.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(k&&(u++,console.log(`Deal ${N+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let E=new Date(w);if(isNaN(E.getTime())){const M=String(w).split("T")[0];E=new Date(M+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=E.getFullYear(),O=E.getMonth()+1,I=`${M}-${String(O).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=T,c++,console.log(` Added deal ${b.id} to month ${I}: ${T}, total: ${l[I]}`),console.log(`  - Close date: ${w} -> Parsed: ${E.toISOString()} -> Month: ${I} (Year: ${M}, Month: ${O})`)}}catch(E){console.error("Error parsing deal date:",w,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(b=>parseInt(b.split("-")[0])),h=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const N=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[N]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${N}): ${w}`)}if(h.length>0){const b=Math.max(...h);if(b>p)for(let N=p+1;N<=b;N++)for(let w=0;w<12;w++){const S=`${N}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${N}`),v.push(_),_>0&&console.log(`Month ${s[w]} ${N} (${S}): ${_}`)}}const j=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:j,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:j}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/sales/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(rJ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?a.jsx(ih,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},lFe=({activityData:e,loading:t})=>{const[n,s]=f.useState(!0),[r,i]=f.useState(!0),[o,l]=f.useState(!0),[c,u]=f.useState(!0),[d,h]=f.useState("monthly"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],x=["Q1","Q2","Q3","Q4"],v=z=>{const Q=[0,0,0,0];for(let J=0;J<12;J++){const Y=Math.floor(J/3);Q[Y]+=z[J]}return Q},j=z=>[z.reduce((Q,J)=>Q+J,0)],b=f.useMemo(()=>{if(!e){const Te=new Array(12).fill(0),ue=new Array(4).fill(0),Oe=new Array(1).fill(0);return{labels:d==="monthly"?p:d==="quarterly"?x:[new Date().getFullYear().toString()],tasksCurrentYear:d==="monthly"?Te:d==="quarterly"?ue:Oe,tasksLastYear:d==="monthly"?Te:d==="quarterly"?ue:Oe,meetingsCurrentYear:d==="monthly"?Te:d==="quarterly"?ue:Oe,meetingsLastYear:d==="monthly"?Te:d==="quarterly"?ue:Oe,callsCurrentYear:d==="monthly"?Te:d==="quarterly"?ue:Oe,callsLastYear:d==="monthly"?Te:d==="quarterly"?ue:Oe}}const z=e.tasks?.currentYear||new Array(12).fill(0),Q=e.tasks?.lastYear||new Array(12).fill(0),J=e.meetings?.currentYear||new Array(12).fill(0),Y=e.meetings?.lastYear||new Array(12).fill(0),re=e.calls?.currentYear||new Array(12).fill(0),we=e.calls?.lastYear||new Array(12).fill(0);let Z,ne,pe,Ne,de,be,oe;return d==="monthly"?(Z=p,ne=z,pe=Q,Ne=J,de=Y,be=re,oe=we):d==="quarterly"?(Z=x,ne=v(z),pe=v(Q),Ne=v(J),de=v(Y),be=v(re),oe=v(we)):(Z=[new Date().getFullYear().toString()],ne=j(z),pe=j(Q),Ne=j(J),de=j(Y),be=j(re),oe=j(we)),{labels:Z,tasksCurrentYear:ne,tasksLastYear:pe,meetingsCurrentYear:Ne,meetingsLastYear:de,callsCurrentYear:be,callsLastYear:oe}},[e,d]),N=b.tasksCurrentYear.some(z=>z>0)||b.tasksLastYear.some(z=>z>0)||b.meetingsCurrentYear.some(z=>z>0)||b.meetingsLastYear.some(z=>z>0)||b.callsCurrentYear.some(z=>z>0)||b.callsLastYear.some(z=>z>0),w=b.tasksCurrentYear.reduce((z,Q)=>z+Q,0),S=b.meetingsCurrentYear.reduce((z,Q)=>z+Q,0),_=b.callsCurrentYear.reduce((z,Q)=>z+Q,0),k=w+S+_,T=b.tasksLastYear.reduce((z,Q)=>z+Q,0),A=b.meetingsLastYear.reduce((z,Q)=>z+Q,0),E=b.callsLastYear.reduce((z,Q)=>z+Q,0),M=T+A+E,O=M>0?((k-M)/M*100).toFixed(1):0,I=T>0?((w-T)/T*100).toFixed(0):w>0?100:0,D=A>0?((S-A)/A*100).toFixed(0):S>0?100:0,H=E>0?((_-E)/E*100).toFixed(0):_>0?100:0,W=[];return n&&(W.push({data:b.tasksCurrentYear,label:`Tasks ${new Date().getFullYear()}`,color:"#10b981",showMark:!0,curve:"catmullRom"}),c&&W.push({data:b.tasksLastYear,label:`Tasks ${new Date().getFullYear()-1}`,color:"#86efac",showMark:!1,curve:"linear"})),r&&(W.push({data:b.meetingsCurrentYear,label:`Meetings ${new Date().getFullYear()}`,color:"#14b8a6",showMark:!0,curve:"catmullRom"}),c&&W.push({data:b.meetingsLastYear,label:`Meetings ${new Date().getFullYear()-1}`,color:"#5eead4",showMark:!1,curve:"linear"})),o&&(W.push({data:b.callsCurrentYear,label:`Calls ${new Date().getFullYear()}`,color:"#6366f1",showMark:!0,curve:"catmullRom"}),c&&W.push({data:b.callsLastYear,label:`Calls ${new Date().getFullYear()-1}`,color:"#a5b4fc",showMark:!1,curve:"linear"})),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center",children:["My Activities",N&&a.jsxs("span",{className:`ml-3 text-sm font-medium px-2 py-1 rounded-full ${O>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[O>=0?"":""," ",Math.abs(O),"%"]})]}),a.jsxs("select",{value:d,onChange:z=>h(z.target.value),className:"text-xs px-3 py-1.5 rounded-lg border border-gray-300 bg-white text-gray-700 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer",children:[a.jsx("option",{value:"monthly",children:"Monthly"}),a.jsx("option",{value:"quarterly",children:"Quarterly"}),a.jsx("option",{value:"yearly",children:"Yearly"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Track your productivity across tasks, meetings & calls"})]}),N&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:k}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total this year"})]})]}),N&&a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-3 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx(qw,{size:16,className:"text-green-600"}),I!==0&&a.jsxs("span",{className:`text-xs font-semibold ${I>=0?"text-green-700":"text-red-600"}`,children:[I>=0?"+":"",I,"%"]})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Tasks"}),a.jsx("p",{className:"text-xl font-bold text-green-700",children:w}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",T," last year"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 p-3 rounded-lg border border-teal-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx(Gw,{size:16,className:"text-teal-600"}),D!==0&&a.jsxs("span",{className:`text-xs font-semibold ${D>=0?"text-teal-700":"text-red-600"}`,children:[D>=0?"+":"",D,"%"]})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Meetings"}),a.jsx("p",{className:"text-xl font-bold text-teal-700",children:S}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",A," last year"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-3 rounded-lg border border-indigo-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx(Ww,{size:16,className:"text-indigo-600"}),H!==0&&a.jsxs("span",{className:`text-xs font-semibold ${H>=0?"text-indigo-700":"text-red-600"}`,children:[H>=0?"+":"",H,"%"]})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Calls"}),a.jsx("p",{className:"text-xl font-bold text-indigo-700",children:_}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",E," last year"]})]})]}),N&&a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4 pb-4 border-b border-gray-100",children:[a.jsxs("button",{onClick:()=>s(!n),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${n?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx(qw,{size:12,className:"inline mr-1"}),"Tasks"]}),a.jsxs("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${r?"bg-teal-100 text-teal-700 border-2 border-teal-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx(Gw,{size:12,className:"inline mr-1"}),"Meetings"]}),a.jsxs("button",{onClick:()=>l(!o),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${o?"bg-indigo-100 text-indigo-700 border-2 border-indigo-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx(Ww,{size:12,className:"inline mr-1"}),"Calls"]}),a.jsxs("button",{onClick:()=>u(!c),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ml-auto ${c?"bg-gray-200 text-gray-700 border-2 border-gray-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:["Compare vs ",new Date().getFullYear()-1]})]}),a.jsx("div",{className:"flex-grow min-h-[320px]",children:t?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):N&&W.length>0?a.jsx(ih,{xAxis:[{scaleType:"point",data:b.labels}],series:W,height:320,width:void 0,grid:{vertical:!1,horizontal:!0},margin:{top:10,right:10,bottom:40,left:50},sx:{width:"100%",maxWidth:"100%","& .MuiLineElement-root":{strokeWidth:2.5},"& .MuiMarkElement-root":{scale:"0.8"}}}):N&&W.length===0?a.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:a.jsxs("div",{children:[a.jsx(Qa,{size:48,className:"mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm font-medium",children:"Select at least one activity type"}),a.jsx("p",{className:"text-xs mt-2",children:"Toggle the filters above to view data"})]})}):a.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:a.jsxs("div",{children:[a.jsx(Qa,{size:48,className:"mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm font-medium",children:"No completed activities yet"}),a.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Complete tasks, meetings, or calls to track your productivity"})]})})})]})},cFe=({comparisonData:e,loading:t})=>{const[n,s]=f.useState(!0),[r,i]=f.useState(!0),[o,l]=f.useState(!0),[c,u]=f.useState(!0),[d,h]=f.useState(!0),[p,x]=f.useState("monthly"),v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j=["Q1","Q2","Q3","Q4"],b=we=>{const Z=[0,0,0,0];for(let ne=0;ne<12;ne++){const pe=Math.floor(ne/3);Z[pe]+=we[ne]}return Z},N=we=>[we.reduce((Z,ne)=>Z+ne,0)],w=f.useMemo(()=>{if(!e){const it=new Array(12).fill(0),ze=new Array(4).fill(0),at=new Array(1).fill(0);return{labels:p==="monthly"?v:p==="quarterly"?j:[new Date().getFullYear().toString()],dealsCurrentYear:p==="monthly"?it:p==="quarterly"?ze:at,dealsLastYear:p==="monthly"?it:p==="quarterly"?ze:at,accountsCurrentYear:p==="monthly"?it:p==="quarterly"?ze:at,accountsLastYear:p==="monthly"?it:p==="quarterly"?ze:at,contactsCurrentYear:p==="monthly"?it:p==="quarterly"?ze:at,contactsLastYear:p==="monthly"?it:p==="quarterly"?ze:at,leadsCurrentYear:p==="monthly"?it:p==="quarterly"?ze:at,leadsLastYear:p==="monthly"?it:p==="quarterly"?ze:at}}const we=e.deals?.currentYear||new Array(12).fill(0),Z=e.deals?.lastYear||new Array(12).fill(0),ne=e.accounts?.currentYear||new Array(12).fill(0),pe=e.accounts?.lastYear||new Array(12).fill(0),Ne=e.contacts?.currentYear||new Array(12).fill(0),de=e.contacts?.lastYear||new Array(12).fill(0),be=e.leads?.currentYear||new Array(12).fill(0),oe=e.leads?.lastYear||new Array(12).fill(0);let Te,ue,Oe,xe,le,Fe,ke,He,Xe;return p==="monthly"?(Te=v,ue=we,Oe=Z,xe=ne,le=pe,Fe=Ne,ke=de,He=be,Xe=oe):p==="quarterly"?(Te=j,ue=b(we),Oe=b(Z),xe=b(ne),le=b(pe),Fe=b(Ne),ke=b(de),He=b(be),Xe=b(oe)):(Te=[new Date().getFullYear().toString()],ue=N(we),Oe=N(Z),xe=N(ne),le=N(pe),Fe=N(Ne),ke=N(de),He=N(be),Xe=N(oe)),{labels:Te,dealsCurrentYear:ue,dealsLastYear:Oe,accountsCurrentYear:xe,accountsLastYear:le,contactsCurrentYear:Fe,contactsLastYear:ke,leadsCurrentYear:He,leadsLastYear:Xe}},[e,p]),S=w.dealsCurrentYear.some(we=>we>0)||w.dealsLastYear.some(we=>we>0)||w.accountsCurrentYear.some(we=>we>0)||w.accountsLastYear.some(we=>we>0)||w.contactsCurrentYear.some(we=>we>0)||w.contactsLastYear.some(we=>we>0)||w.leadsCurrentYear.some(we=>we>0)||w.leadsLastYear.some(we=>we>0),_=w.dealsCurrentYear.reduce((we,Z)=>we+Z,0),k=w.accountsCurrentYear.reduce((we,Z)=>we+Z,0),T=w.contactsCurrentYear.reduce((we,Z)=>we+Z,0),A=w.leadsCurrentYear.reduce((we,Z)=>we+Z,0),E=_+k+T+A,M=w.dealsLastYear.reduce((we,Z)=>we+Z,0),O=w.accountsLastYear.reduce((we,Z)=>we+Z,0),I=w.contactsLastYear.reduce((we,Z)=>we+Z,0),D=w.leadsLastYear.reduce((we,Z)=>we+Z,0),H=M+O+I+D,W=H>0?((E-H)/H*100).toFixed(1):0,z=M>0?((_-M)/M*100).toFixed(0):_>0?100:0,Q=O>0?((k-O)/O*100).toFixed(0):k>0?100:0,J=I>0?((T-I)/I*100).toFixed(0):T>0?100:0,Y=D>0?((A-D)/D*100).toFixed(0):A>0?100:0,re=[];return n&&(re.push({data:w.dealsCurrentYear,label:`Deals ${new Date().getFullYear()}`,color:"#f59e0b",showMark:!0,curve:"catmullRom"}),d&&re.push({data:w.dealsLastYear,label:`Deals ${new Date().getFullYear()-1}`,color:"#fcd34d",showMark:!1,curve:"linear"})),r&&(re.push({data:w.accountsCurrentYear,label:`Accounts ${new Date().getFullYear()}`,color:"#3b82f6",showMark:!0,curve:"catmullRom"}),d&&re.push({data:w.accountsLastYear,label:`Accounts ${new Date().getFullYear()-1}`,color:"#93c5fd",showMark:!1,curve:"linear"})),o&&(re.push({data:w.contactsCurrentYear,label:`Contacts ${new Date().getFullYear()}`,color:"#8b5cf6",showMark:!0,curve:"catmullRom"}),d&&re.push({data:w.contactsLastYear,label:`Contacts ${new Date().getFullYear()-1}`,color:"#c4b5fd",showMark:!1,curve:"linear"})),c&&(re.push({data:w.leadsCurrentYear,label:`Leads ${new Date().getFullYear()}`,color:"#10b981",showMark:!0,curve:"catmullRom"}),d&&re.push({data:w.leadsLastYear,label:`Leads ${new Date().getFullYear()-1}`,color:"#6ee7b7",showMark:!1,curve:"linear"})),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:["Growth Comparison",a.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500",children:["(",p.charAt(0).toUpperCase()+p.slice(1),")"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Compare deals, accounts, contacts, and leads creation"})]}),S&&H>0&&a.jsxs("div",{className:`text-sm font-semibold ${W>=0?"text-green-600":"text-red-600"}`,children:[W>=0?a.jsx(nJ,{className:"inline mr-1",size:16}):a.jsx(sJ,{className:"inline mr-1",size:16}),W>=0?"+":"",W,"%"]})]}),a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("button",{onClick:()=>x("monthly"),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${p==="monthly"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Monthly"}),a.jsx("button",{onClick:()=>x("quarterly"),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${p==="quarterly"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Quarterly"}),a.jsx("button",{onClick:()=>x("yearly"),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ${p==="yearly"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Yearly"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:[a.jsxs("button",{onClick:()=>s(!n),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all flex items-center ${n?"bg-amber-100 text-amber-700 border-2 border-amber-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx("span",{className:"mr-1.5",children:"Deals"}),a.jsx("span",{className:"font-bold",children:_}),M>0&&a.jsxs("span",{className:`ml-1.5 text-[10px] ${z>=0?"text-green-600":"text-red-600"}`,children:["(",z>=0?"+":"",z,"%)"]})]}),a.jsxs("button",{onClick:()=>i(!r),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all flex items-center ${r?"bg-blue-100 text-blue-700 border-2 border-blue-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx("span",{className:"mr-1.5",children:"Accounts"}),a.jsx("span",{className:"font-bold",children:k}),O>0&&a.jsxs("span",{className:`ml-1.5 text-[10px] ${Q>=0?"text-green-600":"text-red-600"}`,children:["(",Q>=0?"+":"",Q,"%)"]})]}),a.jsxs("button",{onClick:()=>l(!o),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all flex items-center ${o?"bg-purple-100 text-purple-700 border-2 border-purple-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx("span",{className:"mr-1.5",children:"Contacts"}),a.jsx("span",{className:"font-bold",children:T}),I>0&&a.jsxs("span",{className:`ml-1.5 text-[10px] ${J>=0?"text-green-600":"text-red-600"}`,children:["(",J>=0?"+":"",J,"%)"]})]}),a.jsxs("button",{onClick:()=>u(!c),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all flex items-center ${c?"bg-green-100 text-green-700 border-2 border-green-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:[a.jsx("span",{className:"mr-1.5",children:"Leads"}),a.jsx("span",{className:"font-bold",children:A}),D>0&&a.jsxs("span",{className:`ml-1.5 text-[10px] ${Y>=0?"text-green-600":"text-red-600"}`,children:["(",Y>=0?"+":"",Y,"%)"]})]}),H>0&&a.jsxs("button",{onClick:()=>h(!d),className:`text-xs px-3 py-1.5 rounded-full font-medium transition-all ml-auto ${d?"bg-gray-200 text-gray-700 border-2 border-gray-300":"bg-gray-100 text-gray-500 border-2 border-gray-200"}`,children:["Compare vs ",new Date().getFullYear()-1]})]}),a.jsx("div",{className:"flex-grow min-h-[320px]",children:t?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):S&&re.length>0?a.jsx(ih,{xAxis:[{scaleType:"point",data:w.labels}],series:re,height:320,width:void 0,grid:{vertical:!1,horizontal:!0},margin:{top:10,right:10,bottom:40,left:50},sx:{width:"100%",maxWidth:"100%","& .MuiLineElement-root":{strokeWidth:2.5},"& .MuiMarkElement-root":{scale:"0.8"}}}):S&&re.length===0?a.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:a.jsxs("div",{children:[a.jsx(Qa,{size:48,className:"mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm font-medium",children:"Select at least one entity type"}),a.jsx("p",{className:"text-xs mt-2",children:"Toggle the filters above to view data"})]})}):a.jsx("div",{className:"text-center text-gray-500 flex items-center justify-center h-full",children:a.jsxs("div",{children:[a.jsx(Qa,{size:48,className:"mx-auto mb-3 text-gray-300"}),a.jsx("p",{className:"text-sm font-medium",children:"No data yet"}),a.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Start creating deals, accounts, contacts, and leads to track growth"})]})})})]})},EA=({title:e,items:t,children:n,onSeeAll:s})=>{const r=Tt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/sales/leads","Latest Deals":"/sales/deals","Upcoming Activities":"/sales/tasks"};o[e]&&r(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},dFe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const o=Tt(),{text:l,bg:c}=eFe(s||"Website"),u=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,N=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return N<60?`${N} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=u(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/sales/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:d}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},uFe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Tt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=Jze(d),x=parseFloat(t||0),v=o?x>=o?"up":"down":"up",j=v==="up"?nJ:sJ,b=v==="up"?"text-green-400":"text-red-400",N=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/sales/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:N}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:cJ(x,l)}),a.jsx(j,{size:16,className:`${b} mt-1`})]})]})})},mFe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=Tt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=tFe(h),{text:j,bg:b}=aFe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,O=Math.floor(M/864e5);return O===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",k=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/sales/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/sales/meetings/info?id=${o}`)):u("/sales/tasks"):u(h==="call"?`/sales/calls/info?id=${o}`:h==="meeting"?`/sales/meetings/info?id=${o}`:"/sales/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(aJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(iJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${j} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},fFe=()=>{const e=Tt(),{user:t}=Gt(),n=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0,completedTasks:0,completedMeetings:0,completedCalls:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState([]),[x,v]=f.useState([]),[j,b]=f.useState([]),[N,w]=f.useState({tasks:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},meetings:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},calls:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)}}),[S,_]=f.useState(!0),[k,T]=f.useState(null),[A,E]=f.useState(""),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState([]),[z,Q]=f.useState([]),[J,Y]=f.useState({deals:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},accounts:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},contacts:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)},leads:{currentYear:new Array(12).fill(0),lastYear:new Array(12).fill(0)}}),[re,we]=f.useState([]),[Z,ne]=f.useState(0),[pe,Ne]=f.useState(new Date),de=f.useRef(null),be=f.useRef(null),oe=f.useMemo(()=>{try{if(!A.trim())return[];const xe=A.toLowerCase().trim(),le=[];return Array.isArray(M)&&M.forEach(Fe=>{const ke=`${Fe.first_name||""} ${Fe.last_name||""}`.trim().toLowerCase(),He=(Fe.company_name||"").toLowerCase(),Xe=(Fe.email||"").toLowerCase(),it=(Fe.phone||"").toLowerCase();(ke.includes(xe)||He.includes(xe)||Xe.includes(xe)||it.includes(xe))&&le.push({id:Fe.id,name:`${Fe.first_name||""} ${Fe.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:Fe.company_name||"No company",route:`/sales/leads/${Fe.id}`})}),Array.isArray(I)&&I.forEach(Fe=>{const ke=(Fe.name||"").toLowerCase(),He=(Fe.account?.name||"").toLowerCase(),Xe=(Fe.description||"").toLowerCase();(ke.includes(xe)||He.includes(xe)||Xe.includes(xe))&&le.push({id:Fe.id,name:Fe.name||"Unnamed Deal",type:"Deal",details:Fe.account?.name||"No account",route:`/sales/deals/info?id=${Fe.id}`})}),Array.isArray(H)&&H.forEach(Fe=>{const ke=(Fe.name||"").toLowerCase(),He=(Fe.email||"").toLowerCase(),Xe=(Fe.phone||"").toLowerCase(),it=(Fe.website||"").toLowerCase();(ke.includes(xe)||He.includes(xe)||Xe.includes(xe)||it.includes(xe))&&le.push({id:Fe.id,name:Fe.name||"Unnamed Account",type:"Account",details:Fe.email||Fe.phone||"No contact info",route:"/sales/accounts"})}),Array.isArray(z)&&z.forEach(Fe=>{const ke=(Fe.first_name||"").toLowerCase(),He=(Fe.last_name||"").toLowerCase(),Xe=`${ke} ${He}`.trim(),it=(Fe.email||"").toLowerCase(),ze=(Fe.phone||"").toLowerCase();(Xe.includes(xe)||ke.includes(xe)||He.includes(xe)||it.includes(xe)||ze.includes(xe))&&le.push({id:Fe.id,name:Xe||"Unnamed Contact",type:"Contact",details:Fe.email||Fe.phone||"No contact info",route:"/sales/contacts"})}),le.slice(0,10)}catch(xe){return console.error("Error in search:",xe),[]}},[A,M,I,H,z]),Te=xe=>{xe.route&&(e(xe.route),E(""))},ue=f.useCallback(async()=>{_(!0),T(null);try{const[xe,le,Fe,ke,He,Xe,it,ze,at]=await Promise.all([se.get("/leads/admin/getLeads").catch(Pe=>(console.error("Error fetching leads:",Pe),{data:[]})),se.get("/deals/admin/fetch-all").catch(Pe=>(console.error("Error fetching deals:",Pe),{data:[]})),se.get("/accounts/admin/fetch-all").catch(Pe=>(console.error("Error fetching accounts:",Pe),{data:[]})),se.get("/contacts/admin/fetch-all").catch(Pe=>(console.error("Error fetching contacts:",Pe),{data:[]})),se.get("/tasks/all").catch(Pe=>(console.error("Error fetching tasks:",Pe),{data:[]})),se.get("/meetings/admin/fetch-all").catch(Pe=>(console.error("Error fetching meetings:",Pe),{data:[]})),se.get("/calls/admin/fetch-all").catch(Pe=>(console.error("Error fetching calls:",Pe),{data:[]})),se.get("/logs/read-all").catch(Pe=>(console.error("Error fetching logs:",Pe),{data:[]})),se.get("/targets/admin/fetch-all").catch(Pe=>(console.error("Error fetching targets:",Pe),{data:[]}))]),Ve=Array.isArray(xe.data)?xe.data:[],Ze=Array.isArray(le.data)?le.data:[],Je=Array.isArray(Fe.data)?Fe.data:[],Ue=Array.isArray(ke.data)?ke.data:[],_e=Array.isArray(He.data)?He.data:[],he=Array.isArray(Xe.data)?Xe.data:[],ie=Array.isArray(it.data)?it.data:[],G=Array.isArray(ze.data)?ze.data:[],X=Array.isArray(at.data)?at.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",Ze.length),Ze.length>0&&(console.log("First deal sample (raw):",JSON.stringify(Ze[0],null,2)),console.log("First deal keys:",Object.keys(Ze[0]))),O(Ve),D(Ze),W(Je),Q(Ue),we(X);const ve=X.reduce((Pe,Ce)=>{const Qe=Ce.amount||Ce.value||Ce.target_amount||0,F=parseFloat(typeof Qe=="string"?Qe.replace(/[^\d.-]/g,""):Qe);return Pe+(Number.isFinite(F)?F:0)},0);ne(ve);const $e=Ve.filter(Pe=>Pe.status&&!["Lost","Converted"].includes(Pe.status)).length,Le=_e.filter(Pe=>!Pe.dueDate||Pe.status==="Completed"?!1:new Date(Pe.dueDate)<new Date).length,me=_e.filter(Pe=>(Pe.status||"").toLowerCase()==="completed").length,Re=he.filter(Pe=>{const Ce=(Pe.status||"").toUpperCase();return Ce==="COMPLETED"||Ce==="DONE"}).length,qe=ie.filter(Pe=>{const Ce=(Pe.status||"").toUpperCase();return Ce==="COMPLETED"||Ce==="HELD"}).length;r({activeLeads:$e,totalDeals:Ze.length,activeAccounts:Je.length,overdueTasks:Le,completedTasks:me,completedMeetings:Re,completedCalls:qe});const rt=[...Ve].sort((Pe,Ce)=>new Date(Ce.created_at||0)-new Date(Pe.created_at||0)).slice(0,5);o(rt);const st=[...Ze].sort((Pe,Ce)=>new Date(Ce.created_at||0)-new Date(Pe.created_at||0)).slice(0,5);c(st);const Ie=new Date,ot=[];ie.forEach(Pe=>{const Ce=Pe.due_date||Pe.call_time,Qe=(Pe.status||"").toUpperCase();if(Ce){const F=new Date(Ce);Qe==="COMPLETED"||Qe==="MISSED"||Qe==="NOT_HELD"||Qe==="HELD"||ot.push({type:"Call",title:Pe.subject||"Untitled Call",assignedTo:Pe.assigned_to||(Pe.call_assign_to?`${Pe.call_assign_to.first_name||""} ${Pe.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ce,priority:(Pe.priority||"MEDIUM").toUpperCase(),id:Pe.id,activityType:"call",fullData:Pe})}}),he.forEach(Pe=>{const Ce=Pe.dueDate||Pe.start_time,Qe=(Pe.status||"").toUpperCase();if(Ce){const F=new Date(Ce);Qe==="COMPLETED"||Qe==="CANCELLED"||Qe==="DONE"||ot.push({type:"Meeting",title:Pe.subject||Pe.activity||"Untitled Meeting",assignedTo:Pe.assignedTo||(Pe.meet_assign_to?`${Pe.meet_assign_to.first_name||""} ${Pe.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Ce,priority:(Pe.priority||"MEDIUM").toUpperCase(),id:Pe.id,activityType:"meeting",fullData:Pe})}});const Ct={HIGH:1,MEDIUM:2,LOW:3},kt=ot.sort((Pe,Ce)=>{const Qe=Ct[Pe.priority]||3,F=Ct[Ce.priority]||3;if(Qe!==F)return Qe-F;const q=new Date(Pe.scheduledDate||0),fe=new Date(Ce.scheduledDate||0);return q-fe}).slice(0,5);d(kt),p(Ze),w((()=>{const Pe=new Date().getFullYear(),Ce=Pe-1,Qe=new Array(12).fill(0),F=new Array(12).fill(0),q=new Array(12).fill(0),fe=new Array(12).fill(0),te=new Array(12).fill(0),B=new Array(12).fill(0);console.log("=== MY ACTIVITIES DEBUG ==="),console.log("Total tasks:",_e.length),console.log("Total meetings:",he.length),console.log("Total calls:",ie.length);let ce=0,De=0,U=0;return _e.forEach((K,je)=>{if(je===0&&console.log("Sample task:",{id:K.id,status:K.status,due_date:K.due_date,updated_at:K.updated_at}),(K.status||"").toLowerCase()!=="completed")return;ce++;const tt=K.completedAt||K.completed_at||K.updatedAt||K.updated_at||K.dueDate||K.due_date;if(tt)try{const lt=new Date(tt);if(isNaN(lt.getTime()))return;const Nt=lt.getFullYear(),Ft=lt.getMonth();Nt===Pe?Qe[Ft]++:Nt===Ce&&F[Ft]++}catch(lt){console.error("Error parsing task date:",lt)}}),he.forEach((K,je)=>{je===0&&console.log("Sample meeting:",{id:K.id,status:K.status,dueDate:K.dueDate,updated_at:K.updated_at});const Be=(K.status||"").toUpperCase();if(Be!=="COMPLETED"&&Be!=="DONE")return;De++;const tt=K.completedAt||K.completed_at||K.updatedAt||K.updated_at||K.dueDate||K.start_time;if(tt)try{const lt=new Date(tt);if(isNaN(lt.getTime()))return;const Nt=lt.getFullYear(),Ft=lt.getMonth();Nt===Pe?q[Ft]++:Nt===Ce&&fe[Ft]++}catch(lt){console.error("Error parsing meeting date:",lt)}}),ie.forEach((K,je)=>{je===0&&console.log("Sample call:",{id:K.id,status:K.status,due_date:K.due_date,updated_at:K.updated_at});const Be=(K.status||"").toUpperCase();if(Be!=="COMPLETED"&&Be!=="HELD")return;U++;const tt=K.completedAt||K.completed_at||K.updatedAt||K.updated_at||K.due_date||K.call_time;if(tt)try{const lt=new Date(tt);if(isNaN(lt.getTime()))return;const Nt=lt.getFullYear(),Ft=lt.getMonth();Nt===Pe?te[Ft]++:Nt===Ce&&B[Ft]++}catch(lt){console.error("Error parsing call date:",lt)}}),console.log("Activities summary:",{completedTasks:ce,completedMeetings:De,completedCalls:U,tasksCurrentYear:Qe,tasksLastYear:F,meetingsCurrentYear:q,meetingsLastYear:fe,callsCurrentYear:te,callsLastYear:B}),{tasks:{currentYear:Qe,lastYear:F},meetings:{currentYear:q,lastYear:fe},calls:{currentYear:te,lastYear:B}}})()),Y((()=>{const Pe=new Date().getFullYear(),Ce=Pe-1,Qe=new Array(12).fill(0),F=new Array(12).fill(0),q=new Array(12).fill(0),fe=new Array(12).fill(0),te=new Array(12).fill(0),B=new Array(12).fill(0),ce=new Array(12).fill(0),De=new Array(12).fill(0);return Ze.forEach(U=>{const K=U.created_at||U.createdAt;if(K)try{const je=new Date(K);if(isNaN(je.getTime()))return;const Be=je.getFullYear(),tt=je.getMonth();Be===Pe?Qe[tt]++:Be===Ce&&F[tt]++}catch(je){console.error("Error parsing deal date:",je)}}),Je.forEach(U=>{const K=U.created_at||U.createdAt;if(K)try{const je=new Date(K);if(isNaN(je.getTime()))return;const Be=je.getFullYear(),tt=je.getMonth();Be===Pe?q[tt]++:Be===Ce&&fe[tt]++}catch(je){console.error("Error parsing account date:",je)}}),Ue.forEach(U=>{const K=U.created_at||U.createdAt;if(K)try{const je=new Date(K);if(isNaN(je.getTime()))return;const Be=je.getFullYear(),tt=je.getMonth();Be===Pe?te[tt]++:Be===Ce&&B[tt]++}catch(je){console.error("Error parsing contact date:",je)}}),Ve.forEach(U=>{const K=U.created_at||U.createdAt;if(K)try{const je=new Date(K);if(isNaN(je.getTime()))return;const Be=je.getFullYear(),tt=je.getMonth();Be===Pe?ce[tt]++:Be===Ce&&De[tt]++}catch(je){console.error("Error parsing lead date:",je)}}),console.log("Comparison data summary:",{dealsCurrentYear:Qe,dealsLastYear:F,accountsCurrentYear:q,accountsLastYear:fe,contactsCurrentYear:te,contactsLastYear:B,leadsCurrentYear:ce,leadsLastYear:De}),{deals:{currentYear:Qe,lastYear:F},accounts:{currentYear:q,lastYear:fe},contacts:{currentYear:te,lastYear:B},leads:{currentYear:ce,lastYear:De}}})()),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",Ze.length);const ge=Ze.filter(Pe=>(Pe.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",ge.length),ge.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),ge.forEach((Pe,Ce)=>{let Qe=Pe.amount;Qe&&typeof Qe=="object"?Qe.toString?Qe=parseFloat(Qe.toString()):Qe=parseFloat(Qe):Qe=parseFloat(Qe)||0,console.log(`Deal ${Ce+1}:`,{id:Pe.id,name:Pe.name,stage:Pe.stage,stage_upper:(Pe.stage||"").toUpperCase(),amount:Pe.amount,amount_parsed:Qe,amount_type:typeof Pe.amount,close_date:Pe.close_date,close_date_type:typeof Pe.close_date,close_date_value:Pe.close_date?new Date(Pe.close_date):null,has_close_date:!!Pe.close_date,has_amount:Qe>0,all_keys:Object.keys(Pe),full_deal:Pe})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",Ze.map(Pe=>Pe.stage))),b(Ze);const ye=[...G].sort((Pe,Ce)=>new Date(Ce.timestamp||0)-new Date(Pe.timestamp||0));v(ye)}catch(xe){console.error("Error fetching dashboard data:",xe),T("Failed to load dashboard data. Please refresh the page.")}finally{_(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("SalesOverview mounted, fetching data..."),ue(),de.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),ue(),Ne(new Date)},3e4),()=>{de.current&&clearInterval(de.current)}),[ue]),f.useEffect(()=>{if(!t||!t.id)return;let xe=0;const le=3;let Fe=null;const ke=()=>{const He=window.location.protocol==="https:"?"wss:":"ws:",Xe=window.location.hostname==="localhost"?"localhost:8000":window.location.host,it=`${He}//${Xe}/ws/notifications?user_id=${t.id}`;try{const ze=new WebSocket(it);be.current=ze,ze.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),xe=0},ze.onmessage=at=>{try{const Ve=JSON.parse(at.data);console.log(" Real-time notification received:",Ve),Ve.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(Ve.event)&&(console.log(" Refreshing dashboard due to:",Ve.event),ue(),Ne(new Date))}catch(Ve){console.error("Error parsing WebSocket message:",Ve)}},ze.onerror=at=>{xe===0&&console.warn(" WebSocket connection unavailable (this is optional)")},ze.onclose=()=>{xe<le&&(xe++,Fe=setTimeout(()=>{t&&t.id&&ke()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return ke(),()=>{Fe&&clearTimeout(Fe),be.current&&(be.current.close(),be.current=null)}},[t,ue]);const Oe=[{icon:Yze,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/sales/leads")},{icon:lJ,title:"Total Targets",value:cJ(Z,n),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/sales/targets")},{icon:oJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/sales/deals")},{icon:aJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/sales/tasks")},{icon:qw,title:"Completed Tasks",value:s.completedTasks,color:"text-green-600",bgColor:"bg-green-50",onClick:()=>e("/sales/tasks")},{icon:Gw,title:"Completed Meetings",value:s.completedMeetings,color:"text-teal-600",bgColor:"bg-teal-50",onClick:()=>e("/sales/meetings")},{icon:Ww,title:"Completed Calls",value:s.completedCalls,color:"text-indigo-600",bgColor:"bg-indigo-50",onClick:()=>e("/sales/calls")}];return console.log("SalesOverview rendering, loading:",S,"error:",k),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[S&&a.jsx(Wt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[k&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:k})}),a.jsx("div",{className:"mb-8",children:a.jsx(nFe,{searchQuery:A,onSearchChange:E,searchResults:oe,onSearchResultClick:Te})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-7 gap-4 mb-8",children:Oe.map(xe=>a.jsx(iFe,{...xe,loading:S},xe.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsx(rFe,{logs:x,loading:S}),a.jsx(lFe,{activityData:N,loading:S})]}),a.jsx("div",{className:"mb-8",children:a.jsx(EN,{leads:M,deals:I,targets:re,currencySymbol:n,basePath:"/sales",currentUser:t})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(oFe,{revenueData:j,loading:S})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(cFe,{comparisonData:J,loading:S})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(EA,{title:"Latest Leads",children:i.length>0?i.map((xe,le)=>a.jsx(dFe,{...xe},xe.id||le)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(EA,{title:"Latest Deals",children:S?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((xe,le)=>a.jsx(uFe,{...xe,currencySymbol:n},xe.id||le)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(EA,{title:"Upcoming Activities",children:u.length>0?u.map((xe,le)=>a.jsx(mFe,{...xe},xe.id||le)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},LA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],Cb={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},Dr=e=>e?e.toUpperCase():"",PA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",hFe=e=>{switch(Dr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},gFe=e=>{switch(Dr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function pFe(){const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.role==="Sales";f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[r,i]=f.useState(!1),[o,l]=f.useState(!1),[c,u]=f.useState(!1),[d,h]=f.useState(null),[p,x]=f.useState(null),[v,j]=f.useState(Cb),[b,N]=f.useState(null),[w,S]=f.useState([]),[_,k]=f.useState(!1),[T,A]=f.useState([]),[E,M]=f.useState(null),[O,I]=f.useState([]),[D,H]=f.useState([]),[W,z]=f.useState("Filter by Status"),[Q,J]=f.useState(""),[Y,re]=f.useState(null),[we,Z]=f.useState(!1),[ne,pe]=f.useState(1),[Ne,de]=f.useState(10),[be,oe]=f.useState("Overview"),[Te,ue]=f.useState(""),[Oe,xe]=f.useState(!1),[le,Fe]=f.useState([]),[ke,He]=f.useState({}),[Xe,it]=f.useState(null);f.useEffect(()=>{r&&!o&&s&&n&&!v.assigned_to&&(j($=>({...$,assigned_to:n.id})),M(n))},[r,o,s,n,v.assigned_to]);const{comments:ze,addComment:at,refresh:Ve}=kn({relatedType:"account",relatedId:b?.id});f.useEffect(()=>{b?.id&&Ve()},[b?.id,Ve]);const Ze=f.useCallback(async($=null)=>{k(!0);try{const L=await se.get("/accounts/admin/fetch-all"),Ee=[...Array.isArray(L.data)?L.data:[]].sort((Me,We)=>{const ft=Me?.created_at||Me?.updated_at||0,St=We?.created_at||We?.updated_at||0;return new Date(St)-new Date(ft)});if(S(Ee),$){const Me=Ee.find(We=>We.id===$);N(Me||null)}}catch(L){console.error(L),S([]),L.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch accounts. Please try again later.")}finally{k(!1)}},[N]),Je=f.useCallback(async()=>{try{const $=await se.get("/users/all");A(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),Ue=f.useCallback(async()=>{try{const $=await se.get("/territories/fetch");I(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load territories (permission denied).")}},[]),_e=f.useCallback(async()=>{try{const $=await se.get("/accounts/admin/parent-companies");H(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load parent companies (permission denied).")}},[]),he=f.useCallback(async $=>{try{const L=await se.get(`/activities/accounts/${$}`);He(L.data&&typeof L.data=="object"?L.data:{})}catch(L){console.error(L),L.response?.status===404&&(console.warn("No activities found for this account."),He({}))}},[]);f.useEffect(()=>{Ze(),Je(),Ue(),_e()},[Ze,Je,Ue,_e]),f.useEffect(()=>{b&&ue(Dr(b.status)||"PROSPECT")},[b]);const ie=f.useMemo(()=>{const $=Q.trim().toLowerCase(),L=W.trim().toUpperCase();return w.filter(ee=>{if(!(n?.role==="Admin"||n?.role==="CEO"||n?.role==="MANAGER"||n?.role==="GROUP MANAGER")&&ee.status?.toUpperCase()==="INACTIVE")return!1;const Me=[ee?.name,ee?.website,ee?.industry,ee?.territory?.name,ee?.phone_number],We=$===""||Me.some(St=>St==null?!1:St.toString().toLowerCase().includes($)),ft=L==="FILTER BY STATUS"||Dr(ee.status)===L;return We&&ft})},[w,Q,W,n]),G=f.useMemo(()=>ie.length,[ie]),X=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="customer").length,[ie]),ve=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="prospect").length,[ie]),$e=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="partner").length,[ie]),Le=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="active").length,[ie]),me=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="inactive").length,[ie]),Re=f.useMemo(()=>ie.filter($=>$.status?.toLowerCase()==="former").length,[ie]),qe=f.useMemo(()=>[{title:"Total",value:G,icon:rn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:X,icon:Ro,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ve,icon:Xa,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:$e,icon:sa,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Le,icon:Ro,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:me,icon:zo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Re,icon:zo,color:"text-orange-600",bgColor:"bg-orange-100"}],[G,X,ve,$e,Le,me,Re]),rt=Math.max(1,Math.ceil(ie.length/Ne)||1);f.useEffect(()=>{pe(1)},[Q,W]),f.useEffect(()=>{pe($=>{const L=Math.max(1,Math.ceil(ie.length/Ne)||1);return $>L?L:$})},[ie.length,Ne]);const st=f.useMemo(()=>{const $=(ne-1)*Ne;return ie.slice($,$+Ne)},[ie,ne,Ne]),Ie=$=>{if($.target.checked){const L=st.filter(ee=>ee.assigned_accs?.id===n?.id&&ee.acc_creator?.id===n?.id).map(ee=>ee.id);Fe(L)}else Fe([])},ot=$=>{Fe(L=>L.includes($)?L.filter(ee=>ee!==$):[...L,$])},Ct=async()=>{if(le.length===0)return;const $=n?.role==="Admin"||n?.role==="CEO"||n?.role==="MANAGER"||n?.role==="GROUP MANAGER",L=$?"delete":"archive",ee=$?"This action cannot be undone.":"These accounts will be hidden from your view but admins can still see them.",Ee=!$;re({title:`${L.charAt(0).toUpperCase()+L.slice(1)} Accounts`,message:a.jsxs("span",{children:["Are you sure you want to ",L," ",a.jsx("span",{className:"font-semibold",children:le.length})," selected accounts? ",ee]}),confirmLabel:`${L.charAt(0).toUpperCase()+L.slice(1)} ${le.length} account(s)`,cancelLabel:"Cancel",variant:"danger",icon:Ee?Zt:null,isArchive:Ee,action:{type:"bulk-delete",accountIds:le}})};ie.length===0||(ne-1)*Ne+1,Math.min(ne*Ne,ie.length);const kt=()=>pe($=>Math.max($-1,1)),At=()=>pe($=>Math.min($+1,rt)),jt=$=>{N($),oe("Overview"),ue(Dr($?.status)||"PROSPECT")},ge=()=>N(null),ye=$=>{$.target.id==="accountModalBackdrop"&&!we&&ge()},Pe=()=>{i(!1),l(!1),x(null),j(Cb),u(!1),M(null)},Ce=$=>{$.target.id==="modalBackdrop"&&Pe()},Qe=$=>$?new Date($).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",F=$=>{const{name:L,value:ee}=$.target;j(Ee=>({...Ee,[L]:ee}))},q=()=>{j(Cb),l(!1),x(null),i(!0)};f.useEffect(()=>{const $=new URLSearchParams(t.search||"");(t.state?.openAccountModal||$.get("openModal")==="1")&&(j(Cb),l(!1),x(null),i(!0),K(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const fe=$=>{N(null);let L=null;$.assigned_accs&&(L=T.find(ee=>ee.id===$.assigned_accs.id),L||(L=$.assigned_accs)),M(L),j({name:$.name||"",website:$.website||"",phone_number:$.phone_number||"",billing_address:$.billing_address||"",shipping_address:$.shipping_address||"",parent_company:$.parent_company||"",industry:$.industry||"",status:Dr($.status)||"PROSPECT",territory_id:$.territory?.id?String($.territory.id):"",assigned_to:$.assigned_accs?.id?String($.assigned_accs.id):""}),l(!0),x($.id),i(!0)},te=$=>{if(!$)return;const L=n?.role==="Admin"||n?.role==="CEO"||n?.role==="MANAGER"||n?.role==="GROUP MANAGER",ee=L?"delete":"archive",Ee=L?"This action cannot be undone.":"This account will be hidden from your view but admins can still see it.",Me=!L;re({title:`${ee.charAt(0).toUpperCase()+ee.slice(1)} Account`,message:a.jsxs("span",{children:["Are you sure you want to ",ee," the account"," ",a.jsx("span",{className:"font-semibold",children:$.name}),"? ",Ee]}),confirmLabel:`${ee.charAt(0).toUpperCase()+ee.slice(1)} Account`,cancelLabel:"Cancel",variant:"danger",icon:Me?Zt:null,isArchive:Me,action:{type:"delete",targetId:$.id,name:$.name}})},B=async()=>{if(!Y?.action){re(null);return}const{action:$}=Y,{type:L,payload:ee,targetId:Ee,name:Me}=$;Z(!0);try{if(L==="create"){u(!0);const We=await se.post("/accounts/admin",ee);_e(),V.success(`Account "${Me}" created successfully.`);const ft=b?.id||null;Pe(),await Ze(ft),!b&&We.data?.id}else if(L==="update"){if(!Ee)throw new Error("Missing account identifier for update.");u(!0),await se.put(`/accounts/admin/${Ee}`,ee),V.success(`Account "${Me}" updated successfully.`);const We=b?.id&&b.id===Ee?Ee:null;Pe(),await Ze(We),b?.id===Ee&&N(null)}else if(L==="delete"){if(!Ee)throw new Error("Missing account identifier for deletion.");const We=b?.id;h(Ee);const St=n?.role==="Admin"||n?.role==="CEO"||n?.role==="MANAGER"||n?.role==="GROUP MANAGER"?`Account "${Me}" deleted successfully.`:`Account "${Me}" archived successfully.`;await se.delete(`/accounts/admin/${Ee}`),V.success(St),await Ze(We&&We!==Ee?We:null),We===Ee&&N(null)}else if(L==="bulk-delete"){const{accountIds:We}=$,St=n?.role==="Admin"||n?.role==="CEO"||n?.role==="MANAGER"||n?.role==="GROUP MANAGER"?"deleted":"archived";await se.delete("/accounts/admin/bulk-delete",{data:{account_ids:We}}),V.success(`Successfully ${St} ${We.length} accounts`),Fe([]),await Ze()}}catch(We){console.error(We);const ft=L==="create"?"Failed to create account. Please review the details and try again.":L==="update"?"Failed to update account. Please review the details and try again.":L==="bulk-delete"?"Failed to delete selected accounts.":"Failed to delete account. Please try again.",St=We.response?.data?.detail||ft;V.error(St),(L==="create"||L==="update")&&u(!1),L==="delete"&&h(null)}finally{(L==="create"||L==="update")&&u(!1),L==="delete"&&h(null),Z(!1),re(null)}},ce=()=>{we||re(null)},De=async()=>{if(!b||!Te)return;const $=Dr(Te),L=Dr(b.status);if($!==L){xe(!0);try{await se.put(`/accounts/admin/${b.id}`,{status:$}),V.success(`Account status updated to ${PA($)}`),S(ee=>ee.map(Ee=>Ee.id===b.id?{...Ee,status:$}:Ee)),N(null)}catch(ee){console.error(ee);const Ee=ee.response?.data?.detail||"Failed to update account status. Please try again.";V.error(Ee)}finally{xe(!1)}}},[U,K]=f.useState(!1),je=$=>{$.preventDefault(),K(!0);const L=v.name.trim();if(!L){V.error("Account name is required.");return}if(!v.assigned_to){V.error("Assigned To is required.");return}const Ee={name:L,website:v.website?.trim()||null,phone_number:v.phone_number?.trim()||null,billing_address:v.billing_address?.trim()||null,shipping_address:v.shipping_address?.trim()||null,industry:v.industry?.trim()||null,parent_company:v.parent_company?.trim()||null,status:v.status||"PROSPECT",territory_id:v.territory_id?Number(v.territory_id):null,assigned_to:v.assigned_to?Number(v.assigned_to):null},Me=o&&p?"update":"create";re({title:Me==="create"?"Confirm New Account":"Confirm Update",message:Me==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:L}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:L}),"?"]}),confirmLabel:Me==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:Me,payload:Ee,targetId:p||null,name:L}})},Be=[{label:"Filter by Status",value:"Filter by Status"},...LA.map($=>({label:$.label,value:$.value}))],tt=Y?.action?.type==="delete"?Y.action.targetId:null,lt=b&&(d===b.id||tt===b.id),Nt=b&&d===b.id,Ft=b?hFe(b.status):"",da=b?a.jsx("div",{id:"accountModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:ge,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:b.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${Ft}`,children:PA(b.status)})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:b.assigned_accs&&b.assigned_accs.id===n?.id&&b.acc_creator&&b.acc_creator.id===n?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>fe(b),disabled:Y?.action?.type==="update"&&Y.action.targetId===b.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>te(b),disabled:!!lt,children:Nt?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map($=>a.jsx("button",{onClick:()=>oe($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${be===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[be==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:b.website?a.jsx("a",{href:b.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:b.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:b.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:b.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:b.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:b.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:b.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:b.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:b.assigned_accs?`${b.assigned_accs.first_name} ${b.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:b.acc_creator?`${b.acc_creator.first_name} ${b.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Qe(b.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Qe(b.updated_at)||"N/A"})]})]}),a.jsx(Tn,{comments:ze,onAddComment:at})]}),be==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:w.notes||"No notes available."})]})]}),be==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[ke.tasks&&ke.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ke.tasks.length,")"]})]}),Xe==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.tasks.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/tasks",{state:{taskID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||"No description"}),$.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",$.assigned_to.first_name," ",$.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.due_date||$.created_at)})]},`task-${L}`))})]}),ke.meetings&&ke.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ke.meetings.length,")"]})]}),Xe==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.meetings.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/meetings",{state:{meetingID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.description||$.location||"No description"}),$.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",$.host.first_name," ",$.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.start_time||$.created_at)})]},`meeting-${L}`))})]}),ke.calls&&ke.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ke.calls.length,")"]})]}),Xe==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.calls.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/calls",{state:{callID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:$.subject||$.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:$.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.call_time||$.created_at)})]},`call-${L}`))})]}),ke.contacts&&ke.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ke.contacts.length,")"]})]}),Xe==="contacts"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.contacts.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/contacts",{state:{contactID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(sa,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.first_name?`${$.first_name} `:"",$.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.created_at)})]},`contact-${L}`))})]}),ke.deals&&ke.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ke.deals.length,")"]})]}),Xe==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.deals.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/deals",{state:{dealID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[$.deal_id?$.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",$.name||$.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:$.stage||$.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.close_date||$.created_at)})]},`deal-${L}`))})]}),ke.quotes&&ke.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>it(Xe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ke.quotes.length,")"]})]}),Xe==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Xe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ke.quotes.map(($,L)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/sales/quotes",{state:{quoteID:$.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:($.quote_id?$.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:$.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Qe($.presented_date)||""})]},`quote-${L}`))})]}),(!ke||(!ke.tasks||ke.tasks.length===0)&&(!ke.meetings||ke.meetings.length===0)&&(!ke.calls||ke.calls.length===0)&&(!ke.quotes||ke.quotes.length===0)&&(!ke.deals||ke.deals.length===0)&&(!ke.contacts||ke.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assigned_to:b.assigned_accs?.id?String(b.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assigned_to:b.assigned_accs?.id?String(b.assigned_accs.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${b.name}`,relatedType1:"Account",relatedTo1:String(b.id),relatedType2:null,relatedTo2:null,assignedTo:b.assigned_accs?.id?String(b.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Te||Dr(b?.status)||"PROSPECT",onChange:$=>ue($.target.value),children:LA.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))}),a.jsx("button",{onClick:De,disabled:Oe||!Te||Dr(Te)===Dr(b?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Oe||!Te||Dr(Te)===Dr(b?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Oe?"Updating...":"Update"})]})]})]})]})]})}):null,Pa=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[_&&a.jsx(Wt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{q(),K(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:qe.map($=>a.jsx(xFe,{...$},$.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:Q,onChange:$=>J($.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:W,onChange:$=>z($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Be.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:st.length>0&&st.filter($=>$.assigned_accs?.id===n?.id&&$.acc_creator?.id===n?.id).every($=>le.includes($.id))&&st.some($=>$.assigned_accs?.id===n?.id&&$.acc_creator?.id===n?.id),onChange:Ie,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:le.length>0?a.jsx("button",{onClick:Ct,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${le.length} selected accounts`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:_?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):ie.length>0?st.map($=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>{jt($),he($.id)},children:[a.jsx("td",{className:"py-3 px-4 text-center",children:$.assigned_accs?.id===n?.id&&$.acc_creator?.id===n?.id?a.jsx("input",{type:"checkbox",checked:le.includes($.id),onChange:()=>ot($.id),onClick:L=>L.stopPropagation(),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"}):null}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:$.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:$.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${gFe($.status)}`,children:PA($.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",children:$.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",children:$.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:$.phone_number||"--"})]})}),a.jsx("td",{className:"py-3 px-4"})]},$.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:ie.length,pageSize:Ne,currentPage:ne,onPrev:kt,onNext:At,onPageSizeChange:$=>{de($),pe(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Ge=r?a.jsx("div",{id:"modalBackdrop",onClick:Ce,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>{Pe(),K(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:c||we,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:o?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:je,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(tf,{label:"Name",name:"name",value:v.name,onChange:F,placeholder:"Company name",required:!0,isSubmitted:U})}),a.jsx(d8,{label:"Parent Company",value:v.parent_company,onChange:$=>{j(L=>({...L,parent_company:$}))},items:D.map($=>({id:$,name:$})),getLabel:$=>$?.name||"",placeholder:"Select parent company...",disabled:c}),a.jsx(tf,{label:"Website",name:"website",value:v.website,onChange:F,placeholder:"https://example.com",disabled:c}),a.jsx(tf,{label:"Phone Number",name:"phone_number",value:v.phone_number,onChange:F,placeholder:"09xx xxx xxxx",type:"tel",disabled:c}),a.jsx(tf,{label:"Industry",name:"industry",value:v.industry,onChange:F,placeholder:"Industry",disabled:c}),a.jsx(tf,{label:"Billing Address",name:"billing_address",value:v.billing_address,onChange:F,placeholder:"Billing address",disabled:c}),a.jsx(tf,{label:"Shipping Address",name:"shipping_address",value:v.shipping_address,onChange:F,placeholder:"Shipping address",disabled:c}),a.jsx(c8,{label:"Status",name:"status",value:v.status,onChange:F,options:[{value:"",label:"Select status"},...LA],required:!0,disabled:c}),a.jsx(d8,{label:"Assigned To",value:v.assigned_to,onChange:$=>{const L=T.find(ee=>String(ee.id)===String($));M(L),j(ee=>({...ee,assigned_to:$}))},items:T||[],getLabel:$=>`${$?.first_name??""} ${$?.last_name??""} (${$?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:U,disabled:c||T.length===0||s}),a.jsx("div",{className:"md:col-span-2",children:a.jsx(c8,{label:"Territory",name:"territory_id",value:v.territory_id||"",onChange:F,options:[{value:"",label:E?E.assigned_territory&&E.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...E&&E.assigned_territory&&E.assigned_territory.map($=>({value:String($.id),label:$.name}))||[]],disabled:c||!E||!E.assigned_territory||E.assigned_territory.length===0})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Pe(),K(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:c||we,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:c||we,children:c?"Saving...":o?"Update Account":"Save Account"})]})]})]})}):null,Ae=Y?a.jsx(bFe,{open:!0,title:Y.title,message:Y.message,confirmLabel:Y.confirmLabel,cancelLabel:Y.cancelLabel,variant:Y.variant,onConfirm:B,onCancel:ce,loading:we,icon:Y.icon,isArchive:Y.isArchive}):null;return a.jsxs(a.Fragment,{children:[Pa,da,Ge,Ae]})}function xFe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function tf({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function c8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>a.jsx("option",{value:l.value,disabled:l.value==="",children:l.label},l.value))})]})}function d8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(yFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:d})]})}function yFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(N=>String(N.id)===String(t)),j=v?s(v):t,b=f.useMemo(()=>{const N=h.trim().toLowerCase();return(N?e.filter(S=>(s(S)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const N=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:N=>{p(N.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!b.some(N=>s(N).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),b.length>0?b.map(N=>{const w=String(N.id),S=s(N),_=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function bFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:u=null,isArchive:d=!1}){if(!e)return null;const h=d?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${h}`,disabled:o,children:[u&&a.jsx(u,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const Sb={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},vl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),Ii=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function vFe(){const e=Tt(),t=Jt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[n,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState(!1),[b,N]=f.useState(!1),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(null),[E,M]=f.useState(Sb),[O,I]=f.useState(""),[D,H]=f.useState("Filter by Accounts"),[W,z]=f.useState(null),[Q,J]=f.useState("Overview"),[Y,re]=f.useState(1),[we,Z]=f.useState(10),[ne,pe]=f.useState({}),[Ne,de]=f.useState(null),[be,oe]=f.useState(null),[Te,ue]=f.useState(null),[Oe,xe]=f.useState([]),{comments:le,addComment:Fe,refresh:ke}=kn({relatedType:"contact",relatedId:d?.id});f.useEffect(()=>{d?.id&&ke()},[d?.id,ke]),f.useEffect(()=>{const te=t.state?.contactID;te&&(ue(te),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(Te&&n.length>0&&!r){const te=n.find(B=>B.id===Te);te?h(te):V.error("Contact not found."),ue(null)}},[Te,n,r]),f.useEffect(()=>{async function te(){try{const B=await se.get("/auth/me");oe(B.data)}catch(B){console.error("Failed to fetch current user",B)}}te()},[]);const He=f.useCallback(async(te=null)=>{i(!0);try{const B=await se.get("/contacts/admin/fetch-all"),De=[...Array.isArray(B.data)?B.data:[]].sort((U,K)=>{const je=U?.created_at||U?.updated_at||0,Be=K?.created_at||K?.updated_at||0;return new Date(Be)-new Date(je)});if(s(De),te){const U=De.find(K=>K.id===te);h(U||null)}}catch(B){console.error(B),s([]),B.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch contacts. Please try again later.")}finally{i(!1)}},[h]),Xe=f.useCallback(async()=>{try{const te=await se.get("/accounts/admin/fetch-all"),ce=[...Array.isArray(te.data)?te.data:[]].sort((De,U)=>(De?.name||"").localeCompare(U?.name||""));l(ce)}catch(te){console.error(te),l([]),te.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),it=f.useCallback(()=>{window.open("/sales/accounts?openModal=1","_blank","noopener,noreferrer")},[]),ze=f.useCallback(async()=>{try{const te=await se.get("/users/all"),ce=[...Array.isArray(te.data)?te.data:[]].sort((De,U)=>vl(De).localeCompare(vl(U)));u(ce)}catch(te){console.error(te),u([]),te.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),at=f.useCallback(async te=>{try{const B=await se.get(`/activities/contact/${te}`);pe(B.data&&typeof B.data=="object"?B.data:{})}catch(B){console.error(B),B.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]);f.useEffect(()=>{He(),Xe(),ze()},[He,Xe,ze]);const Ve=f.useMemo(()=>{const te=new Map;o.forEach(ce=>{ce?.id&&ce?.name&&te.set(String(ce.id),ce.name)}),n.forEach(ce=>{ce?.account_id&&ce?.account?.name&&te.set(String(ce.account_id),ce.account.name)});const B=Array.from(te.entries()).sort((ce,De)=>ce[1].localeCompare(De[1])).map(([ce,De])=>({value:ce,label:De}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...B]},[o,n]),Ze=f.useMemo(()=>{const te=O.trim().toLowerCase(),B=D.trim();return n.filter(ce=>{const De=[ce?.first_name,ce?.last_name,ce?.email,ce?.title,ce?.department,ce?.account?.name,ce?.account?.status,ce?.work_phone,ce?.mobile_phone_1,ce?.mobile_phone_2,ce?.assigned_contact?.first_name,ce?.assigned_contact?.last_name,ce?.contact_creator?.first_name,ce?.contact_creator?.last_name,ce?.notes,Ii(ce?.created_at),Ii(ce?.updated_at)],U=te===""||De.some(je=>je==null?!1:je.toString().toLowerCase().includes(te)),K=B==="Filter by Accounts"||String(ce.account_id)===B;return U&&K})},[n,O,D]),Je=Math.max(1,Math.ceil(Ze.length/we)||1);f.useEffect(()=>{re(1)},[O,D]),f.useEffect(()=>{re(te=>{const B=Math.max(1,Math.ceil(Ze.length/we)||1);return te>B?B:te})},[Ze.length,we]);const Ue=f.useMemo(()=>{const te=(Y-1)*we;return Ze.slice(te,te+we)},[Ze,Y,we]),_e=()=>re(te=>Math.max(te-1,1)),he=()=>re(te=>Math.min(te+1,Je)),ie=f.useMemo(()=>{if(!v||!T)return o;const te=n.find(ce=>ce.id===T);return!te||!te.account||o.some(ce=>ce.id===te.account.id)?o:[...o,te.account]},[o,v,T,n]),G=f.useCallback(()=>{x(!1),j(!1),A(null),M(Sb),N(!1),Ie(!1)},[]),X=te=>{te.target.id==="modalBackdrop"&&!b&&!_&&G()},ve=te=>{const{name:B,value:ce}=te.target;M(De=>({...De,[B]:ce}))},$e=()=>{M(Sb),j(!1),A(null),x(!0),be?.role==="Sales"&&M(te=>({...te,assigned_to:be.id}))};f.useEffect(()=>{const te=new URLSearchParams(t.search||"");(t.state?.openContactModal||te.get("openModal")==="1")&&(M(Sb),j(!1),A(null),x(!0),Ie(!1),be?.role==="Sales"&&M(ce=>({...ce,assigned_to:be.id})),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e,be]);const Le=async te=>{if(!te)return;const B=await se.get(`/accounts/get/${te.account_id}`);M({first_name:te.first_name||"",last_name:te.last_name||"",account_id:B.data.id?B.data.id:"",title:te.title||"",department:te.department||"",email:te.email||"",work_phone:te.work_phone||"",mobile_phone_1:te.mobile_phone_1||"",mobile_phone_2:te.mobile_phone_2||"",notes:te.notes||"",assigned_to:te.assigned_to?String(te.assigned_to):""}),j(!0),A(te.id),x(!0),h(null)},me=te=>{if(!te)return;const B=vl(te)||"this contact",ce=be?.role==="Admin"||be?.role==="CEO"||be?.role==="MANAGER"||be?.role==="GROUP MANAGER",De=ce?"delete":"archive",U=ce?"This action cannot be undone.":"This contact will be hidden from your view but admins can still see it.",K=!ce;S({title:`${De.charAt(0).toUpperCase()+De.slice(1)} Contact`,message:a.jsxs("span",{children:["Are you sure you want to ",De," ",a.jsx("span",{className:"font-semibold",children:B}),"? ",U]}),confirmLabel:`${De.charAt(0).toUpperCase()+De.slice(1)} Contact`,cancelLabel:"Cancel",variant:"danger",icon:K?Zt:null,isArchive:K,action:{type:"delete",targetId:te.id,name:B}})},Re=()=>{const te=Ue.filter(B=>B.assigned_contact?.id===be?.id&&B.contact_creator?.id===be?.id);Oe.length===te.length&&te.length>0?xe([]):xe(te.map(B=>B.id))},qe=te=>{xe(B=>B.includes(te)?B.filter(ce=>ce!==te):[...B,te])},rt=async()=>{if(Oe.length===0)return;const te=be?.role==="Admin"||be?.role==="CEO"||be?.role==="MANAGER"||be?.role==="GROUP MANAGER",B=te?"delete":"archive",ce=te?"This action cannot be undone.":"These contacts will be hidden from your view but admins can still see them.",De=!te;S({title:`${B.charAt(0).toUpperCase()+B.slice(1)} Contacts`,message:a.jsxs("span",{children:["Are you sure you want to ",B," ",a.jsx("span",{className:"font-semibold",children:Oe.length})," selected contacts? ",ce]}),confirmLabel:`${B.charAt(0).toUpperCase()+B.slice(1)} ${Oe.length} contact(s)`,cancelLabel:"Cancel",variant:"danger",icon:De?Zt:null,isArchive:De,action:{type:"bulk-delete",contactIds:Oe}})},[st,Ie]=f.useState(!1),ot=te=>{te.preventDefault(),Ie(!0);const B=E.first_name.trim(),ce=E.last_name.trim();if(!B||!ce){V.error("First name and last name are required.");return}if(!E.account_id){V.error("Account is required.");return}if(!E.assigned_to){V.error("Assigned To is required.");return}const U=E.email?.trim();if(!U){V.error("Email is required.");return}if(!U.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U)){V.error("Please enter a valid email address.");return}const je={first_name:B,last_name:ce,account_id:Number(E.account_id),title:E.title?.trim()||null,department:E.department?.trim()||null,email:E.email?.trim().toLowerCase()||null,work_phone:E.work_phone?.trim()||null,mobile_phone_1:E.mobile_phone_1?.trim()||null,mobile_phone_2:E.mobile_phone_2?.trim()||null,notes:E.notes?.trim()||null,assigned_to:E.assigned_to?Number(E.assigned_to):null},Be=v&&T?"update":"create",tt=`${B} ${ce}`.trim();S({title:Be==="create"?"Confirm New Contact":"Confirm Update",message:Be==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:tt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:tt}),"?"]}),confirmLabel:Be==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:Be,payload:je,targetId:T||null,name:tt}})},Ct=async()=>{if(!w?.action){S(null);return}const{action:te}=w,{type:B,payload:ce,targetId:De,name:U}=te;k(!0);try{if(B==="create"){N(!0),await se.post("/contacts/admin",ce),V.success(`Contact "${U}" created successfully.`);const K=d?.id||null;G(),await He(K)}else if(B==="update"){if(!De)throw new Error("Missing contact identifier for update.");N(!0),await se.put(`/contacts/admin/${De}`,ce),V.success(`Contact "${U}" updated successfully.`);const K=d?.id&&d.id===De?De:d?.id||null;G(),await He(K),d?.id===De&&h(null)}else if(B==="delete"){if(!De)throw new Error("Missing contact identifier for deletion.");const K=d?.id;z(De);const Be=be?.role==="Admin"||be?.role==="CEO"||be?.role==="MANAGER"||be?.role==="GROUP MANAGER"?`Contact "${U}" deleted successfully.`:`Contact "${U}" archived successfully.`;await se.delete(`/contacts/admin/${De}`),V.success(Be),await He(K&&K!==De?K:null),K===De&&h(null)}else if(B==="bulk-delete"){const{contactIds:K}=te;if(!K||K.length===0)throw new Error("No contacts provided for bulk deletion.");const Be=be?.role==="Admin"||be?.role==="CEO"||be?.role==="MANAGER"||be?.role==="GROUP MANAGER"?`Successfully deleted ${K.length} contact(s).`:`Successfully archived ${K.length} contact(s).`;await se.delete("/contacts/admin/bulk-delete",{data:{contact_ids:K}}),V.success(Be),xe([]),await He(),h(null)}}catch(K){console.error(K);const je=B==="create"?"Failed to create contact. Please review the details and try again.":B==="update"?"Failed to update contact. Please review the details and try again.":B==="bulk-delete"?"Failed to delete contacts. Please try again.":"Failed to delete contact. Please try again.",Be=K.response?.data?.detail||je;V.error(Be)}finally{(B==="create"||B==="update")&&N(!1),B==="delete"&&z(null),k(!1),S(null)}},kt=()=>{_||S(null)},At=te=>{h(te),J("Overview")},jt=()=>h(null),ge=te=>{te.target.id==="contactModalBackdrop"&&!_&&jt()},ye=w?.action?.type==="delete"?w.action.targetId:null,Pe=d&&(W===d.id||ye===d.id),Ce=d&&W===d.id,Qe=d?a.jsx("div",{id:"contactModalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:te=>te.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:jt,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:vl(d)||"Unnamed contact"})}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:d.assigned_contact&&d.assigned_contact.id===be?.id&&d.contact_creator&&d.contact_creator.id===be?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Le(d),disabled:_||w?.action?.type==="update"&&w.action.targetId===d.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>me(d),disabled:!!Pe,children:Ce?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:d.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(te=>a.jsx("button",{onClick:()=>J(te),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${Q===te?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:te},te))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Q==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:vl(d)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email?a.jsx("a",{href:`mailto:${d.email}`,className:"text-blue-600 hover:underline break-all",children:d.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_contact?`${d.assigned_contact.first_name} ${d.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.contact_creator?`${d.contact_creator.first_name} ${d.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ii(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ii(d.updated_at)||"N/A"})]})]})}),Q==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]}),a.jsx(Tn,{comments:le,onAddComment:Fe})]}),Q==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[ne.tasks&&ne.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",ne.tasks.length,")"]})]}),Ne==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.tasks.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:te.subject||te.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:te.description||"No description"}),te.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",te.assigned_to.first_name," ",te.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.due_date||te.created_at)})]},`task-${B}`))})]}),ne.meetings&&ne.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",ne.meetings.length,")"]})]}),Ne==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.meetings.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:te.subject||te.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:te.description||te.location||"No description"}),te.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",te.host.first_name," ",te.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.start_time||te.created_at)})]},`meeting-${B}`))})]}),ne.calls&&ne.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",ne.calls.length,")"]})]}),Ne==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.calls.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:te.subject||te.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:te.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.call_time||te.created_at)})]},`call-${B}`))})]}),ne.contacts&&ne.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",ne.contacts.length,")"]})]}),Ne==="contacts"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.contacts.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(sa,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[te.first_name?`${te.first_name} `:"",te.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:te.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.created_at)})]},`contact-${B}`))})]}),ne.deals&&ne.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",ne.deals.length,")"]})]}),Ne==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.deals.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[te.deal_id?te.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",te.name||te.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:te.stage||te.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.close_date||te.created_at)})]},`deal-${B}`))})]}),ne.quotes&&ne.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>de(Ne==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",ne.quotes.length,")"]})]}),Ne==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Ne==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:ne.quotes.map((te,B)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(te.quote_id?te.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:te.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Ii(te.presented_date)||""})]},`quote-${B}`))})]}),(!ne||(!ne.tasks||ne.tasks.length===0)&&(!ne.meetings||ne.meetings.length===0)&&(!ne.calls||ne.calls.length===0)&&(!ne.quotes||ne.quotes.length===0)&&(!ne.deals||ne.deals.length===0)&&(!ne.contacts||ne.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${vl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assigned_to:d?.assigned_contact?.id?String(d.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const te=encodeURIComponent(d.email),B=encodeURIComponent(""),ce=encodeURIComponent(""),De=`mailto:${te}?subject=${B}&body=${ce}`;window.location.href=De},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${vl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${vl(d)||""}`.trim(),relatedType1:"Account",relatedTo1:d?.account_id?String(d.account_id):d?.account?.id?String(d.account.id):"",relatedType2:"Contact",relatedTo2:d?.id?String(d.id):"",assignedTo:d?.assigned_contact?.id?String(d.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,F=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[r&&a.jsx(Wt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{$e(),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:O,onChange:te=>I(te.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:D,onChange:te=>H(te.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ve.map(te=>a.jsx("option",{value:te.value,children:te.label},te.value??te.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Ue.length>0&&Ue.filter(te=>te.assigned_contact?.id===be?.id&&te.contact_creator?.id===be?.id).every(te=>Oe.includes(te.id))&&Ue.some(te=>te.assigned_contact?.id===be?.id&&te.contact_creator?.id===be?.id),onChange:Re,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Oe.length>0?a.jsx("button",{onClick:rt,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Oe.length} selected contacts`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Ze.length>0?Ue.map(te=>{const B=[{Icon:sn,value:te.email,key:"email"},{Icon:Mt,value:te.work_phone,key:"work_phone"},{Icon:dd,value:te.mobile_phone_1,key:"mobile_phone_1"},{Icon:dd,value:te.mobile_phone_2,key:"mobile_phone_2"}].filter(ce=>!!ce.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[a.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:ce=>ce.stopPropagation(),children:te.assigned_contact&&te.assigned_contact.id===be?.id&&te.contact_creator&&te.contact_creator.id===be?.id?a.jsx("input",{type:"checkbox",checked:Oe.includes(te.id),onChange:()=>qe(te.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:ce=>ce.stopPropagation()}):null}),a.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:vl(te)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:te.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(Vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:te.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:B.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:B.map(({Icon:ce,value:De,key:U})=>{const K=bt.createElement(ce,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[K,a.jsx("span",{children:De})]},U)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(na,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:te.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(sa,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:te.assigned_contact?`${te.assigned_contact.first_name} ${te.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{At(te),at(te.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Dt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:Ii(te.created_at)||"--"})]})})]},te.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Ze.length,pageSize:we,currentPage:Y,onPrev:_e,onNext:he,onPageSizeChange:te=>{Z(te),re(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),q=p?a.jsx("div",{id:"modalBackdrop",onClick:X,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:te=>te.stopPropagation(),children:[a.jsx("button",{onClick:()=>{G(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:b||_,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:ot,noValidate:!0,children:[a.jsx(Uc,{label:"First Name",name:"first_name",value:E.first_name,onChange:ve,placeholder:"First name",required:!0,isSubmitted:st}),a.jsx(Uc,{label:"Last Name",name:"last_name",value:E.last_name,onChange:ve,placeholder:"Last name",required:!0,isSubmitted:st}),a.jsx(u8,{label:"Account",value:E.account_id,onChange:te=>M(B=>({...B,account_id:te})),items:v?ie:o||[],getLabel:te=>te?.name??"",placeholder:"Search account...",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:it,disabled:b,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:Xe,disabled:b,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),disabled:b||(v?ie.length===0:o.length===0),required:!0,isSubmitted:st}),a.jsx(u8,{label:"Assigned To",value:E.assigned_to,onChange:te=>M(B=>({...B,assigned_to:te})),items:c||[],getLabel:te=>`${te?.first_name??""} ${te?.last_name??""} (${te?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:st,disabled:b||c.length===0||be?.role==="Sales"}),a.jsx(Uc,{label:"Title",name:"title",value:E.title,onChange:ve,placeholder:"Job title",disabled:b}),a.jsx(Uc,{label:"Department",name:"department",value:E.department,onChange:ve,placeholder:"Department",disabled:b}),a.jsx(Uc,{label:"Email",name:"email",type:"email",value:E.email,onChange:ve,placeholder:"example@email.com",required:!0,isSubmitted:st}),a.jsx(Uc,{label:"Work Phone",name:"work_phone",value:E.work_phone,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(Uc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:E.mobile_phone_1,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(Uc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:E.mobile_phone_2,onChange:ve,placeholder:"09xx xxx xxxx",disabled:b}),a.jsx(jFe,{label:"Notes",name:"notes",value:E.notes,onChange:ve,placeholder:"Additional details...",rows:3,disabled:b,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{G(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:b||_,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:b||_,children:b?"Saving...":v?"Update Contact":"Save Contact"})]})]})]})}):null,fe=w?a.jsx(NFe,{open:!0,title:w.title,message:w.message,confirmLabel:w.confirmLabel,cancelLabel:w.cancelLabel,variant:w.variant,onConfirm:Ct,onCancel:kt,loading:_,icon:w.icon,isArchive:w.isArchive}):null;return a.jsxs(a.Fragment,{children:[F,Qe,q,fe]})}function Uc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function u8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,actions:d=null}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),d?a.jsx("div",{className:"flex items-center",children:d}):null]}),a.jsx(wFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h})]})}function wFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function jFe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function NFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c,icon:u=null,isArchive:d=!1}){if(!e)return null;const h=d?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsxs("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 flex items-center justify-center ${h}`,disabled:o,children:[u&&a.jsx(u,{className:"mr-2",size:18}),o?"Processing...":s]})]})]})})}const DA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function dJ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=Tt(),{leadID:c}=Go(),{user:u}=Gt(),[d,h]=f.useState(e||null),[p,x]=f.useState("Overview"),[v,j]=f.useState(""),b=d?.status?.toUpperCase()==="QUALIFIED",[N,w]=f.useState(null),S=d&&u&&d.creator?.id===u.id,[_,k]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[E,M]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),O=async()=>{try{if(e){h(e),j(e.status||"New");return}if(!c)return;const z=await se.get(`/leads/get/${c}`);h(z.data),j(z.data.status||"New"),k({name:z.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:z.data.territory?.id||null,assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),A({last_name:z.data.last_name||"",first_name:z.data.first_name||"",account_id:null,title:z.data.title||"",department:z.data.department||"",email:z.data.email||"",work_phone:z.data.work_phone||"",mobile_phone_1:z.data.mobile_phone_1||"",mobile_phone_2:z.data.mobile_phone_2||"",notes:"",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null})}catch(z){console.error(z)}};f.useEffect(()=>{e?(h(e),j(e.status||"New")):c&&O()},[c,e]);const I=async()=>{try{if(v==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){V.error("Lead must be Qualified before it can be converted.");return}const z=await se.put(`/leads/${d.id}/update/status`,{status:v});V.success("Lead status updated successfully");const Q={...d,status:z.data.status};h(Q),i&&i(Q),n&&n(),t&&t()}catch(z){console.error(z),V.error("Failed to update lead status")}},D=async z=>{const Q={..._,assigned_to:z.assigned_to?.id,billing_address:z.address,shipping_address:z.address,created_by:z.creator?.id,industry:null,name:z.company_name,phone_number:z.work_phone,status:"Prospect",territory_id:z.territory?.id,website:""};console.log("Account data: ",Q),console.log("Contact data: ",T),console.log("Deal data: ",E),console.log("Lead data: ",z);try{const Y=(await se.post("/accounts/convertedLead",Q)).data.id,re={...T,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,department:z.department,email:z.email,first_name:z.first_name,last_name:z.last_name,mobile_phone_1:z.mobile_phone_1,mobile_phone_2:z.mobile_phone_2,notes:z.notes,title:z.title,work_phone:z.work_phone},Z=(await se.post("/contacts/convertedLead",re)).data.id,ne=()=>{switch(E.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},pe=E.amount&&E.amount!==""?parseFloat(E.amount):0,Ne={...E,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,primary_contact_id:Z,probability:ne(),stage:"Prospecting"},de=await se.post("/deals/convertedLead",Ne),be=await se.put(`/leads/convert/${z.id}`);i&&i(null),n(),V.success("Lead converted successfully!"),t()}catch(J){console.error("Error during conversion:",J);const Y=J.response?.data?.detail||J.message||"Failed to convert lead. Please try again.";V.error(Y)}},H=z=>{switch((z||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=z=>z.toString().toLowerCase().replace(/\b\w/g,Q=>Q.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${H(d.status)}`,children:W(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>D(d),disabled:!b,title:b?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${b?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),S&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>x(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),N==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:DA(z.due_date||z.created_at)})]},`task-${Q}`))})]}),o.meetings&&o.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),N==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:DA(z.start_time||z.created_at)})]},`meeting-${Q}`))})]}),o.calls&&o.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),N==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words",children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:DA(z.call_time||z.created_at)})]},`call-${Q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),Q=encodeURIComponent(""),J=encodeURIComponent(""),Y=`mailto:${z}?subject=${Q}&body=${J}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:v,onChange:z=>j(z.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:v===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${v===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const CFe=th.all(),OA=CFe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),SFe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),_Fe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},MA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function AFe(){const e=Tt(),{leadID:t}=Go();Us();const[n,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(!1),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState(1),[_,k]=f.useState(10),[T,A]=f.useState(MA),[E,M]=f.useState(!1),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState(null),[Q,J]=f.useState(!1),[Y,re]=f.useState({}),[we,Z]=f.useState(new Set),[ne,pe]=f.useState(!1),[Ne,de]=f.useState(null);f.useRef(null);const[be,oe]=f.useState(!1),[Te,ue]=f.useState(null),[Oe,xe]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[le,Fe]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[ke,He]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const Xe=async()=>{try{const q=await se.get("/leads/getUsers");l(q.data)}catch(q){console.error(`Error fetching users: ${q}`)}},it=async()=>{x(!0);try{const q=await se.get("/leads/admin/getLeads");h(q.data),console.log(q.data)}catch(q){console.error(`Error fetching leads: ${q}`)}finally{x(!1)}};f.useEffect(()=>{Xe(),it()},[]);const{user:ze}=Gt(),at=ze?.role==="Sales";f.useEffect(()=>{r&&!E&&at&&ze&&!T.lead_owner&&(A(q=>({...q,lead_owner:ze.id})),u(ze))},[r,E,at,ze,T.lead_owner]),f.useEffect(()=>{if(t&&d.length>0&&!r&&!E){const q=d.find(fe=>fe.id===Number(t));q&&s(q)}else!t&&!n&&s(null)},[t,d,r,E]),f.useEffect(()=>{if(Te){const fe=(ce=>{if(!ce)return{code:"+63",number:""};const De=ce.match(/^(\+\d+)\s(.+)$/);if(De)return{code:De[1],number:De[2]};if(ce.startsWith("+")){const U=ce.match(/^(\+\d{1,3})/);if(U)return{code:U[1],number:ce.substring(U[1].length).trim()}}return{code:"+63",number:ce}})(Te.work_phone),te=[];Te.work_phone&&te.push(`Work: ${Te.work_phone}`),Te.mobile_phone_1&&te.push(`Mobile 1: ${Te.mobile_phone_1}`),Te.mobile_phone_2&&te.push(`Mobile 2: ${Te.mobile_phone_2}`);const B=te.length>0?te.join(" | "):"";xe({name:Te.company_name||"",website:"",countryCode:fe.code,phone_number:fe.number,combinedPhoneNumbers:B,billing_address:Te.address||"",shipping_address:Te.address||"",industry:"",status:"Prospect",territory_id:Te.assigned_to?.territory?.id||null,assigned_to:Te.assigned_to?.id||null,created_by:Te.creator?.id||null}),Fe({last_name:Te.last_name||"",first_name:Te.first_name||"",account_id:null,title:Te.title||"",department:Te.department||"",email:Te.email||"",work_phone:Te.work_phone||"",mobile_phone_1:Te.mobile_phone_1||"",mobile_phone_2:Te.mobile_phone_2||"",notes:Te.notes||"",assigned_to:Te.assigned_to?.id||null,created_by:Te.creator?.id||null}),He({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:Te.assigned_to?.id||null,created_by:Te.creator?.id||null})}},[Te]);const Ve=q=>j(q.target.value),Ze=f.useMemo(()=>{const q=v.trim().toLowerCase(),fe=b.trim().toUpperCase();let te=d.filter(B=>{const ce=[B?.first_name,B?.last_name,B?.company_name,B?.title,B?.email,B?.work_phone,B?.assigned_to?`${B.assigned_to.first_name} ${B.assigned_to.last_name}`:""],De=q===""||ce.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(q));let U=!1;if(fe==="FILTER BY STATUS"){const K=B.status?B.status.toUpperCase():"";U=K!=="CONVERTED"&&K!=="INACTIVE"}else U=(B.status?B.status.toUpperCase():"")===fe;return De&&U});return te.sort((B,ce)=>{const De=new Date(B.created_at).getTime();return new Date(ce.created_at).getTime()-De}),te},[d,v,b]),Je=Math.max(1,Math.ceil(Ze.length/_)||1);f.useEffect(()=>{S(1)},[v,b]),f.useEffect(()=>{S(q=>{const fe=Math.max(1,Math.ceil(Ze.length/_)||1);return q>fe?fe:q})},[Ze.length,_]);const Ue=f.useMemo(()=>{const q=(w-1)*_;return Ze.slice(q,q+_)},[Ze,w,_]),_e=()=>S(q=>Math.max(q-1,1)),he=()=>S(q=>Math.min(q+1,Je)),ie=f.useCallback(async q=>{try{const fe=await se.get(`/activities/lead/${q}`);re(fe.data&&typeof fe.data=="object"?fe.data:{})}catch(fe){console.error(fe),fe.response?.status===404&&(console.warn("No activities found for this account."),re({}))}},[]),G=q=>{s(q),ie(q.id)},X=()=>{s(null),t&&e("/admin/leads",{replace:!0})},ve=()=>{i(!1),A(MA),M(!1),I(null),H(!1),u(null),sessionStorage.removeItem("editLeadData")},$e=q=>{q.target.id==="modalBackdrop"&&ve()},Le=()=>{A(MA),M(!1),I(null),u(null),i(!0)},me=q=>{if(!q){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",q),console.log("Current state - leadID:",t,"selectedLead:",n,"showModal:",r);const fe=U=>{if(!U)return{code:"+63",number:""};const K=U.match(/^(\+\d+)\s(.+)$/);return K?{code:K[1],number:K[2]}:{code:"+63",number:U}},te=fe(q.work_phone),B=fe(q.mobile_phone_1),ce=fe(q.mobile_phone_2);let De="";if(q.assigned_to){De=String(q.assigned_to.id);const U=o?.find(K=>K.id===q.assigned_to.id);u(U)}A({first_name:q.first_name||"",last_name:q.last_name||"",company_name:q.company_name||"",title:q.title||"",department:q.department||"",email:q.email||"",work_ccode:te.code,work_phone:te.number,m1_ccode:B.code,mobile_phone_1:B.number,m2_ccode:ce.code,mobile_phone_2:ce.number,address:q.address||"",notes:q.notes||"",source:q.source||"",territory_id:q.territory?.id||null,lead_owner:De,status:q.status||"New"}),M(!0),I(q.id),n?(console.log("Coming from detail view - closing detail modal and showing edit form"),s(null),i(!0)):(console.log("Already in list view - showing modal"),i(!0))},Re=q=>{if(!q){console.error("handleArchive: lead is null or undefined");return}const fe=`${q.first_name} ${q.last_name}`||"this lead";z({title:"Archive Lead",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:fe}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:q.id,name:fe}})},qe=q=>{const fe=d.find(B=>B.id===q);!fe||!(fe.creator?.id===ze?.id)||Z(B=>{const ce=new Set(B);return ce.has(q)?ce.delete(q):ce.add(q),ce})},rt=()=>{const q=Ue.filter(fe=>fe.creator?.id===ze?.id);we.size===q.length&&q.length>0?Z(new Set):Z(new Set(q.map(fe=>fe.id)))},st=()=>{if(we.size===0){V.warning("Please select at least one lead to archive.");return}const q=we.size;z({title:"Archive Leads",message:a.jsxs("span",{children:["Are you sure you want to archive ",a.jsx("span",{className:"font-semibold",children:q})," lead",q>1?"s":"","? They will be marked as inactive."]}),confirmLabel:`Archive ${q} Lead${q>1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(we)}})},Ie=q=>{const{name:fe,value:te}=q.target;if(A(B=>({...B,[fe]:te})),fe==="lead_owner"){const B=o.find(ce=>ce.id===parseInt(te));u(B)}},[ot,Ct]=f.useState(!1),kt=q=>{if(q.preventDefault(),Ct(!0),!T.last_name?.trim()){V.error("Last name is required.");return}if(!T.company_name?.trim()){V.error("Company is required.");return}if(!T.email?.trim()){V.error("Email is required.");return}if(!T.email.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T.email)){V.error("Please enter a valid email address with a dot in the domain.");return}if(!T.lead_owner){V.error("Please assign a lead owner.");return}const te={...T,territory_id:T.territory_id?parseInt(T.territory_id):null,lead_owner:parseInt(T.lead_owner),work_phone:`${T.work_ccode} ${T.work_phone}`,mobile_phone_1:`${T.m1_ccode} ${T.mobile_phone_1}`,mobile_phone_2:`${T.m2_ccode} ${T.mobile_phone_2}`},B=E&&O?"update":"create",ce=`${T.first_name} ${T.last_name}`;z({title:B==="create"?"Confirm New Lead":"Confirm Update",message:B==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:ce}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:ce}),"?"]}),confirmLabel:B==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:B,payload:te,targetId:O||null,name:ce}})},At=async()=>{if(!W?.action){z(null);return}const{action:q}=W,{type:fe,payload:te,targetId:B,name:ce,lead:De}=q;console.log(te),J(!0);try{if(fe==="create")H(!0),await se.post("/leads/create",te),V.success(`Lead "${ce}" created successfully.`),ve(),await it();else if(fe==="update"){if(!B)throw new Error("Missing lead identifier for update.");H(!0);const U=await se.put(`/leads/${B}`,te);V.success(`Lead "${ce}" updated successfully.`),n&&n.id===B&&s(null),ve(),await it()}else if(fe==="delete"){if(!B)throw new Error("Missing lead identifier for deletion.");await se.delete(`/leads/${B}`),V.success(`Lead "${ce}" deleted successfully.`),n?.id===B&&s(null),await it()}else if(fe==="archive"){if(!B)throw new Error("Missing lead identifier for archiving.");const U=n?.id;de(B),await se.put(`/leads/${B}`,{status:"Inactive"}),V.success(`Lead "${ce}" archived successfully.`),await it(),U===B&&s(null)}else if(fe==="bulk-archive"){const U=q.targetIds;if(!U||U.length===0)throw new Error("Missing leads to archive.");pe(!0),await Promise.all(U.map(K=>se.put(`/leads/${K}`,{status:"Inactive"}))),V.success(`${U.length} lead${U.length>1?"s":""} archived successfully.`),Z(new Set),n&&U.includes(n.id)&&s(null),await it()}}catch(U){console.error(U);const K=fe==="create"?"Failed to create lead. Please review the details and try again.":fe==="update"?"Failed to update lead. Please review the details and try again.":fe==="delete"?"Failed to delete lead. Please try again.":fe==="archive"?"Failed to archive lead. Please try again.":"Failed to archive leads. Please try again.",je=U.response?.data?.detail||K;V.error(je)}finally{(fe==="create"||fe==="update")&&H(!1),fe==="archive"&&de(null),fe==="bulk-archive"&&pe(!1),fe!=="edit"&&(J(!1),z(null))}},jt=()=>{Q||z(null)},ge=d.filter(q=>q.status==="New").length,ye=d.filter(q=>q.status==="Contacted").length,Pe=d.filter(q=>q.status==="Qualified").length,Ce=d.filter(q=>q.status==="Converted").length,Qe=d.filter(q=>q.status==="Lost").length,F=[{title:"New",value:ge,icon:Xa,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ye,icon:Mt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:Pe,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Ce,icon:Jl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Qe,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[p&&a.jsx(Wt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Xa,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Le(),Ct(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:F.map(q=>a.jsx(kFe,{...q},q.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:v,onChange:Ve,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:q=>N(q.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:we.size>0&&we.size===Ue.filter(q=>q.creator?.id===ze?.id).length&&Ue.filter(q=>q.creator?.id===ze?.id).length>0,onChange:rt,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:we.size>0&&a.jsx("button",{onClick:st,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:ne,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:Ze.length>0?Ue.map(q=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>G(q),children:[a.jsx("td",{className:"py-3 px-4 w-12",onClick:fe=>fe.stopPropagation(),children:q.creator?.id===ze?.id&&a.jsx("input",{type:"checkbox",checked:we.has(q.id),onChange:fe=>{fe.stopPropagation(),qe(q.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[q.first_name," ",q.last_name]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:q.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:q.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:q.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:q.assigned_to?`${q.assigned_to.first_name} ${q.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${_Fe(q.status||"New")}`,children:SFe(q.status||"New")})}),a.jsx("td",{className:"py-3 px-4 w-12"})]},q.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Ze.length,pageSize:_,currentPage:w,onPrev:_e,onNext:he,onPageSizeChange:q=>{k(q),S(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),r&&a.jsx("div",{id:"modalBackdrop",onClick:$e,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:q=>q.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ve(),Ct(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:E?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:T.first_name,onChange:Ie,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:T.last_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${ot&&!T.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:T.company_name,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ot&&!T.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:T.title,onChange:Ie,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ot&&!T.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:T.department,onChange:Ie,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:T.email,onChange:Ie,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${ot&&!T.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:T.work_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:OA.map(q=>a.jsx("option",{value:q.code,children:q.code},q.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:T.work_phone,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:T.m1_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:OA.map(q=>a.jsx("option",{value:q.code,children:q.code},q.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:T.mobile_phone_1,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:T.m2_ccode,onChange:Ie,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:OA.map(q=>a.jsx("option",{value:q.code,children:q.code},q.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:T.mobile_phone_2,onChange:Ie,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:T.address,onChange:Ie,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${ot&&!T.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(EFe,{items:Array.isArray(o)?o:[],value:T.lead_owner??"",placeholder:"Search a user...",disabled:D||at,getLabel:q=>`${q.first_name} ${q.last_name}`,onChange:q=>{const fe=o.find(B=>String(B.id)===String(q));u(fe);let te=null;fe&&fe.assigned_territory&&fe.assigned_territory.length===1&&(te=fe.assigned_territory[0].id),A(B=>({...B,lead_owner:q,territory_id:te}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:T.territory_id||"",onChange:Ie,disabled:!c||!c.assigned_territory||c.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:c?c.assigned_territory&&c.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),c&&c.assigned_territory&&c.assigned_territory.map(q=>a.jsx("option",{value:q.id,children:q.name},q.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:T.source,onChange:Ie,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:T.notes,onChange:Ie,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{ve(),Ct(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:D||Q,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:kt,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:D||Q,children:D||Q?"Processing...":E?"Update Lead":"Save Lead"})]})]})]})}),W&&a.jsx(TFe,{open:!0,title:W.title,message:W.message,confirmLabel:W.confirmLabel,cancelLabel:W.cancelLabel,variant:W.variant,onConfirm:At,onCancel:jt,loading:Q}),n&&!r&&!E&&a.jsx(dJ,{relatedActs:Y,lead:n,onBack:X,fetchLeads:it,setSelectedLead:s,onEdit:me,onArchive:Re})]})}function TFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function kFe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function EFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[u,d]=f.useState(""),h=f.useRef(null),p=e.find(j=>String(j.id)===String(t)),x=p?s(p):"",v=f.useMemo(()=>{const j=u.trim().toLowerCase();return(j?e.filter(N=>(s(N)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const j=b=>{h.current&&!h.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{l||d("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:j=>{d(j.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(j=>{const b=String(j.id),N=s(j),w=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:N||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const _b={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Zn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),LFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Zn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Zn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Zn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Zn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Zn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),PFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Zn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Zn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Zn,{label:"Department",name:"department",value:e.department}),a.jsx(Zn,{label:"Title",name:"title",value:e.title}),a.jsx(Zn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Zn,{label:"Email",name:"email",value:e.email}),a.jsx(Zn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Zn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),DFe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Zn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Zn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Zn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Zn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Zn,{label:"Description",name:"description",value:e.description}),a.jsx(Zn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function OFe({isOpen:e,onClose:t}){const[n,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},o=()=>{n>1&&s(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(LFe,{data:_b});case 2:return a.jsx(PFe,{data:_b});case 3:return a.jsx(DFe,{data:_b});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:_b.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(LN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>a.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function uJ({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=Tt(),{user:c}=Gt();f.useEffect(()=>{console.log("SalesDealsQuickAction mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){V.error("No deal selected");return}if(!s||s===e.stage){V.info("Please select a different stage");return}const h=e.id;o(!0);try{await se.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{V.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";V.error(x)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function mJ({selectedDeal:e,relatedActs:t={},show:n,onClose:s,activeTab:r,setActiveTab:i,onEdit:o,onDelete:l,onStatusUpdate:c}){const u=Tt(),[d]=Us(),h=d.get("id"),[p,x]=f.useState(e||null),[v,j]=f.useState(r||"Overview"),[b,N]=f.useState(null),{user:w}=Gt(),{comments:S,addComment:_,refresh:k}=kn({relatedType:"deal",relatedId:p?.id});f.useEffect(()=>{p?.id&&k()},[p?.id,k]);const T=r!==void 0?r:v,A=(()=>{const O=String(w?.role||"").toLowerCase();return O==="ceo"||O==="admin"?"admin":O==="manager"?"manager":O==="sales"?"sales":O==="group manager"||O==="group_manager"||O==="group-manager"?"group-manager":"guest"})();if(f.useEffect(()=>{(async()=>{if(h&&!e)try{const H=((await se.get("/deals/admin/fetch-all")).data||[]).find(W=>W.id===parseInt(h));if(H){const W={...H,amount:typeof H.amount=="number"?H.amount:parseFloat(H.amount||0),probability:H.probability||0};x(W)}else console.warn("Deal not found with ID:",h)}catch(I){console.error("Error fetching deal:",I)}})()},[h,e]),!p&&!h||h&&!p)return null;const E=O=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700";function M(O){return O?new Date(O).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{s?s():u(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(ea,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",M(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete "]}),p.deal_creator?.id===w?.id&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>{i?i(O):j(O)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const O=(p?.stage||"PROSPECTING").toUpperCase(),D=(W=>W==="PROSPECTING"?0:W==="QUALIFICATION"?1:W==="PROPOSAL"?2:W==="NEGOTIATION"?3:W==="CLOSED_WON"||W==="CLOSED_LOST"?4:-1)(O);return[0,1,2,3,4].map(W=>D===W?"orange":D>W?"green":"gray").map((W,z)=>a.jsxs(bt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${W==="green"?"bg-green-500 border-green-500":W==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((O,I)=>a.jsx("span",{className:"text-center flex-1 break-words",children:O},I))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),a.jsx(Tn,{comments:S,onAddComment:_})]}),T==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[t.tasks&&t.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",t.tasks.length,")"]})]}),b==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.tasks.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/tasks`,{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.due_date||O.created_at)})]},`task-${I}`))})]}),t.meetings&&t.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",t.meetings.length,")"]})]}),b==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.meetings.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/meetings`,{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.start_time||O.created_at)})]},`meeting-${I}`))})]}),t.calls&&t.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",t.calls.length,")"]})]}),b==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.calls.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/calls`,{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.call_time||O.created_at)})]},`call-${I}`))})]}),t.quotes&&t.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",t.quotes.length,")"]})]}),b==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.quotes.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/quotes`,{state:{quoteID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(O.quote_id?O.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.presented_date)||""})]},`quote-${I}`))})]}),(!t||(!t.tasks||t.tasks.length===0)&&(!t.meetings||t.meetings.length===0)&&(!t.calls||t.calls.length===0)&&(!t.quotes||t.quotes.length===0)&&(!t.deals||t.deals.length===0)&&(!t.contacts||t.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(uJ,{selectedDeal:p,onStatusUpdate:c,onClose:s})})]})]})]})})}function MFe(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Tt(),t=Jt(),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,u]=f.useState(null),[d,h]=f.useState("Overview"),[p,x]=f.useState(!1),[v,j]=f.useState(null),[b,N]=f.useState(!1),[w,S]=f.useState(1),[_,k]=f.useState(10),[T,A]=f.useState(!1),[E,M]=f.useState(null),[O,I]=f.useState(!1),[D,H]=f.useState(!1),[W,z]=f.useState(null),[Q,J]=f.useState([]),[Y,re]=f.useState([]),[we,Z]=f.useState([]),[ne,pe]=f.useState({}),[Ne,de]=f.useState(null),[be,oe]=f.useState(new Set),[Te,ue]=f.useState(!1);f.useEffect(()=>{const K=t.state,je=K?.dealID;if(je&&!K?.openDealModal){de(je),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(Ne&&v?.length>0&&!b){const K=v.find(je=>je.id===Ne);K?u(K):V.error("Deal not found."),de(null)}},[Ne,v,b]);const[Oe,xe]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[le,Fe]=f.useState(null),[ke,He]=f.useState(null),Xe="dealDraft:sales/deals",it=3600*1e3,ze=f.useRef(!1);f.useEffect(()=>{if(!ze.current){ze.current=!0;try{const K=sessionStorage.getItem(Xe);if(!K)return;const je=JSON.parse(K);if(typeof je?.ts=="number"&&Date.now()-je.ts>it){sessionStorage.removeItem(Xe);return}if(je?.returnTo&&je.returnTo!==t.pathname)return;je?.dealForm&&typeof je.dealForm=="object"&&xe(je.dealForm),typeof je?.isEditing=="boolean"&&H(je.isEditing),je?.currentDealId!==void 0&&z(je.currentDealId),x(!0),sessionStorage.removeItem(Xe)}catch{sessionStorage.removeItem(Xe)}}},[t.pathname]);const at=f.useCallback(()=>{try{sessionStorage.setItem(Xe,JSON.stringify({ts:Date.now(),returnTo:t.pathname,dealForm:Oe,isEditing:D,currentDealId:W}))}catch{}},[Xe,t.pathname,Oe,D,W]),Ve=f.useCallback(()=>{at(),window.open("/sales/accounts?openModal=1","_blank","noopener,noreferrer")},[at]),Ze=f.useCallback(()=>{at(),window.open("/sales/contacts?openModal=1","_blank","noopener,noreferrer")},[at]),Je={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},Ue=K=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[K]||K||"--",_e=K=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[K]||"bg-gray-100 text-gray-700",he=f.useCallback(async K=>{try{const je=await se.get(`/activities/deal/${K}`);pe(je.data&&typeof je.data=="object"?je.data:{})}catch(je){console.error(je),je.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),ie=f.useMemo(()=>{const K=n.trim().toLowerCase(),je=r.trim(),Be=o.trim();return(v??[]).filter(tt=>{const lt=[tt?.name,tt?.description,tt?.account?.name,tt?.contact?.first_name,tt?.contact?.last_name,tt?.assigned_deals?.first_name,tt?.assigned_deals?.last_name],Nt=K===""||lt.some(Pa=>Pa==null||Pa===""?!1:Pa.toString().toLowerCase().includes(K)),Ft=je==="Filter by Stage"||je===""||tt.stage===Je[je]||tt.stage===je,da=Be==="Filter by Owner"||Be===""||`${tt.assigned_deals?.first_name||""} ${tt.assigned_deals?.last_name||""}`.trim().toLowerCase()===Be.toLowerCase();return Nt&&Ft&&da})},[v,n,r,o]),G=Math.max(1,Math.ceil(ie.length/_)||1);f.useEffect(()=>{S(1)},[n,r,o]),f.useEffect(()=>{S(K=>{const je=Math.max(1,Math.ceil(ie.length/_)||1);return K>je?je:K})},[ie.length,_]);const X=f.useMemo(()=>{const K=(w-1)*_;return ie.slice(K,K+_)},[ie,w,_]),ve=()=>S(K=>Math.max(K-1,1)),$e=()=>S(K=>Math.min(K+1,G)),Le=()=>{xe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),H(!1),z(null),x(!0)},me=async()=>{N(!0);try{const K=await se.get("/deals/admin/fetch-all"),Be=[...Array.isArray(K.data)?K.data:[]].sort((tt,lt)=>{const Nt=tt?.created_at?new Date(tt.created_at).getTime():0;return(lt?.created_at?new Date(lt.created_at).getTime():0)-Nt});j(Be)}catch(K){K.response&&K.response.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch deals. Please try again later."),console.error(K)}finally{N(!1)}},Re=async()=>{try{const K=await se.get("/accounts/admin/fetch-all");J(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},qe=async()=>{try{const K=await se.get("/contacts/admin/fetch-all");re(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},rt=async()=>{try{const K=await se.get("/users/all");Z(Array.isArray(K.data)?K.data:[])}catch(K){console.error(K),K.response?.status===403&&V.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{me(),Re(),qe(),rt()},[]);const{user:st}=Gt(),Ie=st?.role==="Sales";f.useEffect(()=>{p&&!D&&Ie&&st&&!Oe.assigned_to&&xe(K=>({...K,assigned_to:st.id}))},[p,D,Ie,st,Oe.assigned_to]);const ot=async K=>{K&&(xe({id:K.id||null,name:K.name||"",account_id:K.account_id?.toString()||"",primary_contact_id:K.primary_contact_id?.toString()||"",stage:K.stage||"PROPOSAL",amount:K.amount?.toString()||"",close_date:K.close_date?new Date(K.close_date).toISOString().split("T")[0]:"",assigned_to:K.assigned_to?.toString()||"",currency:K.currency||"PHP",description:K.description||""}),Fe(K.account||null),He(K.contact||null),H(!0),z(K.id),u(null),x(!0))},Ct=async(K=!1)=>{try{const je=await se.get("/deals/admin/fetch-all"),tt=[...Array.isArray(je.data)?je.data:[]].sort((lt,Nt)=>{const Ft=lt?.created_at?new Date(lt.created_at).getTime():0;return(Nt?.created_at?new Date(Nt.created_at).getTime():0)-Ft});if(j(tt),!K&&c&&c.id){const lt=tt.find(Nt=>Nt.id===c.id);lt&&u({...lt})}}catch(je){console.error("Failed to refresh deal data:",je),await me()}},kt=K=>{const je=K.name.trim();if(!je){V.error("Deal name is required.");return}if(!K.account_id){V.error("Account is required.");return}const Be=D&&W?"update":"create",tt=je;M({title:Be==="create"?"Confirm New Deal":"Confirm Update",message:Be==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:tt}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:tt}),"?"]}),confirmLabel:Be==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:Be,formData:K,targetId:W||null,name:tt}})},At=K=>{const je=X?.find(Be=>Be.id===K);je&&je.deal_creator?.id===st?.id&&oe(Be=>{const tt=new Set(Be);return tt.has(K)?tt.delete(K):tt.add(K),tt})},jt=()=>{const K=X?.filter(je=>je.deal_creator?.id===st?.id)||[];be.size===K.length&&K.length>0?oe(new Set):oe(new Set(K.map(je=>je.id)))},ge=()=>{if(be.size===0)return;const K=be.size;M({title:"Archive Deals",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:K})," deal",K!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${K} Deal${K!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(be),count:K}})},ye=K=>{if(!K)return;const je=K.name||"this deal";M({title:"Archive Deal",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:je}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:K.id,name:je}})},Pe=async()=>{if(!E?.action){M(null);return}const{action:K}=E,{type:je,formData:Be,targetId:tt,name:lt}=K;I(!0);try{if(je==="create"){A(!0);const Nt={name:Be.name.trim(),account_id:parseInt(Be.account_id),primary_contact_id:Be.primary_contact_id?parseInt(Be.primary_contact_id):null,stage:Be.stage,amount:Be.amount?parseFloat(Be.amount):null,currency:Be.currency||"PHP",close_date:Be.close_date||null,description:Be.description||null,assigned_to:Be.assigned_to?parseInt(Be.assigned_to):null};await se.post("/deals/admin/create",Nt),V.success(`Deal "${lt}" created successfully.`),x(!1),await me()}else if(je==="update"){if(!tt)throw new Error("Missing deal identifier for update.");A(!0);const Nt={};Be.name!==void 0&&(Nt.name=Be.name.trim()),Be.account_id!==void 0&&Be.account_id!==""&&(Nt.account_id=parseInt(Be.account_id)),Be.primary_contact_id!==void 0&&(Nt.primary_contact_id=Be.primary_contact_id?parseInt(Be.primary_contact_id):null),Be.stage!==void 0&&(Nt.stage=Be.stage),Be.amount!==void 0&&Be.amount!==""&&(Nt.amount=parseFloat(Be.amount)),Be.currency!==void 0&&(Nt.currency=Be.currency),Be.close_date!==void 0&&(Nt.close_date=Be.close_date||null),Be.description!==void 0&&(Nt.description=Be.description||null),Be.assigned_to!==void 0&&(Nt.assigned_to=Be.assigned_to?parseInt(Be.assigned_to):null),await se.put(`/deals/admin/${tt}`,Nt),V.success(`Deal "${lt}" updated successfully.`),x(!1),await me()}else if(je==="delete"){if(!tt)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${tt}`),V.success(`Deal "${lt}" deleted successfully.`),c?.id===tt&&u(null),await me()}else if(je==="archive"){if(!tt)throw new Error("Missing deal identifier for archive.");await se.put(`/deals/single-archive/${tt}`),V.success(`Deal "${lt}" archived successfully.`),c?.id===tt&&u(null),await me()}else if(je==="bulk-archive"){if(ue(!0),!K.targetIds||K.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:K.targetIds}),V.success(`${K.count} deal${K.count!==1?"s":""} archived successfully.`),oe(new Set),c&&K.targetIds.includes(c.id)&&u(null),await me()}}catch(Nt){console.error(Nt);const Ft=je==="create"?"Failed to create deal. Please review the details and try again.":je==="update"?"Failed to update deal. Please review the details and try again.":je==="bulk-archive"?"Failed to archive deals. Please try again.":je==="archive"?"Failed to archive deal. Please try again.":"Failed to delete deal. Please try again.",da=Nt.response?.data?.detail||Ft;V.error(da)}finally{(je==="create"||je==="update")&&A(!1),je==="bulk-archive"&&ue(!1),I(!1),M(null)}},Ce=()=>{O||M(null)},Qe=()=>{x(!1),xe({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),Fe(null),He(null),H(!1),z(null),A(!1)},F=(v??[]).filter(K=>K.stage==="PROSPECTING").length,q=(v??[]).filter(K=>K.stage==="QUALIFICATION").length,fe=(v??[]).filter(K=>K.stage==="PROPOSAL").length,te=(v??[]).filter(K=>K.stage==="NEGOTIATION").length,B=(v??[]).filter(K=>K.stage==="CLOSED_WON").length,ce=(v??[]).filter(K=>K.stage==="CLOSED_LOST").length,De=(v??[]).filter(K=>K.stage==="CLOSED_CANCELLED").length,U=[{title:"Prospecting",value:F,icon:xj,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:q,icon:gn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:fe,icon:na,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:te,icon:od,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:B,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:ce,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:De,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(Wt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(na,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Le,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:U.map(K=>a.jsx($Fe,{...K},K.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:K=>s(K.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:K=>i(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:o,onChange:K=>l(K.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(K=>`${K.assigned_deals?.first_name} ${K.assigned_deals?.last_name}`))].map((K,je)=>a.jsx("option",{value:K,children:K},je))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:be.size>0&&be.size===X?.filter(K=>K.deal_creator?.id===st?.id).length&&X?.filter(K=>K.deal_creator?.id===st?.id).length>0,onChange:jt,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 w-12",children:be.size>0&&a.jsx("button",{onClick:ge,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:Te,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:ie.length>0?X.map(K=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...K}),he(K.id)},children:[a.jsx("td",{className:"py-3 px-4",children:st?.id===K.deal_creator?.id&&a.jsx("input",{type:"checkbox",checked:be.has(K.id),onClick:je=>{je.stopPropagation()},onChange:je=>{je.stopPropagation(),At(K.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.deal_id?K.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:K.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:K.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.contact?.first_name&&K.contact?.last_name?`${K.contact.first_name} ${K.contact.last_name}`:K.contact?.first_name||K.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_e(K.stage)}`,children:Ue(K.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",K.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:K.assigned_deals?.first_name&&K.assigned_deals?.last_name?`${K.assigned_deals.first_name} ${K.assigned_deals.last_name}`:K.assigned_deals?.first_name||K.assigned_deals?.last_name||"--"})]},K.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:9,children:"No deals found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:ie.length,pageSize:_,currentPage:w,onPrev:ve,onNext:$e,onPageSizeChange:K=>{k(K),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(RFe,{onClose:Qe,formData:Oe,setFormData:xe,isEditing:D,onSubmit:kt,isSubmitting:T||O,accounts:Q,contacts:Y,users:we,currentAccount:le,currentContact:ke,onAddAccount:Ve,onAddContact:Ze,onRefreshAccounts:Re,onRefreshContacts:qe}),c&&a.jsx(mJ,{relatedActs:ne,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:h,onEdit:ot,onDelete:ye,onStatusUpdate:Ct}),E&&a.jsx(IFe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:Pe,onCancel:Ce,loading:O})]})}function IFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function $Fe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function RFe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null,onAddAccount:h,onAddContact:p,onRefreshAccounts:x,onRefreshContacts:v}){const{user:j}=Gt(),b=j?.role==="Sales";f.useEffect(()=>{!s&&b&&j&&!t.assigned_to&&n(T=>({...T,assigned_to:j.id}))},[s,b,j,t.assigned_to,n]);const[N,w]=f.useState(!1),S=T=>{if(T.preventDefault(),w(!0),!t.name?.trim()){V.error("Deal name is required.");return}const A=Number(t.amount);if(!t.amount||isNaN(A)||A<=0){V.error("Amount must be a number greater than 0.");return}if(!t.account_id){V.error("Please select an account.");return}if(!t.primary_contact_id){V.error("Please select a primary contact.");return}r?.(t)},_=T=>{T.target.id==="modalBackdrop"&&e()},k=f.useMemo(()=>{const T=String(t.account_id||"").trim(),A=Array.isArray(l)?l:[];return T?A.filter(E=>{const O=[E?.account_id,E?.accountId,E?.account?.id,E?.account?.account_id,E?.account?.accountId].find(I=>I!=null&&String(I).trim()!=="");return O?String(O)===T:!1}):A},[l,t.account_id]);return f.useEffect(()=>{const T=String(t.account_id||"").trim(),A=String(t.primary_contact_id||"").trim();if(!A||!T)return;k.some(M=>String(M?.id)===A)||n(M=>({...M,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,k,n]),a.jsx("div",{id:"modalBackdrop",onClick:_,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:T=>T.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:S,noValidate:!0,children:[a.jsx(IA,{label:"Deal Name",name:"name",value:t.name,onChange:T=>n({...t,name:T.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:N,className:"md:col-span-2"}),a.jsx($A,{label:"Account",value:t.account_id||"",onChange:T=>n({...t,account_id:T}),items:o||[],getLabel:T=>T?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:h,disabled:i,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:x,disabled:i,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),required:!0,isSubmitted:N}),a.jsx($A,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:T=>n({...t,primary_contact_id:T}),items:k||[],getLabel:T=>`${T?.first_name??""} ${T?.last_name??""}`.trim()||T?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:p,disabled:i,title:"Add contact",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:v,disabled:i,title:"Refresh contacts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),required:!0,isSubmitted:N}),a.jsx(m8,{label:"Stage",name:"stage",value:t.stage,onChange:T=>n({...t,stage:T.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(IA,{label:"Amount",name:"amount",type:"number",step:"0",value:t.amount,onChange:T=>n({...t,amount:T.target.value}),placeholder:"0",required:!0,isSubmitted:N}),a.jsx(m8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:T=>n({...t,currency:T.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(IA,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:T=>n({...t,close_date:T.target.value}),disabled:i}),a.jsx($A,{label:"Assign To",value:t.assigned_to||"",onChange:T=>n({...t,assigned_to:T}),items:c||[],getLabel:T=>`${T?.first_name??""} ${T?.last_name??""}`.trim()||T?.email||"",placeholder:"Search assignee...",required:!0,disabled:i||b,className:"md:col-span-2"}),a.jsx(FFe,{label:"Description",name:"description",value:t.description,onChange:T=>n({...t,description:T.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function IA({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function m8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function $A({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1,actions:h=null}){const p=d&&u&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&a.jsx("span",{className:"text-red-500",children:"*"})]}),h?a.jsx("div",{className:"flex items-center",children:h}):null]}),a.jsx(zFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:p})]})}function zFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c={hasError:c}}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),j=e.find(w=>String(w.id)===String(t))||l,b=j?s(j):"",N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function FFe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const RA=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],zA={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Ri=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},FA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",UFe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},BFe=e=>{switch(Ri(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Ab=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Tg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",HFe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},UA=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},f8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},BA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Vw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},qFe=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Vw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=Vw(t);return n||null},GFe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},WFe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function VFe(){const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,u]=f.useState([]),[d,h]=f.useState([]),[p,x]=f.useState([]),[v,j]=f.useState([]),[b,N]=f.useState(null),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(!1),[E,M]=f.useState(!1),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState(zA),[we,Z]=f.useState(""),[ne,pe]=f.useState("Filter by Status"),[Ne,de]=f.useState(null),be=f.useCallback(async()=>{if(w)try{z(!0);const L=(await se.get("/company/invoice-info"))?.data;e(`/sales/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:L}})}catch($){const L=$?.response?.data?.detail||$?.message||"Failed to open print page.";V.error(L)}finally{z(!1)}},[w,e]),[oe,Te]=f.useState(1),[ue,Oe]=f.useState(10),[xe,le]=f.useState("Overview"),[Fe,ke]=f.useState("Draft"),[He,Xe]=f.useState([]),[it,ze]=f.useState(null),{comments:at,addComment:Ve,refresh:Ze}=kn({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&Ze()},[w?.id,Ze]),f.useEffect(()=>{const L=t.state?.quoteID;if(L){ze(L),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(it&&r.length>0&&!o){const $=r.find(L=>L.id===it);$?S($):V.error("Quote not found."),ze(null)}},[it,r,o]),f.useEffect(()=>{let $=!0;return(async()=>{const ee=qFe();if(ee&&$){N(ee);return}try{const Ee=await se.get("/auth/me"),Me=Vw(Ee?.data);if(Me&&$){N(Me);return}}catch{}try{const Ee=await se.get("/users/me"),Me=Vw(Ee?.data);if(Me&&$){N(Me);return}}catch{}$&&N(null)})(),()=>{$=!1}},[]);const Je=f.useCallback($=>$&&d.find(ee=>String(ee.id)===String($))?.name||"",[d]),Ue=f.useCallback($=>{if(!$)return"";const L=p.find(ee=>String(ee.id)===String($));return L?`${L.first_name} ${L.last_name}`.trim():""},[p]),_e=f.useCallback($=>{if(!$)return"--";const L=c.find(ee=>String(ee.id)===String($));return L?.deal_name||L?.name||`Deal #${f8($)}`},[c]),he=f.useCallback($=>{const L=c.find(Me=>String(Me.id)===String($)),ee=GFe(L);let Ee=WFe(L);if(!Ee&&ee){const Me=p.filter(We=>String(We.account_id||"")===String(ee));if(Me.length>0){const We=[...Me].sort((ft,St)=>{const _t=`${ft.first_name||""} ${ft.last_name||""}`.trim().toLowerCase(),Vt=`${St.first_name||""} ${St.last_name||""}`.trim().toLowerCase();return _t.localeCompare(Vt)});Ee=String(We[0].id)}}if(ee&&Ee){const Me=p.find(We=>String(We.id)===String(Ee));Me?.account_id&&String(Me.account_id)!==String(ee)&&(Ee="")}return{accountId:ee||"",contactId:Ee||""}},[c,p]),ie=f.useCallback($=>{if(!$)return"--";if($.deal?.deal_name)return $.deal.deal_name;if($.deal?.name)return $.deal.name;const L=$.deal_id||$.deal?.id;return L?_e(L):"--"},[_e]),G=f.useCallback($=>{if(!$)return"--";if($.account?.name)return $.account.name;let L=$.account_id||$.account?.id;if(!L){const ee=$.deal_id||$.deal?.id;ee&&(L=he(ee).accountId)}return L?Je(L)||`Account #${L}`:"--"},[he,Je]),X=f.useCallback($=>{if(!$)return"--";if($.contact?.first_name||$.contact?.last_name)return`${$.contact?.first_name||""} ${$.contact?.last_name||""}`.trim()||"--";let L=$.contact_id||$.contact?.id;if(!L){const Ee=$.deal_id||$.deal?.id;Ee&&(L=he(Ee).contactId)}return(L?Ue(L):"")||(L?`Contact #${L}`:"--")},[he,Ue]),ve=f.useCallback(async($=null)=>{l(!0);try{const L=await se.get("/quotes/admin/fetch-all"),Ee=[...Array.isArray(L.data)?L.data:[]].sort((Me,We)=>{const ft=Me?.created_at||Me?.updated_at||0,St=We?.created_at||We?.updated_at||0;return new Date(St)-new Date(ft)});if(i(Ee),$){const Me=Ee.find(We=>We.id===$);S(Me||null)}}catch(L){console.error(L),i([]),L.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),$e=f.useCallback(async()=>{try{const $=await se.get("/deals/admin/fetch-all");u(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load deals (permission denied).")}},[]),Le=f.useCallback(async()=>{try{const $=await se.get("/accounts/admin/fetch-all");h(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),me=f.useCallback(async()=>{try{const $=await se.get("/contacts/admin/fetch-all");x(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},[]),Re=f.useCallback(async()=>{try{const $=await se.get("/users/all");j(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{ve(),$e(),Le(),me(),Re()},[ve,$e,Le,me,Re]);const qe=f.useMemo(()=>{const $=we.trim().toLowerCase(),L=ne.trim();return r.filter(ee=>{const Ee=ie(ee),Me=G(ee),We=X(ee),ft=UA(ee.presented_date,ee.validity_days),St=[ee.quote_id,Ee,Me,We,ee.total_amount?.toString(),ee.validity_days?.toString(),ee.presented_date?Tg(ee.presented_date):"",ft?Tg(ft):"",ee.assigned_user?.first_name,ee.assigned_user?.last_name,ee.creator?.first_name,ee.creator?.last_name,ee.status,ee.notes,Ab(ee.created_at),Ab(ee.updated_at)],_t=$===""||St.some(En=>En==null?!1:En.toString().toLowerCase().includes($)),Vt=L==="Filter by Status"||Ri(ee.status)===L;return _t&&Vt})},[r,we,ne,ie,G,X]),rt=Math.max(1,Math.ceil(qe.length/ue)||1);f.useEffect(()=>Te(1),[we,ne]),f.useEffect(()=>{Te($=>{const L=Math.max(1,Math.ceil(qe.length/ue)||1);return $>L?L:$})},[qe.length,ue]);const st=f.useMemo(()=>{const $=(oe-1)*ue;return qe.slice($,$+ue)},[qe,oe,ue]),Ie=()=>Te($=>Math.max($-1,1)),ot=()=>Te($=>Math.min($+1,rt)),Ct=$=>{S($),le("Overview"),ke(Ri($?.status)||"Draft")},kt=()=>{S(null),le("Overview")},At=$=>{$.target.id==="quoteModalBackdrop"&&!D&&kt()},jt=f.useCallback(()=>{k(!1),A(!1),J(null),re(zA),M(!1)},[]),ge=$=>{$.target.id==="modalBackdrop"&&!E&&!D&&jt()},ye=$=>{const{name:L,value:ee}=$.target;if(L==="deal_id"){const{accountId:Ee,contactId:Me}=he(ee);re(We=>({...We,deal_id:ee,account_id:Ee,contact_id:Me}));return}re(Ee=>({...Ee,[L]:ee}))},Pe=()=>{const $={...zA};n?.role?.toUpperCase()==="SALES"&&b&&($.assigned_to=String(b)),re($),A(!1),J(null),k(!0)},Ce=$=>{if(!$)return;S(null);const L=$.deal?.id?String($.deal.id):$.deal_id?String($.deal_id):"",ee=L?he(L):{accountId:"",contactId:""},Ee=$.account?.id?String($.account.id):$.account_id?String($.account_id):ee.accountId,Me=$.contact?.id?String($.contact.id):$.contact_id?String($.contact_id):ee.contactId,We=$.assigned_user?.id?String($.assigned_user.id):$.assigned_to?String($.assigned_to):"";re({deal_id:L,account_id:Ee||"",contact_id:Me||"",total_amount:$.total_amount?.toString()||"",presented_date:HFe($.presented_date),validity_days:$.validity_days!==null&&$.validity_days!==void 0?String($.validity_days):"",status:Ri($.status)||"Draft",assigned_to:We,notes:$.notes||"",subtotal:parseFloat($.subtotal)||0,tax_rate:parseFloat($.tax_rate)||0,tax_amount:parseFloat($.tax_amount)||0,discount_type:$.discount_type||"",discount_value:parseFloat($.discount_value)||0,discount_amount:parseFloat($.discount_amount)||0,currency:$.currency||"PHP",items:Array.isArray($.items)?$.items.map(ft=>({id:ft.id,item_type:ft.item_type||"Product",name:ft.name||"",description:ft.description||"",sku:ft.sku||"",variant:ft.variant||"",unit:ft.unit||"pcs",quantity:parseFloat(ft.quantity)||1,unit_price:parseFloat(ft.unit_price)||0,discount_percent:parseFloat(ft.discount_percent)||0,discount_amount:parseFloat(ft.discount_amount)||0,line_total:parseFloat(ft.line_total)||0,sort_order:ft.sort_order||0})):[]}),A(!0),J($.id),k(!0)},Qe=$=>{if($.target.checked){const L=st.filter(ee=>ee.created_by===b).map(ee=>ee.id);Xe(L)}else Xe([])},F=$=>{Xe(L=>L.includes($)?L.filter(ee=>ee!==$):[...L,$])},q=st.filter($=>$.created_by===b),fe=$=>{if(!$)return;const L=$.quote_id||"this quote";I({title:"Archive Quote",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:L}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:L}})},te=async()=>{He.length!==0&&I({title:"Archive Quotes",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:He.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${He.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:He}})},[B,ce]=f.useState(!1),De=$=>{if($.preventDefault(),ce(!0),!b){V.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){V.error("Deal is required.");return}if(!Y.assigned_to&&n?.role?.toUpperCase()!=="SALES"){V.error("Assigned To is required.");return}const ee=he(Y.deal_id),Ee=Y.items.map((_t,Vt)=>({item_type:_t.item_type||"Product",name:_t.name,description:_t.description||null,sku:_t.sku||null,variant:_t.variant||null,unit:_t.unit||null,quantity:parseFloat(_t.quantity)||1,unit_price:parseFloat(_t.unit_price)||0,discount_percent:parseFloat(_t.discount_percent)||0,sort_order:_t.sort_order??Vt})),Me={deal_id:Number(Y.deal_id),account_id:ee.accountId?Number(ee.accountId):null,contact_id:ee.contactId?Number(ee.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Ee},We=T&&Q?"update":"create",ft=_e(Y.deal_id),St=We==="create"?{...Me,created_by_id:Number(b)}:Me;I({title:We==="create"?"Confirm New Quote":"Confirm Update",message:We==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}),confirmLabel:We==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:St,targetId:Q||null,name:ft}})},U=async()=>{if(!O?.action){I(null);return}const{action:$}=O,{type:L,payload:ee,targetId:Ee,name:Me}=$;H(!0);try{if(L==="create")M(!0),await se.post("/quotes/admin",ee),V.success("Quote created successfully."),jt(),await ve();else if(L==="update"){if(!Ee)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Ee}`,ee),V.success("Quote updated successfully."),jt(),await ve(),w?.id===Ee&&S(null)}else if(L==="delete"){if(!Ee)throw new Error("Missing quote identifier for deletion.");const We=w?.id;de(Ee),await se.delete(`/quotes/admin/${Ee}`),V.success(`Quote "${Me}" archived successfully.`),await ve(We&&We!==Ee?We:null),We===Ee&&S(null)}else L==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:He}),V.success(`Successfully archived ${He.length} quotes`),Xe([]),await ve())}catch(We){console.error(We);const ft=L==="create"?"Failed to create quote. Please review the details and try again.":L==="update"?"Failed to update quote. Please review the details and try again.":"Failed to archive quote. Please try again.";V.error(ft),(L==="create"||L==="update")&&M(!1),L==="delete"&&de(null)}finally{(L==="create"||L==="update")&&M(!1),L==="delete"&&de(null),H(!1),I(null)}},K=()=>{D||I(null)},je=f.useCallback(($,L)=>{const ee=$?.deal_id??$?.deal?.id??"",Ee=ee?Number(ee):null,Me=Ee?he(String(Ee)):{accountId:"",contactId:""},We=$?.account_id??$?.account?.id??Me.accountId??null,ft=$?.contact_id??$?.contact?.id??Me.contactId??null,St=$?.total_amount??0,_t=$?.assigned_to??$?.assigned_user?.id??null;return{deal_id:Ee,account_id:We!=null&&String(We).trim()!==""?Number(We):null,contact_id:ft!=null&&String(ft).trim()!==""?Number(ft):null,total_amount:Number(St),presented_date:$?.presented_date||null,validity_days:$?.validity_days===""||$?.validity_days===void 0||$?.validity_days===null?null:Number($.validity_days),status:L,assigned_to:_t!=null&&String(_t).trim()!==""?Number(_t):null,notes:$?.notes?.trim()||null}},[he]),Be=f.useCallback(async()=>{if(!w?.id)return;const $=Ri(Fe),L=[$,$.toLowerCase()],ee=async Ee=>se.patch(`/quotes/admin/${w.id}/status`,{status:Ee},{headers:{"Content-Type":"application/json"}});try{let Ee=!1;for(const Me of L)try{await ee(Me),Ee=!0;break}catch(We){if(We?.response?.status===422)continue;throw We}if(!Ee){const Me=je(w,$);if(!Me.deal_id){V.error("Cannot update status: missing deal_id on selected quote.");return}if(!Me.total_amount||Me.total_amount<=0){V.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Me)}V.success(`Quote status updated to ${$}`),S(null),le("Overview"),await ve()}catch(Ee){console.error(Ee);const Me=Ee?.response?.data?.message||(Ee?.response?.data?.errors?Object.values(Ee.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";V.error(Me)}},[w,Fe,ve,je]),tt=[{label:"Filter by Status",value:"Filter by Status"},...RA.map($=>({label:$.label,value:$.value}))],lt=O?.action?.type==="delete"?O.action.targetId:null,Nt=w&&(Ne===w.id||lt===w.id),Ft=w&&Ne===w.id,da=w?a.jsx("div",{id:"quoteModalBackdrop",onClick:At,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:kt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ie(w)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${BFe(w.status)}`,children:FA(w.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:be,disabled:W||E||D,children:[a.jsx(ra,{className:"mr-2"}),W?"Preparing...":"Print Quotation"]}),b===w.created_by&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ce(w),disabled:D||O?.action?.type==="update"&&O.action.targetId===w.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>fe(w),disabled:!!Nt,children:Ft?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>a.jsx("button",{onClick:()=>le($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${xe===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[xe==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:BA(w.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ie(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:G(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:X(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:Tg(w.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:Tg(UA(w.presented_date,w.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:FA(w.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Ab(w.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Ab(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&a.jsx("div",{className:"mt-6",children:a.jsx(bd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),xe==="Notes"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),a.jsx(Tn,{comments:at,onAddComment:Ve})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/sales/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${BA(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/sales/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/sales/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||Ri(w.status)||"Draft",onChange:$=>ke($.target.value),children:RA.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))}),a.jsx("button",{onClick:Be,disabled:Ri(Fe)===Ri(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Ri(Fe)===Ri(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Pa=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(Wt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ra,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{Pe(),ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:we,onChange:$=>Z($.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:ne,onChange:$=>pe($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:q.length>0&&He.length===q.length,onChange:Qe,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:He.length>0?a.jsx("button",{onClick:te,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${He.length} selected items`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):qe.length>0?st.map($=>{const L=UA($.presented_date,$.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ct($),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:ee=>ee.stopPropagation(),children:$.created_by===b&&a.jsx("input",{type:"checkbox",checked:He.includes($.id),onChange:()=>F($.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:BA($.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:G($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:X($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:$.total_amount?`${s}${Number($.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${UFe($.status)}`,children:FA($.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:$.assigned_user?`${$.assigned_user.first_name} ${$.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:Tg(L)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},$.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:qe.length,pageSize:ue,currentPage:oe,onPrev:Ie,onNext:ot,onPageSizeChange:$=>{Oe($),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Ge=_?a.jsx("div",{id:"modalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>{jt(),ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||D,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:De,children:[a.jsx(p8,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:$=>{const{accountId:L,contactId:ee}=he($);re(Ee=>({...Ee,deal_id:$,account_id:L,contact_id:ee}))},items:Array.isArray(c)?c:[],getLabel:$=>`${f8($?.deal_id??"")} ${$?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:B,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(g8,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),a.jsx(g8,{label:"Contact",value:Ue(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),a.jsx("div",{className:"md:col-span-2 mt-2",children:a.jsx(bd,{items:Y.items,onChange:$=>re(L=>({...L,items:$})),currencySymbol:s,readOnly:E,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:$=>{re(L=>({...L,subtotal:$.subtotal,discount_amount:$.discount_amount,tax_amount:$.tax_amount,total_amount:$.total_amount}))}})}),a.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),a.jsxs("select",{value:Y.discount_type||"",onChange:$=>re(L=>({...L,discount_type:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:E,children:[a.jsx("option",{value:"",children:"No Discount"}),a.jsx("option",{value:"percentage",children:"Percentage (%)"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),a.jsx("input",{type:"number",value:Y.discount_value||"",onChange:$=>re(L=>({...L,discount_value:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:E||!Y.discount_type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:$=>re(L=>({...L,tax_rate:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),a.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsx(h8,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ye,disabled:E}),a.jsx(h8,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ye,placeholder:"30",disabled:E}),n?.role?.toUpperCase()==="SALES"?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assigned To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-white text-black font-medium",children:(()=>{const $=v.find(L=>String(L.id)===Y.assigned_to);return $?`${$.first_name} ${$.last_name}`:"Assigning..."})()})]}):a.jsx(p8,{label:"Assigned To",value:Y.assigned_to||"",onChange:$=>re(L=>({...L,assigned_to:$})),items:Array.isArray(v)?v:[],getLabel:$=>{const L=`${$?.first_name??""} ${$?.last_name??""}`.trim();return L?$?.role?`${L} (${$.role})`:L:$?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:B,disabled:E}),a.jsx(YFe,{label:"Status",name:"status",value:Y.status,onChange:ye,options:RA,required:!0,disabled:E}),a.jsx(KFe,{label:"Notes",name:"notes",value:Y.notes,onChange:ye,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{jt(),ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-gray-400 border border-gray-300 rounded hover:bg-gray-500 transition disabled:opacity-70",disabled:E||D,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||D,children:E?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,Ae=O?a.jsx(XFe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:U,onCancel:K,loading:D}):null;return a.jsxs(a.Fragment,{children:[w?da:Pa,Ge,Ae]})}function h8({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function g8({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function YFe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",d=r.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function p8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(QFe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function QFe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function KFe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function XFe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function ZFe(){const{userRole:e}=Ks();return a.jsx(x1,{currentUserRole:e,currentUserId:null})}function JFe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,u]=f.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{d()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const T=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[T,E,k.action,k.entity_type,A,k.description],O=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),I=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return O&&I}).sort((k,T)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,n,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[n,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const v=()=>l(w=>Math.max(w-1,1)),j=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!h.length){Kx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),_=[w.join(","),...S.map(E=>E.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(k),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},N=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(Wt,{message:"Loading audit logs..."}),a.jsx(Qx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(Wo,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${N(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:v,onNext:j,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const x8=["Not started","In progress","Deferred","Completed"],y8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},fJ=e=>e&&(y8[e]||y8[String(e).toUpperCase()])||"Not started",eUe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},HA=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},tUe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),fJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:h}},aUe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const z=String(W).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,j=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,N=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",k="",T="Lead",A="",E="",M="";const O=c(),I=v(),D=l(),H=x();if(O){w="Account",T="Account",A=I,S=String(O);const W=u(),z=d(),Q=j(),J=b(),Y=h(),re=N();W?(_="Contact",E="Contact",M=Q,k=String(W)):z?(E="Deal",_="Deal",M=J,k=String(z)):Y&&(E="Quote",_="Quote",M=re,k=String(Y))}else D?(T="Lead",A=H,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:fJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.task_creator?.id??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:E,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:k}};function nUe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[n,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState([]),[p,x]=f.useState(!0),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[_,k]=f.useState([]),[T,A]=f.useState(1),[E,M]=f.useState(10),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState([]),[Q,J]=f.useState(null),Y=Tt(),re=Jt(),[we,Z]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ne,pe]=f.useState(null),Ne=Ux(Ff(sm,{activationConstraint:{distance:8}})),de=X=>{const{active:ve}=X,$e=d.find(Le=>Le.id===ve.id);J($e)},be=async X=>{const{active:ve,over:$e}=X;if(J(null),!$e)return;const Le=ve.id,me=$e.id,Re=d.find(qe=>qe.id===Le);if(!(!Re||Re.status===me)){h(qe=>qe.map(rt=>rt.id===Le?{...rt,status:me}:rt));try{const qe={title:Re.title,description:Re.description||"",priority:Re.priority||"Normal",status:me,due_date:Re.dueDate||null,assigned_to:Re.assignedToId||null,related_type_1:Re.relatedType1||null,related_to_1:Re.relatedTo1?parseInt(Re.relatedTo1,10):null,related_type_2:Re.relatedType2||null,related_to_2:Re.relatedTo2?parseInt(Re.relatedTo2,10):null};(!qe.related_to_1||isNaN(qe.related_to_1))&&(qe.related_to_1=null),(!qe.related_to_2||isNaN(qe.related_to_2))&&(qe.related_to_2=null),await se.put(`/tasks/${Le}`,qe),V.success(`Task moved to "${me}"`)}catch(qe){console.error("Failed to update task status:",qe),V.error("Failed to update task status"),h(rt=>rt.map(st=>st.id===Le?{...st,status:Re.status}:st))}}},oe=()=>{J(null)};f.useEffect(()=>{const X=re.state?.openTaskModal,ve=re.state?.initialTaskData,$e=re.state?.taskID;X?(i(!0),ve&&Z(Le=>({...Le,...ve})),Y(re.pathname,{replace:!0,state:{}})):$e&&(pe($e),Y(re.pathname,{replace:!0,state:{}}))},[re,Y]),f.useEffect(()=>{if(ne&&d.length>0&&!p){const X=d.find(ve=>ve.id===ne);X?xe(X,!0):V.error("Task not found."),pe(null)}},[ne,d,p]);const Te=async()=>{try{const X=await se.get("/users/all");k(Array.isArray(X.data)?X.data:[])}catch(X){console.error("Failed to fetch users:",X),V.error("Failed to fetch users.")}},ue=async()=>{try{x(!0);const X=await se.get("/tasks/all"),$e=(Array.isArray(X.data)?X.data:[]).map(aUe);$e.sort((Le,me)=>{const Re=Le.createdAt?new Date(Le.createdAt):0;return(me.createdAt?new Date(me.createdAt):0)-Re}),h($e),n==="list"&&A(1)}catch(X){console.error("Failed to load tasks:",X),V.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{if(!t&&e){Te(),ue();const X=Oj(e.id),ve=new WebSocket(X);return ve.onopen=()=>{console.log(" Connected to task notifications")},ve.onmessage=$e=>{try{const Le=JSON.parse($e.data);Le.type==="task_status_updated"&&(V.info(` ${Le.message}`,{position:"top-right",autoClose:4e3}),ue())}catch(Le){console.error("Error parsing notification:",Le)}},ve.onerror=$e=>{console.error(" WebSocket error:",$e)},ve.onclose=()=>{console.log(" Disconnected from task notifications")},()=>{ve.readyState===WebSocket.OPEN&&ve.close()}}},[t,e]);const Oe=()=>{l(null),Z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:e?.role==="Sales"?String(e.id):"",notes:"",createdById:null,relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},xe=(X=null,ve=!1)=>{l(X),u(ve),X?Z({id:X.id,subject:X.title||"",description:X.description||"",priority:X.priority||"Normal",status:X.status||"Not started",dueDate:eUe(X.dueDate),assignedTo:X.assignedToId?String(X.assignedToId):"",assignedToName:X.assignedToName||"",createdBy:X.createdBy||"",notes:X.notes||"",createdById:X.createdById||null,relatedType1Text:X.relatedType1Text||"",relatedTo1Text:X.relatedTo1Text||"",relatedType2Text:X.relatedType2Text||"",relatedTo2Text:X.relatedTo2Text||"",relatedType1:X.relatedType1||"",relatedTo1:X.relatedTo1||"",relatedType2:X.relatedType2||"",relatedTo2:X.relatedTo2||""}):Oe(),i(!0)},le=()=>{i(!1),l(null),u(!1),Oe()},Fe=async X=>{const ve=tUe(X);try{o&&!c?(await se.put(`/tasks/${o.id}`,ve),V.success("Task updated successfully.")):(await se.post("/tasks/create",ve),V.success("Task created successfully.")),i(!1),await ue()}catch($e){console.error("Failed to save task:",$e);const Le=$e.response?.data?.detail||"Failed to save task.";V.error(Le)}},ke=X=>{X&&I({title:"Archive Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to archive ",a.jsx("span",{className:"font-semibold",children:X.title}),"?"]}),confirmLabel:"Archive Task",cancelLabel:"Cancel",variant:"warning",action:{type:"archive",targetId:X.id}})},He=()=>Je.filter(X=>String(X.createdById)===String(e?.id)),Xe=()=>{const X=He();if(X.length!==0)if(X.every(ve=>W.includes(ve.id)))z(W.filter(ve=>!X.map($e=>$e.id).includes(ve)));else{const ve=X.map($e=>$e.id);z([...new Set([...W,...ve])])}},it=X=>{const ve=Je.find($e=>$e.id===X);String(ve?.createdById)===String(e?.id)&&z($e=>$e.includes(X)?$e.filter(Le=>Le!==X):[...$e,X])},ze=async()=>{W.length!==0&&I({title:"Archive Tasks",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:W.length})," selected tasks?"]}),confirmLabel:`Archive ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-archive",task_ids:W}})},at=async()=>{if(!O?.action){I(null);return}const{action:X}=O;H(!0);try{X.type==="archive"?(await se.delete(`/tasks/${X.targetId}`),V.success("Task archived successfully."),await ue()):X.type==="bulk-archive"&&(await se.post("/tasks/bulk-archive",{task_ids:X.task_ids}),V.success(`Successfully archived ${X.task_ids.length} tasks`),z([]),await ue())}catch(ve){console.error("Task action failed:",ve);const $e=ve.response?.data?.detail||"Failed to archive task.";V.error($e)}finally{H(!1),I(null)}},Ve=()=>{D||I(null)},Ze=f.useMemo(()=>{const X=v.trim().toLowerCase();return[...d].sort(($e,Le)=>{const me=$e.createdAt?new Date($e.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-me}).filter($e=>{const Le=X===""||$e.title?.toLowerCase().includes(X)||$e.description?.toLowerCase().includes(X)||$e.assignedToName?.toLowerCase().includes(X)||$e.createdBy?.toLowerCase().includes(X),me=b==="Filter by Status"||$e.status===b,Re=w==="Filter by Priority"||$e.priority===w;return Le&&me&&Re})},[d,v,b,w]);f.useEffect(()=>{A(1)},[v,b,w,n,E]),f.useEffect(()=>{if(n==="list"){const X=Ze.length===0?1:Math.ceil(Ze.length/E);T>X&&A(X)}},[Ze.length,T,n,E]);const Je=f.useMemo(()=>{if(n==="board")return Ze;const X=(T-1)*E;return Ze.slice(X,X+E)},[Ze,T,n,E]),Ue=f.useMemo(()=>{const X=new Date;return[{title:"To Do",value:d.filter(ve=>ve.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(ve=>ve.status==="In progress").length,icon:Yi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(ve=>ve.status==="Completed").length,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(ve=>ve.dueDate&&new Date(ve.dueDate)<X&&ve.status!=="Completed").length,icon:Qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(ve=>ve.priority==="High").length,icon:Jl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),_e=X=>X.dueDate&&new Date(X.dueDate)<new Date&&X.status!=="Completed",he=X=>{switch(X.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},ie=X=>{switch(X){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},G=X=>{switch(X){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(Wt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Yi,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>xe(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(ta,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Ue.map(X=>a.jsx(sUe,{...X},X.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:X=>j(X.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:X=>N(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),x8.map(X=>a.jsx("option",{children:X},X))]}),a.jsxs("select",{value:w,onChange:X=>S(X.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(Ze.length>0?a.jsxs(qx,{sensors:Ne,collisionDetection:Bx,onDragStart:de,onDragEnd:be,onDragCancel:oe,children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:x8.map(X=>{const ve=Je.filter($e=>$e.status===X);return a.jsx(iUe,{column:X,columnTasks:ve,getTaskCardColor:he,isTaskOverdue:_e,formatDateDisplay:HA,handleOpenModal:xe,handleArchiveTask:ke,currentUser:e},X)})}),a.jsx(kN,{children:Q?a.jsx(lUe,{task:Q,getTaskCardColor:he,isTaskOverdue:_e,formatDateDisplay:HA}):null})]}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:He().length>0&&He().every(X=>W.includes(X.id)),onChange:Xe})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?a.jsx("button",{onClick:ze,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${W.length} selected tasks`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:Je.length>0?Je.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:ve=>ve.stopPropagation(),children:String(X.createdById)===String(e?.id)?a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(X.id),onChange:()=>it(X.id)}):null}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>xe(X,!0),children:X.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(X,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ie(X.status||"Not started")}`,children:X.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(X,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${G(X.priority||"Low")}`,children:X.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>xe(X,!0),children:X.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${_e(X)?"text-red-600 font-medium":""}`,onClick:()=>xe(X,!0),children:X.dateAssigned?HA(X.dateAssigned):""}),a.jsx("td",{})]},X.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(la,{className:"mt-6",totalItems:Ze.length,pageSize:E,currentPage:Ze.length===0?0:T,onPrev:()=>A(X=>Math.max(X-1,1)),onNext:()=>A(X=>Math.min(X+1,Math.max(1,Math.ceil(Ze.length/E)||1))),onPageSizeChange:X=>{M(X),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(v0,{isOpen:r,onClose:le,onSave:Fe,onEdit:()=>u(!1),setFormData:Z,formData:we,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ke}),O&&a.jsx(rUe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:at,onCancel:Ve,loading:D})]})}function sUe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function rUe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function iUe({column:e,columnTasks:t,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l}){const{isOver:c,setNodeRef:u}=Wx({id:e});return a.jsxs("div",{ref:u,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${c?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),a.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(d=>a.jsx(oUe,{task:d,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleArchiveTask:o,currentUser:l},d.id)):a.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${c?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:c?"Drop here":"No tasks"})})]})}function oUe({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s,handleOpenModal:r,handleArchiveTask:i,currentUser:o}){const{attributes:l,listeners:c,setNodeRef:u,transform:d,isDragging:h}=Gx({id:e.id}),p=d?{transform:`translate3d(${d.x}px, ${d.y}px, 0)`}:void 0;return a.jsxs("div",{ref:u,style:p,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${h?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...c,...l,children:[a.jsxs("div",{className:"text-left flex-1",onClick:x=>{x.stopPropagation(),r(e,!0)},children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),a.jsx("div",{className:"flex items-center gap-2 ml-3",onClick:x=>x.stopPropagation(),children:(String(e.createdById)===String(o?.id)||o?.role!=="Sales")&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(hn,{})}),a.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),i(e)},className:"text-orange-500 hover:text-orange-700",children:a.jsx(Zt,{})})]})})]})}function lUe({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s}){return a.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const hJ=e=>e?e.toUpperCase():"",Tb=e=>{const t=hJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},cUe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},dUe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},uUe=e=>{const t=hJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},qA={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},mUe=()=>{const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.role==="Sales",[r]=Us(),i=r.get("id"),o=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[l,c]=f.useState([]),[u,d]=f.useState(!1),[h,p]=f.useState([]),[x,v]=f.useState(""),[j,b]=f.useState("Filter by Status"),[N,w]=f.useState(!1),[S,_]=f.useState(null),[k,T]=f.useState(1),[A,E]=f.useState(10),[M,O]=f.useState(qA),[I,D]=f.useState(!1),[H,W]=f.useState(null),[z,Q]=f.useState(!1),[J,Y]=f.useState(null),[re,we]=f.useState(!1),[Z,ne]=f.useState(null),[pe,Ne]=f.useState([]),[de,be]=f.useState(null);f.useEffect(()=>{N&&!I&&s&&n&&!M.assignedTo&&O(Ue=>({...Ue,assignedTo:n.id}))},[N,I,n,s]),f.useEffect(()=>{const Ue=t.state?.openMeetingModal,_e=t.state?.initialMeetingData?.relatedTo||r.get("id"),he=t.state?.meetingID;Ue||_e?(w(!0),t.state?.initialMeetingData&&O(ie=>({...ie,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):he&&(ne(he),e(t.pathname,{replace:!0,state:{}}))},[t,r,e]),f.useEffect(()=>{if(Z&&l.length>0&&!u){const Ue=l.find(_e=>_e.id===Z);Ue?_(Ue):V.error("Meeting not found."),ne(null)}},[Z,l,u]);const oe=async()=>{if(i&&o){const Ue=sessionStorage.getItem("meetingDetailData");if(Ue)try{const _e=JSON.parse(Ue);if(_e.id===parseInt(i)){_(_e),sessionStorage.removeItem("meetingDetailData");return}}catch(_e){console.error(_e)}}d(!0);try{const Ue=await se.get("/meetings/admin/fetch-all"),he=[...Array.isArray(Ue.data)?Ue.data:[]].sort((ie,G)=>{const X=ie?.created_at?new Date(ie.created_at).getTime():0;return(G?.created_at?new Date(G.created_at).getTime():0)-X});if(c(he),i&&!S){const ie=he.find(G=>G.id===parseInt(i));ie&&_(ie)}}catch{V.error("Failed to load meetings.")}finally{d(!1)}},Te=async()=>{try{const Ue=await se.get("/users/all");p(Array.isArray(Ue.data)?Ue.data:[])}catch(Ue){console.error(Ue)}};f.useEffect(()=>{async function Ue(){try{const _e=await se.get("/auth/me");be(_e.data)}catch(_e){console.error("Failed to fetch current user",_e)}}Ue()},[]),f.useEffect(()=>{oe(),Te()},[]);const ue=Ue=>v(Ue.target.value),Oe=f.useMemo(()=>{const Ue=x.trim().toLowerCase(),_e=j.trim().toUpperCase();return l.filter(he=>{const ie=[he?.activity,he?.description,he?.relatedTo,he?.assignedTo],G=Ue===""||ie.some(ve=>ve&&ve.toString().toLowerCase().includes(Ue)),X=_e==="FILTER BY STATUS"||Tb(he.status||"PENDING")===_e;return G&&X})},[l,x,j]),xe=f.useMemo(()=>{const Ue=(k-1)*A;return Oe.slice(Ue,Ue+A)},[Oe,k,A]),le=()=>{w(!1),O(qA),D(!1),W(null),Q(!1)},Fe=()=>{O(qA),D(!1),W(null),w(!0)},ke=Ue=>{let _e="";if(Ue.meet_assign_to?.id)_e=String(Ue.meet_assign_to.id);else if(Ue.assignedTo){const Re=h.find(qe=>`${qe.first_name} ${qe.last_name}`===Ue.assignedTo);_e=Re?String(Re.id):""}const he=Re=>{if(!Re)return"";try{const qe=new Date(Re),rt=qe.getTimezoneOffset()*6e4;return new Date(qe.getTime()-rt).toISOString().slice(0,16)}catch{return""}};let ie="Lead",G="",X="Contact",ve="";if(Ue.lead)ie="Lead",G=String(Ue.lead.id);else if(Ue.account)ie="Account",G=String(Ue.account.id),Ue.contact?(X="Contact",ve=String(Ue.contact.id)):Ue.deal?(X="Deal",ve=String(Ue.deal.id)):Ue.quote&&(X="Quote",ve=String(Ue.quote.id));else if(Ue.relatedType||Ue.related_type){const Re=Ue.relatedType||Ue.related_type,qe=Ue.related_to||Ue.relatedToId;Re==="Lead"?(ie="Lead",G=String(qe)):(ie="Account",G=Ue.account_id?String(Ue.account_id):"")}const $e={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Le=Tb(Ue.status),me=$e[Le]||"Planned";O({subject:Ue.subject||Ue.activity||"",location:Ue.location||"",startTime:he(Ue.start_time||Ue.startTime),endTime:he(Ue.end_time||Ue.endTime),status:me,notes:Ue.description||Ue.notes||"",assignedTo:_e,relatedType1:ie,relatedTo1:G,relatedType2:X,relatedTo2:ve}),D(!0),W(Ue.id),_(null),w(!0)},He=Ue=>{if(!Ue.subject?.trim())return V.error("Subject is required.");if(!Ue.startTime)return V.error("Start time is required.");if(Ue.endTime&&!(new Date(Ue.endTime)-new Date(Ue.startTime)>0))return V.error("End time must be after start time.");Ue.relatedType1,Ue.relatedTo1,Ue.relatedType1==="Account"&&Ue.relatedType2&&Ue.relatedTo2&&(Ue.relatedType2,Ue.relatedTo2);const _e={...Ue,assignedTo:parseInt(Ue.assignedTo),relatedTo1:parseInt(Ue.relatedTo1),relatedTo2:parseInt(Ue.relatedTo2)},he=I&&H?"update":"create";Y({title:he==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${he} "${_e.subject}"?`,confirmLabel:he==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:he,payload:_e,targetId:H,name:_e.subject}})},Xe=async()=>{if(!J?.action)return;const{type:Ue,payload:_e,targetId:he,name:ie}=J.action;we(!0);try{Ue==="create"?(Q(!0),await se.post("/meetings/create",_e),V.success(`Meeting "${ie}" created.`),le(),await oe()):Ue==="update"?(Q(!0),await se.put(`/meetings/${he}`,_e),V.success(`Meeting "${ie}" updated.`),le(),await oe()):Ue==="delete"?(await se.delete(`/meetings/${he}`),V.success(`Meeting "${ie}" archived.`),S?.id===he&&_(null),await oe()):Ue==="bulk-delete"&&(await se.post("/meetings/sales/bulk-delete",{meeting_ids:J.action.meetingIds}),V.success(`Successfully archived ${J.action.meetingIds.length} meeting(s)`),Ne([]),await oe())}catch(G){const X=G.response?.data?.detail||"Action failed.";V.error(typeof X=="string"?X:JSON.stringify(X)),console.error(X)}finally{Q(!1),we(!1),Y(null)}},it=Ue=>{Ve("single")},ze=()=>{const Ue=xe.filter(_e=>_e.created_by===de?.id);pe.length===Ue.length&&Ue.length>0?Ne([]):Ne(Ue.map(_e=>_e.id))},at=Ue=>{Ne(_e=>_e.includes(Ue)?_e.filter(he=>he!==Ue):[..._e,Ue])},Ve=Ue=>{if(Ue==="single"){const _e=S.subject||"this meeting";Y({title:"Archive Meeting",message:`Are you sure you want to archive "${_e}"?`,confirmLabel:"Archive Meeting",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:S.id,name:_e}})}else if(Ue==="bulk"){if(pe.length===0)return;Y({title:"Archive Meetings",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:pe.length})," selected meetings?"]}),confirmLabel:`Archive ${pe.length} meeting(s)`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",meetingIds:pe}})}},Ze=()=>{Ve("bulk")},Je=async(Ue,_e)=>{try{await se.put(`/meetings/${Ue}`,{status:_e}),V.success("Status updated"),oe(),_(null)}catch{V.error("Failed to update status")}};return o&&i?S?a.jsx(vd,{meeting:S,onClose:()=>{_(null),e("/admin/dashboard")},onEdit:ke,onDelete:it,onStatusUpdate:Je,currentUser:de,isSalesView:!0}):a.jsx(Wt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[u&&a.jsx(Wt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Dt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Fe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(ta,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:x,onChange:ue,className:"w-full outline-none"})]}),a.jsxs("select",{value:j,onChange:Ue=>b(Ue.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:xe.length>0&&xe.filter(Ue=>Ue.created_by===de?.id).every(Ue=>pe.includes(Ue.id))&&xe.some(Ue=>Ue.created_by===de?.id),onChange:ze,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:pe.length>0?a.jsx("button",{onClick:Ze,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${pe.length} selected meetings`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:xe.length>0?xe.map(Ue=>a.jsxs("tr",{onClick:()=>_(Ue),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 text-center",onClick:_e=>_e.stopPropagation(),children:de&&Ue.created_by===de.id?a.jsx("input",{type:"checkbox",checked:pe.includes(Ue.id),onChange:()=>at(Ue.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:_e=>_e.stopPropagation()}):null}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:Ue.subject}),a.jsxs("td",{className:"py-3 px-4",children:[Ue.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ue.lead.title}),Ue.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ue.account.name}),Ue.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[Ue.contact.first_name," ",Ue.contact.last_name]}),Ue.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ue.deal.name}),Ue.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:cUe(Ue.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4",children:dUe(Ue.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[Ue.meet_assign_to.first_name," ",Ue.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${uUe(Tb(Ue.status))}`,children:Tb(Ue.status).replace("_"," ")})}),a.jsx("td",{className:"py-3 px-4"})]},Ue.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(la,{totalItems:Oe.length,pageSize:A,currentPage:k,onPrev:()=>T(Ue=>Math.max(1,Ue-1)),onNext:()=>T(Ue=>Ue+1),onPageSizeChange:Ue=>{E(Ue),T(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),N&&a.jsx(T1,{onClose:le,formData:M,setFormData:O,isEditing:I,onSubmit:He,isSubmitting:z||re,users:h,currentUser:n}),S&&a.jsx(vd,{meeting:S,onClose:()=>_(null),onEdit:ke,onDelete:it,onStatusUpdate:Je,currentUser:de,isSalesView:!0}),J&&a.jsx(fUe,{open:!0,title:J.title,message:J.message,confirmLabel:J.confirmLabel,variant:J.variant,onConfirm:Xe,onCancel:()=>Y(null),loading:re})]})};function fUe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const hUe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],gUe=e=>e?String(e).toUpperCase():"",hf=e=>{const t=gUe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},GA=e=>{const t=hf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},b8=e=>{switch(hf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},WA=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},v8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function pUe(){const[e,t]=f.useState(!1),[n,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(null),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(!1),[_,k]=f.useState(!1),[T,A]=f.useState("PLANNED"),[E,M]=f.useState(!1),[O,I]=f.useState(!1),[D,H]=f.useState(1),[W,z]=f.useState(10),[Q,J]=f.useState(null),[Y,re]=f.useState([]),[we,Z]=f.useState(null),{comments:ne,addComment:pe,refresh:Ne}=kn({relatedType:"call",relatedId:n?.id});f.useEffect(()=>{n?.id&&Ne()},[n?.id,Ne]),Us();const de=Tt(),be=Jt(),{user:oe}=Gt(),Te=oe?.role==="Sales",Oe={subject:"",call_time:(()=>{const ge=new Date,ye=ge.getFullYear(),Pe=String(ge.getMonth()+1).padStart(2,"0"),Ce=String(ge.getDate()).padStart(2,"0");return`${ye}-${Pe}-${Ce}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[xe,le]=f.useState(Oe);f.useEffect(()=>{e&&!v&&Te&&oe&&!xe.assigned_to&&le(ge=>({...ge,assigned_to:oe.id}))},[e,v,oe,Te]),f.useEffect(()=>{const ge=be.state,ye=ge?.callID;if(ye&&!ge?.openCallModal){J(ye),de(be.pathname,{replace:!0,state:{}});return}!ge?.openCallModal||!ge?.initialCallData||ge.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ge.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),le(Pe=>({...Pe,...ge.initialCallData,relatedTo1:ge.initialCallData.relatedTo1?String(ge.initialCallData.relatedTo1):"",relatedTo2:ge.initialCallData.relatedTo2?String(ge.initialCallData.relatedTo2):""})),de(be.pathname,{replace:!0,state:{}}))},[be.state,o]),f.useEffect(()=>{if(Q&&d.length>0&&!O){const ge=d.find(ye=>ye.id===Q);ge?s(ge):V.error("Call not found."),J(null)}},[Q,d,O]);const Fe=async()=>{try{I(!0);const ge=await se.get("/calls/admin/fetch-all"),Pe=[...Array.isArray(ge.data)?ge.data:[]].sort((Ce,Qe)=>{const F=Ce?.created_at?new Date(Ce.created_at):0;return(Qe?.created_at?new Date(Qe.created_at):0)-F});h(Pe)}catch(ge){console.error("Error fetching calls:",ge),V.error("Failed to load calls")}finally{I(!1)}},ke=async()=>{try{const ge=await se.get("/users/all");x(ge.data)}catch(ge){console.error("Error fetching users: ",ge)}};f.useEffect(()=>{async function ge(){try{const ye=await se.get("/auth/me");Z(ye.data)}catch(ye){console.error("Failed to fetch current user",ye)}}ge()},[]),f.useEffect(()=>{ke(),Fe()},[]);const He=[],Xe="",it="Filter by Status",ze="Filter by Users",at=d,Ve=f.useMemo(()=>{const ge=(D-1)*W;return at.slice(ge,ge+W)},[at,D,W]),Ze=d.length,Je=d.filter(ge=>hf(ge.status)==="PLANNED").length,Ue=d.filter(ge=>hf(ge.status)==="HELD").length,_e=d.filter(ge=>hf(ge.status)==="NOT_HELD").length,he=[{title:"Total",value:Ze,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Je,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:Ue,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:_e,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[ie,G]=f.useState("Overview"),X=ge=>{const{name:ye,value:Pe}=ge.target;le(Ce=>{const Qe={...Ce,[ye]:Pe};return ye==="relatedType1"&&(Qe.relatedTo1="",Pe==="Lead"?(Qe.relatedType2=null,Qe.relatedTo2=null,u([])):Pe==="Account"&&(Qe.relatedType2="Contact")),ye==="relatedType2"&&(Qe.relatedTo2=""),Qe})};f.useEffect(()=>{const ge=async()=>{try{l([]);let ye;xe.relatedType1==="Lead"?ye=await se.get("/leads/admin/getLeads"):xe.relatedType1==="Account"&&(ye=await se.get("/accounts/admin/fetch-all"));let Pe=[];if(ye&&Array.isArray(ye.data)?Pe=ye.data:Pe=[],v&&xe.relatedTo1)try{let Ce;xe.relatedType1==="Lead"?Ce=await se.get(`/leads/get/${xe.relatedTo1}`):xe.relatedType1==="Account"&&(Ce=await se.get(`/accounts/get/${xe.relatedTo1}`)),Ce&&Ce.data&&(Pe.some(F=>String(F.id)===String(xe.relatedTo1))||(Pe=[Ce.data,...Pe]))}catch(Ce){console.error("Error fetching specific related item:",Ce)}l(Pe)}catch(ye){console.error("Error fetching data:",ye),l([])}};xe.relatedType1&&ge()},[xe.relatedType1,v,xe.relatedTo1]),f.useEffect(()=>{const ge=async()=>{try{u([]);let ye;if(xe.relatedType1==="Account"&&xe.relatedTo1)xe.relatedType2==="Contact"?ye=await se.get(`/contacts/from-acc/${xe.relatedTo1}`):xe.relatedType2==="Deal"?ye=await se.get(`/deals/from-acc/${xe.relatedTo1}`):xe.relatedType2==="Quote"&&(ye=await se.get(`/quotes/from-acc/${xe.relatedTo1}`));else{u([]);return}ye&&Array.isArray(ye.data)?u(ye.data):u([])}catch(ye){console.error("Error fetching data:",ye),u([])}};xe.relatedType2&&ge()},[xe.relatedType2,xe.relatedTo1,xe.relatedType1]);const[ve,$e]=f.useState(!1),Le=ge=>{ge.preventDefault(),$e(!0);const ye=xe.subject;if(!ye||ye.trim()===""){V.error("Subject is required.");return}if(!xe.relatedTo1){V.error(`Please select a ${xe.relatedType1||"Lead/Account"}.`);return}if(!xe.assigned_to){V.error("Subject is required.");return}const Ce={...xe,duration_minutes:xe.duration_minutes?parseInt(xe.duration_minutes,10):null,relatedTo1:xe.relatedTo1?parseInt(xe.relatedTo1,10):null,relatedTo2:xe.relatedType1==="Lead"?null:xe.relatedTo2?parseInt(xe.relatedTo2,10):null,relatedType2:xe.relatedType1==="Lead"?null:xe.relatedType2,assigned_to:xe.assigned_to?parseInt(xe.assigned_to,10):null},Qe=v&&b?"update":"create",F=(xe.subject||"").trim()||"Untitled Call";i({title:Qe==="create"?"Confirm New Call":"Confirm Update",message:Qe==="create"?`Create "${F}"?`:`Save changes to "${F}"?`,confirmLabel:Qe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Ce,targetId:b||null,name:F}})},me=ge=>s(ge),Re=()=>{t(!1),j(!1),N(null)},qe=async()=>{if(!r?.action){i(null);return}const{action:ge}=r,{type:ye,payload:Pe,targetId:Ce,name:Qe,callIds:F}=ge;k(!0);try{if(ye==="bulk-delete")await se.post("/calls/bulk-delete",{call_ids:F}),V.success(`Successfully archived ${F.length} call(s).`),re([]),await Fe();else if(ye==="create")S(!0),await se.post("/calls/create",Pe),V.success(`Call "${Qe}" created successfully.`),t(!1),le(Oe),j(!1),N(null),await Fe();else if(ye==="update"){if(!Ce)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Ce}`,Pe),V.success(`Call "${Qe}" updated successfully.`),t(!1),le(Oe),j(!1),N(null),await Fe()}else if(ye==="delete"){if(!Ce)throw new Error("Missing call identifier for archival.");await se.delete(`/calls/${Ce}`),V.success(`Call "${Qe}" archived successfully.`),n?.id===Ce&&s(null),await Fe()}}catch(q){const fe=ye==="create"?"Failed to create call. Please review the details and try again.":ye==="update"?"Failed to update call. Please review the details and try again.":"Failed to archive call. Please try again.",te=q?.response?.data?.detail||fe;V.error(te)}finally{(ye==="create"||ye==="update")&&S(!1),k(!1),i(null)}},rt=()=>{_||i(null)},st=async()=>{if(n?.id)try{M(!0),await se.put(`/calls/${n.id}`,{status:T}),V.success(`Status updated to ${GA(T)}`),h(ge=>Array.isArray(ge)?ge.map(ye=>ye.id===n.id?{...ye,status:T}:ye):ge),s(null)}catch(ge){const ye=ge.response?.data?.detail||"Failed to update status.";V.error(ye)}finally{M(!1)}},Ie=()=>{const ge=Ve.filter(ye=>ye.call_creator?.id===we?.id);Y.length===ge.length&&ge.length>0?re([]):re(ge.map(ye=>ye.id))},ot=ge=>{re(ye=>ye.includes(ge)?ye.filter(Pe=>Pe!==ge):[...ye,ge])},Ct=ge=>{if(ge==="single"){const ye=n.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${ye}"? This call will be hidden from your view but admins can still see it.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"warning",action:{type:"delete",targetId:n.id,name:ye}})}else if(ge==="bulk"){if(Y.length===0)return;i({title:"Archive Calls",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:Y.length})," selected calls? These calls will be hidden from your view but admins can still see them."]}),confirmLabel:`Archive ${Y.length} call(s)`,cancelLabel:"Cancel",variant:"warning",action:{type:"bulk-delete",callIds:Y}})}},kt=()=>{Ct("bulk")};f.useEffect(()=>{n&&A(hf(n.status))},[n]);const At=n?a.jsxs("div",{id:"callModalBackdrop",onClick:ge=>ge.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[O&&a.jsx(Wt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${b8(n.status)}`,children:GA(n.status)})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:n.call_creator?.id===we?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ge=F=>{if(!F)return"";const q=new Date(F),fe=q.getFullYear(),te=String(q.getMonth()+1).padStart(2,"0"),B=String(q.getDate()).padStart(2,"0"),ce=String(q.getHours()).padStart(2,"0"),De=String(q.getMinutes()).padStart(2,"0");return`${fe}-${te}-${B}T${ce}:${De}`},ye=n.lead?"Lead":n.account?"Account":"Lead",Pe=n.lead?n.lead.id:n.account?n.account.id:null,Ce=ye==="Lead"?null:n.contact?"Contact":n.deal?"Deal":n.quote?"Quote":"Contact",Qe=ye==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:n.quote?n.quote.id:null;le({subject:n.subject||"",call_time:ge(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:ye,relatedType2:Ce,relatedTo1:Pe?String(Pe):"",relatedTo2:Qe?String(Qe):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),j(!0),N(n.id),s(null),t(!0)},children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Ct("single"),children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ge=>a.jsx("button",{onClick:()=>G(ge),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${ie===ge?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ge},ge))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[ie==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(fo,{label:"Call Time",value:v8(n.call_time)}),a.jsx(fo,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(fo,{label:"Direction",value:n.direction||"--"}),a.jsx(fo,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(fo,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(fo,{label:"Account",value:n.account.name}),n.contact&&a.jsx(fo,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(fo,{label:"Deal",value:n.deal.name}),n.quote&&a.jsx(fo,{label:"Quote",value:WA(n.quote.quote_id)}),a.jsx(fo,{label:"Created At",value:v8(n.created_at)})]})}),ie==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]}),a.jsx(Tn,{comments:ne,onAddComment:pe})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:ge=>A(ge.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:st,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,jt=e?a.jsx("div",{id:"modalBackdrop",onClick:ge=>ge.target.id==="modalBackdrop"&&Re(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{Re(),$e(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:Le,noValidate:!0,children:[a.jsx(yUe,{label:"Subject",className:"md:col-span-2",name:"subject",value:xe.subject,onChange:X,isSubmitted:ve,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:X,value:xe.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(VA,{items:Array.isArray(o)?o:[],value:xe.relatedTo1??"",placeholder:`Search ${xe.relatedType1||"here"}...`,getLabel:ge=>xe.relatedType1==="Lead"?ge.title:ge.name??"",onChange:ge=>le(ye=>({...ye,relatedTo1:ge})),required:!0,isSubmitted:ve,disabled:w})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:X,value:xe.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:xe.relatedType1==="Lead"||w,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]}),a.jsx(VA,{disabled:xe.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:xe.relatedTo2??"",placeholder:xe.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${xe.relatedType2||"Contact"}...`:`No ${xe.relatedType2||""} data found`,getLabel:ge=>xe.relatedType2==="Contact"?`${ge.first_name??""} ${ge.last_name??""}`.trim():xe.relatedType2==="Quote"?WA(ge.quote_id)??"":ge.name??"",onChange:ge=>le(ye=>({...ye,relatedTo2:ge}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:xe.call_time,onChange:X,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:xe.duration_minutes,onChange:X,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(VA,{items:Array.isArray(p)?p:[],value:xe.assigned_to??"",placeholder:"Search an account...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>le(ye=>({...ye,assigned_to:ge})),disabled:Te,required:!0,isSubmitted:ve})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:X,value:xe.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:X,value:xe.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(bUe,{className:"col-span-2",label:"Notes",value:xe.notes,onChange:X,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{Re(),$e(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{le(Oe),j(!1),N(null),t(!0),$e(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:he.map(ge=>a.jsx(xUe,{...ge},ge.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:Xe})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:it,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),hUe.map(ge=>a.jsx("option",{value:ge.value,children:ge.label},ge.value))]}),a.jsxs("select",{defaultValue:ze,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),He.map(ge=>a.jsx("option",{value:ge.name,children:ge.name},ge.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 text-center w-12",children:a.jsx("input",{type:"checkbox",checked:Ve.length>0&&Ve.filter(ge=>ge.call_creator?.id===we?.id).every(ge=>Y.includes(ge.id))&&Ve.some(ge=>ge.call_creator?.id===we?.id),onChange:Ie,className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:Y.length>0?a.jsx("button",{onClick:kt,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${Y.length} selected calls`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:O?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10",children:a.jsx(Wt,{message:"Loading calls..."})})}):Ve.length>0?Ve.map(ge=>a.jsxs("tr",{onClick:()=>me(ge),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4 align-top text-center",onClick:ye=>ye.stopPropagation(),children:ge.call_creator?.id===we?.id?a.jsx("input",{type:"checkbox",checked:Y.includes(ge.id),onChange:()=>ot(ge.id),className:"form-checkbox h-4 w-4 text-blue-600 rounded focus:ring-blue-500 border-gray-300",onClick:ye=>ye.stopPropagation()}):null}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:ge.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[ge.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.lead.title}),ge.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.account.name}),ge.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ge.contact.first_name," ",ge.contact.last_name]}),ge.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.deal.name}),ge.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:WA(ge.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ge.call_time?new Date(ge.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:ge?.call_assign_to?`${ge.call_assign_to.first_name} ${ge.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${b8(ge.status)}`,children:GA(ge.status)})}),a.jsx("td",{})]},ge.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(la,{totalItems:at.length,pageSize:W,currentPage:D,onPrev:()=>H(ge=>Math.max(ge-1,1)),onNext:()=>H(ge=>Math.min(ge+1,Math.max(1,Math.ceil(at.length/W)||1))),onPageSizeChange:ge=>{z(ge),H(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),At,jt,r&&a.jsx(vUe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,variant:r.variant,onConfirm:qe,onCancel:rt,loading:_})]})}function xUe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function yUe({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!n;return a.jsxs("div",{className:u,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function bUe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function fo({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function vUe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="warning"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function VA({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function wUe({toggleSidebar:e}){const[t,n]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef(null),h=Jt(),p=Tt(),{logout:x}=Ks(),{user:v,fetchUser:j}=Gt(),N={"/manager/dashboard":"Dashboard","/manager/accounts":"Accounts","/manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/manager/Audit":"Audit","/manager/targets":"Targets","/manager/leads":"Leads","/manager/quotes":"Quotes","/manager/users":"Users","/manager/deals":"Deals"}[h.pathname]||"Manager Panel";return f.useEffect(()=>{j()},[]),f.useEffect(()=>{const w=()=>j();return window.addEventListener("userProfileUpdated",w),()=>window.removeEventListener("userProfileUpdated",w)},[j]),f.useEffect(()=>{if(!v?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=w?"localhost:8000":window.location.host,k=`${S}//${_}/ws/notifications?user_id=${v.id}`,T=new WebSocket(k);return T.onmessage=A=>{const E=JSON.parse(A.data);o(M=>[E,...M]),c(M=>M+1)},()=>T.close()},[v?.id]),f.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&n(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Jf,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:N})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(ux,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[a.jsx("button",{onClick:()=>{p("/manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-100 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function jUe(){const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Jt(),{user:u}=Gt();f.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/manager/accounts","/manager/contacts","/manager/leads","/manager/deals","/manager/quotes","/manager/targets","/manager/meetings","/manager/manage-account"].includes(c.pathname),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ut,{to:"/manager/dashboard",className:({isActive:x})=>x?d:h,children:[a.jsx(mx,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-lg"}),"Sales"]}),a.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/manager/accounts",className:({isActive:x})=>x?d:h,children:[a.jsx(jd,{})," Accounts"]}),a.jsxs(Ut,{to:"/manager/contacts",className:({isActive:x})=>x?d:h,children:[a.jsx(sa,{})," Contacts"]}),a.jsxs(Ut,{to:"/manager/leads",className:({isActive:x})=>x?d:h,children:[a.jsx(Xa,{})," Leads"]}),a.jsxs(Ut,{to:"/manager/deals",className:({isActive:x})=>x?d:h,children:[a.jsx(na,{})," Deals"]}),a.jsxs(Ut,{to:"/manager/quotes",className:({isActive:x})=>x?d:h,children:[a.jsx(ra,{})," Quotes"]}),a.jsxs(Ut,{to:"/manager/targets",className:({isActive:x})=>x?d:h,children:[a.jsx(mr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"text-lg"}),"Activity"]}),a.jsx(Lt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/manager/tasks",className:({isActive:x})=>x?d:h,children:[a.jsx(Yt,{})," Tasks"]}),a.jsxs(Ut,{to:"/manager/meetings",className:({isActive:x})=>x?d:h,children:[a.jsx(Dt,{})," Meetings"]}),a.jsxs(Ut,{to:"/manager/calls",className:({isActive:x})=>x?d:h,children:[a.jsx(zs,{})," Calls"]}),a.jsxs(Ut,{to:"/manager/audit",className:({isActive:x})=>x?d:h,children:[a.jsx(ks,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ut,{to:"/manager/territory",className:({isActive:x})=>x?d:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ec,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(CL,{className:"text-lg"}),"Settings"]}),a.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/manager/users",className:({isActive:x})=>x?d:h,children:[a.jsx(rn,{})," Users"]}),a.jsxs(Ut,{to:"/manager/manage-account",className:({isActive:x})=>x?d:h,children:[a.jsx(sa,{})," Your Profile"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(wUe,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(nx,{})})]})]})}const NUe=e=>a.jsx(Kt,{...e}),CUe=e=>a.jsx(jd,{...e}),gJ=e=>a.jsx(Vs,{...e}),SUe=e=>a.jsx(dx,{...e}),_Ue=e=>a.jsx(fj,{...e}),AUe=e=>a.jsx(Dt,{...e}),TUe=e=>a.jsx(Mt,{...e}),kUe=e=>a.jsx(gj,{...e}),pJ=e=>a.jsx(hj,{...e}),EUe=e=>a.jsx(rn,{...e}),xJ=e=>a.jsx(sa,{...e}),LUe=e=>a.jsx(Xa,{...e}),yJ=e=>a.jsx(na,{...e}),PUe=e=>a.jsx(ra,{...e}),bJ=e=>a.jsx(mr,{...e}),DUe=e=>a.jsx(Qa,{...e}),OUe=e=>a.jsx(Dt,{...e}),MUe=e=>a.jsx(zs,{...e}),IUe=e=>a.jsx(ec,{...e}),$Ue=e=>a.jsx(ks,{...e}),vJ=(e,t="")=>{const n=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(n).replace(/^/,`${t} `)},RUe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},zUe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},FUe=e=>{switch(e){case"call":return{Icon:TUe,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:kUe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:AUe,color:"text-blue-500",bgColor:"bg-blue-100"}}},UUe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},BUe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=Tt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:CUe,label:"Account"},{icon:xJ,label:"Contact"},{icon:LUe,label:"Leads"},{icon:yJ,label:"Deals"},{icon:PUe,label:"Quotes"},{icon:bJ,label:"Target"},{icon:DUe,label:"Task"},{icon:OUe,label:"Meeting"},{icon:MUe,label:"Call"},{icon:$Ue,label:"Audit"},{icon:IUe,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h.target.value),o(h.target.value.trim().length>0)},d=h=>{s&&s(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(NUe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/manager/accounts");break;case"Contact":r("/manager/contacts");break;case"Leads":r("/manager/leads");break;case"Deals":r("/manager/deals");break;case"Quotes":r("/manager/quotes");break;case"Target":r("/manager/targets");break;case"Task":r("/manager/tasks");break;case"Meeting":r("/manager/meetings");break;case"Call":r("/manager/calls");break;case"Audit":r("/manager/audit");break;case"Territory":r("/manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},HUe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=Tt(),o=d=>{if(!d)return"Unknown";const h=new Date(d),x=new Date-h,v=Math.floor(x/6e4),j=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:j<24?`${j} hour${j>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||n||"System",u=o(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},qUe=({logs:e,loading:t})=>{const n=Tt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(pJ,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(HUe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},GUe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),WUe=({revenueData:e,loading:t})=>{const n=Tt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const N=b.getMonth(),w=[],S=[];for(let _=0;_<=N;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((b,N)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",_=b.stage||"",k=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=b.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(k&&(u++,console.log(`Deal ${N+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let E=new Date(w);if(isNaN(E.getTime())){const M=String(w).split("T")[0];E=new Date(M+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=E.getFullYear(),O=E.getMonth()+1,I=`${M}-${String(O).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=T,c++,console.log(` Added deal ${b.id} to month ${I}: ${T}, total: ${l[I]}`),console.log(`  - Close date: ${w} -> Parsed: ${E.toISOString()} -> Month: ${I} (Year: ${M}, Month: ${O})`)}}catch(E){console.error("Error parsing deal date:",w,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(b=>parseInt(b.split("-")[0])),h=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const N=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[N]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${N}): ${w}`)}if(h.length>0){const b=Math.max(...h);if(b>p)for(let N=p+1;N<=b;N++)for(let w=0;w<12;w++){const S=`${N}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${N}`),v.push(_),_>0&&console.log(`Month ${s[w]} ${N} (${S}): ${_}`)}}const j=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:j,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:j}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(pJ,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?a.jsx(ih,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},YA=({title:e,items:t,children:n,onSeeAll:s})=>{const r=Tt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/manager/leads","Latest Deals":"/manager/deals","Upcoming Activities":"/manager/tasks"};o[e]&&r(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},VUe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const o=Tt(),{text:l,bg:c}=zUe(s||"Website"),u=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,N=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return N<60?`${N} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=u(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:d}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},YUe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Tt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=RUe(d),x=parseFloat(t||0),v=o?x>=o?"up":"down":"up",j=v==="up"?SUe:_Ue,b=v==="up"?"text-green-400":"text-red-400",N=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:N}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:vJ(x,l)}),a.jsx(j,{size:16,className:`${b} mt-1`})]})]})})},QUe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=Tt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=FUe(h),{text:j,bg:b}=UUe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,O=Math.floor(M/864e5);return O===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",k=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/manager/meetings/info?id=${o}`)):u("/manager/tasks"):u(h==="call"?`/manager/calls/info?id=${o}`:h==="meeting"?`/manager/meetings/info?id=${o}`:"/manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(gJ,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(xJ,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${j} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},KUe=()=>{const e=Tt(),{user:t}=Gt(),n=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState([]),[x,v]=f.useState([]),[j,b]=f.useState([]),[N,w]=f.useState(!0),[S,_]=f.useState(null),[k,T]=f.useState(""),[A,E]=f.useState([]),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState([]),[z,Q]=f.useState(0),[J,Y]=f.useState(new Date),re=f.useRef(null),we=f.useRef(null),Z=f.useMemo(()=>{try{if(!k.trim())return[];const de=k.toLowerCase().trim(),be=[];return Array.isArray(A)&&A.forEach(oe=>{const Te=`${oe.first_name||""} ${oe.last_name||""}`.trim().toLowerCase(),ue=(oe.company_name||"").toLowerCase(),Oe=(oe.email||"").toLowerCase(),xe=(oe.phone||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de)||xe.includes(de))&&be.push({id:oe.id,name:`${oe.first_name||""} ${oe.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:oe.company_name||"No company",route:`/manager/leads/${oe.id}`})}),Array.isArray(M)&&M.forEach(oe=>{const Te=(oe.name||"").toLowerCase(),ue=(oe.account?.name||"").toLowerCase(),Oe=(oe.description||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de))&&be.push({id:oe.id,name:oe.name||"Unnamed Deal",type:"Deal",details:oe.account?.name||"No account",route:`/manager/deals/info?id=${oe.id}`})}),Array.isArray(I)&&I.forEach(oe=>{const Te=(oe.name||"").toLowerCase(),ue=(oe.email||"").toLowerCase(),Oe=(oe.phone||"").toLowerCase(),xe=(oe.website||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de)||xe.includes(de))&&be.push({id:oe.id,name:oe.name||"Unnamed Account",type:"Account",details:oe.email||oe.phone||"No contact info",route:"/manager/accounts"})}),be.slice(0,10)}catch(de){return console.error("Error in search:",de),[]}},[k,A,M,I]),ne=de=>{de.route&&(e(de.route),T(""))},pe=f.useCallback(async()=>{w(!0),_(null);try{const[de,be,oe,Te,ue,Oe,xe,le]=await Promise.all([se.get("/leads/admin/getLeads").catch(me=>(console.error("Error fetching leads:",me),{data:[]})),se.get("/deals/admin/fetch-all").catch(me=>(console.error("Error fetching deals:",me),{data:[]})),se.get("/accounts/admin/fetch-all").catch(me=>(console.error("Error fetching accounts:",me),{data:[]})),se.get("/tasks/all").catch(me=>(console.error("Error fetching tasks:",me),{data:[]})),se.get("/meetings/admin/fetch-all").catch(me=>(console.error("Error fetching meetings:",me),{data:[]})),se.get("/calls/admin/fetch-all").catch(me=>(console.error("Error fetching calls:",me),{data:[]})),se.get("/logs/read-all").catch(me=>(console.error("Error fetching logs:",me),{data:[]})),se.get("/targets/admin/fetch-all").catch(me=>(console.error("Error fetching targets:",me),{data:[]}))]),Fe=Array.isArray(de.data)?de.data:[],ke=Array.isArray(be.data)?be.data:[],He=Array.isArray(oe.data)?oe.data:[],Xe=Array.isArray(Te.data)?Te.data:[],it=Array.isArray(ue.data)?ue.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],at=Array.isArray(xe.data)?xe.data:[],Ve=Array.isArray(le.data)?le.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),E(Fe),O(ke),D(He),W(Ve);const Ze=Ve.reduce((me,Re)=>{const qe=Re.amount||Re.value||Re.target_amount||0,rt=parseFloat(typeof qe=="string"?qe.replace(/[^\d.-]/g,""):qe);return me+(Number.isFinite(rt)?rt:0)},0);Q(Ze);const Je=Fe.filter(me=>me.status&&!["Lost","Converted"].includes(me.status)).length,Ue=Xe.filter(me=>!me.dueDate||me.status==="Completed"?!1:new Date(me.dueDate)<new Date).length;r({activeLeads:Je,totalDeals:ke.length,activeAccounts:He.length,overdueTasks:Ue});const _e=[...Fe].sort((me,Re)=>new Date(Re.created_at||0)-new Date(me.created_at||0)).slice(0,5);o(_e);const he=[...ke].sort((me,Re)=>new Date(Re.created_at||0)-new Date(me.created_at||0)).slice(0,5);c(he);const ie=new Date,G=[];ze.forEach(me=>{const Re=me.due_date||me.call_time,qe=(me.status||"").toUpperCase();if(Re){const rt=new Date(Re);qe==="COMPLETED"||qe==="MISSED"||qe==="NOT_HELD"||qe==="HELD"||G.push({type:"Call",title:me.subject||"Untitled Call",assignedTo:me.assigned_to||(me.call_assign_to?`${me.call_assign_to.first_name||""} ${me.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Re,priority:(me.priority||"MEDIUM").toUpperCase(),id:me.id,activityType:"call",fullData:me})}}),it.forEach(me=>{const Re=me.dueDate||me.start_time,qe=(me.status||"").toUpperCase();if(Re){const rt=new Date(Re);qe==="COMPLETED"||qe==="CANCELLED"||qe==="DONE"||G.push({type:"Meeting",title:me.subject||me.activity||"Untitled Meeting",assignedTo:me.assignedTo||(me.meet_assign_to?`${me.meet_assign_to.first_name||""} ${me.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Re,priority:(me.priority||"MEDIUM").toUpperCase(),id:me.id,activityType:"meeting",fullData:me})}});const X={HIGH:1,MEDIUM:2,LOW:3},ve=G.sort((me,Re)=>{const qe=X[me.priority]||3,rt=X[Re.priority]||3;if(qe!==rt)return qe-rt;const st=new Date(me.scheduledDate||0),Ie=new Date(Re.scheduledDate||0);return st-Ie}).slice(0,5);d(ve),p(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const $e=ke.filter(me=>(me.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",$e.length),$e.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),$e.forEach((me,Re)=>{let qe=me.amount;qe&&typeof qe=="object"?qe.toString?qe=parseFloat(qe.toString()):qe=parseFloat(qe):qe=parseFloat(qe)||0,console.log(`Deal ${Re+1}:`,{id:me.id,name:me.name,stage:me.stage,stage_upper:(me.stage||"").toUpperCase(),amount:me.amount,amount_parsed:qe,amount_type:typeof me.amount,close_date:me.close_date,close_date_type:typeof me.close_date,close_date_value:me.close_date?new Date(me.close_date):null,has_close_date:!!me.close_date,has_amount:qe>0,all_keys:Object.keys(me),full_deal:me})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(me=>me.stage))),b(ke);const Le=[...at].sort((me,Re)=>new Date(Re.timestamp||0)-new Date(me.timestamp||0));v(Le)}catch(de){console.error("Error fetching dashboard data:",de),_("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("ManagerDashboard mounted, fetching data..."),pe(),re.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),pe(),Y(new Date)},3e4),()=>{re.current&&clearInterval(re.current)}),[pe]),f.useEffect(()=>{if(!t||!t.id)return;let de=0;const be=3;let oe=null;const Te=()=>{const ue=window.location.protocol==="https:"?"wss:":"ws:",Oe=window.location.hostname==="localhost"?"localhost:8000":window.location.host,xe=`${ue}//${Oe}/ws/notifications?user_id=${t.id}`;try{const le=new WebSocket(xe);we.current=le,le.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),de=0},le.onmessage=Fe=>{try{const ke=JSON.parse(Fe.data);console.log(" Real-time notification received:",ke),ke.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(ke.event)&&(console.log(" Refreshing dashboard due to:",ke.event),pe(),Y(new Date))}catch(ke){console.error("Error parsing WebSocket message:",ke)}},le.onerror=Fe=>{de===0&&console.warn(" WebSocket connection unavailable (this is optional)")},le.onclose=()=>{de<be&&(de++,oe=setTimeout(()=>{t&&t.id&&Te()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Te(),()=>{oe&&clearTimeout(oe),we.current&&(we.current.close(),we.current=null)}},[t,pe]);const Ne=[{icon:EUe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/manager/leads")},{icon:bJ,title:"Total Targets",value:vJ(z,n),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/manager/targets")},{icon:yJ,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/manager/deals")},{icon:gJ,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/manager/tasks")}];return console.log("ManagerDashboard rendering, loading:",N,"error:",S),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[N&&a.jsx(Wt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:S})}),a.jsx("div",{className:"mb-8",children:a.jsx(BUe,{searchQuery:k,onSearchChange:T,searchResults:Z,onSearchResultClick:ne})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Ne.map(de=>a.jsx(GUe,{...de,loading:N},de.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsx(qUe,{logs:x,loading:N}),a.jsx(gP,{currencySymbol:n})]}),a.jsx("div",{className:"mb-8",children:a.jsx(EN,{leads:A,deals:M,targets:H,currencySymbol:n,basePath:"/manager"})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(WUe,{revenueData:j,loading:N})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(YA,{title:"Latest Leads",children:i.length>0?i.map((de,be)=>a.jsx(VUe,{...de},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(YA,{title:"Latest Deals",children:N?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((de,be)=>a.jsx(YUe,{...de,currencySymbol:n},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(YA,{title:"Upcoming Activities",children:u.length>0?u.map((de,be)=>a.jsx(QUe,{...de},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},QA=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],kb={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},cr=e=>e?e.toUpperCase():"",KA=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",XUe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},ZUe=e=>{switch(cr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function JUe(){const e=Tt(),t=Jt(),{user:n}=Gt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(null),[h,p]=f.useState(null),[x,v]=f.useState(kb),[j,b]=f.useState(null),[N,w]=f.useState([]),[S,_]=f.useState(!1),[k,T]=f.useState([]),[A,E]=f.useState(null),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState("Filter by Status"),[z,Q]=f.useState(""),[J,Y]=f.useState(null),[re,we]=f.useState(!1),[Z,ne]=f.useState(1),[pe,Ne]=f.useState(10),[de,be]=f.useState("Overview"),[oe,Te]=f.useState(""),[ue,Oe]=f.useState(!1),[xe,le]=f.useState({}),[Fe,ke]=f.useState(null),[He,Xe]=f.useState(new Set),[it,ze]=f.useState(!1),{comments:at,addComment:Ve,refresh:Ze}=kn({relatedType:"account",relatedId:j?.id});f.useEffect(()=>{j?.id&&Ze()},[j?.id,Ze]);const Je=f.useCallback(async(L=null)=>{_(!0);try{const ee=await se.get("/accounts/admin/fetch-all"),Me=[...Array.isArray(ee.data)?ee.data:[]].sort((We,ft)=>{const St=We?.created_at||We?.updated_at||0,_t=ft?.created_at||ft?.updated_at||0;return new Date(_t)-new Date(St)});if(w(Me),L){const We=Me.find(ft=>ft.id===L);b(We||null)}}catch(ee){console.error(ee),w([]),ee.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch accounts. Please try again later.")}finally{_(!1)}},[b]),Ue=f.useCallback(async()=>{try{const L=await se.get("/users/all");T(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),_e=f.useCallback(async()=>{try{const L=await se.get("/territories/fetch");O(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load territories (permission denied).")}},[]),he=f.useCallback(async()=>{try{const L=await se.get("/accounts/admin/parent-companies");D(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load parent companies (permission denied).")}},[]),ie=f.useCallback(async L=>{try{const ee=await se.get(`/activities/accounts/${L}`);le(ee.data&&typeof ee.data=="object"?ee.data:{})}catch(ee){console.error(ee),ee.response?.status===404&&(console.warn("No activities found for this account."),le({}))}},[]);f.useEffect(()=>{Je(),Ue(),_e(),he()},[Je,Ue,_e,he]),f.useEffect(()=>{j&&Te(cr(j.status)||"PROSPECT")},[j]);const G=N.length,X=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="customer").length,[N]),ve=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="prospect").length,[N]),$e=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="partner").length,[N]),Le=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="active").length,[N]),me=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="inactive").length,[N]),Re=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="former").length,[N]),qe=f.useMemo(()=>[{title:"Total",value:G,icon:rn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:X,icon:Ro,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ve,icon:Xa,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:$e,icon:sa,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Le,icon:Ro,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:me,icon:zo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Re,icon:zo,color:"text-orange-600",bgColor:"bg-orange-100"}],[G,X,ve,$e,Le,me,Re]),rt=f.useMemo(()=>{const L=z.trim().toLowerCase(),ee=H.trim().toUpperCase();return N.filter(Ee=>{const Me=[Ee?.name,Ee?.website,Ee?.industry,Ee?.territory?.name,Ee?.phone_number],We=L===""||Me.some(Vt=>Vt==null?!1:Vt.toString().toLowerCase().includes(L)),ft=ee==="FILTER BY STATUS"||cr(Ee.status)===ee,_t=cr(Ee.status)==="INACTIVE"&&ee!=="INACTIVE";return We&&ft&&!_t})},[N,z,H]),st=Math.max(1,Math.ceil(rt.length/pe)||1);f.useEffect(()=>{ne(1)},[z,H]),f.useEffect(()=>{ne(L=>{const ee=Math.max(1,Math.ceil(rt.length/pe)||1);return L>ee?ee:L})},[rt.length]);const Ie=f.useMemo(()=>{const L=(Z-1)*pe;return rt.slice(L,L+pe)},[rt,Z]);rt.length===0||(Z-1)*pe+1,Math.min(Z*pe,rt.length);const ot=()=>ne(L=>Math.max(L-1,1)),Ct=()=>ne(L=>Math.min(L+1,st)),kt=L=>{b(L),be("Overview"),Te(cr(L?.status)||"PROSPECT")},At=()=>b(null),jt=L=>{L.target.id==="accountModalBackdrop"&&!re&&At()},ge=()=>{r(!1),o(!1),p(null),v(kb),c(!1),E(null)},ye=L=>{L.target.id==="modalBackdrop"&&ge()},Pe=L=>L?new Date(L).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ce=L=>{const{name:ee,value:Ee}=L.target;v(Me=>({...Me,[ee]:Ee}))},Qe=()=>{v(kb),o(!1),p(null),r(!0)};f.useEffect(()=>{const L=new URLSearchParams(t.search||"");(t.state?.openAccountModal||L.get("openModal")==="1")&&(v(kb),o(!1),p(null),r(!0),je(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const F=L=>{b(null),L.assigned_accs?E(L.assigned_accs):E(null),v({name:L.name||"",website:L.website||"",phone_number:L.phone_number||"",billing_address:L.billing_address||"",shipping_address:L.shipping_address||"",parent_company:L.parent_company||"",industry:L.industry||"",status:cr(L.status)||"PROSPECT",territory_id:L.territory?.id?String(L.territory.id):"",assigned_to:L.assigned_accs?.id?String(L.assigned_accs.id):""}),o(!0),p(L.id),r(!0)},q=L=>{L&&Y({title:"Archive Account",message:a.jsxs("span",{children:["Are you sure you want to archive the account"," ",a.jsx("span",{className:"font-semibold",children:L.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:L.id,name:L.name}})},fe=L=>{const ee=Ie.find(Ee=>Ee.id===L);ee&&ee.acc_creator?.id===n?.id&&Xe(Ee=>{const Me=new Set(Ee);return Me.has(L)?Me.delete(L):Me.add(L),Me})},te=()=>{const L=Ie.filter(ee=>ee.acc_creator?.id===n?.id);He.size===L.length&&L.length>0?Xe(new Set):Xe(new Set(L.map(ee=>ee.id)))},B=()=>{if(He.size===0)return;const L=He.size;Y({title:"Archive Accounts",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:L})," account",L!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${L} Account${L!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(He),count:L}})},ce=async()=>{if(!J?.action){Y(null);return}const{action:L}=J,{type:ee,payload:Ee,targetId:Me,name:We,targetIds:ft,count:St}=L;we(!0);try{if(ee==="create"){c(!0);const _t=await se.post("/accounts/admin",Ee);he(),V.success(`Account "${We}" created successfully.`);const Vt=j?.id||null;ge(),await Je(Vt),!j&&_t.data?.id}else if(ee==="update"){if(!Me)throw new Error("Missing account identifier for update.");c(!0),await se.put(`/accounts/admin/${Me}`,Ee),V.success(`Account "${We}" updated successfully.`);const _t=j?.id&&j.id===Me?Me:null;ge(),await Je(_t),j?.id===Me&&b(null)}else if(ee==="archive"){if(!Me)throw new Error("Missing account identifier for archiving.");const _t=j?.id;d(Me),await se.put(`/accounts/admin/${Me}`,{status:"INACTIVE"}),V.success(`Account "${We}" archived successfully.`),await Je(_t&&_t!==Me?_t:null),_t===Me&&b(null)}else if(ee==="bulk-archive"){if(!ft||ft.length===0)throw new Error("Missing account identifiers for bulk archiving.");ze(!0),await Promise.all(ft.map(_t=>se.put(`/accounts/admin/${_t}`,{status:"INACTIVE"}))),V.success(`${St} account${St!==1?"s":""} archived successfully.`),Xe(new Set),await Je(),b(null)}}catch(_t){console.error(_t);const Vt=ee==="create"?"Failed to create account. Please review the details and try again.":ee==="update"?"Failed to update account. Please review the details and try again.":ee==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",En=_t.response?.data?.detail||Vt;V.error(En),(ee==="create"||ee==="update")&&c(!1),ee==="archive"&&d(null),ee==="bulk-archive"&&ze(!1)}finally{(ee==="create"||ee==="update")&&c(!1),ee==="archive"&&d(null),ee==="bulk-archive"&&ze(!1),we(!1),Y(null)}},De=()=>{re||Y(null)},U=async()=>{if(!j||!oe)return;const L=cr(oe),ee=cr(j.status);if(L!==ee){Oe(!0);try{await se.put(`/accounts/admin/${j.id}`,{status:L}),V.success(`Account status updated to ${KA(L)}`),w(Ee=>Ee.map(Me=>Me.id===j.id?{...Me,status:L}:Me)),b(null)}catch(Ee){console.error(Ee);const Me=Ee.response?.data?.detail||"Failed to update account status. Please try again.";V.error(Me)}finally{Oe(!1)}}},[K,je]=f.useState(!1),Be=L=>{L.preventDefault(),je(!0);const ee=x.name.trim();if(!ee){V.error("Account name is required.");return}if(!x.assigned_to){V.error("Assigned To is required.");return}const Me={name:ee,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},We=i&&h?"update":"create";Y({title:We==="create"?"Confirm New Account":"Confirm Update",message:We==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ee}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ee}),"?"]}),confirmLabel:We==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:Me,targetId:h||null,name:ee}})},tt=[{label:"Filter by Status",value:"Filter by Status"},...QA.map(L=>({label:L.label,value:L.value}))],lt=J?.action?.type==="delete"?J.action.targetId:null,Nt=j&&(u===j.id||lt===j.id),Ft=j&&u===j.id,da=j?XUe(j.status):"",Pa=j?a.jsx("div",{id:"accountModalBackdrop",onClick:jt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:At,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:j.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${da}`,children:KA(j.status)})]}),n?.id===j?.acc_creator?.id&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>F(j),disabled:J?.action?.type==="update"&&J.action.targetId===j.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>q(j),disabled:!!Nt,children:Ft?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(L=>a.jsx("button",{onClick:()=>be(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${de===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[de==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:j.website?a.jsx("a",{href:j.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:j.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:j.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:j.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:j.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:j.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:j.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:j.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:j.assigned_accs?`${j.assigned_accs.first_name} ${j.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:j.acc_creator?`${j.acc_creator.first_name} ${j.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Pe(j.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Pe(j.updated_at)||"N/A"})]})]}),a.jsx(Tn,{comments:at,onAddComment:Ve})]}),de==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),de==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[xe.tasks&&xe.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",xe.tasks.length,")"]})]}),Fe==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.tasks.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.due_date||L.created_at)})]},`task-${ee}`))})]}),xe.meetings&&xe.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",xe.meetings.length,")"]})]}),Fe==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.meetings.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.start_time||L.created_at)})]},`meeting-${ee}`))})]}),xe.calls&&xe.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",xe.calls.length,")"]})]}),Fe==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.calls.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.call_time||L.created_at)})]},`call-${ee}`))})]}),xe.contacts&&xe.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",xe.contacts.length,")"]})]}),Fe==="contacts"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.contacts.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/contacts",{state:{contactID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(sa,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[L.first_name?`${L.first_name} `:"",L.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:L.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.created_at)})]},`contact-${ee}`))})]}),xe.deals&&xe.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",xe.deals.length,")"]})]}),Fe==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.deals.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[L.deal_id?L.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",L.name||L.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:L.stage||L.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.close_date||L.created_at)})]},`deal-${ee}`))})]}),xe.quotes&&xe.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",xe.quotes.length,")"]})]}),Fe==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.quotes.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(L.quote_id?L.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:L.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.presented_date)||""})]},`quote-${ee}`))})]}),(!xe||(!xe.tasks||xe.tasks.length===0)&&(!xe.meetings||xe.meetings.length===0)&&(!xe.calls||xe.calls.length===0)&&(!xe.quotes||xe.quotes.length===0)&&(!xe.deals||xe.deals.length===0)&&(!xe.contacts||xe.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assigned_to:j.assigned_accs?.id?String(j.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assignedTo:j.assigned_accs?.id?String(j.assigned_accs.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assignedTo:j.assigned_accs?.id?String(j.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:oe||cr(j?.status)||"PROSPECT",onChange:L=>Te(L.target.value),children:QA.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))}),a.jsx("button",{onClick:U,disabled:ue||!oe||cr(oe)===cr(j?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ue||!oe||cr(oe)===cr(j?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ue?"Updating...":"Update"})]})]})]})]})]})}):null,Ge=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&a.jsx(Wt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Qe(),je(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:qe.map(L=>a.jsx(e7e,{...L},L.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:z,onChange:L=>Q(L.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:H,onChange:L=>W(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:He.size>0&&He.size===Ie.filter(L=>L.acc_creator?.id===n?.id).length&&Ie.filter(L=>L.acc_creator?.id===n?.id).length>0,onChange:te,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 w-12",children:He.size>0&&a.jsx("button",{onClick:B,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected accounts",children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:S?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):rt.length>0?Ie.map(L=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs",children:[a.jsx("td",{className:"py-3 px-4",children:L.acc_creator?.id===n?.id&&a.jsx("input",{type:"checkbox",checked:He.has(L.id),onChange:ee=>{ee.stopPropagation(),fe(L.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{kt(L),ie(L.id)},children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:L.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:L.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{kt(L),ie(L.id)},children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ZUe(L.status)}`,children:KA(L.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{kt(L),ie(L.id)},children:L.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm cursor-pointer",onClick:()=>{kt(L),ie(L.id)},children:L.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>{kt(L),ie(L.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:L.phone_number||"--"})]})})]},L.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:rt.length,pageSize:pe,currentPage:Z,onPrev:ot,onNext:Ct,onPageSizeChange:L=>{Ne(L),ne(1)},pageSizeOptions:[10,20,30,40,50],label:"accounts"})]}),Ae=s?a.jsx("div",{id:"modalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:L=>L.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ge(),je(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||re,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(af,{label:"Name",name:"name",value:x.name,onChange:Ce,placeholder:"Company name",required:!0,isSubmitted:K})}),a.jsx(j8,{label:"Parent Company",value:x.parent_company,onChange:L=>{v(ee=>({...ee,parent_company:L}))},items:I.map(L=>({id:L,name:L})),getLabel:L=>L?.name||"",placeholder:"Select parent company...",disabled:l}),a.jsx(af,{label:"Website",name:"website",value:x.website,onChange:Ce,placeholder:"https://example.com",disabled:l}),a.jsx(af,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),a.jsx(af,{label:"Industry",name:"industry",value:x.industry,onChange:Ce,placeholder:"Industry",disabled:l}),a.jsx(af,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Ce,placeholder:"Billing address",disabled:l}),a.jsx(af,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Ce,placeholder:"Shipping address",disabled:l}),a.jsx(w8,{label:"Status",name:"status",value:x.status,onChange:Ce,options:[{value:"",label:"Select status"},...QA],required:!0,disabled:l}),a.jsx(j8,{label:"Assigned To",value:x.assigned_to,onChange:L=>{const ee=k.find(Me=>String(Me.id)===String(L));E(ee);let Ee=null;ee&&ee.assigned_territory&&ee.assigned_territory.length===1&&(Ee=ee.assigned_territory[0].id),v(Me=>({...Me,assigned_to:L,territory_id:Ee}))},items:k||[],getLabel:L=>`${L?.first_name??""} ${L?.last_name??""} (${L?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:K,disabled:l||k.length===0}),a.jsx(w8,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Ce,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(L=>({value:String(L.id),label:L.name}))||[]],disabled:l||!A||!A.assigned_territory||A.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{ge(),je(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||re,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||re,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,$=J?a.jsx(a7e,{open:!0,title:J.title,message:J.message,confirmLabel:J.confirmLabel,cancelLabel:J.cancelLabel,variant:J.variant,onConfirm:ce,onCancel:De,loading:re}):null;return a.jsxs(a.Fragment,{children:[Ge,Pa,Ae,$]})}function e7e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function af({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function w8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function j8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t7e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:d})]})}function t7e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(N=>String(N.id)===String(t)),j=v?s(v):t,b=f.useMemo(()=>{const N=h.trim().toLowerCase();return(N?e.filter(S=>(s(S)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const N=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:N=>{p(N.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!b.some(N=>s(N).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),b.length>0?b.map(N=>{const w=String(N.id),S=s(N),_=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function a7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const Eb={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},wl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),ho=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function n7e(){const e=Tt(),t=Jt(),{user:n}=Gt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=f.useState([]),[i,o]=f.useState(!1),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState(null),[x,v]=f.useState(!1),[j,b]=f.useState(!1),[N,w]=f.useState(!1),[S,_]=f.useState(null),[k,T]=f.useState(!1),[A,E]=f.useState(null),[M,O]=f.useState(Eb),[I,D]=f.useState(""),[H,W]=f.useState("Filter by Accounts"),[z,Q]=f.useState(null),[J,Y]=f.useState("Overview"),[re,we]=f.useState(1),[Z,ne]=f.useState(10),[pe,Ne]=f.useState({}),[de,be]=f.useState(null),[oe,Te]=f.useState(null),[ue,Oe]=f.useState(new Set),[xe,le]=f.useState(!1),{comments:Fe,addComment:ke,refresh:He}=kn({relatedType:"contact",relatedId:h?.id});f.useEffect(()=>{h?.id&&He()},[h?.id,He]),f.useEffect(()=>{const B=t.state?.contactID;B&&(Te(B),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(oe&&s.length>0&&!i){const B=s.find(ce=>ce.id===oe);B?p(B):V.error("Contact not found."),Te(null)}},[oe,s,i]);const Xe=f.useCallback(async(B=null)=>{o(!0);try{const ce=await se.get("/contacts/admin/fetch-all"),U=[...Array.isArray(ce.data)?ce.data:[]].sort((K,je)=>{const Be=K?.created_at||K?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Be)});if(r(U),B){const K=U.find(je=>je.id===B);p(K||null)}}catch(ce){console.error(ce),r([]),ce.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),it=f.useCallback(async()=>{try{const B=await se.get("/accounts/admin/fetch-all"),De=[...Array.isArray(B.data)?B.data:[]].sort((U,K)=>(U?.name||"").localeCompare(K?.name||""));c(De)}catch(B){console.error(B),c([]),B.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),ze=f.useCallback(()=>{window.open("/manager/accounts?openModal=1","_blank","noopener,noreferrer")},[]),at=f.useCallback(async()=>{try{const B=await se.get("/users/all"),De=[...Array.isArray(B.data)?B.data:[]].sort((U,K)=>wl(U).localeCompare(wl(K)));d(De)}catch(B){console.error(B),d([]),B.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),Ve=f.useCallback(async B=>{try{const ce=await se.get(`/activities/contact/${B}`);Ne(ce.data&&typeof ce.data=="object"?ce.data:{})}catch(ce){console.error(ce),ce.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);f.useEffect(()=>{Xe(),it(),at()},[Xe,it,at]);const Ze=f.useMemo(()=>{const B=new Map;l.forEach(De=>{De?.id&&De?.name&&B.set(String(De.id),De.name)}),s.forEach(De=>{De?.account_id&&De?.account?.name&&B.set(String(De.account_id),De.account.name)});const ce=Array.from(B.entries()).sort((De,U)=>De[1].localeCompare(U[1])).map(([De,U])=>({value:De,label:U}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ce]},[l,s]),Je=f.useMemo(()=>{const B=I.trim().toLowerCase(),ce=H.trim();return s.filter(De=>{const U=[De?.first_name,De?.last_name,De?.email,De?.title,De?.department,De?.account?.name,De?.account?.status,De?.work_phone,De?.mobile_phone_1,De?.mobile_phone_2,De?.assigned_contact?.first_name,De?.assigned_contact?.last_name,De?.contact_creator?.first_name,De?.contact_creator?.last_name,De?.notes,ho(De?.created_at),ho(De?.updated_at)],K=B===""||U.some(tt=>tt==null?!1:tt.toString().toLowerCase().includes(B)),je=ce==="Filter by Accounts"||String(De.account_id)===ce,Be=De?.status!=="Inactive";return K&&je&&Be})},[s,I,H]),Ue=Math.max(1,Math.ceil(Je.length/Z)||1);f.useEffect(()=>{we(1)},[I,H]),f.useEffect(()=>{we(B=>{const ce=Math.max(1,Math.ceil(Je.length/Z)||1);return B>ce?ce:B})},[Je.length]);const _e=f.useMemo(()=>{const B=(re-1)*Z;return Je.slice(B,B+Z)},[Je,re,Z]),he=()=>we(B=>Math.max(B-1,1)),ie=()=>we(B=>Math.min(B+1,Ue)),G=f.useMemo(()=>{if(!j||!A)return l;const B=s.find(De=>De.id===A);return!B||!B.account||l.some(De=>De.id===B.account.id)?l:[...l,B.account]},[l,j,A,s]),X=f.useCallback(()=>{v(!1),b(!1),E(null),O(Eb),w(!1),ot(!1)},[]),ve=B=>{B.target.id==="modalBackdrop"&&!N&&!k&&X()},$e=B=>{const{name:ce,value:De}=B.target;O(U=>({...U,[ce]:De}))},Le=()=>{O(Eb),b(!1),E(null),v(!0)};f.useEffect(()=>{const B=new URLSearchParams(t.search||"");(t.state?.openContactModal||B.get("openModal")==="1")&&(O(Eb),b(!1),E(null),v(!0),ot(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const me=async B=>{if(!B)return;const ce=await se.get(`/accounts/get/${B.account_id}`);O({first_name:B.first_name||"",last_name:B.last_name||"",account_id:ce.data.id?ce.data.id:"",title:B.title||"",department:B.department||"",email:B.email||"",work_phone:B.work_phone||"",mobile_phone_1:B.mobile_phone_1||"",mobile_phone_2:B.mobile_phone_2||"",notes:B.notes||"",assigned_to:B.assigned_to?String(B.assigned_to):""}),b(!0),E(B.id),v(!0),p(null)},Re=B=>{if(!B)return;const ce=wl(B)||"this contact";_({title:"Archive Contact",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:ce}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:B.id,name:ce}})},qe=B=>{const ce=_e.find(De=>De.id===B);ce&&ce.contact_creator?.id===n?.id&&Oe(De=>{const U=new Set(De);return U.has(B)?U.delete(B):U.add(B),U})},rt=()=>{const B=_e.filter(ce=>ce.contact_creator?.id===n?.id);ue.size===B.length&&B.length>0?Oe(new Set):Oe(new Set(B.map(ce=>ce.id)))},st=()=>{if(ue.size===0)return;const B=ue.size;_({title:"Archive Contacts",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:B})," contact",B!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${B} Contact${B!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ue),count:B}})},[Ie,ot]=f.useState(!1),Ct=B=>{B.preventDefault(),ot(!0);const ce=M.first_name.trim(),De=M.last_name.trim();if(!ce||!De){V.error("First name and last name are required.");return}if(!M.account_id){V.error("Account is required.");return}if(!M.assigned_to){V.error("Assigned To is required.");return}const K=M.email?.trim();if(!K){V.error("Email is required.");return}if(!K.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K)){V.error("Please enter a valid email address.");return}const Be={first_name:ce,last_name:De,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},tt=j&&A?"update":"create",lt=`${ce} ${De}`.trim();_({title:tt==="create"?"Confirm New Contact":"Confirm Update",message:tt==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:lt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:lt}),"?"]}),confirmLabel:tt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:tt,payload:Be,targetId:A||null,name:lt}})},kt=async()=>{if(!S?.action){_(null);return}const{action:B}=S,{type:ce,payload:De,targetId:U,name:K}=B;T(!0);try{if(ce==="create"){w(!0),await se.post("/contacts/admin",De),V.success(`Contact "${K}" created successfully.`);const je=h?.id||null;X(),await Xe(je)}else if(ce==="update"){if(!U)throw new Error("Missing contact identifier for update.");w(!0),await se.put(`/contacts/admin/${U}`,De),V.success(`Contact "${K}" updated successfully.`);const je=h?.id&&h.id===U?U:h?.id||null;X(),await Xe(je),h?.id===U&&p(null)}else if(ce==="archive"){if(!U)throw new Error("Missing contact identifier for archiving.");const je=h?.id;Q(U),await se.put(`/contacts/admin/${U}`,{status:"Inactive"}),V.success(`Contact "${K}" archived successfully.`),await Xe(je&&je!==U?je:null),je===U&&p(null)}else if(ce==="bulk-archive"){const{targetIds:je,count:Be}=B;if(!je||je.length===0)throw new Error("Missing contact identifiers for bulk archiving.");le(!0),await Promise.all(je.map(tt=>se.put(`/contacts/admin/${tt}`,{status:"Inactive"}))),V.success(`${Be} contact${Be!==1?"s":""} archived successfully.`),Oe(new Set),await Xe(),p(null)}}catch(je){console.error(je);const Be=ce==="create"?"Failed to create contact. Please review the details and try again.":ce==="update"?"Failed to update contact. Please review the details and try again.":ce==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",tt=je.response?.data?.detail||Be;V.error(tt)}finally{(ce==="create"||ce==="update")&&w(!1),ce==="archive"&&Q(null),ce==="bulk-archive"&&le(!1),T(!1),_(null)}},At=()=>{k||_(null)},jt=B=>{p(B),Y("Overview")},ge=()=>p(null),ye=B=>{B.target.id==="contactModalBackdrop"&&!k&&ge()},Pe=S?.action?.type==="delete"?S.action.targetId:null,Ce=h&&(z===h.id||Pe===h.id),Qe=h&&z===h.id,F=h?a.jsx("div",{id:"contactModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:B=>B.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:ge,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:wl(h)||"Unnamed contact"})}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:n?.id===h?.contact_creator?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>me(h),disabled:k||S?.action?.type==="update"&&S.action.targetId===h.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Re(h),disabled:!!Ce,children:Qe?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:h.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(B=>a.jsx("button",{onClick:()=>Y(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${J===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:wl(h)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:h.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:h.email?a.jsx("a",{href:`mailto:${h.email}`,className:"text-blue-600 hover:underline break-all",children:h.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:h.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:h.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:h.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:h.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:h.assigned_contact?`${h.assigned_contact.first_name} ${h.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:h.contact_creator?`${h.contact_creator.first_name} ${h.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:ho(h.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:ho(h.updated_at)||"N/A"})]})]})}),J==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.notes||"No notes available."})]}),a.jsx(Tn,{comments:Fe,onAddComment:ke})]}),J==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),de==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/tasks",{state:{taskID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.description||"No description"}),B.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",B.assigned_to.first_name," ",B.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(B.due_date||B.created_at)})]},`task-${ce}`))})]}),pe.meetings&&pe.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),de==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/meetings",{state:{meetingID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.description||B.location||"No description"}),B.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",B.host.first_name," ",B.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(B.start_time||B.created_at)})]},`meeting-${ce}`))})]}),pe.calls&&pe.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),de==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/calls",{state:{callID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(B.call_time||B.created_at)})]},`call-${ce}`))})]}),pe.deals&&pe.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),de==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/deals",{state:{dealID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[B.deal_id?B.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",B.name||B.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:B.stage||B.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(B.close_date||B.created_at)})]},`deal-${ce}`))})]}),pe.quotes&&pe.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),de==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/manager/quotes",{state:{quoteID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(B.quote_id?B.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:B.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:ho(B.presented_date)||""})]},`quote-${ce}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${wl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assigned_to:h?.assigned_contact?.id?String(h.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!h?.email){alert("No email address available");return}const B=encodeURIComponent(h.email),ce=encodeURIComponent(""),De=encodeURIComponent(""),U=`mailto:${B}?subject=${ce}&body=${De}`;window.location.href=U},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${wl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assignedTo:h?.assigned_contact?.id?String(h.assigned_contact.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${wl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assignedTo:h?.assigned_contact?.id?String(h.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,q=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&a.jsx(Wt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Le(),ot(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:I,onChange:B=>D(B.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:H,onChange:B=>W(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ze.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value??B.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:ue.size>0&&ue.size===_e.filter(B=>B.contact_creator?.id===n?.id).length&&_e.filter(B=>B.contact_creator?.id===n?.id).length>0,onChange:rt,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 w-12",children:ue.size>0&&a.jsx("button",{onClick:st,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:xe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:i?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Je.length>0?_e.map(B=>{const ce=[{Icon:sn,value:B.email,key:"email"},{Icon:Mt,value:B.work_phone,key:"work_phone"},{Icon:dd,value:B.mobile_phone_1,key:"mobile_phone_1"},{Icon:dd,value:B.mobile_phone_2,key:"mobile_phone_2"}].filter(De=>!!De.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[a.jsx("td",{className:"py-3 px-4",children:n?.id===B.contact_creator?.id&&a.jsx("input",{type:"checkbox",checked:ue.has(B.id),onChange:De=>{De.stopPropagation(),qe(B.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:wl(B)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:B.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(Vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:B.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:ce.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ce.map(({Icon:De,value:U,key:K})=>{const je=bt.createElement(De,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[je,a.jsx("span",{children:U})]},K)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(na,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:B.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(sa,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:B.assigned_contact?`${B.assigned_contact.first_name} ${B.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Dt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:ho(B.created_at)||"--"})]})})]},B.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Je.length,pageSize:Z,currentPage:re,onPrev:he,onNext:ie,onPageSizeChange:B=>{ne(B),we(1)},pageSizeOptions:[10,20,30,40,50],label:"contacts"})]}),fe=x?a.jsx("div",{id:"modalBackdrop",onClick:ve,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:B=>B.stopPropagation(),children:[a.jsx("button",{onClick:()=>{X(),ot(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:N||k,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:j?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ct,noValidate:!0,children:[a.jsx(Bc,{label:"First Name",name:"first_name",value:M.first_name,onChange:$e,placeholder:"First name",required:!0,isSubmitted:Ie}),a.jsx(Bc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:$e,placeholder:"Last name",required:!0,isSubmitted:Ie}),a.jsx(N8,{label:"Account",value:M.account_id,onChange:B=>O(ce=>({...ce,account_id:B})),items:j?G:l||[],getLabel:B=>B?.name??"",placeholder:"Search account...",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:ze,disabled:N,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:it,disabled:N,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),disabled:N||(j?G.length===0:l.length===0),required:!0,isSubmitted:Ie}),a.jsx(N8,{label:"Assigned To",value:M.assigned_to,onChange:B=>O(ce=>({...ce,assigned_to:B})),items:u||[],getLabel:B=>`${B?.first_name??""} ${B?.last_name??""} (${B?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:N||u.length===0}),a.jsx(Bc,{label:"Title",name:"title",value:M.title,onChange:$e,placeholder:"Job title",disabled:N}),a.jsx(Bc,{label:"Department",name:"department",value:M.department,onChange:$e,placeholder:"Department",disabled:N}),a.jsx(Bc,{label:"Email",name:"email",type:"email",value:M.email,onChange:$e,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),a.jsx(Bc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(Bc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(Bc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(r7e,{label:"Notes",name:"notes",value:M.notes,onChange:$e,placeholder:"Additional details...",rows:3,disabled:N,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{X(),ot(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:N||k,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:N||k,children:N?"Saving...":j?"Update Contact":"Save Contact"})]})]})]})}):null,te=S?a.jsx(i7e,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:kt,onCancel:At,loading:k}):null;return a.jsxs(a.Fragment,{children:[q,F,fe,te]})}function Bc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function N8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,actions:d=null}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),d?a.jsx("div",{className:"flex items-center",children:d}):null]}),a.jsx(s7e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h})]})}function s7e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function r7e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function i7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const XA=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function wJ({lead:e,onBack:t,fetchLeads:n,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=Tt(),{leadID:c}=Go(),{user:u}=Gt(),[d,h]=f.useState(e||null),[p,x]=f.useState("Overview"),[v,j]=f.useState(""),b=d?.status?.toUpperCase()==="QUALIFIED",[N,w]=f.useState(null),S=d&&u&&d.creator?.id===u.id,[_,k]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[E,M]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),O=async()=>{try{if(e){h(e),j(e.status||"New");return}if(!c)return;const z=await se.get(`/leads/get/${c}`);h(z.data),j(z.data.status||"New"),k({name:z.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:z.data.territory?.id||null,assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),A({last_name:z.data.last_name||"",first_name:z.data.first_name||"",account_id:null,title:z.data.title||"",department:z.data.department||"",email:z.data.email||"",work_phone:z.data.work_phone||"",mobile_phone_1:z.data.mobile_phone_1||"",mobile_phone_2:z.data.mobile_phone_2||"",notes:"",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null})}catch(z){console.error(z)}};f.useEffect(()=>{e?(h(e),j(e.status||"New")):c&&O()},[c,e]);const I=async()=>{try{if(v==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){V.error("Lead must be Qualified before it can be converted.");return}const z=await se.put(`/leads/${d.id}/update/status`,{status:v});V.success("Lead status updated successfully");const Q={...d,status:z.data.status};h(Q),i&&i(Q),n&&n(),t&&t()}catch(z){console.error(z),V.error("Failed to update lead status")}},D=async z=>{const Q={..._,assigned_to:z.assigned_to?.id,billing_address:z.address,shipping_address:z.address,created_by:z.creator?.id,industry:null,name:z.company_name,phone_number:z.work_phone,status:"Prospect",territory_id:z.territory?.id,website:""};console.log("Account data: ",Q),console.log("Contact data: ",T),console.log("Deal data: ",E),console.log("Lead data: ",z);try{const Y=(await se.post("/accounts/convertedLead",Q)).data.id,re={...T,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,department:z.department,email:z.email,first_name:z.first_name,last_name:z.last_name,mobile_phone_1:z.mobile_phone_1,mobile_phone_2:z.mobile_phone_2,notes:z.notes,title:z.title,work_phone:z.work_phone},Z=(await se.post("/contacts/convertedLead",re)).data.id,ne=()=>{switch(E.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},pe=E.amount&&E.amount!==""?parseFloat(E.amount):0,Ne={...E,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,primary_contact_id:Z,probability:ne(),stage:"Prospecting"},de=await se.post("/deals/convertedLead",Ne),be=await se.put(`/leads/convert/${z.id}`);i&&i(null),n(),V.success("Lead converted successfully!"),t()}catch(J){console.error("Error during conversion:",J);const Y=J.response?.data?.detail||J.message||"Failed to convert lead. Please try again.";V.error(Y)}},H=z=>{switch((z||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=z=>z.toString().toLowerCase().replace(/\b\w/g,Q=>Q.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${H(d.status)}`,children:W(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>D(d),disabled:!b,title:b?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${b?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),S&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>x(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),N==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/tasks",{state:{taskID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:XA(z.due_date||z.created_at)})]},`task-${Q}`))})]}),o.meetings&&o.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),N==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/meetings",{state:{meetingID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:XA(z.start_time||z.created_at)})]},`meeting-${Q}`))})]}),o.calls&&o.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),N==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/manager/calls",{state:{callID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:XA(z.call_time||z.created_at)})]},`call-${Q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),Q=encodeURIComponent(""),J=encodeURIComponent(""),Y=`mailto:${z}?subject=${Q}&body=${J}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:v,onChange:z=>j(z.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:v===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${v===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const o7e=th.all(),ZA=o7e.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),l7e=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),c7e=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},JA={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function d7e(){const e=Tt(),{leadID:t}=Go(),{user:n}=Gt();Us();const[s,r]=f.useState(null),[i,o]=f.useState(!1),[l,c]=f.useState(null),[u,d]=f.useState(null),[h,p]=f.useState([]),[x,v]=f.useState(!1),[j,b]=f.useState(""),[N,w]=f.useState("Filter by Status"),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(JA),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState(!1),[re,we]=f.useState({}),[Z,ne]=f.useState(new Set),[pe,Ne]=f.useState(!1),[de,be]=f.useState(null);f.useRef(null);const[oe,Te]=f.useState(!1),[ue,Oe]=f.useState(null),[xe,le]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Fe,ke]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[He,Xe]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const it=async()=>{try{const F=await se.get("/leads/getUsers");c(F.data)}catch(F){console.error(`Error fetching users: ${F}`)}},ze=async()=>{v(!0);try{const F=await se.get("/leads/admin/getLeads");p(F.data),console.log(F.data)}catch(F){console.error(`Error fetching leads: ${F}`)}finally{v(!1)}};f.useEffect(()=>{it(),ze()},[]),f.useEffect(()=>{if(t&&h.length>0&&!i&&!M){const F=h.find(q=>q.id===Number(t));F&&r(F)}else!t&&!s&&r(null)},[t,h,i,M]),f.useEffect(()=>{if(ue){const q=(B=>{if(!B)return{code:"+63",number:""};const ce=B.match(/^(\+\d+)\s(.+)$/);if(ce)return{code:ce[1],number:ce[2]};if(B.startsWith("+")){const De=B.match(/^(\+\d{1,3})/);if(De)return{code:De[1],number:B.substring(De[1].length).trim()}}return{code:"+63",number:B}})(ue.work_phone),fe=[];ue.work_phone&&fe.push(`Work: ${ue.work_phone}`),ue.mobile_phone_1&&fe.push(`Mobile 1: ${ue.mobile_phone_1}`),ue.mobile_phone_2&&fe.push(`Mobile 2: ${ue.mobile_phone_2}`);const te=fe.length>0?fe.join(" | "):"";le({name:ue.company_name||"",website:"",countryCode:q.code,phone_number:q.number,combinedPhoneNumbers:te,billing_address:ue.address||"",shipping_address:ue.address||"",industry:"",status:"Prospect",territory_id:ue.assigned_to?.territory?.id||null,assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),ke({last_name:ue.last_name||"",first_name:ue.first_name||"",account_id:null,title:ue.title||"",department:ue.department||"",email:ue.email||"",work_phone:ue.work_phone||"",mobile_phone_1:ue.mobile_phone_1||"",mobile_phone_2:ue.mobile_phone_2||"",notes:ue.notes||"",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),Xe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null})}},[ue]);const at=F=>b(F.target.value),Ve=f.useMemo(()=>{const F=j.trim().toLowerCase(),q=N.trim().toUpperCase();let fe=h.filter(te=>{const B=te?.status!=="Inactive",ce=[te?.first_name,te?.last_name,te?.company_name,te?.title,te?.email,te?.work_phone,te?.assigned_to?`${te.assigned_to.first_name} ${te.assigned_to.last_name}`:""],De=F===""||ce.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(F));let U=!1;return q==="FILTER BY STATUS"?U=(te.status?te.status.toUpperCase():"")!=="CONVERTED":U=(te.status?te.status.toUpperCase():"")===q,De&&U&&B});return fe.sort((te,B)=>{const ce=new Date(te.created_at).getTime();return new Date(B.created_at).getTime()-ce}),fe},[h,j,N]),Ze=Math.max(1,Math.ceil(Ve.length/k)||1);f.useEffect(()=>{_(1)},[j,N]),f.useEffect(()=>{_(F=>{const q=Math.max(1,Math.ceil(Ve.length/k)||1);return F>q?q:F})},[Ve.length]);const Je=f.useMemo(()=>{const F=(S-1)*k;return Ve.slice(F,F+k)},[Ve,S]),Ue=()=>_(F=>Math.max(F-1,1)),_e=()=>_(F=>Math.min(F+1,Ze)),he=f.useCallback(async F=>{try{const q=await se.get(`/activities/lead/${F}`);we(q.data&&typeof q.data=="object"?q.data:{})}catch(q){console.error(q),q.response?.status===404&&(console.warn("No activities found for this account."),we({}))}},[]),ie=F=>{r(F),he(F.id)},G=()=>{r(null),t&&e("/admin/leads",{replace:!0})},X=()=>{o(!1),E(JA),O(!1),D(null),W(!1),d(null),sessionStorage.removeItem("editLeadData")},ve=F=>{F.target.id==="modalBackdrop"&&X()},$e=()=>{E(JA),O(!1),D(null),d(null),o(!0)},Le=F=>{if(!F){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",F),console.log("Current state - leadID:",t,"selectedLead:",s,"showModal:",i);const q=De=>{if(!De)return{code:"+63",number:""};const U=De.match(/^(\+\d+)\s(.+)$/);return U?{code:U[1],number:U[2]}:{code:"+63",number:De}},fe=q(F.work_phone),te=q(F.mobile_phone_1),B=q(F.mobile_phone_2);let ce="";if(F.assigned_to){ce=String(F.assigned_to.id);const De=l?.find(U=>U.id===F.assigned_to.id);d(De)}E({first_name:F.first_name||"",last_name:F.last_name||"",company_name:F.company_name||"",title:F.title||"",department:F.department||"",email:F.email||"",work_ccode:fe.code,work_phone:fe.number,m1_ccode:te.code,mobile_phone_1:te.number,m2_ccode:B.code,mobile_phone_2:B.number,address:F.address||"",notes:F.notes||"",source:F.source||"",territory_id:F.territory?.id||null,lead_owner:ce,status:F.status||"New"}),O(!0),D(F.id),s?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),o(!0)):(console.log("Already in list view - showing modal"),o(!0))},me=F=>{if(!F){console.error("handleArchive: lead is null or undefined");return}const q=`${F.first_name} ${F.last_name}`||"this lead";Q({title:"Archive Lead",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:q}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:F.id,name:q}})},Re=F=>{const q=Je.find(fe=>fe.id===F);q&&q.creator?.id===n?.id&&ne(fe=>{const te=new Set(fe);return te.has(F)?te.delete(F):te.add(F),te})},qe=()=>{const F=Je.filter(q=>q.creator?.id===n?.id);Z.size===F.length&&F.length>0?ne(new Set):ne(new Set(F.map(q=>q.id)))},rt=()=>{if(Z.size===0)return;const F=Z.size;Q({title:"Archive Leads",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:F})," lead",F!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${F} Lead${F!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Z),count:F}})},st=F=>{const{name:q,value:fe}=F.target;if(E(te=>({...te,[q]:fe})),q==="lead_owner"){const te=l.find(B=>B.id===parseInt(fe));d(te)}},[Ie,ot]=f.useState(!1),Ct=F=>{if(F.preventDefault(),ot(!0),!A.last_name?.trim()){V.error("Last name is required.");return}if(!A.company_name?.trim()){V.error("Company is required.");return}if(!A.email?.trim()){V.error("Email is required.");return}if(!A.email.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){V.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){V.error("Please assign a lead owner.");return}const fe={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},te=M&&I?"update":"create",B=`${A.first_name} ${A.last_name}`;Q({title:te==="create"?"Confirm New Lead":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:B}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:te==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:fe,targetId:I||null,name:B}})},kt=async()=>{if(!z?.action){Q(null);return}const{action:F}=z,{type:q,payload:fe,targetId:te,name:B,targetIds:ce,count:De}=F;console.log(fe),Y(!0);try{if(q==="create")W(!0),await se.post("/leads/create",fe),V.success(`Lead "${B}" created successfully.`),X(),await ze();else if(q==="update"){if(!te)throw new Error("Missing lead identifier for update.");W(!0);const U=await se.put(`/leads/${te}`,fe);V.success(`Lead "${B}" updated successfully.`),s&&s.id===te&&r(null),X(),await ze()}else if(q==="archive"){if(!te)throw new Error("Missing lead identifier for archiving.");const U=s?.id;be(te),await se.put(`/leads/${te}`,{status:"Inactive"}),V.success(`Lead "${B}" archived successfully.`),await ze(),U===te&&r(null)}else if(q==="bulk-archive"){if(!ce||ce.length===0)throw new Error("Missing lead identifiers for bulk archiving.");Ne(!0),await Promise.all(ce.map(U=>se.put(`/leads/${U}`,{status:"Inactive"}))),V.success(`${De} lead${De!==1?"s":""} archived successfully.`),ne(new Set),await ze(),r(null)}}catch(U){console.error(U);const K=q==="create"?"Failed to create lead. Please review the details and try again.":q==="update"?"Failed to update lead. Please review the details and try again.":q==="bulk-archive"?"Failed to archive leads. Please try again.":"Failed to archive lead. Please try again.",je=U.response?.data?.detail||K;V.error(je)}finally{(q==="create"||q==="update")&&W(!1),q==="archive"&&be(null),q==="bulk-archive"&&Ne(!1),q!=="edit"&&(Y(!1),Q(null))}},At=()=>{J||Q(null)},jt=h.filter(F=>F.status==="New").length,ge=h.filter(F=>F.status==="Contacted").length,ye=h.filter(F=>F.status==="Qualified").length,Pe=h.filter(F=>F.status==="Converted").length,Ce=h.filter(F=>F.status==="Lost").length,Qe=[{title:"New",value:jt,icon:Xa,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ge,icon:Mt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ye,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Pe,icon:Jl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ce,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[x&&a.jsx(Wt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Xa,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsx("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{$e(),ot(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Lead"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Qe.map(F=>a.jsx(m7e,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:j,onChange:at,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:Z.size>0&&Z.size===Je.filter(F=>F.creator?.id===n?.id).length&&Je.filter(F=>F.creator?.id===n?.id).length>0,onChange:qe,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:Z.size>0&&a.jsx("button",{onClick:rt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:pe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:Ve.length>0?Je.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",children:n?.id===F.creator?.id&&a.jsx("input",{type:"checkbox",checked:Z.has(F.id),onChange:q=>{q.stopPropagation(),Re(F.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ie(F),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[F.first_name," ",F.last_name]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ie(F),children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:F.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.assigned_to?`${F.assigned_to.first_name} ${F.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>ie(F),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${c7e(F.status||"New")}`,children:l7e(F.status||"New")})}),a.jsx("td",{className:"py-3 px-4"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Ve.length,pageSize:k,currentPage:S,onPrev:Ue,onNext:_e,onPageSizeChange:F=>{T(F),_(1)},pageSizeOptions:[10,20,30,40,50],label:"leads"}),i&&a.jsx("div",{id:"modalBackdrop",onClick:ve,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[a.jsx("button",{onClick:()=>{X(),ot(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:st,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ie&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:st,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:st,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ZA.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ZA.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:ZA.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:A.address,onChange:st,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${Ie&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(f7e,{items:Array.isArray(l)?l:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:F=>`${F.first_name} ${F.last_name}`,onChange:F=>{const q=l.find(te=>String(te.id)===String(F));d(q);let fe=null;q&&q.assigned_territory&&q.assigned_territory.length===1&&(fe=q.assigned_territory[0].id),E(te=>({...te,lead_owner:F,territory_id:fe}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:st,disabled:!u||!u.assigned_territory||u.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:u?u.assigned_territory&&u.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),u&&u.assigned_territory&&u.assigned_territory.map(F=>a.jsx("option",{value:F.id,children:F.name},F.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:st,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:st,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{X(),ot(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:H||J,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Ct,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:H||J,children:H||J?"Processing...":M?"Update Lead":"Save Lead"})]})]})]})}),z&&a.jsx(u7e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:kt,onCancel:At,loading:J}),s&&!i&&!M&&a.jsx(wJ,{relatedActs:re,lead:s,onBack:G,fetchLeads:ze,setSelectedLead:r,onEdit:Le,onArchive:me})]})}function u7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function m7e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function f7e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[u,d]=f.useState(""),h=f.useRef(null),p=e.find(j=>String(j.id)===String(t)),x=p?s(p):"",v=f.useMemo(()=>{const j=u.trim().toLowerCase();return(j?e.filter(N=>(s(N)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const j=b=>{h.current&&!h.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{l||d("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:j=>{d(j.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(j=>{const b=String(j.id),N=s(j),w=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:N||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Lb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},Jn=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),h7e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(Jn,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(Jn,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(Jn,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(Jn,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(Jn,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),g7e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Jn,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(Jn,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(Jn,{label:"Department",name:"department",value:e.department}),a.jsx(Jn,{label:"Title",name:"title",value:e.title}),a.jsx(Jn,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(Jn,{label:"Email",name:"email",value:e.email}),a.jsx(Jn,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(Jn,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),p7e=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Jn,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(Jn,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(Jn,{label:"Stage",name:"stage",value:e.stage}),a.jsx(Jn,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Jn,{label:"Description",name:"description",value:e.description}),a.jsx(Jn,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function x7e({isOpen:e,onClose:t}){const[n,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},o=()=>{n>1&&s(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(h7e,{data:Lb});case 2:return a.jsx(g7e,{data:Lb});case 3:return a.jsx(p7e,{data:Lb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Lb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(LN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>a.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function jJ({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=Tt(),{user:c}=Gt();f.useEffect(()=>{console.log("ManagerDealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){V.error("No deal selected");return}if(!s||s===e.stage){V.info("Please select a different stage");return}const h=e.id;o(!0);try{await se.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{V.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";V.error(x)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function NJ({selectedDeal:e,relatedActs:t={},show:n,onClose:s,activeTab:r,setActiveTab:i,onEdit:o,onDelete:l,onStatusUpdate:c}){const u=Tt(),[d]=Us(),h=d.get("id"),[p,x]=f.useState(e||null),[v,j]=f.useState(r||"Overview"),[b,N]=f.useState(null),{user:w}=Gt(),{comments:S,addComment:_,refresh:k}=kn({relatedType:"deal",relatedId:p?.id});f.useEffect(()=>{p?.id&&k()},[p?.id,k]);const T=r!==void 0?r:v,A=(()=>{const O=String(w?.role||"").toLowerCase();return O==="ceo"||O==="admin"?"admin":O==="manager"?"manager":O==="sales"?"sales":O==="group manager"||O==="group_manager"||O==="group-manager"?"group-manager":"guest"})();if(f.useEffect(()=>{(async()=>{if(h&&!e)try{const H=((await se.get("/deals/admin/fetch-all")).data||[]).find(W=>W.id===parseInt(h));if(H){const W={...H,amount:typeof H.amount=="number"?H.amount:parseFloat(H.amount||0),probability:H.probability||0};x(W)}else console.warn("Deal not found with ID:",h)}catch(I){console.error("Error fetching deal:",I)}})()},[h,e]),!p&&!h||h&&!p)return null;const E=O=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700";function M(O){return O?new Date(O).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{s?s():u(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(ea,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",M(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete "]}),p.deal_creator?.id===w?.id&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>{i?i(O):j(O)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const O=(p?.stage||"PROSPECTING").toUpperCase(),D=(W=>W==="PROSPECTING"?0:W==="QUALIFICATION"?1:W==="PROPOSAL"?2:W==="NEGOTIATION"?3:W==="CLOSED_WON"||W==="CLOSED_LOST"?4:-1)(O);return[0,1,2,3,4].map(W=>D===W?"orange":D>W?"green":"gray").map((W,z)=>a.jsxs(bt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${W==="green"?"bg-green-500 border-green-500":W==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((O,I)=>a.jsx("span",{className:"text-center flex-1 break-words",children:O},I))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),a.jsx(Tn,{comments:S,onAddComment:_})]}),T==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[t.tasks&&t.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",t.tasks.length,")"]})]}),b==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.tasks.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/tasks`,{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.due_date||O.created_at)})]},`task-${I}`))})]}),t.meetings&&t.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",t.meetings.length,")"]})]}),b==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.meetings.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/meetings`,{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.start_time||O.created_at)})]},`meeting-${I}`))})]}),t.calls&&t.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",t.calls.length,")"]})]}),b==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.calls.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/calls`,{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.call_time||O.created_at)})]},`call-${I}`))})]}),t.quotes&&t.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",t.quotes.length,")"]})]}),b==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.quotes.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/quotes`,{state:{quoteID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(O.quote_id?O.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.presented_date)||""})]},`quote-${I}`))})]}),(!t||(!t.tasks||t.tasks.length===0)&&(!t.meetings||t.meetings.length===0)&&(!t.calls||t.calls.length===0)&&(!t.quotes||t.quotes.length===0)&&(!t.deals||t.deals.length===0)&&(!t.contacts||t.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(jJ,{selectedDeal:p,onStatusUpdate:c,onClose:s})})]})]})]})})}function y7e(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Tt(),t=Jt(),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Stage"),[o,l]=f.useState("Filter by Owner"),[c,u]=f.useState(null),[d,h]=f.useState("Overview"),[p,x]=f.useState(!1),[v,j]=f.useState(null),[b,N]=f.useState(!1),[w,S]=f.useState(1),[_,k]=f.useState(10),[T,A]=f.useState(!1),[E,M]=f.useState(null),[O,I]=f.useState(!1),[D,H]=f.useState(!1),[W,z]=f.useState(null),[Q,J]=f.useState([]),[Y,re]=f.useState([]),[we,Z]=f.useState([]),[ne,pe]=f.useState({}),[Ne,de]=f.useState(null),[be,oe]=f.useState(new Set),[Te,ue]=f.useState(!1),{user:Oe}=Gt();f.useEffect(()=>{const U=t.state,K=U?.dealID;if(K&&!U?.openDealModal){de(K),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(Ne&&v?.length>0&&!b){const U=v.find(K=>K.id===Ne);U?u(U):V.error("Deal not found."),de(null)}},[Ne,v,b]);const[xe,le]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Fe,ke]=f.useState(null),[He,Xe]=f.useState(null),it="dealDraft:manager/deals",ze=3600*1e3,at=f.useRef(!1);f.useEffect(()=>{if(!at.current){at.current=!0;try{const U=sessionStorage.getItem(it);if(!U)return;const K=JSON.parse(U);if(typeof K?.ts=="number"&&Date.now()-K.ts>ze){sessionStorage.removeItem(it);return}if(K?.returnTo&&K.returnTo!==t.pathname)return;K?.dealForm&&typeof K.dealForm=="object"&&le(K.dealForm),typeof K?.isEditing=="boolean"&&H(K.isEditing),K?.currentDealId!==void 0&&z(K.currentDealId),x(!0),sessionStorage.removeItem(it)}catch{sessionStorage.removeItem(it)}}},[t.pathname]);const Ve=f.useCallback(()=>{try{sessionStorage.setItem(it,JSON.stringify({ts:Date.now(),returnTo:t.pathname,dealForm:xe,isEditing:D,currentDealId:W}))}catch{}},[it,t.pathname,xe,D,W]),Ze=f.useCallback(()=>{Ve(),window.open("/manager/accounts?openModal=1","_blank","noopener,noreferrer")},[Ve]),Je=f.useCallback(()=>{Ve(),window.open("/manager/contacts?openModal=1","_blank","noopener,noreferrer")},[Ve]),Ue={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},_e=U=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[U]||U||"--",he=U=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[U]||"bg-gray-100 text-gray-700",ie=f.useCallback(async U=>{try{const K=await se.get(`/activities/deal/${U}`);pe(K.data&&typeof K.data=="object"?K.data:{})}catch(K){console.error(K),K.response?.status===404&&(console.warn("No activities found for this account."),pe({}))}},[]),G=f.useMemo(()=>{const U=n.trim().toLowerCase(),K=r.trim(),je=o.trim();return(v??[]).filter(Be=>{const tt=[Be?.name,Be?.description,Be?.account?.name,Be?.contact?.first_name,Be?.contact?.last_name,Be?.assigned_deals?.first_name,Be?.assigned_deals?.last_name],lt=U===""||tt.some(da=>da==null||da===""?!1:da.toString().toLowerCase().includes(U)),Nt=K==="Filter by Stage"||K===""||Be.stage===Ue[K]||Be.stage===K,Ft=je==="Filter by Owner"||je===""||`${Be.assigned_deals?.first_name||""} ${Be.assigned_deals?.last_name||""}`.trim().toLowerCase()===je.toLowerCase();return lt&&Nt&&Ft})},[v,n,r,o]),X=Math.max(1,Math.ceil(G.length/_)||1);f.useEffect(()=>{S(1)},[n,r,o]),f.useEffect(()=>{S(U=>{const K=Math.max(1,Math.ceil(G.length/_)||1);return U>K?K:U})},[G.length]);const ve=f.useMemo(()=>{const U=(w-1)*_;return G.slice(U,U+_)},[G,w]),$e=()=>S(U=>Math.max(U-1,1)),Le=()=>S(U=>Math.min(U+1,X)),me=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),H(!1),z(null),x(!0)},Re=async()=>{N(!0);try{const U=await se.get("/deals/admin/fetch-all"),je=[...Array.isArray(U.data)?U.data:[]].sort((Be,tt)=>{const lt=Be?.created_at?new Date(Be.created_at).getTime():0;return(tt?.created_at?new Date(tt.created_at).getTime():0)-lt});j(je)}catch(U){U.response&&U.response.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch deals. Please try again later."),console.error(U)}finally{N(!1)}},qe=async()=>{try{const U=await se.get("/accounts/admin/fetch-all");J(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},rt=async()=>{try{const U=await se.get("/contacts/admin/fetch-all");re(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},st=async()=>{try{const U=await se.get("/users/all");Z(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{Re(),qe(),rt(),st()},[]);const Ie=async U=>{U&&(le({id:U.id||null,name:U.name||"",account_id:U.account_id?.toString()||"",primary_contact_id:U.primary_contact_id?.toString()||"",stage:U.stage||"PROPOSAL",amount:U.amount?.toString()||"",close_date:U.close_date?new Date(U.close_date).toISOString().split("T")[0]:"",assigned_to:U.assigned_to?.toString()||"",currency:U.currency||"PHP",description:U.description||""}),ke(U.account||null),Xe(U.contact||null),H(!0),z(U.id),u(null),x(!0))},ot=async(U=!1)=>{try{const K=await se.get("/deals/admin/fetch-all"),Be=[...Array.isArray(K.data)?K.data:[]].sort((tt,lt)=>{const Nt=tt?.created_at?new Date(tt.created_at).getTime():0;return(lt?.created_at?new Date(lt.created_at).getTime():0)-Nt});if(j(Be),!U&&c&&c.id){const tt=Be.find(lt=>lt.id===c.id);tt&&u({...tt})}}catch(K){console.error("Failed to refresh deal data:",K),await Re()}},Ct=U=>{const K=U.name.trim();if(!K){V.error("Deal name is required.");return}if(!U.account_id){V.error("Account is required.");return}const je=D&&W?"update":"create",Be=K;M({title:je==="create"?"Confirm New Deal":"Confirm Update",message:je==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:Be}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Be}),"?"]}),confirmLabel:je==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:je,formData:U,targetId:W||null,name:Be}})},kt=U=>{const K=ve?.find(je=>je.id===U);K&&K.deal_creator?.id===Oe?.id&&oe(je=>{const Be=new Set(je);return Be.has(U)?Be.delete(U):Be.add(U),Be})},At=()=>{const U=ve?.filter(K=>K.deal_creator?.id===Oe?.id)||[];be.size===U.length&&U.length>0?oe(new Set):oe(new Set(U.map(K=>K.id)))},jt=()=>{if(be.size===0)return;const U=be.size;M({title:"Archive Deals",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:U})," deal",U!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${U} Deal${U!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(be),count:U}})},ge=U=>{if(!U)return;const K=U.name||"this deal";M({title:"Archive Deal",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:K}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:U.id,name:K}})},ye=async()=>{if(!E?.action){M(null);return}const{action:U}=E,{type:K,formData:je,targetId:Be,name:tt}=U;I(!0);try{if(K==="create"){A(!0);const lt={name:je.name.trim(),account_id:parseInt(je.account_id),primary_contact_id:je.primary_contact_id?parseInt(je.primary_contact_id):null,stage:je.stage,amount:je.amount?parseFloat(je.amount):null,currency:je.currency||"PHP",close_date:je.close_date||null,description:je.description||null,assigned_to:je.assigned_to?parseInt(je.assigned_to):null};await se.post("/deals/admin/create",lt),V.success(`Deal "${tt}" created successfully.`),x(!1),await Re()}else if(K==="update"){if(!Be)throw new Error("Missing deal identifier for update.");A(!0);const lt={};je.name!==void 0&&(lt.name=je.name.trim()),je.account_id!==void 0&&je.account_id!==""&&(lt.account_id=parseInt(je.account_id)),je.primary_contact_id!==void 0&&(lt.primary_contact_id=je.primary_contact_id?parseInt(je.primary_contact_id):null),je.stage!==void 0&&(lt.stage=je.stage),je.amount!==void 0&&je.amount!==""&&(lt.amount=parseFloat(je.amount)),je.currency!==void 0&&(lt.currency=je.currency),je.close_date!==void 0&&(lt.close_date=je.close_date||null),je.description!==void 0&&(lt.description=je.description||null),je.assigned_to!==void 0&&(lt.assigned_to=je.assigned_to?parseInt(je.assigned_to):null),await se.put(`/deals/admin/${Be}`,lt),V.success(`Deal "${tt}" updated successfully.`),x(!1),await Re()}else if(K==="delete"){if(!Be)throw new Error("Missing deal identifier for deletion.");await se.delete(`/deals/admin/${Be}`),V.success(`Deal "${tt}" deleted successfully.`),c?.id===Be&&u(null),await Re()}else if(K==="archive"){if(!Be)throw new Error("Missing deal identifier for archive.");await se.put(`/deals/single-archive/${Be}`),V.success(`Deal "${tt}" archived successfully.`),c?.id===Be&&u(null),await Re()}else if(K==="bulk-archive"){if(ue(!0),!U.targetIds||U.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:U.targetIds}),V.success(`${U.count} deal${U.count!==1?"s":""} archived successfully.`),oe(new Set),c&&U.targetIds.includes(c.id)&&u(null),await Re()}}catch(lt){console.error(lt);const Nt=K==="create"?"Failed to create deal. Please review the details and try again.":K==="update"?"Failed to update deal. Please review the details and try again.":K==="bulk-archive"?"Failed to archive deals. Please try again.":K==="archive"?"Failed to archive deal. Please try again.":"Failed to delete deal. Please try again.",Ft=lt.response?.data?.detail||Nt;V.error(Ft)}finally{(K==="create"||K==="update")&&A(!1),K==="bulk-archive"&&ue(!1),I(!1),M(null)}},Pe=()=>{O||M(null)},Ce=()=>{x(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ke(null),Xe(null),H(!1),z(null),A(!1)},Qe=(v??[]).filter(U=>U.stage==="PROSPECTING").length,F=(v??[]).filter(U=>U.stage==="QUALIFICATION").length,q=(v??[]).filter(U=>U.stage==="PROPOSAL").length,fe=(v??[]).filter(U=>U.stage==="NEGOTIATION").length,te=(v??[]).filter(U=>U.stage==="CLOSED_WON").length,B=(v??[]).filter(U=>U.stage==="CLOSED_LOST").length,ce=(v??[]).filter(U=>U.stage==="CLOSED_CANCELLED").length,De=[{title:"Prospecting",value:Qe,icon:xj,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:F,icon:gn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:q,icon:na,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:fe,icon:od,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:te,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:B,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ce,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[b&&a.jsx(Wt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(na,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:me,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:De.map(U=>a.jsx(v7e,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:n,onChange:U=>s(U.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:r,onChange:U=>i(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:o,onChange:U=>l(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((v??[]).map(U=>`${U.assigned_deals?.first_name} ${U.assigned_deals?.last_name}`))].map((U,K)=>a.jsx("option",{value:U,children:U},K))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:be.size>0&&be.size===ve?.filter(U=>U.deal_creator?.id===Oe?.id).length&&ve?.filter(U=>U.deal_creator?.id===Oe?.id).length>0,onChange:At,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 w-12",children:be.size>0&&a.jsx("button",{onClick:jt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:Te,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:G.length>0?ve.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{u({...U}),ie(U.id)},children:[a.jsx("td",{className:"py-3 px-4",children:Oe?.id===U.deal_creator?.id&&a.jsx("input",{type:"checkbox",checked:be.has(U.id),onClick:K=>{K.stopPropagation()},onChange:K=>{K.stopPropagation(),kt(U.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.contact?.first_name&&U.contact?.last_name?`${U.contact.first_name} ${U.contact.last_name}`:U.contact?.first_name||U.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(U.stage)}`,children:_e(U.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",U.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_deals?.first_name&&U.assigned_deals?.last_name?`${U.assigned_deals.first_name} ${U.assigned_deals.last_name}`:U.assigned_deals?.first_name||U.assigned_deals?.last_name||"--"})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No deals found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:G.length,pageSize:_,currentPage:w,onPrev:$e,onNext:Le,onPageSizeChange:U=>{k(U),S(1)},pageSizeOptions:[10,20,30,40,50],label:"deals"}),p&&a.jsx(w7e,{onClose:Ce,formData:xe,setFormData:le,isEditing:D,onSubmit:Ct,isSubmitting:T||O,accounts:Q,contacts:Y,users:we,currentAccount:Fe,currentContact:He,onAddAccount:Ze,onAddContact:Je,onRefreshAccounts:qe,onRefreshContacts:rt}),c&&a.jsx(NJ,{relatedActs:ne,selectedDeal:c,show:!!c,onClose:()=>u(null),activeTab:d,setActiveTab:h,onEdit:Ie,onDelete:ge,onStatusUpdate:ot}),E&&a.jsx(b7e,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:ye,onCancel:Pe,loading:O})]})}function b7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function v7e({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function w7e({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null,onAddAccount:h,onAddContact:p,onRefreshAccounts:x,onRefreshContacts:v}){const[j,b]=f.useState(!1),N=_=>{if(_.preventDefault(),b(!0),!t.name?.trim()){V.error("Deal name is required.");return}const k=Number(t.amount);if(!t.amount||isNaN(k)||k<=0){V.error("Amount must be a number greater than 0.");return}if(!t.account_id){V.error("Please select an account.");return}if(!t.primary_contact_id){V.error("Please select a primary contact.");return}if(!t.assigned_to){V.error("Please assign this deal to a user.");return}r?.(t)},w=_=>{_.target.id==="modalBackdrop"&&e()},S=f.useMemo(()=>{const _=String(t.account_id||"").trim(),k=Array.isArray(l)?l:[];return _?k.filter(T=>{const E=[T?.account_id,T?.accountId,T?.account?.id,T?.account?.account_id,T?.account?.accountId].find(M=>M!=null&&String(M).trim()!=="");return E?String(E)===_:!1}):k},[l,t.account_id]);return f.useEffect(()=>{const _=String(t.account_id||"").trim(),k=String(t.primary_contact_id||"").trim();if(!k||!_)return;S.some(A=>String(A?.id)===k)||n(A=>({...A,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,S,n]),a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:_=>_.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[a.jsx(eT,{label:"Deal Name",name:"name",value:t.name,onChange:_=>n({...t,name:_.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:j,className:"md:col-span-2"}),a.jsx(tT,{label:"Account",value:t.account_id||"",onChange:_=>n({...t,account_id:_}),items:o||[],getLabel:_=>_?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,required:!0,isSubmitted:j,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:h,disabled:i,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:x,disabled:i,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]})}),a.jsx(tT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:_=>n({...t,primary_contact_id:_}),items:S||[],getLabel:_=>`${_?.first_name??""} ${_?.last_name??""}`.trim()||_?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,required:!0,isSubmitted:j,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:p,disabled:i,title:"Add contact",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:v,disabled:i,title:"Refresh contacts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]})}),a.jsx(C8,{label:"Stage",name:"stage",value:t.stage,onChange:_=>n({...t,stage:_.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(eT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:_=>n({...t,amount:_.target.value}),placeholder:"0",required:!0,isSubmitted:j}),a.jsx(C8,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:_=>n({...t,currency:_.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(eT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:_=>n({...t,close_date:_.target.value}),disabled:i}),a.jsx(tT,{label:"Assign To",value:t.assigned_to||"",onChange:_=>n({...t,assigned_to:_}),items:c||[],getLabel:_=>`${_?.first_name??""} ${_?.last_name??""}`.trim()||_?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:j,className:"md:col-span-2"}),a.jsx(N7e,{label:"Description",name:"description",value:t.description,onChange:_=>n({...t,description:_.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function eT({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function C8({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function tT({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1,actions:h=null}){const p=d&&u&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&a.jsx("span",{className:"text-red-500",children:"*"})]}),h?a.jsx("div",{className:"flex items-center",children:h}):null]}),a.jsx(j7e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:p})]})}function j7e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),j=e.find(w=>String(w.id)===String(t))||l,b=j?s(j):"",N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function N7e({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const aT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],nT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},zi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},sT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",C7e=e=>{switch(zi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},S7e=e=>{switch(zi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-red-600 text-white";default:return"bg-gray-600 text-white"}},Pb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",kg=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",_7e=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},rT=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},S8=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},iT=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},Yw=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},A7e=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=Yw(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=Yw(t);return n||null},T7e=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},k7e=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function E7e(){const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,u]=f.useState([]),[d,h]=f.useState([]),[p,x]=f.useState([]),[v,j]=f.useState([]),[b,N]=f.useState(null),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(!1),[E,M]=f.useState(!1),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState(nT),[we,Z]=f.useState(""),[ne,pe]=f.useState("Filter by Status"),[Ne,de]=f.useState(null),be=f.useCallback(async()=>{if(w)try{z(!0);const L=(await se.get("/company/invoice-info"))?.data;e(`/manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:L}})}catch($){const L=$?.response?.data?.detail||$?.message||"Failed to open print page.";V.error(L)}finally{z(!1)}},[w,e]),[oe,Te]=f.useState(1),[ue,Oe]=f.useState(10),[xe,le]=f.useState("Overview"),[Fe,ke]=f.useState("Draft"),[He,Xe]=f.useState([]),[it,ze]=f.useState(null),{comments:at,addComment:Ve,refresh:Ze}=kn({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&Ze()},[w?.id,Ze]),f.useEffect(()=>{const L=t.state?.quoteID;if(L){ze(L),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(it&&r.length>0&&!o){const $=r.find(L=>L.id===it);$?S($):V.error("Quote not found."),ze(null)}},[it,r,o]),f.useEffect(()=>{let $=!0;return(async()=>{const ee=A7e();if(ee&&$){N(ee);return}try{const Ee=await se.get("/auth/me"),Me=Yw(Ee?.data);if(Me&&$){N(Me);return}}catch{}try{const Ee=await se.get("/users/me"),Me=Yw(Ee?.data);if(Me&&$){N(Me);return}}catch{}$&&N(null)})(),()=>{$=!1}},[]);const Je=f.useCallback($=>$&&d.find(ee=>String(ee.id)===String($))?.name||"",[d]),Ue=f.useCallback($=>{if(!$)return"";const L=p.find(ee=>String(ee.id)===String($));return L?`${L.first_name} ${L.last_name}`.trim():""},[p]),_e=f.useCallback($=>{if(!$)return"--";const L=c.find(ee=>String(ee.id)===String($));return L?.deal_name||L?.name||`Deal #${S8($)}`},[c]),he=f.useCallback($=>{const L=c.find(Me=>String(Me.id)===String($)),ee=T7e(L);let Ee=k7e(L);if(!Ee&&ee){const Me=p.filter(We=>String(We.account_id||"")===String(ee));if(Me.length>0){const We=[...Me].sort((ft,St)=>{const _t=`${ft.first_name||""} ${ft.last_name||""}`.trim().toLowerCase(),Vt=`${St.first_name||""} ${St.last_name||""}`.trim().toLowerCase();return _t.localeCompare(Vt)});Ee=String(We[0].id)}}if(ee&&Ee){const Me=p.find(We=>String(We.id)===String(Ee));Me?.account_id&&String(Me.account_id)!==String(ee)&&(Ee="")}return{accountId:ee||"",contactId:Ee||""}},[c,p]),ie=f.useCallback($=>{if(!$)return"--";if($.deal?.deal_name)return $.deal.deal_name;if($.deal?.name)return $.deal.name;const L=$.deal_id||$.deal?.id;return L?_e(L):"--"},[_e]),G=f.useCallback($=>{if(!$)return"--";if($.account?.name)return $.account.name;let L=$.account_id||$.account?.id;if(!L){const ee=$.deal_id||$.deal?.id;ee&&(L=he(ee).accountId)}return L?Je(L)||`Account #${L}`:"--"},[he,Je]),X=f.useCallback($=>{if(!$)return"--";if($.contact?.first_name||$.contact?.last_name)return`${$.contact?.first_name||""} ${$.contact?.last_name||""}`.trim()||"--";let L=$.contact_id||$.contact?.id;if(!L){const Ee=$.deal_id||$.deal?.id;Ee&&(L=he(Ee).contactId)}return(L?Ue(L):"")||(L?`Contact #${L}`:"--")},[he,Ue]),ve=f.useCallback(async($=null)=>{l(!0);try{const L=await se.get("/quotes/admin/fetch-all"),Ee=[...Array.isArray(L.data)?L.data:[]].sort((Me,We)=>{const ft=Me?.created_at||Me?.updated_at||0,St=We?.created_at||We?.updated_at||0;return new Date(St)-new Date(ft)});if(i(Ee),$){const Me=Ee.find(We=>We.id===$);S(Me||null)}}catch(L){console.error(L),i([]),L.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),$e=f.useCallback(async()=>{try{const $=await se.get("/deals/admin/fetch-all");u(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load deals (permission denied).")}},[]),Le=f.useCallback(async()=>{try{const $=await se.get("/accounts/admin/fetch-all");h(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),me=f.useCallback(async()=>{try{const $=await se.get("/contacts/admin/fetch-all");x(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},[]),Re=f.useCallback(async()=>{try{const $=await se.get("/users/all");j(Array.isArray($.data)?$.data:[])}catch($){console.error($),$.response?.status===403&&V.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{ve(),$e(),Le(),me(),Re()},[ve,$e,Le,me,Re]);const qe=f.useMemo(()=>{const $=we.trim().toLowerCase(),L=ne.trim();return r.filter(ee=>{const Ee=ie(ee),Me=G(ee),We=X(ee),ft=rT(ee.presented_date,ee.validity_days),St=[ee.quote_id,Ee,Me,We,ee.total_amount?.toString(),ee.validity_days?.toString(),ee.presented_date?kg(ee.presented_date):"",ft?kg(ft):"",ee.assigned_user?.first_name,ee.assigned_user?.last_name,ee.creator?.first_name,ee.creator?.last_name,ee.status,ee.notes,Pb(ee.created_at),Pb(ee.updated_at)],_t=$===""||St.some(En=>En==null?!1:En.toString().toLowerCase().includes($)),Vt=L==="Filter by Status"||zi(ee.status)===L;return _t&&Vt})},[r,we,ne,ie,G,X]),rt=Math.max(1,Math.ceil(qe.length/ue)||1);f.useEffect(()=>Te(1),[we,ne]),f.useEffect(()=>{Te($=>{const L=Math.max(1,Math.ceil(qe.length/ue)||1);return $>L?L:$})},[qe.length,ue]);const st=f.useMemo(()=>{const $=(oe-1)*ue;return qe.slice($,$+ue)},[qe,oe,ue]),Ie=()=>Te($=>Math.max($-1,1)),ot=()=>Te($=>Math.min($+1,rt)),Ct=$=>{S($),le("Overview"),ke(zi($?.status)||"Draft")},kt=()=>{S(null),le("Overview")},At=$=>{$.target.id==="quoteModalBackdrop"&&!D&&kt()},jt=f.useCallback(()=>{k(!1),A(!1),J(null),re(nT),M(!1)},[]),ge=$=>{$.target.id==="modalBackdrop"&&!E&&!D&&jt()},ye=$=>{const{name:L,value:ee}=$.target;if(L==="deal_id"){const{accountId:Ee,contactId:Me}=he(ee);re(We=>({...We,deal_id:ee,account_id:Ee,contact_id:Me}));return}re(Ee=>({...Ee,[L]:ee}))},Pe=()=>{re(nT),A(!1),J(null),k(!0)},Ce=$=>{if(!$)return;S(null);const L=$.deal?.id?String($.deal.id):$.deal_id?String($.deal_id):"",ee=L?he(L):{accountId:"",contactId:""},Ee=$.account?.id?String($.account.id):$.account_id?String($.account_id):ee.accountId,Me=$.contact?.id?String($.contact.id):$.contact_id?String($.contact_id):ee.contactId,We=$.assigned_user?.id?String($.assigned_user.id):$.assigned_to?String($.assigned_to):"";re({deal_id:L,account_id:Ee||"",contact_id:Me||"",total_amount:$.total_amount?.toString()||"",presented_date:_7e($.presented_date),validity_days:$.validity_days!==null&&$.validity_days!==void 0?String($.validity_days):"",status:zi($.status)||"Draft",assigned_to:We,notes:$.notes||"",subtotal:parseFloat($.subtotal)||0,tax_rate:parseFloat($.tax_rate)||0,tax_amount:parseFloat($.tax_amount)||0,discount_type:$.discount_type||"",discount_value:parseFloat($.discount_value)||0,discount_amount:parseFloat($.discount_amount)||0,currency:$.currency||"PHP",items:Array.isArray($.items)?$.items.map(ft=>({id:ft.id,item_type:ft.item_type||"Product",name:ft.name||"",description:ft.description||"",sku:ft.sku||"",variant:ft.variant||"",unit:ft.unit||"pcs",quantity:parseFloat(ft.quantity)||1,unit_price:parseFloat(ft.unit_price)||0,discount_percent:parseFloat(ft.discount_percent)||0,discount_amount:parseFloat(ft.discount_amount)||0,line_total:parseFloat(ft.line_total)||0,sort_order:ft.sort_order||0})):[]}),A(!0),J($.id),k(!0)},Qe=$=>{if($.target.checked){const L=st.filter(ee=>ee.created_by===b).map(ee=>ee.id);Xe(L)}else Xe([])},F=$=>{Xe(L=>L.includes($)?L.filter(ee=>ee!==$):[...L,$])},q=st.filter($=>$.created_by===b),fe=$=>{if(!$)return;const L=$.quote_id||"this quote";I({title:"Archive Quote",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:L}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:$.id,name:L}})},te=async()=>{He.length!==0&&I({title:"Archive Quotes",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:He.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${He.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:He}})},[B,ce]=f.useState(!1),De=$=>{if($.preventDefault(),ce(!0),!b){V.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){V.error("Deal is required.");return}if(!Y.assigned_to){V.error("Assigned To is required.");return}const ee=he(Y.deal_id),Ee=Y.items.map((_t,Vt)=>({item_type:_t.item_type||"Product",name:_t.name,description:_t.description||null,sku:_t.sku||null,variant:_t.variant||null,unit:_t.unit||null,quantity:parseFloat(_t.quantity)||1,unit_price:parseFloat(_t.unit_price)||0,discount_percent:parseFloat(_t.discount_percent)||0,sort_order:_t.sort_order??Vt})),Me={deal_id:Number(Y.deal_id),account_id:ee.accountId?Number(ee.accountId):null,contact_id:ee.contactId?Number(ee.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Ee},We=T&&Q?"update":"create",ft=_e(Y.deal_id),St=We==="create"?{...Me,created_by_id:Number(b)}:Me;I({title:We==="create"?"Confirm New Quote":"Confirm Update",message:We==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:ft}),"?"]}),confirmLabel:We==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:St,targetId:Q||null,name:ft}})},U=async()=>{if(!O?.action){I(null);return}const{action:$}=O,{type:L,payload:ee,targetId:Ee,name:Me}=$;H(!0);try{if(L==="create")M(!0),await se.post("/quotes/admin",ee),V.success("Quote created successfully."),jt(),await ve();else if(L==="update"){if(!Ee)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Ee}`,ee),V.success("Quote updated successfully."),jt(),await ve(),w?.id===Ee&&S(null)}else if(L==="delete"){if(!Ee)throw new Error("Missing quote identifier for deletion.");const We=w?.id;de(Ee),await se.delete(`/quotes/admin/${Ee}`),V.success(`Quote "${Me}" archived successfully.`),await ve(We&&We!==Ee?We:null),We===Ee&&S(null)}else L==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:He}),V.success(`Successfully archived ${He.length} quotes`),Xe([]),await ve())}catch(We){console.error(We);const ft=L==="create"?"Failed to create quote. Please review the details and try again.":L==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";V.error(ft),(L==="create"||L==="update")&&M(!1),L==="delete"&&de(null)}finally{(L==="create"||L==="update")&&M(!1),L==="delete"&&de(null),H(!1),I(null)}},K=()=>{D||I(null)},je=f.useCallback(($,L)=>{const ee=$?.deal_id??$?.deal?.id??"",Ee=ee?Number(ee):null,Me=Ee?he(String(Ee)):{accountId:"",contactId:""},We=$?.account_id??$?.account?.id??Me.accountId??null,ft=$?.contact_id??$?.contact?.id??Me.contactId??null,St=$?.total_amount??0,_t=$?.assigned_to??$?.assigned_user?.id??null;return{deal_id:Ee,account_id:We!=null&&String(We).trim()!==""?Number(We):null,contact_id:ft!=null&&String(ft).trim()!==""?Number(ft):null,total_amount:Number(St),presented_date:$?.presented_date||null,validity_days:$?.validity_days===""||$?.validity_days===void 0||$?.validity_days===null?null:Number($.validity_days),status:L,assigned_to:_t!=null&&String(_t).trim()!==""?Number(_t):null,notes:$?.notes?.trim()||null}},[he]),Be=f.useCallback(async()=>{if(!w?.id)return;const $=zi(Fe),L=[$,$.toLowerCase()],ee=async Ee=>se.patch(`/quotes/admin/${w.id}/status`,{status:Ee},{headers:{"Content-Type":"application/json"}});try{let Ee=!1;for(const Me of L)try{await ee(Me),Ee=!0;break}catch(We){if(We?.response?.status===422)continue;throw We}if(!Ee){const Me=je(w,$);if(!Me.deal_id){V.error("Cannot update status: missing deal_id on selected quote.");return}if(!Me.total_amount||Me.total_amount<=0){V.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,Me)}V.success(`Quote status updated to ${$}`),S(null),le("Overview"),await ve()}catch(Ee){console.error(Ee);const Me=Ee?.response?.data?.message||(Ee?.response?.data?.errors?Object.values(Ee.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";V.error(Me)}},[w,Fe,ve,je]),tt=[{label:"Filter by Status",value:"Filter by Status"},...aT.map($=>({label:$.label,value:$.value}))],lt=O?.action?.type==="delete"?O.action.targetId:null,Nt=w&&(Ne===w.id||lt===w.id),Ft=w&&Ne===w.id,da=w?a.jsx("div",{id:"quoteModalBackdrop",onClick:At,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:$=>$.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:kt,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:ie(w)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${S7e(w.status)}`,children:sT(w.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:be,disabled:W||E||D,children:[a.jsx(ra,{className:"mr-2"}),W?"Preparing...":"Print Quotation"]}),b===w.created_by&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Ce(w),disabled:D||O?.action?.type==="update"&&O.action.targetId===w.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>fe(w),disabled:!!Nt,children:Ft?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map($=>a.jsx("button",{onClick:()=>le($),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${xe===$?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:$},$))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[xe==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:iT(w.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:ie(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:G(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:X(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:kg(w.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:kg(rT(w.presented_date,w.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:sT(w.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Pb(w.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Pb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&a.jsx("div",{className:"mt-6",children:a.jsx(bd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),xe==="Notes"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),a.jsx(Tn,{comments:at,onAddComment:Ve})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${iT(w.quote_id)}`,assigned_to:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:w.assigned_user?.id?String(w.assigned_user.id):w.assigned_to?String(w.assigned_to):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||zi(w.status)||"Draft",onChange:$=>ke($.target.value),children:aT.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))}),a.jsx("button",{onClick:Be,disabled:zi(Fe)===zi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${zi(Fe)===zi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Pa=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(Wt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ra,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{Pe(),ce(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:we,onChange:$=>Z($.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:ne,onChange:$=>pe($.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map($=>a.jsx("option",{value:$.value,children:$.label},$.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:q.length>0&&He.length===q.length,onChange:Qe,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:He.length>0?a.jsx("button",{onClick:te,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${He.length} selected items`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):qe.length>0?st.map($=>{const L=rT($.presented_date,$.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>Ct($),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:ee=>ee.stopPropagation(),children:$.created_by===b&&a.jsx("input",{type:"checkbox",checked:He.includes($.id),onChange:()=>F($.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:iT($.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ie($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:G($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:X($)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:$.total_amount?`${s}${Number($.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${C7e($.status)}`,children:sT($.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:$.assigned_user?`${$.assigned_user.first_name} ${$.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:kg(L)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},$.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:qe.length,pageSize:ue,currentPage:oe,onPrev:Ie,onNext:ot,onPageSizeChange:$=>{Oe($),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Ge=_?a.jsx("div",{id:"modalBackdrop",onClick:ge,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:$=>$.stopPropagation(),children:[a.jsx("button",{onClick:()=>{jt(),ce(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||D,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:De,children:[a.jsx(T8,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:$=>{const{accountId:L,contactId:ee}=he($);re(Ee=>({...Ee,deal_id:$,account_id:L,contact_id:ee}))},items:Array.isArray(c)?c:[],getLabel:$=>`${S8($?.deal_id??"")} ${$?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:B,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(A8,{label:"Account",value:Je(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),a.jsx(A8,{label:"Contact",value:Ue(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),a.jsx("div",{className:"md:col-span-2 mt-2",children:a.jsx(bd,{items:Y.items,onChange:$=>re(L=>({...L,items:$})),currencySymbol:s,readOnly:E,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:$=>{re(L=>({...L,subtotal:$.subtotal,discount_amount:$.discount_amount,tax_amount:$.tax_amount,total_amount:$.total_amount}))}})}),a.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),a.jsxs("select",{value:Y.discount_type||"",onChange:$=>re(L=>({...L,discount_type:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:E,children:[a.jsx("option",{value:"",children:"No Discount"}),a.jsx("option",{value:"percentage",children:"Percentage (%)"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),a.jsx("input",{type:"number",value:Y.discount_value||"",onChange:$=>re(L=>({...L,discount_value:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:E||!Y.discount_type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:$=>re(L=>({...L,tax_rate:$.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),a.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsx(_8,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:ye,disabled:E}),a.jsx(_8,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:ye,placeholder:"30",disabled:E}),a.jsx(T8,{label:"Assigned To",value:Y.assigned_to||"",onChange:$=>re(L=>({...L,assigned_to:$})),items:Array.isArray(v)?v:[],getLabel:$=>{const L=`${$?.first_name??""} ${$?.last_name??""}`.trim();return L?$?.role?`${L} (${$.role})`:L:$?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:B,disabled:E}),a.jsx(L7e,{label:"Status",name:"status",value:Y.status,onChange:ye,options:aT,required:!0,disabled:E}),a.jsx(D7e,{label:"Notes",name:"notes",value:Y.notes,onChange:ye,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{jt(),ce(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||D,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||D,children:E?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,Ae=O?a.jsx(O7e,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:U,onCancel:K,loading:D}):null;return a.jsxs(a.Fragment,{children:[w?da:Pa,Ge,Ae]})}function _8({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function A8({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function L7e({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",d=r.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function T8({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(P7e,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function P7e({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function D7e({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function O7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function M7e(){const{userRole:e}=Ks();return a.jsx(x1,{currentUserRole:e,currentUserId:null})}function I7e(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,u]=f.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{d()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const T=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[T,E,k.action,k.entity_type,A,k.description],O=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),I=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return O&&I}).sort((k,T)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,n,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[n,r]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const v=()=>l(w=>Math.max(w-1,1)),j=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!h.length){Kx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),_=[w.join(","),...S.map(E=>E.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(k),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},N=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(Wt,{message:"Loading audit logs..."}),a.jsx(Qx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(Wo,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${N(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:v,onNext:j,onPageSizeChange:w=>{u(w),l(1)},pageSizeOptions:[10,20,30,40,50],label:"logs"})]})}const $7e=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],R7e=e=>e?String(e).toUpperCase():"",gf=e=>{const t=R7e(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},oT=e=>{const t=gf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},k8=e=>{switch(gf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},E8=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function z7e(){const[e,t]=f.useState(!1),[n,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(null),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(!1),[_,k]=f.useState(!1),[T,A]=f.useState("PLANNED"),[E,M]=f.useState(!1),[O,I]=f.useState(!1),[D,H]=f.useState(null),[W,z]=f.useState(new Set),[Q,J]=f.useState(!1),{user:Y}=Gt(),{comments:re,addComment:we,refresh:Z}=kn({relatedType:"call",relatedId:n?.id});f.useEffect(()=>{n?.id&&Z()},[n?.id,Z]),Us();const ne=Tt(),pe=Jt(),Ne=ge=>{if(!ge)return"";const ye=String(ge).split("-");return ye.length===3?`${ye[0]}-${ye[2]}`:String(ge)},be={subject:"",call_time:(()=>{const ge=new Date,ye=ge.getFullYear(),Pe=String(ge.getMonth()+1).padStart(2,"0"),Ce=String(ge.getDate()).padStart(2,"0");return`${ye}-${Pe}-${Ce}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[oe,Te]=f.useState(be);f.useEffect(()=>{const ge=pe.state,ye=ge?.callID;if(ye&&!ge?.openCallModal){H(ye),ne(pe.pathname,{replace:!0,state:{}});return}!ge?.openCallModal||!ge?.initialCallData||ge.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||ge.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),Te(Pe=>({...Pe,...ge.initialCallData,relatedTo1:ge.initialCallData.relatedTo1?String(ge.initialCallData.relatedTo1):"",relatedTo2:ge.initialCallData.relatedTo2?String(ge.initialCallData.relatedTo2):""})),ne(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),f.useEffect(()=>{if(D&&d.length>0&&!O){const ge=d.find(ye=>ye.id===D);ge?s(ge):V.error("Call not found."),H(null)}},[D,d,O]);const ue=async()=>{try{I(!0);const ge=await se.get("/calls/admin/fetch-all"),Pe=[...Array.isArray(ge.data)?ge.data:[]].sort((Ce,Qe)=>{const F=Ce?.created_at?new Date(Ce.created_at):0;return(Qe?.created_at?new Date(Qe.created_at):0)-F});h(Pe)}catch(ge){console.error("Error fetching calls:",ge),V.error("Failed to load calls")}finally{I(!1)}},Oe=async()=>{try{const ge=await se.get("/users/all");x(ge.data)}catch(ge){console.error("Error fetching users: ",ge)}};f.useEffect(()=>{Oe(),ue()},[]);const xe=[],le="",Fe="Filter by Status",ke="Filter by Users",[He,Xe]=f.useState(1),[it,ze]=f.useState(10),Ve=["GROUP MANAGER","MANAGER","SALES"].includes(Y?.role?.toUpperCase())?d.filter(ge=>ge.status!=="INACTIVE"):d,Ze=Ve,Je=Ve.length,Ue=Ve.filter(ge=>gf(ge.status)==="PLANNED").length,_e=Ve.filter(ge=>gf(ge.status)==="HELD").length,he=Ve.filter(ge=>gf(ge.status)==="NOT_HELD").length,ie=[{title:"Total",value:Je,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:Ue,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:_e,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:he,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[G,X]=f.useState("Overview"),ve=ge=>{const{name:ye,value:Pe}=ge.target;Te(Ce=>{const Qe={...Ce,[ye]:Pe};return ye==="relatedType1"&&(Qe.relatedTo1="",Pe==="Lead"?(Qe.relatedType2=null,Qe.relatedTo2=null,u([])):Pe==="Account"&&(Qe.relatedType2="Contact")),ye==="relatedType2"&&(Qe.relatedTo2=""),Qe})};f.useEffect(()=>{const ge=async()=>{try{l([]);let ye;oe.relatedType1==="Lead"?ye=await se.get("/leads/admin/getLeads"):oe.relatedType1==="Account"&&(ye=await se.get("/accounts/admin/fetch-all"));let Pe=[];if(ye&&Array.isArray(ye.data)?Pe=ye.data:Pe=[],v&&oe.relatedTo1)try{let Ce;oe.relatedType1==="Lead"?Ce=await se.get(`/leads/get/${oe.relatedTo1}`):oe.relatedType1==="Account"&&(Ce=await se.get(`/accounts/get/${oe.relatedTo1}`)),Ce&&Ce.data&&(Pe.some(F=>String(F.id)===String(oe.relatedTo1))||(Pe=[Ce.data,...Pe]))}catch(Ce){console.error("Error fetching specific related item:",Ce)}l(Pe)}catch(ye){console.error("Error fetching data:",ye),l([])}};oe.relatedType1&&ge()},[oe.relatedType1,v,oe.relatedTo1]),f.useEffect(()=>{const ge=async()=>{try{u([]);let ye;if(oe.relatedType1==="Account"&&oe.relatedTo1)oe.relatedType2==="Contact"?ye=await se.get(`/contacts/from-acc/${oe.relatedTo1}`):oe.relatedType2==="Deal"?ye=await se.get(`/deals/from-acc/${oe.relatedTo1}`):oe.relatedType2==="Quote"&&(ye=await se.get(`/quotes/from-acc/${oe.relatedTo1}`));else{u([]);return}ye&&Array.isArray(ye.data)?u(ye.data):u([])}catch(ye){console.error("Error fetching data:",ye),u([])}};oe.relatedType2&&ge()},[oe.relatedType2,oe.relatedTo1,oe.relatedType1]);const[$e,Le]=f.useState(!1),me=ge=>{ge.preventDefault(),Le(!0);const ye=oe.subject;if(!ye||ye.trim()===""){V.error("Subject is required.");return}if(!oe.relatedTo1){V.error(`Please select a ${oe.relatedType1||"Lead/Account"}.`);return}if(!oe.assigned_to){V.error("Subject is required.");return}const Ce={...oe,duration_minutes:oe.duration_minutes?parseInt(oe.duration_minutes,10):null,relatedTo1:oe.relatedTo1?parseInt(oe.relatedTo1,10):null,relatedTo2:oe.relatedType1==="Lead"?null:oe.relatedTo2?parseInt(oe.relatedTo2,10):null,relatedType2:oe.relatedType1==="Lead"?null:oe.relatedType2,assigned_to:oe.assigned_to?parseInt(oe.assigned_to,10):null},Qe=v&&b?"update":"create",F=(oe.subject||"").trim()||"Untitled Call";i({title:Qe==="create"?"Confirm New Call":"Confirm Update",message:Qe==="create"?`Create "${F}"?`:`Save changes to "${F}"?`,confirmLabel:Qe==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:Qe,payload:Ce,targetId:b||null,name:F}})},Re=ge=>s(ge),qe=()=>{t(!1),j(!1),N(null)},rt=async()=>{if(!r?.action){i(null);return}const{action:ge}=r,{type:ye,payload:Pe,targetId:Ce,name:Qe}=ge;k(!0);try{if(ye==="create")S(!0),await se.post("/calls/create",Pe),V.success(`Call "${Qe}" created successfully.`),t(!1),Te(be),j(!1),N(null),await ue();else if(ye==="update"){if(!Ce)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${Ce}`,Pe),V.success(`Call "${Qe}" updated successfully.`),t(!1),Te(be),j(!1),N(null),await ue()}else if(ye==="delete"){if(!Ce)throw new Error("Missing call identifier for archiving.");await se.put(`/calls/${Ce}`,{status:"INACTIVE"}),V.success(`Call "${Qe}" archived successfully.`),n?.id===Ce&&s(null),await ue()}else if(ye==="bulk-delete"){const{targetIds:F,count:q}=ge;if(!F||F.length===0)throw new Error("Missing call identifiers for bulk archiving.");J(!0),await se.put("/calls/bulk-archive",{call_ids:F}),V.success(`${q} call${q!==1?"s":""} archived successfully.`),z(new Set),await ue(),n&&W.has(n.id)&&s(null)}}catch(F){const q=ye==="create"?"Failed to create call. Please review the details and try again.":ye==="update"?"Failed to update call. Please review the details and try again.":ye==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",fe=F?.response?.data?.detail||q;V.error(fe)}finally{(ye==="create"||ye==="update")&&S(!1),ye==="bulk-delete"&&J(!1),k(!1),i(null)}},st=()=>{_||i(null)},Ie=async()=>{if(n?.id)try{M(!0),await se.put(`/calls/${n.id}`,{status:T}),V.success(`Status updated to ${oT(T)}`),h(ge=>Array.isArray(ge)?ge.map(ye=>ye.id===n.id?{...ye,status:T}:ye):ge),s(null)}catch(ge){const ye=ge.response?.data?.detail||"Failed to update status.";V.error(ye)}finally{M(!1)}},ot=ge=>{const ye=Ze.find(Pe=>Pe.id===ge);ye&&ye.call_creator?.id===Y?.id&&z(Pe=>{const Ce=new Set(Pe);return Ce.has(ge)?Ce.delete(ge):Ce.add(ge),Ce})},Ct=()=>{const ge=Ze.filter(ye=>ye.call_creator?.id===Y?.id);W.size===ge.length&&ge.length>0?z(new Set):z(new Set(ge.map(ye=>ye.id)))},kt=()=>{if(W.size===0)return;const ge=W.size;i({title:"Archive Calls",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:ge})," call",ge!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${ge} Call${ge!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(W),count:ge}})};f.useEffect(()=>{n&&A(gf(n.status))},[n]);const At=n?a.jsxs("div",{id:"callModalBackdrop",onClick:ge=>ge.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[O&&a.jsx(Wt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${k8(n.status)}`,children:oT(n.status)})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:Y?.id===n?.call_creator?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const ge=F=>{if(!F)return"";const q=new Date(F),fe=q.getFullYear(),te=String(q.getMonth()+1).padStart(2,"0"),B=String(q.getDate()).padStart(2,"0"),ce=String(q.getHours()).padStart(2,"0"),De=String(q.getMinutes()).padStart(2,"0");return`${fe}-${te}-${B}T${ce}:${De}`},ye=n.lead?"Lead":n.account?"Account":"Lead",Pe=n.lead?n.lead.id:n.account?n.account.id:null,Ce=ye==="Lead"?null:n.contact?"Contact":n.deal?"Deal":n.quote?"Quote":"Contact",Qe=ye==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:n.quote?n.quote.id:null;Te({subject:n.subject||"",call_time:ge(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:ye,relatedType2:Ce,relatedTo1:Pe?String(Pe):"",relatedTo2:Qe?String(Qe):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),j(!0),N(n.id),s(null),t(!0)},children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const ge=n.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${ge}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:n.id,name:ge}})},children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(ge=>a.jsx("button",{onClick:()=>X(ge),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${G===ge?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:ge},ge))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[G==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(go,{label:"Call Time",value:E8(n.call_time)}),a.jsx(go,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(go,{label:"Direction",value:n.direction||"--"}),a.jsx(go,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(go,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(go,{label:"Account",value:n.account.name}),n.contact&&a.jsx(go,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(go,{label:"Deal",value:n.deal.name}),n.quote&&a.jsx(go,{label:"Quote",value:Ne(n.quote.quote_id)}),a.jsx(go,{label:"Created At",value:E8(n.created_at)})]})}),G==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]}),a.jsx(Tn,{comments:re,onAddComment:we})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:ge=>A(ge.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:Ie,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,jt=e?a.jsx("div",{id:"modalBackdrop",onClick:ge=>ge.target.id==="modalBackdrop"&&qe(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{qe(),Le(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:me,noValidate:!0,children:[a.jsx(U7e,{label:"Subject",className:"md:col-span-2",name:"subject",value:oe.subject,onChange:ve,isSubmitted:$e,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:ve,value:oe.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(lT,{items:Array.isArray(o)?o:[],value:oe.relatedTo1??"",placeholder:`Search ${oe.relatedType1||"here"}...`,getLabel:ge=>oe.relatedType1==="Lead"?ge.title:ge.name??"",onChange:ge=>Te(ye=>({...ye,relatedTo1:ge})),required:!0,isSubmitted:$e,disabled:w})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:ve,value:oe.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:oe.relatedType1==="Lead"||w,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]}),a.jsx(lT,{disabled:oe.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:oe.relatedTo2??"",placeholder:oe.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${oe.relatedType2||"Contact"}...`:`No ${oe.relatedType2||""} data found`,getLabel:ge=>oe.relatedType2==="Contact"?`${ge.first_name??""} ${ge.last_name??""}`.trim():oe.relatedType2==="Quote"?Ne(ge.quote_id)??"":ge.name??"",onChange:ge=>Te(ye=>({...ye,relatedTo2:ge}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:oe.call_time,onChange:ve,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:oe.duration_minutes,onChange:ve,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500 font-semibold",children:"*"})]}),a.jsx(lT,{items:Array.isArray(p)?p:[],value:oe.assigned_to??"",placeholder:"Search an account...",getLabel:ge=>`${ge.first_name} ${ge.last_name}`,onChange:ge=>Te(ye=>({...ye,assigned_to:ge})),required:!0,isSubmitted:$e})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:ve,value:oe.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:ve,value:oe.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(B7e,{className:"col-span-2",label:"Notes",value:oe.notes,onChange:ve,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{qe(),Le(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Te(be),j(!1),N(null),t(!0),Le(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:ie.map(ge=>a.jsx(F7e,{...ge},ge.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:le})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:Fe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),$7e.map(ge=>a.jsx("option",{value:ge.value,children:ge.label},ge.value))]}),a.jsxs("select",{defaultValue:ke,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),xe.map(ge=>a.jsx("option",{value:ge.name,children:ge.name},ge.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:W.size>0&&W.size===Ze.filter(ge=>ge.call_creator?.id===Y?.id).length&&Ze.filter(ge=>ge.call_creator?.id===Y?.id).length>0,onChange:Ct,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:W.size>0&&a.jsx("button",{onClick:kt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:Q,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:O?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10",children:a.jsx(Wt,{message:"Loading calls..."})})}):Ze.length>0?Ze.map(ge=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4",children:Y?.id===ge.call_creator?.id&&a.jsx("input",{type:"checkbox",checked:W.has(ge.id),onChange:ye=>{ye.stopPropagation(),ot(ge.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",onClick:()=>Re(ge),children:ge.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",onClick:()=>Re(ge),children:[ge.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.lead.title}),ge.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.account.name}),ge.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[ge.contact.first_name," ",ge.contact.last_name]}),ge.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:ge.deal.name}),ge.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(ge.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>Re(ge),children:ge.call_time?new Date(ge.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",onClick:()=>Re(ge),children:ge?.call_assign_to?`${ge.call_assign_to.first_name} ${ge.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>Re(ge),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k8(ge.status)}`,children:oT(ge.status)})}),a.jsx("td",{className:"py-3 px-4"})]},ge.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(la,{totalItems:Ve.length,pageSize:it,currentPage:He,onPrev:()=>Xe(ge=>Math.max(1,ge-1)),onNext:()=>Xe(ge=>ge+1),onPageSizeChange:ge=>{ze(ge),Xe(1)},pageSizeOptions:[10,20,30,40,50],label:"calls"})]}),At,jt,r&&a.jsx(H7e,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:rt,onCancel:st,loading:_})]})}function F7e({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function U7e({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!n;return a.jsxs("div",{className:u,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function B7e(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function go({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function H7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function lT({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const L8=["Not started","In progress","Deferred","Completed"],P8={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},CJ=e=>e&&(P8[e]||P8[String(e).toUpperCase()])||"Not started",q7e=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},cT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},G7e=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),CJ(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:h}},W7e=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const z=String(W).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,j=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,N=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",k="",T="Lead",A="",E="",M="";const O=c(),I=v(),D=l(),H=x();if(O){w="Account",T="Account",A=I,S=String(O);const W=u(),z=d(),Q=j(),J=b(),Y=h(),re=N();W?(_="Contact",E="Contact",M=Q,k=String(W)):z?(E="Deal",_="Deal",M=J,k=String(z)):Y&&(E="Quote",_="Quote",M=re,k=String(Y))}else D?(T="Lead",A=H,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:CJ(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:E,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:k}};function V7e(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[n,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState([]),[p,x]=f.useState(!0),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[_,k]=f.useState([]),[T,A]=f.useState(1),[E,M]=f.useState(10),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState([]),[Q,J]=f.useState(null),Y=Tt(),re=Jt(),[we,Z]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ne,pe]=f.useState(null),Ne=Ux(Ff(sm,{activationConstraint:{distance:8}})),de=G=>{const{active:X}=G,ve=d.find($e=>$e.id===X.id);J(ve)},be=async G=>{const{active:X,over:ve}=G;if(J(null),!ve)return;const $e=X.id,Le=ve.id,me=d.find(Re=>Re.id===$e);if(!(!me||me.status===Le)){h(Re=>Re.map(qe=>qe.id===$e?{...qe,status:Le}:qe));try{const Re={title:me.title,description:me.description||"",priority:me.priority||"Normal",status:Le,due_date:me.dueDate||null,assigned_to:me.assignedToId||null,related_type_1:me.relatedType1||null,related_to_1:me.relatedTo1?parseInt(me.relatedTo1,10):null,related_type_2:me.relatedType2||null,related_to_2:me.relatedTo2?parseInt(me.relatedTo2,10):null};(!Re.related_to_1||isNaN(Re.related_to_1))&&(Re.related_to_1=null),(!Re.related_to_2||isNaN(Re.related_to_2))&&(Re.related_to_2=null),await se.put(`/tasks/${$e}`,Re),V.success(`Task moved to "${Le}"`)}catch(Re){console.error("Failed to update task status:",Re),V.error("Failed to update task status"),h(qe=>qe.map(rt=>rt.id===$e?{...rt,status:me.status}:rt))}}},oe=()=>{J(null)};f.useEffect(()=>{const G=re.state?.openTaskModal,X=re.state?.initialTaskData,ve=re.state?.taskID;G?(i(!0),X&&Z($e=>({...$e,...X})),Y(re.pathname,{replace:!0,state:{}})):ve&&(pe(ve),Y(re.pathname,{replace:!0,state:{}}))},[re,Y]),f.useEffect(()=>{if(ne&&d.length>0&&!p){const G=d.find(X=>X.id===ne);G?xe(G,!0):V.error("Task not found."),pe(null)}},[ne,d,p]);const Te=async()=>{try{const G=await se.get("/users/all");k(Array.isArray(G.data)?G.data:[])}catch(G){console.error("Failed to fetch users:",G),V.error("Failed to fetch users.")}},ue=async()=>{try{x(!0);const G=await se.get("/tasks/all"),ve=(Array.isArray(G.data)?G.data:[]).map(W7e);ve.sort(($e,Le)=>{const me=$e.createdAt?new Date($e.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-me}),h(ve),n==="list"&&A(1)}catch(G){console.error("Failed to load tasks:",G),V.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(Te(),ue())},[t,e]);const Oe=()=>{l(null),Z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},xe=(G=null,X=!1)=>{l(G),u(X),G?Z({id:G.id,subject:G.title||"",description:G.description||"",priority:G.priority||"Normal",status:G.status||"Not started",dueDate:q7e(G.dueDate),assignedTo:G.assignedToId?String(G.assignedToId):"",assignedToName:G.assignedToName||"",createdBy:G.createdBy||"",notes:G.notes||"",relatedType1Text:G.relatedType1Text||"",relatedTo1Text:G.relatedTo1Text||"",relatedType2Text:G.relatedType2Text||"",relatedTo2Text:G.relatedTo2Text||"",relatedType1:G.relatedType1||"",relatedTo1:G.relatedTo1||"",relatedType2:G.relatedType2||"",relatedTo2:G.relatedTo2||""}):Oe(),i(!0)},le=()=>{i(!1),l(null),u(!1),Oe()},Fe=async G=>{const X=G7e(G);try{o&&!c?(await se.put(`/tasks/${o.id}`,X),V.success("Task updated successfully.")):(await se.post("/tasks/create",X),V.success("Task created successfully.")),i(!1),await ue()}catch(ve){console.error("Failed to save task:",ve);const $e=ve.response?.data?.detail||"Failed to save task.";V.error($e)}},ke=G=>{G&&I({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:G.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id}})},He=()=>{if(Ze.every(G=>W.includes(G.id)))z(W.filter(G=>!Ze.map(X=>X.id).includes(G)));else{const G=Ze.map(X=>X.id);z([...new Set([...W,...G])])}},Xe=G=>{z(X=>X.includes(G)?X.filter(ve=>ve!==G):[...X,G])},it=async()=>{W.length!==0&&I({title:"Delete Tasks",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},ze=async()=>{if(!O?.action){I(null);return}const{action:G}=O;H(!0);try{G.type==="delete"?(await se.delete(`/tasks/${G.targetId}`),V.success("Task deleted successfully."),await ue()):G.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:G.task_ids}}),V.success(`Successfully deleted ${G.task_ids.length} tasks`),z([]),await ue())}catch(X){console.error("Task action failed:",X),V.error("Failed to delete task.")}finally{H(!1),I(null)}},at=()=>{D||I(null)},Ve=f.useMemo(()=>{const G=v.trim().toLowerCase();return[...d].sort((ve,$e)=>{const Le=ve.createdAt?new Date(ve.createdAt):0;return($e.createdAt?new Date($e.createdAt):0)-Le}).filter(ve=>{const $e=G===""||ve.title?.toLowerCase().includes(G)||ve.description?.toLowerCase().includes(G)||ve.assignedToName?.toLowerCase().includes(G)||ve.createdBy?.toLowerCase().includes(G),Le=b==="Filter by Status"||ve.status===b,me=w==="Filter by Priority"||ve.priority===w;return $e&&Le&&me})},[d,v,b,w]);f.useEffect(()=>{A(1)},[v,b,w,n,E]),f.useEffect(()=>{if(n==="list"){const G=Ve.length===0?1:Math.ceil(Ve.length/E);T>G&&A(G)}},[Ve.length,T,n,E]);const Ze=f.useMemo(()=>{if(n==="board")return Ve;const G=(T-1)*E;return Ve.slice(G,G+E)},[Ve,T,n,E]),Je=f.useMemo(()=>{const G=new Date;return[{title:"To Do",value:d.filter(X=>X.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(X=>X.status==="In progress").length,icon:Yi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(X=>X.status==="Completed").length,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(X=>X.dueDate&&new Date(X.dueDate)<G&&X.status!=="Completed").length,icon:Qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(X=>X.priority==="High").length,icon:Jl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Ue=G=>G.dueDate&&new Date(G.dueDate)<new Date&&G.status!=="Completed",_e=G=>{switch(G.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},he=G=>{switch(G){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ie=G=>{switch(G){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(Wt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Yi,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>xe(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(ta,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(G=>a.jsx(Y7e,{...G},G.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:G=>j(G.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:G=>N(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),L8.map(G=>a.jsx("option",{children:G},G))]}),a.jsxs("select",{value:w,onChange:G=>S(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(Ve.length>0?a.jsxs(qx,{sensors:Ne,collisionDetection:Bx,onDragStart:de,onDragEnd:be,onDragCancel:oe,children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:L8.map(G=>{const X=Ze.filter(ve=>ve.status===G);return a.jsx(K7e,{column:G,columnTasks:X,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:cT,handleOpenModal:xe,handleDeleteTask:ke},G)})}),a.jsx(kN,{children:Q?a.jsx(Z7e,{task:Q,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:cT}):null})]}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ze.length>0&&Ze.every(G=>W.includes(G.id)),onChange:He})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?a.jsx("button",{onClick:it,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Ze.length>0?Ze.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:X=>X.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(G.id),onChange:()=>Xe(G.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>xe(G,!0),children:G.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${he(G.status||"Not started")}`,children:G.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ie(G.priority||"Low")}`,children:G.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>xe(G,!0),children:G.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ue(G)?"text-red-600 font-medium":""}`,onClick:()=>xe(G,!0),children:G.dateAssigned?cT(G.dateAssigned):""}),a.jsx("td",{})]},G.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(la,{className:"mt-6",totalItems:Ve.length,pageSize:E,currentPage:Ve.length===0?0:T,onPrev:()=>A(G=>Math.max(G-1,1)),onNext:()=>A(G=>Math.min(G+1,Math.max(1,Math.ceil(Ve.length/E)||1))),onPageSizeChange:G=>{M(G),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(v0,{isOpen:r,onClose:le,onSave:Fe,onEdit:()=>u(!1),setFormData:Z,formData:we,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ke}),O&&a.jsx(Q7e,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:ze,onCancel:at,loading:D})]})}function Y7e({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function Q7e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function K7e({column:e,columnTasks:t,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return a.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),a.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>a.jsx(X7e,{task:u,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):a.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function X7e({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=Gx({id:e.id}),h=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return a.jsxs("div",{ref:c,style:h,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[a.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(hn,{})}),a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:a.jsx(va,{})})]})]})}function Z7e({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s}){return a.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const SJ=e=>e?e.toUpperCase():"",Db=e=>{const t=SJ(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},J7e=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},e8e=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},t8e=e=>{const t=SJ(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},dT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},a8e=()=>{const e=Tt(),t=Jt(),[n]=Us(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[u,d]=f.useState([]),[h,p]=f.useState(""),[x,v]=f.useState("Filter by Status"),[j,b]=f.useState(!1),[N,w]=f.useState(null),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(dT),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState(!1),[re,we]=f.useState(null),[Z,ne]=f.useState(new Set),[pe,Ne]=f.useState(!1),{user:de}=Gt();f.useEffect(()=>{const _e=t.state?.openMeetingModal,he=t.state?.initialMeetingData?.relatedTo||n.get("id"),ie=t.state?.meetingID;_e||he?(b(!0),t.state?.initialMeetingData&&E(G=>({...G,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):ie&&(we(ie),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),f.useEffect(()=>{console.log("ManagerMeetings - Current User:",de),console.log("Current User Role:",de?.role),console.log("Is non-admin:",["GROUP MANAGER","MANAGER","SALES"].includes(de?.role?.toUpperCase()))},[de]),f.useEffect(()=>{if(re&&i.length>0&&!l){const _e=i.find(he=>he.id===re);_e?w(_e):V.error("Meeting not found."),we(null)}},[re,i,l]);const be=async()=>{if(s&&r){const _e=sessionStorage.getItem("meetingDetailData");if(_e)try{const he=JSON.parse(_e);if(he.id===parseInt(s)){w(he),sessionStorage.removeItem("meetingDetailData");return}}catch(he){console.error(he)}}c(!0);try{console.log("=== FETCH MEETINGS START ===");const _e=await se.get("/meetings/admin/fetch-all"),he=Array.isArray(_e.data)?_e.data:[];console.log("Total meetings fetched:",he.length),console.log("Meeting statuses:",he.map(G=>({id:G.id,subject:G.subject,status:G.status})));const ie=[...he].sort((G,X)=>{const ve=G?.created_at?new Date(G.created_at).getTime():0;return(X?.created_at?new Date(X.created_at).getTime():0)-ve});if(o(ie),console.log("Meetings set after sort"),console.log("=== FETCH MEETINGS COMPLETE ==="),s&&!N){const G=ie.find(X=>X.id===parseInt(s));G&&w(G)}}catch(_e){console.error("fetchMeetings error:",_e),V.error("Failed to load meetings.")}finally{c(!1)}},oe=async()=>{try{const _e=await se.get("/users/all");d(Array.isArray(_e.data)?_e.data:[])}catch(_e){console.error(_e)}};f.useEffect(()=>{be(),oe()},[]);const Te=_e=>p(_e.target.value),Oe=["GROUP MANAGER","MANAGER","SALES"].includes(de?.role?.toUpperCase()),xe=Oe?i.filter(_e=>{const he=_e.status?.toUpperCase()==="INACTIVE";return he&&console.log(`Filtering out INACTIVE meeting: ${_e.subject} (status: ${_e.status})`),!he}):i;console.log("=== FILTER SUMMARY ==="),console.log("User role:",de?.role),console.log("Is non-admin:",Oe),console.log("Total meetings:",i.length),console.log("Visible meetings after filter:",xe.length),console.log("=== END FILTER SUMMARY ===");const le=f.useMemo(()=>{const _e=h.trim().toLowerCase(),he=x.trim().toUpperCase();return xe.filter(ie=>{const G=[ie?.activity,ie?.description,ie?.relatedTo,ie?.assignedTo],X=_e===""||G.some($e=>$e&&$e.toString().toLowerCase().includes(_e)),ve=he==="FILTER BY STATUS"||Db(ie.status||"PENDING")===he;return X&&ve})},[xe,h,x]),Fe=f.useMemo(()=>{const _e=(S-1)*k;return le.slice(_e,_e+k)},[le,S]),ke=()=>{b(!1),E(dT),O(!1),D(null),W(!1)},He=()=>{E(dT),O(!1),D(null),b(!0)},Xe=_e=>{let he="";if(_e.meet_assign_to?.id)he=String(_e.meet_assign_to.id);else if(_e.assignedTo){const qe=u.find(rt=>`${rt.first_name} ${rt.last_name}`===_e.assignedTo);he=qe?String(qe.id):""}const ie=qe=>{if(!qe)return"";try{const rt=new Date(qe),st=rt.getTimezoneOffset()*6e4;return new Date(rt.getTime()-st).toISOString().slice(0,16)}catch{return""}};let G="Lead",X="",ve="Contact",$e="";if(_e.lead)G="Lead",X=String(_e.lead.id);else if(_e.account)G="Account",X=String(_e.account.id),_e.contact?(ve="Contact",$e=String(_e.contact.id)):_e.deal?(ve="Deal",$e=String(_e.deal.id)):_e.quote&&(ve="Quote",$e=String(_e.quote.id));else if(_e.relatedType||_e.related_type){const qe=_e.relatedType||_e.related_type,rt=_e.related_to||_e.relatedToId;qe==="Lead"?(G="Lead",X=String(rt)):(G="Account",X=_e.account_id?String(_e.account_id):"")}const Le={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},me=Db(_e.status),Re=Le[me]||"Planned";E({subject:_e.subject||_e.activity||"",location:_e.location||"",startTime:ie(_e.start_time||_e.startTime),endTime:ie(_e.end_time||_e.endTime),status:Re,notes:_e.description||_e.notes||"",assignedTo:he,relatedType1:G,relatedTo1:X,relatedType2:ve,relatedTo2:$e}),O(!0),D(_e.id),w(null),b(!0)},it=_e=>{if(!_e.subject?.trim())return V.error("Subject is required.");if(!_e.startTime)return V.error("Start time is required.");if(_e.endTime&&!(new Date(_e.endTime)-new Date(_e.startTime)>0))return V.error("End time must be after start time.");_e.relatedType1,_e.relatedTo1,_e.relatedType1==="Account"&&_e.relatedType2&&_e.relatedTo2&&(_e.relatedType2,_e.relatedTo2);const he={..._e,assignedTo:parseInt(_e.assignedTo),relatedTo1:parseInt(_e.relatedTo1),relatedTo2:parseInt(_e.relatedTo2)},ie=M&&I?"update":"create";Q({title:ie==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${ie} "${he.subject}"?`,confirmLabel:ie==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:ie,payload:he,targetId:I,name:he.subject}})},ze=async()=>{if(!z?.action)return;const{type:_e,payload:he,targetId:ie,name:G,targetIds:X,count:ve}=z.action;Y(!0);try{if(_e==="create")W(!0),await se.post("/meetings/create",he),V.success(`Meeting "${G}" created.`),ke(),await be();else if(_e==="update")W(!0),await se.put(`/meetings/${ie}`,he),V.success(`Meeting "${G}" updated.`),ke(),await be();else if(_e==="delete"){console.log("=== ARCHIVE FLOW START ==="),console.log("Archiving meeting:",ie),console.log("Meeting name:",G);try{const $e=await se.delete(`/meetings/${ie}`);console.log("Archive API response:",$e),console.log("Response data:",$e.data),V.success(`Meeting "${G}" archived successfully.`),N?.id===ie&&w(null),console.log("Calling fetchMeetings to refresh list..."),await be(),console.log("=== ARCHIVE FLOW COMPLETE ===")}catch($e){throw console.error("Archive failed:",$e),$e}}else if(_e==="bulk-delete"){if(!X||X.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");console.log("Bulk archiving meetings:",X),Ne(!0),await se.put("/meetings/bulk-archive",{meeting_ids:X}),V.success(`${ve} meeting${ve!==1?"s":""} archived successfully.`),ne(new Set),await be(),N&&Z.has(N.id)&&w(null)}}catch($e){console.error("Error in handleConfirmAction:",$e),console.error("Error response:",$e?.response),console.error("Error details:",$e?.response?.data);const Le=_e==="create"?"Failed to create meeting. Please review the details and try again.":_e==="update"?"Failed to update meeting. Please review the details and try again.":_e==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to delete meeting. Please try again.",me=$e?.response?.data?.detail||Le;V.error(me)}finally{(_e==="create"||_e==="update")&&W(!1),_e==="bulk-delete"&&Ne(!1),Y(!1),Q(null)}},at=_e=>{console.log("Delete button clicked for meeting:",_e),console.log("Meeting created_by:",_e.created_by),console.log("Current user ID:",de?.id),console.log("Can delete?:",_e.created_by===de?.id),Q({title:"Archive Meeting",message:`Are you sure you want to archive "${_e.subject||_e.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:_e.id,name:_e.subject||_e.activity}})},Ve=async(_e,he)=>{try{await se.put(`/meetings/${_e}`,{status:he}),V.success("Status updated"),be(),w(null)}catch{V.error("Failed to update status")}},Ze=_e=>{const he=Fe.find(ie=>ie.id===_e);he&&he.created_by===de?.id&&ne(ie=>{const G=new Set(ie);return G.has(_e)?G.delete(_e):G.add(_e),G})},Je=()=>{const _e=Fe.filter(he=>he.created_by===de?.id);Z.size===_e.length?ne(new Set):ne(new Set(_e.map(he=>he.id)))},Ue=()=>{if(Z.size===0)return;const _e=Z.size;Q({title:"Archive Meetings",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:_e})," meeting",_e!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${_e} Meeting${_e!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(Z),count:_e}})};return r&&s?N?a.jsx(vd,{meeting:N,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:Xe,onDelete:at,onStatusUpdate:Ve,currentUser:de,isSalesView:!0}):a.jsx(Wt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(Wt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Dt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:He,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(ta,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:Te,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:_e=>v(_e.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:Z.size===Fe.filter(_e=>_e.created_by===de?.id).length&&Fe.filter(_e=>_e.created_by===de?.id).length>0,onChange:Je,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:Z.size>0&&a.jsx("button",{onClick:Ue,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:pe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:Fe.length>0?Fe.map(_e=>a.jsxs("tr",{onClick:()=>w(_e),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4",onClick:he=>he.stopPropagation(),children:de?.id===_e.created_by&&a.jsx("input",{type:"checkbox",checked:Z.has(_e.id),onChange:he=>{he.stopPropagation(),Ze(_e.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:_e.subject}),a.jsxs("td",{className:"py-3 px-4",children:[_e.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:_e.lead.title}),_e.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:_e.account.name}),_e.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[_e.contact.first_name," ",_e.contact.last_name]}),_e.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:_e.deal.name}),_e.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:J7e(_e.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4",children:e8e(_e.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[_e.meet_assign_to.first_name," ",_e.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t8e(Db(_e.status))}`,children:Db(_e.status).replace("_"," ")})})]},_e.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(la,{totalItems:le.length,pageSize:k,currentPage:S,onPrev:()=>_(_e=>Math.max(1,_e-1)),onNext:()=>_(_e=>_e+1),onPageSizeChange:_e=>{T(_e),_(1)},pageSizeOptions:[10,20,30,40,50],label:"meetings"}),j&&a.jsx(T1,{onClose:ke,formData:A,setFormData:E,isEditing:M,onSubmit:it,isSubmitting:H||J,users:u}),N&&a.jsx(vd,{meeting:N,onClose:()=>w(null),onEdit:Xe,onDelete:at,onStatusUpdate:Ve,currentUser:de,isSalesView:!0}),z&&a.jsx(n8e,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,variant:z.variant,onConfirm:ze,onCancel:()=>Q(null),loading:J})]})};function n8e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const k1=[{value:"CEO",label:"CEO"},{value:"Admin",label:"Admin"},{value:"Group Manager",label:"Group Manager"},{value:"Manager",label:"Manager"},{value:"Marketing",label:"Marketing"},{value:"Sales",label:"Sales"}],Eg={firstName:"",lastName:"",email:"",password:"",role:""},s8e={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},Ao=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",r8e=e=>{const t=Ao(e),n=k1.find(s=>Ao(s.value)===t);return n?n.value:e||""},aL=e=>{const t=Ao(e),n=k1.find(s=>Ao(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},D8=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},uT=(e,{size:t="sm"}={})=>{const n=Ao(e),s=s8e[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:aL(e)})},i8e=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},O8=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function o8e(){const{user:e,loading:t}=Gt(),[n,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,u]=f.useState(""),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(Eg),[_,k]=f.useState(!1),[T,A]=f.useState(null),[E,M]=f.useState(!1),[O,I]=f.useState(1),[D,H]=f.useState(10),[W,z]=f.useState("Overview"),[Q,J]=f.useState(""),[Y,re]=f.useState(!1),we=Ao(e?.role),Z=["ADMIN","CEO","GROUP MANAGER","MANAGER"].includes(we),ne=!t&&Z,pe=f.useMemo(()=>{const ie=k1.filter(G=>Ao(G.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ie]},[]),Ne=f.useCallback(ie=>{ie&&(s(G=>G.map(X=>X.id===ie?{...X,highlight:!0}:X)),setTimeout(()=>{s(G=>G.map(X=>X.id===ie?{...X,highlight:!1}:X))},2e3))},[]),de=f.useCallback(async()=>{i(!0);try{const ie=await se.get("/users/all"),G=Array.isArray(ie.data)?ie.data:[],X=O8(G);s(X),h(ve=>ve&&(X.find(Le=>Le.id===ve.id)||null)),console.log(ie.data)}catch(ie){console.error("Error fetching users:",ie);const G=ie.response?.data?.detail||"Failed to load users. Please try again later.";V.error(G)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!Z&&e&&V.error("You are not authorized to access User Management.")},[Z,t,e]),f.useEffect(()=>{t||!Z||de()},[t,Z,de]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const be=f.useMemo(()=>{const ie=o.trim().toLowerCase(),G=Ao(c);return O8(n.filter(X=>{if(!X)return!1;const ve=ie===""||[X.first_name,X.last_name,`${X.first_name||""} ${X.last_name||""}`,X.email,aL(X.role)].filter(Boolean).some(Le=>Le.toString().toLowerCase().includes(ie)),$e=G===""||G==="CEO"&&["CEO","ADMIN"].includes(Ao(X.role))||Ao(X.role)===G;return ve&&$e}))},[n,o,c]),oe=Math.max(1,Math.ceil(be.length/D)||1);f.useEffect(()=>{I(1)},[o,c]),f.useEffect(()=>{I(ie=>{const G=Math.max(1,Math.ceil(be.length/D)||1);return ie>G?G:ie})},[be.length]);const Te=f.useMemo(()=>{const ie=(O-1)*D;return be.slice(ie,ie+D)},[be,O]);be.length===0||(O-1)*D+1,Math.min(O*D,be.length);const ue=()=>I(ie=>Math.max(ie-1,1)),Oe=()=>I(ie=>Math.min(ie+1,oe)),xe=()=>{S(Eg),j(!1),N(null),x(!0)},le=ie=>{console.log(ie),h(ie),z("Overview"),J(ie?.is_active?"Active":"Inactive")},Fe=ie=>{ie.target.id==="userModalBackdrop"&&!E&&ke()},ke=()=>{h(null)},He=(ie,G)=>{S(X=>({...X,[ie]:G}))},Xe=()=>{const ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let G="";for(let X=0;X<10;X+=1)G+=ie.charAt(Math.floor(Math.random()*ie.length));He("password",G)},it=()=>{_||E||(x(!1),S(Eg),N(null),j(!1))},ze=ie=>{S({firstName:ie.first_name||"",lastName:ie.last_name||"",email:ie.email||"",password:"",role:r8e(ie.role)}),j(!0),N(ie.id),x(!0),h(null)},at=ie=>{A({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[ie.first_name," ",ie.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ie.id,name:`${ie.first_name||""} ${ie.last_name||""}`.trim()||ie.email||"user"}})},Ve=ie=>{ie.preventDefault();const G=w.firstName.trim(),X=w.lastName.trim(),ve=w.email.trim(),$e=w.password.trim(),Le="Sales",me=!(v&&b);if(!G||!ve||!Le){V.warn("Please fill in all required fields.");return}if(me&&!$e){V.warn("Please fill in all required fields.");return}if($e&&$e.length<8){V.warn("Password should be at least 8 characters long.");return}const Re={first_name:G,last_name:X,email:ve,role:Le};console.log(Re),(me||$e)&&(Re.password=$e);const qe=`${G} ${X}`.trim(),rt=me?"create":"update";A({title:rt==="create"?"Confirm New User":"Confirm User Update",message:rt==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:qe})," with role"," ",a.jsx("span",{className:"font-semibold",children:aL(Le)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:qe||ve}),"?"]}),confirmLabel:rt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:rt,payload:Re,targetId:b,name:qe||ve}})},Ze=async()=>{if(!T?.action){A(null);return}const{action:ie}=T,{type:G,payload:X,targetId:ve,name:$e}=ie;M(!0),(G==="create"||G==="update")&&k(!0);try{if(G==="create"){const me=(await se.post("/users/createuser",X)).data;await de(),Ne(me.id),V.success(`User "${$e}" created successfully.`),x(!1),S(Eg),N(null),j(!1)}else if(G==="update"){if(!ve)throw new Error("Missing user identifier for update.");const me=(await se.put(`/users/updateuser/${ve}`,X)).data;await de(),h(null),Ne(me.id),V.success(`User "${$e}" updated successfully.`),x(!1),S(Eg),N(null),j(!1)}else if(G==="delete"){if(!ve)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${ve}`),s(Le=>Le.map(me=>me.id===ve?{...me,is_active:!1}:me)),d&&d.id===ve&&(h(null),J("")),V.success(`User "${$e}" deactivated successfully.`)}}catch(Le){console.error("User management error:",Le);const me=G==="create"?"Failed to create user. Please review the details and try again.":G==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Re=Le.response?.data?.detail||me;V.error(Re)}finally{(G==="create"||G==="update")&&k(!1),M(!1),A(null)}},Je=()=>{E||A(null)},Ue=async()=>{if(!d||!Q)return;const ie=d.is_active?"Active":"Inactive";if(Q===ie)return;const G=Q==="Active";re(!0);try{const ve=(await se.put(`/users/updateuser/${d.id}`,{is_active:G})).data;s($e=>$e.map(Le=>Le.id===ve.id?ve:Le)),h(null),J(""),V.success(`User status updated to ${Q}`)}catch(X){console.error("Failed to update user status:",X);const ve=X.response?.data?.detail||"Failed to update user status. Please try again.";V.error(ve)}finally{re(!1)}},_e=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!ne)&&a.jsx(Wt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(pj,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:xe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Xa,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ie=>l(ie.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:ie=>u(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:pe.map(ie=>a.jsx("option",{value:ie.value,children:ie.label},ie.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):be.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Te.map(ie=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ie.highlight?"bg-green-50":""} ${ie.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ie.first_name," ",ie.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>le(ie),children:ie.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:uT(ie.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ie.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ie.is_active?"Active":"Inactive"})})]},ie.id))})]})}),a.jsx(la,{className:"mt-4",totalItems:be.length,pageSize:D,currentPage:O,onPrev:ue,onNext:Oe,onPageSizeChange:ie=>{H(ie),I(1)},pageSizeOptions:[10,20,30,40,50],label:"users"})]}),he=d?a.jsx("div",{id:"userModalBackdrop",onClick:Fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:ke,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Za,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?a.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:i8e(d.first_name,d.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),uT(d.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(d.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ze(d),disabled:E,children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>at(d),disabled:E,children:[a.jsx(va,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ie=>a.jsx("button",{onClick:()=>z(ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ie?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ie},ie))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:uT(d.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,ie=>ie.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:d.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:d.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:D8(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:d.last_login?D8(d.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:d.profile_picture?a.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const ie=encodeURIComponent(d.email),G=encodeURIComponent(""),X=encodeURIComponent(""),ve=`https://mail.google.com/mail/?view=cm&fs=1&to=${ie}&su=${G}&body=${X}`;window.open(ve,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(d.is_active?"Active":"Inactive"),onChange:ie=>J(ie.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:Ue,disabled:Y||Q===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||Q===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[_e,he,a.jsx(l8e,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:E,formData:w,onClose:it,onSubmit:Ve,onChange:He,onGeneratePassword:Xe}),a.jsx(c8e,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:E,onConfirm:Ze,onCancel:Je})]})}function l8e({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(Ob,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),a.jsx(Ob,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),a.jsx(Ob,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),a.jsx(Ob,{label:"Role",type:"select",disabled:!0,value:"Sales",onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...k1],required:!0}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function Ob({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function c8e({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function d8e({toggleSidebar:e}){const[t,n]=f.useState(!1),s=f.useRef(null),r=Jt(),{logout:i}=Ks(),{user:o,fetchUser:l}=Gt(),c={"/marketing/dashboard":"Dashboard","/marketing/contacts":"Contacts","/marketing/accounts":"Accounts","/marketing/leads":"Leads","/marketing/tasks":"Tasks","/marketing/campaigns":"Campaign","/marketing/templates":"Templates"};f.useEffect(()=>{l()},[]);const u=c[r.pathname]||"Marketing Panel";return f.useEffect(()=>{function d(h){s.current&&!s.current.contains(h.target)&&n(!1)}return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-6 py-3 border-b relative",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Jf,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:u})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("button",{className:"relative text-gray-600 hover:text-gray-800",children:[a.jsx(ux,{className:"text-xl"}),a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-4 h-4 flex items-center justify-center rounded-full",children:"3"})]}),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",children:[a.jsx("img",{src:o?.profile_picture,alt:"",className:"w-8 aspect-square object-cover rounded-full"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[o?.first_name," ",o?.last_name]})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-gray-100 shadow-lg rounded border z-50",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("button",{className:"px-4 py-2 text-sm hover:bg-gray-200 text-left",children:"Manage Account"}),a.jsx("div",{className:"border-t my-1"}),a.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-red-500 text-white rounded mx-2 my-2 hover:bg-red-600",children:"Logout"})]})})]})]})]})}function u8e(){const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Jt(),{fetchUser:u}=Gt();f.useEffect(()=>{u()},[]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition",p=["/marketing/campaigns","/marketing/templates"],x=["/marketing/accounts","/marketing/contacts","/marketing/leads"],v=["/marketing/tasks"],j=p.includes(c.pathname),b=x.includes(c.pathname),N=v.includes(c.pathname);return f.useEffect(()=>{j&&t(!0),b&&s(!0),N&&i(!0)},[j,b,N]),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsx("div",{className:"bg-[#fbbf24] text-gray-900 font-bold text-xl px-6 py-4.5 tracking-wide",children:"Marketing CRM"}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[a.jsxs(Ut,{to:"/marketing/dashboard",className:({isActive:w})=>w?d:h,children:[a.jsx(mx,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-lg"}),"Sales"]}),a.jsx(Lt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/marketing/accounts",className:({isActive:w})=>w?d:h,children:[a.jsx(rn,{})," Accounts"]}),a.jsxs(Ut,{to:"/marketing/contacts",className:({isActive:w})=>w?d:h,children:[a.jsx(sa,{})," Contacts"]}),a.jsxs(Ut,{to:"/marketing/leads",className:({isActive:w})=>w?d:h,children:[a.jsx(Xa,{})," Leads"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(mr,{className:"text-lg"}),"Tools"]}),a.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/marketing/campaigns",className:({isActive:w})=>w?d:h,children:[a.jsx(ak,{})," Campaign"]}),a.jsxs(Ut,{to:"/marketing/templates",className:({isActive:w})=>w?d:h,children:[a.jsx(jL,{})," Templates"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"text-lg"}),"Activity"]}),a.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsx("div",{className:"ml-6 mt-2 space-y-1",children:a.jsxs(Ut,{to:"/marketing/tasks",className:({isActive:w})=>w?d:h,children:[a.jsx(Yt,{})," Tasks"]})})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Marketing CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(d8e,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto",style:{backgroundColor:"#fffeee"},children:a.jsx(nx,{})})]})]})}function w0(e){return e+.5|0}const ad=(e,t,n)=>Math.max(Math.min(e,n),t);function Xg(e){return ad(w0(e*2.55),0,255)}function cd(e){return ad(w0(e*255),0,255)}function Al(e){return ad(w0(e/2.55)/100,0,1)}function M8(e){return ad(w0(e*100),0,100)}const oi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nL=[..."0123456789ABCDEF"],m8e=e=>nL[e&15],f8e=e=>nL[(e&240)>>4]+nL[e&15],Mb=e=>(e&240)>>4===(e&15),h8e=e=>Mb(e.r)&&Mb(e.g)&&Mb(e.b)&&Mb(e.a);function g8e(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&oi[e[1]]*17,g:255&oi[e[2]]*17,b:255&oi[e[3]]*17,a:t===5?oi[e[4]]*17:255}:(t===7||t===9)&&(n={r:oi[e[1]]<<4|oi[e[2]],g:oi[e[3]]<<4|oi[e[4]],b:oi[e[5]]<<4|oi[e[6]],a:t===9?oi[e[7]]<<4|oi[e[8]]:255})),n}const p8e=(e,t)=>e<255?t(e):"";function x8e(e){var t=h8e(e)?m8e:f8e;return e?"#"+t(e.r)+t(e.g)+t(e.b)+p8e(e.a,t):void 0}const y8e=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _J(e,t,n){const s=t*Math.min(n,1-n),r=(i,o=(i+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function b8e(e,t,n){const s=(r,i=(r+e/60)%6)=>n-n*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function v8e(e,t,n){const s=_J(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)s[r]*=1-t-n,s[r]+=t;return s}function w8e(e,t,n,s,r){return e===r?(t-n)/s+(t<n?6:0):t===r?(n-e)/s+2:(e-t)/s+4}function a3(e){const n=e.r/255,s=e.g/255,r=e.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),l=(i+o)/2;let c,u,d;return i!==o&&(d=i-o,u=l>.5?d/(2-i-o):d/(i+o),c=w8e(n,s,r,d,i),c=c*60+.5),[c|0,u||0,l]}function n3(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(cd)}function s3(e,t,n){return n3(_J,e,t,n)}function j8e(e,t,n){return n3(v8e,e,t,n)}function N8e(e,t,n){return n3(b8e,e,t,n)}function AJ(e){return(e%360+360)%360}function C8e(e){const t=y8e.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Xg(+t[5]):cd(+t[5]));const r=AJ(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=j8e(r,i,o):t[1]==="hsv"?s=N8e(r,i,o):s=s3(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function S8e(e,t){var n=a3(e);n[0]=AJ(n[0]+t),n=s3(n),e.r=n[0],e.g=n[1],e.b=n[2]}function _8e(e){if(!e)return;const t=a3(e),n=t[0],s=M8(t[1]),r=M8(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${r}%, ${Al(e.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const I8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function A8e(){const e={},t=Object.keys($8),n=Object.keys(I8);let s,r,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],r=0;r<n.length;r++)i=n[r],l=l.replace(i,I8[i]);i=parseInt($8[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let Ib;function T8e(e){Ib||(Ib=A8e(),Ib.transparent=[0,0,0,0]);const t=Ib[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const k8e=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function E8e(e){const t=k8e.exec(e);let n=255,s,r,i;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Xg(o):ad(o*255,0,255)}return s=+t[1],r=+t[3],i=+t[5],s=255&(t[2]?Xg(s):ad(s,0,255)),r=255&(t[4]?Xg(r):ad(r,0,255)),i=255&(t[6]?Xg(i):ad(i,0,255)),{r:s,g:r,b:i,a:n}}}function L8e(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Al(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const mT=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,nf=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function P8e(e,t,n){const s=nf(Al(e.r)),r=nf(Al(e.g)),i=nf(Al(e.b));return{r:cd(mT(s+n*(nf(Al(t.r))-s))),g:cd(mT(r+n*(nf(Al(t.g))-r))),b:cd(mT(i+n*(nf(Al(t.b))-i))),a:e.a+n*(t.a-e.a)}}function $b(e,t,n){if(e){let s=a3(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=s3(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function TJ(e,t){return e&&Object.assign(t||{},e)}function R8(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=cd(e[3]))):(t=TJ(e,{r:0,g:0,b:0,a:1}),t.a=cd(t.a)),t}function D8e(e){return e.charAt(0)==="r"?E8e(e):C8e(e)}class Vp{constructor(t){if(t instanceof Vp)return t;const n=typeof t;let s;n==="object"?s=R8(t):n==="string"&&(s=g8e(t)||T8e(t)||D8e(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=TJ(this._rgb);return t&&(t.a=Al(t.a)),t}set rgb(t){this._rgb=R8(t)}rgbString(){return this._valid?L8e(this._rgb):void 0}hexString(){return this._valid?x8e(this._rgb):void 0}hslString(){return this._valid?_8e(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,r=t.rgb;let i;const o=n===i?.5:n,l=2*o-1,c=s.a-r.a,u=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-u,s.r=255&u*s.r+i*r.r+.5,s.g=255&u*s.g+i*r.g+.5,s.b=255&u*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=P8e(this._rgb,t._rgb,n)),this}clone(){return new Vp(this.rgb)}alpha(t){return this._rgb.a=cd(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=w0(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return $b(this._rgb,2,t),this}darken(t){return $b(this._rgb,2,-t),this}saturate(t){return $b(this._rgb,1,t),this}desaturate(t){return $b(this._rgb,1,-t),this}rotate(t){return S8e(this._rgb,t),this}}function jl(){}const O8e=(()=>{let e=0;return()=>e++})();function La(e){return e==null}function ss(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Na(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ci(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function po(e,t){return Ci(e)?e:t}function ua(e,t){return typeof e>"u"?t:e}const M8e=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,kJ=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function an(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function $a(e,t,n,s){let r,i,o;if(ss(e))for(i=e.length,r=0;r<i;r++)t.call(n,e[r],r);else if(Na(e))for(o=Object.keys(e),i=o.length,r=0;r<i;r++)t.call(n,e[o[r]],o[r])}function Qw(e,t){let n,s,r,i;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(r=e[n],i=t[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Kw(e){if(ss(e))return e.map(Kw);if(Na(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let r=0;for(;r<s;++r)t[n[r]]=Kw(e[n[r]]);return t}return e}function EJ(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function I8e(e,t,n,s){if(!EJ(e))return;const r=t[e],i=n[e];Na(r)&&Na(i)?Yp(r,i,s):t[e]=Kw(i)}function Yp(e,t,n){const s=ss(t)?t:[t],r=s.length;if(!Na(e))return e;n=n||{};const i=n.merger||I8e;let o;for(let l=0;l<r;++l){if(o=s[l],!Na(o))continue;const c=Object.keys(o);for(let u=0,d=c.length;u<d;++u)i(c[u],e,o,n)}return e}function dp(e,t){return Yp(e,t,{merger:$8e})}function $8e(e,t,n){if(!EJ(e))return;const s=t[e],r=n[e];Na(s)&&Na(r)?dp(s,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Kw(r))}const z8={"":e=>e,x:e=>e.x,y:e=>e.y};function R8e(e){const t=e.split("."),n=[];let s="";for(const r of t)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function z8e(e){const t=R8e(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function Vu(e,t){return(z8[t]||(z8[t]=z8e(t)))(e)}function r3(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Qp=e=>typeof e<"u",wd=e=>typeof e=="function",F8=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function F8e(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const za=Math.PI,_n=2*za,U8e=_n+za,Xw=Number.POSITIVE_INFINITY,B8e=za/180,rs=za/2,Qd=za/4,U8=za*2/3,LJ=Math.log10,$o=Math.sign;function up(e,t,n){return Math.abs(e-t)<n}function B8(e){const t=Math.round(e);e=up(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(LJ(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function H8e(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((r,i)=>r-i).pop(),t}function q8e(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Kp(e){return!q8e(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function G8e(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function W8e(e,t,n){let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s][n],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Dl(e){return e*(za/180)}function V8e(e){return e*(180/za)}function H8(e){if(!Ci(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function PJ(e,t){const n=t.x-e.x,s=t.y-e.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*za&&(i+=_n),{angle:i,distance:r}}function sL(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Y8e(e,t){return(e-t+U8e)%_n-za}function Ui(e){return(e%_n+_n)%_n}function Xp(e,t,n,s){const r=Ui(e),i=Ui(t),o=Ui(n),l=Ui(i-r),c=Ui(o-r),u=Ui(r-i),d=Ui(r-o);return r===i||r===o||s&&i===o||l>c&&u<d}function Is(e,t,n){return Math.max(t,Math.min(n,e))}function Q8e(e){return Is(e,-32768,32767)}function nd(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function i3(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const xu=(e,t,n,s)=>i3(e,n,s?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),K8e=(e,t,n)=>i3(e,n,s=>e[s][t]>=n);function X8e(e,t,n){let s=0,r=e.length;for(;s<r&&e[s]<t;)s++;for(;r>s&&e[r-1]>n;)r--;return s>0||r<e.length?e.slice(s,r):e}const DJ=["push","pop","shift","splice","unshift"];function Z8e(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),DJ.forEach(n=>{const s="_onData"+r3(n),r=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function q8(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(t);r!==-1&&s.splice(r,1),!(s.length>0)&&(DJ.forEach(i=>{delete e[i]}),delete e._chartjs)}function OJ(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const MJ=(function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame})();function IJ(e,t){let n=[],s=!1;return function(...r){n=r,s||(s=!0,MJ.call(window,()=>{s=!1,e.apply(t,n)}))}}function J8e(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const o3=e=>e==="start"?"left":e==="end"?"right":"center",Ps=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,eBe=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function tBe(e,t,n){const s=t.length;let r=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,u=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=o.axis,{min:h,max:p,minDefined:x,maxDefined:v}=o.getUserBounds();if(x){if(r=Math.min(xu(c,d,h).lo,n?s:xu(t,d,o.getPixelForValue(h)).lo),u){const j=c.slice(0,r+1).reverse().findIndex(b=>!La(b[l.axis]));r-=Math.max(0,j)}r=Is(r,0,s-1)}if(v){let j=Math.max(xu(c,o.axis,p,!0).hi+1,n?0:xu(t,d,o.getPixelForValue(p),!0).hi+1);if(u){const b=c.slice(j-1).findIndex(N=>!La(N[l.axis]));j+=Math.max(0,b)}i=Is(j,r,s)-r}else i=s-r}return{start:r,count:i}}function aBe(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=r,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Rb=e=>e===0||e===1,G8=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*_n/n)),W8=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*_n/n)+1,mp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*rs)+1,easeOutSine:e=>Math.sin(e*rs),easeInOutSine:e=>-.5*(Math.cos(za*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Rb(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Rb(e)?e:G8(e,.075,.3),easeOutElastic:e=>Rb(e)?e:W8(e,.075,.3),easeInOutElastic(e){return Rb(e)?e:e<.5?.5*G8(e*2,.1125,.45):.5+.5*W8(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-mp.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?mp.easeInBounce(e*2)*.5:mp.easeOutBounce(e*2-1)*.5+.5};function l3(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function V8(e){return l3(e)?e:new Vp(e)}function fT(e){return l3(e)?e:new Vp(e).saturate(.5).darken(.1).hexString()}const nBe=["x","y","borderWidth","radius","tension"],sBe=["color","borderColor","backgroundColor"];function rBe(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:sBe},numbers:{type:"number",properties:nBe}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function iBe(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Y8=new Map;function oBe(e,t){t=t||{};const n=e+JSON.stringify(t);let s=Y8.get(n);return s||(s=new Intl.NumberFormat(e,t),Y8.set(n,s)),s}function c3(e,t,n){return oBe(t,n).format(e)}const lBe={values(e){return ss(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let r,i=e;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),i=cBe(e,n)}const o=LJ(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),c3(e,s,c)}};function cBe(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var $J={formatters:lBe};function dBe(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$J.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Yu=Object.create(null),rL=Object.create(null);function fp(e,t){if(!t)return e;const n=t.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];e=e[i]||(e[i]=Object.create(null))}return e}function hT(e,t,n){return typeof t=="string"?Yp(fp(e,t),n):Yp(fp(e,""),t)}class uBe{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>fT(r.backgroundColor),this.hoverBorderColor=(s,r)=>fT(r.borderColor),this.hoverColor=(s,r)=>fT(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return hT(this,t,n)}get(t){return fp(this,t)}describe(t,n){return hT(rL,t,n)}override(t,n){return hT(Yu,t,n)}route(t,n,s,r){const i=fp(this,t),o=fp(this,s),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[l],u=o[r];return Na(c)?Object.assign({},u,c):ua(c,u)},set(c){this[l]=c}}})}apply(t){t.forEach(n=>n(this))}}var On=new uBe({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rBe,iBe,dBe]);function mBe(e){return!e||La(e.size)||La(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Q8(e,t,n,s,r){let i=t[r];return i||(i=t[r]=e.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Kd(e,t,n){const s=e.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((t-r)*s)/s+r}function K8(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function iL(e,t,n,s){RJ(e,t,n,s,null)}function RJ(e,t,n,s,r){let i,o,l,c,u,d,h,p;const x=t.pointStyle,v=t.rotation,j=t.radius;let b=(v||0)*B8e;if(x&&typeof x=="object"&&(i=x.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(b),e.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),e.restore();return}if(!(isNaN(j)||j<=0)){switch(e.beginPath(),x){default:r?e.ellipse(n,s,r/2,j,0,0,_n):e.arc(n,s,j,0,_n),e.closePath();break;case"triangle":d=r?r/2:j,e.moveTo(n+Math.sin(b)*d,s-Math.cos(b)*j),b+=U8,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*j),b+=U8,e.lineTo(n+Math.sin(b)*d,s-Math.cos(b)*j),e.closePath();break;case"rectRounded":u=j*.516,c=j-u,o=Math.cos(b+Qd)*c,h=Math.cos(b+Qd)*(r?r/2-u:c),l=Math.sin(b+Qd)*c,p=Math.sin(b+Qd)*(r?r/2-u:c),e.arc(n-h,s-l,u,b-za,b-rs),e.arc(n+p,s-o,u,b-rs,b),e.arc(n+h,s+l,u,b,b+rs),e.arc(n-p,s+o,u,b+rs,b+za),e.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*j,d=r?r/2:c,e.rect(n-d,s-c,2*d,2*c);break}b+=Qd;case"rectRot":h=Math.cos(b)*(r?r/2:j),o=Math.cos(b)*j,l=Math.sin(b)*j,p=Math.sin(b)*(r?r/2:j),e.moveTo(n-h,s-l),e.lineTo(n+p,s-o),e.lineTo(n+h,s+l),e.lineTo(n-p,s+o),e.closePath();break;case"crossRot":b+=Qd;case"cross":h=Math.cos(b)*(r?r/2:j),o=Math.cos(b)*j,l=Math.sin(b)*j,p=Math.sin(b)*(r?r/2:j),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o);break;case"star":h=Math.cos(b)*(r?r/2:j),o=Math.cos(b)*j,l=Math.sin(b)*j,p=Math.sin(b)*(r?r/2:j),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o),b+=Qd,h=Math.cos(b)*(r?r/2:j),o=Math.cos(b)*j,l=Math.sin(b)*j,p=Math.sin(b)*(r?r/2:j),e.moveTo(n-h,s-l),e.lineTo(n+h,s+l),e.moveTo(n+p,s-o),e.lineTo(n-p,s+o);break;case"line":o=r?r/2:Math.cos(b)*j,l=Math.sin(b)*j,e.moveTo(n-o,s-l),e.lineTo(n+o,s+l);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(b)*(r?r/2:j),s+Math.sin(b)*j);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Zp(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function d3(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function u3(e){e.restore()}function fBe(e,t,n,s,r){if(!t)return e.lineTo(n.x,n.y);if(r==="middle"){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else r==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function hBe(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function gBe(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),La(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function pBe(e,t,n,s,r){if(r.strikethrough||r.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,d=r.strikethrough?(c+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,d),e.lineTo(l,d),e.stroke()}}function xBe(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Jp(e,t,n,s,r,i={}){const o=ss(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,u;for(e.save(),e.font=r.string,gBe(e,i),c=0;c<o.length;++c)u=o[c],i.backdrop&&xBe(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),La(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(u,n,s,i.maxWidth)),e.fillText(u,n,s,i.maxWidth),pBe(e,n,s,u,i),s+=Number(r.lineHeight);e.restore()}function Zw(e,t){const{x:n,y:s,w:r,h:i,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*za,za,!0),e.lineTo(n,s+i-o.bottomLeft),e.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,za,rs,!0),e.lineTo(n+r-o.bottomRight,s+i),e.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,rs,0,!0),e.lineTo(n+r,s+o.topRight),e.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-rs,!0),e.lineTo(n+o.topLeft,s)}const yBe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,bBe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function vBe(e,t){const n=(""+e).match(yBe);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const wBe=e=>+e||0;function m3(e,t){const n={},s=Na(t),r=s?Object.keys(t):t,i=Na(e)?s?o=>ua(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of r)n[o]=wBe(i(o));return n}function zJ(e){return m3(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Cf(e){return m3(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Si(e){const t=zJ(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function $s(e,t){e=e||{},t=t||On.font;let n=ua(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=ua(e.style,t.style);s&&!(""+s).match(bBe)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:ua(e.family,t.family),lineHeight:vBe(ua(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:ua(e.weight,t.weight),string:""};return r.string=mBe(r),r}function zb(e,t,n,s){let r,i,o;for(r=0,i=e.length;r<i;++r)if(o=e[r],o!==void 0&&o!==void 0)return o}function jBe(e,t,n){const{min:s,max:r}=e,i=kJ(t,(r-s)/2),o=(l,c)=>n&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function lm(e,t){return Object.assign(Object.create(e),t)}function f3(e,t=[""],n,s,r=()=>e[0]){const i=n||e;typeof s>"u"&&(s=HJ("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:r,override:l=>f3([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return UJ(l,c,()=>EBe(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return Z8(l).includes(c)},ownKeys(l){return Z8(l)},set(l,c,u){const d=l._storage||(l._storage=r());return l[c]=d[c]=u,delete l._keys,!0}})}function Gf(e,t,n,s){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:FJ(e,s),setContext:i=>Gf(e,i,n,s),override:i=>Gf(e.override(i),t,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return UJ(i,o,()=>CBe(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function FJ(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:s,isScriptable:wd(n)?n:()=>n,isIndexable:wd(s)?s:()=>s}}const NBe=(e,t)=>e?e+r3(t):t,h3=(e,t)=>Na(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function UJ(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=n();return e[t]=s,s}function CBe(e,t,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=e;let l=s[t];return wd(l)&&o.isScriptable(t)&&(l=SBe(t,l,e,n)),ss(l)&&l.length&&(l=_Be(t,l,e,o.isIndexable)),h3(t,l)&&(l=Gf(l,r,i&&i[t],o)),l}function SBe(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=n;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),h3(e,c)&&(c=g3(r._scopes,r,e,c)),c}function _Be(e,t,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Na(t[0])){const c=t,u=r._scopes.filter(d=>d!==c);t=[];for(const d of c){const h=g3(u,r,e,d);t.push(Gf(h,i,o&&o[e],l))}}return t}function BJ(e,t,n){return wd(e)?e(t,n):e}const ABe=(e,t)=>e===!0?t:typeof e=="string"?Vu(t,e):void 0;function TBe(e,t,n,s,r){for(const i of t){const o=ABe(n,i);if(o){e.add(o);const l=BJ(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==s)return l}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function g3(e,t,n,s){const r=t._rootScopes,i=BJ(t._fallback,n,s),o=[...e,...r],l=new Set;l.add(s);let c=X8(l,o,n,i||n,s);return c===null||typeof i<"u"&&i!==n&&(c=X8(l,o,i,c,s),c===null)?!1:f3(Array.from(l),[""],r,i,()=>kBe(t,n,s))}function X8(e,t,n,s,r){for(;n;)n=TBe(e,t,n,s,r);return n}function kBe(e,t,n){const s=e._getTarget();t in s||(s[t]={});const r=s[t];return ss(r)&&Na(n)?n:r||{}}function EBe(e,t,n,s){let r;for(const i of t)if(r=HJ(NBe(i,e),n),typeof r<"u")return h3(e,r)?g3(n,s,e,r):r}function HJ(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function Z8(e){let t=e._keys;return t||(t=e._keys=LBe(e._scopes)),t}function LBe(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))t.add(s);return Array.from(t)}const PBe=Number.EPSILON||1e-14,Wf=(e,t)=>t<e.length&&!e[t].skip&&e[t],qJ=e=>e==="x"?"y":"x";function DBe(e,t,n,s){const r=e.skip?t:e,i=t,o=n.skip?t:n,l=sL(i,r),c=sL(o,i);let u=l/(l+c),d=c/(l+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const h=s*u,p=s*d;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function OBe(e,t,n){const s=e.length;let r,i,o,l,c,u=Wf(e,0);for(let d=0;d<s-1;++d)if(c=u,u=Wf(e,d+1),!(!c||!u)){if(up(t[d],0,PBe)){n[d]=n[d+1]=0;continue}r=n[d]/t[d],i=n[d+1]/t[d],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[d]=r*o*t[d],n[d+1]=i*o*t[d])}}function MBe(e,t,n="x"){const s=qJ(n),r=e.length;let i,o,l,c=Wf(e,0);for(let u=0;u<r;++u){if(o=l,l=c,c=Wf(e,u+1),!l)continue;const d=l[n],h=l[s];o&&(i=(d-o[n])/3,l[`cp1${n}`]=d-i,l[`cp1${s}`]=h-i*t[u]),c&&(i=(c[n]-d)/3,l[`cp2${n}`]=d+i,l[`cp2${s}`]=h+i*t[u])}}function IBe(e,t="x"){const n=qJ(t),s=e.length,r=Array(s).fill(0),i=Array(s);let o,l,c,u=Wf(e,0);for(o=0;o<s;++o)if(l=c,c=u,u=Wf(e,o+1),!!c){if(u){const d=u[t]-c[t];r[o]=d!==0?(u[n]-c[n])/d:0}i[o]=l?u?$o(r[o-1])!==$o(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}OBe(e,r,i),MBe(e,i,t)}function Fb(e,t,n){return Math.max(Math.min(e,n),t)}function $Be(e,t){let n,s,r,i,o,l=Zp(e[0],t);for(n=0,s=e.length;n<s;++n)o=i,i=l,l=n<s-1&&Zp(e[n+1],t),i&&(r=e[n],o&&(r.cp1x=Fb(r.cp1x,t.left,t.right),r.cp1y=Fb(r.cp1y,t.top,t.bottom)),l&&(r.cp2x=Fb(r.cp2x,t.left,t.right),r.cp2y=Fb(r.cp2y,t.top,t.bottom)))}function RBe(e,t,n,s,r){let i,o,l,c;if(t.spanGaps&&(e=e.filter(u=>!u.skip)),t.cubicInterpolationMode==="monotone")IBe(e,r);else{let u=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=DBe(u,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,u=l}t.capBezierPoints&&$Be(e,n)}function p3(){return typeof window<"u"&&typeof document<"u"}function x3(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Jw(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const E1=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function zBe(e,t){return E1(e).getPropertyValue(t)}const FBe=["top","right","bottom","left"];function _u(e,t,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=FBe[r];s[i]=parseFloat(e[t+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const UBe=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function BBe(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:r,offsetY:i}=s;let o=!1,l,c;if(UBe(r,i,e.target))l=r,c=i;else{const u=t.getBoundingClientRect();l=s.clientX-u.left,c=s.clientY-u.top,o=!0}return{x:l,y:c,box:o}}function su(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,r=E1(n),i=r.boxSizing==="border-box",o=_u(r,"padding"),l=_u(r,"border","width"),{x:c,y:u,box:d}=BBe(e,n),h=o.left+(d&&l.left),p=o.top+(d&&l.top);let{width:x,height:v}=t;return i&&(x-=o.width+l.width,v-=o.height+l.height),{x:Math.round((c-h)/x*n.width/s),y:Math.round((u-p)/v*n.height/s)}}function HBe(e,t,n){let s,r;if(t===void 0||n===void 0){const i=e&&x3(e);if(!i)t=e.clientWidth,n=e.clientHeight;else{const o=i.getBoundingClientRect(),l=E1(i),c=_u(l,"border","width"),u=_u(l,"padding");t=o.width-u.width-c.width,n=o.height-u.height-c.height,s=Jw(l.maxWidth,i,"clientWidth"),r=Jw(l.maxHeight,i,"clientHeight")}}return{width:t,height:n,maxWidth:s||Xw,maxHeight:r||Xw}}const sd=e=>Math.round(e*10)/10;function qBe(e,t,n,s){const r=E1(e),i=_u(r,"margin"),o=Jw(r.maxWidth,e,"clientWidth")||Xw,l=Jw(r.maxHeight,e,"clientHeight")||Xw,c=HBe(e,t,n);let{width:u,height:d}=c;if(r.boxSizing==="content-box"){const p=_u(r,"border","width"),x=_u(r,"padding");u-=x.width+p.width,d-=x.height+p.height}return u=Math.max(0,u-i.width),d=Math.max(0,s?u/s:d-i.height),u=sd(Math.min(u,o,c.maxWidth)),d=sd(Math.min(d,l,c.maxHeight)),u&&!d&&(d=sd(u/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,u=sd(Math.floor(d*s))),{width:u,height:d}}function J8(e,t,n){const s=t||1,r=sd(e.height*s),i=sd(e.width*s);e.height=sd(e.height),e.width=sd(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(e.currentDevicePixelRatio=s,o.height=r,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const GBe=(function(){let e=!1;try{const t={get passive(){return e=!0,!1}};p3()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e})();function eB(e,t){const n=zBe(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ru(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function WBe(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function VBe(e,t,n,s){const r={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=ru(e,r,n),l=ru(r,i,n),c=ru(i,t,n),u=ru(o,l,n),d=ru(l,c,n);return ru(u,d,n)}const YBe=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},QBe=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Sf(e,t,n){return e?YBe(t,n):QBe()}function GJ(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function WJ(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function VJ(e){return e==="angle"?{between:Xp,compare:Y8e,normalize:Ui}:{between:nd,compare:(t,n)=>t-n,normalize:t=>t}}function tB({start:e,end:t,count:n,loop:s,style:r}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:r}}function KBe(e,t,n){const{property:s,start:r,end:i}=n,{between:o,normalize:l}=VJ(s),c=t.length;let{start:u,end:d,loop:h}=e,p,x;if(h){for(u+=c,d+=c,p=0,x=c;p<x&&o(l(t[u%c][s]),r,i);++p)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:h,style:e.style}}function XBe(e,t,n){if(!n)return[e];const{property:s,start:r,end:i}=n,o=t.length,{compare:l,between:c,normalize:u}=VJ(s),{start:d,end:h,loop:p,style:x}=KBe(e,t,n),v=[];let j=!1,b=null,N,w,S;const _=()=>c(r,S,N)&&l(r,S)!==0,k=()=>l(i,N)===0||c(i,S,N),T=()=>j||_(),A=()=>!j||k();for(let E=d,M=d;E<=h;++E)w=t[E%o],!w.skip&&(N=u(w[s]),N!==S&&(j=c(N,r,i),b===null&&T()&&(b=l(N,r)===0?E:M),b!==null&&A()&&(v.push(tB({start:b,end:E,loop:p,count:o,style:x})),b=null),M=E,S=N));return b!==null&&v.push(tB({start:b,end:h,loop:p,count:o,style:x})),v}function ZBe(e,t){const n=[],s=e.segments;for(let r=0;r<s.length;r++){const i=XBe(s[r],e.points,t);i.length&&n.push(...i)}return n}function JBe(e,t,n,s){let r=0,i=t-1;if(n&&!s)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(i+=r);i>r&&e[i%t].skip;)i--;return i%=t,{start:r,end:i}}function eHe(e,t,n,s){const r=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=n;++c){const u=e[c%r];u.skip||u.stop?l.skip||(s=!1,i.push({start:t%r,end:(c-1)%r,loop:s}),t=o=u.stop?c:null):(o=c,l.skip&&(t=c)),l=u}return o!==null&&i.push({start:t%r,end:o%r,loop:s}),i}function tHe(e,t){const n=e.points,s=e.options.spanGaps,r=n.length;if(!r)return[];const i=!!e._loop,{start:o,end:l}=JBe(n,r,i,s);if(s===!0)return aB(e,[{start:o,end:l,loop:i}],n,t);const c=l<o?l+r:l,u=!!e._fullLoop&&o===0&&l===r-1;return aB(e,eHe(n,o,c,u),n,t)}function aB(e,t,n,s){return!s||!s.setContext||!n?t:aHe(e,t,n,s)}function aHe(e,t,n,s){const r=e._chart.getContext(),i=nB(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=n.length,u=[];let d=i,h=t[0].start,p=h;function x(v,j,b,N){const w=l?-1:1;if(v!==j){for(v+=c;n[v%c].skip;)v-=w;for(;n[j%c].skip;)j+=w;v%c!==j%c&&(u.push({start:v%c,end:j%c,loop:b,style:N}),d=N,h=j%c)}}for(const v of t){h=l?h:v.start;let j=n[h%c],b;for(p=h+1;p<=v.end;p++){const N=n[p%c];b=nB(s.setContext(lm(r,{type:"segment",p0:j,p1:N,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),nHe(b,d)&&x(h,p-1,v.loop,d),j=N,d=b}h<p-1&&x(h,p-1,v.loop,d)}return u}function nB(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function nHe(e,t){if(!t)return!1;const n=[],s=function(r,i){return l3(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function Ub(e,t,n){return e.options.clip?e[n]:t[n]}function sHe(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Ub(n,t,"left"),right:Ub(n,t,"right"),top:Ub(s,t,"top"),bottom:Ub(s,t,"bottom")}:t}function rHe(e,t){const n=t._clip;if(n.disabled)return!1;const s=sHe(t,e.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?e.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?e.height:s.bottom+(n.bottom===!0?0:n.bottom)}}class iHe{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(l=>l({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MJ.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,s,t,"progress")),i.length||(s.running=!1,this._notify(r,s,t,"complete"),s.initial=!1),n+=i.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Cl=new iHe;const sB="transparent",oHe={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=V8(e||sB),r=s.valid&&V8(t||sB);return r&&r.valid?r.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class lHe{constructor(t,n,s,r){const i=n[s];r=zb([t.to,r,i,t.from]);const o=zb([t.from,i,r]);this._active=!0,this._fn=t.fn||oHe[t.type||typeof o],this._easing=mp[t.easing]||mp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=zb([t.to,n,r,t.from]),this._from=zb([t.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||n<s),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=i;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class YJ{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Na(t))return;const n=Object.keys(On.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Na(i))return;const o={};for(const l of n)o[l]=i[l];(ss(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,n){const s=n.options,r=dHe(t,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&cHe(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,n){const s=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(n),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(t,n));continue}const d=n[u];let h=i[u];const p=s.get(u);if(h)if(p&&h.active()){h.update(p,d,l);continue}else h.cancel();if(!p||!p.duration){t[u]=d;continue}i[u]=h=new lHe(p,t,u,d),r.push(h)}return r}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return Cl.add(this._chart,s),!0}}function cHe(e,t){const n=[],s=Object.keys(t);for(let r=0;r<s.length;r++){const i=e[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function dHe(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function rB(e,t){const n=e&&e.options||{},s=n.reverse,r=n.min===void 0?t:0,i=n.max===void 0?t:0;return{start:s?i:r,end:s?r:i}}function uHe(e,t,n){if(n===!1)return!1;const s=rB(e,n),r=rB(t,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function mHe(e){let t,n,s,r;return Na(e)?(t=e.top,n=e.right,s=e.bottom,r=e.left):t=n=s=r=e,{top:t,right:n,bottom:s,left:r,disabled:e===!1}}function QJ(e,t){const n=[],s=e._getSortedDatasetMetas(t);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function iB(e,t,n,s={}){const r=e.keys,i=s.mode==="single";let o,l,c,u;if(t===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===n){if(d=!0,s.all)continue;break}u=e.values[c],Ci(u)&&(i||t===0||$o(t)===$o(u))&&(t+=u)}return!d&&!s.all?0:t}function fHe(e,t){const{iScale:n,vScale:s}=t,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],l[c]={[r]:d,[i]:e[d]};return l}function gT(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function hHe(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function gHe(e){const{min:t,max:n,minDefined:s,maxDefined:r}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function pHe(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function oB(e,t,n,s){for(const r of t.getMatchingVisibleMetas(s).reverse()){const i=e[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function lB(e,t){const{chart:n,_cachedMeta:s}=e,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,u=o.axis,d=hHe(i,o,s),h=t.length;let p;for(let x=0;x<h;++x){const v=t[x],{[c]:j,[u]:b}=v,N=v._stacks||(v._stacks={});p=N[u]=pHe(r,d,j),p[l]=b,p._top=oB(p,o,!0,s.type),p._bottom=oB(p,o,!1,s.type);const w=p._visualValues||(p._visualValues={});w[l]=b}}function pT(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function xHe(e,t){return lm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function yHe(e,t,n){return lm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Lg(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const r of t){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const xT=e=>e==="reset"||e==="none",cB=(e,t)=>t?e:Object.assign({},e),bHe=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:QJ(n,!0),values:null};class L1{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=gT(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Lg(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,p,x,v)=>h==="x"?p:h==="r"?v:x,i=n.xAxisID=ua(s.xAxisID,pT(t,"x")),o=n.yAxisID=ua(s.yAxisID,pT(t,"y")),l=n.rAxisID=ua(s.rAxisID,pT(t,"r")),c=n.indexAxis,u=n.iAxisID=r(c,i,o,l),d=n.vAxisID=r(c,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&q8(this._data,this),t._stacked&&Lg(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Na(n)){const r=this._cachedMeta;this._data=fHe(n,r)}else if(s!==n){if(s){q8(s,this);const r=this._cachedMeta;Lg(r),r._parsed=[]}n&&Object.isExtensible(n)&&Z8e(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=gT(n.vScale,n),n.stack!==s.stack&&(r=!0,Lg(n),n.stack=s.stack),this._resyncElements(t),(r||i!==n._stacked)&&(lB(this,n._parsed),n._stacked=gT(n.vScale,n))}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&n===r.length?!0:s._sorted,u=t>0&&s._parsed[t-1],d,h,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{ss(r[t])?p=this.parseArrayData(s,r,t,n):Na(r[t])?p=this.parseObjectData(s,r,t,n):p=this.parsePrimitiveData(s,r,t,n);const x=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<n;++d)s._parsed[d+t]=h=p[d],c&&(x()&&(c=!1),u=h);s._sorted=c}o&&lB(this,p)}parsePrimitiveData(t,n,s,r){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,u=i.getLabels(),d=i===o,h=new Array(r);let p,x,v;for(p=0,x=r;p<x;++p)v=p+s,h[p]={[l]:d||i.parse(u[v],v),[c]:o.parse(n[v],v)};return h}parseArrayData(t,n,s,r){const{xScale:i,yScale:o}=t,l=new Array(r);let c,u,d,h;for(c=0,u=r;c<u;++c)d=c+s,h=n[d],l[c]={x:i.parse(h[0],d),y:o.parse(h[1],d)};return l}parseObjectData(t,n,s,r){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(r);let d,h,p,x;for(d=0,h=r;d<h;++d)p=d+s,x=n[p],u[d]={x:i.parse(Vu(x,l),p),y:o.parse(Vu(x,c),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const r=this.chart,i=this._cachedMeta,o=n[t.axis],l={keys:QJ(r,!0),values:n._stacks[t.axis]._visualValues};return iB(l,o,i.index,{mode:s})}updateRangeFromParsed(t,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const l=r&&s._stacks[n.axis];r&&l&&(r.values=l,o=iB(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&t===s.iScale,o=r.length,l=this._getOtherScale(t),c=bHe(n,s,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=gHe(l);let p,x;function v(){x=r[p];const j=x[l.axis];return!Ci(x[t.axis])||d>j||h<j}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(u,t,x,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(u,t,x,c);break}}return u}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][t.axis],Ci(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=mHe(ua(this.options.clip,uHe(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,u=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,i,l,c),d=l;d<l+c;++d){const h=r[d];h.hidden||(h.active&&u?o.push(h):h.draw(t,i))}for(d=0;d<o.length;++d)o[d].draw(t,i)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=yHe(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=xHe(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=t+"-"+n,l=i[o],c=this.enableOptionSharing&&Qp(s);if(l)return cB(l,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),d),x=Object.keys(On.elements[t]),v=()=>this.getContext(s,r,n),j=u.resolveNamedOptions(p,x,v,h);return j.$shared&&(j.$shared=c,i[o]=Object.freeze(cB(j,c))),j}_resolveAnimations(t,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,n),p=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(p,this.getContext(t,s,n))}const u=new YJ(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||xT(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(t,n,s,r){xT(r)?Object.assign(t,s):this._resolveAnimations(n,r).update(t,s)}updateSharedOptions(t,n,s){t&&!xT(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,r){t.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,n,s=!0){const r=this._cachedMeta,i=r.data,o=t+n;let l;const c=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(t,n),s&&this.updateElements(i,t,n,"reset")}updateElements(t,n,s,r){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(t,n);s._stacked&&Lg(s,r)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,r]=t;this[n](s,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function vHe(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(e));e._cache.$bar=OJ(s.sort((r,i)=>r-i))}return e._cache.$bar}function wHe(e){const t=e.iScale,n=vHe(t,e.type);let s=t._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Qp(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(r=0,i=n.length;r<i;++r)o=t.getPixelForValue(n[r]),c();for(l=void 0,r=0,i=t.ticks.length;r<i;++r)o=t.getPixelForTick(r),c();return s}function jHe(e,t,n,s){const r=n.barThickness;let i,o;return La(r)?(i=t.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function NHe(e,t,n,s){const r=t.pixels,i=r[e];let o=e>0?r[e-1]:null,l=e<r.length-1?r[e+1]:null;const c=n.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const u=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:n.barPercentage,start:u}}function CHe(e,t,n,s){const r=n.parse(e[0],s),i=n.parse(e[1],s),o=Math.min(r,i),l=Math.max(r,i);let c=o,u=l;Math.abs(o)>Math.abs(l)&&(c=l,u=o),t[n.axis]=u,t._custom={barStart:c,barEnd:u,start:r,end:i,min:o,max:l}}function KJ(e,t,n,s){return ss(e)?CHe(e,t,n,s):t[n.axis]=n.parse(e,s),t}function dB(e,t,n,s){const r=e.iScale,i=e.vScale,o=r.getLabels(),l=r===i,c=[];let u,d,h,p;for(u=n,d=n+s;u<d;++u)p=t[u],h={},h[r.axis]=l||r.parse(o[u],u),c.push(KJ(p,h,i,u));return c}function yT(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function SHe(e,t,n){return e!==0?$o(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function _He(e){let t,n,s,r,i;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:t,top:r,bottom:i}}function AHe(e,t,n,s){let r=t.borderSkipped;const i={};if(!r){e.borderSkipped=i;return}if(r===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:u,bottom:d}=_He(e);r==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?r=u:(n._bottom||0)===s?r=d:(i[uB(d,o,l,c)]=!0,r=u)),i[uB(r,o,l,c)]=!0,e.borderSkipped=i}function uB(e,t,n,s){return s?(e=THe(e,t,n),e=mB(e,n,t)):e=mB(e,t,n),e}function THe(e,t,n){return e===t?n:e===n?t:e}function mB(e,t,n){return e==="start"?t:e==="end"?n:e}function kHe(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class EHe extends L1{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,n,s,r){return dB(t,n,s,r)}parseArrayData(t,n,s,r){return dB(t,n,s,r)}parseObjectData(t,n,s,r){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=i.axis==="x"?l:c,d=o.axis==="x"?l:c,h=[];let p,x,v,j;for(p=s,x=s+r;p<x;++p)j=n[p],v={},v[i.axis]=i.parse(Vu(j,u),p),h.push(KJ(Vu(j,d),v,o,p));return h}updateRangeFromParsed(t,n,s,r){super.updateRangeFromParsed(t,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(t),o=i._custom,l=yT(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,r);for(let x=n;x<n+s;x++){const v=this.getParsed(x),j=i||La(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),b=this._calculateBarIndexPixels(x,d),N=(v._stacks||{})[l.axis],w={horizontal:u,base:j.base,enableBorderRadius:!N||yT(v._custom)||o===N._top||o===N._bottom,x:u?j.head:b.center,y:u?b.center:j.head,height:u?b.size:Math.abs(j.size),width:u?Math.abs(j.size):b.size};p&&(w.options=h||this.resolveDataElementOptions(x,t[x].active?"active":r));const S=w.options||t[x].options;AHe(w,S,N,o),kHe(w,S,d.ratio),this.updateElement(t[x],x,w,r)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[s.axis],u=d=>{const h=d._parsed.find(x=>x[s.axis]===c),p=h&&h[d.vScale.axis];if(La(p)||isNaN(p))return!0};for(const d of r)if(!(n!==void 0&&u(d))&&((i===!1||o.indexOf(d.stack)===-1||i===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===n).shift()}_getAxis(){const t={},n=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[ua(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,n)]=!0;return Object.keys(t)}_getStackIndex(t,n,s){const r=this._getStacks(t,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||wHe(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),u=c._custom,d=yT(u);let h=c[n.axis],p=0,x=s?this.applyStack(n,c,s):h,v,j;x!==h&&(p=x-h,x=h),d&&(h=u.barStart,x=u.barEnd-u.barStart,h!==0&&$o(h)!==$o(u.barEnd)&&(p=0),p+=h);const b=!La(i)&&!d?i:p;let N=n.getPixelForValue(b);if(this.chart.getDataVisibility(t)?v=n.getPixelForValue(p+x):v=N,j=v-N,Math.abs(j)<o){j=SHe(j,n,l)*o,h===l&&(N-=j/2);const w=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),_=Math.min(w,S),k=Math.max(w,S);N=Math.max(Math.min(N,k),_),v=N+j,s&&!d&&(c._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(N))}if(N===n.getPixelForValue(l)){const w=$o(j)*n.getLineWidthForValue(l)/2;N+=w,j-=w}return{size:j,base:N,head:v,center:v+j/2}}_calculateBarIndexPixels(t,n){const s=n.scale,r=this.options,i=r.skipNull,o=ua(r.maxBarThickness,1/0);let l,c;const u=this._getAxisCount();if(n.grouped){const d=i?this._getStackCount(t):n.stackCount,h=r.barThickness==="flex"?NHe(t,n,r,d*u):jHe(t,n,r,d*u),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(ua(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+x;l=h.start+h.chunk*v+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}function LHe(e,t,n){let s=1,r=1,i=0,o=0;if(t<_n){const l=e,c=l+t,u=Math.cos(l),d=Math.sin(l),h=Math.cos(c),p=Math.sin(c),x=(S,_,k)=>Xp(S,l,c,!0)?1:Math.max(_,_*n,k,k*n),v=(S,_,k)=>Xp(S,l,c,!0)?-1:Math.min(_,_*n,k,k*n),j=x(0,u,h),b=x(rs,d,p),N=v(za,u,h),w=v(za+rs,d,p);s=(j-N)/2,r=(b-w)/2,i=-(j+N)/2,o=-(b+w)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class PHe extends L1{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data,{labels:{pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return n.labels.length&&n.datasets.length?n.labels.map((c,u)=>{const h=t.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:h.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(u),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:r,pointStyle:s,borderRadius:o&&(l||h.borderRadius),index:u}}):[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=c=>+s[c];if(Na(s[t])){const{key:c="value"}=this._parsing;i=u=>+Vu(s[u],c)}let o,l;for(o=t,l=t+n;o<l;++o)r._parsed[o]=i(o)}}_getRotation(){return Dl(this.options.rotation-90)}_getCircumference(){return Dl(this.options.circumference)}_getRotationExtents(){let t=_n,n=-_n;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),n=Math.max(n,i+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(M8e(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:j}=LHe(h,d,c),b=(s.width-o)/p,N=(s.height-o)/x,w=Math.max(Math.min(b,N)/2,0),S=kJ(this.options.radius,w),_=Math.max(S*c,0),k=(S-_)/this._getVisibleDatasetWeightTotal();this.offsetX=v*S,this.offsetY=j*S,r.total=this.calculateTotal(),this.outerRadius=S-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*u,0),this.updateElements(i,0,i.length,t)}_circumference(t,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||r._parsed[t]===null||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/_n)}updateElements(t,n,s,r){const i=r==="reset",o=this.chart,l=o.chartArea,u=o.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,p=i&&u.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:j,includeOptions:b}=this._getSharedOptions(n,r);let N=this._getRotation(),w;for(w=0;w<n;++w)N+=this._circumference(w,i);for(w=n;w<n+s;++w){const S=this._circumference(w,i),_=t[w],k={x:d+this.offsetX,y:h+this.offsetY,startAngle:N,endAngle:N+S,circumference:S,outerRadius:v,innerRadius:x};b&&(k.options=j||this.resolveDataElementOptions(w,_.active?"active":r)),N+=S,this.updateElement(_,w,k,r)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,r;for(r=0;r<n.length;r++){const i=t._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?_n*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=c3(n._parsed[t],s.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let n=0;const s=this.chart;let r,i,o,l,c;if(!t){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),t=o.data,l=o.controller;break}}if(!t)return 0;for(r=0,i=t.length;r<i;++r)c=l.resolveDataElementOptions(r),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,r=t.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(ua(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class DHe extends L1{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:c}=tBe(n,r,o);this._drawStart=l,this._drawCount=c,aBe(n)&&(l=0,c=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:u},t),this.updateElements(r,l,c,t)}updateElements(t,n,s,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(n,r),p=o.axis,x=l.axis,{spanGaps:v,segment:j}=this.options,b=Kp(v)?v:Number.POSITIVE_INFINITY,N=this.chart._animationsDisabled||i||r==="none",w=n+s,S=t.length;let _=n>0&&this.getParsed(n-1);for(let k=0;k<S;++k){const T=t[k],A=N?T:{};if(k<n||k>=w){A.skip=!0;continue}const E=this.getParsed(k),M=La(E[x]),O=A[p]=o.getPixelForValue(E[p],k),I=A[x]=i||M?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[x],k);A.skip=isNaN(O)||isNaN(I)||M,A.stop=k>0&&Math.abs(E[p]-_[p])>b,j&&(A.parsed=E,A.raw=u.data[k]),h&&(A.options=d||this.resolveDataElementOptions(k,T.active?"active":r)),N||this.updateElement(T,k,A,r),_=E}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,r=t.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class OHe extends PHe{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}function Xd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class y3{static override(t){Object.assign(y3.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Xd()}parse(){return Xd()}format(){return Xd()}add(){return Xd()}diff(){return Xd()}startOf(){return Xd()}endOf(){return Xd()}}var MHe={_date:y3};function IHe(e,t,n,s){const{controller:r,data:i,_sorted:o}=e,l=r._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const u=l._reversePixels?K8e:xu;if(s){if(r._sharedOptions){const d=i[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const p=u(i,t,n-h),x=u(i,t,n+h);return{lo:p.lo,hi:x.hi}}}}else{const d=u(i,t,n);if(c){const{vScale:h}=r._cachedMeta,{_parsed:p}=e,x=p.slice(0,d.lo+1).reverse().findIndex(j=>!La(j[h.axis]));d.lo-=Math.max(0,x);const v=p.slice(d.hi).findIndex(j=>!La(j[h.axis]));d.hi+=Math.max(0,v)}return d}}return{lo:0,hi:i.length-1}}function P1(e,t,n,s,r){const i=e.getSortedVisibleDatasetMetas(),o=n[t];for(let l=0,c=i.length;l<c;++l){const{index:u,data:d}=i[l],{lo:h,hi:p}=IHe(i[l],t,o,r);for(let x=h;x<=p;++x){const v=d[x];v.skip||s(v,u,x)}}}function $He(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,r){const i=t?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function bT(e,t,n,s,r){const i=[];return!r&&!e.isPointInArea(t)||P1(e,n,t,function(l,c,u){!r&&!Zp(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:u})},!0),i}function RHe(e,t,n,s){let r=[];function i(o,l,c){const{startAngle:u,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:h}=PJ(o,{x:t.x,y:t.y});Xp(h,u,d)&&r.push({element:o,datasetIndex:l,index:c})}return P1(e,n,t,i),r}function zHe(e,t,n,s,r,i){let o=[];const l=$He(n);let c=Number.POSITIVE_INFINITY;function u(d,h,p){const x=d.inRange(t.x,t.y,r);if(s&&!x)return;const v=d.getCenterPoint(r);if(!(!!i||e.isPointInArea(v))&&!x)return;const b=l(t,v);b<c?(o=[{element:d,datasetIndex:h,index:p}],c=b):b===c&&o.push({element:d,datasetIndex:h,index:p})}return P1(e,n,t,u),o}function vT(e,t,n,s,r,i){return!i&&!e.isPointInArea(t)?[]:n==="r"&&!s?RHe(e,t,n,r):zHe(e,t,n,s,r,i)}function fB(e,t,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return P1(e,n,t,(c,u,d)=>{c[o]&&c[o](t[n],r)&&(i.push({element:c,datasetIndex:u,index:d}),l=l||c.inRange(t.x,t.y,r))}),s&&!l?[]:i}var FHe={modes:{index(e,t,n,s){const r=su(t,e),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?bT(e,r,i,s,o):vT(e,r,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(u=>{const d=l[0].index,h=u.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:u.index,index:d})}),c):[]},dataset(e,t,n,s){const r=su(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?bT(e,r,i,s,o):vT(e,r,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,u=e.getDatasetMeta(c).data;l=[];for(let d=0;d<u.length;++d)l.push({element:u[d],datasetIndex:c,index:d})}return l},point(e,t,n,s){const r=su(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return bT(e,r,i,s,o)},nearest(e,t,n,s){const r=su(t,e),i=n.axis||"xy",o=n.includeInvisible||!1;return vT(e,r,i,n.intersect,s,o)},x(e,t,n,s){const r=su(t,e);return fB(e,r,"x",n.intersect,s)},y(e,t,n,s){const r=su(t,e);return fB(e,r,"y",n.intersect,s)}}};const XJ=["left","top","right","bottom"];function Pg(e,t){return e.filter(n=>n.pos===t)}function hB(e,t){return e.filter(n=>XJ.indexOf(n.pos)===-1&&n.box.axis===t)}function Dg(e,t){return e.sort((n,s)=>{const r=t?s:n,i=t?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function UHe(e){const t=[];let n,s,r,i,o,l;for(n=0,s=(e||[]).length;n<s;++n)r=e[n],{position:i,options:{stack:o,stackWeight:l=1}}=r,t.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return t}function BHe(e){const t={};for(const n of e){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!XJ.includes(r))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function HHe(e,t){const n=BHe(e),{vBoxMaxWidth:s,hBoxMaxHeight:r}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,u=n[l.stack],d=u&&l.stackWeight/u.weight;l.horizontal?(l.width=d?d*s:c&&t.availableWidth,l.height=r):(l.width=s,l.height=d?d*r:c&&t.availableHeight)}return n}function qHe(e){const t=UHe(e),n=Dg(t.filter(u=>u.box.fullSize),!0),s=Dg(Pg(t,"left"),!0),r=Dg(Pg(t,"right")),i=Dg(Pg(t,"top"),!0),o=Dg(Pg(t,"bottom")),l=hB(t,"x"),c=hB(t,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Pg(t,"chartArea"),vertical:s.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function gB(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function ZJ(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function GHe(e,t,n,s){const{pos:r,box:i}=n,o=e.maxPadding;if(!Na(r)){n.size&&(e[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,e[r]+=n.size}i.getPadding&&ZJ(o,i.getPadding());const l=Math.max(0,t.outerWidth-gB(o,e,"left","right")),c=Math.max(0,t.outerHeight-gB(o,e,"top","bottom")),u=l!==e.w,d=c!==e.h;return e.w=l,e.h=c,n.horizontal?{same:u,other:d}:{same:d,other:u}}function WHe(e){const t=e.maxPadding;function n(s){const r=Math.max(t[s]-e[s],0);return e[s]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function VHe(e,t){const n=t.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(t[o],n[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Zg(e,t,n,s){const r=[];let i,o,l,c,u,d;for(i=0,o=e.length,u=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,VHe(l.horizontal,t));const{same:h,other:p}=GHe(t,n,l,s);u|=h&&r.length,d=d||p,c.fullSize||r.push(l)}return u&&Zg(r,t,n,s)||d}function Bb(e,t,n,s,r){e.top=n,e.left=t,e.right=t+s,e.bottom=n+r,e.width=s,e.height=r}function pB(e,t,n,s){const r=n.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,u=s[l.stack]||{placed:0,weight:1},d=l.stackWeight/u.weight||1;if(l.horizontal){const h=t.w*d,p=u.size||c.height;Qp(u.start)&&(o=u.start),c.fullSize?Bb(c,r.left,o,n.outerWidth-r.right-r.left,p):Bb(c,t.left+u.placed,o,h,p),u.start=o,u.placed+=h,o=c.bottom}else{const h=t.h*d,p=u.size||c.width;Qp(u.start)&&(i=u.start),c.fullSize?Bb(c,i,r.top,p,n.outerHeight-r.bottom-r.top):Bb(c,i,t.top+u.placed,p,h),u.start=i,u.placed+=h,i=c.right}}t.x=i,t.y=o}var gi={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const r=Si(e.options.layout.padding),i=Math.max(t-r.width,0),o=Math.max(n-r.height,0),l=qHe(e.boxes),c=l.vertical,u=l.horizontal;$a(e.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const d=c.reduce((j,b)=>b.box.options&&b.box.options.display===!1?j:j+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/d,hBoxMaxHeight:o/2}),p=Object.assign({},r);ZJ(p,Si(s));const x=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),v=HHe(c.concat(u),h);Zg(l.fullSize,x,h,v),Zg(c,x,h,v),Zg(u,x,h,v)&&Zg(c,x,h,v),WHe(x),pB(l.leftAndTop,x,h,v),x.x+=x.w,x.y+=x.h,pB(l.rightAndBottom,x,h,v),e.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},$a(l.chartArea,j=>{const b=j.box;Object.assign(b,e.chartArea),b.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class JJ{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,r){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(t){return!0}updateConfig(t){}}class YHe extends JJ{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const wv="$chartjs",QHe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xB=e=>e===null||e==="";function KHe(e,t){const n=e.style,s=e.getAttribute("height"),r=e.getAttribute("width");if(e[wv]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",xB(r)){const i=eB(e,"width");i!==void 0&&(e.width=i)}if(xB(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=eB(e,"height");i!==void 0&&(e.height=i)}return e}const eee=GBe?{passive:!0}:!1;function XHe(e,t,n){e&&e.addEventListener(t,n,eee)}function ZHe(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,eee)}function JHe(e,t){const n=QHe[e.type]||e.type,{x:s,y:r}=su(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:r!==void 0?r:null}}function ej(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function e9e(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||ej(l.addedNodes,s),o=o&&!ej(l.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function t9e(e,t,n){const s=e.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||ej(l.removedNodes,s),o=o&&!ej(l.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ex=new Map;let yB=0;function tee(){const e=window.devicePixelRatio;e!==yB&&(yB=e,ex.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function a9e(e,t){ex.size||window.addEventListener("resize",tee),ex.set(e,t)}function n9e(e){ex.delete(e),ex.size||window.removeEventListener("resize",tee)}function s9e(e,t,n){const s=e.canvas,r=s&&x3(s);if(!r)return;const i=IJ((l,c)=>{const u=r.clientWidth;n(l,c),u<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const c=l[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||i(u,d)});return o.observe(r),a9e(e,i),o}function wT(e,t,n){n&&n.disconnect(),t==="resize"&&n9e(e)}function r9e(e,t,n){const s=e.canvas,r=IJ(i=>{e.ctx!==null&&n(JHe(i,e))},e);return XHe(s,t,r),r}class i9e extends JJ{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(KHe(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[wv])return!1;const s=n[wv].initial;["height","width"].forEach(i=>{const o=s[i];La(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[wv],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const r=t.$proxies||(t.$proxies={}),o={attach:e9e,detach:t9e,resize:s9e}[n]||r9e;r[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),r=s[n];if(!r)return;({attach:wT,detach:wT,resize:wT}[n]||ZHe)(t,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,r){return qBe(t,n,s,r)}isAttached(t){const n=t&&x3(t);return!!(n&&n.isConnected)}}function o9e(e){return!p3()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?YHe:i9e}let mc=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Kp(this.x)&&Kp(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const r={};return t.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function l9e(e,t){const n=e.options.ticks,s=c9e(e),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?u9e(t):[],o=i.length,l=i[0],c=i[o-1],u=[];if(o>r)return m9e(t,u,i,o/r),u;const d=d9e(i,t,r);if(o>0){let h,p;const x=o>1?Math.round((c-l)/(o-1)):null;for(Hb(t,u,d,La(x)?0:l-x,l),h=0,p=o-1;h<p;h++)Hb(t,u,d,i[h],i[h+1]);return Hb(t,u,d,c,La(x)?t.length:c+x),u}return Hb(t,u,d),u}function c9e(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(s,r))}function d9e(e,t,n){const s=f9e(e),r=t.length/n;if(!s)return Math.max(r,1);const i=H8e(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function u9e(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function m9e(e,t,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),r++,i=n[r*s])}function Hb(e,t,n,s,r){const i=ua(s,0),o=Math.min(ua(r,e.length),e.length);let l=0,c,u,d;for(n=Math.ceil(n),r&&(c=r-s,n=c/Math.floor(c/n)),d=i;d<0;)l++,d=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===d&&(t.push(e[u]),l++,d=Math.round(i+l*n))}function f9e(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const h9e=e=>e==="left"?"right":e==="right"?"left":e,bB=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,vB=(e,t)=>Math.min(t||e,e);function wB(e,t){const n=[],s=e.length/t,r=e.length;let i=0;for(;i<r;i+=s)n.push(e[Math.floor(i)]);return n}function g9e(e,t,n){const s=e.ticks.length,r=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(r),u;if(!(n&&(s===1?u=Math.max(c-i,o-c):t===0?u=(e.getPixelForTick(1)-c)/2:u=(c-e.getPixelForTick(r-1))/2,c+=r<t?u:-u,c<i-l||c>o+l)))return c}function p9e(e,t){$a(e,n=>{const s=n.gc,r=s.length/2;let i;if(r>t){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function Og(e){return e.drawTicks?e.tickLength:0}function jB(e,t){if(!e.display)return 0;const n=$s(e.font,t),s=Si(e.padding);return(ss(e.text)?e.text.length:1)*n.lineHeight+s.height}function x9e(e,t){return lm(e,{scale:t,type:"scale"})}function y9e(e,t,n){return lm(e,{tick:n,index:t,type:"tick"})}function b9e(e,t,n){let s=o3(e);return(n&&t!=="right"||!n&&t==="right")&&(s=h9e(s)),s}function v9e(e,t,n,s){const{top:r,left:i,bottom:o,right:l,chart:c}=e,{chartArea:u,scales:d}=c;let h=0,p,x,v;const j=o-r,b=l-i;if(e.isHorizontal()){if(x=Ps(s,i,l),Na(n)){const N=Object.keys(n)[0],w=n[N];v=d[N].getPixelForValue(w)+j-t}else n==="center"?v=(u.bottom+u.top)/2+j-t:v=bB(e,n,t);p=l-i}else{if(Na(n)){const N=Object.keys(n)[0],w=n[N];x=d[N].getPixelForValue(w)-b+t}else n==="center"?x=(u.left+u.right)/2-b+t:x=bB(e,n,t);v=Ps(s,o,r),h=n==="left"?-rs:rs}return{titleX:x,titleY:v,maxWidth:p,rotation:h}}class wh extends mc{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return t=po(t,Number.POSITIVE_INFINITY),n=po(n,Number.NEGATIVE_INFINITY),s=po(s,Number.POSITIVE_INFINITY),r=po(r,Number.NEGATIVE_INFINITY),{min:po(t,s),max:po(n,r),minDefined:Ci(t),maxDefined:Ci(n)}}getMinMax(t){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,u=l.length;c<u;++c)o=l[c].controller.getMinMax(this,t),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:po(n,po(s,n)),max:po(s,po(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){an(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jBe(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?wB(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=l9e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){an(this.options.afterUpdate,[this])}beforeSetDimensions(){an(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){an(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),an(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){an(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s],i.label=an(n.callback,[i.value,s,t],this)}afterTickToLabelConversion(){an(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){an(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=vB(this.ticks.length,t.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,l,c,u;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),h=d.widest.width,p=d.highest.height,x=Is(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:x/(s-1),h+6>l&&(l=x/(s-(t.offset?.5:1)),c=this.maxHeight-Og(t.grid)-n.padding-jB(t.title,this.chart.options.font),u=Math.sqrt(h*h+p*p),o=V8e(Math.min(Math.asin(Is((d.highest.height+6)/l,-1,1)),Math.asin(Is(c/u,-1,1))-Math.asin(Is(p/u,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){an(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){an(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=jB(r,n.options.font);if(l?(t.width=this.maxWidth,t.height=Og(i)+c):(t.height=this.maxHeight,t.width=Og(i)+c),s.display&&this.ticks.length){const{first:u,last:d,widest:h,highest:p}=this._getLabelSizes(),x=s.padding*2,v=Dl(this.labelRotation),j=Math.cos(v),b=Math.sin(v);if(l){const N=s.mirror?0:b*h.width+j*p.height;t.height=Math.min(this.maxHeight,t.height+N+x)}else{const N=s.mirror?0:j*h.width+b*p.height;t.width=Math.min(this.maxWidth,t.width+N+x)}this._calculatePadding(u,d,b,j)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?u?(p=r*t.width,x=s*n.height):(p=s*t.height,x=r*n.width):i==="start"?x=n.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,x=n.width/2),this.paddingLeft=Math.max((p-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((x-h+o)*this.width/(this.width-h),0)}else{let d=n.height/2,h=t.height/2;i==="start"?(d=0,h=t.height):i==="end"&&(d=n.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){an(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)La(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=wB(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(n/vB(n,s));let u=0,d=0,h,p,x,v,j,b,N,w,S,_,k;for(h=0;h<n;h+=c){if(v=t[h].label,j=this._resolveTickFontOptions(h),r.font=b=j.string,N=i[b]=i[b]||{data:{},gc:[]},w=j.lineHeight,S=_=0,!La(v)&&!ss(v))S=Q8(r,N.data,N.gc,S,v),_=w;else if(ss(v))for(p=0,x=v.length;p<x;++p)k=v[p],!La(k)&&!ss(k)&&(S=Q8(r,N.data,N.gc,S,k),_+=w);o.push(S),l.push(_),u=Math.max(S,u),d=Math.max(_,d)}p9e(i,n);const T=o.indexOf(u),A=l.indexOf(d),E=M=>({width:o[M]||0,height:l[M]||0});return{first:E(0),last:E(n-1),widest:E(T),highest:E(A),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return Q8e(this._alignToPixels?Kd(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=y9e(this.getContext(),t,s))}return this.$context||(this.$context=x9e(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Dl(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*r?l/s:c/r:c*r<l*s?c/s:l/r}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),p=Og(i),x=[],v=l.setContext(this.getContext()),j=v.display?v.width:0,b=j/2,N=function(Q){return Kd(s,Q,j)};let w,S,_,k,T,A,E,M,O,I,D,H;if(o==="top")w=N(this.bottom),A=this.bottom-p,M=w-b,I=N(t.top)+b,H=t.bottom;else if(o==="bottom")w=N(this.top),I=t.top,H=N(t.bottom)-b,A=w+b,M=this.top+p;else if(o==="left")w=N(this.right),T=this.right-p,E=w-b,O=N(t.left)+b,D=t.right;else if(o==="right")w=N(this.left),O=t.left,D=N(t.right)-b,T=w+b,E=this.left+p;else if(n==="x"){if(o==="center")w=N((t.top+t.bottom)/2+.5);else if(Na(o)){const Q=Object.keys(o)[0],J=o[Q];w=N(this.chart.scales[Q].getPixelForValue(J))}I=t.top,H=t.bottom,A=w+b,M=A+p}else if(n==="y"){if(o==="center")w=N((t.left+t.right)/2);else if(Na(o)){const Q=Object.keys(o)[0],J=o[Q];w=N(this.chart.scales[Q].getPixelForValue(J))}T=w-b,E=T-p,O=t.left,D=t.right}const W=ua(r.ticks.maxTicksLimit,h),z=Math.max(1,Math.ceil(h/W));for(S=0;S<h;S+=z){const Q=this.getContext(S),J=i.setContext(Q),Y=l.setContext(Q),re=J.lineWidth,we=J.color,Z=Y.dash||[],ne=Y.dashOffset,pe=J.tickWidth,Ne=J.tickColor,de=J.tickBorderDash||[],be=J.tickBorderDashOffset;_=g9e(this,S,c),_!==void 0&&(k=Kd(s,_,re),u?T=E=O=D=k:A=M=I=H=k,x.push({tx1:T,ty1:A,tx2:E,ty2:M,x1:O,y1:I,x2:D,y2:H,width:re,color:we,borderDash:Z,borderDashOffset:ne,tickWidth:pe,tickColor:Ne,tickBorderDash:de,tickBorderDashOffset:be}))}return this._ticksLength=h,this._borderValue=w,x}_computeLabelItems(t){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:d,mirror:h}=i,p=Og(s.grid),x=p+d,v=h?-d:x,j=-Dl(this.labelRotation),b=[];let N,w,S,_,k,T,A,E,M,O,I,D,H="middle";if(r==="top")T=this.bottom-v,A=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+v,A=this._getXAxisLabelAlignment();else if(r==="left"){const z=this._getYAxisLabelAlignment(p);A=z.textAlign,k=z.x}else if(r==="right"){const z=this._getYAxisLabelAlignment(p);A=z.textAlign,k=z.x}else if(n==="x"){if(r==="center")T=(t.top+t.bottom)/2+x;else if(Na(r)){const z=Object.keys(r)[0],Q=r[z];T=this.chart.scales[z].getPixelForValue(Q)+x}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")k=(t.left+t.right)/2-x;else if(Na(r)){const z=Object.keys(r)[0],Q=r[z];k=this.chart.scales[z].getPixelForValue(Q)}A=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(c==="start"?H="top":c==="end"&&(H="bottom"));const W=this._getLabelSizes();for(N=0,w=l.length;N<w;++N){S=l[N],_=S.label;const z=i.setContext(this.getContext(N));E=this.getPixelForTick(N)+i.labelOffset,M=this._resolveTickFontOptions(N),O=M.lineHeight,I=ss(_)?_.length:1;const Q=I/2,J=z.color,Y=z.textStrokeColor,re=z.textStrokeWidth;let we=A;o?(k=E,A==="inner"&&(N===w-1?we=this.options.reverse?"left":"right":N===0?we=this.options.reverse?"right":"left":we="center"),r==="top"?u==="near"||j!==0?D=-I*O+O/2:u==="center"?D=-W.highest.height/2-Q*O+O:D=-W.highest.height+O/2:u==="near"||j!==0?D=O/2:u==="center"?D=W.highest.height/2-Q*O:D=W.highest.height-I*O,h&&(D*=-1),j!==0&&!z.showLabelBackdrop&&(k+=O/2*Math.sin(j))):(T=E,D=(1-I)*O/2);let Z;if(z.showLabelBackdrop){const ne=Si(z.backdropPadding),pe=W.heights[N],Ne=W.widths[N];let de=D-ne.top,be=0-ne.left;switch(H){case"middle":de-=pe/2;break;case"bottom":de-=pe;break}switch(A){case"center":be-=Ne/2;break;case"right":be-=Ne;break;case"inner":N===w-1?be-=Ne:N>0&&(be-=Ne/2);break}Z={left:be,top:de,width:Ne+ne.width,height:pe+ne.height,color:z.backdropColor}}b.push({label:_,font:M,textOffset:D,options:{rotation:j,color:J,strokeColor:Y,strokeWidth:re,textAlign:we,textBaseline:H,translation:[k,T],backdrop:Z}})}return b}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Dl(this.labelRotation))return t==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let u,d;return n==="left"?r?(d=this.right+i,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-l,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d=this.left)):n==="right"?r?(d=this.left+i,s==="near"?u="right":s==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+l,s==="near"?u="left":s==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,r,i,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===t);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,u,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(u.x,u.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const c=r[i];n.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,h,p;this.isHorizontal()?(u=Kd(t,this.left,o)-o/2,d=Kd(t,this.right,l)+l/2,h=p=c):(h=Kd(t,this.top,o)-o/2,p=Kd(t,this.bottom,l)+l/2,u=d=c),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,h),n.lineTo(d,p),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&d3(s,r);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,u=o.label,d=o.textOffset;Jp(s,u,0,d,c,l)}r&&u3(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=$s(s.font),o=Si(s.padding),l=s.align;let c=i.lineHeight/2;n==="bottom"||n==="center"||Na(n)?(c+=o.bottom,ss(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:u,titleY:d,maxWidth:h,rotation:p}=v9e(this,c,n,l);Jp(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:p,textAlign:b9e(l,n,r),textBaseline:"middle",translation:[u,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=ua(t.grid&&t.grid.z,-1),r=ua(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==wh.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[s]===this.id&&(!t||l.type===t)&&r.push(l)}return r}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return $s(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class qb{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;N9e(n)&&(s=this.register(n));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,w9e(t,o,s),this.override&&On.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,r=this.scope;s in n&&delete n[s],r&&s in On[r]&&(delete On[r][s],this.override&&delete Yu[s])}}function w9e(e,t,n){const s=Yp(Object.create(null),[n?On.get(n):{},On.get(t),e.defaults]);On.set(t,s),e.defaultRoutes&&j9e(t,e.defaultRoutes),e.descriptors&&On.describe(t,e.descriptors)}function j9e(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),r=s.pop(),i=[e].concat(s).join("."),o=t[n].split("."),l=o.pop(),c=o.join(".");On.route(i,r,c,l)})}function N9e(e){return"id"in e&&"defaults"in e}class C9e{constructor(){this.controllers=new qb(L1,"datasets",!0),this.elements=new qb(mc,"elements"),this.plugins=new qb(Object,"plugins"),this.scales=new qb(wh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(t,i,r):$a(r,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,n,s){const r=r3(t);an(s["before"+r],[],s),n[t](s),an(s["after"+r],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const r=n.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return r}}var wo=new C9e;class S9e{constructor(){this._init=void 0}notify(t,n,s,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,n,s);return n==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,n,s,r){r=r||{};for(const i of t){const o=i.plugin,l=o[s],c=[n,r,i.options];if(an(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){La(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,r=ua(s.options&&s.options.plugins,{}),i=_9e(s);return r===!1&&!n?[]:T9e(t,i,r,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(n,s),t,"stop"),this._notify(r(s,n),t,"start")}}function _9e(e){const t={},n=[],s=Object.keys(wo.plugins.items);for(let i=0;i<s.length;i++)n.push(wo.getPlugin(s[i]));const r=e.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function A9e(e,t){return!t&&e===!1?null:e===!0?{}:e}function T9e(e,{plugins:t,localIds:n},s,r){const i=[],o=e.getContext();for(const l of t){const c=l.id,u=A9e(s[c],r);u!==null&&i.push({plugin:l,options:k9e(e.config,{plugin:l,local:n[c]},u,o)})}return i}function k9e(e,{plugin:t,local:n},s,r){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function oL(e,t){const n=On.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function E9e(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function L9e(e,t){return e===t?"_index_":"_value_"}function NB(e){if(e==="x"||e==="y"||e==="r")return e}function P9e(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function lL(e,...t){if(NB(e))return e;for(const n of t){const s=n.axis||P9e(n.position)||e.length>1&&NB(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function CB(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function D9e(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return CB(e,"x",n[0])||CB(e,"y",n[0])}return{}}function O9e(e,t){const n=Yu[e.type]||{scales:{}},s=t.scales||{},r=oL(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!Na(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=lL(o,l,D9e(o,e),On.scales[l.type]),u=L9e(c,r),d=n.scales||{};i[o]=dp(Object.create(null),[{axis:c},l,d[c],d[u]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||oL(l,t),d=(Yu[l]||{}).scales||{};Object.keys(d).forEach(h=>{const p=E9e(h,c),x=o[p+"AxisID"]||p;i[x]=i[x]||Object.create(null),dp(i[x],[{axis:p},s[x],d[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];dp(l,[On.scales[l.type],On.scale])}),i}function aee(e){const t=e.options||(e.options={});t.plugins=ua(t.plugins,{}),t.scales=O9e(e,t)}function nee(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function M9e(e){return e=e||{},e.data=nee(e.data),aee(e),e}const SB=new Map,see=new Set;function Gb(e,t){let n=SB.get(e);return n||(n=t(),SB.set(e,n),see.add(n)),n}const Mg=(e,t,n)=>{const s=Vu(t,n);s!==void 0&&e.add(s)};class I9e{constructor(t){this._config=M9e(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=nee(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),aee(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Gb(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Gb(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Gb(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Gb(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let r=s.get(t);return(!r||n)&&(r=new Map,s.set(t,r)),r}getOptionScopes(t,n,s){const{options:r,type:i}=this,o=this._cachedScopes(t,s),l=o.get(n);if(l)return l;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(h=>Mg(c,t,h))),d.forEach(h=>Mg(c,r,h)),d.forEach(h=>Mg(c,Yu[i]||{},h)),d.forEach(h=>Mg(c,On,h)),d.forEach(h=>Mg(c,rL,h))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),see.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:t,type:n}=this;return[t,Yu[n]||{},On.datasets[n]||{},{type:n},On,rL]}resolveNamedOptions(t,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=_B(this._resolverCache,t,r);let c=o;if(R9e(o,n)){i.$shared=!1,s=wd(s)?s():s;const u=this.createResolver(t,s,l);c=Gf(o,s,u)}for(const u of n)i[u]=c[u];return i}createResolver(t,n,s=[""],r){const{resolver:i}=_B(this._resolverCache,t,s);return Na(n)?Gf(i,n,void 0,r):i}}function _B(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const r=n.join();let i=s.get(r);return i||(i={resolver:f3(t,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},s.set(r,i)),i}const $9e=e=>Na(e)&&Object.getOwnPropertyNames(e).some(t=>wd(e[t]));function R9e(e,t){const{isScriptable:n,isIndexable:s}=FJ(e);for(const r of t){const i=n(r),o=s(r),l=(o||i)&&e[r];if(i&&(wd(l)||$9e(l))||o&&ss(l))return!0}return!1}var z9e="4.5.1";const F9e=["top","bottom","left","right","chartArea"];function AB(e,t){return e==="top"||e==="bottom"||F9e.indexOf(e)===-1&&t==="x"}function TB(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function kB(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),an(n&&n.onComplete,[e],t)}function U9e(e){const t=e.chart,n=t.options.animation;an(n&&n.onProgress,[e],t)}function ree(e){return p3()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const jv={},EB=e=>{const t=ree(e);return Object.values(jv).filter(n=>n.canvas===t).pop()};function B9e(e,t,n){const s=Object.keys(e);for(const r of s){const i=+r;if(i>=t){const o=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=o)}}}function H9e(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}let D1=class{static defaults=On;static instances=jv;static overrides=Yu;static registry=wo;static version=z9e;static getChart=EB;static register(...t){wo.add(...t),LB()}static unregister(...t){wo.remove(...t),LB()}constructor(t,n){const s=this.config=new I9e(n),r=ree(t),i=EB(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||o9e(r)),this.platform.updateConfig(s);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=O8e(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new S9e,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=J8e(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],jv[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Cl.listen(this,"complete",kB),Cl.listen(this,"progress",U9e),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return La(t)?n&&i?i:r?s/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return wo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():J8(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return K8(this.canvas,this.ctx),this}stop(){return Cl.stop(this),this}resize(t,n){Cl.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,n,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,J8(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),an(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};$a(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,r=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],c=lL(o,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),$a(i,o=>{const l=o.options,c=l.id,u=lL(c,l),d=ua(l.type,o.dtype);(l.position===void 0||AB(l.position,u)!==AB(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in s&&s[c].type===d)h=s[c];else{const p=wo.getScale(d);h=new p({id:c,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),$a(r,(o,l)=>{o||delete s[l]}),$a(s,o=>{gi.configure(this,o,o.options),gi.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(TB("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||oL(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=wo.getController(l),{datasetElementType:u,dataElementType:d}=On.datasets[l];Object.assign(c,{dataElementType:wo.getElement(d),datasetElementType:u&&wo.getElement(u)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){$a(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:h}=this.getDatasetMeta(u),p=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||$a(i,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(TB("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){$a(this.scales,t=>{gi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!F8(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;B9e(t,r,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!F8(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;gi.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],$a(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,wd(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),r={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cl.has(this)?this.attached&&!Cl.running(this)&&Cl.start(this):(this.draw(),kB({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s={meta:t,index:t.index,cancelable:!0},r=rHe(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&d3(n,r),t.controller.draw(),r&&u3(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Zp(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,r){const i=FHe.modes[n];return typeof i=="function"?i(this,t,s,r):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=lm(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);Qp(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?r:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),Cl.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),K8(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete jv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),t[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};$a(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,u)=>{n.addEventListener(this,c,u),t[c]=u},r=(c,u)=>{t[c]&&(n.removeEventListener(this,c,u),delete t[c])},i=(c,u)=>{this.canvas&&this.resize(c,u)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){$a(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},$a(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const r=s?"set":"remove";let i,o,l,c;for(n==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Qw(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const r=this.options.hover,i=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),o=i(n,t),l=s?t:i(t,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},r=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:r=[],options:i}=this,o=n,l=this._getActiveElements(t,r,s,o),c=F8e(t),u=H9e(t,this._lastEvent,s,c);s&&(this._lastEvent=null,an(i.onHover,[t,l,this],this),c&&an(i.onClick,[t,l,this],this));const d=!Qw(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=u,d}_getActiveElements(t,n,s,r){if(t.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}};function LB(){return $a(D1.instances,e=>e._plugins.invalidate())}function q9e(e,t,n){const{startAngle:s,x:r,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:u,borderJoinStyle:d}=c,h=Math.min(u/o,Ui(s-n));if(e.beginPath(),e.arc(r,i,o-u/2,s+h/2,n-h/2),l>0){const p=Math.min(u/l,Ui(s-n));e.arc(r,i,l+u/2,n-p/2,s+p/2,!0)}else{const p=Math.min(u/2,o*Ui(s-n));if(d==="round")e.arc(r,i,p,n-za/2,s+za/2,!0);else if(d==="bevel"){const x=2*p*p,v=-x*Math.cos(n+za/2)+r,j=-x*Math.sin(n+za/2)+i,b=x*Math.cos(s+za/2)+r,N=x*Math.sin(s+za/2)+i;e.lineTo(v,j),e.lineTo(b,N)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function G9e(e,t,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:l,innerRadius:c}=t;let u=r/l;e.beginPath(),e.arc(i,o,l,s-u,n+u),c>r?(u=r/c,e.arc(i,o,c,n+u,s-u,!0)):e.arc(i,o,r,n+rs,s-rs),e.closePath(),e.clip()}function W9e(e){return m3(e,["outerStart","outerEnd","innerStart","innerEnd"])}function V9e(e,t,n,s){const r=W9e(e.options.borderRadius),i=(n-t)/2,o=Math.min(i,s*t/2),l=c=>{const u=(n-Math.min(i,c))*s/2;return Is(c,0,Math.min(i,u))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:Is(r.innerStart,0,o),innerEnd:Is(r.innerEnd,0,o)}}function sf(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function tj(e,t,n,s,r,i){const{x:o,y:l,startAngle:c,pixelMargin:u,innerRadius:d}=t,h=Math.max(t.outerRadius+s+n-u,0),p=d>0?d+s+n+u:0;let x=0;const v=r-c;if(s){const z=d>0?d-s:0,Q=h>0?h-s:0,J=(z+Q)/2,Y=J!==0?v*J/(J+s):v;x=(v-Y)/2}const j=Math.max(.001,v*h-n/za)/h,b=(v-j)/2,N=c+b+x,w=r-b-x,{outerStart:S,outerEnd:_,innerStart:k,innerEnd:T}=V9e(t,p,h,w-N),A=h-S,E=h-_,M=N+S/A,O=w-_/E,I=p+k,D=p+T,H=N+k/I,W=w-T/D;if(e.beginPath(),i){const z=(M+O)/2;if(e.arc(o,l,h,M,z),e.arc(o,l,h,z,O),_>0){const re=sf(E,O,o,l);e.arc(re.x,re.y,_,O,w+rs)}const Q=sf(D,w,o,l);if(e.lineTo(Q.x,Q.y),T>0){const re=sf(D,W,o,l);e.arc(re.x,re.y,T,w+rs,W+Math.PI)}const J=(w-T/p+(N+k/p))/2;if(e.arc(o,l,p,w-T/p,J,!0),e.arc(o,l,p,J,N+k/p,!0),k>0){const re=sf(I,H,o,l);e.arc(re.x,re.y,k,H+Math.PI,N-rs)}const Y=sf(A,N,o,l);if(e.lineTo(Y.x,Y.y),S>0){const re=sf(A,M,o,l);e.arc(re.x,re.y,S,N-rs,M)}}else{e.moveTo(o,l);const z=Math.cos(M)*h+o,Q=Math.sin(M)*h+l;e.lineTo(z,Q);const J=Math.cos(O)*h+o,Y=Math.sin(O)*h+l;e.lineTo(J,Y)}e.closePath()}function Y9e(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){tj(e,t,n,s,c,r);for(let u=0;u<i;++u)e.fill();isNaN(l)||(c=o+(l%_n||_n))}return tj(e,t,n,s,c,r),e.fill(),c}function Q9e(e,t,n,s,r){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:u,borderJoinStyle:d,borderDash:h,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!u)return;e.setLineDash(h||[]),e.lineDashOffset=p,v?(e.lineWidth=u*2,e.lineJoin=d||"round"):(e.lineWidth=u,e.lineJoin=d||"bevel");let j=t.endAngle;if(i){tj(e,t,n,s,j,r);for(let b=0;b<i;++b)e.stroke();isNaN(l)||(j=o+(l%_n||_n))}v&&G9e(e,t,j),c.selfJoin&&j-o>=za&&x===0&&d!=="miter"&&q9e(e,t,j),i||(tj(e,t,n,s,j,r),e.stroke())}class K9e extends mc{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.getProps(["x","y"],s),{angle:i,distance:o}=PJ(r,{x:t,y:n}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,x=ua(h,c-l),v=Xp(i,l,c)&&l!==c,j=x>=_n||v,b=nd(o,u+p,d+p);return j&&b}getCenterPoint(t){const{x:n,y:s,startAngle:r,endAngle:i,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:u}=this.options,d=(r+i)/2,h=(o+l+u+c)/2;return{x:n+Math.cos(d)*h,y:s+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,r=(n.offset||0)/4,i=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>_n?Math.floor(s/_n):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*r,Math.sin(l)*r);const c=1-Math.sin(Math.min(za,s||0)),u=r*c;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,Y9e(t,this,u,i,o),Q9e(t,this,u,i,o),t.restore()}}function iee(e,t,n=t){e.lineCap=ua(n.borderCapStyle,t.borderCapStyle),e.setLineDash(ua(n.borderDash,t.borderDash)),e.lineDashOffset=ua(n.borderDashOffset,t.borderDashOffset),e.lineJoin=ua(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ua(n.borderWidth,t.borderWidth),e.strokeStyle=ua(n.borderColor,t.borderColor)}function X9e(e,t,n){e.lineTo(n.x,n.y)}function Z9e(e){return e.stepped?fBe:e.tension||e.cubicInterpolationMode==="monotone"?hBe:X9e}function oee(e,t,n={}){const s=e.length,{start:r=0,end:i=s-1}=n,{start:o,end:l}=t,c=Math.max(r,o),u=Math.min(i,l),d=r<o&&i<o||r>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:u<c&&!d?s+u-c:u-c}}function J9e(e,t,n,s){const{points:r,options:i}=t,{count:o,start:l,loop:c,ilen:u}=oee(r,n,s),d=Z9e(i);let{move:h=!0,reverse:p}=s||{},x,v,j;for(x=0;x<=u;++x)v=r[(l+(p?u-x:x))%o],!v.skip&&(h?(e.moveTo(v.x,v.y),h=!1):d(e,j,v,p,i.stepped),j=v);return c&&(v=r[(l+(p?u:0))%o],d(e,j,v,p,i.stepped)),!!c}function eqe(e,t,n,s){const r=t.points,{count:i,start:o,ilen:l}=oee(r,n,s),{move:c=!0,reverse:u}=s||{};let d=0,h=0,p,x,v,j,b,N;const w=_=>(o+(u?l-_:_))%i,S=()=>{j!==b&&(e.lineTo(d,b),e.lineTo(d,j),e.lineTo(d,N))};for(c&&(x=r[w(0)],e.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=r[w(p)],x.skip)continue;const _=x.x,k=x.y,T=_|0;T===v?(k<j?j=k:k>b&&(b=k),d=(h*d+_)/++h):(S(),e.lineTo(_,k),v=T,h=0,j=b=k),N=k}S()}function cL(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?eqe:J9e}function tqe(e){return e.stepped?WBe:e.tension||e.cubicInterpolationMode==="monotone"?VBe:ru}function aqe(e,t,n,s){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,s)&&r.closePath()),iee(e,t.options),e.stroke(r)}function nqe(e,t,n,s){const{segments:r,options:i}=t,o=cL(t);for(const l of r)iee(e,i,l.style),e.beginPath(),o(e,t,l,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const sqe=typeof Path2D=="function";function rqe(e,t,n,s){sqe&&!t.options.segment?aqe(e,t,n,s):nqe(e,t,n,s)}class iqe extends mc{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;RBe(this._points,s,t,r,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tHe(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,r=t[n],i=this.points,o=ZBe(this,{property:n,start:r,end:r});if(!o.length)return;const l=[],c=tqe(s);let u,d;for(u=0,d=o.length;u<d;++u){const{start:h,end:p}=o[u],x=i[h],v=i[p];if(x===v){l.push(x);continue}const j=Math.abs((r-x[n])/(v[n]-x[n])),b=c(x,v,j,s.stepped);b[n]=t[n],l.push(b)}return l.length===1?l[0]:l}pathSegment(t,n,s){return cL(this)(t,this,n,s)}path(t,n,s){const r=this.segments,i=cL(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const l of r)o&=i(t,this,l,{start:n,end:n+s-1});return!!o}draw(t,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),rqe(t,this,s,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function PB(e,t,n,s){const r=e.options,{[n]:i}=e.getProps([n],s);return Math.abs(t-i)<r.radius+r.hitRadius}class oqe extends mc{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(t-i,2)+Math.pow(n-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,n){return PB(this,t,"x",n)}inYRange(t,n){return PB(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!Zp(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,iL(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function lee(e,t){const{x:n,y:s,base:r,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,u,d,h;return e.horizontal?(h=o/2,l=Math.min(n,r),c=Math.max(n,r),u=s-h,d=s+h):(h=i/2,l=n-h,c=n+h,u=Math.min(s,r),d=Math.max(s,r)),{left:l,top:u,right:c,bottom:d}}function rd(e,t,n,s){return e?0:Is(t,n,s)}function lqe(e,t,n){const s=e.options.borderWidth,r=e.borderSkipped,i=zJ(s);return{t:rd(r.top,i.top,0,n),r:rd(r.right,i.right,0,t),b:rd(r.bottom,i.bottom,0,n),l:rd(r.left,i.left,0,t)}}function cqe(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,i=Cf(r),o=Math.min(t,n),l=e.borderSkipped,c=s||Na(r);return{topLeft:rd(!c||l.top||l.left,i.topLeft,0,o),topRight:rd(!c||l.top||l.right,i.topRight,0,o),bottomLeft:rd(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:rd(!c||l.bottom||l.right,i.bottomRight,0,o)}}function dqe(e){const t=lee(e),n=t.right-t.left,s=t.bottom-t.top,r=lqe(e,n/2,s/2),i=cqe(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:i},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function jT(e,t,n,s){const r=t===null,i=n===null,l=e&&!(r&&i)&&lee(e,s);return l&&(r||nd(t,l.left,l.right))&&(i||nd(n,l.top,l.bottom))}function uqe(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function mqe(e,t){e.rect(t.x,t.y,t.w,t.h)}function NT(e,t,n={}){const s=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,i=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+s,y:e.y+r,w:e.w+i,h:e.h+o,radius:e.radius}}class fqe extends mc{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=dqe(this),l=uqe(o.radius)?Zw:mqe;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,NT(o,n,i)),t.clip(),l(t,NT(i,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,NT(i,n)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,n,s){return jT(this,t,n,s)}inXRange(t,n){return jT(this,t,null,n)}inYRange(t,n){return jT(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}const DB=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},hqe=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class OB extends mc{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=an(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,r)=>t.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,r=$s(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=DB(s,i);let u,d;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(o,i,l,c)+10):(d=this.maxHeight,u=this._fitCols(o,r,l,c)+10),this.width=Math.min(u,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=r+l;let h=t;i.textAlign="left",i.textBaseline="middle";let p=-1,x=-d;return this.legendItems.forEach((v,j)=>{const b=s+n/2+i.measureText(v.text).width;(j===0||u[u.length-1]+b+2*l>o)&&(h+=d,u[u.length-(j>0?0:1)]=0,x+=d,p++),c[j]={left:0,top:x,row:p,width:b,height:r},u[u.length-1]+=b+l}),h}_fitCols(t,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=o-t;let h=l,p=0,x=0,v=0,j=0;return this.legendItems.forEach((b,N)=>{const{itemWidth:w,itemHeight:S}=gqe(s,n,i,b,r);N>0&&x+S+2*l>d&&(h+=p+l,u.push({width:p,height:x}),v+=p+l,j++,p=x=0),c[N]={left:v,top:x,col:j,width:w,height:S},p=Math.max(p,w),x+=S+l}),h+=p,u.push({width:p,height:x}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=Sf(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=Ps(s,this.left+r,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,c=Ps(s,this.left+r,this.right-this.lineWidths[l])),u.top+=this.top+t+r,u.left=o.leftForLtr(o.x(c),u.width),c+=u.width+r}else{let l=0,c=Ps(s,this.top+t+r,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,c=Ps(s,this.top+t+r,this.bottom-this.columnSizes[l].height)),u.top=c,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),c+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;d3(t,this),this._draw(),u3(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=t,l=On.color,c=Sf(t.rtl,this.left,this.width),u=$s(o.font),{padding:d}=o,h=u.size,p=h/2;let x;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:v,boxHeight:j,itemHeight:b}=DB(o,h),N=function(T,A,E){if(isNaN(v)||v<=0||isNaN(j)||j<0)return;r.save();const M=ua(E.lineWidth,1);if(r.fillStyle=ua(E.fillStyle,l),r.lineCap=ua(E.lineCap,"butt"),r.lineDashOffset=ua(E.lineDashOffset,0),r.lineJoin=ua(E.lineJoin,"miter"),r.lineWidth=M,r.strokeStyle=ua(E.strokeStyle,l),r.setLineDash(ua(E.lineDash,[])),o.usePointStyle){const O={radius:j*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:M},I=c.xPlus(T,v/2),D=A+p;RJ(r,O,I,D,o.pointStyleWidth&&v)}else{const O=A+Math.max((h-j)/2,0),I=c.leftForLtr(T,v),D=Cf(E.borderRadius);r.beginPath(),Object.values(D).some(H=>H!==0)?Zw(r,{x:I,y:O,w:v,h:j,radius:D}):r.rect(I,O,v,j),r.fill(),M!==0&&r.stroke()}r.restore()},w=function(T,A,E){Jp(r,E.text,T,A+b/2,u,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},S=this.isHorizontal(),_=this._computeTitleHeight();S?x={x:Ps(i,this.left+d,this.right-s[0]),y:this.top+d+_,line:0}:x={x:this.left+d,y:Ps(i,this.top+_+d,this.bottom-n[0].height),line:0},GJ(this.ctx,t.textDirection);const k=b+d;this.legendItems.forEach((T,A)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;const E=r.measureText(T.text).width,M=c.textAlign(T.textAlign||(T.textAlign=o.textAlign)),O=v+p+E;let I=x.x,D=x.y;c.setWidth(this.width),S?A>0&&I+O+d>this.right&&(D=x.y+=k,x.line++,I=x.x=Ps(i,this.left+d,this.right-s[x.line])):A>0&&D+k>this.bottom&&(I=x.x=I+n[x.line].width+d,x.line++,D=x.y=Ps(i,this.top+_+d,this.bottom-n[x.line].height));const H=c.x(I);if(N(H,D,T),I=eBe(M,I+v+p,S?I+O:this.right,t.rtl),w(c.x(I),D,T),S)x.x+=O+d;else if(typeof T.text!="string"){const W=u.lineHeight;x.y+=cee(T,W)+d}else x.y+=k}),WJ(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=$s(n.font),r=Si(n.padding);if(!n.display)return;const i=Sf(t.rtl,this.left,this.width),o=this.ctx,l=n.position,c=s.size/2,u=r.top+c;let d,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+u,h=Ps(t.align,h,this.right-p);else{const v=this.columnSizes.reduce((j,b)=>Math.max(j,b.height),0);d=u+Ps(t.align,this.top,this.bottom-v-t.labels.padding-this._computeTitleHeight())}const x=Ps(l,h,h+p);o.textAlign=i.textAlign(o3(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Jp(o,n.text,x,d,s)}_computeTitleHeight(){const t=this.options.title,n=$s(t.font),s=Si(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,r,i;if(nd(t,this.left,this.right)&&nd(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],nd(t,r.left,r.left+r.width)&&nd(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!yqe(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const r=this._hoveredItem,i=hqe(r,s);r&&!i&&an(n.onLeave,[t,r,this],this),this._hoveredItem=s,s&&!i&&an(n.onHover,[t,s,this],this)}else s&&an(n.onClick,[t,s,this],this)}}function gqe(e,t,n,s,r){const i=pqe(s,e,t,n),o=xqe(r,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function pqe(e,t,n,s){let r=e.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),t+n.size/2+s.measureText(r).width}function xqe(e,t,n){let s=e;return typeof t.text!="string"&&(s=cee(t,n)),s}function cee(e,t){const n=e.text?e.text.length:0;return t*n}function yqe(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var bqe={id:"legend",_element:OB,start(e,t,n){const s=e.legend=new OB({ctx:e.ctx,options:n,chart:e});gi.configure(e,s,n),gi.addBox(e,s)},stop(e){gi.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;gi.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),t.hidden=!0):(r.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(n?0:void 0),d=Si(u.borderWidth);return{text:t[c.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:s||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class dee extends mc{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const r=ss(s.text)?s.text.length:1;this._padding=Si(s.padding);const i=r*$s(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:r,right:i,options:o}=this,l=o.align;let c=0,u,d,h;return this.isHorizontal()?(d=Ps(l,s,i),h=n+t,u=i-s):(o.position==="left"?(d=s+t,h=Ps(l,r,n),c=za*-.5):(d=i-t,h=Ps(l,n,r),c=za*.5),u=r-n),{titleX:d,titleY:h,maxWidth:u,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=$s(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:u}=this._drawArgs(i);Jp(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:u,textAlign:o3(n.align),textBaseline:"middle",translation:[o,l]})}}function vqe(e,t){const n=new dee({ctx:e.ctx,options:t,chart:e});gi.configure(e,n,t),gi.addBox(e,n),e.titleBlock=n}var wqe={id:"title",_element:dee,start(e,t,n){vqe(e,n)},stop(e){const t=e.titleBlock;gi.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;gi.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Jg={average(e){if(!e.length)return!1;let t,n,s=new Set,r=0,i=0;for(t=0,n=e.length;t<n;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),r+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:r/i}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=sL(t,u);d<r&&(r=d,l=c)}}if(l){const c=l.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function vo(e,t){return t&&(ss(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Sl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function jqe(e,t){const{element:n,datasetIndex:s,index:r}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:e,label:o,parsed:i.getParsed(r),raw:e.data.datasets[s].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function MB(e,t){const n=e.chart.ctx,{body:s,footer:r,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=$s(t.bodyFont),u=$s(t.titleFont),d=$s(t.footerFont),h=i.length,p=r.length,x=s.length,v=Si(t.padding);let j=v.height,b=0,N=s.reduce((_,k)=>_+k.before.length+k.lines.length+k.after.length,0);if(N+=e.beforeBody.length+e.afterBody.length,h&&(j+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),N){const _=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;j+=x*_+(N-x)*c.lineHeight+(N-1)*t.bodySpacing}p&&(j+=t.footerMarginTop+p*d.lineHeight+(p-1)*t.footerSpacing);let w=0;const S=function(_){b=Math.max(b,n.measureText(_).width+w)};return n.save(),n.font=u.string,$a(e.title,S),n.font=c.string,$a(e.beforeBody.concat(e.afterBody),S),w=t.displayColors?o+2+t.boxPadding:0,$a(s,_=>{$a(_.before,S),$a(_.lines,S),$a(_.after,S)}),w=0,n.font=d.string,$a(e.footer,S),n.restore(),b+=v.width,{width:b,height:j}}function Nqe(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function Cqe(e,t,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&r+i+o>t.width||e==="right"&&r-i-o<0)return!0}function Sqe(e,t,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:l,right:c}}=e;let u="center";return s==="center"?u=r<=(l+c)/2?"left":"right":r<=i/2?u="left":r>=o-i/2&&(u="right"),Cqe(u,e,t,n)&&(u="center"),u}function IB(e,t,n){const s=n.yAlign||t.yAlign||Nqe(e,n);return{xAlign:n.xAlign||t.xAlign||Sqe(e,t,n,s),yAlign:s}}function _qe(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function Aqe(e,t,n){let{y:s,height:r}=e;return t==="top"?s+=n:t==="bottom"?s-=r+n:s-=r/2,s}function $B(e,t,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=n,u=r+i,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:x}=Cf(o);let v=_qe(t,l);const j=Aqe(t,c,u);return c==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(d,p)+r:l==="right"&&(v+=Math.max(h,x)+r),{x:Is(v,0,s.width-t.width),y:Is(j,0,s.height-t.height)}}function Wb(e,t,n){const s=Si(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function RB(e){return vo([],Sl(e))}function Tqe(e,t,n){return lm(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function zB(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const uee={beforeTitle:jl,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:jl,beforeBody:jl,beforeLabel:jl,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return La(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:jl,afterBody:jl,beforeFooter:jl,footer:jl,afterFooter:jl};function or(e,t,n,s){const r=e[t].call(n,s);return typeof r>"u"?uee[t].call(n,s):r}class FB extends mc{static positioners=Jg;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new YJ(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Tqe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,r=or(s,"beforeTitle",this,t),i=or(s,"title",this,t),o=or(s,"afterTitle",this,t);let l=[];return l=vo(l,Sl(r)),l=vo(l,Sl(i)),l=vo(l,Sl(o)),l}getBeforeBody(t,n){return RB(or(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,r=[];return $a(t,i=>{const o={before:[],lines:[],after:[]},l=zB(s,i);vo(o.before,Sl(or(l,"beforeLabel",this,i))),vo(o.lines,or(l,"label",this,i)),vo(o.after,Sl(or(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(t,n){return RB(or(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,r=or(s,"beforeFooter",this,t),i=or(s,"footer",this,t),o=or(s,"afterFooter",this,t);let l=[];return l=vo(l,Sl(r)),l=vo(l,Sl(i)),l=vo(l,Sl(o)),l}_createItems(t){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let l=[],c,u;for(c=0,u=n.length;c<u;++c)l.push(jqe(this.chart,n[c]));return t.filter&&(l=l.filter((d,h,p)=>t.filter(d,h,p,s))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,s))),$a(l,d=>{const h=zB(t.callbacks,d);r.push(or(h,"labelColor",this,d)),i.push(or(h,"labelPointStyle",this,d)),o.push(or(h,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Jg[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=MB(this,s),u=Object.assign({},l,c),d=IB(this.chart,s,u),h=$B(s,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,r){const i=this.getCaretPosition(t,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(t,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Cf(l),{x:p,y:x}=t,{width:v,height:j}=n;let b,N,w,S,_,k;return i==="center"?(_=x+j/2,r==="left"?(b=p,N=b-o,S=_+o,k=_-o):(b=p+v,N=b+o,S=_-o,k=_+o),w=b):(r==="left"?N=p+Math.max(c,d)+o:r==="right"?N=p+v-Math.max(u,h)-o:N=this.caretX,i==="top"?(S=x,_=S-o,b=N-o,w=N+o):(S=x+j,_=S+o,b=N+o,w=N-o),k=S),{x1:b,x2:N,x3:w,y1:S,y2:_,y3:k}}drawTitle(t,n,s){const r=this.title,i=r.length;let o,l,c;if(i){const u=Sf(s.rtl,this.x,this.width);for(t.x=Wb(this,s.titleAlign,s),n.textAlign=u.textAlign(s.titleAlign),n.textBaseline="middle",o=$s(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<i;++c)n.fillText(r[c],u.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,n,s,r,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:u}=i,d=$s(i.bodyFont),h=Wb(this,"left",i),p=r.x(h),x=c<d.lineHeight?(d.lineHeight-c)/2:0,v=n.y+x;if(i.usePointStyle){const j={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},b=r.leftForLtr(p,u)+u/2,N=v+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,iL(t,j,b,N),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,iL(t,j,b,N)}else{t.lineWidth=Na(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const j=r.leftForLtr(p,u),b=r.leftForLtr(r.xPlus(p,1),u-2),N=Cf(o.borderRadius);Object.values(N).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Zw(t,{x:j,y:v,w:u,h:c,radius:N}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Zw(t,{x:b,y:v+1,w:u-2,h:c-2,radius:N}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(j,v,u,c),t.strokeRect(j,v,u,c),t.fillStyle=o.backgroundColor,t.fillRect(b,v+1,u-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=s,h=$s(s.bodyFont);let p=h.lineHeight,x=0;const v=Sf(s.rtl,this.x,this.width),j=function(E){n.fillText(E,v.x(t.x+x),t.y+p/2),t.y+=p+i},b=v.textAlign(o);let N,w,S,_,k,T,A;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,t.x=Wb(this,b,s),n.fillStyle=s.bodyColor,$a(this.beforeBody,j),x=l&&b!=="right"?o==="center"?u/2+d:u+2+d:0,_=0,T=r.length;_<T;++_){for(N=r[_],w=this.labelTextColors[_],n.fillStyle=w,$a(N.before,j),S=N.lines,l&&S.length&&(this._drawColorBox(n,t,_,v,s),p=Math.max(h.lineHeight,c)),k=0,A=S.length;k<A;++k)j(S[k]),p=h.lineHeight;$a(N.after,j)}x=0,p=h.lineHeight,$a(this.afterBody,j),t.y-=i}drawFooter(t,n,s){const r=this.footer,i=r.length;let o,l;if(i){const c=Sf(s.rtl,this.x,this.width);for(t.x=Wb(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=$s(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:u,height:d}=s,{topLeft:h,topRight:p,bottomLeft:x,bottomRight:v}=Cf(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+h,c),o==="top"&&this.drawCaret(t,n,s,r),n.lineTo(l+u-p,c),n.quadraticCurveTo(l+u,c,l+u,c+p),o==="center"&&i==="right"&&this.drawCaret(t,n,s,r),n.lineTo(l+u,c+d-v),n.quadraticCurveTo(l+u,c+d,l+u-v,c+d),o==="bottom"&&this.drawCaret(t,n,s,r),n.lineTo(l+x,c+d),n.quadraticCurveTo(l,c+d,l,c+d-x),o==="center"&&i==="left"&&this.drawCaret(t,n,s,r),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=Jg[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=MB(this,t),c=Object.assign({},o,this._size),u=IB(n,t,c),d=$B(t,c,u,n);(r._to!==d.x||i._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Si(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,r,n),GJ(t,n.textDirection),i.y+=o.top,this.drawTitle(i,t,n),this.drawBody(i,t,n),this.drawFooter(i,t,n),WJ(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,r=t.map(({datasetIndex:l,index:c})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),i=!Qw(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,n,s),l=this._positionChanged(o,t),c=n||!Qw(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,r){const i=this.options;if(t.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:r,options:i}=this,o=Jg[i.position].call(this,t,n);return o!==!1&&(s!==o.x||r!==o.y)}}var kqe={id:"tooltip",_element:FB,positioners:Jg,afterInit(e,t,n){n&&(e.tooltip=new FB({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:uee},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Eqe=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function Lqe(e,t,n,s){const r=e.indexOf(t);if(r===-1)return Eqe(e,t,n,s);const i=e.lastIndexOf(t);return r!==i?n:r}const Pqe=(e,t)=>e===null?null:Is(Math.round(e),0,t);function UB(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Dqe extends wh{static id="category";static defaults={ticks:{callback:UB}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(La(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:Lqe(s,t,ua(n,t),this._addedLabels),Pqe(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=t===0&&n===i.length-1?i:i.slice(t,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)r.push({value:o});return r}getLabelForValue(t){return UB.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Oqe(e,t){const n=[],{bounds:r,step:i,min:o,max:l,precision:c,count:u,maxTicks:d,maxDigits:h,includeBounds:p}=e,x=i||1,v=d-1,{min:j,max:b}=t,N=!La(o),w=!La(l),S=!La(u),_=(b-j)/(h+1);let k=B8((b-j)/v/x)*x,T,A,E,M;if(k<1e-14&&!N&&!w)return[{value:j},{value:b}];M=Math.ceil(b/k)-Math.floor(j/k),M>v&&(k=B8(M*k/v/x)*x),La(c)||(T=Math.pow(10,c),k=Math.ceil(k*T)/T),r==="ticks"?(A=Math.floor(j/k)*k,E=Math.ceil(b/k)*k):(A=j,E=b),N&&w&&i&&G8e((l-o)/i,k/1e3)?(M=Math.round(Math.min((l-o)/k,d)),k=(l-o)/M,A=o,E=l):S?(A=N?o:A,E=w?l:E,M=u-1,k=(E-A)/M):(M=(E-A)/k,up(M,Math.round(M),k/1e3)?M=Math.round(M):M=Math.ceil(M));const O=Math.max(H8(k),H8(A));T=Math.pow(10,La(c)?O:c),A=Math.round(A*T)/T,E=Math.round(E*T)/T;let I=0;for(N&&(p&&A!==o?(n.push({value:o}),A<o&&I++,up(Math.round((A+I*k)*T)/T,o,BB(o,_,e))&&I++):A<o&&I++);I<M;++I){const D=Math.round((A+I*k)*T)/T;if(w&&D>l)break;n.push({value:D})}return w&&p&&E!==l?n.length&&up(n[n.length-1].value,l,BB(l,_,e))?n[n.length-1].value=l:n.push({value:l}):(!w||E===l)&&n.push({value:E}),n}function BB(e,t,{horizontal:n,minRotation:s}){const r=Dl(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class Mqe extends wh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return La(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=n?r:c,l=c=>i=s?i:c;if(t){const c=$o(r),u=$o(i);c<0&&u<0?l(0):c>0&&u>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(r-c)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=Oqe(r,i);return t.bounds==="ticks"&&W8e(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const r=(s-n)/Math.max(t.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return c3(t,this.chart.options.locale,this.options.ticks.format)}}class Iqe extends Mqe{static id="linear";static defaults={ticks:{callback:$J.formatters.numeric}};determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ci(t)?t:0,this.max=Ci(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=Dl(this.options.ticks.minRotation),r=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const O1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ur=Object.keys(O1);function HB(e,t){return e-t}function qB(e,t){if(La(t))return null;const n=e._adapter,{parser:s,round:r,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ci(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Kp(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function GB(e,t,n,s){const r=ur.length;for(let i=ur.indexOf(e);i<r-1;++i){const o=O1[ur[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(l*o.size))<=s)return ur[i]}return ur[r-1]}function $qe(e,t,n,s,r){for(let i=ur.length-1;i>=ur.indexOf(n);i--){const o=ur[i];if(O1[o].common&&e._adapter.diff(r,s,o)>=t-1)return o}return ur[n?ur.indexOf(n):0]}function Rqe(e){for(let t=ur.indexOf(e)+1,n=ur.length;t<n;++t)if(O1[ur[t]].common)return ur[t]}function WB(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:r}=i3(n,t),i=n[s]>=t?n[s]:n[r];e[i]=!0}}function zqe(e,t,n,s){const r=e._adapter,i=+r.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,s))c=n[l],c>=0&&(t[c].major=!0);return t}function VB(e,t,n){const s=[],r={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],r[l]=o,s.push({value:l,major:!1});return i===0||!n?s:zqe(e,s,r,n)}class YB extends wh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),r=this._adapter=new MHe._date(t.adapters.date);r.init(n),dp(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:qB(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ci(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Ci(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=X8e(r,i,o);return this._unit=n.unit||(s.autoSkip?GB(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):$qe(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Rqe(this._unit),this.initOffsets(r),t.reverse&&l.reverse(),VB(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,r,i;this.options.offset&&t.length&&(r=this.getDecimalForValue(t[0]),t.length===1?n=1-r:n=(this.getDecimalForValue(t[1])-r)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=Is(n,0,o),s=Is(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||GB(i.minUnit,n,s,this._getLabelCapacity(n)),l=ua(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,u=Kp(c)||c===!0,d={};let h=n,p,x;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":o),t.diff(s,n,o)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=h,x=0;p<s;p=+t.add(p,l,o),x++)WB(d,p,v);return(p===s||r.bounds==="ticks"||x===1)&&WB(d,p,v),Object.keys(d).sort(HB).map(j=>+j)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return an(o,[t,n,s],this);const l=i.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],p=s[n],x=u&&h&&p&&p.major;return this._adapter.format(t,r||(x?h:d))}generateTickLabels(t){let n,s,r;for(n=0,s=t.length;n<s;++n)r=t[n],r.label=this._tickFormatFunction(r.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,r=Dl(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(t,0,VB(this,[t],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)t=t.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)t.push(qB(this,r[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return OJ(t.sort(HB))}}function Vb(e,t,n){let s=0,r=e.length-1,i,o,l,c;n?(t>=e[s].pos&&t<=e[r].pos&&({lo:s,hi:r}=xu(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[r]):(t>=e[s].time&&t<=e[r].time&&({lo:s,hi:r}=xu(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[r]);const u=o-i;return u?l+(c-l)*(t-i)/u:l}class dYe extends YB{static id="timeseries";static defaults=YB.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Vb(n,this.min),this._tableRange=Vb(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,r=[],i=[];let o,l,c,u,d;for(o=0,l=t.length;o<l;++o)u=t[o],u>=n&&u<=s&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],c=r[o-1],u=r[o],Math.round((d+c)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Vb(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Vb(this._table,s*this._tableRange+this._minPos,!0)}}const mee="label";function QB(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Fqe(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function fee(e,t){e.labels=t}function hee(e,t,n=mee){const s=[];e.datasets=t.map(r=>{const i=e.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function Uqe(e,t=mee){const n={labels:[],datasets:[]};return fee(n,e.labels),hee(n,e.datasets,t),n}function Bqe(e,t){const{height:n=150,width:s=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:u=[],fallbackContent:d,updateMode:h,...p}=e,x=f.useRef(null),v=f.useRef(null),j=()=>{x.current&&(v.current=new D1(x.current,{type:o,data:Uqe(l,i),options:c&&{...c},plugins:u}),QB(t,v.current))},b=()=>{QB(t,null),v.current&&(v.current.destroy(),v.current=null)};return f.useEffect(()=>{!r&&v.current&&c&&Fqe(v.current,c)},[r,c]),f.useEffect(()=>{!r&&v.current&&fee(v.current.config.data,l.labels)},[r,l.labels]),f.useEffect(()=>{!r&&v.current&&l.datasets&&hee(v.current.config.data,l.datasets,i)},[r,l.datasets]),f.useEffect(()=>{v.current&&(r?(b(),setTimeout(j)):v.current.update(h))},[r,c,l.labels,l.datasets,h]),f.useEffect(()=>{v.current&&(b(),setTimeout(j))},[o]),f.useEffect(()=>(j(),()=>b()),[]),a.jsx("canvas",{ref:x,role:"img",height:n,width:s,...p,children:d})}const Hqe=f.forwardRef(Bqe);function b3(e,t){return D1.register(t),f.forwardRef((n,s)=>a.jsx(Hqe,{...n,ref:s,type:e}))}const qqe=b3("line",DHe),Gqe=b3("bar",EHe),Wqe=b3("pie",OHe);D1.register(Dqe,Iqe,fqe,iqe,oqe,K9e,wqe,kqe,bqe);const gee=e=>a.jsx(rn,{...e}),Vqe=e=>a.jsx(f9,{...e}),Yqe=e=>a.jsx(dx,{...e}),Qqe=e=>a.jsx(Qa,{...e}),pee=e=>a.jsx(ra,{...e}),Kqe=e=>a.jsx(Eue,{...e}),Xqe=[{icon:gee,title:"Total Contacts",value:128,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:pee,title:"Emails Sent",value:450,color:"text-purple-600",bgColor:"bg-purple-50"},{icon:Yqe,title:"Active Campaigns",value:9,color:"text-green-600",bgColor:"bg-green-50"},{icon:Vqe,title:"Revenue",value:125e3,color:"text-yellow-600",bgColor:"bg-yellow-50"}],Zqe=[{name:"Emma Watty",company:"Tech Interaction Inc.",assignedBy:"Alice Smith",source:"Website",date:"Oct 10, 2:10 PM"},{name:"John Johnny",company:"Capital Business Co.",assignedBy:"Bob Johnson",source:"Referral",date:"Oct 9, 12:00 AM"},{name:"Annie Arnty",company:"Dynamic Systems Inc.",assignedBy:"Catherine Lee",source:"Trade Show",date:"Oct 8, 1:25 PM"},{name:"James Wilson",company:"Global Services LLC",assignedBy:"David Kim",source:"Cold Call",date:"Oct 7, 11:15 AM"}],Jqe={labels:["Week 1","Week 2","Week 3","Week 4"],datasets:[{label:"Leads",data:[50,75,60,90],backgroundColor:"rgba(96, 165, 250, 0.6)",borderColor:"rgba(96, 165, 250, 1)",borderWidth:1},{label:"Conversions",data:[10,20,15,25],backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]},eGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},tGe={labels:["Leads","Conversions"],datasets:[{label:"Leads Status",data:[75,25],backgroundColor:["rgba(96, 165, 250, 0.6)","rgba(34, 197, 94, 0.6)"],borderColor:["rgba(96, 165, 250, 1)","rgba(34, 197, 94, 1)"],borderWidth:1}]},aGe={responsive:!0,plugins:{legend:{position:"top",labels:{color:"#374151"}},title:{display:!0,color:"#111827",font:{size:18}}}},nGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},sGe=()=>{const e=[{icon:gee,label:"New Contact"},{icon:pee,label:"New Campaign"},{icon:Qqe,label:"New Task"},{icon:Kqe,label:"New Leads"}];return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 flex flex-col md:flex-row items-center space-y-3 md:space-y-0 md:space-x-4",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 py-2 flex-grow focus-within:ring-2 focus-within:ring-indigo-500 transition w-full md:max-w-3xl",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts, Leads, or Campaigns...",className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"flex space-x-3 md:ml-auto",children:e.map((t,n)=>a.jsxs("div",{className:"relative group",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-900 transition rounded-full hover:bg-gray-100 focus:outline-none",children:a.jsx(t.icon,{size:20})}),a.jsx("span",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-1 bg-gray-800 text-white text-xs rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition",children:t.label})]},n))})]})},rGe=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-lg transition duration-300 hover:shadow-xl hover:ring-2 hover:ring-blue-500 cursor-pointer",onClick:()=>console.log(`Clicked metric card: ${t}`),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]}),iGe=({name:e,company:t,assignedBy:n,source:s,date:r})=>{const{text:i,bg:o}=nGe(s);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 px-2 -mx-2 rounded-md",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:e}),a.jsx("p",{className:"text-xs text-gray-500",children:t}),n&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Assigned by:"," ",a.jsx("span",{className:"font-semibold text-gray-700",children:n})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:r}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${i} ${o} px-2 py-0.5 rounded-full`,children:s})]})]})})},oGe=({title:e,children:t})=>a.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-md flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-indigo-500 cursor-pointer hover:underline",children:"See All"})]}),t]}),lGe=({title:e,chartData:t,chartOptions:n})=>{const[s,r]=f.useState("bar"),i=s==="pie"?tGe:t,o=s==="pie"?aGe:n,l=s==="line"?qqe:s==="pie"?Wqe:Gqe,c=s==="pie"?250:300;return a.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-md flex flex-col hover:shadow-lg transition",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:e}),a.jsxs("select",{value:s,onChange:u=>r(u.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:[a.jsx("option",{value:"bar",children:"Bar"}),a.jsx("option",{value:"line",children:"Line"}),a.jsx("option",{value:"pie",children:"Pie"})]})]}),a.jsx("div",{className:"w-full flex justify-center",style:{height:c},children:a.jsx(l,{data:i,options:o})})]})};function cGe(){const{user:e}=Gt();return f.useEffect(()=>{document.title="Dashboard | Sari-Sari CRM"},[]),a.jsx("div",{className:"min-h-screen pt-5 pb-10 font-sans",children:a.jsxs("main",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-xl font-bold mb-4",children:["Welcome back, ",e?.name||"Marketing","! Heres your marketing overview."]}),a.jsx(sGe,{}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:Xqe.map(t=>a.jsx(rGe,{...t},t.title))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsx(lGe,{title:"Leads & Conversions",chartData:Jqe,chartOptions:eGe}),a.jsx(oGe,{title:"Latest Leads",children:Zqe.map((t,n)=>a.jsx(iGe,{...t},n))})]})]})})}function dGe(){f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[n,s]=f.useState(""),[r,i]=f.useState("All Statuses"),o=f.useMemo(()=>[{company:"Acme Corporation",url:"https://acme.com",status:"CUSTOMER",industry:"Technology",territory:"North Region",phone_number:"+1-555-0100",billing_address:"123 Main St, North City",shipping_address:"456 Elm St, North City",created_by:"John Appleseed",created_date:"2024-01-10",last_updated:"2025-09-25 14:30"},{company:"Beta Solutions",url:"https://beta.com",status:"PROSPECT",industry:"Finance",territory:"South Region",phone_number:"+1-555-0200",billing_address:"789 Pine St, South City",shipping_address:"101 Maple St, South City",created_by:"Jane Doe",created_date:"2024-03-05",last_updated:"2025-10-01 10:15"},{company:"Gamma Partners",url:"https://gamma.com",status:"PARTNER",industry:"Retail",territory:"East Region",phone_number:"+1-555-0300",billing_address:"234 Oak St, East City",shipping_address:"345 Birch St, East City",created_by:"Alice Smith",created_date:"2023-12-20",last_updated:"2025-08-15 09:45"},{company:"Delta Corp",url:"https://delta.com",status:"INACTIVE",industry:"Logistics",territory:"West Region",phone_number:"+1-555-0400",billing_address:"987 Cedar St, West City",shipping_address:"654 Pine St, West City",created_by:"Bob Johnson",created_date:"2023-11-15",last_updated:"2025-06-12 11:20"}],[]),l=h=>t(h),c=()=>t(null),u=f.useMemo(()=>[{title:"Total Accounts",value:o.length,color:"text-yellow-600",bgColor:"bg-yellow-50",icon:rn},{title:"Customers",value:o.filter(h=>h.status==="CUSTOMER").length,color:"text-green-600",bgColor:"bg-green-50",icon:Ro},{title:"Prospects",value:o.filter(h=>h.status==="PROSPECT").length,color:"text-purple-600",bgColor:"bg-purple-50",icon:Xa},{title:"Partners",value:o.filter(h=>h.status==="PARTNER").length,color:"text-pink-600",bgColor:"bg-pink-50",icon:sa},{title:"Active",value:o.filter(h=>h.status==="CUSTOMER"||h.status==="PARTNER").length,color:"text-blue-600",bgColor:"bg-blue-50",icon:Ro},{title:"Inactive",value:o.filter(h=>h.status==="INACTIVE").length,color:"text-gray-600",bgColor:"bg-gray-50",icon:zo},{title:"Former",value:o.filter(h=>h.status==="FORMER").length,color:"text-orange-600",bgColor:"bg-orange-50",icon:zo}],[o]);if(e)return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:c,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Ku,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsx("div",{children:a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800 flex items-center gap-2",children:[e.company,a.jsx("span",{className:`inline-block text-xs px-2 py-0.5 rounded ${e.status==="CUSTOMER"?"bg-green-600 text-white":e.status==="PROSPECT"?"bg-purple-600 text-white":e.status==="PARTNER"?"bg-pink-600 text-white":"bg-gray-500 text-white"}`,children:e.status})]})})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 shadow-sm overflow-x-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Account Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Website:"})," ",a.jsx("br",{}),a.jsx("a",{href:e.url,className:"text-blue-600 hover:underline break-words",children:e.url})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Industry:"})," ",a.jsx("br",{}),e.industry]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Territory:"})," ",a.jsx("br",{}),e.territory]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Phone Number:"})," ",a.jsx("br",{}),e.phone_number]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Billing Address:"})," ",a.jsx("br",{}),e.billing_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Shipping Address:"})," ",a.jsx("br",{}),e.shipping_address]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),e.created_by," on ",e.created_date]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),e.last_updated]})]})]})]});const d=o.filter(h=>{const p=h.company.toLowerCase().includes(n.toLowerCase())||h.url.toLowerCase().includes(n.toLowerCase())||h.industry.toLowerCase().includes(n.toLowerCase())||h.territory.toLowerCase().includes(n.toLowerCase())||h.phone_number.toLowerCase().includes(n.toLowerCase()),x=r==="All Statuses"||r==="Active"&&(h.status==="CUSTOMER"||h.status==="PARTNER")||r==="Inactive"&&h.status==="INACTIVE"||r==="Former"&&h.status==="FORMER"||h.status.toLowerCase()===r.toLowerCase();return p&&x});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-sans",children:[a.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"}),"Accounts List"]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 md:grid-cols-4 gap-4 mb-6",children:u.map(h=>a.jsx(uGe,{...h},h.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by company, website, industry, territory, or phone...",value:n,onChange:h=>s(h.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:h=>i(h.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Customer"}),a.jsx("option",{children:"Prospect"}),a.jsx("option",{children:"Partner"}),a.jsx("option",{children:"Active"}),a.jsx("option",{children:"Inactive"}),a.jsx("option",{children:"Former"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"})]})}),a.jsxs("tbody",{children:[d.map((h,p)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",onClick:()=>l(h),children:[a.jsx("td",{className:"py-3 px-4 break-words",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-words",children:h.company}),a.jsx("div",{className:"text-gray-500 text-xs break-words",children:h.url})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h.status==="CUSTOMER"?"bg-green-100 text-green-700":h.status==="PROSPECT"?"bg-purple-100 text-purple-700":h.status==="PARTNER"?"bg-pink-100 text-pink-700":h.status==="INACTIVE"?"bg-gray-100 text-gray-700":"bg-orange-100 text-orange-700"}`,children:h.status})}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.industry}),a.jsx("td",{className:"py-3 px-4 break-words",children:h.territory}),a.jsxs("td",{className:"py-3 px-4 flex items-center space-x-2 break-words",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:h.phone_number})]})]},p)),d.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"py-4 text-center text-gray-500",children:"No accounts match your search/filter."})})]})]})})]})}const uGe=({icon:e,title:t,value:n,color:s,bgColor:r})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md hover:shadow-lg hover:ring-2 hover:ring-blue-500 cursor-pointer transition-all duration-300",onClick:()=>console.log(`Clicked: ${t}`),children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]});function mGe(){f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[e,t]=f.useState(!1),[n,s]=f.useState(null),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,u]=f.useState("All Contacts"),[d,h]=f.useState([{id:1,name:"John Smith",title:"Marketing Director",account:"Acme Corporation",email:"john.smith@acme.com",phone1:"+1-555-0101",phone2:"+1-555-0102",department:"Marketing",assigned:"Jane Sales",created:"1/10/2024",mobile:"09217229846",workPhone:"(555) 123-4567",createdBy:"John Appleseed",lastUpdated:"2025-09-21 15:30",notes:"Key marketing partner for Q4 campaigns."}]),[p,x]=f.useState({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),v=k=>{k.target.id==="modalBackdrop"&&t(!1)},j=k=>{s(k)},b=()=>{s(null)},N=()=>{i(!1),x({id:null,name:"",email:"",workPhone:"",title:"",department:"",phone1:"",phone2:"",account:"",assigned:"",notes:""}),t(!0)},w=(k,T)=>{T.stopPropagation(),i(!0),x(k),t(!0)},S=k=>{const{name:T,value:A}=k.target;x(E=>({...E,[T]:A}))},_=k=>{if(k.preventDefault(),r)h(T=>T.map(A=>A.id===p.id?{...p}:A));else{const T={...p,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Admin User"};h(A=>[...A,T])}t(!1)};return n?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:b,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Ku,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.account}),a.jsx("span",{className:"mt-1 sm:mt-0 bg-blue-600 text-white text-xs sm:text-sm px-2 py-0.5 rounded w-fit",children:"Active"})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0 mt-3 sm:mt-0",children:a.jsxs("button",{className:"w-full sm:w-auto bg-gray-800 text-white px-5 py-2 rounded-md hover:bg-gray-900 transition flex items-center gap-2",children:[a.jsx(Wo,{}),"Export"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 w-full max-w-full lg:max-w-6xl shadow-sm overflow-x-auto mx-auto",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800",children:"Contact Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Primary Contact:"})," ",a.jsx("br",{}),n.name]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Email:"})," ",a.jsx("br",{}),n.email]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),n.createdBy," on ",n.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Title:"})," ",a.jsx("br",{}),n.title]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Assigned To:"})," ",a.jsx("br",{}),n.assigned]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Work Phone:"})," ",a.jsx("br",{}),n.workPhone]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Account:"})," ",a.jsx("br",{}),n.account]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Mobile Phone:"})," ",a.jsx("br",{}),n.phone1]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Last Updated:"})," ",a.jsx("br",{}),n.lastUpdated]})]}),a.jsxs("div",{className:"mt-6 border-gray-200 pt-4",children:[a.jsx("h3",{className:"text-md sm:text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:n.notes?n.notes:"No additional notes were provided for this contact."})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("button",{onClick:N,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base transition",children:" Add Contact"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Contacts...",value:o,onChange:k=>l(k.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:k=>u(k.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Contacts"}),a.jsx("option",{children:"Option 1"}),a.jsx("option",{children:"Option 2"}),a.jsx("option",{children:"Option 3"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[600px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-xs text-gray-700",children:d.map((k,T)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>j(k),children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all",children:k.name}),a.jsx("div",{className:"text-xs text-gray-500",children:k.title})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Vx,{className:"text-gray-500"}),a.jsx("span",{children:k.account})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sn,{className:"text-gray-500"}),a.jsx("span",{children:k.email})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:k.phone1})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:k.phone2})]})]})}),a.jsx("td",{className:"py-3 px-4",children:k.department}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sa,{className:"text-gray-500"}),a.jsx("span",{children:k.assigned})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Dt,{className:"text-gray-500"}),a.jsx("span",{children:k.created})]})}),a.jsx("td",{className:"py-3 px-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:A=>w(k,A),className:"text-blue-500 hover:text-blue-700",children:a.jsx(gn,{})})})})]},T))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:v,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh]",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center",children:r?"Edit Contact":"Add New Contact"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Name"}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:S,placeholder:"Full name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:p.email,onChange:S,placeholder:"example@email.com",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsx("input",{type:"text",name:"workPhone",value:p.workPhone,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Title"}),a.jsx("input",{type:"text",name:"title",value:p.title,onChange:S,placeholder:"Job title",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",name:"department",value:p.department,onChange:S,placeholder:"Marketing / Sales",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 1"}),a.jsx("input",{type:"text",name:"phone1",value:p.phone1,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Account"}),a.jsx("input",{type:"text",name:"account",value:p.account,onChange:S,placeholder:"Company name",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Assign To"}),a.jsxs("select",{name:"assigned",value:p.assigned,onChange:S,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",children:"Assign To"}),a.jsx("option",{value:"Smith",children:"Smith"}),a.jsx("option",{value:"Doe",children:"Doe"}),a.jsx("option",{value:"Jane Sales",children:"Jane Sales"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Phone Number 2"}),a.jsx("input",{type:"text",name:"phone2",value:p.phone2,onChange:S,placeholder:"09 --- --- ---",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{name:"notes",value:p.notes,onChange:S,placeholder:"Additional details...",rows:3,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 md:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 border border-blue-500 rounded hover:bg-blue-700 transition",children:"Save Contact"})]})]})]})})]})}const Yb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},es=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),fGe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(es,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(es,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(es,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(es,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(es,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),hGe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(es,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(es,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(es,{label:"Department",name:"department",value:e.department}),a.jsx(es,{label:"Title",name:"title",value:e.title}),a.jsx(es,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(es,{label:"Email",name:"email",value:e.email}),a.jsx(es,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(es,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),gGe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(es,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(es,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(es,{label:"Stage",name:"stage",value:e.stage}),a.jsx(es,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(es,{label:"Description",name:"description",value:e.description}),a.jsx(es,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function xee({isOpen:e,onClose:t}){const[n,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},o=()=>{n>1&&s(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(fGe,{data:Yb});case 2:return a.jsx(hGe,{data:Yb});case 3:return a.jsx(gGe,{data:Yb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Yb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(LN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>a.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}const pGe={name:"Josh Vergara",status:"New",company:"Josh Inc.",title:"CEO",department:"Administration",email:"josh@joshinc.com",territory:"Cavite",assignedTo:"Admin",createdBy:"Admin",workPhone:"09253677323",phone1:"09253677323",phone2:"0907452874",source:"Website",addressLine1:"#1 Pilar Las Pinas",addressLine2:"Suite 400",city:"Las Pinas",state:"Metro Manila",zipCode:"1740",notes:"Interested in our premium plan."};function yee({lead:e=pGe,onBack:t}){const[n,s]=f.useState(!1);return e?a.jsxs("div",{className:"p-4 sm:p-6 md:p-8 font-inter min-h-screen",children:[a.jsxs("button",{onClick:t,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-4 sm:mb-6 cursor-pointer",children:[a.jsx(Ku,{className:"mr-1 w-4 h-4 sm:w-5 sm:h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 sm:mb-8 gap-2 sm:gap-4",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold",children:e.name}),a.jsx("span",{className:"bg-blue-100 text-blue-700 text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",children:e.status}),a.jsx("div",{className:"flex flex-wrap items-center ml-0 sm:ml-1",children:a.jsx("button",{onClick:()=>s(!0),className:"bg-green-600 hover:bg-green-700 text-white px-3 sm:px-5 py-1.5 sm:py-2 rounded-lg font-medium text-xs sm:text-sm",children:"Convert"})})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200 mb-6 sm:mb-8",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-4 sm:mb-6",children:"Lead Details"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsx("p",{children:e.name})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:e.company})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:e.title})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:e.department})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:e.email})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:e.territory})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assign To:"}),a.jsx("p",{children:e.assignedTo})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:e.createdBy})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:e.workPhone})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:e.phone1})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:e.phone2})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:e.source})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Address:"}),a.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:[e.addressLine1," ",a.jsx("br",{}),e.addressLine2," ",a.jsx("br",{}),e.city,", ",e.state," ",e.zipCode]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:e.notes||"No notes available."})]})]}),a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-4 sm:mb-6",children:"Related Activities"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Tasks (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-15 | In Progress"}),a.jsx("p",{children:"Schedule follow-up call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Due: 2025-09-18 | In Progress"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Tasks"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Calls (2)"}),a.jsxs("div",{className:"space-y-1 text-gray-700",children:[a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-10 | Completed"}),a.jsx("p",{children:"Initial discovery call"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2025-09-11 | Completed"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Calls"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Meeting (0)"}),a.jsx("p",{className:"text-gray-500",children:"No meetings associated."}),a.jsx("a",{href:"#",className:"text-blue-600 hover:underline text-xs font-medium mt-2 inline-block",children:"View All Meetings"})]})]})]}),a.jsx(xee,{isOpen:n,onClose:()=>s(!1)})]}):null}const xGe=th.all(),CT=xGe.map(e=>({code:`+${e.countryCallingCode}`,name:e.countryCode}));function yGe(){const[e,t]=f.useState(null),[n,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState([{id:1,first_name:"Jane",last_name:"Doe"},{id:2,first_name:"John",last_name:"Smith"},{id:3,first_name:"Mary",last_name:"Johnson"}]),[c,u]=f.useState([{id:1,name:"Joshua Vergara",status:"Qualified",title:"Marketing Director",email:"sarah.williams@innovateco.com",phone1:"9271229484",phone2:"---------",workPhone:"999123-4567",work_ccode:"+63",m1_ccode:"+63",m2_ccode:"+63",territory:"East Coast",department:"Marketing",company:"Innovate Co.",createdBy:"John Appleseed",createdAt:"2025-09-10 09:30",lastUpdated:"2025-09-12 14:45",source:"Website",assignedTo:"Jane Doe",address:"123 Main St, City, Country",notes:"Important client"}]),[d,h]=f.useState({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const p=A=>t(A),x=()=>t(null),[v,j]=f.useState(""),[b,N]=f.useState("All Accounts"),w=()=>{s(!1),i(null),h({work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:""})},S=A=>{i(A),s(!0),h({work_ccode:A.work_ccode||"+63",work_phone:A.workPhone||"",m1_ccode:A.m1_ccode||"+63",mobile_phone_1:A.phone1||"",m2_ccode:A.m2_ccode||"+63",mobile_phone_2:A.phone2||""})},_=A=>{window.confirm("Are you sure you want to delete this lead?")&&u(c.filter(E=>E.id!==A))},k=A=>{const{name:E,value:M}=A.target;h(O=>({...O,[E]:M}))},T=A=>{A.preventDefault();const E=new FormData(A.target),M=Object.fromEntries(E.entries());M.name=`${M.firstName} ${M.lastName}`,M.assignedTo=o.find(O=>O.id.toString()===M.assignedTo)?.first_name+" "+o.find(O=>O.id.toString()===M.assignedTo)?.last_name,M.work_ccode=d.work_ccode,M.workPhone=d.work_phone,M.m1_ccode=d.m1_ccode,M.phone1=d.mobile_phone_1,M.m2_ccode=d.m2_ccode,M.phone2=d.mobile_phone_2,u(r?c.map(O=>O.id===r.id?{...O,...M}:O):[...c,{...M,id:c.length+1,createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()}]),w()};return e?a.jsx(yee,{lead:e,onBack:x}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-3",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Xa,{className:"mr-2 text-blue-600"})," Leads"]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[a.jsxs("button",{className:"flex items-center justify-center border border-tertiary text-tertiary px-4 py-2 gap-2 rounded-md hover:bg-gray-800 hover:text-white transition w-full sm:w-auto",children:[a.jsx(Wo,{})," Download"]}),a.jsx("button",{onClick:()=>s(!0),className:"flex items-center justify-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition w-full sm:w-auto",children:" Add Leads"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search Leads...",value:v,onChange:A=>j(A.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:b,onChange:A=>N(A.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Leads"}),a.jsx("option",{children:"New"}),a.jsx("option",{children:"Contacted"}),a.jsx("option",{children:"Qualified"}),a.jsx("option",{children:"Converted"}),a.jsx("option",{children:"Lost"})]})})]}),a.jsxs("div",{className:"bg-white shadow-sm overflow-x-auto rounded-md border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] bg-gray-100 font-bold text-gray-600 text-sm px-4 py-3",children:[a.jsx("div",{children:"Name"}),a.jsx("div",{children:"Account"}),a.jsx("div",{children:"Title"}),a.jsx("div",{children:"Department"}),a.jsx("div",{children:"Email"}),a.jsx("div",{children:"Work Phone"}),a.jsx("div",{children:"Assigned To"}),a.jsx("div",{children:"Updated"}),a.jsx("div",{className:"text-center",children:"Actions"})]}),c.map(A=>a.jsxs("div",{className:"grid grid-cols-9 min-w-[800px] px-4 py-3 text-xs hover:bg-gray-100 transition cursor-pointer gap-x-4",onClick:()=>p(A),children:[a.jsx("div",{className:"truncate",children:A.name}),a.jsx("div",{className:"truncate",children:A.company}),a.jsx("div",{className:"truncate",children:A.title}),a.jsx("div",{className:"truncate",children:A.department}),a.jsx("div",{className:"truncate",children:A.email}),a.jsxs("div",{className:"truncate",children:[A.work_ccode," ",A.workPhone]}),a.jsx("div",{className:"truncate",children:A.assignedTo}),a.jsx("div",{className:"truncate",children:A.lastUpdated}),a.jsxs("div",{className:"flex justify-center space-x-2",children:[a.jsx("button",{className:"text-blue-500 hover:text-blue-700",onClick:E=>{E.stopPropagation(),S(A)},children:a.jsx(gn,{})}),a.jsx("button",{className:"text-red-500 hover:text-red-700",onClick:E=>{E.stopPropagation(),_(A.id)},children:a.jsx(va,{})})]})]},A.id))]}),n&&a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:A=>A.stopPropagation(),children:[a.jsx("button",{onClick:w,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(ea,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 text-xs sm:text-sm",onSubmit:T,children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"First Name"}),a.jsx("input",{name:"firstName",type:"text",placeholder:"Joe",defaultValue:r?r.name.split(" ")[0]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Last Name"}),a.jsx("input",{name:"lastName",type:"text",placeholder:"Smith",defaultValue:r?r.name.split(" ")[1]:"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",required:!0})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Company"}),a.jsx("input",{name:"company",type:"text",placeholder:"ABC Company",defaultValue:r?.company||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Title"}),a.jsx("input",{name:"title",type:"text",placeholder:"ABC Agenda",defaultValue:r?.title||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Department"}),a.jsx("input",{name:"department",type:"text",placeholder:"Sales",defaultValue:r?.department||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Email"}),a.jsx("input",{name:"email",type:"text",placeholder:"abc@gmail.com",defaultValue:r?.email||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Work Phone"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"work_ccode",value:d.work_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:CT.map(A=>a.jsx("option",{value:A.code,children:A.code},A.code))}),a.jsx("input",{type:"text",name:"work_phone",placeholder:"9----------",value:d.work_phone,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 1"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m1_ccode",value:d.m1_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:CT.map(A=>a.jsx("option",{value:A.code,children:A.code},A.code))}),a.jsx("input",{type:"text",name:"mobile_phone_1",placeholder:"9----------",value:d.mobile_phone_1,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Mobile Phone 2"}),a.jsxs("div",{className:"border border-gray-300 rounded-md flex flex-row w-full gap-1",children:[a.jsx("select",{name:"m2_ccode",value:d.m2_ccode,onChange:k,className:"outline-none cursor-pointer py-2 border-r border-gray-400 w-15",children:CT.map(A=>a.jsx("option",{value:A.code,children:A.code},A.code))}),a.jsx("input",{type:"text",name:"mobile_phone_2",placeholder:"9----------",value:d.mobile_phone_2,onChange:k,className:"w-full outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Address"}),a.jsx("input",{name:"address",type:"text",placeholder:"Street No., Street Name, City, State/Province, Postal Code",defaultValue:r?.address||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Assign To"}),a.jsxs("select",{name:"assignedTo",defaultValue:o.find(A=>`${A.first_name} ${A.last_name}`===r?.assignedTo)?.id||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"",disabled:!0,children:"Select user"}),o.map(A=>a.jsxs("option",{value:A.id,children:[A.first_name," ",A.last_name]},A.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Territory"}),a.jsx("input",{type:"text",disabled:!0,name:"territory_id",placeholder:"Assign a user",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Source"}),a.jsxs("select",{className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:r?.source||"",name:"source",children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"text-gray-700 font-medium mb-1",children:"Notes"}),a.jsx("textarea",{name:"notes",placeholder:"Additional details...",rows:3,defaultValue:r?.notes||"",className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-2 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition",children:r?"Update Lead":"Save Lead"})]})]})]})})]})}const KB=["To Do","In Progress","Review","Completed"],Ig=10,bGe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},XB=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},vGe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),e.status&&String(e.status).toUpperCase();let r=null,i=null,o=null,l=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2&&(l=Number(e.relatedTo2)));const c=e.assignedTo?Number(e.assignedTo):null,u=o||l||i||r,d=o?"Contact":l?"Deal":i?"Account":r?"Lead":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:c,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:u,related_type:d}},wGe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=()=>e.lead?.id||e.lead_id,l=()=>e.account?.id||e.account_id,c=()=>e.contact?.id||e.contact_id,u=()=>e.deal?.id||e.deal_id,d=()=>e.task_assign_to?.id||e.assigned_to,h=()=>e.lead?.title||e.lead_id,p=()=>e.account?.name||e.account_id,x=()=>i||e.contact_id,v=()=>e.deal?.name||e.deal_id;let j="Lead",b="",N="",w="",S="Lead",_="",k="",T="";const A=l(),E=p(),M=o(),O=h();if(A){j="Account",S="Account",_=E,b=String(A);const I=c(),D=u(),H=x(),W=v();I?(N="Contact",k="Contact",T=H,w=String(I)):D&&(k="Deal",N="Deal",T=W,w=String(D))}else M?(S="Lead",_=O,j="Lead",b=String(M)):e.related_type==="Account"&&(j="Account",b=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:e.status||"Not started",dueDate:s,dateAssigned:r,assignedToId:d()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:S,relatedTo1Text:_,relatedType2Text:k,relatedTo2Text:T,subject:e.title,relatedType1:j,relatedTo1:b,relatedType2:N,relatedTo2:w}};function jGe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[n,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState([]),[p,x]=f.useState(!0),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[_,k]=f.useState([]),[T,A]=f.useState(1),[E,M]=f.useState(null),[O,I]=f.useState(!1),D=Tt(),H=Jt(),[W,z]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""});f.useEffect(()=>{const le=H.state?.openTaskModal,Fe=H.state?.initialTaskData;le&&(i(!0),Fe&&z(ke=>({...ke,...Fe})),D(H.pathname,{replace:!0,state:{}}))},[H,D]);const Q=async()=>{try{const le=await se.get("/users/all");k(Array.isArray(le.data)?le.data:[])}catch(le){console.error("Failed to fetch users:",le),V.error("Failed to fetch users.")}},J=async()=>{try{x(!0);const le=await se.get("/tasks/all"),ke=(Array.isArray(le.data)?le.data:[]).map(wGe);ke.sort((He,Xe)=>{const it=He.createdAt?new Date(He.createdAt):0;return(Xe.createdAt?new Date(Xe.createdAt):0)-it}),console.log("Fetched Tasks:",ke),h(ke),n==="list"&&A(1)}catch(le){console.error("Failed to load tasks:",le),V.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(Q(),J())},[t,e]);const Y=()=>{l(null),z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},re=(le=null,Fe=!1)=>{l(le),u(Fe),le?z({id:le.id,subject:le.title||"",description:le.description||"",priority:le.priority||"Normal",status:le.status||"Not started",dueDate:bGe(le.dueDate),assignedTo:le.assignedToId?String(le.assignedToId):"",notes:le.notes||"",relatedType1Text:le.relatedType1Text||"",relatedTo1Text:le.relatedTo1Text||"",relatedType2Text:le.relatedType2Text||"",relatedTo2Text:le.relatedTo2Text||"",relatedType1:le.relatedType1||"",relatedTo1:le.relatedTo1||"",relatedType2:le.relatedType2||"",relatedTo2:le.relatedTo2||""}):Y(),i(!0)},we=()=>{i(!1),l(null),u(!1),Y()},Z=async le=>{const Fe=vGe(le);try{o&&!c?(await se.put(`/tasks/${o.id}`,Fe),V.success("Task updated successfully.")):(await se.post("/tasks/create",Fe),V.success("Task created successfully.")),i(!1),await J()}catch(ke){console.error("Failed to save task:",ke);const He=ke.response?.data?.detail||"Failed to save task.";V.error(He)}},ne=le=>{le&&M({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:le.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:le.id}})},pe=async()=>{if(!E?.action){M(null);return}const{action:le}=E;I(!0);try{le.type==="delete"&&(await se.delete(`/tasks/${le.targetId}`),V.success("Task deleted successfully."),await J())}catch(Fe){console.error("Task action failed:",Fe),V.error("Failed to delete task.")}finally{I(!1),M(null)}},Ne=()=>{O||M(null)},de=f.useMemo(()=>{const le=v.trim().toLowerCase();return[...d].sort((ke,He)=>{const Xe=ke.createdAt?new Date(ke.createdAt):0;return(He.createdAt?new Date(He.createdAt):0)-Xe}).filter(ke=>{const He=le===""||ke.title?.toLowerCase().includes(le)||ke.description?.toLowerCase().includes(le)||ke.assignedToName?.toLowerCase().includes(le)||ke.createdBy?.toLowerCase().includes(le),Xe=b==="Filter by Status"||ke.status===b,it=w==="Filter by Priority"||ke.priority===w;return He&&Xe&&it})},[d,v,b,w]);f.useEffect(()=>{A(1)},[v,b,w,n]),f.useEffect(()=>{if(n==="list"){const le=de.length===0?1:Math.ceil(de.length/Ig);T>le&&A(le)}},[de.length,T,n]);const be=f.useMemo(()=>{if(n==="board")return de;const le=(T-1)*Ig;return de.slice(le,le+Ig)},[de,T,n]),oe=f.useMemo(()=>{const le=new Date;return[{title:"To Do",value:d.filter(Fe=>Fe.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(Fe=>Fe.status==="In progress").length,icon:Yi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(Fe=>Fe.status==="Completed").length,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(Fe=>Fe.dueDate&&new Date(Fe.dueDate)<le&&Fe.status!=="Completed").length,icon:Qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(Fe=>Fe.priority==="High").length,icon:Jl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Te=le=>le.dueDate&&new Date(le.dueDate)<new Date&&le.status!=="Completed",ue=le=>{switch(le.status){case"To Do":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In Progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Review":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},Oe=le=>{switch(le){case"To Do":return"bg-blue-100 text-blue-700";case"In Progress":return"bg-purple-100 text-purple-700";case"Review":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},xe=le=>{switch(le){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(Wt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Yi,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>re(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(ta,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:oe.map(le=>a.jsx(NGe,{...le},le.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:le=>j(le.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:le=>N(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),KB.map(le=>a.jsx("option",{children:le},le))]}),a.jsxs("select",{value:w,onChange:le=>S(le.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&de.length===0&&a.jsx("p",{className:"text-center text-gray-500 mt-10 p-4 bg-white shadow rounded-lg",children:"No tasks found matching current filters."}),!p&&!t&&de.length>0&&n==="board"&&a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:KB.map(le=>{const Fe=be.filter(ke=>ke.status===le);return a.jsxs("div",{className:"bg-white p-4 shadow border border-gray-200 flex flex-col relative",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:le}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:Fe.length})]}),a.jsx("div",{className:`space-y-3 ${Fe.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:Fe.length>0?Fe.map(ke=>a.jsxs("div",{className:`border rounded-lg p-3 transition flex justify-between items-start cursor-pointer ${ue(ke)}`,onClick:()=>re(ke,!0),children:[a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:ke.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",ke.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",ke.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:Te(ke)?"text-red-600":"text-gray-600",children:ke.dateAssigned?XB(ke.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{type:"button",onClick:He=>{He.stopPropagation(),re(ke)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(hn,{})}),a.jsx("button",{type:"button",onClick:He=>{He.stopPropagation(),ne(ke)},className:"text-red-500 hover:text-red-700",children:a.jsx(va,{})})]})]},ke.id)):a.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"No tasks"})})]},le)})}),!p&&!t&&de.length>0&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Actions"})]})}),a.jsx("tbody",{children:be.map(le=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",onClick:()=>{console.log("Opening task in view mode:",le),re(le,!0)},children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",children:le.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${Oe(le.status||"To Do")}`,children:le.status||"To Do"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${xe(le.priority||"Low")}`,children:le.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:le.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Te(le)?"text-red-600 font-medium":""}`,children:le.dateAssigned?XB(le.dateAssigned):""}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",onClick:Fe=>Fe.stopPropagation(),children:[a.jsxs("button",{type:"button",onClick:()=>re(le),className:"text-blue-500 hover:text-blue-700 flex items-center gap-1",children:[a.jsx(hn,{})," Edit"]}),a.jsxs("button",{type:"button",onClick:()=>ne(le),className:"text-red-500 hover:text-red-700 flex items-center gap-1",children:[a.jsx(va,{})," Delete"]})]})})]},le.id))})]})})}),!p&&!t&&n==="list"&&a.jsx(la,{className:"mt-6",totalItems:de.length,pageSize:Ig,currentPage:de.length===0?0:T,onPrev:()=>A(le=>Math.max(le-1,1)),onNext:()=>A(le=>Math.min(le+1,Math.max(1,Math.ceil(de.length/Ig)||1))),label:"tasks"}),a.jsx(v0,{isOpen:r,onClose:we,onSave:Z,onEdit:()=>u(!1),setFormData:z,formData:W,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ne}),E&&a.jsx(CGe,{open:!0,title:E.title,message:E.message,confirmLabel:E.confirmLabel,cancelLabel:E.cancelLabel,variant:E.variant,onConfirm:pe,onCancel:Ne,loading:O})]})}function NGe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function CGe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function SGe(){f.useEffect(()=>{document.title="Campaign | Sari-Sari CRM"},[]);const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(""),[c,u]=f.useState("All Statuses"),[d,h]=f.useState({show:!1,action:null,campaign:null}),[p,x]=f.useState([{id:1,name:"Christmas Promo 2025",subject:" Holiday Discounts Await You!",content:"Spread holiday cheer with exclusive deals this Christmas season!",status:"Scheduled",recipients:1200,scheduleDate:"2025-12-15T10:00",created:"2025-10-20",createdBy:"Marketing Team"},{id:2,name:"New Year Kickoff",subject:"Start 2026 with Big Savings!",content:"Kick off your year right with amazing offers from us!",status:"Draft",recipients:"",scheduleDate:"",created:"2025-10-25",createdBy:"Marketing Team"}]),[v,j]=f.useState({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),b=p.filter(I=>{const D=c==="All Statuses"||I.status===c,H=I.name.toLowerCase().includes(o.toLowerCase())||I.subject.toLowerCase().includes(o.toLowerCase());return D&&H}),N=()=>{s(!1),j({id:null,name:"",subject:"",content:"",status:"Draft",recipients:"",scheduleDate:""}),t(!0)},w=(I,D)=>{D.stopPropagation(),s(!0),j(I),t(!0)},S=(I,D)=>{D.stopPropagation(),h({show:!0,action:"delete",campaign:I})},_=I=>{I.preventDefault(),h({show:!0,action:n?"edit":"add",campaign:{...v}})},k=()=>{if(d.action==="add"){const I={...d.campaign,id:Date.now(),created:new Date().toLocaleDateString(),createdBy:"Marketing Team"};x(D=>[...D,I]),t(!1)}else d.action==="edit"?(x(I=>I.map(D=>D.id===d.campaign.id?{...d.campaign}:D)),t(!1)):d.action==="delete"&&x(I=>I.filter(D=>D.id!==d.campaign.id));h({show:!1,action:null,campaign:null})},T=()=>{h({show:!1,action:null,campaign:null})},A=I=>i(I),E=()=>i(null),M=I=>{const{name:D,value:H}=I.target;j(W=>({...W,[D]:H}))},O=I=>{I.target.id==="modalBackdrop"&&t(!1)};return r?a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("button",{onClick:E,className:"inline-flex items-center text-sm sm:text-base text-gray-500 hover:text-gray-700 transition mb-6 cursor-pointer",children:[a.jsx(Ku,{className:"mr-1 w-5 h-5"})," Back"]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:r.name}),a.jsx("span",{className:`text-xs sm:text-sm px-2 py-0.5 rounded ${r.status==="Scheduled"?"bg-yellow-100 text-yellow-700":r.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:r.status})]})}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Campaign Information"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Subject:"})," ",a.jsx("br",{}),r.subject]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created By:"})," ",a.jsx("br",{}),r.createdBy]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Created On:"})," ",a.jsx("br",{}),r.created]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Scheduled Date:"})," ",a.jsx("br",{}),r.scheduleDate?new Date(r.scheduleDate).toLocaleString():""]}),a.jsxs("p",{className:"sm:col-span-2",children:[a.jsx("span",{className:"font-semibold",children:"Email Content:"})," ",a.jsx("br",{}),r.content]}),r.status==="Scheduled"&&a.jsxs("p",{children:[a.jsx("span",{className:"font-semibold",children:"Recipients:"})," ",a.jsx("br",{}),r.recipients]})]})]})]}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(sn,{className:"mr-2 text-blue-600"})," Email Campaigns"]}),a.jsx("button",{onClick:N,className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Campaign"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by campaign name or email subject...",value:o,onChange:I=>l(I.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:c,onChange:I=>u(I.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Statuses"}),a.jsx("option",{children:"Draft"}),a.jsx("option",{children:"Scheduled"}),a.jsx("option",{children:"Sent"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-[700px] w-full border border-gray-200 rounded-lg bg-white shadow-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-sm text-gray-600",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Campaign Name"}),a.jsx("th",{className:"py-3 px-4",children:"Email Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Recipients"}),a.jsx("th",{className:"py-3 px-4",children:"Scheduled Date"}),a.jsx("th",{className:"py-3 px-4 text-center",children:"Actions"})]})}),a.jsx("tbody",{className:"text-sm text-gray-700",children:b.map((I,D)=>a.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>A(I),children:[a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:I.name}),a.jsx("td",{className:"py-3 px-4",children:I.subject}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${I.status==="Scheduled"?"bg-yellow-100 text-yellow-700":I.status==="Sent"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:I.status})}),a.jsx("td",{className:"py-3 px-4",children:I.recipients?`${I.recipients} emails`:""}),a.jsx("td",{className:"py-3 px-4",children:I.scheduleDate?new Date(I.scheduleDate).toLocaleString():""}),a.jsx("td",{className:"py-3 px-4 text-center",onClick:H=>H.stopPropagation(),children:a.jsxs("div",{className:"flex justify-center gap-3",children:[a.jsx("button",{onClick:H=>w(I,H),className:"text-blue-500 hover:text-blue-700",children:a.jsx(gn,{})}),a.jsx("button",{onClick:H=>S(I,H),className:"text-red-500 hover:text-red-700",children:a.jsx(va,{})})]})})]},D))})]})}),e&&a.jsx("div",{id:"modalBackdrop",onClick:O,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{onClick:()=>t(!1),className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(ea,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:n?"Edit Campaign":"Add New Campaign"}),a.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:v.name,onChange:M,placeholder:"e.g. Summer Sale Blast",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:v.subject,onChange:M,placeholder:"e.g. Big discounts await you!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Campaign Status ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"status",value:v.status,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none",children:[a.jsx("option",{value:"Draft",children:"Draft"}),a.jsx("option",{value:"Scheduled",children:"Scheduled"}),a.jsx("option",{value:"Sent",children:"Sent"})]})]}),v.status==="Scheduled"&&a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:col-span-2",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Scheduled Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",name:"scheduleDate",value:v.scheduleDate,onChange:M,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Recipient Count ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",name:"recipients",value:v.recipients,onChange:M,placeholder:"e.g. 500",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Content ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"content",rows:4,value:v.content,onChange:M,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:()=>t(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Save Campaign"})]})]})]})}),d.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:T,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(ea,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:d.action==="delete"?"Confirm Delete":d.action==="edit"?"Confirm Edit":"Confirm Add"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:d.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the campaign"," ",a.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]}):d.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]}):a.jsxs(a.Fragment,{children:["Add new campaign"," ",a.jsx("span",{className:"font-semibold",children:d.campaign.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:k,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const _Ge=[{id:1,name:"Welcome E-mail",category:"Welcome",subject:"Welcome to {company}!",body:`Hi {name}, Welcome to {company}! We're excited to have you on board.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best regards, The Team`,createdBy:"Angel Angelo",date:"12/10/23"},{id:2,name:"Product Demo Follow-up",category:"Follow-up",subject:"Thanks for checking out our demo",body:`Hi {name}, Thank you for taking the time to view our product demo.
Do you have any questions? Let's schedule a call to discuss how we can help {company}.

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed vel quam vitae erat venenatis feugiat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.

Best, Sales Team`,createdBy:"Angel Angelo",date:"12/10/23"}],ZB={Welcome:"bg-orange-100 text-orange-700","Follow-up":"bg-blue-100 text-blue-700",Newsletter:"bg-green-100 text-green-700",Promotional:"bg-purple-100 text-purple-700",default:"bg-gray-100 text-gray-800"};function AGe(){f.useEffect(()=>{document.title="Templates | Sari-Sari CRM"},[]);const[e,t]=f.useState(_Ge),[n,s]=f.useState(!1),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,u]=f.useState(""),[d,h]=f.useState("All Categories"),[p,x]=f.useState({name:"",category:"",subject:"",body:""}),[v,j]=f.useState({show:!1,action:null,template:null}),b=()=>{l(null),i(null),s(!1)},N=D=>{x({...p,[D.target.name]:D.target.value})},w=()=>{j({show:!0,action:"add",template:{...p}})},S=D=>{i(D),x({name:D.name,category:D.category,subject:D.subject,body:D.body})},_=()=>{j({show:!0,action:"edit",template:{...p,id:r.id}})},k=D=>{j({show:!0,action:"delete",template:D})},T=D=>{Kx.success(`Template "${D.name}" selected for use!`),j({show:!1,action:null,template:null})},A=()=>{const D=v.template;if(v.action==="add"){const H={...D,id:e.length+1,createdBy:"You",date:new Date().toLocaleDateString()};t(W=>[H,...W]),s(!1),x({name:"",category:"",subject:"",body:""})}else v.action==="edit"?(t(H=>H.map(W=>W.id===D.id?{...D}:W).sort((W,z)=>new Date(z.date).getTime()-new Date(W.date).getTime())),i(null),x({name:"",category:"",subject:"",body:""}),l(null)):v.action==="delete"&&(t(H=>H.filter(W=>W.id!==D.id)),l(null));j({show:!1,action:null,template:null})},E=()=>{j({show:!1,action:null,template:null})},M=D=>l(D),O=e.filter(D=>D.name.toLowerCase().includes(c.toLowerCase())&&(d==="All Categories"||D.category===d)),I=(D,H=!1)=>a.jsxs("div",{className:"flex flex-col justify-between h-full",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:D.name}),a.jsx("span",{className:`text-xs px-3 py-1 rounded-md ${ZB[D.category]||ZB.default}`,children:D.category})]}),a.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:D.subject}),a.jsx("div",{className:`text-gray-800 text-sm p-2 rounded-md ${H?"bg-gray-50 max-h-40 overflow-y-auto":"truncate"} whitespace-pre-line`,style:H?{}:{display:"-webkit-box",WebkitLineClamp:7,WebkitBoxOrient:"vertical",overflow:"hidden"},children:D.body})]}),a.jsxs("div",{className:"flex justify-between items-center mt-4",children:[!H&&a.jsxs("button",{onClick:W=>{W.stopPropagation(),T(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(ra,{})," Use Template"]}),H&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:W=>{W.stopPropagation(),S(D)},className:"flex items-center gap-1 bg-black text-white px-3 py-1 rounded-md text-sm hover:bg-gray-900 transition",children:[a.jsx(hn,{})," Edit"]}),a.jsxs("button",{onClick:W=>{W.stopPropagation(),k(D)},className:"flex items-center gap-1 bg-red-500 text-white px-3 py-1 rounded-md text-sm hover:bg-red-600 transition",children:[a.jsx(va,{})," Delete"]})]}),a.jsxs("p",{className:"text-gray-400 text-xs text-right",children:["Created by: ",D.createdBy," | ",D.date]})]})]});return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter min-h-screen",children:[a.jsx(Qx,{position:"top-center",reverseOrder:!1}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ra,{className:"mr-2 text-black"})," Templates"]}),a.jsx("button",{onClick:()=>{s(!0),i(null),x({name:"",category:"",subject:"",body:""})},className:"flex items-center bg-black text-white px-4 py-2 rounded-md hover:bg-gray-800 transition text-sm sm:text-base shadow-sm",children:" New Template"})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search by template name...",value:c,onChange:D=>u(D.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:d,onChange:D=>h(D.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"All Categories"}),a.jsx("option",{children:"Welcome"}),a.jsx("option",{children:"Follow-up"}),a.jsx("option",{children:"Newsletter"}),a.jsx("option",{children:"Promotional"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:O.map(D=>a.jsxs("div",{onClick:()=>M(D),className:"bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl cursor-pointer flex flex-col justify-between h-80 transition",children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow",children:I(D)})]},D.id))}),(n||r)&&a.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl shadow-lg p-5 sm:p-6 relative border border-gray-200 my-6 max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[a.jsx("button",{onClick:b,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(ea,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:r?"Edit Template":"Create New Template"}),a.jsxs("form",{onSubmit:D=>{D.preventDefault(),r?_():w()},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Template Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:p.name,onChange:N,placeholder:"e.g. Welcome Email",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Category ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"category",value:p.category,onChange:N,required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none",children:[a.jsx("option",{value:"",children:"Select Category"}),a.jsx("option",{value:"Welcome",children:"Welcome"}),a.jsx("option",{value:"Follow-up",children:"Follow-up"}),a.jsx("option",{value:"Newsletter",children:"Newsletter"}),a.jsx("option",{value:"Promotional",children:"Promotional"})]})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Subject Line ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"subject",value:p.subject,onChange:N,placeholder:"e.g. Welcome to our service!",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none"})]}),a.jsxs("div",{className:"flex flex-col sm:col-span-2",children:[a.jsxs("label",{className:"text-gray-700 font-medium mb-1",children:["Email Body ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{name:"body",rows:4,value:p.body,onChange:N,placeholder:"Write your email message here...",required:!0,className:"border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-black outline-none resize-none"})]}),a.jsxs("div",{className:"flex justify-end gap-2 sm:col-span-2 pt-3 border-t border-gray-100 mt-2",children:[a.jsx("button",{type:"button",onClick:b,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:r?"Update Template":"Create Template"})]})]})]})}),o&&!r&&a.jsx("div",{onClick:b,className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"rounded-2xl shadow-lg cursor-default h-80 w-full max-w-md overflow-hidden flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsx("div",{className:"h-2 w-full rounded-t-2xl bg-black"}),a.jsx("div",{className:"p-4 flex-grow overflow-y-auto bg-gray-50",children:I(o,!0)})]})}),v.show&&a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 relative border border-gray-200",children:[a.jsx("button",{onClick:E,className:"absolute top-3 right-3 text-gray-400 hover:text-black transition",children:a.jsx(ea,{size:20})}),a.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-4 text-center",children:v.action==="delete"?"Confirm Delete":v.action==="edit"?"Confirm Update":v.action==="add"?"Confirm Add":"Confirm Use"}),a.jsx("p",{className:"text-center text-gray-600 mb-6",children:v.action==="delete"?a.jsxs(a.Fragment,{children:["Are you sure you want to delete the template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="edit"?a.jsxs(a.Fragment,{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):v.action==="add"?a.jsxs(a.Fragment,{children:["Add new template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]}):a.jsxs(a.Fragment,{children:["Use template"," ",a.jsx("span",{className:"font-semibold",children:v.template.name}),"?"]})}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 transition",children:"Cancel"}),a.jsx("button",{onClick:A,className:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition",children:"Confirm"})]})]})})]})}const Nv=e=>{if(e==null||e==="")return 0;const t=Number(e);return Number.isFinite(t)?t:0},rf=(e,t="")=>{const n=Nv(e);return`${t}${n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`},JB=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`},TGe=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"2-digit"})},kGe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},eH=(e,t,n)=>{const s=new Date,r=e?.contact?`${e.contact.first_name||""} ${e.contact.last_name||""}`.trim():"",i=e?.validity_days?String(e.validity_days):"";return{issuedDate:JB(e?.presented_date)||JB(s),subject:"Price Quotation",forName:e?.account?.name||"",attn:r,intro:"We are pleased to submit our proposal as follows:",notes:e?.notes||"",terms:{validity:i?`${i} days from the date of quotation.`:"",payment:"",deliveryPeriod:"",deliveryPoint:""},preparedBy:t?`${t.first_name||""} ${t.last_name||""}`.trim():"",approvedBy:n?.ceo_name||"Admin"}};function Qb(){const e=Tt(),t=Jt(),{quoteId:n}=Go(),{user:s}=Gt(),r=s?.company?.currency||"",i=f.useMemo(()=>`quote-print:${n||""}`,[n]),[o,l]=f.useState(()=>{const _=t.state?.quote;return _&&String(_.id)===String(n)?_:null}),[c,u]=f.useState(()=>t.state?.companyInfo||null),[d,h]=f.useState(!1),[p,x]=f.useState(()=>{try{const _=sessionStorage.getItem(i);return _?JSON.parse(_):null}catch{return null}});f.useEffect(()=>{if(!n)return;let _=!0;return(async()=>{try{h(!0);const A=!c?await se.get("/company/invoice-info"):null;if(!_)return;if(A?.data&&u(A.data),!o){const E=await se.get("/quotes/admin/fetch-all"),O=(Array.isArray(E?.data)?E.data:[]).find(I=>String(I.id)===String(n));O&&l(O)}}catch(T){const A=T?.response?.data?.detail||T?.message||"Failed to load quotation.";V.error(A)}finally{_&&h(!1)}})(),()=>{_=!1}},[n]),f.useEffect(()=>{o&&x(_=>{if(_)return _;try{const T=sessionStorage.getItem(i);if(T)return JSON.parse(T)}catch{}const k=eH(o,s,c);try{sessionStorage.setItem(i,JSON.stringify(k))}catch{}return k})},[o,s,c,i]);const v=_=>{x(_);try{sessionStorage.setItem(i,JSON.stringify(_))}catch{}},j=Array.isArray(o?.items)?o.items:[],b=Nv(o?.discount_amount),N=Nv(o?.tax_rate);if(!p)return a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"text-gray-700",children:d?"Loading...":""})});const w=p.preparedBy||(s?`${s.first_name||""} ${s.last_name||""}`.trim():""),S=p.approvedBy||c?.ceo_name||"CEO";return a.jsxs("div",{className:"min-h-screen bg-gray-50 quote-print-root",children:[a.jsx("style",{children:`
        @page { size: A4; margin: 5mm; }
        @media print {
          html, body { margin: 0 !important; padding: 0 !important; }
          .no-print { display: none !important; }
          .print-surface { box-shadow: none !important; border: none !important; }
          body { background: white !important; }
          .quote-print-root { background: white !important; }

          /* Remove screen gutters/max-width so print is tight */
          .quote-print-page { max-width: none !important; margin: 0 !important; padding: 0 !important; }

          * { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

          /* Keep the quote meta proportions while printing (left 2 cols + fixed quotation col) */
          .quote-meta-grid { grid-template-columns: 1fr 1fr 240px !important; padding: 0px; }
        }
      `}),a.jsx("div",{className:"no-print sticky top-0 z-10 bg-white border-b border-gray-200",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3",children:[a.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>e(-1),children:"Back"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",className:"px-3 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",onClick:()=>{if(!o)return;const _=eH(o,s,c);v(_)},disabled:!o,children:"Reset fields"}),a.jsx("button",{type:"button",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 text-sm disabled:opacity-70",onClick:()=>window.print(),disabled:!o||d,children:"Print"})]})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 quote-print-page",children:[a.jsx("div",{className:"no-print bg-white border border-gray-200 rounded-xl p-4 mb-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Date"}),a.jsx("input",{type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.issuedDate||"",onChange:_=>v({...p,issuedDate:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.subject||"",onChange:_=>v({...p,subject:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"For"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.forName||"",onChange:_=>v({...p,forName:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Attn"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.attn||"",onChange:_=>v({...p,attn:_.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Intro"}),a.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.intro||"",onChange:_=>v({...p,intro:_.target.value})})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Notes"}),a.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm min-h-[70px]",value:p.notes||"",onChange:_=>v({...p,notes:_.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Validity"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.validity||"",onChange:_=>v({...p,terms:{...p.terms,validity:_.target.value}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Payment"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.payment||"",onChange:_=>v({...p,terms:{...p.terms,payment:_.target.value}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Period"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPeriod||"",onChange:_=>v({...p,terms:{...p.terms,deliveryPeriod:_.target.value}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Terms: Delivery Point"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.terms?.deliveryPoint||"",onChange:_=>v({...p,terms:{...p.terms,deliveryPoint:_.target.value}})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Approved by"}),a.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",value:p.approvedBy||"",onChange:_=>v({...p,approvedBy:_.target.value})})]})]})}),a.jsxs("div",{className:"print-surface bg-white border border-gray-200 rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4 border-b border-gray-300 pb-3",children:[a.jsxs("div",{className:"min-w-0 w-4/5",children:[a.jsx("div",{className:"text-xl font-bold text-gray-900 uppercase",children:c?.company_name||""}),c?.address?a.jsx("div",{className:"text-sm text-gray-700",children:c.address}):null,c?.company_number?a.jsx("div",{className:"text-sm text-gray-700",children:c.company_number}):null,c?.ceo_email?a.jsxs("div",{className:"text-sm text-gray-700",children:["Email: ",c.ceo_email]}):null,c?.company_website?a.jsxs("div",{className:"text-sm text-gray-700",children:["Web: ",c.company_website]}):null]}),a.jsx("div",{className:"flex items-start gap-3 w-1/6",children:c?.company_logo?a.jsx("img",{src:c.company_logo,alt:"Company logo",className:"w-full h-auto object-contain"}):null})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"quote-meta-grid grid grid-cols-3 text-sm border border-gray-300",children:[a.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[a.jsx("div",{className:"w-16 font-semibold",children:"For:"}),a.jsx("div",{className:"min-w-0 break-words",children:p.forName||""})]}),a.jsx("div",{className:"quote-meta-quote justify-center text-center p-1 border-b border-t border-r border-gray-300",children:a.jsx("div",{className:"text-xl font-bold text-gray-900",children:"QUOTATION"})}),a.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[a.jsx("div",{className:"w-16 font-semibold",children:"Attn:"}),a.jsx("div",{className:"min-w-0 break-words",children:p.attn||""})]}),a.jsx("div",{className:"quote-meta-quote justify-center text-center p-2 border-t border-r border-gray-300",children:a.jsxs("div",{className:"text-sm text-gray-700",children:["No."," ",a.jsx("span",{className:"font-semibold",children:kGe(o?.quote_id||o?.id)})]})}),a.jsxs("div",{className:"flex gap-2 p-2 border border-gray-300 col-span-2",children:[a.jsx("div",{className:"w-16 font-semibold",children:"Subject:"}),a.jsx("div",{className:"min-w-0 break-words",children:p.subject||""})]}),a.jsx("div",{className:"quote-meta-quote md:justify-center border-r border-b border-gray-300 text-center p-2",children:a.jsx("div",{className:"text-sm text-gray-700",children:TGe(p.issuedDate)})})]}),a.jsx("div",{className:"mt-4 text-sm text-gray-900 whitespace-pre-wrap",children:p.intro||""})]}),a.jsx("div",{className:"mt-4 overflow-x-auto",children:a.jsxs("table",{className:"w-full text-sm border border-gray-400 border-collapse",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-gray-100",children:[a.jsx("th",{className:"border border-gray-400 px-2 py-2 w-14",children:"Item"}),a.jsx("th",{className:"border border-gray-400 px-2 py-2 text-left",children:"Description"}),a.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Qty"}),a.jsx("th",{className:"border border-gray-400 px-2 py-2 w-20",children:"Unit"}),a.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Unit Price"}),a.jsx("th",{className:"border border-gray-400 px-2 py-2 w-28",children:"Total Cost"})]})}),a.jsx("tbody",{children:j.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"border border-gray-400 px-2 py-4 text-center text-gray-600",children:"No line items."})}):j.map((_,k)=>{const T=_?.name?String(_.name).trim():"",A=_?.description?String(_.description).trim():"",E=_?.variant?String(_.variant).trim():"",M=_?.sku?String(_.sku).trim():"",O=E&&M?`${E} (${M})`:M?`(${M})`:E,D=[T,A,O].map(H=>H?String(H).trim():"").filter(Boolean).join(`
`);return a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:k+1}),a.jsx("td",{className:"border border-gray-400 px-2 py-2 whitespace-pre-wrap",children:D}),a.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:Nv(_?.quantity)||""}),a.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:_?.unit||""}),a.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:rf(_?.unit_price,r)}),a.jsx("td",{className:"border border-gray-400 px-2 py-2 text-right",children:rf(_?.line_total,r)})]},_?.id??k)})})]})}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("table",{className:"text-sm border border-gray-400 border-collapse min-w-[280px]",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"SUB TOTAL"}),a.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:rf(o?.subtotal,r)})]}),b>0?a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:"Less: Discount"}),a.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:rf(o?.discount_amount,r)})]}):null,a.jsxs("tr",{children:[a.jsxs("td",{className:"border border-gray-400 px-3 py-2 font-semibold",children:["Tax ",N.toFixed(0),"%"]}),a.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right",children:rf(o?.tax_amount,r)})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"border border-gray-400 px-3 py-2 font-bold",children:"TOTAL"}),a.jsx("td",{className:"border border-gray-400 px-3 py-2 text-right font-bold",children:rf(o?.total_amount,r)})]})]})})}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"TERMS & CONDITIONS:"}),a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-28 font-semibold",children:"Validity"}),a.jsxs("div",{className:"flex-1",children:[": ",p.terms?.validity||""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-28 font-semibold",children:"Payment"}),a.jsxs("div",{className:"flex-1",children:[": ",p.terms?.payment||""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-28 font-semibold",children:"Delivery Period"}),a.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPeriod||""]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-28 font-semibold",children:"Delivery Point"}),a.jsxs("div",{className:"flex-1",children:[": ",p.terms?.deliveryPoint||""]})]})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold text-gray-900 mb-2",children:"NOTE:"}),a.jsx("div",{className:"text-sm whitespace-pre-wrap text-gray-900",children:p.notes||""})]})]}),a.jsxs("div",{className:"mt-10 grid grid-cols-2 gap-10 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-700",children:"Prepared by:"}),a.jsx("div",{className:"mt-8 border-b border-gray-400"}),a.jsx("div",{className:"mt-2 font-semibold",children:w})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-gray-700",children:"Approved by:"}),a.jsx("div",{className:"mt-8 border-b border-gray-400"}),a.jsx("div",{className:"mt-2 font-semibold",children:S})]})]}),a.jsx("div",{className:"mt-6 text-xs text-gray-500",children:"Generated from Sari-Sari CRM quotation."})]})]})]})}function EGe({toggleSidebar:e}){const[t,n]=f.useState(!1),[s,r]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState(0),u=f.useRef(null),d=f.useRef(null),h=Jt(),p=Tt(),{logout:x}=Ks(),{user:v,fetchUser:j}=Gt(),N={"/group-manager/dashboard":"Dashboard","/group-manager/accounts":"Accounts","/group-manager/contacts":"Contacts","/reports":"Reports","/leads":"Leads","/group-manager/Audit":"Audit","/group-manager/targets":"Targets","/group-manager/leads":"Leads","/group-manager/quotes":"Quotes","/group-manager/users":"Users","/group-manager/deals":"Deals"}[h.pathname]||"Group Manager Panel";return f.useEffect(()=>{j()},[]),f.useEffect(()=>{const w=()=>{j()};return window.addEventListener("userProfileUpdated",w),()=>{window.removeEventListener("userProfileUpdated",w)}},[j]),f.useEffect(()=>{if(!v?.id)return;const w=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",S=window.location.protocol==="https:"?"wss:":"ws:",_=w?"localhost:8000":window.location.host,k=`${S}//${_}/ws/notifications?user_id=${v.id}`,T=new WebSocket(k);return T.onmessage=A=>{const E=JSON.parse(A.data);o(M=>[E,...M]),c(M=>M+1)},()=>T.close()},[v?.id]),f.useEffect(()=>{function w(S){u.current&&!u.current.contains(S.target)&&n(!1),d.current&&!d.current.contains(S.target)&&r(!1)}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),a.jsxs("header",{className:"flex justify-between items-center bg-white shadow px-4 sm:px-6 py-3 border-b relative z-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:e,className:"lg:hidden text-gray-700 hover:text-gray-900",children:a.jsx(Jf,{className:"text-2xl"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-800",children:N})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:d,children:[a.jsxs("button",{onClick:()=>r(!s),className:"relative text-gray-600 hover:text-gray-800 transition",children:[a.jsx(ux,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-4 h-4 flex items-center justify-center rounded-full font-semibold",children:l})]}),s&&a.jsxs("div",{className:"absolute right-0 mt-3 w-80 bg-white rounded-xl shadow-lg border z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-3 border-b bg-gray-50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-sm",children:"Notifications"}),a.jsx("button",{onClick:()=>{o([]),c(0)},className:"text-xs text-blue-600 hover:underline",children:"Clear All"})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:i.length>0?i.map((w,S)=>a.jsx("div",{className:"p-3 border-b text-sm hover:bg-gray-50 cursor-pointer transition",children:w.title||w.message||"New Notification"},S)):a.jsx("div",{className:"p-4 text-center text-gray-500 text-xs",children:"No notifications"})})]})]}),a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:()=>n(!t),className:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 px-2 py-1 rounded transition",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/40",alt:"Profile",className:"w-8 h-8 object-cover rounded-full border border-gray-200"}),a.jsxs("span",{className:"hidden lg:inline text-sm font-medium text-gray-700",children:[v?.first_name," ",v?.last_name]})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white shadow-xl rounded-xl border border-gray-200 z-50 p-4 animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[a.jsx("img",{src:v?.profile_picture||"https://via.placeholder.com/80",alt:"Profile Large",className:"w-16 h-16 rounded-full object-cover border-2 border-gray-100"}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-gray-800 font-semibold text-sm",children:[v?.first_name," ",v?.middle_name," ",v?.last_name]}),a.jsx("p",{className:"text-[11px] text-gray-600 font-light w-full truncate",children:"Group Manager"})]})]}),a.jsxs("div",{className:"mt-6 space-y-1 px-2",children:[a.jsx("button",{onClick:()=>{p("/group-manager/users"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Invite Your Team"}),a.jsx("button",{onClick:()=>{p("/group-manager/manage-account"),n(!1)},className:"block w-full text-sm text-gray-700 hover:bg-gray-50 p-2 rounded text-left transition",children:"Manage Your Account"}),a.jsx("div",{className:"border-t border-gray-100 my-2"}),a.jsx("button",{onClick:x,className:"block w-full text-sm text-red-600 hover:bg-red-50 p-2 rounded text-left transition font-medium",children:"Logout"})]})]})]})]})]})}function LGe(){const[e,t]=f.useState(!1),[n,s]=f.useState(!1),[r,i]=f.useState(!1),[o,l]=f.useState(!1),c=Jt(),{user:u}=Gt();f.useEffect(()=>{u&&console.log("Fetched user:",u)},[u]),f.useEffect(()=>{console.log("Simulating user fetch... (no backend)")},[]),f.useEffect(()=>{document.title="Panel | Sari-Sari CRM"},[]);const d="flex items-center gap-3 px-3 py-2 rounded-lg bg-white text-[#1e293b] font-semibold shadow-sm",h="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-300 hover:bg-[#334155] hover:text-white transition";return["/group-manager/accounts","/group-manager/contacts","/group-manager/leads","/group-manager/deals","/group-manager/quotes","/group-manager/targets","/group-manager/meetings"].includes(c.pathname),a.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[a.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-[#1e293b] text-white flex flex-col shadow-lg transform transition-transform duration-300 z-50
          ${o?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,children:[a.jsxs("div",{className:"px-4 py-3 bg-[#fbbf24] leading-none",children:[a.jsxs("p",{className:"text-gray-900 font-bold text-lg m-0 p-0",children:[" Sari-Sari.CRM"," ",a.jsx("span",{className:"text-[12px] text-gray-700 font-medium align-bottom",children:"v2"})]}),u&&u.company&&a.jsx("p",{className:"text-[12px] text-gray-600 font-medium w-full truncate",children:u.company.company_name})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2 hide-scrollbar",children:[a.jsxs(Ut,{to:"/group-manager/dashboard",className:({isActive:x})=>x?d:h,children:[a.jsx(mx,{className:"text-lg"}),a.jsx("span",{children:"Dashboard"})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>t(!e),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-lg"}),"Sales"]}),a.jsx(Lt,{className:`transition-transform ${e?"rotate-180":""}`})]}),e&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/group-manager/accounts",className:({isActive:x})=>x?d:h,children:[a.jsx(jd,{})," Accounts"]}),a.jsxs(Ut,{to:"/group-manager/contacts",className:({isActive:x})=>x?d:h,children:[a.jsx(sa,{})," Contacts"]}),a.jsxs(Ut,{to:"/group-manager/leads",className:({isActive:x})=>x?d:h,children:[a.jsx(Xa,{})," Leads"]}),a.jsxs(Ut,{to:"/group-manager/deals",className:({isActive:x})=>x?d:h,children:[a.jsx(na,{})," Deals"]}),a.jsxs(Ut,{to:"/group-manager/quotes",className:({isActive:x})=>x?d:h,children:[a.jsx(ra,{})," Quotes"]}),a.jsxs(Ut,{to:"/group-manager/targets",className:({isActive:x})=>x?d:h,children:[a.jsx(mr,{})," Targets"]})]})]}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>s(!n),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"text-lg"}),"Activity"]}),a.jsx(Lt,{className:`transition-transform ${n?"rotate-180":""}`})]}),n&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/group-manager/tasks",className:({isActive:x})=>x?d:h,children:[a.jsx(Yt,{})," Tasks"]}),a.jsxs(Ut,{to:"/group-manager/meetings",className:({isActive:x})=>x?d:h,children:[a.jsx(Dt,{})," Meetings"]}),a.jsxs(Ut,{to:"/group-manager/calls",className:({isActive:x})=>x?d:h,children:[a.jsx(zs,{})," Calls"]}),a.jsxs(Ut,{to:"/group-manager/audit",className:({isActive:x})=>x?d:h,children:[a.jsx(ks,{})," Audit"]})]})]}),a.jsx("div",{children:a.jsx(Ut,{to:"/group-manager/territory",className:({isActive:x})=>x?d:h,children:a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(ec,{className:"text-lg"}),"Territory"]})})}),a.jsxs("div",{children:[a.jsxs("button",{className:"w-full px-3 py-2 flex justify-between items-center text-sm font-medium text-gray-300 hover:bg-[#334155] rounded-lg transition",onClick:()=>i(!r),children:[a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(CL,{className:"text-lg"}),"Settings"]}),a.jsx(Lt,{className:`transition-transform ${r?"rotate-180":""}`})]}),r&&a.jsxs("div",{className:"ml-6 mt-2 space-y-1",children:[a.jsxs(Ut,{to:"/group-manager/users",className:({isActive:x})=>x?d:h,children:[a.jsx(rn,{})," Users"]}),a.jsxs(Ut,{to:"/group-manager/manage-account",className:({isActive:x})=>x?d:h,children:[a.jsx(sa,{})," Your Profile"]})]})]})]}),a.jsxs("div",{className:"px-4 py-3 text-xs text-gray-400 border-t border-gray-700",children:[" ",new Date().getFullYear()," Sari-Sari CRM"]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"flex-1 flex flex-col lg:ml-64 overflow-hidden",children:[a.jsx(EGe,{toggleSidebar:()=>l(!o)}),a.jsx("main",{className:"flex-1 p-6 overflow-auto hide-scrollbar",style:{backgroundColor:"#fffeee"},children:a.jsx(nx,{})})]})]})}const PGe=e=>a.jsx(Kt,{...e}),DGe=e=>a.jsx(jd,{...e}),bee=e=>a.jsx(Vs,{...e}),OGe=e=>a.jsx(dx,{...e}),MGe=e=>a.jsx(fj,{...e}),IGe=e=>a.jsx(Dt,{...e}),$Ge=e=>a.jsx(Mt,{...e}),RGe=e=>a.jsx(gj,{...e}),vee=e=>a.jsx(hj,{...e}),zGe=e=>a.jsx(rn,{...e}),wee=e=>a.jsx(sa,{...e}),FGe=e=>a.jsx(Xa,{...e}),jee=e=>a.jsx(na,{...e}),UGe=e=>a.jsx(ra,{...e}),Nee=e=>a.jsx(mr,{...e}),BGe=e=>a.jsx(Qa,{...e}),HGe=e=>a.jsx(Dt,{...e}),qGe=e=>a.jsx(zs,{...e}),GGe=e=>a.jsx(ec,{...e}),WGe=e=>a.jsx(ks,{...e}),Cee=(e,t="")=>{const n=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(n).replace(/^/,`${t} `)},VGe=e=>{switch(e){case"Negotiation":return{text:"text-purple-700",bg:"bg-purple-100"};case"Proposal":return{text:"text-red-700",bg:"bg-red-100"};case"Qualification":return{text:"text-yellow-700",bg:"bg-yellow-100"};case"Prospecting":return{text:"text-blue-700",bg:"bg-blue-100"};case"Closed Won":return{text:"text-green-700",bg:"bg-green-100"};case"Closed Lost":return{text:"text-red-700",bg:"bg-red-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},YGe=e=>{switch(e){case"Website":return{text:"text-green-600",bg:"bg-green-100"};case"Referral":return{text:"text-purple-600",bg:"bg-purple-100"};case"Trade Show":return{text:"text-orange-600",bg:"bg-orange-100"};case"Cold Call":return{text:"text-red-600",bg:"bg-red-100"};default:return{text:"text-gray-600",bg:"bg-gray-100"}}},QGe=e=>{switch(e){case"call":return{Icon:$Ge,color:"text-red-500",bgColor:"bg-red-100"};case"qualification":return{Icon:RGe,color:"text-green-600",bgColor:"bg-green-100"};default:return{Icon:IGe,color:"text-blue-500",bgColor:"bg-blue-100"}}},KGe=e=>{switch(e.toUpperCase()){case"HIGH":return{text:"text-red-700",bg:"bg-red-100"};case"LOW":return{text:"text-blue-700",bg:"bg-blue-100"};default:return{text:"text-gray-700",bg:"bg-gray-100"}}},XGe=({searchQuery:e,onSearchChange:t,searchResults:n,onSearchResultClick:s})=>{const r=Tt(),[i,o]=f.useState(!1),l=f.useRef(null),c=[{icon:DGe,label:"Account"},{icon:wee,label:"Contact"},{icon:FGe,label:"Leads"},{icon:jee,label:"Deals"},{icon:UGe,label:"Quotes"},{icon:Nee,label:"Target"},{icon:BGe,label:"Task"},{icon:HGe,label:"Meeting"},{icon:qGe,label:"Call"},{icon:WGe,label:"Audit"},{icon:GGe,label:"Territory"}];f.useEffect(()=>{const h=p=>{l.current&&!l.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const u=h=>{t(h.target.value),o(h.target.value.trim().length>0)},d=h=>{s&&s(h),o(!1)};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 sm:p-4 flex flex-col items-start space-y-4 w-full",children:[a.jsxs("div",{className:"w-full flex justify-center relative",ref:l,children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg lg:mt-3 px-4 py-2 w-full max-w-md md:max-w-lg lg:max-w-2xl focus-within:ring-2 focus-within:ring-blue-500 transition duration-150",children:[a.jsx(PGe,{size:20,className:"text-gray-400 mr-3 flex-shrink-0"}),a.jsx("input",{type:"text",placeholder:"Search Leads, Deals, or Accounts...",className:"focus:outline-none text-base w-full",value:e,onChange:u,onFocus:()=>e.trim().length>0&&o(!0)})]}),i&&Array.isArray(n)&&n.length>0&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-y-auto",children:n.map((h,p)=>a.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition duration-150",onClick:()=>d(h),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h.type}),h.details&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.details})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.type==="Lead"?"bg-blue-100 text-blue-600":h.type==="Deal"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}`,children:h.type})]})},p))}),i&&e.trim().length>0&&(!Array.isArray(n)||n.length===0)&&a.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-full max-w-md md:max-w-lg lg:max-w-2xl bg-white rounded-lg shadow-xl border border-gray-200 z-50 p-4 text-center text-sm text-gray-500",children:"No results found"})]}),a.jsx("div",{className:"w-full overflow-x-auto lg:overflow-x-hidden scroll-smooth flex justify-center",children:a.jsx("div",{className:"flex flex-nowrap space-x-3 lg:space-x-4 xl:space-x-3 px-2 sm:px-0",children:c.map((h,p)=>a.jsxs("div",{className:"relative flex-shrink-0 group",children:[a.jsx("button",{className:"p-3 text-gray-500 hover:text-gray-900 transition duration-150 rounded-full hover:bg-gray-100 focus:outline-none cursor-pointer","aria-label":h.label,title:h.label,onClick:()=>{switch(h.label){case"Account":r("/group-manager/accounts");break;case"Contact":r("/group-manager/contacts");break;case"Leads":r("/group-manager/leads");break;case"Deals":r("/group-manager/deals");break;case"Quotes":r("/group-manager/quotes");break;case"Target":r("/group-manager/targets");break;case"Task":r("/group-manager/tasks");break;case"Meeting":r("/group-manager/meetings");break;case"Call":r("/group-manager/calls");break;case"Audit":r("/group-manager/audit");break;case"Territory":r("/group-manager/territory");break;default:console.log(`Clicked ${h.label}`)}},children:a.jsx(h.icon,{size:24,className:"lg:scale-95"})}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-gray-900 text-white text-xs font-semibold rounded-md whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-75 ease-in-out z-50 shadow-lg",children:[h.label,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]},p))})})]})},ZGe=({action:e,description:t,entity_type:n,entity_name:s,timestamp:r})=>{const i=Tt(),o=d=>{if(!d)return"Unknown";const h=new Date(d),x=new Date-h,v=Math.floor(x/6e4),j=Math.floor(x/36e5),b=Math.floor(x/864e5);return v<1?"Just now":v<60?`${v} min ago`:j<24?`${j} hour${j>1?"s":""} ago`:b<7?`${b} day${b>1?"s":""} ago`:h.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},l=e||t||"Action",c=s||n||"System",u=o(r);return a.jsxs("li",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i("/group-manager/audit"),children:[a.jsxs("p",{className:"text-sm text-gray-800 flex-grow font-medium",children:[l," ",a.jsxs("span",{className:"text-gray-500 italic text-xs",children:["(",c,")"]})]}),a.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0 ml-4",children:u})]})},JGe=({logs:e,loading:t})=>{const n=Tt();return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-md font-semibold text-gray-800",children:"Recent Logs"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/audit"),children:[a.jsx("span",{children:"See All"}),a.jsx(vee,{size:14,className:"transform -rotate-45"})]})]}),e&&e.length>0?a.jsx("ul",{className:"space-y-1",children:e.slice(0,3).map((s,r)=>a.jsx(ZGe,{...s},r))}):a.jsx("div",{className:"text-sm text-gray-500 py-4",children:"No recent logs"})]})},eWe=({icon:e,title:t,value:n,color:s,bgColor:r,loading:i,onClick:o})=>a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o||(()=>console.log(`Clicked metric card: ${t}`)),children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n||0})]})]}),tWe=({revenueData:e,loading:t})=>{const n=Tt(),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=f.useMemo(()=>{if(console.log("=== RevenueChart calculateRevenueData ==="),console.log("revenueData:",e),console.log("revenueData length:",e?.length),!e||e.length===0){console.log("No revenue data, returning empty chart");const b=new Date;b.getFullYear();const N=b.getMonth(),w=[],S=[];for(let _=0;_<=N;_++)w.push(s[_]),S.push(0);return{labels:w,revenues:S,maxRevenue:0}}const l={};let c=0,u=0;console.log("Processing deals:",e.length),e.forEach((b,N)=>{const w=b.close_date||b.closeDate||null,S=w&&w!==null&&w!=="",_=b.stage||"",k=_.toUpperCase()==="CLOSED_WON"||_==="CLOSED_WON";let T=b.amount;T&&typeof T=="object"&&T.toString?T=parseFloat(T.toString()):T=parseFloat(T)||0;const A=T>0;if(k&&(u++,console.log(`Deal ${N+1} (CLOSED_WON):`,{id:b.id,name:b.name,stage:_,close_date:w,close_date_type:typeof w,amount:T,amount_type:typeof b.amount,hasCloseDate:S,hasAmount:A,willBeAdded:S&&A,allFields:Object.keys(b)})),S&&k&&A)try{let E=new Date(w);if(isNaN(E.getTime())){const M=String(w).split("T")[0];E=new Date(M+"T00:00:00")}if(isNaN(E.getTime()))console.warn(` Invalid date for deal ${b.id}:`,w,"Type:",typeof w);else{const M=E.getFullYear(),O=E.getMonth()+1,I=`${M}-${String(O).padStart(2,"0")}`;l[I]||(l[I]=0),l[I]+=T,c++,console.log(` Added deal ${b.id} to month ${I}: ${T}, total: ${l[I]}`),console.log(`  - Close date: ${w} -> Parsed: ${E.toISOString()} -> Month: ${I} (Year: ${M}, Month: ${O})`)}}catch(E){console.error("Error parsing deal date:",w,E)}else k&&console.warn(` Deal ${b.id} is CLOSED_WON but missing data:`,{hasCloseDate:S,hasAmount:A,closeDate:w,amount:T,originalAmount:b.amount})}),console.log("Summary:",{totalDeals:e.length,closedWonDeals:u,validDealsForGraph:c,monthlyRevenue:l});const d=Object.keys(l).map(b=>parseInt(b.split("-")[0])),h=d.length>0?[...new Set(d)].sort():[],p=new Date().getFullYear();new Date().getMonth();const x=[],v=[];for(let b=0;b<12;b++){const N=`${p}-${String(b+1).padStart(2,"0")}`;x.push(s[b]);const w=l[N]||0;v.push(w),w>0&&console.log(`Month ${s[b]} (${N}): ${w}`)}if(h.length>0){const b=Math.max(...h);if(b>p)for(let N=p+1;N<=b;N++)for(let w=0;w<12;w++){const S=`${N}-${String(w+1).padStart(2,"0")}`,_=l[S]||0;x.push(`${s[w]} ${N}`),v.push(_),_>0&&console.log(`Month ${s[w]} ${N} (${S}): ${_}`)}}const j=Math.max(...v,1);return console.log("Final chart data:",{labels:x,revenues:v,maxRevenue:j,hasData:v.some(b=>b>0)}),{labels:x,revenues:v,maxRevenue:j}},[e]),i=r.labels,o=r.revenues;return console.log("=== FINAL CHART DATA ==="),console.log("X Axis (Months):",i),console.log("Y Axis (Revenue):",o),console.log("Has any revenue > 0:",o.some(l=>l>0)),console.log("All revenue values:",o),console.log("Max revenue:",r.maxRevenue),a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Overview"}),a.jsxs("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline flex items-center space-x-1 font-medium",onClick:()=>n("/group-manager/deals"),children:[a.jsx("span",{children:"See All"}),a.jsx(vee,{size:14,className:"transform -rotate-45"})]})]}),a.jsx("div",{className:"h-80 relative flex-1 flex items-center justify-center p-6",children:a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i&&i.length>0&&o&&o.length>0?a.jsx(ih,{xAxis:[{data:i,scaleType:"point"}],yAxis:[{valueFormatter:l=>l>=1e3?`${(l/1e3).toFixed(0)}k`:l.toString()}],series:[{data:o,showMark:!0,area:!0}],height:320,width:void 0,grid:{vertical:!0,horizontal:!0},margin:{top:40,right:40,bottom:50,left:50},sx:{width:"100%",maxWidth:"100%"}}):a.jsxs("div",{className:"text-center text-gray-500",children:[a.jsx("p",{className:"text-sm",children:"No revenue data available"}),a.jsx("p",{className:"text-xs mt-2",children:"Closed won deals with close dates will appear here"})]})})})]})},ST=({title:e,items:t,children:n,onSeeAll:s})=>{const r=Tt(),i=()=>{if(s)s();else{const o={"Latest Leads":"/group-manager/leads","Latest Deals":"/group-manager/deals","Upcoming Activities":"/group-manager/tasks"};o[e]&&r(o[e])}};return a.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:e}),a.jsx("span",{className:"text-sm text-blue-500 cursor-pointer hover:underline",onClick:i,children:"See All"})]}),n]})},aWe=({first_name:e,last_name:t,company_name:n,source:s,created_at:r,id:i})=>{const o=Tt(),{text:l,bg:c}=YGe(s||"Website"),u=x=>{if(!x)return"Unknown";const v=new Date(x),b=new Date-v,N=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return N<60?`${N} min ago`:w<24?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):S<7?v.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},d=`${e||""} ${t||""}`.trim()||"Unknown",h=n||"Unknown Company",p=u(r);return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&o(`/group-manager/leads/${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:d}),a.jsx("p",{className:"text-xs text-gray-500",children:h})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-400",children:p}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${l} ${c} px-2 py-0.5 rounded-full`,children:s||"Website"})]})]})})},nWe=({name:e,amount:t,account:n,stage:s,created_at:r,id:i,previousAmount:o,currencySymbol:l})=>{const c=Tt(),d={PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost"}[s]||s||"Unknown",{text:h,bg:p}=VGe(d),x=parseFloat(t||0),v=o?x>=o?"up":"down":"up",j=v==="up"?OGe:MGe,b=v==="up"?"text-green-400":"text-red-400",N=n?.name||"Unknown Company";return a.jsx("div",{className:"py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:()=>i&&c(`/group-manager/deals/info?id=${i}`),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-shrink",children:[a.jsx("p",{className:"font-semibold text-sm text-gray-900",children:e||"Unnamed Deal"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:N}),a.jsx("span",{className:`inline-block mt-1 text-xs font-medium ${h} ${p} px-2 py-0.5 rounded-full`,children:d})]}),a.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[a.jsx("p",{className:"text-md font-bold text-gray-800",children:Cee(x,l)}),a.jsx(j,{size:16,className:`${b} mt-1`})]})]})})},sWe=({type:e,title:t,assignedTo:n,dueDate:s,scheduledDate:r,priority:i,id:o,activityType:l,fullData:c})=>{const u=Tt(),h=l||{Call:"call",Meeting:"meeting",Task:"qualification"}[e]||"meeting",{Icon:p,color:x,bgColor:v}=QGe(h),{text:j,bg:b}=KGe(i||"MEDIUM"),S=(T=>{if(!T)return"No date set";const A=new Date(T),M=A-new Date,O=Math.floor(M/864e5);return O===0?`Today, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===1?`Tomorrow, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:O===-1?`Yesterday, ${A.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`:A.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})(s||r),_=n||"Unassigned",k=()=>{o&&(c?h==="call"?(sessionStorage.setItem("callDetailData",JSON.stringify(c)),u(`/group-manager/calls/info?id=${o}`)):h==="meeting"?(sessionStorage.setItem("meetingDetailData",JSON.stringify(c)),u(`/group-manager/meetings/info?id=${o}`)):u("/group-manager/tasks"):u(h==="call"?`/group-manager/calls/info?id=${o}`:h==="meeting"?`/group-manager/meetings/info?id=${o}`:"/group-manager/tasks"))};return a.jsxs("div",{className:"flex items-start py-3 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition duration-150 px-2 -mx-2 rounded-md",onClick:k,children:[a.jsx("div",{className:`p-2 rounded-lg ${v} mr-3 flex-shrink-0 mt-1`,children:a.jsx(p,{size:20,className:`${x}`})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("p",{className:"font-medium text-gray-800 flex items-center mb-1",children:[a.jsx("span",{className:"text-xl leading-none mr-2",children:""}),t||"Untitled Activity"]}),a.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[a.jsxs("p",{className:"flex items-center",children:[a.jsx(bee,{size:14,className:"mr-1.5 text-gray-400"}),S]}),a.jsxs("p",{className:"flex items-center",children:[a.jsx(wee,{size:14,className:"mr-1.5 text-gray-400"}),"Assigned to: ",_]})]})]}),a.jsx("span",{className:`inline-block text-xs font-medium ${j} ${b} px-2 py-0.5 rounded-full flex-shrink-0 self-center ml-4`,children:(i||"MEDIUM").toUpperCase()})]})},rWe=()=>{const e=Tt(),{user:t}=Gt(),n=t?.company?.currency||"",[s,r]=f.useState({activeLeads:0,totalDeals:0,activeAccounts:0,overdueTasks:0}),[i,o]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState([]),[x,v]=f.useState([]),[j,b]=f.useState([]),[N,w]=f.useState(!0),[S,_]=f.useState(null),[k,T]=f.useState(""),[A,E]=f.useState([]),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState([]),[z,Q]=f.useState(0),[J,Y]=f.useState(new Date),re=f.useRef(null),we=f.useRef(null),Z=f.useMemo(()=>{try{if(!k.trim())return[];const de=k.toLowerCase().trim(),be=[];return Array.isArray(A)&&A.forEach(oe=>{const Te=`${oe.first_name||""} ${oe.last_name||""}`.trim().toLowerCase(),ue=(oe.company_name||"").toLowerCase(),Oe=(oe.email||"").toLowerCase(),xe=(oe.phone||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de)||xe.includes(de))&&be.push({id:oe.id,name:`${oe.first_name||""} ${oe.last_name||""}`.trim()||"Unnamed Lead",type:"Lead",details:oe.company_name||"No company",route:`/group-manager/leads/${oe.id}`})}),Array.isArray(M)&&M.forEach(oe=>{const Te=(oe.name||"").toLowerCase(),ue=(oe.account?.name||"").toLowerCase(),Oe=(oe.description||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de))&&be.push({id:oe.id,name:oe.name||"Unnamed Deal",type:"Deal",details:oe.account?.name||"No account",route:`/group-manager/deals/info?id=${oe.id}`})}),Array.isArray(I)&&I.forEach(oe=>{const Te=(oe.name||"").toLowerCase(),ue=(oe.email||"").toLowerCase(),Oe=(oe.phone||"").toLowerCase(),xe=(oe.website||"").toLowerCase();(Te.includes(de)||ue.includes(de)||Oe.includes(de)||xe.includes(de))&&be.push({id:oe.id,name:oe.name||"Unnamed Account",type:"Account",details:oe.email||oe.phone||"No contact info",route:"/group-manager/accounts"})}),be.slice(0,10)}catch(de){return console.error("Error in search:",de),[]}},[k,A,M,I]),ne=de=>{de.route&&(e(de.route),T(""))},pe=f.useCallback(async()=>{w(!0),_(null);try{const[de,be,oe,Te,ue,Oe,xe,le]=await Promise.all([se.get("/leads/admin/getLeads").catch(me=>(console.error("Error fetching leads:",me),{data:[]})),se.get("/deals/admin/fetch-all").catch(me=>(console.error("Error fetching deals:",me),{data:[]})),se.get("/accounts/admin/fetch-all").catch(me=>(console.error("Error fetching accounts:",me),{data:[]})),se.get("/tasks/all").catch(me=>(console.error("Error fetching tasks:",me),{data:[]})),se.get("/meetings/admin/fetch-all").catch(me=>(console.error("Error fetching meetings:",me),{data:[]})),se.get("/calls/admin/fetch-all").catch(me=>(console.error("Error fetching calls:",me),{data:[]})),se.get("/logs/read-all").catch(me=>(console.error("Error fetching logs:",me),{data:[]})),se.get("/targets/admin/fetch-all").catch(me=>(console.error("Error fetching targets:",me),{data:[]}))]),Fe=Array.isArray(de.data)?de.data:[],ke=Array.isArray(be.data)?be.data:[],He=Array.isArray(oe.data)?oe.data:[],Xe=Array.isArray(Te.data)?Te.data:[],it=Array.isArray(ue.data)?ue.data:[],ze=Array.isArray(Oe.data)?Oe.data:[],at=Array.isArray(xe.data)?xe.data:[],Ve=Array.isArray(le.data)?le.data:[];console.log("=== RAW DEALS API RESPONSE ==="),console.log("Deals count:",ke.length),ke.length>0&&(console.log("First deal sample (raw):",JSON.stringify(ke[0],null,2)),console.log("First deal keys:",Object.keys(ke[0]))),E(Fe),O(ke),D(He),W(Ve);const Ze=Ve.reduce((me,Re)=>{const qe=Re.amount||Re.value||Re.target_amount||0,rt=parseFloat(typeof qe=="string"?qe.replace(/[^\d.-]/g,""):qe);return me+(Number.isFinite(rt)?rt:0)},0);Q(Ze);const Je=Fe.filter(me=>me.status&&!["Lost","Converted"].includes(me.status)).length,Ue=Xe.filter(me=>!me.dueDate||me.status==="Completed"?!1:new Date(me.dueDate)<new Date).length;r({activeLeads:Je,totalDeals:ke.length,activeAccounts:He.length,overdueTasks:Ue});const _e=[...Fe].sort((me,Re)=>new Date(Re.created_at||0)-new Date(me.created_at||0)).slice(0,5);o(_e);const he=[...ke].sort((me,Re)=>new Date(Re.created_at||0)-new Date(me.created_at||0)).slice(0,5);c(he);const ie=new Date,G=[];ze.forEach(me=>{const Re=me.due_date||me.call_time,qe=(me.status||"").toUpperCase();if(Re){const rt=new Date(Re);qe==="COMPLETED"||qe==="MISSED"||qe==="NOT_HELD"||qe==="HELD"||G.push({type:"Call",title:me.subject||"Untitled Call",assignedTo:me.assigned_to||(me.call_assign_to?`${me.call_assign_to.first_name||""} ${me.call_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Re,priority:(me.priority||"MEDIUM").toUpperCase(),id:me.id,activityType:"call",fullData:me})}}),it.forEach(me=>{const Re=me.dueDate||me.start_time,qe=(me.status||"").toUpperCase();if(Re){const rt=new Date(Re);qe==="COMPLETED"||qe==="CANCELLED"||qe==="DONE"||G.push({type:"Meeting",title:me.subject||me.activity||"Untitled Meeting",assignedTo:me.assignedTo||(me.meet_assign_to?`${me.meet_assign_to.first_name||""} ${me.meet_assign_to.last_name||""}`.trim():"Unassigned"),scheduledDate:Re,priority:(me.priority||"MEDIUM").toUpperCase(),id:me.id,activityType:"meeting",fullData:me})}});const X={HIGH:1,MEDIUM:2,LOW:3},ve=G.sort((me,Re)=>{const qe=X[me.priority]||3,rt=X[Re.priority]||3;if(qe!==rt)return qe-rt;const st=new Date(me.scheduledDate||0),Ie=new Date(Re.scheduledDate||0);return st-Ie}).slice(0,5);d(ve),p(ke),console.log("=== ALL DEALS DATA ==="),console.log("Total deals:",ke.length);const $e=ke.filter(me=>(me.stage||"").toUpperCase()==="CLOSED_WON");console.log("CLOSED_WON deals:",$e.length),$e.length>0?(console.log("=== CLOSED_WON DEALS DETAILS ==="),$e.forEach((me,Re)=>{let qe=me.amount;qe&&typeof qe=="object"?qe.toString?qe=parseFloat(qe.toString()):qe=parseFloat(qe):qe=parseFloat(qe)||0,console.log(`Deal ${Re+1}:`,{id:me.id,name:me.name,stage:me.stage,stage_upper:(me.stage||"").toUpperCase(),amount:me.amount,amount_parsed:qe,amount_type:typeof me.amount,close_date:me.close_date,close_date_type:typeof me.close_date,close_date_value:me.close_date?new Date(me.close_date):null,has_close_date:!!me.close_date,has_amount:qe>0,all_keys:Object.keys(me),full_deal:me})})):(console.log(" No CLOSED_WON deals found!"),console.log("All deal stages:",ke.map(me=>me.stage))),b(ke);const Le=[...at].sort((me,Re)=>new Date(Re.timestamp||0)-new Date(me.timestamp||0));v(Le)}catch(de){console.error("Error fetching dashboard data:",de),_("Failed to load dashboard data. Please refresh the page.")}finally{w(!1)}},[]);f.useEffect(()=>(document.title="Dashboard | Sari-Sari CRM",console.log("TManagerDashboard mounted, fetching data..."),pe(),re.current=setInterval(()=>{console.log("Auto-refreshing dashboard data..."),pe(),Y(new Date)},3e4),()=>{re.current&&clearInterval(re.current)}),[pe]),f.useEffect(()=>{if(!t||!t.id)return;let de=0;const be=3;let oe=null;const Te=()=>{const ue=window.location.protocol==="https:"?"wss:":"ws:",Oe=window.location.hostname==="localhost"?"localhost:8000":window.location.host,xe=`${ue}//${Oe}/ws/notifications?user_id=${t.id}`;try{const le=new WebSocket(xe);we.current=le,le.onopen=()=>{console.log(" WebSocket connected for dashboard updates"),de=0},le.onmessage=Fe=>{try{const ke=JSON.parse(Fe.data);console.log(" Real-time notification received:",ke),ke.event&&["new_task","task_updated","new_lead","lead_updated","new_deal","deal_updated","new_account","account_updated","new_meeting","meeting_updated","new_call","call_updated"].includes(ke.event)&&(console.log(" Refreshing dashboard due to:",ke.event),pe(),Y(new Date))}catch(ke){console.error("Error parsing WebSocket message:",ke)}},le.onerror=Fe=>{de===0&&console.warn(" WebSocket connection unavailable (this is optional)")},le.onclose=()=>{de<be&&(de++,oe=setTimeout(()=>{t&&t.id&&Te()},5e3))}}catch{console.warn(" WebSocket not available (optional feature)")}};return Te(),()=>{oe&&clearTimeout(oe),we.current&&(we.current.close(),we.current=null)}},[t,pe]);const Ne=[{icon:zGe,title:"Active Leads",value:s.activeLeads,color:"text-blue-600",bgColor:"bg-blue-50",onClick:()=>e("/group-manager/leads")},{icon:Nee,title:"Total Targets",value:Cee(z,n),color:"text-purple-600",bgColor:"bg-purple-50",onClick:()=>e("/group-manager/targets")},{icon:jee,title:"Total Deals",value:s.totalDeals,color:"text-yellow-600",bgColor:"bg-yellow-50",onClick:()=>e("/group-manager/deals")},{icon:bee,title:"Overdue Tasks",value:s.overdueTasks,color:"text-red-600",bgColor:"bg-red-50",onClick:()=>e("/group-manager/tasks")}];return console.log("TManagerDashboard rendering, loading:",N,"error:",S),a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative w-full",children:[N&&a.jsx(Wt,{}),a.jsxs("div",{className:"max-w-screen-2xl mx-auto",children:[S&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:a.jsx("p",{className:"font-medium",children:S})}),a.jsx("div",{className:"mb-8",children:a.jsx(XGe,{searchQuery:k,onSearchChange:T,searchResults:Z,onSearchResultClick:ne})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-8",children:Ne.map(de=>a.jsx(eWe,{...de,loading:N},de.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsx(JGe,{logs:x,loading:N}),a.jsx(gP,{currencySymbol:n})]}),a.jsx("div",{className:"mb-8",children:a.jsx(EN,{leads:A,deals:M,targets:H,currencySymbol:n,basePath:"/group-manager"})}),a.jsx("div",{className:"grid grid-cols-1 mb-8",children:a.jsx(tWe,{revenueData:j,loading:N})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(ST,{title:"Latest Leads",children:i.length>0?i.map((de,be)=>a.jsx(aWe,{...de},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No leads found"})}),a.jsx(ST,{title:"Latest Deals",children:N?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500 mb-2"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Loading deals..."})]}):l.length>0?l.map((de,be)=>a.jsx(nWe,{...de,currencySymbol:n},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No deals found"})}),a.jsx(ST,{title:"Upcoming Activities",children:u.length>0?u.map((de,be)=>a.jsx(sWe,{...de},de.id||be)):a.jsx("div",{className:"text-sm text-gray-500 py-4 text-center",children:"No upcoming activities"})})]})]})]})},_T=[{value:"CUSTOMER",label:"Customer"},{value:"PROSPECT",label:"Prospect"},{value:"PARTNER",label:"Partner"},{value:"ACTIVE",label:"Vendor"},{value:"INACTIVE",label:"Inactive"},{value:"FORMER",label:"Delete"}],Kb={name:"",website:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",parent_company:"",status:"PROSPECT",territory_id:"",assigned_to:""},dr=e=>e?e.toUpperCase():"",AT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",iWe=e=>{switch(dr(e)){case"CUSTOMER":return"bg-green-600 text-white";case"PROSPECT":return"bg-purple-600 text-white";case"PARTNER":return"bg-pink-600 text-white";case"ACTIVE":return"bg-blue-600 text-white";case"INACTIVE":return"bg-gray-600 text-white";case"FORMER":return"bg-orange-600 text-white";default:return"bg-gray-500 text-white"}},oWe=e=>{switch(dr(e)){case"CUSTOMER":return"bg-green-100 text-green-700";case"PROSPECT":return"bg-purple-100 text-purple-700";case"PARTNER":return"bg-pink-100 text-pink-700";case"ACTIVE":return"bg-blue-100 text-blue-700";case"INACTIVE":return"bg-gray-200 text-gray-700";case"FORMER":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};function lWe(){const e=Tt(),t=Jt(),{user:n}=Gt();f.useEffect(()=>{document.title="Accounts | Sari-Sari CRM"},[]);const[s,r]=f.useState(!1),[i,o]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(null),[h,p]=f.useState(null),[x,v]=f.useState(Kb),[j,b]=f.useState(null),[N,w]=f.useState([]),[S,_]=f.useState(!1),[k,T]=f.useState([]),[A,E]=f.useState(null),[M,O]=f.useState([]),[I,D]=f.useState([]),[H,W]=f.useState("Filter by Status"),[z,Q]=f.useState(""),[J,Y]=f.useState(null),[re,we]=f.useState(!1),[Z,ne]=f.useState(1),[pe,Ne]=f.useState(10),[de,be]=f.useState("Overview"),[oe,Te]=f.useState(""),[ue,Oe]=f.useState(!1),[xe,le]=f.useState({}),[Fe,ke]=f.useState(null),[He,Xe]=f.useState(new Set),[it,ze]=f.useState(!1),{comments:at,addComment:Ve,refresh:Ze}=kn({relatedType:"account",relatedId:j?.id});f.useEffect(()=>{j?.id&&Ze()},[j?.id,Ze]);const Je=f.useCallback(async(L=null)=>{_(!0);try{const ee=await se.get("/accounts/admin/fetch-all"),Me=[...Array.isArray(ee.data)?ee.data:[]].sort((We,ft)=>{const St=We?.created_at||We?.updated_at||0,_t=ft?.created_at||ft?.updated_at||0;return new Date(_t)-new Date(St)});if(w(Me),L){const We=Me.find(ft=>ft.id===L);b(We||null)}}catch(ee){console.error(ee),w([]),ee.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch accounts. Please try again later.")}finally{_(!1)}},[b]),Ue=f.useCallback(async()=>{try{const L=await se.get("/users/all");T(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),_e=f.useCallback(async()=>{try{const L=await se.get("/territories/fetch");O(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load territories (permission denied).")}},[]),he=f.useCallback(async()=>{try{const L=await se.get("/accounts/admin/parent-companies");D(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load parent companies (permission denied).")}},[]),ie=f.useCallback(async L=>{try{const ee=await se.get(`/activities/accounts/${L}`);le(ee.data&&typeof ee.data=="object"?ee.data:{})}catch(ee){console.error(ee),ee.response?.status===404&&(console.warn("No activities found for this account."),le({}))}},[]);f.useEffect(()=>{Je(),Ue(),_e(),he()},[Je,Ue,_e,he]),f.useEffect(()=>{j&&Te(dr(j.status)||"PROSPECT")},[j]);const G=N.length,X=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="customer").length,[N]),ve=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="prospect").length,[N]),$e=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="partner").length,[N]),Le=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="active").length,[N]),me=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="inactive").length,[N]),Re=f.useMemo(()=>N.filter(L=>L.status?.toLowerCase()==="former").length,[N]),qe=f.useMemo(()=>[{title:"Total",value:G,icon:rn,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Customers",value:X,icon:Ro,color:"text-green-600",bgColor:"bg-green-100"},{title:"Prospects",value:ve,icon:Xa,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Partners",value:$e,icon:sa,color:"text-pink-600",bgColor:"bg-pink-100"},{title:"Active",value:Le,icon:Ro,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Inactive",value:me,icon:zo,color:"text-gray-600",bgColor:"bg-gray-100"},{title:"Former",value:Re,icon:zo,color:"text-orange-600",bgColor:"bg-orange-100"}],[G,X,ve,$e,Le,me,Re]),rt=f.useMemo(()=>{const L=z.trim().toLowerCase(),ee=H.trim().toUpperCase();return N.filter(Ee=>{const Me=[Ee?.name,Ee?.website,Ee?.industry,Ee?.territory?.name,Ee?.phone_number],We=L===""||Me.some(Vr=>Vr==null?!1:Vr.toString().toLowerCase().includes(L)),ft=ee==="FILTER BY STATUS"||dr(Ee.status)===ee;let St=!0;const _t=n?.role?.toUpperCase();if(_t!=="GROUP MANAGER"&&_t!=="CEO"&&_t!=="ADMIN"){const Vr=Ee?.assigned_to?.id===n?.id||Ee?.assigned_to===n?.id,j0=Ee?.acc_creator?.id===n?.id;St=Vr||j0}const En=dr(Ee.status)==="INACTIVE"&&ee!=="INACTIVE";return We&&ft&&St&&!En})},[N,z,H,n?.id]),st=Math.max(1,Math.ceil(rt.length/pe)||1);f.useEffect(()=>{ne(1)},[z,H,pe]),f.useEffect(()=>{ne(L=>{const ee=Math.max(1,Math.ceil(rt.length/pe)||1);return L>ee?ee:L})},[rt.length,pe]);const Ie=f.useMemo(()=>{const L=(Z-1)*pe;return rt.slice(L,L+pe)},[rt,Z,pe]);rt.length===0||(Z-1)*pe+1,Math.min(Z*pe,rt.length);const ot=()=>ne(L=>Math.max(L-1,1)),Ct=()=>ne(L=>Math.min(L+1,st)),kt=L=>{b(L),be("Overview"),Te(dr(L?.status)||"PROSPECT")},At=()=>b(null),jt=L=>{L.target.id==="accountModalBackdrop"&&!re&&At()},ge=()=>{r(!1),o(!1),p(null),v(Kb),c(!1),E(null)},ye=L=>{L.target.id==="modalBackdrop"&&ge()},Pe=L=>L?new Date(L).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",Ce=L=>{const{name:ee,value:Ee}=L.target;v(Me=>({...Me,[ee]:Ee}))},Qe=()=>{v(Kb),o(!1),p(null),r(!0)};f.useEffect(()=>{const L=new URLSearchParams(t.search||"");(t.state?.openAccountModal||L.get("openModal")==="1")&&(v(Kb),o(!1),p(null),r(!0),je(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const F=L=>{b(null),L.assigned_accs?E(L.assigned_accs):E(null),v({name:L.name||"",website:L.website||"",phone_number:L.phone_number||"",billing_address:L.billing_address||"",shipping_address:L.shipping_address||"",parent_company:L.parent_company||"",industry:L.industry||"",status:dr(L.status)||"PROSPECT",territory_id:L.territory?.id?String(L.territory.id):"",assigned_to:L.assigned_accs?.id?String(L.assigned_accs.id):""}),o(!0),p(L.id),r(!0)},q=L=>{L&&Y({title:"Archive Account",message:a.jsxs("span",{children:["Are you sure you want to archive the account"," ",a.jsx("span",{className:"font-semibold",children:L.name}),"? You can restore it later if needed."]}),confirmLabel:"Archive Account",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:L.id,name:L.name}})},fe=L=>{const ee=Ie.find(Ee=>Ee.id===L);ee&&ee.acc_creator?.id===n?.id&&Xe(Ee=>{const Me=new Set(Ee);return Me.has(L)?Me.delete(L):Me.add(L),Me})},te=()=>{const L=Ie.filter(ee=>ee.acc_creator?.id===n?.id);He.size===L.length&&L.length>0?Xe(new Set):Xe(new Set(L.map(ee=>ee.id)))},B=()=>{if(He.size===0)return;const L=He.size;Y({title:"Archive Accounts",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:L})," account",L!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${L} Account${L!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(He),count:L}})},ce=async()=>{if(!J?.action){Y(null);return}const{action:L}=J,{type:ee,payload:Ee,targetId:Me,name:We,targetIds:ft,count:St}=L;we(!0);try{if(ee==="create"){c(!0);const _t=await se.post("/accounts/admin",Ee);he(),V.success(`Account "${We}" created successfully.`);const Vt=j?.id||null;ge(),await Je(Vt),!j&&_t.data?.id}else if(ee==="update"){if(!Me)throw new Error("Missing account identifier for update.");c(!0),await se.put(`/accounts/admin/${Me}`,Ee),V.success(`Account "${We}" updated successfully.`);const _t=j?.id&&j.id===Me?Me:null;ge(),await Je(_t),j?.id===Me&&b(null)}else if(ee==="archive"){if(!Me)throw new Error("Missing account identifier for archiving.");const _t=j?.id;d(Me),await se.put(`/accounts/admin/${Me}`,{status:"INACTIVE"}),V.success(`Account "${We}" archived successfully.`),await Je(_t&&_t!==Me?_t:null),_t===Me&&b(null)}else if(ee==="bulk-archive"){if(!ft||ft.length===0)throw new Error("Missing account identifiers for bulk archiving.");ze(!0),await Promise.all(ft.map(_t=>se.put(`/accounts/admin/${_t}`,{status:"INACTIVE"}))),V.success(`${St} account${St!==1?"s":""} archived successfully.`),Xe(new Set),await Je(),b(null)}}catch(_t){console.error(_t);const Vt=ee==="create"?"Failed to create account. Please review the details and try again.":ee==="update"?"Failed to update account. Please review the details and try again.":ee==="bulk-archive"?"Failed to archive accounts. Please try again.":"Failed to archive account. Please try again.",En=_t.response?.data?.detail||Vt;V.error(En),(ee==="create"||ee==="update")&&c(!1),ee==="archive"&&d(null),ee==="bulk-archive"&&ze(!1)}finally{(ee==="create"||ee==="update")&&c(!1),ee==="archive"&&d(null),ee==="bulk-archive"&&ze(!1),we(!1),Y(null)}},De=()=>{re||Y(null)},U=async()=>{if(!j||!oe)return;const L=dr(oe),ee=dr(j.status);if(L!==ee){Oe(!0);try{await se.put(`/accounts/admin/${j.id}`,{status:L}),V.success(`Account status updated to ${AT(L)}`),w(Ee=>Ee.map(Me=>Me.id===j.id?{...Me,status:L}:Me)),b(null)}catch(Ee){console.error(Ee);const Me=Ee.response?.data?.detail||"Failed to update account status. Please try again.";V.error(Me)}finally{Oe(!1)}}},[K,je]=f.useState(!1),Be=L=>{L.preventDefault(),je(!0);const ee=x.name.trim();if(!ee){V.error("Account name is required.");return}if(!x.assigned_to){V.error("Assigned To is required.");return}const Me={name:ee,website:x.website?.trim()||null,phone_number:x.phone_number?.trim()||null,billing_address:x.billing_address?.trim()||null,shipping_address:x.shipping_address?.trim()||null,industry:x.industry?.trim()||null,parent_company:x.parent_company?.trim()||null,status:x.status||"PROSPECT",territory_id:x.territory_id?Number(x.territory_id):null,assigned_to:x.assigned_to?Number(x.assigned_to):null},We=i&&h?"update":"create";Y({title:We==="create"?"Confirm New Account":"Confirm Update",message:We==="create"?a.jsxs("span",{children:["Are you sure you want to create the account"," ",a.jsx("span",{className:"font-semibold",children:ee}),"?"]}):a.jsxs("span",{children:["Save changes to the account"," ",a.jsx("span",{className:"font-semibold",children:ee}),"?"]}),confirmLabel:We==="create"?"Create Account":"Update Account",cancelLabel:"Cancel",variant:"primary",action:{type:We,payload:Me,targetId:h||null,name:ee}})},tt=[{label:"Filter by Status",value:"Filter by Status"},..._T.map(L=>({label:L.label,value:L.value}))],lt=J?.action?.type==="delete"?J.action.targetId:null,Nt=j&&(u===j.id||lt===j.id),Ft=j&&u===j.id,da=j?iWe(j.status):"",Pa=j?a.jsx("div",{id:"accountModalBackdrop",onClick:jt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl flex items-center justify-between p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Account"}),a.jsx("button",{onClick:At,className:"text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:j.name}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${da}`,children:AT(j.status)})]}),n?.id===j?.acc_creator?.id&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>F(j),disabled:J?.action?.type==="update"&&J.action.targetId===j.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>q(j),disabled:!!Nt,children:Ft?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Activities"].map(L=>a.jsx("button",{onClick:()=>be(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${de===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[de==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Website:"}),a.jsx("p",{children:j.website?a.jsx("a",{href:j.website,className:"text-blue-600 hover:underline break-all",target:"_blank",rel:"noopener noreferrer",children:j.website}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Industry:"}),a.jsx("p",{children:j.industry||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Parent Company:"}),a.jsx("p",{children:j.parent_company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:j.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:j.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Billing Address:"}),a.jsx("p",{children:j.billing_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Shipping Address:"}),a.jsx("p",{children:j.shipping_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:j.assigned_accs?`${j.assigned_accs.first_name} ${j.assigned_accs.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:j.acc_creator?`${j.acc_creator.first_name} ${j.acc_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Pe(j.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Pe(j.updated_at)||"N/A"})]})]}),a.jsx(Tn,{comments:at,onAddComment:Ve})]}),de==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Account Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:N.notes||"No notes available."})]})]}),de==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[xe.tasks&&xe.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",xe.tasks.length,")"]})]}),Fe==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.tasks.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||"No description"}),L.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",L.assigned_to.first_name," ",L.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.due_date||L.created_at)})]},`task-${ee}`))})]}),xe.meetings&&xe.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",xe.meetings.length,")"]})]}),Fe==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.meetings.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.description||L.location||"No description"}),L.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",L.host.first_name," ",L.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.start_time||L.created_at)})]},`meeting-${ee}`))})]}),xe.calls&&xe.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",xe.calls.length,")"]})]}),Fe==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.calls.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:L.subject||L.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:L.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.call_time||L.created_at)})]},`call-${ee}`))})]}),xe.contacts&&xe.contacts.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="contacts"?null:"contacts"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"text-teal-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Contacts (",xe.contacts.length,")"]})]}),Fe==="contacts"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="contacts"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.contacts.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/contacts",{state:{contactID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-teal-600 mt-1",children:a.jsx(sa,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[L.first_name?`${L.first_name} `:"",L.last_name]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:L.title||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.created_at)})]},`contact-${ee}`))})]}),xe.deals&&xe.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",xe.deals.length,")"]})]}),Fe==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.deals.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[L.deal_id?L.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",L.name||L.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:L.stage||L.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.close_date||L.created_at)})]},`deal-${ee}`))})]}),xe.quotes&&xe.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>ke(Fe==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",xe.quotes.length,")"]})]}),Fe==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),Fe==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:xe.quotes.map((L,ee)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:L.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(L.quote_id?L.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:L.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:Pe(L.presented_date)||""})]},`quote-${ee}`))})]}),(!xe||(!xe.tasks||xe.tasks.length===0)&&(!xe.meetings||xe.meetings.length===0)&&(!xe.calls||xe.calls.length===0)&&(!xe.quotes||xe.quotes.length===0)&&(!xe.deals||xe.deals.length===0)&&(!xe.contacts||xe.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assigned_to:j.assigned_accs?.id?String(j.assigned_accs.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assignedTo:j.assigned_accs?.id?String(j.assigned_accs.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${j.name}`,relatedType1:"Account",relatedTo1:String(j.id),relatedType2:null,relatedTo2:null,assignedTo:j.assigned_accs?.id?String(j.assigned_accs.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:oe||dr(j?.status)||"PROSPECT",onChange:L=>Te(L.target.value),children:_T.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))}),a.jsx("button",{onClick:U,disabled:ue||!oe||dr(oe)===dr(j?.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${ue||!oe||dr(oe)===dr(j?.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:ue?"Updating...":"Update"})]})]})]})]})]})}):null,Ge=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[S&&a.jsx(Wt,{message:"Loading accounts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"}),"Accounts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Qe(),je(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Account"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:qe.map(L=>a.jsx(cWe,{...L},L.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search accounts",value:z,onChange:L=>Q(L.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:H,onChange:L=>W(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:tt.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:He.size>0&&He.size===Ie.filter(L=>L.acc_creator?.id===n?.id).length&&Ie.filter(L=>L.acc_creator?.id===n?.id).length>0,onChange:te,className:"w-4 h-4 cursor-pointer rounded border-gray-300",title:Ie.some(L=>L.acc_creator?.id===n?.id)?He.size===Ie.filter(L=>L.acc_creator?.id===n?.id).length?"Deselect all":"Select all":"No accounts to select"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Industry"}),a.jsx("th",{className:"py-3 px-4",children:"Territory"}),a.jsx("th",{className:"py-3 px-4",children:"Phone"}),a.jsx("th",{className:"py-3 px-4 w-12",children:He.size>0&&a.jsx("button",{onClick:B,disabled:it,title:`Archive ${He.size} account${He.size!==1?"s":""}`,className:"text-orange-500 hover:text-orange-700 disabled:opacity-50 transition",children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:S?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"Loading accounts..."})}):rt.length>0?Ie.map(L=>a.jsxs("tr",{className:"hover:bg-gray-50 text-xs cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",children:L.acc_creator?.id===n?.id?a.jsx("input",{type:"checkbox",checked:He.has(L.id),onChange:ee=>{ee.stopPropagation(),fe(L.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"}):null}),a.jsx("td",{className:"py-3 px-4",onClick:()=>{kt(L),ie(L.id)},children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:L.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:L.website||"--"})]})}),a.jsx("td",{className:"py-3 px-4",onClick:()=>{kt(L),ie(L.id)},children:a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${oWe(L.status)}`,children:AT(L.status)})}),a.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{kt(L),ie(L.id)},children:L.industry||"--"}),a.jsx("td",{className:"py-3 px-4 text-sm",onClick:()=>{kt(L),ie(L.id)},children:L.territory?.name||"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>{kt(L),ie(L.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(Mt,{className:"text-gray-500"}),a.jsx("span",{children:L.phone_number||"--"})]})})]},L.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:7,children:"No accounts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:rt.length,pageSize:pe,currentPage:Z,onPrev:ot,onNext:Ct,onPageSizeChange:Ne,label:"accounts"})]}),Ae=s?a.jsx("div",{id:"modalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto hide-scrollbar max-h-[90vh]",onClick:L=>L.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ge(),je(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",disabled:l||re,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:i?"Edit Account":"Add New Account"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Be,noValidate:!0,children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(of,{label:"Name",name:"name",value:x.name,onChange:Ce,placeholder:"Company name",required:!0,isSubmitted:K})}),a.jsx(aH,{label:"Parent Company",value:x.parent_company,onChange:L=>{v(ee=>({...ee,parent_company:L}))},items:I.map(L=>({id:L,name:L})),getLabel:L=>L?.name||"",placeholder:"Select parent company...",disabled:l}),a.jsx(of,{label:"Website",name:"website",value:x.website,onChange:Ce,placeholder:"https://example.com",disabled:l}),a.jsx(of,{label:"Phone Number",name:"phone_number",value:x.phone_number,onChange:Ce,placeholder:"09xx xxx xxxx",type:"tel",disabled:l}),a.jsx(of,{label:"Industry",name:"industry",value:x.industry,onChange:Ce,placeholder:"Industry",disabled:l}),a.jsx(of,{label:"Billing Address",name:"billing_address",value:x.billing_address,onChange:Ce,placeholder:"Billing address",disabled:l}),a.jsx(of,{label:"Shipping Address",name:"shipping_address",value:x.shipping_address,onChange:Ce,placeholder:"Shipping address",disabled:l}),a.jsx(tH,{label:"Status",name:"status",value:x.status,onChange:Ce,options:[{value:"",label:"Select status"},..._T],required:!0,disabled:l}),a.jsx(aH,{label:"Assigned To",value:x.assigned_to,onChange:L=>{const ee=k.find(Me=>String(Me.id)===String(L));E(ee);let Ee=null;ee&&ee.assigned_territory&&ee.assigned_territory.length===1&&(Ee=ee.assigned_territory[0].id),v(Me=>({...Me,assigned_to:L,territory_id:Ee}))},items:k||[],getLabel:L=>`${L?.first_name??""} ${L?.last_name??""} (${L?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:K,disabled:l||k.length===0}),a.jsx(tH,{label:"Territory",name:"territory_id",value:x.territory_id||"",onChange:Ce,options:[{value:"",label:A?A.assigned_territory&&A.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"},...A&&A.assigned_territory&&A.assigned_territory.map(L=>({value:String(L.id),label:L.name}))||[]],disabled:l||!A||!A.assigned_territory||A.assigned_territory.length===0}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:justify-end space-y-2 sm:space-y-0 sm:space-x-2 col-span-1 md:col-span-2 mt-4 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{ge(),je(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:l||re,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:l||re,children:l?"Saving...":i?"Update Account":"Save Account"})]})]})]})}):null,$=J?a.jsx(uWe,{open:!0,title:J.title,message:J.message,confirmLabel:J.confirmLabel,cancelLabel:J.cancelLabel,variant:J.variant,onConfirm:ce,onCancel:De,loading:re}):null;return a.jsxs(a.Fragment,{children:[Ge,Pa,Ae,$]})}function cWe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function of({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function tH({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))})]})}function aH({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,allowFreeText:d=!1}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(dWe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h,allowFreeText:d})]})}function dWe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1,allowFreeText:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(N=>String(N.id)===String(t)),j=v?s(v):t,b=f.useMemo(()=>{const N=h.trim().toLowerCase();return(N?e.filter(S=>(s(S)||"").toLowerCase().includes(N)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const N=w=>{x.current&&!x.current.contains(w.target)&&d(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:N=>{p(N.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:[c&&h.trim()&&!b.some(N=>s(N).toLowerCase()===h.trim().toLowerCase())&&a.jsxs("button",{type:"button",onClick:()=>{n(h.trim()),d(!1)},className:"w-full text-left px-3 py-2 text-sm hover:bg-green-50 bg-blue-50 font-medium text-blue-700",children:['+ Add "',h.trim(),'" as new parent company']}),b.length>0?b.map(N=>{const w=String(N.id),S=s(N),_=String(t)===w;return a.jsx("button",{type:"button",onClick:()=>{n(w),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${_?"bg-blue-50":""}`,children:S||"--"},w)}):!c||!h.trim()?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}):null]}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function uWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const Xb={first_name:"",last_name:"",account_id:"",title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:""},Nl=e=>[e?.first_name,e?.last_name].filter(Boolean).join(" ").trim(),xo=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function mWe(){const e=Tt(),t=Jt(),{user:n}=Gt();f.useEffect(()=>{document.title="Contacts | Sari-Sari CRM"},[]);const[s,r]=f.useState([]),[i,o]=f.useState(!1),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,p]=f.useState(null),[x,v]=f.useState(!1),[j,b]=f.useState(!1),[N,w]=f.useState(!1),[S,_]=f.useState(null),[k,T]=f.useState(!1),[A,E]=f.useState(null),[M,O]=f.useState(Xb),[I,D]=f.useState(""),[H,W]=f.useState("Filter by Accounts"),[z,Q]=f.useState(null),[J,Y]=f.useState("Overview"),[re,we]=f.useState(1),[Z,ne]=f.useState(10),[pe,Ne]=f.useState({}),[de,be]=f.useState(null),[oe,Te]=f.useState(null),[ue,Oe]=f.useState(new Set),[xe,le]=f.useState(!1),{comments:Fe,addComment:ke,refresh:He}=kn({relatedType:"contact",relatedId:h?.id});f.useEffect(()=>{h?.id&&He()},[h?.id,He]),f.useEffect(()=>{const B=t.state?.contactID;B&&(Te(B),e(t.pathname,{replace:!0,state:{}}))},[t,e]),f.useEffect(()=>{if(oe&&s.length>0&&!i){const B=s.find(ce=>ce.id===oe);B?p(B):V.error("Contact not found."),Te(null)}},[oe,s,i]);const Xe=f.useCallback(async(B=null)=>{o(!0);try{const ce=await se.get("/contacts/admin/fetch-all"),U=[...Array.isArray(ce.data)?ce.data:[]].sort((K,je)=>{const Be=K?.created_at||K?.updated_at||0,tt=je?.created_at||je?.updated_at||0;return new Date(tt)-new Date(Be)});if(r(U),B){const K=U.find(je=>je.id===B);p(K||null)}}catch(ce){console.error(ce),r([]),ce.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch contacts. Please try again later.")}finally{o(!1)}},[p]),it=f.useCallback(async()=>{try{const B=await se.get("/accounts/admin/fetch-all"),De=[...Array.isArray(B.data)?B.data:[]].sort((U,K)=>(U?.name||"").localeCompare(K?.name||""));c(De)}catch(B){console.error(B),c([]),B.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),ze=f.useCallback(()=>{window.open("/group-manager/accounts?openModal=1","_blank","noopener,noreferrer")},[]),at=f.useCallback(async()=>{try{const B=await se.get("/users/all"),De=[...Array.isArray(B.data)?B.data:[]].sort((U,K)=>Nl(U).localeCompare(Nl(K)));d(De)}catch(B){console.error(B),d([]),B.response?.status===403&&V.warn("Unable to load users for assignment (permission denied).")}},[]),Ve=f.useCallback(async B=>{try{const ce=await se.get(`/activities/contact/${B}`);Ne(ce.data&&typeof ce.data=="object"?ce.data:{})}catch(ce){console.error(ce),ce.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]);f.useEffect(()=>{Xe(),it(),at()},[Xe,it,at]);const Ze=f.useMemo(()=>{const B=new Map;l.forEach(De=>{De?.id&&De?.name&&B.set(String(De.id),De.name)}),s.forEach(De=>{De?.account_id&&De?.account?.name&&B.set(String(De.account_id),De.account.name)});const ce=Array.from(B.entries()).sort((De,U)=>De[1].localeCompare(U[1])).map(([De,U])=>({value:De,label:U}));return[{value:"Filter by Accounts",label:"Filter by Accounts"},...ce]},[l,s]),Je=f.useMemo(()=>{const B=I.trim().toLowerCase(),ce=H.trim();return s.filter(De=>{const U=[De?.first_name,De?.last_name,De?.email,De?.title,De?.department,De?.account?.name,De?.account?.status,De?.work_phone,De?.mobile_phone_1,De?.mobile_phone_2,De?.assigned_contact?.first_name,De?.assigned_contact?.last_name,De?.contact_creator?.first_name,De?.contact_creator?.last_name,De?.notes,xo(De?.created_at),xo(De?.updated_at)],K=B===""||U.some(Nt=>Nt==null?!1:Nt.toString().toLowerCase().includes(B)),je=ce==="Filter by Accounts"||String(De.account_id)===ce,Be=De?.status!=="Inactive";let tt=!0;const lt=n?.role?.toUpperCase();if(lt!=="GROUP MANAGER"&&lt!=="CEO"&&lt!=="ADMIN"){const Nt=De?.assigned_to===n?.id,Ft=De?.created_by===n?.id;tt=Nt||Ft}return K&&je&&Be&&tt})},[s,I,H,n?.id]),Ue=Math.max(1,Math.ceil(Je.length/Z)||1);f.useEffect(()=>{we(1)},[I,H,Z]),f.useEffect(()=>{we(B=>{const ce=Math.max(1,Math.ceil(Je.length/Z)||1);return B>ce?ce:B})},[Je.length,Z]);const _e=f.useMemo(()=>{const B=(re-1)*Z;return Je.slice(B,B+Z)},[Je,re,Z]),he=()=>we(B=>Math.max(B-1,1)),ie=()=>we(B=>Math.min(B+1,Ue)),G=f.useMemo(()=>{if(!j||!A)return l;const B=s.find(De=>De.id===A);return!B||!B.account||l.some(De=>De.id===B.account.id)?l:[...l,B.account]},[l,j,A,s]),X=f.useCallback(()=>{v(!1),b(!1),E(null),O(Xb),w(!1),ot(!1)},[]),ve=B=>{B.target.id==="modalBackdrop"&&!N&&!k&&X()},$e=B=>{const{name:ce,value:De}=B.target;O(U=>({...U,[ce]:De}))},Le=()=>{O(Xb),b(!1),E(null),v(!0)};f.useEffect(()=>{const B=new URLSearchParams(t.search||"");(t.state?.openContactModal||B.get("openModal")==="1")&&(O(Xb),b(!1),E(null),v(!0),ot(!1),e(t.pathname,{replace:!0,state:{}}))},[t.state,t.pathname,t.search,e]);const me=async B=>{if(!B)return;const ce=await se.get(`/accounts/get/${B.account_id}`);O({first_name:B.first_name||"",last_name:B.last_name||"",account_id:ce.data.id?ce.data.id:"",title:B.title||"",department:B.department||"",email:B.email||"",work_phone:B.work_phone||"",mobile_phone_1:B.mobile_phone_1||"",mobile_phone_2:B.mobile_phone_2||"",notes:B.notes||"",assigned_to:B.assigned_to?String(B.assigned_to):""}),b(!0),E(B.id),v(!0),p(null)},Re=B=>{if(!B)return;const ce=Nl(B)||"this contact";_({title:"Archive Contact",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:ce}),"? You can restore it later if needed."]}),confirmLabel:"Archive Contact",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:B.id,name:ce}})},qe=B=>{const ce=_e.find(De=>De.id===B);ce&&ce.contact_creator?.id===n?.id&&Oe(De=>{const U=new Set(De);return U.has(B)?U.delete(B):U.add(B),U})},rt=()=>{const B=_e.filter(ce=>ce.contact_creator?.id===n?.id);ue.size===B.length&&B.length>0?Oe(new Set):Oe(new Set(B.map(ce=>ce.id)))},st=()=>{if(ue.size===0)return;const B=ue.size;_({title:"Archive Contacts",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:B})," contact",B!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${B} Contact${B!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(ue),count:B}})},[Ie,ot]=f.useState(!1),Ct=B=>{B.preventDefault(),ot(!0);const ce=M.first_name.trim(),De=M.last_name.trim();if(!ce||!De){V.error("First name and last name are required.");return}if(!M.account_id){V.error("Account is required.");return}if(!M.assigned_to){V.error("Assigned To is required.");return}const K=M.email?.trim();if(!K){V.error("Email is required.");return}if(!K.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K)){V.error("Please enter a valid email address.");return}const Be={first_name:ce,last_name:De,account_id:Number(M.account_id),title:M.title?.trim()||null,department:M.department?.trim()||null,email:M.email?.trim().toLowerCase()||null,work_phone:M.work_phone?.trim()||null,mobile_phone_1:M.mobile_phone_1?.trim()||null,mobile_phone_2:M.mobile_phone_2?.trim()||null,notes:M.notes?.trim()||null,assigned_to:M.assigned_to?Number(M.assigned_to):null},tt=j&&A?"update":"create",lt=`${ce} ${De}`.trim();_({title:tt==="create"?"Confirm New Contact":"Confirm Update",message:tt==="create"?a.jsxs("span",{children:["Are you sure you want to add"," ",a.jsx("span",{className:"font-semibold",children:lt})," to your contacts?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:lt}),"?"]}),confirmLabel:tt==="create"?"Create Contact":"Update Contact",cancelLabel:"Cancel",variant:"primary",action:{type:tt,payload:Be,targetId:A||null,name:lt}})},kt=async()=>{if(!S?.action){_(null);return}const{action:B}=S,{type:ce,payload:De,targetId:U,name:K}=B;T(!0);try{if(ce==="create"){w(!0),await se.post("/contacts/admin",De),V.success(`Contact "${K}" created successfully.`);const je=h?.id||null;X(),await Xe(je)}else if(ce==="update"){if(!U)throw new Error("Missing contact identifier for update.");w(!0),await se.put(`/contacts/admin/${U}`,De),V.success(`Contact "${K}" updated successfully.`);const je=h?.id&&h.id===U?U:h?.id||null;X(),await Xe(je),h?.id===U&&p(null)}else if(ce==="archive"){if(!U)throw new Error("Missing contact identifier for archiving.");const je=h?.id;Q(U),await se.put(`/contacts/admin/${U}`,{status:"Inactive"}),V.success(`Contact "${K}" archived successfully.`),await Xe(je&&je!==U?je:null),je===U&&p(null)}else if(ce==="bulk-archive"){const{targetIds:je,count:Be}=B;if(!je||je.length===0)throw new Error("Missing contact identifiers for bulk archiving.");le(!0),await Promise.all(je.map(tt=>se.put(`/contacts/admin/${tt}`,{status:"Inactive"}))),V.success(`${Be} contact${Be!==1?"s":""} archived successfully.`),Oe(new Set),await Xe(),p(null)}}catch(je){console.error(je);const Be=ce==="create"?"Failed to create contact. Please review the details and try again.":ce==="update"?"Failed to update contact. Please review the details and try again.":ce==="bulk-archive"?"Failed to archive contacts. Please try again.":"Failed to archive contact. Please try again.",tt=je.response?.data?.detail||Be;V.error(tt)}finally{(ce==="create"||ce==="update")&&w(!1),ce==="archive"&&Q(null),ce==="bulk-archive"&&le(!1),T(!1),_(null)}},At=()=>{k||_(null)},jt=B=>{p(B),Y("Overview")},ge=()=>p(null),ye=B=>{B.target.id==="contactModalBackdrop"&&!k&&ge()},Pe=S?.action?.type==="delete"?S.action.targetId:null,Ce=h&&(z===h.id||Pe===h.id),Qe=h&&z===h.id,F=h?a.jsx("div",{id:"contactModalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:B=>B.stopPropagation(),children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl relative p-3 lg:p-3",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Contact"}),a.jsx("button",{onClick:ge,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white cursor-pointer",children:a.jsx(Za,{size:25})})]}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsx("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:Nl(h)||"Unnamed contact"})}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:n?.id===h?.contact_creator?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>me(h),disabled:k||S?.action?.type==="update"&&S.action.targetId===h.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>Re(h),disabled:!!Ce,children:Qe?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})})]}),a.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-2 px-2 lg:gap-4 md:mx-7 lg:mx-7",children:a.jsx("p",{className:"text-sm text-gray-500",children:h.account?.name||"No associated account"})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(B=>a.jsx("button",{onClick:()=>Y(B),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${J===B?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:B},B))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[J==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact Name:"}),a.jsx("p",{children:Nl(h)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Title:"}),a.jsx("p",{children:h.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:h.email?a.jsx("a",{href:`mailto:${h.email}`,className:"text-blue-600 hover:underline break-all",children:h.email}):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:h.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:h.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:h.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:h.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:h.assigned_contact?`${h.assigned_contact.first_name} ${h.assigned_contact.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:h.contact_creator?`${h.contact_creator.first_name} ${h.contact_creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:xo(h.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:xo(h.updated_at)||"N/A"})]})]})}),J==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Contact Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:h.notes||"No notes available."})]}),a.jsx(Tn,{comments:Fe,onAddComment:ke})]}),J==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[pe.tasks&&pe.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",pe.tasks.length,")"]})]}),de==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.tasks.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/tasks",{state:{taskID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.description||"No description"}),B.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",B.assigned_to.first_name," ",B.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xo(B.due_date||B.created_at)})]},`task-${ce}`))})]}),pe.meetings&&pe.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",pe.meetings.length,")"]})]}),de==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.meetings.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/meetings",{state:{meetingID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.description||B.location||"No description"}),B.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",B.host.first_name," ",B.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xo(B.start_time||B.created_at)})]},`meeting-${ce}`))})]}),pe.calls&&pe.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",pe.calls.length,")"]})]}),de==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.calls.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/calls",{state:{callID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:B.subject||B.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:B.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xo(B.call_time||B.created_at)})]},`call-${ce}`))})]}),pe.deals&&pe.deals.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="deals"?null:"deals"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(na,{className:"text-indigo-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Deals (",pe.deals.length,")"]})]}),de==="deals"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="deals"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.deals.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/deals",{state:{dealID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-indigo-600 mt-1",children:a.jsx(na,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h4",{className:"font-medium text-blue-600 break-words text-sm",children:[B.deal_id?B.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"," ",B.name||B.title||"Deal"]}),a.jsx("p",{className:"text-xs text-gray-500 break-words capitalize",children:B.stage||B.description||"No description"})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xo(B.close_date||B.created_at)})]},`deal-${ce}`))})]}),pe.quotes&&pe.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>be(de==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",pe.quotes.length,")"]})]}),de==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),de==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:pe.quotes.map((B,ce)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>e("/group-manager/quotes",{state:{quoteID:B.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(B.quote_id?B.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:B.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:xo(B.presented_date)||""})]},`quote-${ce}`))})]}),(!pe||(!pe.tasks||pe.tasks.length===0)&&(!pe.meetings||pe.meetings.length===0)&&(!pe.calls||pe.calls.length===0)&&(!pe.quotes||pe.quotes.length===0)&&(!pe.deals||pe.deals.length===0)&&(!pe.contacts||pe.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsx("div",{className:"flex flex-col gap-4",children:a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call with ${Nl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assigned_to:h?.assigned_contact?.id?String(h.assigned_contact.id):"",direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!h?.email){alert("No email address available");return}const B=encodeURIComponent(h.email),ce=encodeURIComponent(""),De=encodeURIComponent(""),U=`mailto:${B}?subject=${ce}&body=${De}`;window.location.href=U},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${Nl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assignedTo:h?.assigned_contact?.id?String(h.assigned_contact.id):"",status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Task for ${Nl(h)||""}`.trim(),relatedType1:"Account",relatedTo1:h?.account_id?String(h.account_id):h?.account?.id?String(h.account.id):"",relatedType2:"Contact",relatedTo2:h?.id?String(h.id):"",assignedTo:h?.assigned_contact?.id?String(h.assigned_contact.id):"",priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]})})]})]})]})}):null,q=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[i&&a.jsx(Wt,{message:"Loading contacts..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0 w-full",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(rn,{className:"mr-2 text-blue-600"})," Contacts Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Le(),ot(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Contact"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search contacts",value:I,onChange:B=>D(B.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:H,onChange:B=>W(B.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:Ze.map(B=>a.jsx("option",{value:B.value,children:B.label},B.value??B.label))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:ue.size>0&&ue.size===_e.filter(B=>B.contact_creator?.id===n?.id).length&&_e.filter(B=>B.contact_creator?.id===n?.id).length>0,onChange:rt,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Contact Info"}),a.jsx("th",{className:"py-3 px-4",children:"Department"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Created"}),a.jsx("th",{className:"py-3 px-4 w-12",children:ue.size>0&&a.jsx("button",{onClick:st,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected contacts",disabled:xe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:i?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"Loading contacts..."})}):Je.length>0?_e.map(B=>{const ce=[{Icon:sn,value:B.email,key:"email"},{Icon:Mt,value:B.work_phone,key:"work_phone"},{Icon:dd,value:B.mobile_phone_1,key:"mobile_phone_1"},{Icon:dd,value:B.mobile_phone_2,key:"mobile_phone_2"}].filter(De=>!!De.value);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",children:[a.jsx("td",{className:"py-3 px-4",children:n?.id===B.contact_creator?.id&&a.jsx("input",{type:"checkbox",checked:ue.has(B.id),onChange:De=>{De.stopPropagation(),qe(B.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsxs("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:Nl(B)||"--"}),a.jsx("div",{className:"text-xs text-gray-500",children:B.title||"No title"})]}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[a.jsx(Vx,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"break-words",children:B.account?.name||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:ce.length>0?a.jsx("div",{className:"space-y-1 text-gray-700",children:ce.map(({Icon:De,value:U,key:K})=>{const je=bt.createElement(De,{className:"text-gray-500 flex-shrink-0"});return a.jsxs("div",{className:"flex items-center space-x-2 break-all text-sm",children:[je,a.jsx("span",{children:U})]},K)})}):a.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-700 text-sm",children:[a.jsx(na,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:B.department||"--"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(sa,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{children:B.assigned_contact?`${B.assigned_contact.first_name} ${B.assigned_contact.last_name}`:"Unassigned"})]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>{jt(B),Ve(B.id)},children:a.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[a.jsx(Dt,{className:"text-gray-500 flex-shrink-0"}),a.jsx("span",{className:"text-xs",children:xo(B.created_at)||"--"})]})}),a.jsx("td",{className:"py-3 px-4"})]},B.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No contacts found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Je.length,pageSize:Z,currentPage:re,onPrev:he,onNext:ie,onPageSizeChange:ne,label:"contacts"})]}),fe=x?a.jsx("div",{id:"modalBackdrop",onClick:ve,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:B=>B.stopPropagation(),children:[a.jsx("button",{onClick:()=>{X(),ot(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:N||k,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:j?"Edit Contact":"Add New Contact"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:Ct,noValidate:!0,children:[a.jsx(Hc,{label:"First Name",name:"first_name",value:M.first_name,onChange:$e,placeholder:"First name",required:!0,isSubmitted:Ie}),a.jsx(Hc,{label:"Last Name",name:"last_name",value:M.last_name,onChange:$e,placeholder:"Last name",required:!0,isSubmitted:Ie}),a.jsx(nH,{label:"Account",value:M.account_id,onChange:B=>O(ce=>({...ce,account_id:B})),items:j?G:l||[],getLabel:B=>B?.name??"",placeholder:"Search account...",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:ze,disabled:N,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:it,disabled:N,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),disabled:N||(j?G.length===0:l.length===0),required:!0,isSubmitted:Ie}),a.jsx(nH,{label:"Assigned To",value:M.assigned_to,onChange:B=>O(ce=>({...ce,assigned_to:B})),items:u||[],getLabel:B=>`${B?.first_name??""} ${B?.last_name??""} (${B?.role??""})`.trim(),placeholder:"Search assignee...",required:!0,isSubmitted:Ie,disabled:N||u.length===0}),a.jsx(Hc,{label:"Title",name:"title",value:M.title,onChange:$e,placeholder:"Job title",disabled:N}),a.jsx(Hc,{label:"Department",name:"department",value:M.department,onChange:$e,placeholder:"Department",disabled:N}),a.jsx(Hc,{label:"Email",name:"email",type:"email",value:M.email,onChange:$e,placeholder:"example@email.com",required:!0,isSubmitted:Ie}),a.jsx(Hc,{label:"Work Phone",name:"work_phone",value:M.work_phone,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(Hc,{label:"Mobile Phone 1",name:"mobile_phone_1",value:M.mobile_phone_1,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(Hc,{label:"Mobile Phone 2",name:"mobile_phone_2",value:M.mobile_phone_2,onChange:$e,placeholder:"09xx xxx xxxx",disabled:N}),a.jsx(hWe,{label:"Notes",name:"notes",value:M.notes,onChange:$e,placeholder:"Additional details...",rows:3,disabled:N,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{X(),ot(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:N||k,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:N||k,children:N?"Saving...":j?"Update Contact":"Save Contact"})]})]})]})}):null,te=S?a.jsx(gWe,{open:!0,title:S.title,message:S.message,confirmLabel:S.confirmLabel,cancelLabel:S.cancelLabel,variant:S.variant,onConfirm:kt,onCancel:At,loading:k}):null;return a.jsxs(a.Fragment,{children:[q,F,fe,te]})}function Hc({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&!n?.trim();return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${u}
        `})]})}function nH({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1,actions:d=null}){const h=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),d?a.jsx("div",{className:"flex items-center",children:d}):null]}),a.jsx(fWe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:h})]})}function fWe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function hWe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function gWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}const TT=e=>e?new Date(e).toLocaleString("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"";function See({lead:e,onBack:t,fetchLeads:n,onEdit:s,onArchive:r,setSelectedLead:i,relatedActs:o}){const l=Tt(),{leadID:c}=Go(),{user:u}=Gt(),[d,h]=f.useState(e||null),[p,x]=f.useState("Overview"),[v,j]=f.useState(""),b=d?.status?.toUpperCase()==="QUALIFIED",[N,w]=f.useState(null),S=d&&u&&d.creator?.id===u.id,[_,k]=f.useState({name:"",website:"",countryCode:"",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[T,A]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[E,M]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null}),O=async()=>{try{if(e){h(e),j(e.status||"New");return}if(!c)return;const z=await se.get(`/leads/get/${c}`);h(z.data),j(z.data.status||"New"),k({name:z.data.company_name||"",website:"",countryCode:"+63",phone_number:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:z.data.territory?.id||null,assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),A({last_name:z.data.last_name||"",first_name:z.data.first_name||"",account_id:null,title:z.data.title||"",department:z.data.department||"",email:z.data.email||"",work_phone:z.data.work_phone||"",mobile_phone_1:z.data.mobile_phone_1||"",mobile_phone_2:z.data.mobile_phone_2||"",notes:"",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null}),M({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"Prospecting",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:z.data.assigned_to?.id||null,created_by:z.data.creator?.id||null})}catch(z){console.error(z)}};f.useEffect(()=>{e?(h(e),j(e.status||"New")):c&&O()},[c,e]);const I=async()=>{try{if(v==="Converted"&&d?.status?.toUpperCase()!=="QUALIFIED"){V.error("Lead must be Qualified before it can be converted.");return}const z=await se.put(`/leads/${d.id}/update/status`,{status:v});V.success("Lead status updated successfully");const Q={...d,status:z.data.status};h(Q),i&&i(Q),n&&n(),t&&t()}catch(z){console.error(z),V.error("Failed to update lead status")}},D=async z=>{const Q={..._,assigned_to:z.assigned_to?.id,billing_address:z.address,shipping_address:z.address,created_by:z.creator?.id,industry:null,name:z.company_name,phone_number:z.work_phone,status:"Prospect",territory_id:z.territory?.id,website:""};console.log("Account data: ",Q),console.log("Contact data: ",T),console.log("Deal data: ",E),console.log("Lead data: ",z);try{const Y=(await se.post("/accounts/convertedLead",Q)).data.id,re={...T,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,department:z.department,email:z.email,first_name:z.first_name,last_name:z.last_name,mobile_phone_1:z.mobile_phone_1,mobile_phone_2:z.mobile_phone_2,notes:z.notes,title:z.title,work_phone:z.work_phone},Z=(await se.post("/contacts/convertedLead",re)).data.id,ne=()=>{switch(E.stage){case"PROSPECTING":return 10;case"QUALIFICATION":return 25;case"PROPOSAL":return 60;case"NEGOTIATION":return 80;case"CLOSED_WON":return 100;case"CLOSED_LOST":return 0;default:return 0}},pe=E.amount&&E.amount!==""?parseFloat(E.amount):0,Ne={...E,account_id:Y,assigned_to:z.assigned_to?.id,created_by:z.creator?.id,primary_contact_id:Z,probability:ne(),stage:"Prospecting"},de=await se.post("/deals/convertedLead",Ne),be=await se.put(`/leads/convert/${z.id}`);i&&i(null),n(),V.success("Lead converted successfully!"),t()}catch(J){console.error("Error during conversion:",J);const Y=J.response?.data?.detail||J.message||"Failed to convert lead. Please try again.";V.error(Y)}},H=z=>{switch((z||"").toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},W=z=>z.toString().toLowerCase().replace(/\b\w/g,Q=>Q.toUpperCase());return d?a.jsx(a.Fragment,{children:a.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Lead"}),a.jsx("button",{onClick:()=>{t?t():l(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${H(d.status)}`,children:W(d.status||"New")}),a.jsx("div",{className:"flex flex-col",children:a.jsx("button",{onClick:()=>D(d),disabled:!b,title:b?"Convert Lead":"Lead must be Qualified before converting",className:`px-3 sm:px-4 py-1.5 sm:py-2 rounded-md font-medium text-xs sm:text-sm transition focus:outline-none focus:ring-2
      ${b?"bg-green-600 hover:bg-green-700 text-white focus:ring-green-400":"bg-gray-200 text-gray-400 cursor-not-allowed"}
    `,children:"Convert"})})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:S&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{s&&d&&s(d)},className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",onClick:()=>{r&&d&&r(d)},className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-4 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(z=>a.jsx("button",{onClick:()=>x(z),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${p===z?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:z},z))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[p==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Name:"}),a.jsxs("p",{children:[d.first_name," ",d.last_name||"N/A"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Job Title:"}),a.jsx("p",{children:d.title||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Department:"}),a.jsx("p",{children:d.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Territory:"}),a.jsx("p",{children:d.territory?.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:d.assigned_to?`${d.assigned_to.first_name} ${d.assigned_to.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:d.creator?`${d.creator.first_name} ${d.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Work Phone:"}),a.jsx("p",{children:d.work_phone||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 1:"}),a.jsx("p",{children:d.mobile_phone_1||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Mobile Phone 2:"}),a.jsx("p",{children:d.mobile_phone_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Source:"}),a.jsx("p",{children:d.source||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Address:"}),a.jsx("p",{children:d.address||"N/A"})]})]})}),p==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Lead Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:d.notes||"No notes available."})]})]}),p==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[o.tasks&&o.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",o.tasks.length,")"]})]}),N==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.tasks.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/tasks",{state:{taskID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||"No description"}),z.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned:"," ",z.assigned_to.first_name," ",z.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:TT(z.due_date||z.created_at)})]},`task-${Q}`))})]}),o.meetings&&o.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",o.meetings.length,")"]})]}),N==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.meetings.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/meetings",{state:{meetingID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.description||z.location||"No description"}),z.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",z.host.first_name," ",z.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:TT(z.start_time||z.created_at)})]},`meeting-${Q}`))})]}),o.calls&&o.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>w(N==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",o.calls.length,")"]})]}),N==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),N==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:o.calls.map((z,Q)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>l("/group-manager/calls",{state:{callID:z.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:z.subject||z.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:z.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:TT(z.call_time||z.created_at)})]},`call-${Q}`))})]}),(!o||(!o.tasks||o.tasks.length===0)&&(!o.meetings||o.meetings.length===0)&&(!o.calls||o.calls.length===0)&&(!o.quotes||o.quotes.length===0)&&(!o.deals||o.deals.length===0)&&(!o.contacts||o.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{d&&l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:d.title?`Call regarding ${d.title}`:`Call with ${d.first_name} ${d.last_name}`,relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assigned_to:d.assigned_to?.id?String(d.assigned_to.id):"",direction:"Outgoing",status:"Planned"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!d?.email){alert("No email address available");return}const z=encodeURIComponent(d.email),Q=encodeURIComponent(""),J=encodeURIComponent(""),Y=`mailto:${z}?subject=${Q}&body=${J}`;window.location.href=Y},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{d&&l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:d.title?`Meeting regarding ${d.title}`:`Meeting with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",status:"Planned"}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{d&&l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:d.title?`Follow up on ${d.title}`:`Follow up with ${d.first_name||""} ${d.last_name||""}`.trim(),relatedType1:"Lead",relatedTo1:String(d.id),relatedType2:null,relatedTo2:null,assignedTo:d.assigned_to?.id?String(d.assigned_to.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:v,onChange:z=>j(z.target.value),children:[a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),d?.status?.toUpperCase()==="QUALIFIED"&&a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),a.jsx("button",{onClick:I,disabled:v===d.status,className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${v===d.status?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})})}):null}const pWe=th.all(),kT=pWe.map((e,t)=>({code:`+${e.countryCallingCode}`,name:e.countryCode,id:`${e.countryCallingCode}-${e.countryCode}-${t}`})),xWe=e=>e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()),yWe=e=>{switch(e.toUpperCase()){case"NEW":return"bg-indigo-100 text-indigo-700";case"CONTACTED":return"bg-blue-100 text-blue-700";case"QUALIFIED":return"bg-green-100 text-green-700";case"CONVERTED":return"bg-emerald-100 text-emerald-700";case"LOST":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},ET={first_name:"",last_name:"",company_name:"",title:"",department:"",email:"",work_ccode:"+63",work_phone:"",m1_ccode:"+63",mobile_phone_1:"",m2_ccode:"+63",mobile_phone_2:"",address:"",notes:"",source:"",territory_id:null,lead_owner:null,status:"New"};function bWe(){const e=Tt(),{leadID:t}=Go(),{user:n}=Gt();Us();const[s,r]=f.useState(null),[i,o]=f.useState(!1),[l,c]=f.useState(null),[u,d]=f.useState(null),[h,p]=f.useState([]),[x,v]=f.useState(!1),[j,b]=f.useState(""),[N,w]=f.useState("Filter by Status"),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(ET),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState(!1),[re,we]=f.useState({}),[Z,ne]=f.useState(new Set),[pe,Ne]=f.useState(!1),[de,be]=f.useState(null);f.useRef(null);const[oe,Te]=f.useState(!1),[ue,Oe]=f.useState(null),[xe,le]=f.useState({name:"",website:"",countryCode:"+63",phone_number:"",combinedPhoneNumbers:"",billing_address:"",shipping_address:"",industry:"",status:"Prospect",territory_id:null,assigned_to:null,created_by:null}),[Fe,ke]=f.useState({last_name:"",first_name:"",account_id:null,title:"",department:"",email:"",work_phone:"",mobile_phone_1:"",mobile_phone_2:"",notes:"",assigned_to:null,created_by:null}),[He,Xe]=f.useState({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:null,created_by:null});f.useEffect(()=>{document.title="Leads | Sari-Sari CRM"},[]);const it=async()=>{try{const F=await se.get("/leads/getUsers");c(F.data)}catch(F){console.error(`Error fetching users: ${F}`)}},ze=async()=>{v(!0);try{const F=await se.get("/leads/admin/getLeads");p(F.data),console.log(F.data)}catch(F){console.error(`Error fetching leads: ${F}`)}finally{v(!1)}};f.useEffect(()=>{it(),ze()},[]),f.useEffect(()=>{if(t&&h.length>0&&!i&&!M){const F=h.find(q=>q.id===Number(t));F&&r(F)}else!t&&!s&&r(null)},[t,h,i,M]),f.useEffect(()=>{if(ue){const q=(B=>{if(!B)return{code:"+63",number:""};const ce=B.match(/^(\+\d+)\s(.+)$/);if(ce)return{code:ce[1],number:ce[2]};if(B.startsWith("+")){const De=B.match(/^(\+\d{1,3})/);if(De)return{code:De[1],number:B.substring(De[1].length).trim()}}return{code:"+63",number:B}})(ue.work_phone),fe=[];ue.work_phone&&fe.push(`Work: ${ue.work_phone}`),ue.mobile_phone_1&&fe.push(`Mobile 1: ${ue.mobile_phone_1}`),ue.mobile_phone_2&&fe.push(`Mobile 2: ${ue.mobile_phone_2}`);const te=fe.length>0?fe.join(" | "):"";le({name:ue.company_name||"",website:"",countryCode:q.code,phone_number:q.number,combinedPhoneNumbers:te,billing_address:ue.address||"",shipping_address:ue.address||"",industry:"",status:"Prospect",territory_id:ue.assigned_to?.territory?.id||null,assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),ke({last_name:ue.last_name||"",first_name:ue.first_name||"",account_id:null,title:ue.title||"",department:ue.department||"",email:ue.email||"",work_phone:ue.work_phone||"",mobile_phone_1:ue.mobile_phone_1||"",mobile_phone_2:ue.mobile_phone_2||"",notes:ue.notes||"",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null}),Xe({name:"Converted from Lead",account_id:null,primary_contact_id:null,stage:"PROSPECTING",probability:10,amount:0,currency:"PHP",description:"Initial deal from lead conversion.",assigned_to:ue.assigned_to?.id||null,created_by:ue.creator?.id||null})}},[ue]);const at=F=>b(F.target.value),Ve=f.useMemo(()=>{const F=j.trim().toLowerCase(),q=N.trim().toUpperCase();let fe=h.filter(te=>{const B=te?.status!=="Inactive",ce=[te?.first_name,te?.last_name,te?.company_name,te?.title,te?.email,te?.work_phone,te?.assigned_to?`${te.assigned_to.first_name} ${te.assigned_to.last_name}`:""],De=F===""||ce.some(K=>K==null||K===""?!1:K.toString().toLowerCase().includes(F));let U=!1;return q==="FILTER BY STATUS"?U=(te.status?te.status.toUpperCase():"")!=="CONVERTED":U=(te.status?te.status.toUpperCase():"")===q,De&&U&&B});return fe.sort((te,B)=>{const ce=new Date(te.created_at).getTime();return new Date(B.created_at).getTime()-ce}),fe},[h,j,N]),Ze=Math.max(1,Math.ceil(Ve.length/k)||1);f.useEffect(()=>{_(1)},[j,N,k]),f.useEffect(()=>{_(F=>{const q=Math.max(1,Math.ceil(Ve.length/k)||1);return F>q?q:F})},[Ve.length,k]);const Je=f.useMemo(()=>{const F=(S-1)*k;return Ve.slice(F,F+k)},[Ve,S,k]),Ue=()=>_(F=>Math.max(F-1,1)),_e=()=>_(F=>Math.min(F+1,Ze)),he=f.useCallback(async F=>{try{const q=await se.get(`/activities/lead/${F}`);we(q.data&&typeof q.data=="object"?q.data:{})}catch(q){console.error(q),q.response?.status===404&&(console.warn("No activities found for this account."),we({}))}},[]),ie=F=>{r(F),he(F.id)},G=()=>{r(null),t&&e("/admin/leads",{replace:!0})},X=()=>{o(!1),E(ET),O(!1),D(null),W(!1),d(null),sessionStorage.removeItem("editLeadData")},ve=F=>{F.target.id==="modalBackdrop"&&X()},$e=()=>{E(ET),O(!1),D(null),d(null),o(!0)},Le=F=>{if(!F){console.error("handleEditClick: lead is null or undefined");return}console.log("handleEditClick called with lead:",F),console.log("Current state - leadID:",t,"selectedLead:",s,"showModal:",i);const q=De=>{if(!De)return{code:"+63",number:""};const U=De.match(/^(\+\d+)\s(.+)$/);return U?{code:U[1],number:U[2]}:{code:"+63",number:De}},fe=q(F.work_phone),te=q(F.mobile_phone_1),B=q(F.mobile_phone_2);let ce="";if(F.assigned_to){ce=String(F.assigned_to.id);const De=l?.find(U=>U.id===F.assigned_to.id);d(De)}E({first_name:F.first_name||"",last_name:F.last_name||"",company_name:F.company_name||"",title:F.title||"",department:F.department||"",email:F.email||"",work_ccode:fe.code,work_phone:fe.number,m1_ccode:te.code,mobile_phone_1:te.number,m2_ccode:B.code,mobile_phone_2:B.number,address:F.address||"",notes:F.notes||"",source:F.source||"",territory_id:F.territory?.id||null,lead_owner:ce,status:F.status||"New"}),O(!0),D(F.id),s?(console.log("Coming from detail view - closing detail modal and showing edit form"),r(null),o(!0)):(console.log("Already in list view - showing modal"),o(!0))},me=F=>{if(!F){console.error("handleArchive: lead is null or undefined");return}const q=`${F.first_name} ${F.last_name}`||"this lead";Q({title:"Archive Lead",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:q}),"? You can restore it later if needed."]}),confirmLabel:"Archive Lead",cancelLabel:"Cancel",variant:"archive",action:{type:"archive",targetId:F.id,name:q}})},Re=F=>{const q=Je.find(fe=>fe.id===F);q&&q.creator?.id===n?.id&&ne(fe=>{const te=new Set(fe);return te.has(F)?te.delete(F):te.add(F),te})},qe=()=>{const F=Je.filter(q=>q.creator?.id===n?.id);Z.size===F.length&&F.length>0?ne(new Set):ne(new Set(F.map(q=>q.id)))},rt=()=>{if(Z.size===0)return;const F=Z.size;Q({title:"Archive Leads",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:F})," lead",F!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${F} Lead${F!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(Z),count:F}})},st=F=>{const{name:q,value:fe}=F.target;if(E(te=>({...te,[q]:fe})),q==="lead_owner"){const te=l.find(B=>B.id===parseInt(fe));d(te)}},[Ie,ot]=f.useState(!1),Ct=F=>{if(F.preventDefault(),ot(!0),!A.last_name?.trim()){V.error("Last name is required.");return}if(!A.company_name?.trim()){V.error("Company is required.");return}if(!A.title?.trim()){V.error("Job title is required.");return}if(!A.email?.trim()){V.error("Email is required.");return}if(!A.email.includes("@")){V.error("Email must contain '@'.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A.email)){V.error("Please enter a valid email address with a dot in the domain.");return}if(!A.lead_owner){V.error("Please assign a lead owner.");return}const fe={...A,territory_id:A.territory_id?parseInt(A.territory_id):null,lead_owner:parseInt(A.lead_owner),work_phone:`${A.work_ccode} ${A.work_phone}`,mobile_phone_1:`${A.m1_ccode} ${A.mobile_phone_1}`,mobile_phone_2:`${A.m2_ccode} ${A.mobile_phone_2}`},te=M&&I?"update":"create",B=`${A.first_name} ${A.last_name}`;Q({title:te==="create"?"Confirm New Lead":"Confirm Update",message:te==="create"?a.jsxs("span",{children:["Are you sure you want to create a new lead for"," ",a.jsx("span",{className:"font-semibold",children:B}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:B}),"?"]}),confirmLabel:te==="create"?"Create Lead":"Update Lead",cancelLabel:"Cancel",variant:"primary",action:{type:te,payload:fe,targetId:I||null,name:B}})},kt=async()=>{if(!z?.action){Q(null);return}const{action:F}=z,{type:q,payload:fe,targetId:te,name:B,targetIds:ce,count:De}=F;console.log(fe),Y(!0);try{if(q==="create")W(!0),await se.post("/leads/create",fe),V.success(`Lead "${B}" created successfully.`),X(),await ze();else if(q==="update"){if(!te)throw new Error("Missing lead identifier for update.");W(!0);const U=await se.put(`/leads/${te}`,fe);V.success(`Lead "${B}" updated successfully.`),s&&s.id===te&&r(null),X(),await ze()}else if(q==="archive"){if(!te)throw new Error("Missing lead identifier for archiving.");const U=s?.id;be(te),await se.put(`/leads/${te}`,{status:"Inactive"}),V.success(`Lead "${B}" archived successfully.`),await ze(),U===te&&r(null)}else if(q==="bulk-archive"){if(!ce||ce.length===0)throw new Error("Missing lead identifiers for bulk archiving.");Ne(!0),await Promise.all(ce.map(U=>se.put(`/leads/${U}`,{status:"Inactive"}))),V.success(`${De} lead${De!==1?"s":""} archived successfully.`),ne(new Set),await ze(),r(null)}}catch(U){console.error(U);const K=q==="create"?"Failed to create lead. Please review the details and try again.":q==="update"?"Failed to update lead. Please review the details and try again.":q==="bulk-archive"?"Failed to archive leads. Please try again.":"Failed to archive lead. Please try again.",je=U.response?.data?.detail||K;V.error(je)}finally{(q==="create"||q==="update")&&W(!1),q==="archive"&&be(null),q==="bulk-archive"&&Ne(!1),q!=="edit"&&(Y(!1),Q(null))}},At=()=>{J||Q(null)},jt=h.filter(F=>F.status==="New").length,ge=h.filter(F=>F.status==="Contacted").length,ye=h.filter(F=>F.status==="Qualified").length,Pe=h.filter(F=>F.status==="Converted").length,Ce=h.filter(F=>F.status==="Lost").length,Qe=[{title:"New",value:jt,icon:Xa,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Contacted",value:ge,icon:Mt,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualified",value:ye,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Converted",value:Pe,icon:Jl,color:"text-emerald-600",bgColor:"bg-emerald-100"},{title:"Lost",value:Ce,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[x&&a.jsx(Wt,{message:"Loading leads..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(Xa,{className:"mr-2 text-blue-600"}),"Leads"]}),a.jsxs("div",{className:"flex justify-center lg:justify-end gap-3 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>{V.info("Download functionality coming soon")},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Wo,{className:"mr-2"})," Download"]}),a.jsxs("button",{onClick:()=>{$e(),ot(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Lead"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Qe.map(F=>a.jsx(wWe,{...F},F.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search leads",value:j,onChange:at,className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:N,onChange:F=>w(F.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),a.jsx("option",{value:"New",children:"New"}),a.jsx("option",{value:"Contacted",children:"Contacted"}),a.jsx("option",{value:"Qualified",children:"Qualified"}),a.jsx("option",{value:"Converted",children:"Converted"}),a.jsx("option",{value:"Lost",children:"Lost"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:Z.size>0&&Z.size===Je.filter(F=>F.creator?.id===n?.id).length&&Je.filter(F=>F.creator?.id===n?.id).length>0,onChange:qe,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Name"}),a.jsx("th",{className:"py-3 px-4",children:"Company"}),a.jsx("th",{className:"py-3 px-4",children:"Job Title"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:Z.size>0&&a.jsx("button",{onClick:rt,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected leads",disabled:pe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:Ve.length>0?Je.map(F=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",children:n?.id===F.creator?.id&&a.jsx("input",{type:"checkbox",checked:Z.has(F.id),onChange:q=>{q.stopPropagation(),Re(F.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ie(F),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:[F.first_name," ",F.last_name]})}),a.jsx("td",{className:"py-3 px-4 align-top",onClick:()=>ie(F),children:a.jsx("div",{className:"font-medium text-gray-800 text-sm leading-tight",children:F.company_name||"--"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.title||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.email||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",onClick:()=>ie(F),children:F.assigned_to?`${F.assigned_to.first_name} ${F.assigned_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",onClick:()=>ie(F),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${yWe(F.status||"New")}`,children:xWe(F.status||"New")})}),a.jsx("td",{className:"py-3 px-4"})]},F.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:8,children:"No leads found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:Ve.length,pageSize:k,currentPage:S,onPrev:Ue,onNext:_e,onPageSizeChange:T,label:"leads"}),i&&a.jsx("div",{id:"modalBackdrop",onClick:ve,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:F=>F.stopPropagation(),children:[a.jsx("button",{onClick:()=>{X(),ot(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:M?"Edit Lead":"Add New Lead"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"First Name"}),a.jsx("input",{type:"text",name:"first_name",value:A.first_name,onChange:st,placeholder:"Joe",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Last Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Smith",name:"last_name",value:A.last_name,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                      ${Ie&&!A.last_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Company ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Company",name:"company_name",value:A.company_name,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.company_name?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                  focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Job Title",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"ABC Agenda",name:"title",value:A.title,onChange:st,required:!0,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.title?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Department"}),a.jsx("input",{type:"text",placeholder:"Sales",name:"department",value:A.department,onChange:st,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Email",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",placeholder:"abc@gmail.com",name:"email",value:A.email,onChange:st,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border
                       ${Ie&&!A.email?.trim()?"border-red-400 focus:ring-red-400":"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"}
                      focus:ring-2`})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Work Phone"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"work_ccode",value:A.work_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kT.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"work_phone",value:A.work_phone,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 1"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m1_ccode",value:A.m1_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kT.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_1",value:A.mobile_phone_1,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Mobile Phone 2"}),a.jsxs("div",{className:"w-full border border-gray-300 rounded-md focus-within:ring-2 focus-within:ring-blue-400 outline-none flex flex-row gap-1",children:[a.jsx("select",{name:"m2_ccode",value:A.m2_ccode,onChange:st,className:"outline-none cursor-pointer py-1.5 px-2 border-r border-gray-400 text-sm",children:kT.map(F=>a.jsx("option",{value:F.code,children:F.code},F.id))}),a.jsx("input",{type:"text",placeholder:"9----------",name:"mobile_phone_2",value:A.mobile_phone_2,onChange:st,className:"w-full outline-none px-2 py-1.5 text-sm"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Address"}),a.jsx("input",{type:"text",name:"address",value:A.address,onChange:st,placeholder:"Street No., Street Name, City, State/Province, Postal Code",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none"})]}),a.jsxs("div",{className:"flex flex-col col-span-1 md:col-span-2 lg:col-span-1",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:`w-full rounded-lg ${Ie&&!A.lead_owner?"border border-red-400":"border border-gray-300"}`,children:a.jsx(jWe,{items:Array.isArray(l)?l:[],value:A.lead_owner??"",placeholder:"Search a user...",getLabel:F=>`${F.first_name} ${F.last_name}`,onChange:F=>{const q=l.find(te=>String(te.id)===String(F));d(q);let fe=null;q&&q.assigned_territory&&q.assigned_territory.length===1&&(fe=q.assigned_territory[0].id),E(te=>({...te,lead_owner:F,territory_id:fe}))}})})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Territory"}),a.jsxs("select",{name:"territory_id",value:A.territory_id||"",onChange:st,disabled:!u||!u.assigned_territory||u.assigned_territory.length===0,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 disabled:text-gray-500",children:[a.jsx("option",{value:"",disabled:!0,children:u?u.assigned_territory&&u.assigned_territory.length>0?"Select Territory":"No territories assigned to this user":"Select a user first"}),u&&u.assigned_territory&&u.assigned_territory.map(F=>a.jsx("option",{value:F.id,children:F.name},F.id))]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Source"}),a.jsxs("select",{className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none",defaultValue:"",name:"source",value:A.source,onChange:st,children:[a.jsx("option",{value:"",disabled:!0,children:"Select Source"}),a.jsx("option",{value:"Website",children:"Website"}),a.jsx("option",{value:"Referral",children:"Referral"}),a.jsx("option",{value:"Cold call",children:"Cold call"}),a.jsx("option",{value:"Event",children:"Event"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"flex flex-col col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Notes"}),a.jsx("textarea",{placeholder:"Additional details...",name:"notes",value:A.notes,onChange:st,rows:3,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none resize-none"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 mt-4 col-span-1 sm:col-span-2 lg:col-span-3",children:[a.jsx("button",{type:"button",onClick:()=>{X(),ot(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:H||J,children:"Cancel"}),a.jsx("button",{type:"submit",onClick:Ct,className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:H||J,children:H||J?"Processing...":M?"Update Lead":"Save Lead"})]})]})]})}),z&&a.jsx(vWe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,cancelLabel:z.cancelLabel,variant:z.variant,onConfirm:kt,onCancel:At,loading:J}),s&&!i&&!M&&a.jsx(See,{relatedActs:re,lead:s,onBack:G,fetchLeads:ze,setSelectedLead:r,onEdit:Le,onArchive:me})]})}function vWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function wWe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function jWe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200}){const[l,c]=f.useState(!1),[u,d]=f.useState(""),h=f.useRef(null),p=e.find(j=>String(j.id)===String(t)),x=p?s(p):"",v=f.useMemo(()=>{const j=u.trim().toLowerCase();return(j?e.filter(N=>(s(N)||"").toLowerCase().includes(j)):e).slice(0,o)},[e,u,s,o]);return f.useEffect(()=>{const j=b=>{h.current&&!h.current.contains(b.target)&&c(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),f.useEffect(()=>{l||d("")},[l]),a.jsxs("div",{ref:h,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:l?u:x,placeholder:r,onFocus:()=>!i&&c(!0),onChange:j=>{d(j.target.value),l||c(!0)},className:"w-full rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"}),l&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:v.length>0?v.map(j=>{const b=String(j.id),N=s(j),w=String(t)===b;return a.jsx("button",{type:"button",onClick:()=>{n(b),c(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${w?"bg-blue-50":""}`,children:N||"--"},b)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}const Zb={accountName:"Josh Inc.",companyNumber:"09135007323",companyWebsite:"joshenc.com",industry:"Agriculture",billingAddress:"#1 Pilar Las Pinas City",shippingAddress:"#3 BNW ASS-CBN",firstName:"Josh",lastName:"Vergara",department:"Administration",title:"CEO",workPhone:"09253677323",email:"josh@joshinc.com",mobile1:"09253677323",mobile2:"0907452874",dealName:"Josh Deal",dealAmount:"60.00",stage:"Prospecting",territory:"Cavite",description:"Initial lead conversion deal.",dealTitle:"New Client Agreement"},ts=({label:e,value:t,name:n,className:s=""})=>a.jsxs("div",{className:`flex flex-col ${s}`,children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1",children:e}),a.jsx("input",{type:"text",name:n,defaultValue:t,readOnly:!0,className:"w-full border border-gray-300 p-2 rounded-lg text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none bg-gray-50"})]}),NWe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Account Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(ts,{label:"Company Number",name:"companyNumber",value:e.companyNumber}),a.jsx(ts,{label:"Company Website",name:"companyWebsite",value:e.companyWebsite}),a.jsx(ts,{label:"Industry",name:"industry",value:e.industry})]}),a.jsx(ts,{label:"Billing Address",name:"billingAddress",value:e.billingAddress,className:"col-span-3"}),a.jsx(ts,{label:"Shipping Address",name:"shippingAddress",value:e.shippingAddress,className:"col-span-3"})]}),CWe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ts,{label:"First Name",name:"firstName",value:e.firstName}),a.jsx(ts,{label:"Last Name",name:"lastName",value:e.lastName}),a.jsx(ts,{label:"Department",name:"department",value:e.department}),a.jsx(ts,{label:"Title",name:"title",value:e.title}),a.jsx(ts,{label:"Work Phone",name:"workPhone",value:e.workPhone}),a.jsx(ts,{label:"Email",name:"email",value:e.email}),a.jsx(ts,{label:"Mobile Number 1",name:"mobile1",value:e.mobile1}),a.jsx(ts,{label:"Mobile Number 2",name:"mobile2",value:e.mobile2})]})]}),SWe=({data:e})=>a.jsxs("div",{className:"space-y-6 p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Deal"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ts,{label:"Deal Name",name:"dealName",value:e.dealName}),a.jsxs("div",{className:"flex",children:[a.jsx(ts,{label:"Deal Amount",name:"dealAmount",value:e.dealAmount,className:"flex-grow"}),a.jsx("div",{className:"flex flex-col justify-end ml-1",children:a.jsx("span",{className:"text-sm font-medium text-gray-600 border border-gray-300 bg-gray-100 p-2 rounded-r-lg h-10 flex items-center",children:"PHP"})})]}),a.jsx(ts,{label:"Stage",name:"stage",value:e.stage}),a.jsx(ts,{label:"Territory",name:"territory",value:e.territory})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(ts,{label:"Description",name:"description",value:e.description}),a.jsx(ts,{label:"Title",name:"dealTitle",value:e.dealTitle})]})]});function _We({isOpen:e,onClose:t}){const[n,s]=f.useState(1),r=3;if(!e)return null;const i=()=>{n<r?s(n+1):(t(),s(1))},o=()=>{n>1&&s(n-1)},l=[{id:1,name:"Account"},{id:2,name:"Contact"},{id:3,name:"Deal"}],c=()=>{switch(n){case 1:return a.jsx(NWe,{data:Zb});case 2:return a.jsx(CWe,{data:Zb});case 3:return a.jsx(SWe,{data:Zb});default:return null}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-[800px] h-[600px] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Convert Lead"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-1",children:Zb.accountName})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition",children:a.jsx(LN,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"flex border-b border-gray-200 bg-gray-50",children:l.map(u=>a.jsx("button",{onClick:()=>s(u.id),className:`flex-1 py-3 px-6 text-sm font-medium transition ${n===u.id?"bg-white text-gray-800 border-b-2 border-indigo-600":"bg-gray-600 text-white hover:bg-gray-700"}`,children:u.name},u.id))}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c()}),a.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end space-x-3",children:[n>1&&a.jsx("button",{onClick:o,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 flex items-center",children:"Cancel"}),n<r?a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Next"}):a.jsx("button",{onClick:i,className:"px-5 py-2 text-white bg-gray-900 rounded-xl hover:bg-gray-800 transition",children:"Convert"})]})]})})}function _ee({selectedDeal:e,onStatusUpdate:t,onClose:n}){const[s,r]=f.useState(e?.stage||""),[i,o]=f.useState(!1),l=Tt(),{user:c}=Gt();f.useEffect(()=>{console.log("Group Manager DealsInformation mounted sahdksd",e),console.log("User sadad:",c)},[e,c]);const u=[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}];f.useEffect(()=>{e?.stage&&r(e.stage)},[e]);const d=async()=>{if(!e||!e.id){V.error("No deal selected");return}if(!s||s===e.stage){V.info("Please select a different stage");return}const h=e.id;o(!0);try{await se.put(`/deals/admin/${h}`,{stage:s}),n&&n(),t&&setTimeout(async()=>{await t(!0)},100),setTimeout(()=>{V.success("Deal status updated successfully")},300)}catch(p){console.error(p);const x=p.response?.data?.detail||"Failed to update deal status";V.error(x)}finally{o(!1)}};return e?a.jsxs("div",{className:"space-y-4 font-inter text-[13px] w-full sm:w-[85%] mx-auto flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:e.name?`Call regarding: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assigned_to:e.assigned_deals?.id?String(e.assigned_deals.id):"",assignedTo:e.assigned_to?.id?String(e.assigned_to.id):""}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{type:"button",onClick:()=>{if(!e.contact?.email){alert("No email address available");return}const h=encodeURIComponent(e.contact.email),p=encodeURIComponent(""),x=encodeURIComponent(""),v=`mailto:${h}?subject=${p}&body=${x}`;window.location.href=v},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:e.name?`Meeting: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):""}}})},children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>{const h=e.account?.id||e.account_id;l("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:e.name?`Task for: ${e.name}`:"",relatedType1:"Account",relatedTo1:h,relatedType2:"Deal",relatedTo2:e.id,contactId:e.contact?.id,assignedTo:e.assigned_deals?.id?String(e.assigned_deals.id):"",priority:"NORMAL",status:"Not Started"}}})},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Promote Deal"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-gray-300 focus:outline-none",value:s,onChange:h=>r(h.target.value),disabled:i||e.created_by!==c?.id&&e.assigned_to!==c?.id,children:u.map(h=>a.jsx("option",{value:h.value,children:h.label},h.value))}),(e.created_by===c?.id||e.assigned_to===c?.id)&&a.jsx("button",{className:"w-full bg-gray-900 text-white py-1.5 rounded-md text-sm hover:bg-gray-800 transition disabled:opacity-50 disabled:cursor-not-allowed",onClick:d,disabled:i||!s||s===e.stage,children:i?"Updating...":"Update"})]})]}):null}function Aee({selectedDeal:e,relatedActs:t={},show:n,onClose:s,activeTab:r,setActiveTab:i,onEdit:o,onDelete:l,onStatusUpdate:c}){const u=Tt(),[d]=Us(),h=d.get("id"),[p,x]=f.useState(e||null),[v,j]=f.useState(r||"Overview"),[b,N]=f.useState(null),{user:w}=Gt(),{comments:S,addComment:_,refresh:k}=kn({relatedType:"deal",relatedId:p?.id});f.useEffect(()=>{p?.id&&k()},[p?.id,k]);const T=r!==void 0?r:v,A=(()=>{const O=String(w?.role||"").toLowerCase();return O==="ceo"||O==="admin"?"admin":O==="manager"?"manager":O==="sales"?"sales":O==="group manager"||O==="group_manager"||O==="group-manager"?"group-manager":"guest"})();if(f.useEffect(()=>{(async()=>{if(h&&!e)try{const H=((await se.get("/deals/admin/fetch-all")).data||[]).find(W=>W.id===parseInt(h));if(H){const W={...H,amount:typeof H.amount=="number"?H.amount:parseFloat(H.amount||0),probability:H.probability||0};x(W)}else console.warn("Deal not found with ID:",h)}catch(I){console.error("Error fetching deal:",I)}})()},[h,e]),!p&&!h||h&&!p)return null;const E=O=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700";function M(O){return O?new Date(O).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):""}return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] font-inter p-2 sm:p-4 overflow-x-hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full sm:max-w-6xl max-h-[90vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsx("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3",children:a.jsxs("div",{className:"flex items-start justify-between w-full",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Deal"}),a.jsx("div",{className:"flex items-center gap-2 sm:gap-3",children:a.jsx("button",{onClick:()=>{s?s():u(-1)},className:"text-gray-400 hover:text-white mt-1 cursor-pointer",children:a.jsx(ea,{size:25})})})]})}),a.jsx("div",{className:"p-4 lg:p-2 lg:mx-7",children:a.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-2 sm:gap-3 mt-3",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 lg:gap-1",children:[a.jsx("h2",{className:"text-xl lg:text-xl font-semibold text-gray-800 break-words",children:p.name}),a.jsx("span",{className:`text-xs sm:text-sm inline-block font-medium px-1.5 py-0.5 sm:px-3 sm:py-1 rounded-full break-words ${E(p.stage)}`,children:p.stage})]}),a.jsxs("p",{className:"text-gray-500 text-sm break-words",children:["Created on ",M(p.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("h2",{className:"text-xl sm:text-2xl font-bold text-gray-600 break-words",children:[" ",p.amount?p.amount.toLocaleString():"0"]}),a.jsx("div",{className:"w-full sm:w-40 bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${p.probability}%`}})}),a.jsxs("p",{className:"text-xs text-gray-500 break-words",children:[" ",p.probability,"% Complete "]}),p.deal_creator?.id===w?.id&&a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-3",children:[a.jsxs("button",{type:"button",onClick:()=>{o&&o(p)},className:"inline-flex items-center justify-center bg-blue-500 text-white px-3 sm:px-4 py-1.5 sm:py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",children:[a.jsx(hn,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),a.jsxs("button",{type:"button",onClick:()=>{l&&l(p)},className:"inline-flex items-center justify-center px-3 sm:px-4 py-1.5 sm:py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",children:[a.jsx(Zt,{className:"mr-1 sm:mr-2",size:16}),a.jsx("span",{className:"hidden sm:inline",children:"Archive"})]})]})]})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes","Activities"].map(O=>a.jsx("button",{onClick:()=>{i?i(O):j(O)},className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                ${T===O?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:O},O))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[T==="Overview"&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 sm:gap-6 w-full",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm pb-20 break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 sm:mb-3",children:"Deal Information"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Description:"})," ",p.description]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{className:"text-sm sm:text-sm text-gray-700 mb-2 py-5 break-words",children:[a.jsx("strong",{children:"Expected Close Date:"})," ",p.close_date]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("div",{className:"mt-4 py-3 w-full",children:[a.jsxs("div",{className:"relative flex flex-col w-full",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between w-full",children:(()=>{const O=(p?.stage||"PROSPECTING").toUpperCase(),D=(W=>W==="PROSPECTING"?0:W==="QUALIFICATION"?1:W==="PROPOSAL"?2:W==="NEGOTIATION"?3:W==="CLOSED_WON"||W==="CLOSED_LOST"?4:-1)(O);return[0,1,2,3,4].map(W=>D===W?"orange":D>W?"green":"gray").map((W,z)=>a.jsxs(bt.Fragment,{children:[a.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full border-2 ${W==="green"?"bg-green-500 border-green-500":W==="orange"?"bg-orange-400 border-orange-400":"bg-gray-300 border-gray-300"}`}),z<4&&a.jsx("div",{className:"flex-grow h-1 bg-gray-200 mx-1 min-w-0"})]},z))})()}),a.jsx("div",{className:"flex justify-between mt-8 gap-2 text-[9px] lg:text-[9px] sm:text-xs text-gray-600 w-full",children:["Prospecting","Qualification","Proposal","Negotiation","Closed"].map((O,I)=>a.jsx("span",{className:"text-center flex-1 break-words",children:O},I))})]}),a.jsx("p",{className:"text-sm text-orange-600 font-medium mt-6 text-center break-words",children:p.stage})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm break-words",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"text-sm sm:text-sm text-gray-700 space-y-3",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Account:"})," ",p.account?.name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Primary Contact:"})," ",p.contact?.first_name," ",p.contact?.last_name]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",p.contact?.work_phone]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",p.contact?.email]}),a.jsx("div",{className:"h-px bg-gray-200 w-full"}),a.jsxs("p",{children:[a.jsx("strong",{children:"Assigned To:"})," ",p.assigned_deals?.first_name," ",p.assigned_deals?.last_name]})]})]})]}),T==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Deal Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:p.description||"No notes available."})]}),a.jsx(Tn,{comments:S,onAddComment:_})]}),T==="Activities"&&a.jsxs("div",{className:"space-y-2 w-full h-full max-h-[50dvh] overflow-y-auto bg-gray-50 p-2 hide-scrollbar rounded-lg border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words border-b border-gray-300 py-2",children:"Related Activities"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[t.tasks&&t.tasks.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="tasks"?null:"tasks"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Yt,{className:"text-blue-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Tasks (",t.tasks.length,")"]})]}),b==="tasks"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="tasks"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.tasks.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/tasks`,{state:{taskID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-blue-600 mt-1",children:a.jsx(Yt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Task"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||"No description"}),O.assigned_to&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Assigned: ",O.assigned_to.first_name," ",O.assigned_to.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.due_date||O.created_at)})]},`task-${I}`))})]}),t.meetings&&t.meetings.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="meetings"?null:"meetings"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"text-green-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Meetings (",t.meetings.length,")"]})]}),b==="meetings"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="meetings"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.meetings.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/meetings`,{state:{meetingID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-green-600 mt-1",children:a.jsx(Dt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Meeting"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.description||O.location||"No description"}),O.host&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Host: ",O.host.first_name," ",O.host.last_name]})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.start_time||O.created_at)})]},`meeting-${I}`))})]}),t.calls&&t.calls.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="calls"?null:"calls"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mt,{className:"text-purple-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Calls (",t.calls.length,")"]})]}),b==="calls"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="calls"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.calls.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/calls`,{state:{callID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-purple-600 mt-1",children:a.jsx(Mt,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:O.subject||O.title||"Call"}),a.jsx("p",{className:"text-gray-500 break-words text-xs",children:O.direction||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.call_time||O.created_at)})]},`call-${I}`))})]}),t.quotes&&t.quotes.length>0&&a.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white overflow-hidden",children:[a.jsxs("button",{type:"button",onClick:()=>N(b==="quotes"?null:"quotes"),className:"w-full flex items-center justify-between p-3 hover:bg-gray-50 transition cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ra,{className:"text-orange-600"}),a.jsxs("span",{className:"font-semibold text-gray-700",children:["Quotes (",t.quotes.length,")"]})]}),b==="quotes"?a.jsx(Lt,{className:"text-gray-500"}):a.jsx(Ot,{className:"text-gray-500"})]}),b==="quotes"&&a.jsx("div",{className:"border-t border-gray-200 p-2 space-y-2 max-h-60 overflow-y-auto hide-scrollbar",children:t.quotes.map((O,I)=>a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start border border-gray-100 rounded-lg p-3 bg-gray-50 w-full break-words cursor-pointer",onClick:()=>u(`/${A}/quotes`,{state:{quoteID:O.id}}),children:[a.jsxs("div",{className:"flex gap-3 mb-2 sm:mb-0 flex-1 min-w-0",children:[a.jsx("div",{className:"text-orange-600 mt-1",children:a.jsx(ra,{size:20})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-blue-600 break-words text-sm",children:(O.quote_id?O.quote_id.replace(/Q(\d+)-\d+-/,"Q$1-"):"--")||"Quote"}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:O.status||""})]})]}),a.jsx("p",{className:"text-xs text-gray-500 break-words",children:M(O.presented_date)||""})]},`quote-${I}`))})]}),(!t||(!t.tasks||t.tasks.length===0)&&(!t.meetings||t.meetings.length===0)&&(!t.calls||t.calls.length===0)&&(!t.quotes||t.quotes.length===0)&&(!t.deals||t.deals.length===0)&&(!t.contacts||t.contacts.length===0))&&a.jsx("div",{className:"text-center py-8 text-gray-500",children:a.jsx("p",{children:"No related activities found for this account."})})]})]}),T==="Edit"&&a.jsxs("div",{className:"mt-4 space-y-4 w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Edit Deal"}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 sm:p-5 shadow-sm w-full",children:[a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Deal Name"}),a.jsx("input",{type:"text",className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.name})]}),a.jsxs("label",{className:"block mb-3 break-words",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Description"}),a.jsx("textarea",{className:"mt-1 block w-full border border-gray-200 rounded-md px-3 py-2 text-sm h-24 resize-y focus:outline-none focus:ring-2 focus:ring-gray-200",defaultValue:p.description})]}),a.jsx("button",{className:"bg-gray-900 text-white px-4 py-2 rounded-md hover:bg-gray-800",children:"Save Changes"})]})]})]}),a.jsx("div",{className:"w-full lg:w-auto",children:a.jsx(_ee,{selectedDeal:p,onStatusUpdate:c,onClose:s})})]})]})]})})}const AWe=10;function TWe(){f.useEffect(()=>{document.title="Deals | Sari-Sari CRM"},[]);const e=Tt(),t=Jt(),{user:n}=Gt(),[s,r]=f.useState(""),[i,o]=f.useState("Filter by Stage"),[l,c]=f.useState("Filter by Owner"),[u,d]=f.useState(null),[h,p]=f.useState("Overview"),[x,v]=f.useState(!1),[j,b]=f.useState(null),[N,w]=f.useState(!1),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(!1),[M,O]=f.useState(null),[I,D]=f.useState(!1),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState([]),[re,we]=f.useState([]),[Z,ne]=f.useState([]),[pe,Ne]=f.useState({}),[de,be]=f.useState(null),[oe,Te]=f.useState(new Set),[ue,Oe]=f.useState(!1);f.useEffect(()=>{const U=t.state,K=U?.dealID;if(K&&!U?.openDealModal){be(K),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(de&&j?.length>0&&!N){const U=j.find(K=>K.id===de);U?d(U):V.error("Deal not found."),be(null)}},[de,j,N]);const[xe,le]=f.useState({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),[Fe,ke]=f.useState(null),[He,Xe]=f.useState(null),it="dealDraft:group-manager/deals",ze=3600*1e3,at=f.useRef(!1);f.useEffect(()=>{if(!at.current){at.current=!0;try{const U=sessionStorage.getItem(it);if(!U)return;const K=JSON.parse(U);if(typeof K?.ts=="number"&&Date.now()-K.ts>ze){sessionStorage.removeItem(it);return}if(K?.returnTo&&K.returnTo!==t.pathname)return;K?.dealForm&&typeof K.dealForm=="object"&&le(K.dealForm),typeof K?.isEditing=="boolean"&&W(K.isEditing),K?.currentDealId!==void 0&&Q(K.currentDealId),v(!0),sessionStorage.removeItem(it)}catch{sessionStorage.removeItem(it)}}},[t.pathname]);const Ve=f.useCallback(()=>{try{sessionStorage.setItem(it,JSON.stringify({ts:Date.now(),returnTo:t.pathname,dealForm:xe,isEditing:H,currentDealId:z}))}catch{}},[it,t.pathname,xe,H,z]),Ze=f.useCallback(()=>{Ve(),window.open("/group-manager/accounts?openModal=1","_blank","noopener,noreferrer")},[Ve]),Je=f.useCallback(()=>{Ve(),window.open("/group-manager/contacts?openModal=1","_blank","noopener,noreferrer")},[Ve]),Ue={"Prospecting Stage":"PROSPECTING","Qualification Stage":"QUALIFICATION","Proposal Stage":"PROPOSAL","Negotiation Stage":"NEGOTIATION","Closed Won Stage":"CLOSED_WON","Closed Lost Stage":"CLOSED_LOST","Closed Cancelled Stage":"CLOSED_CANCELLED"},_e=U=>({PROSPECTING:"Prospecting",QUALIFICATION:"Qualification",PROPOSAL:"Proposal",NEGOTIATION:"Negotiation",CLOSED_WON:"Closed Won",CLOSED_LOST:"Closed Lost",CLOSED_CANCELLED:"Closed Cancelled"})[U]||U||"--",he=U=>({PROSPECTING:"bg-blue-100 text-blue-700",QUALIFICATION:"bg-yellow-100 text-yellow-700",PROPOSAL:"bg-orange-100 text-orange-700",NEGOTIATION:"bg-purple-100 text-purple-700",CLOSED_WON:"bg-green-100 text-green-700",CLOSED_LOST:"bg-red-100 text-red-700",CLOSED_CANCELLED:"bg-red-100 text-red-700"})[U]||"bg-gray-100 text-gray-700",ie=U=>{const K=me?.find(je=>je.id===U);K&&K.deal_creator?.id===n?.id&&Te(je=>{const Be=new Set(je);return Be.has(U)?Be.delete(U):Be.add(U),Be})},G=()=>{const U=me?.filter(K=>K.deal_creator?.id===n?.id)||[];oe.size===U.length&&U.length>0?Te(new Set):Te(new Set(U.map(K=>K.id)))},X=()=>{if(oe.size===0)return;const U=oe.size;O({title:"Archive Deals",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:U})," deal",U!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${U} Deal${U!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-archive",targetIds:Array.from(oe),count:U}})},ve=f.useCallback(async U=>{try{const K=await se.get(`/activities/deal/${U}`);Ne(K.data&&typeof K.data=="object"?K.data:{})}catch(K){console.error(K),K.response?.status===404&&(console.warn("No activities found for this account."),Ne({}))}},[]),$e=f.useMemo(()=>{const U=s.trim().toLowerCase(),K=i.trim(),je=l.trim();return(j??[]).filter(Be=>{const tt=[Be?.name,Be?.description,Be?.account?.name,Be?.contact?.first_name,Be?.contact?.last_name,Be?.assigned_deals?.first_name,Be?.assigned_deals?.last_name],lt=U===""||tt.some(da=>da==null||da===""?!1:da.toString().toLowerCase().includes(U)),Nt=K==="Filter by Stage"||K===""||Be.stage===Ue[K]||Be.stage===K,Ft=je==="Filter by Owner"||je===""||`${Be.assigned_deals?.first_name||""} ${Be.assigned_deals?.last_name||""}`.trim().toLowerCase()===je.toLowerCase();return lt&&Nt&&Ft})},[j,s,i,l]),Le=Math.max(1,Math.ceil($e.length/AWe)||1);f.useEffect(()=>{_(1)},[s,i,l]),f.useEffect(()=>{_(U=>{const K=Math.max(1,Math.ceil($e.length/k)||1);return U>K?K:U})},[$e.length,k]);const me=f.useMemo(()=>{const U=(S-1)*k;return $e.slice(U,U+k)},[$e,S,k]),Re=()=>_(U=>Math.max(U-1,1)),qe=()=>_(U=>Math.min(U+1,Le)),rt=()=>{le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),W(!1),Q(null),v(!0)},st=async()=>{w(!0);try{const U=await se.get("/deals/admin/fetch-all"),je=[...Array.isArray(U.data)?U.data:[]].sort((Be,tt)=>{const lt=Be?.created_at?new Date(Be.created_at).getTime():0;return(tt?.created_at?new Date(tt.created_at).getTime():0)-lt});b(je)}catch(U){U.response&&U.response.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch deals. Please try again later."),console.error(U)}finally{w(!1)}},Ie=async()=>{try{const U=await se.get("/accounts/admin/fetch-all");Y(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},ot=async()=>{try{const U=await se.get("/contacts/admin/fetch-all");we(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},Ct=async()=>{try{const U=await se.get("/users/all");ne(Array.isArray(U.data)?U.data:[])}catch(U){console.error(U),U.response?.status===403&&V.warn("Unable to load users (permission denied).")}};f.useEffect(()=>{st(),Ie(),ot(),Ct()},[]);const kt=async U=>{U&&(le({id:U.id||null,name:U.name||"",account_id:U.account_id?.toString()||"",primary_contact_id:U.primary_contact_id?.toString()||"",stage:U.stage||"PROPOSAL",amount:U.amount?.toString()||"",close_date:U.close_date?new Date(U.close_date).toISOString().split("T")[0]:"",assigned_to:U.assigned_to?.toString()||"",currency:U.currency||"PHP",description:U.description||""}),ke(U.account||null),Xe(U.contact||null),W(!0),Q(U.id),d(null),v(!0))},At=async(U=!1)=>{try{const K=await se.get("/deals/admin/fetch-all"),Be=[...Array.isArray(K.data)?K.data:[]].sort((tt,lt)=>{const Nt=tt?.created_at?new Date(tt.created_at).getTime():0;return(lt?.created_at?new Date(lt.created_at).getTime():0)-Nt});if(b(Be),!U&&u&&u.id){const tt=Be.find(lt=>lt.id===u.id);tt&&d({...tt})}}catch(K){console.error("Failed to refresh deal data:",K),await st()}},jt=U=>{const K=U.name.trim();if(!K){V.error("Deal name is required.");return}if(!U.account_id){V.error("Account is required.");return}const je=H&&z?"update":"create",Be=K;O({title:je==="create"?"Confirm New Deal":"Confirm Update",message:je==="create"?a.jsxs("span",{children:["Are you sure you want to create"," ",a.jsx("span",{className:"font-semibold",children:Be}),"?"]}):a.jsxs("span",{children:["Save changes to ",a.jsx("span",{className:"font-semibold",children:Be}),"?"]}),confirmLabel:je==="create"?"Create Deal":"Update Deal",cancelLabel:"Cancel",variant:"primary",action:{type:je,formData:U,targetId:z||null,name:Be}})},ge=U=>{if(!U)return;const K=U.name||"this deal";O({title:"Archive Deal",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:K}),"? You can restore it later if needed."]}),confirmLabel:"Archive Deal",cancelLabel:"Cancel",variant:"archive",action:{type:"archive-single",targetId:U.id,name:K}})},ye=async()=>{if(!M?.action){O(null);return}const{action:U}=M,{type:K,formData:je,targetId:Be,name:tt}=U;D(!0);try{if(K==="create"){E(!0);const lt={name:je.name.trim(),account_id:parseInt(je.account_id),primary_contact_id:je.primary_contact_id?parseInt(je.primary_contact_id):null,stage:je.stage,amount:je.amount?parseFloat(je.amount):null,currency:je.currency||"PHP",close_date:je.close_date||null,description:je.description||null,assigned_to:je.assigned_to?parseInt(je.assigned_to):null};await se.post("/deals/admin/create",lt),V.success(`Deal "${tt}" created successfully.`),v(!1),await st()}else if(K==="update"){if(!Be)throw new Error("Missing deal identifier for update.");E(!0);const lt={};je.name!==void 0&&(lt.name=je.name.trim()),je.account_id!==void 0&&je.account_id!==""&&(lt.account_id=parseInt(je.account_id)),je.primary_contact_id!==void 0&&(lt.primary_contact_id=je.primary_contact_id?parseInt(je.primary_contact_id):null),je.stage!==void 0&&(lt.stage=je.stage),je.amount!==void 0&&je.amount!==""&&(lt.amount=parseFloat(je.amount)),je.currency!==void 0&&(lt.currency=je.currency),je.close_date!==void 0&&(lt.close_date=je.close_date||null),je.description!==void 0&&(lt.description=je.description||null),je.assigned_to!==void 0&&(lt.assigned_to=je.assigned_to?parseInt(je.assigned_to):null),await se.put(`/deals/admin/${Be}`,lt),V.success(`Deal "${tt}" updated successfully.`),v(!1),await st()}else if(K==="archive-single"){if(!Be)throw new Error("Missing deal identifier for archiving.");await se.put(`/deals/single-archive/${Be}`),V.success(`Deal "${tt}" archived successfully.`),u?.id===Be&&d(null),await st()}else if(K==="bulk-archive"){if(Oe(!0),!U.targetIds||U.targetIds.length===0)throw new Error("No deals selected for archiving.");await se.put("/deals/bulk-archive",{deal_ids:U.targetIds}),V.success(`${U.count} deal${U.count!==1?"s":""} archived successfully.`),Te(new Set),u&&U.targetIds.includes(u.id)&&d(null),await st()}}catch(lt){console.error(lt);const Nt=K==="create"?"Failed to create deal. Please review the details and try again.":K==="update"?"Failed to update deal. Please review the details and try again.":K==="bulk-archive"?"Failed to archive deals. Please try again.":"Failed to archive deal. Please try again.",Ft=lt.response?.data?.detail||Nt;V.error(Ft)}finally{(K==="create"||K==="update")&&E(!1),K==="bulk-archive"&&Oe(!1),D(!1),O(null)}},Pe=()=>{I||O(null)},Ce=()=>{v(!1),le({id:null,name:"",account_id:"",primary_contact_id:"",stage:"PROPOSAL",amount:"",close_date:"",assigned_to:"",currency:"PHP",description:""}),ke(null),Xe(null),W(!1),Q(null),E(!1)},Qe=(j??[]).filter(U=>U.stage==="PROSPECTING").length,F=(j??[]).filter(U=>U.stage==="QUALIFICATION").length,q=(j??[]).filter(U=>U.stage==="PROPOSAL").length,fe=(j??[]).filter(U=>U.stage==="NEGOTIATION").length,te=(j??[]).filter(U=>U.stage==="CLOSED_WON").length,B=(j??[]).filter(U=>U.stage==="CLOSED_LOST").length,ce=(j??[]).filter(U=>U.stage==="CLOSED_CANCELLED").length,De=[{title:"Prospecting",value:Qe,icon:xj,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Qualification",value:F,icon:gn,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Proposal",value:q,icon:na,color:"text-orange-600",bgColor:"bg-orange-100"},{title:"Negotiation",value:fe,icon:od,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Closed Won",value:te,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Closed Lost",value:B,icon:Fs,color:"text-red-600",bgColor:"bg-red-100"},{title:"Closed Cancelled",value:ce,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}];return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[N&&a.jsx(Wt,{message:"Loading deals..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(na,{className:"mr-2 text-blue-600"}),"Deals"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:rt,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Deal"]})})]}),a.jsx("div",{className:"grid grid-cols-1 p-2 lg:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden",children:De.map(U=>a.jsx(EWe,{...U},U.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search deals",value:s,onChange:U=>r(U.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"w-full lg:w-auto flex flex-col lg:flex-row gap-3",children:[a.jsxs("select",{value:i,onChange:U=>o(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Stage",children:"Filter by Stage"}),a.jsx("option",{value:"Prospecting Stage",children:"Prospecting"}),a.jsx("option",{value:"Qualification Stage",children:"Qualification"}),a.jsx("option",{value:"Proposal Stage",children:"Proposal"}),a.jsx("option",{value:"Negotiation Stage",children:"Negotiation"}),a.jsx("option",{value:"Closed Won Stage",children:"Closed Won"}),a.jsx("option",{value:"Closed Lost Stage",children:"Closed Lost"}),a.jsx("option",{value:"Closed Cancelled Stage",children:"Closed Cancelled"})]}),a.jsxs("select",{value:l,onChange:U=>c(U.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full lg:w-40 focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Owner",children:"Filter by Owner"}),[...new Set((j??[]).map(U=>`${U.assigned_deals?.first_name} ${U.assigned_deals?.last_name}`))].map((U,K)=>a.jsx("option",{value:U,children:U},K))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:oe.size>0&&oe.size===me?.filter(U=>U.deal_creator?.id===n?.id).length&&me?.filter(U=>U.deal_creator?.id===n?.id).length>0,onChange:G,className:"w-4 h-4 cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Deal ID"}),a.jsx("th",{className:"py-3 px-4 truncate",children:"Deal Name"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Stage"}),a.jsx("th",{className:"py-3 px-4",children:"Value"}),a.jsx("th",{className:"py-3 px-4",children:"Close Date"}),a.jsx("th",{className:"py-3 px-4",children:"Owner"}),a.jsx("th",{className:"py-3 px-4 w-12",children:oe.size>0&&a.jsx("button",{onClick:X,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected deals",disabled:ue,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:$e.length>0?me.map(U=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer",onClick:()=>{d({...U}),ve(U.id)},children:[a.jsx("td",{className:"py-3 px-4",children:n?.id===U.deal_creator?.id&&a.jsx("input",{type:"checkbox",checked:oe.has(U.id),onClick:K=>{K.stopPropagation()},onChange:K=>{K.stopPropagation(),ie(U.id)},className:"w-4 h-4 cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.deal_id?U.deal_id.replace(/D(\d+)-\d+-/,"D$1-"):"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-600 hover:underline break-all text-sm",children:U.name}),a.jsx("div",{className:"text-gray-500 text-xs break-all",children:U.description||"--"})]})}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.account?.name||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.contact?.first_name&&U.contact?.last_name?`${U.contact.first_name} ${U.contact.last_name}`:U.contact?.first_name||U.contact?.last_name||"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${he(U.stage)}`,children:_e(U.stage)})}),a.jsxs("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:[" ",U.amount?.toLocaleString()||"0"]}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.close_date||"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800 font-medium text-sm",children:U.assigned_deals?.first_name&&U.assigned_deals?.last_name?`${U.assigned_deals.first_name} ${U.assigned_deals.last_name}`:U.assigned_deals?.first_name||U.assigned_deals?.last_name||"--"})]},U.id)):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No deals found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:$e.length,pageSize:k,currentPage:S,onPrev:Re,onNext:qe,onPageSizeChange:T,label:"deals"}),x&&a.jsx(LWe,{onClose:Ce,formData:xe,setFormData:le,isEditing:H,onSubmit:jt,isSubmitting:A||I,accounts:J,contacts:re,users:Z,currentAccount:Fe,currentContact:He,onAddAccount:Ze,onAddContact:Je,onRefreshAccounts:Ie,onRefreshContacts:ot}),u&&a.jsx(Aee,{relatedActs:pe,selectedDeal:u,show:!!u,onClose:()=>d(null),activeTab:h,setActiveTab:p,onEdit:kt,onDelete:ge,onStatusUpdate:At}),M&&a.jsx(kWe,{open:!0,title:M.title,message:M.message,confirmLabel:M.confirmLabel,cancelLabel:M.cancelLabel,variant:M.variant,onConfirm:ye,onCancel:Pe,loading:I})]})}function kWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[10000]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function EWe({icon:e,title:t,value:n,color:s="text-blue-600",bgColor:r="bg-blue-100",onClick:i}){const o=()=>{typeof i=="function"?i():console.log(`Clicked: ${t}`)};return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",onClick:o,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function LWe({onClose:e,formData:t,setFormData:n,isEditing:s=!1,onSubmit:r,isSubmitting:i=!1,accounts:o=[],contacts:l=[],users:c=[],currentAccount:u=null,currentContact:d=null,onAddAccount:h,onAddContact:p,onRefreshAccounts:x,onRefreshContacts:v}){const[j,b]=f.useState(!1),N=_=>{if(_.preventDefault(),b(!0),!t.name?.trim()){V.error("Deal name is required.");return}const k=Number(t.amount);if(!t.amount||isNaN(k)||k<=0){V.error("Amount must be a number greater than 0.");return}if(!t.account_id){V.error("Please select an account.");return}if(!t.primary_contact_id){V.error("Please select a primary contact.");return}if(!t.assigned_to){V.error("Please assign this deal to a user.");return}r?.(t)},w=_=>{_.target.id==="modalBackdrop"&&e()},S=f.useMemo(()=>{const _=String(t.account_id||"").trim(),k=Array.isArray(l)?l:[];return _?k.filter(T=>{const E=[T?.account_id,T?.accountId,T?.account?.id,T?.account?.account_id,T?.account?.accountId].find(M=>M!=null&&String(M).trim()!=="");return E?String(E)===_:!1}):k},[l,t.account_id]);return f.useEffect(()=>{const _=String(t.account_id||"").trim(),k=String(t.primary_contact_id||"").trim();if(!k||!_)return;S.some(A=>String(A?.id)===k)||n(A=>({...A,primary_contact_id:""}))},[t.account_id,t.primary_contact_id,S,n]),a.jsx("div",{id:"modalBackdrop",onClick:w,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:_=>_.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:s?"Edit Deal":"Create Deal"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:N,noValidate:!0,children:[a.jsx(LT,{label:"Deal Name",name:"name",value:t.name,onChange:_=>n({...t,name:_.target.value}),placeholder:"Enter deal name",required:!0,isSubmitted:j,className:"md:col-span-2"}),a.jsx(PT,{label:"Account",value:t.account_id||"",onChange:_=>n({...t,account_id:_}),items:o||[],getLabel:_=>_?.name??"",placeholder:"Search account...",disabled:i,currentItem:u,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:h,disabled:i,title:"Add account",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:x,disabled:i,title:"Refresh accounts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),required:!0,isSubmitted:j}),a.jsx(PT,{label:"Primary Contact",value:t.primary_contact_id||"",onChange:_=>n({...t,primary_contact_id:_}),items:S||[],getLabel:_=>`${_?.first_name??""} ${_?.last_name??""}`.trim()||_?.email||"",placeholder:"Search contact...",disabled:i,currentItem:d,actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:p,disabled:i,title:"Add contact",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(ta,{size:16})}),a.jsx("button",{type:"button",onClick:v,disabled:i,title:"Refresh contacts",className:"inline-flex items-center justify-center w-8 h-8 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50 transition disabled:opacity-60",children:a.jsx(bi,{size:16})})]}),required:!0,isSubmitted:j}),a.jsx(sH,{label:"Stage",name:"stage",value:t.stage,onChange:_=>n({...t,stage:_.target.value}),options:[{value:"PROSPECTING",label:"Prospecting"},{value:"QUALIFICATION",label:"Qualification"},{value:"PROPOSAL",label:"Proposal"},{value:"NEGOTIATION",label:"Negotiation"},{value:"CLOSED_WON",label:"Closed Won"},{value:"CLOSED_LOST",label:"Closed Lost"},{value:"CLOSED_CANCELLED",label:"Closed Cancelled"}],disabled:i}),a.jsx(LT,{label:"Amount",name:"amount",type:"number",step:"0.01",value:t.amount,onChange:_=>n({...t,amount:_.target.value}),placeholder:"0",required:!0,isSubmitted:j}),a.jsx(sH,{label:"Currency",name:"currency",value:t.currency||"PHP",onChange:_=>n({...t,currency:_.target.value}),options:[{value:"PHP",label:"PHP"},{value:"USD",label:"USD"}],disabled:i}),a.jsx(LT,{label:"Close Date",name:"close_date",type:"date",value:t.close_date||"",onChange:_=>n({...t,close_date:_.target.value}),disabled:i}),a.jsx(PT,{label:"Assign To",value:t.assigned_to||"",onChange:_=>n({...t,assigned_to:_}),items:c||[],getLabel:_=>`${_?.first_name??""} ${_?.last_name??""}`.trim()||_?.email||"",placeholder:"Search assignee...",disabled:i,required:!0,isSubmitted:j,className:"md:col-span-2"}),a.jsx(DWe,{label:"Description",name:"description",value:t.description,onChange:_=>n({...t,description:_.target.value}),placeholder:"Additional details...",rows:3,className:"md:col-span-2",disabled:i}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:i,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:i,children:i?"Saving...":s?"Update Deal":"Save Deal"})]})]})]})})}function LT({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function sH({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:n??"",onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))})]})}function PT({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",currentItem:c=null,required:u=!1,isSubmitted:d=!1,actions:h=null}){const p=d&&u&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",u&&a.jsx("span",{className:"text-red-500",children:"*"})]}),h?a.jsx("div",{className:"flex items-center",children:h}):null]}),a.jsx(PWe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,currentItem:c,hasError:p})]})}function PWe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,currentItem:l=null,hasError:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),j=e.find(w=>String(w.id)===String(t))||l,b=j?s(j):"",N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:b,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${c?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function DWe({label:e,name:t,value:n,onChange:s,placeholder:r,required:i=!1,disabled:o=!1,className:l="",rows:c=3}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,required:i,disabled:o,rows:c,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}const DT=[{value:"Draft",label:"Draft"},{value:"Presented",label:"Presented"},{value:"Accepted",label:"Accepted"},{value:"Rejected",label:"Rejected"}],OT={deal_id:"",account_id:"",contact_id:"",total_amount:"",presented_date:"",validity_days:"",status:"Draft",assigned_to:"",notes:"",subtotal:0,tax_rate:0,tax_amount:0,discount_type:"",discount_value:0,discount_amount:0,currency:"PHP",items:[]},Fi=e=>{if(!e)return"Draft";const t=e.toString().trim().toLowerCase();return{draft:"Draft",presented:"Presented",accepted:"Accepted",rejected:"Rejected"}[t]||"Draft"},MT=e=>e?e.toString().toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"--",OWe=e=>{switch(Fi(e).toLowerCase()){case"draft":return"bg-gray-100 text-gray-700";case"presented":return"bg-yellow-100 text-yellow-700";case"accepted":return"bg-green-100 text-green-700";case"rejected":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},MWe=e=>{switch(Fi(e).toLowerCase()){case"draft":return"bg-gray-600 text-white";case"presented":return"bg-yellow-600 text-white";case"accepted":return"bg-green-600 text-white";case"rejected":return"bg-orange-600 text-white";default:return"bg-gray-600 text-white"}},Jb=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):"",$g=e=>e?new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"}):"",IWe=e=>{if(!e)return"";if(typeof e=="string"&&e.match(/^\d{4}-\d{2}-\d{2}$/))return e;try{const t=new Date(e);if(isNaN(t.getTime()))return"";const n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${n}-${s}-${r}`}catch{return""}},IT=(e,t)=>{if(!e||t==null||t==="")return"";const n=Number(t);if(Number.isNaN(n))return"";const s=new Date(e);return isNaN(s.getTime())?"":(s.setDate(s.getDate()+n),s.toISOString().slice(0,10))},rH=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},$T=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},aj=e=>{if(!e)return null;if(typeof e=="number")return e;if(typeof e=="string"&&e.trim()&&!Number.isNaN(Number(e)))return Number(e);if(typeof e=="object"){if(e.id&&!Number.isNaN(Number(e.id)))return Number(e.id);if(e.user?.id&&!Number.isNaN(Number(e.user.id)))return Number(e.user.id);if(e.data?.id&&!Number.isNaN(Number(e.data.id)))return Number(e.data.id);if(e.profile?.id&&!Number.isNaN(Number(e.profile.id)))return Number(e.profile.id)}return null},$We=()=>{const e=["user","currentUser","userData","authUser","profile"];for(const s of e){const r=localStorage.getItem(s);if(r)try{const i=JSON.parse(r),o=aj(i);if(o)return o}catch{}}const t=localStorage.getItem("user_id"),n=aj(t);return n||null},RWe=e=>{if(!e)return"";const n=[e.account_id,e.accountId,e.account?.id,e.account?.account_id,e.account?.accountId].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},zWe=e=>{if(!e)return"";const n=[e.contact_id,e.contactId,e.contact?.id,e.primary_contact_id,e.primaryContactId,e.primary_contact?.id,e.primaryContact?.id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""},FWe=e=>{if(!e)return"";const n=[e.assigned_user?.id,e.assigned_to?.id,e.assigned_to,e.assigned_user_id].find(s=>s!=null&&String(s).trim()!=="");return n?String(n):""};function UWe(){const e=Tt(),t=Jt(),{user:n}=Gt(),s=n?.company?.currency||"";f.useEffect(()=>{document.title="Quotes | Sari-Sari CRM"},[]);const[r,i]=f.useState([]),[o,l]=f.useState(!1),[c,u]=f.useState([]),[d,h]=f.useState([]),[p,x]=f.useState([]),[v,j]=f.useState([]),[b,N]=f.useState(null),[w,S]=f.useState(null),[_,k]=f.useState(!1),[T,A]=f.useState(!1),[E,M]=f.useState(!1),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState(!1),[Q,J]=f.useState(null),[Y,re]=f.useState(OT),[we,Z]=f.useState(""),[ne,pe]=f.useState("Filter by Status"),[Ne,de]=f.useState(null),be=f.useCallback(async()=>{if(w)try{z(!0);const ee=(await se.get("/company/invoice-info"))?.data;e(`/group-manager/quotes/${encodeURIComponent(w.id)}/print`,{state:{quote:w,companyInfo:ee}})}catch(L){const ee=L?.response?.data?.detail||L?.message||"Failed to open print page.";V.error(ee)}finally{z(!1)}},[w,e]),[oe,Te]=f.useState(1),[ue,Oe]=f.useState(10),[xe,le]=f.useState("Overview"),[Fe,ke]=f.useState("Draft"),[He,Xe]=f.useState([]),[it,ze]=f.useState(null),at=f.useMemo(()=>FWe(w),[w]),{comments:Ve,addComment:Ze,refresh:Je}=kn({relatedType:"quote",relatedId:w?.id});f.useEffect(()=>{w?.id&&Je()},[w?.id,Je]),f.useEffect(()=>{const ee=t.state?.quoteID;if(ee){ze(ee),e(t.pathname,{replace:!0,state:{}});return}},[t,e]),f.useEffect(()=>{if(it&&r.length>0&&!o){const L=r.find(ee=>ee.id===it);L?S(L):V.error("Quote not found."),ze(null)}},[it,r,o]),f.useEffect(()=>{let L=!0;return(async()=>{const Ee=$We();if(Ee&&L){N(Ee);return}try{const Me=await se.get("/auth/me"),We=aj(Me?.data);if(We&&L){N(We);return}}catch{}try{const Me=await se.get("/users/me"),We=aj(Me?.data);if(We&&L){N(We);return}}catch{}L&&N(null)})(),()=>{L=!1}},[]);const Ue=f.useCallback(L=>L&&d.find(Ee=>String(Ee.id)===String(L))?.name||"",[d]),_e=f.useCallback(L=>{if(!L)return"";const ee=p.find(Ee=>String(Ee.id)===String(L));return ee?`${ee.first_name} ${ee.last_name}`.trim():""},[p]),he=f.useCallback(L=>{if(!L)return"--";const ee=c.find(Ee=>String(Ee.id)===String(L));return ee?.deal_name||ee?.name||`Deal #${rH(L)}`},[c]),ie=f.useCallback(L=>{const ee=c.find(We=>String(We.id)===String(L)),Ee=RWe(ee);let Me=zWe(ee);if(!Me&&Ee){const We=p.filter(ft=>String(ft.account_id||"")===String(Ee));if(We.length>0){const ft=[...We].sort((St,_t)=>{const Vt=`${St.first_name||""} ${St.last_name||""}`.trim().toLowerCase(),En=`${_t.first_name||""} ${_t.last_name||""}`.trim().toLowerCase();return Vt.localeCompare(En)});Me=String(ft[0].id)}}if(Ee&&Me){const We=p.find(ft=>String(ft.id)===String(Me));We?.account_id&&String(We.account_id)!==String(Ee)&&(Me="")}return{accountId:Ee||"",contactId:Me||""}},[c,p]),G=f.useCallback(L=>{if(!L)return"--";if(L.deal?.deal_name)return L.deal.deal_name;if(L.deal?.name)return L.deal.name;const ee=L.deal_id||L.deal?.id;return ee?he(ee):"--"},[he]),X=f.useCallback(L=>{if(!L)return"--";if(L.account?.name)return L.account.name;let ee=L.account_id||L.account?.id;if(!ee){const Ee=L.deal_id||L.deal?.id;Ee&&(ee=ie(Ee).accountId)}return ee?Ue(ee)||`Account #${ee}`:"--"},[ie,Ue]),ve=f.useCallback(L=>{if(!L)return"--";if(L.contact?.first_name||L.contact?.last_name)return`${L.contact?.first_name||""} ${L.contact?.last_name||""}`.trim()||"--";let ee=L.contact_id||L.contact?.id;if(!ee){const Me=L.deal_id||L.deal?.id;Me&&(ee=ie(Me).contactId)}return(ee?_e(ee):"")||(ee?`Contact #${ee}`:"--")},[ie,_e]),$e=f.useCallback(async(L=null)=>{l(!0);try{const ee=await se.get("/quotes/admin/fetch-all"),Me=[...Array.isArray(ee.data)?ee.data:[]].sort((We,ft)=>{const St=We?.created_at||We?.updated_at||0,_t=ft?.created_at||ft?.updated_at||0;return new Date(_t)-new Date(St)});if(i(Me),L){const We=Me.find(ft=>ft.id===L);S(We||null)}}catch(ee){console.error(ee),i([]),ee.response?.status===403?V.error("Permission denied. Only CEO, Admin, or Group Manager can access this page."):V.error("Failed to fetch quotes. Please try again later.")}finally{l(!1)}},[]),Le=f.useCallback(async()=>{try{const L=await se.get("/deals/admin/fetch-all");u(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load deals (permission denied).")}},[]),me=f.useCallback(async()=>{try{const L=await se.get("/accounts/admin/fetch-all");h(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load accounts (permission denied).")}},[]),Re=f.useCallback(async()=>{try{const L=await se.get("/contacts/admin/fetch-all");x(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load contacts (permission denied).")}},[]),qe=f.useCallback(async()=>{try{const L=await se.get("/users/all");j(Array.isArray(L.data)?L.data:[])}catch(L){console.error(L),L.response?.status===403&&V.warn("Unable to load users (permission denied).")}},[]);f.useEffect(()=>{$e(),Le(),me(),Re(),qe()},[$e,Le,me,Re,qe]);const rt=f.useMemo(()=>{const L=we.trim().toLowerCase(),ee=ne.trim();return r.filter(Ee=>{const Me=G(Ee),We=X(Ee),ft=ve(Ee),St=IT(Ee.presented_date,Ee.validity_days),_t=[Ee.quote_id,Me,We,ft,Ee.total_amount?.toString(),Ee.validity_days?.toString(),Ee.presented_date?$g(Ee.presented_date):"",St?$g(St):"",Ee.assigned_user?.first_name,Ee.assigned_user?.last_name,Ee.creator?.first_name,Ee.creator?.last_name,Ee.status,Ee.notes,Jb(Ee.created_at),Jb(Ee.updated_at)],Vt=L===""||_t.some(Vr=>Vr==null?!1:Vr.toString().toLowerCase().includes(L)),En=ee==="Filter by Status"||Fi(Ee.status)===ee;return Vt&&En})},[r,we,ne,G,X,ve]),st=Math.max(1,Math.ceil(rt.length/ue)||1);f.useEffect(()=>Te(1),[we,ne]),f.useEffect(()=>{Te(L=>{const ee=Math.max(1,Math.ceil(rt.length/ue)||1);return L>ee?ee:L})},[rt.length,ue]);const Ie=f.useMemo(()=>{const L=(oe-1)*ue;return rt.slice(L,L+ue)},[rt,oe,ue]),ot=()=>Te(L=>Math.max(L-1,1)),Ct=()=>Te(L=>Math.min(L+1,st)),kt=L=>{S(L),le("Overview"),ke(Fi(L?.status)||"Draft")},At=()=>{S(null),le("Overview")},jt=L=>{L.target.id==="quoteModalBackdrop"&&!D&&At()},ge=f.useCallback(()=>{k(!1),A(!1),J(null),re(OT),M(!1)},[]),ye=L=>{L.target.id==="modalBackdrop"&&!E&&!D&&ge()},Pe=L=>{const{name:ee,value:Ee}=L.target;if(ee==="deal_id"){const{accountId:Me,contactId:We}=ie(Ee);re(ft=>({...ft,deal_id:Ee,account_id:Me,contact_id:We}));return}re(Me=>({...Me,[ee]:Ee}))},Ce=()=>{re(OT),A(!1),J(null),k(!0)},Qe=L=>{if(!L)return;S(null);const ee=L.deal?.id?String(L.deal.id):L.deal_id?String(L.deal_id):"",Ee=ee?ie(ee):{accountId:"",contactId:""},Me=L.account?.id?String(L.account.id):L.account_id?String(L.account_id):Ee.accountId,We=L.contact?.id?String(L.contact.id):L.contact_id?String(L.contact_id):Ee.contactId,ft=L.assigned_user?.id?String(L.assigned_user.id):L.assigned_to?String(L.assigned_to):"";re({deal_id:ee,account_id:Me||"",contact_id:We||"",total_amount:L.total_amount?.toString()||"",presented_date:IWe(L.presented_date),validity_days:L.validity_days!==null&&L.validity_days!==void 0?String(L.validity_days):"",status:Fi(L.status)||"Draft",assigned_to:ft,notes:L.notes||"",subtotal:parseFloat(L.subtotal)||0,tax_rate:parseFloat(L.tax_rate)||0,tax_amount:parseFloat(L.tax_amount)||0,discount_type:L.discount_type||"",discount_value:parseFloat(L.discount_value)||0,discount_amount:parseFloat(L.discount_amount)||0,currency:L.currency||"PHP",items:Array.isArray(L.items)?L.items.map(St=>({id:St.id,item_type:St.item_type||"Product",name:St.name||"",description:St.description||"",sku:St.sku||"",variant:St.variant||"",unit:St.unit||"pcs",quantity:parseFloat(St.quantity)||1,unit_price:parseFloat(St.unit_price)||0,discount_percent:parseFloat(St.discount_percent)||0,discount_amount:parseFloat(St.discount_amount)||0,line_total:parseFloat(St.line_total)||0,sort_order:St.sort_order||0})):[]}),A(!0),J(L.id),k(!0)},F=L=>{if(L.target.checked){const ee=Ie.filter(Ee=>Ee.created_by===b).map(Ee=>Ee.id);Xe(ee)}else Xe([])},q=L=>{Xe(ee=>ee.includes(L)?ee.filter(Ee=>Ee!==L):[...ee,L])},fe=Ie.filter(L=>L.created_by===b),te=L=>{if(!L)return;const ee=L.quote_id||"this quote";I({title:"Archive Quote",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:ee}),"? This action cannot be undone."]}),confirmLabel:"Archive Quote",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:L.id,name:ee}})},B=async()=>{He.length!==0&&I({title:"Archive Quotes",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:He.length})," selected quotes? This action cannot be undone."]}),confirmLabel:`Archive ${He.length} Quote(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",quote_ids:He}})},[ce,De]=f.useState(!1),U=L=>{if(L.preventDefault(),De(!0),!b){V.error("Unable to determine current user. Please log in again.");return}if(!Y.deal_id){V.error("Deal is required.");return}if(!Y.assigned_to){V.error("Assigned To is required.");return}const Ee=ie(Y.deal_id),Me=Y.items.map((Vt,En)=>({item_type:Vt.item_type||"Product",name:Vt.name,description:Vt.description||null,sku:Vt.sku||null,variant:Vt.variant||null,unit:Vt.unit||null,quantity:parseFloat(Vt.quantity)||1,unit_price:parseFloat(Vt.unit_price)||0,discount_percent:parseFloat(Vt.discount_percent)||0,sort_order:Vt.sort_order??En})),We={deal_id:Number(Y.deal_id),account_id:Ee.accountId?Number(Ee.accountId):null,contact_id:Ee.contactId?Number(Ee.contactId):null,subtotal:parseFloat(Y.subtotal)||0,tax_rate:parseFloat(Y.tax_rate)||0,tax_amount:parseFloat(Y.tax_amount)||0,discount_type:Y.discount_type||null,discount_value:parseFloat(Y.discount_value)||0,discount_amount:parseFloat(Y.discount_amount)||0,total_amount:parseFloat(Y.total_amount)||0,currency:Y.currency||"PHP",presented_date:Y.presented_date||null,validity_days:Y.validity_days===""?null:Number(Y.validity_days),status:Y.status||"Draft",assigned_to:Y.assigned_to?Number(Y.assigned_to):null,notes:Y.notes?.trim()||null,items:Me},ft=T&&Q?"update":"create",St=he(Y.deal_id),_t=ft==="create"?{...We,created_by_id:Number(b)}:We;I({title:ft==="create"?"Confirm New Quote":"Confirm Update",message:ft==="create"?a.jsxs("span",{children:["Are you sure you want to create a quote for"," ",a.jsx("span",{className:"font-semibold",children:St}),"?"]}):a.jsxs("span",{children:["Save changes to"," ",a.jsx("span",{className:"font-semibold",children:St}),"?"]}),confirmLabel:ft==="create"?"Create Quote":"Update Quote",cancelLabel:"Cancel",variant:"primary",action:{type:ft,payload:_t,targetId:Q||null,name:St}})},K=async()=>{if(!O?.action){I(null);return}const{action:L}=O,{type:ee,payload:Ee,targetId:Me,name:We}=L;H(!0);try{if(ee==="create")M(!0),await se.post("/quotes/admin",Ee),V.success("Quote created successfully."),ge(),await $e();else if(ee==="update"){if(!Me)throw new Error("Missing quote identifier for update.");M(!0),await se.put(`/quotes/admin/${Me}`,Ee),V.success("Quote updated successfully."),ge(),await $e(),w?.id===Me&&S(null)}else if(ee==="delete"){if(!Me)throw new Error("Missing quote identifier for deletion.");const ft=w?.id;de(Me),await se.delete(`/quotes/admin/${Me}`),V.success(`Quote "${We}" archived successfully.`),await $e(ft&&ft!==Me?ft:null),ft===Me&&S(null)}else ee==="bulk-delete"&&(await se.post("/quotes/admin/bulk-delete",{quote_ids:He}),V.success(`Successfully archived ${He.length} quotes`),Xe([]),await $e())}catch(ft){console.error(ft);const St=ee==="create"?"Failed to create quote. Please review the details and try again.":ee==="update"?"Failed to update quote. Please review the details and try again.":"Failed to delete quote. Please try again.";V.error(St),(ee==="create"||ee==="update")&&M(!1),ee==="delete"&&de(null)}finally{(ee==="create"||ee==="update")&&M(!1),ee==="delete"&&de(null),H(!1),I(null)}},je=()=>{D||I(null)},Be=f.useCallback((L,ee)=>{const Ee=L?.deal_id??L?.deal?.id??"",Me=Ee?Number(Ee):null,We=Me?ie(String(Me)):{accountId:"",contactId:""},ft=L?.account_id??L?.account?.id??We.accountId??null,St=L?.contact_id??L?.contact?.id??We.contactId??null,_t=L?.total_amount??0,Vt=L?.assigned_to??L?.assigned_user?.id??null;return{deal_id:Me,account_id:ft!=null&&String(ft).trim()!==""?Number(ft):null,contact_id:St!=null&&String(St).trim()!==""?Number(St):null,total_amount:Number(_t),presented_date:L?.presented_date||null,validity_days:L?.validity_days===""||L?.validity_days===void 0||L?.validity_days===null?null:Number(L.validity_days),status:ee,assigned_to:Vt!=null&&String(Vt).trim()!==""?Number(Vt):null,notes:L?.notes?.trim()||null}},[ie]),tt=f.useCallback(async()=>{if(!w?.id)return;const L=Fi(Fe),ee=[L,L.toLowerCase()],Ee=async Me=>se.patch(`/quotes/admin/${w.id}/status`,{status:Me},{headers:{"Content-Type":"application/json"}});try{let Me=!1;for(const We of ee)try{await Ee(We),Me=!0;break}catch(ft){if(ft?.response?.status===422)continue;throw ft}if(!Me){const We=Be(w,L);if(!We.deal_id){V.error("Cannot update status: missing deal_id on selected quote.");return}if(!We.total_amount||We.total_amount<=0){V.error("Cannot update status: missing/invalid total_amount on selected quote.");return}await se.put(`/quotes/admin/${w.id}`,We)}V.success(`Quote status updated to ${L}`),S(null),le("Overview"),await $e()}catch(Me){console.error(Me);const We=Me?.response?.data?.message||(Me?.response?.data?.errors?Object.values(Me.response.data.errors).flat().join(" "):null)||"Failed to update quote status. Please try again.";V.error(We)}},[w,Fe,$e,Be]),lt=[{label:"Filter by Status",value:"Filter by Status"},...DT.map(L=>({label:L.label,value:L.value}))],Nt=O?.action?.type==="delete"?O.action.targetId:null,Ft=w&&(Ne===w.id||Nt===w.id),da=w&&Ne===w.id,Pa=w?a.jsx("div",{id:"quoteModalBackdrop",onClick:jt,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in font-inter relative",onClick:L=>L.stopPropagation(),children:[a.jsx("div",{className:"w-full flex flex-col items-center justify-center rounded-t-xl",children:a.jsxs("div",{className:"bg-tertiary w-full flex items-center justify-between p-3 lg:p-3 rounded-t-xl",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Quotes"}),a.jsx("button",{onClick:At,className:"text-gray-500 hover:text-white transition cursor-pointer",children:a.jsx(Za,{size:25})})]})}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:G(w)}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full whitespace-nowrap ${MWe(w.status)}`,children:MT(w.status)})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-white text-gray-700 px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-50 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-gray-300",onClick:be,disabled:W||E||D,children:[a.jsx(ra,{className:"mr-2"}),W?"Preparing...":"Print Quotation"]}),b===w.created_by&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>Qe(w),disabled:D||O?.action?.type==="update"&&O.action.targetId===w.id,children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsx("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>te(w),disabled:!!Ft,children:da?"Archiving...":a.jsxs(a.Fragment,{children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})})]})]})]}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-1 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(L=>a.jsx("button",{onClick:()=>le(L),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
                    ${xe===L?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:L},L))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[xe==="Overview"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Quote ID:"}),a.jsx("p",{children:$T(w.quote_id)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Deal:"}),a.jsx("p",{children:G(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Account:"}),a.jsx("p",{children:X(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Contact:"}),a.jsx("p",{children:ve(w)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Total Amount:"}),a.jsx("p",{children:w.total_amount?`${s}${Number(w.total_amount).toLocaleString()}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Presented Date:"}),a.jsx("p",{children:$g(w.presented_date)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Validity Days:"}),a.jsx("p",{children:w.validity_days!==null&&w.validity_days!==void 0?w.validity_days:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Expiry Date:"}),a.jsx("p",{children:$g(IT(w.presented_date,w.validity_days))||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:MT(w.status)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Assigned To:"}),a.jsx("p",{children:w.assigned_user?`${w.assigned_user.first_name} ${w.assigned_user.last_name}`:"Unassigned"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created By:"}),a.jsx("p",{children:w.creator?`${w.creator.first_name} ${w.creator.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:Jb(w.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Updated:"}),a.jsx("p",{children:Jb(w.updated_at)||"N/A"})]})]}),w.items&&w.items.length>0&&a.jsx("div",{className:"mt-6",children:a.jsx(bd,{items:w.items,onChange:()=>{},currencySymbol:s,readOnly:!0,taxRate:parseFloat(w.tax_rate)||0,discountType:w.discount_type,discountValue:parseFloat(w.discount_value)||0})})]}),xe==="Notes"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl border border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:w.notes||"No notes available."})]}),a.jsx(Tn,{comments:Ve,onAddComment:Ze})]})]}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("button",{onClick:()=>e("/group-manager/calls",{state:{openCallModal:!0,initialCallData:{subject:`Call regarding Quote ${$T(w.quote_id)}`,assigned_to:at,direction:"Outgoing",status:"Planned"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Mt,{className:"text-gray-600 w-4 h-4"}),"Schedule Call"]}),a.jsxs("button",{className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",onClick:()=>e("/group-manager/meetings",{state:{openMeetingModal:!0,initialMeetingData:{subject:`Meeting with ${w.quote_id}`,assignedTo:at,status:"Planned"}}}),children:[a.jsx(Dt,{className:"text-gray-600 w-4 h-4"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>e("/group-manager/tasks",{state:{openTaskModal:!0,initialTaskData:{subject:`Follow up with ${w.quote_id}`,assignedTo:at,priority:"NORMAL",status:"Not Started"}}}),className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(Yt,{className:"text-gray-600 w-4 h-4"}),"Tasks"]})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsx("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Fe||Fi(w.status)||"Draft",onChange:L=>ke(L.target.value),children:DT.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))}),a.jsx("button",{onClick:tt,disabled:Fi(Fe)===Fi(w.status),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Fi(Fe)===Fi(w.status)?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:"Update"})]})]})]})]})]})]})}):null,Ge=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[o&&a.jsx(Wt,{message:"Loading quotes..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h2",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(ra,{className:"mr-2 text-blue-600"})," Quotes"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto gap-2",children:a.jsxs("button",{onClick:()=>{Ce(),De(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Quote"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search quotes",value:we,onChange:L=>Z(L.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:ne,onChange:L=>pe(L.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:lt.map(L=>a.jsx("option",{value:L.value,children:L.label},L.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[900px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:fe.length>0&&He.length===fe.length,onChange:F,className:"cursor-pointer"})}),a.jsx("th",{className:"py-3 px-4",children:"Quote ID"}),a.jsx("th",{className:"py-3 px-4",children:"Deal"}),a.jsx("th",{className:"py-3 px-4",children:"Account"}),a.jsx("th",{className:"py-3 px-4",children:"Contact"}),a.jsx("th",{className:"py-3 px-4",children:"Total Amount"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Expiry Date"}),a.jsx("th",{className:"py-3 px-4 text-center w-24",children:He.length>0?a.jsx("button",{onClick:B,className:"text-orange-600 hover:text-orange-800 transition p-1 rounded-full hover:bg-orange-50",title:`Archive ${He.length} selected items`,children:a.jsx(Zt,{size:18})}):""})]})}),a.jsx("tbody",{children:o?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"Loading quotes..."})}):rt.length>0?Ie.map(L=>{const ee=IT(L.presented_date,L.validity_days);return a.jsxs("tr",{className:"hover:bg-gray-50 text-sm cursor-pointer transition",onClick:()=>kt(L),children:[a.jsx("td",{className:"py-3 px-4 align-top w-12",onClick:Ee=>Ee.stopPropagation(),children:L.created_by===b&&a.jsx("input",{type:"checkbox",checked:He.includes(L.id),onChange:()=>q(L.id),className:"cursor-pointer"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"font-medium text-blue-600 hover:underline whitespace-nowrap",children:$T(L.quote_id)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:G(L)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-sm text-gray-700 break-words",children:X(L)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"break-words",children:ve(L)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-700",children:L.total_amount?`${s}${Number(L.total_amount).toLocaleString()}`:"--"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${OWe(L.status)}`,children:MT(L.status)})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{children:L.assigned_user?`${L.assigned_user.first_name} ${L.assigned_user.last_name}`:"Unassigned"})}),a.jsx("td",{className:"py-3 px-4 align-top",children:a.jsx("div",{className:"text-gray-500 text-xs",children:$g(ee)||"--"})}),a.jsx("td",{className:"py-3 px-4 align-top text-center w-24"})]},L.id)}):a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:10,children:"No quotes found."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:rt.length,pageSize:ue,currentPage:oe,onPrev:ot,onNext:Ct,onPageSizeChange:L=>{Oe(L),Te(1)},pageSizeOptions:[10,20,30,40,50],label:"quotes"})]}),Ae=_?a.jsx("div",{id:"modalBackdrop",onClick:ye,className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-full sm:max-w-3xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",onClick:L=>L.stopPropagation(),children:[a.jsx("button",{onClick:()=>{ge(),De(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:E||D,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:T?"Edit Quote":"Add New Quote"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:U,children:[a.jsx(lH,{label:"Deal",name:"deal_id",value:Y.deal_id,onChange:L=>{const{accountId:ee,contactId:Ee}=ie(L);re(Me=>({...Me,deal_id:L,account_id:ee,contact_id:Ee}))},items:Array.isArray(c)?c:[],getLabel:L=>`${rH(L?.deal_id??"")} ${L?.name??""}`.trim(),placeholder:"Search deal...",required:!0,isSubmitted:ce,disabled:E||c.length===0,className:"md:col-span-2"}),a.jsx(oH,{label:"Account",value:Ue(Y.account_id)||(Y.account_id?`Account #${Y.account_id}`:""),disabled:!0}),a.jsx(oH,{label:"Contact",value:_e(Y.contact_id)||(Y.contact_id?`Contact #${Y.contact_id}`:""),disabled:!0}),a.jsx("div",{className:"md:col-span-2 mt-2",children:a.jsx(bd,{items:Y.items,onChange:L=>re(ee=>({...ee,items:L})),currencySymbol:s,readOnly:E,taxRate:Y.tax_rate,discountType:Y.discount_type,discountValue:Y.discount_value,onTotalsChange:L=>{re(ee=>({...ee,subtotal:L.subtotal,discount_amount:L.discount_amount,tax_amount:L.tax_amount,total_amount:L.total_amount}))}})}),a.jsxs("div",{className:"md:col-span-2 mt-2 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Pricing Settings"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Discount Type"}),a.jsxs("select",{value:Y.discount_type||"",onChange:L=>re(ee=>({...ee,discount_type:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",disabled:E,children:[a.jsx("option",{value:"",children:"No Discount"}),a.jsx("option",{value:"percentage",children:"Percentage (%)"}),a.jsx("option",{value:"fixed",children:"Fixed Amount"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-gray-600 text-xs mb-1",children:["Discount"," ",Y.discount_type==="percentage"?"%":"Amount"]}),a.jsx("input",{type:"number",value:Y.discount_value||"",onChange:L=>re(ee=>({...ee,discount_value:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:Y.discount_type==="percentage"?"100":void 0,step:"0.01",disabled:E||!Y.discount_type})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",value:Y.tax_rate||"",onChange:L=>re(ee=>({...ee,tax_rate:L.target.value})),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm",placeholder:"0",min:"0",max:"100",step:"0.01",disabled:E})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-600 text-xs mb-1",children:"Total Amount"}),a.jsxs("div",{className:"w-full bg-gray-100 border border-gray-300 rounded-md px-2 py-1.5 text-sm font-medium",children:[s,parseFloat(Y.total_amount||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),a.jsx(iH,{label:"Presented Date",name:"presented_date",type:"date",value:Y.presented_date,onChange:Pe,disabled:E}),a.jsx(iH,{label:"Validity Days",name:"validity_days",type:"number",value:Y.validity_days,onChange:Pe,placeholder:"30",disabled:E}),a.jsx(lH,{label:"Assigned To",value:Y.assigned_to||"",onChange:L=>re(ee=>({...ee,assigned_to:L})),items:Array.isArray(v)?v:[],getLabel:L=>{const ee=`${L?.first_name??""} ${L?.last_name??""}`.trim();return ee?L?.role?`${ee} (${L.role})`:ee:L?.email||""},placeholder:"Search assignee...",required:!0,isSubmitted:ce,disabled:E}),a.jsx(BWe,{label:"Status",name:"status",value:Y.status,onChange:Pe,options:DT,required:!0,disabled:E}),a.jsx(qWe,{label:"Notes",name:"notes",value:Y.notes,onChange:Pe,placeholder:"Additional details...",rows:3,disabled:E,className:"md:col-span-2"}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:()=>{ge(),De(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:E||D,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:E||D,children:E?"Saving...":T?"Update Quote":"Save Quote"})]})]})]})}):null,$=O?a.jsx(GWe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:K,onCancel:je,loading:D}):null;return a.jsxs(a.Fragment,{children:[w?Pa:Ge,Ae,$]})}function iH({label:e,name:t,value:n,onChange:s,placeholder:r,type:i="text",required:o=!1,disabled:l=!1,className:c="",isSubmitted:u=!1}){const d=u&&!n?.trim();return a.jsxs("div",{className:c,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,required:o,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
          ${c}
        `})]})}function oH({label:e,value:t,className:n="",disabled:s=!0}){return a.jsxs("div",{className:n,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("input",{type:"text",value:t??"",disabled:s,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm outline-none disabled:bg-gray-100"})]})}function BWe({label:e,name:t,value:n,onChange:s,options:r,required:i=!1,disabled:o=!1,className:l=""}){const c=n!=null?String(n):"",d=r.some(h=>String(h.value)===c)?c:"";return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("select",{name:t,value:d,onChange:s,required:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:r.map(h=>a.jsx("option",{value:String(h.value??""),children:h.label},h.value??h.label))})]})}function lH({label:e,items:t=[],value:n="",onChange:s,getLabel:r,placeholder:i="Search...",disabled:o=!1,className:l="",required:c=!1,isSubmitted:u=!1}){const d=u&&c&&!n;return a.jsxs("div",{className:l,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",c&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(HWe,{items:t,value:n??"",onChange:s,getLabel:r,placeholder:i,disabled:o,hasError:d})]})}function HWe({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,hasError:l=!1}){const[c,u]=f.useState(!1),[d,h]=f.useState(""),p=f.useRef(null),x=e.find(b=>String(b.id)===String(t)),v=x?s(x):"",j=f.useMemo(()=>{const b=d.trim().toLowerCase();return(b?e.filter(w=>(s(w)||"").toLowerCase().includes(b)):e).slice(0,o)},[e,d,s,o]);return f.useEffect(()=>{const b=N=>{p.current&&!p.current.contains(N.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),f.useEffect(()=>{c||h("")},[c]),a.jsxs("div",{ref:p,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:c?d:v,placeholder:r,onFocus:()=>!i&&u(!0),onChange:b=>{h(b.target.value),c||u(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2
          ${l?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),c&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto hide-scrollbar",children:j.length>0?j.map(b=>{const N=String(b.id),w=s(b),S=String(t)===N;return a.jsx("button",{type:"button",onClick:()=>{n(N),u(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${S?"bg-blue-50":""}`,children:w||"--"},N)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function qWe({label:e,name:t,value:n,onChange:s,placeholder:r,rows:i=3,disabled:o=!1,className:l=""}){return a.jsxs("div",{className:l,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),a.jsx("textarea",{name:t,value:n??"",onChange:s,placeholder:r,rows:i,disabled:o,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function GWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function WWe(){const{userRole:e}=Ks();return a.jsx(x1,{currentUserRole:e,currentUserId:null})}const cH=["Not started","In progress","Deferred","Completed"],dH={NOT_STARTED:"Not started","NOT STARTED":"Not started","TO DO":"Not started",IN_PROGRESS:"In progress","IN PROGRESS":"In progress",COMPLETED:"Completed",DEFERRED:"Deferred","Not started":"Not started","In progress":"In progress",Completed:"Completed",Deferred:"Deferred","In Progress":"In progress","To Do":"Not started",Review:"Deferred"},Tee=e=>e&&(dH[e]||dH[String(e).toUpperCase()])||"Not started",VWe=e=>{if(!e)return"";const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getTimezoneOffset();return new Date(t.getTime()-n*60*1e3).toISOString().slice(0,16)},RT=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},YWe=e=>{const t=e.subject?.trim()??"",n=e.description?.trim()??"",s=e.notes?.trim()??"";e.priority&&String(e.priority).toUpperCase(),Tee(e.status);let r=null,i=null,o=null,l=null,c=null;e.relatedType1==="Lead"&&e.relatedTo1?r=Number(e.relatedTo1):e.relatedType1==="Account"&&e.relatedTo1&&(i=Number(e.relatedTo1)),e.relatedType1==="Account"&&(e.relatedType2==="Contact"&&e.relatedTo2?o=Number(e.relatedTo2):e.relatedType2==="Deal"&&e.relatedTo2?l=Number(e.relatedTo2):e.relatedType2==="Quote"&&e.relatedTo2&&(c=Number(e.relatedTo2)));const u=e.assignedTo?Number(e.assignedTo):null,d=o||l||i||r,h=o?"Contact":l?"Deal":i?"Account":r?"Lead":c?"Quote":null;return{title:t,description:n,priority:e.priority||"Normal",status:e.status||"Not started",due_date:e.dueDate?e.dueDate:null,assigned_to:u,notes:s,is_personal:!1,lead_id:r,account_id:i,contact_id:o,deal_id:l,quote_id:c,related_to_1:e.relatedTo1?Number(e.relatedTo1):null,related_type_1:e.relatedType1,related_to_2:e.relatedTo2?Number(e.relatedTo2):null,related_type_2:e.relatedType2,related_to:d,related_type:h}},QWe=e=>{const t=e.task_assign_to?`${e.task_assign_to.first_name} ${e.task_assign_to.last_name}`:e.assigned_to?String(e.assigned_to):"Unassigned",n=e.task_creator?`${e.task_creator.first_name} ${e.task_creator.last_name}`:e.created_by?String(e.created_by):"System",s=e.due_date||e.dueDate||null,r=e.date_assigned||e.created_at||null,i=e.contact?`${e.contact.first_name} ${e.contact.last_name}`:e.assigned_to?String(e.assigned_to.id):"Unassigned",o=W=>{if(!W)return"";const z=String(W).split("-");return z.length===3?`${z[0]}-${z[2]}`:String(W)},l=()=>e.lead?.id||e.lead_id,c=()=>e.account?.id||e.account_id,u=()=>e.contact?.id||e.contact_id,d=()=>e.deal?.id||e.deal_id,h=()=>e.quote?.id||e.quote_id,p=()=>e.task_assign_to?.id||e.assigned_to,x=()=>e.lead?.title||e.lead_id,v=()=>e.account?.name||e.account_id,j=()=>i||e.contact_id,b=()=>e.deal?.name||e.deal_id,N=()=>o(e.quote?.quote_id)||e.id;let w="Lead",S="",_="",k="",T="Lead",A="",E="",M="";const O=c(),I=v(),D=l(),H=x();if(O){w="Account",T="Account",A=I,S=String(O);const W=u(),z=d(),Q=j(),J=b(),Y=h(),re=N();W?(_="Contact",E="Contact",M=Q,k=String(W)):z?(E="Deal",_="Deal",M=J,k=String(z)):Y&&(E="Quote",_="Quote",M=re,k=String(Y))}else D?(T="Lead",A=H,w="Lead",S=String(D)):e.related_type==="Account"&&(w="Account",S=String(e.related_to));return{id:e.id,title:e.title,description:e.description,priority:e.priority||"Normal",status:Tee(e.status),dueDate:s,dateAssigned:r,assignedToId:p()||null,assignedToName:t,createdAt:e.created_at||null,createdById:e.created_by??null,createdBy:n,notes:e.notes||"",isPersonal:!!e.is_personal,relatedType1Text:T,relatedTo1Text:A,relatedType2Text:E,relatedTo2Text:M,subject:e.title,relatedType1:w,relatedTo1:S,relatedType2:_,relatedTo2:k}};function KWe(){f.useEffect(()=>{document.title="Tasks | Sari-Sari CRM"},[]);const{user:e,loading:t}=Gt(),[n,s]=f.useState("board"),[r,i]=f.useState(!1),[o,l]=f.useState(null),[c,u]=f.useState(!1),[d,h]=f.useState([]),[p,x]=f.useState(!0),[v,j]=f.useState(""),[b,N]=f.useState("Filter by Status"),[w,S]=f.useState("Filter by Priority"),[_,k]=f.useState([]),[T,A]=f.useState(1),[E,M]=f.useState(10),[O,I]=f.useState(null),[D,H]=f.useState(!1),[W,z]=f.useState([]),[Q,J]=f.useState(null),Y=Tt(),re=Jt(),[we,Z]=f.useState({id:"",subject:"",description:"",priority:"",status:"",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""}),[ne,pe]=f.useState(null),Ne=Ux(Ff(sm,{activationConstraint:{distance:8}})),de=G=>{const{active:X}=G,ve=d.find($e=>$e.id===X.id);J(ve)},be=async G=>{const{active:X,over:ve}=G;if(J(null),!ve)return;const $e=X.id,Le=ve.id,me=d.find(Re=>Re.id===$e);if(!(!me||me.status===Le)){h(Re=>Re.map(qe=>qe.id===$e?{...qe,status:Le}:qe));try{const Re={title:me.title,description:me.description||"",priority:me.priority||"Normal",status:Le,due_date:me.dueDate||null,assigned_to:me.assignedToId||null,related_type_1:me.relatedType1||null,related_to_1:me.relatedTo1?parseInt(me.relatedTo1,10):null,related_type_2:me.relatedType2||null,related_to_2:me.relatedTo2?parseInt(me.relatedTo2,10):null};(!Re.related_to_1||isNaN(Re.related_to_1))&&(Re.related_to_1=null),(!Re.related_to_2||isNaN(Re.related_to_2))&&(Re.related_to_2=null),await se.put(`/tasks/${$e}`,Re),V.success(`Task moved to "${Le}"`)}catch(Re){console.error("Failed to update task status:",Re),V.error("Failed to update task status"),h(qe=>qe.map(rt=>rt.id===$e?{...rt,status:me.status}:rt))}}},oe=()=>{J(null)};f.useEffect(()=>{const G=re.state?.openTaskModal,X=re.state?.initialTaskData,ve=re.state?.taskID;G?(i(!0),X&&Z($e=>({...$e,...X})),Y(re.pathname,{replace:!0,state:{}})):ve&&(pe(ve),Y(re.pathname,{replace:!0,state:{}}))},[re,Y]),f.useEffect(()=>{if(ne&&d.length>0&&!p){const G=d.find(X=>X.id===ne);G?xe(G,!0):V.error("Task not found."),pe(null)}},[ne,d,p]);const Te=async()=>{try{const G=await se.get("/users/all");k(Array.isArray(G.data)?G.data:[])}catch(G){console.error("Failed to fetch users:",G),V.error("Failed to fetch users.")}},ue=async()=>{try{x(!0);const G=await se.get("/tasks/all"),ve=(Array.isArray(G.data)?G.data:[]).map(QWe);ve.sort(($e,Le)=>{const me=$e.createdAt?new Date($e.createdAt):0;return(Le.createdAt?new Date(Le.createdAt):0)-me}),h(ve),n==="list"&&A(1)}catch(G){console.error("Failed to load tasks:",G),V.error("Failed to load tasks.")}finally{x(!1)}};f.useEffect(()=>{!t&&e&&(Te(),ue())},[t,e]);const Oe=()=>{l(null),Z({id:"",subject:"",description:"",priority:"Normal",status:"Not started",dueDate:"",assignedTo:"",notes:"",relatedType1:"Lead",relatedType2:"Contact",relatedTo1:"",relatedTo2:""})},xe=(G=null,X=!1)=>{l(G),u(X),G?Z({id:G.id,subject:G.title||"",description:G.description||"",priority:G.priority||"Normal",status:G.status||"Not started",dueDate:VWe(G.dueDate),assignedTo:G.assignedToId?String(G.assignedToId):"",assignedToName:G.assignedToName||"",createdBy:G.createdBy||"",notes:G.notes||"",relatedType1Text:G.relatedType1Text||"",relatedTo1Text:G.relatedTo1Text||"",relatedType2Text:G.relatedType2Text||"",relatedTo2Text:G.relatedTo2Text||"",relatedType1:G.relatedType1||"",relatedTo1:G.relatedTo1||"",relatedType2:G.relatedType2||"",relatedTo2:G.relatedTo2||""}):Oe(),i(!0)},le=()=>{i(!1),l(null),u(!1),Oe()},Fe=async G=>{const X=YWe(G);try{o&&!c?(await se.put(`/tasks/${o.id}`,X),V.success("Task updated successfully.")):(await se.post("/tasks/create",X),V.success("Task created successfully.")),i(!1),await ue()}catch(ve){console.error("Failed to save task:",ve);const $e=ve.response?.data?.detail||"Failed to save task.";V.error($e)}},ke=G=>{G&&I({title:"Delete Task",message:a.jsxs(a.Fragment,{children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:G.title}),"?"]}),confirmLabel:"Delete Task",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:G.id}})},He=()=>{if(Ze.every(G=>W.includes(G.id)))z(W.filter(G=>!Ze.map(X=>X.id).includes(G)));else{const G=Ze.map(X=>X.id);z([...new Set([...W,...G])])}},Xe=G=>{z(X=>X.includes(G)?X.filter(ve=>ve!==G):[...X,G])},it=async()=>{W.length!==0&&I({title:"Delete Tasks",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsx("span",{className:"font-semibold",children:W.length})," selected tasks? This action cannot be undone."]}),confirmLabel:`Delete ${W.length} Task(s)`,cancelLabel:"Cancel",variant:"danger",action:{type:"bulk-delete",task_ids:W}})},ze=async()=>{if(!O?.action){I(null);return}const{action:G}=O;H(!0);try{G.type==="delete"?(await se.delete(`/tasks/${G.targetId}`),V.success("Task deleted successfully."),await ue()):G.type==="bulk-delete"&&(await se.delete("/tasks/admin/bulk-delete",{data:{task_ids:G.task_ids}}),V.success(`Successfully deleted ${G.task_ids.length} tasks`),z([]),await ue())}catch(X){console.error("Task action failed:",X),V.error("Failed to delete task.")}finally{H(!1),I(null)}},at=()=>{D||I(null)},Ve=f.useMemo(()=>{const G=v.trim().toLowerCase();return[...d].sort((ve,$e)=>{const Le=ve.createdAt?new Date(ve.createdAt):0;return($e.createdAt?new Date($e.createdAt):0)-Le}).filter(ve=>{const $e=G===""||ve.title?.toLowerCase().includes(G)||ve.description?.toLowerCase().includes(G)||ve.assignedToName?.toLowerCase().includes(G)||ve.createdBy?.toLowerCase().includes(G),Le=b==="Filter by Status"||ve.status===b,me=w==="Filter by Priority"||ve.priority===w;return $e&&Le&&me})},[d,v,b,w]);f.useEffect(()=>{A(1)},[v,b,w,n,E]),f.useEffect(()=>{if(n==="list"){const G=Ve.length===0?1:Math.ceil(Ve.length/E);T>G&&A(G)}},[Ve.length,T,n,E]);const Ze=f.useMemo(()=>{if(n==="board")return Ve;const G=(T-1)*E;return Ve.slice(G,G+E)},[Ve,T,n,E]),Je=f.useMemo(()=>{const G=new Date;return[{title:"To Do",value:d.filter(X=>X.status==="Not started").length,icon:Vs,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"In Progress",value:d.filter(X=>X.status==="In progress").length,icon:Yi,color:"text-purple-600",bgColor:"bg-purple-100"},{title:"Completed",value:d.filter(X=>X.status==="Completed").length,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Overdue",value:d.filter(X=>X.dueDate&&new Date(X.dueDate)<G&&X.status!=="Completed").length,icon:Qu,color:"text-red-600",bgColor:"bg-red-100"},{title:"High Priority",value:d.filter(X=>X.priority==="High").length,icon:Jl,color:"text-orange-600",bgColor:"bg-orange-100"}]},[d]),Ue=G=>G.dueDate&&new Date(G.dueDate)<new Date&&G.status!=="Completed",_e=G=>{switch(G.status){case"Not started":return"bg-blue-50 hover:bg-blue-100 border-blue-200";case"In progress":return"bg-purple-50 hover:bg-purple-100 border-purple-200";case"Deferred":return"bg-orange-50 hover:bg-orange-100 border-orange-200";case"Completed":return"bg-green-50 hover:bg-green-100 border-green-200";default:return"bg-gray-50 hover:bg-gray-100 border-gray-100"}},he=G=>{switch(G){case"Not started":return"bg-blue-100 text-blue-700";case"In progress":return"bg-purple-100 text-purple-700";case"Deferred":return"bg-orange-100 text-orange-700";case"Completed":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},ie=G=>{switch(G){case"High":return"bg-red-100 text-red-700";case"Normal":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 min-h-screen font-inter relative",children:[(p||t)&&a.jsx(Wt,{message:"Loading tasks..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Yi,{className:"text-blue-600"})," Tasks Board"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:()=>xe(),className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto mt-2 lg:mt-0 cursor-pointer",children:[a.jsx(ta,{})," Create Task"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:Je.map(G=>a.jsx(XWe,{...G},G.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mt-6 mb-4 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search tasks",value:v,onChange:G=>j(G.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{value:b,onChange:G=>N(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Status"}),cH.map(G=>a.jsx("option",{children:G},G))]}),a.jsxs("select",{value:w,onChange:G=>S(G.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{children:"Filter by Priority"}),a.jsx("option",{children:"High"}),a.jsx("option",{children:"Normal"}),a.jsx("option",{children:"Low"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{type:"button",onClick:()=>s("board"),className:`px-4 py-2 rounded-full text-sm ${n==="board"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Board View"}),a.jsx("button",{type:"button",onClick:()=>s("list"),className:`px-4 py-2 rounded-full text-sm ${n==="list"?"bg-gray-800 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"List View"})]}),!p&&!t&&n==="board"&&(Ve.length>0?a.jsxs(qx,{sensors:Ne,collisionDetection:Bx,onDragStart:de,onDragEnd:be,onDragCancel:oe,children:[a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 rounded-md",children:cH.map(G=>{const X=Ze.filter(ve=>ve.status===G);return a.jsx(JWe,{column:G,columnTasks:X,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:RT,handleOpenModal:xe,handleDeleteTask:ke},G)})}),a.jsx(kN,{children:Q?a.jsx(tVe,{task:Q,getTaskCardColor:_e,isTaskOverdue:Ue,formatDateDisplay:RT}):null})]}):a.jsx("div",{className:"col-span-4 text-center py-10 text-gray-500 border border-dashed rounded-xl",children:"No tasks found."})),!p&&!t&&n==="list"&&a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-gray-600 text-left",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-10",children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:Ze.length>0&&Ze.every(G=>W.includes(G.id)),onChange:He})}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Task"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Priority"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4 font-medium",children:"Date Assigned"}),a.jsx("th",{className:"py-3 px-4 font-medium text-center w-24",children:W.length>0?a.jsx("button",{onClick:it,className:"text-red-600 hover:text-red-800 transition p-1 rounded-full hover:bg-red-50",title:`Delete ${W.length} selected tasks`,children:a.jsx(va,{size:18})}):""})]})}),a.jsx("tbody",{children:Ze.length>0?Ze.map(G=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors text-sm cursor-pointer",children:[a.jsx("td",{className:"py-3 px-4",onClick:X=>X.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-blue-600",checked:W.includes(G.id),onChange:()=>Xe(G.id)})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap font-medium",onClick:()=>xe(G,!0),children:G.title}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${he(G.status||"Not started")}`,children:G.status||"Not started"})}),a.jsx("td",{className:"py-3 px-4 whitespace-nowrap",onClick:()=>xe(G,!0),children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${ie(G.priority||"Low")}`,children:G.priority||"Low"})}),a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",onClick:()=>xe(G,!0),children:G.assignedToName||"Unassigned"}),a.jsx("td",{className:`py-3 px-4 text-gray-700 whitespace-nowrap ${Ue(G)?"text-red-600 font-medium":""}`,onClick:()=>xe(G,!0),children:G.dateAssigned?RT(G.dateAssigned):""}),a.jsx("td",{})]},G.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No tasks found."})})})]})})}),!p&&!t&&n==="list"&&a.jsx(la,{className:"mt-6",totalItems:Ve.length,pageSize:E,currentPage:Ve.length===0?0:T,onPrev:()=>A(G=>Math.max(G-1,1)),onNext:()=>A(G=>Math.min(G+1,Math.max(1,Math.ceil(Ve.length/E)||1))),onPageSizeChange:G=>{M(G),A(1)},pageSizeOptions:[10,20,30,40,50],label:"tasks"}),a.jsx(v0,{isOpen:r,onClose:le,onSave:Fe,onEdit:()=>u(!1),setFormData:Z,formData:we,isEditing:!c&&!!o,viewMode:c,users:_,currentUser:e,onDelete:ke}),O&&a.jsx(ZWe,{open:!0,title:O.title,message:O.message,confirmLabel:O.confirmLabel,cancelLabel:O.cancelLabel,variant:O.variant,onConfirm:ze,onCancel:at,loading:D})]})}function XWe({icon:e,title:t,value:n,color:s,bgColor:r,onClick:i}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300 cursor-default",onClick:i,children:[a.jsx("div",{className:`flex-shrink-0 p-3 rounded-full ${r} ${s} mr-4`,children:e?a.jsx(e,{size:22}):null}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function ZWe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r,variant:i,loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function JWe({column:e,columnTasks:t,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o}){const{isOver:l,setNodeRef:c}=Wx({id:e});return a.jsxs("div",{ref:c,className:`bg-white p-4 shadow border flex flex-col relative rounded-md transition-all duration-200 min-h-[200px] ${l?"border-blue-400 bg-blue-50 ring-2 ring-blue-300":"border-gray-200"}`,children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-5 bg-secondary rounded-t-md"}),a.jsxs("div",{className:"flex items-center justify-between mb-3 pt-7",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full text-gray-500",children:t.length})]}),a.jsx("div",{className:`space-y-3 flex-1 ${t.length>3?"overflow-y-auto max-h-[480px] hide-scrollbar":""}`,children:t.length>0?t.map(u=>a.jsx(eVe,{task:u,getTaskCardColor:n,isTaskOverdue:s,formatDateDisplay:r,handleOpenModal:i,handleDeleteTask:o},u.id)):a.jsx("div",{className:`text-center py-10 text-gray-500 border-2 border-dashed rounded-lg ${l?"border-blue-300 bg-blue-50":"border-gray-200"}`,children:l?"Drop here":"No tasks"})})]})}function eVe({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s,handleOpenModal:r,handleDeleteTask:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,isDragging:d}=Gx({id:e.id}),h=u?{transform:`translate3d(${u.x}px, ${u.y}px, 0)`}:void 0;return a.jsxs("div",{ref:c,style:h,className:`border rounded-lg p-3 transition flex justify-between items-start cursor-grab active:cursor-grabbing ${t(e)} ${d?"opacity-50 shadow-lg ring-2 ring-blue-400":""}`,...l,...o,children:[a.jsxs("div",{className:"text-left flex-1",onClick:p=>{p.stopPropagation(),r(e,!0)},children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]}),a.jsxs("div",{className:"flex items-center gap-2 ml-3",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),r(e)},className:"text-blue-500 hover:text-blue-700",children:a.jsx(hn,{})}),a.jsx("button",{type:"button",onClick:p=>{p.stopPropagation(),i(e)},className:"text-red-500 hover:text-red-700",children:a.jsx(va,{})})]})]})}function tVe({task:e,getTaskCardColor:t,isTaskOverdue:n,formatDateDisplay:s}){return a.jsx("div",{className:`border rounded-lg p-3 shadow-xl ring-2 ring-blue-400 ${t(e)}`,style:{width:"280px"},children:a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("p",{className:"font-medium text-gray-800 text-sm",children:e.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Priority: ",e.priority]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Assigned To: ",e.assignedToName]}),a.jsxs("p",{className:"text-xs mt-1 text-gray-500",children:["Date: ",a.jsx("span",{className:n(e)?"text-red-600":"text-gray-600",children:e.dateAssigned?s(e.dateAssigned):""})]})]})})}const kee=e=>e?e.toUpperCase():"",ev=e=>{const t=kee(e);return t==="PLANNED"||t==="IN PROGRESS"?"PLANNED":t==="HELD"||t==="DONE"?"HELD":t==="NOT_HELD"||t==="NOT HELD"?"NOT_HELD":"PLANNED"},aVe=e=>{if(!e)return"";const t=String(e).split("-");return t.length===3?`${t[0]}-${t[2]}`:String(e)},nVe=e=>{if(!e)return"--";try{return new Date(e).toLocaleString()}catch{return"--"}},sVe=e=>{const t=kee(e);switch(t==="PLANNED"?"PENDING":t==="HELD"?"COMPLETED":t==="NOT_HELD"?"CANCELLED":t){case"PENDING":return"bg-indigo-100 text-indigo-700";case"COMPLETED":case"DONE":return"bg-green-100 text-green-700";case"CANCELLED":return"bg-gray-200 text-gray-700";case"IN PROGRESS":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},zT={subject:"",startTime:"",endTime:"",location:"",status:"PLANNED",notes:"",assignedTo:"",relatedType1:"Lead",relatedTo1:"",relatedType2:null,relatedTo2:""},rVe=()=>{const e=Tt(),t=Jt(),[n]=Us(),s=n.get("id"),r=t.pathname==="/admin/meetings/info";f.useEffect(()=>{document.title="Meetings | Sari-Sari CRM"},[]);const[i,o]=f.useState([]),[l,c]=f.useState(!1),[u,d]=f.useState([]),[h,p]=f.useState(""),[x,v]=f.useState("Filter by Status"),[j,b]=f.useState(!1),[N,w]=f.useState(null),[S,_]=f.useState(1),[k,T]=f.useState(10),[A,E]=f.useState(zT),[M,O]=f.useState(!1),[I,D]=f.useState(null),[H,W]=f.useState(!1),[z,Q]=f.useState(null),[J,Y]=f.useState(!1),[re,we]=f.useState(null),[Z,ne]=f.useState(new Set),[pe,Ne]=f.useState(!1),{user:de}=Gt();f.useEffect(()=>{const he=t.state?.openMeetingModal,ie=t.state?.initialMeetingData?.relatedTo||n.get("id"),G=t.state?.meetingID;he||ie?(b(!0),t.state?.initialMeetingData&&E(X=>({...X,...t.state.initialMeetingData})),e(t.pathname,{replace:!0,state:{}})):G&&(we(G),e(t.pathname,{replace:!0,state:{}}))},[t,n,e]),f.useEffect(()=>{if(re&&i.length>0&&!l){const he=i.find(ie=>ie.id===re);he?w(he):V.error("Meeting not found."),we(null)}},[re,i,l]);const be=async()=>{if(s&&r){const he=sessionStorage.getItem("meetingDetailData");if(he)try{const ie=JSON.parse(he);if(ie.id===parseInt(s)){w(ie),sessionStorage.removeItem("meetingDetailData");return}}catch(ie){console.error(ie)}}c(!0);try{const he=await se.get("/meetings/admin/fetch-all"),G=[...Array.isArray(he.data)?he.data:[]].sort((X,ve)=>{const $e=X?.created_at?new Date(X.created_at).getTime():0;return(ve?.created_at?new Date(ve.created_at).getTime():0)-$e});if(o(G),s&&!N){const X=G.find(ve=>ve.id===parseInt(s));X&&w(X)}}catch{V.error("Failed to load meetings.")}finally{c(!1)}},oe=async()=>{try{const he=await se.get("/users/all");d(Array.isArray(he.data)?he.data:[])}catch(he){console.error(he)}};f.useEffect(()=>{be(),oe()},[]);const Te=he=>p(he.target.value),ue=f.useMemo(()=>{if(!de?.id)return[];const he=de?.role?.toUpperCase();return he==="GROUP MANAGER"||he==="CEO"||he==="ADMIN"?i:i.filter(ie=>ie.created_by===de.id||ie.meet_assign_to?.id===de.id)},[i,de?.id,de?.role]),le=["GROUP MANAGER","MANAGER","SALES"].includes(de?.role?.toUpperCase())?ue.filter(he=>!(he.status?.toUpperCase()==="INACTIVE")):ue,Fe=f.useMemo(()=>{const he=h.trim().toLowerCase(),ie=x.trim().toUpperCase();return le.filter(G=>{const X=[G?.activity,G?.description,G?.relatedTo,G?.assignedTo],ve=he===""||X.some(Le=>Le&&Le.toString().toLowerCase().includes(he)),$e=ie==="FILTER BY STATUS"||ev(G.status||"PENDING")===ie;return ve&&$e})},[le,h,x]),ke=f.useMemo(()=>{const he=(S-1)*k;return Fe.slice(he,he+k)},[Fe,S,k]),He=()=>{b(!1),E(zT),O(!1),D(null),W(!1)},Xe=()=>{E(zT),O(!1),D(null),b(!0)},it=he=>{let ie="";if(he.meet_assign_to?.id)ie=String(he.meet_assign_to.id);else if(he.assignedTo){const rt=u.find(st=>`${st.first_name} ${st.last_name}`===he.assignedTo);ie=rt?String(rt.id):""}const G=rt=>{if(!rt)return"";try{const st=new Date(rt),Ie=st.getTimezoneOffset()*6e4;return new Date(st.getTime()-Ie).toISOString().slice(0,16)}catch{return""}};let X="Lead",ve="",$e="Contact",Le="";if(he.lead)X="Lead",ve=String(he.lead.id);else if(he.account)X="Account",ve=String(he.account.id),he.contact?($e="Contact",Le=String(he.contact.id)):he.deal?($e="Deal",Le=String(he.deal.id)):he.quote&&($e="Quote",Le=String(he.quote.id));else if(he.relatedType||he.related_type){const rt=he.relatedType||he.related_type,st=he.related_to||he.relatedToId;rt==="Lead"?(X="Lead",ve=String(st)):(X="Account",ve=he.account_id?String(he.account_id):"")}const me={PLANNED:"Planned",HELD:"Held",NOT_HELD:"Not held"},Re=ev(he.status),qe=me[Re]||"Planned";E({subject:he.subject||he.activity||"",location:he.location||"",startTime:G(he.start_time||he.startTime),endTime:G(he.end_time||he.endTime),status:qe,notes:he.description||he.notes||"",assignedTo:ie,relatedType1:X,relatedTo1:ve,relatedType2:$e,relatedTo2:Le}),O(!0),D(he.id),w(null),b(!0)},ze=he=>{if(!he.subject?.trim())return V.error("Subject is required.");if(!he.startTime)return V.error("Start time is required.");if(he.endTime&&!(new Date(he.endTime)-new Date(he.startTime)>0))return V.error("End time must be after start time.");he.relatedType1,he.relatedTo1,he.relatedType1==="Account"&&he.relatedType2&&he.relatedTo2&&(he.relatedType2,he.relatedTo2);const ie={...he,assignedTo:parseInt(he.assignedTo),relatedTo1:parseInt(he.relatedTo1),relatedTo2:parseInt(he.relatedTo2)},G=M&&I?"update":"create";Q({title:G==="create"?"Confirm New Meeting":"Confirm Update",message:`Are you sure you want to ${G} "${ie.subject}"?`,confirmLabel:G==="create"?"Create Meeting":"Update Meeting",variant:"primary",action:{type:G,payload:ie,targetId:I,name:ie.subject}})},at=async()=>{if(!z?.action)return;const{type:he,payload:ie,targetId:G,name:X,targetIds:ve,count:$e}=z.action;Y(!0);try{if(he==="create")W(!0),await se.post("/meetings/create",ie),V.success(`Meeting "${X}" created.`),He(),await be();else if(he==="update")W(!0),await se.put(`/meetings/${G}`,ie),V.success(`Meeting "${X}" updated.`),He(),await be();else if(he==="delete")await se.put("/meetings/bulk-archive",{meeting_ids:[G]}),V.success(`Meeting "${X}" archived successfully.`),N?.id===G&&w(null),await be();else if(he==="bulk-delete"){if(!ve||ve.length===0)throw new Error("Missing meeting identifiers for bulk archiving.");Ne(!0),await se.put("/meetings/bulk-archive",{meeting_ids:ve}),V.success(`${$e} meeting${$e!==1?"s":""} archived successfully.`),ne(new Set),await be(),N&&Z.has(N.id)&&w(null)}}catch(Le){const me=he==="create"?"Failed to create meeting. Please review the details and try again.":he==="update"?"Failed to update meeting. Please review the details and try again.":he==="bulk-delete"?"Failed to archive meetings. Please try again.":"Failed to archive meeting. Please try again.",Re=Le?.response?.data?.detail||me;V.error(Re),console.error(Le)}finally{(he==="create"||he==="update")&&W(!1),he==="bulk-delete"&&Ne(!1),Y(!1),Q(null)}},Ve=he=>{Q({title:"Archive Meeting",message:`Are you sure you want to archive "${he.subject||he.activity}"? You can restore it later if needed.`,confirmLabel:"Archive",variant:"archive",action:{type:"delete",targetId:he.id,name:he.subject||he.activity}})},Ze=he=>{const ie=ke.find(G=>G.id===he);ie&&ie.created_by===de?.id&&ne(G=>{const X=new Set(G);return X.has(he)?X.delete(he):X.add(he),X})},Je=()=>{const he=ke.filter(ie=>ie.created_by===de?.id);Z.size===he.length?ne(new Set):ne(new Set(he.map(ie=>ie.id)))},Ue=()=>{if(Z.size===0)return;const he=Z.size;Q({title:"Archive Meetings",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:he})," meeting",he!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${he} Meeting${he!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(Z),count:he}})},_e=async(he,ie)=>{try{await se.put(`/meetings/${he}`,{status:ie}),V.success("Status updated"),be(),w(null)}catch{V.error("Failed to update status")}};return r&&s?N?a.jsx(vd,{meeting:N,onClose:()=>{w(null),e("/admin/dashboard")},onEdit:it,onDelete:Ve,onStatusUpdate:_e,currentUser:de,isSalesView:!0}):a.jsx(Wt,{message:"Loading meeting..."}):a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[l&&a.jsx(Wt,{message:"Loading meetings..."}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800 mb-4 lg:mb-0",children:[a.jsx(Dt,{className:"mr-2 text-blue-600"})," Meetings"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:Xe,className:"bg-black text-white px-4 py-2 rounded-md flex items-center hover:bg-gray-800",children:[a.jsx(ta,{className:"mr-2"})," Add Meeting"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full sm:w-auto lg:w-4/4 md:w-3/4",children:[a.jsx(Kt,{className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search meetings",value:h,onChange:Te,className:"w-full outline-none"})]}),a.jsxs("select",{value:x,onChange:he=>v(he.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full sm:w-auto",children:[a.jsx("option",{children:"Filter by Status"}),a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:Z.size===ke.filter(he=>he.created_by===de?.id).length&&ke.filter(he=>he.created_by===de?.id).length>0,onChange:Je,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Start Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:Z.size>0&&a.jsx("button",{onClick:Ue,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected meetings",disabled:pe,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:ke.length>0?ke.map(he=>a.jsxs("tr",{onClick:()=>w(he),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4",onClick:ie=>ie.stopPropagation(),children:de?.id===he.created_by&&a.jsx("input",{type:"checkbox",checked:Z.has(he.id),onChange:ie=>{ie.stopPropagation(),Ze(he.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("td",{className:"py-3 px-4 font-medium text-blue-600",children:he.subject}),a.jsxs("td",{className:"py-3 px-4",children:[he.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:he.lead.title}),he.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:he.account.name}),he.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[he.contact.first_name," ",he.contact.last_name]}),he.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:he.deal.name}),he.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:aVe(he.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4",children:nVe(he.start_time)}),a.jsxs("td",{className:"py-3 px-4",children:[he.meet_assign_to.first_name," ",he.meet_assign_to.last_name]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${sVe(ev(he.status))}`,children:ev(he.status).replace("_"," ")})})]},he.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"text-center py-4 text-gray-500",children:"No meetings found."})})})]})}),a.jsx(la,{totalItems:Fe.length,pageSize:k,currentPage:S,onPrev:()=>_(he=>Math.max(1,he-1)),onNext:()=>_(he=>he+1),onPageSizeChange:T,label:"meetings"}),j&&a.jsx(T1,{onClose:He,formData:A,setFormData:E,isEditing:M,onSubmit:ze,isSubmitting:H||J,users:u}),N&&a.jsx(vd,{meeting:N,onClose:()=>w(null),onEdit:it,onDelete:Ve,onStatusUpdate:_e,currentUser:de,isSalesView:!0}),z&&a.jsx(iVe,{open:!0,title:z.title,message:z.message,confirmLabel:z.confirmLabel,variant:z.variant,onConfirm:at,onCancel:()=>Q(null),loading:J})]})};function iVe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{onClick:c,disabled:o,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",children:"Cancel"}),a.jsx("button",{onClick:l,disabled:o,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70
                       ${u}`,children:o?"...":s})]})]})})}const oVe=[{value:"PLANNED",label:"PLANNED"},{value:"HELD",label:"HELD"},{value:"NOT_HELD",label:"NOT HELD"}],lVe=e=>e?String(e).toUpperCase():"",pf=e=>{const t=lVe(e);return t==="PLANNED"||t==="PENDING"?"PLANNED":t==="HELD"||t==="COMPLETED"?"HELD":t==="NOT HELD"||t==="NOT_HELD"||t==="CANCELLED"?"NOT_HELD":"PLANNED"},FT=e=>{const t=pf(e);return t==="PLANNED"?"PLANNED":t==="HELD"?"HELD":t==="NOT_HELD"?"NOT HELD":"--"},uH=e=>{switch(pf(e)){case"PLANNED":return"bg-indigo-100 text-indigo-700";case"HELD":return"bg-green-100 text-green-700";case"NOT_HELD":return"bg-gray-200 text-gray-700";default:return"bg-gray-100 text-gray-700"}},mH=e=>e?new Date(e).toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"--";function cVe(){const[e,t]=f.useState(!1),[n,s]=f.useState(null),[r,i]=f.useState(null),[o,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[p,x]=f.useState(null),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(!1),[_,k]=f.useState(!1),[T,A]=f.useState("PLANNED"),[E,M]=f.useState(!1),[O,I]=f.useState(!1),[D,H]=f.useState(null),[W,z]=f.useState(new Set),[Q,J]=f.useState(!1),{user:Y}=Gt(),{comments:re,addComment:we,refresh:Z}=kn({relatedType:"call",relatedId:n?.id});f.useEffect(()=>{n?.id&&Z()},[n?.id,Z]),Us();const ne=Tt(),pe=Jt(),Ne=q=>{if(!q)return"";const fe=String(q).split("-");return fe.length===3?`${fe[0]}-${fe[2]}`:String(q)},be={subject:"",call_time:(()=>{const q=new Date,fe=q.getFullYear(),te=String(q.getMonth()+1).padStart(2,"0"),B=String(q.getDate()).padStart(2,"0");return`${fe}-${te}-${B}T08:00`})(),duration_minutes:"",direction:"Outgoing",status:"Planned",notes:"",relatedType1:"Lead",relatedType2:null,relatedTo1:null,relatedTo2:null,assigned_to:null},[oe,Te]=f.useState(be);f.useEffect(()=>{const q=pe.state,fe=q?.callID;if(fe&&!q?.openCallModal){H(fe),ne(pe.pathname,{replace:!0,state:{}});return}!q?.openCallModal||!q?.initialCallData||q.initialCallData.relatedType1==="Lead"&&Array.isArray(o)&&o.length===0||q.initialCallData.relatedType1==="Account"&&(!Array.isArray(o)||o.length===0)||(t(!0),Te(te=>({...te,...q.initialCallData,relatedTo1:q.initialCallData.relatedTo1?String(q.initialCallData.relatedTo1):"",relatedTo2:q.initialCallData.relatedTo2?String(q.initialCallData.relatedTo2):""})),ne(pe.pathname,{replace:!0,state:{}}))},[pe.state,o]),f.useEffect(()=>{if(D&&d.length>0&&!O){const q=d.find(fe=>fe.id===D);q?s(q):V.error("Call not found."),H(null)}},[D,d,O]);const ue=async()=>{try{I(!0);const q=await se.get("/calls/admin/fetch-all"),te=[...Array.isArray(q.data)?q.data:[]].sort((B,ce)=>{const De=B?.created_at?new Date(B.created_at):0;return(ce?.created_at?new Date(ce.created_at):0)-De});h(te)}catch(q){console.error("Error fetching calls:",q),V.error("Failed to load calls")}finally{I(!1)}},Oe=async()=>{try{const q=await se.get("/users/all");x(q.data)}catch(q){console.error("Error fetching users: ",q)}};f.useEffect(()=>{Oe(),ue()},[]);const xe=[],[le,Fe]=f.useState(""),[ke,He]=f.useState("Filter by Status"),[Xe,it]=f.useState("Filter by Users"),[ze,at]=f.useState(1),[Ve,Ze]=f.useState(10),Ue=["GROUP MANAGER","MANAGER","SALES"].includes(Y?.role?.toUpperCase())?d.filter(q=>q.status!=="INACTIVE"):d,_e=Math.max(1,Math.ceil(Ue.length/Ve)||1);f.useEffect(()=>{at(1)},[le,ke,Ve]),f.useEffect(()=>{at(q=>{const fe=Math.max(1,Math.ceil(Ue.length/Ve)||1);return q>fe?fe:q})},[Ue.length,Ve]);const he=f.useMemo(()=>{const q=(ze-1)*Ve;return Ue.slice(q,q+Ve)},[Ue,ze,Ve]),ie=()=>at(q=>Math.max(q-1,1)),G=()=>at(q=>Math.min(q+1,_e)),X=d.length,ve=d.filter(q=>pf(q.status)==="PLANNED").length,$e=d.filter(q=>pf(q.status)==="HELD").length,Le=d.filter(q=>pf(q.status)==="NOT_HELD").length,me=[{title:"Total",value:X,icon:zs,color:"text-slate-600",bgColor:"bg-slate-100"},{title:"Planned",value:ve,icon:Vs,color:"text-indigo-600",bgColor:"bg-indigo-100"},{title:"Held",value:$e,icon:Qa,color:"text-green-600",bgColor:"bg-green-100"},{title:"Not Held",value:Le,icon:Fs,color:"text-gray-600",bgColor:"bg-gray-100"}],[Re,qe]=f.useState("Overview"),rt=q=>{const{name:fe,value:te}=q.target;Te(B=>{const ce={...B,[fe]:te};return fe==="relatedType1"&&(ce.relatedTo1="",te==="Lead"?(ce.relatedType2=null,ce.relatedTo2=null,u([])):te==="Account"&&(ce.relatedType2="Contact")),fe==="relatedType2"&&(ce.relatedTo2=""),ce})};f.useEffect(()=>{const q=async()=>{try{l([]);let fe;oe.relatedType1==="Lead"?fe=await se.get("/leads/admin/getLeads"):oe.relatedType1==="Account"&&(fe=await se.get("/accounts/admin/fetch-all"));let te=[];if(fe&&Array.isArray(fe.data)?te=fe.data:te=[],v&&oe.relatedTo1)try{let B;oe.relatedType1==="Lead"?B=await se.get(`/leads/get/${oe.relatedTo1}`):oe.relatedType1==="Account"&&(B=await se.get(`/accounts/get/${oe.relatedTo1}`)),B&&B.data&&(te.some(De=>String(De.id)===String(oe.relatedTo1))||(te=[B.data,...te]))}catch(B){console.error("Error fetching specific related item:",B)}l(te)}catch(fe){console.error("Error fetching data:",fe),l([])}};oe.relatedType1&&q()},[oe.relatedType1,v,oe.relatedTo1]),f.useEffect(()=>{const q=async()=>{try{u([]);let fe;if(oe.relatedType1==="Account"&&oe.relatedTo1)oe.relatedType2==="Contact"?fe=await se.get(`/contacts/from-acc/${oe.relatedTo1}`):oe.relatedType2==="Deal"?fe=await se.get(`/deals/from-acc/${oe.relatedTo1}`):oe.relatedType2==="Quote"&&(fe=await se.get(`/quotes/from-acc/${oe.relatedTo1}`));else{u([]);return}let te=[];if(fe&&Array.isArray(fe.data)?te=fe.data:te=[],v&&oe.relatedTo2)try{let B;oe.relatedType2==="Contact"?B=await se.get(`/contacts/get/${oe.relatedTo2}`):oe.relatedType2==="Deal"?B=await se.get(`/deals/get/${oe.relatedTo2}`):oe.relatedType2==="Quote"&&(B=await se.get(`/quotes/get/${oe.relatedTo2}`)),B&&B.data&&(te.some(De=>String(De.id)===String(oe.relatedTo2))||(te=[B.data,...te]))}catch(B){console.error("Error fetching specific related item:",B)}u(te)}catch(fe){console.error("Error fetching data:",fe),u([])}};oe.relatedType2&&q()},[oe.relatedType2,oe.relatedTo1,oe.relatedType1,v,oe.relatedTo2]);const[st,Ie]=f.useState(!1),ot=q=>{q.preventDefault(),Ie(!0);const fe=oe.subject;if(!fe||fe.trim()===""){V.error("Subject is required.");return}if(!oe.relatedTo1){V.error(`Please select a ${oe.relatedType1||"Lead/Account"}.`);return}if(!oe.assigned_to){V.error("Subject is required.");return}const B={...oe,duration_minutes:oe.duration_minutes?parseInt(oe.duration_minutes,10):null,relatedTo1:oe.relatedTo1?parseInt(oe.relatedTo1,10):null,relatedTo2:oe.relatedType1==="Lead"?null:oe.relatedTo2?parseInt(oe.relatedTo2,10):null,relatedType2:oe.relatedType1==="Lead"?null:oe.relatedType2,assigned_to:oe.assigned_to?parseInt(oe.assigned_to,10):null},ce=v&&b?"update":"create",De=(oe.subject||"").trim()||"Untitled Call";i({title:ce==="create"?"Confirm New Call":"Confirm Update",message:ce==="create"?`Create "${De}"?`:`Save changes to "${De}"?`,confirmLabel:ce==="create"?"Create Call":"Update Call",cancelLabel:"Cancel",variant:"primary",action:{type:ce,payload:B,targetId:b||null,name:De}})},Ct=q=>s(q),kt=()=>{t(!1),j(!1),N(null)},At=async()=>{if(!r?.action){i(null);return}const{action:q}=r,{type:fe,payload:te,targetId:B,name:ce}=q;k(!0);try{if(fe==="create")S(!0),await se.post("/calls/create",te),V.success(`Call "${ce}" created successfully.`),t(!1),Te(be),j(!1),N(null),await ue();else if(fe==="update"){if(!B)throw new Error("Missing call identifier for update.");S(!0),await se.put(`/calls/${B}`,te),V.success(`Call "${ce}" updated successfully.`),t(!1),Te(be),j(!1),N(null),await ue()}else if(fe==="delete"){if(!B)throw new Error("Missing call identifier for archiving.");await se.put(`/calls/${B}`,{status:"INACTIVE"}),V.success(`Call "${ce}" archived successfully.`),n?.id===B&&s(null),await ue()}else if(fe==="bulk-delete"){const{targetIds:De,count:U}=q;if(!De||De.length===0)throw new Error("Missing call identifiers for bulk archiving.");J(!0),await se.put("/calls/bulk-archive",{call_ids:De}),V.success(`${U} call${U!==1?"s":""} archived successfully.`),z(new Set),await ue(),n&&W.has(n.id)&&s(null)}}catch(De){const U=fe==="create"?"Failed to create call. Please review the details and try again.":fe==="update"?"Failed to update call. Please review the details and try again.":fe==="bulk-delete"?"Failed to archive calls. Please try again.":"Failed to archive call. Please try again.",K=De?.response?.data?.detail||U;V.error(K)}finally{(fe==="create"||fe==="update")&&S(!1),fe==="bulk-delete"&&J(!1),k(!1),i(null)}},jt=()=>{_||i(null)},ge=q=>{const fe=he.find(te=>te.id===q);fe&&fe.call_creator?.id===Y?.id&&z(te=>{const B=new Set(te);return B.has(q)?B.delete(q):B.add(q),B})},ye=()=>{const q=he.filter(fe=>fe.call_creator?.id===Y?.id);W.size===q.length?z(new Set):z(new Set(q.map(fe=>fe.id)))},Pe=()=>{if(W.size===0)return;const q=W.size;i({title:"Archive Calls",message:a.jsxs("span",{children:["Are you sure you want to archive"," ",a.jsx("span",{className:"font-semibold",children:q})," call",q!==1?"s":"","? You can restore them later if needed."]}),confirmLabel:`Archive ${q} Call${q!==1?"s":""}`,cancelLabel:"Cancel",variant:"archive",action:{type:"bulk-delete",targetIds:Array.from(W),count:q}})},Ce=async()=>{if(n?.id)try{M(!0),await se.put(`/calls/${n.id}`,{status:T}),V.success(`Status updated to ${FT(T)}`),h(q=>Array.isArray(q)?q.map(fe=>fe.id===n.id?{...fe,status:T}:fe):q),s(null)}catch(q){const fe=q.response?.data?.detail||"Failed to update status.";V.error(fe)}finally{M(!1)}};f.useEffect(()=>{n&&A(pf(n.status))},[n]);const Qe=n?a.jsxs("div",{id:"callModalBackdrop",onClick:q=>q.target.id==="callModalBackdrop"&&s(null),className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:[O&&a.jsx(Wt,{message:"Loading call details..."}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-full lg:max-w-4xl max-h-[95vh] overflow-y-auto hide-scrollbar relative box-border",children:[a.jsxs("div",{className:"bg-tertiary w-full rounded-t-xl p-3 lg:p-3 relative",children:[a.jsx("h1",{className:"lg:text-3xl text-xl text-white font-semibold text-center w-full",children:"Calls"}),a.jsx("button",{onClick:()=>s(null),className:"text-gray-500 hover:text-white transition cursor-pointer absolute top-3 right-3",children:a.jsx(Za,{size:25})})]}),a.jsx("div",{className:"mt-4 gap-2 px-2 lg:gap-4 lg:mx-7",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:n.subject}),a.jsx("span",{className:`text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full ${uH(n.status)}`,children:FT(n.status)})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:Y?.id===n.call_creator?.id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>{const q=De=>{if(!De)return"";const U=new Date(De),K=U.getFullYear(),je=String(U.getMonth()+1).padStart(2,"0"),Be=String(U.getDate()).padStart(2,"0"),tt=String(U.getHours()).padStart(2,"0"),lt=String(U.getMinutes()).padStart(2,"0");return`${K}-${je}-${Be}T${tt}:${lt}`},fe=n.lead?"Lead":n.account?"Account":"Lead",te=n.lead?n.lead.id:n.account?n.account.id:null,B=fe==="Lead"?null:n.contact?"Contact":n.deal?"Deal":n.quote?"Quote":"Contact",ce=fe==="Lead"?null:n.contact?n.contact.id:n.deal?n.deal.id:n.quote?n.quote.id:null;Te({subject:n.subject||"",call_time:q(n.call_time),duration_minutes:n.duration_minutes?String(n.duration_minutes):"",direction:n.direction||"Outgoing",status:n.status||"Planned",notes:n.notes||"",relatedType1:fe,relatedType2:B,relatedTo1:te?String(te):"",relatedTo2:ce?String(ce):"",assigned_to:n.call_assign_to?.id?String(n.call_assign_to.id):""}),j(!0),N(n.id),s(null),t(!0)},children:[a.jsx(gn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-orange-500 text-white hover:bg-orange-600 transition focus:outline-none focus:ring-2 focus:ring-orange-400",onClick:()=>{const q=n.subject||"this call";i({title:"Archive Call",message:`Are you sure you want to archive "${q}"? You can restore it later if needed.`,confirmLabel:"Archive Call",cancelLabel:"Cancel",variant:"archive",action:{type:"delete",targetId:n.id,name:q}})},children:[a.jsx(Zt,{className:"mr-2"}),"Archive"]})]})})]})}),a.jsx("div",{className:"border-b border-gray-200 my-5"}),a.jsxs("div",{className:"p-6 lg:p-4",children:[a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview","Notes"].map(q=>a.jsx("button",{onClick:()=>qe(q),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium border-b-2 ${Re===q?"bg-paper-white text-[#6A727D] border-white":"text-white hover:bg-[#5c636d]"}`,children:q},q))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsxs("div",{className:"lg:col-span-3",children:[Re==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsx(yo,{label:"Call Time",value:mH(n.call_time)}),a.jsx(yo,{label:"Duration",value:n.duration_minutes?`${n.duration_minutes} min`:null}),a.jsx(yo,{label:"Direction",value:n.direction||"--"}),a.jsx(yo,{label:"Assigned To",value:`${n.call_assign_to.first_name} ${n.call_assign_to.last_name}`}),n.lead&&a.jsx(yo,{label:"Lead",value:n.lead.title}),n.account&&a.jsx(yo,{label:"Account",value:n.account.name}),n.contact&&a.jsx(yo,{label:"Contact",value:`${n.contact.first_name} ${n.contact.last_name}`}),n.deal&&a.jsx(yo,{label:"Deal",value:n.deal.name}),n.quote&&a.jsx(yo,{label:"Quote",value:Ne(n.quote.quote_id)}),a.jsx(yo,{label:"Created At",value:mH(n.created_at)})]})}),Re==="Notes"&&a.jsxs("div",{className:"mt-4 w-full",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between mb-4 gap-2",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-800 break-words",children:"Call Note"})}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-4 shadow-sm break-words",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm font-medium text-gray-800 break-words",children:"Note"})})}),a.jsx("div",{className:"mt-3 text-sm text-gray-700 whitespace-pre-wrap break-words",children:n.notes||"No notes available."})]}),a.jsx(Tn,{comments:re,onAddComment:we})]})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 py-1.5 w-full text-sm mb-2",value:T,onChange:q=>A(q.target.value),children:[a.jsx("option",{value:"PLANNED",children:"PLANNED"}),a.jsx("option",{value:"HELD",children:"HELD"}),a.jsx("option",{value:"NOT_HELD",children:"NOT HELD"})]}),a.jsx("button",{onClick:Ce,disabled:E,className:"w-full py-1.5 rounded-md text-sm bg-gray-900 text-white hover:bg-gray-800 disabled:opacity-50",children:E?"Updating...":"Update"})]})]})]})]})]}):null,F=e?a.jsx("div",{id:"modalBackdrop",onClick:q=>q.target.id==="modalBackdrop"&&kt(),className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-xl rounded-2xl shadow-lg p-4 sm:p-6 md:p-8 relative border border-gray-200 overflow-y-auto max-h-[90vh] hide-scrollbar",children:[a.jsx("button",{onClick:()=>{kt(),Ie(!1)},className:"absolute top-4 right-4 text-gray-500 hover:text-black transition",children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 flex items-center justify-center",children:v?"Edit Call":"Add New Call"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 w-full gap-4 text-sm",onSubmit:ot,noValidate:!0,children:[a.jsx(uVe,{label:"Subject",className:"md:col-span-2",name:"subject",value:oe.subject,onChange:rt,isSubmitted:st,required:!0}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("div",{className:"relative w-25",children:[a.jsxs("select",{name:"relatedType1",onChange:rt,value:oe.relatedType1,className:"outline-none cursor-pointer mb-1 w-22 text-gray-700 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:w,children:[a.jsx("option",{value:"Lead",children:"Lead"}),a.jsx("option",{value:"Account",children:"Account"})]}),a.jsx("span",{className:"absolute left-10 md:pl-6 pl-6 top-1/2 -translate-y-1/2 text-red-500 pointer-events-none",children:"*"})]}),a.jsx(UT,{items:Array.isArray(o)?o:[],value:oe.relatedTo1??"",placeholder:`Search ${oe.relatedType1||"here"}...`,getLabel:q=>oe.relatedType1==="Lead"?q.title:q.name??"",onChange:q=>Te(fe=>({...fe,relatedTo1:q})),required:!0,isSubmitted:st,disabled:w})]}),a.jsxs("div",{className:"w-full flex flex-col",children:[a.jsxs("select",{name:"relatedType2",onChange:rt,value:oe.relatedType2??"Contact",className:"text-gray-700 outline-none cursor-pointer mb-1 w-22 disabled:text-gray-400 disabled:cursor-not-allowed",disabled:oe.relatedType1==="Lead"||w,children:[a.jsx("option",{value:"Contact",children:"Contact"}),a.jsx("option",{value:"Deal",children:"Deal"}),a.jsx("option",{value:"Quote",children:"Quote"})]}),a.jsx(UT,{disabled:oe.relatedType1==="Lead"||w,items:Array.isArray(c)?c:[],value:oe.relatedTo2??"",placeholder:oe.relatedType1==="Lead"?"":Array.isArray(c)&&c.length>0?`Search ${oe.relatedType2||"Contact"}...`:`No ${oe.relatedType2||""} data found`,getLabel:q=>oe.relatedType2==="Contact"?`${q.first_name??""} ${q.last_name??""}`.trim():oe.relatedType2==="Quote"?Ne(q.quote_id)??"":q.name??"",onChange:q=>Te(fe=>({...fe,relatedTo2:q}))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Call Time"}),a.jsx("input",{type:"datetime-local",value:oe.call_time,onChange:rt,name:"call_time",className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100"})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Duration"}),a.jsxs("div",{className:"w-full rounded-md text-sm flex flex-row items-center justify-start",children:[a.jsx("input",{type:"tel",value:oe.duration_minutes,onChange:rt,name:"duration_minutes",className:"border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 w-44 mr-3"}),a.jsx("p",{children:"minutes"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:["Assign To ",a.jsx("span",{className:"text-red-600 font-semibold",children:"*"})]}),a.jsx(UT,{items:Array.isArray(p)?p:[],value:oe.assigned_to??"",placeholder:"Search an account...",getLabel:q=>`${q.first_name} ${q.last_name}`,onChange:q=>Te(fe=>({...fe,assigned_to:q})),required:!0,isSubmitted:st})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Direction"}),a.jsxs("select",{name:"direction",onChange:rt,value:oe.direction,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Incoming",children:"Incoming"}),a.jsx("option",{value:"Outgoing",children:"Outgoing"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Status"}),a.jsxs("select",{name:"status",onChange:rt,value:oe.status,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100",children:[a.jsx("option",{value:"Planned",children:"Planned"}),a.jsx("option",{value:"Held",children:"Held"}),a.jsx("option",{value:"Not held",children:"Not held"})]})]}),a.jsx(mVe,{className:"col-span-2",label:"Notes",value:oe.notes,onChange:rt,name:"notes"}),a.jsxs("div",{className:"flex flex-col md:flex-row justify-end col-span-2 mt-4 gap-2 w-full",children:[a.jsx("button",{type:"button",onClick:()=>{kt(),Ie(!1)},className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w,className:"w-full sm:w-auto px-4 py-2 text-white bg-tertiary border border-tertiary rounded hover:bg-secondary transition",children:w?"Saving...":v?"Update Call":"Save Call"})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(zs,{className:"mr-2 text-blue-600"})," Calls"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{onClick:()=>{Te(be),j(!1),N(null),t(!0),Ie(!1)},className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 my-1 lg:my-0 rounded-md hover:bg-gray-800 text-sm sm:text-base mx-auto sm:ml-auto cursor-pointer",children:[a.jsx(ta,{className:"mr-2"})," Add Call"]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4 mb-6 w-full break-words overflow-hidden lg:overflow-visible",children:me.map(q=>a.jsx(dVe,{...q},q.title))}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center gap-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search calls",className:"focus:outline-none text-base w-full",defaultValue:le})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row w-full lg:w-1/2 gap-2",children:[a.jsxs("select",{defaultValue:ke,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Status",children:"Filter by Status"}),oVe.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))]}),a.jsxs("select",{defaultValue:Xe,className:"border border-gray-300 rounded-lg px-3 h-11 text-sm bg-white w-full",children:[a.jsx("option",{value:"Filter by Users",children:"Filter by Users"}),xe.map(q=>a.jsx("option",{value:q.name,children:q.name},q.id))]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[500px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm mb-4",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4 w-12",children:a.jsx("input",{type:"checkbox",checked:W.size===he.filter(q=>q.call_creator?.id===Y?.id).length&&he.filter(q=>q.call_creator?.id===Y?.id).length>0,onChange:ye,className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("th",{className:"py-3 px-4",children:"Subject"}),a.jsx("th",{className:"py-3 px-4",children:"Related To"}),a.jsx("th",{className:"py-3 px-4",children:"Call Time"}),a.jsx("th",{className:"py-3 px-4",children:"Assigned To"}),a.jsx("th",{className:"py-3 px-4",children:"Status"}),a.jsx("th",{className:"py-3 px-4 w-12",children:W.size>0&&a.jsx("button",{onClick:Pe,className:"text-orange-500 hover:text-orange-700 transition",title:"Archive selected calls",disabled:Q,children:a.jsx(Zt,{size:18})})})]})}),a.jsx("tbody",{children:O?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"py-10",children:a.jsx(Wt,{message:"Loading calls..."})})}):he.length>0?he.map(q=>a.jsxs("tr",{onClick:()=>Ct(q),className:"hover:bg-gray-50 cursor-pointer border-b border-gray-100",children:[a.jsx("td",{className:"py-3 px-4",onClick:fe=>fe.stopPropagation(),children:Y?.id===q.call_creator?.id&&a.jsx("input",{type:"checkbox",checked:W.has(q.id),onChange:fe=>{fe.stopPropagation(),ge(q.id)},className:"w-4 h-4 cursor-pointer rounded border-gray-300"})}),a.jsx("td",{className:"py-3 px-4 text-blue-600 font-medium",children:q.subject||"--"}),a.jsxs("td",{className:"py-3 px-4",children:[q.lead&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:q.lead.title}),q.account&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:q.account.name}),q.contact&&a.jsxs("p",{className:"font-medium text-blue-500 text-xs",children:[q.contact.first_name," ",q.contact.last_name]}),q.deal&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:q.deal.name}),q.quote&&a.jsx("p",{className:"font-medium text-blue-500 text-xs",children:Ne(q.quote.quote_id)})]}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:q.call_time?new Date(q.call_time).toLocaleString():"--"}),a.jsx("td",{className:"py-3 px-4 text-gray-800",children:q?.call_assign_to?`${q.call_assign_to.first_name} ${q.call_assign_to.last_name}`:"--"}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${uH(q.status)}`,children:FT(q.status)})})]},q.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"text-center py-4 text-gray-500",children:"No calls found."})})})]})}),a.jsx(la,{totalItems:Ue.length,pageSize:Ve,currentPage:ze,onPrev:ie,onNext:G,onPageSizeChange:Ze,label:"calls"})]}),Qe,F,r&&a.jsx(fVe,{open:!0,title:r.title,message:r.message,confirmLabel:r.confirmLabel,cancelLabel:r.cancelLabel,variant:r.variant,onConfirm:At,onCancel:jt,loading:_})]})}function dVe({icon:e,title:t,value:n,color:s,bgColor:r}){return a.jsxs("div",{className:"flex items-center p-4 bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-300",children:[a.jsx("div",{className:`p-3 rounded-full ${r} ${s} mr-4`,children:a.jsx(e,{size:22})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase",children:t}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n})]})]})}function uVe({label:e,name:t,value:n,onChange:s,placeholder:r="",type:i="text",required:o=!1,disabled:l=!1,isSubmitted:c=!1,className:u=""}){const d=c&&o&&!n;return a.jsxs("div",{className:u,children:[a.jsxs("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:[e," ",o&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:i,name:t,value:n??"",onChange:s,placeholder:r,disabled:l,className:`w-full rounded-md px-2 py-1.5 text-sm outline-none border focus:ring-2 disabled:bg-gray-100
          ${d?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}
        `})]})}function mVe(e){return a.jsxs("div",{className:e.className,children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e.label}),a.jsx("textarea",{...e,className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:ring-2 focus:ring-blue-400 outline-none disabled:bg-gray-100 resize-none"})]})}function yo({label:e,value:t}){return a.jsxs("p",{children:[a.jsxs("span",{className:"font-semibold",children:[e,":"]})," ",a.jsx("br",{}),a.jsx("span",{className:"break-words",children:t||"--"})]})}function fVe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":i==="archive"?"bg-orange-500 hover:bg-orange-600 border border-orange-400":"bg-tertiary hover:bg-secondary border border-tertiary";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("p",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function UT({items:e=[],value:t="",onChange:n,getLabel:s,placeholder:r="Search...",disabled:i=!1,maxRender:o=200,required:l=!1,isSubmitted:c=!1}){const[u,d]=f.useState(!1),[h,p]=f.useState(""),x=f.useRef(null),v=e.find(w=>String(w.id)===String(t)),j=v?s(v):"",b=l&&c&&!t,N=f.useMemo(()=>{const w=h.trim().toLowerCase();return(w?e.filter(_=>(s(_)||"").toLowerCase().includes(w)):e).slice(0,o)},[e,h,s,o]);return f.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),f.useEffect(()=>{u||p("")},[u]),a.jsxs("div",{ref:x,className:"relative w-full",children:[a.jsx("input",{disabled:i,value:u?h:j,placeholder:r,onFocus:()=>!i&&d(!0),onChange:w=>{p(w.target.value),u||d(!0)},className:`w-full border rounded-md px-2 py-1.5 text-sm outline-none focus:ring-2 disabled:bg-gray-100
          ${b?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-400"}`}),u&&!i&&a.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-md shadow-lg overflow-hidden",children:[a.jsx("div",{className:"max-h-56 overflow-y-auto",children:N.length>0?N.map(w=>{const S=String(w.id),_=s(w),k=String(t)===S;return a.jsx("button",{type:"button",onClick:()=>{n(S),d(!1)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 ${k?"bg-blue-50":""}`,children:_||"--"},S)}):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"})}),e.length>o&&a.jsxs("div",{className:"px-3 py-2 text-[11px] text-gray-400 border-t",children:["Showing first ",o," results  keep typing to narrow."]})]})]})}function hVe(){f.useEffect(()=>{document.title="Audit | Sari-Sari CRM"},[]);const[e,t]=f.useState(null),[n,s]=f.useState(""),[r,i]=f.useState("Filter by Actions"),[o,l]=f.useState(1),[c,u]=f.useState(10),d=async()=>{try{const w=await se.get("/logs/read-all");t(w.data)}catch(w){console.error("Error fetching audit logs:",w)}};f.useEffect(()=>{d()},[]);const h=f.useMemo(()=>{if(!Array.isArray(e))return[];const w=n.trim().toLowerCase(),S=r?.toUpperCase?.()||"ALL";return e.filter(k=>{const T=k.timestamp?new Date(k.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"",A=`${k.entity_type||""} ${k.entity_name||k.entity_details?.name||k.entity_details?.title||k.entity_id||""}`,E=`${k.logger?.first_name||""} ${k.logger?.last_name||""}`,M=[T,E,k.action,k.entity_type,A,k.description],O=w===""||M.some(D=>D==null?!1:D.toString().toLowerCase().includes(w)),I=S==="FILTER BY ACTIONS"||(k.action||"").toUpperCase()===S;return O&&I}).sort((k,T)=>{const A=k.timestamp?new Date(k.timestamp).getTime():0;return(T.timestamp?new Date(T.timestamp).getTime():0)-A})},[e,n,r]),p=Math.max(1,Math.ceil(h.length/c)||1);f.useEffect(()=>{l(1)},[n,c]),f.useEffect(()=>{l(w=>{const S=Math.max(1,Math.ceil(h.length/c)||1);return w>S?S:w})},[h.length,c]);const x=f.useMemo(()=>{const w=(o-1)*c;return h.slice(w,w+c)},[h,o,c]);h.length===0||(o-1)*c+1,Math.min(o*c,h.length);const v=()=>l(w=>Math.max(w-1,1)),j=()=>l(w=>Math.min(w+1,p)),b=()=>{if(!h.length){Kx.error("No logs to export!");return}const w=["Timestamp","User","Action","Resource","Details"],S=h.map(E=>[new Date(E.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),`${E.logger?.first_name||""} ${E.logger?.last_name||""}`.trim(),E.action,`${E.entity_type}: ${E.entity_id}`,E.description||""]),_=[w.join(","),...S.map(E=>E.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),k=new Blob([_],{type:"text/csv;charset=utf-8;"}),T=URL.createObjectURL(k),A=document.createElement("a");A.href=T,A.download=`AuditLogs_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T)},N=w=>{switch((w||"").toUpperCase()){case"CREATE":return"bg-green-100 text-green-700";case"UPDATE":case"EDIT":return"bg-blue-100 text-blue-700";case"DELETE":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[e===null&&a.jsx(Wt,{message:"Loading audit logs..."}),a.jsx(Qx,{toastOptions:{duration:1e3}}),a.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-md flex items-center",children:[a.jsx(Dt,{className:"text-blue-600 mr-3 flex-shrink-0",size:20}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("span",{className:"font-semibold",children:"Data Retention Policy:"})," Audit logs are automatically purged after 6 months to optimize system performance."]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-5 space-y-3 sm:space-y-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"text-blue-600",size:20}),a.jsx("h2",{className:"text-2xl sm:text-xl font-semibold text-gray-700",children:"Audit Logs"})]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",onClick:b,children:[a.jsx(Wo,{className:"mr-2"}),"Export Logs"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition bg-white",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search audit logs",value:n,onChange:w=>s(w.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsxs("select",{value:r,onChange:w=>i(w.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:[a.jsx("option",{value:"Filter by Actions",children:"Filter by Actions"}),a.jsx("option",{value:"CREATE",children:"CREATE"}),a.jsx("option",{value:"DELETE",children:"DELETE"}),a.jsx("option",{value:"UPDATE",children:"UPDATE"})]})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Timestamp"}),a.jsx("th",{className:"py-3 px-4",children:"User"}),a.jsx("th",{className:"py-3 px-4",children:"Action"}),a.jsx("th",{className:"py-3 px-4",children:"Resource"}),a.jsx("th",{className:"py-3 px-4",children:"Details"})]})}),a.jsx("tbody",{children:Array.isArray(h)&&h.length>0?x.map((w,S)=>a.jsxs("tr",{className:"hover:bg-gray-50 text-sm",children:[a.jsx("td",{className:"py-3 px-4 text-gray-700 whitespace-nowrap",children:new Date(w.timestamp).toLocaleString("en-US",{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(",","")}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.name}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium whitespace-nowrap ${N(w.action)}`,children:w.action})}),a.jsxs("td",{className:"py-3 px-4 text-gray-700",children:[w.entity_type,": ",w.entity_id]}),a.jsx("td",{className:"py-3 px-4 text-gray-700",children:w.description})]},S)):a.jsx("tr",{children:a.jsx("td",{className:"py-3 px-4 text-sm text-gray-500 text-center",colSpan:5,children:"No activities to show."})})})]})}),a.jsx(la,{className:"mt-4",totalItems:h.length,pageSize:c,currentPage:o,onPrev:v,onNext:j,onPageSizeChange:u,label:"logs"})]})}const M1=[{value:"Manager",label:"Manager"},{value:"Sales",label:"Sales"}],Rg={firstName:"",lastName:"",email:"",password:"",role:""},gVe={CEO:"bg-purple-100 text-purple-700",ADMIN:"bg-purple-100 text-purple-700",GROUP_MANAGER:"bg-indigo-100 text-indigo-700",MANAGER:"bg-blue-100 text-blue-700",MARKETING:"bg-yellow-100 text-yellow-700",SALES:"bg-green-100 text-green-700"},To=e=>e?e.toString().trim().replace(/([a-z0-9])([A-Z])/g,"$1_$2").replace(/\s+/g,"_").toUpperCase():"",pVe=e=>{const t=To(e),n=M1.find(s=>To(s.value)===t);return n?n.value:e||""},dL=e=>{const t=To(e),n=M1.find(s=>To(s.value)===t);return n?n.label:typeof e=="string"?e.toLowerCase().replace(/\b\w/g,s=>s.toUpperCase()):"--"},fH=e=>{if(!e)return"--";const t=new Date(e);return Number.isNaN(t.getTime())?"--":t.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",","")},BT=(e,{size:t="sm"}={})=>{const n=To(e),s=gVe[n]||"bg-gray-100 text-gray-700",r=t==="lg"?"px-3 py-1 text-sm":t==="md"?"px-2.5 py-1 text-sm":"px-2 py-1 text-xs";return a.jsx("span",{className:`${r} font-semibold rounded-md inline-flex items-center justify-center ${s}`,children:dL(e)})},xVe=(e,t)=>{const n=e?.trim()?.[0]??"",s=t?.trim()?.[0]??"";return`${n}${s}`.toUpperCase()||"U"},hH=e=>[...e].sort((t,n)=>{const s=t.created_at?new Date(t.created_at).getTime():0;return(n.created_at?new Date(n.created_at).getTime():0)-s});function yVe(){const{user:e,loading:t}=Gt(),[n,s]=f.useState([]),[r,i]=f.useState(!1),[o,l]=f.useState(""),[c,u]=f.useState(""),[d,h]=f.useState(null),[p,x]=f.useState(!1),[v,j]=f.useState(!1),[b,N]=f.useState(null),[w,S]=f.useState(Rg),[_,k]=f.useState(!1),[T,A]=f.useState(null),[E,M]=f.useState(!1),[O,I]=f.useState(1),[D,H]=f.useState(10),[W,z]=f.useState("Overview"),[Q,J]=f.useState(""),[Y,re]=f.useState(!1),we=To(e?.role);console.log("meow",e);const Z=["ADMIN","CEO","GROUP_MANAGER"].includes(we),ne=!t&&Z,pe=f.useMemo(()=>{const ie=M1.filter(G=>To(G.value)!=="CEO");return[{label:"Filter by Roles",value:""},{label:"CEO",value:"CEO"},...ie]},[]),Ne=f.useCallback(ie=>{ie&&(s(G=>G.map(X=>X.id===ie?{...X,highlight:!0}:X)),setTimeout(()=>{s(G=>G.map(X=>X.id===ie?{...X,highlight:!1}:X))},2e3))},[]),de=f.useCallback(async()=>{i(!0);try{const ie=await se.get("/users/all"),G=Array.isArray(ie.data)?ie.data:[],X=hH(G);s(X),h(ve=>ve&&(X.find(Le=>Le.id===ve.id)||null)),console.log(ie.data)}catch(ie){console.error("Error fetching users:",ie);const G=ie.response?.data?.detail||"Failed to load users. Please try again later.";V.error(G)}finally{i(!1)}},[]);f.useEffect(()=>{!t&&!Z&&e&&V.error("You are not authorized to access User Management.")},[Z,t,e]),f.useEffect(()=>{t||!Z||de()},[t,Z,de]),f.useEffect(()=>{document.title="Users | Sari-Sari CRM"},[]);const be=f.useMemo(()=>{const ie=o.trim().toLowerCase(),G=To(c);return hH(n.filter(X=>{if(!X)return!1;const ve=ie===""||[X.first_name,X.last_name,`${X.first_name||""} ${X.last_name||""}`,X.email,dL(X.role)].filter(Boolean).some(Le=>Le.toString().toLowerCase().includes(ie)),$e=G===""||G==="CEO"&&["CEO","ADMIN"].includes(To(X.role))||To(X.role)===G;return ve&&$e}))},[n,o,c]),oe=Math.max(1,Math.ceil(be.length/D)||1);f.useEffect(()=>{I(1)},[o,c,D]),f.useEffect(()=>{I(ie=>{const G=Math.max(1,Math.ceil(be.length/D)||1);return ie>G?G:ie})},[be.length,D]);const Te=f.useMemo(()=>{const ie=(O-1)*D;return be.slice(ie,ie+D)},[be,O,D]);be.length===0||(O-1)*D+1,Math.min(O*D,be.length);const ue=()=>I(ie=>Math.max(ie-1,1)),Oe=()=>I(ie=>Math.min(ie+1,oe)),xe=()=>{S(Rg),j(!1),N(null),x(!0)},le=ie=>{h(ie),z("Overview"),J(ie?.is_active?"Active":"Inactive")},Fe=ie=>{ie.target.id==="userModalBackdrop"&&!E&&ke()},ke=()=>{h(null)},He=(ie,G)=>{S(X=>({...X,[ie]:G}))},Xe=()=>{const ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*";let G="";for(let X=0;X<10;X+=1)G+=ie.charAt(Math.floor(Math.random()*ie.length));He("password",G)},it=()=>{_||E||(x(!1),S(Rg),N(null),j(!1))},ze=ie=>{S({firstName:ie.first_name||"",lastName:ie.last_name||"",email:ie.email||"",password:"",role:pVe(ie.role)}),j(!0),N(ie.id),x(!0),h(null)},at=ie=>{A({title:"Delete User",message:a.jsxs("span",{children:["Are you sure you want to delete"," ",a.jsxs("span",{className:"font-semibold",children:[ie.first_name," ",ie.last_name]}),"? This action cannot be undone."]}),confirmLabel:"Delete",cancelLabel:"Cancel",variant:"danger",action:{type:"delete",targetId:ie.id,name:`${ie.first_name||""} ${ie.last_name||""}`.trim()||ie.email||"user"}})},Ve=ie=>{ie.preventDefault();const G=w.firstName.trim(),X=w.lastName.trim(),ve=w.email.trim(),$e=w.password.trim(),Le=w.role,me=!(v&&b);if(!G||!ve||!Le){V.warn("Please fill in all required fields.");return}if(me&&!$e){V.warn("Please fill in all required fields.");return}if($e&&$e.length<8){V.warn("Password should be at least 8 characters long.");return}const Re={first_name:G,last_name:X,email:ve,role:Le};(me||$e)&&(Re.password=$e);const qe=`${G} ${X}`.trim(),rt=me?"create":"update";A({title:rt==="create"?"Confirm New User":"Confirm User Update",message:rt==="create"?a.jsxs("span",{children:["Create user ",a.jsx("span",{className:"font-semibold",children:qe})," with role"," ",a.jsx("span",{className:"font-semibold",children:dL(Le)}),"?"]}):a.jsxs("span",{children:["Save changes for"," ",a.jsx("span",{className:"font-semibold",children:qe||ve}),"?"]}),confirmLabel:rt==="create"?"Create User":"Update User",cancelLabel:"Cancel",variant:"primary",action:{type:rt,payload:Re,targetId:b,name:qe||ve}})},Ze=async()=>{if(!T?.action){A(null);return}const{action:ie}=T,{type:G,payload:X,targetId:ve,name:$e}=ie;M(!0),(G==="create"||G==="update")&&k(!0);try{if(G==="create"){const me=(await se.post("/users/createuser",X)).data;await de(),Ne(me.id),V.success(`User "${$e}" created successfully.`),x(!1),S(Rg),N(null),j(!1)}else if(G==="update"){if(!ve)throw new Error("Missing user identifier for update.");const me=(await se.put(`/users/updateuser/${ve}`,X)).data;await de(),h(null),Ne(me.id),V.success(`User "${$e}" updated successfully.`),x(!1),S(Rg),N(null),j(!1)}else if(G==="delete"){if(!ve)throw new Error("Missing user identifier for deletion.");await se.delete(`/users/deleteuser/${ve}`),s(Le=>Le.map(me=>me.id===ve?{...me,is_active:!1}:me)),d&&d.id===ve&&(h(null),J("")),V.success(`User "${$e}" deactivated successfully.`)}}catch(Le){console.error("User management error:",Le);const me=G==="create"?"Failed to create user. Please review the details and try again.":G==="update"?"Failed to update user. Please review the details and try again.":"Failed to delete user. Please try again.",Re=Le.response?.data?.detail||me;V.error(Re)}finally{(G==="create"||G==="update")&&k(!1),M(!1),A(null)}},Je=()=>{E||A(null)},Ue=async()=>{if(!d||!Q)return;const ie=d.is_active?"Active":"Inactive";if(Q===ie)return;const G=Q==="Active";re(!0);try{const ve=(await se.put(`/users/updateuser/${d.id}`,{is_active:G})).data;s($e=>$e.map(Le=>Le.id===ve.id?ve:Le)),h(null),J(""),V.success(`User status updated to ${Q}`)}catch(X){console.error("Failed to update user status:",X);const ve=X.response?.data?.detail||"Failed to update user status. Please try again.";V.error(ve)}finally{re(!1)}},_e=a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 font-inter relative",children:[(r||t||!ne)&&a.jsx(Wt,{}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 sm:mb-6 space-y-2 sm:space-y-0",children:[a.jsxs("h1",{className:"flex items-center text-xl sm:text-2xl font-semibold text-gray-800",children:[a.jsx(pj,{className:"mr-2 text-blue-600"}),"User Management"]}),a.jsx("div",{className:"flex justify-center lg:justify-end w-full sm:w-auto",children:a.jsxs("button",{type:"button",onClick:xe,className:"flex items-center bg-black text-white px-3 sm:px-4 py-2 rounded-md hover:bg-gray-800 text-sm sm:text-base self-end sm:self-auto cursor-pointer",children:[a.jsx(Xa,{className:"mr-2"})," Add User"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm mb-6 flex flex-col lg:flex-row items-center justify-between gap-3 w-full",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg px-4 h-11 w-full lg:w-3/4 focus-within:ring-2 focus-within:ring-indigo-500 transition",children:[a.jsx(Kt,{size:20,className:"text-gray-400 mr-3"}),a.jsx("input",{type:"text",placeholder:"Search users",value:o,onChange:ie=>l(ie.target.value),className:"focus:outline-none text-base w-full"})]}),a.jsx("div",{className:"w-full lg:w-1/4",children:a.jsx("select",{value:c,onChange:ie=>u(ie.target.value),className:"border border-gray-300 rounded-lg px-3 h-11 text-sm text-gray-600 bg-white w-full focus:ring-2 focus:ring-indigo-500 transition",children:pe.map(ie=>a.jsx("option",{value:ie.value,children:ie.label},ie.value))})})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-[600px] border border-gray-200 rounded-lg bg-white shadow-sm text-sm",children:[a.jsx("thead",{className:"bg-gray-100 text-left text-gray-600 text-sm tracking-wide font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"py-3 px-4",children:"Fullname"}),a.jsx("th",{className:"py-3 px-4",children:"Email"}),a.jsx("th",{className:"py-3 px-4",children:"Role"}),a.jsx("th",{className:"py-3 px-4",children:"Status"})]})}),a.jsx("tbody",{children:r?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-500",colSpan:3,children:"Loading users..."})}):be.length===0?a.jsx("tr",{children:a.jsx("td",{className:"py-4 px-4 text-center text-sm text-gray-400",colSpan:4,children:"No users found."})}):Te.map(ie=>a.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${ie.highlight?"bg-green-50":""} ${ie.is_active?"":"opacity-60 bg-gray-50"}`,children:[a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:a.jsxs("div",{className:"font-medium text-blue-600 hover:underline text-sm",children:[ie.first_name," ",ie.last_name]})}),a.jsx("td",{className:"py-3 px-4 cursor-pointer text-sm",onClick:()=>le(ie),children:ie.email}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:BT(ie.role)}),a.jsx("td",{className:"py-3 px-4 cursor-pointer",onClick:()=>le(ie),children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-md ${ie.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:ie.is_active?"Active":"Inactive"})})]},ie.id))})]})}),a.jsx(la,{className:"mt-4",totalItems:be.length,pageSize:D,currentPage:O,onPrev:ue,onNext:Oe,onPageSizeChange:H,label:"users"})]}),he=d?a.jsx("div",{id:"userModalBackdrop",onClick:Fe,className:"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[92vh] overflow-y-auto hide-scrollbar animate-scale-in p-4 sm:p-6 md:p-8 font-inter relative",children:[a.jsx("div",{className:"flex justify-end w-full",children:a.jsx("button",{onClick:ke,className:"text-gray-500 hover:text-gray-700 transition mb-5 cursor-pointer",children:a.jsx(Za,{size:30})})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between lg:flex-row lg:items-center lg:justify-between mt-3 gap-2 px-2 md:items-center lg:gap-4 md:mx-7 lg:mx-7 mb-4 lg:mb-6 md:mb-4",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.profile_picture?a.jsx("img",{src:d.profile_picture,alt:`${d.first_name} ${d.last_name}`,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full object-cover border border-gray-200 shadow-sm"}):a.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center text-lg sm:text-xl font-semibold border border-gray-200 shadow-sm",children:xVe(d.first_name,d.last_name)}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-800",children:[d.first_name," ",d.last_name]}),a.jsx("p",{className:"text-sm text-gray-500 break-all",children:d.email})]})]}),BT(d.role,{size:"md"})]}),!["CEO","ADMIN","GROUP MANAGER","GROUP_MANAGER"].includes(d.role.toUpperCase())&&a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 disabled:opacity-70 transition text-sm focus:outline-none focus:ring-2 focus:ring-blue-400",onClick:()=>ze(d),disabled:E,children:[a.jsx(hn,{className:"mr-2"}),"Edit"]}),a.jsxs("button",{type:"button",className:"inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 rounded-md text-sm bg-red-500 text-white hover:bg-red-600 transition focus:outline-none focus:ring-2 focus:ring-red-400",onClick:()=>at(d),disabled:E,children:[a.jsx(va,{className:"mr-2"}),"Delete"]})]})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6"}),a.jsx("div",{className:"flex w-full bg-[#6A727D] text-white mt-1 overflow-x-auto mb-6",children:["Overview"].map(ie=>a.jsx("button",{onClick:()=>z(ie),className:`flex-1 min-w-[90px] px-4 py-2.5 text-xs sm:text-sm font-medium text-center transition-all duration-200 border-b-2
        ${W===ie?"bg-[#5c636d] text-white border-white":"text-white hover:bg-[#5c636d]"}`,children:ie},ie))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 items-start",children:[a.jsx("div",{className:"lg:col-span-3",children:W==="Overview"&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 sm:p-6 md:p-8 border border-gray-200",children:a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 sm:gap-6 text-sm text-gray-700",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Email:"}),a.jsx("p",{children:d.email||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Role:"}),a.jsx("p",{children:BT(d.role,{size:"sm"})})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Status:"}),a.jsx("p",{children:d.is_active?"Active":"Inactive"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Auth Provider:"}),a.jsx("p",{children:d.auth_provider?d.auth_provider.toString().replace(/\b\w/g,ie=>ie.toUpperCase()):"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Phone Number:"}),a.jsx("p",{children:d.phone_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company:"}),a.jsx("p",{children:d.company?.company_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Company Number:"}),a.jsx("p",{children:d.company?.company_number||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Related to CEO:"}),a.jsx("p",{children:d.manager?`${d.manager.first_name} ${d.manager.last_name}`:"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Created At:"}),a.jsx("p",{children:fH(d.created_at)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Last Login:"}),a.jsx("p",{children:d.last_login?fH(d.last_login):"Never"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold",children:"Profile Picture:"}),a.jsx("p",{children:d.profile_picture?a.jsx("a",{href:d.profile_picture,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline break-all",children:"View image"}):"N/A"})]})]})})}),a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Quick Actions"}),a.jsx("div",{className:"flex flex-col gap-2 w-full",children:a.jsxs("button",{type:"button",onClick:()=>{if(!d.email){alert("No email address available");return}const ie=encodeURIComponent(d.email),G=encodeURIComponent(""),X=encodeURIComponent(""),ve=`https://mail.google.com/mail/?view=cm&fs=1&to=${ie}&su=${G}&body=${X}`;window.open(ve,"_blank")},className:"flex items-center gap-2 border border-gray-100 rounded-md py-1.5 px-2 sm:px-3 hover:bg-gray-50 transition text-sm",children:[a.jsx(sn,{className:"text-gray-600 w-4 h-4"}),"Send E-mail"]})})]}),a.jsxs("div",{className:"bg-white border border-gray-100 rounded-lg p-3 sm:p-4 shadow-sm w-full",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-2 text-sm",children:"Status"}),a.jsxs("select",{className:"border border-gray-200 rounded-md px-2 sm:px-3 py-1.5 w-full text-sm mb-2 focus:ring-2 focus:ring-indigo-500 outline-none",value:Q||(d.is_active?"Active":"Inactive"),onChange:ie=>J(ie.target.value),children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]}),a.jsx("button",{onClick:Ue,disabled:Y||Q===(d.is_active?"Active":"Inactive"),className:`w-full py-1.5 rounded-md text-sm transition focus:outline-none focus:ring-2 ${Y||Q===(d.is_active?"Active":"Inactive")?"bg-gray-400 cursor-not-allowed text-white":"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-400"}`,children:Y?"Updating...":"Update"})]})]})]})]})}):null;return a.jsxs(a.Fragment,{children:[_e,he,a.jsx(bVe,{open:p,isEditing:v,isSubmitting:_,confirmProcessing:E,formData:w,onClose:it,onSubmit:Ve,onChange:He,onGeneratePassword:Xe}),a.jsx(vVe,{open:!!T,title:T?.title,message:T?.message,confirmLabel:T?.confirmLabel,cancelLabel:T?.cancelLabel,variant:T?.variant,loading:E,onConfirm:Ze,onCancel:Je})]})}function bVe({open:e,isEditing:t,isSubmitting:n,confirmProcessing:s,formData:r,onClose:i,onSubmit:o,onChange:l,onGeneratePassword:c}){if(!e)return null;const u=n||s;return a.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-lg border border-gray-200 p-6 sm:p-8 relative overflow-y-auto max-h-[90vh]",children:[a.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-500 hover:text-black transition disabled:opacity-60",disabled:u,children:a.jsx(ea,{size:22})}),a.jsx("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-6 text-center",children:t?"Edit User":"Add New User"}),a.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",onSubmit:o,children:[a.jsx(tv,{label:"First Name",value:r.firstName,onChange:d=>l("firstName",d),placeholder:"John",required:!0,disabled:u}),a.jsx(tv,{label:"Last Name",value:r.lastName,onChange:d=>l("lastName",d),placeholder:"Doe",required:!0,disabled:u}),a.jsx(tv,{label:"Email",type:"email",value:r.email,onChange:d=>l("email",d),placeholder:"john.doe@company.com",required:!0,disabled:u||t}),a.jsx(tv,{label:"Role",type:"select",value:r.role,onChange:d=>l("role",d),options:[{value:"",label:"Select role"},...M1],required:!0,disabled:u}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:"Password"}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[a.jsx("input",{type:"text",value:r.password,onChange:d=>l("password",d.target.value),placeholder:t?"Leave blank to keep current password":"Enter or generate password",required:!t,disabled:u,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"}),a.jsx("button",{type:"button",onClick:c,className:"flex items-center justify-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition disabled:opacity-60",disabled:u,children:"Generate"})]}),t?a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Setting a password will reset the user's credentials; leave it blank to keep the current password."}):a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 md:col-span-2 mt-4",children:[a.jsx("button",{type:"button",onClick:i,className:"w-full sm:w-auto px-4 py-2 text-white bg-red-400 border border-red-300 rounded hover:bg-red-500 transition disabled:opacity-70",disabled:u,children:"Cancel"}),a.jsx("button",{type:"submit",className:"w-full sm:w-auto px-4 py-2 text-white border border-tertiary bg-tertiary rounded hover:bg-secondary transition disabled:opacity-70",disabled:u,children:n?"Saving...":t?"Update User":"Save User"})]})]})]})})}function tv({label:e,type:t="text",value:n,onChange:s,placeholder:r,options:i=[],required:o=!1,disabled:l=!1}){return a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1 text-sm",children:e}),t==="select"?a.jsx("select",{value:n??"",onChange:c=>s(c.target.value),required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100",children:i.map(c=>a.jsx("option",{value:c.value,children:c.label},c.value))}):a.jsx("input",{type:t,value:n??"",onChange:c=>s(c.target.value),placeholder:r,required:o,disabled:l,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none disabled:bg-gray-100"})]})}function vVe({open:e,title:t,message:n,confirmLabel:s,cancelLabel:r="Cancel",variant:i="primary",loading:o=!1,onConfirm:l,onCancel:c}){if(!e)return null;const u=i==="danger"?"bg-red-500 hover:bg-red-600 border border-red-400":"bg-black hover:bg-gray-800 border border-black";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[60]",children:a.jsxs("div",{className:"bg-white w-full max-w-md rounded-xl shadow-lg p-6 border border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:t}),a.jsx("div",{className:"text-sm text-gray-600 mt-2 whitespace-pre-line",children:n}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-2 sm:space-y-0",children:[a.jsx("button",{type:"button",onClick:c,className:"w-full sm:w-auto px-4 py-2 rounded-md border border-gray-300 text-gray-700 hover:bg-gray-100 transition disabled:opacity-70",disabled:o,children:r}),a.jsx("button",{type:"button",onClick:l,className:`w-full sm:w-auto px-4 py-2 rounded-md text-white transition disabled:opacity-70 ${u}`,disabled:o,children:o?"Processing...":s})]})]})})}function wVe(){return a.jsxs(xse,{children:[a.jsx(ire,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored",className:"z-[9999]"}),a.jsxs(Wne,{children:[a.jsx(wt,{path:"/",element:a.jsx(uoe,{})}),a.jsx(wt,{path:"/header",element:a.jsx(g9,{})}),a.jsx(wt,{path:"/signup",element:a.jsx(due,{})}),a.jsx(wt,{path:"/login",element:a.jsx(mue,{})}),a.jsx(wt,{path:"/forgot-password",element:a.jsx(gue,{})}),a.jsx(wt,{path:"/resources",element:a.jsx(vue,{})}),a.jsx(wt,{path:"/legal",element:a.jsx(_ue,{})}),a.jsx(wt,{path:"/admin/quotes/:quoteId/print",element:a.jsx(gl,{requiredRole:"ceo",children:a.jsx(Qb,{})})}),a.jsx(wt,{path:"/sales/quotes/:quoteId/print",element:a.jsx(gl,{requiredRole:"sales",children:a.jsx(Qb,{})})}),a.jsx(wt,{path:"/manager/quotes/:quoteId/print",element:a.jsx(gl,{requiredRole:"manager",children:a.jsx(Qb,{})})}),a.jsx(wt,{path:"/group-manager/quotes/:quoteId/print",element:a.jsx(gl,{requiredRole:"group manager",children:a.jsx(Qb,{})})}),a.jsxs(wt,{path:"/admin",element:a.jsx(gl,{requiredRole:"ceo",children:a.jsx(Tue,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(di,{to:"dashboard",replace:!0})}),a.jsx(wt,{path:"dashboard",element:a.jsx(fCe,{})}),a.jsx(wt,{path:"accounts",element:a.jsx(DCe,{})}),a.jsx(wt,{path:"contacts",element:a.jsx($Ce,{})}),a.jsx(wt,{path:"leads",element:a.jsx(qCe,{})}),a.jsx(wt,{path:"leads/:leadID",element:a.jsx(dY,{})}),a.jsx(wt,{path:"audit",element:a.jsx(MSe,{})}),a.jsx(wt,{path:"targets",element:a.jsx($$e,{})}),a.jsx(wt,{path:"quotes",element:a.jsx(q$e,{})}),a.jsx(wt,{path:"users",element:a.jsx(Z$e,{})}),a.jsx(wt,{path:"manage-account",element:a.jsx(a6e,{})}),a.jsx(wt,{path:"company-details",element:a.jsx(zze,{})}),a.jsx(wt,{path:"deals",element:a.jsx(n6e,{})}),a.jsx(wt,{path:"deals/info",element:a.jsx(CZ,{})}),a.jsx(wt,{path:"deals/quickaction",element:a.jsx(NZ,{})}),a.jsx(wt,{path:"tasks",element:a.jsx(gze,{})}),a.jsxs(wt,{path:"/admin/territory",children:[a.jsx(wt,{index:!0,element:a.jsx(Fc,{})}),a.jsx(wt,{path:":id",element:a.jsx(Fc,{})})]}),a.jsx(wt,{path:"calls",element:a.jsx(o8,{})}),a.jsx(wt,{path:"calls/info",element:a.jsx(o8,{})}),a.jsx(wt,{path:"meetings",element:a.jsx(l8,{})}),a.jsx(wt,{path:"meetings/info",element:a.jsx(l8,{})}),a.jsx(wt,{path:"help",element:a.jsx(Fze,{})})]}),a.jsxs(wt,{path:"/sales",element:a.jsx(gl,{requiredRole:"sales",children:a.jsx(Bze,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(di,{to:"overview",replace:!0})}),a.jsx(wt,{path:"overview",element:a.jsx(fFe,{})}),a.jsx(wt,{path:"accounts",element:a.jsx(pFe,{})}),a.jsx(wt,{path:"contacts",element:a.jsx(vFe,{})}),a.jsx(wt,{path:"leads",element:a.jsx(AFe,{})}),a.jsx(wt,{path:"leads/info",element:a.jsx(dJ,{})}),a.jsx(wt,{path:"leads/convert",element:a.jsx(OFe,{})}),a.jsx(wt,{path:"deals",element:a.jsx(MFe,{})}),a.jsx(wt,{path:"deals/info",element:a.jsx(mJ,{})}),a.jsx(wt,{path:"deals/quickaction",element:a.jsx(uJ,{})}),a.jsx(wt,{path:"quotes",element:a.jsx(VFe,{})}),a.jsx(wt,{path:"targets",element:a.jsx(ZFe,{})}),a.jsx(wt,{path:"audit",element:a.jsx(JFe,{})}),a.jsx(wt,{path:"manage-account",element:a.jsx(Gy,{})}),a.jsxs(wt,{path:"/sales/territory",children:[a.jsx(wt,{index:!0,element:a.jsx(Fc,{})}),a.jsx(wt,{path:":id",element:a.jsx(Fc,{})})]}),a.jsx(wt,{path:"meetings",element:a.jsx(mUe,{})}),a.jsx(wt,{path:"calls",element:a.jsx(pUe,{})}),a.jsx(wt,{path:"tasks",element:a.jsx(nUe,{})})]}),a.jsxs(wt,{path:"/manager",element:a.jsx(gl,{requiredRole:"manager",children:a.jsx(jUe,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(di,{to:"dashboard",replace:!0})}),a.jsx(wt,{path:"dashboard",element:a.jsx(KUe,{})}),a.jsx(wt,{path:"accounts",element:a.jsx(JUe,{})}),a.jsx(wt,{path:"contacts",element:a.jsx(n7e,{})}),a.jsx(wt,{path:"leads",element:a.jsx(d7e,{})}),a.jsx(wt,{path:"leads/info",element:a.jsx(wJ,{})}),a.jsx(wt,{path:"leads/convert",element:a.jsx(x7e,{})}),a.jsx(wt,{path:"deals",element:a.jsx(y7e,{})}),a.jsx(wt,{path:"deals/info",element:a.jsx(NJ,{})}),a.jsx(wt,{path:"deals/quickaction",element:a.jsx(jJ,{})}),a.jsx(wt,{path:"quotes",element:a.jsx(E7e,{})}),a.jsx(wt,{path:"targets",element:a.jsx(M7e,{})}),a.jsx(wt,{path:"meetings",element:a.jsx(a8e,{})}),a.jsx(wt,{path:"audit",element:a.jsx(I7e,{})}),a.jsx(wt,{path:"calls",element:a.jsx(z7e,{})}),a.jsx(wt,{path:"tasks",element:a.jsx(V7e,{})}),a.jsxs(wt,{path:"/manager/territory",children:[a.jsx(wt,{index:!0,element:a.jsx(Fc,{})}),a.jsx(wt,{path:":id",element:a.jsx(Fc,{})})]}),a.jsx(wt,{path:"users",element:a.jsx(o8e,{})}),a.jsx(wt,{path:"manage-account",element:a.jsx(Gy,{})})]}),a.jsx(wt,{children:a.jsxs(wt,{path:"/marketing",element:a.jsx(gl,{requiredRole:"marketing",children:a.jsx(u8e,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(di,{to:"dashboard",replace:!0})}),a.jsx(wt,{path:"dashboard",element:a.jsx(cGe,{})}),a.jsx(wt,{path:"accounts",element:a.jsx(dGe,{})}),a.jsx(wt,{path:"contacts",element:a.jsx(mGe,{})}),a.jsx(wt,{path:"leads",element:a.jsx(yGe,{})}),a.jsx(wt,{path:"leads/info",element:a.jsx(yee,{})}),a.jsx(wt,{path:"leads/convert",element:a.jsx(xee,{})}),a.jsx(wt,{path:"tasks",element:a.jsx(jGe,{})}),a.jsx(wt,{path:"campaigns",element:a.jsx(SGe,{})}),a.jsx(wt,{path:"templates",element:a.jsx(AGe,{})}),a.jsx(wt,{path:"manage-account",element:a.jsx(Gy,{})})]})}),a.jsxs(wt,{path:"/group-manager",element:a.jsx(gl,{requiredRole:"group manager",children:a.jsx(LGe,{})}),children:[a.jsx(wt,{index:!0,element:a.jsx(di,{to:"dashboard",replace:!0})}),a.jsx(wt,{path:"dashboard",element:a.jsx(rWe,{})}),a.jsx(wt,{path:"accounts",element:a.jsx(lWe,{})}),a.jsx(wt,{path:"contacts",element:a.jsx(mWe,{})}),a.jsx(wt,{path:"leads",element:a.jsx(bWe,{})}),a.jsx(wt,{path:"leads/info",element:a.jsx(See,{})}),a.jsx(wt,{path:"leads/convert",element:a.jsx(_We,{})}),a.jsx(wt,{path:"deals",element:a.jsx(TWe,{})}),a.jsx(wt,{path:"deals/info",element:a.jsx(Aee,{})}),a.jsx(wt,{path:"deals/quickaction",element:a.jsx(_ee,{})}),a.jsx(wt,{path:"quotes",element:a.jsx(UWe,{})}),a.jsx(wt,{path:"targets",element:a.jsx(WWe,{})}),a.jsx(wt,{path:"tasks",element:a.jsx(KWe,{})}),a.jsxs(wt,{path:"/group-manager/territory",children:[a.jsx(wt,{index:!0,element:a.jsx(Fc,{})}),a.jsx(wt,{path:":id",element:a.jsx(Fc,{})})]}),a.jsx(wt,{path:"meetings",element:a.jsx(rVe,{})}),a.jsx(wt,{path:"calls",element:a.jsx(cVe,{})}),a.jsx(wt,{path:"audit",element:a.jsx(hVe,{})}),a.jsx(wt,{path:"users",element:a.jsx(yVe,{})}),a.jsx(wt,{path:"manage-account",element:a.jsx(Gy,{})})]})]})]})}Vae.createRoot(document.getElementById("root")).render(a.jsx(f.StrictMode,{children:a.jsx(wVe,{})}));
